var w9=Object.defineProperty;var sb=t=>{throw TypeError(t)};var B9=(t,e,a)=>e in t?w9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Ia=(t,e,a)=>B9(t,typeof e!="symbol"?e+"":e,a),m2=(t,e,a)=>e.has(t)||sb("Cannot "+a);var Ro=(t,e,a)=>(m2(t,e,"read from private field"),a?a.call(t):e.get(t)),sd=(t,e,a)=>e.has(t)?sb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),_2=(t,e,a,n)=>(m2(t,e,"write to private field"),n?n.call(t,a):e.set(t,a),a),ob=(t,e,a)=>(m2(t,e,"access private method"),a);import{b as Ab,m as C9,w as M9,n as Bm,f as vi,c as Xe,o as R9,d as ft,i as $a,e as fr}from"../chunks/CTN8pX-d.js";import{ap as Jv,av as I9,aB as U9,h as Tr,a as xh,aC as Cm,b as Ng,aD as E9,U as I3,aE as kd,X as $1,G as Wr,D as a0,an as q1,am as W1,aF as lb,x as F9,e as Mm,f as _0,p as Dd,aj as _n,g as Yo,aG as T9,aH as S9,s as I1,j as wd,v as Y9,K as W,R as e6,c as N9,r as cb,d as b2,m as L9,t as t6,aI as y2,y as J1,aJ as Rm,aK as P9,q as Q9,aL as k9,at as i6,aM as Im,aN as D9,k as a6,aO as r6,aP as z9,n as Z9,l as H9,E as O9,aQ as X9,aR as V9,A as n6,C as Lg,aS as G9,aT as j9,F as od,ao as K9,aU as $9,aV as q9,B as Um,aW as W9,L as s6,O as J9,w as mi,af as Lr,aX as Th,aY as U1,aZ as o6,ab as kt,z as _i,N as st,a_ as E1,a8 as eo,a$ as A6,a1 as e7,ah as Le,ai as Ee,ad as di,ac as Oe,ae as $t,W as Jr,b0 as Ha,al as ra,a5 as Nr,ag as Em,aA as yn,az as t7,J as Zo}from"../chunks/uVeY05RF.js";import{a as i7,s as xi,m as a7}from"../chunks/DPA7Lulq.js";import{i as It}from"../chunks/BDZFaj7H.js";import{l as r7,p as si,s as zi,a as rr,b as Ho,m as l6}from"../chunks/C9Cc93EH.js";import{f as n7,d as hb,e as hn,o as eg,g as wh,h as c6,s as ja,C as s7,I as tg,j as Pg,r as ks,k as Hr,l as Do,m as ig,b as ag,n as o7,F as ci,M as A7,D as rg,G as Bd,t as ub,p as SA,q as h6,u as u6,v as U3,w as Pl,x as Pn,y as Fs,z as Qg,A as to,B as l7,E as Hl,H as r0,J as c7,a as h7,K as db,L as u7,N as d7,O as f7,i as g7,S as F1,P as LA,Q as p7,R as d6,T as Sh,U as m7,V as _7,W as E3,X as b7,Y as y7,Z as v7,_ as x7,$ as w7,a0 as fb}from"../chunks/FGv5B-aF.js";import{l as f6,g as g6,d as F3,m as gb,S as B7,n as C7,V as kf,e as M7,P as R7,O as I7,j as pb,A as U7,o as E7,W as F7,b as mb,p as T7,q as S7,r as Y7}from"../chunks/BGSar6W7.js";import{i as Xo}from"../chunks/CEaYN3PA.js";import{b as Hn}from"../chunks/DM7M-_Yz.js";import{s as N7,g as L7}from"../chunks/BAymBm2H.js";const P7=[];function Q7(t,e=!1){return T1(t,new Map,"",P7)}function T1(t,e,a,n,c=null){if(typeof t=="object"&&t!==null){var f=e.get(t);if(f!==void 0)return f;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Jv(t)){var u=Array(t.length);e.set(t,u),c!==null&&e.set(c,u);for(var s=0;s<t.length;s+=1){var x=t[s];s in t&&(u[s]=T1(x,e,a,n))}return u}if(I9(t)===U9){u={},e.set(t,u),c!==null&&e.set(c,u);for(var B in t)u[B]=T1(t[B],e,a,n);return u}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return T1(t.toJSON(),e,a,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}const v2=0,Df=1,x2=2;function S1(t,e,a,n,c){Tr&&xh();var f=t,u=Cm(),s=F9,x=I3,B,I,R,F=(u?$1:Wr)(void 0),M=(u?$1:Wr)(void 0),N=!1;function D(X,ee){N=!0,ee&&(q1(V),W1(V),lb(s));try{X===Df&&n&&(I?Mm(I):I=_0(()=>n(f,F))),X!==v2&&B&&Dd(B,()=>B=null),X!==Df&&I&&Dd(I,()=>I=null),X!==x2&&R&&Dd(R,()=>R=null)}finally{ee&&(lb(null),W1(null),q1(null),_n())}}var V=Ng(()=>{if(x!==(x=e())){if(E9(x)){var X=x;N=!1,X.then(ee=>{X===x&&(kd(F,ee),D(Df,!0))},ee=>{if(X===x)throw kd(M,ee),D(x2,!0),M.v}),Tr||a0(()=>{N||D(v2,!0)})}else kd(F,x),D(Df,!1);return()=>x=I3}});Tr&&(f=Yo)}function _b(t,e,a){Tr&&xh();var n=t,c=I3,f,u=Cm()?T9:S9;Ng(()=>{u(c,c=e())&&(f&&Dd(f),f=_0(()=>a(n)))}),Tr&&(n=Yo)}let Y1=null;function pr(t,e){return e}function k7(t,e,a,n){for(var c=[],f=e.length,u=0;u<f;u++)P9(e[u].e,c,!0);var s=f>0&&c.length===0&&a!==null;if(s){var x=a.parentNode;Q9(x),x.append(a),n.clear(),wA(t,e[0].prev,e[f-1].next)}k9(c,()=>{for(var B=0;B<f;B++){var I=e[B];s||(n.delete(I.k),wA(t,I.prev,I.next)),i6(I.e,!s)}})}function Ea(t,e,a,n,c,f=null){var u=t,s={flags:e,items:new Map,first:null},x=(e&r6)!==0;if(x){var B=t;u=Tr?I1(wd(B)):B.appendChild(Y9())}Tr&&xh();var I=null,R=!1,F=e6(()=>{var M=a();return Jv(M)?M:M==null?[]:t6(M)});Ng(()=>{var M=W(F),N=M.length;if(R&&N===0)return;R=N===0;let D=!1;if(Tr){var V=u.data===N9;V!==(N===0)&&(u=cb(),I1(u),b2(!1),D=!0)}if(Tr){for(var X=null,ee,Ae=0;Ae<N;Ae++){if(Yo.nodeType===8&&Yo.data===L9){u=Yo,D=!0,b2(!1);break}var ce=M[Ae],ue=n(ce,Ae);ee=p6(Yo,s,X,null,ce,ue,Ae,c,e,a),s.items.set(ue,ee),X=ee}N>0&&I1(cb())}Tr||D7(M,s,u,c,e,n,a),f!==null&&(N===0?I?Mm(I):I=_0(()=>f(u)):I!==null&&Dd(I,()=>{I=null})),D&&b2(!0),W(F)}),Tr&&(u=Yo)}function D7(t,e,a,n,c,f,u){var Ve,ut,at,et;var s=(c&z9)!==0,x=(c&(Im|Rm))!==0,B=t.length,I=e.items,R=e.first,F=R,M,N=null,D,V=[],X=[],ee,Ae,ce,ue;if(s)for(ue=0;ue<B;ue+=1)ee=t[ue],Ae=f(ee,ue),ce=I.get(Ae),ce!==void 0&&((Ve=ce.a)==null||Ve.measure(),(D??(D=new Set)).add(ce));for(ue=0;ue<B;ue+=1){if(ee=t[ue],Ae=f(ee,ue),ce=I.get(Ae),ce===void 0){var oe=F?F.e.nodes_start:a;N=p6(oe,e,N,N===null?e.first:N.next,ee,Ae,ue,n,c,u),I.set(Ae,N),V=[],X=[],F=N.next;continue}if(x&&z7(ce,ee,ue,c),ce.e.f&y2&&(Mm(ce.e),s&&((ut=ce.a)==null||ut.unfix(),(D??(D=new Set)).delete(ce))),ce!==F){if(M!==void 0&&M.has(ce)){if(V.length<X.length){var q=X[0],H;N=q.prev;var $=V[0],de=V[V.length-1];for(H=0;H<V.length;H+=1)bb(V[H],q,a);for(H=0;H<X.length;H+=1)M.delete(X[H]);wA(e,$.prev,de.next),wA(e,N,$),wA(e,de,q),F=q,N=de,ue-=1,V=[],X=[]}else M.delete(ce),bb(ce,F,a),wA(e,ce.prev,ce.next),wA(e,ce,N===null?e.first:N.next),wA(e,N,ce),N=ce;continue}for(V=[],X=[];F!==null&&F.k!==Ae;)F.e.f&y2||(M??(M=new Set)).add(F),X.push(F),F=F.next;if(F===null)continue;ce=F}V.push(ce),N=ce,F=ce.next}if(F!==null||M!==void 0){for(var ge=M===void 0?[]:t6(M);F!==null;)F.e.f&y2||ge.push(F),F=F.next;var ye=ge.length;if(ye>0){var we=c&r6&&B===0?a:null;if(s){for(ue=0;ue<ye;ue+=1)(at=ge[ue].a)==null||at.measure();for(ue=0;ue<ye;ue+=1)(et=ge[ue].a)==null||et.fix()}k7(e,ge,we,I)}}s&&a0(()=>{var xt;if(D!==void 0)for(ce of D)(xt=ce.a)==null||xt.apply()}),J1.first=e.first&&e.first.e,J1.last=N&&N.e}function z7(t,e,a,n){n&Im&&kd(t.v,e),n&Rm?kd(t.i,a):t.i=a}function p6(t,e,a,n,c,f,u,s,x,B){var I=Y1,R=(x&Im)!==0,F=(x&D9)===0,M=R?F?Wr(c):$1(c):c,N=x&Rm?$1(u):u,D={i:N,v:M,k:f,a:null,e:null,prev:a,next:n};Y1=D;try{return D.e=_0(()=>s(t,M,N,B),Tr),D.e.prev=a&&a.e,D.e.next=n&&n.e,a===null?e.first=D:(a.next=D,a.e.next=D.e),n!==null&&(n.prev=D,n.e.prev=D.e),D}finally{Y1=I}}function bb(t,e,a){for(var n=t.next?t.next.e.nodes_start:a,c=e?e.e.nodes_start:a,f=t.e.nodes_start;f!==n;){var u=a6(f);c.before(f),f=u}}function wA(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function m6(t,e,a,n,c){var f=t,u="",s;Ng(()=>{if(u===(u=e()??"")){Tr&&xh();return}s!==void 0&&(i6(s),s=void 0),u!==""&&(s=_0(()=>{if(Tr){Yo.data;for(var x=xh(),B=x;x!==null&&(x.nodeType!==8||x.data!=="");)B=x,x=a6(x);if(x===null)throw Z9(),H9;Ab(Yo,B),f=I1(x);return}var I=u+"";a&&(I=`<svg>${I}</svg>`);var R=C9(I);if((a||n)&&(R=wd(R)),Ab(wd(R),R.lastChild),a||n)for(;wd(R);)f.before(wd(R));else f.before(R)}))})}function w2(t,e,a,n,c){var s;Tr&&xh();var f=(s=e.$$slots)==null?void 0:s[a],u=!1;f===!0&&(f=e[a==="default"?"children":a],u=!0),f===void 0||f(t,u?()=>n:n)}const Z7=()=>performance.now(),No={tick:t=>requestAnimationFrame(t),now:()=>Z7(),tasks:new Set};function _6(){const t=No.now();No.tasks.forEach(e=>{e.c(t)||(No.tasks.delete(e),e.f())}),No.tasks.size!==0&&No.tick(_6)}function H7(t){let e;return No.tasks.size===0&&No.tick(_6),{promise:new Promise(a=>{No.tasks.add(e={c:t,f:a})}),abort(){No.tasks.delete(e)}}}function zf(t,e){M9(()=>{t.dispatchEvent(new CustomEvent(e))})}function O7(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function yb(t){const e={},a=t.split(";");for(const n of a){const[c,f]=n.split(":");if(!c||f===void 0)break;const u=O7(c.trim());e[u]=f.trim()}return e}const X7=t=>t;function b6(t,e,a){var n=Y1,c,f,u,s=null;n.a??(n.a={element:t,measure(){c=this.element.getBoundingClientRect()},apply(){if(u==null||u.abort(),f=this.element.getBoundingClientRect(),c.left!==f.left||c.right!==f.right||c.top!==f.top||c.bottom!==f.bottom){const x=e()(this.element,{from:c,to:f},a==null?void 0:a());u=ng(this.element,x,void 0,1,()=>{u==null||u.abort(),u=void 0})}},fix(){if(!t.getAnimations().length){var{position:x,width:B,height:I}=getComputedStyle(t);if(x!=="absolute"&&x!=="fixed"){var R=t.style;s={position:R.position,width:R.width,height:R.height,transform:R.transform},R.position="absolute",R.width=B,R.height=I;var F=t.getBoundingClientRect();if(c.left!==F.left||c.top!==F.top){var M=`translate(${c.left-F.left}px, ${c.top-F.top}px)`;R.transform=R.transform?`${R.transform} ${M}`:M}}}},unfix(){if(s){var x=t.style;x.position=s.position,x.width=s.width,x.height=s.height,x.transform=s.transform}}}),n.a.element=t}function ba(t,e,a,n){var c=(t&$9)!==0,f=(t&q9)!==0,u=c&&f,s=(t&G9)!==0,x=u?"both":c?"in":"out",B,I=e.inert,R=e.style.overflow,F,M;function N(){var Ae=K9,ce=J1;W1(null),q1(null);try{return B??(B=a()(e,(n==null?void 0:n())??{},{direction:x}))}finally{W1(Ae),q1(ce)}}var D={is_global:s,in(){var Ae;if(e.inert=I,!c){M==null||M.abort(),(Ae=M==null?void 0:M.reset)==null||Ae.call(M);return}f||F==null||F.abort(),zf(e,"introstart"),F=ng(e,N(),M,1,()=>{zf(e,"introend"),F==null||F.abort(),F=B=void 0,e.style.overflow=R})},out(Ae){if(!f){Ae==null||Ae(),B=void 0;return}e.inert=!0,zf(e,"outrostart"),M=ng(e,N(),F,0,()=>{zf(e,"outroend"),Ae==null||Ae()})},stop:()=>{F==null||F.abort(),M==null||M.abort()}},V=J1;if((V.transitions??(V.transitions=[])).push(D),c&&i7){var X=s;if(!X){for(var ee=V.parent;ee&&ee.f&O9;)for(;(ee=ee.parent)&&!(ee.f&X9););X=!ee||(ee.f&V9)!==0}X&&n6(()=>{Lg(()=>D.in())})}}function ng(t,e,a,n,c){var f=n===1;if(j9(e)){var u,s=!1;return a0(()=>{if(!s){var V=e({direction:f?"in":"out"});u=ng(t,V,a,n,c)}}),{abort:()=>{s=!0,u==null||u.abort()},deactivate:()=>u.deactivate(),reset:()=>u.reset(),t:()=>u.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return c(),{abort:od,deactivate:od,reset:od,t:()=>n};const{delay:x=0,css:B,tick:I,easing:R=X7}=e;var F=[];if(f&&a===void 0&&(I&&I(0,1),B)){var M=yb(B(0,1));F.push(M,M)}var N=()=>1-n,D=t.animate(F,{duration:x});return D.onfinish=()=>{var V=(a==null?void 0:a.t())??1-n;a==null||a.abort();var X=n-V,ee=e.duration*Math.abs(X),Ae=[];if(ee>0){var ce=!1;if(B)for(var ue=Math.ceil(ee/16.666666666666668),oe=0;oe<=ue;oe+=1){var q=V+X*R(oe/ue),H=yb(B(q,1-q));Ae.push(H),ce||(ce=H.overflow==="hidden")}ce&&(t.style.overflow="hidden"),N=()=>{var $=D.currentTime;return V+X*R($/ee)},I&&H7(()=>{if(D.playState!=="running")return!1;var $=N();return I($,1-$),!0})}D=t.animate(Ae,{duration:ee,fill:"forwards"}),D.onfinish=()=>{N=()=>n,I==null||I(n,1-n),c()}},{abort:()=>{D&&(D.cancel(),D.effect=null,D.onfinish=od)},deactivate:()=>{c=od},reset:()=>{n===0&&(I==null||I(1,0))},t:()=>N()}}function kg(t,e,a=e){var n=Cm();Bm(t,"input",c=>{var f=c?t.defaultValue:t.value;if(f=C2(t)?M2(f):f,a(f),n&&f!==(f=e())){var u=t.selectionStart,s=t.selectionEnd;t.value=f??"",s!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(s,t.value.length))}}),(Tr&&t.defaultValue!==t.value||Lg(e)==null&&t.value)&&a(C2(t)?M2(t.value):t.value),Um(()=>{var c=e();C2(t)&&c===M2(t.value)||t.type==="date"&&!c&&!t.value||c!==t.value&&(t.value=c??"")})}const B2=new Set;function Dg(t,e,a,n,c=n){var f=a.getAttribute("type")==="checkbox",u=t;let s=!1;if(e!==null)for(var x of e)u=u[x]??(u[x]=[]);u.push(a),Bm(a,"change",()=>{var B=a.__value;f&&(B=vb(u,B,a.checked)),c(B)},()=>c(f?[]:null)),Um(()=>{var B=n();if(Tr&&a.defaultChecked!==a.checked){s=!0;return}f?(B=B||[],a.checked=B.includes(a.__value)):a.checked=W9(a.__value,B)}),s6(()=>{var B=u.indexOf(a);B!==-1&&u.splice(B,1)}),B2.has(u)||(B2.add(u),a0(()=>{u.sort((B,I)=>B.compareDocumentPosition(I)===4?-1:1),B2.delete(u)})),a0(()=>{if(s){var B;if(f)B=vb(u,B,a.checked);else{var I=u.find(R=>R.checked);B=I==null?void 0:I.__value}c(B)}})}function Fm(t,e,a=e){Bm(t,"change",n=>{var c=n?t.defaultChecked:t.checked;a(c)}),(Tr&&t.defaultChecked!==t.checked||Lg(e)==null)&&a(t.checked),Um(()=>{var n=e();t.checked=!!n})}function vb(t,e,a){for(var n=new Set,c=0;c<t.length;c+=1)t[c].checked&&n.add(t[c].__value);return a||n.delete(e),Array.from(n)}function C2(t){var e=t.type;return e==="number"||e==="range"}function M2(t){return t===""?null:+t}function V7(t,e,a){var n=J9(t,e);n&&n.set&&(t[e]=a,s6(()=>{t[e]=null}))}var MA,vh,m0,Sg,y6;const Yg=class Yg{constructor(e){sd(this,Sg);sd(this,MA,new WeakMap);sd(this,vh);sd(this,m0);_2(this,m0,e)}observe(e,a){var n=Ro(this,MA).get(e)||new Set;return n.add(a),Ro(this,MA).set(e,n),ob(this,Sg,y6).call(this).observe(e,Ro(this,m0)),()=>{var c=Ro(this,MA).get(e);c.delete(a),c.size===0&&(Ro(this,MA).delete(e),Ro(this,vh).unobserve(e))}}};MA=new WeakMap,vh=new WeakMap,m0=new WeakMap,Sg=new WeakSet,y6=function(){return Ro(this,vh)??_2(this,vh,new ResizeObserver(e=>{for(var a of e){Yg.entries.set(a.target,a);for(var n of Ro(this,MA).get(a.target)||[])n(a)}}))},Ia(Yg,"entries",new WeakMap);let T3=Yg;var G7=new T3({box:"border-box"});function xb(t,e,a){var n=G7.observe(t,()=>a(t[e]));n6(()=>(Lg(()=>a(t[e])),n))}var Yn=63710088e-1,j7={centimeters:Yn*100,centimetres:Yn*100,degrees:360/(2*Math.PI),feet:Yn*3.28084,inches:Yn*39.37,kilometers:Yn/1e3,kilometres:Yn/1e3,meters:Yn,metres:Yn,miles:Yn/1609.344,millimeters:Yn*1e3,millimetres:Yn*1e3,nauticalmiles:Yn/1852,radians:1,yards:Yn*1.0936};function K7(t,e,a={}){const n={type:"Feature"};return(a.id===0||a.id)&&(n.id=a.id),a.bbox&&(n.bbox=a.bbox),n.properties=e||{},n.geometry=t,n}function $7(t,e,a={}){for(const c of t){if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(c[c.length-1].length!==c[0].length)throw new Error("First and last Position are not equivalent.");for(let f=0;f<c[c.length-1].length;f++)if(c[c.length-1][f]!==c[0][f])throw new Error("First and last Position are not equivalent.")}return K7({type:"Polygon",coordinates:t},e,a)}function q7(t,e="kilometers"){const a=j7[e];if(!a)throw new Error(e+" units is invalid");return t*a}function W7(t){return t%(2*Math.PI)*180/Math.PI}function RA(t){return t%360*Math.PI/180}function sg(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function v6(t,e,a={}){if(a.final===!0)return J7(t,e);const n=sg(t),c=sg(e),f=RA(n[0]),u=RA(c[0]),s=RA(n[1]),x=RA(c[1]),B=Math.sin(u-f)*Math.cos(x),I=Math.cos(s)*Math.sin(x)-Math.sin(s)*Math.cos(x)*Math.cos(u-f);return W7(Math.atan2(B,I))}function J7(t,e){let a=v6(e,t);return a=(a+180)%360,a}var eB=v6;function x6(t,e,a={}){var n=sg(t),c=sg(e),f=RA(c[1]-n[1]),u=RA(c[0]-n[0]),s=RA(n[1]),x=RA(c[1]),B=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(s)*Math.cos(x);return q7(2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B)),a.units)}var tB=x6;function iB(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return w6(t);case"FeatureCollection":return aB(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Tm(t);default:throw new Error("unknown GeoJSON type")}}function w6(t){const e={type:"Feature"};return Object.keys(t).forEach(a=>{switch(a){case"type":case"properties":case"geometry":return;default:e[a]=t[a]}}),e.properties=B6(t.properties),t.geometry==null?e.geometry=null:e.geometry=Tm(t.geometry),e}function B6(t){const e={};return t&&Object.keys(t).forEach(a=>{const n=t[a];typeof n=="object"?n===null?e[a]=null:Array.isArray(n)?e[a]=n.map(c=>c):e[a]=B6(n):e[a]=n}),e}function aB(t){const e={type:"FeatureCollection"};return Object.keys(t).forEach(a=>{switch(a){case"type":case"features":return;default:e[a]=t[a]}}),e.features=t.features.map(a=>w6(a)),e}function Tm(t){const e={type:t.type};return t.bbox&&(e.bbox=t.bbox),t.type==="GeometryCollection"?(e.geometries=t.geometries.map(a=>Tm(a)),e):(e.coordinates=C6(t.coordinates),e)}function C6(t){const e=t;return typeof e[0]!="object"?e.slice():e.map(a=>C6(a))}var rB=Object.defineProperty,nB=Object.defineProperties,sB=Object.getOwnPropertyDescriptors,wb=Object.getOwnPropertySymbols,oB=Object.prototype.hasOwnProperty,AB=Object.prototype.propertyIsEnumerable,Bb=(t,e,a)=>e in t?rB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Cb=(t,e)=>{for(var a in e||(e={}))oB.call(e,a)&&Bb(t,a,e[a]);if(wb)for(var a of wb(e))AB.call(e,a)&&Bb(t,a,e[a]);return t},Mb=(t,e)=>nB(t,sB(e));function lB(t,e,a={}){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");let n=1/0,c=0;n7(e,(u,s)=>{const x=x6(t,u,a);x<n&&(c=s,n=x)});const f=iB(e.features[c]);return Mb(Cb({},f),{properties:Mb(Cb({},f.properties),{featureIndex:c,distanceToPoint:n})})}var Rb=lB;class cB extends Error{constructor(e="The operation was aborted"){super(e),this.name="AbortError"}}function M6(t,e,{signal:a,edges:n}={}){let c,f=null;const u=n!=null&&n.includes("leading"),s=n==null||n.includes("trailing"),x=()=>{f!==null&&(t.apply(c,f),c=void 0,f=null)},B=()=>{s&&x(),M()};let I=null;const R=()=>{I!=null&&clearTimeout(I),I=setTimeout(()=>{I=null,B()},e)},F=()=>{I!==null&&(clearTimeout(I),I=null)},M=()=>{F(),c=void 0,f=null},N=()=>{F(),x()},D=function(...V){if(a!=null&&a.aborted)return;c=this,f=V;const X=I==null;R(),u&&X&&x()};return D.schedule=R,D.cancel=M,D.flush=N,a==null||a.addEventListener("abort",M,{once:!0}),D}function N1(t,{signal:e}={}){return new Promise((a,n)=>{const c=()=>{n(new cB)},f=()=>{clearTimeout(u),c()};if(e!=null&&e.aborted)return c();const u=setTimeout(()=>{e==null||e.removeEventListener("abort",f),a()},t);e==null||e.addEventListener("abort",f,{once:!0})})}var R6={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */(function(t,e){(function(a,n){t.exports=n()})(f6,function(){var a={},n={};function c(u,s,x){if(n[u]=x,u==="index"){var B="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",I={};return n.shared(I),n.index(a,I),typeof window<"u"&&a.setWorkerUrl(window.URL.createObjectURL(new Blob([B],{type:"text/javascript"}))),a}}c("shared",["exports"],function(u){function s(A,r,l,h){return new(l||(l=Promise))(function(m,y){function v(S){try{E(h.next(S))}catch(P){y(P)}}function C(S){try{E(h.throw(S))}catch(P){y(P)}}function E(S){var P;S.done?m(S.value):(P=S.value,P instanceof l?P:new l(function(k){k(P)})).then(v,C)}E((h=h.apply(A,r||[])).next())})}function x(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var B,I;function R(){if(I)return B;function A(r,l){this.x=r,this.y=l}return I=1,B=A,A.prototype={clone:function(){return new A(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,l){return this.clone()._rotateAround(r,l)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var l=r.x-this.x,h=r.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,l){return Math.atan2(this.x*l-this.y*r,this.x*r+this.y*l)},_matMult:function(r){var l=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=l,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var l=Math.cos(r),h=Math.sin(r),m=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=m,this},_rotateAround:function(r,l){var h=Math.cos(r),m=Math.sin(r),y=l.y+m*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-m*(this.y-l.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(r){return r instanceof A?r:Array.isArray(r)?new A(r[0],r[1]):r},B}typeof SuppressedError=="function"&&SuppressedError;var F,M,N=x(R()),D=function(){if(M)return F;function A(r,l,h,m){this.cx=3*r,this.bx=3*(h-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=l,this.p2x=h,this.p2y=m}return M=1,F=A,A.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,l){if(l===void 0&&(l=1e-6),r<0)return 0;if(r>1)return 1;for(var h=r,m=0;m<8;m++){var y=this.sampleCurveX(h)-r;if(Math.abs(y)<l)return h;var v=this.sampleCurveDerivativeX(h);if(Math.abs(v)<1e-6)break;h-=y/v}var C=0,E=1;for(h=r,m=0;m<20&&(y=this.sampleCurveX(h),!(Math.abs(y-r)<l));m++)r>y?C=h:E=h,h=.5*(E-C)+C;return h},solve:function(r,l){return this.sampleCurveY(this.solveCurveX(r,l))}},F}(),V=x(D);let X,ee;function Ae(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function ce(){if(ee==null&&(ee=!1,Ae())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const m=4*h;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const l=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){ee=!0;break}}}return ee||!1}var ue=1e-6,oe=typeof Float32Array<"u"?Float32Array:Array;function q(){var A=new oe(9);return oe!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}function H(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function $(){var A=new oe(3);return oe!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function de(A){return Math.hypot(A[0],A[1],A[2])}function ge(A,r,l){var h=new oe(3);return h[0]=A,h[1]=r,h[2]=l,h}Math.hypot||(Math.hypot=function(){for(var A=0,r=arguments.length;r--;)A+=arguments[r]*arguments[r];return Math.sqrt(A)});var ye,we=de;function Ve(A,r,l){var h=r[0],m=r[1],y=r[2],v=r[3];return A[0]=l[0]*h+l[4]*m+l[8]*y+l[12]*v,A[1]=l[1]*h+l[5]*m+l[9]*y+l[13]*v,A[2]=l[2]*h+l[6]*m+l[10]*y+l[14]*v,A[3]=l[3]*h+l[7]*m+l[11]*y+l[15]*v,A}function ut(){var A=new oe(4);return oe!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A[3]=1,A}function at(){var A=new oe(2);return oe!=Float32Array&&(A[0]=0,A[1]=0),A}function et(A,r){var l=new oe(2);return l[0]=A,l[1]=r,l}$(),ye=new oe(4),oe!=Float32Array&&(ye[0]=0,ye[1]=0,ye[2]=0,ye[3]=0),$(),ge(1,0,0),ge(0,1,0),ut(),ut(),q(),at();const xt=8192;function Mt(A,r,l){return r*(xt/(A.tileSize*Math.pow(2,l-A.tileID.overscaledZ)))}function Yt(A,r){return(A%r+r)%r}function rt(A,r,l){return A*(1-l)+r*l}function pt(A){if(A<=0)return 0;if(A>=1)return 1;const r=A*A,l=r*A;return 4*(A<.5?l:3*(A-r)+l-.75)}function je(A,r,l,h){const m=new V(A,r,l,h);return y=>m.solve(y)}const Qe=je(.25,.1,.25,1);function tt(A,r,l){return Math.min(l,Math.max(r,A))}function bt(A,r,l){const h=l-r,m=((A-r)%h+h)%h+r;return m===r?l:m}function dt(A,...r){for(const l of r)for(const h in l)A[h]=l[h];return A}let _t=1;function zt(A,r,l){const h={};for(const m in A)h[m]=r.call(this,A[m],m,A);return h}function Qt(A,r,l){const h={};for(const m in A)r.call(this,A[m],m,A)&&(h[m]=A[m]);return h}function Ct(A){return Array.isArray(A)?A.map(Ct):typeof A=="object"&&A?zt(A,Ct):A}const Zt={};function Ai(A){Zt[A]||(typeof console<"u"&&console.warn(A),Zt[A]=!0)}function Nt(A,r,l){return(l.y-A.y)*(r.x-A.x)>(r.y-A.y)*(l.x-A.x)}function Dt(A){return typeof WorkerGlobalScope<"u"&&A!==void 0&&A instanceof WorkerGlobalScope}let li=null;function pi(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}const Kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function gt(A,r,l,h,m){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(A,{timestamp:0});try{const v=y==null?void 0:y.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);const C=v.startsWith("BGR"),E=new Uint8ClampedArray(h*m*4);if(yield y.copyTo(E,function(S,P,k,O,j){const K=4*Math.max(1,0),ie=(Math.max(0,k)-k)*O*4+K,he=4*O,be=Math.max(0,P),Ne=Math.max(0,k);return{rect:{x:be,y:Ne,width:Math.min(S.width,P+O)-be,height:Math.min(S.height,k+j)-Ne},layout:[{offset:ie,stride:he}]}}(A,r,l,h,m)),C)for(let S=0;S<E.length;S+=4){const P=E[S];E[S]=E[S+2],E[S+2]=P}return E}finally{y.close()}})}let oi,qi;function Si(A,r,l,h){return A.addEventListener(r,l,h),{unsubscribe:()=>{A.removeEventListener(r,l,h)}}}function fa(A){return A/Math.PI*180}const Ri={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ea={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},wi="AbortError";function ji(){return new Error(wi)}const ha={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Cr(A){return ha.REGISTERED_PROTOCOLS[A.substring(0,A.indexOf("://"))]}const Oa="global-dispatcher";class Xa extends Error{constructor(r,l,h,m){super(`AJAXError: ${l} (${r}): ${h}`),this.status=r,this.statusText=l,this.url=h,this.body=m}}const sa=()=>Dt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,na=function(A,r){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){const h=Cr(A.url);if(h)return h(A,r);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,targetMapId:Oa},r)}if(!(/^file:/.test(l=A.url)||/^file:/.test(sa())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return s(this,void 0,void 0,function*(){const y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:sa(),signal:m.signal});let v,C;h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");try{v=yield fetch(y)}catch(S){throw new Xa(0,S.message,h.url,new Blob)}if(!v.ok){const S=yield v.blob();throw new Xa(v.status,v.statusText,h.url,S)}C=h.type==="arrayBuffer"||h.type==="image"?v.arrayBuffer():h.type==="json"?v.json():v.text();const E=yield C;if(m.signal.aborted)throw ji();return{data:E,cacheControl:v.headers.get("Cache-Control"),expires:v.headers.get("Expires")}})}(A,r);if(Dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,mustQueue:!0,targetMapId:Oa},r)}var l;return function(h,m){return new Promise((y,v)=>{var C;const E=new XMLHttpRequest;E.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(E.responseType="arraybuffer");for(const S in h.headers)E.setRequestHeader(S,h.headers[S]);h.type==="json"&&(E.responseType="text",!((C=h.headers)===null||C===void 0)&&C.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=h.credentials==="include",E.onerror=()=>{v(new Error(E.statusText))},E.onload=()=>{if(!m.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let S=E.response;if(h.type==="json")try{S=JSON.parse(E.response)}catch(P){return void v(P)}y({data:S,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const S=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});v(new Xa(E.status,E.statusText,h.url,S))}},m.signal.addEventListener("abort",()=>{E.abort(),v(ji())}),E.send(h.body)})}(A,r)};function va(A){if(!A||A.indexOf("://")<=0||A.indexOf("data:image/")===0||A.indexOf("blob:")===0)return!0;const r=new URL(A),l=window.location;return r.protocol===l.protocol&&r.host===l.host}function ze(A,r,l){l[A]&&l[A].indexOf(r)!==-1||(l[A]=l[A]||[],l[A].push(r))}function ae(A,r,l){if(l&&l[A]){const h=l[A].indexOf(r);h!==-1&&l[A].splice(h,1)}}class re{constructor(r,l={}){dt(this,l),this.type=r}}class fe extends re{constructor(r,l={}){super("error",dt({error:r},l))}}class ve{on(r,l){return this._listeners=this._listeners||{},ze(r,l,this._listeners),{unsubscribe:()=>{this.off(r,l)}}}off(r,l){return ae(r,l,this._listeners),ae(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ze(r,l,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,l){typeof r=="string"&&(r=new re(r,l||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const C of m)C.call(this,r);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const C of y)ae(h,C,this._oneTimeListeners),C.call(this,r);const v=this._eventedParent;v&&(dt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(r))}else r instanceof fe&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ke=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ge(A,r){const l={};for(const h in A)h!=="ref"&&(l[h]=A[h]);return ke.forEach(h=>{h in r&&(l[h]=r[h])}),l}function Ie(A,r){if(Array.isArray(A)){if(!Array.isArray(r)||A.length!==r.length)return!1;for(let l=0;l<A.length;l++)if(!Ie(A[l],r[l]))return!1;return!0}if(typeof A=="object"&&A!==null&&r!==null){if(typeof r!="object"||Object.keys(A).length!==Object.keys(r).length)return!1;for(const l in A)if(!Ie(A[l],r[l]))return!1;return!0}return A===r}function We(A,r){A.push(r)}function Te(A,r,l){We(l,{command:"addSource",args:[A,r[A]]})}function ne(A,r,l){We(r,{command:"removeSource",args:[A]}),l[A]=!0}function Se(A,r,l,h){ne(A,l,h),Te(A,r,l)}function Ue(A,r,l){let h;for(h in A[l])if(Object.prototype.hasOwnProperty.call(A[l],h)&&h!=="data"&&!Ie(A[l][h],r[l][h]))return!1;for(h in r[l])if(Object.prototype.hasOwnProperty.call(r[l],h)&&h!=="data"&&!Ie(A[l][h],r[l][h]))return!1;return!0}function Ze(A,r,l,h,m,y){A=A||{},r=r||{};for(const v in A)Object.prototype.hasOwnProperty.call(A,v)&&(Ie(A[v],r[v])||l.push({command:y,args:[h,v,r[v],m]}));for(const v in r)Object.prototype.hasOwnProperty.call(r,v)&&!Object.prototype.hasOwnProperty.call(A,v)&&(Ie(A[v],r[v])||l.push({command:y,args:[h,v,r[v],m]}))}function ct(A){return A.id}function Bt(A,r){return A[r.id]=r,A}class He{constructor(r,l,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function mt(A,...r){for(const l of r)for(const h in l)A[h]=l[h];return A}class Wt extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}class ei{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[h,m]of l)this.bindings[h]=m}concat(r){return new ei(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const ai={kind:"null"},Je={kind:"number"},Tt={kind:"string"},Ot={kind:"boolean"},ta={kind:"color"},oa={kind:"projectionDefinition"},Bi={kind:"object"},Gt={kind:"value"},Bn={kind:"collator"},Xt={kind:"formatted"},De={kind:"padding"},Ft={kind:"resolvedImage"},ni={kind:"variableAnchorOffsetCollection"};function Ui(A,r){return{kind:"array",itemType:A,N:r}}function Ei(A){if(A.kind==="array"){const r=Ei(A.itemType);return typeof A.N=="number"?`array<${r}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${r}>`}return A.kind}const Zi=[ai,Je,Tt,Ot,ta,oa,Xt,Bi,Ui(Gt),De,Ft,ni];function Va(A,r){if(r.kind==="error")return null;if(A.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Va(A.itemType,r.itemType))&&(typeof A.N!="number"||A.N===r.N))return null}else{if(A.kind===r.kind)return null;if(A.kind==="value"){for(const l of Zi)if(!Va(l,r))return null}}return`Expected ${Ei(A)} but found ${Ei(r)} instead.`}function Pr(A,r){return r.some(l=>l.kind===A.kind)}function mr(A,r){return r.some(l=>l==="null"?A===null:l==="array"?Array.isArray(A):l==="object"?A&&!Array.isArray(A)&&typeof A=="object":l===typeof A)}function Fa(A,r){return A.kind==="array"&&r.kind==="array"?A.itemType.kind===r.itemType.kind&&typeof A.N=="number":A.kind===r.kind}const VA=.96422,GA=.82521,Dh=4/29,Go=6/29,zh=3*Go*Go,sp=Go*Go*Go,op=Math.PI/180,Ap=180/Math.PI;function R0(A){return(A%=360)<0&&(A+=360),A}function I0([A,r,l,h]){let m,y;const v=Hh((.2225045*(A=Zh(A))+.7168786*(r=Zh(r))+.0606169*(l=Zh(l)))/1);A===r&&r===l?m=y=v:(m=Hh((.4360747*A+.3850649*r+.1430804*l)/VA),y=Hh((.0139322*A+.0971045*r+.7141733*l)/GA));const C=116*v-16;return[C<0?0:C,500*(m-v),200*(v-y),h]}function Zh(A){return A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Hh(A){return A>sp?Math.pow(A,1/3):A/zh+Dh}function Oh([A,r,l,h]){let m=(A+16)/116,y=isNaN(r)?m:m+r/500,v=isNaN(l)?m:m-l/200;return m=1*Xh(m),y=VA*Xh(y),v=GA*Xh(v),[ho(3.1338561*y-1.6168667*m-.4906146*v),ho(-.9787684*y+1.9161415*m+.033454*v),ho(.0719453*y-.2289914*m+1.4052427*v),h]}function ho(A){return(A=A<=.00304?12.92*A:1.055*Math.pow(A,1/2.4)-.055)<0?0:A>1?1:A}function Xh(A){return A>Go?A*A*A:zh*(A-Dh)}function jl(A){return parseInt(A.padEnd(2,A),16)/255}function jo(A,r){return Ko(r?A/100:A,0,1)}function Ko(A,r,l){return Math.min(Math.max(r,A),l)}function U0(A){return!A.some(Number.isNaN)}const lp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function fs(A,r,l){return A+l*(r-A)}function $o(A,r,l){return A.map((h,m)=>fs(h,r[m],l))}class Fi{constructor(r,l,h,m=1,y=!0){this.r=r,this.g=l,this.b=h,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,l,h,m]))}static parse(r){if(r instanceof Fi)return r;if(typeof r!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=lp[h];if(m){const[v,C,E]=m;return[v/255,C/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const v=h.length<6?1:2;let C=1;return[jl(h.slice(C,C+=v)),jl(h.slice(C,C+=v)),jl(h.slice(C,C+=v)),jl(h.slice(C,C+v)||"ff")]}if(h.startsWith("rgb")){const v=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[C,E,S,P,k,O,j,K,ie,he,be,Ne]=v,Be=[P||" ",j||" ",he].join("");if(Be==="  "||Be==="  /"||Be===",,"||Be===",,,"){const G=[S,O,ie].join(""),le=G==="%%%"?100:G===""?255:0;if(le){const Ce=[Ko(+E/le,0,1),Ko(+k/le,0,1),Ko(+K/le,0,1),be?jo(+be,Ne):1];if(U0(Ce))return Ce}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[v,C,E,S,P,k,O,j,K]=y,ie=[E||" ",P||" ",O].join("");if(ie==="  "||ie==="  /"||ie===",,"||ie===",,,"){const he=[+C,Ko(+S,0,100),Ko(+k,0,100),j?jo(+j,K):1];if(U0(he))return function([be,Ne,Be,G]){function le(Ce){const $e=(Ce+be/30)%12,vt=Ne*Math.min(Be,1-Be);return Be-vt*Math.max(-1,Math.min($e-3,9-$e,1))}return be=R0(be),Ne/=100,Be/=100,[le(0),le(8),le(4),G]}(he)}}}(r);return l?new Fi(...l,!1):void 0}get rgb(){const{r,g:l,b:h,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[r/y,l/y,h/y,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[l,h,m,y]=I0(r),v=Math.sqrt(h*h+m*m);return[Math.round(1e4*v)?R0(Math.atan2(m,h)*Ap):NaN,v,l,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",I0(this.rgb))}overwriteGetter(r,l){return Object.defineProperty(this,r,{value:l}),l}toString(){const[r,l,h,m]=this.rgb;return`rgba(${[r,l,h].map(y=>Math.round(255*y)).join(",")},${m})`}static interpolate(r,l,h,m="rgb"){switch(m){case"rgb":{const[y,v,C,E]=$o(r.rgb,l.rgb,h);return new Fi(y,v,C,E,!1)}case"hcl":{const[y,v,C,E]=r.hcl,[S,P,k,O]=l.hcl;let j,K;if(isNaN(y)||isNaN(S))isNaN(y)?isNaN(S)?j=NaN:(j=S,C!==1&&C!==0||(K=P)):(j=y,k!==1&&k!==0||(K=v));else{let Be=S-y;S>y&&Be>180?Be-=360:S<y&&y-S>180&&(Be+=360),j=y+h*Be}const[ie,he,be,Ne]=function([Be,G,le,Ce]){return Be=isNaN(Be)?0:Be*op,Oh([le,Math.cos(Be)*G,Math.sin(Be)*G,Ce])}([j,K??fs(v,P,h),fs(C,k,h),fs(E,O,h)]);return new Fi(ie,he,be,Ne,!1)}case"lab":{const[y,v,C,E]=Oh($o(r.lab,l.lab,h));return new Fi(y,v,C,E,!1)}}}}Fi.black=new Fi(0,0,0,1),Fi.white=new Fi(1,1,1,1),Fi.transparent=new Fi(0,0,0,0),Fi.red=new Fi(1,0,0,1);class ki{constructor(r,l,h){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const qo=["bottom","center","top"];class Xn{constructor(r,l,h,m,y,v){this.text=r,this.image=l,this.scale=h,this.fontStack=m,this.textColor=y,this.verticalAlign=v}}class Xr{constructor(r){this.sections=r}static fromString(r){return new Xr([new Xn(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Xr?r:Xr.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Mr{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Mr)return r;if(typeof r=="number")return new Mr([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const l of r)if(typeof l!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Mr(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,l,h){return new Mr($o(r.values,l.values,h))}}class Ta{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const jA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class _r{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof _r)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let l=0;l<r.length;l+=2){const h=r[l],m=r[l+1];if(typeof h!="string"||!jA.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new _r(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,l,h){const m=r.values,y=l.values;if(m.length!==y.length)throw new Ta(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${l.toString()}`);const v=[];for(let C=0;C<m.length;C+=2){if(m[C]!==y[C])throw new Ta(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${m[C]}, to[${C}]: ${y[C]}`);v.push(m[C]);const[E,S]=m[C+1],[P,k]=y[C+1];v.push([fs(E,P,h),fs(S,k,h)])}return new _r(v)}}class tn{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new tn({name:r,available:!1}):null}}class Qr{constructor(r,l,h){this.from=r,this.to=l,this.transition=h}static interpolate(r,l,h){return new Qr(r,l,h)}static parse(r){return r instanceof Qr?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new Qr(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new Qr(r.from,r.to,r.transition):typeof r=="string"?new Qr(r,r,1):void 0}}function zs(A,r,l,h){return typeof A=="number"&&A>=0&&A<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[A,r,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[A,r,l,h]:[A,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function KA(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof Qr||A instanceof Fi||A instanceof ki||A instanceof Xr||A instanceof Mr||A instanceof _r||A instanceof tn)return!0;if(Array.isArray(A)){for(const r of A)if(!KA(r))return!1;return!0}if(typeof A=="object"){for(const r in A)if(!KA(A[r]))return!1;return!0}return!1}function Sa(A){if(A===null)return ai;if(typeof A=="string")return Tt;if(typeof A=="boolean")return Ot;if(typeof A=="number")return Je;if(A instanceof Fi)return ta;if(A instanceof Qr)return oa;if(A instanceof ki)return Bn;if(A instanceof Xr)return Xt;if(A instanceof Mr)return De;if(A instanceof _r)return ni;if(A instanceof tn)return Ft;if(Array.isArray(A)){const r=A.length;let l;for(const h of A){const m=Sa(h);if(l){if(l===m)continue;l=Gt;break}l=m}return Ui(l||Gt,r)}return Bi}function Vn(A){const r=typeof A;return A===null?"":r==="string"||r==="number"||r==="boolean"?String(A):A instanceof Fi||A instanceof Qr||A instanceof Xr||A instanceof Mr||A instanceof _r||A instanceof tn?A.toString():JSON.stringify(A)}class Zs{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!KA(r[1]))return l.error("invalid value");const h=r[1];let m=Sa(h);const y=l.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new Zs(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const $A={string:Tt,number:Je,boolean:Ot,object:Bi};class gn{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let h,m=1;const y=r[0];if(y==="array"){let C,E;if(r.length>2){const S=r[1];if(typeof S!="string"||!(S in $A)||S==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);C=$A[S],m++}else C=Gt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=r[2],m++}h=Ui(C,E)}else{if(!$A[y])throw new Error(`Types doesn't contain name = ${y}`);h=$A[y]}const v=[];for(;m<r.length;m++){const C=l.parse(r[m],m,Gt);if(!C)return null;v.push(C)}return new gn(h,v)}evaluate(r){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(r);if(!Va(this.type,Sa(h)))return h;if(l===this.args.length-1)throw new Ta(`Expected value to be of type ${Ei(this.type)}, but found ${Ei(Sa(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const qA={"to-boolean":Ot,"to-color":ta,"to-number":Je,"to-string":Tt};class Wi{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const h=r[0];if(!qA[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return l.error("Expected one argument.");const m=qA[h],y=[];for(let v=1;v<r.length;v++){const C=l.parse(r[v],v,Gt);if(!C)return null;y.push(C)}return new Wi(m,y)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let l,h;for(const m of this.args){if(l=m.evaluate(r),h=null,l instanceof Fi)return l;if(typeof l=="string"){const y=r.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:zs(l[0],l[1],l[2],l[3]),!h))return new Fi(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Ta(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(r);const m=Mr.parse(l);if(m)return m}throw new Ta(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(r);const m=_r.parse(l);if(m)return m}throw new Ta(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(r),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new Ta(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Xr.fromString(Vn(this.args[0].evaluate(r)));case"resolvedImage":return tn.fromString(Vn(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return Vn(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Vh=["Unknown","Point","LineString","Polygon"];class Oi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let l=this._parseColorCache[r];return l||(l=this._parseColorCache[r]=Fi.parse(r)),l}}class Mi{constructor(r,l,h=[],m,y=new ei,v=[]){this.registry=r,this.path=h,this.key=h.map(C=>`[${C}]`).join(""),this.scope=y,this.errors=v,this.expectedType=m,this._isConstant=l}parse(r,l,h,m,y={}){return l?this.concat(l,h,m)._parse(r,y):this._parse(r,y)}_parse(r,l){function h(m,y,v){return v==="assert"?new gn(y,[m]):v==="coerce"?new Wi(y,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let v=y.parse(r,this);if(!v)return null;if(this.expectedType){const C=this.expectedType,E=v.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||E.kind!=="value")if(C.kind!=="projectionDefinition"||E.kind!=="string"&&E.kind!=="array")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(C.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(C.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(C,E))return null}else v=h(v,C,l.typeAnnotation||"coerce");else v=h(v,C,l.typeAnnotation||"coerce");else v=h(v,C,l.typeAnnotation||"coerce");else v=h(v,C,l.typeAnnotation||"coerce");else v=h(v,C,l.typeAnnotation||"assert")}if(!(v instanceof Zs)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const C=new Oi;try{v=new Zs(v.type,v.evaluate(C))}catch(E){return this.error(E.message),null}}return v}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,h){const m=typeof r=="number"?this.path.concat(r):this.path,y=h?this.scope.concat(h):this.scope;return new Mi(this.registry,this._isConstant,m,l||null,y,this.errors)}error(r,...l){const h=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new Wt(h,r))}checkSubtype(r,l){const h=Va(r,l);return h&&this.error(h),h}}class Wo{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let y=1;y<r.length-1;y+=2){const v=r[y];if(typeof v!="string")return l.error(`Expected string, but found ${typeof v} instead.`,y);if(/[^a-zA-Z0-9_]/.test(v))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);const C=l.parse(r[y+1],y+1);if(!C)return null;h.push([v,C])}const m=l.parse(r[r.length-1],r.length-1,l.expectedType,h);return m?new Wo(h,m):null}outputDefined(){return this.result.outputDefined()}}class Di{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=r[1];return l.scope.has(h)?new Di(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class WA{constructor(r,l,h){this.type=r,this.index=l,this.input=h}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,Je),m=l.parse(r[2],2,Ui(l.expectedType||Gt));return h&&m?new WA(m.type.itemType,h,m):null}evaluate(r){const l=this.index.evaluate(r),h=this.input.evaluate(r);if(l<0)throw new Ta(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new Ta(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new Ta(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Cn{constructor(r,l){this.type=Ot,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,Gt),m=l.parse(r[2],2,Gt);return h&&m?Pr(h.type,[Ot,Tt,Je,ai,Gt])?new Cn(h,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(h.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!mr(l,["boolean","string","number","null"]))throw new Ta(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(Sa(l))} instead.`);if(!mr(h,["string","array"]))throw new Ta(`Expected second argument to be of type array or string, but found ${Ei(Sa(h))} instead.`);return h.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Jo{constructor(r,l,h){this.type=Je,this.needle=r,this.haystack=l,this.fromIndex=h}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,Gt),m=l.parse(r[2],2,Gt);if(!h||!m)return null;if(!Pr(h.type,[Ot,Tt,Je,ai,Gt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(h.type)} instead`);if(r.length===4){const y=l.parse(r[3],3,Je);return y?new Jo(h,m,y):null}return new Jo(h,m)}evaluate(r){const l=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!mr(l,["boolean","string","number","null"]))throw new Ta(`Expected first argument to be of type boolean, string, number or null, but found ${Ei(Sa(l))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(r)),mr(h,["string"])){const y=h.indexOf(l,m);return y===-1?-1:[...h.slice(0,y)].length}if(mr(h,["array"]))return h.indexOf(l,m);throw new Ta(`Expected second argument to be of type array or string, but found ${Ei(Sa(h))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Kl{constructor(r,l,h,m,y,v){this.inputType=r,this.type=l,this.input=h,this.cases=m,this.outputs=y,this.otherwise=v}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let h,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const y={},v=[];for(let S=2;S<r.length-1;S+=2){let P=r[S];const k=r[S+1];Array.isArray(P)||(P=[P]);const O=l.concat(S);if(P.length===0)return O.error("Expected at least one branch label.");for(const K of P){if(typeof K!="number"&&typeof K!="string")return O.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return O.error("Numeric branch labels must be integer values.");if(h){if(O.checkSubtype(h,Sa(K)))return null}else h=Sa(K);if(y[String(K)]!==void 0)return O.error("Branch labels must be unique.");y[String(K)]=v.length}const j=l.parse(k,S,m);if(!j)return null;m=m||j.type,v.push(j)}const C=l.parse(r[1],1,Gt);if(!C)return null;const E=l.parse(r[r.length-1],r.length-1,m);return E?C.type.kind!=="value"&&l.concat(1).checkSubtype(h,C.type)?null:new Kl(h,m,C,y,v,E):null}evaluate(r){const l=this.input.evaluate(r);return(Sa(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class $l{constructor(r,l,h){this.type=r,this.branches=l,this.otherwise=h}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const m=[];for(let v=1;v<r.length-1;v+=2){const C=l.parse(r[v],v,Ot);if(!C)return null;const E=l.parse(r[v+1],v+1,h);if(!E)return null;m.push([C,E]),h=h||E.type}const y=l.parse(r[r.length-1],r.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new $l(h,m,y)}evaluate(r){for(const[l,h]of this.branches)if(l.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,h]of this.branches)r(l),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class eA{constructor(r,l,h,m){this.type=r,this.input=l,this.beginIndex=h,this.endIndex=m}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=l.parse(r[1],1,Gt),m=l.parse(r[2],2,Je);if(!h||!m)return null;if(!Pr(h.type,[Ui(Gt),Tt,Gt]))return l.error(`Expected first argument to be of type array or string, but found ${Ei(h.type)} instead`);if(r.length===4){const y=l.parse(r[3],3,Je);return y?new eA(h.type,h,m,y):null}return new eA(h.type,h,m)}evaluate(r){const l=this.input.evaluate(r),h=this.beginIndex.evaluate(r);let m;if(this.endIndex&&(m=this.endIndex.evaluate(r)),mr(l,["string"]))return[...l].slice(h,m).join("");if(mr(l,["array"]))return l.slice(h,m);throw new Ta(`Expected first argument to be of type array or string, but found ${Ei(Sa(l))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function JA(A,r){const l=A.length-1;let h,m,y=0,v=l,C=0;for(;y<=v;)if(C=Math.floor((y+v)/2),h=A[C],m=A[C+1],h<=r){if(C===l||r<m)return C;y=C+1}else{if(!(h>r))throw new Ta("Input is not a number.");v=C-1}return 0}class el{constructor(r,l,h){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(r[1],1,Je);if(!h)return null;const m=[];let y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let v=1;v<r.length;v+=2){const C=v===1?-1/0:r[v],E=r[v+1],S=v,P=v+1;if(typeof C!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(m.length&&m[m.length-1][0]>=C)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);const k=l.parse(E,P,y);if(!k)return null;y=y||k.type,m.push([C,k])}return new el(y,h,m)}evaluate(r){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return h[0].evaluate(r);const y=l.length;return m>=l[y-1]?h[y-1].evaluate(r):h[JA(l,m)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function E0(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var ql,tA,Rr=function(){if(tA)return ql;function A(r,l,h,m){this.cx=3*r,this.bx=3*(h-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=l,this.p2x=h,this.p2y=m}return tA=1,ql=A,A.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,l){if(l===void 0&&(l=1e-6),r<0)return 0;if(r>1)return 1;for(var h=r,m=0;m<8;m++){var y=this.sampleCurveX(h)-r;if(Math.abs(y)<l)return h;var v=this.sampleCurveDerivativeX(h);if(Math.abs(v)<1e-6)break;h-=y/v}var C=0,E=1;for(h=r,m=0;m<20&&(y=this.sampleCurveX(h),!(Math.abs(y-r)<l));m++)r>y?C=h:E=h,h=.5*(E-C)+C;return h},solve:function(r,l){return this.sampleCurveY(this.solveCurveX(r,l))}},ql}(),Wl=E0(Rr);class Vr{constructor(r,l,h,m,y){this.type=r,this.operator=l,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[v,C]of y)this.labels.push(v),this.outputs.push(C)}static interpolationFactor(r,l,h,m){let y=0;if(r.name==="exponential")y=iA(l,r.base,h,m);else if(r.name==="linear")y=iA(l,1,h,m);else if(r.name==="cubic-bezier"){const v=r.controlPoints;y=new Wl(v[0],v[1],v[2],v[3]).solve(iA(l,1,h,m))}return y}static parse(r,l){let[h,m,y,...v]=r;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const S=m[1];if(typeof S!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:S}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const S=m.slice(1);if(S.length!==4||S.some(P=>typeof P!="number"||P<0||P>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:S}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Je),!y)return null;const C=[];let E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=ta:l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType);for(let S=0;S<v.length;S+=2){const P=v[S],k=v[S+1],O=S+3,j=S+4;if(typeof P!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(C.length&&C[C.length-1][0]>=P)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const K=l.parse(k,j,E);if(!K)return null;E=E||K.type,C.push([P,K])}return Fa(E,Je)||Fa(E,oa)||Fa(E,ta)||Fa(E,De)||Fa(E,ni)||Fa(E,Ui(Je))?new Vr(E,h,m,y,C):l.error(`Type ${Ei(E)} is not interpolatable.`)}evaluate(r){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return h[0].evaluate(r);const y=l.length;if(m>=l[y-1])return h[y-1].evaluate(r);const v=JA(l,m),C=Vr.interpolationFactor(this.interpolation,m,l[v],l[v+1]),E=h[v].evaluate(r),S=h[v+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return fs(E,S,C);case"color":return Fi.interpolate(E,S,C);case"padding":return Mr.interpolate(E,S,C);case"variableAnchorOffsetCollection":return _r.interpolate(E,S,C);case"array":return $o(E,S,C);case"projectionDefinition":return Qr.interpolate(E,S,C)}case"interpolate-hcl":return Fi.interpolate(E,S,C,"hcl");case"interpolate-lab":return Fi.interpolate(E,S,C,"lab")}}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function iA(A,r,l,h){const m=h-l,y=A-l;return m===0?0:r===1?y/m:(Math.pow(r,y)-1)/(Math.pow(r,m)-1)}const ua={color:Fi.interpolate,number:fs,padding:Mr.interpolate,variableAnchorOffsetCollection:_r.interpolate,array:$o};class tl{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let h=null;const m=l.expectedType;m&&m.kind!=="value"&&(h=m);const y=[];for(const C of r.slice(1)){const E=l.parse(C,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,y.push(E)}if(!h)throw new Error("No output type");const v=m&&y.some(C=>Va(m,C.type));return new tl(v?Gt:h,y)}evaluate(r){let l,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(r),h&&h instanceof tn&&!h.available&&(l||(l=h.name),h=null,m===this.args.length&&(h=l)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Jl(A,r){return A==="=="||A==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Gh(A,r,l,h){return h.compare(r,l)===0}function aA(A,r,l){const h=A!=="=="&&A!=="!=";return class I6{constructor(y,v,C){this.type=Ot,this.lhs=y,this.rhs=v,this.collator=C,this.hasUntypedArgument=y.type.kind==="value"||v.type.kind==="value"}static parse(y,v){if(y.length!==3&&y.length!==4)return v.error("Expected two or three arguments.");const C=y[0];let E=v.parse(y[1],1,Gt);if(!E)return null;if(!Jl(C,E.type))return v.concat(1).error(`"${C}" comparisons are not supported for type '${Ei(E.type)}'.`);let S=v.parse(y[2],2,Gt);if(!S)return null;if(!Jl(C,S.type))return v.concat(2).error(`"${C}" comparisons are not supported for type '${Ei(S.type)}'.`);if(E.type.kind!==S.type.kind&&E.type.kind!=="value"&&S.type.kind!=="value")return v.error(`Cannot compare types '${Ei(E.type)}' and '${Ei(S.type)}'.`);h&&(E.type.kind==="value"&&S.type.kind!=="value"?E=new gn(S.type,[E]):E.type.kind!=="value"&&S.type.kind==="value"&&(S=new gn(E.type,[S])));let P=null;if(y.length===4){if(E.type.kind!=="string"&&S.type.kind!=="string"&&E.type.kind!=="value"&&S.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(P=v.parse(y[3],3,Bn),!P)return null}return new I6(E,S,P)}evaluate(y){const v=this.lhs.evaluate(y),C=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const E=Sa(v),S=Sa(C);if(E.kind!==S.kind||E.kind!=="string"&&E.kind!=="number")throw new Ta(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${E.kind}, ${S.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=Sa(v),S=Sa(C);if(E.kind!=="string"||S.kind!=="string")return r(y,v,C)}return this.collator?l(y,v,C,this.collator.evaluate(y)):r(y,v,C)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const ec=aA("==",function(A,r,l){return r===l},Gh),jh=aA("!=",function(A,r,l){return r!==l},function(A,r,l,h){return!Gh(0,r,l,h)}),cp=aA("<",function(A,r,l){return r<l},function(A,r,l,h){return h.compare(r,l)<0}),tc=aA(">",function(A,r,l){return r>l},function(A,r,l,h){return h.compare(r,l)>0}),ic=aA("<=",function(A,r,l){return r<=l},function(A,r,l,h){return h.compare(r,l)<=0}),Mn=aA(">=",function(A,r,l){return r>=l},function(A,r,l,h){return h.compare(r,l)>=0});class il{constructor(r,l,h){this.type=Bn,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const m=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ot);if(!m)return null;const y=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ot);if(!y)return null;let v=null;return h.locale&&(v=l.parse(h.locale,1,Tt),!v)?null:new il(m,y,v)}evaluate(r){return new ki(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class rA{constructor(r,l,h,m,y){this.type=Tt,this.number=r,this.locale=l,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const h=l.parse(r[1],1,Je);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=l.parse(m.locale,1,Tt),!y))return null;let v=null;if(m.currency&&(v=l.parse(m.currency,1,Tt),!v))return null;let C=null;if(m["min-fraction-digits"]&&(C=l.parse(m["min-fraction-digits"],1,Je),!C))return null;let E=null;return m["max-fraction-digits"]&&(E=l.parse(m["max-fraction-digits"],1,Je),!E)?null:new rA(h,y,v,C,E)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class ac{constructor(r){this.type=Xt,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const m=[];let y=!1;for(let v=1;v<=r.length-1;++v){const C=r[v];if(y&&typeof C=="object"&&!Array.isArray(C)){y=!1;let E=null;if(C["font-scale"]&&(E=l.parse(C["font-scale"],1,Je),!E))return null;let S=null;if(C["text-font"]&&(S=l.parse(C["text-font"],1,Ui(Tt)),!S))return null;let P=null;if(C["text-color"]&&(P=l.parse(C["text-color"],1,ta),!P))return null;let k=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!qo.includes(C["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(k=l.parse(C["vertical-align"],1,Tt),!k)return null}const O=m[m.length-1];O.scale=E,O.font=S,O.textColor=P,O.verticalAlign=k}else{const E=l.parse(r[v],1,Gt);if(!E)return null;const S=E.type.kind;if(S!=="string"&&S!=="value"&&S!=="null"&&S!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:E,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ac(m)}evaluate(r){return new Xr(this.sections.map(l=>{const h=l.content.evaluate(r);return Sa(h)===Ft?new Xn("",h,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(r):null):new Xn(Vn(h),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null,l.verticalAlign?l.verticalAlign.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor),l.verticalAlign&&r(l.verticalAlign)}outputDefined(){return!1}}class al{constructor(r){this.type=Ft,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const h=l.parse(r[1],1,Tt);return h?new al(h):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),h=tn.fromString(l);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(l)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class Kh{constructor(r){this.type=Je,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=l.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Ei(h.type)} instead.`):new Kh(h):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Ta(`Expected value to be of type string or array, but found ${Ei(Sa(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Gn=8192;function hp(A,r){const l=(180+A[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(l*m*Gn),Math.round(h*m*Gn)]}function $h(A,r){const l=Math.pow(2,r.z);return[(m=(A[0]/Gn+r.x)/l,360*m-180),(h=(A[1]/Gn+r.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function Hs(A,r){A[0]=Math.min(A[0],r[0]),A[1]=Math.min(A[1],r[1]),A[2]=Math.max(A[2],r[0]),A[3]=Math.max(A[3],r[1])}function rl(A,r){return!(A[0]<=r[0]||A[2]>=r[2]||A[1]<=r[1]||A[3]>=r[3])}function F0(A,r,l){const h=A[0]-r[0],m=A[1]-r[1],y=A[0]-l[0],v=A[1]-l[1];return h*v-y*m==0&&h*y<=0&&m*v<=0}function nl(A,r,l,h){return(m=[h[0]-l[0],h[1]-l[1]])[0]*(y=[r[0]-A[0],r[1]-A[1]])[1]-m[1]*y[0]!=0&&!(!S0(A,r,l,h)||!S0(l,h,A,r));var m,y}function up(A,r,l){for(const h of l)for(let m=0;m<h.length-1;++m)if(nl(A,r,h[m],h[m+1]))return!0;return!1}function uo(A,r,l=!1){let h=!1;for(const C of r)for(let E=0;E<C.length-1;E++){if(F0(A,C[E],C[E+1]))return l;(y=C[E])[1]>(m=A)[1]!=(v=C[E+1])[1]>m[1]&&m[0]<(v[0]-y[0])*(m[1]-y[1])/(v[1]-y[1])+y[0]&&(h=!h)}var m,y,v;return h}function dp(A,r){for(const l of r)if(uo(A,l))return!0;return!1}function T0(A,r){for(const l of A)if(!uo(l,r))return!1;for(let l=0;l<A.length-1;++l)if(up(A[l],A[l+1],r))return!1;return!0}function fp(A,r){for(const l of r)if(T0(A,l))return!0;return!1}function S0(A,r,l,h){const m=h[0]-l[0],y=h[1]-l[1],v=(A[0]-l[0])*y-m*(A[1]-l[1]),C=(r[0]-l[0])*y-m*(r[1]-l[1]);return v>0&&C<0||v<0&&C>0}function qh(A,r,l){const h=[];for(let m=0;m<A.length;m++){const y=[];for(let v=0;v<A[m].length;v++){const C=hp(A[m][v],l);Hs(r,C),y.push(C)}h.push(y)}return h}function Wh(A,r,l){const h=[];for(let m=0;m<A.length;m++){const y=qh(A[m],r,l);h.push(y)}return h}function Jh(A,r,l,h){if(A[0]<l[0]||A[0]>l[2]){const m=.5*h;let y=A[0]-l[0]>m?-h:l[0]-A[0]>m?h:0;y===0&&(y=A[0]-l[2]>m?-h:l[2]-A[0]>m?h:0),A[0]+=y}Hs(r,A)}function eu(A,r,l,h){const m=Math.pow(2,h.z)*Gn,y=[h.x*Gn,h.y*Gn],v=[];for(const C of A)for(const E of C){const S=[E.x+y[0],E.y+y[1]];Jh(S,r,l,m),v.push(S)}return v}function Y0(A,r,l,h){const m=Math.pow(2,h.z)*Gn,y=[h.x*Gn,h.y*Gn],v=[];for(const E of A){const S=[];for(const P of E){const k=[P.x+y[0],P.y+y[1]];Hs(r,k),S.push(k)}v.push(S)}if(r[2]-r[0]<=m/2){(C=r)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const E of v)for(const S of E)Jh(S,r,l,m)}var C;return v}class fo{constructor(r,l){this.type=Ot,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(KA(r[1])){const h=r[1];if(h.type==="FeatureCollection"){const m=[];for(const y of h.features){const{type:v,coordinates:C}=y.geometry;v==="Polygon"&&m.push(C),v==="MultiPolygon"&&m.push(...C)}if(m.length)return new fo(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new fo(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new fo(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=l.canonicalID();if(h.type==="Polygon"){const C=qh(h.coordinates,y,v),E=eu(l.geometry(),m,y,v);if(!rl(m,y))return!1;for(const S of E)if(!uo(S,C))return!1}if(h.type==="MultiPolygon"){const C=Wh(h.coordinates,y,v),E=eu(l.geometry(),m,y,v);if(!rl(m,y))return!1;for(const S of E)if(!dp(S,C))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=l.canonicalID();if(h.type==="Polygon"){const C=qh(h.coordinates,y,v),E=Y0(l.geometry(),m,y,v);if(!rl(m,y))return!1;for(const S of E)if(!T0(S,C))return!1}if(h.type==="MultiPolygon"){const C=Wh(h.coordinates,y,v),E=Y0(l.geometry(),m,y,v);if(!rl(m,y))return!1;for(const S of E)if(!fp(S,C))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let N0=class{constructor(A=[],r=(l,h)=>l<h?-1:l>h?1:0){if(this.data=A,this.length=this.data.length,this.compare=r,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:r,compare:l}=this,h=r[A];for(;A>0;){const m=A-1>>1,y=r[m];if(l(h,y)>=0)break;r[A]=y,A=m}r[A]=h}_down(A){const{data:r,compare:l}=this,h=this.length>>1,m=r[A];for(;A<h;){let y=1+(A<<1);const v=y+1;if(v<this.length&&l(r[v],r[y])<0&&(y=v),l(r[y],m)>=0)break;r[A]=r[y],A=y}r[A]=m}};function rc(A,r,l=0,h=A.length-1,m=gp){for(;h>l;){if(h-l>600){const E=h-l+1,S=r-l+1,P=Math.log(E),k=.5*Math.exp(2*P/3),O=.5*Math.sqrt(P*k*(E-k)/E)*(S-E/2<0?-1:1);rc(A,r,Math.max(l,Math.floor(r-S*k/E+O)),Math.min(h,Math.floor(r+(E-S)*k/E+O)),m)}const y=A[r];let v=l,C=h;for(sl(A,l,r),m(A[h],y)>0&&sl(A,l,h);v<C;){for(sl(A,v,C),v++,C--;m(A[v],y)<0;)v++;for(;m(A[C],y)>0;)C--}m(A[l],y)===0?sl(A,l,C):(C++,sl(A,C,h)),C<=r&&(l=C+1),r<=C&&(h=C-1)}}function sl(A,r,l){const h=A[r];A[r]=A[l],A[l]=h}function gp(A,r){return A<r?-1:A>r?1:0}function nc(A,r){if(A.length<=1)return[A];const l=[];let h,m;for(const y of A){const v=P0(y);v!==0&&(y.area=Math.abs(v),m===void 0&&(m=v<0),m===v<0?(h&&l.push(h),h=[y]):h.push(y))}if(h&&l.push(h),r>1)for(let y=0;y<l.length;y++)l[y].length<=r||(rc(l[y],r,1,l[y].length-1,L0),l[y]=l[y].slice(0,r));return l}function L0(A,r){return r.area-A.area}function P0(A){let r=0;for(let l,h,m=0,y=A.length,v=y-1;m<y;v=m++)l=A[m],h=A[v],r+=(h.x-l.x)*(l.y+h.y);return r}const Q0=1/298.257223563,k0=Q0*(2-Q0),tu=Math.PI/180;class sc{constructor(r){const l=6378.137*tu*1e3,h=Math.cos(r*tu),m=1/(1-k0*(1-h*h)),y=Math.sqrt(m);this.kx=l*y*h,this.ky=l*y*m*(1-k0)}distance(r,l){const h=this.wrap(r[0]-l[0])*this.kx,m=(r[1]-l[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(r,l){let h,m,y,v,C=1/0;for(let E=0;E<r.length-1;E++){let S=r[E][0],P=r[E][1],k=this.wrap(r[E+1][0]-S)*this.kx,O=(r[E+1][1]-P)*this.ky,j=0;k===0&&O===0||(j=(this.wrap(l[0]-S)*this.kx*k+(l[1]-P)*this.ky*O)/(k*k+O*O),j>1?(S=r[E+1][0],P=r[E+1][1]):j>0&&(S+=k/this.kx*j,P+=O/this.ky*j)),k=this.wrap(l[0]-S)*this.kx,O=(l[1]-P)*this.ky;const K=k*k+O*O;K<C&&(C=K,h=S,m=P,y=E,v=j)}return{point:[h,m],index:y,t:Math.max(0,Math.min(1,v))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function D0(A,r){return r[0]-A[0]}function oc(A){return A[1]-A[0]+1}function gs(A,r){return A[1]>=A[0]&&A[1]<r}function Ac(A,r){if(A[0]>A[1])return[null,null];const l=oc(A);if(r){if(l===2)return[A,null];const m=Math.floor(l/2);return[[A[0],A[0]+m],[A[0]+m,A[1]]]}if(l===1)return[A,null];const h=Math.floor(l/2)-1;return[[A[0],A[0]+h],[A[0]+h+1,A[1]]]}function iu(A,r){if(!gs(r,A.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let h=r[0];h<=r[1];++h)Hs(l,A[h]);return l}function au(A){const r=[1/0,1/0,-1/0,-1/0];for(const l of A)for(const h of l)Hs(r,h);return r}function z0(A){return A[0]!==-1/0&&A[1]!==-1/0&&A[2]!==1/0&&A[3]!==1/0}function ru(A,r,l){if(!z0(A)||!z0(r))return NaN;let h=0,m=0;return A[2]<r[0]&&(h=r[0]-A[2]),A[0]>r[2]&&(h=A[0]-r[2]),A[1]>r[3]&&(m=A[1]-r[3]),A[3]<r[1]&&(m=r[1]-A[3]),l.distance([0,0],[h,m])}function Qi(A,r,l){const h=l.pointOnLine(r,A);return l.distance(A,h.point)}function nu(A,r,l,h,m){const y=Math.min(Qi(A,[l,h],m),Qi(r,[l,h],m)),v=Math.min(Qi(l,[A,r],m),Qi(h,[A,r],m));return Math.min(y,v)}function pp(A,r,l,h,m){if(!gs(r,A.length)||!gs(h,l.length))return 1/0;let y=1/0;for(let v=r[0];v<r[1];++v){const C=A[v],E=A[v+1];for(let S=h[0];S<h[1];++S){const P=l[S],k=l[S+1];if(nl(C,E,P,k))return 0;y=Math.min(y,nu(C,E,P,k,m))}}return y}function mp(A,r,l,h,m){if(!gs(r,A.length)||!gs(h,l.length))return NaN;let y=1/0;for(let v=r[0];v<=r[1];++v)for(let C=h[0];C<=h[1];++C)if(y=Math.min(y,m.distance(A[v],l[C])),y===0)return y;return y}function _p(A,r,l){if(uo(A,r,!0))return 0;let h=1/0;for(const m of r){const y=m[0],v=m[m.length-1];if(y!==v&&(h=Math.min(h,Qi(A,[v,y],l)),h===0))return h;const C=l.pointOnLine(m,A);if(h=Math.min(h,l.distance(A,C.point)),h===0)return h}return h}function bp(A,r,l,h){if(!gs(r,A.length))return NaN;for(let y=r[0];y<=r[1];++y)if(uo(A[y],l,!0))return 0;let m=1/0;for(let y=r[0];y<r[1];++y){const v=A[y],C=A[y+1];for(const E of l)for(let S=0,P=E.length,k=P-1;S<P;k=S++){const O=E[k],j=E[S];if(nl(v,C,O,j))return 0;m=Math.min(m,nu(v,C,O,j,h))}}return m}function Z0(A,r){for(const l of A)for(const h of l)if(uo(h,r,!0))return!0;return!1}function yp(A,r,l,h=1/0){const m=au(A),y=au(r);if(h!==1/0&&ru(m,y,l)>=h)return h;if(rl(m,y)){if(Z0(A,r))return 0}else if(Z0(r,A))return 0;let v=1/0;for(const C of A)for(let E=0,S=C.length,P=S-1;E<S;P=E++){const k=C[P],O=C[E];for(const j of r)for(let K=0,ie=j.length,he=ie-1;K<ie;he=K++){const be=j[he],Ne=j[K];if(nl(k,O,be,Ne))return 0;v=Math.min(v,nu(k,O,be,Ne,l))}}return v}function H0(A,r,l,h,m,y){if(!y)return;const v=ru(iu(h,y),m,l);v<r&&A.push([v,y,[0,0]])}function lc(A,r,l,h,m,y,v){if(!y||!v)return;const C=ru(iu(h,y),iu(m,v),l);C<r&&A.push([C,y,v])}function cc(A,r,l,h,m=1/0){let y=Math.min(h.distance(A[0],l[0][0]),m);if(y===0)return y;const v=new N0([[0,[0,A.length-1],[0,0]]],D0),C=au(l);for(;v.length>0;){const E=v.pop();if(E[0]>=y)continue;const S=E[1],P=r?50:100;if(oc(S)<=P){if(!gs(S,A.length))return NaN;if(r){const k=bp(A,S,l,h);if(isNaN(k)||k===0)return k;y=Math.min(y,k)}else for(let k=S[0];k<=S[1];++k){const O=_p(A[k],l,h);if(y=Math.min(y,O),y===0)return 0}}else{const k=Ac(S,r);H0(v,y,h,A,C,k[0]),H0(v,y,h,A,C,k[1])}}return y}function hc(A,r,l,h,m,y=1/0){let v=Math.min(y,m.distance(A[0],l[0]));if(v===0)return v;const C=new N0([[0,[0,A.length-1],[0,l.length-1]]],D0);for(;C.length>0;){const E=C.pop();if(E[0]>=v)continue;const S=E[1],P=E[2],k=r?50:100,O=h?50:100;if(oc(S)<=k&&oc(P)<=O){if(!gs(S,A.length)&&gs(P,l.length))return NaN;let j;if(r&&h)j=pp(A,S,l,P,m),v=Math.min(v,j);else if(r&&!h){const K=A.slice(S[0],S[1]+1);for(let ie=P[0];ie<=P[1];++ie)if(j=Qi(l[ie],K,m),v=Math.min(v,j),v===0)return v}else if(!r&&h){const K=l.slice(P[0],P[1]+1);for(let ie=S[0];ie<=S[1];++ie)if(j=Qi(A[ie],K,m),v=Math.min(v,j),v===0)return v}else j=mp(A,S,l,P,m),v=Math.min(v,j)}else{const j=Ac(S,r),K=Ac(P,h);lc(C,v,m,A,l,j[0],K[0]),lc(C,v,m,A,l,j[0],K[1]),lc(C,v,m,A,l,j[1],K[0]),lc(C,v,m,A,l,j[1],K[1])}}return v}function su(A){return A.type==="MultiPolygon"?A.coordinates.map(r=>({type:"Polygon",coordinates:r})):A.type==="MultiLineString"?A.coordinates.map(r=>({type:"LineString",coordinates:r})):A.type==="MultiPoint"?A.coordinates.map(r=>({type:"Point",coordinates:r})):[A]}class go{constructor(r,l){this.type=Je,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(KA(r[1])){const h=r[1];if(h.type==="FeatureCollection")return new go(h,h.features.map(m=>su(m.geometry)).flat());if(h.type==="Feature")return new go(h,su(h.geometry));if("type"in h&&"coordinates"in h)return new go(h,su(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,h){const m=l.geometry(),y=m.flat().map(E=>$h([E.x,E.y],l.canonical));if(m.length===0)return NaN;const v=new sc(y[0][1]);let C=1/0;for(const E of h){switch(E.type){case"Point":C=Math.min(C,hc(y,!1,[E.coordinates],!1,v,C));break;case"LineString":C=Math.min(C,hc(y,!1,E.coordinates,!0,v,C));break;case"Polygon":C=Math.min(C,cc(y,!1,E.coordinates,v,C))}if(C===0)return C}return C}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,h){const m=l.geometry(),y=m.flat().map(E=>$h([E.x,E.y],l.canonical));if(m.length===0)return NaN;const v=new sc(y[0][1]);let C=1/0;for(const E of h){switch(E.type){case"Point":C=Math.min(C,hc(y,!0,[E.coordinates],!1,v,C));break;case"LineString":C=Math.min(C,hc(y,!0,E.coordinates,!0,v,C));break;case"Polygon":C=Math.min(C,cc(y,!0,E.coordinates,v,C))}if(C===0)return C}return C}(r,this.geometries);if(r.geometryType()==="Polygon")return function(l,h){const m=l.geometry();if(m.length===0||m[0].length===0)return NaN;const y=nc(m,0).map(E=>E.map(S=>S.map(P=>$h([P.x,P.y],l.canonical)))),v=new sc(y[0][0][0][1]);let C=1/0;for(const E of h)for(const S of y){switch(E.type){case"Point":C=Math.min(C,cc([E.coordinates],!1,S,v,C));break;case"LineString":C=Math.min(C,cc(E.coordinates,!0,S,v,C));break;case"Polygon":C=Math.min(C,yp(S,E.coordinates,v,C))}if(C===0)return C}return C}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const nA={"==":ec,"!=":jh,">":tc,"<":cp,">=":Mn,"<=":ic,array:gn,at:WA,boolean:gn,case:$l,coalesce:tl,collator:il,format:ac,image:al,in:Cn,"index-of":Jo,interpolate:Vr,"interpolate-hcl":Vr,"interpolate-lab":Vr,length:Kh,let:Wo,literal:Zs,match:Kl,number:gn,"number-format":rA,object:gn,slice:eA,step:el,string:gn,"to-boolean":Wi,"to-color":Wi,"to-number":Wi,"to-string":Wi,var:Di,within:fo,distance:go};class pn{constructor(r,l,h,m){this.name=r,this.type=l,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,l){const h=r[0],m=pn.definitions[h];if(!m)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,v=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,C=v.filter(([S])=>!Array.isArray(S)||S.length===r.length-1);let E=null;for(const[S,P]of C){E=new Mi(l.registry,uc,l.path,null,l.scope);const k=[];let O=!1;for(let j=1;j<r.length;j++){const K=r[j],ie=Array.isArray(S)?S[j-1]:S.type,he=E.parse(K,1+k.length,ie);if(!he){O=!0;break}k.push(he)}if(!O)if(Array.isArray(S)&&S.length!==k.length)E.error(`Expected ${S.length} arguments, but found ${k.length} instead.`);else{for(let j=0;j<k.length;j++){const K=Array.isArray(S)?S[j]:S.type,ie=k[j];E.concat(j+1).checkSubtype(K,ie.type)}if(E.errors.length===0)return new pn(h,y,P,k)}}if(C.length===1)l.errors.push(...E.errors);else{const S=(C.length?C:v).map(([k])=>{return O=k,Array.isArray(O)?`(${O.map(Ei).join(", ")})`:`(${Ei(O.type)}...)`;var O}).join(" | "),P=[];for(let k=1;k<r.length;k++){const O=l.parse(r[k],1+P.length);if(!O)return null;P.push(Ei(O.type))}l.error(`Expected arguments of type ${S}, but found (${P.join(", ")}) instead.`)}return null}static register(r,l){pn.definitions=l;for(const h in l)r[h]=pn}}function O0(A,[r,l,h,m]){r=r.evaluate(A),l=l.evaluate(A),h=h.evaluate(A);const y=m?m.evaluate(A):1,v=zs(r,l,h,y);if(v)throw new Ta(v);return new Fi(r/255,l/255,h/255,y,!1)}function X0(A,r){return A in r}function ou(A,r){const l=r[A];return l===void 0?null:l}function po(A){return{type:A}}function uc(A){if(A instanceof Di)return uc(A.boundExpression);if(A instanceof pn&&A.name==="error"||A instanceof il||A instanceof fo||A instanceof go)return!1;const r=A instanceof Wi||A instanceof gn;let l=!0;return A.eachChild(h=>{l=r?l&&uc(h):l&&h instanceof Zs}),!!l&&dc(A)&&fc(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function dc(A){if(A instanceof pn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof fo||A instanceof go)return!1;let r=!0;return A.eachChild(l=>{r&&!dc(l)&&(r=!1)}),r}function ol(A){if(A instanceof pn&&A.name==="feature-state")return!1;let r=!0;return A.eachChild(l=>{r&&!ol(l)&&(r=!1)}),r}function fc(A,r){if(A instanceof pn&&r.indexOf(A.name)>=0)return!1;let l=!0;return A.eachChild(h=>{l&&!fc(h,r)&&(l=!1)}),l}function V0(A){return{result:"success",value:A}}function sA(A){return{result:"error",value:A}}function oA(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function G0(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Au(A){return!!A.expression&&A.expression.interpolated}function Xi(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function gc(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function vp(A){return A}function pc(A,r){const l=r.type==="color",h=A.stops&&typeof A.stops[0][0]=="object",m=h||!(h||A.property!==void 0),y=A.type||(Au(r)?"exponential":"interval");if(l||r.type==="padding"){const P=l?Fi.parse:Mr.parse;(A=mt({},A)).stops&&(A.stops=A.stops.map(k=>[k[0],P(k[1])])),A.default=P(A.default?A.default:r.default)}if(A.colorSpace&&(v=A.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${A.colorSpace}"`);var v;let C,E,S;if(y==="exponential")C=lu;else if(y==="interval")C=wp;else if(y==="categorical"){C=xp,E=Object.create(null);for(const P of A.stops)E[P[0]]=P[1];S=typeof A.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);C=Bp}if(h){const P={},k=[];for(let K=0;K<A.stops.length;K++){const ie=A.stops[K],he=ie[0].zoom;P[he]===void 0&&(P[he]={zoom:he,type:A.type,property:A.property,default:A.default,stops:[]},k.push(he)),P[he].stops.push([ie[0].value,ie[1]])}const O=[];for(const K of k)O.push([P[K].zoom,pc(P[K],r)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:Vr.interpolationFactor.bind(void 0,j),zoomStops:O.map(K=>K[0]),evaluate:({zoom:K},ie)=>lu({stops:O,base:A.base},r,K).evaluate(K,ie)}}if(m){const P=y==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Vr.interpolationFactor.bind(void 0,P),zoomStops:A.stops.map(k=>k[0]),evaluate:({zoom:k})=>C(A,r,k,E,S)}}return{kind:"source",evaluate(P,k){const O=k&&k.properties?k.properties[A.property]:void 0;return O===void 0?Al(A.default,r.default):C(A,r,O,E,S)}}}function Al(A,r,l){return A!==void 0?A:r!==void 0?r:l!==void 0?l:void 0}function xp(A,r,l,h,m){return Al(typeof l===m?h[l]:void 0,A.default,r.default)}function wp(A,r,l){if(Xi(l)!=="number")return Al(A.default,r.default);const h=A.stops.length;if(h===1||l<=A.stops[0][0])return A.stops[0][1];if(l>=A.stops[h-1][0])return A.stops[h-1][1];const m=JA(A.stops.map(y=>y[0]),l);return A.stops[m][1]}function lu(A,r,l){const h=A.base!==void 0?A.base:1;if(Xi(l)!=="number")return Al(A.default,r.default);const m=A.stops.length;if(m===1||l<=A.stops[0][0])return A.stops[0][1];if(l>=A.stops[m-1][0])return A.stops[m-1][1];const y=JA(A.stops.map(P=>P[0]),l),v=function(P,k,O,j){const K=j-O,ie=P-O;return K===0?0:k===1?ie/K:(Math.pow(k,ie)-1)/(Math.pow(k,K)-1)}(l,h,A.stops[y][0],A.stops[y+1][0]),C=A.stops[y][1],E=A.stops[y+1][1],S=ua[r.type]||vp;return typeof C.evaluate=="function"?{evaluate(...P){const k=C.evaluate.apply(void 0,P),O=E.evaluate.apply(void 0,P);if(k!==void 0&&O!==void 0)return S(k,O,v,A.colorSpace)}}:S(C,E,v,A.colorSpace)}function Bp(A,r,l){switch(r.type){case"color":l=Fi.parse(l);break;case"formatted":l=Xr.fromString(l.toString());break;case"resolvedImage":l=tn.fromString(l.toString());break;case"padding":l=Mr.parse(l);break;default:Xi(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0)}return Al(l,A.default,r.default)}pn.register(nA,{error:[{kind:"error"},[Tt],(A,[r])=>{throw new Ta(r.evaluate(A))}],typeof:[Tt,[Gt],(A,[r])=>Ei(Sa(r.evaluate(A)))],"to-rgba":[Ui(Je,4),[ta],(A,[r])=>{const[l,h,m,y]=r.evaluate(A).rgb;return[255*l,255*h,255*m,y]}],rgb:[ta,[Je,Je,Je],O0],rgba:[ta,[Je,Je,Je,Je],O0],has:{type:Ot,overloads:[[[Tt],(A,[r])=>X0(r.evaluate(A),A.properties())],[[Tt,Bi],(A,[r,l])=>X0(r.evaluate(A),l.evaluate(A))]]},get:{type:Gt,overloads:[[[Tt],(A,[r])=>ou(r.evaluate(A),A.properties())],[[Tt,Bi],(A,[r,l])=>ou(r.evaluate(A),l.evaluate(A))]]},"feature-state":[Gt,[Tt],(A,[r])=>ou(r.evaluate(A),A.featureState||{})],properties:[Bi,[],A=>A.properties()],"geometry-type":[Tt,[],A=>A.geometryType()],id:[Gt,[],A=>A.id()],zoom:[Je,[],A=>A.globals.zoom],"heatmap-density":[Je,[],A=>A.globals.heatmapDensity||0],"line-progress":[Je,[],A=>A.globals.lineProgress||0],accumulated:[Gt,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[Je,po(Je),(A,r)=>{let l=0;for(const h of r)l+=h.evaluate(A);return l}],"*":[Je,po(Je),(A,r)=>{let l=1;for(const h of r)l*=h.evaluate(A);return l}],"-":{type:Je,overloads:[[[Je,Je],(A,[r,l])=>r.evaluate(A)-l.evaluate(A)],[[Je],(A,[r])=>-r.evaluate(A)]]},"/":[Je,[Je,Je],(A,[r,l])=>r.evaluate(A)/l.evaluate(A)],"%":[Je,[Je,Je],(A,[r,l])=>r.evaluate(A)%l.evaluate(A)],ln2:[Je,[],()=>Math.LN2],pi:[Je,[],()=>Math.PI],e:[Je,[],()=>Math.E],"^":[Je,[Je,Je],(A,[r,l])=>Math.pow(r.evaluate(A),l.evaluate(A))],sqrt:[Je,[Je],(A,[r])=>Math.sqrt(r.evaluate(A))],log10:[Je,[Je],(A,[r])=>Math.log(r.evaluate(A))/Math.LN10],ln:[Je,[Je],(A,[r])=>Math.log(r.evaluate(A))],log2:[Je,[Je],(A,[r])=>Math.log(r.evaluate(A))/Math.LN2],sin:[Je,[Je],(A,[r])=>Math.sin(r.evaluate(A))],cos:[Je,[Je],(A,[r])=>Math.cos(r.evaluate(A))],tan:[Je,[Je],(A,[r])=>Math.tan(r.evaluate(A))],asin:[Je,[Je],(A,[r])=>Math.asin(r.evaluate(A))],acos:[Je,[Je],(A,[r])=>Math.acos(r.evaluate(A))],atan:[Je,[Je],(A,[r])=>Math.atan(r.evaluate(A))],min:[Je,po(Je),(A,r)=>Math.min(...r.map(l=>l.evaluate(A)))],max:[Je,po(Je),(A,r)=>Math.max(...r.map(l=>l.evaluate(A)))],abs:[Je,[Je],(A,[r])=>Math.abs(r.evaluate(A))],round:[Je,[Je],(A,[r])=>{const l=r.evaluate(A);return l<0?-Math.round(-l):Math.round(l)}],floor:[Je,[Je],(A,[r])=>Math.floor(r.evaluate(A))],ceil:[Je,[Je],(A,[r])=>Math.ceil(r.evaluate(A))],"filter-==":[Ot,[Tt,Gt],(A,[r,l])=>A.properties()[r.value]===l.value],"filter-id-==":[Ot,[Gt],(A,[r])=>A.id()===r.value],"filter-type-==":[Ot,[Tt],(A,[r])=>A.geometryType()===r.value],"filter-<":[Ot,[Tt,Gt],(A,[r,l])=>{const h=A.properties()[r.value],m=l.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Ot,[Gt],(A,[r])=>{const l=A.id(),h=r.value;return typeof l==typeof h&&l<h}],"filter->":[Ot,[Tt,Gt],(A,[r,l])=>{const h=A.properties()[r.value],m=l.value;return typeof h==typeof m&&h>m}],"filter-id->":[Ot,[Gt],(A,[r])=>{const l=A.id(),h=r.value;return typeof l==typeof h&&l>h}],"filter-<=":[Ot,[Tt,Gt],(A,[r,l])=>{const h=A.properties()[r.value],m=l.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Ot,[Gt],(A,[r])=>{const l=A.id(),h=r.value;return typeof l==typeof h&&l<=h}],"filter->=":[Ot,[Tt,Gt],(A,[r,l])=>{const h=A.properties()[r.value],m=l.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Ot,[Gt],(A,[r])=>{const l=A.id(),h=r.value;return typeof l==typeof h&&l>=h}],"filter-has":[Ot,[Gt],(A,[r])=>r.value in A.properties()],"filter-has-id":[Ot,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[Ot,[Ui(Tt)],(A,[r])=>r.value.indexOf(A.geometryType())>=0],"filter-id-in":[Ot,[Ui(Gt)],(A,[r])=>r.value.indexOf(A.id())>=0],"filter-in-small":[Ot,[Tt,Ui(Gt)],(A,[r,l])=>l.value.indexOf(A.properties()[r.value])>=0],"filter-in-large":[Ot,[Tt,Ui(Gt)],(A,[r,l])=>function(h,m,y,v){for(;y<=v;){const C=y+v>>1;if(m[C]===h)return!0;m[C]>h?v=C-1:y=C+1}return!1}(A.properties()[r.value],l.value,0,l.value.length-1)],all:{type:Ot,overloads:[[[Ot,Ot],(A,[r,l])=>r.evaluate(A)&&l.evaluate(A)],[po(Ot),(A,r)=>{for(const l of r)if(!l.evaluate(A))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],(A,[r,l])=>r.evaluate(A)||l.evaluate(A)],[po(Ot),(A,r)=>{for(const l of r)if(l.evaluate(A))return!0;return!1}]]},"!":[Ot,[Ot],(A,[r])=>!r.evaluate(A)],"is-supported-script":[Ot,[Tt],(A,[r])=>{const l=A.globals&&A.globals.isSupportedScript;return!l||l(r.evaluate(A))}],upcase:[Tt,[Tt],(A,[r])=>r.evaluate(A).toUpperCase()],downcase:[Tt,[Tt],(A,[r])=>r.evaluate(A).toLowerCase()],concat:[Tt,po(Gt),(A,r)=>r.map(l=>Vn(l.evaluate(A))).join("")],"resolved-locale":[Tt,[Bn],(A,[r])=>r.evaluate(A).resolvedLocale()]});class cu{constructor(r,l){var h;this.expression=r,this._warningHistory={},this._evaluator=new Oi,this._defaultValue=l?(h=l).type==="color"&&gc(h.default)?new Fi(0,0,0,0):h.type==="color"?Fi.parse(h.default)||null:h.type==="padding"?Mr.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?_r.parse(h.default)||null:h.type==="projectionDefinition"?Qr.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,h,m,y,v){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(r,l,h,m,y,v){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Ta(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function mo(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in nA}function ll(A,r){const l=new Mi(nA,uc,[],r?function(m){const y={color:ta,string:Tt,number:Je,enum:Tt,boolean:Ot,formatted:Xt,padding:De,projectionDefinition:oa,resolvedImage:Ft,variableAnchorOffsetCollection:ni};return m.type==="array"?Ui(y[m.value]||Gt,m.length):y[m.type]}(r):void 0),h=l.parse(A,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?V0(new cu(h,r)):sA(l.errors)}class hu{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!ol(l.expression)}evaluateWithoutErrorHandling(r,l,h,m,y,v){return this._styleExpression.evaluateWithoutErrorHandling(r,l,h,m,y,v)}evaluate(r,l,h,m,y,v){return this._styleExpression.evaluate(r,l,h,m,y,v)}}class uu{constructor(r,l,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!ol(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,l,h,m,y,v){return this._styleExpression.evaluateWithoutErrorHandling(r,l,h,m,y,v)}evaluate(r,l,h,m,y,v){return this._styleExpression.evaluate(r,l,h,m,y,v)}interpolationFactor(r,l,h){return this.interpolationType?Vr.interpolationFactor(this.interpolationType,r,l,h):0}}function j0(A,r){const l=ll(A,r);if(l.result==="error")return l;const h=l.value.expression,m=dc(h);if(!m&&!oA(r))return sA([new Wt("","data expressions not supported")]);const y=fc(h,["zoom"]);if(!y&&!G0(r))return sA([new Wt("","zoom expressions not supported")]);const v=_c(h);return v||y?v instanceof Wt?sA([v]):v instanceof Vr&&!Au(r)?sA([new Wt("",'"interpolate" expressions cannot be used with this property')]):V0(v?new uu(m?"camera":"composite",l.value,v.labels,v instanceof Vr?v.interpolation:void 0):new hu(m?"constant":"source",l.value)):sA([new Wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class mc{constructor(r,l){this._parameters=r,this._specification=l,mt(this,pc(this._parameters,this._specification))}static deserialize(r){return new mc(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function _c(A){let r=null;if(A instanceof Wo)r=_c(A.result);else if(A instanceof tl){for(const l of A.args)if(r=_c(l),r)break}else(A instanceof el||A instanceof Vr)&&A.input instanceof pn&&A.input.name==="zoom"&&(r=A);return r instanceof Wt||A.eachChild(l=>{const h=_c(l);h instanceof Wt?r=h:!r&&h?r=new Wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function bc(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const r of A.slice(1))if(!bc(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const K0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function du(A){if(A==null)return{filter:()=>!0,needGeometry:!1};bc(A)||(A=cl(A));const r=ll(A,K0);if(r.result==="error")throw new Error(r.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,m)=>r.value.evaluate(l,h,{},m),needGeometry:fu(A)}}function Cp(A,r){return A<r?-1:A>r?1:0}function fu(A){if(!Array.isArray(A))return!1;if(A[0]==="within"||A[0]==="distance")return!0;for(let r=1;r<A.length;r++)if(fu(A[r]))return!0;return!1}function cl(A){if(!A)return!0;const r=A[0];return A.length<=1?r!=="any":r==="=="?yc(A[1],A[2],"=="):r==="!="?AA(yc(A[1],A[2],"==")):r==="<"||r===">"||r==="<="||r===">="?yc(A[1],A[2],r):r==="any"?(l=A.slice(1),["any"].concat(l.map(cl))):r==="all"?["all"].concat(A.slice(1).map(cl)):r==="none"?["all"].concat(A.slice(1).map(cl).map(AA)):r==="in"?gu(A[1],A.slice(2)):r==="!in"?AA(gu(A[1],A.slice(2))):r==="has"?vc(A[1]):r!=="!has"||AA(vc(A[1]));var l}function yc(A,r,l){switch(A){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,A,r]}}function gu(A,r){if(r.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",A,["literal",r.sort(Cp)]]:["filter-in-small",A,["literal",r]]}}function vc(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function AA(A){return["!",A]}function hl(A){const r=typeof A;if(r==="number"||r==="boolean"||r==="string"||A==null)return JSON.stringify(A);if(Array.isArray(A)){let m="[";for(const y of A)m+=`${hl(y)},`;return`${m}]`}const l=Object.keys(A).sort();let h="{";for(let m=0;m<l.length;m++)h+=`${JSON.stringify(l[m])}:${hl(A[l[m]])},`;return`${h}}`}function xc(A){let r="";for(const l of ke)r+=`/${hl(A[l])}`;return r}function $0(A){const r=A.value;return r?[new He(A.key,r,"constants have been deprecated as of v8")]:[]}function Pa(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function _o(A){if(Array.isArray(A))return A.map(_o);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const r={};for(const l in A)r[l]=_o(A[l]);return r}return Pa(A)}function mn(A){const r=A.key,l=A.value,h=A.valueSpec||{},m=A.objectElementValidators||{},y=A.style,v=A.styleSpec,C=A.validateSpec;let E=[];const S=Xi(l);if(S!=="object")return[new He(r,l,`object expected, ${S} found`)];for(const P in l){const k=P.split(".")[0],O=h[k]||h["*"];let j;if(m[k])j=m[k];else if(h[k])j=C;else if(m["*"])j=m["*"];else{if(!h["*"]){E.push(new He(r,l[P],`unknown property "${P}"`));continue}j=C}E=E.concat(j({key:(r&&`${r}.`)+P,value:l[P],valueSpec:O,style:y,styleSpec:v,object:l,objectKey:P,validateSpec:C},l))}for(const P in h)m[P]||h[P].required&&h[P].default===void 0&&l[P]===void 0&&E.push(new He(r,l,`missing required property "${P}"`));return E}function pu(A){const r=A.value,l=A.valueSpec,h=A.style,m=A.styleSpec,y=A.key,v=A.arrayElementValidator||A.validateSpec;if(Xi(r)!=="array")return[new He(y,r,`array expected, ${Xi(r)} found`)];if(l.length&&r.length!==l.length)return[new He(y,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new He(y,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let C={type:l.value,values:l.values};m.$version<7&&(C.function=l.function),Xi(l.value)==="object"&&(C=l.value);let E=[];for(let S=0;S<r.length;S++)E=E.concat(v({array:r,arrayIndex:S,value:r[S],valueSpec:C,validateSpec:A.validateSpec,style:h,styleSpec:m,key:`${y}[${S}]`}));return E}function mu(A){const r=A.key,l=A.value,h=A.valueSpec;let m=Xi(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new He(r,l,`number expected, ${m} found`)]:"minimum"in h&&l<h.minimum?[new He(r,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new He(r,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function _u(A){const r=A.valueSpec,l=Pa(A.value.type);let h,m,y,v={};const C=l!=="categorical"&&A.value.property===void 0,E=!C,S=Xi(A.value.stops)==="array"&&Xi(A.value.stops[0])==="array"&&Xi(A.value.stops[0][0])==="object",P=mn({key:A.key,value:A.value,valueSpec:A.styleSpec.function,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(j){if(l==="identity")return[new He(j.key,j.value,'identity function may not have a "stops" property')];let K=[];const ie=j.value;return K=K.concat(pu({key:j.key,value:ie,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:k})),Xi(ie)==="array"&&ie.length===0&&K.push(new He(j.key,ie,"array must have at least one stop")),K},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:r,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return l==="identity"&&C&&P.push(new He(A.key,A.value,'missing required property "property"')),l==="identity"||A.value.stops||P.push(new He(A.key,A.value,'missing required property "stops"')),l==="exponential"&&A.valueSpec.expression&&!Au(A.valueSpec)&&P.push(new He(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(E&&!oA(A.valueSpec)?P.push(new He(A.key,A.value,"property functions not supported")):C&&!G0(A.valueSpec)&&P.push(new He(A.key,A.value,"zoom functions not supported"))),l!=="categorical"&&!S||A.value.property!==void 0||P.push(new He(A.key,A.value,'"property" property is required')),P;function k(j){let K=[];const ie=j.value,he=j.key;if(Xi(ie)!=="array")return[new He(he,ie,`array expected, ${Xi(ie)} found`)];if(ie.length!==2)return[new He(he,ie,`array length 2 expected, length ${ie.length} found`)];if(S){if(Xi(ie[0])!=="object")return[new He(he,ie,`object expected, ${Xi(ie[0])} found`)];if(ie[0].zoom===void 0)return[new He(he,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new He(he,ie,"object stop key must have value")];if(y&&y>Pa(ie[0].zoom))return[new He(he,ie[0].zoom,"stop zoom values must appear in ascending order")];Pa(ie[0].zoom)!==y&&(y=Pa(ie[0].zoom),m=void 0,v={}),K=K.concat(mn({key:`${he}[0]`,value:ie[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:mu,value:O}}))}else K=K.concat(O({key:`${he}[0]`,value:ie[0],validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},ie));return mo(_o(ie[1]))?K.concat([new He(`${he}[1]`,ie[1],"expressions are not allowed in function stops.")]):K.concat(j.validateSpec({key:`${he}[1]`,value:ie[1],valueSpec:r,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function O(j,K){const ie=Xi(j.value),he=Pa(j.value),be=j.value!==null?j.value:K;if(h){if(ie!==h)return[new He(j.key,be,`${ie} stop domain type must match previous stop domain type ${h}`)]}else h=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean")return[new He(j.key,be,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&l!=="categorical"){let Ne=`number expected, ${ie} found`;return oA(r)&&l===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new He(j.key,be,Ne)]}return l!=="categorical"||ie!=="number"||isFinite(he)&&Math.floor(he)===he?l!=="categorical"&&ie==="number"&&m!==void 0&&he<m?[new He(j.key,be,"stop domain values must appear in ascending order")]:(m=he,l==="categorical"&&he in v?[new He(j.key,be,"stop domain values must be unique")]:(v[he]=!0,[])):[new He(j.key,be,`integer expected, found ${he}`)]}}function bo(A){const r=(A.expressionContext==="property"?j0:ll)(_o(A.value),A.valueSpec);if(r.result==="error")return r.value.map(h=>new He(`${A.key}${h.key}`,A.value,h.message));const l=r.value.expression||r.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!l.outputDefined())return[new He(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!ol(l))return[new He(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!ol(l))return[new He(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!fc(l,["zoom","feature-state"]))return[new He(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!dc(l))return[new He(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Os(A){const r=A.key,l=A.value,h=A.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Pa(l))===-1&&m.push(new He(r,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Pa(l))===-1&&m.push(new He(r,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function bu(A){return bc(_o(A.value))?bo(mt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):yu(A)}function yu(A){const r=A.value,l=A.key;if(Xi(r)!=="array")return[new He(l,r,`array expected, ${Xi(r)} found`)];const h=A.styleSpec;let m,y=[];if(r.length<1)return[new He(l,r,"filter array must have at least 1 element")];switch(y=y.concat(Os({key:`${l}[0]`,value:r[0],valueSpec:h.filter_operator,style:A.style,styleSpec:A.styleSpec})),Pa(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Pa(r[1])==="$type"&&y.push(new He(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&y.push(new He(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=Xi(r[1]),m!=="string"&&y.push(new He(`${l}[1]`,r[1],`string expected, ${m} found`)));for(let v=2;v<r.length;v++)m=Xi(r[v]),Pa(r[1])==="$type"?y=y.concat(Os({key:`${l}[${v}]`,value:r[v],valueSpec:h.geometry_type,style:A.style,styleSpec:A.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new He(`${l}[${v}]`,r[v],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let v=1;v<r.length;v++)y=y.concat(yu({key:`${l}[${v}]`,value:r[v],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":m=Xi(r[1]),r.length!==2?y.push(new He(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new He(`${l}[1]`,r[1],`string expected, ${m} found`))}return y}function vu(A,r){const l=A.key,h=A.validateSpec,m=A.style,y=A.styleSpec,v=A.value,C=A.objectKey,E=y[`${r}_${A.layerType}`];if(!E)return[];const S=C.match(/^(.*)-transition$/);if(r==="paint"&&S&&E[S[1]]&&E[S[1]].transition)return h({key:l,value:v,valueSpec:y.transition,style:m,styleSpec:y});const P=A.valueSpec||E[C];if(!P)return[new He(l,v,`unknown property "${C}"`)];let k;if(Xi(v)==="string"&&oA(P)&&!P.tokens&&(k=/^{([^}]+)}$/.exec(v)))return[new He(l,v,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];const O=[];return A.layerType==="symbol"&&(C==="text-field"&&m&&!m.glyphs&&O.push(new He(l,v,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&gc(_o(v))&&Pa(v.type)==="identity"&&O.push(new He(l,v,'"text-font" does not support identity functions'))),O.concat(h({key:A.key,value:v,valueSpec:P,style:m,styleSpec:y,expressionContext:"property",propertyType:r,propertyKey:C}))}function q0(A){return vu(A,"paint")}function xu(A){return vu(A,"layout")}function wu(A){let r=[];const l=A.value,h=A.key,m=A.style,y=A.styleSpec;l.type||l.ref||r.push(new He(h,l,'either "type" or "ref" is required'));let v=Pa(l.type);const C=Pa(l.ref);if(l.id){const E=Pa(l.id);for(let S=0;S<A.arrayIndex;S++){const P=m.layers[S];Pa(P.id)===E&&r.push(new He(h,l.id,`duplicate layer id "${l.id}", previously used at line ${P.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(S=>{S in l&&r.push(new He(h,l[S],`"${S}" is prohibited for ref layers`))}),m.layers.forEach(S=>{Pa(S.id)===C&&(E=S)}),E?E.ref?r.push(new He(h,l.ref,"ref cannot reference another ref layer")):v=Pa(E.type):r.push(new He(h,l.ref,`ref layer "${C}" not found`))}else if(v!=="background")if(l.source){const E=m.sources&&m.sources[l.source],S=E&&Pa(E.type);E?S==="vector"&&v==="raster"?r.push(new He(h,l.source,`layer "${l.id}" requires a raster source`)):S!=="raster-dem"&&v==="hillshade"?r.push(new He(h,l.source,`layer "${l.id}" requires a raster-dem source`)):S==="raster"&&v!=="raster"?r.push(new He(h,l.source,`layer "${l.id}" requires a vector source`)):S!=="vector"||l["source-layer"]?S==="raster-dem"&&v!=="hillshade"?r.push(new He(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!l.paint||!l.paint["line-gradient"]||S==="geojson"&&E.lineMetrics||r.push(new He(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new He(h,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new He(h,l.source,`source "${l.source}" not found`))}else r.push(new He(h,l,'missing required property "source"'));return r=r.concat(mn({key:h,value:l,valueSpec:y.layer,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":()=>[],type:()=>A.validateSpec({key:`${h}.type`,value:l.type,valueSpec:y.layer.type,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,object:l,objectKey:"type"}),filter:bu,layout:E=>mn({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":S=>xu(mt({layerType:v},S))}}),paint:E=>mn({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":S=>q0(mt({layerType:v},S))}})}})),r}function Rn(A){const r=A.value,l=A.key,h=Xi(r);return h!=="string"?[new He(l,r,`string expected, ${h} found`)]:[]}const W0={promoteId:function({key:A,value:r}){if(Xi(r)==="string")return Rn({key:A,value:r});{const l=[];for(const h in r)l.push(...Rn({key:`${A}.${h}`,value:r[h]}));return l}}};function J0(A){const r=A.value,l=A.key,h=A.styleSpec,m=A.style,y=A.validateSpec;if(!r.type)return[new He(l,r,'"type" is required')];const v=Pa(r.type);let C;switch(v){case"vector":case"raster":return C=mn({key:l,value:r,valueSpec:h[`source_${v.replace("-","_")}`],style:A.style,styleSpec:h,objectElementValidators:W0,validateSpec:y}),C;case"raster-dem":return C=function(E){var S;const P=(S=E.sourceName)!==null&&S!==void 0?S:"",k=E.value,O=E.styleSpec,j=O.source_raster_dem,K=E.style;let ie=[];const he=Xi(k);if(k===void 0)return ie;if(he!=="object")return ie.push(new He("source_raster_dem",k,`object expected, ${he} found`)),ie;const be=Pa(k.encoding)==="custom",Ne=["redFactor","greenFactor","blueFactor","baseShift"],Be=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const G in k)!be&&Ne.includes(G)?ie.push(new He(G,k[G],`In "${P}": "${G}" is only valid when "encoding" is set to "custom". ${Be} encoding found`)):j[G]?ie=ie.concat(E.validateSpec({key:G,value:k[G],valueSpec:j[G],validateSpec:E.validateSpec,style:K,styleSpec:O})):ie.push(new He(G,k[G],`unknown property "${G}"`));return ie}({sourceName:l,value:r,style:A.style,styleSpec:h,validateSpec:y}),C;case"geojson":if(C=mn({key:l,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:y,objectElementValidators:W0}),r.cluster)for(const E in r.clusterProperties){const[S,P]=r.clusterProperties[E],k=typeof S=="string"?[S,["accumulated"],["get",E]]:S;C.push(...bo({key:`${l}.${E}.map`,value:P,expressionContext:"cluster-map"})),C.push(...bo({key:`${l}.${E}.reduce`,value:k,expressionContext:"cluster-reduce"}))}return C;case"video":return mn({key:l,value:r,valueSpec:h.source_video,style:m,validateSpec:y,styleSpec:h});case"image":return mn({key:l,value:r,valueSpec:h.source_image,style:m,validateSpec:y,styleSpec:h});case"canvas":return[new He(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Os({key:`${l}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ef(A){const r=A.value,l=A.styleSpec,h=l.light,m=A.style;let y=[];const v=Xi(r);if(r===void 0)return y;if(v!=="object")return y=y.concat([new He("light",r,`object expected, ${v} found`)]),y;for(const C in r){const E=C.match(/^(.*)-transition$/);y=y.concat(E&&h[E[1]]&&h[E[1]].transition?A.validateSpec({key:C,value:r[C],valueSpec:l.transition,validateSpec:A.validateSpec,style:m,styleSpec:l}):h[C]?A.validateSpec({key:C,value:r[C],valueSpec:h[C],validateSpec:A.validateSpec,style:m,styleSpec:l}):[new He(C,r[C],`unknown property "${C}"`)])}return y}function tf(A){const r=A.value,l=A.styleSpec,h=l.sky,m=A.style,y=Xi(r);if(r===void 0)return[];if(y!=="object")return[new He("sky",r,`object expected, ${y} found`)];let v=[];for(const C in r)v=v.concat(h[C]?A.validateSpec({key:C,value:r[C],valueSpec:h[C],style:m,styleSpec:l}):[new He(C,r[C],`unknown property "${C}"`)]);return v}function af(A){const r=A.value,l=A.styleSpec,h=l.terrain,m=A.style;let y=[];const v=Xi(r);if(r===void 0)return y;if(v!=="object")return y=y.concat([new He("terrain",r,`object expected, ${v} found`)]),y;for(const C in r)y=y.concat(h[C]?A.validateSpec({key:C,value:r[C],valueSpec:h[C],validateSpec:A.validateSpec,style:m,styleSpec:l}):[new He(C,r[C],`unknown property "${C}"`)]);return y}function rf(A){let r=[];const l=A.value,h=A.key;if(Array.isArray(l)){const m=[],y=[];for(const v in l)l[v].id&&m.includes(l[v].id)&&r.push(new He(h,l,`all the sprites' ids must be unique, but ${l[v].id} is duplicated`)),m.push(l[v].id),l[v].url&&y.includes(l[v].url)&&r.push(new He(h,l,`all the sprites' URLs must be unique, but ${l[v].url} is duplicated`)),y.push(l[v].url),r=r.concat(mn({key:`${h}[${v}]`,value:l[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:A.validateSpec}));return r}return Rn({key:h,value:l})}const lA={"*":()=>[],array:pu,boolean:function(A){const r=A.value,l=A.key,h=Xi(r);return h!=="boolean"?[new He(l,r,`boolean expected, ${h} found`)]:[]},number:mu,color:function(A){const r=A.key,l=A.value,h=Xi(l);return h!=="string"?[new He(r,l,`color expected, ${h} found`)]:Fi.parse(String(l))?[]:[new He(r,l,`color expected, "${l}" found`)]},constants:$0,enum:Os,filter:bu,function:_u,layer:wu,object:mn,source:J0,light:ef,sky:tf,terrain:af,projection:function(A){const r=A.value,l=A.styleSpec,h=l.projection,m=A.style,y=Xi(r);if(r===void 0)return[];if(y!=="object")return[new He("projection",r,`object expected, ${y} found`)];let v=[];for(const C in r)v=v.concat(h[C]?A.validateSpec({key:C,value:r[C],valueSpec:h[C],style:m,styleSpec:l}):[new He(C,r[C],`unknown property "${C}"`)]);return v},projectionDefinition:function(A){const r=A.key;let l=A.value;l=l instanceof String?l.valueOf():l;const h=Xi(l);return h!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(l)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(l)?["array","string"].includes(h)?[]:[new He(r,l,`projection expected, invalid type "${h}" found`)]:[new He(r,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Rn,formatted:function(A){return Rn(A).length===0?[]:bo(A)},resolvedImage:function(A){return Rn(A).length===0?[]:bo(A)},padding:function(A){const r=A.key,l=A.value;if(Xi(l)==="array"){if(l.length<1||l.length>4)return[new He(r,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<l.length;y++)m=m.concat(A.validateSpec({key:`${r}[${y}]`,value:l[y],validateSpec:A.validateSpec,valueSpec:h}));return m}return mu({key:r,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(A){const r=A.key,l=A.value,h=Xi(l),m=A.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new He(r,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let v=0;v<l.length;v+=2)y=y.concat(Os({key:`${r}[${v}]`,value:l[v],valueSpec:m.layout_symbol["text-anchor"]})),y=y.concat(pu({key:`${r}[${v+1}]`,value:l[v+1],valueSpec:{length:2,value:"number"},validateSpec:A.validateSpec,style:A.style,styleSpec:m}));return y},sprite:rf};function Xs(A){const r=A.value,l=A.valueSpec,h=A.styleSpec;return A.validateSpec=Xs,l.expression&&gc(Pa(r))?_u(A):l.expression&&mo(_o(r))?bo(A):l.type&&lA[l.type]?lA[l.type](A):mn(mt({},A,{valueSpec:l.type?h[l.type]:l}))}function Gr(A){const r=A.value,l=A.key,h=Rn(A);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new He(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new He(l,r,'"glyphs" url must include a "{range}" token'))),h}function kr(A,r=se){let l=[];return l=l.concat(Xs({key:"",value:A,valueSpec:r.$root,styleSpec:r,style:A,validateSpec:Xs,objectElementValidators:{glyphs:Gr,"*":()=>[]}})),A.constants&&(l=l.concat($0({key:"constants",value:A.constants}))),nf(l)}function In(A){return function(r){return A({...r,validateSpec:Xs})}}function nf(A){return[].concat(A).sort((r,l)=>r.line-l.line)}function jn(A){return function(...r){return nf(A.apply(this,r))}}kr.source=jn(In(J0)),kr.sprite=jn(In(rf)),kr.glyphs=jn(In(Gr)),kr.light=jn(In(ef)),kr.sky=jn(In(tf)),kr.terrain=jn(In(af)),kr.layer=jn(In(wu)),kr.filter=jn(In(bu)),kr.paintProperty=jn(In(q0)),kr.layoutProperty=jn(In(xu));const Kn=kr,sf=Kn.light,Bu=Kn.sky,Mp=Kn.paintProperty,Cu=Kn.layoutProperty;function of(A,r){let l=!1;if(r&&r.length)for(const h of r)A.fire(new fe(new Error(h.message))),l=!0;return l}class ps{constructor(r,l,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const v=new Int32Array(this.arrayBuffer);r=v[0],this.d=(l=v[1])+2*(h=v[2]);for(let E=0;E<this.d*this.d;E++){const S=v[3+E],P=v[3+E+1];m.push(S===P?null:v.subarray(S,P))}const C=v[3+m.length+1];this.keys=v.subarray(v[3+m.length],C),this.bboxes=v.subarray(C),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let v=0;v<this.d*this.d;v++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=r,this.padding=h,this.scale=l/r,this.uid=0;const y=h/l*r;this.min=-y,this.max=r+y}insert(r,l,h,m,y){this._forEachCell(l,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,l,h,m,y,v){this.cells[y].push(v)}query(r,l,h,m,y){const v=this.min,C=this.max;if(r<=v&&l<=v&&C<=h&&C<=m&&!y)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(r,l,h,m,this._queryCell,E,{},y),E}}_queryCell(r,l,h,m,y,v,C,E){const S=this.cells[y];if(S!==null){const P=this.keys,k=this.bboxes;for(let O=0;O<S.length;O++){const j=S[O];if(C[j]===void 0){const K=4*j;(E?E(k[K+0],k[K+1],k[K+2],k[K+3]):r<=k[K+2]&&l<=k[K+3]&&h>=k[K+0]&&m>=k[K+1])?(C[j]=!0,v.push(P[j])):C[j]=!1}}}}_forEachCell(r,l,h,m,y,v,C,E){const S=this._convertToCellCoord(r),P=this._convertToCellCoord(l),k=this._convertToCellCoord(h),O=this._convertToCellCoord(m);for(let j=S;j<=k;j++)for(let K=P;K<=O;K++){const ie=this.d*K+j;if((!E||E(this._convertFromCellCoord(j),this._convertFromCellCoord(K),this._convertFromCellCoord(j+1),this._convertFromCellCoord(K+1)))&&y.call(this,r,l,h,m,ie,v,C,E))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,l=3+this.cells.length+1+1;let h=0;for(let v=0;v<this.cells.length;v++)h+=this.cells[v].length;const m=new Int32Array(l+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=l;for(let v=0;v<r.length;v++){const C=r[v];m[3+v]=y,m.set(C,y),y+=C.length}return m[3+r.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+r.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(r,l){const h=r.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(r){return new ps(r.buffer)}}const ms={};function Ht(A,r,l={}){if(ms[A])throw new Error(`${A} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:A,writeable:!1}),ms[A]={klass:r,omit:l.omit||[],shallow:l.shallow||[]}}Ht("Object",Object),Ht("TransferableGridIndex",ps),Ht("Color",Fi),Ht("Error",Error),Ht("AJAXError",Xa),Ht("ResolvedImage",tn),Ht("StylePropertyFunction",mc),Ht("StyleExpression",cu,{omit:["_evaluator"]}),Ht("ZoomDependentExpression",uu),Ht("ZoomConstantExpression",hu),Ht("CompoundExpression",pn,{omit:["_evaluate"]});for(const A in nA)nA[A]._classRegistryKey||Ht(`Expression_${A}`,nA[A]);function Af(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Mu(A){return A.$name||A.constructor._classRegistryKey}function ul(A){return!function(r){if(r===null||typeof r!="object")return!1;const l=Mu(r);return!(!l||l==="Object")}(A)&&(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||A instanceof Error||Af(A)||pi(A)||ArrayBuffer.isView(A)||A instanceof ImageData)}function dl(A,r){if(ul(A))return(Af(A)||pi(A))&&r&&r.push(A),ArrayBuffer.isView(A)&&r&&r.push(A.buffer),A instanceof ImageData&&r&&r.push(A.data.buffer),A;if(Array.isArray(A)){const y=[];for(const v of A)y.push(dl(v,r));return y}if(typeof A!="object")throw new Error("can't serialize object of type "+typeof A);const l=Mu(A);if(!l)throw new Error(`can't serialize object of unregistered class ${A.constructor.name}`);if(!ms[l])throw new Error(`${l} is not registered.`);const{klass:h}=ms[l],m=h.serialize?h.serialize(A,r):{};if(h.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in A){if(!A.hasOwnProperty(y)||ms[l].omit.indexOf(y)>=0)continue;const v=A[y];m[y]=ms[l].shallow.indexOf(y)>=0?v:dl(v,r)}A instanceof Error&&(m.message=A.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(m.$name=l),m}function yo(A){if(ul(A))return A;if(Array.isArray(A))return A.map(yo);if(typeof A!="object")throw new Error("can't deserialize object of type "+typeof A);const r=Mu(A)||"Object";if(!ms[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:l}=ms[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(A);const h=Object.create(l.prototype);for(const m of Object.keys(A)){if(m==="$name")continue;const y=A[m];h[m]=ms[r].shallow.indexOf(m)>=0?y:yo(y)}return h}class fl{constructor(){this.first=!0}update(r,l){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Ni={"Latin-1 Supplement":A=>A>=128&&A<=255,"Hangul Jamo":A=>A>=4352&&A<=4607,Khmer:A=>A>=6016&&A<=6143,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Kanbun:A=>A>=12688&&A<=12703,"CJK Strokes":A=>A>=12736&&A<=12783,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Hangul Syllables":A=>A>=44032&&A<=55215,"Private Use Area":A=>A>=57344&&A<=63743,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function wc(A){for(const r of A)if(Cc(r.charCodeAt(0)))return!0;return!1}function lf(A){for(const r of A)if(!cf(r.charCodeAt(0)))return!1;return!0}function Bc(A){const r=A.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(r.join("|"),"u")}const Ru=Bc(["Arab","Dupl","Mong","Ougr","Syrc"]);function cf(A){return!Ru.test(String.fromCodePoint(A))}const hf=Bc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Cc(A){return!(A!==746&&A!==747&&(A<4352||!(Ni["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Ni["CJK Compatibility"](A)||Ni["CJK Strokes"](A)||!(!Ni["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||Ni["Enclosed CJK Letters and Months"](A)||Ni["Ideographic Description Characters"](A)||Ni.Kanbun(A)||Ni.Katakana(A)&&A!==12540||!(!Ni["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!Ni["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Ni["Vertical Forms"](A)||Ni["Yijing Hexagram Symbols"](A)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(A))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(A))||hf.test(String.fromCodePoint(A)))))}function uf(A){return!(Cc(A)||function(r){return!!(Ni["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Ni["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Ni["Letterlike Symbols"](r)||Ni["Number Forms"](r)||Ni["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Ni["Control Pictures"](r)&&r!==9251||Ni["Optical Character Recognition"](r)||Ni["Enclosed Alphanumerics"](r)||Ni["Geometric Shapes"](r)||Ni["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Ni["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Ni["CJK Symbols and Punctuation"](r)||Ni.Katakana(r)||Ni["Private Use Area"](r)||Ni["CJK Compatibility Forms"](r)||Ni["Small Form Variants"](r)||Ni["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(A))}const df=Bc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Iu(A){return df.test(String.fromCodePoint(A))}function ff(A,r){return!(!r&&Iu(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Ni.Khmer(A))}function Rp(A){for(const r of A)if(Iu(r.charCodeAt(0)))return!0;return!1}const Vs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(A){this.pluginStatus=A.pluginStatus,this.pluginURL=A.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(A){if(Vs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=A.applyArabicShaping,this.processBidirectionalText=A.processBidirectionalText,this.processStyledBidirectionalText=A.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(A,r){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(A.pluginStatus!=="loading")return this.setState(A),A;const l=A.pluginURL,h=new Promise(y=>{this.loadScriptResolve=y});r(l);const m=new Promise(y=>setTimeout(()=>y(),this.TIMEOUT));if(yield Promise.race([h,m]),this.isParsed()){const y={pluginStatus:"loaded",pluginURL:l};return this.setState(y),y}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class ga{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new fl,this.transition={})}isSupportedScript(r){return function(l,h){for(const m of l)if(!ff(m.charCodeAt(0),h))return!1;return!0}(r,Vs.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,l=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class gl{constructor(r,l){this.property=r,this.value=l,this.expression=function(h,m){if(gc(h))return new mc(h,m);if(mo(h)){const y=j0(h,m);if(y.result==="error")throw new Error(y.value.map(v=>`${v.key}: ${v.message}`).join(", "));return y.value}{let y=h;return m.type==="color"&&typeof h=="string"?y=Fi.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?y=_r.parse(h):m.type==="projectionDefinition"&&typeof h=="string"&&(y=Qr.parse(h)):y=Mr.parse(h),{kind:"constant",evaluate:()=>y}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,h){return this.property.possiblyEvaluate(this,r,l,h)}}class Mc{constructor(r){this.property=r,this.value=new gl(r,void 0)}transitioned(r,l){return new pl(this.property,this.value,l,dt({},r.transition,this.transition),r.now)}untransitioned(){return new pl(this.property,this.value,null,{},0)}}class Uu{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ct(this._values[r].value.value)}setValue(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Mc(this._values[r].property)),this._values[r].value=new gl(this._values[r].property,l===null?void 0:Ct(l))}getTransition(r){return Ct(this._values[r].transition)}setTransition(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Mc(this._values[r].property)),this._values[r].transition=Ct(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(r[l]=h);const m=this.getTransition(l);m!==void 0&&(r[`${l}-transition`]=m)}return r}transitioned(r,l){const h=new gf(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,l._values[m]);return h}untransitioned(){const r=new gf(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class pl{constructor(r,l,h,m,y){this.property=r,this.value=l,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,l,h){const m=r.now||0,y=this.value.possiblyEvaluate(r,l,h),v=this.prior;if(v){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return v.possiblyEvaluate(r,l,h);{const C=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(r,l,h),y,pt(C))}}return y}}class gf{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,h){const m=new Rc(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,l,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Eu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Ct(this._values[r].value)}setValue(r,l){this._values[r]=new gl(this._values[r].property,l===null?void 0:Ct(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(r[l]=h)}return r}possiblyEvaluate(r,l,h){const m=new Rc(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(r,l,h);return m}}class $n{constructor(r,l,h){this.property=r,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,h,m){return this.property.evaluate(this.value,this.parameters,r,l,h,m)}}class Rc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ri{constructor(r){this.specification=r}possiblyEvaluate(r,l){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(l)}interpolate(r,l,h){const m=ua[this.specification.type];return m?m(r,l,h):r}}class gi{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,h,m){return new $n(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},h,m)}:r.expression,l)}interpolate(r,l,h){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new $n(this,{kind:"constant",value:void 0},r.parameters);const m=ua[this.specification.type];if(m){const y=m(r.value.value,l.value.value,h);return new $n(this,{kind:"constant",value:y},r.parameters)}return r}evaluate(r,l,h,m,y,v){return r.kind==="constant"?r.value:r.evaluate(l,h,m,y,v)}}class ml extends gi{possiblyEvaluate(r,l,h,m){if(r.value===void 0)return new $n(this,{kind:"constant",value:void 0},l);if(r.expression.kind==="constant"){const y=r.expression.evaluate(l,null,{},h,m),v=r.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,C=this._calculate(v,v,v,l);return new $n(this,{kind:"constant",value:C},l)}if(r.expression.kind==="camera"){const y=this._calculate(r.expression.evaluate({zoom:l.zoom-1}),r.expression.evaluate({zoom:l.zoom}),r.expression.evaluate({zoom:l.zoom+1}),l);return new $n(this,{kind:"constant",value:y},l)}return new $n(this,r.expression,l)}evaluate(r,l,h,m,y,v){if(r.kind==="source"){const C=r.evaluate(l,h,m,y,v);return this._calculate(C,C,C,l)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(l.zoom)-1},h,m),r.evaluate({zoom:Math.floor(l.zoom)},h,m),r.evaluate({zoom:Math.floor(l.zoom)+1},h,m),l):r.value}_calculate(r,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:h,to:l}}interpolate(r){return r}}class Fu{constructor(r){this.specification=r}possiblyEvaluate(r,l,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const y=r.expression.evaluate(l,null,{},h,m);return this._calculate(y,y,y,l)}return this._calculate(r.expression.evaluate(new ga(Math.floor(l.zoom-1),l)),r.expression.evaluate(new ga(Math.floor(l.zoom),l)),r.expression.evaluate(new ga(Math.floor(l.zoom+1),l)),l)}}_calculate(r,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:h,to:l}}interpolate(r){return r}}class Tu{constructor(r){this.specification=r}possiblyEvaluate(r,l,h,m){return!!r.expression.evaluate(l,null,{},h,m)}interpolate(){return!1}}class jr{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in r){const h=r[l];h.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new gl(h,void 0),y=this.defaultTransitionablePropertyValues[l]=new Mc(h);this.defaultTransitioningPropertyValues[l]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}Ht("DataDrivenProperty",gi),Ht("DataConstantProperty",ri),Ht("CrossFadedDataDrivenProperty",ml),Ht("CrossFadedProperty",Fu),Ht("ColorRampProperty",Tu);const pf="-transition";class qn extends ve{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new Eu(l.layout)),l.paint)){this._transitionablePaint=new Uu(l.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Rc(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,h={}){l!=null&&this._validate(Cu,`layers.${this.id}.layout.${r}`,r,l,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return r.endsWith(pf)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,h={}){if(l!=null&&this._validate(Mp,`layers.${this.id}.paint.${r}`,r,l,h))return!1;if(r.endsWith(pf))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[r],y=m.property.specification["property-type"]==="cross-faded-data-driven",v=m.value.isDataDriven(),C=m.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const E=this._transitionablePaint._values[r].value;return E.isDataDriven()||v||y||this._handleOverridablePaintPropertyUpdate(r,C,E)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,l,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Qt(r,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(r,l,h,m,y={}){return(!y||y.validate!==!1)&&of(this,r.call(Kn,{key:l,layerType:this.type,objectKey:h,value:m,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof $n&&oA(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const cA={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _l{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ya{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Da(A,r=1){let l=0,h=0;return{members:A.map(m=>{const y=cA[m.type].BYTES_PER_ELEMENT,v=l=Su(l,Math.max(r,y)),C=m.components||1;return h=Math.max(h,y),l+=y*C,{name:m.name,type:m.type,components:C,offset:v}}),size:Su(l,Math.max(h,r)),alignment:r}}function Su(A,r){return Math.ceil(A/r)*r}class bl extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const h=this.length;return this.resize(h+1),this.emplace(h,r,l)}emplace(r,l,h){const m=2*r;return this.int16[m+0]=l,this.int16[m+1]=h,r}}bl.prototype.bytesPerElement=4,Ht("StructArrayLayout2i4",bl);class Ic extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,h)}emplace(r,l,h,m){const y=3*r;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=m,r}}Ic.prototype.bytesPerElement=6,Ht("StructArrayLayout3i6",Ic);class _s extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,h,m)}emplace(r,l,h,m,y){const v=4*r;return this.int16[v+0]=l,this.int16[v+1]=h,this.int16[v+2]=m,this.int16[v+3]=y,r}}_s.prototype.bytesPerElement=8,Ht("StructArrayLayout4i8",_s);class Uc extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,l,h,m,y,v)}emplace(r,l,h,m,y,v,C){const E=6*r;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=v,this.int16[E+5]=C,r}}Uc.prototype.bytesPerElement=12,Ht("StructArrayLayout2i4i12",Uc);class yl extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,l,h,m,y,v)}emplace(r,l,h,m,y,v,C){const E=4*r,S=8*r;return this.int16[E+0]=l,this.int16[E+1]=h,this.uint8[S+4]=m,this.uint8[S+5]=y,this.uint8[S+6]=v,this.uint8[S+7]=C,r}}yl.prototype.bytesPerElement=8,Ht("StructArrayLayout2i4ub8",yl);class hA extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const h=this.length;return this.resize(h+1),this.emplace(h,r,l)}emplace(r,l,h){const m=2*r;return this.float32[m+0]=l,this.float32[m+1]=h,r}}hA.prototype.bytesPerElement=8,Ht("StructArrayLayout2f8",hA);class vl extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v,C,E,S,P){const k=this.length;return this.resize(k+1),this.emplace(k,r,l,h,m,y,v,C,E,S,P)}emplace(r,l,h,m,y,v,C,E,S,P,k){const O=10*r;return this.uint16[O+0]=l,this.uint16[O+1]=h,this.uint16[O+2]=m,this.uint16[O+3]=y,this.uint16[O+4]=v,this.uint16[O+5]=C,this.uint16[O+6]=E,this.uint16[O+7]=S,this.uint16[O+8]=P,this.uint16[O+9]=k,r}}vl.prototype.bytesPerElement=20,Ht("StructArrayLayout10ui20",vl);class Yu extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v,C,E,S,P,k,O){const j=this.length;return this.resize(j+1),this.emplace(j,r,l,h,m,y,v,C,E,S,P,k,O)}emplace(r,l,h,m,y,v,C,E,S,P,k,O,j){const K=12*r;return this.int16[K+0]=l,this.int16[K+1]=h,this.int16[K+2]=m,this.int16[K+3]=y,this.uint16[K+4]=v,this.uint16[K+5]=C,this.uint16[K+6]=E,this.uint16[K+7]=S,this.int16[K+8]=P,this.int16[K+9]=k,this.int16[K+10]=O,this.int16[K+11]=j,r}}Yu.prototype.bytesPerElement=24,Ht("StructArrayLayout4i4ui4i24",Yu);class uA extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,h)}emplace(r,l,h,m){const y=3*r;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=m,r}}uA.prototype.bytesPerElement=12,Ht("StructArrayLayout3f12",uA);class vo extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}vo.prototype.bytesPerElement=4,Ht("StructArrayLayout1ul4",vo);class Nu extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v,C,E,S){const P=this.length;return this.resize(P+1),this.emplace(P,r,l,h,m,y,v,C,E,S)}emplace(r,l,h,m,y,v,C,E,S,P){const k=10*r,O=5*r;return this.int16[k+0]=l,this.int16[k+1]=h,this.int16[k+2]=m,this.int16[k+3]=y,this.int16[k+4]=v,this.int16[k+5]=C,this.uint32[O+3]=E,this.uint16[k+8]=S,this.uint16[k+9]=P,r}}Nu.prototype.bytesPerElement=20,Ht("StructArrayLayout6i1ul2ui20",Nu);class Ec extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,l,h,m,y,v)}emplace(r,l,h,m,y,v,C){const E=6*r;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=y,this.int16[E+4]=v,this.int16[E+5]=C,r}}Ec.prototype.bytesPerElement=12,Ht("StructArrayLayout2i2i2i12",Ec);class xo extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,h,m,y)}emplace(r,l,h,m,y,v){const C=4*r,E=8*r;return this.float32[C+0]=l,this.float32[C+1]=h,this.float32[C+2]=m,this.int16[E+6]=y,this.int16[E+7]=v,r}}xo.prototype.bytesPerElement=16,Ht("StructArrayLayout2f1f2i16",xo);class Lu extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v){const C=this.length;return this.resize(C+1),this.emplace(C,r,l,h,m,y,v)}emplace(r,l,h,m,y,v,C){const E=16*r,S=4*r,P=8*r;return this.uint8[E+0]=l,this.uint8[E+1]=h,this.float32[S+1]=m,this.float32[S+2]=y,this.int16[P+6]=v,this.int16[P+7]=C,r}}Lu.prototype.bytesPerElement=16,Ht("StructArrayLayout2ub2f2i16",Lu);class Fc extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,h)}emplace(r,l,h,m){const y=3*r;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=m,r}}Fc.prototype.bytesPerElement=6,Ht("StructArrayLayout3ui6",Fc);class Tc extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v,C,E,S,P,k,O,j,K,ie,he,be){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,r,l,h,m,y,v,C,E,S,P,k,O,j,K,ie,he,be)}emplace(r,l,h,m,y,v,C,E,S,P,k,O,j,K,ie,he,be,Ne){const Be=24*r,G=12*r,le=48*r;return this.int16[Be+0]=l,this.int16[Be+1]=h,this.uint16[Be+2]=m,this.uint16[Be+3]=y,this.uint32[G+2]=v,this.uint32[G+3]=C,this.uint32[G+4]=E,this.uint16[Be+10]=S,this.uint16[Be+11]=P,this.uint16[Be+12]=k,this.float32[G+7]=O,this.float32[G+8]=j,this.uint8[le+36]=K,this.uint8[le+37]=ie,this.uint8[le+38]=he,this.uint32[G+10]=be,this.int16[Be+22]=Ne,r}}Tc.prototype.bytesPerElement=48,Ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Tc);class Pu extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,m,y,v,C,E,S,P,k,O,j,K,ie,he,be,Ne,Be,G,le,Ce,$e,vt,it,nt,Rt,wt){const Et=this.length;return this.resize(Et+1),this.emplace(Et,r,l,h,m,y,v,C,E,S,P,k,O,j,K,ie,he,be,Ne,Be,G,le,Ce,$e,vt,it,nt,Rt,wt)}emplace(r,l,h,m,y,v,C,E,S,P,k,O,j,K,ie,he,be,Ne,Be,G,le,Ce,$e,vt,it,nt,Rt,wt,Et){const lt=32*r,Vt=16*r;return this.int16[lt+0]=l,this.int16[lt+1]=h,this.int16[lt+2]=m,this.int16[lt+3]=y,this.int16[lt+4]=v,this.int16[lt+5]=C,this.int16[lt+6]=E,this.int16[lt+7]=S,this.uint16[lt+8]=P,this.uint16[lt+9]=k,this.uint16[lt+10]=O,this.uint16[lt+11]=j,this.uint16[lt+12]=K,this.uint16[lt+13]=ie,this.uint16[lt+14]=he,this.uint16[lt+15]=be,this.uint16[lt+16]=Ne,this.uint16[lt+17]=Be,this.uint16[lt+18]=G,this.uint16[lt+19]=le,this.uint16[lt+20]=Ce,this.uint16[lt+21]=$e,this.uint16[lt+22]=vt,this.uint32[Vt+12]=it,this.float32[Vt+13]=nt,this.float32[Vt+14]=Rt,this.uint16[lt+30]=wt,this.uint16[lt+31]=Et,r}}Pu.prototype.bytesPerElement=64,Ht("StructArrayLayout8i15ui1ul2f2ui64",Pu);class _ extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}_.prototype.bytesPerElement=4,Ht("StructArrayLayout1f4",_);class i extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,h)}emplace(r,l,h,m){const y=3*r;return this.uint16[6*r+0]=l,this.float32[y+1]=h,this.float32[y+2]=m,r}}i.prototype.bytesPerElement=12,Ht("StructArrayLayout1ui2f12",i);class o extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,h)}emplace(r,l,h,m){const y=4*r;return this.uint32[2*r+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=m,r}}o.prototype.bytesPerElement=8,Ht("StructArrayLayout1ul2ui8",o);class d extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const h=this.length;return this.resize(h+1),this.emplace(h,r,l)}emplace(r,l,h){const m=2*r;return this.uint16[m+0]=l,this.uint16[m+1]=h,r}}d.prototype.bytesPerElement=4,Ht("StructArrayLayout2ui4",d);class p extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}p.prototype.bytesPerElement=2,Ht("StructArrayLayout1ui2",p);class b extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,h,m)}emplace(r,l,h,m,y){const v=4*r;return this.float32[v+0]=l,this.float32[v+1]=h,this.float32[v+2]=m,this.float32[v+3]=y,r}}b.prototype.bytesPerElement=16,Ht("StructArrayLayout4f16",b);class w extends _l{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new N(this.anchorPointX,this.anchorPointY)}}w.prototype.size=20;class U extends Nu{get(r){return new w(this,r)}}Ht("CollisionBoxArray",U);class T extends _l{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}T.prototype.size=48;class Y extends Tc{get(r){return new T(this,r)}}Ht("PlacedSymbolArray",Y);class Q extends _l{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Q.prototype.size=64;class z extends Pu{get(r){return new Q(this,r)}}Ht("SymbolInstanceArray",z);class Z extends _{getoffsetX(r){return this.float32[1*r+0]}}Ht("GlyphOffsetArray",Z);class J extends Ic{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Ht("SymbolLineVertexArray",J);class te extends _l{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}te.prototype.size=12;class me extends i{get(r){return new te(this,r)}}Ht("TextAnchorOffsetArray",me);class pe extends _l{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}pe.prototype.size=8;class _e extends o{get(r){return new pe(this,r)}}Ht("FeatureIndexArray",_e);class xe extends bl{}class Me extends bl{}class Re extends bl{}class Fe extends Uc{}class Pe extends yl{}class Ye extends hA{}class Ke extends vl{}class qe extends Yu{}class At extends uA{}class ht extends vo{}class ot extends Ec{}class Lt extends Lu{}class Ut extends Fc{}class yt extends d{}const ti=Da([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ii}=ti;class bi{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,l,h,m){const y=this.segments[this.segments.length-1];return r>bi.MAX_VERTEX_ARRAY_LENGTH&&Ai(`Max vertices per segment is ${bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${bi.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!y||y.vertexLength+r>bi.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m?this.createNewSegment(l,h,m):y}createNewSegment(r,l,h){const m={vertexOffset:r.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(m.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(r,l,h){return this.prepareSegment(0,r,l,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,h,m){return new bi([{vertexOffset:r,primitiveOffset:l,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function xa(A,r){return 256*(A=tt(Math.floor(A),0,255))+tt(Math.floor(r),0,255)}bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ht("SegmentVector",bi);const ia=Da([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var wa,pa,aa,Ji={exports:{}},nr={exports:{}},qa={exports:{}},br=function(){if(aa)return Ji.exports;aa=1;var A=(wa||(wa=1,nr.exports=function(l,h){var m,y,v,C,E,S,P,k;for(y=l.length-(m=3&l.length),v=h,E=3432918353,S=461845907,k=0;k<y;)P=255&l.charCodeAt(k)|(255&l.charCodeAt(++k))<<8|(255&l.charCodeAt(++k))<<16|(255&l.charCodeAt(++k))<<24,++k,v=27492+(65535&(C=5*(65535&(v=(v^=P=(65535&(P=(P=(65535&P)*E+(((P>>>16)*E&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(P=0,m){case 3:P^=(255&l.charCodeAt(k+2))<<16;case 2:P^=(255&l.charCodeAt(k+1))<<8;case 1:v^=P=(65535&(P=(P=(65535&(P^=255&l.charCodeAt(k)))*E+(((P>>>16)*E&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return v^=l.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}),nr.exports),r=(pa||(pa=1,qa.exports=function(l,h){for(var m,y=l.length,v=h^y,C=0;y>=4;)m=1540483477*(65535&(m=255&l.charCodeAt(C)|(255&l.charCodeAt(++C))<<8|(255&l.charCodeAt(++C))<<16|(255&l.charCodeAt(++C))<<24))+((1540483477*(m>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),y-=4,++C;switch(y){case 3:v^=(255&l.charCodeAt(C+2))<<16;case 2:v^=(255&l.charCodeAt(C+1))<<8;case 1:v=1540483477*(65535&(v^=255&l.charCodeAt(C)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}),qa.exports);return Ji.exports=A,Ji.exports.murmur3=A,Ji.exports.murmur2=r,Ji.exports}(),Ir=x(br);class Wn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,h,m){this.ids.push(Gs(r)),this.positions.push(l,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Gs(r);let h=0,m=this.ids.length-1;for(;h<m;){const v=h+m>>1;this.ids[v]>=l?m=v:h=v+1}const y=[];for(;this.ids[h]===l;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(r,l){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return bs(h,m,0,h.length-1),l&&l.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const l=new Wn;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function Gs(A){const r=+A;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Ir(String(A))}function bs(A,r,l,h){for(;l<h;){const m=A[l+h>>1];let y=l-1,v=h+1;for(;;){do y++;while(A[y]<m);do v--;while(A[v]>m);if(y>=v)break;ys(A,y,v),ys(r,3*y,3*v),ys(r,3*y+1,3*v+1),ys(r,3*y+2,3*v+2)}v-l<h-v?(bs(A,r,l,v),l=v+1):(bs(A,r,v+1,h),h=v)}}function ys(A,r,l){const h=A[r];A[r]=A[l],A[l]=h}Ht("FeaturePositionMap",Wn);class Jn{constructor(r,l){this.gl=r.gl,this.location=l}}class wo extends Jn{constructor(r,l){super(r,l),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Bo extends Jn{constructor(r,l){super(r,l),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class an extends Jn{constructor(r,l){super(r,l),this.current=Fi.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const js=new Float32Array(16);function vs(A){return[xa(255*A.r,255*A.g),xa(255*A.b,255*A.a)]}class xs{constructor(r,l,h){this.value=r,this.uniformNames=l.map(m=>`u_${m}`),this.type=h}setUniform(r,l,h){r.set(h.constantOr(this.value))}getBinding(r,l,h){return this.type==="color"?new an(r,l):new wo(r,l)}}class Ma{constructor(r,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=r.tlbr}setUniform(r,l,h,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&r.set(y)}getBinding(r,l,h){return h.substr(0,9)==="u_pattern"?new Bo(r,l):new wo(r,l)}}class ma{constructor(r,l,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,l,h,m,y){const v=this.paintVertexArray.length,C=this.expression.evaluate(new ga(0),l,{},m,[],y);this.paintVertexArray.resize(r),this._setPaintValue(v,r,C)}updatePaintArray(r,l,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,l,y)}_setPaintValue(r,l,h){if(this.type==="color"){const m=vs(h);for(let y=r;y<l;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=r;m<l;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qa{constructor(r,l,h,m,y,v){this.expression=r,this.uniformNames=l.map(C=>`u_${C}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(r,l,h,m,y){const v=this.expression.evaluate(new ga(this.zoom),l,{},m,[],y),C=this.expression.evaluate(new ga(this.zoom+1),l,{},m,[],y),E=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(E,r,v,C)}updatePaintArray(r,l,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),v=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,l,y,v)}_setPaintValue(r,l,h,m){if(this.type==="color"){const y=vs(h),v=vs(m);for(let C=r;C<l;C++)this.paintVertexArray.emplace(C,y[0],y[1],v[0],v[1])}else{for(let y=r;y<l;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=tt(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,l,h){return new wo(r,l)}}class Ba{constructor(r,l,h,m,y,v){this.expression=r,this.type=l,this.useIntegerZoom=h,this.zoom=m,this.layerId=v,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(r,l,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(r,l,h,m,y){this._setPaintValues(r,l,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(r,l,h,m){if(!m||!h)return;const{min:y,mid:v,max:C}=h,E=m[y],S=m[v],P=m[C];if(E&&S&&P)for(let k=r;k<l;k++)this.zoomInPaintVertexArray.emplace(k,S.tl[0],S.tl[1],S.br[0],S.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],S.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(k,S.tl[0],S.tl[1],S.br[0],S.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],S.pixelRatio,P.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ia.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ia.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class mf{constructor(r,l,h){this.binders={},this._buffers=[];const m=[];for(const y in r.paint._values){if(!h(y))continue;const v=r.paint.get(y);if(!(v instanceof $n&&oA(v.property.specification)))continue;const C=Ip(y,r.type),E=v.value,S=v.property.specification.type,P=v.property.useIntegerZoom,k=v.property.specification["property-type"],O=k==="cross-faded"||k==="cross-faded-data-driven";if(E.kind==="constant")this.binders[y]=O?new Ma(E.value,C):new xs(E.value,C,S),m.push(`/u_${y}`);else if(E.kind==="source"||O){const j=_f(y,S,"source");this.binders[y]=O?new Ba(E,S,P,l,j,r.id):new ma(E,C,S,j),m.push(`/a_${y}`)}else{const j=_f(y,S,"composite");this.binders[y]=new Qa(E,C,S,P,l,j),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof ma||l instanceof Qa?l.maxValue:0}populatePaintArrays(r,l,h,m,y){for(const v in this.binders){const C=this.binders[v];(C instanceof ma||C instanceof Qa||C instanceof Ba)&&C.populatePaintArray(r,l,h,m,y)}}setConstantPatternPositions(r,l){for(const h in this.binders){const m=this.binders[h];m instanceof Ma&&m.setConstantPatternPositions(r,l)}}updatePaintArrays(r,l,h,m,y){let v=!1;for(const C in r){const E=l.getPositions(C);for(const S of E){const P=h.feature(S.index);for(const k in this.binders){const O=this.binders[k];if((O instanceof ma||O instanceof Qa||O instanceof Ba)&&O.expression.isStateDependent===!0){const j=m.paint.get(k);O.expression=j.value,O.updatePaintArray(S.start,S.end,P,r[C],y),v=!0}}}}return v}defines(){const r=[];for(const l in this.binders){const h=this.binders[l];(h instanceof xs||h instanceof Ma)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof ma||h instanceof Qa)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof Ba)for(let m=0;m<ia.members.length;m++)r.push(ia.members[m].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof xs||h instanceof Ma||h instanceof Qa)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,l){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof xs||y instanceof Ma||y instanceof Qa){for(const v of y.uniformNames)if(l[v]){const C=y.getBinding(r,l[v],v);h.push({name:v,property:m,binding:C})}}}return h}setUniforms(r,l,h,m){for(const{name:y,property:v,binding:C}of l)this.binders[v].setUniform(C,m,h.get(v),y)}updatePaintBuffers(r){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(r&&h instanceof Ba){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof ma||h instanceof Qa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const l in this.binders){const h=this.binders[l];(h instanceof ma||h instanceof Qa||h instanceof Ba)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof ma||l instanceof Qa||l instanceof Ba)&&l.destroy()}}}class Co{constructor(r,l,h=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new mf(m,l,h);this.needsUpload=!1,this._featureMap=new Wn,this._bufferOffset=0}populatePaintArrays(r,l,h,m,y,v){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(r,l,m,y,v);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,l,y,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Ip(A,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${r}-`,"").replace(/-/g,"_")]}function _f(A,r,l){const h={color:{source:hA,composite:b},number:{source:_,composite:hA}},m=function(y){return{"line-pattern":{source:Ke,composite:Ke},"fill-pattern":{source:Ke,composite:Ke},"fill-extrusion-pattern":{source:Ke,composite:Ke}}[y]}(A);return m&&m[l]||h[r][l]}Ht("ConstantBinder",xs),Ht("CrossFadedConstantBinder",Ma),Ht("SourceExpressionBinder",ma),Ht("CrossFadedCompositeBinder",Ba),Ht("CompositeExpressionBinder",Qa),Ht("ProgramConfiguration",mf,{omit:["_buffers"]}),Ht("ProgramConfigurationSet",Co);const Qu=Math.pow(2,14)-1,bf=-Qu-1;function rn(A){const r=xt/A.extent,l=A.loadGeometry();for(let h=0;h<l.length;h++){const m=l[h];for(let y=0;y<m.length;y++){const v=m[y],C=Math.round(v.x*r),E=Math.round(v.y*r);v.x=tt(C,bf,Qu),v.y=tt(E,bf,Qu),(C<v.x||C>v.x+1||E<v.y||E>v.y+1)&&Ai("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Ks(A,r){return{type:A.type,id:A.id,properties:A.properties,geometry:r?rn(A):[]}}const ku=-32768;function yf(A,r,l,h,m){A.emplaceBack(ku+8*r+h,ku+8*l+m)}class xl{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Me,this.indexArray=new Ut,this.segments=new bi,this.programConfigurations=new Co(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,h){const m=this.layers[0],y=[];let v=null,C=!1,E=m.type==="heatmap";if(m.type==="circle"){const P=m;v=P.layout.get("circle-sort-key"),C=!v.isConstant(),E=E||P.paint.get("circle-pitch-alignment")==="map"}const S=E?l.subdivisionGranularity.circle:1;for(const{feature:P,id:k,index:O,sourceLayerIndex:j}of r){const K=this.layers[0]._featureFilter.needGeometry,ie=Ks(P,K);if(!this.layers[0]._featureFilter.filter(new ga(this.zoom),ie,h))continue;const he=C?v.evaluate(ie,{},h):void 0,be={id:k,properties:P.properties,type:P.type,sourceLayerIndex:j,index:O,geometry:K?ie.geometry:rn(P),patterns:{},sortKey:he};y.push(be)}C&&y.sort((P,k)=>P.sortKey-k.sortKey);for(const P of y){const{geometry:k,index:O,sourceLayerIndex:j}=P,K=r[O].feature;this.addFeature(P,k,O,h,S),l.featureIndex.insert(K,k,O,j,this.index)}}update(r,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ii),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,h,m,y=1){let v;switch(y){case 1:v=[0,7];break;case 3:v=[0,2,5,7];break;case 5:v=[0,1,3,4,6,7];break;case 7:v=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${y}; valid values are 1, 3, 5, 7.`)}const C=v.length;for(const E of l)for(const S of E){const P=S.x,k=S.y;if(P<0||P>=xt||k<0||k>=xt)continue;const O=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,r.sortKey),j=O.vertexLength;for(let K=0;K<C;K++)for(let ie=0;ie<C;ie++)yf(this.layoutVertexArray,P,k,v[ie],v[K]);for(let K=0;K<C-1;K++)for(let ie=0;ie<C-1;ie++){const he=j+K*C+ie,be=j+(K+1)*C+ie;this.indexArray.emplaceBack(he,be+1,he+1),this.indexArray.emplaceBack(he,be,be+1)}O.vertexLength+=C*C,O.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function Du(A,r){for(let l=0;l<A.length;l++)if(wl(r,A[l]))return!0;for(let l=0;l<r.length;l++)if(wl(A,r[l]))return!0;return!!Up(A,r)}function zu(A,r,l){return!!wl(A,r)||!!Ep(r,A,l)}function B4(A,r){if(A.length===1)return M4(r,A[0]);for(let l=0;l<r.length;l++){const h=r[l];for(let m=0;m<h.length;m++)if(wl(A,h[m]))return!0}for(let l=0;l<A.length;l++)if(M4(r,A[l]))return!0;for(let l=0;l<r.length;l++)if(Up(A,r[l]))return!0;return!1}function zx(A,r,l){if(A.length>1){if(Up(A,r))return!0;for(let h=0;h<r.length;h++)if(Ep(r[h],A,l))return!0}for(let h=0;h<A.length;h++)if(Ep(A[h],r,l))return!0;return!1}function Up(A,r){if(A.length===0||r.length===0)return!1;for(let l=0;l<A.length-1;l++){const h=A[l],m=A[l+1];for(let y=0;y<r.length-1;y++)if(Zx(h,m,r[y],r[y+1]))return!0}return!1}function Zx(A,r,l,h){return Nt(A,l,h)!==Nt(r,l,h)&&Nt(A,r,l)!==Nt(A,r,h)}function Ep(A,r,l){const h=l*l;if(r.length===1)return A.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(C4(A,r[m-1],r[m])<h)return!0;return!1}function C4(A,r,l){const h=r.distSqr(l);if(h===0)return A.distSqr(r);const m=((A.x-r.x)*(l.x-r.x)+(A.y-r.y)*(l.y-r.y))/h;return A.distSqr(m<0?r:m>1?l:l.sub(r)._mult(m)._add(r))}function M4(A,r){for(let l=0;l<A.length;l++)if(wl(A[l],r))return!0;return!1}function wl(A,r){let l=!1;for(let h=0,m=A.length-1;h<A.length;m=h++){const y=A[h],v=A[m];y.y>r.y!=v.y>r.y&&r.x<(v.x-y.x)*(r.y-y.y)/(v.y-y.y)+y.x&&(l=!l)}return l}function Hx(A,r,l){const h=l[0],m=l[2];if(A.x<h.x&&r.x<h.x||A.x>m.x&&r.x>m.x||A.y<h.y&&r.y<h.y||A.y>m.y&&r.y>m.y)return!1;const y=Nt(A,r,l[0]);return y!==Nt(A,r,l[1])||y!==Nt(A,r,l[2])||y!==Nt(A,r,l[3])}function Zu(A,r,l){const h=r.paint.get(A).value;return h.kind==="constant"?h.value:l.programConfigurations.get(r.id).getMaxValue(A)}function vf(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function xf(A,r,l,h,m){if(!r[0]&&!r[1])return A;const y=N.convert(r)._mult(m);l==="viewport"&&y._rotate(-h);const v=[];for(let C=0;C<A.length;C++)v.push(A[C].sub(y));return v}let R4,I4;Ht("CircleBucket",xl,{omit:["layers"]});var Ox={get paint(){return I4=I4||new jr({"circle-radius":new gi(se.paint_circle["circle-radius"]),"circle-color":new gi(se.paint_circle["circle-color"]),"circle-blur":new gi(se.paint_circle["circle-blur"]),"circle-opacity":new gi(se.paint_circle["circle-opacity"]),"circle-translate":new ri(se.paint_circle["circle-translate"]),"circle-translate-anchor":new ri(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ri(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ri(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gi(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gi(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gi(se.paint_circle["circle-stroke-opacity"])})},get layout(){return R4=R4||new jr({"circle-sort-key":new gi(se.layout_circle["circle-sort-key"])})}};class Xx extends qn{constructor(r){super(r,Ox)}createBucket(r){return new xl(r)}queryRadius(r){const l=r;return Zu("circle-radius",this,l)+Zu("circle-stroke-width",this,l)+vf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:l,featureState:h,geometry:m,transform:y,pixelsToTileUnits:v,unwrappedTileID:C,getElevation:E}){const S=xf(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-y.bearingInRadians,v),P=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),k=this.paint.get("circle-pitch-alignment")==="map",O=k?S:function(K,ie,he,be){return K.map(Ne=>U4(Ne,ie,he,be))}(S,y,C,E),j=k?P*v:P;for(const K of m)for(const ie of K){const he=k?ie:U4(ie,y,C,E);let be=j;const Ne=y.projectTileCoordinates(ie.x,ie.y,C,E).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Ne/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=y.cameraToCenterDistance/Ne),zu(O,he,be))return!0}return!1}}function U4(A,r,l,h){const m=r.projectTileCoordinates(A.x,A.y,l,h).point;return new N((.5*m.x+.5)*r.width,(.5*-m.y+.5)*r.height)}class E4 extends xl{}let F4;Ht("HeatmapBucket",E4,{omit:["layers"]});var Vx={get paint(){return F4=F4||new jr({"heatmap-radius":new gi(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gi(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ri(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Tu(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ri(se.paint_heatmap["heatmap-opacity"])})}};function Fp(A,{width:r,height:l},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*l*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*l*h}`)}else m=new Uint8Array(r*l*h);return A.width=r,A.height=l,A.data=m,A}function T4(A,{width:r,height:l},h){if(r===A.width&&l===A.height)return;const m=Fp({},{width:r,height:l},h);Tp(A,m,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,r),height:Math.min(A.height,l)},h),A.width=r,A.height=l,A.data=m.data}function Tp(A,r,l,h,m,y){if(m.width===0||m.height===0)return r;if(m.width>A.width||m.height>A.height||l.x>A.width-m.width||l.y>A.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const v=A.data,C=r.data;if(v===C)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<m.height;E++){const S=((l.y+E)*A.width+l.x)*y,P=((h.y+E)*r.width+h.x)*y;for(let k=0;k<m.width*y;k++)C[P+k]=v[S+k]}return r}class Hu{constructor(r,l){Fp(this,r,1,l)}resize(r){T4(this,r,1)}clone(){return new Hu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,h,m,y){Tp(r,l,h,m,y,1)}}class Un{constructor(r,l){Fp(this,r,4,l)}resize(r){T4(this,r,4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Un({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,h,m,y){Tp(r,l,h,m,y,4)}}function S4(A){const r={},l=A.resolution||256,h=A.clips?A.clips.length:1,m=A.image||new Un({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const y=(v,C,E)=>{r[A.evaluationKey]=E;const S=A.expression.evaluate(r);m.data[v+C+0]=Math.floor(255*S.r/S.a),m.data[v+C+1]=Math.floor(255*S.g/S.a),m.data[v+C+2]=Math.floor(255*S.b/S.a),m.data[v+C+3]=Math.floor(255*S.a)};if(A.clips)for(let v=0,C=0;v<h;++v,C+=4*l)for(let E=0,S=0;E<l;E++,S+=4){const P=E/(l-1),{start:k,end:O}=A.clips[v];y(C,S,k*(1-P)+O*P)}else for(let v=0,C=0;v<l;v++,C+=4)y(0,C,v/(l-1));return m}Ht("AlphaImage",Hu),Ht("RGBAImage",Un);const Sp="big-fb";class Gx extends qn{createBucket(r){return new E4(r)}constructor(r){super(r,Vx),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=S4({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Sp)&&this.heatmapFbos.delete(Sp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Y4;var jx={get paint(){return Y4=Y4||new jr({"hillshade-illumination-direction":new ri(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ri(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ri(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ri(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ri(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ri(se.paint_hillshade["hillshade-accent-color"])})}};class Kx extends qn{constructor(r){super(r,jx)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const $x=Da([{name:"a_pos",components:2,type:"Int16"}],4),{members:qx}=$x;function Yp(A,r,l){const h=l.patternDependencies;let m=!1;for(const y of r){const v=y.paint.get(`${A}-pattern`);v.isConstant()||(m=!0);const C=v.constantOr(null);C&&(m=!0,h[C.to]=!0,h[C.from]=!0)}return m}function Np(A,r,l,h,m){const y=m.patternDependencies;for(const v of r){const C=v.paint.get(`${A}-pattern`).value;if(C.kind!=="constant"){let E=C.evaluate({zoom:h-1},l,{},m.availableImages),S=C.evaluate({zoom:h},l,{},m.availableImages),P=C.evaluate({zoom:h+1},l,{},m.availableImages);E=E&&E.name?E.name:E,S=S&&S.name?S.name:S,P=P&&P.name?P.name:P,y[E]=!0,y[S]=!0,y[P]=!0,l.patterns[v.id]={min:E,mid:S,max:P}}}return l}function N4(A,r,l,h,m){let y;if(m===function(v,C,E,S){let P=0;for(let k=C,O=E-S;k<E;k+=S)P+=(v[O]-v[k])*(v[k+1]+v[O+1]),O=k;return P}(A,r,l,h)>0)for(let v=r;v<l;v+=h)y=k4(v/h|0,A[v],A[v+1],y);else for(let v=l-h;v>=r;v-=h)y=k4(v/h|0,A[v],A[v+1],y);return y&&Sc(y,y.next)&&(Gu(y),y=y.next),y}function Bl(A,r){if(!A)return A;r||(r=A);let l,h=A;do if(l=!1,h.steiner||!Sc(h,h.next)&&za(h.prev,h,h.next)!==0)h=h.next;else{if(Gu(h),h=r=h.prev,h===h.next)break;l=!0}while(l||h!==r);return r}function Ou(A,r,l,h,m,y,v){if(!A)return;!v&&y&&function(E,S,P,k){let O=E;do O.z===0&&(O.z=Lp(O.x,O.y,S,P,k)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==E);O.prevZ.nextZ=null,O.prevZ=null,function(j){let K,ie=1;do{let he,be=j;j=null;let Ne=null;for(K=0;be;){K++;let Be=be,G=0;for(let Ce=0;Ce<ie&&(G++,Be=Be.nextZ,Be);Ce++);let le=ie;for(;G>0||le>0&&Be;)G!==0&&(le===0||!Be||be.z<=Be.z)?(he=be,be=be.nextZ,G--):(he=Be,Be=Be.nextZ,le--),Ne?Ne.nextZ=he:j=he,he.prevZ=Ne,Ne=he;be=Be}Ne.nextZ=null,ie*=2}while(K>1)}(O)}(A,h,m,y);let C=A;for(;A.prev!==A.next;){const E=A.prev,S=A.next;if(y?Jx(A,h,m,y):Wx(A))r.push(E.i,A.i,S.i),Gu(A),A=S.next,C=S.next;else if((A=S)===C){v?v===1?Ou(A=ew(Bl(A),r),r,l,h,m,y,2):v===2&&tw(A,r,l,h,m,y):Ou(Bl(A),r,l,h,m,y,1);break}}}function Wx(A){const r=A.prev,l=A,h=A.next;if(za(r,l,h)>=0)return!1;const m=r.x,y=l.x,v=h.x,C=r.y,E=l.y,S=h.y,P=Math.min(m,y,v),k=Math.min(C,E,S),O=Math.max(m,y,v),j=Math.max(C,E,S);let K=h.next;for(;K!==r;){if(K.x>=P&&K.x<=O&&K.y>=k&&K.y<=j&&Xu(m,C,y,E,v,S,K.x,K.y)&&za(K.prev,K,K.next)>=0)return!1;K=K.next}return!0}function Jx(A,r,l,h){const m=A.prev,y=A,v=A.next;if(za(m,y,v)>=0)return!1;const C=m.x,E=y.x,S=v.x,P=m.y,k=y.y,O=v.y,j=Math.min(C,E,S),K=Math.min(P,k,O),ie=Math.max(C,E,S),he=Math.max(P,k,O),be=Lp(j,K,r,l,h),Ne=Lp(ie,he,r,l,h);let Be=A.prevZ,G=A.nextZ;for(;Be&&Be.z>=be&&G&&G.z<=Ne;){if(Be.x>=j&&Be.x<=ie&&Be.y>=K&&Be.y<=he&&Be!==m&&Be!==v&&Xu(C,P,E,k,S,O,Be.x,Be.y)&&za(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,G.x>=j&&G.x<=ie&&G.y>=K&&G.y<=he&&G!==m&&G!==v&&Xu(C,P,E,k,S,O,G.x,G.y)&&za(G.prev,G,G.next)>=0))return!1;G=G.nextZ}for(;Be&&Be.z>=be;){if(Be.x>=j&&Be.x<=ie&&Be.y>=K&&Be.y<=he&&Be!==m&&Be!==v&&Xu(C,P,E,k,S,O,Be.x,Be.y)&&za(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;G&&G.z<=Ne;){if(G.x>=j&&G.x<=ie&&G.y>=K&&G.y<=he&&G!==m&&G!==v&&Xu(C,P,E,k,S,O,G.x,G.y)&&za(G.prev,G,G.next)>=0)return!1;G=G.nextZ}return!0}function ew(A,r){let l=A;do{const h=l.prev,m=l.next.next;!Sc(h,m)&&P4(h,l,l.next,m)&&Vu(h,m)&&Vu(m,h)&&(r.push(h.i,l.i,m.i),Gu(l),Gu(l.next),l=A=m),l=l.next}while(l!==A);return Bl(l)}function tw(A,r,l,h,m,y){let v=A;do{let C=v.next.next;for(;C!==v.prev;){if(v.i!==C.i&&sw(v,C)){let E=Q4(v,C);return v=Bl(v,v.next),E=Bl(E,E.next),Ou(v,r,l,h,m,y,0),void Ou(E,r,l,h,m,y,0)}C=C.next}v=v.next}while(v!==A)}function iw(A,r){let l=A.x-r.x;return l===0&&(l=A.y-r.y,l===0)&&(l=(A.next.y-A.y)/(A.next.x-A.x)-(r.next.y-r.y)/(r.next.x-r.x)),l}function aw(A,r){const l=function(m,y){let v=y;const C=m.x,E=m.y;let S,P=-1/0;if(Sc(m,v))return v;do{if(Sc(m,v.next))return v.next;if(E<=v.y&&E>=v.next.y&&v.next.y!==v.y){const ie=v.x+(E-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(ie<=C&&ie>P&&(P=ie,S=v.x<v.next.x?v:v.next,ie===C))return S}v=v.next}while(v!==y);if(!S)return null;const k=S,O=S.x,j=S.y;let K=1/0;v=S;do{if(C>=v.x&&v.x>=O&&C!==v.x&&L4(E<j?C:P,E,O,j,E<j?P:C,E,v.x,v.y)){const ie=Math.abs(E-v.y)/(C-v.x);Vu(v,m)&&(ie<K||ie===K&&(v.x>S.x||v.x===S.x&&rw(S,v)))&&(S=v,K=ie)}v=v.next}while(v!==k);return S}(A,r);if(!l)return r;const h=Q4(l,A);return Bl(h,h.next),Bl(l,l.next)}function rw(A,r){return za(A.prev,A,r.prev)<0&&za(r.next,A,A.next)<0}function Lp(A,r,l,h,m){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-l)*m|0)|A<<8))|A<<4))|A<<2))|A<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function nw(A){let r=A,l=A;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==A);return l}function L4(A,r,l,h,m,y,v,C){return(m-v)*(r-C)>=(A-v)*(y-C)&&(A-v)*(h-C)>=(l-v)*(r-C)&&(l-v)*(y-C)>=(m-v)*(h-C)}function Xu(A,r,l,h,m,y,v,C){return!(A===v&&r===C)&&L4(A,r,l,h,m,y,v,C)}function sw(A,r){return A.next.i!==r.i&&A.prev.i!==r.i&&!function(l,h){let m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==h.i&&m.next.i!==h.i&&P4(m,m.next,l,h))return!0;m=m.next}while(m!==l);return!1}(A,r)&&(Vu(A,r)&&Vu(r,A)&&function(l,h){let m=l,y=!1;const v=(l.x+h.x)/2,C=(l.y+h.y)/2;do m.y>C!=m.next.y>C&&m.next.y!==m.y&&v<(m.next.x-m.x)*(C-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==l);return y}(A,r)&&(za(A.prev,A,r.prev)||za(A,r.prev,r))||Sc(A,r)&&za(A.prev,A,A.next)>0&&za(r.prev,r,r.next)>0)}function za(A,r,l){return(r.y-A.y)*(l.x-r.x)-(r.x-A.x)*(l.y-r.y)}function Sc(A,r){return A.x===r.x&&A.y===r.y}function P4(A,r,l,h){const m=Bf(za(A,r,l)),y=Bf(za(A,r,h)),v=Bf(za(l,h,A)),C=Bf(za(l,h,r));return m!==y&&v!==C||!(m!==0||!wf(A,l,r))||!(y!==0||!wf(A,h,r))||!(v!==0||!wf(l,A,h))||!(C!==0||!wf(l,r,h))}function wf(A,r,l){return r.x<=Math.max(A.x,l.x)&&r.x>=Math.min(A.x,l.x)&&r.y<=Math.max(A.y,l.y)&&r.y>=Math.min(A.y,l.y)}function Bf(A){return A>0?1:A<0?-1:0}function Vu(A,r){return za(A.prev,A,A.next)<0?za(A,r,A.next)>=0&&za(A,A.prev,r)>=0:za(A,r,A.prev)<0||za(A,A.next,r)<0}function Q4(A,r){const l=Pp(A.i,A.x,A.y),h=Pp(r.i,r.x,r.y),m=A.next,y=r.prev;return A.next=r,r.prev=A,l.next=m,m.prev=l,h.next=l,l.prev=h,y.next=h,h.prev=y,h}function k4(A,r,l,h){const m=Pp(A,r,l);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Gu(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Pp(A,r,l){return{i:A,x:r,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Yc{constructor(r,l){if(l>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=l}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class Cf{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}Cf.noSubdivision=new Cf({fill:new Yc(0,0),line:new Yc(0,0),tile:new Yc(0,0),stencil:new Yc(0,0),circle:1}),Ht("SubdivisionGranularityExpression",Yc),Ht("SubdivisionGranularitySetting",Cf);const Nc=-32768,ju=32767;class ow{constructor(r,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=xt/r,this._canonical=l}_getKey(r,l){return(r+=32768)<<16|(l+=32768)<<0}_vertexToIndex(r,l){if(r<-32768||l<-32768||r>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(r),m=0|Math.round(l),y=this._getKey(h,m);if(this._vertexDictionary.has(y))return this._vertexDictionary.get(y);const v=this._vertexBuffer.length/2;return this._vertexDictionary.set(y,v),this._vertexBuffer.push(h,m),v}_subdivideTrianglesScanline(r){if(this._granularity<2)return function(m,y){const v=[];for(let C=0;C<y.length;C+=3){const E=y[C],S=y[C+1],P=y[C+2],k=m[2*E],O=m[2*E+1];(m[2*S]-k)*(m[2*P+1]-O)-(m[2*S+1]-O)*(m[2*P]-k)>0?(v.push(E),v.push(P),v.push(S)):(v.push(E),v.push(S),v.push(P))}return v}(this._vertexBuffer,r);const l=[],h=r.length;for(let m=0;m<h;m+=3){const y=[r[m+0],r[m+1],r[m+2]],v=[this._vertexBuffer[2*r[m+0]+0],this._vertexBuffer[2*r[m+0]+1],this._vertexBuffer[2*r[m+1]+0],this._vertexBuffer[2*r[m+1]+1],this._vertexBuffer[2*r[m+2]+0],this._vertexBuffer[2*r[m+2]+1]];let C=1/0,E=1/0,S=-1/0,P=-1/0;for(let ie=0;ie<3;ie++){const he=v[2*ie],be=v[2*ie+1];C=Math.min(C,he),S=Math.max(S,he),E=Math.min(E,be),P=Math.max(P,be)}if(C===S||E===P)continue;const k=Math.floor(C/this._granularityCellSize),O=Math.ceil(S/this._granularityCellSize),j=Math.floor(E/this._granularityCellSize),K=Math.ceil(P/this._granularityCellSize);if(k!==O||j!==K)for(let ie=j;ie<K;ie++){const he=this._scanlineGenerateVertexRingForCellRow(ie,v,y);Aw(this._vertexBuffer,he,l)}else l.push(...y)}return l}_scanlineGenerateVertexRingForCellRow(r,l,h){const m=r*this._granularityCellSize,y=m+this._granularityCellSize,v=[];for(let C=0;C<3;C++){const E=l[2*C],S=l[2*C+1],P=l[2*(C+1)%6],k=l[(2*(C+1)+1)%6],O=l[2*(C+2)%6],j=l[(2*(C+2)+1)%6],K=P-E,ie=k-S,he=K===0,be=ie===0,Ne=(m-S)/ie,Be=(y-S)/ie,G=Math.min(Ne,Be),le=Math.max(Ne,Be);if(!be&&(G>=1||le<=0)||be&&(S<m||S>y)){k>=m&&k<=y&&v.push(h[(C+1)%3]);continue}!be&&G>0&&v.push(this._vertexToIndex(E+K*G,S+ie*G));const Ce=E+K*Math.max(G,0),$e=E+K*Math.min(le,1);he||this._generateIntraEdgeVertices(v,E,S,P,k,Ce,$e),!be&&le<1&&v.push(this._vertexToIndex(E+K*le,S+ie*le)),(be||k>=m&&k<=y)&&v.push(h[(C+1)%3]),!be&&(k<=m||k>=y)&&this._generateInterEdgeVertices(v,E,S,P,k,O,j,$e,m,y)}return v}_generateIntraEdgeVertices(r,l,h,m,y,v,C){const E=m-l,S=y-h,P=S===0,k=P?Math.min(l,m):Math.min(v,C),O=P?Math.max(l,m):Math.max(v,C),j=Math.floor(k/this._granularityCellSize)+1,K=Math.ceil(O/this._granularityCellSize)-1;if(P?l<m:v<C)for(let ie=j;ie<=K;ie++){const he=ie*this._granularityCellSize;r.push(this._vertexToIndex(he,h+S*(he-l)/E))}else for(let ie=K;ie>=j;ie--){const he=ie*this._granularityCellSize;r.push(this._vertexToIndex(he,h+S*(he-l)/E))}}_generateInterEdgeVertices(r,l,h,m,y,v,C,E,S,P){const k=y-h,O=v-m,j=C-y,K=(S-y)/j,ie=(P-y)/j,he=Math.min(K,ie),be=Math.max(K,ie),Ne=m+O*he;let Be=Math.floor(Math.min(Ne,E)/this._granularityCellSize)+1,G=Math.ceil(Math.max(Ne,E)/this._granularityCellSize)-1,le=E<Ne;const Ce=j===0;if(Ce&&(C===S||C===P))return;if(Ce||he>=1||be<=0){const vt=h-C,it=v+(l-v)*Math.min((S-C)/vt,(P-C)/vt);Be=Math.floor(Math.min(it,E)/this._granularityCellSize)+1,G=Math.ceil(Math.max(it,E)/this._granularityCellSize)-1,le=E<it}const $e=k>0?P:S;if(le)for(let vt=Be;vt<=G;vt++)r.push(this._vertexToIndex(vt*this._granularityCellSize,$e));else for(let vt=G;vt>=Be;vt--)r.push(this._vertexToIndex(vt*this._granularityCellSize,$e))}_generateOutline(r){const l=[];for(const h of r){const m=Cl(h,this._granularity,!0),y=this._pointArrayToIndices(m),v=[];for(let C=1;C<y.length;C++)v.push(y[C-1]),v.push(y[C]);l.push(v)}return l}_handlePoles(r){let l=!1,h=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(l||h)&&this._fillPoles(r,l,h)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let l=0;l<r.length;l+=2){const h=r[l+1];h===Nc&&(r[l+1]=-32767),h===ju&&(r[l+1]=32766)}}_generatePoleQuad(r,l,h,m,y,v){m>y!=(v===Nc)?(r.push(l),r.push(h),r.push(this._vertexToIndex(m,v)),r.push(h),r.push(this._vertexToIndex(y,v)),r.push(this._vertexToIndex(m,v))):(r.push(h),r.push(l),r.push(this._vertexToIndex(m,v)),r.push(this._vertexToIndex(y,v)),r.push(h),r.push(this._vertexToIndex(m,v)))}_fillPoles(r,l,h){const m=this._vertexBuffer,y=xt,v=r.length;for(let C=2;C<v;C+=3){const E=r[C-2],S=r[C-1],P=r[C],k=m[2*E],O=m[2*E+1],j=m[2*S],K=m[2*S+1],ie=m[2*P],he=m[2*P+1];l&&(O===0&&K===0&&this._generatePoleQuad(r,E,S,k,j,Nc),K===0&&he===0&&this._generatePoleQuad(r,S,P,j,ie,Nc),he===0&&O===0&&this._generatePoleQuad(r,P,E,ie,k,Nc)),h&&(O===y&&K===y&&this._generatePoleQuad(r,E,S,k,j,ju),K===y&&he===y&&this._generatePoleQuad(r,S,P,j,ie,ju),he===y&&O===y&&this._generatePoleQuad(r,P,E,ie,k,ju))}}_initializeVertices(r){for(let l=0;l<r.length;l+=2)this._vertexToIndex(r[l],r[l+1])}subdividePolygonInternal(r,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:m}=function(C){const E=[],S=[];for(const P of C)if(P.length!==0){P!==C[0]&&E.push(S.length/2);for(let k=0;k<P.length;k++)S.push(P[k].x),S.push(P[k].y)}return{flattened:S,holeIndices:E}}(r);let y;this._initializeVertices(h);try{const C=function(S,P,k=2){const O=P&&P.length,j=O?P[0]*k:S.length;let K=N4(S,0,j,k,!0);const ie=[];if(!K||K.next===K.prev)return ie;let he,be,Ne;if(O&&(K=function(Be,G,le,Ce){const $e=[];for(let vt=0,it=G.length;vt<it;vt++){const nt=N4(Be,G[vt]*Ce,vt<it-1?G[vt+1]*Ce:Be.length,Ce,!1);nt===nt.next&&(nt.steiner=!0),$e.push(nw(nt))}$e.sort(iw);for(let vt=0;vt<$e.length;vt++)le=aw($e[vt],le);return le}(S,P,K,k)),S.length>80*k){he=1/0,be=1/0;let Be=-1/0,G=-1/0;for(let le=k;le<j;le+=k){const Ce=S[le],$e=S[le+1];Ce<he&&(he=Ce),$e<be&&(be=$e),Ce>Be&&(Be=Ce),$e>G&&(G=$e)}Ne=Math.max(Be-he,G-be),Ne=Ne!==0?32767/Ne:0}return Ou(K,ie,k,he,be,Ne,0),ie}(h,m),E=this._convertIndices(h,C);y=this._subdivideTrianglesScanline(E)}catch(C){console.error(C)}let v=[];return l&&(v=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(y),{verticesFlattened:this._vertexBuffer,indicesTriangles:y,indicesLineList:v}}_convertIndices(r,l){const h=[];for(let m=0;m<l.length;m++)h.push(this._vertexToIndex(r[2*l[m]],r[2*l[m]+1]));return h}_pointArrayToIndices(r){const l=[];for(let h=0;h<r.length;h++){const m=r[h];l.push(this._vertexToIndex(m.x,m.y))}return l}}function D4(A,r,l,h=!0){return new ow(l,r).subdividePolygonInternal(A,h)}function Cl(A,r,l=!1){if(!A||A.length<1)return[];if(A.length<2)return[];const h=A[0],m=A[A.length-1],y=l&&(h.x!==m.x||h.y!==m.y);if(r<2)return y?[...A,A[0]]:[...A];const v=Math.floor(xt/r),C=[];C.push(new N(A[0].x,A[0].y));const E=A.length,S=y?E:E-1;for(let P=0;P<S;P++){const k=A[P],O=P<E-1?A[P+1]:A[0],j=k.x,K=k.y,ie=O.x,he=O.y,be=j!==ie,Ne=K!==he;if(!be&&!Ne)continue;const Be=ie-j,G=he-K,le=Math.abs(Be),Ce=Math.abs(G);let $e=j,vt=K;for(;;){const nt=Be>0?(Math.floor($e/v)+1)*v:(Math.ceil($e/v)-1)*v,Rt=G>0?(Math.floor(vt/v)+1)*v:(Math.ceil(vt/v)-1)*v,wt=Math.abs($e-nt),Et=Math.abs(vt-Rt),lt=Math.abs($e-ie),Vt=Math.abs(vt-he),fi=be?wt/le:Number.POSITIVE_INFINITY,ui=Ne?Et/Ce:Number.POSITIVE_INFINITY;if((lt<=wt||!be)&&(Vt<=Et||!Ne))break;if(fi<ui&&be||!Ne){$e=nt,vt+=G*fi;const ii=new N($e,Math.round(vt));C[C.length-1].x===ii.x&&C[C.length-1].y===ii.y||C.push(ii)}else{$e+=Be*ui,vt=Rt;const ii=new N(Math.round($e),vt);C[C.length-1].x===ii.x&&C[C.length-1].y===ii.y||C.push(ii)}}const it=new N(ie,he);C[C.length-1].x===it.x&&C[C.length-1].y===it.y||C.push(it)}return C}function Aw(A,r,l){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,m=A[2*r[0]];for(let E=1;E<r.length;E++){const S=A[2*r[E]];S<m&&(m=S,h=E)}const y=r.length;let v=h,C=(v+1)%y;for(;;){const E=v-1>=0?v-1:y-1,S=(C+1)%y,P=A[2*r[E]],k=A[2*r[S]],O=A[2*r[v]],j=A[2*r[v]+1],K=A[2*r[C]+1];let ie=!1;if(P<k)ie=!0;else if(P>k)ie=!1;else{const he=K-j,be=-(A[2*r[C]]-O),Ne=j<K?1:-1;((P-O)*he+(A[2*r[E]+1]-j)*be)*Ne>((k-O)*he+(A[2*r[S]+1]-j)*be)*Ne&&(ie=!0)}if(ie){const he=r[E],be=r[v],Ne=r[C];he!==be&&he!==Ne&&be!==Ne&&l.push(Ne,be,he),v--,v<0&&(v=y-1)}else{const he=r[S],be=r[v],Ne=r[C];he!==be&&he!==Ne&&be!==Ne&&l.push(Ne,be,he),C++,C>=y&&(C=0)}if(E===S)break}}function z4(A,r,l,h,m,y,v,C,E){const S=m.length/2,P=v&&C&&E;if(S<bi.MAX_VERTEX_ARRAY_LENGTH){const k=r.prepareSegment(S,l,h),O=k.vertexLength;for(let ie=0;ie<y.length;ie+=3)h.emplaceBack(O+y[ie],O+y[ie+1],O+y[ie+2]);let j,K;k.vertexLength+=S,k.primitiveLength+=y.length/3,P&&(K=v.prepareSegment(S,l,C),j=K.vertexLength,K.vertexLength+=S);for(let ie=0;ie<m.length;ie+=2)A(m[ie],m[ie+1]);if(P)for(let ie=0;ie<E.length;ie++){const he=E[ie];for(let be=1;be<he.length;be+=2)C.emplaceBack(j+he[be-1],j+he[be]);K.primitiveLength+=he.length/2}}else(function(k,O,j,K,ie,he){const be=[];for(let Ce=0;Ce<K.length/2;Ce++)be.push(-1);const Ne={count:0};let Be=0,G=k.getOrCreateLatestSegment(O,j),le=G.vertexLength;for(let Ce=2;Ce<ie.length;Ce+=3){const $e=ie[Ce-2],vt=ie[Ce-1],it=ie[Ce];let nt=be[$e]<Be,Rt=be[vt]<Be,wt=be[it]<Be;G.vertexLength+((nt?1:0)+(Rt?1:0)+(wt?1:0))>bi.MAX_VERTEX_ARRAY_LENGTH&&(G=k.createNewSegment(O,j),Be=Ne.count,nt=!0,Rt=!0,wt=!0,le=0);const Et=Ku(be,K,he,Ne,$e,nt,G),lt=Ku(be,K,he,Ne,vt,Rt,G),Vt=Ku(be,K,he,Ne,it,wt,G);j.emplaceBack(le+Et-Be,le+lt-Be,le+Vt-Be),G.primitiveLength++}})(r,l,h,m,y,A),P&&function(k,O,j,K,ie,he){const be=[];for(let Ce=0;Ce<K.length/2;Ce++)be.push(-1);const Ne={count:0};let Be=0,G=k.getOrCreateLatestSegment(O,j),le=G.vertexLength;for(let Ce=0;Ce<ie.length;Ce++){const $e=ie[Ce];for(let vt=1;vt<ie[Ce].length;vt+=2){const it=$e[vt-1],nt=$e[vt];let Rt=be[it]<Be,wt=be[nt]<Be;G.vertexLength+((Rt?1:0)+(wt?1:0))>bi.MAX_VERTEX_ARRAY_LENGTH&&(G=k.createNewSegment(O,j),Be=Ne.count,Rt=!0,wt=!0,le=0);const Et=Ku(be,K,he,Ne,it,Rt,G),lt=Ku(be,K,he,Ne,nt,wt,G);j.emplaceBack(le+Et-Be,le+lt-Be),G.primitiveLength++}}}(v,l,C,m,E,A),r.forceNewSegmentOnNextPrepare(),v==null||v.forceNewSegmentOnNextPrepare()}function Ku(A,r,l,h,m,y,v){if(y){const C=h.count;return l(r[2*m],r[2*m+1]),A[m]=h.count,h.count++,v.vertexLength++,C}return A[m]}class Qp{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Re,this.indexArray=new Ut,this.indexArray2=new yt,this.programConfigurations=new Co(r.layers,r.zoom),this.segments=new bi,this.segments2=new bi,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,h){this.hasPattern=Yp("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),v=[];for(const{feature:C,id:E,index:S,sourceLayerIndex:P}of r){const k=this.layers[0]._featureFilter.needGeometry,O=Ks(C,k);if(!this.layers[0]._featureFilter.filter(new ga(this.zoom),O,h))continue;const j=y?m.evaluate(O,{},h,l.availableImages):void 0,K={id:E,properties:C.properties,type:C.type,sourceLayerIndex:P,index:S,geometry:k?O.geometry:rn(C),patterns:{},sortKey:j};v.push(K)}y&&v.sort((C,E)=>C.sortKey-E.sortKey);for(const C of v){const{geometry:E,index:S,sourceLayerIndex:P}=C;if(this.hasPattern){const k=Np("fill",this.layers,C,this.zoom,l);this.patternFeatures.push(k)}else this.addFeature(C,E,S,h,{},l.subdivisionGranularity);l.featureIndex.insert(r[S].feature,E,S,P,this.index)}}update(r,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h)}addFeatures(r,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,qx),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,h,m,y,v){for(const C of nc(l,500)){const E=D4(C,m,v.fill.getGranularityForZoomLevel(m.z)),S=this.layoutVertexArray;z4((P,k)=>{S.emplaceBack(P,k)},this.segments,this.layoutVertexArray,this.indexArray,E.verticesFlattened,E.indicesTriangles,this.segments2,this.indexArray2,E.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}}let Z4,H4;Ht("FillBucket",Qp,{omit:["layers","patternFeatures"]});var lw={get paint(){return H4=H4||new jr({"fill-antialias":new ri(se.paint_fill["fill-antialias"]),"fill-opacity":new gi(se.paint_fill["fill-opacity"]),"fill-color":new gi(se.paint_fill["fill-color"]),"fill-outline-color":new gi(se.paint_fill["fill-outline-color"]),"fill-translate":new ri(se.paint_fill["fill-translate"]),"fill-translate-anchor":new ri(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new ml(se.paint_fill["fill-pattern"])})},get layout(){return Z4=Z4||new jr({"fill-sort-key":new gi(se.layout_fill["fill-sort-key"])})}};class cw extends qn{constructor(r){super(r,lw)}recalculate(r,l){super.recalculate(r,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Qp(r)}queryRadius(){return vf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:l,transform:h,pixelsToTileUnits:m}){return B4(xf(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,m),l)}isTileClipped(){return!0}}const hw=Da([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),uw=Da([{name:"a_centroid",components:2,type:"Int16"}],4),{members:dw}=hw;var kp,O4,Dp,X4,zp,V4,G4,Mf={};function j4(){if(O4)return kp;O4=1;var A=R();function r(m,y,v,C,E){this.properties={},this.extent=v,this.type=0,this._pbf=m,this._geometry=-1,this._keys=C,this._values=E,m.readFields(l,this,y)}function l(m,y,v){m==1?y.id=v.readVarint():m==2?function(C,E){for(var S=C.readVarint()+C.pos;C.pos<S;){var P=E._keys[C.readVarint()],k=E._values[C.readVarint()];E.properties[P]=k}}(v,y):m==3?y.type=v.readVarint():m==4&&(y._geometry=v.pos)}function h(m){for(var y,v,C=0,E=0,S=m.length,P=S-1;E<S;P=E++)C+=((v=m[P]).x-(y=m[E]).x)*(y.y+v.y);return C}return kp=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var y,v=m.readVarint()+m.pos,C=1,E=0,S=0,P=0,k=[];m.pos<v;){if(E<=0){var O=m.readVarint();C=7&O,E=O>>3}if(E--,C===1||C===2)S+=m.readSVarint(),P+=m.readSVarint(),C===1&&(y&&k.push(y),y=[]),y.push(new A(S,P));else{if(C!==7)throw new Error("unknown command "+C);y&&y.push(y[0].clone())}}return y&&k.push(y),k},r.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var y=m.readVarint()+m.pos,v=1,C=0,E=0,S=0,P=1/0,k=-1/0,O=1/0,j=-1/0;m.pos<y;){if(C<=0){var K=m.readVarint();v=7&K,C=K>>3}if(C--,v===1||v===2)(E+=m.readSVarint())<P&&(P=E),E>k&&(k=E),(S+=m.readSVarint())<O&&(O=S),S>j&&(j=S);else if(v!==7)throw new Error("unknown command "+v)}return[P,O,k,j]},r.prototype.toGeoJSON=function(m,y,v){var C,E,S=this.extent*Math.pow(2,v),P=this.extent*m,k=this.extent*y,O=this.loadGeometry(),j=r.types[this.type];function K(be){for(var Ne=0;Ne<be.length;Ne++){var Be=be[Ne];be[Ne]=[360*(Be.x+P)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Be.y+k)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(C=0;C<O.length;C++)ie[C]=O[C][0];K(O=ie);break;case 2:for(C=0;C<O.length;C++)K(O[C]);break;case 3:for(O=function(be){var Ne=be.length;if(Ne<=1)return[be];for(var Be,G,le=[],Ce=0;Ce<Ne;Ce++){var $e=h(be[Ce]);$e!==0&&(G===void 0&&(G=$e<0),G===$e<0?(Be&&le.push(Be),Be=[be[Ce]]):Be.push(be[Ce]))}return Be&&le.push(Be),le}(O),C=0;C<O.length;C++)for(E=0;E<O[C].length;E++)K(O[C][E])}O.length===1?O=O[0]:j="Multi"+j;var he={type:"Feature",geometry:{type:j,coordinates:O},properties:this.properties};return"id"in this&&(he.id=this.id),he},kp}function K4(){if(X4)return Dp;X4=1;var A=j4();function r(h,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,m),this.length=this._features.length}function l(h,m,y){h===15?m.version=y.readVarint():h===1?m.name=y.readString():h===5?m.extent=y.readVarint():h===2?m._features.push(y.pos):h===3?m._keys.push(y.readString()):h===4&&m._values.push(function(v){for(var C=null,E=v.readVarint()+v.pos;v.pos<E;){var S=v.readVarint()>>3;C=S===1?v.readString():S===2?v.readFloat():S===3?v.readDouble():S===4?v.readVarint64():S===5?v.readVarint():S===6?v.readSVarint():S===7?v.readBoolean():null}return C}(y))}return Dp=r,r.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var m=this._pbf.readVarint()+this._pbf.pos;return new A(this._pbf,m,this.extent,this._keys,this._values)},Dp}function $4(){return G4||(G4=1,Mf.VectorTile=function(){if(V4)return zp;V4=1;var A=K4();function r(l,h,m){if(l===3){var y=new A(m,m.readVarint()+m.pos);y.length&&(h[y.name]=y)}}return zp=function(l,h){this.layers=l.readFields(r,{},h)},zp}(),Mf.VectorTileFeature=j4(),Mf.VectorTileLayer=K4()),Mf}var $u=x($4());const fw=$u.VectorTileFeature.types,Zp=Math.pow(2,13);function qu(A,r,l,h,m,y,v,C){A.emplaceBack(r,l,2*Math.floor(h*Zp)+v,m*Zp*2,y*Zp*2,Math.round(C))}class Hp{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Fe,this.centroidVertexArray=new xe,this.indexArray=new Ut,this.programConfigurations=new Co(r.layers,r.zoom),this.segments=new bi,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,h){this.features=[],this.hasPattern=Yp("fill-extrusion",this.layers,l);for(const{feature:m,id:y,index:v,sourceLayerIndex:C}of r){const E=this.layers[0]._featureFilter.needGeometry,S=Ks(m,E);if(!this.layers[0]._featureFilter.filter(new ga(this.zoom),S,h))continue;const P={id:y,sourceLayerIndex:C,index:v,geometry:E?S.geometry:rn(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Np("fill-extrusion",this.layers,P,this.zoom,l)):this.addFeature(P,P.geometry,v,h,{},l.subdivisionGranularity),l.featureIndex.insert(m,P.geometry,v,C,this.index,!0)}}addFeatures(r,l,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,l,h,r.subdivisionGranularity)}}update(r,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,dw),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,uw.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,l,h,m,y,v){for(const C of nc(l,500)){const E={x:0,y:0,sampleCount:0},S=this.layoutVertexArray.length;this.processPolygon(E,m,r,C,v);const P=this.layoutVertexArray.length-S,k=Math.floor(E.x/E.sampleCount),O=Math.floor(E.y/E.sampleCount);for(let j=0;j<P;j++)this.centroidVertexArray.emplaceBack(k,O)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}processPolygon(r,l,h,m,y){if(m.length<1||q4(m[0]))return;for(const k of m)k.length!==0&&gw(r,k);const v={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=y.fill.getGranularityForZoomLevel(l.z),E=fw[h.type]==="Polygon";for(const k of m){if(k.length===0||q4(k))continue;const O=Cl(k,C,E);this._generateSideFaces(O,v)}if(!E)return;const S=D4(m,l,C,!1),P=this.layoutVertexArray;z4((k,O)=>{qu(P,k,O,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles)}_generateSideFaces(r,l){let h=0;for(let m=1;m<r.length;m++){const y=r[m],v=r[m-1];if(pw(y,v))continue;l.segment.vertexLength+4>bi.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=y.sub(v)._perp()._unit(),E=v.dist(y);h+E>32768&&(h=0),qu(this.layoutVertexArray,y.x,y.y,C.x,C.y,0,0,h),qu(this.layoutVertexArray,y.x,y.y,C.x,C.y,0,1,h),h+=E,qu(this.layoutVertexArray,v.x,v.y,C.x,C.y,0,0,h),qu(this.layoutVertexArray,v.x,v.y,C.x,C.y,0,1,h);const S=l.segment.vertexLength;this.indexArray.emplaceBack(S,S+2,S+1),this.indexArray.emplaceBack(S+1,S+2,S+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function gw(A,r){for(let l=0;l<r.length;l++){const h=r[l];l===r.length-1&&r[0].x===h.x&&r[0].y===h.y||(A.x+=h.x,A.y+=h.y,A.sampleCount++)}}function pw(A,r){return A.x===r.x&&(A.x<0||A.x>xt)||A.y===r.y&&(A.y<0||A.y>xt)}function q4(A){return A.every(r=>r.x<0)||A.every(r=>r.x>xt)||A.every(r=>r.y<0)||A.every(r=>r.y>xt)}let W4;Ht("FillExtrusionBucket",Hp,{omit:["layers","features"]});var mw={get paint(){return W4=W4||new jr({"fill-extrusion-opacity":new ri(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gi(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ri(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ri(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ml(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gi(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gi(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ri(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _w extends qn{constructor(r){super(r,mw)}createBucket(r){return new Hp(r)}queryRadius(){return vf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:l,featureState:h,geometry:m,transform:y,pixelsToTileUnits:v,pixelPosMatrix:C}){const E=xf(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-y.bearingInRadians,v),S=this.paint.get("fill-extrusion-height").evaluate(l,h),P=this.paint.get("fill-extrusion-base").evaluate(l,h),k=function(j,K,ie){const he=[];for(const be of j){const Ne=[be.x,be.y,0,1];Ve(Ne,Ne,K),he.push(new N(Ne[0]/Ne[3],Ne[1]/Ne[3]))}return he}(E,C),O=function(j,K,ie,he){const be=[],Ne=[],Be=he[8]*K,G=he[9]*K,le=he[10]*K,Ce=he[11]*K,$e=he[8]*ie,vt=he[9]*ie,it=he[10]*ie,nt=he[11]*ie;for(const Rt of j){const wt=[],Et=[];for(const lt of Rt){const Vt=lt.x,fi=lt.y,ui=he[0]*Vt+he[4]*fi+he[12],ii=he[1]*Vt+he[5]*fi+he[13],Pi=he[2]*Vt+he[6]*fi+he[14],Na=he[3]*Vt+he[7]*fi+he[15],Ja=Pi+le,Er=Na+Ce,Fn=ui+$e,sn=ii+vt,yr=Pi+it,Ra=Na+nt,sr=new N((ui+Be)/Er,(ii+G)/Er);sr.z=Ja/Er,wt.push(sr);const vr=new N(Fn/Ra,sn/Ra);vr.z=yr/Ra,Et.push(vr)}be.push(wt),Ne.push(Et)}return[be,Ne]}(m,P,S,C);return function(j,K,ie){let he=1/0;B4(ie,K)&&(he=J4(ie,K[0]));for(let be=0;be<K.length;be++){const Ne=K[be],Be=j[be];for(let G=0;G<Ne.length-1;G++){const le=Ne[G],Ce=[le,Ne[G+1],Be[G+1],Be[G],le];Du(ie,Ce)&&(he=Math.min(he,J4(ie,Ce)))}}return he!==1/0&&he}(O[0],O[1],k)}}function Wu(A,r){return A.x*r.x+A.y*r.y}function J4(A,r){if(A.length===1){let l=0;const h=r[l++];let m;for(;!m||h.equals(m);)if(m=r[l++],!m)return 1/0;for(;l<r.length;l++){const y=r[l],v=A[0],C=m.sub(h),E=y.sub(h),S=v.sub(h),P=Wu(C,C),k=Wu(C,E),O=Wu(E,E),j=Wu(S,C),K=Wu(S,E),ie=P*O-k*k,he=(O*j-k*K)/ie,be=(P*K-k*j)/ie,Ne=h.z*(1-he-be)+m.z*he+y.z*be;if(isFinite(Ne))return Ne}return 1/0}{let l=1/0;for(const h of r)l=Math.min(l,h.z);return l}}const bw=Da([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:yw}=bw,vw=Da([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:xw}=vw,ww=$u.VectorTileFeature.types,Bw=Math.cos(Math.PI/180*37.5),e_=Math.pow(2,14)/.5;class Op{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Pe,this.layoutVertexArray2=new Ye,this.indexArray=new Ut,this.programConfigurations=new Co(r.layers,r.zoom),this.segments=new bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,h){this.hasPattern=Yp("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),v=[];for(const{feature:C,id:E,index:S,sourceLayerIndex:P}of r){const k=this.layers[0]._featureFilter.needGeometry,O=Ks(C,k);if(!this.layers[0]._featureFilter.filter(new ga(this.zoom),O,h))continue;const j=y?m.evaluate(O,{},h):void 0,K={id:E,properties:C.properties,type:C.type,sourceLayerIndex:P,index:S,geometry:k?O.geometry:rn(C),patterns:{},sortKey:j};v.push(K)}y&&v.sort((C,E)=>C.sortKey-E.sortKey);for(const C of v){const{geometry:E,index:S,sourceLayerIndex:P}=C;if(this.hasPattern){const k=Np("line",this.layers,C,this.zoom,l);this.patternFeatures.push(k)}else this.addFeature(C,E,S,h,{},l.subdivisionGranularity);l.featureIndex.insert(r[S].feature,E,S,P,this.index)}}update(r,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,h)}addFeatures(r,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,xw)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,yw),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,h,m,y,v){const C=this.layers[0].layout,E=C.get("line-join").evaluate(r,{}),S=C.get("line-cap"),P=C.get("line-miter-limit"),k=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const O of l)this.addLine(O,r,E,S,P,k,m,v);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,m)}addLine(r,l,h,m,y,v,C,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=Cl(r,C?E.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<r.length-1;Be++)this.totalDistance+=r[Be].dist(r[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=ww[l.type]==="Polygon";let P=r.length;for(;P>=2&&r[P-1].equals(r[P-2]);)P--;let k=0;for(;k<P-1&&r[k].equals(r[k+1]);)k++;if(P<(S?3:2))return;h==="bevel"&&(y=1.05);const O=this.overscaling<=16?15*xt/(512*this.overscaling):0,j=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let K,ie,he,be,Ne;this.e1=this.e2=-1,S&&(K=r[P-2],Ne=r[k].sub(K)._unit()._perp());for(let Be=k;Be<P;Be++){if(he=Be===P-1?S?r[k+1]:void 0:r[Be+1],he&&r[Be].equals(he))continue;Ne&&(be=Ne),K&&(ie=K),K=r[Be],Ne=he?he.sub(K)._unit()._perp():be,be=be||Ne;let G=be.add(Ne);G.x===0&&G.y===0||G._unit();const le=be.x*Ne.x+be.y*Ne.y,Ce=G.x*Ne.x+G.y*Ne.y,$e=Ce!==0?1/Ce:1/0,vt=2*Math.sqrt(2-2*Ce),it=Ce<Bw&&ie&&he,nt=be.x*Ne.y-be.y*Ne.x>0;if(it&&Be>k){const Et=K.dist(ie);if(Et>2*O){const lt=K.sub(K.sub(ie)._mult(O/Et)._round());this.updateDistance(ie,lt),this.addCurrentVertex(lt,be,0,0,j),ie=lt}}const Rt=ie&&he;let wt=Rt?h:S?"butt":m;if(Rt&&wt==="round"&&($e<v?wt="miter":$e<=2&&(wt="fakeround")),wt==="miter"&&$e>y&&(wt="bevel"),wt==="bevel"&&($e>2&&(wt="flipbevel"),$e<y&&(wt="miter")),ie&&this.updateDistance(ie,K),wt==="miter")G._mult($e),this.addCurrentVertex(K,G,0,0,j);else if(wt==="flipbevel"){if($e>100)G=Ne.mult(-1);else{const Et=$e*be.add(Ne).mag()/be.sub(Ne).mag();G._perp()._mult(Et*(nt?-1:1))}this.addCurrentVertex(K,G,0,0,j),this.addCurrentVertex(K,G.mult(-1),0,0,j)}else if(wt==="bevel"||wt==="fakeround"){const Et=-Math.sqrt($e*$e-1),lt=nt?Et:0,Vt=nt?0:Et;if(ie&&this.addCurrentVertex(K,be,lt,Vt,j),wt==="fakeround"){const fi=Math.round(180*vt/Math.PI/20);for(let ui=1;ui<fi;ui++){let ii=ui/fi;if(ii!==.5){const Na=ii-.5;ii+=ii*Na*(ii-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*Na*Na+(.848013+le*(.215638*le-1.06021)))}const Pi=Ne.sub(be)._mult(ii)._add(be)._unit()._mult(nt?-1:1);this.addHalfVertex(K,Pi.x,Pi.y,!1,nt,0,j)}}he&&this.addCurrentVertex(K,Ne,-lt,-Vt,j)}else if(wt==="butt")this.addCurrentVertex(K,G,0,0,j);else if(wt==="square"){const Et=ie?1:-1;this.addCurrentVertex(K,G,Et,Et,j)}else wt==="round"&&(ie&&(this.addCurrentVertex(K,be,0,0,j),this.addCurrentVertex(K,be,1,1,j,!0)),he&&(this.addCurrentVertex(K,Ne,-1,-1,j,!0),this.addCurrentVertex(K,Ne,0,0,j)));if(it&&Be<P-1){const Et=K.dist(he);if(Et>2*O){const lt=K.add(he.sub(K)._mult(O/Et)._round());this.updateDistance(K,lt),this.addCurrentVertex(lt,Ne,0,0,j),K=lt}}}}addCurrentVertex(r,l,h,m,y,v=!1){const C=l.y*m-l.x,E=-l.y-l.x*m;this.addHalfVertex(r,l.x+l.y*h,l.y-l.x*h,v,!1,h,y),this.addHalfVertex(r,C,E,v,!0,-m,y),this.distance>e_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,l,h,m,y,v))}addHalfVertex({x:r,y:l},h,m,y,v,C,E){const S=.5*(this.lineClips?this.scaledDistance*(e_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(y?1:0),(l<<1)+(v?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(C===0?0:C<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,P,this.e2),E.primitiveLength++),v?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}let t_,i_;Ht("LineBucket",Op,{omit:["layers","patternFeatures"]});var a_={get paint(){return i_=i_||new jr({"line-opacity":new gi(se.paint_line["line-opacity"]),"line-color":new gi(se.paint_line["line-color"]),"line-translate":new ri(se.paint_line["line-translate"]),"line-translate-anchor":new ri(se.paint_line["line-translate-anchor"]),"line-width":new gi(se.paint_line["line-width"]),"line-gap-width":new gi(se.paint_line["line-gap-width"]),"line-offset":new gi(se.paint_line["line-offset"]),"line-blur":new gi(se.paint_line["line-blur"]),"line-dasharray":new Fu(se.paint_line["line-dasharray"]),"line-pattern":new ml(se.paint_line["line-pattern"]),"line-gradient":new Tu(se.paint_line["line-gradient"])})},get layout(){return t_=t_||new jr({"line-cap":new ri(se.layout_line["line-cap"]),"line-join":new gi(se.layout_line["line-join"]),"line-miter-limit":new ri(se.layout_line["line-miter-limit"]),"line-round-limit":new ri(se.layout_line["line-round-limit"]),"line-sort-key":new gi(se.layout_line["line-sort-key"])})}};class Cw extends gi{possiblyEvaluate(r,l){return l=new ga(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(r,l)}evaluate(r,l,h,m){return l=dt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(r,l,h,m)}}let Rf;class Mw extends qn{constructor(r){super(r,a_),this.gradientVersion=0,Rf||(Rf=new Cw(a_.paint.properties["line-width"].specification),Rf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof el,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,l){super.recalculate(r,l),this.paint._values["line-floorwidth"]=Rf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Op(r)}queryRadius(r){const l=r,h=r_(Zu("line-width",this,l),Zu("line-gap-width",this,l)),m=Zu("line-offset",this,l);return h/2+Math.abs(m)+vf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:l,featureState:h,geometry:m,transform:y,pixelsToTileUnits:v}){const C=xf(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-y.bearingInRadians,v),E=v/2*r_(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),S=this.paint.get("line-offset").evaluate(l,h);return S&&(m=function(P,k){const O=[];for(let j=0;j<P.length;j++){const K=P[j],ie=[];for(let he=0;he<K.length;he++){const be=K[he-1],Ne=K[he],Be=K[he+1],G=he===0?new N(0,0):Ne.sub(be)._unit()._perp(),le=he===K.length-1?new N(0,0):Be.sub(Ne)._unit()._perp(),Ce=G._add(le)._unit(),$e=Ce.x*le.x+Ce.y*le.y;$e!==0&&Ce._mult(1/$e),ie.push(Ce._mult(k)._add(Ne))}O.push(ie)}return O}(m,S*v)),function(P,k,O){for(let j=0;j<k.length;j++){const K=k[j];if(P.length>=3){for(let ie=0;ie<K.length;ie++)if(wl(P,K[ie]))return!0}if(zx(P,K,O))return!0}return!1}(C,m,E)}isTileClipped(){return!0}}function r_(A,r){return r>0?r+2*A:A}const Rw=Da([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Iw=Da([{name:"a_projected_pos",components:3,type:"Float32"}],4);Da([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Uw=Da([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Da([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const n_=Da([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ew=Da([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Fw(A,r,l){return A.sections.forEach(h=>{h.text=function(m,y,v){const C=y.layout.get("text-transform").evaluate(v,{});return C==="uppercase"?m=m.toLocaleUpperCase():C==="lowercase"&&(m=m.toLocaleLowerCase()),Vs.applyArabicShaping&&(m=Vs.applyArabicShaping(m)),m}(h.text,r,l)}),A}Da([{name:"triangle",components:3,type:"Uint16"}]),Da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Da([{type:"Float32",name:"offsetX"}]),Da([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Da([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ju={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var s_,Xp,o_,Wa=24,Vp={};function Tw(){return s_||(s_=1,Vp.read=function(A,r,l,h,m){var y,v,C=8*m-h-1,E=(1<<C)-1,S=E>>1,P=-7,k=l?m-1:0,O=l?-1:1,j=A[r+k];for(k+=O,y=j&(1<<-P)-1,j>>=-P,P+=C;P>0;y=256*y+A[r+k],k+=O,P-=8);for(v=y&(1<<-P)-1,y>>=-P,P+=h;P>0;v=256*v+A[r+k],k+=O,P-=8);if(y===0)y=1-S;else{if(y===E)return v?NaN:1/0*(j?-1:1);v+=Math.pow(2,h),y-=S}return(j?-1:1)*v*Math.pow(2,y-h)},Vp.write=function(A,r,l,h,m,y){var v,C,E,S=8*y-m-1,P=(1<<S)-1,k=P>>1,O=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=h?0:y-1,K=h?1:-1,ie=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(C=isNaN(r)?1:0,v=P):(v=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-v))<1&&(v--,E*=2),(r+=v+k>=1?O/E:O*Math.pow(2,1-k))*E>=2&&(v++,E/=2),v+k>=P?(C=0,v=P):v+k>=1?(C=(r*E-1)*Math.pow(2,m),v+=k):(C=r*Math.pow(2,k-1)*Math.pow(2,m),v=0));m>=8;A[l+j]=255&C,j+=K,C/=256,m-=8);for(v=v<<m|C,S+=m;S>0;A[l+j]=255&v,j+=K,v/=256,S-=8);A[l+j-K]|=128*ie}),Vp}function A_(){if(o_)return Xp;o_=1,Xp=r;var A=Tw();function r(G){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(G)?G:new Uint8Array(G||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var l=4294967296,h=1/l,m=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function y(G){return G.type===r.Bytes?G.readVarint()+G.pos:G.pos+1}function v(G,le,Ce){return Ce?4294967296*le+(G>>>0):4294967296*(le>>>0)+(G>>>0)}function C(G,le,Ce){var $e=le<=16383?1:le<=2097151?2:le<=268435455?3:Math.floor(Math.log(le)/(7*Math.LN2));Ce.realloc($e);for(var vt=Ce.pos-1;vt>=G;vt--)Ce.buf[vt+$e]=Ce.buf[vt]}function E(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeVarint(G[Ce])}function S(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeSVarint(G[Ce])}function P(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeFloat(G[Ce])}function k(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeDouble(G[Ce])}function O(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeBoolean(G[Ce])}function j(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeFixed32(G[Ce])}function K(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeSFixed32(G[Ce])}function ie(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeFixed64(G[Ce])}function he(G,le){for(var Ce=0;Ce<G.length;Ce++)le.writeSFixed64(G[Ce])}function be(G,le){return(G[le]|G[le+1]<<8|G[le+2]<<16)+16777216*G[le+3]}function Ne(G,le,Ce){G[Ce]=le,G[Ce+1]=le>>>8,G[Ce+2]=le>>>16,G[Ce+3]=le>>>24}function Be(G,le){return(G[le]|G[le+1]<<8|G[le+2]<<16)+(G[le+3]<<24)}return r.prototype={destroy:function(){this.buf=null},readFields:function(G,le,Ce){for(Ce=Ce||this.length;this.pos<Ce;){var $e=this.readVarint(),vt=$e>>3,it=this.pos;this.type=7&$e,G(vt,le,this),this.pos===it&&this.skip($e)}return le},readMessage:function(G,le){return this.readFields(G,le,this.readVarint()+this.pos)},readFixed32:function(){var G=be(this.buf,this.pos);return this.pos+=4,G},readSFixed32:function(){var G=Be(this.buf,this.pos);return this.pos+=4,G},readFixed64:function(){var G=be(this.buf,this.pos)+be(this.buf,this.pos+4)*l;return this.pos+=8,G},readSFixed64:function(){var G=be(this.buf,this.pos)+Be(this.buf,this.pos+4)*l;return this.pos+=8,G},readFloat:function(){var G=A.read(this.buf,this.pos,!0,23,4);return this.pos+=4,G},readDouble:function(){var G=A.read(this.buf,this.pos,!0,52,8);return this.pos+=8,G},readVarint:function(G){var le,Ce,$e=this.buf;return le=127&(Ce=$e[this.pos++]),Ce<128?le:(le|=(127&(Ce=$e[this.pos++]))<<7,Ce<128?le:(le|=(127&(Ce=$e[this.pos++]))<<14,Ce<128?le:(le|=(127&(Ce=$e[this.pos++]))<<21,Ce<128?le:function(vt,it,nt){var Rt,wt,Et=nt.buf;if(Rt=(112&(wt=Et[nt.pos++]))>>4,wt<128||(Rt|=(127&(wt=Et[nt.pos++]))<<3,wt<128)||(Rt|=(127&(wt=Et[nt.pos++]))<<10,wt<128)||(Rt|=(127&(wt=Et[nt.pos++]))<<17,wt<128)||(Rt|=(127&(wt=Et[nt.pos++]))<<24,wt<128)||(Rt|=(1&(wt=Et[nt.pos++]))<<31,wt<128))return v(vt,Rt,it);throw new Error("Expected varint not more than 10 bytes")}(le|=(15&(Ce=$e[this.pos]))<<28,G,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var G=this.readVarint();return G%2==1?(G+1)/-2:G/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var G=this.readVarint()+this.pos,le=this.pos;return this.pos=G,G-le>=12&&m?function(Ce,$e,vt){return m.decode(Ce.subarray($e,vt))}(this.buf,le,G):function(Ce,$e,vt){for(var it="",nt=$e;nt<vt;){var Rt,wt,Et,lt=Ce[nt],Vt=null,fi=lt>239?4:lt>223?3:lt>191?2:1;if(nt+fi>vt)break;fi===1?lt<128&&(Vt=lt):fi===2?(192&(Rt=Ce[nt+1]))==128&&(Vt=(31&lt)<<6|63&Rt)<=127&&(Vt=null):fi===3?(wt=Ce[nt+2],(192&(Rt=Ce[nt+1]))==128&&(192&wt)==128&&((Vt=(15&lt)<<12|(63&Rt)<<6|63&wt)<=2047||Vt>=55296&&Vt<=57343)&&(Vt=null)):fi===4&&(wt=Ce[nt+2],Et=Ce[nt+3],(192&(Rt=Ce[nt+1]))==128&&(192&wt)==128&&(192&Et)==128&&((Vt=(15&lt)<<18|(63&Rt)<<12|(63&wt)<<6|63&Et)<=65535||Vt>=1114112)&&(Vt=null)),Vt===null?(Vt=65533,fi=1):Vt>65535&&(Vt-=65536,it+=String.fromCharCode(Vt>>>10&1023|55296),Vt=56320|1023&Vt),it+=String.fromCharCode(Vt),nt+=fi}return it}(this.buf,le,G)},readBytes:function(){var G=this.readVarint()+this.pos,le=this.buf.subarray(this.pos,G);return this.pos=G,le},readPackedVarint:function(G,le){if(this.type!==r.Bytes)return G.push(this.readVarint(le));var Ce=y(this);for(G=G||[];this.pos<Ce;)G.push(this.readVarint(le));return G},readPackedSVarint:function(G){if(this.type!==r.Bytes)return G.push(this.readSVarint());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readSVarint());return G},readPackedBoolean:function(G){if(this.type!==r.Bytes)return G.push(this.readBoolean());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readBoolean());return G},readPackedFloat:function(G){if(this.type!==r.Bytes)return G.push(this.readFloat());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readFloat());return G},readPackedDouble:function(G){if(this.type!==r.Bytes)return G.push(this.readDouble());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readDouble());return G},readPackedFixed32:function(G){if(this.type!==r.Bytes)return G.push(this.readFixed32());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readFixed32());return G},readPackedSFixed32:function(G){if(this.type!==r.Bytes)return G.push(this.readSFixed32());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readSFixed32());return G},readPackedFixed64:function(G){if(this.type!==r.Bytes)return G.push(this.readFixed64());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readFixed64());return G},readPackedSFixed64:function(G){if(this.type!==r.Bytes)return G.push(this.readSFixed64());var le=y(this);for(G=G||[];this.pos<le;)G.push(this.readSFixed64());return G},skip:function(G){var le=7&G;if(le===r.Varint)for(;this.buf[this.pos++]>127;);else if(le===r.Bytes)this.pos=this.readVarint()+this.pos;else if(le===r.Fixed32)this.pos+=4;else{if(le!==r.Fixed64)throw new Error("Unimplemented type: "+le);this.pos+=8}},writeTag:function(G,le){this.writeVarint(G<<3|le)},realloc:function(G){for(var le=this.length||16;le<this.pos+G;)le*=2;if(le!==this.length){var Ce=new Uint8Array(le);Ce.set(this.buf),this.buf=Ce,this.length=le}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(G){this.realloc(4),Ne(this.buf,G,this.pos),this.pos+=4},writeSFixed32:function(G){this.realloc(4),Ne(this.buf,G,this.pos),this.pos+=4},writeFixed64:function(G){this.realloc(8),Ne(this.buf,-1&G,this.pos),Ne(this.buf,Math.floor(G*h),this.pos+4),this.pos+=8},writeSFixed64:function(G){this.realloc(8),Ne(this.buf,-1&G,this.pos),Ne(this.buf,Math.floor(G*h),this.pos+4),this.pos+=8},writeVarint:function(G){(G=+G||0)>268435455||G<0?function(le,Ce){var $e,vt;if(le>=0?($e=le%4294967296|0,vt=le/4294967296|0):(vt=~(-le/4294967296),4294967295^($e=~(-le%4294967296))?$e=$e+1|0:($e=0,vt=vt+1|0)),le>=18446744073709552e3||le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ce.realloc(10),function(it,nt,Rt){Rt.buf[Rt.pos++]=127&it|128,it>>>=7,Rt.buf[Rt.pos++]=127&it|128,it>>>=7,Rt.buf[Rt.pos++]=127&it|128,it>>>=7,Rt.buf[Rt.pos++]=127&it|128,Rt.buf[Rt.pos]=127&(it>>>=7)}($e,0,Ce),function(it,nt){var Rt=(7&it)<<4;nt.buf[nt.pos++]|=Rt|((it>>>=3)?128:0),it&&(nt.buf[nt.pos++]=127&it|((it>>>=7)?128:0),it&&(nt.buf[nt.pos++]=127&it|((it>>>=7)?128:0),it&&(nt.buf[nt.pos++]=127&it|((it>>>=7)?128:0),it&&(nt.buf[nt.pos++]=127&it|((it>>>=7)?128:0),it&&(nt.buf[nt.pos++]=127&it)))))}(vt,Ce)}(G,this):(this.realloc(4),this.buf[this.pos++]=127&G|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=G>>>7&127))))},writeSVarint:function(G){this.writeVarint(G<0?2*-G-1:2*G)},writeBoolean:function(G){this.writeVarint(!!G)},writeString:function(G){G=String(G),this.realloc(4*G.length),this.pos++;var le=this.pos;this.pos=function($e,vt,it){for(var nt,Rt,wt=0;wt<vt.length;wt++){if((nt=vt.charCodeAt(wt))>55295&&nt<57344){if(!Rt){nt>56319||wt+1===vt.length?($e[it++]=239,$e[it++]=191,$e[it++]=189):Rt=nt;continue}if(nt<56320){$e[it++]=239,$e[it++]=191,$e[it++]=189,Rt=nt;continue}nt=Rt-55296<<10|nt-56320|65536,Rt=null}else Rt&&($e[it++]=239,$e[it++]=191,$e[it++]=189,Rt=null);nt<128?$e[it++]=nt:(nt<2048?$e[it++]=nt>>6|192:(nt<65536?$e[it++]=nt>>12|224:($e[it++]=nt>>18|240,$e[it++]=nt>>12&63|128),$e[it++]=nt>>6&63|128),$e[it++]=63&nt|128)}return it}(this.buf,G,this.pos);var Ce=this.pos-le;Ce>=128&&C(le,Ce,this),this.pos=le-1,this.writeVarint(Ce),this.pos+=Ce},writeFloat:function(G){this.realloc(4),A.write(this.buf,G,this.pos,!0,23,4),this.pos+=4},writeDouble:function(G){this.realloc(8),A.write(this.buf,G,this.pos,!0,52,8),this.pos+=8},writeBytes:function(G){var le=G.length;this.writeVarint(le),this.realloc(le);for(var Ce=0;Ce<le;Ce++)this.buf[this.pos++]=G[Ce]},writeRawMessage:function(G,le){this.pos++;var Ce=this.pos;G(le,this);var $e=this.pos-Ce;$e>=128&&C(Ce,$e,this),this.pos=Ce-1,this.writeVarint($e),this.pos+=$e},writeMessage:function(G,le,Ce){this.writeTag(G,r.Bytes),this.writeRawMessage(le,Ce)},writePackedVarint:function(G,le){le.length&&this.writeMessage(G,E,le)},writePackedSVarint:function(G,le){le.length&&this.writeMessage(G,S,le)},writePackedBoolean:function(G,le){le.length&&this.writeMessage(G,O,le)},writePackedFloat:function(G,le){le.length&&this.writeMessage(G,P,le)},writePackedDouble:function(G,le){le.length&&this.writeMessage(G,k,le)},writePackedFixed32:function(G,le){le.length&&this.writeMessage(G,j,le)},writePackedSFixed32:function(G,le){le.length&&this.writeMessage(G,K,le)},writePackedFixed64:function(G,le){le.length&&this.writeMessage(G,ie,le)},writePackedSFixed64:function(G,le){le.length&&this.writeMessage(G,he,le)},writeBytesField:function(G,le){this.writeTag(G,r.Bytes),this.writeBytes(le)},writeFixed32Field:function(G,le){this.writeTag(G,r.Fixed32),this.writeFixed32(le)},writeSFixed32Field:function(G,le){this.writeTag(G,r.Fixed32),this.writeSFixed32(le)},writeFixed64Field:function(G,le){this.writeTag(G,r.Fixed64),this.writeFixed64(le)},writeSFixed64Field:function(G,le){this.writeTag(G,r.Fixed64),this.writeSFixed64(le)},writeVarintField:function(G,le){this.writeTag(G,r.Varint),this.writeVarint(le)},writeSVarintField:function(G,le){this.writeTag(G,r.Varint),this.writeSVarint(le)},writeStringField:function(G,le){this.writeTag(G,r.Bytes),this.writeString(le)},writeFloatField:function(G,le){this.writeTag(G,r.Fixed32),this.writeFloat(le)},writeDoubleField:function(G,le){this.writeTag(G,r.Fixed64),this.writeDouble(le)},writeBooleanField:function(G,le){this.writeVarintField(G,!!le)}},Xp}var Gp=x(A_());const jp=3;function Sw(A,r,l){A===1&&l.readMessage(Yw,r)}function Yw(A,r,l){if(A===3){const{id:h,bitmap:m,width:y,height:v,left:C,top:E,advance:S}=l.readMessage(Nw,{});r.push({id:h,bitmap:new Hu({width:y+2*jp,height:v+2*jp},m),metrics:{width:y,height:v,left:C,top:E,advance:S}})}}function Nw(A,r,l){A===1?r.id=l.readVarint():A===2?r.bitmap=l.readBytes():A===3?r.width=l.readVarint():A===4?r.height=l.readVarint():A===5?r.left=l.readSVarint():A===6?r.top=l.readSVarint():A===7&&(r.advance=l.readVarint())}const Lw=jp;function l_(A){let r=0,l=0;for(const v of A)r+=v.w*v.h,l=Math.max(l,v.w);A.sort((v,C)=>C.h-v.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let m=0,y=0;for(const v of A)for(let C=h.length-1;C>=0;C--){const E=h[C];if(!(v.w>E.w||v.h>E.h)){if(v.x=E.x,v.y=E.y,y=Math.max(y,v.y+v.h),m=Math.max(m,v.x+v.w),v.w===E.w&&v.h===E.h){const S=h.pop();C<h.length&&(h[C]=S)}else v.h===E.h?(E.x+=v.w,E.w-=v.w):v.w===E.w?(E.y+=v.h,E.h-=v.h):(h.push({x:E.x+v.w,y:E.y,w:E.w-v.w,h:v.h}),E.y+=v.h,E.h-=v.h);break}}return{w:m,h:y,fill:r/(m*y)||0}}const nn=1;class Kp{constructor(r,{pixelRatio:l,version:h,stretchX:m,stretchY:y,content:v,textFitWidth:C,textFitHeight:E}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=m,this.stretchY=y,this.content=v,this.version=h,this.textFitWidth=C,this.textFitHeight=E}get tl(){return[this.paddedRect.x+nn,this.paddedRect.y+nn]}get br(){return[this.paddedRect.x+this.paddedRect.w-nn,this.paddedRect.y+this.paddedRect.h-nn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*nn)/this.pixelRatio,(this.paddedRect.h-2*nn)/this.pixelRatio]}}class c_{constructor(r,l){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(r,h,y),this.addImages(l,m,y);const{w:v,h:C}=l_(y),E=new Un({width:v||1,height:C||1});for(const S in r){const P=r[S],k=h[S].paddedRect;Un.copy(P.data,E,{x:0,y:0},{x:k.x+nn,y:k.y+nn},P.data)}for(const S in l){const P=l[S],k=m[S].paddedRect,O=k.x+nn,j=k.y+nn,K=P.data.width,ie=P.data.height;Un.copy(P.data,E,{x:0,y:0},{x:O,y:j},P.data),Un.copy(P.data,E,{x:0,y:ie-1},{x:O,y:j-1},{width:K,height:1}),Un.copy(P.data,E,{x:0,y:0},{x:O,y:j+ie},{width:K,height:1}),Un.copy(P.data,E,{x:K-1,y:0},{x:O-1,y:j},{width:1,height:ie}),Un.copy(P.data,E,{x:0,y:0},{x:O+K,y:j},{width:1,height:ie})}this.image=E,this.iconPositions=h,this.patternPositions=m}addImages(r,l,h){for(const m in r){const y=r[m],v={x:0,y:0,w:y.data.width+2*nn,h:y.data.height+2*nn};h.push(v),l[m]=new Kp(v,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,l){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),l)}patchUpdatedImage(r,l,h){if(!r||!l||r.version===l.version)return;r.version=l.version;const[m,y]=r.tl;h.update(l.data,void 0,{x:m,y})}}var dA;Ht("ImagePosition",Kp),Ht("ImageAtlas",c_),u.al=void 0,(dA=u.al||(u.al={}))[dA.none=0]="none",dA[dA.horizontal=1]="horizontal",dA[dA.vertical=2]="vertical",dA[dA.horizontalOnly=3]="horizontalOnly";const If=-17;class ed{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(r,l,h){const m=new ed;return m.scale=r||1,m.fontStack=l,m.verticalAlign=h||"bottom",m}static forImage(r,l){const h=new ed;return h.imageName=r,h.verticalAlign=l||"bottom",h}}class Lc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const h=new Lc;for(let m=0;m<r.sections.length;m++){const y=r.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,l)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let l="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,y=r.charCodeAt(h-1)||null;l+=m&&uf(m)&&!Ju[r[h+1]]||y&&uf(y)&&!Ju[r[h-1]]||!Ju[r[h]]?r[h]:Ju[r[h]]}return l}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&Ef[this.text.charCodeAt(h)];h++)r++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Ef[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const h=new Lc;return h.text=this.text.substring(r,l),h.sectionIndex=this.sectionIndex.slice(r,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}getMaxImageSize(r){let l=0,h=0;for(let m=0;m<this.length();m++){const y=this.getSection(m);if(y.imageName){const v=r[y.imageName];if(!v)continue;const C=v.displaySize;l=Math.max(l,C[0]),h=Math.max(h,C[1])}}return{maxImageWidth:l,maxImageHeight:h}}addTextSection(r,l){this.text+=r.text,this.sections.push(ed.forText(r.scale,r.fontStack||l,r.verticalAlign));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void Ai("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(ed.forImage(l,r.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ai("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Uf(A,r,l,h,m,y,v,C,E,S,P,k,O,j,K){const ie=Lc.fromFeature(A,m);let he;k===u.al.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:be,processStyledBidirectionalText:Ne}=Vs;if(be&&ie.sections.length===1){he=[];const le=be(ie.toString(),$p(ie,S,y,r,h,j));for(const Ce of le){const $e=new Lc;$e.text=Ce,$e.sections=ie.sections;for(let vt=0;vt<Ce.length;vt++)$e.sectionIndex.push(0);he.push($e)}}else if(Ne){he=[];const le=Ne(ie.text,ie.sectionIndex,$p(ie,S,y,r,h,j));for(const Ce of le){const $e=new Lc;$e.text=Ce[0],$e.sectionIndex=Ce[1],$e.sections=ie.sections,he.push($e)}}else he=function(le,Ce){const $e=[],vt=le.text;let it=0;for(const nt of Ce)$e.push(le.substring(it,nt)),it=nt;return it<vt.length&&$e.push(le.substring(it,vt.length)),$e}(ie,$p(ie,S,y,r,h,j));const Be=[],G={positionedLines:Be,text:ie.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:k,iconsInText:!1,verticalizable:!1};return function(le,Ce,$e,vt,it,nt,Rt,wt,Et,lt,Vt,fi){let ui=0,ii=0,Pi=0,Na=0;const Ja=wt==="right"?1:wt==="left"?0:.5,Er=Wa/fi;let Fn=0;for(const Ra of it){Ra.trim();const sr=Ra.getMaxScale(),vr={positionedGlyphs:[],lineOffset:0};le.positionedLines[Fn]=vr;const xr=vr.positionedGlyphs;let Kr=0;if(!Ra.length()){ii+=nt,++Fn;continue}const Tn=Dw(vt,Ra,Er);for(let on=0;on<Ra.length();on++){const er=Ra.getSection(on),Ar=Ra.getSectionIndex(on),lr=Ra.getCharCode(on),Ga=zw(Et,Vt,lr);let _a;if(er.imageName){if(le.iconsInText=!0,er.scale=er.scale*Er,_a=Hw(er,Ga,sr,Tn,vt),!_a)continue;Kr=Math.max(Kr,_a.imageOffset)}else if(_a=Zw(er,lr,Ga,Tn,Ce,$e),!_a)continue;const{rect:ws,metrics:Dc,baselineOffset:Bs}=_a;xr.push({glyph:lr,imageName:er.imageName,x:ui,y:ii+Bs+If,vertical:Ga,scale:er.scale,fontStack:er.fontStack,sectionIndex:Ar,metrics:Dc,rect:ws}),Ga?(le.verticalizable=!0,ui+=(er.imageName?Dc.advance:Wa)*er.scale+lt):ui+=Dc.advance*er.scale+lt}xr.length!==0&&(Pi=Math.max(ui-lt,Pi),Ow(xr,0,xr.length-1,Ja)),ui=0,vr.lineOffset=Math.max(Kr,(sr-1)*Wa);const or=nt*sr+Kr;ii+=or,Na=Math.max(or,Na),++Fn}const{horizontalAlign:sn,verticalAlign:yr}=qp(Rt);(function(Ra,sr,vr,xr,Kr,Tn,or,on,er){const Ar=(sr-vr)*Kr;let lr=0;lr=Tn!==or?-on*xr-If:-xr*er*or+.5*or;for(const Ga of Ra)for(const _a of Ga.positionedGlyphs)_a.x+=Ar,_a.y+=lr})(le.positionedLines,Ja,sn,yr,Pi,Na,nt,ii,it.length),le.top+=-yr*ii,le.bottom=le.top+ii,le.left+=-sn*Pi,le.right=le.left+Pi}(G,r,l,h,he,v,C,E,k,S,O,K),!function(le){for(const Ce of le)if(Ce.positionedGlyphs.length!==0)return!1;return!0}(Be)&&G}const Ef={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Pw={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Qw={40:!0};function h_(A,r,l,h,m,y){if(r.imageName){const v=h[r.imageName];return v?v.displaySize[0]*r.scale*Wa/y+m:0}{const v=l[r.fontStack],C=v&&v[A];return C?C.metrics.advance*r.scale+m:0}}function u_(A,r,l,h){const m=Math.pow(A-r,2);return h?A<r?m/2:2*m:m+Math.abs(l)*l}function kw(A,r,l){let h=0;return A===10&&(h-=1e4),l&&(h+=150),A!==40&&A!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function d_(A,r,l,h,m,y){let v=null,C=u_(r,l,m,y);for(const E of h){const S=u_(r-E.x,l,m,y)+E.badness;S<=C&&(v=E,C=S)}return{index:A,x:r,priorBreak:v,badness:C}}function f_(A){return A?f_(A.priorBreak).concat(A.index):[]}function $p(A,r,l,h,m,y){if(!A)return[];const v=[],C=function(k,O,j,K,ie,he){let be=0;for(let Ne=0;Ne<k.length();Ne++){const Be=k.getSection(Ne);be+=h_(k.getCharCode(Ne),Be,K,ie,O,he)}return be/Math.max(1,Math.ceil(be/j))}(A,r,l,h,m,y),E=A.text.indexOf("​")>=0;let S=0;for(let k=0;k<A.length();k++){const O=A.getSection(k),j=A.getCharCode(k);if(Ef[j]||(S+=h_(j,O,h,m,r,y)),k<A.length()-1){const K=!((P=j)<11904)&&(!!Ni["CJK Compatibility Forms"](P)||!!Ni["CJK Compatibility"](P)||!!Ni["CJK Strokes"](P)||!!Ni["CJK Symbols and Punctuation"](P)||!!Ni["Enclosed CJK Letters and Months"](P)||!!Ni["Halfwidth and Fullwidth Forms"](P)||!!Ni["Ideographic Description Characters"](P)||!!Ni["Vertical Forms"](P)||hf.test(String.fromCodePoint(P)));(Pw[j]||K||O.imageName||k!==A.length()-2&&Qw[A.getCharCode(k+1)])&&v.push(d_(k+1,S,C,v,kw(j,A.getCharCode(k+1),K&&E),!1))}}var P;return f_(d_(A.length(),S,C,v,0,!0))}function qp(A){let r=.5,l=.5;switch(A){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function Dw(A,r,l){const h=r.getMaxScale()*Wa,{maxImageWidth:m,maxImageHeight:y}=r.getMaxImageSize(A),v=Math.max(h,y*l);return{verticalLineContentWidth:Math.max(h,m*l),horizontalLineContentHeight:v}}function g_(A){switch(A){case"top":return 0;case"center":return .5;default:return 1}}function zw(A,r,l){return!(A===u.al.horizontal||!r&&!Cc(l)||r&&(Ef[l]||(h=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function Zw(A,r,l,h,m,y){const v=y[A.fontStack],C=function(S,P,k,O){if(S&&S.rect)return S;const j=P[k.fontStack],K=j&&j[O];return K?{rect:null,metrics:K.metrics}:null}(v&&v[r],m,A,r);if(C===null)return null;let E;if(l)E=h.verticalLineContentWidth-A.scale*Wa;else{const S=g_(A.verticalAlign);E=(h.horizontalLineContentHeight-A.scale*Wa)*S}return{rect:C.rect,metrics:C.metrics,baselineOffset:E}}function Hw(A,r,l,h,m){const y=m[A.imageName];if(!y)return null;const v=y.paddedRect,C=y.displaySize,E={width:C[0],height:C[1],left:nn,top:-3,advance:r?C[1]:C[0]};let S;if(r)S=h.verticalLineContentWidth-C[1]*A.scale;else{const P=g_(A.verticalAlign);S=(h.horizontalLineContentHeight-C[1]*A.scale)*P}return{rect:v,metrics:E,baselineOffset:S,imageOffset:(r?C[0]:C[1])*A.scale-Wa*l}}function Ow(A,r,l,h){if(h===0)return;const m=A[l],y=(A[l].x+m.metrics.advance*m.scale)*h;for(let v=r;v<=l;v++)A[v].x-=y}function Xw(A,r,l){const{horizontalAlign:h,verticalAlign:m}=qp(l),y=r[0]-A.displaySize[0]*h,v=r[1]-A.displaySize[1]*m;return{image:A,top:v,bottom:v+A.displaySize[1],left:y,right:y+A.displaySize[0]}}function p_(A){var r,l;let h=A.left,m=A.top,y=A.right-h,v=A.bottom-m;const C=(r=A.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",E=(l=A.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",S=(A.image.content[2]-A.image.content[0])/(A.image.content[3]-A.image.content[1]);if(E==="proportional"){if(C==="stretchOnly"&&y/v<S||C==="proportional"){const P=Math.ceil(v*S);h*=P/y,y=P}}else if(C==="proportional"&&E==="stretchOnly"&&S!==0&&y/v>S){const P=Math.ceil(y/S);m*=P/v,v=P}return{x1:h,y1:m,x2:h+y,y2:m+v}}function m_(A,r,l,h,m,y){const v=A.image;let C;if(v.content){const he=v.content,be=v.pixelRatio||1;C=[he[0]/be,he[1]/be,v.displaySize[0]-he[2]/be,v.displaySize[1]-he[3]/be]}const E=r.left*y,S=r.right*y;let P,k,O,j;l==="width"||l==="both"?(j=m[0]+E-h[3],k=m[0]+S+h[1]):(j=m[0]+(E+S-v.displaySize[0])/2,k=j+v.displaySize[0]);const K=r.top*y,ie=r.bottom*y;return l==="height"||l==="both"?(P=m[1]+K-h[0],O=m[1]+ie+h[2]):(P=m[1]+(K+ie-v.displaySize[1])/2,O=P+v.displaySize[1]),{image:v,top:P,right:k,bottom:O,left:j,collisionPadding:C}}const td=255,$s=128,fA=td*$s;function __(A,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new ga(A+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=l;let y=0;for(;y<h.length&&h[y]<=A;)y++;y=Math.max(0,y-1);let v=y;for(;v<h.length&&h[v]<A+1;)v++;v=Math.min(h.length-1,v);const C=h[y],E=h[v];return l.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:C,maxZoom:E,minSize:l.evaluate(new ga(C)),maxSize:l.evaluate(new ga(E)),interpolationType:m}}}function Wp(A,r,l){let h="never";const m=A.get(r);return m?h=m:A.get(l)&&(h="always"),h}const Vw=$u.VectorTileFeature.types,Gw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ff(A,r,l,h,m,y,v,C,E,S,P,k,O){const j=C?Math.min(fA,Math.round(C[0])):0,K=C?Math.min(fA,Math.round(C[1])):0;A.emplaceBack(r,l,Math.round(32*h),Math.round(32*m),y,v,(j<<1)+(E?1:0),K,16*S,16*P,256*k,256*O)}function Jp(A,r,l){A.emplaceBack(r.x,r.y,l),A.emplaceBack(r.x,r.y,l),A.emplaceBack(r.x,r.y,l),A.emplaceBack(r.x,r.y,l)}function jw(A){for(const r of A.sections)if(Rp(r.text))return!0;return!1}class e2{constructor(r){this.layoutVertexArray=new qe,this.indexArray=new Ut,this.programConfigurations=r,this.segments=new bi,this.dynamicLayoutVertexArray=new At,this.opacityVertexArray=new ht,this.hasVisibleVertices=!1,this.placedSymbolArray=new Y}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Rw.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Iw.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Gw,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ht("SymbolBuffers",e2);class t2{constructor(r,l,h){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new h,this.segments=new bi,this.collisionVertexArray=new Lt}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Uw.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ht("CollisionBuffers",t2);class Pc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(v=>v.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=__(this.zoom,l["text-size"]),this.iconSizeData=__(this.zoom,l["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=Wp(h,"text-overlap","text-allow-overlap")!=="never"||Wp(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(v=>u.al[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=r.sourceID}createArrays(){this.text=new e2(new Co(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new e2(new Co(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new Z,this.lineVertexArray=new J,this.symbolInstances=new z,this.textAnchorOffsets=new me}calculateGlyphDependencies(r,l,h,m,y){for(let v=0;v<r.length;v++)if(l[r.charCodeAt(v)]=!0,(h||m)&&y){const C=Ju[r.charAt(v)];C&&(l[C.charCodeAt(0)]=!0)}}populate(r,l,h){const m=this.layers[0],y=m.layout,v=y.get("text-font"),C=y.get("text-field"),E=y.get("icon-image"),S=(C.value.kind!=="constant"||C.value.value instanceof Xr&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),P=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,k=y.get("symbol-sort-key");if(this.features=[],!S&&!P)return;const O=l.iconDependencies,j=l.glyphDependencies,K=l.availableImages,ie=new ga(this.zoom);for(const{feature:he,id:be,index:Ne,sourceLayerIndex:Be}of r){const G=m._featureFilter.needGeometry,le=Ks(he,G);if(!m._featureFilter.filter(ie,le,h))continue;let Ce,$e;if(G||(le.geometry=rn(he)),S){const it=m.getValueAndResolveTokens("text-field",le,h,K),nt=Xr.factory(it),Rt=this.hasRTLText=this.hasRTLText||jw(nt);(!Rt||Vs.getRTLTextPluginStatus()==="unavailable"||Rt&&Vs.isParsed())&&(Ce=Fw(nt,m,le))}if(P){const it=m.getValueAndResolveTokens("icon-image",le,h,K);$e=it instanceof tn?it:tn.fromString(it)}if(!Ce&&!$e)continue;const vt=this.sortFeaturesByKey?k.evaluate(le,{},h):void 0;if(this.features.push({id:be,text:Ce,icon:$e,index:Ne,sourceLayerIndex:Be,geometry:le.geometry,properties:he.properties,type:Vw[he.type],sortKey:vt}),$e&&(O[$e.name]=!0),Ce){const it=v.evaluate(le,{},h).join(","),nt=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.al.vertical)>=0;for(const Rt of Ce.sections)if(Rt.image)O[Rt.image.name]=!0;else{const wt=wc(Ce.toString()),Et=Rt.fontStack||it,lt=j[Et]=j[Et]||{};this.calculateGlyphDependencies(Rt.text,lt,nt,this.allowVerticalPlacement,wt)}}}y.get("symbol-placement")==="line"&&(this.features=function(he){const be={},Ne={},Be=[];let G=0;function le(it){Be.push(he[it]),G++}function Ce(it,nt,Rt){const wt=Ne[it];return delete Ne[it],Ne[nt]=wt,Be[wt].geometry[0].pop(),Be[wt].geometry[0]=Be[wt].geometry[0].concat(Rt[0]),wt}function $e(it,nt,Rt){const wt=be[nt];return delete be[nt],be[it]=wt,Be[wt].geometry[0].shift(),Be[wt].geometry[0]=Rt[0].concat(Be[wt].geometry[0]),wt}function vt(it,nt,Rt){const wt=Rt?nt[0][nt[0].length-1]:nt[0][0];return`${it}:${wt.x}:${wt.y}`}for(let it=0;it<he.length;it++){const nt=he[it],Rt=nt.geometry,wt=nt.text?nt.text.toString():null;if(!wt){le(it);continue}const Et=vt(wt,Rt),lt=vt(wt,Rt,!0);if(Et in Ne&&lt in be&&Ne[Et]!==be[lt]){const Vt=$e(Et,lt,Rt),fi=Ce(Et,lt,Be[Vt].geometry);delete be[Et],delete Ne[lt],Ne[vt(wt,Be[fi].geometry,!0)]=fi,Be[Vt].geometry=null}else Et in Ne?Ce(Et,lt,Rt):lt in be?$e(Et,lt,Rt):(le(it),be[Et]=G-1,Ne[lt]=G-1)}return Be.filter(it=>it.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,be)=>he.sortKey-be.sortKey)}update(r,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(l[r.segment+1]),y=r.dist(l[r.segment]);const v={};for(let C=r.segment+1;C<l.length;C++)v[C]={x:l[C].x,y:l[C].y,tileUnitDistanceFromAnchor:m},C<l.length-1&&(m+=l[C+1].dist(l[C]));for(let C=r.segment||0;C>=0;C--)v[C]={x:l[C].x,y:l[C].y,tileUnitDistanceFromAnchor:y},C>0&&(y+=l[C-1].dist(l[C]));for(let C=0;C<l.length;C++){const E=v[C];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,l,h,m,y,v,C,E,S,P,k,O){const j=r.indexArray,K=r.layoutVertexArray,ie=r.segments.prepareSegment(4*l.length,K,j,this.canOverlap?v.sortKey:void 0),he=this.glyphOffsetArray.length,be=ie.vertexLength,Ne=this.allowVerticalPlacement&&C===u.al.vertical?Math.PI/2:0,Be=v.text&&v.text.sections;for(let G=0;G<l.length;G++){const{tl:le,tr:Ce,bl:$e,br:vt,tex:it,pixelOffsetTL:nt,pixelOffsetBR:Rt,minFontScaleX:wt,minFontScaleY:Et,glyphOffset:lt,isSDF:Vt,sectionIndex:fi}=l[G],ui=ie.vertexLength,ii=lt[1];Ff(K,E.x,E.y,le.x,ii+le.y,it.x,it.y,h,Vt,nt.x,nt.y,wt,Et),Ff(K,E.x,E.y,Ce.x,ii+Ce.y,it.x+it.w,it.y,h,Vt,Rt.x,nt.y,wt,Et),Ff(K,E.x,E.y,$e.x,ii+$e.y,it.x,it.y+it.h,h,Vt,nt.x,Rt.y,wt,Et),Ff(K,E.x,E.y,vt.x,ii+vt.y,it.x+it.w,it.y+it.h,h,Vt,Rt.x,Rt.y,wt,Et),Jp(r.dynamicLayoutVertexArray,E,Ne),j.emplaceBack(ui,ui+2,ui+1),j.emplaceBack(ui+1,ui+2,ui+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),G!==l.length-1&&fi===l[G+1].sectionIndex||r.programConfigurations.populatePaintArrays(K.length,v,v.index,{},O,Be&&Be[fi])}r.placedSymbolArray.emplaceBack(E.x,E.y,he,this.glyphOffsetArray.length-he,be,S,P,E.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],C,0,!1,0,k)}_addCollisionDebugVertex(r,l,h,m,y,v){return l.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,y,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(r,l,h,m,y,v,C){const E=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),S=E.vertexLength,P=y.layoutVertexArray,k=y.collisionVertexArray,O=C.anchorX,j=C.anchorY;this._addCollisionDebugVertex(P,k,v,O,j,new N(r,l)),this._addCollisionDebugVertex(P,k,v,O,j,new N(h,l)),this._addCollisionDebugVertex(P,k,v,O,j,new N(h,m)),this._addCollisionDebugVertex(P,k,v,O,j,new N(r,m)),E.vertexLength+=4;const K=y.indexArray;K.emplaceBack(S,S+1),K.emplaceBack(S+1,S+2),K.emplaceBack(S+2,S+3),K.emplaceBack(S+3,S),E.primitiveLength+=4}addDebugCollisionBoxes(r,l,h,m){for(let y=r;y<l;y++){const v=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,m?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new t2(ot,n_.members,yt),this.iconCollisionBox=new t2(ot,n_.members,yt);for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(r,l,h,m,y,v,C,E,S){const P={};for(let k=l;k<h;k++){const O=r.get(k);P.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.textFeatureIndex=O.featureIndex;break}for(let k=m;k<y;k++){const O=r.get(k);P.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.verticalTextFeatureIndex=O.featureIndex;break}for(let k=v;k<C;k++){const O=r.get(k);P.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.iconFeatureIndex=O.featureIndex;break}for(let k=E;k<S;k++){const O=r.get(k);P.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.verticalIconFeatureIndex=O.featureIndex;break}return P}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const h=r.placedSymbolArray.get(l),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)r.indexArray.emplaceBack(y,y+2,y+1),r.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),h=Math.cos(r),m=[],y=[],v=[];for(let C=0;C<this.symbolInstances.length;++C){v.push(C);const E=this.symbolInstances.get(C);m.push(0|Math.round(l*E.anchorX+h*E.anchorY)),y.push(E.featureIndex)}return v.sort((C,E)=>m[C]-m[E]||y[E]-y[C]),v}addToSortKeyRanges(r,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,v)=>{m>=0&&v.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let b_,y_;Ht("SymbolBucket",Pc,{omit:["layers","collisionBoxArray","features","compareText"]}),Pc.MAX_GLYPHS=65535,Pc.addDynamicAttributes=Jp;var i2={get paint(){return y_=y_||new jr({"icon-opacity":new gi(se.paint_symbol["icon-opacity"]),"icon-color":new gi(se.paint_symbol["icon-color"]),"icon-halo-color":new gi(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new gi(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gi(se.paint_symbol["icon-halo-blur"]),"icon-translate":new ri(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new ri(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new gi(se.paint_symbol["text-opacity"]),"text-color":new gi(se.paint_symbol["text-color"],{runtimeType:ta,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new gi(se.paint_symbol["text-halo-color"]),"text-halo-width":new gi(se.paint_symbol["text-halo-width"]),"text-halo-blur":new gi(se.paint_symbol["text-halo-blur"]),"text-translate":new ri(se.paint_symbol["text-translate"]),"text-translate-anchor":new ri(se.paint_symbol["text-translate-anchor"])})},get layout(){return b_=b_||new jr({"symbol-placement":new ri(se.layout_symbol["symbol-placement"]),"symbol-spacing":new ri(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ri(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gi(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ri(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ri(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ri(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ri(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new ri(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ri(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new gi(se.layout_symbol["icon-size"]),"icon-text-fit":new ri(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ri(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new gi(se.layout_symbol["icon-image"]),"icon-rotate":new gi(se.layout_symbol["icon-rotate"]),"icon-padding":new gi(se.layout_symbol["icon-padding"]),"icon-keep-upright":new ri(se.layout_symbol["icon-keep-upright"]),"icon-offset":new gi(se.layout_symbol["icon-offset"]),"icon-anchor":new gi(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ri(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ri(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ri(se.layout_symbol["text-rotation-alignment"]),"text-field":new gi(se.layout_symbol["text-field"]),"text-font":new gi(se.layout_symbol["text-font"]),"text-size":new gi(se.layout_symbol["text-size"]),"text-max-width":new gi(se.layout_symbol["text-max-width"]),"text-line-height":new ri(se.layout_symbol["text-line-height"]),"text-letter-spacing":new gi(se.layout_symbol["text-letter-spacing"]),"text-justify":new gi(se.layout_symbol["text-justify"]),"text-radial-offset":new gi(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ri(se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new gi(se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new gi(se.layout_symbol["text-anchor"]),"text-max-angle":new ri(se.layout_symbol["text-max-angle"]),"text-writing-mode":new ri(se.layout_symbol["text-writing-mode"]),"text-rotate":new gi(se.layout_symbol["text-rotate"]),"text-padding":new ri(se.layout_symbol["text-padding"]),"text-keep-upright":new ri(se.layout_symbol["text-keep-upright"]),"text-transform":new gi(se.layout_symbol["text-transform"]),"text-offset":new gi(se.layout_symbol["text-offset"]),"text-allow-overlap":new ri(se.layout_symbol["text-allow-overlap"]),"text-overlap":new ri(se.layout_symbol["text-overlap"]),"text-ignore-placement":new ri(se.layout_symbol["text-ignore-placement"]),"text-optional":new ri(se.layout_symbol["text-optional"])})}};class v_{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:ai,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ht("FormatSectionOverride",v_,{omit:["defaultValue"]});class Tf extends qn{constructor(r){super(r,i2)}recalculate(r,l){if(super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,l,h,m){const y=this.layout.get(r).evaluate(l,{},h,m),v=this._unevaluatedLayout._values[r];return v.isDataDriven()||mo(v.value)||!y?y:function(C,E){return E.replace(/{([^{}]+)}/g,(S,P)=>C&&P in C?String(C[P]):"")}(l.properties,y)}createBucket(r){return new Pc(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of i2.paint.overridableProperties){if(!Tf.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),h=new v_(l),m=new cu(h,l.property.specification);let y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new hu("source",m):new uu("composite",m,l.value.zoomStops),this.paint._values[r]=new $n(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Tf.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const h=r.get("text-field"),m=i2.paint.properties[l];let y=!1;const v=C=>{for(const E of C)if(m.overrides&&m.overrides.hasOverride(E))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Xr)v(h.value.value.sections);else if(h.value.kind==="source"){const C=S=>{y||(S instanceof Zs&&Sa(S.value)===Xt?v(S.value.sections):S instanceof ac?v(S.sections):S.eachChild(C))},E=h.value;E._styleExpression&&C(E._styleExpression.expression)}return y}}let x_;var Kw={get paint(){return x_=x_||new jr({"background-color":new ri(se.paint_background["background-color"]),"background-pattern":new Fu(se.paint_background["background-pattern"]),"background-opacity":new ri(se.paint_background["background-opacity"])})}};class $w extends qn{constructor(r){super(r,Kw)}}let w_;var qw={get paint(){return w_=w_||new jr({"raster-opacity":new ri(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new ri(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ri(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ri(se.paint_raster["raster-brightness-max"]),"raster-saturation":new ri(se.paint_raster["raster-saturation"]),"raster-contrast":new ri(se.paint_raster["raster-contrast"]),"raster-resampling":new ri(se.paint_raster["raster-resampling"]),"raster-fade-duration":new ri(se.paint_raster["raster-fade-duration"])})}};class Ww extends qn{constructor(r){super(r,qw)}}class Jw extends qn{constructor(r){super(r,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class e9{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const t9={once:!0},a2=63710088e-1;class gA{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new gA(bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,h=this.lat*l,m=r.lat*l,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*l);return a2*Math.acos(Math.min(y,1))}static convert(r){if(r instanceof gA)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new gA(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new gA(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const B_=2*Math.PI*a2;function C_(A){return B_*Math.cos(A*Math.PI/180)}function M_(A){return(180+A)/360}function R_(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function I_(A,r){return A/C_(r)}function r2(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function U_(A,r){return A*C_(r2(r))}class id{constructor(r,l,h=0){this.x=+r,this.y=+l,this.z=+h}static fromLngLat(r,l=0){const h=gA.convert(r);return new id(M_(h.lng),R_(h.lat),I_(l,h.lat))}toLngLat(){return new gA(360*this.x-180,r2(this.y))}toAltitude(){return U_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/B_*(r=r2(this.y),1/Math.cos(r*Math.PI/180));var r}}function E_(A,r,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[A*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class n2{constructor(r,l,h){if(!function(m,y,v){return!(m<0||m>25||v<0||v>=Math.pow(2,m)||y<0||y>=Math.pow(2,m))}(r,l,h))throw new Error(`x=${l}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=l,this.y=h,this.key=Qc(0,r,r,l,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l,h){const m=(v=this.y,C=this.z,E=E_(256*(y=this.x),256*(v=Math.pow(2,C)-v-1),C),S=E_(256*(y+1),256*(v+1),C),E[0]+","+E[1]+","+S[0]+","+S[1]);var y,v,C,E,S;const P=function(k,O,j){let K,ie="";for(let he=k;he>0;he--)K=1<<he-1,ie+=(O&K?1:0)+(j&K?2:0);return ie}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const l=this.z-r.z;return l>0&&r.x===this.x>>l&&r.y===this.y>>l}getTilePoint(r){const l=Math.pow(2,this.z);return new N((r.x*l-this.x)*xt,(r.y*l-this.y)*xt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class F_{constructor(r,l){this.wrap=r,this.canonical=l,this.key=Qc(r,l.z,l.z,l.x,l.y)}}class En{constructor(r,l,h,m,y){if(this.terrainRttPosMatrix32f=null,r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=l,this.canonical=new n2(h,+m,+y),this.key=Qc(l,r,h,m,y)}clone(){return new En(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?new En(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new En(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?Qc(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y):Qc(this.wrap*+l,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new En(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new En(l,this.wrap,l,h,m),new En(l,this.wrap,l,h+1,m),new En(l,this.wrap,l,h,m+1),new En(l,this.wrap,l,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new En(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new En(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new F_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new id(r.x-this.wrap,r.y))}}function Qc(A,r,l,h,m){(A*=2)<0&&(A=-1*A-1);const y=1<<l;return(y*y*A+y*m+h).toString(36)+l.toString(36)+r.toString(36)}Ht("CanonicalTileID",n2),Ht("OverscaledTileID",En,{omit:["terrainRttPosMatrix32f"]});class T_{constructor(r,l,h,m=1,y=1,v=1,C=0){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Ai(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const E=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=y,this.blueFactor=v,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let S=0;S<E;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(E,S)]=this.data[this._idx(E-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,E)]=this.data[this._idx(S,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<E;S++)for(let P=0;P<E;P++){const k=this.get(S,P);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(r,l){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,l);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}unpack(r,l,h){return r*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Un({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,l,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,y=l*this.dim+this.dim,v=h*this.dim,C=h*this.dim+this.dim;switch(l){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:v=C-1;break;case 1:C=v+1}const E=-l*this.dim,S=-h*this.dim;for(let P=v;P<C;P++)for(let k=m;k<y;k++)this.data[this._idx(k,P)]=r.data[this._idx(k+E,P+S)]}}Ht("DEMData",T_);class S_{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const h=r[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Y_{constructor(r,l,h,m,y){this.type="Feature",this._vectorTileFeature=r,r._z=l,r._x=h,r._y=m,this.properties=r.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(r[l]=this[l]);return r}}class N_{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ps(xt,16,0),this.grid3D=new ps(xt,16,0),this.featureIndexArray=new _e,this.promoteId=l}insert(r,l,h,m,y,v){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const E=v?this.grid3D:this.grid;for(let S=0;S<l.length;S++){const P=l[S],k=[1/0,1/0,-1/0,-1/0];for(let O=0;O<P.length;O++){const j=P[O];k[0]=Math.min(k[0],j.x),k[1]=Math.min(k[1],j.y),k[2]=Math.max(k[2],j.x),k[3]=Math.max(k[3],j.y)}k[0]<xt&&k[1]<xt&&k[2]>=0&&k[3]>=0&&E.insert(C,k[0],k[1],k[2],k[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new $u.VectorTile(new Gp(this.rawTileData)).layers,this.sourceLayerCoder=new S_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,l,h,m){this.loadVTLayers();const y=r.params,v=xt/r.tileSize/r.scale,C=du(y.filter),E=r.queryGeometry,S=r.queryPadding*v,P=P_(E),k=this.grid.query(P.minX-S,P.minY-S,P.maxX+S,P.maxY+S),O=P_(r.cameraQueryGeometry),j=this.grid3D.query(O.minX-S,O.minY-S,O.maxX+S,O.maxY+S,(he,be,Ne,Be)=>function(G,le,Ce,$e,vt){for(const nt of G)if(le<=nt.x&&Ce<=nt.y&&$e>=nt.x&&vt>=nt.y)return!0;const it=[new N(le,Ce),new N(le,vt),new N($e,vt),new N($e,Ce)];if(G.length>2){for(const nt of it)if(wl(G,nt))return!0}for(let nt=0;nt<G.length-1;nt++)if(Hx(G[nt],G[nt+1],it))return!0;return!1}(r.cameraQueryGeometry,he-S,be-S,Ne+S,Be+S));for(const he of j)k.push(he);k.sort(i9);const K={};let ie;for(let he=0;he<k.length;he++){const be=k[he];if(be===ie)continue;ie=be;const Ne=this.featureIndexArray.get(be);let Be=null;this.loadMatchingFeature(K,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,C,y.layers,y.availableImages,l,h,m,(G,le,Ce)=>(Be||(Be=rn(G)),le.queryIntersectsFeature({queryGeometry:E,feature:G,featureState:Ce,geometry:Be,zoom:this.z,transform:r.transform,pixelsToTileUnits:v,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation})))}return K}loadMatchingFeature(r,l,h,m,y,v,C,E,S,P,k){const O=this.bucketLayerIDs[l];if(v&&!O.some(he=>v.has(he)))return;const j=this.sourceLayerCoder.decode(h),K=this.vtLayers[j].feature(m);if(y.needGeometry){const he=Ks(K,!0);if(!y.filter(new ga(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!y.filter(new ga(this.tileID.overscaledZ),K))return;const ie=this.getId(K,j);for(let he=0;he<O.length;he++){const be=O[he];if(v&&!v.has(be))continue;const Ne=E[be];if(!Ne)continue;let Be={};ie&&P&&(Be=P.getState(Ne.sourceLayer||"_geojsonTileLayer",ie));const G=dt({},S[be]);G.paint=L_(G.paint,Ne.paint,K,Be,C),G.layout=L_(G.layout,Ne.layout,K,Be,C);const le=!k||k(K,Ne,Be);if(!le)continue;const Ce=new Y_(K,this.z,this.x,this.y,ie);Ce.layer=G;let $e=r[be];$e===void 0&&($e=r[be]=[]),$e.push({featureIndex:m,feature:Ce,intersectionZ:le})}}lookupSymbolFeatures(r,l,h,m,y,v,C,E){const S={};this.loadVTLayers();const P=du(y);for(const k of r)this.loadMatchingFeature(S,h,m,k,P,v,C,E,l);return S}hasLayer(r){for(const l of this.bucketLayerIDs)for(const h of l)if(r===h)return!0;return!1}getId(r,l){var h;let m=r.id;return this.promoteId&&(m=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((h=r.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(m=Number(r.properties.cluster_id))),m}}function L_(A,r,l,h,m){return zt(A,(y,v)=>{const C=r instanceof Rc?r.get(v):null;return C&&C.evaluate?C.evaluate(l,h,m):C})}function P_(A){let r=1/0,l=1/0,h=-1/0,m=-1/0;for(const y of A)r=Math.min(r,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:r,minY:l,maxX:h,maxY:m}}function i9(A,r){return r-A}function Q_(A,r,l,h,m){const y=[];for(let v=0;v<A.length;v++){const C=A[v];let E;for(let S=0;S<C.length-1;S++){let P=C[S],k=C[S+1];P.x<r&&k.x<r||(P.x<r?P=new N(r,P.y+(r-P.x)/(k.x-P.x)*(k.y-P.y))._round():k.x<r&&(k=new N(r,P.y+(r-P.x)/(k.x-P.x)*(k.y-P.y))._round()),P.y<l&&k.y<l||(P.y<l?P=new N(P.x+(l-P.y)/(k.y-P.y)*(k.x-P.x),l)._round():k.y<l&&(k=new N(P.x+(l-P.y)/(k.y-P.y)*(k.x-P.x),l)._round()),P.x>=h&&k.x>=h||(P.x>=h?P=new N(h,P.y+(h-P.x)/(k.x-P.x)*(k.y-P.y))._round():k.x>=h&&(k=new N(h,P.y+(h-P.x)/(k.x-P.x)*(k.y-P.y))._round()),P.y>=m&&k.y>=m||(P.y>=m?P=new N(P.x+(m-P.y)/(k.y-P.y)*(k.x-P.x),m)._round():k.y>=m&&(k=new N(P.x+(m-P.y)/(k.y-P.y)*(k.x-P.x),m)._round()),E&&P.equals(E[E.length-1])||(E=[P],y.push(E)),E.push(k)))))}}return y}Ht("FeatureIndex",N_,{omit:["rawTileData","sourceLayerCoder"]});class pA extends N{constructor(r,l,h,m){super(r,l),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new pA(this.x,this.y,this.angle,this.segment)}}function k_(A,r,l,h,m){if(r.segment===void 0||l===0)return!0;let y=r,v=r.segment+1,C=0;for(;C>-l/2;){if(v--,v<0)return!1;C-=A[v].dist(y),y=A[v]}C+=A[v].dist(A[v+1]),v++;const E=[];let S=0;for(;C<l/2;){const P=A[v],k=A[v+1];if(!k)return!1;let O=A[v-1].angleTo(P)-P.angleTo(k);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:C,angleDelta:O}),S+=O;C-E[0].distance>h;)S-=E.shift().angleDelta;if(S>m)return!1;v++,C+=P.dist(k)}return!0}function D_(A){let r=0;for(let l=0;l<A.length-1;l++)r+=A[l].dist(A[l+1]);return r}function z_(A,r,l){return A?.6*r*l:0}function Z_(A,r){return Math.max(A?A.right-A.left:0,r?r.right-r.left:0)}function a9(A,r,l,h,m,y){const v=z_(l,m,y),C=Z_(l,h)*y;let E=0;const S=D_(A)/2;for(let P=0;P<A.length-1;P++){const k=A[P],O=A[P+1],j=k.dist(O);if(E+j>S){const K=(S-E)/j,ie=ua.number(k.x,O.x,K),he=ua.number(k.y,O.y,K),be=new pA(ie,he,O.angleTo(k),P);return be._round(),!v||k_(A,be,C,v,r)?be:void 0}E+=j}}function r9(A,r,l,h,m,y,v,C,E){const S=z_(h,y,v),P=Z_(h,m),k=P*v,O=A[0].x===0||A[0].x===E||A[0].y===0||A[0].y===E;return r-k<r/4&&(r=k+r/4),H_(A,O?r/2*C%r:(P/2+2*y)*v*C%r,r,S,l,k,O,!1,E)}function H_(A,r,l,h,m,y,v,C,E){const S=y/2,P=D_(A);let k=0,O=r-l,j=[];for(let K=0;K<A.length-1;K++){const ie=A[K],he=A[K+1],be=ie.dist(he),Ne=he.angleTo(ie);for(;O+l<k+be;){O+=l;const Be=(O-k)/be,G=ua.number(ie.x,he.x,Be),le=ua.number(ie.y,he.y,Be);if(G>=0&&G<E&&le>=0&&le<E&&O-S>=0&&O+S<=P){const Ce=new pA(G,le,Ne,K);Ce._round(),h&&!k_(A,Ce,y,h,m)||j.push(Ce)}}k+=be}return C||j.length||v||(j=H_(A,k/2,l,h,m,y,v,!0,E)),j}Ht("Anchor",pA);const ad=nn;function O_(A,r,l,h){const m=[],y=A.image,v=y.pixelRatio,C=y.paddedRect.w-2*ad,E=y.paddedRect.h-2*ad;let S={x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};const P=y.stretchX||[[0,C]],k=y.stretchY||[[0,E]],O=(lt,Vt)=>lt+Vt[1]-Vt[0],j=P.reduce(O,0),K=k.reduce(O,0),ie=C-j,he=E-K;let be=0,Ne=j,Be=0,G=K,le=0,Ce=ie,$e=0,vt=he;if(y.content&&h){const lt=y.content,Vt=lt[2]-lt[0],fi=lt[3]-lt[1];(y.textFitWidth||y.textFitHeight)&&(S=p_(A)),be=Sf(P,0,lt[0]),Be=Sf(k,0,lt[1]),Ne=Sf(P,lt[0],lt[2]),G=Sf(k,lt[1],lt[3]),le=lt[0]-be,$e=lt[1]-Be,Ce=Vt-Ne,vt=fi-G}const it=S.x1,nt=S.y1,Rt=S.x2-it,wt=S.y2-nt,Et=(lt,Vt,fi,ui)=>{const ii=Yf(lt.stretch-be,Ne,Rt,it),Pi=Nf(lt.fixed-le,Ce,lt.stretch,j),Na=Yf(Vt.stretch-Be,G,wt,nt),Ja=Nf(Vt.fixed-$e,vt,Vt.stretch,K),Er=Yf(fi.stretch-be,Ne,Rt,it),Fn=Nf(fi.fixed-le,Ce,fi.stretch,j),sn=Yf(ui.stretch-Be,G,wt,nt),yr=Nf(ui.fixed-$e,vt,ui.stretch,K),Ra=new N(ii,Na),sr=new N(Er,Na),vr=new N(Er,sn),xr=new N(ii,sn),Kr=new N(Pi/v,Ja/v),Tn=new N(Fn/v,yr/v),or=r*Math.PI/180;if(or){const Ar=Math.sin(or),lr=Math.cos(or),Ga=[lr,-Ar,Ar,lr];Ra._matMult(Ga),sr._matMult(Ga),xr._matMult(Ga),vr._matMult(Ga)}const on=lt.stretch+lt.fixed,er=Vt.stretch+Vt.fixed;return{tl:Ra,tr:sr,bl:xr,br:vr,tex:{x:y.paddedRect.x+ad+on,y:y.paddedRect.y+ad+er,w:fi.stretch+fi.fixed-on,h:ui.stretch+ui.fixed-er},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kr,pixelOffsetBR:Tn,minFontScaleX:Ce/v/Rt,minFontScaleY:vt/v/wt,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){const lt=X_(P,ie,j),Vt=X_(k,he,K);for(let fi=0;fi<lt.length-1;fi++){const ui=lt[fi],ii=lt[fi+1];for(let Pi=0;Pi<Vt.length-1;Pi++)m.push(Et(ui,Vt[Pi],ii,Vt[Pi+1]))}}else m.push(Et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:E+1}));return m}function Sf(A,r,l){let h=0;for(const m of A)h+=Math.max(r,Math.min(l,m[1]))-Math.max(r,Math.min(l,m[0]));return h}function X_(A,r,l){const h=[{fixed:-1,stretch:0}];for(const[m,y]of A){const v=h[h.length-1];h.push({fixed:m-v.stretch,stretch:v.stretch}),h.push({fixed:m-v.stretch,stretch:v.stretch+(y-m)})}return h.push({fixed:r+ad,stretch:l}),h}function Yf(A,r,l,h){return A/r*l+h}function Nf(A,r,l,h){return A-r*l/h}class Lf{constructor(r,l,h,m,y,v,C,E,S,P){var k;if(this.boxStartIndex=r.length,S){let O=v.top,j=v.bottom;const K=v.collisionPadding;K&&(O-=K[1],j+=K[3]);let ie=j-O;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{const O=!((k=v.image)===null||k===void 0)&&k.content&&(v.image.textFitWidth||v.image.textFitHeight)?p_(v):{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom};O.y1=O.y1*C-E[0],O.y2=O.y2*C+E[2],O.x1=O.x1*C-E[3],O.x2=O.x2*C+E[1];const j=v.collisionPadding;if(j&&(O.x1-=j[0]*C,O.y1-=j[1]*C,O.x2+=j[2]*C,O.y2+=j[3]*C),P){const K=new N(O.x1,O.y1),ie=new N(O.x2,O.y1),he=new N(O.x1,O.y2),be=new N(O.x2,O.y2),Ne=P*Math.PI/180;K._rotate(Ne),ie._rotate(Ne),he._rotate(Ne),be._rotate(Ne),O.x1=Math.min(K.x,ie.x,he.x,be.x),O.x2=Math.max(K.x,ie.x,he.x,be.x),O.y1=Math.min(K.y,ie.y,he.y,be.y),O.y2=Math.max(K.y,ie.y,he.y,be.y)}r.emplaceBack(l.x,l.y,O.x1,O.y1,O.x2,O.y2,h,m,y)}this.boxEndIndex=r.length}}class n9{constructor(r=[],l=(h,m)=>h<m?-1:h>m?1:0){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:h}=this,m=l[r];for(;r>0;){const y=r-1>>1,v=l[y];if(h(m,v)>=0)break;l[r]=v,r=y}l[r]=m}_down(r){const{data:l,compare:h}=this,m=this.length>>1,y=l[r];for(;r<m;){let v=1+(r<<1);const C=v+1;if(C<this.length&&h(l[C],l[v])<0&&(v=C),h(l[v],y)>=0)break;l[r]=l[v],r=v}l[r]=y}}function s9(A,r=1,l=!1){let h=1/0,m=1/0,y=-1/0,v=-1/0;const C=A[0];for(let j=0;j<C.length;j++){const K=C[j];(!j||K.x<h)&&(h=K.x),(!j||K.y<m)&&(m=K.y),(!j||K.x>y)&&(y=K.x),(!j||K.y>v)&&(v=K.y)}const E=Math.min(y-h,v-m);let S=E/2;const P=new n9([],o9);if(E===0)return new N(h,m);for(let j=h;j<y;j+=E)for(let K=m;K<v;K+=E)P.push(new kc(j+S,K+S,S,A));let k=function(j){let K=0,ie=0,he=0;const be=j[0];for(let Ne=0,Be=be.length,G=Be-1;Ne<Be;G=Ne++){const le=be[Ne],Ce=be[G],$e=le.x*Ce.y-Ce.x*le.y;ie+=(le.x+Ce.x)*$e,he+=(le.y+Ce.y)*$e,K+=3*$e}return new kc(ie/K,he/K,0,j)}(A),O=P.length;for(;P.length;){const j=P.pop();(j.d>k.d||!k.d)&&(k=j,l&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,O)),j.max-k.d<=r||(S=j.h/2,P.push(new kc(j.p.x-S,j.p.y-S,S,A)),P.push(new kc(j.p.x+S,j.p.y-S,S,A)),P.push(new kc(j.p.x-S,j.p.y+S,S,A)),P.push(new kc(j.p.x+S,j.p.y+S,S,A)),O+=4)}return l&&(console.log(`num probes: ${O}`),console.log(`best distance: ${k.d}`)),k.p}function o9(A,r){return r.max-A.max}function kc(A,r,l,h){this.p=new N(A,r),this.h=l,this.d=function(m,y){let v=!1,C=1/0;for(let E=0;E<y.length;E++){const S=y[E];for(let P=0,k=S.length,O=k-1;P<k;O=P++){const j=S[P],K=S[O];j.y>m.y!=K.y>m.y&&m.x<(K.x-j.x)*(m.y-j.y)/(K.y-j.y)+j.x&&(v=!v),C=Math.min(C,C4(m,j,K))}}return(v?1:-1)*Math.sqrt(C)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Ur;u.aB=void 0,(Ur=u.aB||(u.aB={}))[Ur.center=1]="center",Ur[Ur.left=2]="left",Ur[Ur.right=3]="right",Ur[Ur.top=4]="top",Ur[Ur.bottom=5]="bottom",Ur[Ur["top-left"]=6]="top-left",Ur[Ur["top-right"]=7]="top-right",Ur[Ur["bottom-left"]=8]="bottom-left",Ur[Ur["bottom-right"]=9]="bottom-right";const mA=7,s2=Number.POSITIVE_INFINITY;function V_(A,r){return r[1]!==s2?function(l,h,m){let y=0,v=0;switch(h=Math.abs(h),m=Math.abs(m),l){case"top-right":case"top-left":case"top":v=m-mA;break;case"bottom-right":case"bottom-left":case"bottom":v=-m+mA}switch(l){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,v]}(A,r[0],r[1]):function(l,h){let m=0,y=0;h<0&&(h=0);const v=h/Math.SQRT2;switch(l){case"top-right":case"top-left":y=v-mA;break;case"bottom-right":case"bottom-left":y=-v+mA;break;case"bottom":y=-h+mA;break;case"top":y=h-mA}switch(l){case"top-right":case"bottom-right":m=-v;break;case"top-left":case"bottom-left":m=v;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(A,r[0])}function G_(A,r,l){var h;const m=A.layout,y=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},l);if(y){const C=y.values,E=[];for(let S=0;S<C.length;S+=2){const P=E[S]=C[S],k=C[S+1].map(O=>O*Wa);P.startsWith("top")?k[1]-=mA:P.startsWith("bottom")&&(k[1]+=mA),E[S+1]=k}return new _r(E)}const v=m.get("text-variable-anchor");if(v){let C;C=A._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},l)*Wa,s2]:m.get("text-offset").evaluate(r,{},l).map(S=>S*Wa);const E=[];for(const S of v)E.push(S,V_(S,C));return new _r(E)}return null}function o2(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function A9(A,r,l,h,m,y,v,C,E,S,P,k){let O=y.textMaxSize.evaluate(r,{});O===void 0&&(O=v);const j=A.layers[0].layout,K=j.get("icon-offset").evaluate(r,{},P),ie=K_(l.horizontal),he=v/24,be=A.tilePixelRatio*he,Ne=A.tilePixelRatio*O/24,Be=A.tilePixelRatio*C,G=A.tilePixelRatio*j.get("symbol-spacing"),le=j.get("text-padding")*A.tilePixelRatio,Ce=function(fi,ui,ii,Pi=1){const Na=fi.get("icon-padding").evaluate(ui,{},ii),Ja=Na&&Na.values;return[Ja[0]*Pi,Ja[1]*Pi,Ja[2]*Pi,Ja[3]*Pi]}(j,r,P,A.tilePixelRatio),$e=j.get("text-max-angle")/180*Math.PI,vt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",it=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",nt=j.get("symbol-placement"),Rt=G/2,wt=j.get("icon-text-fit");let Et;h&&wt!=="none"&&(A.allowVerticalPlacement&&l.vertical&&(Et=m_(h,l.vertical,wt,j.get("icon-text-fit-padding"),K,he)),ie&&(h=m_(h,ie,wt,j.get("icon-text-fit-padding"),K,he)));const lt=P?k.line.getGranularityForZoomLevel(P.z):1,Vt=(fi,ui)=>{ui.x<0||ui.x>=xt||ui.y<0||ui.y>=xt||function(ii,Pi,Na,Ja,Er,Fn,sn,yr,Ra,sr,vr,xr,Kr,Tn,or,on,er,Ar,lr,Ga,_a,ws,Dc,Bs,h9){const zc=ii.addToLineVertexArray(Pi,Na);let Ml,Zc,Hc,Oc,J_=0,eb=0,tb=0,ib=0,g2=-1,p2=-1;const Mo={};let ab=Ir("");if(ii.allowVerticalPlacement&&Ja.vertical){const Dr=yr.layout.get("text-rotate").evaluate(_a,{},Bs)+90;Hc=new Lf(Ra,Pi,sr,vr,xr,Ja.vertical,Kr,Tn,or,Dr),sn&&(Oc=new Lf(Ra,Pi,sr,vr,xr,sn,er,Ar,or,Dr))}if(Er){const Dr=yr.layout.get("icon-rotate").evaluate(_a,{}),Sn=yr.layout.get("icon-text-fit")!=="none",Rl=O_(Er,Dr,Dc,Sn),Ms=sn?O_(sn,Dr,Dc,Sn):void 0;Zc=new Lf(Ra,Pi,sr,vr,xr,Er,er,Ar,!1,Dr),J_=4*Rl.length;const Il=ii.iconSizeData;let qs=null;Il.kind==="source"?(qs=[$s*yr.layout.get("icon-size").evaluate(_a,{})],qs[0]>fA&&Ai(`${ii.layerIds[0]}: Value for "icon-size" is >= ${td}. Reduce your "icon-size".`)):Il.kind==="composite"&&(qs=[$s*ws.compositeIconSizes[0].evaluate(_a,{},Bs),$s*ws.compositeIconSizes[1].evaluate(_a,{},Bs)],(qs[0]>fA||qs[1]>fA)&&Ai(`${ii.layerIds[0]}: Value for "icon-size" is >= ${td}. Reduce your "icon-size".`)),ii.addSymbols(ii.icon,Rl,qs,Ga,lr,_a,u.al.none,Pi,zc.lineStartIndex,zc.lineLength,-1,Bs),g2=ii.icon.placedSymbolArray.length-1,Ms&&(eb=4*Ms.length,ii.addSymbols(ii.icon,Ms,qs,Ga,lr,_a,u.al.vertical,Pi,zc.lineStartIndex,zc.lineLength,-1,Bs),p2=ii.icon.placedSymbolArray.length-1)}const rb=Object.keys(Ja.horizontal);for(const Dr of rb){const Sn=Ja.horizontal[Dr];if(!Ml){ab=Ir(Sn.text);const Ms=yr.layout.get("text-rotate").evaluate(_a,{},Bs);Ml=new Lf(Ra,Pi,sr,vr,xr,Sn,Kr,Tn,or,Ms)}const Rl=Sn.positionedLines.length===1;if(tb+=j_(ii,Pi,Sn,Fn,yr,or,_a,on,zc,Ja.vertical?u.al.horizontal:u.al.horizontalOnly,Rl?rb:[Dr],Mo,g2,ws,Bs),Rl)break}Ja.vertical&&(ib+=j_(ii,Pi,Ja.vertical,Fn,yr,or,_a,on,zc,u.al.vertical,["vertical"],Mo,p2,ws,Bs));const u9=Ml?Ml.boxStartIndex:ii.collisionBoxArray.length,d9=Ml?Ml.boxEndIndex:ii.collisionBoxArray.length,f9=Hc?Hc.boxStartIndex:ii.collisionBoxArray.length,g9=Hc?Hc.boxEndIndex:ii.collisionBoxArray.length,p9=Zc?Zc.boxStartIndex:ii.collisionBoxArray.length,m9=Zc?Zc.boxEndIndex:ii.collisionBoxArray.length,_9=Oc?Oc.boxStartIndex:ii.collisionBoxArray.length,b9=Oc?Oc.boxEndIndex:ii.collisionBoxArray.length;let Cs=-1;const Qf=(Dr,Sn)=>Dr&&Dr.circleDiameter?Math.max(Dr.circleDiameter,Sn):Sn;Cs=Qf(Ml,Cs),Cs=Qf(Hc,Cs),Cs=Qf(Zc,Cs),Cs=Qf(Oc,Cs);const nb=Cs>-1?1:0;nb&&(Cs*=h9/Wa),ii.glyphOffsetArray.length>=Pc.MAX_GLYPHS&&Ai("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_a.sortKey!==void 0&&ii.addToSortKeyRanges(ii.symbolInstances.length,_a.sortKey);const y9=G_(yr,_a,Bs),[v9,x9]=function(Dr,Sn){const Rl=Dr.length,Ms=Sn==null?void 0:Sn.values;if((Ms==null?void 0:Ms.length)>0)for(let Il=0;Il<Ms.length;Il+=2){const qs=Ms[Il+1];Dr.emplaceBack(u.aB[Ms[Il]],qs[0],qs[1])}return[Rl,Dr.length]}(ii.textAnchorOffsets,y9);ii.symbolInstances.emplaceBack(Pi.x,Pi.y,Mo.right>=0?Mo.right:-1,Mo.center>=0?Mo.center:-1,Mo.left>=0?Mo.left:-1,Mo.vertical||-1,g2,p2,ab,u9,d9,f9,g9,p9,m9,_9,b9,sr,tb,ib,J_,eb,nb,0,Kr,Cs,v9,x9)}(A,ui,fi,l,h,m,Et,A.layers[0],A.collisionBoxArray,r.index,r.sourceLayerIndex,A.index,be,[le,le,le,le],vt,E,Be,Ce,it,K,r,y,S,P,v)};if(nt==="line")for(const fi of Q_(r.geometry,0,0,xt,xt)){const ui=Cl(fi,lt),ii=r9(ui,G,$e,l.vertical||ie,h,24,Ne,A.overscaling,xt);for(const Pi of ii)ie&&l9(A,ie.text,Rt,Pi)||Vt(ui,Pi)}else if(nt==="line-center"){for(const fi of r.geometry)if(fi.length>1){const ui=Cl(fi,lt),ii=a9(ui,$e,l.vertical||ie,h,24,Ne);ii&&Vt(ui,ii)}}else if(r.type==="Polygon")for(const fi of nc(r.geometry,0)){const ui=s9(fi,16);Vt(Cl(fi[0],lt,!0),new pA(ui.x,ui.y,0))}else if(r.type==="LineString")for(const fi of r.geometry){const ui=Cl(fi,lt);Vt(ui,new pA(ui[0].x,ui[0].y,0))}else if(r.type==="Point")for(const fi of r.geometry)for(const ui of fi)Vt([ui],new pA(ui.x,ui.y,0))}function j_(A,r,l,h,m,y,v,C,E,S,P,k,O,j,K){const ie=function(Ne,Be,G,le,Ce,$e,vt,it){const nt=le.layout.get("text-rotate").evaluate($e,{})*Math.PI/180,Rt=[];for(const wt of Be.positionedLines)for(const Et of wt.positionedGlyphs){if(!Et.rect)continue;const lt=Et.rect||{};let Vt=Lw+1,fi=!0,ui=1,ii=0;const Pi=(Ce||it)&&Et.vertical,Na=Et.metrics.advance*Et.scale/2;if(it&&Be.verticalizable&&(ii=wt.lineOffset/2-(Et.imageName?-(Wa-Et.metrics.width*Et.scale)/2:(Et.scale-1)*Wa)),Et.imageName){const Ar=vt[Et.imageName];fi=Ar.sdf,ui=Ar.pixelRatio,Vt=nn/ui}const Ja=Ce?[Et.x+Na,Et.y]:[0,0];let Er=Ce?[0,0]:[Et.x+Na+G[0],Et.y+G[1]-ii],Fn=[0,0];Pi&&(Fn=Er,Er=[0,0]);const sn=Et.metrics.isDoubleResolution?2:1,yr=(Et.metrics.left-Vt)*Et.scale-Na+Er[0],Ra=(-Et.metrics.top-Vt)*Et.scale+Er[1],sr=yr+lt.w/sn*Et.scale/ui,vr=Ra+lt.h/sn*Et.scale/ui,xr=new N(yr,Ra),Kr=new N(sr,Ra),Tn=new N(yr,vr),or=new N(sr,vr);if(Pi){const Ar=new N(-Na,Na-If),lr=-Math.PI/2,Ga=Wa/2-Na,_a=new N(5-If-Ga,-(Et.imageName?Ga:0)),ws=new N(...Fn);xr._rotateAround(lr,Ar)._add(_a)._add(ws),Kr._rotateAround(lr,Ar)._add(_a)._add(ws),Tn._rotateAround(lr,Ar)._add(_a)._add(ws),or._rotateAround(lr,Ar)._add(_a)._add(ws)}if(nt){const Ar=Math.sin(nt),lr=Math.cos(nt),Ga=[lr,-Ar,Ar,lr];xr._matMult(Ga),Kr._matMult(Ga),Tn._matMult(Ga),or._matMult(Ga)}const on=new N(0,0),er=new N(0,0);Rt.push({tl:xr,tr:Kr,bl:Tn,br:or,tex:lt,writingMode:Be.writingMode,glyphOffset:Ja,sectionIndex:Et.sectionIndex,isSDF:fi,pixelOffsetTL:on,pixelOffsetBR:er,minFontScaleX:0,minFontScaleY:0})}return Rt}(0,l,C,m,y,v,h,A.allowVerticalPlacement),he=A.textSizeData;let be=null;he.kind==="source"?(be=[$s*m.layout.get("text-size").evaluate(v,{})],be[0]>fA&&Ai(`${A.layerIds[0]}: Value for "text-size" is >= ${td}. Reduce your "text-size".`)):he.kind==="composite"&&(be=[$s*j.compositeTextSizes[0].evaluate(v,{},K),$s*j.compositeTextSizes[1].evaluate(v,{},K)],(be[0]>fA||be[1]>fA)&&Ai(`${A.layerIds[0]}: Value for "text-size" is >= ${td}. Reduce your "text-size".`)),A.addSymbols(A.text,ie,be,C,y,v,S,r,E.lineStartIndex,E.lineLength,O,K);for(const Ne of P)k[Ne]=A.text.placedSymbolArray.length-1;return 4*ie.length}function K_(A){for(const r in A)return A[r];return null}function l9(A,r,l,h){const m=A.compareText;if(r in m){const y=m[r];for(let v=y.length-1;v>=0;v--)if(h.dist(y[v])<l)return!0}else m[r]=[];return m[r].push(h),!1}const $_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class A2{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const y=$_[15&h];if(!y)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(r,2,1),[C]=new Uint32Array(r,4,1);return new A2(C,v,y,r)}constructor(r,l=64,h=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const y=$_.indexOf(this.ArrayType),v=2*r*this.ArrayType.BYTES_PER_ELEMENT,C=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-C%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+v+C+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=l,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return l2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:v,nodeSize:C}=this,E=[0,y.length-1,0],S=[];for(;E.length;){const P=E.pop()||0,k=E.pop()||0,O=E.pop()||0;if(k-O<=C){for(let he=O;he<=k;he++){const be=v[2*he],Ne=v[2*he+1];be>=r&&be<=h&&Ne>=l&&Ne<=m&&S.push(y[he])}continue}const j=O+k>>1,K=v[2*j],ie=v[2*j+1];K>=r&&K<=h&&ie>=l&&ie<=m&&S.push(y[j]),(P===0?r<=K:l<=ie)&&(E.push(O),E.push(j-1),E.push(1-P)),(P===0?h>=K:m>=ie)&&(E.push(j+1),E.push(k),E.push(1-P))}return S}within(r,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:v}=this,C=[0,m.length-1,0],E=[],S=h*h;for(;C.length;){const P=C.pop()||0,k=C.pop()||0,O=C.pop()||0;if(k-O<=v){for(let he=O;he<=k;he++)W_(y[2*he],y[2*he+1],r,l)<=S&&E.push(m[he]);continue}const j=O+k>>1,K=y[2*j],ie=y[2*j+1];W_(K,ie,r,l)<=S&&E.push(m[j]),(P===0?r-h<=K:l-h<=ie)&&(C.push(O),C.push(j-1),C.push(1-P)),(P===0?r+h>=K:l+h>=ie)&&(C.push(j+1),C.push(k),C.push(1-P))}return E}}function l2(A,r,l,h,m,y){if(m-h<=l)return;const v=h+m>>1;q_(A,r,v,h,m,y),l2(A,r,l,h,v-1,1-y),l2(A,r,l,v+1,m,1-y)}function q_(A,r,l,h,m,y){for(;m>h;){if(m-h>600){const S=m-h+1,P=l-h+1,k=Math.log(S),O=.5*Math.exp(2*k/3),j=.5*Math.sqrt(k*O*(S-O)/S)*(P-S/2<0?-1:1);q_(A,r,l,Math.max(h,Math.floor(l-P*O/S+j)),Math.min(m,Math.floor(l+(S-P)*O/S+j)),y)}const v=r[2*l+y];let C=h,E=m;for(rd(A,r,h,l),r[2*m+y]>v&&rd(A,r,h,m);C<E;){for(rd(A,r,C,E),C++,E--;r[2*C+y]<v;)C++;for(;r[2*E+y]>v;)E--}r[2*h+y]===v?rd(A,r,h,E):(E++,rd(A,r,E,m)),E<=l&&(h=E+1),l<=E&&(m=E-1)}}function rd(A,r,l,h){c2(A,l,h),c2(r,2*l,2*h),c2(r,2*l+1,2*h+1)}function c2(A,r,l){const h=A[r];A[r]=A[l],A[l]=h}function W_(A,r,l,h){const m=A-l,y=r-h;return m*m+y*y}var h2;u.cm=void 0,(h2=u.cm||(u.cm={})).create="create",h2.load="load",h2.fullLoad="fullLoad";let Pf=null,nd=[];const u2=1e3/60,d2="loadTime",f2="fullLoadTime",c9={mark(A){performance.mark(A)},frame(A){const r=A;Pf!=null&&nd.push(r-Pf),Pf=r},clearMetrics(){Pf=null,nd=[],performance.clearMeasures(d2),performance.clearMeasures(f2);for(const A in u.cm)performance.clearMarks(u.cm[A])},getPerformanceMetrics(){performance.measure(d2,u.cm.create,u.cm.load),performance.measure(f2,u.cm.create,u.cm.fullLoad);const A=performance.getEntriesByName(d2)[0].duration,r=performance.getEntriesByName(f2)[0].duration,l=nd.length,h=1/(nd.reduce((y,v)=>y+v,0)/l/1e3),m=nd.filter(y=>y>u2).reduce((y,v)=>y+(v-u2)/u2,0);return{loadTime:A,fullLoadTime:r,fps:h,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};u.$=id,u.A=oe,u.B=ua,u.C=ga,u.D=ri,u.E=ve,u.F=Bu,u.G=function(A){if(li==null){const r=A.navigator?A.navigator.userAgent:null;li=!!A.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return li},u.H=class{constructor(A,r){this.target=A,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new e9(()=>this.process()),this.subscription=Si(this.target,"message",l=>this.receive(l),!1),this.globalScope=Dt(self)?A:window}registerMessageHandler(A,r){this.messageHandlers[A]=r}sendAsync(A,r){return new Promise((l,h)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),y=r?Si(r.signal,"abort",()=>{y==null||y.unsubscribe(),delete this.resolveRejects[m];const E={id:m,type:"<cancel>",origin:location.origin,targetMapId:A.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},t9):null;this.resolveRejects[m]={resolve:E=>{y==null||y.unsubscribe(),l(E)},reject:E=>{y==null||y.unsubscribe(),h(E)}};const v=[],C=Object.assign(Object.assign({},A),{id:m,sourceMapId:this.mapId,origin:location.origin,data:dl(A.data,v)});this.target.postMessage(C,{transfer:v})})}receive(A){const r=A.data,l=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[l];const h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(Dt(self)||r.mustQueue)return this.tasks[l]=r,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,r)}}process(){if(this.taskQueue.length===0)return;const A=this.taskQueue.shift(),r=this.tasks[A];delete this.tasks[A],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(A,r)}processTask(A,r){return s(this,void 0,void 0,function*(){if(r.type==="<response>"){const m=this.resolveRejects[A];return delete this.resolveRejects[A],m?void(r.error?m.reject(yo(r.error)):m.resolve(yo(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(A,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=yo(r.data),h=new AbortController;this.abortControllers[A]=h;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,l,h);this.completeTask(A,null,m)}catch(m){this.completeTask(A,m)}})}completeTask(A,r,l){const h=[];delete this.abortControllers[A];const m={id:A,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?dl(r):null,data:dl(l,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.I=Kp,u.J=Oa,u.K=function(){var A=new oe(16);return oe!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},u.L=function(A,r,l){var h,m,y,v,C,E,S,P,k,O,j,K,ie=l[0],he=l[1],be=l[2];return r===A?(A[12]=r[0]*ie+r[4]*he+r[8]*be+r[12],A[13]=r[1]*ie+r[5]*he+r[9]*be+r[13],A[14]=r[2]*ie+r[6]*he+r[10]*be+r[14],A[15]=r[3]*ie+r[7]*he+r[11]*be+r[15]):(m=r[1],y=r[2],v=r[3],C=r[4],E=r[5],S=r[6],P=r[7],k=r[8],O=r[9],j=r[10],K=r[11],A[0]=h=r[0],A[1]=m,A[2]=y,A[3]=v,A[4]=C,A[5]=E,A[6]=S,A[7]=P,A[8]=k,A[9]=O,A[10]=j,A[11]=K,A[12]=h*ie+C*he+k*be+r[12],A[13]=m*ie+E*he+O*be+r[13],A[14]=y*ie+S*he+j*be+r[14],A[15]=v*ie+P*he+K*be+r[15]),A},u.M=function(A,r,l){var h=l[0],m=l[1],y=l[2];return A[0]=r[0]*h,A[1]=r[1]*h,A[2]=r[2]*h,A[3]=r[3]*h,A[4]=r[4]*m,A[5]=r[5]*m,A[6]=r[6]*m,A[7]=r[7]*m,A[8]=r[8]*y,A[9]=r[9]*y,A[10]=r[10]*y,A[11]=r[11]*y,A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15],A},u.N=function(A,r,l){var h=r[0],m=r[1],y=r[2],v=r[3],C=r[4],E=r[5],S=r[6],P=r[7],k=r[8],O=r[9],j=r[10],K=r[11],ie=r[12],he=r[13],be=r[14],Ne=r[15],Be=l[0],G=l[1],le=l[2],Ce=l[3];return A[0]=Be*h+G*C+le*k+Ce*ie,A[1]=Be*m+G*E+le*O+Ce*he,A[2]=Be*y+G*S+le*j+Ce*be,A[3]=Be*v+G*P+le*K+Ce*Ne,A[4]=(Be=l[4])*h+(G=l[5])*C+(le=l[6])*k+(Ce=l[7])*ie,A[5]=Be*m+G*E+le*O+Ce*he,A[6]=Be*y+G*S+le*j+Ce*be,A[7]=Be*v+G*P+le*K+Ce*Ne,A[8]=(Be=l[8])*h+(G=l[9])*C+(le=l[10])*k+(Ce=l[11])*ie,A[9]=Be*m+G*E+le*O+Ce*he,A[10]=Be*y+G*S+le*j+Ce*be,A[11]=Be*v+G*P+le*K+Ce*Ne,A[12]=(Be=l[12])*h+(G=l[13])*C+(le=l[14])*k+(Ce=l[15])*ie,A[13]=Be*m+G*E+le*O+Ce*he,A[14]=Be*y+G*S+le*j+Ce*be,A[15]=Be*v+G*P+le*K+Ce*Ne,A},u.O=function(A,r){const l={};for(let h=0;h<r.length;h++){const m=r[h];m in A&&(l[m]=A[m])}return l},u.P=N,u.Q=gA,u.R=Un,u.S=R_,u.T=Uu,u.U=M_,u.V=Ae,u.W=ce,u.X=gt,u.Y=En,u.Z=xt,u._=s,u.a=ha,u.a$=function(A,r,l){var h=Math.sin(l),m=Math.cos(l),y=r[4],v=r[5],C=r[6],E=r[7],S=r[8],P=r[9],k=r[10],O=r[11];return r!==A&&(A[0]=r[0],A[1]=r[1],A[2]=r[2],A[3]=r[3],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15]),A[4]=y*m+S*h,A[5]=v*m+P*h,A[6]=C*m+k*h,A[7]=E*m+O*h,A[8]=S*m-y*h,A[9]=P*m-v*h,A[10]=k*m-C*h,A[11]=O*m-E*h,A},u.a0=25,u.a1=n2,u.a2=A=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(l=>{r.onloadstart=()=>{l(r)};for(const h of A){const m=window.document.createElement("source");va(h)||(r.crossOrigin="Anonymous"),m.src=h,r.appendChild(m)}})},u.a3=He,u.a4=function(){return _t++},u.a5=U,u.a6=Pc,u.a7=du,u.a8=Ks,u.a9=Y_,u.aA=function(A,r,l,h,m=!1){if(!l[0]&&!l[1])return[0,0];const y=m?h==="map"?-A.bearingInRadians:0:h==="viewport"?A.bearingInRadians:0;if(y){const v=Math.sin(y),C=Math.cos(y);l=[l[0]*C-l[1]*v,l[0]*v+l[1]*C]}return[m?l[0]:Mt(r,l[0],A.zoom),m?l[1]:Mt(r,l[1],A.zoom)]},u.aC=Wp,u.aD=o2,u.aE=qp,u.aF=A2,u.aG=Da,u.aH=Cf,u.aI=xe,u.aJ=bi,u.aK=Ut,u.aL=bt,u.aM=fa,u.aN=U_,u.aO=function(A,r,l){return A[0]=r[0]*l,A[1]=r[1]*l,A[2]=r[2]*l,A},u.aP=function(A,r,l){return A[0]=r[0]+l[0],A[1]=r[1]+l[1],A[2]=r[2]+l[2],A},u.aQ=function(A){var r=new oe(3);return r[0]=A[0],r[1]=A[1],r[2]=A[2],r},u.aR=function(A,r,l){return A[0]=r[0]*l[0],A[1]=r[1]*l[1],A[2]=r[2]*l[2],A[3]=r[3]*l[3],A},u.aS=function(A,r,l){return A[0]=r[0]-l[0],A[1]=r[1]-l[1],A[2]=r[2]-l[2],A},u.aT=function(A,r){var l=r[0],h=r[1],m=r[2],y=l*l+h*h+m*m;return y>0&&(y=1/Math.sqrt(y)),A[0]=r[0]*y,A[1]=r[1]*y,A[2]=r[2]*y,A},u.aU=function(A,r,l){var h=r[0],m=r[1],y=r[2],v=l[0],C=l[1],E=l[2];return A[0]=m*E-y*C,A[1]=y*v-h*E,A[2]=h*C-m*v,A},u.aV=function(A,r){return A[0]*r[0]+A[1]*r[1]+A[2]*r[2]},u.aW=F_,u.aX=Qc,u.aY=function(A,r,l,h,m){var y,v=1/Math.tan(r/2);return A[0]=v/l,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=v,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,m!=null&&m!==1/0?(A[10]=(m+h)*(y=1/(h-m)),A[14]=2*m*h*y):(A[10]=-1,A[14]=-2*h),A},u.aZ=function(A){var r=new oe(16);return r[0]=A[0],r[1]=A[1],r[2]=A[2],r[3]=A[3],r[4]=A[4],r[5]=A[5],r[6]=A[6],r[7]=A[7],r[8]=A[8],r[9]=A[9],r[10]=A[10],r[11]=A[11],r[12]=A[12],r[13]=A[13],r[14]=A[14],r[15]=A[15],r},u.a_=function(A,r,l){var h=Math.sin(l),m=Math.cos(l),y=r[0],v=r[1],C=r[2],E=r[3],S=r[4],P=r[5],k=r[6],O=r[7];return r!==A&&(A[8]=r[8],A[9]=r[9],A[10]=r[10],A[11]=r[11],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15]),A[0]=y*m+S*h,A[1]=v*m+P*h,A[2]=C*m+k*h,A[3]=E*m+O*h,A[4]=S*m-y*h,A[5]=P*m-v*h,A[6]=k*m-C*h,A[7]=O*m-E*h,A},u.aa=function(A){const r={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,m,y)=>{const v=m||y;return r[h]=!v||v.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r},u.ab=function(A){return A*Math.PI/180},u.ac=function(A){return Math.pow(2,A)},u.ad=H,u.ae=tt,u.af=85.051129,u.ag=I_,u.ah=function(A){return Math.log(A)/Math.LN2},u.ai=function(A){var r=A[0],l=A[1];return r*r+l*l},u.aj=function(A,r){const l=[];for(const h in A)h in r||l.push(h);return l},u.ak=function(A,r){let l=0,h=0;if(A.kind==="constant")h=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:v}=A,C=m?tt(Vr.interpolationFactor(m,r,y,v),0,1):0;A.kind==="camera"?h=ua.number(A.minSize,A.maxSize,C):l=C}return{uSizeT:l,uSize:h}},u.am=function(A,{uSize:r,uSizeT:l},{lowerSize:h,upperSize:m}){return A.kind==="source"?h/$s:A.kind==="composite"?ua.number(h/$s,m/$s,l):r},u.an=function(A,r){var l=r[0],h=r[1],m=r[2],y=r[3],v=r[4],C=r[5],E=r[6],S=r[7],P=r[8],k=r[9],O=r[10],j=r[11],K=r[12],ie=r[13],he=r[14],be=r[15],Ne=l*C-h*v,Be=l*E-m*v,G=l*S-y*v,le=h*E-m*C,Ce=h*S-y*C,$e=m*S-y*E,vt=P*ie-k*K,it=P*he-O*K,nt=P*be-j*K,Rt=k*he-O*ie,wt=k*be-j*ie,Et=O*be-j*he,lt=Ne*Et-Be*wt+G*Rt+le*nt-Ce*it+$e*vt;return lt?(A[0]=(C*Et-E*wt+S*Rt)*(lt=1/lt),A[1]=(m*wt-h*Et-y*Rt)*lt,A[2]=(ie*$e-he*Ce+be*le)*lt,A[3]=(O*Ce-k*$e-j*le)*lt,A[4]=(E*nt-v*Et-S*it)*lt,A[5]=(l*Et-m*nt+y*it)*lt,A[6]=(he*G-K*$e-be*Be)*lt,A[7]=(P*$e-O*G+j*Be)*lt,A[8]=(v*wt-C*nt+S*vt)*lt,A[9]=(h*nt-l*wt-y*vt)*lt,A[10]=(K*Ce-ie*G+be*Ne)*lt,A[11]=(k*G-P*Ce-j*Ne)*lt,A[12]=(C*it-v*Rt-E*vt)*lt,A[13]=(l*Rt-h*it+m*vt)*lt,A[14]=(ie*Be-K*le-he*Ne)*lt,A[15]=(P*le-k*Be+O*Ne)*lt,A):null},u.ao=at,u.ap=function(A){return Math.hypot(A[0],A[1])},u.aq=function(A){return A[0]=0,A[1]=0,A},u.ar=function(A,r,l){return A[0]=r[0]*l,A[1]=r[1]*l,A},u.as=Jp,u.at=Ve,u.au=function(A,r,l,h){const m=r.y-A.y,y=r.x-A.x,v=h.y-l.y,C=h.x-l.x,E=v*y-C*m;if(E===0)return null;const S=(C*(A.y-l.y)-v*(A.x-l.x))/E;return new N(A.x+S*y,A.y+S*m)},u.av=Q_,u.aw=Du,u.ax=function(A){let r=1/0,l=1/0,h=-1/0,m=-1/0;for(const y of A)r=Math.min(r,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return[r,l,h,m]},u.ay=Wa,u.az=Mt,u.b=pi,u.b$=function(A,r){var l=A[0],h=A[1],m=A[2],y=A[3],v=A[4],C=A[5],E=A[6],S=A[7],P=A[8],k=A[9],O=A[10],j=A[11],K=A[12],ie=A[13],he=A[14],be=A[15],Ne=r[0],Be=r[1],G=r[2],le=r[3],Ce=r[4],$e=r[5],vt=r[6],it=r[7],nt=r[8],Rt=r[9],wt=r[10],Et=r[11],lt=r[12],Vt=r[13],fi=r[14],ui=r[15];return Math.abs(l-Ne)<=ue*Math.max(1,Math.abs(l),Math.abs(Ne))&&Math.abs(h-Be)<=ue*Math.max(1,Math.abs(h),Math.abs(Be))&&Math.abs(m-G)<=ue*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(y-le)<=ue*Math.max(1,Math.abs(y),Math.abs(le))&&Math.abs(v-Ce)<=ue*Math.max(1,Math.abs(v),Math.abs(Ce))&&Math.abs(C-$e)<=ue*Math.max(1,Math.abs(C),Math.abs($e))&&Math.abs(E-vt)<=ue*Math.max(1,Math.abs(E),Math.abs(vt))&&Math.abs(S-it)<=ue*Math.max(1,Math.abs(S),Math.abs(it))&&Math.abs(P-nt)<=ue*Math.max(1,Math.abs(P),Math.abs(nt))&&Math.abs(k-Rt)<=ue*Math.max(1,Math.abs(k),Math.abs(Rt))&&Math.abs(O-wt)<=ue*Math.max(1,Math.abs(O),Math.abs(wt))&&Math.abs(j-Et)<=ue*Math.max(1,Math.abs(j),Math.abs(Et))&&Math.abs(K-lt)<=ue*Math.max(1,Math.abs(K),Math.abs(lt))&&Math.abs(ie-Vt)<=ue*Math.max(1,Math.abs(ie),Math.abs(Vt))&&Math.abs(he-fi)<=ue*Math.max(1,Math.abs(he),Math.abs(fi))&&Math.abs(be-ui)<=ue*Math.max(1,Math.abs(be),Math.abs(ui))},u.b0=function(){const A=new Float32Array(16);return H(A),A},u.b1=function(){const A=new Float64Array(16);return H(A),A},u.b2=function(){return new Float64Array(16)},u.b3=function(A,r,l){const h=new Float64Array(4);return function(m,y,v,C){var E=.5*Math.PI/180;y*=E,v*=E,C*=E;var S=Math.sin(y),P=Math.cos(y),k=Math.sin(v),O=Math.cos(v),j=Math.sin(C),K=Math.cos(C);m[0]=S*O*K-P*k*j,m[1]=P*k*K+S*O*j,m[2]=P*O*j-S*k*K,m[3]=P*O*K+S*k*j}(h,A,r-90,l),h},u.b4=function(A,r,l,h){var m,y,v,C,E,S=r[0],P=r[1],k=r[2],O=r[3],j=l[0],K=l[1],ie=l[2],he=l[3];return(y=S*j+P*K+k*ie+O*he)<0&&(y=-y,j=-j,K=-K,ie=-ie,he=-he),1-y>ue?(m=Math.acos(y),v=Math.sin(m),C=Math.sin((1-h)*m)/v,E=Math.sin(h*m)/v):(C=1-h,E=h),A[0]=C*S+E*j,A[1]=C*P+E*K,A[2]=C*k+E*ie,A[3]=C*O+E*he,A},u.b5=function(A){const r=new Float64Array(9);var l,h,m,y,v,C,E,S,P,k,O,j,K,ie,he,be,Ne,Be;k=(m=(h=A)[0])*(E=m+m),O=(y=h[1])*E,K=(v=h[2])*E,ie=v*(S=y+y),be=(C=h[3])*E,Ne=C*S,Be=C*(P=v+v),(l=r)[0]=1-(j=y*S)-(he=v*P),l[3]=O-Be,l[6]=K+Ne,l[1]=O+Be,l[4]=1-k-he,l[7]=ie-be,l[2]=K-Ne,l[5]=ie+be,l[8]=1-k-j;const G=fa(-Math.asin(tt(r[2],-1,1)));let le,Ce;return Math.hypot(r[5],r[8])<.001?(le=0,Ce=-fa(Math.atan2(r[3],r[4]))):(le=fa(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),Ce=fa(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:le,pitch:G+90,bearing:Ce}},u.b6=function(A,r){return A.roll==r.roll&&A.pitch==r.pitch&&A.bearing==r.bearing},u.b7=Fi,u.b8=wo,u.b9=Nc,u.bA=function(A){if(A.type==="custom")return new Jw(A);switch(A.type){case"background":return new $w(A);case"circle":return new Xx(A);case"fill":return new cw(A);case"fill-extrusion":return new _w(A);case"heatmap":return new Gx(A);case"hillshade":return new Kx(A);case"line":return new Mw(A);case"raster":return new Ww(A);case"symbol":return new Tf(A)}},u.bB=Ct,u.bC=function(A,r){if(!A)return[{command:"setStyle",args:[r]}];let l=[];try{if(!Ie(A.version,r.version))return[{command:"setStyle",args:[r]}];Ie(A.center,r.center)||l.push({command:"setCenter",args:[r.center]}),Ie(A.centerAltitude,r.centerAltitude)||l.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Ie(A.zoom,r.zoom)||l.push({command:"setZoom",args:[r.zoom]}),Ie(A.bearing,r.bearing)||l.push({command:"setBearing",args:[r.bearing]}),Ie(A.pitch,r.pitch)||l.push({command:"setPitch",args:[r.pitch]}),Ie(A.roll,r.roll)||l.push({command:"setRoll",args:[r.roll]}),Ie(A.sprite,r.sprite)||l.push({command:"setSprite",args:[r.sprite]}),Ie(A.glyphs,r.glyphs)||l.push({command:"setGlyphs",args:[r.glyphs]}),Ie(A.transition,r.transition)||l.push({command:"setTransition",args:[r.transition]}),Ie(A.light,r.light)||l.push({command:"setLight",args:[r.light]}),Ie(A.terrain,r.terrain)||l.push({command:"setTerrain",args:[r.terrain]}),Ie(A.sky,r.sky)||l.push({command:"setSky",args:[r.sky]}),Ie(A.projection,r.projection)||l.push({command:"setProjection",args:[r.projection]});const h={},m=[];(function(v,C,E,S){let P;for(P in C=C||{},v=v||{})Object.prototype.hasOwnProperty.call(v,P)&&(Object.prototype.hasOwnProperty.call(C,P)||ne(P,E,S));for(P in C)Object.prototype.hasOwnProperty.call(C,P)&&(Object.prototype.hasOwnProperty.call(v,P)?Ie(v[P],C[P])||(v[P].type==="geojson"&&C[P].type==="geojson"&&Ue(v,C,P)?We(E,{command:"setGeoJSONSourceData",args:[P,C[P].data]}):Se(P,C,E,S)):Te(P,C,E))})(A.sources,r.sources,m,h);const y=[];A.layers&&A.layers.forEach(v=>{"source"in v&&h[v.source]?l.push({command:"removeLayer",args:[v.id]}):y.push(v)}),l=l.concat(m),function(v,C,E){C=C||[];const S=(v=v||[]).map(ct),P=C.map(ct),k=v.reduce(Bt,{}),O=C.reduce(Bt,{}),j=S.slice(),K=Object.create(null);let ie,he,be,Ne,Be;for(let G=0,le=0;G<S.length;G++)ie=S[G],Object.prototype.hasOwnProperty.call(O,ie)?le++:(We(E,{command:"removeLayer",args:[ie]}),j.splice(j.indexOf(ie,le),1));for(let G=0,le=0;G<P.length;G++)ie=P[P.length-1-G],j[j.length-1-G]!==ie&&(Object.prototype.hasOwnProperty.call(k,ie)?(We(E,{command:"removeLayer",args:[ie]}),j.splice(j.lastIndexOf(ie,j.length-le),1)):le++,Ne=j[j.length-G],We(E,{command:"addLayer",args:[O[ie],Ne]}),j.splice(j.length-G,0,ie),K[ie]=!0);for(let G=0;G<P.length;G++)if(ie=P[G],he=k[ie],be=O[ie],!K[ie]&&!Ie(he,be))if(Ie(he.source,be.source)&&Ie(he["source-layer"],be["source-layer"])&&Ie(he.type,be.type)){for(Be in Ze(he.layout,be.layout,E,ie,null,"setLayoutProperty"),Ze(he.paint,be.paint,E,ie,null,"setPaintProperty"),Ie(he.filter,be.filter)||We(E,{command:"setFilter",args:[ie,be.filter]}),Ie(he.minzoom,be.minzoom)&&Ie(he.maxzoom,be.maxzoom)||We(E,{command:"setLayerZoomRange",args:[ie,be.minzoom,be.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Ze(he[Be],be[Be],E,ie,Be.slice(6),"setPaintProperty"):Ie(he[Be],be[Be])||We(E,{command:"setLayerProperty",args:[ie,Be,be[Be]]}));for(Be in be)Object.prototype.hasOwnProperty.call(be,Be)&&!Object.prototype.hasOwnProperty.call(he,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Ze(he[Be],be[Be],E,ie,Be.slice(6),"setPaintProperty"):Ie(he[Be],be[Be])||We(E,{command:"setLayerProperty",args:[ie,Be,be[Be]]}))}else We(E,{command:"removeLayer",args:[ie]}),Ne=j[j.lastIndexOf(ie)+1],We(E,{command:"addLayer",args:[be,Ne]})}(y,r.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[r]}]}return l},u.bD=function(A){const r=[],l=A.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),A.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},u.bE=function A(r,l){if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(let h=0;h<r.length;h++)if(!A(r[h],l[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&l!==null){if(typeof l!="object"||Object.keys(r).length!==Object.keys(l).length)return!1;for(const h in r)if(!A(r[h],l[h]))return!1;return!0}return r===l},u.bF=zt,u.bG=Qt,u.bH=class extends Jn{constructor(A,r){super(A,r),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},u.bI=an,u.bJ=class extends Jn{constructor(A,r){super(A,r),this.current=js}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let r=1;r<16;r++)if(A[r]!==this.current[r]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},u.bK=Bo,u.bL=class extends Jn{constructor(A,r){super(A,r),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},u.bM=class extends Jn{constructor(A,r){super(A,r),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},u.bN=q,u.bO=function(A,r){var l=Math.sin(r),h=Math.cos(r);return A[0]=h,A[1]=l,A[2]=0,A[3]=-l,A[4]=h,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},u.bP=function(A,r,l){var h=r[0],m=r[1],y=r[2];return A[0]=h*l[0]+m*l[3]+y*l[6],A[1]=h*l[1]+m*l[4]+y*l[7],A[2]=h*l[2]+m*l[5]+y*l[8],A},u.bQ=function(A,r,l,h,m,y,v){var C=1/(r-l),E=1/(h-m),S=1/(y-v);return A[0]=-2*C,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*E,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*S,A[11]=0,A[12]=(r+l)*C,A[13]=(m+h)*E,A[14]=(v+y)*S,A[15]=1,A},u.bR=class extends xo{},u.bS=Ew,u.bT=class extends Fc{},u.bU=Sp,u.bV=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},u.bW=S4,u.bX=function(A,r,l){var h=r[0],m=r[1],y=r[2],v=l[3]*h+l[7]*m+l[11]*y+l[15];return A[0]=(l[0]*h+l[4]*m+l[8]*y+l[12])/(v=v||1),A[1]=(l[1]*h+l[5]*m+l[9]*y+l[13])/v,A[2]=(l[2]*h+l[6]*m+l[10]*y+l[14])/v,A},u.bY=class extends _s{},u.bZ=class extends p{},u.b_=function(A,r){return A[0]===r[0]&&A[1]===r[1]&&A[2]===r[2]&&A[3]===r[3]&&A[4]===r[4]&&A[5]===r[5]&&A[6]===r[6]&&A[7]===r[7]&&A[8]===r[8]&&A[9]===r[9]&&A[10]===r[10]&&A[11]===r[11]&&A[12]===r[12]&&A[13]===r[13]&&A[14]===r[14]&&A[15]===r[15]},u.ba=ju,u.bb=Yc,u.bc=rt,u.bd=pt,u.be=Qr,u.bf=function(A,r,l,h,m){return rt(h,m,tt((A-r)/(l-r),0,1))},u.bg=Yt,u.bh=function(){return new Float64Array(3)},u.bi=function(A,r,l,h){return A[0]=r[0]+l[0]*h,A[1]=r[1]+l[1]*h,A[2]=r[2]+l[2]*h,A},u.bj=we,u.bk=function(){return new Float64Array(4)},u.bl=function(A,r,l,h){var m=[],y=[];return m[0]=r[0]-l[0],m[1]=r[1]-l[1],m[2]=r[2]-l[2],y[0]=m[0]*Math.cos(h)-m[1]*Math.sin(h),y[1]=m[0]*Math.sin(h)+m[1]*Math.cos(h),y[2]=m[2],A[0]=y[0]+l[0],A[1]=y[1]+l[1],A[2]=y[2]+l[2],A},u.bm=function(A,r,l,h){var m=[],y=[];return m[0]=r[0]-l[0],m[1]=r[1]-l[1],m[2]=r[2]-l[2],y[0]=m[0],y[1]=m[1]*Math.cos(h)-m[2]*Math.sin(h),y[2]=m[1]*Math.sin(h)+m[2]*Math.cos(h),A[0]=y[0]+l[0],A[1]=y[1]+l[1],A[2]=y[2]+l[2],A},u.bn=function(A,r,l,h){var m=[],y=[];return m[0]=r[0]-l[0],m[1]=r[1]-l[1],m[2]=r[2]-l[2],y[0]=m[2]*Math.sin(h)+m[0]*Math.cos(h),y[1]=m[1],y[2]=m[2]*Math.cos(h)-m[0]*Math.sin(h),A[0]=y[0]+l[0],A[1]=y[1]+l[1],A[2]=y[2]+l[2],A},u.bo=de,u.bp=function(A,r,l){var h=Math.sin(l),m=Math.cos(l),y=r[0],v=r[1],C=r[2],E=r[3],S=r[8],P=r[9],k=r[10],O=r[11];return r!==A&&(A[4]=r[4],A[5]=r[5],A[6]=r[6],A[7]=r[7],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15]),A[0]=y*m-S*h,A[1]=v*m-P*h,A[2]=C*m-k*h,A[3]=E*m-O*h,A[8]=y*h+S*m,A[9]=v*h+P*m,A[10]=C*h+k*m,A[11]=E*h+O*m,A},u.bq=function(A,r){const l=Yt(A,360),h=Yt(r,360),m=h-l,y=h>l?m-360:m+360;return Math.abs(m)<Math.abs(y)?m:y},u.br=function(A){return A[0]=0,A[1]=0,A[2]=0,A},u.bs=function(A,r,l,h){const m=Math.sqrt(A*A+r*r),y=Math.sqrt(l*l+h*h);A/=m,r/=m,l/=y,h/=y;const v=Math.acos(A*l+r*h);return-r*l+A*h>0?v:-v},u.bt=function(A,r){return A[0]*r[0]+A[1]*r[1]+A[2]*r[2]+A[3]},u.bu=a2,u.bv=function(A,r){const l=Yt(A,2*Math.PI),h=Yt(r,2*Math.PI);return Math.min(Math.abs(l-h),Math.abs(l-h+2*Math.PI),Math.abs(l-h-2*Math.PI))},u.bw=function(){const A={},r=se.$version;for(const l in se.$root){const h=se.$root[l];if(h.required){let m=null;m=l==="version"?r:h.type==="array"?[]:{},m!=null&&(A[l]=m)}}return A},u.bx=fl,u.by=sa,u.bz=function(A){A=A.slice();const r=Object.create(null);for(let l=0;l<A.length;l++)r[A[l].id]=A[l];for(let l=0;l<A.length;l++)"ref"in A[l]&&(A[l]=Ge(A[l],r[A[l].ref]));return A},u.c=ji,u.c0=function(A,r){return A[0]=r[0],A[1]=r[1],A[2]=r[2],A[3]=r[3],A[4]=r[4],A[5]=r[5],A[6]=r[6],A[7]=r[7],A[8]=r[8],A[9]=r[9],A[10]=r[10],A[11]=r[11],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15],A},u.c1=A=>A.type==="symbol",u.c2=A=>A.type==="circle",u.c3=A=>A.type==="heatmap",u.c4=A=>A.type==="line",u.c5=A=>A.type==="fill",u.c6=A=>A.type==="fill-extrusion",u.c7=A=>A.type==="hillshade",u.c8=A=>A.type==="raster",u.c9=A=>A.type==="background",u.cA=$u,u.cB=Gp,u.cC=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},u.cD=function(A,r,l,h,m){return s(this,void 0,void 0,function*(){if(ce())try{return yield gt(A,r,l,h,m)}catch{}return function(y,v,C,E,S){const P=y.width,k=y.height;oi&&qi||(oi=new OffscreenCanvas(P,k),qi=oi.getContext("2d",{willReadFrequently:!0})),oi.width=P,oi.height=k,qi.drawImage(y,0,0,P,k);const O=qi.getImageData(v,C,E,S);return qi.clearRect(0,0,P,k),O.data}(A,r,l,h,m)})},u.cE=T_,u.cF=x,u.cG=R,u.cH=$4,u.cI=A_,u.cJ=ll,u.cK=Vs,u.ca=A=>A.type==="custom",u.cb=je,u.cc=function(A,r,l){const h=et(r.x-l.x,r.y-l.y),m=et(A.x-l.x,A.y-l.y);var y,v;return fa(Math.atan2(h[0]*m[1]-h[1]*m[0],(y=h)[0]*(v=m)[0]+y[1]*v[1]))},u.cd=Qe,u.ce=function(A,r){return ea[r]&&(A instanceof MouseEvent||A instanceof WheelEvent)},u.cf=function(A,r){return Ri[r]&&"touches"in A},u.cg=function(A){return Ri[A]||ea[A]},u.ch=function(A,r,l){var h=r[0],m=r[1];return A[0]=l[0]*h+l[4]*m+l[12],A[1]=l[1]*h+l[5]*m+l[13],A},u.ci=function(A,r){const{x:l,y:h}=id.fromLngLat(r);return!(A<0||A>25||h<0||h>=1||l<0||l>=1)},u.cj=function(A,r){return A[0]=r[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=r[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=r[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},u.ck=class extends Ic{},u.cl=c9,u.cn=function(A){return A.message===wi},u.co=Xa,u.cp=function(A,r){ha.REGISTERED_PROTOCOLS[A]=r},u.cq=function(A){delete ha.REGISTERED_PROTOCOLS[A]},u.cr=function(A,r){const l={};for(let m=0;m<A.length;m++){const y=r&&r[A[m].id]||xc(A[m]);r&&(r[A[m].id]=y);let v=l[y];v||(v=l[y]=[]),v.push(A[m])}const h=[];for(const m in l)h.push(l[m]);return h},u.cs=Ht,u.ct=S_,u.cu=N_,u.cv=c_,u.cw=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=xt/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;const r=A.bucket.layers[0],l=r.layout,h=r._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new ga(A.bucket.zoom+1),A.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new ga(A.bucket.zoom+1),A.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new ga(18))};if(A.bucket.textSizeData.kind==="composite"){const{minZoom:S,maxZoom:P}=A.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ga(S),A.canonical),h["text-size"].possiblyEvaluate(new ga(P),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){const{minZoom:S,maxZoom:P}=A.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ga(S),A.canonical),h["icon-size"].possiblyEvaluate(new ga(P),A.canonical)]}const y=l.get("text-line-height")*Wa,v=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",C=l.get("text-keep-upright"),E=l.get("text-size");for(const S of A.bucket.features){const P=l.get("text-font").evaluate(S,{},A.canonical).join(","),k=E.evaluate(S,{},A.canonical),O=m.layoutTextSize.evaluate(S,{},A.canonical),j=m.layoutIconSize.evaluate(S,{},A.canonical),K={horizontal:{},vertical:void 0},ie=S.text;let he,be=[0,0];if(ie){const G=ie.toString(),le=l.get("text-letter-spacing").evaluate(S,{},A.canonical)*Wa,Ce=lf(G)?le:0,$e=l.get("text-anchor").evaluate(S,{},A.canonical),vt=G_(r,S,A.canonical);if(!vt){const wt=l.get("text-radial-offset").evaluate(S,{},A.canonical);be=wt?V_($e,[wt*Wa,s2]):l.get("text-offset").evaluate(S,{},A.canonical).map(Et=>Et*Wa)}let it=v?"center":l.get("text-justify").evaluate(S,{},A.canonical);const nt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(S,{},A.canonical)*Wa:1/0,Rt=()=>{A.bucket.allowVerticalPlacement&&wc(G)&&(K.vertical=Uf(ie,A.glyphMap,A.glyphPositions,A.imagePositions,P,nt,y,$e,"left",Ce,be,u.al.vertical,!0,O,k))};if(!v&&vt){const wt=new Set;if(it==="auto")for(let lt=0;lt<vt.values.length;lt+=2)wt.add(o2(vt.values[lt]));else wt.add(it);let Et=!1;for(const lt of wt)if(!K.horizontal[lt])if(Et)K.horizontal[lt]=K.horizontal[0];else{const Vt=Uf(ie,A.glyphMap,A.glyphPositions,A.imagePositions,P,nt,y,"center",lt,Ce,be,u.al.horizontal,!1,O,k);Vt&&(K.horizontal[lt]=Vt,Et=Vt.positionedLines.length===1)}Rt()}else{it==="auto"&&(it=o2($e));const wt=Uf(ie,A.glyphMap,A.glyphPositions,A.imagePositions,P,nt,y,$e,it,Ce,be,u.al.horizontal,!1,O,k);wt&&(K.horizontal[it]=wt),Rt(),wc(G)&&v&&C&&(K.vertical=Uf(ie,A.glyphMap,A.glyphPositions,A.imagePositions,P,nt,y,$e,it,Ce,be,u.al.vertical,!1,O,k))}}let Ne=!1;if(S.icon&&S.icon.name){const G=A.imageMap[S.icon.name];G&&(he=Xw(A.imagePositions[S.icon.name],l.get("icon-offset").evaluate(S,{},A.canonical),l.get("icon-anchor").evaluate(S,{},A.canonical)),Ne=!!G.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=Ne:A.bucket.sdfIcons!==Ne&&Ai("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(G.pixelRatio!==A.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}const Be=K_(K.horizontal)||K.vertical;A.bucket.iconsInText=!!Be&&Be.iconsInText,(Be||he)&&A9(A.bucket,S,K,he,A.imageMap,m,O,j,be,Ne,A.canonical,A.subdivisionGranularity)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},u.cx=Op,u.cy=Qp,u.cz=Hp,u.d=va,u.e=dt,u.f=A=>s(void 0,void 0,void 0,function*(){if(A.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(A)],{type:"image/png"});try{return createImageBitmap(r)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),u.g=Cr,u.h=A=>new Promise((r,l)=>{const h=new Image;h.onload=()=>{r(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Kt})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(A)],{type:"image/png"});h.src=A.byteLength?URL.createObjectURL(m):Kt}),u.i=Dt,u.j=(A,r)=>na(dt(A,{type:"json"}),r),u.k=fe,u.l=re,u.m=na,u.n=(A,r)=>na(dt(A,{type:"arrayBuffer"}),r),u.o=function(A){return new Gp(A).readFields(Sw,[])},u.p=l_,u.q=Hu,u.r=jr,u.s=Si,u.t=sf,u.u=Ni,u.v=se,u.w=Ai,u.x=of,u.y=Kn,u.z=function([A,r,l]){return r+=90,r*=Math.PI/180,l*=Math.PI/180,{x:A*Math.cos(r)*Math.sin(l),y:A*Math.sin(r)*Math.sin(l),z:A*Math.cos(l)}}}),c("worker",["./shared"],function(u){class s{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,re){for(const ve of ae){this._layerConfigs[ve.id]=ve;const se=this._layers[ve.id]=u.bA(ve);se._featureFilter=u.a7(se.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(const ve of re)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};const fe=u.cr(Object.values(this._layerConfigs),this.keyCache);for(const ve of fe){const se=ve.map(ne=>this._layers[ne.id]),ke=se[0];if(ke.visibility==="none")continue;const Ge=ke.source||"";let Ie=this.familiesBySource[Ge];Ie||(Ie=this.familiesBySource[Ge]={});const We=ke.sourceLayer||"_geojsonTileLayer";let Te=Ie[We];Te||(Te=Ie[We]=[]),Te.push(se)}}}class x{constructor(ae){const re={},fe=[];for(const Ge in ae){const Ie=ae[Ge],We=re[Ge]={};for(const Te in Ie){const ne=Ie[+Te];if(!ne||ne.bitmap.width===0||ne.bitmap.height===0)continue;const Se={x:0,y:0,w:ne.bitmap.width+2,h:ne.bitmap.height+2};fe.push(Se),We[Te]={rect:Se,metrics:ne.metrics}}}const{w:ve,h:se}=u.p(fe),ke=new u.q({width:ve||1,height:se||1});for(const Ge in ae){const Ie=ae[Ge];for(const We in Ie){const Te=Ie[+We];if(!Te||Te.bitmap.width===0||Te.bitmap.height===0)continue;const ne=re[Ge][We].rect;u.q.copy(Te.bitmap,ke,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Te.bitmap)}}this.image=ke,this.positions=re}}u.cs("GlyphAtlas",x);class B{constructor(ae){this.tileID=new u.Y(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,re,fe,ve,se){return u._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new u.a5;const ke=new u.ct(Object.keys(ae.layers).sort()),Ge=new u.cu(this.tileID,this.promoteId);Ge.bucketLayerIDs=[];const Ie={},We={featureIndex:Ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe,subdivisionGranularity:se},Te=re.familiesBySource[this.source];for(const Je in Te){const Tt=ae.layers[Je];if(!Tt)continue;Tt.version===1&&u.w(`Vector tile source "${this.source}" layer "${Je}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ot=ke.encode(Je),ta=[];for(let oa=0;oa<Tt.length;oa++){const Bi=Tt.feature(oa),Gt=Ge.getId(Bi,Je);ta.push({feature:Bi,id:Gt,index:oa,sourceLayerIndex:Ot})}for(const oa of Te[Je]){const Bi=oa[0];Bi.source!==this.source&&u.w(`layer.source = ${Bi.source} does not equal this.source = ${this.source}`),Bi.minzoom&&this.zoom<Math.floor(Bi.minzoom)||Bi.maxzoom&&this.zoom>=Bi.maxzoom||Bi.visibility!=="none"&&(I(oa,this.zoom,fe),(Ie[Bi.id]=Bi.createBucket({index:Ge.bucketLayerIDs.length,layers:oa,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ot,sourceID:this.source})).populate(ta,We,this.tileID.canonical),Ge.bucketLayerIDs.push(oa.map(Gt=>Gt.id)))}}const ne=u.bF(We.glyphDependencies,Je=>Object.keys(Je).map(Number));this.inFlightDependencies.forEach(Je=>Je==null?void 0:Je.abort()),this.inFlightDependencies=[];let Se=Promise.resolve({});if(Object.keys(ne).length){const Je=new AbortController;this.inFlightDependencies.push(Je),Se=ve.sendAsync({type:"GG",data:{stacks:ne,source:this.source,tileID:this.tileID,type:"glyphs"}},Je)}const Ue=Object.keys(We.iconDependencies);let Ze=Promise.resolve({});if(Ue.length){const Je=new AbortController;this.inFlightDependencies.push(Je),Ze=ve.sendAsync({type:"GI",data:{icons:Ue,source:this.source,tileID:this.tileID,type:"icons"}},Je)}const ct=Object.keys(We.patternDependencies);let Bt=Promise.resolve({});if(ct.length){const Je=new AbortController;this.inFlightDependencies.push(Je),Bt=ve.sendAsync({type:"GI",data:{icons:ct,source:this.source,tileID:this.tileID,type:"patterns"}},Je)}const[He,mt,Wt]=yield Promise.all([Se,Ze,Bt]),ei=new x(He),ai=new u.cv(mt,Wt);for(const Je in Ie){const Tt=Ie[Je];Tt instanceof u.a6?(I(Tt.layers,this.zoom,fe),u.cw({bucket:Tt,glyphMap:He,glyphPositions:ei.positions,imageMap:mt,imagePositions:ai.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:We.subdivisionGranularity})):Tt.hasPattern&&(Tt instanceof u.cx||Tt instanceof u.cy||Tt instanceof u.cz)&&(I(Tt.layers,this.zoom,fe),Tt.addFeatures(We,this.tileID.canonical,ai.patternPositions))}return this.status="done",{buckets:Object.values(Ie).filter(Je=>!Je.isEmpty()),featureIndex:Ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ei.image,imageAtlas:ai,glyphMap:this.returnDependencies?He:null,iconMap:this.returnDependencies?mt:null,glyphPositions:this.returnDependencies?ei.positions:null}})}}function I(ze,ae,re){const fe=new u.C(ae);for(const ve of ze)ve.recalculate(fe,re)}class R{constructor(ae,re,fe){this.actor=ae,this.layerIndex=re,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,re){return u._(this,void 0,void 0,function*(){const fe=yield u.n(ae.request,re);try{return{vectorTile:new u.cA.VectorTile(new u.cB(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(ve){const se=new Uint8Array(fe.data);let ke=`Unable to parse the tile at ${ae.request.url}, `;throw ke+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ve.message}`,new Error(ke)}})}loadTile(ae){return u._(this,void 0,void 0,function*(){const re=ae.uid,fe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new u.cC(ae.request),ve=new B(ae);this.loading[re]=ve;const se=new AbortController;ve.abort=se;try{const ke=yield this.loadVectorTile(ae,se);if(delete this.loading[re],!ke)return null;const Ge=ke.rawData,Ie={};ke.expires&&(Ie.expires=ke.expires),ke.cacheControl&&(Ie.cacheControl=ke.cacheControl);const We={};if(fe){const ne=fe.finish();ne&&(We.resourceTiming=JSON.parse(JSON.stringify(ne)))}ve.vectorTile=ke.vectorTile;const Te=ve.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[re]=ve,this.fetching[re]={rawTileData:Ge,cacheControl:Ie,resourceTiming:We};try{const ne=yield Te;return u.e({rawTileData:Ge.slice(0)},ne,Ie,We)}finally{delete this.fetching[re]}}catch(ke){throw delete this.loading[re],ve.status="done",this.loaded[re]=ve,ke}})}reloadTile(ae){return u._(this,void 0,void 0,function*(){const re=ae.uid;if(!this.loaded||!this.loaded[re])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[re];if(fe.showCollisionBoxes=ae.showCollisionBoxes,fe.status==="parsing"){const ve=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let se;if(this.fetching[re]){const{rawTileData:ke,cacheControl:Ge,resourceTiming:Ie}=this.fetching[re];delete this.fetching[re],se=u.e({rawTileData:ke.slice(0)},ve,Ge,Ie)}else se=ve;return se}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return u._(this,void 0,void 0,function*(){const re=this.loading,fe=ae.uid;re&&re[fe]&&re[fe].abort&&(re[fe].abort.abort(),delete re[fe])})}removeTile(ae){return u._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class F{constructor(){this.loaded={}}loadTile(ae){return u._(this,void 0,void 0,function*(){const{uid:re,encoding:fe,rawImageData:ve,redFactor:se,greenFactor:ke,blueFactor:Ge,baseShift:Ie}=ae,We=ve.width+2,Te=ve.height+2,ne=u.b(ve)?new u.R({width:We,height:Te},yield u.cD(ve,-1,-1,We,Te)):ve,Se=new u.cE(re,ne,fe,se,ke,Ge,Ie);return this.loaded=this.loaded||{},this.loaded[re]=Se,Se})}removeTile(ae){const re=this.loaded,fe=ae.uid;re&&re[fe]&&delete re[fe]}}var M,N,D=function(){if(N)return M;function ze(re,fe){if(re.length!==0){ae(re[0],fe);for(var ve=1;ve<re.length;ve++)ae(re[ve],!fe)}}function ae(re,fe){for(var ve=0,se=0,ke=0,Ge=re.length,Ie=Ge-1;ke<Ge;Ie=ke++){var We=(re[ke][0]-re[Ie][0])*(re[Ie][1]+re[ke][1]),Te=ve+We;se+=Math.abs(ve)>=Math.abs(We)?ve-Te+We:We-Te+ve,ve=Te}ve+se>=0!=!!fe&&re.reverse()}return N=1,M=function re(fe,ve){var se,ke=fe&&fe.type;if(ke==="FeatureCollection")for(se=0;se<fe.features.length;se++)re(fe.features[se],ve);else if(ke==="GeometryCollection")for(se=0;se<fe.geometries.length;se++)re(fe.geometries[se],ve);else if(ke==="Feature")re(fe.geometry,ve);else if(ke==="Polygon")ze(fe.coordinates,ve);else if(ke==="MultiPolygon")for(se=0;se<fe.coordinates.length;se++)ze(fe.coordinates[se],ve);return fe}}(),V=u.cF(D);const X=u.cA.VectorTileFeature.prototype.toGeoJSON;class ee{constructor(ae){this._feature=ae,this.extent=u.Z,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const re of this._feature.geometry)ae.push([new u.P(re[0],re[1])]);return ae}{const ae=[];for(const re of this._feature.geometry){const fe=[];for(const ve of re)fe.push(new u.P(ve[0],ve[1]));ae.push(fe)}return ae}}toGeoJSON(ae,re,fe){return X.call(this,ae,re,fe)}}class Ae{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.Z,this.length=ae.length,this._features=ae}feature(ae){return new ee(this._features[ae])}}var ce,ue,oe,q={exports:{}},H=function(){if(oe)return q.exports;oe=1;var ze=u.cI(),ae=function(){if(ue)return ce;ue=1;var Te=u.cG(),ne=u.cH().VectorTileFeature;function Se(Ze,ct){this.options=ct||{},this.features=Ze,this.length=Ze.length}function Ue(Ze,ct){this.id=typeof Ze.id=="number"?Ze.id:void 0,this.type=Ze.type,this.rawGeometry=Ze.type===1?[Ze.geometry]:Ze.geometry,this.properties=Ze.tags,this.extent=ct||4096}return ce=Se,Se.prototype.feature=function(Ze){return new Ue(this.features[Ze],this.options.extent)},Ue.prototype.loadGeometry=function(){var Ze=this.rawGeometry;this.geometry=[];for(var ct=0;ct<Ze.length;ct++){for(var Bt=Ze[ct],He=[],mt=0;mt<Bt.length;mt++)He.push(new Te(Bt[mt][0],Bt[mt][1]));this.geometry.push(He)}return this.geometry},Ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ze=this.geometry,ct=1/0,Bt=-1/0,He=1/0,mt=-1/0,Wt=0;Wt<Ze.length;Wt++)for(var ei=Ze[Wt],ai=0;ai<ei.length;ai++){var Je=ei[ai];ct=Math.min(ct,Je.x),Bt=Math.max(Bt,Je.x),He=Math.min(He,Je.y),mt=Math.max(mt,Je.y)}return[ct,He,Bt,mt]},Ue.prototype.toGeoJSON=ne.prototype.toGeoJSON,ce}();function re(Te){var ne=new ze;return function(Se,Ue){for(var Ze in Se.layers)Ue.writeMessage(3,fe,Se.layers[Ze])}(Te,ne),ne.finish()}function fe(Te,ne){var Se;ne.writeVarintField(15,Te.version||1),ne.writeStringField(1,Te.name||""),ne.writeVarintField(5,Te.extent||4096);var Ue={keys:[],values:[],keycache:{},valuecache:{}};for(Se=0;Se<Te.length;Se++)Ue.feature=Te.feature(Se),ne.writeMessage(2,ve,Ue);var Ze=Ue.keys;for(Se=0;Se<Ze.length;Se++)ne.writeStringField(3,Ze[Se]);var ct=Ue.values;for(Se=0;Se<ct.length;Se++)ne.writeMessage(4,We,ct[Se])}function ve(Te,ne){var Se=Te.feature;Se.id!==void 0&&ne.writeVarintField(1,Se.id),ne.writeMessage(2,se,Te),ne.writeVarintField(3,Se.type),ne.writeMessage(4,Ie,Se)}function se(Te,ne){var Se=Te.feature,Ue=Te.keys,Ze=Te.values,ct=Te.keycache,Bt=Te.valuecache;for(var He in Se.properties){var mt=Se.properties[He],Wt=ct[He];if(mt!==null){Wt===void 0&&(Ue.push(He),ct[He]=Wt=Ue.length-1),ne.writeVarint(Wt);var ei=typeof mt;ei!=="string"&&ei!=="boolean"&&ei!=="number"&&(mt=JSON.stringify(mt));var ai=ei+":"+mt,Je=Bt[ai];Je===void 0&&(Ze.push(mt),Bt[ai]=Je=Ze.length-1),ne.writeVarint(Je)}}}function ke(Te,ne){return(ne<<3)+(7&Te)}function Ge(Te){return Te<<1^Te>>31}function Ie(Te,ne){for(var Se=Te.loadGeometry(),Ue=Te.type,Ze=0,ct=0,Bt=Se.length,He=0;He<Bt;He++){var mt=Se[He],Wt=1;Ue===1&&(Wt=mt.length),ne.writeVarint(ke(1,Wt));for(var ei=Ue===3?mt.length-1:mt.length,ai=0;ai<ei;ai++){ai===1&&Ue!==1&&ne.writeVarint(ke(2,ei-1));var Je=mt[ai].x-Ze,Tt=mt[ai].y-ct;ne.writeVarint(Ge(Je)),ne.writeVarint(Ge(Tt)),Ze+=Je,ct+=Tt}Ue===3&&ne.writeVarint(ke(7,1))}}function We(Te,ne){var Se=typeof Te;Se==="string"?ne.writeStringField(1,Te):Se==="boolean"?ne.writeBooleanField(7,Te):Se==="number"&&(Te%1!=0?ne.writeDoubleField(3,Te):Te<0?ne.writeSVarintField(6,Te):ne.writeVarintField(5,Te))}return q.exports=re,q.exports.fromVectorTileJs=re,q.exports.fromGeojsonVt=function(Te,ne){ne=ne||{};var Se={};for(var Ue in Te)Se[Ue]=new ae(Te[Ue].features,ne),Se[Ue].name=Ue,Se[Ue].version=ne.version,Se[Ue].extent=ne.extent;return re({layers:Se})},q.exports.GeoJSONWrapper=ae,q.exports}(),$=u.cF(H);const de={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},ge=Math.fround||(ye=new Float32Array(1),ze=>(ye[0]=+ze,ye[0]));var ye;const we=3,Ve=5,ut=6;class at{constructor(ae){this.options=Object.assign(Object.create(de),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:re,minZoom:fe,maxZoom:ve}=this.options;re&&console.time("total time");const se=`prepare ${ae.length} points`;re&&console.time(se),this.points=ae;const ke=[];for(let Ie=0;Ie<ae.length;Ie++){const We=ae[Ie];if(!We.geometry)continue;const[Te,ne]=We.geometry.coordinates,Se=ge(Mt(Te)),Ue=ge(Yt(ne));ke.push(Se,Ue,1/0,Ie,-1,1),this.options.reduce&&ke.push(0)}let Ge=this.trees[ve+1]=this._createTree(ke);re&&console.timeEnd(se);for(let Ie=ve;Ie>=fe;Ie--){const We=+Date.now();Ge=this.trees[Ie]=this._createTree(this._cluster(Ge,Ie)),re&&console.log("z%d: %d clusters in %dms",Ie,Ge.numItems,+Date.now()-We)}return re&&console.timeEnd("total time"),this}getClusters(ae,re){let fe=((ae[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,ae[1]));let se=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)fe=-180,se=180;else if(fe>se){const ne=this.getClusters([fe,ve,180,ke],re),Se=this.getClusters([-180,ve,se,ke],re);return ne.concat(Se)}const Ge=this.trees[this._limitZoom(re)],Ie=Ge.range(Mt(fe),Yt(ke),Mt(se),Yt(ve)),We=Ge.data,Te=[];for(const ne of Ie){const Se=this.stride*ne;Te.push(We[Se+Ve]>1?et(We,Se,this.clusterProps):this.points[We[Se+we]])}return Te}getChildren(ae){const re=this._getOriginId(ae),fe=this._getOriginZoom(ae),ve="No cluster with the specified id.",se=this.trees[fe];if(!se)throw new Error(ve);const ke=se.data;if(re*this.stride>=ke.length)throw new Error(ve);const Ge=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),Ie=se.within(ke[re*this.stride],ke[re*this.stride+1],Ge),We=[];for(const Te of Ie){const ne=Te*this.stride;ke[ne+4]===ae&&We.push(ke[ne+Ve]>1?et(ke,ne,this.clusterProps):this.points[ke[ne+we]])}if(We.length===0)throw new Error(ve);return We}getLeaves(ae,re,fe){const ve=[];return this._appendLeaves(ve,ae,re=re||10,fe=fe||0,0),ve}getTile(ae,re,fe){const ve=this.trees[this._limitZoom(ae)],se=Math.pow(2,ae),{extent:ke,radius:Ge}=this.options,Ie=Ge/ke,We=(fe-Ie)/se,Te=(fe+1+Ie)/se,ne={features:[]};return this._addTileFeatures(ve.range((re-Ie)/se,We,(re+1+Ie)/se,Te),ve.data,re,fe,se,ne),re===0&&this._addTileFeatures(ve.range(1-Ie/se,We,1,Te),ve.data,se,fe,se,ne),re===se-1&&this._addTileFeatures(ve.range(0,We,Ie/se,Te),ve.data,-1,fe,se,ne),ne.features.length?ne:null}getClusterExpansionZoom(ae){let re=this._getOriginZoom(ae)-1;for(;re<=this.options.maxZoom;){const fe=this.getChildren(ae);if(re++,fe.length!==1)break;ae=fe[0].properties.cluster_id}return re}_appendLeaves(ae,re,fe,ve,se){const ke=this.getChildren(re);for(const Ge of ke){const Ie=Ge.properties;if(Ie&&Ie.cluster?se+Ie.point_count<=ve?se+=Ie.point_count:se=this._appendLeaves(ae,Ie.cluster_id,fe,ve,se):se<ve?se++:ae.push(Ge),ae.length===fe)break}return se}_createTree(ae){const re=new u.aF(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<ae.length;fe+=this.stride)re.add(ae[fe],ae[fe+1]);return re.finish(),re.data=ae,re}_addTileFeatures(ae,re,fe,ve,se,ke){for(const Ge of ae){const Ie=Ge*this.stride,We=re[Ie+Ve]>1;let Te,ne,Se;if(We)Te=xt(re,Ie,this.clusterProps),ne=re[Ie],Se=re[Ie+1];else{const ct=this.points[re[Ie+we]];Te=ct.properties;const[Bt,He]=ct.geometry.coordinates;ne=Mt(Bt),Se=Yt(He)}const Ue={type:1,geometry:[[Math.round(this.options.extent*(ne*se-fe)),Math.round(this.options.extent*(Se*se-ve))]],tags:Te};let Ze;Ze=We||this.options.generateId?re[Ie+we]:this.points[re[Ie+we]].id,Ze!==void 0&&(Ue.id=Ze),ke.features.push(Ue)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,re){const{radius:fe,extent:ve,reduce:se,minPoints:ke}=this.options,Ge=fe/(ve*Math.pow(2,re)),Ie=ae.data,We=[],Te=this.stride;for(let ne=0;ne<Ie.length;ne+=Te){if(Ie[ne+2]<=re)continue;Ie[ne+2]=re;const Se=Ie[ne],Ue=Ie[ne+1],Ze=ae.within(Ie[ne],Ie[ne+1],Ge),ct=Ie[ne+Ve];let Bt=ct;for(const He of Ze){const mt=He*Te;Ie[mt+2]>re&&(Bt+=Ie[mt+Ve])}if(Bt>ct&&Bt>=ke){let He,mt=Se*ct,Wt=Ue*ct,ei=-1;const ai=((ne/Te|0)<<5)+(re+1)+this.points.length;for(const Je of Ze){const Tt=Je*Te;if(Ie[Tt+2]<=re)continue;Ie[Tt+2]=re;const Ot=Ie[Tt+Ve];mt+=Ie[Tt]*Ot,Wt+=Ie[Tt+1]*Ot,Ie[Tt+4]=ai,se&&(He||(He=this._map(Ie,ne,!0),ei=this.clusterProps.length,this.clusterProps.push(He)),se(He,this._map(Ie,Tt)))}Ie[ne+4]=ai,We.push(mt/Bt,Wt/Bt,1/0,ai,-1,Bt),se&&We.push(ei)}else{for(let He=0;He<Te;He++)We.push(Ie[ne+He]);if(Bt>1)for(const He of Ze){const mt=He*Te;if(!(Ie[mt+2]<=re)){Ie[mt+2]=re;for(let Wt=0;Wt<Te;Wt++)We.push(Ie[mt+Wt])}}}}return We}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,re,fe){if(ae[re+Ve]>1){const ke=this.clusterProps[ae[re+ut]];return fe?Object.assign({},ke):ke}const ve=this.points[ae[re+we]].properties,se=this.options.map(ve);return fe&&se===ve?Object.assign({},se):se}}function et(ze,ae,re){return{type:"Feature",id:ze[ae+we],properties:xt(ze,ae,re),geometry:{type:"Point",coordinates:[(fe=ze[ae],360*(fe-.5)),rt(ze[ae+1])]}};var fe}function xt(ze,ae,re){const fe=ze[ae+Ve],ve=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,se=ze[ae+ut],ke=se===-1?{}:Object.assign({},re[se]);return Object.assign(ke,{cluster:!0,cluster_id:ze[ae+we],point_count:fe,point_count_abbreviated:ve})}function Mt(ze){return ze/360+.5}function Yt(ze){const ae=Math.sin(ze*Math.PI/180),re=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return re<0?0:re>1?1:re}function rt(ze){const ae=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function pt(ze,ae,re,fe){let ve=fe;const se=ae+(re-ae>>1);let ke,Ge=re-ae;const Ie=ze[ae],We=ze[ae+1],Te=ze[re],ne=ze[re+1];for(let Se=ae+3;Se<re;Se+=3){const Ue=je(ze[Se],ze[Se+1],Ie,We,Te,ne);if(Ue>ve)ke=Se,ve=Ue;else if(Ue===ve){const Ze=Math.abs(Se-se);Ze<Ge&&(ke=Se,Ge=Ze)}}ve>fe&&(ke-ae>3&&pt(ze,ae,ke,fe),ze[ke+2]=ve,re-ke>3&&pt(ze,ke,re,fe))}function je(ze,ae,re,fe,ve,se){let ke=ve-re,Ge=se-fe;if(ke!==0||Ge!==0){const Ie=((ze-re)*ke+(ae-fe)*Ge)/(ke*ke+Ge*Ge);Ie>1?(re=ve,fe=se):Ie>0&&(re+=ke*Ie,fe+=Ge*Ie)}return ke=ze-re,Ge=ae-fe,ke*ke+Ge*Ge}function Qe(ze,ae,re,fe){const ve={id:ze??null,type:ae,geometry:re,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")tt(ve,re);else if(ae==="Polygon")tt(ve,re[0]);else if(ae==="MultiLineString")for(const se of re)tt(ve,se);else if(ae==="MultiPolygon")for(const se of re)tt(ve,se[0]);return ve}function tt(ze,ae){for(let re=0;re<ae.length;re+=3)ze.minX=Math.min(ze.minX,ae[re]),ze.minY=Math.min(ze.minY,ae[re+1]),ze.maxX=Math.max(ze.maxX,ae[re]),ze.maxY=Math.max(ze.maxY,ae[re+1])}function bt(ze,ae,re,fe){if(!ae.geometry)return;const ve=ae.geometry.coordinates;if(ve&&ve.length===0)return;const se=ae.geometry.type,ke=Math.pow(re.tolerance/((1<<re.maxZoom)*re.extent),2);let Ge=[],Ie=ae.id;if(re.promoteId?Ie=ae.properties[re.promoteId]:re.generateId&&(Ie=fe||0),se==="Point")dt(ve,Ge);else if(se==="MultiPoint")for(const We of ve)dt(We,Ge);else if(se==="LineString")_t(ve,Ge,ke,!1);else if(se==="MultiLineString"){if(re.lineMetrics){for(const We of ve)Ge=[],_t(We,Ge,ke,!1),ze.push(Qe(Ie,"LineString",Ge,ae.properties));return}zt(ve,Ge,ke,!1)}else if(se==="Polygon")zt(ve,Ge,ke,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(const We of ae.geometry.geometries)bt(ze,{id:Ie,geometry:We,properties:ae.properties},re,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const We of ve){const Te=[];zt(We,Te,ke,!0),Ge.push(Te)}}ze.push(Qe(Ie,se,Ge,ae.properties))}function dt(ze,ae){ae.push(Qt(ze[0]),Ct(ze[1]),0)}function _t(ze,ae,re,fe){let ve,se,ke=0;for(let Ie=0;Ie<ze.length;Ie++){const We=Qt(ze[Ie][0]),Te=Ct(ze[Ie][1]);ae.push(We,Te,0),Ie>0&&(ke+=fe?(ve*Te-We*se)/2:Math.sqrt(Math.pow(We-ve,2)+Math.pow(Te-se,2))),ve=We,se=Te}const Ge=ae.length-3;ae[2]=1,pt(ae,0,Ge,re),ae[Ge+2]=1,ae.size=Math.abs(ke),ae.start=0,ae.end=ae.size}function zt(ze,ae,re,fe){for(let ve=0;ve<ze.length;ve++){const se=[];_t(ze[ve],se,re,fe),ae.push(se)}}function Qt(ze){return ze/360+.5}function Ct(ze){const ae=Math.sin(ze*Math.PI/180),re=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return re<0?0:re>1?1:re}function Zt(ze,ae,re,fe,ve,se,ke,Ge){if(fe/=ae,se>=(re/=ae)&&ke<fe)return ze;if(ke<re||se>=fe)return null;const Ie=[];for(const We of ze){const Te=We.geometry;let ne=We.type;const Se=ve===0?We.minX:We.minY,Ue=ve===0?We.maxX:We.maxY;if(Se>=re&&Ue<fe){Ie.push(We);continue}if(Ue<re||Se>=fe)continue;let Ze=[];if(ne==="Point"||ne==="MultiPoint")Ai(Te,Ze,re,fe,ve);else if(ne==="LineString")Nt(Te,Ze,re,fe,ve,!1,Ge.lineMetrics);else if(ne==="MultiLineString")li(Te,Ze,re,fe,ve,!1);else if(ne==="Polygon")li(Te,Ze,re,fe,ve,!0);else if(ne==="MultiPolygon")for(const ct of Te){const Bt=[];li(ct,Bt,re,fe,ve,!0),Bt.length&&Ze.push(Bt)}if(Ze.length){if(Ge.lineMetrics&&ne==="LineString"){for(const ct of Ze)Ie.push(Qe(We.id,ne,ct,We.tags));continue}ne!=="LineString"&&ne!=="MultiLineString"||(Ze.length===1?(ne="LineString",Ze=Ze[0]):ne="MultiLineString"),ne!=="Point"&&ne!=="MultiPoint"||(ne=Ze.length===3?"Point":"MultiPoint"),Ie.push(Qe(We.id,ne,Ze,We.tags))}}return Ie.length?Ie:null}function Ai(ze,ae,re,fe,ve){for(let se=0;se<ze.length;se+=3){const ke=ze[se+ve];ke>=re&&ke<=fe&&pi(ae,ze[se],ze[se+1],ze[se+2])}}function Nt(ze,ae,re,fe,ve,se,ke){let Ge=Dt(ze);const Ie=ve===0?Kt:gt;let We,Te,ne=ze.start;for(let Bt=0;Bt<ze.length-3;Bt+=3){const He=ze[Bt],mt=ze[Bt+1],Wt=ze[Bt+2],ei=ze[Bt+3],ai=ze[Bt+4],Je=ve===0?He:mt,Tt=ve===0?ei:ai;let Ot=!1;ke&&(We=Math.sqrt(Math.pow(He-ei,2)+Math.pow(mt-ai,2))),Je<re?Tt>re&&(Te=Ie(Ge,He,mt,ei,ai,re),ke&&(Ge.start=ne+We*Te)):Je>fe?Tt<fe&&(Te=Ie(Ge,He,mt,ei,ai,fe),ke&&(Ge.start=ne+We*Te)):pi(Ge,He,mt,Wt),Tt<re&&Je>=re&&(Te=Ie(Ge,He,mt,ei,ai,re),Ot=!0),Tt>fe&&Je<=fe&&(Te=Ie(Ge,He,mt,ei,ai,fe),Ot=!0),!se&&Ot&&(ke&&(Ge.end=ne+We*Te),ae.push(Ge),Ge=Dt(ze)),ke&&(ne+=We)}let Se=ze.length-3;const Ue=ze[Se],Ze=ze[Se+1],ct=ve===0?Ue:Ze;ct>=re&&ct<=fe&&pi(Ge,Ue,Ze,ze[Se+2]),Se=Ge.length-3,se&&Se>=3&&(Ge[Se]!==Ge[0]||Ge[Se+1]!==Ge[1])&&pi(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&ae.push(Ge)}function Dt(ze){const ae=[];return ae.size=ze.size,ae.start=ze.start,ae.end=ze.end,ae}function li(ze,ae,re,fe,ve,se){for(const ke of ze)Nt(ke,ae,re,fe,ve,se,!1)}function pi(ze,ae,re,fe){ze.push(ae,re,fe)}function Kt(ze,ae,re,fe,ve,se){const ke=(se-ae)/(fe-ae);return pi(ze,se,re+(ve-re)*ke,1),ke}function gt(ze,ae,re,fe,ve,se){const ke=(se-re)/(ve-re);return pi(ze,ae+(fe-ae)*ke,se,1),ke}function oi(ze,ae){const re=[];for(let fe=0;fe<ze.length;fe++){const ve=ze[fe],se=ve.type;let ke;if(se==="Point"||se==="MultiPoint"||se==="LineString")ke=qi(ve.geometry,ae);else if(se==="MultiLineString"||se==="Polygon"){ke=[];for(const Ge of ve.geometry)ke.push(qi(Ge,ae))}else if(se==="MultiPolygon"){ke=[];for(const Ge of ve.geometry){const Ie=[];for(const We of Ge)Ie.push(qi(We,ae));ke.push(Ie)}}re.push(Qe(ve.id,se,ke,ve.tags))}return re}function qi(ze,ae){const re=[];re.size=ze.size,ze.start!==void 0&&(re.start=ze.start,re.end=ze.end);for(let fe=0;fe<ze.length;fe+=3)re.push(ze[fe]+ae,ze[fe+1],ze[fe+2]);return re}function Si(ze,ae){if(ze.transformed)return ze;const re=1<<ze.z,fe=ze.x,ve=ze.y;for(const se of ze.features){const ke=se.geometry,Ge=se.type;if(se.geometry=[],Ge===1)for(let Ie=0;Ie<ke.length;Ie+=2)se.geometry.push(fa(ke[Ie],ke[Ie+1],ae,re,fe,ve));else for(let Ie=0;Ie<ke.length;Ie++){const We=[];for(let Te=0;Te<ke[Ie].length;Te+=2)We.push(fa(ke[Ie][Te],ke[Ie][Te+1],ae,re,fe,ve));se.geometry.push(We)}}return ze.transformed=!0,ze}function fa(ze,ae,re,fe,ve,se){return[Math.round(re*(ze*fe-ve)),Math.round(re*(ae*fe-se))]}function Ri(ze,ae,re,fe,ve){const se=ae===ve.maxZoom?0:ve.tolerance/((1<<ae)*ve.extent),ke={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:re,y:fe,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ge of ze)ea(ke,Ge,se,ve);return ke}function ea(ze,ae,re,fe){const ve=ae.geometry,se=ae.type,ke=[];if(ze.minX=Math.min(ze.minX,ae.minX),ze.minY=Math.min(ze.minY,ae.minY),ze.maxX=Math.max(ze.maxX,ae.maxX),ze.maxY=Math.max(ze.maxY,ae.maxY),se==="Point"||se==="MultiPoint")for(let Ge=0;Ge<ve.length;Ge+=3)ke.push(ve[Ge],ve[Ge+1]),ze.numPoints++,ze.numSimplified++;else if(se==="LineString")wi(ke,ve,ze,re,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(let Ge=0;Ge<ve.length;Ge++)wi(ke,ve[Ge],ze,re,se==="Polygon",Ge===0);else if(se==="MultiPolygon")for(let Ge=0;Ge<ve.length;Ge++){const Ie=ve[Ge];for(let We=0;We<Ie.length;We++)wi(ke,Ie[We],ze,re,!0,We===0)}if(ke.length){let Ge=ae.tags||null;if(se==="LineString"&&fe.lineMetrics){Ge={};for(const We in ae.tags)Ge[We]=ae.tags[We];Ge.mapbox_clip_start=ve.start/ve.size,Ge.mapbox_clip_end=ve.end/ve.size}const Ie={geometry:ke,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:Ge};ae.id!==null&&(Ie.id=ae.id),ze.features.push(Ie)}}function wi(ze,ae,re,fe,ve,se){const ke=fe*fe;if(fe>0&&ae.size<(ve?ke:fe))return void(re.numPoints+=ae.length/3);const Ge=[];for(let Ie=0;Ie<ae.length;Ie+=3)(fe===0||ae[Ie+2]>ke)&&(re.numSimplified++,Ge.push(ae[Ie],ae[Ie+1])),re.numPoints++;ve&&function(Ie,We){let Te=0;for(let ne=0,Se=Ie.length,Ue=Se-2;ne<Se;Ue=ne,ne+=2)Te+=(Ie[ne]-Ie[Ue])*(Ie[ne+1]+Ie[Ue+1]);if(Te>0===We)for(let ne=0,Se=Ie.length;ne<Se/2;ne+=2){const Ue=Ie[ne],Ze=Ie[ne+1];Ie[ne]=Ie[Se-2-ne],Ie[ne+1]=Ie[Se-1-ne],Ie[Se-2-ne]=Ue,Ie[Se-1-ne]=Ze}}(Ge,se),ze.push(Ge)}const ji={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ha{constructor(ae,re){const fe=(re=this.options=function(se,ke){for(const Ge in ke)se[Ge]=ke[Ge];return se}(Object.create(ji),re)).debug;if(fe&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");let ve=function(se,ke){const Ge=[];if(se.type==="FeatureCollection")for(let Ie=0;Ie<se.features.length;Ie++)bt(Ge,se.features[Ie],ke,Ie);else bt(Ge,se.type==="Feature"?se:{geometry:se},ke);return Ge}(ae,re);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ve=function(se,ke){const Ge=ke.buffer/ke.extent;let Ie=se;const We=Zt(se,1,-1-Ge,Ge,0,-1,2,ke),Te=Zt(se,1,1-Ge,2+Ge,0,-1,2,ke);return(We||Te)&&(Ie=Zt(se,1,-Ge,1+Ge,0,-1,2,ke)||[],We&&(Ie=oi(We,1).concat(Ie)),Te&&(Ie=Ie.concat(oi(Te,-1)))),Ie}(ve,re),ve.length&&this.splitTile(ve,0,0,0),fe&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,re,fe,ve,se,ke,Ge){const Ie=[ae,re,fe,ve],We=this.options,Te=We.debug;for(;Ie.length;){ve=Ie.pop(),fe=Ie.pop(),re=Ie.pop(),ae=Ie.pop();const ne=1<<re,Se=Cr(re,fe,ve);let Ue=this.tiles[Se];if(!Ue&&(Te>1&&console.time("creation"),Ue=this.tiles[Se]=Ri(ae,re,fe,ve,We),this.tileCoords.push({z:re,x:fe,y:ve}),Te)){Te>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,fe,ve,Ue.numFeatures,Ue.numPoints,Ue.numSimplified),console.timeEnd("creation"));const Ot=`z${re}`;this.stats[Ot]=(this.stats[Ot]||0)+1,this.total++}if(Ue.source=ae,se==null){if(re===We.indexMaxZoom||Ue.numPoints<=We.indexMaxPoints)continue}else{if(re===We.maxZoom||re===se)continue;if(se!=null){const Ot=se-re;if(fe!==ke>>Ot||ve!==Ge>>Ot)continue}}if(Ue.source=null,ae.length===0)continue;Te>1&&console.time("clipping");const Ze=.5*We.buffer/We.extent,ct=.5-Ze,Bt=.5+Ze,He=1+Ze;let mt=null,Wt=null,ei=null,ai=null,Je=Zt(ae,ne,fe-Ze,fe+Bt,0,Ue.minX,Ue.maxX,We),Tt=Zt(ae,ne,fe+ct,fe+He,0,Ue.minX,Ue.maxX,We);ae=null,Je&&(mt=Zt(Je,ne,ve-Ze,ve+Bt,1,Ue.minY,Ue.maxY,We),Wt=Zt(Je,ne,ve+ct,ve+He,1,Ue.minY,Ue.maxY,We),Je=null),Tt&&(ei=Zt(Tt,ne,ve-Ze,ve+Bt,1,Ue.minY,Ue.maxY,We),ai=Zt(Tt,ne,ve+ct,ve+He,1,Ue.minY,Ue.maxY,We),Tt=null),Te>1&&console.timeEnd("clipping"),Ie.push(mt||[],re+1,2*fe,2*ve),Ie.push(Wt||[],re+1,2*fe,2*ve+1),Ie.push(ei||[],re+1,2*fe+1,2*ve),Ie.push(ai||[],re+1,2*fe+1,2*ve+1)}}getTile(ae,re,fe){ae=+ae,re=+re,fe=+fe;const ve=this.options,{extent:se,debug:ke}=ve;if(ae<0||ae>24)return null;const Ge=1<<ae,Ie=Cr(ae,re=re+Ge&Ge-1,fe);if(this.tiles[Ie])return Si(this.tiles[Ie],se);ke>1&&console.log("drilling down to z%d-%d-%d",ae,re,fe);let We,Te=ae,ne=re,Se=fe;for(;!We&&Te>0;)Te--,ne>>=1,Se>>=1,We=this.tiles[Cr(Te,ne,Se)];return We&&We.source?(ke>1&&(console.log("found parent tile z%d-%d-%d",Te,ne,Se),console.time("drilling down")),this.splitTile(We.source,Te,ne,Se,ae,re,fe),ke>1&&console.timeEnd("drilling down"),this.tiles[Ie]?Si(this.tiles[Ie],se):null):null}}function Cr(ze,ae,re){return 32*((1<<ze)*re+ae)+ze}function Oa(ze,ae){return ae?ze.properties[ae]:ze.id}function Xa(ze,ae){if(ze==null)return!0;if(ze.type==="Feature")return Oa(ze,ae)!=null;if(ze.type==="FeatureCollection"){const re=new Set;for(const fe of ze.features){const ve=Oa(fe,ae);if(ve==null||re.has(ve))return!1;re.add(ve)}return!0}return!1}function sa(ze,ae){const re=new Map;if(ze!=null)if(ze.type==="Feature")re.set(Oa(ze,ae),ze);else for(const fe of ze.features)re.set(Oa(fe,ae),fe);return re}class na extends R{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,re){return u._(this,void 0,void 0,function*(){const fe=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ve=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!ve)return null;const se=new Ae(ve.features);let ke=$(se);return ke.byteOffset===0&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),{vectorTile:se,rawData:ke.buffer}})}loadData(ae){return u._(this,void 0,void 0,function*(){var re;(re=this._pendingRequest)===null||re===void 0||re.abort();const fe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new u.cC(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new at(function({superclusterOptions:ke,clusterProperties:Ge}){if(!Ge||!ke)return ke;const Ie={},We={},Te={accumulated:null,zoom:0},ne={properties:null},Se=Object.keys(Ge);for(const Ue of Se){const[Ze,ct]=Ge[Ue],Bt=u.cJ(ct),He=u.cJ(typeof Ze=="string"?[Ze,["accumulated"],["get",Ue]]:Ze);Ie[Ue]=Bt.value,We[Ue]=He.value}return ke.map=Ue=>{ne.properties=Ue;const Ze={};for(const ct of Se)Ze[ct]=Ie[ct].evaluate(Te,ne);return Ze},ke.reduce=(Ue,Ze)=>{ne.properties=Ze;for(const ct of Se)Te.accumulated=Ue[ct],Ue[ct]=We[ct].evaluate(Te,ne)},ke}(ae)).load((yield this._pendingData).features):(ve=yield this._pendingData,new ha(ve,ae.geojsonVtOptions)),this.loaded={};const se={};if(fe){const ke=fe.finish();ke&&(se.resourceTiming={},se.resourceTiming[ae.source]=JSON.parse(JSON.stringify(ke)))}return se}catch(se){if(delete this._pendingRequest,u.cn(se))return{abandoned:!0};throw se}var ve})}getData(){return u._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const re=this.loaded;return re&&re[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,re){return u._(this,void 0,void 0,function*(){let fe=yield this.loadGeoJSON(ae,re);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(V(fe,!0),ae.filter){const ve=u.cJ(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ve.result==="error")throw new Error(ve.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(ke=>ve.value.evaluate({zoom:0},ke))}}return fe})}loadGeoJSON(ae,re){return u._(this,void 0,void 0,function*(){const{promoteId:fe}=ae;if(ae.request){const ve=yield u.j(ae.request,re);return this._dataUpdateable=Xa(ve.data,fe)?sa(ve.data,fe):void 0,ve.data}if(typeof ae.data=="string")try{const ve=JSON.parse(ae.data);return this._dataUpdateable=Xa(ve,fe)?sa(ve,fe):void 0,ve}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(ve,se,ke){var Ge,Ie,We,Te;if(se.removeAll&&ve.clear(),se.remove)for(const ne of se.remove)ve.delete(ne);if(se.add)for(const ne of se.add){const Se=Oa(ne,ke);Se!=null&&ve.set(Se,ne)}if(se.update)for(const ne of se.update){let Se=ve.get(ne.id);if(Se==null)continue;const Ue=!ne.removeAllProperties&&(((Ge=ne.removeProperties)===null||Ge===void 0?void 0:Ge.length)>0||((Ie=ne.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0);if((ne.newGeometry||ne.removeAllProperties||Ue)&&(Se=Object.assign({},Se),ve.set(ne.id,Se),Ue&&(Se.properties=Object.assign({},Se.properties))),ne.newGeometry&&(Se.geometry=ne.newGeometry),ne.removeAllProperties)Se.properties={};else if(((We=ne.removeProperties)===null||We===void 0?void 0:We.length)>0)for(const Ze of ne.removeProperties)Object.prototype.hasOwnProperty.call(Se.properties,Ze)&&delete Se.properties[Ze];if(((Te=ne.addOrUpdateProperties)===null||Te===void 0?void 0:Te.length)>0)for(const{key:Ze,value:ct}of ne.addOrUpdateProperties)Se.properties[Ze]=ct}}(this._dataUpdateable,ae.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return u._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class va{constructor(ae){this.self=ae,this.actor=new u.H(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(re,fe)=>{if(this.externalWorkerSourceTypes[re])throw new Error(`Worker source with name "${re}" already registered.`);this.externalWorkerSourceTypes[re]=fe},this.self.addProtocol=u.cp,this.self.removeProtocol=u.cq,this.self.registerRTLTextPlugin=re=>{u.cK.setMethods(re)},this.actor.registerMessageHandler("LDT",(re,fe)=>this._getDEMWorkerSource(re,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RDT",(re,fe)=>u._(this,void 0,void 0,function*(){this._getDEMWorkerSource(re,fe.source).removeTile(fe)})),this.actor.registerMessageHandler("GCEZ",(re,fe)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(re,fe.type,fe.source).getClusterExpansionZoom(fe)})),this.actor.registerMessageHandler("GCC",(re,fe)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(re,fe.type,fe.source).getClusterChildren(fe)})),this.actor.registerMessageHandler("GCL",(re,fe)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(re,fe.type,fe.source).getClusterLeaves(fe)})),this.actor.registerMessageHandler("LD",(re,fe)=>this._getWorkerSource(re,fe.type,fe.source).loadData(fe)),this.actor.registerMessageHandler("GD",(re,fe)=>this._getWorkerSource(re,fe.type,fe.source).getData()),this.actor.registerMessageHandler("LT",(re,fe)=>this._getWorkerSource(re,fe.type,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RT",(re,fe)=>this._getWorkerSource(re,fe.type,fe.source).reloadTile(fe)),this.actor.registerMessageHandler("AT",(re,fe)=>this._getWorkerSource(re,fe.type,fe.source).abortTile(fe)),this.actor.registerMessageHandler("RMT",(re,fe)=>this._getWorkerSource(re,fe.type,fe.source).removeTile(fe)),this.actor.registerMessageHandler("RS",(re,fe)=>u._(this,void 0,void 0,function*(){if(!this.workerSources[re]||!this.workerSources[re][fe.type]||!this.workerSources[re][fe.type][fe.source])return;const ve=this.workerSources[re][fe.type][fe.source];delete this.workerSources[re][fe.type][fe.source],ve.removeSource!==void 0&&ve.removeSource(fe)})),this.actor.registerMessageHandler("RM",re=>u._(this,void 0,void 0,function*(){delete this.layerIndexes[re],delete this.availableImages[re],delete this.workerSources[re],delete this.demWorkerSources[re]})),this.actor.registerMessageHandler("SR",(re,fe)=>u._(this,void 0,void 0,function*(){this.referrer=fe})),this.actor.registerMessageHandler("SRPS",(re,fe)=>this._syncRTLPluginState(re,fe)),this.actor.registerMessageHandler("IS",(re,fe)=>u._(this,void 0,void 0,function*(){this.self.importScripts(fe)})),this.actor.registerMessageHandler("SI",(re,fe)=>this._setImages(re,fe)),this.actor.registerMessageHandler("UL",(re,fe)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(re).update(fe.layers,fe.removedIds)})),this.actor.registerMessageHandler("SL",(re,fe)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(re).replace(fe)}))}_setImages(ae,re){return u._(this,void 0,void 0,function*(){this.availableImages[ae]=re;for(const fe in this.workerSources[ae]){const ve=this.workerSources[ae][fe];for(const se in ve)ve[se].availableImages=re}})}_syncRTLPluginState(ae,re){return u._(this,void 0,void 0,function*(){return yield u.cK.syncState(re,this.self.importScripts)})}_getAvailableImages(ae){let re=this.availableImages[ae];return re||(re=[]),re}_getLayerIndex(ae){let re=this.layerIndexes[ae];return re||(re=this.layerIndexes[ae]=new s),re}_getWorkerSource(ae,re,fe){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][re]||(this.workerSources[ae][re]={}),!this.workerSources[ae][re][fe]){const ve={sendAsync:(se,ke)=>(se.targetMapId=ae,this.actor.sendAsync(se,ke))};switch(re){case"vector":this.workerSources[ae][re][fe]=new R(ve,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][re][fe]=new na(ve,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][re][fe]=new this.externalWorkerSourceTypes[re](ve,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][re][fe]}_getDEMWorkerSource(ae,re){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][re]||(this.demWorkerSources[ae][re]=new F),this.demWorkerSources[ae][re]}}return u.i(self)&&(self.worker=new va(self)),va}),c("index",["exports","./shared"],function(u,s){var x="5.4.0";function B(){var _=new s.A(4);return s.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let I,R;const F={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,i,o){const d=requestAnimationFrame(b=>{p(),i(b)}),{unsubscribe:p}=s.s(_.signal,"abort",()=>{p(),cancelAnimationFrame(d),o(s.c())},!1)},frameAsync(_){return new Promise((i,o)=>{this.frame(_,i,o)})},getImageData(_,i=0){return this.getImageCanvasContext(_).getImageData(-i,-i,_.width+2*i,_.height+2*i)},getImageCanvasContext(_){const i=window.document.createElement("canvas"),o=i.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return i.width=_.width,i.height=_.height,o.drawImage(_,0,0,_.width,_.height),o},resolveURL:_=>(I||(I=document.createElement("a")),I.href=_,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(R==null&&(R=matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}};class M{static testProp(i){if(!M.docStyle)return i[0];for(let o=0;o<i.length;o++)if(i[o]in M.docStyle)return i[o];return i[0]}static create(i,o,d){const p=window.document.createElement(i);return o!==void 0&&(p.className=o),d&&d.appendChild(p),p}static createNS(i,o){return window.document.createElementNS(i,o)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(i,o){i.style[M.transformProp]=o}static addEventListener(i,o,d,p={}){i.addEventListener(o,d,"passive"in p?p:p.capture)}static removeEventListener(i,o,d,p={}){i.removeEventListener(o,d,"passive"in p?p:p.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",M.suppressClickInternal,!0)},0)}static getScale(i){const o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}static getPoint(i,o,d){const p=o.boundingClientRect;return new s.P((d.clientX-p.left)/o.x-i.clientLeft,(d.clientY-p.top)/o.y-i.clientTop)}static mousePos(i,o){const d=M.getScale(i);return M.getPoint(i,d,o)}static touchPos(i,o){const d=[],p=M.getScale(i);for(let b=0;b<o.length;b++)d.push(M.getPoint(i,p,o[b]));return d}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){const o=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),d=o.querySelectorAll("script");for(const p of d)p.remove();return M.clean(o),o.innerHTML}static isPossiblyDangerous(i,o){const d=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!d.includes("javascript:")&&!d.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){const o=i.children;for(const d of o)M.removeAttributes(d),M.clean(d)}static removeAttributes(i){for(const{name:o,value:d}of i.attributes)M.isPossiblyDangerous(o,d)&&i.removeAttribute(o)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const N={supported:!1,testSupport:function(_){!X&&V&&(ee?Ae(_):D=_)}};let D,V,X=!1,ee=!1;function Ae(_){const i=_.createTexture();_.bindTexture(_.TEXTURE_2D,i);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,V),_.isContextLost())return;N.supported=!0}catch{}_.deleteTexture(i),X=!0}var ce;typeof document<"u"&&(V=document.createElement("img"),V.onload=()=>{D&&Ae(D),D=null,ee=!0},V.onerror=()=>{X=!0,D=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let i,o,d,p;_.resetRequestQueue=()=>{i=[],o=0,d=0,p={}},_.addThrottleControl=T=>{const Y=d++;return p[Y]=T,Y},_.removeThrottleControl=T=>{delete p[T],w()},_.getImage=(T,Y,Q=!0)=>new Promise((z,Z)=>{N.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),s.e(T,{type:"image"}),i.push({abortController:Y,requestParameters:T,supportImageRefresh:Q,state:"queued",onError:J=>{Z(J)},onSuccess:J=>{z(J)}}),w()});const b=T=>s._(this,void 0,void 0,function*(){T.state="running";const{requestParameters:Y,supportImageRefresh:Q,onError:z,onSuccess:Z,abortController:J}=T,te=Q===!1&&!s.i(self)&&!s.g(Y.url)&&(!Y.headers||Object.keys(Y.headers).reduce((_e,xe)=>_e&&xe==="accept",!0));o++;const me=te?U(Y,J):s.m(Y,J);try{const _e=yield me;delete T.abortController,T.state="completed",_e.data instanceof HTMLImageElement||s.b(_e.data)?Z(_e):_e.data&&Z({data:yield(pe=_e.data,typeof createImageBitmap=="function"?s.f(pe):s.h(pe)),cacheControl:_e.cacheControl,expires:_e.expires})}catch(_e){delete T.abortController,z(_e)}finally{o--,w()}var pe}),w=()=>{const T=(()=>{for(const Y of Object.keys(p))if(p[Y]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Y=o;Y<T&&i.length>0;Y++){const Q=i.shift();Q.abortController.signal.aborted?Y--:b(Q)}},U=(T,Y)=>new Promise((Q,z)=>{const Z=new Image,J=T.url,te=T.credentials;te&&te==="include"?Z.crossOrigin="use-credentials":(te&&te==="same-origin"||!s.d(J))&&(Z.crossOrigin="anonymous"),Y.signal.addEventListener("abort",()=>{Z.src="",z(s.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,Q({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,Y.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=J})}(ce||(ce={})),ce.resetRequestQueue();class ue{constructor(i){this._transformRequestFn=i}transformRequest(i,o){return this._transformRequestFn&&this._transformRequestFn(i,o)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function oe(_){const i=[];if(typeof _=="string")i.push({id:"default",url:_});else if(_&&_.length>0){const o=[];for(const{id:d,url:p}of _){const b=`${d}${p}`;o.indexOf(b)===-1&&(o.push(b),i.push({id:d,url:p}))}}return i}function q(_,i,o){try{const d=new URL(_);return d.pathname+=`${i}${o}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class H{constructor(i,o,d,p){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(o,p)}update(i,o,d){const{width:p,height:b}=i,w=!(this.size&&this.size[0]===p&&this.size[1]===b||d),{context:U}=this,{gl:T}=U;if(this.useMipmap=!!(o&&o.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),U.pixelStoreUnpackFlipY.set(!1),U.pixelStoreUnpack.set(1),U.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!o||o.premultiply!==!1)),w)this.size=[p,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,i):T.texImage2D(T.TEXTURE_2D,0,this.format,p,b,0,this.format,T.UNSIGNED_BYTE,i.data);else{const{x:Y,y:Q}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?T.texSubImage2D(T.TEXTURE_2D,0,Y,Q,T.RGBA,T.UNSIGNED_BYTE,i):T.texSubImage2D(T.TEXTURE_2D,0,Y,Q,p,b,T.RGBA,T.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),U.pixelStoreUnpackFlipY.setDefault(),U.pixelStoreUnpack.setDefault(),U.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,o,d){const{context:p}=this,{gl:b}=p;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||i),this.filter=i),o!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function $(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class de extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:o,promiseResolve:d}of this.requestors)d(this._getImagesForIds(o));this.requestors=[]}}getImage(i){const o=this.images[i];if(o&&!o.data&&o.spriteData){const d=o.spriteData;o.data=new s.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),o.spriteData=null}return o}addImage(i,o){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,o)&&(this.images[i]=o)}_validate(i,o){let d=!0;const p=o.data||o.spriteData;return this._validateStretch(o.stretchX,p&&p.width)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "stretchX" value`))),d=!1),this._validateStretch(o.stretchY,p&&p.height)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "stretchY" value`))),d=!1),this._validateContent(o.content,o)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "content" value`))),d=!1),d}_validateStretch(i,o){if(!i)return!0;let d=0;for(const p of i){if(p[0]<d||p[1]<p[0]||o<p[1])return!1;d=p[1]}return!0}_validateContent(i,o){if(!i)return!0;if(i.length!==4)return!1;const d=o.spriteData,p=d&&d.width||o.data.width,b=d&&d.height||o.data.height;return!(i[0]<0||p<i[0]||i[1]<0||b<i[1]||i[2]<0||p<i[2]||i[3]<0||b<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,o,d=!0){const p=this.getImage(i);if(d&&(p.data.width!==o.data.width||p.data.height!==o.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=p.version+1,this.images[i]=o,this.updatedImages[i]=!0}removeImage(i){const o=this.images[i];delete this.images[i],delete this.patterns[i],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((o,d)=>{let p=!0;if(!this.isLoaded())for(const b of i)this.images[b]||(p=!1);this.isLoaded()||p?o(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:o})})}_getImagesForIds(i){const o={};for(const d of i){let p=this.getImage(d);p||(this.fire(new s.l("styleimagemissing",{id:d})),p=this.getImage(d)),p?o[d]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:s.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:i,height:o}=this.atlasImage;return{width:i,height:o}}getPattern(i){const o=this.patterns[i],d=this.getImage(i);if(!d)return null;if(o&&o.position.version===d.version)return o.position;if(o)o.position.version=d.version;else{const p={w:d.data.width+2,h:d.data.height+2,x:0,y:0},b=new s.I(p,d);this.patterns[i]={bin:p,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const o=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H(i,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:o,h:d}=s.p(i),p=this.atlasImage;p.resize({width:o||1,height:d||1});for(const b in this.patterns){const{bin:w}=this.patterns[b],U=w.x+1,T=w.y+1,Y=this.getImage(b).data,Q=Y.width,z=Y.height;s.R.copy(Y,p,{x:0,y:0},{x:U,y:T},{width:Q,height:z}),s.R.copy(Y,p,{x:0,y:z-1},{x:U,y:T-1},{width:Q,height:1}),s.R.copy(Y,p,{x:0,y:0},{x:U,y:T+z},{width:Q,height:1}),s.R.copy(Y,p,{x:Q-1,y:0},{x:U-1,y:T},{width:1,height:z}),s.R.copy(Y,p,{x:0,y:0},{x:U+Q,y:T},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const o of i){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const d=this.getImage(o);d||s.w(`Image with ID: "${o}" was not found`),$(d)&&this.updateImage(o,d)}}}const ge=1e20;function ye(_,i,o,d,p,b,w,U,T){for(let Y=i;Y<i+d;Y++)we(_,o*b+Y,b,p,w,U,T);for(let Y=o;Y<o+p;Y++)we(_,Y*b+i,1,d,w,U,T)}function we(_,i,o,d,p,b,w){b[0]=0,w[0]=-1e20,w[1]=ge,p[0]=_[i];for(let U=1,T=0,Y=0;U<d;U++){p[U]=_[i+U*o];const Q=U*U;do{const z=b[T];Y=(p[U]-p[z]+Q-z*z)/(U-z)/2}while(Y<=w[T]&&--T>-1);T++,b[T]=U,w[T]=Y,w[T+1]=ge}for(let U=0,T=0;U<d;U++){for(;w[T+1]<U;)T++;const Y=b[T],Q=U-Y;_[i+U*o]=p[Y]+Q*Q}}class Ve{constructor(i,o){this.requestManager=i,this.localIdeographFontFamily=o,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return s._(this,void 0,void 0,function*(){const o=[];for(const b in i)for(const w of i[b])o.push(this._getAndCacheGlyphsPromise(b,w));const d=yield Promise.all(o),p={};for(const{stack:b,id:w,glyph:U}of d)p[b]||(p[b]={}),p[b][w]=U&&{id:U.id,bitmap:U.bitmap.clone(),metrics:U.metrics};return p})}_getAndCacheGlyphsPromise(i,o){return s._(this,void 0,void 0,function*(){let d=this.entries[i];d||(d=this.entries[i]={glyphs:{},requests:{},ranges:{}});let p=d.glyphs[o];if(p!==void 0)return{stack:i,id:o,glyph:p};if(p=this._tinySDF(d,i,o),p)return d.glyphs[o]=p,{stack:i,id:o,glyph:p};const b=Math.floor(o/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[b])return{stack:i,id:o,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[b]){const U=Ve.loadGlyphRange(i,b,this.url,this.requestManager);d.requests[b]=U}const w=yield d.requests[b];for(const U in w)this._doesCharSupportLocalGlyph(+U)||(d.glyphs[+U]=w[+U]);return d.ranges[b]=!0,{stack:i,id:o,glyph:w[o]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))||s.u["CJK Unified Ideographs"](i)||s.u["Hangul Syllables"](i)||s.u.Hiragana(i)||s.u.Katakana(i)||s.u["CJK Symbols and Punctuation"](i)||s.u["Halfwidth and Fullwidth Forms"](i))}_tinySDF(i,o,d){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let b=i.tinySDF;if(!b){let U="400";/bold/i.test(o)?U="900":/medium/i.test(o)?U="500":/light/i.test(o)&&(U="200"),b=i.tinySDF=new Ve.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:U})}const w=b.draw(String.fromCharCode(d));return{id:d,bitmap:new s.q({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ve.loadGlyphRange=function(_,i,o,d){return s._(this,void 0,void 0,function*(){const p=256*i,b=p+255,w=d.transformRequest(o.replace("{fontstack}",_).replace("{range}",`${p}-${b}`),"Glyphs"),U=yield s.n(w,new AbortController);if(!U||!U.data)throw new Error(`Could not load glyph range. range: ${i}, ${p}-${b}`);const T={};for(const Y of s.o(U.data))T[Y.id]=Y;return T})},Ve.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:o=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:b="normal",fontStyle:w="normal"}={}){this.buffer=i,this.cutoff=d,this.radius=o;const U=this.size=_+4*i,T=this._createCanvas(U),Y=this.ctx=T.getContext("2d",{willReadFrequently:!0});Y.font=`${w} ${b} ${_}px ${p}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(U*U),this.gridInner=new Float64Array(U*U),this.f=new Float64Array(U),this.z=new Float64Array(U+1),this.v=new Uint16Array(U)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:o,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:b}=this.ctx.measureText(_),w=Math.ceil(o),U=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-p))),T=Math.min(this.size-this.buffer,w+Math.ceil(d)),Y=U+2*this.buffer,Q=T+2*this.buffer,z=Math.max(Y*Q,0),Z=new Uint8ClampedArray(z),J={data:Z,width:Y,height:Q,glyphWidth:U,glyphHeight:T,glyphTop:w,glyphLeft:0,glyphAdvance:i};if(U===0||T===0)return J;const{ctx:te,buffer:me,gridInner:pe,gridOuter:_e}=this;te.clearRect(me,me,U,T),te.fillText(_,me,me+w);const xe=te.getImageData(me,me,U,T);_e.fill(ge,0,z),pe.fill(0,0,z);for(let Me=0;Me<T;Me++)for(let Re=0;Re<U;Re++){const Fe=xe.data[4*(Me*U+Re)+3]/255;if(Fe===0)continue;const Pe=(Me+me)*Y+Re+me;if(Fe===1)_e[Pe]=0,pe[Pe]=ge;else{const Ye=.5-Fe;_e[Pe]=Ye>0?Ye*Ye:0,pe[Pe]=Ye<0?Ye*Ye:0}}ye(_e,0,0,Y,Q,Y,this.f,this.v,this.z),ye(pe,me,me,U,T,Y,this.f,this.v,this.z);for(let Me=0;Me<z;Me++){const Re=Math.sqrt(_e[Me])-Math.sqrt(pe[Me]);Z[Me]=Math.round(255-255*(Re/this.radius+this.cutoff))}return J}};class ut{constructor(){this.specification=s.v.light.position}possiblyEvaluate(i,o){return s.z(i.expression.evaluate(o))}interpolate(i,o,d){return{x:s.B.number(i.x,o.x,d),y:s.B.number(i.y,o.y,d),z:s.B.number(i.z,o.z,d)}}}let at;class et extends s.E{constructor(i){super(),at=at||new s.r({anchor:new s.D(s.v.light.anchor),position:new ut,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(at),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,o={}){if(!this._validate(s.t,i,o))for(const d in i){const p=i[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,o,d){return(!d||d.validate!==!1)&&s.x(this,i.call(s.y,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const xt=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Mt extends s.E{constructor(i){super(),this._transitionable=new s.T(xt),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(i,o={}){if(!this._validate(s.F,i,o)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in i){const p=i[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,o,d={}){return(d==null?void 0:d.validate)!==!1&&s.x(this,i.call(s.y,s.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Yt{constructor(i,o){this.width=i,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,o){const d=i.join(",")+String(o);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(i,o)),this.dashEntry[d]}getDashRanges(i,o,d){const p=[];let b=i.length%2==1?-i[i.length-1]*d:0,w=i[0]*d,U=!0;p.push({left:b,right:w,isDash:U,zeroLength:i[0]===0});let T=i[0];for(let Y=1;Y<i.length;Y++){U=!U;const Q=i[Y];b=T*d,T+=Q,w=T*d,p.push({left:b,right:w,isDash:U,zeroLength:Q===0})}return p}addRoundDash(i,o,d){const p=o/2;for(let b=-d;b<=d;b++){const w=this.width*(this.nextRow+d+b);let U=0,T=i[U];for(let Y=0;Y<this.width;Y++){Y/T.right>1&&(T=i[++U]);const Q=Math.abs(Y-T.left),z=Math.abs(Y-T.right),Z=Math.min(Q,z);let J;const te=b/d*(p+1);if(T.isDash){const me=p-Math.abs(te);J=Math.sqrt(Z*Z+me*me)}else J=p-Math.sqrt(Z*Z+te*te);this.data[w+Y]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(i){for(let U=i.length-1;U>=0;--U){const T=i[U],Y=i[U+1];T.zeroLength?i.splice(U,1):Y&&Y.isDash===T.isDash&&(Y.left=T.left,i.splice(U,1))}const o=i[0],d=i[i.length-1];o.isDash===d.isDash&&(o.left=d.left-this.width,d.right=o.right+this.width);const p=this.width*this.nextRow;let b=0,w=i[b];for(let U=0;U<this.width;U++){U/w.right>1&&(w=i[++b]);const T=Math.abs(U-w.left),Y=Math.abs(U-w.right),Q=Math.min(T,Y);this.data[p+U]=Math.max(0,Math.min(255,(w.isDash?Q:-Q)+128))}}addDash(i,o){const d=o?7:0,p=2*d+1;if(this.nextRow+p>this.height)return s.w("LineAtlas out of space"),null;let b=0;for(let U=0;U<i.length;U++)b+=i[U];if(b!==0){const U=this.width/b,T=this.getDashRanges(i,this.width,U);o?this.addRoundDash(T,U,d):this.addRegularDash(T)}const w={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:b};return this.nextRow+=p,this.dirty=!0,w}bind(i){const o=i.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const rt="maplibre_preloaded_worker_pool";class pt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<pt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rt]}numActive(){return Object.keys(this.active).length}}const je=Math.floor(F.hardwareConcurrency/2);let Qe,tt;function bt(){return Qe||(Qe=new pt),Qe}pt.workerCount=s.G(globalThis)?Math.max(Math.min(je,3),1):1;class dt{constructor(i,o){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=o;const d=this.workerPool.acquire(o);for(let p=0;p<d.length;p++){const b=new s.H(d[p],o);b.name=`Worker ${p}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,o){const d=[];for(const p of this.actors)d.push(p.sendAsync({type:i,data:o}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,o){for(const d of this.actors)d.registerMessageHandler(i,o)}}function _t(){return tt||(tt=new dt(bt(),s.J),tt.registerMessageHandler("GR",(_,i,o)=>s.m(i,o))),tt}function zt(_,i){const o=s.K();return s.L(o,o,[1,1,0]),s.M(o,o,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?s.N(o,o,_.calculatePosMatrix(i.toUnwrapped())):o}function Qt(_,i,o,d,p,b,w){var U;const T=function(Z,J,te){if(Z)for(const me of Z){const pe=J[me];if(pe&&pe.source===te&&pe.type==="fill-extrusion")return!0}else for(const me in J){const pe=J[me];if(pe.source===te&&pe.type==="fill-extrusion")return!0}return!1}((U=p==null?void 0:p.layers)!==null&&U!==void 0?U:null,i,_.id),Y=b.maxPitchScaleFactor(),Q=_.tilesIn(d,Y,T);Q.sort(Ct);const z=[];for(const Z of Q)z.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(i,o,_._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,p,b,Y,zt(_.transform,Z.tileID),w?(J,te)=>w(Z.tileID,J,te):void 0)});return function(Z,J){for(const te in Z)for(const me of Z[te])Zt(me,J);return Z}(function(Z){const J={},te={};for(const me of Z){const pe=me.queryResults,_e=me.wrappedTileID,xe=te[_e]=te[_e]||{};for(const Me in pe){const Re=pe[Me],Fe=xe[Me]=xe[Me]||{},Pe=J[Me]=J[Me]||[];for(const Ye of Re)Fe[Ye.featureIndex]||(Fe[Ye.featureIndex]=!0,Pe.push(Ye))}}return J}(z),_)}function Ct(_,i){const o=_.tileID,d=i.tileID;return o.overscaledZ-d.overscaledZ||o.canonical.y-d.canonical.y||o.wrap-d.wrap||o.canonical.x-d.canonical.x}function Zt(_,i){const o=_.feature,d=i.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=d}function Ai(_,i,o){return s._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield s.j(i.transformRequest(_.url,"Source"),o)).data:yield F.frameAsync(o),!d)return null;const p=s.O(s.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(p.vectorLayerIds=d.vector_layers.map(b=>b.id)),p})}class Nt{constructor(i,o){i&&(o?this.setSouthWest(i).setNorthEast(o):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof s.Q?new s.Q(i.lng,i.lat):s.Q.convert(i),this}setSouthWest(i){return this._sw=i instanceof s.Q?new s.Q(i.lng,i.lat):s.Q.convert(i),this}extend(i){const o=this._sw,d=this._ne;let p,b;if(i instanceof s.Q)p=i,b=i;else{if(!(i instanceof Nt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Nt.convert(i)):this.extend(s.Q.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(s.Q.convert(i)):this;if(p=i._sw,b=i._ne,!p||!b)return this}return o||d?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),d.lng=Math.max(b.lng,d.lng),d.lat=Math.max(b.lat,d.lat)):(this._sw=new s.Q(p.lng,p.lat),this._ne=new s.Q(b.lng,b.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:o,lat:d}=s.Q.convert(i);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(i){return i instanceof Nt?i:i&&new Nt(i)}static fromLngLat(i,o=0){const d=360*o/40075017,p=d/Math.cos(Math.PI/180*i.lat);return new Nt(new s.Q(i.lng-p,i.lat-d),new s.Q(i.lng+p,i.lat+d))}adjustAntiMeridian(){const i=new s.Q(this._sw.lng,this._sw.lat),o=new s.Q(this._ne.lng,this._ne.lat);return new Nt(i,i.lng>o.lng?new s.Q(o.lng+360,o.lat):o)}}class Dt{constructor(i,o,d){this.bounds=Nt.convert(this.validateBounds(i)),this.minzoom=o||0,this.maxzoom=d||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const o=Math.pow(2,i.z),d=Math.floor(s.U(this.bounds.getWest())*o),p=Math.floor(s.S(this.bounds.getNorth())*o),b=Math.ceil(s.U(this.bounds.getEast())*o),w=Math.ceil(s.S(this.bounds.getSouth())*o);return i.x>=d&&i.x<b&&i.y>=p&&i.y<w}}class li extends s.E{constructor(i,o,d,p){if(super(),this.id=i,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(o,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Ai(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(s.e(this,i),i.bounds&&(this.tileBounds=new Dt(i.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new s.k(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(o,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};d.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((b,w)=>{i.reloadPromise={resolve:b,reject:w}})}else i.actor=this.dispatcher.getActor(),p="LT";i.abortController=new AbortController;try{const b=yield i.actor.sendAsync({type:p,data:d},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,b)}catch(b){if(delete i.abortController,i.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,o){if(o&&o.resourceTiming&&(i.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&i.setExpiryData(o),i.loadVectorData(o,this.map.painter),i.reloadPromise){const d=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(d.resolve).catch(d.reject)}}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class pi extends s.E{constructor(i,o,d,p){super(),this.id=i,this.dispatcher=d,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},o),s.e(this,s.O(o,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(i=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Ai(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(s.e(this,o),o.bounds&&(this.tileBounds=new Dt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(o){this._tileJSONRequest=null,this.fire(new s.k(o))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return s.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const d=yield ce.getImage(this.map._requestManager.transformRequest(o,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&i.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const p=this.map.painter.context,b=p.gl,w=d.data;i.texture=this.map.painter.getTileTexture(w.width),i.texture?i.texture.update(w,{useMipmap:!0}):(i.texture=new H(p,w,b.RGBA,{useMipmap:!0}),i.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(d){if(delete i.abortController,i.aborted)i.state="unloaded";else if(d)throw i.state="errored",d}})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class Kt extends pi{constructor(i,o,d,p){super(i,o,d,p),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(o,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const p=yield ce.getImage(d,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){const b=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const w=s.b(b)&&s.V()?b:yield this.readImageNow(b),U={type:this.type,uid:i.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const T=yield i.actor.sendAsync({type:"LDT",data:U});i.dem=T,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}readImageNow(i){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){const o=i.width+2,d=i.height+2;try{return new s.R({width:o,height:d},yield s.X(i,-1,-1,o,d))}catch{}}return F.getImageData(i,1)})}_getNeighboringTiles(i){const o=i.canonical,d=Math.pow(2,o.z),p=(o.x-1+d)%d,b=o.x===0?i.wrap-1:i.wrap,w=(o.x+1+d)%d,U=o.x+1===d?i.wrap+1:i.wrap,T={};return T[new s.Y(i.overscaledZ,b,o.z,p,o.y).key]={backfilled:!1},T[new s.Y(i.overscaledZ,U,o.z,w,o.y).key]={backfilled:!1},o.y>0&&(T[new s.Y(i.overscaledZ,b,o.z,p,o.y-1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,i.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,U,o.z,w,o.y-1).key]={backfilled:!1}),o.y+1<d&&(T[new s.Y(i.overscaledZ,b,o.z,p,o.y+1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,i.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,U,o.z,w,o.y+1).key]={backfilled:!1}),T}unloadTile(i){return s._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class gt extends s.E{constructor(i,o,d,p){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(p),this._data=o.data,this._options=s.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(i){return i*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return s._(this,void 0,void 0,function*(){const i=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}getCoordinatesFromGeometry(i){return i.type==="GeometryCollection"?i.geometries.map(o=>o.coordinates).flat(1/0):i.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const i=new Nt,o=yield this.getData();let d;switch(o.type){case"FeatureCollection":d=o.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":d=this.getCoordinatesFromGeometry(o.geometry);break;default:d=this.getCoordinatesFromGeometry(o)}if(d.length==0)return i;for(let p=0;p<d.length-1;p+=2)i.extend([d[p],d[p+1]]);return i})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,o,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:o,offset:d}})}_updateWorkerData(i){return s._(this,void 0,void 0,function*(){const o=s.e({type:this.type},this.workerOptions);i?o.dataDiff=i:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(F.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let p=null;d.resourceTiming&&d.resourceTiming[this.id]&&(p=d.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&s.e(b,{resourceTiming:p}),this.fire(new s.l("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(d))}})}loaded(){return this._pendingLoads===0}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.actor?"RT":"LT";i.actor=this.actor;const d={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};i.abortController=new AbortController;const p=yield this.actor.sendAsync({type:o,data:d},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(p,this.map.painter,o==="RT")})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class oi extends s.E{constructor(i,o,d,p){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=d,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=o}load(i){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield ce.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,i&&(this.coordinates=i),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new s.k(o))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const o=i.map(s.$.fromLngLat);var d;return this.tileID=function(p){let b=1/0,w=1/0,U=-1/0,T=-1/0;for(const Z of p)b=Math.min(b,Z.x),w=Math.min(w,Z.y),U=Math.max(U,Z.x),T=Math.max(T,Z.y);const Y=Math.max(U-b,T-w),Q=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),z=Math.pow(2,Q);return new s.a1(Q,Math.floor((b+U)/2*z),Math.floor((w+T)/2*z))}(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,o=i.gl;this.texture||(this.texture=new H(i,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const b=this.tiles[p];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,d=!0)}d&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){let o=1/0,d=1/0,p=-1/0,b=-1/0;for(const U of i)o=Math.min(o,U.x),d=Math.min(d,U.y),p=Math.max(p,U.x),b=Math.max(b,U.y);const w={};for(let U=0;U<=s.a0;U++){const T=Math.pow(2,U),Y=Math.floor(o*T),Q=Math.floor(d*T),z=Math.floor(p*T),Z=Math.floor(b*T);w[U]={minTileX:Y,minTileY:Q,maxTileX:z,maxTileY:Z}}return w}}class qi extends oi{constructor(i,o,d,p){super(i,o,d,p),this.roundZoom=!0,this.type="video",this.options=o}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const o of i.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield s.a2(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new s.k(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const o=this.video.seekable;i<o.start(0)||i>o.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,o=i.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new H(i,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const b=this.tiles[p];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,d=!0)}d&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Si extends oi{constructor(i,o,d,p){super(i,o,d,p),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(w=>typeof w!="number"))||this.fire(new s.k(new s.a3(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${i}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${i}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,d=o.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new H(o,this.canvas,d.RGBA,{premultiply:!0});let p=!1;for(const b in this.tiles){const w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const fa={},Ri=_=>{switch(_){case"geojson":return gt;case"image":return oi;case"raster":return pi;case"raster-dem":return Kt;case"vector":return li;case"video":return qi;case"canvas":return Si}return fa[_]},ea="RTLPluginLoaded";class wi extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=_t()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return s._(this,arguments,void 0,function*(o,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=F.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(ea))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ji=null;function ha(){return ji||(ji=new wi),ji}class Cr{constructor(i,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=s.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const o=i+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,o,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,b){const w={};if(!b)return w;for(const U of p){const T=U.layerIds.map(Y=>b.getLayer(Y)).filter(Boolean);if(T.length!==0){U.layers=T,U.stateDependentLayerIds&&(U.stateDependentLayers=U.stateDependentLayerIds.map(Y=>T.filter(Q=>Q.id===Y)[0]));for(const Y of T)w[Y.id]=U}}return w}(i.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const b=this.buckets[p];if(b instanceof s.a6){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const b=this.buckets[p];if(b instanceof s.a6&&b.hasRTLText){this.hasRTLText=!0,ha().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const b=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(i)}const o=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H(i,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H(i,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,o,d,p,b,w,U,T,Y,Q,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:b,scale:w,tileSize:this.tileSize,pixelPosMatrix:Q,transform:T,params:U,queryPadding:this.queryPadding*Y,getElevation:z},i,o,d):{}}querySourceFeatures(i,o){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),b=o&&o.sourceLayer?o.sourceLayer:"",w=p._geojsonTileLayer||p[b];if(!w)return;const U=s.a7(o&&o.filter),{z:T,x:Y,y:Q}=this.tileID.canonical,z={z:T,x:Y,y:Q};for(let Z=0;Z<w.length;Z++){const J=w.feature(Z);if(U.needGeometry){const pe=s.a8(J,!0);if(!U.filter(new s.C(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!U.filter(new s.C(this.tileID.overscaledZ),J))continue;const te=d.getId(J,b),me=new s.a9(J,T,Y,Q,te);me.tile=z,i.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const o=this.expirationTime;if(i.cacheControl){const d=s.aa(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const b=this.expirationTime-o;b?this.expirationTime=d+Math.max(b,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!o.style.hasLayer(p))continue;const b=this.buckets[p],w=b.layers[0].sourceLayer||"_geojsonTileLayer",U=d[w],T=i[w];if(!U||!T||Object.keys(T).length===0)continue;b.update(T,U,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Y=o&&o.style&&o.style.getLayer(p);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=F.now()+i}setDependencies(i,o){const d={};for(const p of o)d[p]=!0;this.dependencies[i]=d}hasDependency(i,o){for(const d of i){const p=this.dependencies[d];if(p){for(const b of o)if(p[b])return!0}}return!1}}class Oa{constructor(i,o){this.max=i,this.onRemove=o,this.reset()}reset(){for(const i in this.data)for(const o of this.data[i])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(i,o,d){const p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const b={value:o,timeout:void 0};if(d!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},d)),this.data[p].push(b),this.order.push(p),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const o=this.data[i].shift();return o.timeout&&clearTimeout(o.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),o.value}getByKey(i){const o=this.data[i];return o?o[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,o){if(!this.has(i))return this;const d=i.wrapped().key,p=o===void 0?0:this.data[d].indexOf(o),b=this.data[d][p];return this.data[d].splice(p,1),b.timeout&&clearTimeout(b.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(b.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(i){const o=[];for(const d in this.data)for(const p of this.data[d])i(p.value)||o.push(p);for(const d of o)this.remove(d.value.tileID,d)}}class Xa{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,o,d){const p=String(o);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},s.e(this.stateChanges[i][p],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==p&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(const b in this.state[i][p])d[b]||(this.deletedStates[i][p][b]=null)}else for(const b in d)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][b]===null&&delete this.deletedStates[i][p][b]}removeFeatureState(i,o,d){if(this.deletedStates[i]===null)return;const p=String(o);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&o!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][d]=null);else if(o!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(d in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][d]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,o){const d=String(o),p=s.e({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][o];if(b===null)return{};for(const w in b)delete p[w]}return p}initializeTileState(i,o){i.setFeatureState(this.state,o)}coalesceChanges(i,o){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const b={};for(const w in this.stateChanges[p])this.state[p][w]||(this.state[p][w]={}),s.e(this.state[p][w],this.stateChanges[p][w]),b[w]=this.state[p][w];d[p]=b}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const b={};if(this.deletedStates[p]===null)for(const w in this.state[p])b[w]={},this.state[p][w]={};else for(const w in this.deletedStates[p]){if(this.deletedStates[p][w]===null)this.state[p][w]={};else for(const U of Object.keys(this.deletedStates[p][w]))delete this.state[p][w][U];b[w]=this.state[p][w]}d[p]=d[p]||{},s.e(d[p],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in i)i[p].setFeatureState(d,o)}}const sa=89.25;function na(_,i){const o=s.ae(i.lat,-85.051129,s.af);return new s.P(s.U(i.lng)*_,s.S(o)*_)}function va(_,i){return new s.$(i.x/_,i.y/_).toLngLat()}function ze(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-_.pitch)),Math.tan(s.ab(sa-_.pitch)))}function ae(_,i){const o=_.canonical,d=i/s.ac(o.z),p=o.x+Math.pow(2,o.z)*_.wrap,b=s.ad(new Float64Array(16));return s.L(b,b,[p*d,o.y*d,0]),s.M(b,b,[d/s.Z,d/s.Z,1]),b}function re(_,i,o,d,p){const b=s.$.fromLngLat(_,i),w=p*s.ag(1,_.lat),U=w*Math.cos(s.ab(o)),T=Math.sqrt(w*w-U*U),Y=T*Math.sin(s.ab(-d)),Q=T*Math.cos(s.ab(-d));return new s.$(b.x+Y,b.y+Q,b.z+U)}function fe(_,i,o){const d=i.intersectsFrustum(_);if(!o)return d;const p=i.intersectsPlane(o);return d===0||p===0?0:d===2&&p===2?2:1}function ve(_,i,o){let d=0;const p=(o-i)/10;for(let b=0;b<10;b++)d+=p*Math.pow(Math.cos(i+(b+.5)/10*(o-i)),_);return d}function se(_,i){return function(o,d,p,b,w){const U=2*((_-1)/s.ah(Math.cos(s.ab(sa-w))/Math.cos(s.ab(sa)))-1),T=Math.acos(p/b),Y=2*ve(U-1,0,s.ab(w/2)),Q=Math.min(s.ab(sa),T+s.ab(w/2)),z=ve(U-1,Math.min(Q,T-s.ab(w/2)),Q),Z=Math.atan(d/p),J=Math.hypot(d,p);let te=o;return te+=s.ah(b/J/Math.max(.5,Math.cos(s.ab(w/2)))),te+=U*s.ah(Math.cos(Z))/2,te-=s.ah(Math.max(1,z/Y/i))/2,te}}const ke=se(9.314,3);function Ge(_,i){const o=(i.roundZoom?Math.round:Math.floor)(_.zoom+s.ah(_.tileSize/i.tileSize));return Math.max(0,o)}function Ie(_,i){const o=_.getCameraFrustum(),d=_.getClippingPlane(),p=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=s.$.fromLngLat(_.center,_.elevation);p.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const w=_.getCoveringTilesDetailsProvider(),U=w.allowVariableZoom(_,i),T=Ge(_,i),Y=i.minzoom||0,Q=i.maxzoom!==void 0?i.maxzoom:_.maxZoom,z=Math.min(Math.max(0,T),Q),Z=Math.pow(2,z),J=[Z*p.x,Z*p.y,0],te=[Z*b.x,Z*b.y,0],me=Math.hypot(b.x-p.x,b.y-p.y),pe=Math.abs(b.z-p.z),_e=Math.hypot(me,pe),xe=Fe=>({zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),Me=[],Re=[];if(_.renderWorldCopies&&w.allowWorldCopies())for(let Fe=1;Fe<=3;Fe++)Me.push(xe(-Fe)),Me.push(xe(Fe));for(Me.push(xe(0));Me.length>0;){const Fe=Me.pop(),Pe=Fe.x,Ye=Fe.y;let Ke=Fe.fullyVisible;const qe={x:Pe,y:Ye,z:Fe.zoom},At=w.getTileAABB(qe,Fe.wrap,_.elevation,i);if(!Ke){const Ut=fe(o,At,d);if(Ut===0)continue;Ke=Ut===2}const ht=w.distanceToTile2d(p.x,p.y,qe,At);let ot=T;U&&(ot=(i.calculateTileZoom||ke)(_.zoom+s.ah(_.tileSize/i.tileSize),ht,pe,_e,_.fov)),ot=(i.roundZoom?Math.round:Math.floor)(ot),ot=Math.max(0,ot);const Lt=Math.min(ot,Q);if(Fe.wrap=w.getWrap(b,qe,Fe.wrap),Fe.zoom>=Lt){if(Fe.zoom<Y)continue;const Ut=z-Fe.zoom,yt=J[0]-.5-(Pe<<Ut),ti=J[1]-.5-(Ye<<Ut),Ii=i.reparseOverscaled?Math.max(Fe.zoom,ot):Fe.zoom;Re.push({tileID:new s.Y(Fe.zoom===Q?Ii:Fe.zoom,Fe.wrap,Fe.zoom,Pe,Ye),distanceSq:s.ai([te[0]-.5-Pe,te[1]-.5-Ye]),tileDistanceToCamera:Math.sqrt(yt*yt+ti*ti)})}else for(let Ut=0;Ut<4;Ut++)Me.push({zoom:Fe.zoom+1,x:(Pe<<1)+Ut%2,y:(Ye<<1)+(Ut>>1),wrap:Fe.wrap,fullyVisible:Ke})}return Re.sort((Fe,Pe)=>Fe.distanceSq-Pe.distanceSq).map(Fe=>Fe.tileID)}class We extends s.E{constructor(i,o,d){super(),this.id=i,this.dispatcher=d,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,b,w,U)=>{const T=new(Ri(b.type))(p,b,w,U);if(T.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${T.id}`);return T})(i,o,d,this),this._tiles={},this._cache=new Oa(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Xa,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const o=this._tiles[i];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,o,d){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,o,d)}catch(p){i.state="errored",p.status!==404?this._source.fire(new s.k(p,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new s.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const d=this._tiles[o];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Te).map(i=>i.key)}getRenderableIds(i){const o=[];for(const d in this._tiles)this._isIdRenderable(d,i)&&o.push(this._tiles[d]);return i?o.sort((d,p)=>{const b=d.tileID,w=p.tileID,U=new s.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians),T=new s.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians);return b.overscaledZ-w.overscaledZ||T.y-U.y||T.x-U.x}).map(d=>d.tileID.key):o.map(d=>d.tileID).sort(Te).map(d=>d.key)}hasRenderableParent(i){const o=this.findLoadedParent(i,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(i,o){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(o||!this._tiles[i].holdingForFade())}reload(i){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)(i||this._tiles[o].state!=="errored")&&this._reloadTile(o,"reloading")}}_reloadTile(i,o){return s._(this,void 0,void 0,function*(){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=o),yield this._loadTile(d,i,o))})}_tileLoaded(i,o,d){i.timeAdded=F.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(o,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const o=this.getRenderableIds();for(let p=0;p<o.length;p++){const b=o[p];if(i.neighboringTiles&&i.neighboringTiles[b]){const w=this.getTileByID(b);d(i,w),d(w,i)}}function d(p,b){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let w=b.tileID.canonical.x-p.tileID.canonical.x;const U=b.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),Y=b.tileID.key;w===0&&U===0||Math.abs(U)>1||(Math.abs(w)>1&&(Math.abs(w+T)===1?w+=T:Math.abs(w-T)===1&&(w-=T)),b.dem&&p.dem&&(p.dem.backfillBorder(b.dem,w,U),p.neighboringTiles&&p.neighboringTiles[Y]&&(p.neighboringTiles[Y].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,o,d,p){for(const b in this._tiles){let w=this._tiles[b];if(p[b]||!w.hasData()||w.tileID.overscaledZ<=o||w.tileID.overscaledZ>d)continue;let U=w.tileID;for(;w&&w.tileID.overscaledZ>o+1;){const Y=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[Y.key],w&&w.hasData()&&(U=Y)}let T=U;for(;T.overscaledZ>o;)if(T=T.scaledTo(T.overscaledZ-1),i[T.key]||i[T.canonical.key]){p[U.key]=U;break}}}findLoadedParent(i,o){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=o?d:null}for(let d=i.overscaledZ-1;d>=o;d--){const p=i.scaledTo(d),b=this._getLoadedTile(p);if(b)return b}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const o=this._tiles[i.key];return o&&o.hasData()?o:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const o=Math.ceil(i.width/this._source.tileSize)+1,d=Math.ceil(i.height/this._source.tileSize)+1,p=Math.floor(o*d*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(b)}handleWrapJump(i){const o=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,o){const d={};for(const p in this._tiles){const b=this._tiles[p];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+o),d[b.tileID.key]=b}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(i,o,d,p,b,w){const U={},T={},Y=Object.keys(i),Q=F.now();for(const z of Y){const Z=i[z],J=this._tiles[z];if(!J||J.fadeEndTime!==0&&J.fadeEndTime<=Q)continue;const te=this.findLoadedParent(Z,o),me=this.findLoadedSibling(Z),pe=te||me||null;pe&&(this._addTile(pe.tileID),U[pe.tileID.key]=pe.tileID),T[z]=Z}this._retainLoadedChildren(T,p,d,i);for(const z in U)i[z]||(this._coveredTiles[z]=!0,i[z]=U[z]);if(w){const z={},Z={};for(const J of b)this._tiles[J.key].hasData()?z[J.key]=J:Z[J.key]=J;for(const J in Z){const te=Z[J].children(this._source.maxzoom);this._tiles[te[0].key]&&this._tiles[te[1].key]&&this._tiles[te[2].key]&&this._tiles[te[3].key]&&(z[te[0].key]=i[te[0].key]=te[0],z[te[1].key]=i[te[1].key]=te[1],z[te[2].key]=i[te[2].key]=te[2],z[te[3].key]=i[te[3].key]=te[3],delete Z[J])}for(const J in Z){const te=Z[J],me=this.findLoadedParent(te,this._source.minzoom),pe=this.findLoadedSibling(te),_e=me||pe||null;if(_e){z[_e.tileID.key]=i[_e.tileID.key]=_e.tileID;for(const xe in z)z[xe].isChildOf(_e.tileID)&&delete z[xe]}}for(const J in this._tiles)z[J]||(this._coveredTiles[J]=!0)}}update(i,o){if(!this._sourceLoaded||this._paused)return;let d;this.transform=i,this.terrain=o,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new s.Y(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(d=Ie(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter(Q=>this._source.hasTile(Q)))):d=[];const p=Ge(i,this._source),b=Math.max(p-We.maxOverzooming,this._source.minzoom),w=Math.max(p+We.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const z of d)if(z.canonical.z>this._source.minzoom){const Z=z.scaledTo(z.canonical.z-1);Q[Z.key]=Z;const J=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));Q[J.key]=J}d=d.concat(Object.values(Q))}const U=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,U&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=this._updateRetainedTiles(d,p);ne(this._source.type)&&this._updateCoveredAndRetainedTiles(T,b,w,p,d,o);for(const Q in T)this._tiles[Q].clearFadeHold();const Y=s.aj(this._tiles,T);for(const Q of Y){const z=this._tiles[Q];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,o){var d;const p={},b={},w=Math.max(o-We.maxOverzooming,this._source.minzoom),U=Math.max(o+We.maxUnderzooming,this._source.minzoom),T={};for(const Y of i){const Q=this._addTile(Y);p[Y.key]=Y,Q.hasData()||o<this._source.maxzoom&&(T[Y.key]=Y)}this._retainLoadedChildren(T,o,U,p);for(const Y of i){let Q=this._tiles[Y.key];if(Q.hasData())continue;if(o+1>this._source.maxzoom){const Z=Y.children(this._source.maxzoom)[0],J=this.getTile(Z);if(J&&J.hasData()){p[Z.key]=Z;continue}}else{const Z=Y.children(this._source.maxzoom);if(p[Z[0].key]&&p[Z[1].key]&&p[Z[2].key]&&p[Z[3].key])continue}let z=Q.wasRequested();for(let Z=Y.overscaledZ-1;Z>=w;--Z){const J=Y.scaledTo(Z);if(b[J.key])break;if(b[J.key]=!0,Q=this.getTile(J),!Q&&z&&(Q=this._addTile(J)),Q){const te=Q.hasData();if((te||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||z)&&(p[J.key]=J),z=Q.wasRequested(),te)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const o=[];let d,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}o.push(p.key);const b=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(b),d)break;p=b}for(const b of o)this._loadedParentTiles[b]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const o=this._tiles[i].tileID,d=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=d}}_addTile(i){let o=this._tiles[i.key];if(o)return o;o=this._cache.getAndRemove(i),o&&(this._setTileReloadTimer(i.key,o),o.tileID=i,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,o)));const d=o;return o||(o=new Cr(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(o,i.key,o.state)),o.uses++,this._tiles[i.key]=o,d||this._source.fire(new s.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(i,o){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=o.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const o=this._tiles[i];o&&(o.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(i){const o=i.sourceDataType;i.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&o==="content"&&(this.reload(i.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,o,d){const p=[],b=this.transform;if(!b)return p;const w=d?b.getCameraQueryGeometry(i):i,U=i.map(te=>b.screenPointToMercatorCoordinate(te,this.terrain)),T=w.map(te=>b.screenPointToMercatorCoordinate(te,this.terrain)),Y=this.getIds();let Q=1/0,z=1/0,Z=-1/0,J=-1/0;for(const te of T)Q=Math.min(Q,te.x),z=Math.min(z,te.y),Z=Math.max(Z,te.x),J=Math.max(J,te.y);for(let te=0;te<Y.length;te++){const me=this._tiles[Y[te]];if(me.holdingForFade())continue;const pe=b.getCoveringTilesDetailsProvider().allowWorldCopies()?me.tileID:me.tileID.unwrapTo(0),_e=Math.pow(2,b.zoom-me.tileID.overscaledZ),xe=o*me.queryPadding*s.Z/me.tileSize/_e,Me=[pe.getTilePoint(new s.$(Q,z)),pe.getTilePoint(new s.$(Z,J))];if(Me[0].x-xe<s.Z&&Me[0].y-xe<s.Z&&Me[1].x+xe>=0&&Me[1].y+xe>=0){const Re=U.map(Pe=>pe.getTilePoint(Pe)),Fe=T.map(Pe=>pe.getTilePoint(Pe));p.push({tile:me,tileID:pe,queryGeometry:Re,cameraQueryGeometry:Fe,scale:_e})}}return p}getVisibleCoordinates(i){const o=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(ne(this._source.type)){const i=F.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=i)return!0}return!1}setFeatureState(i,o,d){this._state.updateState(i=i||"_geojsonTileLayer",o,d)}removeFeatureState(i,o,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",o,d)}getFeatureState(i,o){return this._state.getState(i=i||"_geojsonTileLayer",o)}setDependencies(i,o,d){const p=this._tiles[i];p&&p.setDependencies(o,d)}reloadTilesForDependencies(i,o){for(const d in this._tiles)this._tiles[d].hasDependency(i,o)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(i,o))}}function Te(_,i){const o=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||d-o||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function ne(_){return _==="raster"||_==="image"||_==="video"}We.maxOverzooming=10,We.maxUnderzooming=3;class Se{constructor(i,o){this.reset(i,o)}reset(i,o){this.points=i||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.ae(i,0,1);let o=1,d=this._distances[o];const p=i*this.paddedLength+this.padding;for(;d<p&&o<this._distances.length;)d=this._distances[++o];const b=o-1,w=this._distances[b],U=d-w,T=U>0?(p-w)/U:0;return this.points[b].mult(1-T).add(this.points[o].mult(T))}}function Ue(_,i){let o=!0;return _==="always"||_!=="never"&&i!=="never"||(o=!1),o}class Ze{constructor(i,o,d){const p=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/d),this.yCellCount=Math.ceil(o/d);for(let w=0;w<this.xCellCount*this.yCellCount;w++)p.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=o,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,o,d,p,b){this._forEachCell(o,d,p,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(b)}insertCircle(i,o,d,p){this._forEachCell(o-p,d-p,o+p,d+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(o),this.circles.push(d),this.circles.push(p)}_insertBoxCell(i,o,d,p,b,w){this.boxCells[b].push(w)}_insertCircleCell(i,o,d,p,b,w){this.circleCells[b].push(w)}_query(i,o,d,p,b,w,U){if(d<0||i>this.width||p<0||o>this.height)return[];const T=[];if(i<=0&&o<=0&&this.width<=d&&this.height<=p){if(b)return[{key:null,x1:i,y1:o,x2:d,y2:p}];for(let Y=0;Y<this.boxKeys.length;Y++)T.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(let Y=0;Y<this.circleKeys.length;Y++){const Q=this.circles[3*Y],z=this.circles[3*Y+1],Z=this.circles[3*Y+2];T.push({key:this.circleKeys[Y],x1:Q-Z,y1:z-Z,x2:Q+Z,y2:z+Z})}}else this._forEachCell(i,o,d,p,this._queryCell,T,{hitTest:b,overlapMode:w,seenUids:{box:{},circle:{}}},U);return T}query(i,o,d,p){return this._query(i,o,d,p,!1,null)}hitTest(i,o,d,p,b,w){return this._query(i,o,d,p,!0,b,w).length>0}hitTestCircle(i,o,d,p,b){const w=i-d,U=i+d,T=o-d,Y=o+d;if(U<0||w>this.width||Y<0||T>this.height)return!1;const Q=[];return this._forEachCell(w,T,U,Y,this._queryCellCircle,Q,{hitTest:!0,overlapMode:p,circle:{x:i,y:o,radius:d},seenUids:{box:{},circle:{}}},b),Q.length>0}_queryCell(i,o,d,p,b,w,U,T){const{seenUids:Y,hitTest:Q,overlapMode:z}=U,Z=this.boxCells[b];if(Z!==null){const te=this.bboxes;for(const me of Z)if(!Y.box[me]){Y.box[me]=!0;const pe=4*me,_e=this.boxKeys[me];if(i<=te[pe+2]&&o<=te[pe+3]&&d>=te[pe+0]&&p>=te[pe+1]&&(!T||T(_e))&&(!Q||!Ue(z,_e.overlapMode))&&(w.push({key:_e,x1:te[pe],y1:te[pe+1],x2:te[pe+2],y2:te[pe+3]}),Q))return!0}}const J=this.circleCells[b];if(J!==null){const te=this.circles;for(const me of J)if(!Y.circle[me]){Y.circle[me]=!0;const pe=3*me,_e=this.circleKeys[me];if(this._circleAndRectCollide(te[pe],te[pe+1],te[pe+2],i,o,d,p)&&(!T||T(_e))&&(!Q||!Ue(z,_e.overlapMode))){const xe=te[pe],Me=te[pe+1],Re=te[pe+2];if(w.push({key:_e,x1:xe-Re,y1:Me-Re,x2:xe+Re,y2:Me+Re}),Q)return!0}}}return!1}_queryCellCircle(i,o,d,p,b,w,U,T){const{circle:Y,seenUids:Q,overlapMode:z}=U,Z=this.boxCells[b];if(Z!==null){const te=this.bboxes;for(const me of Z)if(!Q.box[me]){Q.box[me]=!0;const pe=4*me,_e=this.boxKeys[me];if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,te[pe+0],te[pe+1],te[pe+2],te[pe+3])&&(!T||T(_e))&&!Ue(z,_e.overlapMode))return w.push(!0),!0}}const J=this.circleCells[b];if(J!==null){const te=this.circles;for(const me of J)if(!Q.circle[me]){Q.circle[me]=!0;const pe=3*me,_e=this.circleKeys[me];if(this._circlesCollide(te[pe],te[pe+1],te[pe+2],Y.x,Y.y,Y.radius)&&(!T||T(_e))&&!Ue(z,_e.overlapMode))return w.push(!0),!0}}}_forEachCell(i,o,d,p,b,w,U,T){const Y=this._convertToXCellCoord(i),Q=this._convertToYCellCoord(o),z=this._convertToXCellCoord(d),Z=this._convertToYCellCoord(p);for(let J=Y;J<=z;J++)for(let te=Q;te<=Z;te++)if(b.call(this,i,o,d,p,this.xCellCount*te+J,w,U,T))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,o,d,p,b,w){const U=p-i,T=b-o,Y=d+w;return Y*Y>U*U+T*T}_circleAndRectCollide(i,o,d,p,b,w,U){const T=(w-p)/2,Y=Math.abs(i-(p+T));if(Y>T+d)return!1;const Q=(U-b)/2,z=Math.abs(o-(b+Q));if(z>Q+d)return!1;if(Y<=T||z<=Q)return!0;const Z=Y-T,J=z-Q;return Z*Z+J*J<=d*d}}function ct(_,i,o){const d=s.K();if(!_){const{vecSouth:z,vecEast:Z}=He(i),J=B();J[0]=Z[0],J[1]=Z[1],J[2]=z[0],J[3]=z[1],p=J,(Q=(w=(b=J)[0])*(Y=b[3])-(T=b[2])*(U=b[1]))&&(p[0]=Y*(Q=1/Q),p[1]=-U*Q,p[2]=-T*Q,p[3]=w*Q),d[0]=J[0],d[1]=J[1],d[4]=J[2],d[5]=J[3]}var p,b,w,U,T,Y,Q;return s.M(d,d,[1/o,1/o,1]),d}function Bt(_,i,o,d){if(_){const p=s.K();if(!i){const{vecSouth:b,vecEast:w}=He(o);p[0]=w[0],p[1]=w[1],p[4]=b[0],p[5]=b[1]}return s.M(p,p,[d,d,1]),p}return o.pixelsToClipSpaceMatrix}function He(_){const i=Math.cos(_.rollInRadians),o=Math.sin(_.rollInRadians),d=Math.cos(_.pitchInRadians),p=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),w=s.ao();w[0]=-p*d*o-b*i,w[1]=-b*d*o+p*i;const U=s.ap(w);U<1e-9?s.aq(w):s.ar(w,w,1/U);const T=s.ao();T[0]=p*d*i-b*o,T[1]=b*d*i+p*o;const Y=s.ap(T);return Y<1e-9?s.aq(T):s.ar(T,T,1/Y),{vecEast:T,vecSouth:w}}function mt(_,i,o,d){let p;d?(p=[_,i,d(_,i),1],s.at(p,p,o)):(p=[_,i,0,1],Ei(p,p,o));const b=p[3];return{point:new s.P(p[0]/b,p[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function Wt(_,i){return .5+_/i*.5}function ei(_,i){return _.x>=-i[0]&&_.x<=i[0]&&_.y>=-i[1]&&_.y<=i[1]}function ai(_,i,o,d,p,b,w,U,T,Y,Q,z,Z){const J=o?_.textSizeData:_.iconSizeData,te=s.ak(J,i.transform.zoom),me=[256/i.width*2+1,256/i.height*2+1],pe=o?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;pe.clear();const _e=_.lineVertexArray,xe=o?_.text.placedSymbolArray:_.icon.placedSymbolArray,Me=i.transform.width/i.transform.height;let Re=!1;for(let Fe=0;Fe<xe.length;Fe++){const Pe=xe.get(Fe);if(Pe.hidden||Pe.writingMode===s.al.vertical&&!Re){Ui(Pe.numGlyphs,pe);continue}Re=!1;const Ye=new s.P(Pe.anchorX,Pe.anchorY),Ke={getElevation:Z,pitchedLabelPlaneMatrix:d,lineVertexArray:_e,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:Ye,unwrappedTileID:T,width:Y,height:Q,translation:z},qe=Bn(Pe.anchorX,Pe.anchorY,Ke);if(!ei(qe.point,me)){Ui(Pe.numGlyphs,pe);continue}const At=Wt(i.transform.cameraToCenterDistance,qe.signedDistanceFromCamera),ht=s.am(J,te,Pe),ot=b?ht*i.transform.getPitchedTextCorrection(Pe.anchorX,Pe.anchorY,T)/At:ht*At,Lt=Ot({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:p,symbol:Pe,fontSize:ot,flip:!1,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Me,rotateToLine:U});Re=Lt.useVertical,(Lt.notEnoughRoom||Re||Lt.needsFlipping&&Ot({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:p,symbol:Pe,fontSize:ot,flip:!0,keepUpright:w,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Me,rotateToLine:U}).notEnoughRoom)&&Ui(Pe.numGlyphs,pe)}o?_.text.dynamicLayoutVertexBuffer.updateData(pe):_.icon.dynamicLayoutVertexBuffer.updateData(pe)}function Je(_,i,o,d,p,b,w,U){const T=b.glyphStartIndex+b.numGlyphs,Y=b.lineStartIndex,Q=b.lineStartIndex+b.lineLength,z=i.getoffsetX(b.glyphStartIndex),Z=i.getoffsetX(T-1),J=Ft(_*z,o,d,p,b.segment,Y,Q,U,w);if(!J)return null;const te=Ft(_*Z,o,d,p,b.segment,Y,Q,U,w);return te?U.projectionCache.anyProjectionOccluded?null:{first:J,last:te}:null}function Tt(_,i,o,d){return _===s.al.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*d?{useVertical:!0}:(_===s.al.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function Ot(_){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:o,symbol:d,fontSize:p,flip:b,keepUpright:w,glyphOffsetArray:U,dynamicLayoutVertexArray:T,aspectRatio:Y,rotateToLine:Q}=_,z=p/24,Z=d.lineOffsetX*z,J=d.lineOffsetY*z;let te;if(d.numGlyphs>1){const me=d.glyphStartIndex+d.numGlyphs,pe=d.lineStartIndex,_e=d.lineStartIndex+d.lineLength,xe=Je(z,U,Z,J,b,d,Q,i);if(!xe)return{notEnoughRoom:!0};const Me=Gt(xe.first.point.x,xe.first.point.y,i,o),Re=Gt(xe.last.point.x,xe.last.point.y,i,o);if(w&&!b){const Fe=Tt(d.writingMode,Me,Re,Y);if(Fe)return Fe}te=[xe.first];for(let Fe=d.glyphStartIndex+1;Fe<me-1;Fe++)te.push(Ft(z*U.getoffsetX(Fe),Z,J,b,d.segment,pe,_e,i,Q));te.push(xe.last)}else{if(w&&!b){const pe=Bi(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,_e=d.lineStartIndex+d.segment+1,xe=new s.P(i.lineVertexArray.getx(_e),i.lineVertexArray.gety(_e)),Me=Bi(xe.x,xe.y,i),Re=Me.signedDistanceFromCamera>0?Me.point:ta(i.tileAnchorPoint,xe,pe,1,i),Fe=Gt(pe.x,pe.y,i,o),Pe=Gt(Re.x,Re.y,i,o),Ye=Tt(d.writingMode,Fe,Pe,Y);if(Ye)return Ye}const me=Ft(z*U.getoffsetX(d.glyphStartIndex),Z,J,b,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,i,Q);if(!me||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};te=[me]}for(const me of te)s.as(T,me.point,me.angle);return{}}function ta(_,i,o,d,p){const b=_.add(_.sub(i)._unit()),w=Bi(b.x,b.y,p).point,U=o.sub(w);return o.add(U._mult(d/U.mag()))}function oa(_,i,o){const d=i.projectionCache;if(d.projections[_])return d.projections[_];const p=new s.P(i.lineVertexArray.getx(_),i.lineVertexArray.gety(_)),b=Bi(p.x,p.y,i);if(b.signedDistanceFromCamera>0)return d.projections[_]=b.point,d.anyProjectionOccluded=d.anyProjectionOccluded||b.isOccluded,b.point;const w=_-o.direction;return ta(o.distanceFromAnchor===0?i.tileAnchorPoint:new s.P(i.lineVertexArray.getx(w),i.lineVertexArray.gety(w)),p,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,i)}function Bi(_,i,o){const d=_+o.translation[0],p=i+o.translation[1];let b;return o.pitchWithMap?(b=mt(d,p,o.pitchedLabelPlaneMatrix,o.getElevation),b.isOccluded=!1):(b=o.transform.projectTileCoordinates(d,p,o.unwrappedTileID,o.getElevation),b.point.x=(.5*b.point.x+.5)*o.width,b.point.y=(.5*-b.point.y+.5)*o.height),b}function Gt(_,i,o,d){if(o.pitchWithMap){const p=[_,i,0,1];return s.at(p,p,d),o.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],o.unwrappedTileID,o.getElevation).point}return{x:_/o.width*2-1,y:i/o.height*2-1}}function Bn(_,i,o){return o.transform.projectTileCoordinates(_,i,o.unwrappedTileID,o.getElevation)}function Xt(_,i,o){return _._unit()._perp()._mult(i*o)}function De(_,i,o,d,p,b,w,U,T){if(U.projectionCache.offsets[_])return U.projectionCache.offsets[_];const Y=o.add(i);if(_+T.direction<d||_+T.direction>=p)return U.projectionCache.offsets[_]=Y,Y;const Q=oa(_+T.direction,U,T),z=Xt(Q.sub(o),w,T.direction),Z=o.add(z),J=Q.add(z);return U.projectionCache.offsets[_]=s.au(b,Y,Z,J)||Y,U.projectionCache.offsets[_]}function Ft(_,i,o,d,p,b,w,U,T){const Y=d?_-i:_+i;let Q=Y>0?1:-1,z=0;d&&(Q*=-1,z=Math.PI),Q<0&&(z+=Math.PI);let Z,J=Q>0?b+p:b+p+1;U.projectionCache.cachedAnchorPoint?Z=U.projectionCache.cachedAnchorPoint:(Z=Bi(U.tileAnchorPoint.x,U.tileAnchorPoint.y,U).point,U.projectionCache.cachedAnchorPoint=Z);let te,me,pe=Z,_e=Z,xe=0,Me=0;const Re=Math.abs(Y),Fe=[];let Pe;for(;xe+Me<=Re;){if(J+=Q,J<b||J>=w)return null;xe+=Me,_e=pe,me=te;const qe={absOffsetX:Re,direction:Q,distanceFromAnchor:xe,previousVertex:_e};if(pe=oa(J,U,qe),o===0)Fe.push(_e),Pe=pe.sub(_e);else{let At;const ht=pe.sub(_e);At=ht.mag()===0?Xt(oa(J+Q,U,qe).sub(pe),o,Q):Xt(ht,o,Q),me||(me=_e.add(At)),te=De(J,At,pe,b,w,me,o,U,qe),Fe.push(me),Pe=te.sub(me)}Me=Pe.mag()}const Ye=Pe._mult((Re-xe)/Me)._add(me||_e),Ke=z+Math.atan2(pe.y-_e.y,pe.x-_e.x);return Fe.push(Ye),{point:Ye,angle:T?Ke:0,path:Fe}}const ni=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ui(_,i){for(let o=0;o<_;o++){const d=i.length;i.resize(d+4),i.float32.set(ni,3*d)}}function Ei(_,i,o){const d=i[0],p=i[1];return _[0]=o[0]*d+o[4]*p+o[12],_[1]=o[1]*d+o[5]*p+o[13],_[3]=o[3]*d+o[7]*p+o[15],_}const Zi=100;class Va{constructor(i,o=new Ze(i.width+200,i.height+200,25),d=new Ze(i.width+200,i.height+200,25)){this.transform=i,this.grid=o,this.ignoredGrid=d,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Zi,this.screenBottomBoundary=i.height+Zi,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,o,d,p,b,w,U,T,Y,Q,z,Z){const J=this.projectAndGetPerspectiveRatio(i.anchorPointX+T[0],i.anchorPointY+T[1],b,Q,Z),te=d*J.perspectiveRatio;let me;if(w||U)me=this._projectCollisionBox(i,te,p,b,w,U,T,J,Q,z,Z);else{const Pe=J.x+(z?z.x*te:0),Ye=J.y+(z?z.y*te:0);me={allPointsOccluded:!1,box:[Pe+i.x1*te,Ye+i.y1*te,Pe+i.x2*te,Ye+i.y2*te]}}const[pe,_e,xe,Me]=me.box,Re=w?me.allPointsOccluded:J.isOccluded;let Fe=Re;return Fe||(Fe=J.perspectiveRatio<this.perspectiveRatioCutoff),Fe||(Fe=!this.isInsideGrid(pe,_e,xe,Me)),Fe||o!=="always"&&this.grid.hitTest(pe,_e,xe,Me,o,Y)?{box:[pe,_e,xe,Me],placeable:!1,offscreen:!1,occluded:Re}:{box:[pe,_e,xe,Me],placeable:!0,offscreen:this.isOffscreen(pe,_e,xe,Me),occluded:Re}}placeCollisionCircles(i,o,d,p,b,w,U,T,Y,Q,z,Z,J,te){const me=[],pe=new s.P(o.anchorX,o.anchorY),_e=this.getPerspectiveRatio(pe.x,pe.y,w,te),xe=(Y?b*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,w)/_e:b*_e)/s.ay,Me={getElevation:te,pitchedLabelPlaneMatrix:U,lineVertexArray:d,pitchWithMap:Y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:J},Re=Je(xe,p,o.lineOffsetX*xe,o.lineOffsetY*xe,!1,o,!1,Me);let Fe=!1,Pe=!1,Ye=!0;if(Re){const Ke=.5*z*_e+Z,qe=new s.P(-100,-100),At=new s.P(this.screenRightBoundary,this.screenBottomBoundary),ht=new Se,ot=Re.first,Lt=Re.last;let Ut=[];for(let Ii=ot.path.length-1;Ii>=1;Ii--)Ut.push(ot.path[Ii]);for(let Ii=1;Ii<Lt.path.length;Ii++)Ut.push(Lt.path[Ii]);const yt=2.5*Ke;if(Y){const Ii=this.projectPathToScreenSpace(Ut,Me);Ut=Ii.some(bi=>bi.signedDistanceFromCamera<=0)?[]:Ii.map(bi=>bi.point)}let ti=[];if(Ut.length>0){const Ii=Ut[0].clone(),bi=Ut[0].clone();for(let xa=1;xa<Ut.length;xa++)Ii.x=Math.min(Ii.x,Ut[xa].x),Ii.y=Math.min(Ii.y,Ut[xa].y),bi.x=Math.max(bi.x,Ut[xa].x),bi.y=Math.max(bi.y,Ut[xa].y);ti=Ii.x>=qe.x&&bi.x<=At.x&&Ii.y>=qe.y&&bi.y<=At.y?[Ut]:bi.x<qe.x||Ii.x>At.x||bi.y<qe.y||Ii.y>At.y?[]:s.av([Ut],qe.x,qe.y,At.x,At.y)}for(const Ii of ti){ht.reset(Ii,.25*Ke);let bi=0;bi=ht.length<=.5*Ke?1:Math.ceil(ht.paddedLength/yt)+1;for(let xa=0;xa<bi;xa++){const ia=xa/Math.max(bi-1,1),wa=ht.lerp(ia),pa=wa.x+Zi,aa=wa.y+Zi;me.push(pa,aa,Ke,0);const Ji=pa-Ke,nr=aa-Ke,qa=pa+Ke,br=aa+Ke;if(Ye=Ye&&this.isOffscreen(Ji,nr,qa,br),Pe=Pe||this.isInsideGrid(Ji,nr,qa,br),i!=="always"&&this.grid.hitTestCircle(pa,aa,Ke,i,Q)&&(Fe=!0,!T))return{circles:[],offscreen:!1,collisionDetected:Fe}}}}return{circles:!T&&Fe||!Pe||_e<this.perspectiveRatioCutoff?[]:me,offscreen:Ye,collisionDetected:Fe}}projectPathToScreenSpace(i,o){const d=function(p,b){const w=s.K();return s.an(w,b.pitchedLabelPlaneMatrix),p.map(U=>{const T=mt(U.x,U.y,w,b.getElevation),Y=b.transform.projectTileCoordinates(T.point.x,T.point.y,b.unwrappedTileID,b.getElevation);return Y.point.x=(.5*Y.point.x+.5)*b.width,Y.point.y=(.5*-Y.point.y+.5)*b.height,Y})}(i,o);return function(p){let b=0,w=0,U=0,T=0;for(let Y=0;Y<p.length;Y++)p[Y].isOccluded?(U=Y+1,T=0):(T++,T>w&&(w=T,b=U));return p.slice(b,b+w)}(d)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let d=1/0,p=1/0,b=-1/0,w=-1/0;for(const Q of i){const z=new s.P(Q.x+Zi,Q.y+Zi);d=Math.min(d,z.x),p=Math.min(p,z.y),b=Math.max(b,z.x),w=Math.max(w,z.y),o.push(z)}const U=this.grid.query(d,p,b,w).concat(this.ignoredGrid.query(d,p,b,w)),T={},Y={};for(const Q of U){const z=Q.key;if(T[z.bucketInstanceId]===void 0&&(T[z.bucketInstanceId]={}),T[z.bucketInstanceId][z.featureIndex])continue;const Z=[new s.P(Q.x1,Q.y1),new s.P(Q.x2,Q.y1),new s.P(Q.x2,Q.y2),new s.P(Q.x1,Q.y2)];s.aw(o,Z)&&(T[z.bucketInstanceId][z.featureIndex]=!0,Y[z.bucketInstanceId]===void 0&&(Y[z.bucketInstanceId]=[]),Y[z.bucketInstanceId].push(z.featureIndex))}return Y}insertCollisionBox(i,o,d,p,b,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:b,collisionGroupID:w,overlapMode:o},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,o,d,p,b,w){const U=d?this.ignoredGrid:this.grid,T={bucketInstanceId:p,featureIndex:b,collisionGroupID:w,overlapMode:o};for(let Y=0;Y<i.length;Y+=4)U.insertCircle(T,i[Y],i[Y+1],i[Y+2])}projectAndGetPerspectiveRatio(i,o,d,p,b){if(b){let w;p?(w=[i,o,p(i,o),1],s.at(w,w,b)):(w=[i,o,0,1],Ei(w,w,b));const U=w[3];return{x:(w[0]/U+1)/2*this.transform.width+Zi,y:(-w[1]/U+1)/2*this.transform.height+Zi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/U*.5,isOccluded:!1,signedDistanceFromCamera:U}}{const w=this.transform.projectTileCoordinates(i,o,d,p);return{x:(w.point.x+1)/2*this.transform.width+Zi,y:(1-w.point.y)/2*this.transform.height+Zi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(i,o,d,p){const b=this.transform.projectTileCoordinates(i,o,d,p);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(i,o,d,p){return d<Zi||i>=this.screenRightBoundary||p<Zi||o>this.screenBottomBoundary}isInsideGrid(i,o,d,p){return d>=0&&i<this.gridRightBoundary&&p>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const i=s.ad([]);return s.L(i,i,[-100,-100,0]),i}_projectCollisionBox(i,o,d,p,b,w,U,T,Y,Q,z){let Z=1,J=0,te=0,me=1;const pe=i.anchorPointX+U[0],_e=i.anchorPointY+U[1];if(w&&!b){const Ut=this.projectAndGetPerspectiveRatio(pe+1,_e,p,Y,z),yt=Ut.x-T.x,ti=Math.atan((Ut.y-T.y)/yt)+(yt<0?Math.PI:0),Ii=Math.sin(ti),bi=Math.cos(ti);Z=bi,J=Ii,te=-Ii,me=bi}else if(!w&&b){const Ut=He(this.transform);Z=Ut.vecEast[0],J=Ut.vecEast[1],te=Ut.vecSouth[0],me=Ut.vecSouth[1]}let xe=T.x,Me=T.y,Re=o;b&&(xe=pe,Me=_e,Re=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),Re*=this.transform.getPitchedTextCorrection(pe,_e,p),Q||(Re*=s.ae(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Q&&(xe+=Z*Q.x*Re+te*Q.y*Re,Me+=J*Q.x*Re+me*Q.y*Re);const Fe=i.x1*Re,Pe=i.x2*Re,Ye=(Fe+Pe)/2,Ke=i.y1*Re,qe=i.y2*Re,At=(Ke+qe)/2,ht=[{offsetX:Fe,offsetY:Ke},{offsetX:Ye,offsetY:Ke},{offsetX:Pe,offsetY:Ke},{offsetX:Pe,offsetY:At},{offsetX:Pe,offsetY:qe},{offsetX:Ye,offsetY:qe},{offsetX:Fe,offsetY:qe},{offsetX:Fe,offsetY:At}];let ot=[];for(const{offsetX:Ut,offsetY:yt}of ht)ot.push(new s.P(xe+Z*Ut+te*yt,Me+J*Ut+me*yt));let Lt=!1;if(b){const Ut=ot.map(yt=>this.projectAndGetPerspectiveRatio(yt.x,yt.y,p,Y,z));Lt=Ut.some(yt=>!yt.isOccluded),ot=Ut.map(yt=>new s.P(yt.x,yt.y))}else Lt=!0;return{box:s.ax(ot),allPointsOccluded:!Lt}}}class Pr{constructor(i,o,d,p){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?o:-o))):p&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class mr{constructor(i,o,d,p,b){this.text=new Pr(i?i.text:null,o,d,b),this.icon=new Pr(i?i.icon:null,o,p,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Fa{constructor(i,o,d){this.text=i,this.icon=o,this.skipFade=d}}class VA{constructor(i,o,d,p,b){this.bucketInstanceId=i,this.featureIndex=o,this.sourceLayerIndex=d,this.bucketIndex=p,this.tileID=b}}class GA{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const o=++this.maxGroupID;this.collisionGroups[i]={ID:o,predicate:d=>d.collisionGroupID===o}}return this.collisionGroups[i]}}function Dh(_,i,o,d,p){const{horizontalAlign:b,verticalAlign:w}=s.aE(_);return new s.P(-(b-.5)*i+d[0]*p,-(w-.5)*o+d[1]*p)}class Go{constructor(i,o,d,p,b){this.transform=i.clone(),this.terrain=o,this.collisionIndex=new Va(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new GA(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const o=this.terrain;return o?(d,p)=>o.getElevation(i,d,p):null}getBucketParts(i,o,d,p){const b=d.getBucket(o),w=d.latestFeatureIndex;if(!b||!w||o.id!==b.layerIds[0])return;const U=d.collisionBoxArray,T=b.layers[0].layout,Y=b.layers[0].paint,Q=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),z=d.tileSize/s.Z,Z=d.tileID.toUnwrapped(),J=T.get("text-rotation-alignment")==="map",te=s.az(d,1,this.transform.zoom),me=s.aA(this.collisionIndex.transform,d,Y.get("text-translate"),Y.get("text-translate-anchor")),pe=s.aA(this.collisionIndex.transform,d,Y.get("icon-translate"),Y.get("icon-translate-anchor")),_e=ct(J,this.transform,te);this.retainedQueryData[b.bucketInstanceId]=new VA(b.bucketInstanceId,w,b.sourceLayerIndex,b.index,d.tileID);const xe={bucket:b,layout:T,translationText:me,translationIcon:pe,unwrappedTileID:Z,pitchedLabelPlaneMatrix:_e,scale:Q,textPixelRatio:z,holdingForFade:d.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:s.ak(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(p)for(const Me of b.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:Fe,symbolInstanceEnd:Pe}=Me;i.push({sortKey:Re,symbolInstanceStart:Fe,symbolInstanceEnd:Pe,parameters:xe})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(i,o,d,p,b,w,U,T,Y,Q,z,Z,J,te,me,pe,_e,xe,Me,Re){const Fe=s.aB[i.textAnchor],Pe=[i.textOffset0,i.textOffset1],Ye=Dh(Fe,d,p,Pe,b),Ke=this.collisionIndex.placeCollisionBox(o,Z,T,Y,Q,U,w,pe,z.predicate,Me,Ye,Re);if((!xe||this.collisionIndex.placeCollisionBox(xe,Z,T,Y,Q,U,w,_e,z.predicate,Me,Ye,Re).placeable)&&Ke.placeable){let qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(qe=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:Pe,width:d,height:p,anchor:Fe,textBoxScale:b,prevAnchor:qe},this.markUsedJustification(te,Fe,J,me),te.allowVerticalPlacement&&(this.markUsedOrientation(te,me,J),this.placedOrientations[J.crossTileID]=me),{shift:Ye,placedGlyphBoxes:Ke}}}placeLayerBucketPart(i,o,d){const{bucket:p,layout:b,translationText:w,translationIcon:U,unwrappedTileID:T,pitchedLabelPlaneMatrix:Y,textPixelRatio:Q,holdingForFade:z,collisionBoxArray:Z,partiallyEvaluatedTextSize:J,collisionGroup:te}=i.parameters,me=b.get("text-optional"),pe=b.get("icon-optional"),_e=s.aC(b,"text-overlap","text-allow-overlap"),xe=_e==="always",Me=s.aC(b,"icon-overlap","icon-allow-overlap"),Re=Me==="always",Fe=b.get("text-rotation-alignment")==="map",Pe=b.get("text-pitch-alignment")==="map",Ye=b.get("icon-text-fit")!=="none",Ke=b.get("symbol-z-order")==="viewport-y",qe=xe&&(Re||!p.hasIconData()||pe),At=Re&&(xe||!p.hasTextData()||me);!p.collisionArrays&&Z&&p.deserializeCollisionBoxes(Z);const ht=this.retainedQueryData[p.bucketInstanceId].tileID,ot=this._getTerrainElevationFunc(ht),Lt=this.transform.getFastPathSimpleProjectionMatrix(ht),Ut=(yt,ti,Ii)=>{var bi,xa;if(o[yt.crossTileID])return;if(z)return void(this.placements[yt.crossTileID]=new Fa(!1,!1,!1));let ia=!1,wa=!1,pa=!0,aa=null,Ji={box:null,placeable:!1,offscreen:null,occluded:!1},nr={placeable:!1},qa=null,br=null,Ir=null,Wn=0,Gs=0,bs=0;ti.textFeatureIndex?Wn=ti.textFeatureIndex:yt.useRuntimeCollisionCircles&&(Wn=yt.featureIndex),ti.verticalTextFeatureIndex&&(Gs=ti.verticalTextFeatureIndex);const ys=ti.textBox;if(ys){const an=Ma=>{let ma=s.al.horizontal;if(p.allowVerticalPlacement&&!Ma&&this.prevPlacement){const Qa=this.prevPlacement.placedOrientations[yt.crossTileID];Qa&&(this.placedOrientations[yt.crossTileID]=Qa,ma=Qa,this.markUsedOrientation(p,ma,yt))}return ma},js=(Ma,ma)=>{if(p.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&ti.verticalTextBox){for(const Qa of p.writingModes)if(Qa===s.al.vertical?(Ji=ma(),nr=Ji):Ji=Ma(),Ji&&Ji.placeable)break}else Ji=Ma()},vs=yt.textAnchorOffsetStartIndex,xs=yt.textAnchorOffsetEndIndex;if(xs===vs){const Ma=(ma,Qa)=>{const Ba=this.collisionIndex.placeCollisionBox(ma,_e,Q,ht,T,Pe,Fe,w,te.predicate,ot,void 0,Lt);return Ba&&Ba.placeable&&(this.markUsedOrientation(p,Qa,yt),this.placedOrientations[yt.crossTileID]=Qa),Ba};js(()=>Ma(ys,s.al.horizontal),()=>{const ma=ti.verticalTextBox;return p.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&ma?Ma(ma,s.al.vertical):{box:null,offscreen:null}}),an(Ji&&Ji.placeable)}else{let Ma=s.aB[(xa=(bi=this.prevPlacement)===null||bi===void 0?void 0:bi.variableOffsets[yt.crossTileID])===null||xa===void 0?void 0:xa.anchor];const ma=(Ba,mf,Co)=>{const Ip=Ba.x2-Ba.x1,_f=Ba.y2-Ba.y1,Qu=yt.textBoxScale,bf=Ye&&Me==="never"?mf:null;let rn=null,Ks=_e==="never"?1:2,ku="never";Ma&&Ks++;for(let yf=0;yf<Ks;yf++){for(let xl=vs;xl<xs;xl++){const Du=p.textAnchorOffsets.get(xl);if(Ma&&Du.textAnchor!==Ma)continue;const zu=this.attemptAnchorPlacement(Du,Ba,Ip,_f,Qu,Fe,Pe,Q,ht,T,te,ku,yt,p,Co,w,U,bf,ot);if(zu&&(rn=zu.placedGlyphBoxes,rn&&rn.placeable))return ia=!0,aa=zu.shift,rn}Ma?Ma=null:ku=_e}return d&&!rn&&(rn={box:this.collisionIndex.placeCollisionBox(ys,"always",Q,ht,T,Pe,Fe,w,te.predicate,ot,void 0,Lt).box,offscreen:!1,placeable:!1,occluded:!1}),rn};js(()=>ma(ys,ti.iconBox,s.al.horizontal),()=>{const Ba=ti.verticalTextBox;return p.allowVerticalPlacement&&(!Ji||!Ji.placeable)&&yt.numVerticalGlyphVertices>0&&Ba?ma(Ba,ti.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),Ji&&(ia=Ji.placeable,pa=Ji.offscreen);const Qa=an(Ji&&Ji.placeable);if(!ia&&this.prevPlacement){const Ba=this.prevPlacement.variableOffsets[yt.crossTileID];Ba&&(this.variableOffsets[yt.crossTileID]=Ba,this.markUsedJustification(p,Ba.anchor,yt,Qa))}}}if(qa=Ji,ia=qa&&qa.placeable,pa=qa&&qa.offscreen,yt.useRuntimeCollisionCircles){const an=p.text.placedSymbolArray.get(yt.centerJustifiedTextSymbolIndex),js=s.am(p.textSizeData,J,an),vs=b.get("text-padding");br=this.collisionIndex.placeCollisionCircles(_e,an,p.lineVertexArray,p.glyphOffsetArray,js,T,Y,d,Pe,te.predicate,yt.collisionCircleDiameter,vs,w,ot),br.circles.length&&br.collisionDetected&&!d&&s.w("Collisions detected, but collision boxes are not shown"),ia=xe||br.circles.length>0&&!br.collisionDetected,pa=pa&&br.offscreen}if(ti.iconFeatureIndex&&(bs=ti.iconFeatureIndex),ti.iconBox){const an=js=>this.collisionIndex.placeCollisionBox(js,Me,Q,ht,T,Pe,Fe,U,te.predicate,ot,Ye&&aa?aa:void 0,Lt);nr&&nr.placeable&&ti.verticalIconBox?(Ir=an(ti.verticalIconBox),wa=Ir.placeable):(Ir=an(ti.iconBox),wa=Ir.placeable),pa=pa&&Ir.offscreen}const Jn=me||yt.numHorizontalGlyphVertices===0&&yt.numVerticalGlyphVertices===0,wo=pe||yt.numIconVertices===0;Jn||wo?wo?Jn||(wa=wa&&ia):ia=wa&&ia:wa=ia=wa&&ia;const Bo=wa&&Ir.placeable;if(ia&&qa.placeable&&this.collisionIndex.insertCollisionBox(qa.box,_e,b.get("text-ignore-placement"),p.bucketInstanceId,nr&&nr.placeable&&Gs?Gs:Wn,te.ID),Bo&&this.collisionIndex.insertCollisionBox(Ir.box,Me,b.get("icon-ignore-placement"),p.bucketInstanceId,bs,te.ID),br&&ia&&this.collisionIndex.insertCollisionCircles(br.circles,_e,b.get("text-ignore-placement"),p.bucketInstanceId,Wn,te.ID),d&&this.storeCollisionData(p.bucketInstanceId,Ii,ti,qa,Ir,br),yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[yt.crossTileID]=new Fa((ia||qe)&&!(qa!=null&&qa.occluded),(wa||At)&&!(Ir!=null&&Ir.occluded),pa||p.justReloaded),o[yt.crossTileID]=!0};if(Ke){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const yt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ti=yt.length-1;ti>=0;--ti){const Ii=yt[ti];Ut(p.symbolInstances.get(Ii),p.collisionArrays[Ii],Ii)}}else for(let yt=i.symbolInstanceStart;yt<i.symbolInstanceEnd;yt++)Ut(p.symbolInstances.get(yt),p.collisionArrays[yt],yt);p.justReloaded=!1}storeCollisionData(i,o,d,p,b,w){if(d.textBox||d.iconBox){let U,T;this.collisionBoxArrays.has(i)?U=this.collisionBoxArrays.get(i):(U=new Map,this.collisionBoxArrays.set(i,U)),U.has(o)?T=U.get(o):(T={text:null,icon:null},U.set(o,T)),d.textBox&&(T.text=p.box),d.iconBox&&(T.icon=b.box)}if(w){let U=this.collisionCircleArrays[i];U===void 0&&(U=this.collisionCircleArrays[i]=[]);for(let T=0;T<w.circles.length;T+=4)U.push(w.circles[T+0]-Zi),U.push(w.circles[T+1]-Zi),U.push(w.circles[T+2]),U.push(w.collisionDetected?1:0)}}markUsedJustification(i,o,d,p){let b;b=p===s.al.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[s.aD(o)];const w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const U of w)U>=0&&(i.text.placedSymbolArray.get(U).crossTileID=b>=0&&U!==b?0:d.crossTileID)}markUsedOrientation(i,o,d){const p=o===s.al.horizontal||o===s.al.horizontalOnly?o:0,b=o===s.al.vertical?o:0,w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const U of w)i.text.placedSymbolArray.get(U).placedOrientation=p;d.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let d=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const p=o?o.symbolFadeChange(i):1,b=o?o.opacities:{},w=o?o.variableOffsets:{},U=o?o.placedOrientations:{};for(const T in this.placements){const Y=this.placements[T],Q=b[T];Q?(this.opacities[T]=new mr(Q,p,Y.text,Y.icon),d=d||Y.text!==Q.text.placed||Y.icon!==Q.icon.placed):(this.opacities[T]=new mr(null,p,Y.text,Y.icon,Y.skipFade),d=d||Y.text||Y.icon)}for(const T in b){const Y=b[T];if(!this.opacities[T]){const Q=new mr(Y,p,!1,!1);Q.isHidden()||(this.opacities[T]=Q,d=d||Y.text.placed||Y.icon.placed)}}for(const T in w)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=w[T]);for(const T in U)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=U[T]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:i)}updateLayerOpacities(i,o){const d={};for(const p of o){const b=p.getBucket(i);b&&p.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,p.tileID,d,p.collisionBoxArray)}}updateBucketOpacities(i,o,d,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const b=i.layers[0],w=b.layout,U=new mr(null,0,!1,!1,!0),T=w.get("text-allow-overlap"),Y=w.get("icon-allow-overlap"),Q=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=w.get("text-rotation-alignment")==="map",Z=w.get("text-pitch-alignment")==="map",J=w.get("icon-text-fit")!=="none",te=new mr(null,0,T&&(Y||!i.hasIconData()||w.get("icon-optional")),Y&&(T||!i.hasTextData()||w.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const me=(_e,xe,Me)=>{for(let Re=0;Re<xe/4;Re++)_e.opacityVertexArray.emplaceBack(Me);_e.hasVisibleVertices=_e.hasVisibleVertices||Me!==ho},pe=this.collisionBoxArrays.get(i.bucketInstanceId);for(let _e=0;_e<i.symbolInstances.length;_e++){const xe=i.symbolInstances.get(_e),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:Re,crossTileID:Fe}=xe;let Pe=this.opacities[Fe];d[Fe]?Pe=U:Pe||(Pe=te,this.opacities[Fe]=Pe),d[Fe]=!0;const Ye=xe.numIconVertices>0,Ke=this.placedOrientations[xe.crossTileID],qe=Ke===s.al.vertical,At=Ke===s.al.horizontal||Ke===s.al.horizontalOnly;if(Me>0||Re>0){const ot=Oh(Pe.text);me(i.text,Me,qe?ho:ot),me(i.text,Re,At?ho:ot);const Lt=Pe.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(ti=>{ti>=0&&(i.text.placedSymbolArray.get(ti).hidden=Lt||qe?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Lt||At?1:0);const Ut=this.variableOffsets[xe.crossTileID];Ut&&this.markUsedJustification(i,Ut.anchor,xe,Ke);const yt=this.placedOrientations[xe.crossTileID];yt&&(this.markUsedJustification(i,"left",xe,yt),this.markUsedOrientation(i,yt,xe))}if(Ye){const ot=Oh(Pe.icon),Lt=!(J&&xe.verticalPlacedIconSymbolIndex&&qe);xe.placedIconSymbolIndex>=0&&(me(i.icon,xe.numIconVertices,Lt?ot:ho),i.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(me(i.icon,xe.numVerticalIconVertices,Lt?ho:ot),i.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}const ht=pe&&pe.has(_e)?pe.get(_e):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const ot=i.collisionArrays[_e];if(ot){let Lt=new s.P(0,0);if(ot.textBox||ot.verticalTextBox){let Ut=!0;if(Q){const yt=this.variableOffsets[Fe];yt?(Lt=Dh(yt.anchor,yt.width,yt.height,yt.textOffset,yt.textBoxScale),z&&Lt._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ut=!1}if(ot.textBox||ot.verticalTextBox){let yt;ot.textBox&&(yt=qe),ot.verticalTextBox&&(yt=At),zh(i.textCollisionBox.collisionVertexArray,Pe.text.placed,!Ut||yt,ht.text,Lt.x,Lt.y)}}if(ot.iconBox||ot.verticalIconBox){const Ut=!!(!At&&ot.verticalIconBox);let yt;ot.iconBox&&(yt=Ut),ot.verticalIconBox&&(yt=!Ut),zh(i.iconCollisionBox.collisionVertexArray,Pe.icon.placed,yt,ht.icon,J?Lt.x:0,J?Lt.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,o){const d=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*d>i}setStale(){this.stale=!0}}function zh(_,i,o,d,p,b){d&&d.length!==0||(d=[0,0,0,0]);const w=d[0]-Zi,U=d[1]-Zi,T=d[2]-Zi,Y=d[3]-Zi;_.emplaceBack(i?1:0,o?1:0,p||0,b||0,w,U),_.emplaceBack(i?1:0,o?1:0,p||0,b||0,T,U),_.emplaceBack(i?1:0,o?1:0,p||0,b||0,T,Y),_.emplaceBack(i?1:0,o?1:0,p||0,b||0,w,Y)}const sp=Math.pow(2,25),op=Math.pow(2,24),Ap=Math.pow(2,17),R0=Math.pow(2,16),I0=Math.pow(2,9),Zh=Math.pow(2,8),Hh=Math.pow(2,1);function Oh(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const i=_.placed?1:0,o=Math.floor(127*_.opacity);return o*sp+i*op+o*Ap+i*R0+o*I0+i*Zh+o*Hh+i}const ho=0;class Xh{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,o,d,p,b){const w=this._bucketParts;for(;this._currentTileIndex<i.length;)if(o.getBucketParts(w,p,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((U,T)=>U.sortKey-T.sortKey));this._currentPartIndex<w.length;)if(o.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,b())return!0;return!1}}class jl{constructor(i,o,d,p,b,w,U,T){this.placement=new Go(i,o,w,U,T),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(i,o,d){const p=F.now(),b=()=>!this._forceFullPlacement&&F.now()-p>2;for(;this._currentPlacementIndex>=0;){const w=o[i[this._currentPlacementIndex]],U=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=U)&&(!w.maxzoom||w.maxzoom>U)){if(this._inProgressLayer||(this._inProgressLayer=new Xh(w)),this._inProgressLayer.continuePlacement(d[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const jo=512/s.Z/2;class Ko{constructor(i,o,d){this.tileID=i,this.bucketInstanceId=d,this._symbolsByKey={};const p=new Map;for(let b=0;b<o.length;b++){const w=o.get(b),U=w.key,T=p.get(U);T?T.push(w):p.set(U,[w])}for(const[b,w]of p){const U={positions:w.map(T=>({x:Math.floor(T.anchorX*jo),y:Math.floor(T.anchorY*jo)})),crossTileIDs:w.map(T=>T.crossTileID)};if(U.positions.length>128){const T=new s.aF(U.positions.length,16,Uint16Array);for(const{x:Y,y:Q}of U.positions)T.add(Y,Q);T.finish(),delete U.positions,U.index=T}this._symbolsByKey[b]=U}}getScaledCoordinates(i,o){const{x:d,y:p,z:b}=this.tileID.canonical,{x:w,y:U,z:T}=o.canonical,Y=jo/Math.pow(2,T-b),Q=(U*s.Z+i.anchorY)*Y,z=p*s.Z*jo;return{x:Math.floor((w*s.Z+i.anchorX)*Y-d*s.Z*jo),y:Math.floor(Q-z)}}findMatches(i,o,d){const p=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let b=0;b<i.length;b++){const w=i.get(b);if(w.crossTileID)continue;const U=this._symbolsByKey[w.key];if(!U)continue;const T=this.getScaledCoordinates(w,o);if(U.index){const Y=U.index.range(T.x-p,T.y-p,T.x+p,T.y+p).sort();for(const Q of Y){const z=U.crossTileIDs[Q];if(!d[z]){d[z]=!0,w.crossTileID=z;break}}}else if(U.positions)for(let Y=0;Y<U.positions.length;Y++){const Q=U.positions[Y],z=U.crossTileIDs[Y];if(Math.abs(Q.x-T.x)<=p&&Math.abs(Q.y-T.y)<=p&&!d[z]){d[z]=!0,w.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class U0{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class lp{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const o=Math.round((i-this.lng)/360);if(o!==0)for(const d in this.indexes){const p=this.indexes[d],b={};for(const w in p){const U=p[w];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+o),b[U.tileID.key]=U}this.indexes[d]=b}this.lng=i}addBucket(i,o,d){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<o.symbolInstances.length;b++)o.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const p=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const w=this.indexes[b];if(Number(b)>i.overscaledZ)for(const U in w){const T=w[U];T.tileID.isChildOf(i)&&T.findMatches(o.symbolInstances,i,p)}else{const U=w[i.scaledTo(Number(b)).key];U&&U.findMatches(o.symbolInstances,i,p)}}for(let b=0;b<o.symbolInstances.length;b++){const w=o.symbolInstances.get(b);w.crossTileID||(w.crossTileID=d.generate(),p[w.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ko(i,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(i,o){for(const d of o.getCrossTileIDsLists())for(const p of d)delete this.usedCrossTileIDs[i][p]}removeStaleBuckets(i){let o=!1;for(const d in this.indexes){const p=this.indexes[d];for(const b in p)i[p[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,p[b]),delete p[b],o=!0)}return o}}class fs{constructor(){this.layerIndexes={},this.crossTileIDs=new U0,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,o,d){let p=this.layerIndexes[i.id];p===void 0&&(p=this.layerIndexes[i.id]=new lp);let b=!1;const w={};p.handleWrapJump(d);for(const U of o){const T=U.getBucket(i);T&&i.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(U.tileID,T,this.crossTileIDs)&&(b=!0),w[T.bucketInstanceId]=!0)}return p.removeStaleBuckets(w)&&(b=!0),b}pruneUnusedLayers(i){const o={};i.forEach(d=>{o[d]=!0});for(const d in this.layerIndexes)o[d]||delete this.layerIndexes[d]}}var $o="void main() {fragColor=vec4(1.0);}";const Fi={prelude:ki(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ki("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ki("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ki(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ki(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ki(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ki($o,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ki(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ki(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ki("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ki("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ki("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ki($o,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ki(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ki(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ki(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ki(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ki(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ki(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ki(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ki(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ki(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ki(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ki(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ki("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ki("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ki("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ki("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ki(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ki("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ki(_,i){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=i.match(/in ([\w]+) ([\w]+)/g),p=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(p):p,U={};return{fragmentSource:_=_.replace(o,(T,Y,Q,z,Z)=>(U[Z]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${Q} ${z} ${Z};
#else
uniform ${Q} ${z} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${Q} ${z} ${Z} = u_${Z};
#endif
`)),vertexSource:i=i.replace(o,(T,Y,Q,z,Z)=>{const J=z==="float"?"vec2":"vec4",te=Z.match(/color/)?"color":J;return U[Z]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${Q} ${J} a_${Z};
out ${Q} ${z} ${Z};
#else
uniform ${Q} ${z} u_${Z};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${te}(a_${Z}, u_${Z}_t);
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`:Y==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${Q} ${J} a_${Z};
#else
uniform ${Q} ${z} u_${Z};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Q} ${z} ${Z} = a_${Z};
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Q} ${z} ${Z} = unpack_mix_${te}(a_${Z}, u_${Z}_t);
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`}),staticAttributes:d,staticUniforms:w}}class qo{constructor(i,o,d){this.vertexBuffer=i,this.indexBuffer=o,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Xn=s.aG([{name:"a_pos",type:"Int16",components:2}]);const Xr="#define PROJECTION_MERCATOR",Mr="mercator";class Ta{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Mr}get shaderDefine(){return Xr}get shaderPreludeCode(){return Fi.projectionMercator}get vertexShaderPreludeCode(){return Fi.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,o,d,p,b){if(this._cachedMesh)return this._cachedMesh;const w=new s.aI;w.emplaceBack(0,0),w.emplaceBack(s.Z,0),w.emplaceBack(0,s.Z),w.emplaceBack(s.Z,s.Z);const U=i.createVertexBuffer(w,Xn.members),T=s.aJ.simpleSegment(0,0,4,2),Y=new s.aK;Y.emplaceBack(1,0,2),Y.emplaceBack(1,2,3);const Q=i.createIndexBuffer(Y);return this._cachedMesh=new qo(U,Q,T),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class jA{constructor(i=0,o=0,d=0,p=0){if(isNaN(i)||i<0||isNaN(o)||o<0||isNaN(d)||d<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=o,this.left=d,this.right=p}interpolate(i,o,d){return o.top!=null&&i.top!=null&&(this.top=s.B.number(i.top,o.top,d)),o.bottom!=null&&i.bottom!=null&&(this.bottom=s.B.number(i.bottom,o.bottom,d)),o.left!=null&&i.left!=null&&(this.left=s.B.number(i.left,o.left,d)),o.right!=null&&i.right!=null&&(this.right=s.B.number(i.right,o.right,d)),this}getCenter(i,o){const d=s.ae((this.left+i-this.right)/2,0,i),p=s.ae((this.top+o-this.bottom)/2,0,o);return new s.P(d,p)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new jA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function _r(_,i){if(!_.renderWorldCopies||_.lngRange)return;const o=i.lng-_.center.lng;i.lng+=o>180?-360:o<-180?360:0}function tn(_){return Math.max(0,Math.floor(_))}class Qr{constructor(i,o,d,p,b,w){this._callbacks=i,this._tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=o||0,this._maxZoom=d||22,this._minPitch=p??0,this._maxPitch=b??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=tn(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new jA,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,o,d){this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=tn(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new jA(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!d&&i.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){const o=s.aL(i,-180,180)*Math.PI/180;var d,p,b,w,U,T,Y,Q,z;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=B(),d=this._rotationMatrix,b=-this._bearingInRadians,w=(p=this._rotationMatrix)[0],U=p[1],T=p[2],Y=p[3],Q=Math.sin(b),z=Math.cos(b),d[0]=w*z+T*Q,d[1]=U*z+Y*Q,d[2]=w*-Q+T*z,d[3]=U*-Q+Y*z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){const o=s.ae(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){const o=i/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(i){i=s.ae(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=s.ab(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){const o=this.getConstrained(this._center,i).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=s.ac(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,o){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,o,d){this._unmodified=!1,this._edgeInsets.interpolate(i,o,d),this._constrain(),this._calcMatrices()}resize(i,o,d=!0){this._width=i,this._height=o,d&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Nt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(i,o){return this._callbacks.getConstrained(i,o)}getCameraQueryGeometry(i,o){if(o.length===1)return[o[0],i];{let d=i.x,p=i.y,b=i.x,w=i.y;for(const U of o)d=Math.min(d,U.x),p=Math.min(p,U.y),b=Math.max(b,U.x),w=Math.max(w,U.y);return[new s.P(d,p),new s.P(b,p),new s.P(b,w),new s.P(d,w),new s.P(d,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:o,zoom:d}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(d),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=s.ad(new Float64Array(16));s.M(i,i,[this._width/2,-this._height/2,1]),s.L(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=s.ad(new Float64Array(16)),s.M(i,i,[1,-1,1]),s.L(i,i,[-1,-1,0]),s.M(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,o,d,p){const b=d!==void 0?d:this.bearing,w=p=p!==void 0?p:this.pitch,U=s.$.fromLngLat(i,o),T=-Math.cos(s.ab(w)),Y=Math.sin(s.ab(w)),Q=Y*Math.sin(s.ab(b)),z=-Y*Math.cos(s.ab(b));let Z=this.elevation;const J=o-Z;let te;T*J>=0||Math.abs(T)<.1?(te=1e4,Z=o+te*T):te=-J/T;let me,pe,_e=s.aN(1,U.y),xe=0;do{if(xe+=1,xe>10)break;pe=te/_e,me=new s.$(U.x+Q*pe,U.y+z*pe),_e=1/me.meterInMercatorCoordinateUnits()}while(Math.abs(te-pe*_e)>1e-12);return{center:me.toLngLat(),elevation:Z,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;const o=s.ag(1,this.center.lat)*this.worldSize,d=this.cameraToCenterDistance/o,p=s.$.fromLngLat(this.center,this.elevation),b=re(this.center,this.elevation,this.pitch,this.bearing,d);this._elevation=i;const w=this.calculateCenterFromCameraLngLatAlt(b.toLngLat(),s.aN(b.z,p.y),this.bearing,this.pitch);this._elevation=w.elevation,this._center=w.center,this.setZoom(w.zoom)}getCameraPoint(){const i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const i=s.ag(1,this.center.lat)*this.worldSize;return re(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];const o=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/o,i.canonical.y/o,1/o/s.Z,1/o/s.Z]}}class zs{constructor(i,o){this.min=i,this.max=o,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(i){const o=[i%2==0,i<2],d=s.aQ(this.min),p=s.aQ(this.max);for(let b=0;b<o.length;b++)d[b]=o[b]?this.min[b]:this.center[b],p[b]=o[b]?this.center[b]:this.max[b];return p[2]=this.max[2],new zs(d,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let o=!0;for(let d=0;d<i.planes.length;d++){const p=this.intersectsPlane(i.planes[d]);if(p===0)return 0;p===1&&(o=!1)}return o?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let o=i[3],d=i[3];for(let p=0;p<3;p++)i[p]>0?(o+=i[p]*this.min[p],d+=i[p]*this.max[p]):(d+=i[p]*this.min[p],o+=i[p]*this.max[p]);return o>=0?2:d<0?0:1}}class KA{distanceToTile2d(i,o,d,p){const b=p.distanceX([i,o]),w=p.distanceY([i,o]);return Math.hypot(b,w)}getWrap(i,o,d){return d}getTileAABB(i,o,d,p){var b,w;let U=d,T=d;if(p.terrain){const Q=new s.Y(i.z,o,i.z,i.x,i.y),z=p.terrain.getMinMaxElevation(Q);U=(b=z.minElevation)!==null&&b!==void 0?b:d,T=(w=z.maxElevation)!==null&&w!==void 0?w:d}const Y=1<<i.z;return new zs([o+i.x/Y,i.y/Y,U],[o+(i.x+1)/Y,(i.y+1)/Y,T])}allowVariableZoom(i,o){const d=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,p=s.ae(78.5-d/2,0,60);return!!o.terrain||i.pitch>p}allowWorldCopies(){return!0}recalculateCache(){}}class Sa{constructor(i,o,d){this.points=i,this.planes=o,this.aabb=d}static fromInvProjectionMatrix(i,o=1,d=0){const p=Math.pow(2,d),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Y=>{const Q=1/(Y=s.at([],Y,i))[3]/o*p;return s.aR(Y,Y,[Q,Q,1/Y[3],Q])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Y=>{const Q=s.aS([],b[Y[0]],b[Y[1]]),z=s.aS([],b[Y[2]],b[Y[1]]),Z=s.aT([],s.aU([],Q,z)),J=-s.aV(Z,b[Y[1]]);return Z.concat(J)}),U=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],T=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Y of b)for(let Q=0;Q<3;Q++)U[Q]=Math.min(U[Q],Y[Q]),T[Q]=Math.max(T[Q],Y[Q]);return new Sa(b,w,new zs(U,T))}}class Vn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,o,d){return this._helper.interpolatePadding(i,o,d)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,o,d=!0){this._helper.resize(i,o,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,o){this._helper.overrideNearFarZ(i,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,o){}constructor(i,o,d,p,b){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Qr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(w,U)=>this.getConstrained(w,U)},i,o,d,p,b),this._coveringTilesDetailsProvider=new KA}clone(){const i=new Vn;return i.apply(this),i}apply(i,o,d){this._helper.apply(i,o,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){const o=[new s.aW(0,i)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new s.P(0,0)),p=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),U=Math.floor(Math.min(d.x,p.x,b.x,w.x)),T=Math.floor(Math.max(d.x,p.x,b.x,w.x)),Y=1;for(let Q=U-Y;Q<=T+Y;Q++)Q!==0&&o.push(new s.aW(Q,i))}return o}getCameraFrustum(){return Sa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){const o=this.screenPointToLocation(this.centerPoint,i),d=i?i.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(i,o){const d=s.ag(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(o,d),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),w=s.$.fromLngLat(i),U=new s.$(w.x-(p.x-b.x),w.y-(p.y-b.y));this.setCenter(U==null?void 0:U.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,o){return o?this.coordinatePoint(s.$.fromLngLat(i),o.getElevationForLngLatZoom(i,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(i))}screenPointToLocation(i,o){var d;return(d=this.screenPointToMercatorCoordinate(i,o))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(i,o){if(o){const d=o.pointCoordinate(i);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,o){const d=o||0,p=[i.x,i.y,0,1],b=[i.x,i.y,1,1];s.at(p,p,this._pixelMatrixInverse),s.at(b,b,this._pixelMatrixInverse);const w=p[3],U=b[3],T=p[1]/w,Y=b[1]/U,Q=p[2]/w,z=b[2]/U,Z=Q===z?0:(d-Q)/(z-Q);return new s.$(s.B.number(p[0]/w,b[0]/U,Z)/this.worldSize,s.B.number(T,Y,Z)/this.worldSize,d)}coordinatePoint(i,o=0,d=this._pixelMatrix){const p=[i.x*this.worldSize,i.y*this.worldSize,o,1];return s.at(p,p,d),new s.P(p[0]/p[3],p[1]/p[3])}getBounds(){const i=Math.max(0,this._helper._height/2-ze(this));return new Nt().extend(this.screenPointToLocation(new s.P(0,i))).extend(this.screenPointToLocation(new s.P(this._helper._width,i))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(i,o){return o?o.pointCoordinate(i)!=null:i.y>this.height/2-ze(this)}calculatePosMatrix(i,o=!1,d){var p;const b=(p=i.key)!==null&&p!==void 0?p:s.aX(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),w=o?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(b)){const Y=w.get(b);return d?Y.f32:Y.f64}const U=ae(i,this.worldSize);s.N(U,o?this._alignedProjMatrix:this._viewProjMatrix,U);const T={f64:U,f32:new Float32Array(U)};return w.set(b,T),d?T.f32:T.f64}calculateFogMatrix(i){const o=i.key,d=this._fogMatrixCacheF32;if(d.has(o))return d.get(o);const p=ae(i,this.worldSize);return s.N(p,this._fogMatrix,p),d.set(o,new Float32Array(p)),d.get(o)}getConstrained(i,o){o=s.ae(+o,this.minZoom,this.maxZoom);const d={center:new s.Q(i.lng,i.lat),zoom:o};let p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);const b=this.tileSize*s.ac(d.zoom);let w=0,U=b,T=0,Y=b,Q=0,z=0;const{x:Z,y:J}=this.size;if(this._helper._latRange){const Me=this._helper._latRange;w=s.S(Me[1])*b,U=s.S(Me[0])*b,U-w<J&&(Q=J/(U-w))}p&&(T=s.aL(s.U(p[0])*b,0,b),Y=s.aL(s.U(p[1])*b,0,b),Y<T&&(Y+=b),Y-T<Z&&(z=Z/(Y-T)));const{x:te,y:me}=na(b,i);let pe,_e;const xe=Math.max(z||0,Q||0);if(xe){const Me=new s.P(z?(Y+T)/2:te,Q?(U+w)/2:me);return d.center=va(b,Me).wrap(),d.zoom+=s.ah(xe),d}if(this._helper._latRange){const Me=J/2;me-Me<w&&(_e=w+Me),me+Me>U&&(_e=U-Me)}if(p){const Me=(T+Y)/2;let Re=te;this._helper._renderWorldCopies&&(Re=s.aL(te,Me-b/2,Me+b/2));const Fe=Z/2;Re-Fe<T&&(pe=T+Fe),Re+Fe>Y&&(pe=Y-Fe)}if(pe!==void 0||_e!==void 0){const Me=new s.P(pe??te,_e??me);d.center=va(b,Me).wrap()}return d}calculateCenterFromCameraLngLatAlt(i,o,d,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,o,d,p)}_calculateNearFarZIfNeeded(i,o,d){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=i-p*this._helper._pixelPerMeter/Math.cos(o),w=p<0?b:i,U=Math.PI/2+this.pitchInRadians,T=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+d.y/this.height),Y=Math.sin(T)*w/Math.sin(s.ae(Math.PI-U-T,.01,Math.PI-.01)),Q=ze(this),z=Math.atan(Q/this._helper.cameraToCenterDistance),Z=s.ab(.75),J=z>Z?2*z*(.5+d.y/(2*Q)):Z,te=Math.sin(J)*w/Math.sin(s.ae(Math.PI-U-J,.01,Math.PI-.01)),me=Math.min(Y,te);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*me+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const i=this.centerOffset,o=na(this.worldSize,this.center),d=o.x,p=o.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;const b=s.ab(Math.min(this.pitch,sa)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let U;this._calculateNearFarZIfNeeded(w,b,i),U=new Float64Array(16),s.aY(U,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,U),U[8]=2*-i.x/this._helper._width,U[9]=2*i.y/this._helper._height,this._projectionMatrix=s.aZ(U),s.M(U,U,[1,-1,1]),s.L(U,U,[0,0,-this._helper.cameraToCenterDistance]),s.a_(U,U,-this.rollInRadians),s.a$(U,U,this.pitchInRadians),s.a_(U,U,-this.bearingInRadians),s.L(U,U,[-d,-p,0]),this._mercatorMatrix=s.M([],U,[this.worldSize,this.worldSize,this.worldSize]),s.M(U,U,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,U),s.L(U,U,[0,0,-this.elevation]),this._viewProjMatrix=U,this._invViewProjMatrix=s.an([],U);const T=[0,0,-1,1];s.at(T,T,this._invViewProjMatrix),this._cameraPosition=[T[0]/T[3],T[1]/T[3],T[2]/T[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-d,-p,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,U);const Y=this._helper._width%2/2,Q=this._helper._height%2/2,z=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),J=d-Math.round(d)+z*Y+Z*Q,te=p-Math.round(p)+z*Q+Z*Y,me=new Float64Array(U);if(s.L(me,me,[J>.5?J-1:J,te>.5?te-1:te,0]),this._alignedProjMatrix=me,U=s.an(new Float64Array(16),this._pixelMatrix),!U)throw new Error("failed to invert matrix");this._pixelMatrixInverse=U,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const i=this.screenPointToMercatorCoordinate(new s.P(0,0)),o=[i.x*this.worldSize,i.y*this.worldSize,0,1];return s.at(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const i=s.ag(1,this.center.lat)*this.worldSize;return re(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,o){const d=s.$.fromLngLat(i),p=[d.x*this.worldSize,d.y*this.worldSize,o,1];return s.at(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(i){const{overscaledTileID:o,aligned:d,applyTerrainMatrix:p}=i,b=this._helper.getMercatorTileCoordinates(o),w=o?this.calculatePosMatrix(o,d,!0):null;let U;return U=o&&o.terrainRttPosMatrix32f&&p?o.terrainRttPosMatrix32f:w||s.b0(),{mainMatrix:U,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:U}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,o,d){return 1}transformLightDirection(i){return s.aQ(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,o,d,p){const b=this.calculatePosMatrix(d);let w;p?(w=[i,o,p(i,o),1],s.at(w,w,b)):(w=[i,o,0,1],Ei(w,w,b));const U=w[3];return{point:new s.P(w[0]/U,w[1]/U),signedDistanceFromCamera:U,isOccluded:!1}}populateCache(i){for(const o of i)this.calculatePosMatrix(o)}getMatrixForModel(i,o){const d=s.$.fromLngLat(i,o),p=d.meterInMercatorCoordinateUnits(),b=s.b1();return s.L(b,b,[d.x,d.y,d.z]),s.a_(b,b,Math.PI),s.a$(b,b,Math.PI/2),s.M(b,b,[-p,p,p]),b}getProjectionDataForCustomLayer(i=!0){const o=new s.Y(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:i}),p=ae(o,this.worldSize);s.N(p,this._viewProjMatrix,p),d.tileMercatorCoords=[0,0,1,1];const b=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],w=s.b2();return s.M(w,p,b),d.fallbackMatrix=w,d.mainMatrix=w,d}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function Zs(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function $A(_){if(_.useSlerp)if(_.k<1){const i=s.b3(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),o=s.b3(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),d=new Float64Array(4);s.b4(d,i,o,_.k);const p=s.b5(d);_.tr.setRoll(p.roll),_.tr.setPitch(p.pitch),_.tr.setBearing(p.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(s.B.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(s.B.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(s.B.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function gn(_,i,o,d,p){const b=p.padding,w=na(p.worldSize,o.getNorthWest()),U=na(p.worldSize,o.getNorthEast()),T=na(p.worldSize,o.getSouthEast()),Y=na(p.worldSize,o.getSouthWest()),Q=s.ab(-d),z=w.rotate(Q),Z=U.rotate(Q),J=T.rotate(Q),te=Y.rotate(Q),me=new s.P(Math.max(z.x,Z.x,te.x,J.x),Math.max(z.y,Z.y,te.y,J.y)),pe=new s.P(Math.min(z.x,Z.x,te.x,J.x),Math.min(z.y,Z.y,te.y,J.y)),_e=me.sub(pe),xe=(p.width-(b.left+b.right+i.left+i.right))/_e.x,Me=(p.height-(b.top+b.bottom+i.top+i.bottom))/_e.y;if(Me<0||xe<0)return void Zs();const Re=Math.min(s.ah(p.scale*Math.min(xe,Me)),_.maxZoom),Fe=s.P.convert(_.offset),Pe=new s.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(s.ab(d)),Ye=Fe.add(Pe).mult(p.scale/s.ac(Re));return{center:va(p.worldSize,w.add(T).div(2).sub(Ye)),zoom:Re,bearing:d}}class qA{get useGlobeControls(){return!1}handlePanInertia(i,o){return{easingOffset:i,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(i,o){i.bearingDelta&&o.setBearing(o.bearing+i.bearingDelta),i.pitchDelta&&o.setPitch(o.pitch+i.pitchDelta),i.rollDelta&&o.setRoll(o.roll+i.rollDelta),i.zoomDelta&&o.setZoom(o.zoom+i.zoomDelta)}handleMapControlsPan(i,o,d){i.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(d,i.around)}cameraForBoxAndBearing(i,o,d,p,b){return gn(i,o,d,p,b)}handleJumpToCenterZoom(i,o){i.zoom!==(o.zoom!==void 0?+o.zoom:i.zoom)&&i.setZoom(+o.zoom),o.center!==void 0&&i.setCenter(s.Q.convert(o.center))}handleEaseTo(i,o){const d=i.zoom,p=i.padding,b={roll:i.roll,pitch:i.pitch,bearing:i.bearing},w={roll:o.roll===void 0?i.roll:o.roll,pitch:o.pitch===void 0?i.pitch:o.pitch,bearing:o.bearing===void 0?i.bearing:o.bearing},U=o.zoom!==void 0,T=!i.isPaddingEqual(o.padding);let Y=!1;const Q=U?+o.zoom:i.zoom;let z=i.centerPoint.add(o.offsetAsPoint);const Z=i.screenPointToLocation(z),{center:J,zoom:te}=i.getConstrained(s.Q.convert(o.center||Z),Q??d);_r(i,J);const me=na(i.worldSize,Z),pe=na(i.worldSize,J).sub(me),_e=s.ac(te-d);return Y=te!==d,{easeFunc:xe=>{if(Y&&i.setZoom(s.B.number(d,te,xe)),s.b6(b,w)||$A({startEulerAngles:b,endEulerAngles:w,tr:i,k:xe,useSlerp:b.roll!=w.roll}),T&&(i.interpolatePadding(p,o.padding,xe),z=i.centerPoint.add(o.offsetAsPoint)),o.around)i.setLocationAtPoint(o.around,o.aroundPoint);else{const Me=s.ac(i.zoom-d),Re=te>d?Math.min(2,_e):Math.max(.5,_e),Fe=Math.pow(Re,1-xe),Pe=va(i.worldSize,me.add(pe.mult(xe*Fe)).mult(Me));i.setLocationAtPoint(i.renderWorldCopies?Pe.wrap():Pe,z)}},isZooming:Y,elevationCenter:J}}handleFlyTo(i,o){const d=o.zoom!==void 0,p=i.zoom,b=i.getConstrained(s.Q.convert(o.center||o.locationAtOffset),d?+o.zoom:p),w=b.center,U=b.zoom;_r(i,w);const T=na(i.worldSize,o.locationAtOffset),Y=na(i.worldSize,w).sub(T),Q=Y.mag(),z=s.ac(U-p);let Z;if(o.minZoom!==void 0){const J=Math.min(+o.minZoom,p,U),te=i.getConstrained(w,J).zoom;Z=s.ac(te-p)}return{easeFunc:(J,te,me,pe)=>{i.setZoom(J===1?U:p+s.ah(te));const _e=J===1?w:va(i.worldSize,T.add(Y.mult(me)).mult(te));i.setLocationAtPoint(i.renderWorldCopies?_e.wrap():_e,pe)},scaleOfZoom:z,targetCenter:w,scaleOfMinZoom:Z,pixelPathLength:Q}}}class Wi{constructor(i,o,d){this.blendFunction=i,this.blendColor=o,this.mask=d}}Wi.Replace=[1,0],Wi.disabled=new Wi(Wi.Replace,s.b7.transparent,[!1,!1,!1,!1]),Wi.unblended=new Wi(Wi.Replace,s.b7.transparent,[!0,!0,!0,!0]),Wi.alphaBlended=new Wi([1,771],s.b7.transparent,[!0,!0,!0,!0]);const Vh=2305;class Oi{constructor(i,o,d){this.enable=i,this.mode=o,this.frontFace=d}}Oi.disabled=new Oi(!1,1029,Vh),Oi.backCCW=new Oi(!0,1029,Vh),Oi.frontCCW=new Oi(!0,1028,Vh);class Mi{constructor(i,o,d){this.func=i,this.mask=o,this.range=d}}Mi.ReadOnly=!1,Mi.ReadWrite=!0,Mi.disabled=new Mi(519,Mi.ReadOnly,[0,1]);const Wo=7680;class Di{constructor(i,o,d,p,b,w){this.test=i,this.ref=o,this.mask=d,this.fail=p,this.depthFail=b,this.pass=w}}Di.disabled=new Di({func:519,mask:0},0,0,Wo,Wo,Wo);const WA=new WeakMap;function Cn(_){var i;if(WA.has(_))return WA.get(_);{const o=(i=_.getParameter(_.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return WA.set(_,o),o}}class Jo{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;const o=i.context,d=o.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const p=new s.aI;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const b=new s.aK;b.emplaceBack(0,1,2),this._fullscreenTriangle=new qo(o.createVertexBuffer(p,Xn.members),o.createIndexBuffer(b),s.aJ.simpleSegment(0,0,p.length,b.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(d.TEXTURE1);const w=d.createTexture();d.bindTexture(d.TEXTURE_2D,w),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),Cn(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,o){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const i=this._cachedRenderContext.context,o=i.gl;i.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,o){const d=this._cachedRenderContext.context,p=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,p.TRIANGLES,Mi.disabled,Di.disabled,Wi.unblended,Oi.disabled,((b,w)=>({u_input:b,u_output_expected:w}))(i,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Cn(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const b=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Cn(i)){const o=i.clientWaitSync(this._readbackQueue.sync,0,0);if(o===i.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Jo._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let o=0;return o+=i[0]/256,o+=i[1]/65536,o+=i[2]/16777216,i[3]<127&&(o=-o),o/128}}const Kl=s.Z/128;function $l(_,i){const o=_.granularity!==void 0?Math.max(_.granularity,1):1,d=o+(_.generateBorders?2:0),p=o+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=d+1,w=p+1,U=_.generateBorders?-1:0,T=_.generateBorders||_.extendToNorthPole?-1:0,Y=o+(_.generateBorders?1:0),Q=o+(_.generateBorders||_.extendToSouthPole?1:0),z=b*w,Z=d*p*6,J=b*w>65536;if(J&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const te=J||i==="32bit",me=new Int16Array(2*z);let pe=0;for(let Me=T;Me<=Q;Me++)for(let Re=U;Re<=Y;Re++){let Fe=Re/o*s.Z;Re===-1&&(Fe=-64),Re===o+1&&(Fe=s.Z+Kl);let Pe=Me/o*s.Z;Me===-1&&(Pe=_.extendToNorthPole?s.b9:-64),Me===o+1&&(Pe=_.extendToSouthPole?s.ba:s.Z+Kl),me[pe++]=Fe,me[pe++]=Pe}const _e=te?new Uint32Array(Z):new Uint16Array(Z);let xe=0;for(let Me=0;Me<p;Me++)for(let Re=0;Re<d;Re++){const Fe=Re+1+Me*b,Pe=Re+(Me+1)*b,Ye=Re+1+(Me+1)*b;_e[xe++]=Re+Me*b,_e[xe++]=Pe,_e[xe++]=Fe,_e[xe++]=Fe,_e[xe++]=Pe,_e[xe++]=Ye}return{vertices:me.buffer.slice(0),indices:_e.buffer.slice(0),uses32bitIndices:te}}const eA=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class JA{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Fi.projectionGlobe}get vertexShaderPreludeCode(){return Fi.projectionMercator.vertexSource}get subdivisionGranularity(){return eA}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new Jo(i));const o=s.S(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(o,d),b=F.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=b);const w=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(w))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,o,d,p,b){const w=(b==="stencil"?eA.stencil:eA.tile).getGranularityForZoomLevel(o.z);return this._getMesh(i,{granularity:w,generateBorders:d,extendToNorthPole:o.y===0&&p,extendToSouthPole:o.y===(1<<o.z)-1&&p})}_getMesh(i,o){const d=this._getMeshKey(o);if(d in this._tileMeshCache)return this._tileMeshCache[d];const p=function(b,w){const U=$l(w,"16bit"),T=s.aI.deserialize({arrayBuffer:U.vertices,length:U.vertices.byteLength/2/2}),Y=s.aK.deserialize({arrayBuffer:U.indices,length:U.indices.byteLength/2/3});return new qo(b.createVertexBuffer(T,Xn.members),b.createIndexBuffer(Y),s.aJ.simpleSegment(0,0,T.length,Y.length))}(i,o);return this._tileMeshCache[d]=p,p}recalculate(i){}hasTransition(){const i=F.now();let o=!1;return o=o||(i-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}const el=new s.r({type:new s.D(s.v.projection.type)});class E0 extends s.E{constructor(i){super(),this._transitionable=new s.T(el),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new Ta,this._verticalPerspectiveProjection=new JA}get transitionState(){const i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof s.be){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,o,d,p,b){return this.currentProjection.getMeshFromTileID(i,o,d,p,b)}setProjection(i){this._transitionable.setValue("type",(i==null?void 0:i.type)||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function ql(_){const i=Wl(_.worldSize,_.center.lat);return 2*Math.PI*i}function tA(_,i,o,d,p){const b=1/(1<<p),w=i/s.Z*b+d*b,U=s.bg((_/s.Z*b+o*b)*Math.PI*2+Math.PI,2*Math.PI),T=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,Y=Math.cos(T),Q=new Float64Array(3);return Q[0]=Math.sin(U)*Y,Q[1]=Math.sin(T),Q[2]=Math.cos(U)*Y,Q}function Rr(_){return function(i,o){const d=Math.cos(o),p=new Float64Array(3);return p[0]=Math.sin(i)*d,p[1]=Math.sin(o),p[2]=Math.cos(i)*d,p}(_.lng*Math.PI/180,_.lat*Math.PI/180)}function Wl(_,i){return _/(2*Math.PI)/Math.cos(i*Math.PI/180)}function Vr(_){const i=Math.asin(_[1])/Math.PI*180,o=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(o>1e-6){const d=_[0]/o,p=Math.acos(_[2]/o),b=(d>0?p:-p)/Math.PI*180;return new s.Q(s.aL(b,-180,180),i)}return new s.Q(0,i)}function iA(_){return Math.cos(_*Math.PI/180)}function ua(_,i){const o=iA(_),d=iA(i);return s.ah(d/o)}function tl(_,i){const o=_.rotate(i.bearingInRadians),d=i.zoom+ua(i.center.lat,0),p=s.bc(1/iA(i.center.lat),1/iA(Math.min(Math.abs(i.center.lat),60)),s.bf(d,7,3,0,1)),b=360/ql({worldSize:i.worldSize,center:{lat:i.center.lat}});return new s.Q(i.center.lng-o.x*b*p,s.ae(i.center.lat+o.y*b,-85.051129,s.af))}function Jl(_){const i=.5*_,o=Math.sin(i),d=Math.cos(i);return Math.log(o+d)-Math.log(d-o)}function Gh(_,i,o,d){const p=_.lat+o*d;if(Math.abs(o)>1){const b=(Math.sign(_.lat+o)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,w=Math.abs(_.lat+o)*Math.PI/180,U=Jl(b+d*(w-b)),T=Jl(b),Y=Jl(w);return new s.Q(_.lng+i*((U-T)/(Y-T)),p)}return new s.Q(_.lng+i*d,p)}class aA{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=i}recalculateCache(){if(!this._hadAnyChanges)return;const i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(i,o,d,p){const b=`${i.z}_${i.x}_${i.y}`,w=this._cache.get(b);if(w)return w;const U=this._cachePrevious.get(b);if(U)return this._cache.set(b,U),U;const T=this._aabbFactory(i,o,d,p);return this._cache.set(b,T),this._hadAnyChanges=!0,T}}function ec(_,i,o){const d=_-i;return d<0?-d:Math.max(0,d-o)}function jh(_,i,o,d,p){const b=_-o;let w;return w=b<0?Math.min(-b,1+b-p):b>1?Math.min(Math.max(b-p,0),1-b):0,Math.max(w,ec(i,d,p))}class cp{constructor(){this._aabbCache=new aA(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(i,o,d,p){const b=1<<d.z,w=1/b,U=d.x/b,T=d.y/b;let Y=2;return Y=Math.min(Y,jh(i,o,U,T,w)),Y=Math.min(Y,jh(i,o,U+.5,-T-w,w)),Y=Math.min(Y,jh(i,o,U+.5,2-T-w,w)),Y}getWrap(i,o,d){const p=1<<o.z,b=1/p,w=o.x/p,U=ec(i.x,w,b),T=ec(i.x,w-1,b),Y=ec(i.x,w+1,b),Q=Math.min(U,T,Y);return Q===Y?1:Q===T?-1:0}allowVariableZoom(i,o){return Ge(i,o)>4}allowWorldCopies(){return!1}getTileAABB(i,o,d,p){return this._aabbCache.getTileAABB(i,o,d,p)}_computeTileAABB(i,o,d,p){if(i.z<=0)return new zs([-1,-1,-1],[1,1,1]);if(i.z===1)return new zs([i.x===0?-1:0,i.y===0?0:-1,-1],[i.x===0?0:1,i.y===0?1:0,1]);{const b=[tA(0,0,i.x,i.y,i.z),tA(s.Z,0,i.x,i.y,i.z),tA(s.Z,s.Z,i.x,i.y,i.z),tA(0,s.Z,i.x,i.y,i.z)],w=[1,1,1],U=[-1,-1,-1];for(const T of b)for(let Y=0;Y<3;Y++)w[Y]=Math.min(w[Y],T[Y]),U[Y]=Math.max(U[Y],T[Y]);if(i.y===0||i.y===(1<<i.z)-1){const T=[0,i.y===0?1:-1,0];for(let Y=0;Y<3;Y++)w[Y]=Math.min(w[Y],T[Y]),U[Y]=Math.max(U[Y],T[Y])}return new zs(w,U)}}}class tc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,o,d){return this._helper.interpolatePadding(i,o,d)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,o){this._helper.resize(i,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,o){this._helper.overrideNearFarZ(i,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Qr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,o)=>this.getConstrained(i,o)}),this._coveringTilesDetailsProvider=new cp}clone(){const i=new tc;return i.apply(this),i}apply(i,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(i)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const i=s.bh();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){const{overscaledTileID:o,applyGlobeMatrix:d}=i,p=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){const o=this.pitchInRadians,d=this.cameraToCenterDistance/i,p=Math.sin(o)*d,b=Math.cos(o)*d+1,w=1/Math.sqrt(p*p+b*b)*1;let U=-p,T=b;const Y=Math.sqrt(U*U+T*T);U/=Y,T/=Y;const Q=[0,U,T];s.bl(Q,Q,[0,0,0],-this.bearingInRadians),s.bm(Q,Q,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(Q,Q,[0,0,0],this.center.lng*Math.PI/180);const z=1/s.bo(Q);return s.aO(Q,Q,z),[...Q,-w*z]}isLocationOccluded(i){return!this.isSurfacePointVisible(Rr(i))}transformLightDirection(i){const o=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,p=Math.cos(d),b=[Math.sin(o)*p,Math.sin(d),Math.cos(o)*p],w=[b[2],0,-b[0]],U=[0,0,0];s.aU(U,w,b),s.aT(w,w),s.aT(U,U);const T=[0,0,0];return s.aT(T,[w[0]*i[0]+U[0]*i[1]+b[0]*i[2],w[1]*i[0]+U[1]*i[1]+b[1]*i[2],w[2]*i[0]+U[2]*i[1]+b[2]*i[2]]),T}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,o,d){const p=function(U,T,Y){const Q=1/(1<<Y.z);return new s.$(U/s.Z*Q+Y.x*Q,T/s.Z*Q+Y.y*Q)}(i,o,d.canonical),b=(w=p.y,[s.bg(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(i,o,d,p){const b=d.canonical,w=tA(i,o,b.x,b.y,b.z),U=1+(p?p(i,o):0)/s.bu,T=[w[0]*U,w[1]*U,w[2]*U,1];s.at(T,T,this._globeViewProjMatrixNoCorrection);const Y=this._cachedClippingPlane,Q=Y[0]*w[0]+Y[1]*w[1]+Y[2]*w[2]+Y[3]<0;return{point:new s.P(T[0]/T[3],T[1]/T[3]),signedDistanceFromCamera:T[3],isOccluded:Q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const i=Wl(this.worldSize,this.center.lat),o=s.b2(),d=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),s.aY(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;o[8]=2*-p.x/this._helper._width,o[9]=2*p.y/this._helper._height,this._projectionMatrix=s.aZ(o),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,o),s.L(o,o,[0,0,-this.cameraToCenterDistance]),s.a_(o,o,this.rollInRadians),s.a$(o,o,-this.pitchInRadians),s.a_(o,o,this.bearingInRadians),s.L(o,o,[0,0,-i]);const b=s.bh();b[0]=i,b[1]=i,b[2]=i,s.a$(d,o,this.center.lat*Math.PI/180),s.bp(d,d,-this.center.lng*Math.PI/180),s.M(d,d,b),this._globeViewProjMatrixNoCorrection=d,s.a$(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(o,o,-this.center.lng*Math.PI/180),s.M(o,o,b),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,d);const w=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/i,s.bl(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);const U=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(U,U,[1,1,-1]),this._cachedFrustum=Sa.fromInvProjectionMatrix(U)}calculateFogMatrix(i){s.w("calculateFogMatrix is not supported on globe projection.");const o=s.b2();return s.ad(o),o}getVisibleUnwrappedCoordinates(i){return[new s.aW(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=Rr(i);s.aO(d,d,1+o/s.bu);const p=s.bk();return s.at(p,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(i){}getBounds(){const i=.5*this.width,o=.5*this.height,d=[new s.P(0,0),new s.P(i,0),new s.P(this.width,0),new s.P(this.width,o),new s.P(this.width,this.height),new s.P(i,this.height),new s.P(0,this.height),new s.P(0,o)],p=[];for(const z of d)p.push(this.unprojectScreenPoint(z));let b=0,w=0,U=0,T=0;const Y=this.center;for(const z of p){const Z=s.bq(Y.lng,z.lng),J=s.bq(Y.lat,z.lat);Z<w&&(w=Z),Z>b&&(b=Z),J<T&&(T=J),J>U&&(U=J)}const Q=[Y.lng+w,Y.lat+T,Y.lng+b,Y.lat+U];return this.isSurfacePointOnScreen([0,1,0])&&(Q[3]=90,Q[0]=-180,Q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Q[1]=-90,Q[0]=-180,Q[2]=180),new Nt(Q)}getConstrained(i,o){const d=s.ae(i.lat,-85.051129,s.af),p=s.ae(+o,this.minZoom+ua(0,d),this.maxZoom);return{center:new s.Q(i.lng,d),zoom:p}}calculateCenterFromCameraLngLatAlt(i,o,d,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,o,d,p)}setLocationAtPoint(i,o){const d=Rr(this.unprojectScreenPoint(o)),p=Rr(i),b=s.bh();s.br(b);const w=s.bh();s.bn(w,d,b,-this.center.lng*Math.PI/180),s.bm(w,w,b,this.center.lat*Math.PI/180);const U=p[0]*p[0]+p[2]*p[2],T=w[0]*w[0];if(U<T)return;const Y=Math.sqrt(U-T),Q=-Y,z=s.bs(p[0],p[2],w[0],Y),Z=s.bs(p[0],p[2],w[0],Q),J=s.bh();s.bn(J,p,b,-z);const te=s.bs(J[1],J[2],w[1],w[2]),me=s.bh();s.bn(me,p,b,-Z);const pe=s.bs(me[1],me[2],w[1],w[2]),_e=.5*Math.PI,xe=te>=-_e&&te<=_e,Me=pe>=-_e&&pe<=_e;let Re,Fe;if(xe&&Me){const qe=this.center.lng*Math.PI/180,At=this.center.lat*Math.PI/180;s.bv(z,qe)+s.bv(te,At)<s.bv(Z,qe)+s.bv(pe,At)?(Re=z,Fe=te):(Re=Z,Fe=pe)}else if(xe)Re=z,Fe=te;else{if(!Me)return;Re=Z,Fe=pe}const Pe=Re/Math.PI*180,Ye=Fe/Math.PI*180,Ke=this.center.lat;this.setCenter(new s.Q(Pe,s.ae(Ye,-90,90))),this.setZoom(this.zoom+ua(Ke,this.center.lat))}locationToScreenPoint(i,o){const d=Rr(i);if(o){const p=o.getElevationForLngLatZoom(i,this._helper._tileZoom);s.aO(d,d,1+p/s.bu)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(i){const o=s.bk();return s.at(o,[...i,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new s.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,o){if(o){const d=o.pointCoordinate(i);if(d)return d}return s.$.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,o){var d;return(d=this.screenPointToMercatorCoordinate(i,o))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(i,o){const d=this._cameraPosition,p=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(d,p)}getRayDirectionFromPixel(i){const o=s.bk();o[0]=i.x/this.width*2-1,o[1]=-1*(i.y/this.height*2-1),o[2]=1,o[3]=1,s.at(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const d=s.bh();d[0]=o[0]-this._cameraPosition[0],d[1]=o[1]-this._cameraPosition[1],d[2]=o[2]-this._cameraPosition[2];const p=s.bh();return s.aT(p,d),p}isSurfacePointVisible(i){const o=this._cachedClippingPlane;return o[0]*i[0]+o[1]*i[1]+o[2]*i[2]+o[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;const o=s.bk();return s.at(o,[...i,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(i,o){const d=s.aV(i,o),p=s.bh(),b=s.bh();s.aO(b,o,d),s.aS(p,i,b);const w=1-s.aV(p,p);if(w<0)return null;const U=s.aV(i,i)-1,T=-d+(d<0?1:-1)*Math.sqrt(w),Y=U/T,Q=T;return{tMin:Math.min(Y,Q),tMax:Math.max(Y,Q)}}unprojectScreenPoint(i){const o=this._cameraPosition,d=this.getRayDirectionFromPixel(i),p=this.rayPlanetIntersection(o,d);if(p){const Q=s.bh();s.aP(Q,o,[d[0]*p.tMin,d[1]*p.tMin,d[2]*p.tMin]);const z=s.bh();return s.aT(z,Q),Vr(z)}const b=this._cachedClippingPlane,w=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],U=-s.bt(b,o)/w,T=s.bh();if(U>0)s.aP(T,o,[d[0]*U,d[1]*U,d[2]*U]);else{const Q=s.bh();s.aP(Q,o,[2*d[0],2*d[1],2*d[2]]);const z=s.bt(this._cachedClippingPlane,Q);s.aS(T,Q,[this._cachedClippingPlane[0]*z,this._cachedClippingPlane[1]*z,this._cachedClippingPlane[2]*z])}const Y=function(Q){const z=s.bh();return z[0]=Q[0]*-Q[3],z[1]=Q[1]*-Q[3],z[2]=Q[2]*-Q[3],{center:z,radius:Math.sqrt(1-Q[3]*Q[3])}}(b);return Vr(function(Q,z,Z){const J=s.bh();s.aS(J,Z,Q);const te=s.bh();return s.bi(te,Q,J,z/s.bj(J)),te}(Y.center,Y.radius,T))}getMatrixForModel(i,o){const d=s.Q.convert(i),p=1/s.bu,b=s.b1();return s.bp(b,b,d.lng/180*Math.PI),s.a$(b,b,-d.lat/180*Math.PI),s.L(b,b,[0,0,1+o/s.bu]),s.a$(b,b,.5*Math.PI),s.M(b,b,[p,p,p]),b}getProjectionDataForCustomLayer(i=!0){const o=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:i});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(i){}}class ic{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,o,d){return this._helper.interpolatePadding(i,o,d)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,o,d=!0){this._helper.resize(i,o,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,o){this._helper.overrideNearFarZ(i,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,o){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Qr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,o)=>this.getConstrained(i,o)}),this._globeness=1,this._mercatorTransform=new Vn,this._verticalPerspectiveTransform=new tc}clone(){const i=new ic;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this),i}apply(i){this._helper.apply(i),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){const o=this._mercatorTransform.getProjectionData(i),d=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:o.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,o,d){const p=this._mercatorTransform.getPitchedTextCorrection(i,o,d),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,o,d);return s.bc(p,b,this._globeness)}projectTileCoordinates(i,o,d,p){return this.currentTransform.projectTileCoordinates(i,o,d,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,o){return this.currentTransform.lngLatToCameraDepth(i,o)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}getConstrained(i,o){return this.currentTransform.getConstrained(i,o)}calculateCenterFromCameraLngLatAlt(i,o,d,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,o,d,p)}setLocationAtPoint(i,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(i,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(i,o){return this.currentTransform.locationToScreenPoint(i,o)}screenPointToMercatorCoordinate(i,o){return this.currentTransform.screenPointToMercatorCoordinate(i,o)}screenPointToLocation(i,o){return this.currentTransform.screenPointToLocation(i,o)}isPointOnMapSurface(i,o){return this.currentTransform.isPointOnMapSurface(i,o)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,o){return this.currentTransform.getMatrixForModel(i,o)}getProjectionDataForCustomLayer(i=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return o;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return d.fallbackMatrix=o.mainMatrix,d}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class Mn{get useGlobeControls(){return!0}handlePanInertia(i,o){const d=tl(i,o);return Math.abs(d.lng-o.center.lng)>180&&(d.lng=o.center.lng+179.5*Math.sign(d.lng-o.center.lng)),{easingCenter:d,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,o){const d=i.around,p=o.screenPointToLocation(d);i.bearingDelta&&o.setBearing(o.bearing+i.bearingDelta),i.pitchDelta&&o.setPitch(o.pitch+i.pitchDelta),i.rollDelta&&o.setRoll(o.roll+i.rollDelta);const b=o.zoom;i.zoomDelta&&o.setZoom(o.zoom+i.zoomDelta);const w=o.zoom-b;if(w===0)return;const U=s.bq(o.center.lng,p.lng),T=U/(Math.abs(U/180)+1),Y=s.bq(o.center.lat,p.lat),Q=o.getRayDirectionFromPixel(d),z=o.cameraPosition,Z=-1*s.aV(z,Q),J=s.bh();s.aP(J,z,[Q[0]*Z,Q[1]*Z,Q[2]*Z]);const te=s.bo(J)-1,me=Math.exp(.5*-Math.max(te-.3,0)),pe=Wl(o.worldSize,o.center.lat)/Math.min(o.width,o.height),_e=s.bf(pe,.9,.5,1,.25),xe=(1-s.ac(-w))*Math.min(me,_e),Me=o.center.lat,Re=o.zoom,Fe=new s.Q(o.center.lng+T*xe,s.ae(o.center.lat+Y*xe,-85.051129,s.af));o.setLocationAtPoint(p,d);const Pe=o.center,Ye=s.bf(Math.abs(U),45,85,0,1),Ke=s.bf(pe,.75,.35,0,1),qe=Math.pow(Math.max(Ye,Ke),.25),At=s.bq(Pe.lng,Fe.lng),ht=s.bq(Pe.lat,Fe.lat);o.setCenter(new s.Q(Pe.lng+At*qe,Pe.lat+ht*qe).wrap()),o.setZoom(Re+ua(Me,o.center.lat))}handleMapControlsPan(i,o,d){if(!i.panDelta)return;const p=o.center.lat,b=o.zoom;o.setCenter(tl(i.panDelta,o).wrap()),o.setZoom(b+ua(p,o.center.lat))}cameraForBoxAndBearing(i,o,d,p,b){const w=gn(i,o,d,p,b),U=o.left/b.width*2-1,T=(b.width-o.right)/b.width*2-1,Y=o.top/b.height*-2+1,Q=(b.height-o.bottom)/b.height*-2+1,z=s.bq(d.getWest(),d.getEast())<0,Z=z?d.getEast():d.getWest(),J=z?d.getWest():d.getEast(),te=Math.max(d.getNorth(),d.getSouth()),me=Math.min(d.getNorth(),d.getSouth()),pe=Z+.5*s.bq(Z,J),_e=te+.5*s.bq(te,me),xe=b.clone();xe.setCenter(w.center),xe.setBearing(w.bearing),xe.setPitch(0),xe.setRoll(0),xe.setZoom(w.zoom);const Me=xe.modelViewProjectionMatrix,Re=[Rr(d.getNorthWest()),Rr(d.getNorthEast()),Rr(d.getSouthWest()),Rr(d.getSouthEast()),Rr(new s.Q(J,_e)),Rr(new s.Q(Z,_e)),Rr(new s.Q(pe,te)),Rr(new s.Q(pe,me))],Fe=Rr(w.center);let Pe=Number.POSITIVE_INFINITY;for(const Ye of Re)U<0&&(Pe=Mn.getLesserNonNegativeNonNull(Pe,Mn.solveVectorScale(Ye,Fe,Me,"x",U))),T>0&&(Pe=Mn.getLesserNonNegativeNonNull(Pe,Mn.solveVectorScale(Ye,Fe,Me,"x",T))),Y>0&&(Pe=Mn.getLesserNonNegativeNonNull(Pe,Mn.solveVectorScale(Ye,Fe,Me,"y",Y))),Q<0&&(Pe=Mn.getLesserNonNegativeNonNull(Pe,Mn.solveVectorScale(Ye,Fe,Me,"y",Q)));if(Number.isFinite(Pe)&&Pe!==0)return w.zoom=xe.zoom+s.ah(Pe),w;Zs()}handleJumpToCenterZoom(i,o){const d=i.center.lat,p=i.getConstrained(o.center?s.Q.convert(o.center):i.center,i.zoom).center;i.setCenter(p.wrap());const b=o.zoom!==void 0?+o.zoom:i.zoom+ua(d,p.lat);i.zoom!==b&&i.setZoom(b)}handleEaseTo(i,o){const d=i.zoom,p=i.center,b=i.padding,w={roll:i.roll,pitch:i.pitch,bearing:i.bearing},U={roll:o.roll===void 0?i.roll:o.roll,pitch:o.pitch===void 0?i.pitch:o.pitch,bearing:o.bearing===void 0?i.bearing:o.bearing},T=o.zoom!==void 0,Y=!i.isPaddingEqual(o.padding);let Q=!1;const z=o.center?s.Q.convert(o.center):p,Z=i.getConstrained(z,d).center;_r(i,Z);const J=i.clone();J.setCenter(Z),J.setZoom(T?+o.zoom:d+ua(p.lat,z.lat)),J.setBearing(o.bearing);const te=new s.P(s.ae(i.centerPoint.x+o.offsetAsPoint.x,0,i.width),s.ae(i.centerPoint.y+o.offsetAsPoint.y,0,i.height));J.setLocationAtPoint(Z,te);const me=(o.offset&&o.offsetAsPoint.mag())>0?J.center:Z,pe=T?+o.zoom:d+ua(p.lat,me.lat),_e=d+ua(p.lat,0),xe=pe+ua(me.lat,0),Me=s.bq(p.lng,me.lng),Re=s.bq(p.lat,me.lat),Fe=s.ac(xe-_e);return Q=pe!==d,{easeFunc:Pe=>{if(s.b6(w,U)||$A({startEulerAngles:w,endEulerAngles:U,tr:i,k:Pe,useSlerp:w.roll!=U.roll}),Y&&i.interpolatePadding(b,o.padding,Pe),o.around)s.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(o.around,o.aroundPoint);else{const Ye=xe>_e?Math.min(2,Fe):Math.max(.5,Fe),Ke=Math.pow(Ye,1-Pe),qe=Gh(p,Me,Re,Pe*Ke);i.setCenter(qe.wrap())}if(Q){const Ye=s.B.number(_e,xe,Pe)+ua(0,i.center.lat);i.setZoom(Ye)}},isZooming:Q,elevationCenter:me}}handleFlyTo(i,o){const d=o.zoom!==void 0,p=i.center,b=i.zoom,w=i.padding,U=!i.isPaddingEqual(o.padding),T=i.getConstrained(s.Q.convert(o.center||o.locationAtOffset),b).center,Y=d?+o.zoom:i.zoom+ua(i.center.lat,T.lat),Q=i.clone();Q.setCenter(T),Q.setZoom(Y),Q.setBearing(o.bearing);const z=new s.P(s.ae(i.centerPoint.x+o.offsetAsPoint.x,0,i.width),s.ae(i.centerPoint.y+o.offsetAsPoint.y,0,i.height));Q.setLocationAtPoint(T,z);const Z=Q.center;_r(i,Z);const J=function(Re,Fe,Pe){const Ye=Rr(Fe),Ke=Rr(Pe),qe=s.aV(Ye,Ke),At=Math.acos(qe),ht=ql(Re);return At/(2*Math.PI)*ht}(i,p,Z),te=b+ua(p.lat,0),me=Y+ua(Z.lat,0),pe=s.ac(me-te);let _e;if(typeof o.minZoom=="number"){const Re=+o.minZoom+ua(Z.lat,0),Fe=Math.min(Re,te,me)+ua(0,Z.lat),Pe=i.getConstrained(Z,Fe).zoom+ua(Z.lat,0);_e=s.ac(Pe-te)}const xe=s.bq(p.lng,Z.lng),Me=s.bq(p.lat,Z.lat);return{easeFunc:(Re,Fe,Pe,Ye)=>{const Ke=Gh(p,xe,Me,Pe);U&&i.interpolatePadding(w,o.padding,Re);const qe=Re===1?Z:Ke;i.setCenter(qe.wrap());const At=te+s.ah(Fe);i.setZoom(Re===1?Y:At+ua(0,qe.lat))},scaleOfZoom:pe,targetCenter:Z,scaleOfMinZoom:_e,pixelPathLength:J}}static solveVectorScale(i,o,d,p,b){const w=p==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],U=[d[3],d[7],d[11],d[15]],T=i[0]*w[0]+i[1]*w[1]+i[2]*w[2],Y=i[0]*U[0]+i[1]*U[1]+i[2]*U[2],Q=o[0]*w[0]+o[1]*w[1]+o[2]*w[2],z=o[0]*U[0]+o[1]*U[1]+o[2]*U[2];return Q+b*Y===T+b*z||U[3]*(T-Q)+w[3]*(z-Y)+T*z==Q*Y?null:(Q+w[3]-b*z-b*U[3])/(Q-T-b*z+b*Y)}static getLesserNonNegativeNonNull(i,o){return o!==null&&o>=0&&o<i?o:i}}class il{constructor(i){this._globe=i,this._mercatorCameraHelper=new qA,this._verticalPerspectiveCameraHelper=new Mn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,o){return this.currentHelper.handlePanInertia(i,o)}handleMapControlsRollPitchBearingZoom(i,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,o)}handleMapControlsPan(i,o,d){this.currentHelper.handleMapControlsPan(i,o,d)}cameraForBoxAndBearing(i,o,d,p,b){return this.currentHelper.cameraForBoxAndBearing(i,o,d,p,b)}handleJumpToCenterZoom(i,o){this.currentHelper.handleJumpToCenterZoom(i,o)}handleEaseTo(i,o){return this.currentHelper.handleEaseTo(i,o)}handleFlyTo(i,o){return this.currentHelper.handleFlyTo(i,o)}}const rA=(_,i)=>s.x(_,i&&i.filter(o=>o.identifier!=="source.canvas")),ac=s.bw();class al extends s.E{constructor(i,o={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const p=this.sourceCaches[d].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[d].reload()}},this.map=i,this.dispatcher=new dt(bt(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,p)=>this.getGlyphs(d,p)),this.dispatcher.registerMessageHandler("GI",(d,p)=>this.getImages(d,p)),this.imageManager=new de,this.imageManager.setEventedParent(this),this.glyphManager=new Ve(i._requestManager,o.localIdeographFontFamily),this.lineAtlas=new Yt(256,512),this.crossTileSymbolIndex=new fs,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),ha().on(ea,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const p=this.sourceCaches[d.sourceId];if(!p)return;const b=p.getSource();if(b&&b.vectorLayerIds)for(const w in this._layers){const U=this._layers[w];U.source===b.id&&this._validateLayer(U)}})}loadURL(i,o={},d){this.fire(new s.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const p=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;s.j(p,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,o,d)}).catch(w=>{this._loadStyleRequest=null,w&&!b.signal.aborted&&this.fire(new s.k(w))})}loadJSON(i,o={},d){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,F.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(i,o,d)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(ac,{validate:!1})}_load(i,o,d){var p,b;const w=o.transformStyle?o.transformStyle(d,i):i;if(!o.validate||!rA(this,s.y(w))){this._loaded=!0,this.stylesheet=w;for(const U in w.sources)this.addSource(U,w.sources[U],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new et(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new Mt(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const i=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of i){const d=s.bA(o);d.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=d}}_loadSprite(i,o=!1,d=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,w,U,T){return s._(this,void 0,void 0,function*(){const Y=oe(b),Q=U>1?"@2x":"",z={},Z={};for(const{id:J,url:te}of Y){const me=w.transformRequest(q(te,Q,".json"),"SpriteJSON");z[J]=s.j(me,T);const pe=w.transformRequest(q(te,Q,".png"),"SpriteImage");Z[J]=ce.getImage(pe,T)}return yield Promise.all([...Object.values(z),...Object.values(Z)]),function(J,te){return s._(this,void 0,void 0,function*(){const me={};for(const pe in J){me[pe]={};const _e=F.getImageCanvasContext((yield te[pe]).data),xe=(yield J[pe]).data;for(const Me in xe){const{width:Re,height:Fe,x:Pe,y:Ye,sdf:Ke,pixelRatio:qe,stretchX:At,stretchY:ht,content:ot,textFitWidth:Lt,textFitHeight:Ut}=xe[Me];me[pe][Me]={data:null,pixelRatio:qe,sdf:Ke,stretchX:At,stretchY:ht,content:ot,textFitWidth:Lt,textFitHeight:Ut,spriteData:{width:Re,height:Fe,x:Pe,y:Ye,context:_e}}}}return me})}(z,Z)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(const w in b){this._spritesImagesIds[w]=[];const U=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(T=>!(T in b)):[];for(const T of U)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(const T in b[w]){const Y=w==="default"?T:`${w}:${T}`;this._spritesImagesIds[w].push(Y),Y in this.imageManager.images?this.imageManager.updateImage(Y,b[w][T],!1):this.imageManager.addImage(Y,b[w][T]),o&&(this._changedImages[Y]=!0)}}}).catch(b=>{this._spriteRequest=null,p=b,this.fire(new s.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),d&&d(p)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(i){const o=this.sourceCaches[i.source];if(!o)return;const d=i.sourceLayer;if(!d)return;const p=o.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(d)===-1)&&this.fire(new s.k(new Error(`Source layer "${d}" does not exist on source "${p.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,o=!1){const d=this._serializedAllLayers();if(!i||i.length===0)return Object.values(o?s.bB(d):d);const p=[];for(const b of i)if(d[b]){const w=o?s.bB(d[b]):d[b];p.push(w)}return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const o=Object.keys(this._layers);for(const d of o){const p=this._layers[d];p.type!=="custom"&&(i[d]=p.serialize())}return i}hasTransitions(){var i,o,d;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const o=this._changed;if(o){const p=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(p.length||b.length)&&this._updateWorkerLayers(p,b);for(const w in this._updatedSources){const U=this._updatedSources[w];if(U==="reload")this._reloadSource(w);else{if(U!=="clear")throw new Error(`Invalid action ${U}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const d={};for(const p in this.sourceCaches){const b=this.sourceCaches[p];d[p]=b.used,b.used=!1}for(const p of this._order){const b=this._layers[p];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const p in d){const b=this.sourceCaches[p];!!d[p]!=!!b.used&&b.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,o&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,o={}){var d;this._checkLoaded();const p=this.serialize();if(i=o.transformStyle?o.transformStyle(p,i):i,((d=o.validate)===null||d===void 0||d)&&rA(this,s.y(i)))return!1;(i=s.bB(i)).layers=s.bz(i.layers);const b=s.bC(p,i),w=this._getOperationsToPerform(b);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const U of w.operations)U();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const o=[],d=[];for(const p of i)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":o.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":o.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":o.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setTransition":o.push(()=>{});break;default:d.push(p.command)}return{operations:o,unimplemented:d}}addImage(i,o){if(this.getImage(i))return this.fire(new s.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,o),this._afterImageUpdated(i)}updateImage(i,o){this.imageManager.updateImage(i,o)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,o,d={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(s.y.source,`sources.${i}`,o,null,d))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const p=this.sourceCaches[i]=new We(i,o,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:i})),p.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===i)return this.fire(new s.k(new Error(`Source "${i}" cannot be removed while layer "${d}" is using it.`)));const o=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],o.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,o){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const d=this.sourceCaches[i].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(o),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,o,d={}){this._checkLoaded();const p=i.id;if(this.getLayer(p))return void this.fire(new s.k(new Error(`Layer "${p}" already exists on this map.`)));let b;if(i.type==="custom"){if(rA(this,s.bD(i)))return;b=s.bA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(p,i.source),i=s.bB(i),i=s.e(i,{source:p})),this._validate(s.y.layer,`layers.${p}`,i,{arrayIndex:-1},d))return;b=s.bA(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:p}})}const w=o?this._order.indexOf(o):this._order.length;if(o&&w===-1)this.fire(new s.k(new Error(`Cannot add layer "${p}" before non-existing layer "${o}".`)));else{if(this._order.splice(w,0,p),this._layerOrderChanged=!0,this._layers[p]=b,this._removedLayers[p]&&b.source&&b.type!=="custom"){const U=this._removedLayers[p];delete this._removedLayers[p],U.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,o){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===o)return;const d=this._order.indexOf(i);this._order.splice(d,1);const p=o?this._order.indexOf(o):this._order.length;o&&p===-1?this.fire(new s.k(new Error(`Cannot move layer "${i}" before non-existing layer "${o}".`))):(this._order.splice(p,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const o=this._layers[i];if(!o)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${i}".`)));o.setEventedParent(null);const d=this._order.indexOf(i);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=o,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],o.onRemove&&o.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,o,d){this._checkLoaded();const p=this.getLayer(i);p?p.minzoom===o&&p.maxzoom===d||(o!=null&&(p.minzoom=o),d!=null&&(p.maxzoom=d),this._updateLayer(p)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,o,d={}){this._checkLoaded();const p=this.getLayer(i);if(p){if(!s.bE(p.filter,o))return o==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(s.y.filter,`layers.${p.id}.filter`,o,null,d)||(p.filter=s.bB(o),this._updateLayer(p)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return s.bB(this.getLayer(i).filter)}setLayoutProperty(i,o,d,p={}){this._checkLoaded();const b=this.getLayer(i);b?s.bE(b.getLayoutProperty(o),d)||(b.setLayoutProperty(o,d,p),this._updateLayer(b)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,o){const d=this.getLayer(i);if(d)return d.getLayoutProperty(o);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,o,d,p={}){this._checkLoaded();const b=this.getLayer(i);b?s.bE(b.getPaintProperty(o),d)||(b.setPaintProperty(o,d,p)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,o){return this.getLayer(i).getPaintProperty(o)}setFeatureState(i,o){this._checkLoaded();const d=i.source,p=i.sourceLayer,b=this.sourceCaches[d];if(b===void 0)return void this.fire(new s.k(new Error(`The source '${d}' does not exist in the map's style.`)));const w=b.getSource().type;w==="geojson"&&p?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||p?(i.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(p,i.id,o)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,o){this._checkLoaded();const d=i.source,p=this.sourceCaches[d];if(p===void 0)return void this.fire(new s.k(new Error(`The source '${d}' does not exist in the map's style.`)));const b=p.getSource().type,w=b==="vector"?i.sourceLayer:void 0;b!=="vector"||w?o&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(w,i.id,o):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const o=i.source,d=i.sourceLayer,p=this.sourceCaches[o];if(p!==void 0)return p.getSource().type!=="vector"||d?(i.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(d,i.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=s.bF(this.sourceCaches,b=>b.serialize()),o=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,p=this.stylesheet;return s.bG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:i,layers:o,terrain:d},b=>b!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const o=w=>this._layers[w].type==="fill-extrusion",d={},p=[];for(let w=this._order.length-1;w>=0;w--){const U=this._order[w];if(o(U)){d[U]=w;for(const T of i){const Y=T[U];if(Y)for(const Q of Y)p.push(Q)}}}p.sort((w,U)=>U.intersectionZ-w.intersectionZ);const b=[];for(let w=this._order.length-1;w>=0;w--){const U=this._order[w];if(o(U))for(let T=p.length-1;T>=0;T--){const Y=p[T].feature;if(d[Y.layer.id]<w)break;b.push(Y),p.pop()}else for(const T of i){const Y=T[U];if(Y)for(const Q of Y)b.push(Q.feature)}}return b}queryRenderedFeatures(i,o,d){o&&o.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",o.filter,null,o);const p={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Y of o.layers){const Q=this._layers[Y];if(!Q)return this.fire(new s.k(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];p[Q.source]=!0}}const b=[];o.availableImages=this._availableImages;const w=this._serializedAllLayers(),U=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,T=Object.assign(Object.assign({},o),{layers:U});for(const Y in this.sourceCaches)o.layers&&!p[Y]||b.push(Qt(this.sourceCaches[Y],this._layers,w,i,T,d,this.map.terrain?(Q,z,Z)=>this.map.terrain.getElevation(Q,z,Z):void 0));return this.placement&&b.push(function(Y,Q,z,Z,J,te,me){const pe={},_e=te.queryRenderedSymbols(Z),xe=[];for(const Me of Object.keys(_e).map(Number))xe.push(me[Me]);xe.sort(Ct);for(const Me of xe){const Re=Me.featureIndex.lookupSymbolFeatures(_e[Me.bucketInstanceId],Q,Me.bucketIndex,Me.sourceLayerIndex,J.filter,J.layers,J.availableImages,Y);for(const Fe in Re){const Pe=pe[Fe]=pe[Fe]||[],Ye=Re[Fe];Ye.sort((Ke,qe)=>{const At=Me.featureSortOrder;if(At){const ht=At.indexOf(Ke.featureIndex);return At.indexOf(qe.featureIndex)-ht}return qe.featureIndex-Ke.featureIndex});for(const Ke of Ye)Pe.push(Ke)}}return function(Me,Re,Fe){for(const Pe in Me)for(const Ye of Me[Pe])Zt(Ye,Fe[Re[Pe].source]);return Me}(pe,Y,z)}(this._layers,w,this.sourceCaches,i,T,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,o){o&&o.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",o.filter,null,o);const d=this.sourceCaches[i];return d?function(p,b){const w=p.getRenderableIds().map(Y=>p.getTileByID(Y)),U=[],T={};for(let Y=0;Y<w.length;Y++){const Q=w[Y],z=Q.tileID.canonical.key;T[z]||(T[z]=!0,Q.querySourceFeatures(U,b))}return U}(d,o):[]}getLight(){return this.light.getLight()}setLight(i,o={}){this._checkLoaded();const d=this.light.getLight();let p=!1;for(const w in i)if(!s.bE(i[w],d[w])){p=!0;break}if(!p)return;const b={now:F.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,o),this.light.updateTransitions(b)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,o={}){this._checkLoaded();const d=this.getSky();let p=!1;if(!i&&!d)return;if(i&&!d)p=!0;else if(!i&&d)p=!0;else for(const w in i)if(!s.bE(i[w],d[w])){p=!0;break}if(!p)return;const b={now:F.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,o),this.sky.updateTransitions(b)}_setProjectionInternal(i){const o=function(d){if(Array.isArray(d)){const p=new E0({type:d});return{projection:p,transform:new ic,cameraHelper:new il(p)}}switch(d){case"mercator":return{projection:new Ta,transform:new Vn,cameraHelper:new qA};case"globe":{const p=new E0({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new ic,cameraHelper:new il(p)}}case"vertical-perspective":return{projection:new JA,transform:new tc,cameraHelper:new Mn};default:return s.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new Ta,transform:new Vn,cameraHelper:new qA}}}(i);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const d in this.sourceCaches)this.sourceCaches[d].reload()}_validate(i,o,d,p,b={}){return(!b||b.validate!==!1)&&rA(this,i.call(s.y,s.e({key:o,style:this.serialize(),value:d,styleSpec:s.v},p)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ha().off(ea,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const d=this.sourceCaches[o];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const o in this.sourceCaches)this.sourceCaches[o].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,o,d,p,b=!1){let w=!1,U=!1;const T={};for(const Y of this._order){const Q=this._layers[Y];if(Q.type!=="symbol")continue;if(!T[Q.source]){const Z=this.sourceCaches[Q.source];T[Q.source]=Z.getRenderableIds(!0).map(J=>Z.getTileByID(J)).sort((J,te)=>te.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(te.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(Q,T[Q.source],i.center.lng);w=w||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(F.now(),i.zoom))&&(this.pauseablePlacement=new jl(i,this.map.terrain,this._order,b,o,d,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(F.now()),U=!0),w&&this.pauseablePlacement.placement.setStale()),U||w)for(const Y of this._order){const Q=this._layers[Y];Q.type==="symbol"&&this.placement.updateLayerOpacities(Q,T[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(F.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,o){return s._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,o.icons),d})}getGlyphs(i,o){return s._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(o.stacks),p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,o={}){this._checkLoaded(),i&&this._validate(s.y.glyphs,"glyphs",i,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,o,d={},p){this._checkLoaded();const b=[{id:i,url:o}],w=[...oe(this.stylesheet.sprite),...b];this._validate(s.y.sprite,"sprite",w,null,d)||(this.stylesheet.sprite=w,this._loadSprite(b,!0,p))}removeSprite(i){this._checkLoaded();const o=oe(this.stylesheet.sprite);if(o.find(d=>d.id===i)){if(this._spritesImagesIds[i])for(const d of this._spritesImagesIds[i])this.imageManager.removeImage(d),this._changedImages[d]=!0;o.splice(o.findIndex(d=>d.id===i),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(i,o={},d){this._checkLoaded(),i&&this._validate(s.y.sprite,"sprite",i,null,o)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,d):(this._unloadSprite(),d&&d(null)))}}var Kh=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Gn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,o,d,p,b,w,U,T,Y){this.context=i;let Q=this.boundPaintVertexBuffers.length!==p.length;for(let z=0;!Q&&z<p.length;z++)this.boundPaintVertexBuffers[z]!==p[z]&&(Q=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==d||Q||this.boundIndexBuffer!==b||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==U||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==Y?this.freshBind(o,d,p,b,w,U,T,Y):(i.bindVertexArray.set(this.vao),U&&U.bind(),b&&b.dynamicDraw&&b.bind(),T&&T.bind(),Y&&Y.bind())}freshBind(i,o,d,p,b,w,U,T){const Y=i.numAttributes,Q=this.context,z=Q.gl;this.vao&&this.destroy(),this.vao=Q.createVertexArray(),Q.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=p,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=U,this.boundDynamicVertexBuffer3=T,o.enableAttributes(z,i);for(const Z of d)Z.enableAttributes(z,i);w&&w.enableAttributes(z,i),U&&U.enableAttributes(z,i),T&&T.enableAttributes(z,i),o.bind(),o.setVertexAttribPointers(z,i,b);for(const Z of d)Z.bind(),Z.setVertexAttribPointers(z,i,b);w&&(w.bind(),w.setVertexAttribPointers(z,i,b)),p&&p.bind(),U&&(U.bind(),U.setVertexAttribPointers(z,i,b)),T&&(T.bind(),T.setVertexAttribPointers(z,i,b)),Q.currentNumAttributes=Y}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const hp=(_,i,o,d,p)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:i,u_fog_color:o?o.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:o?o.calculateFogBlendOpacity(d):0,u_horizon_color:o?o.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),$h={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Hs(_){const i=[];for(let o=0;o<_.length;o++){if(_[o]===null)continue;const d=_[o].split(" ");i.push(d.pop())}return i}class rl{constructor(i,o,d,p,b,w,U,T){const Y=i.gl;this.program=Y.createProgram();const Q=Hs(o.staticAttributes),z=d?d.getBinderAttributes():[],Z=Q.concat(z),J=Fi.prelude.staticUniforms?Hs(Fi.prelude.staticUniforms):[],te=U.staticUniforms?Hs(U.staticUniforms):[],me=o.staticUniforms?Hs(o.staticUniforms):[],pe=d?d.getBinderUniforms():[],_e=J.concat(te).concat(me).concat(pe),xe=[];for(const qe of _e)xe.indexOf(qe)<0&&xe.push(qe);const Me=d?d.defines():[];Cn(Y)&&Me.unshift("#version 300 es"),b&&Me.push("#define OVERDRAW_INSPECTOR;"),w&&Me.push("#define TERRAIN3D;"),T&&Me.push(T);let Re=Me.concat(Fi.prelude.fragmentSource,U.fragmentSource,o.fragmentSource).join(`
`),Fe=Me.concat(Fi.prelude.vertexSource,U.vertexSource,o.vertexSource).join(`
`);Cn(Y)||(Re=function(qe){return qe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Re),Fe=function(qe){return qe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Fe));const Pe=Y.createShader(Y.FRAGMENT_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(Pe,Re),Y.compileShader(Pe),!Y.getShaderParameter(Pe,Y.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${Y.getShaderInfoLog(Pe)}`);Y.attachShader(this.program,Pe);const Ye=Y.createShader(Y.VERTEX_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(Ye,Fe),Y.compileShader(Ye),!Y.getShaderParameter(Ye,Y.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${Y.getShaderInfoLog(Ye)}`);Y.attachShader(this.program,Ye),this.attributes={};const Ke={};this.numAttributes=Z.length;for(let qe=0;qe<this.numAttributes;qe++)Z[qe]&&(Y.bindAttribLocation(this.program,qe,Z[qe]),this.attributes[Z[qe]]=qe);if(Y.linkProgram(this.program),!Y.getProgramParameter(this.program,Y.LINK_STATUS))throw new Error(`Program failed to link: ${Y.getProgramInfoLog(this.program)}`);Y.deleteShader(Ye),Y.deleteShader(Pe);for(let qe=0;qe<xe.length;qe++){const At=xe[qe];if(At&&!Ke[At]){const ht=Y.getUniformLocation(this.program,At);ht&&(Ke[At]=ht)}}this.fixedUniforms=p(i,Ke),this.terrainUniforms=((qe,At)=>({u_depth:new s.bH(qe,At.u_depth),u_terrain:new s.bH(qe,At.u_terrain),u_terrain_dim:new s.b8(qe,At.u_terrain_dim),u_terrain_matrix:new s.bJ(qe,At.u_terrain_matrix),u_terrain_unpack:new s.bK(qe,At.u_terrain_unpack),u_terrain_exaggeration:new s.b8(qe,At.u_terrain_exaggeration)}))(i,Ke),this.projectionUniforms=((qe,At)=>({u_projection_matrix:new s.bJ(qe,At.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(qe,At.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(qe,At.u_projection_clipping_plane),u_projection_transition:new s.b8(qe,At.u_projection_transition),u_projection_fallback_matrix:new s.bJ(qe,At.u_projection_fallback_matrix)}))(i,Ke),this.binderUniforms=d?d.getUniforms(i,Ke):[]}draw(i,o,d,p,b,w,U,T,Y,Q,z,Z,J,te,me,pe,_e,xe,Me){const Re=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(d),i.setStencilMode(p),i.setColorMode(b),i.setCullFace(w),T){i.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,T.depthTexture),i.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,T.texture);for(const Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(T[Pe])}if(Y)for(const Pe in Y)this.projectionUniforms[$h[Pe]].set(Y[Pe]);if(U)for(const Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(U[Pe]);pe&&pe.setUniforms(i,this.binderUniforms,te,{zoom:me});let Fe=0;switch(o){case Re.LINES:Fe=2;break;case Re.TRIANGLES:Fe=3;break;case Re.LINE_STRIP:Fe=1}for(const Pe of J.get()){const Ye=Pe.vaos||(Pe.vaos={});(Ye[Q]||(Ye[Q]=new Gn)).bind(i,this,z,pe?pe.getPaintVertexBuffers():[],Z,Pe.vertexOffset,_e,xe,Me),Re.drawElements(o,Pe.primitiveLength*Fe,Re.UNSIGNED_SHORT,Pe.primitiveOffset*Fe*2)}}}function F0(_,i,o){const d=1/s.az(o,1,i.transform.tileZoom),p=Math.pow(2,o.tileID.overscaledZ),b=o.tileSize*Math.pow(2,i.transform.tileZoom)/p,w=b*(o.tileID.canonical.x+o.tileID.wrap*p),U=b*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,U>>16],u_pixel_coord_lower:[65535&w,65535&U]}}const nl=(_,i,o,d)=>{const p=_.style.light,b=p.properties.get("position"),w=[b.x,b.y,b.z],U=s.bN();p.properties.get("anchor")==="viewport"&&s.bO(U,_.transform.bearingInRadians),s.bP(w,w,U);const T=_.transform.transformLightDirection(w),Y=p.properties.get("color");return{u_lightpos:w,u_lightpos_globe:T,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+i,u_opacity:o,u_fill_translate:d}},up=(_,i,o,d,p,b,w)=>s.e(nl(_,i,o,d),F0(b,_,w),{u_height_factor:-Math.pow(2,p.overscaledZ)/w.tileSize/8}),uo=(_,i,o,d)=>s.e(F0(i,_,o),{u_fill_translate:d}),dp=(_,i)=>({u_world:_,u_fill_translate:i}),T0=(_,i,o,d,p)=>s.e(uo(_,i,o,p),{u_world:d}),fp=(_,i,o,d,p)=>{const b=_.transform;let w,U,T=0;if(o.paint.get("circle-pitch-alignment")==="map"){const Y=s.az(i,1,b.zoom);w=!0,U=[Y,Y],T=Y/(s.Z*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*p}else w=!1,U=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:U,u_globe_extrude_scale:T,u_translate:d}},S0=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),qh=_=>({u_viewport_size:[_.width,_.height]}),Wh=(_,i=1)=>({u_color:_,u_overlay:0,u_overlay_scale:i}),Jh=(_,i,o,d)=>{const p=s.az(_,1,i)/(s.Z*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:s.az(_,1,i),u_intensity:o,u_globe_extrude_scale:p}},eu=(_,i,o,d)=>{const p=s.K();s.bQ(p,0,_.width,_.height,0,0,1);const b=_.context.gl;return{u_matrix:p,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:o,u_color_ramp:d,u_opacity:i.paint.get("heatmap-opacity")}},Y0=(_,i,o)=>{const d=o.paint.get("hillshade-shadow-color"),p=o.paint.get("hillshade-highlight-color"),b=o.paint.get("hillshade-accent-color");let w=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);return o.paint.get("hillshade-illumination-anchor")==="viewport"&&(w+=_.transform.bearingInRadians),{u_image:0,u_latrange:N0(0,i.tileID),u_light:[o.paint.get("hillshade-exaggeration"),w],u_shadow:d,u_highlight:p,u_accent:b}},fo=(_,i)=>{const o=i.stride,d=s.K();return s.bQ(d,0,s.Z,-8192,0,0,1),s.L(d,d,[0,-8192,0]),{u_matrix:d,u_image:1,u_dimension:[o,o],u_zoom:_.overscaledZ,u_unpack:i.getUnpackVector()}};function N0(_,i){const o=Math.pow(2,i.canonical.z),d=i.canonical.y;return[new s.$(0,d/o).toLngLat().lat,new s.$(0,(d+1)/o).toLngLat().lat]}const rc=(_,i,o,d)=>{const p=_.transform;return{u_translation:P0(_,i,o),u_ratio:d/s.az(i,1,p.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},sl=(_,i,o,d,p)=>s.e(rc(_,i,o,d),{u_image:0,u_image_height:p}),gp=(_,i,o,d,p)=>{const b=_.transform,w=L0(i,b);return{u_translation:P0(_,i,o),u_texsize:i.imageAtlasTexture.size,u_ratio:d/s.az(i,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},nc=(_,i,o,d,p,b)=>{const w=_.lineAtlas,U=L0(i,_.transform),T=o.layout.get("line-cap")==="round",Y=w.getDash(p.from,T),Q=w.getDash(p.to,T),z=Y.width*b.fromScale,Z=Q.width*b.toScale;return s.e(rc(_,i,o,d),{u_patternscale_a:[U/z,-Y.height/2],u_patternscale_b:[U/Z,-Q.height/2],u_sdfgamma:w.width/(256*Math.min(z,Z)*_.pixelRatio)/2,u_image:0,u_tex_y_a:Y.y,u_tex_y_b:Q.y,u_mix:b.t})};function L0(_,i){return 1/s.az(_,1,i.tileZoom)}function P0(_,i,o){return s.aA(_.transform,i,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const Q0=(_,i,o,d,p)=>{return{u_tl_parent:_,u_scale_parent:i,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(w=d.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=d.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:k0(d.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var b,w};function k0(_){_*=Math.PI/180;const i=Math.sin(_),o=Math.cos(_);return[(2*o+1)/3,(-Math.sqrt(3)*i-o+1)/3,(Math.sqrt(3)*i-o+1)/3]}const tu=(_,i,o,d,p,b,w,U,T,Y,Q,z,Z)=>{const J=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:J.width/J.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:U,u_coord_matrix:T,u_is_text:+Q,u_pitch_with_map:+d,u_is_along_line:p,u_is_variable_anchor:b,u_texsize:z,u_texture:0,u_translation:Y,u_pitched_scale:Z}},sc=(_,i,o,d,p,b,w,U,T,Y,Q,z,Z,J)=>{const te=w.transform;return s.e(tu(_,i,o,d,p,b,w,U,T,Y,Q,z,J),{u_gamma_scale:d?Math.cos(te.pitch*Math.PI/180)*te.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},D0=(_,i,o,d,p,b,w,U,T,Y,Q,z,Z)=>s.e(sc(_,i,o,d,p,b,w,U,T,Y,!0,Q,0,Z),{u_texsize_icon:z,u_texture_icon:1}),oc=(_,i)=>({u_opacity:_,u_color:i}),gs=(_,i,o,d,p)=>s.e(function(b,w,U,T){const Y=U.imageManager.getPattern(b.from.toString()),Q=U.imageManager.getPattern(b.to.toString()),{width:z,height:Z}=U.imageManager.getPixelSize(),J=Math.pow(2,T.tileID.overscaledZ),te=T.tileSize*Math.pow(2,U.transform.tileZoom)/J,me=te*(T.tileID.canonical.x+T.tileID.wrap*J),pe=te*T.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[z,Z],u_mix:w.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/s.az(T,1,U.transform.tileZoom),u_pixel_coord_upper:[me>>16,pe>>16],u_pixel_coord_lower:[65535&me,65535&pe]}}(o,p,i,d),{u_opacity:_}),Ac=(_,i)=>{},iu={fillExtrusion:(_,i)=>({u_lightpos:new s.bL(_,i.u_lightpos),u_lightpos_globe:new s.bL(_,i.u_lightpos_globe),u_lightintensity:new s.b8(_,i.u_lightintensity),u_lightcolor:new s.bL(_,i.u_lightcolor),u_vertical_gradient:new s.b8(_,i.u_vertical_gradient),u_opacity:new s.b8(_,i.u_opacity),u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillExtrusionPattern:(_,i)=>({u_lightpos:new s.bL(_,i.u_lightpos),u_lightpos_globe:new s.bL(_,i.u_lightpos_globe),u_lightintensity:new s.b8(_,i.u_lightintensity),u_lightcolor:new s.bL(_,i.u_lightcolor),u_vertical_gradient:new s.b8(_,i.u_vertical_gradient),u_height_factor:new s.b8(_,i.u_height_factor),u_opacity:new s.b8(_,i.u_opacity),u_fill_translate:new s.bM(_,i.u_fill_translate),u_image:new s.bH(_,i.u_image),u_texsize:new s.bM(_,i.u_texsize),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade)}),fill:(_,i)=>({u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillPattern:(_,i)=>({u_image:new s.bH(_,i.u_image),u_texsize:new s.bM(_,i.u_texsize),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade),u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillOutline:(_,i)=>({u_world:new s.bM(_,i.u_world),u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillOutlinePattern:(_,i)=>({u_world:new s.bM(_,i.u_world),u_image:new s.bH(_,i.u_image),u_texsize:new s.bM(_,i.u_texsize),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade),u_fill_translate:new s.bM(_,i.u_fill_translate)}),circle:(_,i)=>({u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_scale_with_map:new s.bH(_,i.u_scale_with_map),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_extrude_scale:new s.bM(_,i.u_extrude_scale),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(_,i.u_globe_extrude_scale),u_translate:new s.bM(_,i.u_translate)}),collisionBox:(_,i)=>({u_pixel_extrude_scale:new s.bM(_,i.u_pixel_extrude_scale)}),collisionCircle:(_,i)=>({u_viewport_size:new s.bM(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new s.bI(_,i.u_color),u_overlay:new s.bH(_,i.u_overlay),u_overlay_scale:new s.b8(_,i.u_overlay_scale)}),depth:Ac,clippingMask:Ac,heatmap:(_,i)=>({u_extrude_scale:new s.b8(_,i.u_extrude_scale),u_intensity:new s.b8(_,i.u_intensity),u_globe_extrude_scale:new s.b8(_,i.u_globe_extrude_scale)}),heatmapTexture:(_,i)=>({u_matrix:new s.bJ(_,i.u_matrix),u_world:new s.bM(_,i.u_world),u_image:new s.bH(_,i.u_image),u_color_ramp:new s.bH(_,i.u_color_ramp),u_opacity:new s.b8(_,i.u_opacity)}),hillshade:(_,i)=>({u_image:new s.bH(_,i.u_image),u_latrange:new s.bM(_,i.u_latrange),u_light:new s.bM(_,i.u_light),u_shadow:new s.bI(_,i.u_shadow),u_highlight:new s.bI(_,i.u_highlight),u_accent:new s.bI(_,i.u_accent)}),hillshadePrepare:(_,i)=>({u_matrix:new s.bJ(_,i.u_matrix),u_image:new s.bH(_,i.u_image),u_dimension:new s.bM(_,i.u_dimension),u_zoom:new s.b8(_,i.u_zoom),u_unpack:new s.bK(_,i.u_unpack)}),line:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels),u_image:new s.bH(_,i.u_image),u_image_height:new s.b8(_,i.u_image_height)}),linePattern:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_texsize:new s.bM(_,i.u_texsize),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_image:new s.bH(_,i.u_image),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade)}),lineSDF:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels),u_patternscale_a:new s.bM(_,i.u_patternscale_a),u_patternscale_b:new s.bM(_,i.u_patternscale_b),u_sdfgamma:new s.b8(_,i.u_sdfgamma),u_image:new s.bH(_,i.u_image),u_tex_y_a:new s.b8(_,i.u_tex_y_a),u_tex_y_b:new s.b8(_,i.u_tex_y_b),u_mix:new s.b8(_,i.u_mix)}),raster:(_,i)=>({u_tl_parent:new s.bM(_,i.u_tl_parent),u_scale_parent:new s.b8(_,i.u_scale_parent),u_buffer_scale:new s.b8(_,i.u_buffer_scale),u_fade_t:new s.b8(_,i.u_fade_t),u_opacity:new s.b8(_,i.u_opacity),u_image0:new s.bH(_,i.u_image0),u_image1:new s.bH(_,i.u_image1),u_brightness_low:new s.b8(_,i.u_brightness_low),u_brightness_high:new s.b8(_,i.u_brightness_high),u_saturation_factor:new s.b8(_,i.u_saturation_factor),u_contrast_factor:new s.b8(_,i.u_contrast_factor),u_spin_weights:new s.bL(_,i.u_spin_weights),u_coords_top:new s.bK(_,i.u_coords_top),u_coords_bottom:new s.bK(_,i.u_coords_bottom)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new s.bH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(_,i.u_is_size_feature_constant),u_size_t:new s.b8(_,i.u_size_t),u_size:new s.b8(_,i.u_size),u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_pitch:new s.b8(_,i.u_pitch),u_rotate_symbol:new s.bH(_,i.u_rotate_symbol),u_aspect_ratio:new s.b8(_,i.u_aspect_ratio),u_fade_change:new s.b8(_,i.u_fade_change),u_label_plane_matrix:new s.bJ(_,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(_,i.u_coord_matrix),u_is_text:new s.bH(_,i.u_is_text),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_is_along_line:new s.bH(_,i.u_is_along_line),u_is_variable_anchor:new s.bH(_,i.u_is_variable_anchor),u_texsize:new s.bM(_,i.u_texsize),u_texture:new s.bH(_,i.u_texture),u_translation:new s.bM(_,i.u_translation),u_pitched_scale:new s.b8(_,i.u_pitched_scale)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new s.bH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(_,i.u_is_size_feature_constant),u_size_t:new s.b8(_,i.u_size_t),u_size:new s.b8(_,i.u_size),u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_pitch:new s.b8(_,i.u_pitch),u_rotate_symbol:new s.bH(_,i.u_rotate_symbol),u_aspect_ratio:new s.b8(_,i.u_aspect_ratio),u_fade_change:new s.b8(_,i.u_fade_change),u_label_plane_matrix:new s.bJ(_,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(_,i.u_coord_matrix),u_is_text:new s.bH(_,i.u_is_text),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_is_along_line:new s.bH(_,i.u_is_along_line),u_is_variable_anchor:new s.bH(_,i.u_is_variable_anchor),u_texsize:new s.bM(_,i.u_texsize),u_texture:new s.bH(_,i.u_texture),u_gamma_scale:new s.b8(_,i.u_gamma_scale),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_is_halo:new s.bH(_,i.u_is_halo),u_translation:new s.bM(_,i.u_translation),u_pitched_scale:new s.b8(_,i.u_pitched_scale)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new s.bH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(_,i.u_is_size_feature_constant),u_size_t:new s.b8(_,i.u_size_t),u_size:new s.b8(_,i.u_size),u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_pitch:new s.b8(_,i.u_pitch),u_rotate_symbol:new s.bH(_,i.u_rotate_symbol),u_aspect_ratio:new s.b8(_,i.u_aspect_ratio),u_fade_change:new s.b8(_,i.u_fade_change),u_label_plane_matrix:new s.bJ(_,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(_,i.u_coord_matrix),u_is_text:new s.bH(_,i.u_is_text),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_is_along_line:new s.bH(_,i.u_is_along_line),u_is_variable_anchor:new s.bH(_,i.u_is_variable_anchor),u_texsize:new s.bM(_,i.u_texsize),u_texsize_icon:new s.bM(_,i.u_texsize_icon),u_texture:new s.bH(_,i.u_texture),u_texture_icon:new s.bH(_,i.u_texture_icon),u_gamma_scale:new s.b8(_,i.u_gamma_scale),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_is_halo:new s.bH(_,i.u_is_halo),u_translation:new s.bM(_,i.u_translation),u_pitched_scale:new s.b8(_,i.u_pitched_scale)}),background:(_,i)=>({u_opacity:new s.b8(_,i.u_opacity),u_color:new s.bI(_,i.u_color)}),backgroundPattern:(_,i)=>({u_opacity:new s.b8(_,i.u_opacity),u_image:new s.bH(_,i.u_image),u_pattern_tl_a:new s.bM(_,i.u_pattern_tl_a),u_pattern_br_a:new s.bM(_,i.u_pattern_br_a),u_pattern_tl_b:new s.bM(_,i.u_pattern_tl_b),u_pattern_br_b:new s.bM(_,i.u_pattern_br_b),u_texsize:new s.bM(_,i.u_texsize),u_mix:new s.b8(_,i.u_mix),u_pattern_size_a:new s.bM(_,i.u_pattern_size_a),u_pattern_size_b:new s.bM(_,i.u_pattern_size_b),u_scale_a:new s.b8(_,i.u_scale_a),u_scale_b:new s.b8(_,i.u_scale_b),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(_,i.u_tile_units_to_pixels)}),terrain:(_,i)=>({u_texture:new s.bH(_,i.u_texture),u_ele_delta:new s.b8(_,i.u_ele_delta),u_fog_matrix:new s.bJ(_,i.u_fog_matrix),u_fog_color:new s.bI(_,i.u_fog_color),u_fog_ground_blend:new s.b8(_,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(_,i.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(_,i.u_horizon_color),u_horizon_fog_blend:new s.b8(_,i.u_horizon_fog_blend),u_is_globe_mode:new s.b8(_,i.u_is_globe_mode)}),terrainDepth:(_,i)=>({u_ele_delta:new s.b8(_,i.u_ele_delta)}),terrainCoords:(_,i)=>({u_texture:new s.bH(_,i.u_texture),u_terrain_coords_id:new s.b8(_,i.u_terrain_coords_id),u_ele_delta:new s.b8(_,i.u_ele_delta)}),projectionErrorMeasurement:(_,i)=>({u_input:new s.b8(_,i.u_input),u_output_expected:new s.b8(_,i.u_output_expected)}),atmosphere:(_,i)=>({u_sun_pos:new s.bL(_,i.u_sun_pos),u_atmosphere_blend:new s.b8(_,i.u_atmosphere_blend),u_globe_position:new s.bL(_,i.u_globe_position),u_globe_radius:new s.b8(_,i.u_globe_radius),u_inv_proj_matrix:new s.bJ(_,i.u_inv_proj_matrix)}),sky:(_,i)=>({u_sky_color:new s.bI(_,i.u_sky_color),u_horizon_color:new s.bI(_,i.u_horizon_color),u_horizon:new s.bM(_,i.u_horizon),u_horizon_normal:new s.bM(_,i.u_horizon_normal),u_sky_horizon_blend:new s.b8(_,i.u_sky_horizon_blend),u_sky_blend:new s.b8(_,i.u_sky_blend)})};class au{constructor(i,o,d){this.context=i;const p=i.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const z0={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ru{constructor(i,o,d,p){this.length=o.length,this.attributes=d,this.itemSize=o.bytesPerElement,this.dynamicDraw=p,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,o){for(let d=0;d<this.attributes.length;d++){const p=o.attributes[this.attributes[d].name];p!==void 0&&i.enableVertexAttribArray(p)}}setVertexAttribPointers(i,o,d){for(let p=0;p<this.attributes.length;p++){const b=this.attributes[p],w=o.attributes[b.name];w!==void 0&&i.vertexAttribPointer(w,b.components,i[z0[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Qi{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class nu extends Qi{getDefault(){return s.b7.transparent}set(i){const o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class pp extends Qi{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class mp extends Qi{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class _p extends Qi{getDefault(){return[!0,!0,!0,!0]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class bp extends Qi{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Z0 extends Qi{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class yp extends Qi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const o=this.current;(i.func!==o.func||i.ref!==o.ref||i.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class H0 extends Qi{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class lc extends Qi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=i,this.dirty=!1}}class cc extends Qi{getDefault(){return[0,1]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class hc extends Qi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=i,this.dirty=!1}}class su extends Qi{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class go extends Qi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.BLEND):o.disable(o.BLEND),this.current=i,this.dirty=!1}}class nA extends Qi{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class pn extends Qi{getDefault(){return s.b7.transparent}set(i){const o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class O0 extends Qi{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class X0 extends Qi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=i,this.dirty=!1}}class ou extends Qi{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class po extends Qi{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class uc extends Qi{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class dc extends Qi{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class ol extends Qi{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class fc extends Qi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class V0 extends Qi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class sA extends Qi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class oA extends Qi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class G0 extends Qi{getDefault(){return null}set(i){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Au extends Qi{getDefault(){return null}set(i){var o;if(i===this.current&&!this.dirty)return;const d=this.gl;Cn(d)?d.bindVertexArray(i):(o=d.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Xi extends Qi{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class gc extends Qi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class vp extends Qi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class pc extends Qi{constructor(i,o){super(i),this.context=i,this.parent=o}getDefault(){return null}}class Al extends pc{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class xp extends pc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class wp extends pc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,i),this.current=i,this.dirty=!1}}const lu="Framebuffer is not complete";class Bp{constructor(i,o,d,p,b){this.context=i,this.width=o,this.height=d;const w=i.gl,U=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Al(i,U),p)this.depthAttachment=b?new wp(i,U):new xp(i,U);else if(b)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(lu)}destroy(){const i=this.context.gl,o=this.colorAttachment.get();if(o&&i.deleteTexture(o),this.depthAttachment){const d=this.depthAttachment.get();d&&i.deleteRenderbuffer(d)}i.deleteFramebuffer(this.framebuffer)}}class cu{constructor(i){var o,d;if(this.gl=i,this.clearColor=new nu(this),this.clearDepth=new pp(this),this.clearStencil=new mp(this),this.colorMask=new _p(this),this.depthMask=new bp(this),this.stencilMask=new Z0(this),this.stencilFunc=new yp(this),this.stencilOp=new H0(this),this.stencilTest=new lc(this),this.depthRange=new cc(this),this.depthTest=new hc(this),this.depthFunc=new su(this),this.blend=new go(this),this.blendFunc=new nA(this),this.blendColor=new pn(this),this.blendEquation=new O0(this),this.cullFace=new X0(this),this.cullFaceSide=new ou(this),this.frontFace=new po(this),this.program=new uc(this),this.activeTexture=new dc(this),this.viewport=new ol(this),this.bindFramebuffer=new fc(this),this.bindRenderbuffer=new V0(this),this.bindTexture=new sA(this),this.bindVertexBuffer=new oA(this),this.bindElementBuffer=new G0(this),this.bindVertexArray=new Au(this),this.pixelStoreUnpack=new Xi(this),this.pixelStoreUnpackPremultiplyAlpha=new gc(this),this.pixelStoreUnpackFlipY=new vp(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Cn(i)){this.HALF_FLOAT=i.HALF_FLOAT;const p=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=i.RGBA16F)!==null&&o!==void 0?o:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(d=i.RGB16F)!==null&&d!==void 0?d:p==null?void 0:p.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const p=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,o){return new au(this,i,o)}createVertexBuffer(i,o,d){return new ru(this,i,o,d)}createRenderbuffer(i,o,d){const p=this.gl,b=p.createRenderbuffer();return this.bindRenderbuffer.set(b),p.renderbufferStorage(p.RENDERBUFFER,i,o,d),this.bindRenderbuffer.set(null),b}createFramebuffer(i,o,d,p){return new Bp(this,i,o,d,p)}clear({color:i,depth:o,stencil:d}){const p=this.gl;let b=0;i&&(b|=p.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(b|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),d!==void 0&&(b|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),p.clear(b)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){s.bE(i.blendFunction,Wi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Cn(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var o;return Cn(this.gl)?this.gl.deleteVertexArray(i):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let mo;function ll(_,i,o,d,p){const b=_.context,w=_.transform,U=b.gl,T=_.useProgram("collisionBox"),Y=[];let Q=0,z=0;for(let _e=0;_e<d.length;_e++){const xe=d[_e],Me=i.getTile(xe).getBucket(o);if(!Me)continue;const Re=p?Me.textCollisionBox:Me.iconCollisionBox,Fe=Me.collisionCircleArray;Fe.length>0&&(Y.push({circleArray:Fe,circleOffset:z,coord:xe}),Q+=Fe.length/4,z=Q),Re&&T.draw(b,U.LINES,Mi.disabled,Di.disabled,_.colorModeForRenderPass(),Oi.disabled,S0(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),w.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,_.transform.zoom,null,null,Re.collisionVertexBuffer)}if(!p||!Y.length)return;const Z=_.useProgram("collisionCircle"),J=new s.bR;J.resize(4*Q),J._trim();let te=0;for(const _e of Y)for(let xe=0;xe<_e.circleArray.length/4;xe++){const Me=4*xe,Re=_e.circleArray[Me+0],Fe=_e.circleArray[Me+1],Pe=_e.circleArray[Me+2],Ye=_e.circleArray[Me+3];J.emplace(te++,Re,Fe,Pe,Ye,0),J.emplace(te++,Re,Fe,Pe,Ye,1),J.emplace(te++,Re,Fe,Pe,Ye,2),J.emplace(te++,Re,Fe,Pe,Ye,3)}(!mo||mo.length<2*Q)&&(mo=function(_e){const xe=2*_e,Me=new s.bT;Me.resize(xe),Me._trim();for(let Re=0;Re<xe;Re++){const Fe=6*Re;Me.uint16[Fe+0]=4*Re+0,Me.uint16[Fe+1]=4*Re+1,Me.uint16[Fe+2]=4*Re+2,Me.uint16[Fe+3]=4*Re+2,Me.uint16[Fe+4]=4*Re+3,Me.uint16[Fe+5]=4*Re+0}return Me}(Q));const me=b.createIndexBuffer(mo,!0),pe=b.createVertexBuffer(J,s.bS.members,!0);for(const _e of Y){const xe=qh(_.transform);Z.draw(b,U.TRIANGLES,Mi.disabled,Di.disabled,_.colorModeForRenderPass(),Oi.disabled,xe,_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e.coord),null,o.id,pe,me,s.aJ.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,_.transform.zoom,null,null,null)}pe.destroy(),me.destroy()}const hu=s.ad(new Float32Array(16));function uu(_,i,o,d,p,b){const{horizontalAlign:w,verticalAlign:U}=s.aE(_);return new s.P((-(w-.5)*i/p+d[0])*b,(-(U-.5)*o/p+d[1])*b)}function j0(_,i,o,d,p,b){const w=i.tileAnchorPoint.add(new s.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let U=d.mult(b);o||(U=U.rotate(-p));const T=w.add(U);return mt(T.x,T.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(o){const U=Bi(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(_),T=Math.atan(U.y/U.x)+(U.x<0?Math.PI:0);return _.add(d.rotate(T))}return _.add(d)}function mc(_,i,o,d,p,b,w,U,T,Y,Q,z){const Z=_.text.placedSymbolArray,J=_.text.dynamicLayoutVertexArray,te=_.icon.dynamicLayoutVertexArray,me={};J.clear();for(let pe=0;pe<Z.length;pe++){const _e=Z.get(pe),xe=_e.hidden||!_e.crossTileID||_.allowVerticalPlacement&&!_e.placedOrientation?null:d[_e.crossTileID];if(xe){const Me=new s.P(_e.anchorX,_e.anchorY),Re={getElevation:z,width:p.width,height:p.height,pitchedLabelPlaneMatrix:b,pitchWithMap:o,transform:p,tileAnchorPoint:Me,translation:Y,unwrappedTileID:Q},Fe=o?Bn(Me.x,Me.y,Re):Bi(Me.x,Me.y,Re),Pe=Wt(p.cameraToCenterDistance,Fe.signedDistanceFromCamera);let Ye=s.am(_.textSizeData,U,_e)*Pe/s.ay;o&&(Ye*=_.tilePixelRatio/w);const{width:Ke,height:qe,anchor:At,textOffset:ht,textBoxScale:ot}=xe,Lt=uu(At,Ke,qe,ht,ot,Ye),Ut=p.getPitchedTextCorrection(Me.x+Y[0],Me.y+Y[1],Q),yt=j0(Fe.point,Re,i,Lt,-p.bearingInRadians,Ut),ti=_.allowVerticalPlacement&&_e.placedOrientation===s.al.vertical?Math.PI/2:0;for(let Ii=0;Ii<_e.numGlyphs;Ii++)s.as(J,yt,ti);T&&_e.associatedIconIndex>=0&&(me[_e.associatedIconIndex]={shiftedAnchor:yt,angle:ti})}else Ui(_e.numGlyphs,J)}if(T){te.clear();const pe=_.icon.placedSymbolArray;for(let _e=0;_e<pe.length;_e++){const xe=pe.get(_e);if(xe.hidden)Ui(xe.numGlyphs,te);else{const Me=me[_e];if(Me)for(let Re=0;Re<xe.numGlyphs;Re++)s.as(te,Me.shiftedAnchor,Me.angle);else Ui(xe.numGlyphs,te)}}_.icon.dynamicLayoutVertexBuffer.updateData(te)}_.text.dynamicLayoutVertexBuffer.updateData(J)}function _c(_,i,o){return o.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function bc(_,i,o,d,p,b,w,U,T,Y,Q,z,Z){const J=_.context,te=J.gl,me=_.transform,pe=U==="map",_e=T==="map",xe=U!=="viewport"&&o.layout.get("symbol-placement")!=="point",Me=pe&&!_e&&!xe,Re=!o.layout.get("symbol-sort-key").isConstant();let Fe=!1;const Pe=_.getDepthModeForSublayer(0,Mi.ReadOnly),Ye=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ke=[],qe=me.getCircleRadiusCorrection();for(const At of d){const ht=i.getTile(At),ot=ht.getBucket(o);if(!ot)continue;const Lt=p?ot.text:ot.icon;if(!Lt||!Lt.segments.get().length||!Lt.hasVisibleVertices)continue;const Ut=Lt.programConfigurations.get(o.id),yt=p||ot.sdfIcons,ti=p?ot.textSizeData:ot.iconSizeData,Ii=_e||me.pitch!==0,bi=_.useProgram(_c(yt,p,ot),Ut),xa=s.ak(ti,me.zoom),ia=_.style.map.terrain&&_.style.map.terrain.getTerrainData(At);let wa,pa,aa,Ji,nr=[0,0],qa=null;if(p)pa=ht.glyphAtlasTexture,aa=te.LINEAR,wa=ht.glyphAtlasTexture.size,ot.iconsInText&&(nr=ht.imageAtlasTexture.size,qa=ht.imageAtlasTexture,Ji=Ii||_.options.rotating||_.options.zooming||ti.kind==="composite"||ti.kind==="camera"?te.LINEAR:te.NEAREST);else{const Ma=o.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;pa=ht.imageAtlasTexture,aa=yt||_.options.rotating||_.options.zooming||Ma||Ii?te.LINEAR:te.NEAREST,wa=ht.imageAtlasTexture.size}const br=s.az(ht,1,_.transform.zoom),Ir=ct(pe,_.transform,br),Wn=s.K();s.an(Wn,Ir);const Gs=Bt(_e,pe,_.transform,br),bs=s.aA(me,ht,b,w),ys=me.getProjectionData({overscaledTileID:At,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Jn=Ye&&ot.hasTextData(),wo=o.layout.get("icon-text-fit")!=="none"&&Jn&&ot.hasIconData();if(xe){const Ma=_.style.map.terrain?(Qa,Ba)=>_.style.map.terrain.getElevation(At,Qa,Ba):null,ma=o.layout.get("text-rotation-alignment")==="map";ai(ot,_,p,Ir,Wn,_e,Y,ma,At.toUnwrapped(),me.width,me.height,bs,Ma)}const Bo=p&&Ye||wo,an=xe||Bo?hu:_e?Ir:_.transform.clipSpaceToPixelsMatrix,js=yt&&o.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vs;vs=yt?ot.iconsInText?D0(ti.kind,xa,Me,_e,xe,Bo,_,an,Gs,bs,wa,nr,qe):sc(ti.kind,xa,Me,_e,xe,Bo,_,an,Gs,bs,p,wa,0,qe):tu(ti.kind,xa,Me,_e,xe,Bo,_,an,Gs,bs,p,wa,qe);const xs={program:bi,buffers:Lt,uniformValues:vs,projectionData:ys,atlasTexture:pa,atlasTextureIcon:qa,atlasInterpolation:aa,atlasInterpolationIcon:Ji,isSDF:yt,hasHalo:js};if(Re&&ot.canOverlap){Fe=!0;const Ma=Lt.segments.get();for(const ma of Ma)Ke.push({segments:new s.aJ([ma]),sortKey:ma.sortKey,state:xs,terrainData:ia})}else Ke.push({segments:Lt.segments,sortKey:0,state:xs,terrainData:ia})}Fe&&Ke.sort((At,ht)=>At.sortKey-ht.sortKey);for(const At of Ke){const ht=At.state;if(J.activeTexture.set(te.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,te.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(J.activeTexture.set(te.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),ht.isSDF){const ot=ht.uniformValues;ht.hasHalo&&(ot.u_is_halo=1,K0(ht.buffers,At.segments,o,_,ht.program,Pe,Q,z,ot,ht.projectionData,At.terrainData)),ot.u_is_halo=0}K0(ht.buffers,At.segments,o,_,ht.program,Pe,Q,z,ht.uniformValues,ht.projectionData,At.terrainData)}}function K0(_,i,o,d,p,b,w,U,T,Y,Q){const z=d.context;p.draw(z,z.gl.TRIANGLES,b,w,U,Oi.backCCW,T,Q,Y,o.id,_.layoutVertexBuffer,_.indexBuffer,i,o.paint,d.transform.zoom,_.programConfigurations.get(o.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function du(_,i,o,d,p){const b=_.context,w=b.gl,U=Di.disabled,T=new Wi([w.ONE,w.ONE],s.b7.transparent,[!0,!0,!0,!0]),Y=i.getBucket(o);if(!Y)return;const Q=d.key;let z=o.heatmapFbos.get(Q);z||(z=fu(b,i.tileSize,i.tileSize),o.heatmapFbos.set(Q,z)),b.bindFramebuffer.set(z.framebuffer),b.viewport.set([0,0,i.tileSize,i.tileSize]),b.clear({color:s.b7.transparent});const Z=Y.programConfigurations.get(o.id),J=_.useProgram("heatmap",Z,!p),te=_.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),me=_.style.map.terrain.getTerrainData(d);J.draw(b,w.TRIANGLES,Mi.disabled,U,T,Oi.disabled,Jh(i,_.transform.zoom,o.paint.get("heatmap-intensity"),1),me,te,o.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,o.paint,_.transform.zoom,Z)}function Cp(_,i,o,d,p){const b=_.context,w=b.gl,U=_.transform;b.setColorMode(_.colorModeForRenderPass());const T=cl(b,i),Y=o.key,Q=i.heatmapFbos.get(Y);if(!Q)return;b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,Q.colorAttachment.get()),b.activeTexture.set(w.TEXTURE1),T.bind(w.LINEAR,w.CLAMP_TO_EDGE);const z=U.getProjectionData({overscaledTileID:o,applyTerrainMatrix:p,applyGlobeMatrix:!d});_.useProgram("heatmapTexture").draw(b,w.TRIANGLES,Mi.disabled,Di.disabled,_.colorModeForRenderPass(),Oi.disabled,eu(_,i,0,1),null,z,i.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,i.paint,U.zoom),Q.destroy(),i.heatmapFbos.delete(Y)}function fu(_,i,o){var d,p;const b=_.gl,w=b.createTexture();b.bindTexture(b.TEXTURE_2D,w),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const U=(d=_.HALF_FLOAT)!==null&&d!==void 0?d:b.UNSIGNED_BYTE,T=(p=_.RGBA16F)!==null&&p!==void 0?p:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,T,i,o,0,b.RGBA,U,null);const Y=_.createFramebuffer(i,o,!1,!1);return Y.colorAttachment.set(w),Y}function cl(_,i){return i.colorRampTexture||(i.colorRampTexture=new H(_,i.colorRamp,_.gl.RGBA)),i.colorRampTexture}function yc(_,i,o,d,p){if(!o||!d||!d.imageAtlas)return;const b=d.imageAtlas.patternPositions;let w=b[o.to.toString()],U=b[o.from.toString()];if(!w&&U&&(w=U),!U&&w&&(U=w),!w||!U){const T=p.getPaintProperty(i);w=b[T],U=b[T]}w&&U&&_.setConstantPatternPositions(w,U)}function gu(_,i,o,d,p,b,w,U){const T=_.context.gl,Y="fill-pattern",Q=o.paint.get(Y),z=Q&&Q.constantOr(1),Z=o.getCrossfadeParameters();let J,te,me,pe,_e;const xe=_.transform,Me=o.paint.get("fill-translate"),Re=o.paint.get("fill-translate-anchor");w?(te=z&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=T.LINES):(te=z?"fillPattern":"fill",J=T.TRIANGLES);const Fe=Q.constantOr(null);for(const Pe of d){const Ye=i.getTile(Pe);if(z&&!Ye.patternsLoaded())continue;const Ke=Ye.getBucket(o);if(!Ke)continue;const qe=Ke.programConfigurations.get(o.id),At=_.useProgram(te,qe),ht=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Pe);z&&(_.context.activeTexture.set(T.TEXTURE0),Ye.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),qe.updatePaintBuffers(Z)),yc(qe,Y,Fe,Ye,o);const ot=xe.getProjectionData({overscaledTileID:Pe,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Lt=s.aA(xe,Ye,Me,Re);if(w){pe=Ke.indexBuffer2,_e=Ke.segments2;const yt=[T.drawingBufferWidth,T.drawingBufferHeight];me=te==="fillOutlinePattern"&&z?T0(_,Z,Ye,yt,Lt):dp(yt,Lt)}else pe=Ke.indexBuffer,_e=Ke.segments,me=z?uo(_,Z,Ye,Lt):{u_fill_translate:Lt};let Ut;if(_.renderPass==="translucent"&&U){const[yt]=_.getStencilConfigForOverlapAndUpdateStencilID(d);Ut=yt[Pe.overscaledZ]}else Ut=_.stencilModeForClipping(Pe);At.draw(_.context,J,p,Ut,b,Oi.backCCW,me,ht,ot,o.id,Ke.layoutVertexBuffer,pe,_e,o.paint,_.transform.zoom,qe)}}function vc(_,i,o,d,p,b,w,U){const T=_.context,Y=T.gl,Q="fill-extrusion-pattern",z=o.paint.get(Q),Z=z.constantOr(1),J=o.getCrossfadeParameters(),te=o.paint.get("fill-extrusion-opacity"),me=z.constantOr(null),pe=_.transform;for(const _e of d){const xe=i.getTile(_e),Me=xe.getBucket(o);if(!Me)continue;const Re=_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e),Fe=Me.programConfigurations.get(o.id),Pe=_.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Fe);Z&&(_.context.activeTexture.set(Y.TEXTURE0),xe.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Fe.updatePaintBuffers(J));const Ye=pe.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!U,applyTerrainMatrix:!0});yc(Fe,Q,me,xe,o);const Ke=s.aA(pe,xe,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),qe=o.paint.get("fill-extrusion-vertical-gradient"),At=Z?up(_,qe,te,Ke,_e,J,xe):nl(_,qe,te,Ke);Pe.draw(T,T.gl.TRIANGLES,p,b,w,Oi.backCCW,At,Re,Ye,o.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,o.paint,_.transform.zoom,Fe,_.style.map.terrain&&Me.centroidVertexBuffer)}}function AA(_,i,o,d,p,b,w,U,T){var Y;const Q=_.style.projection,z=_.context,Z=_.transform,J=z.gl,te=_.useProgram("hillshade"),me=!_.options.moving;for(const pe of d){const _e=i.getTile(pe),xe=_e.fbo;if(!xe)continue;const Me=Q.getMeshFromTileID(z,pe.canonical,U,!0,"raster"),Re=(Y=_.style.map.terrain)===null||Y===void 0?void 0:Y.getTerrainData(pe);z.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,xe.colorAttachment.get());const Fe=Z.getProjectionData({overscaledTileID:pe,aligned:me,applyGlobeMatrix:!T,applyTerrainMatrix:!0});te.draw(z,J.TRIANGLES,b,p[pe.overscaledZ],w,Oi.backCCW,Y0(_,_e,o),Re,Fe,o.id,Me.vertexBuffer,Me.indexBuffer,Me.segments)}}const hl=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function xc(_,i,o,d,p,b,w,U,T=!1,Y=!1){const Q=d[d.length-1].overscaledZ,z=_.context,Z=z.gl,J=_.useProgram("raster"),te=_.transform,me=_.style.projection,pe=_.colorModeForRenderPass(),_e=!_.options.moving;for(const xe of d){const Me=_.getDepthModeForSublayer(xe.overscaledZ-Q,o.paint.get("raster-opacity")===1?Mi.ReadWrite:Mi.ReadOnly,Z.LESS),Re=i.getTile(xe);Re.registerFadeDuration(o.paint.get("raster-fade-duration"));const Fe=i.findLoadedParent(xe,0),Pe=i.findLoadedSibling(xe),Ye=$0(Re,Fe||Pe||null,i,o,_.transform,_.style.map.terrain);let Ke,qe;const At=o.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;z.activeTexture.set(Z.TEXTURE0),Re.texture.bind(At,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(Z.TEXTURE1),Fe?(Fe.texture.bind(At,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Ke=Math.pow(2,Fe.tileID.overscaledZ-Re.tileID.overscaledZ),qe=[Re.tileID.canonical.x*Ke%1,Re.tileID.canonical.y*Ke%1]):Re.texture.bind(At,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Re.texture.useMipmap&&z.extTextureFilterAnisotropic&&_.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const ht=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),ot=te.getProjectionData({overscaledTileID:xe,aligned:_e,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Lt=Q0(qe||[0,0],Ke||1,Ye,o,U),Ut=me.getMeshFromTileID(z,xe.canonical,b,w,"raster");J.draw(z,Z.TRIANGLES,Me,p?p[xe.overscaledZ]:Di.disabled,pe,T?Oi.frontCCW:Oi.backCCW,Lt,ht,ot,o.id,Ut.vertexBuffer,Ut.indexBuffer,Ut.segments)}}function $0(_,i,o,d,p,b){const w=d.paint.get("raster-fade-duration");if(!b&&w>0){const U=F.now(),T=(U-_.timeAdded)/w,Y=i?(U-i.timeAdded)/w:-1,Q=o.getSource(),z=Ge(p,{tileSize:Q.tileSize,roundZoom:Q.roundZoom}),Z=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(_.tileID.overscaledZ-z),J=Z&&_.refreshedUponExpiration?1:s.ae(Z?T:1-Y,0,1);return _.refreshedUponExpiration&&T>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}const Pa=new s.b7(1,0,0,1),_o=new s.b7(0,1,0,1),mn=new s.b7(0,0,1,1),pu=new s.b7(1,0,1,1),mu=new s.b7(0,1,1,1);function _u(_,i,o,d){Os(_,0,i+o/2,_.transform.width,o,d)}function bo(_,i,o,d){Os(_,i-o/2,0,o,_.transform.height,d)}function Os(_,i,o,d,p,b){const w=_.context,U=w.gl;U.enable(U.SCISSOR_TEST),U.scissor(i*_.pixelRatio,o*_.pixelRatio,d*_.pixelRatio,p*_.pixelRatio),w.clear({color:b}),U.disable(U.SCISSOR_TEST)}function bu(_,i,o){const d=_.context,p=d.gl,b=_.useProgram("debug"),w=Mi.disabled,U=Di.disabled,T=_.colorModeForRenderPass(),Y="$debug",Q=_.style.map.terrain&&_.style.map.terrain.getTerrainData(o);d.activeTexture.set(p.TEXTURE0);const z=i.getTileByID(o.key).latestRawTileData,Z=Math.floor((z&&z.byteLength||0)/1024),J=i.getTile(o).tileSize,te=512/Math.min(J,512)*(o.overscaledZ/_.transform.zoom)*.5;let me=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(me+=` => ${o.overscaledZ}`),function(_e,xe){_e.initDebugOverlayCanvas();const Me=_e.debugOverlayCanvas,Re=_e.context.gl,Fe=_e.debugOverlayCanvas.getContext("2d");Fe.clearRect(0,0,Me.width,Me.height),Fe.shadowColor="white",Fe.shadowBlur=2,Fe.lineWidth=1.5,Fe.strokeStyle="white",Fe.textBaseline="top",Fe.font="bold 36px Open Sans, sans-serif",Fe.fillText(xe,5,5),Fe.strokeText(xe,5,5),_e.debugOverlayTexture.update(Me),_e.debugOverlayTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE)}(_,`${me} ${Z}kB`);const pe=_.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(d,p.TRIANGLES,w,U,Wi.alphaBlended,Oi.disabled,Wh(s.b7.transparent,te),null,pe,Y,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(d,p.LINE_STRIP,w,U,T,Oi.disabled,Wh(s.b7.red),Q,pe,Y,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function yu(_,i,o,d){const{isRenderingGlobe:p}=d,b=_.context,w=b.gl,U=_.transform,T=_.colorModeForRenderPass(),Y=_.getDepthModeFor3D(),Q=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(const z of o){const Z=i.getTerrainMesh(z.tileID),J=_.renderToTexture.getTexture(z),te=i.getTerrainData(z.tileID);b.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,J.texture);const me=i.getMeshFrameDelta(U.zoom),pe=U.calculateFogMatrix(z.tileID.toUnwrapped()),_e=hp(me,pe,_.style.sky,U.pitch,p),xe=U.getProjectionData({overscaledTileID:z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Q.draw(b,w.TRIANGLES,Y,Di.disabled,T,Oi.backCCW,_e,te,xe,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function vu(_,i){if(!i.mesh){const o=new s.aI;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const d=new s.aK;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),i.mesh=new qo(_.createVertexBuffer(o,Xn.members),_.createIndexBuffer(d),s.aJ.simpleSegment(0,0,o.length,d.length))}return i.mesh}class q0{constructor(i,o){this.context=new cu(i),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=We.maxUnderzooming+We.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fs}resize(i,o,d){if(this.width=Math.floor(i*d),this.height=Math.floor(o*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const i=this.context,o=new s.aI;o.emplaceBack(0,0),o.emplaceBack(s.Z,0),o.emplaceBack(0,s.Z),o.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=i.createVertexBuffer(o,Xn.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);const d=new s.aI;d.emplaceBack(0,0),d.emplaceBack(s.Z,0),d.emplaceBack(0,s.Z),d.emplaceBack(s.Z,s.Z),this.debugBuffer=i.createVertexBuffer(d,Xn.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);const p=new s.bY;p.emplaceBack(0,0,0,0),p.emplaceBack(s.Z,0,s.Z,0),p.emplaceBack(0,s.Z,0,s.Z),p.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=i.createVertexBuffer(p,Kh.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);const b=new s.aI;b.emplaceBack(0,0),b.emplaceBack(s.Z,0),b.emplaceBack(0,s.Z),b.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(b,Xn.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);const w=new s.aI;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(w,Xn.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);const U=new s.bZ;U.emplaceBack(0),U.emplaceBack(1),U.emplaceBack(3),U.emplaceBack(2),U.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(U);const T=new s.aK;T.emplaceBack(1,0,2),T.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const Y=this.context.gl;this.stencilClearMode=new Di({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO),this.tileExtentMesh=new qo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const i=this.context,o=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=s.K();s.bQ(d,0,this.width,this.height,0,0,1),s.M(d,d,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const p={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(i,o.TRIANGLES,Mi.disabled,this.stencilClearMode,Wi.disabled,Oi.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,o,d){if(this.currentStencilSource===i.source||!i.isTileClipped()||!o||!o.length)return;this.currentStencilSource=i.source,this.nextStencilID+o.length>256&&this.clearStencil();const p=this.context;p.setColorMode(Wi.disabled),p.setDepthMode(Mi.disabled);const b={};for(const w of o)b[w.key]=this.nextStencilID++;this._renderTileMasks(b,o,d,!0),this._renderTileMasks(b,o,d,!1),this._tileClippingMaskIDs=b}_renderTileMasks(i,o,d,p){const b=this.context,w=b.gl,U=this.style.projection,T=this.transform,Y=this.useProgram("clippingMask");for(const Q of o){const z=i[Q.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Q),J=U.getMeshFromTileID(this.context,Q.canonical,p,!0,"stencil"),te=T.getProjectionData({overscaledTileID:Q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});Y.draw(b,w.TRIANGLES,Mi.disabled,new Di({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),Wi.disabled,d?Oi.disabled:Oi.backCCW,null,Z,te,"$clipping",J.vertexBuffer,J.indexBuffer,J.segments)}}_renderTilesDepthBuffer(){const i=this.context,o=i.gl,d=this.style.projection,p=this.transform,b=this.useProgram("depth"),w=this.getDepthModeFor3D(),U=Ie(p,{tileSize:p.tileSize});for(const T of U){const Y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T),Q=d.getMeshFromTileID(this.context,T.canonical,!0,!0,"raster"),z=p.getProjectionData({overscaledTileID:T,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(i,o.TRIANGLES,w,Di.disabled,Wi.disabled,Oi.backCCW,null,Y,z,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,o=this.context.gl;return new Di({func:o.NOTEQUAL,mask:255},i,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(i){const o=this.context.gl;return new Di({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){const o=this.context.gl,d=i.sort((w,U)=>U.overscaledZ-w.overscaledZ),p=d[d.length-1].overscaledZ,b=d[0].overscaledZ-p+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const w={};for(let U=0;U<b;U++)w[U+p]=new Di({func:o.GEQUAL,mask:255},U+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=b,[w,d]}return[{[p]:Di.disabled},d]}stencilConfigForOverlapTwoPass(i){const o=this.context.gl,d=i.sort((w,U)=>U.overscaledZ-w.overscaledZ),p=d[d.length-1].overscaledZ,b=d[0].overscaledZ-p+1;if(this.clearStencil(),b>1){const w={},U={};for(let T=0;T<b;T++)w[T+p]=new Di({func:o.GREATER,mask:255},b+1+T,255,o.KEEP,o.KEEP,o.REPLACE),U[T+p]=new Di({func:o.GREATER,mask:255},1+T,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*b+1,[w,U,d]}return this.nextStencilID=3,[{[p]:new Di({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[p]:new Di({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},d]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Wi([i.CONSTANT_COLOR,i.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wi.unblended:Wi.alphaBlended}getDepthModeForSublayer(i,o,d){if(!this.opaquePassEnabledForLayer())return Mi.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Mi(d||this.context.gl.LEQUAL,o,[p,p])}getDepthModeFor3D(){return new Mi(this.context.gl.LEQUAL,Mi.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,o){var d,p;this.style=i,this.options=o,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(F.now()),this.imageManager.beginFrame();const b=this.style._order,w=this.style.sourceCaches,U={},T={},Y={},Q={isRenderingToTexture:!1,isRenderingGlobe:((d=i.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const Z in w){const J=w[Z];J.used&&J.prepare(this.context),U[Z]=J.getVisibleCoordinates(!1),T[Z]=U[Z].slice().reverse(),Y[Z]=J.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<b.length;Z++)if(this.style._layers[b[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of b){const J=this.style._layers[Z];if(!J.hasOffscreenPass()||J.isHidden(this.transform.zoom))continue;const te=T[J.source];(J.type==="custom"||te.length)&&this.renderLayer(this,w[J.source],J,te,Q)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,J){const te=Z.context,me=te.gl,pe=((Pe,Ye,Ke)=>{const qe=Math.cos(Ye.rollInRadians),At=Math.sin(Ye.rollInRadians),ht=ze(Ye),ot=Ye.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Pe.properties.get("sky-color"),u_horizon_color:Pe.properties.get("horizon-color"),u_horizon:[(Ye.width/2-ht*At)*Ke,(Ye.height/2+ht*qe)*Ke],u_horizon_normal:[-At,qe],u_sky_horizon_blend:Pe.properties.get("sky-horizon-blend")*Ye.height/2*Ke,u_sky_blend:ot}})(J,Z.style.map.transform,Z.pixelRatio),_e=new Mi(me.LEQUAL,Mi.ReadWrite,[0,1]),xe=Di.disabled,Me=Z.colorModeForRenderPass(),Re=Z.useProgram("sky"),Fe=vu(te,J);Re.draw(te,me.TRIANGLES,_e,xe,Me,Oi.disabled,pe,null,void 0,"sky",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[b[this.currentLayer]],J=w[Z.source],te=U[Z.source];this._renderTileClippingMasks(Z,te,!1),this.renderLayer(this,J,Z,te,Q)}this.renderPass="translucent";let z=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Z=this.style._layers[b[this.currentLayer]],J=w[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,Q))continue;this.opaquePassEnabledForLayer()||z||(z=!0,Q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const te=(Z.type==="symbol"?Y:T)[Z.source];this._renderTileClippingMasks(Z,U[Z.source],!1),this.renderLayer(this,J,Z,te,Q)}if(Q.isRenderingGlobe&&function(Z,J,te){const me=Z.context,pe=me.gl,_e=Z.useProgram("atmosphere"),xe=new Mi(pe.LEQUAL,Mi.ReadOnly,[0,1]),Me=Z.transform,Re=function(ot,Lt){const Ut=ot.properties.get("position"),yt=[-Ut.x,-Ut.y,-Ut.z],ti=s.ad(new Float64Array(16));return ot.properties.get("anchor")==="map"&&(s.a_(ti,ti,Lt.rollInRadians),s.a$(ti,ti,-Lt.pitchInRadians),s.a_(ti,ti,Lt.bearingInRadians),s.a$(ti,ti,Lt.center.lat*Math.PI/180),s.bp(ti,ti,-Lt.center.lng*Math.PI/180)),s.bX(yt,yt,ti),yt}(te,Z.transform),Fe=Me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Pe=J.properties.get("atmosphere-blend")*Fe.projectionTransition;if(Pe===0)return;const Ye=Wl(Me.worldSize,Me.center.lat),Ke=Me.inverseProjectionMatrix,qe=new Float64Array(4);qe[3]=1,s.at(qe,qe,Me.modelViewProjectionMatrix),qe[0]/=qe[3],qe[1]/=qe[3],qe[2]/=qe[3],qe[3]=1,s.at(qe,qe,Ke),qe[0]/=qe[3],qe[1]/=qe[3],qe[2]/=qe[3],qe[3]=1;const At=((ot,Lt,Ut,yt,ti)=>({u_sun_pos:ot,u_atmosphere_blend:Lt,u_globe_position:Ut,u_globe_radius:yt,u_inv_proj_matrix:ti}))(Re,Pe,[qe[0],qe[1],qe[2]],Ye,Ke),ht=vu(me,J);_e.draw(me,pe.TRIANGLES,xe,Di.disabled,Wi.alphaBlended,Oi.disabled,At,null,null,"atmosphere",ht.vertexBuffer,ht.indexBuffer,ht.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(J,te){let me=null;const pe=Object.values(J._layers).flatMap(Re=>Re.source&&!Re.isHidden(te)?[J.sourceCaches[Re.source]]:[]),_e=pe.filter(Re=>Re.getSource().type==="vector"),xe=pe.filter(Re=>Re.getSource().type!=="vector"),Me=Re=>{(!me||me.getSource().maxzoom<Re.getSource().maxzoom)&&(me=Re)};return _e.forEach(Re=>Me(Re)),me||xe.forEach(Re=>Me(Re)),me}(this.style,this.transform.zoom);Z&&function(J,te,me){for(let pe=0;pe<me.length;pe++)bu(J,te,me[pe])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const J=Z.transform.padding;_u(Z,Z.transform.height-(J.top||0),3,Pa),_u(Z,J.bottom||0,3,_o),bo(Z,J.left||0,3,mn),bo(Z,Z.transform.width-(J.right||0),3,pu);const te=Z.transform.centerPoint;(function(me,pe,_e,xe){Os(me,pe-1,_e-10,2,20,xe),Os(me,pe-10,_e-1,20,2,xe)})(Z,te.x,Z.transform.height-te.y,mu)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=i?!s.b_(o,d):!s.b$(o,d)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(s.c0(o,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,w){const U=b.context,T=U.gl,Y=b.transform,Q=Wi.unblended,z=new Mi(T.LEQUAL,Mi.ReadWrite,[0,1]),Z=w.sourceCache.getRenderableTiles(),J=b.useProgram("terrainDepth");U.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),U.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),U.clear({color:s.b7.transparent,depth:1});for(const te of Z){const me=w.getTerrainMesh(te.tileID),pe=w.getTerrainData(te.tileID),_e=Y.getProjectionData({overscaledTileID:te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),xe={u_ele_delta:w.getMeshFrameDelta(Y.zoom)};J.draw(U,T.TRIANGLES,z,Di.disabled,Q,Oi.backCCW,xe,pe,_e,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}U.bindFramebuffer.set(null),U.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,w){const U=b.context,T=U.gl,Y=b.transform,Q=Wi.unblended,z=new Mi(T.LEQUAL,Mi.ReadWrite,[0,1]),Z=w.getCoordsTexture(),J=w.sourceCache.getRenderableTiles(),te=b.useProgram("terrainCoords");U.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),U.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),U.clear({color:s.b7.transparent,depth:1}),w.coordsIndex=[];for(const me of J){const pe=w.getTerrainMesh(me.tileID),_e=w.getTerrainData(me.tileID);U.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,Z.texture);const xe={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(Y.zoom)},Me=Y.getProjectionData({overscaledTileID:me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});te.draw(U,T.TRIANGLES,z,Di.disabled,Q,Oi.backCCW,xe,_e,Me,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),w.coordsIndex.push(me.tileID.key)}U.bindFramebuffer.set(null),U.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(i,o,d,p,b){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(p||[]).length)&&(this.id=d.id,s.c1(d)?function(w,U,T,Y,Q,z){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=z,J=Di.disabled,te=w.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(me,pe,_e,xe,Me,Re,Fe,Pe,Ye){const Ke=pe.transform,qe=pe.style.map.terrain,At=Me==="map",ht=Re==="map";for(const ot of me){const Lt=xe.getTile(ot),Ut=Lt.getBucket(_e);if(!Ut||!Ut.text||!Ut.text.segments.get().length)continue;const yt=s.ak(Ut.textSizeData,Ke.zoom),ti=s.az(Lt,1,pe.transform.zoom),Ii=ct(At,pe.transform,ti),bi=_e.layout.get("icon-text-fit")!=="none"&&Ut.hasIconData();if(yt){const xa=Math.pow(2,Ke.zoom-Lt.tileID.overscaledZ),ia=qe?(wa,pa)=>qe.getElevation(ot,wa,pa):null;mc(Ut,At,ht,Ye,Ke,Ii,xa,yt,bi,s.aA(Ke,Lt,Fe,Pe),ot.toUnwrapped(),ia)}}}(Y,w,T,U,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),Q),T.paint.get("icon-opacity").constantOr(1)!==0&&bc(w,U,T,Y,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),J,te,Z),T.paint.get("text-opacity").constantOr(1)!==0&&bc(w,U,T,Y,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),J,te,Z),U.map.showCollisionBoxes&&(ll(w,U,T,Y,!0),ll(w,U,T,Y,!1))}(i,o,d,p,this.style.placement.variableOffsets,b):s.c2(d)?function(w,U,T,Y,Q){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:z}=Q,Z=T.paint.get("circle-opacity"),J=T.paint.get("circle-stroke-width"),te=T.paint.get("circle-stroke-opacity"),me=!T.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(J.constantOr(1)===0||te.constantOr(1)===0))return;const pe=w.context,_e=pe.gl,xe=w.transform,Me=w.getDepthModeForSublayer(0,Mi.ReadOnly),Re=Di.disabled,Fe=w.colorModeForRenderPass(),Pe=[],Ye=xe.getCircleRadiusCorrection();for(let Ke=0;Ke<Y.length;Ke++){const qe=Y[Ke],At=U.getTile(qe),ht=At.getBucket(T);if(!ht)continue;const ot=T.paint.get("circle-translate"),Lt=T.paint.get("circle-translate-anchor"),Ut=s.aA(xe,At,ot,Lt),yt=ht.programConfigurations.get(T.id),ti=w.useProgram("circle",yt),Ii=ht.layoutVertexBuffer,bi=ht.indexBuffer,xa=w.style.map.terrain&&w.style.map.terrain.getTerrainData(qe),ia={programConfiguration:yt,program:ti,layoutVertexBuffer:Ii,indexBuffer:bi,uniformValues:fp(w,At,T,Ut,Ye),terrainData:xa,projectionData:xe.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!z,applyTerrainMatrix:!0})};if(me){const wa=ht.segments.get();for(const pa of wa)Pe.push({segments:new s.aJ([pa]),sortKey:pa.sortKey,state:ia})}else Pe.push({segments:ht.segments,sortKey:0,state:ia})}me&&Pe.sort((Ke,qe)=>Ke.sortKey-qe.sortKey);for(const Ke of Pe){const{programConfiguration:qe,program:At,layoutVertexBuffer:ht,indexBuffer:ot,uniformValues:Lt,terrainData:Ut,projectionData:yt}=Ke.state;At.draw(pe,_e.TRIANGLES,Me,Re,Fe,Oi.backCCW,Lt,Ut,yt,T.id,ht,ot,Ke.segments,T.paint,w.transform.zoom,qe)}}(i,o,d,p,b):s.c3(d)?function(w,U,T,Y,Q){if(T.paint.get("heatmap-opacity")===0)return;const z=w.context,{isRenderingToTexture:Z,isRenderingGlobe:J}=Q;if(w.style.map.terrain){for(const te of Y){const me=U.getTile(te);U.hasRenderableParent(te)||(w.renderPass==="offscreen"?du(w,me,T,te,J):w.renderPass==="translucent"&&Cp(w,T,te,Z,J))}z.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(te,me,pe,_e){const xe=te.context,Me=xe.gl,Re=te.transform,Fe=Di.disabled,Pe=new Wi([Me.ONE,Me.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(Ye,Ke,qe){const At=Ye.gl;Ye.activeTexture.set(At.TEXTURE1),Ye.viewport.set([0,0,Ke.width/4,Ke.height/4]);let ht=qe.heatmapFbos.get(s.bU);ht?(At.bindTexture(At.TEXTURE_2D,ht.colorAttachment.get()),Ye.bindFramebuffer.set(ht.framebuffer)):(ht=fu(Ye,Ke.width/4,Ke.height/4),qe.heatmapFbos.set(s.bU,ht))})(xe,te,pe),xe.clear({color:s.b7.transparent});for(let Ye=0;Ye<_e.length;Ye++){const Ke=_e[Ye];if(me.hasRenderableParent(Ke))continue;const qe=me.getTile(Ke),At=qe.getBucket(pe);if(!At)continue;const ht=At.programConfigurations.get(pe.id),ot=te.useProgram("heatmap",ht),Lt=Re.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ut=Re.getCircleRadiusCorrection();ot.draw(xe,Me.TRIANGLES,Mi.disabled,Fe,Pe,Oi.backCCW,Jh(qe,Re.zoom,pe.paint.get("heatmap-intensity"),Ut),null,Lt,pe.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,pe.paint,Re.zoom,ht)}xe.viewport.set([0,0,te.width,te.height])}(w,U,T,Y):w.renderPass==="translucent"&&function(te,me){const pe=te.context,_e=pe.gl;pe.setColorMode(te.colorModeForRenderPass());const xe=me.heatmapFbos.get(s.bU);xe&&(pe.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,xe.colorAttachment.get()),pe.activeTexture.set(_e.TEXTURE1),cl(pe,me).bind(_e.LINEAR,_e.CLAMP_TO_EDGE),te.useProgram("heatmapTexture").draw(pe,_e.TRIANGLES,Mi.disabled,Di.disabled,te.colorModeForRenderPass(),Oi.disabled,eu(te,me,0,1),null,null,me.id,te.viewportBuffer,te.quadTriangleIndexBuffer,te.viewportSegments,me.paint,te.transform.zoom))}(w,T)}(i,o,d,p,b):s.c4(d)?function(w,U,T,Y,Q){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:z}=Q,Z=T.paint.get("line-opacity"),J=T.paint.get("line-width");if(Z.constantOr(1)===0||J.constantOr(1)===0)return;const te=w.getDepthModeForSublayer(0,Mi.ReadOnly),me=w.colorModeForRenderPass(),pe=T.paint.get("line-dasharray"),_e=T.paint.get("line-pattern"),xe=_e.constantOr(1),Me=T.paint.get("line-gradient"),Re=T.getCrossfadeParameters(),Fe=xe?"linePattern":pe?"lineSDF":Me?"lineGradient":"line",Pe=w.context,Ye=Pe.gl,Ke=w.transform;let qe=!0;for(const At of Y){const ht=U.getTile(At);if(xe&&!ht.patternsLoaded())continue;const ot=ht.getBucket(T);if(!ot)continue;const Lt=ot.programConfigurations.get(T.id),Ut=w.context.program.get(),yt=w.useProgram(Fe,Lt),ti=qe||yt.program!==Ut,Ii=w.style.map.terrain&&w.style.map.terrain.getTerrainData(At),bi=_e.constantOr(null);if(bi&&ht.imageAtlas){const aa=ht.imageAtlas,Ji=aa.patternPositions[bi.to.toString()],nr=aa.patternPositions[bi.from.toString()];Ji&&nr&&Lt.setConstantPatternPositions(Ji,nr)}const xa=Ke.getProjectionData({overscaledTileID:At,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),ia=Ke.getPixelScale(),wa=xe?gp(w,ht,T,ia,Re):pe?nc(w,ht,T,ia,pe,Re):Me?sl(w,ht,T,ia,ot.lineClipsArray.length):rc(w,ht,T,ia);if(xe)Pe.activeTexture.set(Ye.TEXTURE0),ht.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Lt.updatePaintBuffers(Re);else if(pe&&(ti||w.lineAtlas.dirty))Pe.activeTexture.set(Ye.TEXTURE0),w.lineAtlas.bind(Pe);else if(Me){const aa=ot.gradients[T.id];let Ji=aa.texture;if(T.gradientVersion!==aa.version){let nr=256;if(T.stepInterpolant){const qa=U.getSource().maxzoom,br=At.canonical.z===qa?Math.ceil(1<<w.transform.maxZoom-At.canonical.z):1;nr=s.ae(s.bV(ot.maxLineLength/s.Z*1024*br),256,Pe.maxTextureSize)}aa.gradient=s.bW({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:nr,image:aa.gradient||void 0,clips:ot.lineClipsArray}),aa.texture?aa.texture.update(aa.gradient):aa.texture=new H(Pe,aa.gradient,Ye.RGBA),aa.version=T.gradientVersion,Ji=aa.texture}Pe.activeTexture.set(Ye.TEXTURE0),Ji.bind(T.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}let pa;if(z){const[aa]=w.getStencilConfigForOverlapAndUpdateStencilID(Y);pa=aa[At.overscaledZ]}else pa=w.stencilModeForClipping(At);yt.draw(Pe,Ye.TRIANGLES,te,pa,me,Oi.disabled,wa,Ii,xa,T.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,T.paint,w.transform.zoom,Lt,ot.layoutVertexBuffer2),qe=!1}}(i,o,d,p,b):s.c5(d)?function(w,U,T,Y,Q){const z=T.paint.get("fill-color"),Z=T.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:J}=Q,te=w.colorModeForRenderPass(),me=T.paint.get("fill-pattern"),pe=w.opaquePassEnabledForLayer()&&!me.constantOr(1)&&z.constantOr(s.b7.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===pe){const _e=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?Mi.ReadWrite:Mi.ReadOnly);gu(w,U,T,Y,_e,te,!1,J)}if(w.renderPass==="translucent"&&T.paint.get("fill-antialias")){const _e=w.getDepthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Mi.ReadOnly);gu(w,U,T,Y,_e,te,!0,J)}}(i,o,d,p,b):s.c6(d)?function(w,U,T,Y,Q){const z=T.paint.get("fill-extrusion-opacity");if(z===0)return;const{isRenderingToTexture:Z}=Q;if(w.renderPass==="translucent"){const J=new Mi(w.context.gl.LEQUAL,Mi.ReadWrite,w.depthRangeFor3D);if(z!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))vc(w,U,T,Y,J,Di.disabled,Wi.disabled,Z),vc(w,U,T,Y,J,w.stencilModeFor3D(),w.colorModeForRenderPass(),Z);else{const te=w.colorModeForRenderPass();vc(w,U,T,Y,J,Di.disabled,te,Z)}}}(i,o,d,p,b):s.c7(d)?function(w,U,T,Y,Q){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const{isRenderingToTexture:z}=Q,Z=w.context,J=w.style.projection.useSubdivision,te=w.getDepthModeForSublayer(0,Mi.ReadOnly),me=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(pe,_e,xe,Me,Re,Fe,Pe){const Ye=pe.context,Ke=Ye.gl;for(const qe of xe){const At=_e.getTile(qe),ht=At.dem;if(!ht||!ht.data||!At.needsHillshadePrepare)continue;const ot=ht.dim,Lt=ht.stride,Ut=ht.getPixels();if(Ye.activeTexture.set(Ke.TEXTURE1),Ye.pixelStoreUnpackPremultiplyAlpha.set(!1),At.demTexture=At.demTexture||pe.getTileTexture(Lt),At.demTexture){const ti=At.demTexture;ti.update(Ut,{premultiply:!1}),ti.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE)}else At.demTexture=new H(Ye,Ut,Ke.RGBA,{premultiply:!1}),At.demTexture.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE);Ye.activeTexture.set(Ke.TEXTURE0);let yt=At.fbo;if(!yt){const ti=new H(Ye,{width:ot,height:ot,data:null},Ke.RGBA);ti.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),yt=At.fbo=Ye.createFramebuffer(ot,ot,!0,!1),yt.colorAttachment.set(ti.texture)}Ye.bindFramebuffer.set(yt.framebuffer),Ye.viewport.set([0,0,ot,ot]),pe.useProgram("hillshadePrepare").draw(Ye,Ke.TRIANGLES,Re,Fe,Pe,Oi.disabled,fo(At.tileID,ht),null,null,Me.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),At.needsHillshadePrepare=!1}})(w,U,Y,T,te,Di.disabled,me),Z.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(J){const[pe,_e,xe]=w.stencilConfigForOverlapTwoPass(Y);AA(w,U,T,xe,pe,te,me,!1,z),AA(w,U,T,xe,_e,te,me,!0,z)}else{const[pe,_e]=w.getStencilConfigForOverlapAndUpdateStencilID(Y);AA(w,U,T,_e,pe,te,me,!1,z)}}(i,o,d,p,b):s.c8(d)?function(w,U,T,Y,Q){if(w.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!Y.length)return;const{isRenderingToTexture:z}=Q,Z=U.getSource(),J=w.style.projection.useSubdivision;if(Z instanceof oi)xc(w,U,T,Y,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,z);else if(J){const[te,me,pe]=w.stencilConfigForOverlapTwoPass(Y);xc(w,U,T,pe,te,!1,!0,hl,!1,z),xc(w,U,T,pe,me,!0,!0,hl,!1,z)}else{const[te,me]=w.getStencilConfigForOverlapAndUpdateStencilID(Y);xc(w,U,T,me,te,!1,!0,hl,!1,z)}}(i,o,d,p,b):s.c9(d)?function(w,U,T,Y,Q){const z=T.paint.get("background-color"),Z=T.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:J}=Q,te=w.context,me=te.gl,pe=w.style.projection,_e=w.transform,xe=_e.tileSize,Me=T.paint.get("background-pattern");if(w.isPatternMissing(Me))return;const Re=!Me&&z.a===1&&Z===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==Re)return;const Fe=Di.disabled,Pe=w.getDepthModeForSublayer(0,Re==="opaque"?Mi.ReadWrite:Mi.ReadOnly),Ye=w.colorModeForRenderPass(),Ke=w.useProgram(Me?"backgroundPattern":"background"),qe=Y||Ie(_e,{tileSize:xe,terrain:w.style.map.terrain});Me&&(te.activeTexture.set(me.TEXTURE0),w.imageManager.bind(w.context));const At=T.getCrossfadeParameters();for(const ht of qe){const ot=_e.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),Lt=Me?gs(Z,w,Me,{tileID:ht,tileSize:xe},At):oc(Z,z),Ut=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ht),yt=pe.getMeshFromTileID(te,ht.canonical,!1,!0,"raster");Ke.draw(te,me.TRIANGLES,Pe,Fe,Ye,Oi.backCCW,Lt,Ut,ot,T.id,yt.vertexBuffer,yt.indexBuffer,yt.segments)}}(i,0,d,p,b):s.ca(d)&&function(w,U,T,Y){const{isRenderingGlobe:Q}=Y,z=w.context,Z=T.implementation,J=w.style.projection,te=w.transform,me=te.getProjectionDataForCustomLayer(Q),pe={farZ:te.farZ,nearZ:te.nearZ,fov:te.fov*Math.PI/180,modelViewProjectionMatrix:te.modelViewProjectionMatrix,projectionMatrix:te.projectionMatrix,shaderData:{variantName:J.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${J.shaderPreludeCode.vertexSource}`,define:J.shaderDefine},defaultProjectionData:me},_e=Z.renderingMode?Z.renderingMode:"2d";if(w.renderPass==="offscreen"){const xe=Z.prerender;xe&&(w.setCustomLayerDefaults(),z.setColorMode(w.colorModeForRenderPass()),xe.call(Z,z.gl,pe),z.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),z.setColorMode(w.colorModeForRenderPass()),z.setStencilMode(Di.disabled);const xe=_e==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,Mi.ReadOnly);z.setDepthMode(xe),Z.render(z.gl,pe),z.setDirty(),w.setBaseState(),z.bindFramebuffer.set(null)}}(i,0,d,b))}saveTileTexture(i){const o=this._tileTextures[i.size[0]];o?o.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const o=this._tileTextures[i];return o&&o.length>0?o.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const o=this.imageManager.getPattern(i.from.toString()),d=this.imageManager.getPattern(i.to.toString());return!o||!d}useProgram(i,o,d=!1){this.cache=this.cache||{};const p=!!this.style.map.terrain,b=this.style.projection,w=i+(o?o.cacheKey:"")+`/${d?Mr:b.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(p?"/terrain":"");return this.cache[w]||(this.cache[w]=new rl(this.context,Fi[i],o,iu[i],this._showOverdrawInspector,p,d?Fi.projectionMercator:b.shaderPreludeCode,d?Xr:b.shaderDefine)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new H(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:o}=this.context.gl;return this.width!==i||this.height!==o}}function xu(_,i){let o,d=!1,p=null,b=null;const w=()=>{p=null,d&&(_.apply(b,o),p=setTimeout(w,i),d=!1)};return(...U)=>(d=!0,b=this,o=U,p||w(),p)}class wu{constructor(i){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let d;return o.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(d=p)}),(d&&d[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:d,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const d=o.join("/");let p=d;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${d}`);let b=window.location.hash.replace(p,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let w=window.location.href.replace(/(#.+)?$/,b);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=xu(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const o=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,p=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,p),w=Math.round(o.lng*b)/b,U=Math.round(o.lat*b)/b,T=this._map.getBearing(),Y=this._map.getPitch();let Q="";if(Q+=i?`/${w}/${U}/${d}`:`${d}/${U}/${w}`,(T||Y)&&(Q+="/"+Math.round(10*T)/10),Y&&(Q+=`/${Math.round(Y)}`),this._hashName){const z=this._hashName;let Z=!1;const J=window.location.hash.slice(1).split("&").map(te=>{const me=te.split("=")[0];return me===z?(Z=!0,`${me}=${Q}`):te}).filter(te=>te);return Z||J.push(`${z}=${Q}`),`#${J.join("&")}`}return`#${Q}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new s.Q(+i[2],+i[1])}catch{return!1}const o=+i[0],d=+(i[3]||0),p=+(i[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&d>=-180&&d<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const Rn={linearity:.3,easing:s.cb(0,0,.3,1)},W0=s.e({deceleration:2500,maxSpeed:1400},Rn),J0=s.e({deceleration:20,maxSpeed:1400},Rn),ef=s.e({deceleration:1e3,maxSpeed:360},Rn),tf=s.e({deceleration:1e3,maxSpeed:90},Rn),af=s.e({deceleration:1e3,maxSpeed:360},Rn);class rf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:F.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,o=F.now();for(;i.length>0&&o-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)o.zoom+=b.zoomDelta||0,o.bearing+=b.bearingDelta||0,o.pitch+=b.pitchDelta||0,o.roll+=b.rollDelta||0,b.panDelta&&o.pan._add(b.panDelta),b.around&&(o.around=b.around),b.pinchAround&&(o.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(o.pan.mag()){const b=Xs(o.pan.mag(),d,s.e({},W0,i||{})),w=o.pan.mult(b.amount/o.pan.mag()),U=this._map.cameraHelper.handlePanInertia(w,this._map.transform);p.center=U.easingCenter,p.offset=U.easingOffset,lA(p,b)}if(o.zoom){const b=Xs(o.zoom,d,J0);p.zoom=this._map.transform.zoom+b.amount,lA(p,b)}if(o.bearing){const b=Xs(o.bearing,d,ef);p.bearing=this._map.transform.bearing+s.ae(b.amount,-179,179),lA(p,b)}if(o.pitch){const b=Xs(o.pitch,d,tf);p.pitch=this._map.transform.pitch+b.amount,lA(p,b)}if(o.roll){const b=Xs(o.roll,d,af);p.roll=this._map.transform.roll+s.ae(b.amount,-179,179),lA(p,b)}if(p.zoom||p.bearing){const b=o.pinchAround===void 0?o.around:o.pinchAround;p.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),s.e(p,{noMoveStart:!0})}}function lA(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function Xs(_,i,o){const{maxSpeed:d,linearity:p,deceleration:b}=o,w=s.ae(_*p/(i/1e3),-d,d),U=Math.abs(w)/(b*p);return{easing:o.easing,duration:1e3*U,amount:w*(U/2)}}class Gr extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,o,d,p={}){d=d instanceof MouseEvent?d:new MouseEvent(i,d);const b=M.mousePos(o.getCanvas(),d),w=o.unproject(b);super(i,s.e({point:b,lngLat:w,originalEvent:d},p)),this._defaultPrevented=!1,this.target=o}}class kr extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,o,d){const p=i==="touchend"?d.changedTouches:d.touches,b=M.touchPos(o.getCanvasContainer(),p),w=b.map(T=>o.unproject(T)),U=b.reduce((T,Y,Q,z)=>T.add(Y.div(z.length)),new s.P(0,0));super(i,{points:b,point:U,lngLats:w,lngLat:o.unproject(U),originalEvent:d}),this._defaultPrevented=!1}}class In extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,o,d){super(i,{originalEvent:d}),this._defaultPrevented=!1}}class nf{constructor(i,o){this._map=i,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new In(i.type,this._map,i))}mousedown(i,o){return this._mousedownPos=o,this._firePreventable(new Gr(i.type,this._map,i))}mouseup(i){this._map.fire(new Gr(i.type,this._map,i))}click(i,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Gr(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Gr(i.type,this._map,i))}mouseover(i){this._map.fire(new Gr(i.type,this._map,i))}mouseout(i){this._map.fire(new Gr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new kr(i.type,this._map,i))}touchmove(i){this._map.fire(new kr(i.type,this._map,i))}touchend(i){this._map.fire(new kr(i.type,this._map,i))}touchcancel(i){this._map.fire(new kr(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jn{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Gr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Gr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kn{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(s.P.convert(i),this._map.terrain)}}class sf{constructor(i,o){this._map=i,this._tr=new Kn(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,o){this.isEnabled()&&i.shiftKey&&i.button===0&&(M.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(i,o){if(!this._active)return;const d=o;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=d,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(p.x,d.x),w=Math.max(p.x,d.x),U=Math.min(p.y,d.y),T=Math.max(p.y,d.y);M.setTransform(this._box,`translate(${b}px,${U}px)`),this._box.style.width=w-b+"px",this._box.style.height=T-U+"px"}mouseupWindow(i,o){if(!this._active||i.button!==0)return;const d=this._startPos,p=o;if(this.reset(),M.suppressClick(),d.x!==p.x||d.y!==p.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(d,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,o){return this._map.fire(new s.l(i,{originalEvent:o}))}}function Bu(_,i){if(_.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${i.length}`);const o={};for(let d=0;d<_.length;d++)o[_[d].identifier]=i[d];return o}class Mp{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,o,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),d.length===this.numTouches&&(this.centroid=function(p){const b=new s.P(0,0);for(const w of p)b._add(w);return b.div(p.length)}(o),this.touches=Bu(d,o)))}touchmove(i,o,d){if(this.aborted||!this.centroid)return;const p=Bu(d,o);for(const b in this.touches){const w=p[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,o,d){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Cu{constructor(i){this.singleTap=new Mp(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,o,d){this.singleTap.touchstart(i,o,d)}touchmove(i,o,d){this.singleTap.touchmove(i,o,d)}touchend(i,o,d){const p=this.singleTap.touchend(i,o,d);if(p){const b=i.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(p)<30;if(b&&w||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class of{constructor(i){this._tr=new Kn(i),this._zoomIn=new Cu({numTouches:1,numTaps:2}),this._zoomOut=new Cu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,o,d){this._zoomIn.touchstart(i,o,d),this._zoomOut.touchstart(i,o,d)}touchmove(i,o,d){this._zoomIn.touchmove(i,o,d),this._zoomOut.touchmove(i,o,d)}touchend(i,o,d){const p=this._zoomIn.touchend(i,o,d),b=this._zoomOut.touchend(i,o,d),w=this._tr;return p?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:U=>U.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(p)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:U=>U.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ps{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const o=this._moveFunction(...i);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(i,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,o){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const p=Array.isArray(o)?o[0]:o;return!this._moved&&p.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(d,p))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&M.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ms={0:1,2:2};class Ht{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const o=M.mouseButton(i);this._eventButton=o}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(o,d){const p=ms[d];return o.buttons===void 0||(o.buttons&p)!==p}(i,this._eventButton)}isValidEndEvent(i){return M.mouseButton(i)===this._eventButton}}class Af{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class Mu{constructor(i=new Ht({checkCorrectEvent:()=>!0}),o=new Af){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(i,o,d){return i instanceof MouseEvent?o(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?d(i):void 0}startMove(i){this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(i){this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(i){return this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(i){return this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(i){return this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}const ul=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=i=>{i.preventDefault()}};class dl{constructor(i,o){this._clickTolerance=i.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,o,d){return this._calculateTransform(i,o,d)}touchmove(i,o,d){if(this._active){if(!this._shouldBePrevented(d.length))return i.preventDefault(),this._calculateTransform(i,o,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,o,d){this._calculateTransform(i,o,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,o,d){d.length>0&&(this._active=!0);const p=Bu(d,o),b=new s.P(0,0),w=new s.P(0,0);let U=0;for(const Y in p){const Q=p[Y],z=this._touches[Y];z&&(b._add(Q),w._add(Q.sub(z)),U++,p[Y]=Q)}if(this._touches=p,this._shouldBePrevented(U)||!w.mag())return;const T=w.div(U);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(U),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,o,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([o[0],o[1]]))}touchmove(i,o,d){if(!this._firstTwoTouches)return;i.preventDefault();const[p,b]=this._firstTwoTouches,w=fl(d,o,p),U=fl(d,o,b);if(!w||!U)return;const T=this._aroundCenter?null:w.add(U).div(2);return this._move([w,U],T,i)}touchend(i,o,d){if(!this._firstTwoTouches)return;const[p,b]=this._firstTwoTouches,w=fl(d,o,p),U=fl(d,o,b);w&&U||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function fl(_,i,o){for(let d=0;d<_.length;d++)if(_[d].identifier===o)return i[d]}function Ni(_,i){return Math.log(_/i)/Math.LN2}class wc extends yo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,o){const d=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Ni(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ni(this._distance,d),pinchAround:o}}}function lf(_,i){return 180*_.angleWith(i)/Math.PI}class Bc extends yo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,o,d){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:lf(this._vector,p),pinchAround:o}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const o=25/(Math.PI*this._minDiameter)*360,d=lf(i,this._startVector);return Math.abs(d)<o}}function Ru(_){return Math.abs(_.y)>Math.abs(_.x)}class cf extends yo{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,o,d){super.touchstart(i,o,d),this._currentTouchCount=d.length}_start(i){this._lastPoints=i,Ru(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,o,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,b,d.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(p.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(i,o,d){if(this._valid!==void 0)return this._valid;const p=i.mag()>=2,b=o.mag()>=2;if(!p&&!b)return;if(!p||!b)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const w=i.y>0==o.y>0;return Ru(i)&&Ru(o)&&w}}const hf={panStep:100,bearingStep:15,pitchStep:10};class Cc{constructor(i){this._tr=new Kn(i);const o=hf;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let o=0,d=0,p=0,b=0,w=0;switch(i.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:i.shiftKey?d=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?d=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?p=1:(i.preventDefault(),w=-1);break;case 40:i.shiftKey?p=-1:(i.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,p=0),{cameraAnimation:U=>{const T=this._tr;U.easeTo({duration:300,easeId:"keyboardHandler",easing:uf,zoom:o?Math.round(T.zoom)+o*(i.shiftKey?2:1):T.zoom,bearing:T.bearing+d*this._bearingStep,pitch:T.pitch+p*this._pitchStep,offset:[-b*this._panStep,-w*this._panStep],center:T.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function uf(_){return _*(2-_)}const df=4.000244140625;class Iu{constructor(i,o){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=i,this._tr=new Kn(i),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let o=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const d=F.now(),p=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,o!==0&&o%df==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(p*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),i.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=i,this._delta-=o,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=M.mousePos(this._map.getCanvas(),i),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(s.Q.convert(d.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const U=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=U),typeof this._targetZoom=="number"&&(this._targetZoom+=U)}if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>df?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&T!==0&&(T=1/T);const Y=typeof this._targetZoom!="number"?i.scale:s.ac(this._targetZoom);this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,s.ah(Y*T))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,d=this._startZoom,p=this._easing;let b,w=!1;if(this._type==="wheel"&&d&&p){const U=F.now()-this._lastWheelEventTime,T=Math.min((U+5)/200,1),Y=p(T);b=s.B.number(d,o,Y),T<1?this._frameId||(this._frameId=!0):w=!0}else b=o,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!w,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let o=s.cd;if(this._prevEase){const d=this._prevEase,p=(F.now()-d.start)/d.duration,b=d.easing(p+.01)-d.easing(p),w=.27/Math.sqrt(b*b+1e-4)*.01,U=Math.sqrt(.0729-w*w);o=s.cb(w,U,.25,1)}return this._prevEase={start:F.now(),duration:i,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ff{constructor(i,o){this._clickZoom=i,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Rp{constructor(i){this._tr=new Kn(i),this.reset()}reset(){this._active=!1}dblclick(i,o){return i.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vs{constructor(){this._tap=new Cu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,o,d){if(!this._swipePoint)if(this._tapTime){const p=o[0],b=i.timeStamp-this._tapTime<500,w=this._tapPoint.dist(p)<30;b&&w?d.length>0&&(this._swipePoint=p,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(i,o,d)}touchmove(i,o,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const p=o[0],b=p.y-this._swipePoint.y;return this._swipePoint=p,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,o,d)}touchend(i,o,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const p=this._tap.touchend(i,o,d);p&&(this._tapTime=i.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ga{constructor(i,o,d){this._el=i,this._mousePan=o,this._touchPan=d}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class gl{constructor(i,o,d,p){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=o,this._mousePitch=d,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Mc{constructor(i,o,d,p){this._el=i,this._touchZoom=o,this._touchRotate=d,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Uu{constructor(i,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",i);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=o,this._container.appendChild(p);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=d,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,o){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:i,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const pl=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class gf extends s.l{}function Eu(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class $n{constructor(i,o){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,b)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=p.type==="renderFrame"?void 0:p,U={needsRenderFrame:!1},T={},Y={};for(const{handlerName:Z,handler:J,allowed:te}of this._handlers){if(!J.isEnabled())continue;let me;if(this._blockedByActive(Y,te,Z))J.reset();else if(J[b||p.type]){if(s.ce(p,b||p.type)){const pe=M.mousePos(this._map.getCanvas(),p);me=J[b||p.type](p,pe)}else if(s.cf(p,b||p.type)){const pe=this._getMapTouches(p.touches),_e=M.touchPos(this._map.getCanvas(),pe);me=J[b||p.type](p,_e,pe)}else s.cg(b||p.type)||(me=J[b||p.type](p));this.mergeHandlerResult(U,T,me,Z,w),me&&me.needsRenderFrame&&this._triggerRenderFrame()}(me||J.isActive())&&(Y[Z]=J)}const Q={};for(const Z in this._previousActiveHandlers)Y[Z]||(Q[Z]=w);this._previousActiveHandlers=Y,(Object.keys(Q).length||Eu(U))&&(this._changes.push([U,T,Q]),this._triggerRenderFrame()),(Object.keys(Y).length||Eu(U))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:z}=U;z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],z(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rf(i),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,b,w]of this._listeners)M.addEventListener(p,b,p===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[i,o,d]of this._listeners)M.removeEventListener(i,o,i===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(i){const o=this._map,d=o.getCanvasContainer();this._add("mapEvent",new nf(o,i));const p=o.boxZoom=new sf(o,i);this._add("boxZoom",p),i.interactive&&i.boxZoom&&p.enable();const b=o.cooperativeGestures=new Uu(o,i.cooperativeGestures);this._add("cooperativeGestures",b),i.cooperativeGestures&&b.enable();const w=new of(o),U=new Rp(o);o.doubleClickZoom=new ff(U,w),this._add("tapZoom",w),this._add("clickZoom",U),i.interactive&&i.doubleClickZoom&&o.doubleClickZoom.enable();const T=new Vs;this._add("tapDragZoom",T);const Y=o.touchPitch=new cf(o);this._add("touchPitch",Y),i.interactive&&i.touchPitch&&o.touchPitch.enable(i.touchPitch);const Q=()=>o.project(o.getCenter()),z=function({enable:Re,clickTolerance:Fe,aroundCenter:Pe=!0,minPixelCenterThreshold:Ye=100,rotateDegreesPerPixelMoved:Ke=.8},qe){const At=new Ht({checkCorrectEvent:ht=>M.mouseButton(ht)===0&&ht.ctrlKey||M.mouseButton(ht)===2&&!ht.ctrlKey});return new ps({clickTolerance:Fe,move:(ht,ot)=>{const Lt=qe();if(Pe&&Math.abs(Lt.y-ht.y)>Ye)return{bearingDelta:s.cc(new s.P(ht.x,ot.y),ot,Lt)};let Ut=(ot.x-ht.x)*Ke;return Pe&&ot.y<Lt.y&&(Ut=-Ut),{bearingDelta:Ut}},moveStateManager:At,enable:Re,assignEvents:ul})}(i,Q),Z=function({enable:Re,clickTolerance:Fe,pitchDegreesPerPixelMoved:Pe=-.5}){const Ye=new Ht({checkCorrectEvent:Ke=>M.mouseButton(Ke)===0&&Ke.ctrlKey||M.mouseButton(Ke)===2});return new ps({clickTolerance:Fe,move:(Ke,qe)=>({pitchDelta:(qe.y-Ke.y)*Pe}),moveStateManager:Ye,enable:Re,assignEvents:ul})}(i),J=function({enable:Re,clickTolerance:Fe,rollDegreesPerPixelMoved:Pe=.3},Ye){const Ke=new Ht({checkCorrectEvent:qe=>M.mouseButton(qe)===2&&qe.ctrlKey});return new ps({clickTolerance:Fe,move:(qe,At)=>{const ht=Ye();let ot=(At.x-qe.x)*Pe;return At.y<ht.y&&(ot=-ot),{rollDelta:ot}},moveStateManager:Ke,enable:Re,assignEvents:ul})}(i,Q);o.dragRotate=new gl(i,z,Z,J),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",J,["mousePitch"]),i.interactive&&i.dragRotate&&o.dragRotate.enable();const te=function({enable:Re,clickTolerance:Fe}){const Pe=new Ht({checkCorrectEvent:Ye=>M.mouseButton(Ye)===0&&!Ye.ctrlKey});return new ps({clickTolerance:Fe,move:(Ye,Ke)=>({around:Ke,panDelta:Ke.sub(Ye)}),activateOnStart:!0,moveStateManager:Pe,enable:Re,assignEvents:ul})}(i),me=new dl(i,o);o.dragPan=new ga(d,te,me),this._add("mousePan",te),this._add("touchPan",me,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&o.dragPan.enable(i.dragPan);const pe=new Bc,_e=new wc;o.touchZoomRotate=new Mc(d,_e,pe,T),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",_e,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&o.touchZoomRotate.enable(i.touchZoomRotate);const xe=o.scrollZoom=new Iu(o,()=>this._triggerRenderFrame());this._add("scrollZoom",xe,["mousePan"]),i.interactive&&i.scrollZoom&&o.scrollZoom.enable(i.scrollZoom);const Me=o.keyboard=new Cc(o);this._add("keyboard",Me),i.interactive&&i.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new jn(o))}_add(i,o,d){this._handlers.push({handlerName:i,handler:o,allowed:d}),this._handlersById[i]=o}stop(i){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!pl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,o,d){for(const p in i)if(p!==d&&(!o||o.indexOf(p)<0))return!0;return!1}_getMapTouches(i){const o=[];for(const d of i)this._el.contains(d.target)&&o.push(d);return o}mergeHandlerResult(i,o,d,p,b){if(!d)return;s.e(i,d);const w={handlerName:p,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(o.zoom=w),d.panDelta!==void 0&&(o.drag=w),d.rollDelta!==void 0&&(o.roll=w),d.pitchDelta!==void 0&&(o.pitch=w),d.bearingDelta!==void 0&&(o.rotate=w)}_applyChanges(){const i={},o={},d={};for(const[p,b,w]of this._changes)p.panDelta&&(i.panDelta=(i.panDelta||new s.P(0,0))._add(p.panDelta)),p.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(i.rollDelta=(i.rollDelta||0)+p.rollDelta),p.around!==void 0&&(i.around=p.around),p.pinchAround!==void 0&&(i.pinchAround=p.pinchAround),p.noInertia&&(i.noInertia=p.noInertia),s.e(o,b),s.e(d,w);this._updateMapTransform(i,o,d),this._changes=[]}_updateMapTransform(i,o,d){const p=this._map,b=p._getTransformForUpdate(),w=p.terrain;if(!(Eu(i)||w&&this._terrainMovement))return this._fireEvents(o,d,!0);p._stop(!0);let{panDelta:U,zoomDelta:T,bearingDelta:Y,pitchDelta:Q,rollDelta:z,around:Z,pinchAround:J}=i;J!==void 0&&(Z=J),Z=Z||p.transform.centerPoint,w&&!b.isPointOnMapSurface(Z)&&(Z=b.centerPoint);const te={panDelta:U,zoomDelta:T,rollDelta:z,pitchDelta:Q,bearingDelta:Y,around:Z};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(Z)&&(Z=b.centerPoint);const me=Z.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(U?Z.sub(U):Z);w?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(te,b),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?b.setCenter(b.screenPointToLocation(b.centerPoint.sub(U))):this._map.cameraHelper.handleMapControlsPan(te,b,me):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(te,b,me))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(te,b),this._map.cameraHelper.handleMapControlsPan(te,b,me)),p._applyUpdatedTransform(b),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(o,d,!0)}_fireEvents(i,o,d){const p=pl(this._eventsInProgress),b=pl(i),w={};for(const z in i){const{originalEvent:Z}=i[z];this._eventsInProgress[z]||(w[`${z}start`]=Z),this._eventsInProgress[z]=i[z]}!p&&b&&this._fireEvent("movestart",b.originalEvent);for(const z in w)this._fireEvent(z,w[z]);b&&this._fireEvent("move",b.originalEvent);for(const z in i){const{originalEvent:Z}=i[z];this._fireEvent(z,Z)}const U={};let T;for(const z in this._eventsInProgress){const{handlerName:Z,originalEvent:J}=this._eventsInProgress[z];this._handlersById[Z].isActive()||(delete this._eventsInProgress[z],T=o[Z]||J,U[`${z}end`]=T)}for(const z in U)this._fireEvent(z,U[z]);const Y=pl(this._eventsInProgress),Q=(p||b)&&!Y;if(Q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(z)}if(d&&Q){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;!z||!z.essential&&F.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:T})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(i,o){this._map.fire(new s.l(i,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new gf("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Rc extends s.E{constructor(i,o,d){super(),this._renderFrameCallback=()=>{const p=Math.min((F.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=d.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(i,o){i.apply(this.transform),this.transform=i,this.cameraHelper=o}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(i,o){return this.jumpTo({center:i},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,o){return this.jumpTo({elevation:i},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,o,d){return i=s.P.convert(i).mult(-1),this.panTo(this.transform.center,s.e({offset:i},o),d)}panTo(i,o,d){return this.easeTo(s.e({center:i},o),d)}getZoom(){return this.transform.zoom}setZoom(i,o){return this.jumpTo({zoom:i},o),this}zoomTo(i,o,d){return this.easeTo(s.e({zoom:i},o),d)}zoomIn(i,o){return this.zoomTo(this.getZoom()+1,i,o),this}zoomOut(i,o){return this.zoomTo(this.getZoom()-1,i,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,o){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)).fire(new s.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(i,o){return this.jumpTo({bearing:i},o),this}getPadding(){return this.transform.padding}setPadding(i,o){return this.jumpTo({padding:i},o),this}rotateTo(i,o,d){return this.easeTo(s.e({bearing:i},o),d)}resetNorth(i,o){return this.rotateTo(0,s.e({duration:1e3},i),o),this}resetNorthPitch(i,o){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},i),o),this}snapToNorth(i,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,o):this}getPitch(){return this.transform.pitch}setPitch(i,o){return this.jumpTo({pitch:i},o),this}getRoll(){return this.transform.roll}setRoll(i,o){return this.jumpTo({roll:i},o),this}cameraForBounds(i,o){i=Nt.convert(i).adjustAntiMeridian();const d=o&&o.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),d,o)}_cameraForBoxAndBearing(i,o,d,p){const b={top:0,bottom:0,right:0,left:0};if(typeof(p=s.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const Y=p.padding;p.padding={top:Y,bottom:Y,right:Y,left:Y}}const w=s.e(b,p.padding);p.padding=w;const U=this.transform,T=new Nt(i,o);return this.cameraHelper.cameraForBoxAndBearing(p,w,T,d,U)}fitBounds(i,o,d){return this._fitInternal(this.cameraForBounds(i,o),o,d)}fitScreenCoordinates(i,o,d,p,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(i)),this.transform.screenPointToLocation(s.P.convert(o)),d,p),p,b)}_fitInternal(i,o,d){return i?(delete(o=s.e(i,o)).padding,o.linear?this.easeTo(o,d):this.flyTo(o,d)):this}jumpTo(i,o){this.stop();const d=this._getTransformForUpdate();let p=!1,b=!1,w=!1;const U=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,i);const T=d.zoom!==U;return"elevation"in i&&d.elevation!==+i.elevation&&d.setElevation(+i.elevation),"bearing"in i&&d.bearing!==+i.bearing&&(p=!0,d.setBearing(+i.bearing)),"pitch"in i&&d.pitch!==+i.pitch&&(b=!0,d.setPitch(+i.pitch)),"roll"in i&&d.roll!==+i.roll&&(w=!0,d.setRoll(+i.roll)),i.padding==null||d.isPaddingEqual(i.padding)||d.setPadding(i.padding),this._applyUpdatedTransform(d),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)),T&&this.fire(new s.l("zoomstart",o)).fire(new s.l("zoom",o)).fire(new s.l("zoomend",o)),p&&this.fire(new s.l("rotatestart",o)).fire(new s.l("rotate",o)).fire(new s.l("rotateend",o)),b&&this.fire(new s.l("pitchstart",o)).fire(new s.l("pitch",o)).fire(new s.l("pitchend",o)),w&&this.fire(new s.l("rollstart",o)).fire(new s.l("roll",o)).fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}calculateCameraOptionsFromTo(i,o,d,p=0){const b=s.$.fromLngLat(i,o),w=s.$.fromLngLat(d,p),U=w.x-b.x,T=w.y-b.y,Y=w.z-b.z,Q=Math.hypot(U,T,Y);if(Q===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(U,T),Z=s.ah(this.transform.cameraToCenterDistance/Q/this.transform.tileSize),J=180*Math.atan2(U,-T)/Math.PI;let te=180*Math.acos(z/Q)/Math.PI;return te=Y<0?90-te:90+te,{center:w.toLngLat(),elevation:p,zoom:Z,pitch:te,bearing:J}}calculateCameraOptionsFromCameraLngLatAltRotation(i,o,d,p,b){const w=this.transform.calculateCenterFromCameraLngLatAlt(i,o,d,p);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:d,pitch:p,roll:b}}easeTo(i,o){this._stop(!1,i.easeId),((i=s.e({offset:[0,0],duration:500,easing:s.cd},i)).animate===!1||!i.essential&&F.prefersReducedMotion)&&(i.duration=0);const d=this._getTransformForUpdate(),p=this.getBearing(),b=d.pitch,w=d.roll,U="bearing"in i?this._normalizeBearing(i.bearing,p):p,T="pitch"in i?+i.pitch:b,Y="roll"in i?this._normalizeBearing(i.roll,w):w,Q="padding"in i?i.padding:d.padding,z=s.P.convert(i.offset);let Z,J;i.around&&(Z=s.Q.convert(i.around),J=d.locationToScreenPoint(Z));const te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},me=this.cameraHelper.handleEaseTo(d,{bearing:U,pitch:T,roll:Y,padding:Q,around:Z,aroundPoint:J,offsetAsPoint:z,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||p!==U,this._pitching=this._pitching||T!==b,this._rolling=this._rolling||Y!==w,this._padding=!d.isPaddingEqual(Q),this._zooming=this._zooming||me.isZooming,this._easeId=i.easeId,this._prepareEase(o,i.noMoveStart,te),this.terrain&&this._prepareElevation(me.elevationCenter),this._ease(pe=>{me.easeFunc(pe),this.terrain&&!i.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},pe=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(o,pe)},i),this}_prepareEase(i,o,d={}){this._moving=!0,o||d.moving||this.fire(new s.l("movestart",i)),this._zooming&&!d.zooming&&this.fire(new s.l("zoomstart",i)),this._rotating&&!d.rotating&&this.fire(new s.l("rotatestart",i)),this._pitching&&!d.pitching&&this.fire(new s.l("pitchstart",i)),this._rolling&&!d.rolling&&this.fire(new s.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&o!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(d-(o-(d*i+this._elevationStart))/(1-i)),this._elevationTarget=o}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};const o=i.getCameraLngLat(),d=i.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(o,i.zoom):0;if(d<p){const b=this.calculateCameraOptionsFromTo(o,p,i.center,i.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(i){const o=[];if(o.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&o.push(p=>this.transformCameraUpdate(p)),!o.length)return;const d=i.clone();for(const p of o){const b=d.clone(),{center:w,zoom:U,roll:T,pitch:Y,bearing:Q,elevation:z}=p(b);w&&b.setCenter(w),z!==void 0&&b.setElevation(z),U!==void 0&&b.setZoom(U),T!==void 0&&b.setRoll(T),Y!==void 0&&b.setPitch(Y),Q!==void 0&&b.setBearing(Q),d.apply(b)}this.transform.apply(d)}_fireMoveEvents(i){this.fire(new s.l("move",i)),this._zooming&&this.fire(new s.l("zoom",i)),this._rotating&&this.fire(new s.l("rotate",i)),this._pitching&&this.fire(new s.l("pitch",i)),this._rolling&&this.fire(new s.l("roll",i))}_afterEase(i,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const d=this._zooming,p=this._rotating,b=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new s.l("zoomend",i)),p&&this.fire(new s.l("rotateend",i)),b&&this.fire(new s.l("pitchend",i)),w&&this.fire(new s.l("rollend",i)),this.fire(new s.l("moveend",i))}flyTo(i,o){if(!i.essential&&F.prefersReducedMotion){const ot=s.O(i,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(ot,o)}this.stop(),i=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cd},i);const d=this._getTransformForUpdate(),p=d.bearing,b=d.pitch,w=d.roll,U=d.padding,T="bearing"in i?this._normalizeBearing(i.bearing,p):p,Y="pitch"in i?+i.pitch:b,Q="roll"in i?this._normalizeBearing(i.roll,w):w,z="padding"in i?i.padding:d.padding,Z=s.P.convert(i.offset);let J=d.centerPoint.add(Z);const te=d.screenPointToLocation(J),me=this.cameraHelper.handleFlyTo(d,{bearing:T,pitch:Y,roll:Q,padding:z,locationAtOffset:te,offsetAsPoint:Z,center:i.center,minZoom:i.minZoom,zoom:i.zoom});let pe=i.curve;const _e=Math.max(d.width,d.height),xe=_e/me.scaleOfZoom,Me=me.pixelPathLength;typeof me.scaleOfMinZoom=="number"&&(pe=Math.sqrt(_e/me.scaleOfMinZoom/Me*2));const Re=pe*pe;function Fe(ot){const Lt=(xe*xe-_e*_e+(ot?-1:1)*Re*Re*Me*Me)/(2*(ot?xe:_e)*Re*Me);return Math.log(Math.sqrt(Lt*Lt+1)-Lt)}function Pe(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Ye(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const Ke=Fe(!1);let qe=function(ot){return Ye(Ke)/Ye(Ke+pe*ot)},At=function(ot){return _e*((Ye(Ke)*(Pe(Lt=Ke+pe*ot)/Ye(Lt))-Pe(Ke))/Re)/Me;var Lt},ht=(Fe(!0)-Ke)/pe;if(Math.abs(Me)<2e-6||!isFinite(ht)){if(Math.abs(_e-xe)<1e-6)return this.easeTo(i,o);const ot=xe<_e?-1:1;ht=Math.abs(Math.log(xe/_e))/pe,At=()=>0,qe=Lt=>Math.exp(ot*pe*Lt)}return i.duration="duration"in i?+i.duration:1e3*ht/("screenSpeed"in i?+i.screenSpeed/pe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=p!==T,this._pitching=Y!==b,this._rolling=Q!==w,this._padding=!d.isPaddingEqual(z),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(me.targetCenter),this._ease(ot=>{const Lt=ot*ht,Ut=1/qe(Lt),yt=At(Lt);this._rotating&&d.setBearing(s.B.number(p,T,ot)),this._pitching&&d.setPitch(s.B.number(b,Y,ot)),this._rolling&&d.setRoll(s.B.number(w,Q,ot)),this._padding&&(d.interpolatePadding(U,z,ot),J=d.centerPoint.add(Z)),me.easeFunc(ot,Ut,yt,J),this.terrain&&!i.freezeElevation&&this._updateElevation(ot),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,o){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,o)}return i||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(i,o,d){d.animate===!1||d.duration===0?(i(1),o()):(this._easeStart=F.now(),this._easeOptions=d,this._onEaseFrame=i,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,o){i=s.aL(i,-180,180);const d=Math.abs(i-o);return Math.abs(i-360-o)<d&&(i-=360),Math.abs(i+360-o)<d&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(i),this.transform.tileZoom):null}}const ri={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class gi{constructor(i=ri){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,o){const d=this._map._getUIString(`AttributionControl.${o}`);i.title=d,i.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const o=this._map.style.sourceCaches;for(const p in o){const b=o[p];if(b.used||b.usedForTerrain){const w=b.getSource();w.attribution&&i.indexOf(w.attribution)<0&&i.push(w.attribution)}}i=i.filter(p=>String(p).trim()),i.sort((p,b)=>p.length-b.length),i=i.filter((p,b)=>{for(let w=b+1;w<i.length;w++)if(i[w].indexOf(p)>=0)return!1;return!0});const d=i.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,i.length?(this._innerContainer.innerHTML=M.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ml{constructor(i={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const d=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const o=M.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const o=++this._id;return this._queue.push({callback:i,id:o,cancelled:!1}),o}remove(i){const o=this._currentlyRunning,d=o?this._queue.concat(o):this._queue;for(const p of d)if(p.id===i)return void(p.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const d of o)if(!d.cancelled&&(d.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Tu=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class jr extends s.E{constructor(i){super(),this._lastTilesetChange=F.now(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,o){this.sourceCache.update(i,o),this._renderableTilesKeys=[];const d={};for(const p of Ie(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))d[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(p.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[p.key]=new Cr(p,this.tileSize),this._lastTilesetChange=F.now());for(const p in this._tiles)d[p]||delete this._tiles[p]}freeRtt(i){for(const o in this._tiles){const d=this._tiles[o];(!i||d.tileID.equals(i)||d.tileID.isChildOf(i)||i.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,o){return o?this._getTerrainCoordsForTileRanges(i,o):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){const o={};for(const d of this._renderableTilesKeys){const p=this._tiles[d].tileID,b=i.clone(),w=s.b2();if(p.canonical.equals(i.canonical))s.bQ(w,0,s.Z,s.Z,0,0,1);else if(p.canonical.isChildOf(i.canonical)){const U=p.canonical.z-i.canonical.z,T=p.canonical.x-(p.canonical.x>>U<<U),Y=p.canonical.y-(p.canonical.y>>U<<U),Q=s.Z>>U;s.bQ(w,0,Q,Q,0,0,1),s.L(w,w,[-T*Q,-Y*Q,0])}else{if(!i.canonical.isChildOf(p.canonical))continue;{const U=i.canonical.z-p.canonical.z,T=i.canonical.x-(i.canonical.x>>U<<U),Y=i.canonical.y-(i.canonical.y>>U<<U),Q=s.Z>>U;s.bQ(w,0,s.Z,s.Z,0,0,1),s.L(w,w,[T*Q,Y*Q,0]),s.M(w,w,[1/2**U,1/2**U,0])}}b.terrainRttPosMatrix32f=new Float32Array(w),o[d]=b}return o}_getTerrainCoordsForTileRanges(i,o){const d={};for(const p of this._renderableTilesKeys){const b=this._tiles[p].tileID;if(!this._isWithinTileRanges(b,o))continue;const w=i.clone(),U=s.b2();if(b.canonical.z===i.canonical.z){const T=i.canonical.x-b.canonical.x,Y=i.canonical.y-b.canonical.y;s.bQ(U,0,s.Z,s.Z,0,0,1),s.L(U,U,[T*s.Z,Y*s.Z,0])}else if(b.canonical.z>i.canonical.z){const T=b.canonical.z-i.canonical.z,Y=b.canonical.x-(b.canonical.x>>T<<T),Q=b.canonical.y-(b.canonical.y>>T<<T),z=i.canonical.x-(b.canonical.x>>T),Z=i.canonical.y-(b.canonical.y>>T),J=s.Z>>T;s.bQ(U,0,J,J,0,0,1),s.L(U,U,[-Y*J+z*s.Z,-Q*J+Z*s.Z,0])}else{const T=i.canonical.z-b.canonical.z,Y=i.canonical.x-(i.canonical.x>>T<<T),Q=i.canonical.y-(i.canonical.y>>T<<T),z=(i.canonical.x>>T)-b.canonical.x,Z=(i.canonical.y>>T)-b.canonical.y,J=s.Z<<T;s.bQ(U,0,J,J,0,0,1),s.L(U,U,[Y*s.Z+z*J,Q*s.Z+Z*J,0])}w.terrainRttPosMatrix32f=new Float32Array(U),d[p]=w}return d}getSourceTile(i,o){const d=this.sourceCache._source;let p=i.overscaledZ-this.deltaZoom;if(p>d.maxzoom&&(p=d.maxzoom),p<d.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(p).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!b||!b.dem)&&o)for(;p>=d.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(i.scaledTo(p--).key);return b}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,o){return o[i.canonical.z]&&i.canonical.x>=o[i.canonical.z].minTileX&&i.canonical.x<=o[i.canonical.z].maxTileX&&i.canonical.y>=o[i.canonical.z].minTileY&&i.canonical.y<=o[i.canonical.z].maxTileY}}class pf{constructor(i,o,d){this._meshCache={},this.painter=i,this.sourceCache=new jr(o),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,o,d,p=s.Z){var b;if(!(o>=0&&o<p&&d>=0&&d<p))return 0;const w=this.getTerrainData(i),U=(b=w.tile)===null||b===void 0?void 0:b.dem;if(!U)return 0;const T=s.ch([],[o/p*s.Z,d/p*s.Z],w.u_terrain_matrix),Y=[T[0]*U.dim,T[1]*U.dim],Q=Math.floor(Y[0]),z=Math.floor(Y[1]),Z=Y[0]-Q,J=Y[1]-z;return U.get(Q,z)*(1-Z)*(1-J)+U.get(Q+1,z)*Z*(1-J)+U.get(Q,z+1)*(1-Z)*J+U.get(Q+1,z+1)*Z*J}getElevationForLngLatZoom(i,o){if(!s.ci(o,i.wrap()))return 0;const{tileID:d,mercatorX:p,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(i,o);return this.getElevation(d,p%s.Z,b%s.Z,s.Z)}getElevation(i,o,d,p=s.Z){return this.getDEMElevation(i,o,d,p)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const p=this.painter.context,b=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new H(p,b,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new H(p,new s.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}const o=this.sourceCache.getSourceTile(i,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const p=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new H(p,o.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),o.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const d=o&&o+o.tileID.key+i.key;if(d&&!this._demMatrixCache[d]){const p=this.sourceCache.sourceCache._source.maxzoom;let b=i.canonical.z-o.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=p?b=i.canonical.z-p:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=i.canonical.x-(i.canonical.x>>b<<b),U=i.canonical.y-(i.canonical.y>>b<<b),T=s.cj(new Float64Array(16),[1/(s.Z<<b),1/(s.Z<<b),0]);s.L(T,T,[w*s.Z,U*s.Z,0]),this._demMatrixCache[i.key]={matrix:T,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(i){const o=this.painter,d=o.width/devicePixelRatio,p=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new H(o.context,{width:d,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new H(o.context,{width:d,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(d,p,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,d,p))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,w=0;b<this._coordsTextureSize;b++)for(let U=0;U<this._coordsTextureSize;U++,w+=4)o[w+0]=255&U,o[w+1]=255&b,o[w+2]=U>>8<<4|b>>8,o[w+3]=0;const d=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),p=new H(i,d,i.gl.RGBA,{premultiply:!1});return p.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),d=this.painter.context,p=d.gl,b=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),U=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(b,U-w-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),d.bindFramebuffer.set(null);const T=o[0]+(o[2]>>4<<8),Y=o[1]+((15&o[2])<<8),Q=this.coordsIndex[255-o[3]],z=Q&&this.sourceCache.getTileByID(Q);if(!z)return null;const Z=this._coordsTextureSize,J=(1<<z.tileID.canonical.z)*Z;return new s.$((z.tileID.canonical.x*Z+T)/J+z.tileID.wrap,(z.tileID.canonical.y*Z+Y)/J,this.getElevation(z.tileID,T,Y,Z))}depthAtPoint(i){const o=new Uint8Array(4),d=this.painter.context,p=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),d.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(i){var o;const d=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,p=d&&i.canonical.y===0,b=d&&i.canonical.y===(1<<i.canonical.z)-1,w=`m_${p?"n":""}_${b?"s":""}`;if(this._meshCache[w])return this._meshCache[w];const U=this.painter.context,T=new s.ck,Y=new s.aK,Q=this.meshSize,z=s.Z/Q,Z=Q*Q;for(let Ye=0;Ye<=Q;Ye++)for(let Ke=0;Ke<=Q;Ke++)T.emplaceBack(Ke*z,Ye*z,0);for(let Ye=0;Ye<Z;Ye+=Q+1)for(let Ke=0;Ke<Q;Ke++)Y.emplaceBack(Ke+Ye,Q+Ke+Ye+1,Q+Ke+Ye+2),Y.emplaceBack(Ke+Ye,Q+Ke+Ye+2,Ke+Ye+1);const J=T.length,te=J+(Q+1),me=(Q+1)*Q,pe=p?s.b9:0,_e=p?0:1,xe=b?s.ba:s.Z,Me=b?0:1;for(let Ye=0;Ye<=Q;Ye++)T.emplaceBack(Ye*z,pe,_e);for(let Ye=0;Ye<=Q;Ye++)T.emplaceBack(Ye*z,xe,Me);for(let Ye=0;Ye<Q;Ye++)Y.emplaceBack(me+Ye,te+Ye,te+Ye+1),Y.emplaceBack(me+Ye,te+Ye+1,me+Ye+1),Y.emplaceBack(0+Ye,J+Ye+1,J+Ye),Y.emplaceBack(0+Ye,0+Ye+1,J+Ye+1);const Re=T.length,Fe=Re+2*(Q+1);for(const Ye of[0,1])for(let Ke=0;Ke<=Q;Ke++)for(const qe of[0,1])T.emplaceBack(Ye*s.Z,Ke*z,qe);for(let Ye=0;Ye<2*Q;Ye+=2)Y.emplaceBack(Re+Ye,Re+Ye+1,Re+Ye+3),Y.emplaceBack(Re+Ye,Re+Ye+3,Re+Ye+2),Y.emplaceBack(Fe+Ye,Fe+Ye+3,Fe+Ye+1),Y.emplaceBack(Fe+Ye,Fe+Ye+2,Fe+Ye+3);const Pe=new qo(U.createVertexBuffer(T,Tu.members),U.createIndexBuffer(Y),s.aJ.simpleSegment(0,0,T.length,Y.length));return this._meshCache[w]=Pe,Pe}getMeshFrameDelta(i){return 2*Math.PI*s.bu/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,o){var d;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(i,o);return(d=this.getMinMaxElevation(p).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(i){const o=this.getTerrainData(i).tile,d={minElevation:null,maxElevation:null};return o&&o.dem&&(d.minElevation=o.dem.min*this.exaggeration,d.maxElevation=o.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(i,o){const d=s.$.fromLngLat(i.wrap()),p=(1<<o)*s.Z,b=d.x*p,w=d.y*p,U=Math.floor(b/s.Z),T=Math.floor(w/s.Z);return{tileID:new s.Y(o,0,o,U,T),mercatorX:b,mercatorY:w}}}class qn{constructor(i,o,d){this._context=i,this._size=o,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new H(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(d.texture),{id:i,fbo:o,texture:d,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>i.id!==o),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const cA={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class _l{constructor(i,o){this.painter=i,this.terrain=o,this.pool=new qn(i.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(d=>!i._layers[d].isHidden(o)),this._coordsAscending={};for(const d in i.sourceCaches){this._coordsAscending[d]={};const p=i.sourceCaches[d].getVisibleCoordinates(),b=i.sourceCaches[d].getSource(),w=b instanceof oi?b.terrainTileRanges:null;for(const U of p){const T=this.terrain.sourceCache.getTerrainCoords(U,w);for(const Y in T)this._coordsAscending[d][Y]||(this._coordsAscending[d][Y]=[]),this._coordsAscending[d][Y].push(T[Y])}}this._coordsAscendingStr={};for(const d of i._order){const p=i._layers[d],b=p.source;if(cA[p.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const w in this._coordsAscending[b])this._coordsAscendingStr[b][w]=this._coordsAscending[b][w].map(U=>U.key).sort().join()}}for(const d of this._renderableTiles)for(const p in this._coordsAscendingStr){const b=this._coordsAscendingStr[p][d.tileID.key];b&&b!==d.rttCoords[p]&&(d.rtt=[])}}renderLayer(i,o){if(i.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),p=i.type,b=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(cA[p]&&(this._prevType&&cA[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(i.id),!w))return!0;if(cA[this._prevType]||cA[p]&&w){this._prevType=p;const U=this._stacks.length-1,T=this._stacks[U]||[];for(const Y of this._renderableTiles){if(this.pool.isFull()&&(yu(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Y),Y.rtt[U]){const z=this.pool.getObjectForId(Y.rtt[U].id);if(z.stamp===Y.rtt[U].stamp){this.pool.useObject(z);continue}}const Q=this.pool.getOrCreateFreeObject();this.pool.useObject(Q),this.pool.stampObject(Q),Y.rtt[U]={id:Q.id,stamp:Q.stamp},b.context.bindFramebuffer.set(Q.fbo.framebuffer),b.context.clear({color:s.b7.transparent,stencil:0}),b.currentStencilSource=void 0;for(let z=0;z<T.length;z++){const Z=b.style._layers[T[z]],J=Z.source?this._coordsAscending[Z.source][Y.tileID.key]:[Y.tileID];b.context.viewport.set([0,0,Q.fbo.width,Q.fbo.height]),b._renderTileClippingMasks(Z,J,!0),b.renderLayer(b,b.style.sourceCaches[Z.source],Z,J,d),Z.source&&(Y.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][Y.tileID.key])}}return yu(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),cA[p]}return!1}}const Ya={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Da=x,Su={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ri,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},bl={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ic{constructor(i,o,d=!1){this.mousedown=b=>{this.startMove(b,M.mousePos(this.element,b)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,M.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHanlder.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const p=new Mu;this._rotatePitchHanlder=new ps({clickTolerance:3,move:(b,w)=>{const U=o.getBoundingClientRect(),T=new s.P((U.bottom-U.top)/2,(U.right-U.left)/2);return{bearingDelta:s.cc(new s.P(b.x,w.y),w,T),pitchDelta:d?-.5*(w.y-b.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=i,M.addEventListener(o,"mousedown",this.mousedown),M.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(o,"touchcancel",this.reset)}startMove(i,o){this._rotatePitchHanlder.dragStart(i,o),M.disableDrag()}move(i,o){const d=this.map,{bearingDelta:p,pitchDelta:b}=this._rotatePitchHanlder.dragMove(i,o)||{};p&&d.setBearing(d.getBearing()+p),b&&d.setPitch(d.getPitch()+b)}off(){const i=this.element;M.removeEventListener(i,"mousedown",this.mousedown),M.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let _s;function Uc(_,i,o,d=!1){if(d||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return _==null?void 0:_.wrap();const p=new s.Q(_.lng,_.lat);if(_=new s.Q(_.lng,_.lat),i){const b=new s.Q(_.lng-360,_.lat),w=new s.Q(_.lng+360,_.lat),U=o.locationToScreenPoint(_).distSqr(i);o.locationToScreenPoint(b).distSqr(i)<U?_=b:o.locationToScreenPoint(w).distSqr(i)<U&&(_=w)}for(;Math.abs(_.lng-o.center.lng)>180;){const b=o.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=o.width&&b.y<=o.height)break;_.lng>o.center.lng?_.lng-=360:_.lng+=360}return _.lng!==p.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(_))?_:p}const yl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function hA(_,i,o){const d=_.classList;for(const p in yl)d.remove(`maplibregl-${o}-anchor-${p}`);d.add(`maplibregl-${o}-anchor-${i}`)}class vl extends s.E{constructor(i){if(super(),this._onKeyPress=o=>{const d=o.code,p=o.charCode||o.keyCode;d!=="Space"&&d!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=o=>{const d=o.originalEvent.target,p=this._element;this._popup&&(d===p||p.contains(d))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=Uc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${yl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${p}`),F.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=s.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const o=M.createNS("http://www.w3.org/2000/svg","svg"),d=41,p=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${d}px`),o.setAttributeNS(null,"width",`${p}px`),o.setAttributeNS(null,"viewBox",`0 0 ${p} ${d}`);const b=M.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const w=M.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const U=M.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"transform","translate(3.0, 29.0)"),U.setAttributeNS(null,"fill","#000000");const T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _e of T){const xe=M.createNS("http://www.w3.org/2000/svg","ellipse");xe.setAttributeNS(null,"opacity","0.04"),xe.setAttributeNS(null,"cx","10.5"),xe.setAttributeNS(null,"cy","5.80029008"),xe.setAttributeNS(null,"rx",_e.rx),xe.setAttributeNS(null,"ry",_e.ry),U.appendChild(xe)}const Y=M.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);const Q=M.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(Q);const z=M.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const Z=M.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(Z);const J=M.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");const te=M.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=M.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const pe=M.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),te.appendChild(me),te.appendChild(pe),w.appendChild(U),w.appendChild(Y),w.appendChild(z),w.appendChild(J),w.appendChild(te),o.appendChild(w),o.setAttributeNS(null,"height",d*this._scale+"px"),o.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(o),this._offset=s.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),hA(this._element,this._anchor,"marker"),i&&i.className)for(const o of i.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.Q.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const p=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var o,d;if(!(!((o=this._map)===null||o===void 0)&&o.terrain)){const z=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==z&&(this._element.style.opacity=z))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const p=this._map,b=p.terrain.depthAtPoint(this._pos),w=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,w)-b<.006)return void(this._element.style.opacity=this._opacity);const U=-this._offset.y/p.transform.pixelsPerMeter,T=Math.sin(p.getPitch()*Math.PI/180)*U,Y=p.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),Q=p.transform.lngLatToCameraDepth(this._lngLat,w+T)-Y>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&Q&&this._popup.remove(),this._element.style.opacity=Q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=s.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,o){return(this._opacity===void 0||i===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const Yu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let uA=0,vo=!1;const Nu={maxWidth:100,unit:"metric"};function Ec(_,i,o){const d=o&&o.maxWidth||100,p=_._container.clientHeight/2,b=_._container.clientWidth/2,w=_.unproject([b-d/2,p]),U=_.unproject([b+d/2,p]),T=Math.round(_.project(U).x-_.project(w).x),Y=Math.min(d,T,_._container.clientWidth),Q=w.distanceTo(U);if(o&&o.unit==="imperial"){const z=3.2808*Q;z>5280?xo(i,Y,z/5280,_._getUIString("ScaleControl.Miles")):xo(i,Y,z,_._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?xo(i,Y,Q/1852,_._getUIString("ScaleControl.NauticalMiles")):Q>=1e3?xo(i,Y,Q/1e3,_._getUIString("ScaleControl.Kilometers")):xo(i,Y,Q,_._getUIString("ScaleControl.Meters"))}function xo(_,i,o,d){const p=function(b){const w=Math.pow(10,`${Math.floor(b)}`.length-1);let U=b/w;return U=U>=10?10:U>=5?5:U>=3?3:U>=2?2:U>=1?1:function(T){const Y=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*Y)/Y}(U),w*U}(o);_.style.width=i*(p/o)+"px",_.innerHTML=`${p}&nbsp;${d}`}const Lu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Fc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Tc(_){if(_){if(typeof _=="number"){const i=Math.round(Math.abs(_)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,_),"top-left":new s.P(i,i),"top-right":new s.P(-i,i),bottom:new s.P(0,-_),"bottom-left":new s.P(i,-i),"bottom-right":new s.P(-i,-i),left:new s.P(_,0),right:new s.P(-_,0)}}if(_ instanceof s.P||Array.isArray(_)){const i=s.P.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:s.P.convert(_.center||[0,0]),top:s.P.convert(_.top||[0,0]),"top-left":s.P.convert(_["top-left"]||[0,0]),"top-right":s.P.convert(_["top-right"]||[0,0]),bottom:s.P.convert(_.bottom||[0,0]),"bottom-left":s.P.convert(_["bottom-left"]||[0,0]),"bottom-right":s.P.convert(_["bottom-right"]||[0,0]),left:s.P.convert(_.left||[0,0]),right:s.P.convert(_.right||[0,0])}}return Tc(new s.P(0,0))}const Pu=x;u.AJAXError=s.co,u.Event=s.l,u.Evented=s.E,u.LngLat=s.Q,u.MercatorCoordinate=s.$,u.Point=s.P,u.addProtocol=s.cp,u.config=s.a,u.removeProtocol=s.cq,u.AttributionControl=gi,u.BoxZoomHandler=sf,u.CanvasSource=Si,u.CooperativeGesturesHandler=Uu,u.DoubleClickZoomHandler=ff,u.DragPanHandler=ga,u.DragRotateHandler=gl,u.EdgeInsets=jA,u.FullscreenControl=class extends s.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var i;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=o==null?void 0:o.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=gt,u.GeolocateControl=class extends s.E{constructor(_){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{const o=new s.Q(i.coords.longitude,i.coords.latitude),d=i.coords.accuracy,p=this._map.getBearing(),b=s.e({bearing:p},this.options.fitBoundsOptions),w=Nt.fromLngLat(o,d);this._map.fitBounds(w,b,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const o=new s.Q(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&vo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new vl({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Yu,_)}onAdd(_){return this._map=_,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(i=!1){if(_s!==void 0&&!i)return _s;if(window.navigator.permissions===void 0)return _s=!!window.navigator.geolocation,_s;try{_s=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{_s=!!window.navigator.geolocation}return _s})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,uA=0,vo=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),o=_.coords;return i&&(o.longitude<i.getWest()||o.longitude>i.getEast()||o.latitude<i.getSouth()||o.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),i=_.getSouthEast(),o=_.getNorthEast(),d=i.distanceTo(o),p=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":uA--,vo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),uA++,uA>1?(_={maximumAge:6e5,timeout:0},vo=!0):(_=this.options.positionOptions,vo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const i=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=M.create("button","maplibregl-ctrl-globe",this._container),M.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},u.Hash=wu,u.ImageSource=oi,u.KeyboardHandler=Cc,u.LngLatBounds=Nt,u.LogoControl=ml,u.Map=class extends Rc{constructor(_){var i,o;s.cl.mark(s.cm.create);const d=Object.assign(Object.assign(Object.assign({},Su),_),{canvasContextAttributes:Object.assign(Object.assign({},Su.canvasContextAttributes),_.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new Vn,b=new qA;if(d.minZoom!==void 0&&p.setMinZoom(d.minZoom),d.maxZoom!==void 0&&p.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&p.setMinPitch(d.minPitch),d.maxPitch!==void 0&&p.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&p.setRenderWorldCopies(d.renderWorldCopies),super(p,b,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fu,this._controls=[],this._mapId=s.a4(),this._contextLost=U=>{U.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:U}))},this._contextRestored=U=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:U}))},this._onMapScroll=U=>{if(U.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ya),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this.transformCameraUpdate=d.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ce.addThrottleControl(()=>this.isMoving()),this._requestManager=new ue(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let U=!1;const T=xu(Y=>{this._trackResize&&!this._removed&&(this.resize(Y),this.redraw())},50);this._resizeObserver=new ResizeObserver(Y=>{U?T(Y):U=!0}),this._resizeObserver.observe(this._container)}this.handlers=new $n(this,d),this._hash=d.hash&&new wu(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,s.e({},d.fitBoundsOptions,{duration:0}))));const w=typeof d.style=="string"||((o=(i=d.style)===null||i===void 0?void 0:i.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new gi(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new ml,d.logoPosition),this.on("style.load",()=>{if(w||this._resizeTransform(),this.transform.unmodified){const U=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(U)}}),this.on("data",U=>{this._update(U.dataType==="style"),this.fire(new s.l(`${U.dataType}data`,U))}),this.on("dataloading",U=>{this.fire(new s.l(`${U.dataType}dataloading`,U))}),this.on("dataabort",U=>{this.fire(new s.l("sourcedataabort",U))})}_getMapId(){return this._mapId}addControl(_,i){if(i===void 0&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=_.onAdd(this);this._controls.push(_);const d=this._controlPositions[i];return i.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,i,o,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,i,o,d)}resize(_,i=!0){const[o,d]=this._containerDimensions(),p=this._getClampedPixelRatio(o,d);if(this._resizeCanvas(o,d,p),this.painter.resize(o,d,p),this.painter.overLimit()){const w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];const U=this._getClampedPixelRatio(o,d);this._resizeCanvas(o,d,U),this.painter.resize(o,d,U)}this._resizeTransform(i);const b=!this._moving;return b&&(this.stop(),this.fire(new s.l("movestart",_)).fire(new s.l("move",_))),this.fire(new s.l("resize",_)),b&&this.fire(new s.l("moveend",_)),this}_resizeTransform(_=!0){var i;const[o,d]=this._containerDimensions();this.transform.resize(o,d,_),(i=this._requestedCameraState)===null||i===void 0||i.resize(o,d,_)}_getClampedPixelRatio(_,i){const{0:o,1:d}=this._maxCanvasSize,p=this.getPixelRatio(),b=_*p,w=i*p;return Math.min(b>o?o/b:1,w>d?d/w:1)*p}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Nt.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(s.Q.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(s.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,i,o){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layers:i,listener:o,delegates:{mousemove:b=>{const w=i.filter(T=>this.getLayer(T)),U=w.length!==0?this.queryRenderedFeatures(b.point,{layers:w}):[];U.length?d||(d=!0,o.call(this,new Gr(_,this,b.originalEvent,{features:U}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layers:i,listener:o,delegates:{mousemove:w=>{const U=i.filter(T=>this.getLayer(T));(U.length!==0?this.queryRenderedFeatures(w.point,{layers:U}):[]).length?d=!0:d&&(d=!1,o.call(this,new Gr(_,this,w.originalEvent)))},mouseout:w=>{d&&(d=!1,o.call(this,new Gr(_,this,w.originalEvent)))}}}}{const d=p=>{const b=i.filter(U=>this.getLayer(U)),w=b.length!==0?this.queryRenderedFeatures(p.point,{layers:b}):[];w.length&&(p.features=w,o.call(this,p),delete p.features)};return{layers:i,listener:o,delegates:{[_]:d}}}}_saveDelegatedListener(_,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(i)}_removeDelegatedListener(_,i,o){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const d=this._delegatedListeners[_];for(let p=0;p<d.length;p++){const b=d[p];if(b.listener===o&&b.layers.length===i.length&&b.layers.every(w=>i.includes(w))){for(const w in b.delegates)this.off(w,b.delegates[w]);return void d.splice(p,1)}}}on(_,i,o){if(o===void 0)return super.on(_,i);const d=typeof i=="string"?[i]:i,p=this._createDelegatedListener(_,d,o);this._saveDelegatedListener(_,p);for(const b in p.delegates)this.on(b,p.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,d,o)}}}once(_,i,o){if(o===void 0)return super.once(_,i);const d=typeof i=="string"?[i]:i,p=this._createDelegatedListener(_,d,o);for(const b in p.delegates){const w=p.delegates[b];p.delegates[b]=(...U)=>{this._removeDelegatedListener(_,d,o),w(...U)}}this._saveDelegatedListener(_,p);for(const b in p.delegates)this.once(b,p.delegates[b]);return this}off(_,i,o){return o===void 0?super.off(_,i):(this._removeDelegatedListener(_,typeof i=="string"?[i]:i,o),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let o;const d=_ instanceof s.P||Array.isArray(_),p=d?_:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(d?{}:_)||{},p instanceof s.P||typeof p[0]=="number")o=[s.P.convert(p)];else{const b=s.P.convert(p[0]),w=s.P.convert(p[1]);o=[b,new s.P(w.x,b.y),w,new s.P(b.x,w.y),b]}return this.style.queryRenderedFeatures(o,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return(i=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(i==null)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){var o,d;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,i));const p=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new al(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,i,p):this.style.loadJSON(_,i,p),this):((d=(o=this.style)===null||o===void 0?void 0:o.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new al(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if(typeof _=="string"){const o=this._requestManager.transformRequest(_,"Style");s.j(o,new AbortController).then(d=>{this._updateDiff(d.data,i)}).catch(d=>{d&&this.fire(new s.k(d))})}else typeof _=="object"&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_,i)&&this._update(!0)}catch(o){s.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(i!==void 0)return i.loaded();this.fire(new s.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const i=this.style.sourceCaches[_.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&i.reload();for(const o in this.style._layers){const d=this.style._layers[o];d.type==="hillshade"&&d.source===_.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new pf(this.painter,i,_),this.painter.renderToTexture=new _l(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var d;o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=o.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:_})),this}getTerrain(){var _,i;return(i=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const o=_[i]._tiles;for(const d in o){const p=o[d];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,i,o){if(o){const d=this.getSource(o);if(!d)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);d.calculateTileZoom=se(Math.max(1,_),Math.max(1,i))}else for(const d in this.style.sourceCaches)this.style.sourceCaches[d].getSource().calculateTileZoom=se(Math.max(1,_),Math.max(1,i));return this._update(!0),this}addImage(_,i,o={}){const{pixelRatio:d=1,sdf:p=!1,stretchX:b,stretchY:w,content:U,textFitWidth:T,textFitHeight:Y}=o;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||s.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Q,height:z,data:Z}=i,J=i;return this.style.addImage(_,{data:new s.R({width:Q,height:z},new Uint8Array(Z)),pixelRatio:d,stretchX:b,stretchY:w,content:U,textFitWidth:T,textFitHeight:Y,sdf:p,version:0,userImage:J}),J.onAdd&&J.onAdd(this,_),this}}{const{width:Q,height:z,data:Z}=F.getImageData(i);this.style.addImage(_,{data:new s.R({width:Q,height:z},Z),pixelRatio:d,stretchX:b,stretchY:w,content:U,textFitWidth:T,textFitHeight:Y,sdf:p,version:0})}}updateImage(_,i){const o=this.style.getImage(_);if(!o)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=i instanceof HTMLImageElement||s.b(i)?F.getImageData(i):i,{width:p,height:b,data:w}=d;if(p===void 0||b===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==o.data.width||b!==o.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const U=!(i instanceof HTMLImageElement||s.b(i));return o.data.replace(w,U),this.style.updateImage(_,o),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return ce.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,i,o){return this.style.setLayerZoomRange(_,i,o),this._update(!0)}setFilter(_,i,o={}){return this.style.setFilter(_,i,o),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,o,d={}){return this.style.setPaintProperty(_,i,o,d),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,o,d={}){return this.style.setLayoutProperty(_,i,o,d),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setGlyphs(_,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,i,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,i,o,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,i,o=>{o||this._update(!0)}),this}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const i=this._canvasContainer=M.create("div","maplibregl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),d=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],d);const p=this._controlContainer=M.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{b[w]=M.create("div",`maplibregl-ctrl-${w} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,i,o){this._canvas.width=Math.floor(o*_),this._canvas.height=Math.floor(o*i),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let i=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{i={requestedAttributes:_},d&&(i.statusMessage=d.statusMessage,i.type=d.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!o){const d="Failed to initialize WebGL";throw i?(i.message=d,new Error(JSON.stringify(i))):new Error(d)}this.painter=new q0(o,this.transform),N.testSupport(o)}migrateProjection(_,i){super.migrateProjection(_,i),this.painter.transform=_,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var i,o,d,p,b;const w=this._idleTriggered?this._fadeDuration:0,U=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let T=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,Z=F.now();this.style.zoomHistory.update(z,Z);const J=new s.C(z,{now:Z,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),te=J.crossFadingFactor();te===1&&te===this._crossFadingFactor||(T=!0,this._crossFadingFactor=te),this.style.update(J)}const Y=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==U;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Y)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,Y),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cl.mark(s.cm.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Q=this._sourcesDirty||this._styleDirty||this._placementDirty;return Q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||Q||(this._fullyLoaded=!0,s.cl.mark(s.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ce.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cl.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,F.frame(this._frameRequest,_=>{s.cl.frame(_),this._frameRequest=null;try{this._render(_)}catch(i){if(!s.cn(i)&&!function(o){return o.message===lu}(i))throw i}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Da}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},u.MapMouseEvent=Gr,u.MapTouchEvent=kr,u.MapWheelEvent=In,u.Marker=vl,u.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const i=this._map.getZoom(),o=i===this._map.getMaxZoom(),d=i===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,o)=>{const d=this._map._getUIString(`NavigationControl.${o}`);i.title=d,i.setAttribute("aria-label",d)},this.options=s.e({},bl,_),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ic(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const o=M.create("button",_,this._container);return o.type="button",o.addEventListener("click",i),o}},u.Popup=class extends s.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Uc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;const o=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor;const p=Tc(this.options.offset);if(!d){const w=this._container.offsetWidth,U=this._container.offsetHeight;let T;T=o.y+p.bottom.y<U?["top"]:o.y>this._map.transform.height-U?["bottom"]:[],o.x<w/2?T.push("left"):o.x>this._map.transform.width-w/2&&T.push("right"),d=T.length===0?"bottom":T.join("-")}let b=o.add(p[d]);this.options.subpixelPositioning||(b=b.round()),M.setTransform(this._container,`${yl[d]} translate(${b.x}px,${b.y}px)`),hA(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Lu),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=s.Q.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),o=document.createElement("body");let d;for(o.innerHTML=_;d=o.firstChild,d;)i.appendChild(d);return this.setDOMContent(i)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Fc);_&&_.focus()}},u.RasterDEMTileSource=Kt,u.RasterTileSource=pi,u.ScaleControl=class{constructor(_){this._onMove=()=>{Ec(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Ec(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Nu),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=Iu,u.Style=al,u.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=cf,u.TwoFingersTouchRotateHandler=Bc,u.TwoFingersTouchZoomHandler=wc,u.TwoFingersTouchZoomRotateHandler=Mc,u.VectorTileSource=li,u.VideoSource=qi,u.addSourceType=(_,i)=>s._(void 0,void 0,void 0,function*(){if(Ri(_))throw new Error(`A source type called "${_}" already exists.`);((o,d)=>{fa[o]=d})(_,i)}),u.clearPrewarmedResources=function(){const _=Qe;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(rt),Qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.createTileMesh=$l,u.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return ha().getRTLTextPluginStatus()},u.getVersion=function(){return Pu},u.getWorkerCount=function(){return pt.workerCount},u.getWorkerUrl=function(){return s.a.WORKER_URL},u.importScriptInWorkers=function(_){return _t().broadcast("IS",_)},u.prewarm=function(){bt().acquire(rt)},u.setMaxParallelImageRequests=function(_){s.a.MAX_PARALLEL_IMAGE_REQUESTS=_},u.setRTLTextPlugin=function(_,i){return ha().setRTLTextPlugin(_,i)},u.setWorkerCount=function(_){pt.workerCount=_},u.setWorkerUrl=function(_){s.a.WORKER_URL=_}});var f=a;return f})})(R6);var Sm=R6.exports;const Ps=g6(Sm),hB=t=>t;function Ym(t){const e=t-1;return e*e*e+1}function Ib(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function ls(t,{delay:e=0,duration:a=400,easing:n=hB}={}){const c=+getComputedStyle(t).opacity;return{delay:e,duration:a,easing:n,css:f=>`opacity: ${f*c}`}}function ds(t,{delay:e=0,duration:a=400,easing:n=Ym,x:c=0,y:f=0,opacity:u=0}={}){const s=getComputedStyle(t),x=+s.opacity,B=s.transform==="none"?"":s.transform,I=x*(1-u),[R,F]=Ib(c),[M,N]=Ib(f);return{delay:e,duration:a,easing:n,css:(D,V)=>`
			transform: ${B} translate(${(1-D)*R}${F}, ${(1-D)*M}${N});
			opacity: ${x-I*V}`}}function Nm(t,{delay:e=0,duration:a=400,easing:n=Ym,axis:c="y"}={}){const f=getComputedStyle(t),u=+f.opacity,s=c==="y"?"height":"width",x=parseFloat(f[s]),B=c==="y"?["top","bottom"]:["left","right"],I=B.map(X=>`${X[0].toUpperCase()}${X.slice(1)}`),R=parseFloat(f[`padding${I[0]}`]),F=parseFloat(f[`padding${I[1]}`]),M=parseFloat(f[`margin${I[0]}`]),N=parseFloat(f[`margin${I[1]}`]),D=parseFloat(f[`border${I[0]}Width`]),V=parseFloat(f[`border${I[1]}Width`]);return{delay:e,duration:a,easing:n,css:X=>`overflow: hidden;opacity: ${Math.min(X*20,1)*u};${s}: ${X*x}px;padding-${B[0]}: ${X*R}px;padding-${B[1]}: ${X*F}px;margin-${B[0]}: ${X*M}px;margin-${B[1]}: ${X*N}px;border-${B[0]}-width: ${X*D}px;border-${B[1]}-width: ${X*V}px;min-${s}: 0`}}function uB(t,{delay:e=0,duration:a=400,easing:n=Ym,start:c=0,opacity:f=0}={}){const u=getComputedStyle(t),s=+u.opacity,x=u.transform==="none"?"":u.transform,B=1-c,I=s*(1-f);return{delay:e,duration:a,easing:n,css:(R,F)=>`
			transform: ${x} scale(${1-B*F});
			opacity: ${s-I*F}
		`}}const U6=/^[a-z0-9]+(-[a-z0-9]+)*$/,zg=(t,e,a,n="")=>{const c=t.split(":");if(t.slice(0,1)==="@"){if(c.length<2||c.length>3)return null;n=c.shift().slice(1)}if(c.length>3||!c.length)return null;if(c.length>1){const s=c.pop(),x=c.pop(),B={provider:c.length>0?c[0]:n,prefix:x,name:s};return e&&!L1(B)?null:B}const f=c[0],u=f.split("-");if(u.length>1){const s={provider:n,prefix:u.shift(),name:u.join("-")};return e&&!L1(s)?null:s}if(a&&n===""){const s={provider:n,prefix:"",name:f};return e&&!L1(s,a)?null:s}return null},L1=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,E6=Object.freeze({left:0,top:0,width:16,height:16}),og=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Zg=Object.freeze({...E6,...og}),S3=Object.freeze({...Zg,body:"",hidden:!1});function dB(t,e){const a={};!t.hFlip!=!e.hFlip&&(a.hFlip=!0),!t.vFlip!=!e.vFlip&&(a.vFlip=!0);const n=((t.rotate||0)+(e.rotate||0))%4;return n&&(a.rotate=n),a}function Ub(t,e){const a=dB(t,e);for(const n in S3)n in og?n in t&&!(n in a)&&(a[n]=og[n]):n in e?a[n]=e[n]:n in t&&(a[n]=t[n]);return a}function fB(t,e){const a=t.icons,n=t.aliases||Object.create(null),c=Object.create(null);function f(u){if(a[u])return c[u]=[];if(!(u in c)){c[u]=null;const s=n[u]&&n[u].parent,x=s&&f(s);x&&(c[u]=[s].concat(x))}return c[u]}return Object.keys(a).concat(Object.keys(n)).forEach(f),c}function gB(t,e,a){const n=t.icons,c=t.aliases||Object.create(null);let f={};function u(s){f=Ub(n[s]||c[s],f)}return u(e),a.forEach(u),Ub(t,f)}function F6(t,e){const a=[];if(typeof t!="object"||typeof t.icons!="object")return a;t.not_found instanceof Array&&t.not_found.forEach(c=>{e(c,null),a.push(c)});const n=fB(t);for(const c in n){const f=n[c];f&&(e(c,gB(t,c,f)),a.push(c))}return a}const pB={provider:"",aliases:{},not_found:{},...E6};function R2(t,e){for(const a in e)if(a in t&&typeof t[a]!=typeof e[a])return!1;return!0}function T6(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!R2(t,pB))return null;const a=e.icons;for(const c in a){const f=a[c];if(!c||typeof f.body!="string"||!R2(f,S3))return null}const n=e.aliases||Object.create(null);for(const c in n){const f=n[c],u=f.parent;if(!c||typeof u!="string"||!a[u]&&!n[u]||!R2(f,S3))return null}return e}const Eb=Object.create(null);function mB(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Bh(t,e){const a=Eb[t]||(Eb[t]=Object.create(null));return a[e]||(a[e]=mB(t,e))}function S6(t,e){return T6(e)?F6(e,(a,n)=>{n?t.icons[a]=n:t.missing.add(a)}):[]}function _B(t,e,a){try{if(typeof a.body=="string")return t.icons[e]={...a},!0}catch{}return!1}let n0=!1;function Y6(t){return typeof t=="boolean"&&(n0=t),n0}function bB(t){const e=typeof t=="string"?zg(t,!0,n0):t;if(e){const a=Bh(e.provider,e.prefix),n=e.name;return a.icons[n]||(a.missing.has(n)?null:void 0)}}function yB(t,e){const a=zg(t,!0,n0);if(!a)return!1;const n=Bh(a.provider,a.prefix);return e?_B(n,a.name,e):(n.missing.add(a.name),!0)}function vB(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),n0&&!e&&!t.prefix){let c=!1;return T6(t)&&(t.prefix="",F6(t,(f,u)=>{yB(f,u)&&(c=!0)})),c}const a=t.prefix;if(!L1({prefix:a,name:"a"}))return!1;const n=Bh(e,a);return!!S6(n,t)}const N6=Object.freeze({width:null,height:null}),L6=Object.freeze({...N6,...og}),xB=/(-?[0-9.]*[0-9]+[0-9.]*)/g,wB=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Fb(t,e,a){if(e===1)return t;if(a=a||100,typeof t=="number")return Math.ceil(t*e*a)/a;if(typeof t!="string")return t;const n=t.split(xB);if(n===null||!n.length)return t;const c=[];let f=n.shift(),u=wB.test(f);for(;;){if(u){const s=parseFloat(f);isNaN(s)?c.push(f):c.push(Math.ceil(s*e*a)/a)}else c.push(f);if(f=n.shift(),f===void 0)return c.join("");u=!u}}function BB(t,e="defs"){let a="";const n=t.indexOf("<"+e);for(;n>=0;){const c=t.indexOf(">",n),f=t.indexOf("</"+e);if(c===-1||f===-1)break;const u=t.indexOf(">",f);if(u===-1)break;a+=t.slice(c+1,f).trim(),t=t.slice(0,n).trim()+t.slice(u+1)}return{defs:a,content:t}}function CB(t,e){return t?"<defs>"+t+"</defs>"+e:e}function MB(t,e,a){const n=BB(t);return CB(n.defs,e+n.content+a)}const RB=t=>t==="unset"||t==="undefined"||t==="none";function IB(t,e){const a={...Zg,...t},n={...L6,...e},c={left:a.left,top:a.top,width:a.width,height:a.height};let f=a.body;[a,n].forEach(D=>{const V=[],X=D.hFlip,ee=D.vFlip;let Ae=D.rotate;X?ee?Ae+=2:(V.push("translate("+(c.width+c.left).toString()+" "+(0-c.top).toString()+")"),V.push("scale(-1 1)"),c.top=c.left=0):ee&&(V.push("translate("+(0-c.left).toString()+" "+(c.height+c.top).toString()+")"),V.push("scale(1 -1)"),c.top=c.left=0);let ce;switch(Ae<0&&(Ae-=Math.floor(Ae/4)*4),Ae=Ae%4,Ae){case 1:ce=c.height/2+c.top,V.unshift("rotate(90 "+ce.toString()+" "+ce.toString()+")");break;case 2:V.unshift("rotate(180 "+(c.width/2+c.left).toString()+" "+(c.height/2+c.top).toString()+")");break;case 3:ce=c.width/2+c.left,V.unshift("rotate(-90 "+ce.toString()+" "+ce.toString()+")");break}Ae%2===1&&(c.left!==c.top&&(ce=c.left,c.left=c.top,c.top=ce),c.width!==c.height&&(ce=c.width,c.width=c.height,c.height=ce)),V.length&&(f=MB(f,'<g transform="'+V.join(" ")+'">',"</g>"))});const u=n.width,s=n.height,x=c.width,B=c.height;let I,R;u===null?(R=s===null?"1em":s==="auto"?B:s,I=Fb(R,x/B)):(I=u==="auto"?x:u,R=s===null?Fb(I,B/x):s==="auto"?B:s);const F={},M=(D,V)=>{RB(V)||(F[D]=V.toString())};M("width",I),M("height",R);const N=[c.left,c.top,x,B];return F.viewBox=N.join(" "),{attributes:F,viewBox:N,body:f}}const UB=/\sid="(\S+)"/g,EB="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let FB=0;function TB(t,e=EB){const a=[];let n;for(;n=UB.exec(t);)a.push(n[1]);if(!a.length)return t;const c="suffix"+(Math.random()*16777216|Date.now()).toString(16);return a.forEach(f=>{const u=typeof e=="function"?e(f):e+(FB++).toString(),s=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+u+c+"$3")}),t=t.replace(new RegExp(c,"g"),""),t}const Y3=Object.create(null);function SB(t,e){Y3[t]=e}function N3(t){return Y3[t]||Y3[""]}function Lm(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const Pm=Object.create(null),Ad=["https://api.simplesvg.com","https://api.unisvg.com"],P1=[];for(;Ad.length>0;)Ad.length===1||Math.random()>.5?P1.push(Ad.shift()):P1.push(Ad.pop());Pm[""]=Lm({resources:["https://api.iconify.design"].concat(P1)});function YB(t,e){const a=Lm(e);return a===null?!1:(Pm[t]=a,!0)}function Qm(t){return Pm[t]}const NB=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Tb=NB();function LB(t,e){const a=Qm(t);if(!a)return 0;let n;if(!a.maxURL)n=0;else{let c=0;a.resources.forEach(u=>{c=Math.max(c,u.length)});const f=e+".json?icons=";n=a.maxURL-c-a.path.length-f.length}return n}function PB(t){return t===404}const QB=(t,e,a)=>{const n=[],c=LB(t,e),f="icons";let u={type:f,provider:t,prefix:e,icons:[]},s=0;return a.forEach((x,B)=>{s+=x.length+1,s>=c&&B>0&&(n.push(u),u={type:f,provider:t,prefix:e,icons:[]},s=x.length),u.icons.push(x)}),n.push(u),n};function kB(t){if(typeof t=="string"){const e=Qm(t);if(e)return e.path}return"/"}const DB=(t,e,a)=>{if(!Tb){a("abort",424);return}let n=kB(e.provider);switch(e.type){case"icons":{const f=e.prefix,s=e.icons.join(","),x=new URLSearchParams({icons:s});n+=f+".json?"+x.toString();break}case"custom":{const f=e.uri;n+=f.slice(0,1)==="/"?f.slice(1):f;break}default:a("abort",400);return}let c=503;Tb(t+n).then(f=>{const u=f.status;if(u!==200){setTimeout(()=>{a(PB(u)?"abort":"next",u)});return}return c=501,f.json()}).then(f=>{if(typeof f!="object"||f===null){setTimeout(()=>{f===404?a("abort",f):a("next",c)});return}setTimeout(()=>{a("success",f)})}).catch(()=>{a("next",c)})},zB={prepare:QB,send:DB};function ZB(t){const e={loaded:[],missing:[],pending:[]},a=Object.create(null);t.sort((c,f)=>c.provider!==f.provider?c.provider.localeCompare(f.provider):c.prefix!==f.prefix?c.prefix.localeCompare(f.prefix):c.name.localeCompare(f.name));let n={provider:"",prefix:"",name:""};return t.forEach(c=>{if(n.name===c.name&&n.prefix===c.prefix&&n.provider===c.provider)return;n=c;const f=c.provider,u=c.prefix,s=c.name,x=a[f]||(a[f]=Object.create(null)),B=x[u]||(x[u]=Bh(f,u));let I;s in B.icons?I=e.loaded:u===""||B.missing.has(s)?I=e.missing:I=e.pending;const R={provider:f,prefix:u,name:s};I.push(R)}),e}function P6(t,e){t.forEach(a=>{const n=a.loaderCallbacks;n&&(a.loaderCallbacks=n.filter(c=>c.id!==e))})}function HB(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let a=!1;const n=t.provider,c=t.prefix;e.forEach(f=>{const u=f.icons,s=u.pending.length;u.pending=u.pending.filter(x=>{if(x.prefix!==c)return!0;const B=x.name;if(t.icons[B])u.loaded.push({provider:n,prefix:c,name:B});else if(t.missing.has(B))u.missing.push({provider:n,prefix:c,name:B});else return a=!0,!0;return!1}),u.pending.length!==s&&(a||P6([t],f.id),f.callback(u.loaded.slice(0),u.missing.slice(0),u.pending.slice(0),f.abort))})}))}let OB=0;function XB(t,e,a){const n=OB++,c=P6.bind(null,a,n);if(!e.pending.length)return c;const f={id:n,icons:e,callback:t,abort:c};return a.forEach(u=>{(u.loaderCallbacks||(u.loaderCallbacks=[])).push(f)}),c}function VB(t,e=!0,a=!1){const n=[];return t.forEach(c=>{const f=typeof c=="string"?zg(c,e,a):c;f&&n.push(f)}),n}var GB={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function jB(t,e,a,n){const c=t.resources.length,f=t.random?Math.floor(Math.random()*c):t.index;let u;if(t.random){let oe=t.resources.slice(0);for(u=[];oe.length>1;){const q=Math.floor(Math.random()*oe.length);u.push(oe[q]),oe=oe.slice(0,q).concat(oe.slice(q+1))}u=u.concat(oe)}else u=t.resources.slice(f).concat(t.resources.slice(0,f));const s=Date.now();let x="pending",B=0,I,R=null,F=[],M=[];typeof n=="function"&&M.push(n);function N(){R&&(clearTimeout(R),R=null)}function D(){x==="pending"&&(x="aborted"),N(),F.forEach(oe=>{oe.status==="pending"&&(oe.status="aborted")}),F=[]}function V(oe,q){q&&(M=[]),typeof oe=="function"&&M.push(oe)}function X(){return{startTime:s,payload:e,status:x,queriesSent:B,queriesPending:F.length,subscribe:V,abort:D}}function ee(){x="failed",M.forEach(oe=>{oe(void 0,I)})}function Ae(){F.forEach(oe=>{oe.status==="pending"&&(oe.status="aborted")}),F=[]}function ce(oe,q,H){const $=q!=="success";switch(F=F.filter(de=>de!==oe),x){case"pending":break;case"failed":if($||!t.dataAfterTimeout)return;break;default:return}if(q==="abort"){I=H,ee();return}if($){I=H,F.length||(u.length?ue():ee());return}if(N(),Ae(),!t.random){const de=t.resources.indexOf(oe.resource);de!==-1&&de!==t.index&&(t.index=de)}x="completed",M.forEach(de=>{de(H)})}function ue(){if(x!=="pending")return;N();const oe=u.shift();if(oe===void 0){if(F.length){R=setTimeout(()=>{N(),x==="pending"&&(Ae(),ee())},t.timeout);return}ee();return}const q={status:"pending",resource:oe,callback:(H,$)=>{ce(q,H,$)}};F.push(q),B++,R=setTimeout(ue,t.rotate),a(oe,e,q.callback)}return setTimeout(ue),X}function Q6(t){const e={...GB,...t};let a=[];function n(){a=a.filter(s=>s().status==="pending")}function c(s,x,B){const I=jB(e,s,x,(R,F)=>{n(),B&&B(R,F)});return a.push(I),I}function f(s){return a.find(x=>s(x))||null}return{query:c,find:f,setIndex:s=>{e.index=s},getIndex:()=>e.index,cleanup:n}}function Sb(){}const I2=Object.create(null);function KB(t){if(!I2[t]){const e=Qm(t);if(!e)return;const a=Q6(e),n={config:e,redundancy:a};I2[t]=n}return I2[t]}function $B(t,e,a){let n,c;if(typeof t=="string"){const f=N3(t);if(!f)return a(void 0,424),Sb;c=f.send;const u=KB(t);u&&(n=u.redundancy)}else{const f=Lm(t);if(f){n=Q6(f);const u=t.resources?t.resources[0]:"",s=N3(u);s&&(c=s.send)}}return!n||!c?(a(void 0,424),Sb):n.query(e,c,a)().abort}function Yb(){}function qB(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,HB(t)}))}function WB(t){const e=[],a=[];return t.forEach(n=>{(n.match(U6)?e:a).push(n)}),{valid:e,invalid:a}}function ld(t,e,a){function n(){const c=t.pendingIcons;e.forEach(f=>{c&&c.delete(f),t.icons[f]||t.missing.add(f)})}if(a&&typeof a=="object")try{if(!S6(t,a).length){n();return}}catch(c){console.error(c)}n(),qB(t)}function Nb(t,e){t instanceof Promise?t.then(a=>{e(a)}).catch(()=>{e(null)}):e(t)}function JB(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:a,prefix:n}=t,c=t.iconsToLoad;if(delete t.iconsToLoad,!c||!c.length)return;const f=t.loadIcon;if(t.loadIcons&&(c.length>1||!f)){Nb(t.loadIcons(c,n,a),I=>{ld(t,c,I)});return}if(f){c.forEach(I=>{const R=f(I,n,a);Nb(R,F=>{const M=F?{prefix:n,icons:{[I]:F}}:null;ld(t,[I],M)})});return}const{valid:u,invalid:s}=WB(c);if(s.length&&ld(t,s,null),!u.length)return;const x=n.match(U6)?N3(a):null;if(!x){ld(t,u,null);return}x.prepare(a,n,u).forEach(I=>{$B(a,I,R=>{ld(t,I.icons,R)})})}))}const eC=(t,e)=>{const a=VB(t,!0,Y6()),n=ZB(a);if(!n.pending.length){let x=!0;return e&&setTimeout(()=>{x&&e(n.loaded,n.missing,n.pending,Yb)}),()=>{x=!1}}const c=Object.create(null),f=[];let u,s;return n.pending.forEach(x=>{const{provider:B,prefix:I}=x;if(I===s&&B===u)return;u=B,s=I,f.push(Bh(B,I));const R=c[B]||(c[B]=Object.create(null));R[I]||(R[I]=[])}),n.pending.forEach(x=>{const{provider:B,prefix:I,name:R}=x,F=Bh(B,I),M=F.pendingIcons||(F.pendingIcons=new Set);M.has(R)||(M.add(R),c[B][I].push(R))}),f.forEach(x=>{const B=c[x.provider][x.prefix];B.length&&JB(x,B)}),e?XB(e,n,f):Yb};function tC(t,e){const a={...t};for(const n in e){const c=e[n],f=typeof c;n in N6?(c===null||c&&(f==="string"||f==="number"))&&(a[n]=c):f===typeof a[n]&&(a[n]=n==="rotate"?c%4:c)}return a}const iC=/[\s,]+/;function aC(t,e){e.split(iC).forEach(a=>{switch(a.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function rC(t,e=0){const a=t.replace(/^-?[0-9.]*/,"");function n(c){for(;c<0;)c+=4;return c%4}if(a===""){const c=parseInt(t);return isNaN(c)?0:n(c)}else if(a!==t){let c=0;switch(a){case"%":c=25;break;case"deg":c=90}if(c){let f=parseFloat(t.slice(0,t.length-a.length));return isNaN(f)?0:(f=f/c,f%1===0?n(f):0)}}return e}function nC(t,e){let a=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)a+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+a+">"+t+"</svg>"}function sC(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function oC(t){return"data:image/svg+xml,"+sC(t)}function AC(t){return'url("'+oC(t)+'")'}const Lb={...L6,inline:!1},lC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},cC={display:"inline-block"},L3={"background-color":"currentColor"},k6={"background-color":"transparent"},Pb={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Qb={"-webkit-mask":L3,mask:L3,background:k6};for(const t in Qb){const e=Qb[t];for(const a in Pb)e[t+"-"+a]=Pb[a]}function hC(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}function uC(t,e){const a=tC(Lb,e),n=e.mode||"svg",c=n==="svg"?{...lC}:{};t.body.indexOf("xlink:")===-1&&delete c["xmlns:xlink"];let f=typeof e.style=="string"?e.style:"";for(let X in e){const ee=e[X];if(ee!==void 0)switch(X){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":a[X]=ee===!0||ee==="true"||ee===1;break;case"flip":typeof ee=="string"&&aC(a,ee);break;case"color":f=f+(f.length>0&&f.trim().slice(-1)!==";"?";":"")+"color: "+ee+"; ";break;case"rotate":typeof ee=="string"?a[X]=rC(ee):typeof ee=="number"&&(a[X]=ee);break;case"ariaHidden":case"aria-hidden":ee!==!0&&ee!=="true"&&delete c["aria-hidden"];break;default:if(X.slice(0,3)==="on:")break;Lb[X]===void 0&&(c[X]=ee)}}const u=IB(t,a),s=u.attributes;if(a.inline&&(f="vertical-align: -0.125em; "+f),n==="svg"){Object.assign(c,s),f!==""&&(c.style=f);let X=0,ee=e.id;return typeof ee=="string"&&(ee=ee.replace(/-/g,"_")),{svg:!0,attributes:c,body:TB(u.body,ee?()=>ee+"ID"+X++:"iconifySvelte")}}const{body:x,width:B,height:I}=t,R=n==="mask"||(n==="bg"?!1:x.indexOf("currentColor")!==-1),F=nC(x,{...s,width:B+"",height:I+""}),N={"--svg":AC(F)},D=X=>{const ee=s[X];ee&&(N[X]=hC(ee))};D("width"),D("height"),Object.assign(N,cC,R?L3:k6);let V="";for(const X in N)V+=X+": "+N[X]+";";return c.style=V+f,{svg:!1,attributes:c}}Y6(!0);SB("",zB);if(typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,a="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!vB(n))&&console.error(a)}catch{console.error(a)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let a in e){const n="IconifyProviders["+a+"] is invalid.";try{const c=e[a];if(typeof c!="object"||!c||c.resources===void 0)continue;YB(a,c)||console.error(n)}catch{console.error(n)}}}}function dC(t,e,a,n,c){function f(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof t=="object"&&t!==null&&typeof t.body=="string")return e.name="",f(),{data:{...Zg,...t}};let u;if(typeof t!="string"||(u=zg(t,!1,!0))===null)return f(),null;const s=bB(u);if(!s)return a&&(!e.loading||e.loading.name!==t)&&(f(),e.name="",e.loading={name:t,abort:eC([u],n)}),null;f(),e.name!==t&&(e.name=t,c&&!e.destroyed&&c(t));const x=["iconify"];return u.prefix!==""&&x.push("iconify--"+u.prefix),u.provider!==""&&x.push("iconify--"+u.provider),{data:s,classes:x}}function kb(t,e){return t?uC({...Zg,...t},e):null}var fC=R9("<svg><!></svg>"),gC=ft("<span></span>");function yi(t,e){const a=r7(e,["children","$$slots","$$events","$$legacy"]);mi(e,!1);const n=Wr({name:"",loading:null,destroyed:!1});let c=Wr(!1),f=Wr(0),u=Wr();const s=F=>{typeof a.onLoad=="function"&&a.onLoad(F),A6()("load",{icon:F})};function x(){e7(f)}Lr(()=>{st(c,!0)}),Th(()=>{E1(n,W(n).destroyed=!0),W(n).loading&&(W(n).loading.abort(),E1(n,W(n).loading=null))}),U1(()=>(W(f),eo(a),W(c),W(n),W(u),kb),()=>{W(f);const F=!!a.ssr||W(c),M=dC(a.icon,W(n),F,x,s);st(u,M?kb(M.data,a):null),W(u)&&M.classes&&E1(u,W(u).attributes.class=(typeof a.class=="string"?a.class+" ":"")+M.classes.join(" "))}),o6(),Xo();var B=vi(),I=kt(B);{var R=F=>{var M=vi(),N=kt(M);{var D=X=>{var ee=fC();let Ae;var ce=Le(ee);m6(ce,()=>W(u).body,!0,!1),Ee(ee),di(()=>Ae=hb(ee,Ae,{...W(u).attributes})),Xe(X,ee)},V=X=>{var ee=gC();let Ae;di(()=>Ae=hb(ee,Ae,{...W(u).attributes})),Xe(X,ee)};It(N,X=>{W(u).svg?X(D):X(V,!1)})}Xe(F,M)};It(I,F=>{W(u)&&F(R)})}Xe(t,B),_i()}const Zf={START:"start",CENTER:"center",END:"end"},Lo={HORIZONTAL:"horizontal",VERTICAL:"vertical"},cd={OBSERVED:0,REQUESTED:1},pC={[Lo.VERTICAL]:"top",[Lo.HORIZONTAL]:"left"},Db={[Lo.VERTICAL]:"scrollTop",[Lo.HORIZONTAL]:"scrollLeft"};class mC{constructor({itemSize:e,itemCount:a,estimatedItemSize:n}){this.itemSize=e,this.itemCount=a,this.estimatedItemSize=n,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:a,estimatedItemSize:n}){a!=null&&(this.itemCount=a),n!=null&&(this.estimatedItemSize=n),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:a}=this;return typeof a=="function"?a(e):Array.isArray(a)?a[e]:a}computeTotalSizeAndPositionData(){let e=0;for(let a=0;a<this.itemCount;a++){const n=this.getSize(a),c=e;e+=n,this.itemSizeAndPositionData[a]={offset:c,size:n}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const a=this.getSizeAndPositionOfLastMeasuredItem();let n=a.offset+a.size;for(let c=this.lastMeasuredIndex+1;c<=e;c++){const f=this.getSize(c);if(f==null||isNaN(f))throw Error(`Invalid size returned for index ${c} of value ${f}`);this.itemSizeAndPositionData[c]={offset:n,size:f},n+=f}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=Zf.START,containerSize:a,currentOffset:n,targetIndex:c}){if(a<=0)return 0;const f=this.getSizeAndPositionForIndex(c),u=f.offset,s=u-a+f.size;let x;switch(e){case Zf.END:x=s;break;case Zf.CENTER:x=u-(a-f.size)/2;break;case Zf.START:x=u;break;default:x=Math.max(s,Math.min(u,n))}const B=this.getTotalSize();return Math.max(0,Math.min(B-a,x))}getVisibleRange({containerSize:e=0,offset:a,overscanCount:n}){if(this.getTotalSize()===0)return{};const f=a+e;let u=this.findNearestItem(a);if(u===void 0)throw Error(`Invalid offset ${a} specified`);const s=this.getSizeAndPositionForIndex(u);a=s.offset+s.size;let x=u;for(;a<f&&x<this.itemCount-1;)x++,a+=this.getSizeAndPositionForIndex(x).size;return n&&(u=Math.max(0,u-n),x=Math.min(x+n,this.itemCount-1)),{start:u,stop:x}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const a=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return a.offset>=e?this.binarySearch({high:n,low:0,offset:e}):this.exponentialSearch({index:n,offset:e})}binarySearch({low:e,high:a,offset:n}){let c=0,f=0;for(;e<=a;){if(c=e+Math.floor((a-e)/2),f=this.getSizeAndPositionForIndex(c).offset,f===n)return c;f<n?e=c+1:f>n&&(a=c-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:a}){let n=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<a;)e+=n,n*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:a})}}const _C=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();var bC=ft('<div class="virtual-list-wrapper svelte-dwpad5"><!> <div class="virtual-list-inner svelte-dwpad5"></div> <!></div>');function yC(t,e){mi(e,!1);let a=si(e,"height",12),n=si(e,"width",12,"100%"),c=si(e,"itemCount",12),f=si(e,"itemSize",12),u=si(e,"estimatedItemSize",12,null),s=si(e,"stickyIndices",12,null),x=si(e,"getKey",12,null),B=si(e,"scrollDirection",28,()=>Lo.VERTICAL),I=si(e,"scrollOffset",12,null),R=si(e,"scrollToIndex",12,null),F=si(e,"scrollToAlignment",12,null),M=si(e,"scrollToBehaviour",12,"instant"),N=si(e,"overscanCount",12,3);const D=A6(),V=new mC({itemCount:c(),itemSize:f(),estimatedItemSize:xt()});let X=Wr(!1),ee=Wr(),Ae=Wr([]),ce=Wr({offset:I()||R()!=null&&W(Ae).length&&ut(R())||0,scrollChangeReason:cd.REQUESTED}),ue=W(ce),oe={scrollToIndex:R(),scrollToAlignment:F(),scrollOffset:I(),itemCount:c(),itemSize:f(),estimatedItemSize:u()},q={},H=Wr(""),$=Wr("");ye(),Lr(()=>{st(X,!0),W(ee).addEventListener("scroll",at,_C),I()!=null?we(I()):R()!=null&&we(ut(R()))}),Th(()=>{W(X)&&W(ee).removeEventListener("scroll",at)});function de(){if(!W(X))return;const Qe=oe.scrollToIndex!==R()||oe.scrollToAlignment!==F(),tt=oe.itemCount!==c()||oe.itemSize!==f()||oe.estimatedItemSize!==u();tt&&(V.updateConfig({itemSize:f(),itemCount:c(),estimatedItemSize:xt()}),Ve()),oe.scrollOffset!==I()?st(ce,{offset:I()||0,scrollChangeReason:cd.REQUESTED}):typeof R()=="number"&&(Qe||tt)&&st(ce,{offset:ut(R(),F(),c()),scrollChangeReason:cd.REQUESTED}),oe={scrollToIndex:R(),scrollToAlignment:F(),scrollOffset:I(),itemCount:c(),itemSize:f(),estimatedItemSize:u()}}function ge(){if(!W(X))return;const{offset:Qe,scrollChangeReason:tt}=W(ce);(ue.offset!==Qe||ue.scrollChangeReason!==tt)&&ye(),ue.offset!==Qe&&tt===cd.REQUESTED&&we(Qe),ue=W(ce)}function ye(){const{offset:Qe}=W(ce),{start:tt,stop:bt}=V.getVisibleRange({containerSize:B()===Lo.VERTICAL?a():n(),offset:Qe,overscanCount:N()});let dt=[];const _t=V.getTotalSize();if(B()===Lo.VERTICAL){const Qt=typeof a()=="number"?"px":"";st(H,`height:${a()}${Qt};width:${n()};`),st($,`flex-direction:column;height:${_t}px;`)}else{const Qt=typeof n()=="number"?"px":"";st(H,`height:${a()};width:${n()}${Qt}`),st($,`min-height:100%;width:${_t}px;`)}const zt=s()!=null&&s().length!==0;if(zt)for(let Qt=0;Qt<s().length;Qt++){const Ct=s()[Qt];dt.push({index:Ct,style:Mt(Ct,!0)})}if(tt!==void 0&&bt!==void 0){for(let Qt=tt;Qt<=bt;Qt++)zt&&s().includes(Qt)||dt.push({index:Qt,style:Mt(Qt,!1)});D("itemsUpdated",{start:tt,end:bt})}st(Ae,dt)}function we(Qe){"scroll"in W(ee)?W(ee).scroll({[pC[B()]]:Qe,behavior:M()}):E1(ee,W(ee)[Db[B()]]=Qe)}function Ve(Qe=0){q={},V.resetItem(Qe),ye()}function ut(Qe,tt=F(),bt=c()){return(Qe<0||Qe>=bt)&&(Qe=0),V.getUpdatedOffsetForIndex({align:tt,containerSize:B()===Lo.VERTICAL?a():n(),currentOffset:W(ce).offset||0,targetIndex:Qe})}function at(Qe){const tt=et();tt<0||W(ce).offset===tt||Qe.target!==W(ee)||(st(ce,{offset:tt,scrollChangeReason:cd.OBSERVED}),D("afterScroll",{offset:tt,event:Qe}))}function et(){return W(ee)[Db[B()]]}function xt(){return u()||typeof f()=="number"&&f()||50}function Mt(Qe,tt){if(q[Qe])return q[Qe];const{size:bt,offset:dt}=V.getSizeAndPositionForIndex(Qe);let _t;return B()===Lo.VERTICAL?(_t=`left:0;width:100%;height:${bt}px;`,tt?_t+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${dt}px;margin-bottom:${-(dt+bt)}px;`:_t+=`position:absolute;top:${dt}px;`):(_t=`top:0;width:${bt}px;`,tt?_t+=`position:sticky;z-index:1;left:0;margin-left:${dt}px;margin-right:${-(dt+bt)}px;`:_t+=`position:absolute;height:100%;left:${dt}px;`),q[Qe]=_t}U1(()=>(eo(R()),eo(F()),eo(I()),eo(c()),eo(f()),eo(u())),()=>{R(),F(),I(),c(),f(),u(),de()}),U1(()=>W(ce),()=>{W(ce),ge()}),U1(()=>(eo(a()),eo(n()),eo(s()),W(X)),()=>{a(),n(),s(),W(X)&&Ve(0)}),o6(),Xo();var Yt=bC(),rt=Le(Yt);w2(rt,e,"header",{});var pt=Oe(rt,2);Ea(pt,5,()=>W(Ae),Qe=>x()?x()(Qe.index):Qe.index,(Qe,tt)=>{var bt=vi(),dt=kt(bt);w2(dt,e,"item",{get style(){return W(tt).style},get index(){return W(tt).index}}),Xe(Qe,bt)}),Ee(pt);var je=Oe(pt,2);return w2(je,e,"footer",{}),Ee(Yt),Hn(Yt,Qe=>st(ee,Qe),()=>W(ee)),di(()=>{hn(Yt,W(H)),hn(pt,W($))}),Xe(t,Yt),V7(e,"recomputeSizes",Ve),_i({recomputeSizes:Ve,get height(){return a()},set height(Qe){a(Qe),_n()},get width(){return n()},set width(Qe){n(Qe),_n()},get itemCount(){return c()},set itemCount(Qe){c(Qe),_n()},get itemSize(){return f()},set itemSize(Qe){f(Qe),_n()},get estimatedItemSize(){return u()},set estimatedItemSize(Qe){u(Qe),_n()},get stickyIndices(){return s()},set stickyIndices(Qe){s(Qe),_n()},get getKey(){return x()},set getKey(Qe){x(Qe),_n()},get scrollDirection(){return B()},set scrollDirection(Qe){B(Qe),_n()},get scrollOffset(){return I()},set scrollOffset(Qe){I(Qe),_n()},get scrollToIndex(){return R()},set scrollToIndex(Qe){R(Qe),_n()},get scrollToAlignment(){return F()},set scrollToAlignment(Qe){F(Qe),_n()},get scrollToBehaviour(){return M()},set scrollToBehaviour(Qe){M(Qe),_n()},get overscanCount(){return N()},set overscanCount(Qe){N(Qe),_n()}})}var zn=Uint8Array,lh=Uint16Array,vC=Int32Array,D6=new zn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),z6=new zn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xC=new zn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Z6=function(t,e){for(var a=new lh(31),n=0;n<31;++n)a[n]=e+=1<<t[n-1];for(var c=new vC(a[30]),n=1;n<30;++n)for(var f=a[n];f<a[n+1];++f)c[f]=f-a[n]<<5|n;return{b:a,r:c}},H6=Z6(D6,2),O6=H6.b,wC=H6.r;O6[28]=258,wC[258]=28;var BC=Z6(z6,0),CC=BC.b,P3=new lh(32768);for(var La=0;La<32768;++La){var _A=(La&43690)>>1|(La&21845)<<1;_A=(_A&52428)>>2|(_A&13107)<<2,_A=(_A&61680)>>4|(_A&3855)<<4,P3[La]=((_A&65280)>>8|(_A&255)<<8)>>1}var zd=function(t,e,a){for(var n=t.length,c=0,f=new lh(e);c<n;++c)t[c]&&++f[t[c]-1];var u=new lh(e);for(c=1;c<e;++c)u[c]=u[c-1]+f[c-1]<<1;var s;if(a){s=new lh(1<<e);var x=15-e;for(c=0;c<n;++c)if(t[c])for(var B=c<<4|t[c],I=e-t[c],R=u[t[c]-1]++<<I,F=R|(1<<I)-1;R<=F;++R)s[P3[R]>>x]=B}else for(s=new lh(n),c=0;c<n;++c)t[c]&&(s[c]=P3[u[t[c]-1]++]>>15-t[c]);return s},b0=new zn(288);for(var La=0;La<144;++La)b0[La]=8;for(var La=144;La<256;++La)b0[La]=9;for(var La=256;La<280;++La)b0[La]=7;for(var La=280;La<288;++La)b0[La]=8;var X6=new zn(32);for(var La=0;La<32;++La)X6[La]=5;var MC=zd(b0,9,1),RC=zd(X6,5,1),U2=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},Rs=function(t,e,a){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&a},E2=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},IC=function(t){return(t+7)/8|0},UC=function(t,e,a){return(a==null||a>t.length)&&(a=t.length),new zn(t.subarray(e,a))},EC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kn=function(t,e,a){var n=new Error(e||EC[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,kn),!a)throw n;return n},km=function(t,e,a,n){var c=t.length,f=0;if(!c||e.f&&!e.l)return a||new zn(0);var u=!a,s=u||e.i!=2,x=e.i;u&&(a=new zn(c*3));var B=function(Ct){var Zt=a.length;if(Ct>Zt){var Ai=new zn(Math.max(Zt*2,Ct));Ai.set(a),a=Ai}},I=e.f||0,R=e.p||0,F=e.b||0,M=e.l,N=e.d,D=e.m,V=e.n,X=c*8;do{if(!M){I=Rs(t,R,1);var ee=Rs(t,R+1,3);if(R+=3,ee)if(ee==1)M=MC,N=RC,D=9,V=5;else if(ee==2){var oe=Rs(t,R,31)+257,q=Rs(t,R+10,15)+4,H=oe+Rs(t,R+5,31)+1;R+=14;for(var $=new zn(H),de=new zn(19),ge=0;ge<q;++ge)de[xC[ge]]=Rs(t,R+ge*3,7);R+=q*3;for(var ye=U2(de),we=(1<<ye)-1,Ve=zd(de,ye,1),ge=0;ge<H;){var ut=Ve[Rs(t,R,we)];R+=ut&15;var Ae=ut>>4;if(Ae<16)$[ge++]=Ae;else{var at=0,et=0;for(Ae==16?(et=3+Rs(t,R,3),R+=2,at=$[ge-1]):Ae==17?(et=3+Rs(t,R,7),R+=3):Ae==18&&(et=11+Rs(t,R,127),R+=7);et--;)$[ge++]=at}}var xt=$.subarray(0,oe),Mt=$.subarray(oe);D=U2(xt),V=U2(Mt),M=zd(xt,D,1),N=zd(Mt,V,1)}else kn(1);else{var Ae=IC(R)+4,ce=t[Ae-4]|t[Ae-3]<<8,ue=Ae+ce;if(ue>c){x&&kn(0);break}s&&B(F+ce),a.set(t.subarray(Ae,ue),F),e.b=F+=ce,e.p=R=ue*8,e.f=I;continue}if(R>X){x&&kn(0);break}}s&&B(F+131072);for(var Yt=(1<<D)-1,rt=(1<<V)-1,pt=R;;pt=R){var at=M[E2(t,R)&Yt],je=at>>4;if(R+=at&15,R>X){x&&kn(0);break}if(at||kn(2),je<256)a[F++]=je;else if(je==256){pt=R,M=null;break}else{var Qe=je-254;if(je>264){var ge=je-257,tt=D6[ge];Qe=Rs(t,R,(1<<tt)-1)+O6[ge],R+=tt}var bt=N[E2(t,R)&rt],dt=bt>>4;bt||kn(3),R+=bt&15;var Mt=CC[dt];if(dt>3){var tt=z6[dt];Mt+=E2(t,R)&(1<<tt)-1,R+=tt}if(R>X){x&&kn(0);break}s&&B(F+131072);var _t=F+Qe;if(F<Mt){var zt=f-Mt,Qt=Math.min(Mt,_t);for(zt+F<0&&kn(3);F<Qt;++F)a[F]=n[zt+F]}for(;F<_t;++F)a[F]=a[F-Mt]}}e.l=M,e.p=pt,e.b=F,e.f=I,M&&(I=1,e.m=D,e.d=N,e.n=V)}while(!I);return F!=a.length&&u?UC(a,0,F):a.subarray(0,F)},FC=new zn(0),TC=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&kn(6,"invalid gzip data");var e=t[3],a=10;e&4&&(a+=(t[10]|t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[a++]);return a+(e&2)},SC=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},YC=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&kn(6,"invalid zlib data"),(t[1]>>5&1)==1&&kn(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function NC(t,e){return km(t,{i:2},e,e)}function LC(t,e){var a=TC(t);return a+8>t.length&&kn(6,"invalid gzip data"),km(t.subarray(a,-8),{i:2},new zn(SC(t)),e)}function PC(t,e){return km(t.subarray(YC(t),-4),{i:2},e,e)}function QC(t,e){return t[0]==31&&t[1]==139&&t[2]==8?LC(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?NC(t,e):PC(t,e)}var kC=typeof TextDecoder<"u"&&new TextDecoder,DC=0;try{kC.decode(FC,{stream:!0}),DC=1}catch{}var zC=Object.defineProperty,Zd=Math.pow,ya=(t,e)=>zC(t,"name",{value:e,configurable:!0}),Sr=(t,e,a)=>new Promise((n,c)=>{var f=x=>{try{s(a.next(x))}catch(B){c(B)}},u=x=>{try{s(a.throw(x))}catch(B){c(B)}},s=x=>x.done?n(x.value):Promise.resolve(x.value).then(f,u);s((a=a.apply(t,e)).next())});ya((t,e)=>{let a=!1,n="",c=L.GridLayer.extend({createTile:ya((f,u)=>{let s=document.createElement("img"),x=new AbortController,B=x.signal;return s.cancel=()=>{x.abort()},a||(t.getHeader().then(I=>{I.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):I.tileType===2?n="image/png":I.tileType===3?n="image/jpeg":I.tileType===4?n="image/webp":I.tileType===5&&(n="image/avif")}),a=!0),t.getZxy(f.z,f.x,f.y,B).then(I=>{if(I){let R=new Blob([I.data],{type:n}),F=window.URL.createObjectURL(R);s.src=F,s.cancel=void 0,u(void 0,s)}}).catch(I=>{if(I.name!=="AbortError")throw I}),s},"createTile"),_removeTile:ya(function(f){let u=this._tiles[f];u&&(u.el.cancel&&u.el.cancel(),u.el.width=0,u.el.height=0,u.el.deleted=!0,L.DomUtil.remove(u.el),delete this._tiles[f],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(f)}))},"_removeTile")});return new c(e)},"leafletRasterLayer");var ZC=ya(t=>(e,a)=>{if(a instanceof AbortController)return t(e,a);let n=new AbortController;return t(e,n).then(c=>a(void 0,c.data,c.cacheControl||"",c.expires||""),c=>a(c)).catch(c=>a(c)),{cancel:ya(()=>n.abort(),"cancel")}},"v3compat"),V6=class{constructor(e){this.tilev4=ya((a,n)=>Sr(this,null,function*(){if(a.type==="json"){let M=a.url.substr(10),N=this.tiles.get(M);if(N||(N=new Ag(M),this.tiles.set(M,N)),this.metadata)return{data:yield N.getTileJson(a.url)};let D=yield N.getHeader();return(D.minLon>=D.maxLon||D.minLat>=D.maxLat)&&console.error(`Bounds of PMTiles archive ${D.minLon},${D.minLat},${D.maxLon},${D.maxLat} are not valid.`),{data:{tiles:[`${a.url}/{z}/{x}/{y}`],minzoom:D.minZoom,maxzoom:D.maxZoom,bounds:[D.minLon,D.minLat,D.maxLon,D.maxLat]}}}let c=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),f=a.url.match(c);if(!f)throw new Error("Invalid PMTiles protocol URL");let u=f[1],s=this.tiles.get(u);s||(s=new Ag(u),this.tiles.set(u,s));let x=f[2],B=f[3],I=f[4],R=yield s.getHeader(),F=yield s==null?void 0:s.getZxy(+x,+B,+I,n.signal);if(F)return{data:new Uint8Array(F.data),cacheControl:F.cacheControl,expires:F.expires};if(R.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=ZC(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ya(V6,"Protocol");var HC=V6;function G6(t,e){return(e>>>0)*4294967296+(t>>>0)}ya(G6,"toNum");function j6(t,e){let a=e.buf,n=a[e.pos++],c=(n&112)>>4;if(n<128||(n=a[e.pos++],c|=(n&127)<<3,n<128)||(n=a[e.pos++],c|=(n&127)<<10,n<128)||(n=a[e.pos++],c|=(n&127)<<17,n<128)||(n=a[e.pos++],c|=(n&127)<<24,n<128)||(n=a[e.pos++],c|=(n&1)<<31,n<128))return G6(t,c);throw new Error("Expected varint not more than 10 bytes")}ya(j6,"readVarintRemainder");function rh(t){let e=t.buf,a=e[t.pos++],n=a&127;return a<128||(a=e[t.pos++],n|=(a&127)<<7,a<128)||(a=e[t.pos++],n|=(a&127)<<14,a<128)||(a=e[t.pos++],n|=(a&127)<<21,a<128)?n:(a=e[t.pos],n|=(a&15)<<28,j6(n,t))}ya(rh,"readVarint");function Dm(t,e,a,n){if(n===0){a===1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);let c=e[0];e[0]=e[1],e[1]=c}}ya(Dm,"rotate");function K6(t,e){let a=Zd(2,t),n=e,c=e,f=e,u=[0,0],s=1;for(;s<a;)n=1&f/2,c=1&(f^n),Dm(s,u,n,c),u[0]+=s*n,u[1]+=s*c,f=f/4,s*=2;return[t,u[0],u[1]]}ya(K6,"idOnLevel");var OC=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function $6(t,e,a){if(t>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>Zd(2,t)-1||a>Zd(2,t)-1)throw new Error("tile x/y outside zoom level bounds");let n=OC[t],c=Zd(2,t),f=0,u=0,s=0,x=[e,a],B=c/2;for(;B>0;)f=(x[0]&B)>0?1:0,u=(x[1]&B)>0?1:0,s+=B*B*(3*f^u),Dm(B,x,f,u),B=B/2;return n+s}ya($6,"zxyToTileId");function XC(t){let e=0;for(let a=0;a<27;a++){let n=(1<<a)*(1<<a);if(e+n>t)return K6(a,t-e);e+=n}throw new Error("Tile zoom level exceeds max safe number limit (26)")}ya(XC,"tileIdToZxy");var VC=(t=>(t[t.Unknown=0]="Unknown",t[t.None=1]="None",t[t.Gzip=2]="Gzip",t[t.Brotli=3]="Brotli",t[t.Zstd=4]="Zstd",t))(VC||{});function Hg(t,e){return Sr(this,null,function*(){if(e===1||e===0)return t;if(e===2){if(typeof globalThis.DecompressionStream>"u")return QC(new Uint8Array(t));let a=new Response(t).body;if(!a)throw new Error("Failed to read response stream");let n=a.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}throw new Error("Compression method not supported")})}ya(Hg,"defaultDecompress");var GC=(t=>(t[t.Unknown=0]="Unknown",t[t.Mvt=1]="Mvt",t[t.Png=2]="Png",t[t.Jpeg=3]="Jpeg",t[t.Webp=4]="Webp",t[t.Avif=5]="Avif",t))(GC||{});function q6(t){return t===1?".mvt":t===2?".png":t===3?".jpg":t===4?".webp":t===5?".avif":""}ya(q6,"tileTypeExt");var jC=127;function W6(t,e){let a=0,n=t.length-1;for(;a<=n;){let c=n+a>>1,f=e-t[c].tileId;if(f>0)a=c+1;else if(f<0)n=c-1;else return t[c]}return n>=0&&(t[n].runLength===0||e-t[n].tileId<t[n].runLength)?t[n]:null}ya(W6,"findTile");var KC=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,a){return Sr(this,null,function*(){return{data:yield this.file.slice(e,e+a).arrayBuffer()}})}};ya(KC,"FileSource");var J6=class{constructor(e,a=new Headers){this.url=e,this.customHeaders=a,this.mustReload=!1;let n="";"navigator"in globalThis&&(n=globalThis.navigator.userAgent||"");let c=n.indexOf("Windows")>-1,f=/Chrome|Chromium|Edg|OPR|Brave/.test(n);this.chromeWindowsNoCache=!1,c&&f&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,a,n,c){return Sr(this,null,function*(){let f,u;n?u=n:(f=new AbortController,u=f.signal);let s=new Headers(this.customHeaders);s.set("range",`bytes=${e}-${e+a-1}`);let x;this.mustReload?x="reload":this.chromeWindowsNoCache&&(x="no-store");let B=yield fetch(this.url,{signal:u,cache:x,headers:s});if(e===0&&B.status===416){let F=B.headers.get("Content-Range");if(!F||!F.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let M=+F.substr(8);B=yield fetch(this.url,{signal:u,cache:"reload",headers:{range:`bytes=0-${M-1}`}})}let I=B.headers.get("Etag");if(I!=null&&I.startsWith("W/")&&(I=null),B.status===416||c&&I&&I!==c)throw this.mustReload=!0,new Q3(`Server returned non-matching ETag ${c} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(B.status>=300)throw new Error(`Bad response code: ${B.status}`);let R=B.headers.get("Content-Length");if(B.status===200&&(!R||+R>a))throw f&&f.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield B.arrayBuffer(),etag:I||void 0,cacheControl:B.headers.get("Cache-Control")||void 0,expires:B.headers.get("Expires")||void 0}})}};ya(J6,"FetchSource");var $C=J6;function is(t,e){let a=t.getUint32(e+4,!0),n=t.getUint32(e+0,!0);return a*Zd(2,32)+n}ya(is,"getUint64");function e5(t,e){let a=new DataView(t),n=a.getUint8(7);if(n>3)throw new Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:is(a,8),rootDirectoryLength:is(a,16),jsonMetadataOffset:is(a,24),jsonMetadataLength:is(a,32),leafDirectoryOffset:is(a,40),leafDirectoryLength:is(a,48),tileDataOffset:is(a,56),tileDataLength:is(a,64),numAddressedTiles:is(a,72),numTileEntries:is(a,80),numTileContents:is(a,88),clustered:a.getUint8(96)===1,internalCompression:a.getUint8(97),tileCompression:a.getUint8(98),tileType:a.getUint8(99),minZoom:a.getUint8(100),maxZoom:a.getUint8(101),minLon:a.getInt32(102,!0)/1e7,minLat:a.getInt32(106,!0)/1e7,maxLon:a.getInt32(110,!0)/1e7,maxLat:a.getInt32(114,!0)/1e7,centerZoom:a.getUint8(118),centerLon:a.getInt32(119,!0)/1e7,centerLat:a.getInt32(123,!0)/1e7,etag:e}}ya(e5,"bytesToHeader");function zm(t){let e={buf:new Uint8Array(t),pos:0},a=rh(e),n=[],c=0;for(let f=0;f<a;f++){let u=rh(e);n.push({tileId:c+u,offset:0,length:0,runLength:1}),c+=u}for(let f=0;f<a;f++)n[f].runLength=rh(e);for(let f=0;f<a;f++)n[f].length=rh(e);for(let f=0;f<a;f++){let u=rh(e);u===0&&f>0?n[f].offset=n[f-1].offset+n[f-1].length:n[f].offset=u-1}return n}ya(zm,"deserializeIndex");var t5=class extends Error{};ya(t5,"EtagMismatch");var Q3=t5;function Zm(t,e){return Sr(this,null,function*(){let a=yield t.getBytes(0,16384);if(new DataView(a.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let n=a.data.slice(0,jC),c=e5(n,a.etag),f=a.data.slice(c.rootDirectoryOffset,c.rootDirectoryOffset+c.rootDirectoryLength),u=`${t.getKey()}|${c.etag||""}|${c.rootDirectoryOffset}|${c.rootDirectoryLength}`,s=zm(yield e(f,c.internalCompression));return[c,[u,s.length,s]]})}ya(Zm,"getHeaderAndRoot");function Hm(t,e,a,n,c){return Sr(this,null,function*(){let f=yield t.getBytes(a,n,void 0,c.etag),u=yield e(f.data,c.internalCompression),s=zm(u);if(s.length===0)throw new Error("Empty directory is invalid");return s})}ya(Hm,"getDirectory");var qC=class{constructor(e=100,a=!0,n=Hg){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=n}getHeader(e){return Sr(this,null,function*(){let a=e.getKey(),n=this.cache.get(a);if(n)return n.lastUsed=this.counter++,n.data;let c=yield Zm(e,this.decompress);return c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:c[1][2]}),this.cache.set(a,{lastUsed:this.counter++,data:c[0]}),this.prune(),c[0]})}getDirectory(e,a,n,c){return Sr(this,null,function*(){let f=`${e.getKey()}|${c.etag||""}|${a}|${n}`,u=this.cache.get(f);if(u)return u.lastUsed=this.counter++,u.data;let s=yield Hm(e,this.decompress,a,n,c);return this.cache.set(f,{lastUsed:this.counter++,data:s}),this.prune(),s})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,a;this.cache.forEach((n,c)=>{n.lastUsed<e&&(e=n.lastUsed,a=c)}),a&&this.cache.delete(a)}}invalidate(e){return Sr(this,null,function*(){this.cache.delete(e.getKey())})}};ya(qC,"ResolvedValueCache");var i5=class{constructor(e=100,a=!0,n=Hg){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=n}getHeader(e){return Sr(this,null,function*(){let a=e.getKey(),n=this.cache.get(a);if(n)return n.lastUsed=this.counter++,yield n.data;let c=new Promise((f,u)=>{Zm(e,this.decompress).then(s=>{s[1]&&this.cache.set(s[1][0],{lastUsed:this.counter++,data:Promise.resolve(s[1][2])}),f(s[0]),this.prune()}).catch(s=>{u(s)})});return this.cache.set(a,{lastUsed:this.counter++,data:c}),c})}getDirectory(e,a,n,c){return Sr(this,null,function*(){let f=`${e.getKey()}|${c.etag||""}|${a}|${n}`,u=this.cache.get(f);if(u)return u.lastUsed=this.counter++,yield u.data;let s=new Promise((x,B)=>{Hm(e,this.decompress,a,n,c).then(I=>{x(I),this.prune()}).catch(I=>{B(I)})});return this.cache.set(f,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,a;this.cache.forEach((n,c)=>{n.lastUsed<e&&(e=n.lastUsed,a=c)}),a&&this.cache.delete(a)}}invalidate(e){return Sr(this,null,function*(){let a=e.getKey();if(this.invalidations.get(a))return yield this.invalidations.get(a);this.cache.delete(e.getKey());let n=new Promise((c,f)=>{this.getHeader(e).then(u=>{c(),this.invalidations.delete(a)}).catch(u=>{f(u)})});this.invalidations.set(a,n)})}};ya(i5,"SharedPromiseCache");var WC=i5,a5=class{constructor(e,a,n){typeof e=="string"?this.source=new $C(e):this.source=e,n?this.decompress=n:this.decompress=Hg,a?this.cache=a:this.cache=new WC}getHeader(){return Sr(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,a,n,c){return Sr(this,null,function*(){let f=$6(e,a,n),u=yield this.cache.getHeader(this.source);if(e<u.minZoom||e>u.maxZoom)return;let s=u.rootDirectoryOffset,x=u.rootDirectoryLength;for(let B=0;B<=3;B++){let I=yield this.cache.getDirectory(this.source,s,x,u),R=W6(I,f);if(R){if(R.runLength>0){let F=yield this.source.getBytes(u.tileDataOffset+R.offset,R.length,c,u.etag);return{data:yield this.decompress(F.data,u.tileCompression),cacheControl:F.cacheControl,expires:F.expires}}s=u.leafDirectoryOffset+R.offset,x=R.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,a,n,c){return Sr(this,null,function*(){try{return yield this.getZxyAttempt(e,a,n,c)}catch(f){if(f instanceof Q3)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,a,n,c);throw f}})}getMetadataAttempt(){return Sr(this,null,function*(){let e=yield this.cache.getHeader(this.source),a=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),n=yield this.decompress(a.data,e.internalCompression),c=new TextDecoder("utf-8");return JSON.parse(c.decode(n))})}getMetadata(){return Sr(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Q3)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Sr(this,null,function*(){let a=yield this.getHeader(),n=yield this.getMetadata(),c=q6(a.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${c}`],vector_layers:n.vector_layers,attribution:n.attribution,description:n.description,name:n.name,version:n.version,bounds:[a.minLon,a.minLat,a.maxLon,a.maxLat],center:[a.centerLon,a.centerLat,a.centerZoom],minzoom:a.minZoom,maxzoom:a.maxZoom}})}};ya(a5,"PMTiles");var Ag=a5;const JC=180/Math.PI;function zb(t,e){return t/Math.pow(2,e)*360-180}function Zb(t,e){const a=Math.PI-2*Math.PI*t/Math.pow(2,e);return JC*Math.atan(.5*(Math.exp(a)-Math.exp(-a)))}function Hb(t){const e=zb(t[0]+1,t[2]),a=zb(t[0],t[2]),n=Zb(t[1]+1,t[2]),c=Zb(t[1],t[2]);return[a,n,e,c]}function eM(t){return[[t[0]*2,t[1]*2,t[2]+1],[t[0]*2+1,t[1]*2,t[2]+1],[t[0]*2+1,t[1]*2+1,t[2]+1],[t[0]*2,t[1]*2+1,t[2]+1]]}function tM(t){return[t[0]>>1,t[1]>>1,t[2]-1]}function iM(t){return eM(tM(t))}const{min:aM,max:rM}=Math,Ql=(t,e=0,a=1)=>aM(rM(e,t),a),Om=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=Ql(t[e],0,255)):e===3&&(t[e]=Ql(t[e],0,1));return t},r5={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])r5[`[object ${t}]`]=t.toLowerCase();function Hi(t){return r5[Object.prototype.toString.call(t)]||"object"}const Li=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):Hi(t[0])=="object"&&e?e.split("").filter(a=>t[0][a]!==void 0).map(a=>t[0][a]):t[0].slice(0),Yh=t=>{if(t.length<2)return null;const e=t.length-1;return Hi(t[e])=="string"?t[e].toLowerCase():null},{PI:Og,min:n5,max:s5}=Math,cs=t=>Math.round(t*100)/100,k3=t=>Math.round(t*100)/100,To=Og*2,F2=Og/3,nM=Og/180,sM=180/Og;function o5(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const Yi={format:{},autodetect:[]};class Pt{constructor(...e){const a=this;if(Hi(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let n=Yh(e),c=!1;if(!n){c=!0,Yi.sorted||(Yi.autodetect=Yi.autodetect.sort((f,u)=>u.p-f.p),Yi.sorted=!0);for(let f of Yi.autodetect)if(n=f.test(...e),n)break}if(Yi.format[n]){const f=Yi.format[n].apply(null,c?e:e.slice(0,-1));a._rgb=Om(f)}else throw new Error("unknown format: "+e);a._rgb.length===3&&a._rgb.push(1)}toString(){return Hi(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const oM="3.1.2",$i=(...t)=>new Pt(...t);$i.version=oM;const Ch={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},AM=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,lM=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,A5=t=>{if(t.match(AM)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),a=e>>16,n=e>>8&255,c=e&255;return[a,n,c,1]}if(t.match(lM)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),a=e>>24&255,n=e>>16&255,c=e>>8&255,f=Math.round((e&255)/255*100)/100;return[a,n,c,f]}throw new Error(`unknown hex color: ${t}`)},{round:Hf}=Math,l5=(...t)=>{let[e,a,n,c]=Li(t,"rgba"),f=Yh(t)||"auto";c===void 0&&(c=1),f==="auto"&&(f=c<1?"rgba":"rgb"),e=Hf(e),a=Hf(a),n=Hf(n);let s="000000"+(e<<16|a<<8|n).toString(16);s=s.substr(s.length-6);let x="0"+Hf(c*255).toString(16);switch(x=x.substr(x.length-2),f.toLowerCase()){case"rgba":return`#${s}${x}`;case"argb":return`#${x}${s}`;default:return`#${s}`}};Pt.prototype.name=function(){const t=l5(this._rgb,"rgb");for(let e of Object.keys(Ch))if(Ch[e]===t)return e.toLowerCase();return t};Yi.format.named=t=>{if(t=t.toLowerCase(),Ch[t])return A5(Ch[t]);throw new Error("unknown color name: "+t)};Yi.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Hi(t)==="string"&&Ch[t.toLowerCase()])return"named"}});Pt.prototype.alpha=function(t,e=!1){return t!==void 0&&Hi(t)==="number"?e?(this._rgb[3]=t,this):new Pt([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};Pt.prototype.clipped=function(){return this._rgb._clipped||!1};const no={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},cM=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Po(t){const e=cM.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);no.labWhitePoint=t,no.Xn=e[0],no.Zn=e[1]}function s0(){return no.labWhitePoint}const Xm=(...t)=>{t=Li(t,"lab");const[e,a,n]=t,[c,f,u]=hM(e,a,n),[s,x,B]=c5(c,f,u);return[s,x,B,t.length>3?t[3]:1]},hM=(t,e,a)=>{const{kE:n,kK:c,kKE:f,Xn:u,Yn:s,Zn:x}=no,B=(t+16)/116,I=.002*e+B,R=B-.005*a,F=I*I*I,M=R*R*R,N=F>n?F:(116*I-16)/c,D=t>f?Math.pow((t+16)/116,3):t/c,V=M>n?M:(116*R-16)/c,X=N*u,ee=D*s,Ae=V*x;return[X,ee,Ae]},T2=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},c5=(t,e,a)=>{const{MtxAdaptMa:n,MtxAdaptMaI:c,MtxXYZ2RGB:f,RefWhiteRGB:u,Xn:s,Yn:x,Zn:B}=no,I=s*n.m00+x*n.m10+B*n.m20,R=s*n.m01+x*n.m11+B*n.m21,F=s*n.m02+x*n.m12+B*n.m22,M=u.X*n.m00+u.Y*n.m10+u.Z*n.m20,N=u.X*n.m01+u.Y*n.m11+u.Z*n.m21,D=u.X*n.m02+u.Y*n.m12+u.Z*n.m22,V=(t*n.m00+e*n.m10+a*n.m20)*(M/I),X=(t*n.m01+e*n.m11+a*n.m21)*(N/R),ee=(t*n.m02+e*n.m12+a*n.m22)*(D/F),Ae=V*c.m00+X*c.m10+ee*c.m20,ce=V*c.m01+X*c.m11+ee*c.m21,ue=V*c.m02+X*c.m12+ee*c.m22,oe=T2(Ae*f.m00+ce*f.m10+ue*f.m20),q=T2(Ae*f.m01+ce*f.m11+ue*f.m21),H=T2(Ae*f.m02+ce*f.m12+ue*f.m22);return[oe*255,q*255,H*255]},Vm=(...t)=>{const[e,a,n,...c]=Li(t,"rgb"),[f,u,s]=h5(e,a,n),[x,B,I]=uM(f,u,s);return[x,B,I,...c.length>0&&c[0]<1?[c[0]]:[]]};function uM(t,e,a){const{Xn:n,Yn:c,Zn:f,kE:u,kK:s}=no,x=t/n,B=e/c,I=a/f,R=x>u?Math.pow(x,1/3):(s*x+16)/116,F=B>u?Math.pow(B,1/3):(s*B+16)/116,M=I>u?Math.pow(I,1/3):(s*I+16)/116;return[116*F-16,500*(R-F),200*(F-M)]}function S2(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const h5=(t,e,a)=>{t=S2(t/255),e=S2(e/255),a=S2(a/255);const{MtxRGB2XYZ:n,MtxAdaptMa:c,MtxAdaptMaI:f,Xn:u,Yn:s,Zn:x,As:B,Bs:I,Cs:R}=no;let F=t*n.m00+e*n.m10+a*n.m20,M=t*n.m01+e*n.m11+a*n.m21,N=t*n.m02+e*n.m12+a*n.m22;const D=u*c.m00+s*c.m10+x*c.m20,V=u*c.m01+s*c.m11+x*c.m21,X=u*c.m02+s*c.m12+x*c.m22;let ee=F*c.m00+M*c.m10+N*c.m20,Ae=F*c.m01+M*c.m11+N*c.m21,ce=F*c.m02+M*c.m12+N*c.m22;return ee*=D/B,Ae*=V/I,ce*=X/R,F=ee*f.m00+Ae*f.m10+ce*f.m20,M=ee*f.m01+Ae*f.m11+ce*f.m21,N=ee*f.m02+Ae*f.m12+ce*f.m22,[F,M,N]};Pt.prototype.lab=function(){return Vm(this._rgb)};const dM=(...t)=>new Pt(...t,"lab");Object.assign($i,{lab:dM,getLabWhitePoint:s0,setLabWhitePoint:Po});Yi.format.lab=Xm;Yi.autodetect.push({p:2,test:(...t)=>{if(t=Li(t,"lab"),Hi(t)==="array"&&t.length===3)return"lab"}});Pt.prototype.darken=function(t=1){const e=this,a=e.lab();return a[0]-=no.Kn*t,new Pt(a,"lab").alpha(e.alpha(),!0)};Pt.prototype.brighten=function(t=1){return this.darken(-t)};Pt.prototype.darker=Pt.prototype.darken;Pt.prototype.brighter=Pt.prototype.brighten;Pt.prototype.get=function(t){const[e,a]=t.split("."),n=this[e]();if(a){const c=e.indexOf(a)-(e.substr(0,2)==="ok"?2:0);if(c>-1)return n[c];throw new Error(`unknown channel ${a} in mode ${e}`)}else return n};const{pow:fM}=Math,gM=1e-7,pM=20;Pt.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&Hi(t)==="number"){if(t===0)return new Pt([0,0,0,this._rgb[3]],"rgb");if(t===1)return new Pt([255,255,255,this._rgb[3]],"rgb");let a=this.luminance(),n=pM;const c=(u,s)=>{const x=u.interpolate(s,.5,e),B=x.luminance();return Math.abs(t-B)<gM||!n--?x:B>t?c(u,x):c(x,s)},f=(a>t?c(new Pt([0,0,0]),this):c(this,new Pt([255,255,255]))).rgb();return new Pt([...f,this._rgb[3]])}return mM(...this._rgb.slice(0,3))};const mM=(t,e,a)=>(t=Y2(t),e=Y2(e),a=Y2(a),.2126*t+.7152*e+.0722*a),Y2=t=>(t/=255,t<=.03928?t/12.92:fM((t+.055)/1.055,2.4)),en={},Mh=(t,e,a=.5,...n)=>{let c=n[0]||"lrgb";if(!en[c]&&!n.length&&(c=Object.keys(en)[0]),!en[c])throw new Error(`interpolation mode ${c} is not defined`);return Hi(t)!=="object"&&(t=new Pt(t)),Hi(e)!=="object"&&(e=new Pt(e)),en[c](t,e,a).alpha(t.alpha()+a*(e.alpha()-t.alpha()))};Pt.prototype.mix=Pt.prototype.interpolate=function(t,e=.5,...a){return Mh(this,t,e,...a)};Pt.prototype.premultiply=function(t=!1){const e=this._rgb,a=e[3];return t?(this._rgb=[e[0]*a,e[1]*a,e[2]*a,a],this):new Pt([e[0]*a,e[1]*a,e[2]*a,a],"rgb")};const{sin:_M,cos:bM}=Math,u5=(...t)=>{let[e,a,n]=Li(t,"lch");return isNaN(n)&&(n=0),n=n*nM,[e,bM(n)*a,_M(n)*a]},Gm=(...t)=>{t=Li(t,"lch");const[e,a,n]=t,[c,f,u]=u5(e,a,n),[s,x,B]=Xm(c,f,u);return[s,x,B,t.length>3?t[3]:1]},yM=(...t)=>{const e=o5(Li(t,"hcl"));return Gm(...e)},{sqrt:vM,atan2:xM,round:wM}=Math,d5=(...t)=>{const[e,a,n]=Li(t,"lab"),c=vM(a*a+n*n);let f=(xM(n,a)*sM+360)%360;return wM(c*1e4)===0&&(f=Number.NaN),[e,c,f]},jm=(...t)=>{const[e,a,n,...c]=Li(t,"rgb"),[f,u,s]=Vm(e,a,n),[x,B,I]=d5(f,u,s);return[x,B,I,...c.length>0&&c[0]<1?[c[0]]:[]]};Pt.prototype.lch=function(){return jm(this._rgb)};Pt.prototype.hcl=function(){return o5(jm(this._rgb))};const BM=(...t)=>new Pt(...t,"lch"),CM=(...t)=>new Pt(...t,"hcl");Object.assign($i,{lch:BM,hcl:CM});Yi.format.lch=Gm;Yi.format.hcl=yM;["lch","hcl"].forEach(t=>Yi.autodetect.push({p:2,test:(...e)=>{if(e=Li(e,t),Hi(e)==="array"&&e.length===3)return t}}));Pt.prototype.saturate=function(t=1){const e=this,a=e.lch();return a[1]+=no.Kn*t,a[1]<0&&(a[1]=0),new Pt(a,"lch").alpha(e.alpha(),!0)};Pt.prototype.desaturate=function(t=1){return this.saturate(-t)};Pt.prototype.set=function(t,e,a=!1){const[n,c]=t.split("."),f=this[n]();if(c){const u=n.indexOf(c)-(n.substr(0,2)==="ok"?2:0);if(u>-1){if(Hi(e)=="string")switch(e.charAt(0)){case"+":f[u]+=+e;break;case"-":f[u]+=+e;break;case"*":f[u]*=+e.substr(1);break;case"/":f[u]/=+e.substr(1);break;default:f[u]=+e}else if(Hi(e)==="number")f[u]=e;else throw new Error("unsupported value for Color.set");const s=new Pt(f,n);return a?(this._rgb=s._rgb,this):s}throw new Error(`unknown channel ${c} in mode ${n}`)}else return f};Pt.prototype.tint=function(t=.5,...e){return Mh(this,"white",t,...e)};Pt.prototype.shade=function(t=.5,...e){return Mh(this,"black",t,...e)};const MM=(t,e,a)=>{const n=t._rgb,c=e._rgb;return new Pt(n[0]+a*(c[0]-n[0]),n[1]+a*(c[1]-n[1]),n[2]+a*(c[2]-n[2]),"rgb")};en.rgb=MM;const{sqrt:N2,pow:Xc}=Math,RM=(t,e,a)=>{const[n,c,f]=t._rgb,[u,s,x]=e._rgb;return new Pt(N2(Xc(n,2)*(1-a)+Xc(u,2)*a),N2(Xc(c,2)*(1-a)+Xc(s,2)*a),N2(Xc(f,2)*(1-a)+Xc(x,2)*a),"rgb")};en.lrgb=RM;const IM=(t,e,a)=>{const n=t.lab(),c=e.lab();return new Pt(n[0]+a*(c[0]-n[0]),n[1]+a*(c[1]-n[1]),n[2]+a*(c[2]-n[2]),"lab")};en.lab=IM;const Nh=(t,e,a,n)=>{let c,f;n==="hsl"?(c=t.hsl(),f=e.hsl()):n==="hsv"?(c=t.hsv(),f=e.hsv()):n==="hcg"?(c=t.hcg(),f=e.hcg()):n==="hsi"?(c=t.hsi(),f=e.hsi()):n==="lch"||n==="hcl"?(n="hcl",c=t.hcl(),f=e.hcl()):n==="oklch"&&(c=t.oklch().reverse(),f=e.oklch().reverse());let u,s,x,B,I,R;(n.substr(0,1)==="h"||n==="oklch")&&([u,x,I]=c,[s,B,R]=f);let F,M,N,D;return!isNaN(u)&&!isNaN(s)?(s>u&&s-u>180?D=s-(u+360):s<u&&u-s>180?D=s+360-u:D=s-u,M=u+a*D):isNaN(u)?isNaN(s)?M=Number.NaN:(M=s,(I==1||I==0)&&n!="hsv"&&(F=B)):(M=u,(R==1||R==0)&&n!="hsv"&&(F=x)),F===void 0&&(F=x+a*(B-x)),N=I+a*(R-I),n==="oklch"?new Pt([N,F,M],n):new Pt([M,F,N],n)},f5=(t,e,a)=>Nh(t,e,a,"lch");en.lch=f5;en.hcl=f5;const UM=t=>{if(Hi(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,a=t>>8&255,n=t&255;return[e,a,n,1]}throw new Error("unknown num color: "+t)},EM=(...t)=>{const[e,a,n]=Li(t,"rgb");return(e<<16)+(a<<8)+n};Pt.prototype.num=function(){return EM(this._rgb)};const FM=(...t)=>new Pt(...t,"num");Object.assign($i,{num:FM});Yi.format.num=UM;Yi.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&Hi(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const TM=(t,e,a)=>{const n=t.num(),c=e.num();return new Pt(n+a*(c-n),"num")};en.num=TM;const{floor:SM}=Math,YM=(...t)=>{t=Li(t,"hcg");let[e,a,n]=t,c,f,u;n=n*255;const s=a*255;if(a===0)c=f=u=n;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const x=SM(e),B=e-x,I=n*(1-a),R=I+s*(1-B),F=I+s*B,M=I+s;switch(x){case 0:[c,f,u]=[M,F,I];break;case 1:[c,f,u]=[R,M,I];break;case 2:[c,f,u]=[I,M,F];break;case 3:[c,f,u]=[I,R,M];break;case 4:[c,f,u]=[F,I,M];break;case 5:[c,f,u]=[M,I,R];break}}return[c,f,u,t.length>3?t[3]:1]},NM=(...t)=>{const[e,a,n]=Li(t,"rgb"),c=n5(e,a,n),f=s5(e,a,n),u=f-c,s=u*100/255,x=c/(255-u)*100;let B;return u===0?B=Number.NaN:(e===f&&(B=(a-n)/u),a===f&&(B=2+(n-e)/u),n===f&&(B=4+(e-a)/u),B*=60,B<0&&(B+=360)),[B,s,x]};Pt.prototype.hcg=function(){return NM(this._rgb)};const LM=(...t)=>new Pt(...t,"hcg");$i.hcg=LM;Yi.format.hcg=YM;Yi.autodetect.push({p:1,test:(...t)=>{if(t=Li(t,"hcg"),Hi(t)==="array"&&t.length===3)return"hcg"}});const PM=(t,e,a)=>Nh(t,e,a,"hcg");en.hcg=PM;const{cos:Vc}=Math,QM=(...t)=>{t=Li(t,"hsi");let[e,a,n]=t,c,f,u;return isNaN(e)&&(e=0),isNaN(a)&&(a=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(u=(1-a)/3,c=(1+a*Vc(To*e)/Vc(F2-To*e))/3,f=1-(u+c)):e<2/3?(e-=1/3,c=(1-a)/3,f=(1+a*Vc(To*e)/Vc(F2-To*e))/3,u=1-(c+f)):(e-=2/3,f=(1-a)/3,u=(1+a*Vc(To*e)/Vc(F2-To*e))/3,c=1-(f+u)),c=Ql(n*c*3),f=Ql(n*f*3),u=Ql(n*u*3),[c*255,f*255,u*255,t.length>3?t[3]:1]},{min:kM,sqrt:DM,acos:zM}=Math,ZM=(...t)=>{let[e,a,n]=Li(t,"rgb");e/=255,a/=255,n/=255;let c;const f=kM(e,a,n),u=(e+a+n)/3,s=u>0?1-f/u:0;return s===0?c=NaN:(c=(e-a+(e-n))/2,c/=DM((e-a)*(e-a)+(e-n)*(a-n)),c=zM(c),n>a&&(c=To-c),c/=To),[c*360,s,u]};Pt.prototype.hsi=function(){return ZM(this._rgb)};const HM=(...t)=>new Pt(...t,"hsi");$i.hsi=HM;Yi.format.hsi=QM;Yi.autodetect.push({p:2,test:(...t)=>{if(t=Li(t,"hsi"),Hi(t)==="array"&&t.length===3)return"hsi"}});const OM=(t,e,a)=>Nh(t,e,a,"hsi");en.hsi=OM;const D3=(...t)=>{t=Li(t,"hsl");const[e,a,n]=t;let c,f,u;if(a===0)c=f=u=n*255;else{const s=[0,0,0],x=[0,0,0],B=n<.5?n*(1+a):n+a-n*a,I=2*n-B,R=e/360;s[0]=R+1/3,s[1]=R,s[2]=R-1/3;for(let F=0;F<3;F++)s[F]<0&&(s[F]+=1),s[F]>1&&(s[F]-=1),6*s[F]<1?x[F]=I+(B-I)*6*s[F]:2*s[F]<1?x[F]=B:3*s[F]<2?x[F]=I+(B-I)*(2/3-s[F])*6:x[F]=I;[c,f,u]=[x[0]*255,x[1]*255,x[2]*255]}return t.length>3?[c,f,u,t[3]]:[c,f,u,1]},g5=(...t)=>{t=Li(t,"rgba");let[e,a,n]=t;e/=255,a/=255,n/=255;const c=n5(e,a,n),f=s5(e,a,n),u=(f+c)/2;let s,x;return f===c?(s=0,x=Number.NaN):s=u<.5?(f-c)/(f+c):(f-c)/(2-f-c),e==f?x=(a-n)/(f-c):a==f?x=2+(n-e)/(f-c):n==f&&(x=4+(e-a)/(f-c)),x*=60,x<0&&(x+=360),t.length>3&&t[3]!==void 0?[x,s,u,t[3]]:[x,s,u]};Pt.prototype.hsl=function(){return g5(this._rgb)};const XM=(...t)=>new Pt(...t,"hsl");$i.hsl=XM;Yi.format.hsl=D3;Yi.autodetect.push({p:2,test:(...t)=>{if(t=Li(t,"hsl"),Hi(t)==="array"&&t.length===3)return"hsl"}});const VM=(t,e,a)=>Nh(t,e,a,"hsl");en.hsl=VM;const{floor:GM}=Math,jM=(...t)=>{t=Li(t,"hsv");let[e,a,n]=t,c,f,u;if(n*=255,a===0)c=f=u=n;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const s=GM(e),x=e-s,B=n*(1-a),I=n*(1-a*x),R=n*(1-a*(1-x));switch(s){case 0:[c,f,u]=[n,R,B];break;case 1:[c,f,u]=[I,n,B];break;case 2:[c,f,u]=[B,n,R];break;case 3:[c,f,u]=[B,I,n];break;case 4:[c,f,u]=[R,B,n];break;case 5:[c,f,u]=[n,B,I];break}}return[c,f,u,t.length>3?t[3]:1]},{min:KM,max:$M}=Math,qM=(...t)=>{t=Li(t,"rgb");let[e,a,n]=t;const c=KM(e,a,n),f=$M(e,a,n),u=f-c;let s,x,B;return B=f/255,f===0?(s=Number.NaN,x=0):(x=u/f,e===f&&(s=(a-n)/u),a===f&&(s=2+(n-e)/u),n===f&&(s=4+(e-a)/u),s*=60,s<0&&(s+=360)),[s,x,B]};Pt.prototype.hsv=function(){return qM(this._rgb)};const WM=(...t)=>new Pt(...t,"hsv");$i.hsv=WM;Yi.format.hsv=jM;Yi.autodetect.push({p:2,test:(...t)=>{if(t=Li(t,"hsv"),Hi(t)==="array"&&t.length===3)return"hsv"}});const JM=(t,e,a)=>Nh(t,e,a,"hsv");en.hsv=JM;function lg(t,e){let a=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(u=>[u]));let n=e[0].length,c=e[0].map((u,s)=>e.map(x=>x[s])),f=t.map(u=>c.map(s=>Array.isArray(u)?u.reduce((x,B,I)=>x+B*(s[I]||0),0):s.reduce((x,B)=>x+B*u,0)));return a===1&&(f=f[0]),n===1?f.map(u=>u[0]):f}const Km=(...t)=>{t=Li(t,"lab");const[e,a,n,...c]=t,[f,u,s]=eR([e,a,n]),[x,B,I]=c5(f,u,s);return[x,B,I,...c.length>0&&c[0]<1?[c[0]]:[]]};function eR(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],a=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],n=lg(a,t);return lg(e,n.map(c=>c**3))}const $m=(...t)=>{const[e,a,n,...c]=Li(t,"rgb"),f=h5(e,a,n);return[...tR(f),...c.length>0&&c[0]<1?[c[0]]:[]]};function tR(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],a=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],n=lg(e,t);return lg(a,n.map(c=>Math.cbrt(c)))}Pt.prototype.oklab=function(){return $m(this._rgb)};const iR=(...t)=>new Pt(...t,"oklab");Object.assign($i,{oklab:iR});Yi.format.oklab=Km;Yi.autodetect.push({p:2,test:(...t)=>{if(t=Li(t,"oklab"),Hi(t)==="array"&&t.length===3)return"oklab"}});const aR=(t,e,a)=>{const n=t.oklab(),c=e.oklab();return new Pt(n[0]+a*(c[0]-n[0]),n[1]+a*(c[1]-n[1]),n[2]+a*(c[2]-n[2]),"oklab")};en.oklab=aR;const rR=(t,e,a)=>Nh(t,e,a,"oklch");en.oklch=rR;const{pow:L2,sqrt:P2,PI:Q2,cos:Ob,sin:Xb,atan2:nR}=Math,sR=(t,e="lrgb",a=null)=>{const n=t.length;a||(a=Array.from(new Array(n)).map(()=>1));const c=n/a.reduce(function(R,F){return R+F});if(a.forEach((R,F)=>{a[F]*=c}),t=t.map(R=>new Pt(R)),e==="lrgb")return oR(t,a);const f=t.shift(),u=f.get(e),s=[];let x=0,B=0;for(let R=0;R<u.length;R++)if(u[R]=(u[R]||0)*a[0],s.push(isNaN(u[R])?0:a[0]),e.charAt(R)==="h"&&!isNaN(u[R])){const F=u[R]/180*Q2;x+=Ob(F)*a[0],B+=Xb(F)*a[0]}let I=f.alpha()*a[0];t.forEach((R,F)=>{const M=R.get(e);I+=R.alpha()*a[F+1];for(let N=0;N<u.length;N++)if(!isNaN(M[N]))if(s[N]+=a[F+1],e.charAt(N)==="h"){const D=M[N]/180*Q2;x+=Ob(D)*a[F+1],B+=Xb(D)*a[F+1]}else u[N]+=M[N]*a[F+1]});for(let R=0;R<u.length;R++)if(e.charAt(R)==="h"){let F=nR(B/s[R],x/s[R])/Q2*180;for(;F<0;)F+=360;for(;F>=360;)F-=360;u[R]=F}else u[R]=u[R]/s[R];return I/=n,new Pt(u,e).alpha(I>.99999?1:I,!0)},oR=(t,e)=>{const a=t.length,n=[0,0,0,0];for(let c=0;c<t.length;c++){const f=t[c],u=e[c]/a,s=f._rgb;n[0]+=L2(s[0],2)*u,n[1]+=L2(s[1],2)*u,n[2]+=L2(s[2],2)*u,n[3]+=s[3]*u}return n[0]=P2(n[0]),n[1]=P2(n[1]),n[2]=P2(n[2]),n[3]>.9999999&&(n[3]=1),new Pt(Om(n))},{pow:AR}=Math;function cg(t){let e="rgb",a=$i("#ccc"),n=0,c=[0,1],f=[],u=[0,0],s=!1,x=[],B=!1,I=0,R=1,F=!1,M={},N=!0,D=1;const V=function(q){if(q=q||["#fff","#000"],q&&Hi(q)==="string"&&$i.brewer&&$i.brewer[q.toLowerCase()]&&(q=$i.brewer[q.toLowerCase()]),Hi(q)==="array"){q.length===1&&(q=[q[0],q[0]]),q=q.slice(0);for(let H=0;H<q.length;H++)q[H]=$i(q[H]);f.length=0;for(let H=0;H<q.length;H++)f.push(H/(q.length-1))}return ue(),x=q},X=function(q){if(s!=null){const H=s.length-1;let $=0;for(;$<H&&q>=s[$];)$++;return $-1}return 0};let ee=q=>q,Ae=q=>q;const ce=function(q,H){let $,de;if(H==null&&(H=!1),isNaN(q)||q===null)return a;H?de=q:s&&s.length>2?de=X(q)/(s.length-2):R!==I?de=(q-I)/(R-I):de=1,de=Ae(de),H||(de=ee(de)),D!==1&&(de=AR(de,D)),de=u[0]+de*(1-u[0]-u[1]),de=Ql(de,0,1);const ge=Math.floor(de*1e4);if(N&&M[ge])$=M[ge];else{if(Hi(x)==="array")for(let ye=0;ye<f.length;ye++){const we=f[ye];if(de<=we){$=x[ye];break}if(de>=we&&ye===f.length-1){$=x[ye];break}if(de>we&&de<f[ye+1]){de=(de-we)/(f[ye+1]-we),$=$i.interpolate(x[ye],x[ye+1],de,e);break}}else Hi(x)==="function"&&($=x(de));N&&(M[ge]=$)}return $};var ue=()=>M={};V(t);const oe=function(q){const H=$i(ce(q));return B&&H[B]?H[B]():H};return oe.classes=function(q){if(q!=null){if(Hi(q)==="array")s=q,c=[q[0],q[q.length-1]];else{const H=$i.analyze(c);q===0?s=[H.min,H.max]:s=$i.limits(H,"e",q)}return oe}return s},oe.domain=function(q){if(!arguments.length)return c;I=q[0],R=q[q.length-1],f=[];const H=x.length;if(q.length===H&&I!==R)for(let $ of Array.from(q))f.push(($-I)/(R-I));else{for(let $=0;$<H;$++)f.push($/(H-1));if(q.length>2){const $=q.map((ge,ye)=>ye/(q.length-1)),de=q.map(ge=>(ge-I)/(R-I));de.every((ge,ye)=>$[ye]===ge)||(Ae=ge=>{if(ge<=0||ge>=1)return ge;let ye=0;for(;ge>=de[ye+1];)ye++;const we=(ge-de[ye])/(de[ye+1]-de[ye]);return $[ye]+we*($[ye+1]-$[ye])})}}return c=[I,R],oe},oe.mode=function(q){return arguments.length?(e=q,ue(),oe):e},oe.range=function(q,H){return V(q),oe},oe.out=function(q){return B=q,oe},oe.spread=function(q){return arguments.length?(n=q,oe):n},oe.correctLightness=function(q){return q==null&&(q=!0),F=q,ue(),F?ee=function(H){const $=ce(0,!0).lab()[0],de=ce(1,!0).lab()[0],ge=$>de;let ye=ce(H,!0).lab()[0];const we=$+(de-$)*H;let Ve=ye-we,ut=0,at=1,et=20;for(;Math.abs(Ve)>.01&&et-- >0;)(function(){return ge&&(Ve*=-1),Ve<0?(ut=H,H+=(at-H)*.5):(at=H,H+=(ut-H)*.5),ye=ce(H,!0).lab()[0],Ve=ye-we})();return H}:ee=H=>H,oe},oe.padding=function(q){return q!=null?(Hi(q)==="number"&&(q=[q,q]),u=q,oe):u},oe.colors=function(q,H){arguments.length<2&&(H="hex");let $=[];if(arguments.length===0)$=x.slice(0);else if(q===1)$=[oe(.5)];else if(q>1){const de=c[0],ge=c[1]-de;$=lR(0,q).map(ye=>oe(de+ye/(q-1)*ge))}else{t=[];let de=[];if(s&&s.length>2)for(let ge=1,ye=s.length,we=1<=ye;we?ge<ye:ge>ye;we?ge++:ge--)de.push((s[ge-1]+s[ge])*.5);else de=c;$=de.map(ge=>oe(ge))}return $i[H]&&($=$.map(de=>de[H]())),$},oe.cache=function(q){return q!=null?(N=q,oe):N},oe.gamma=function(q){return q!=null?(D=q,oe):D},oe.nodata=function(q){return q!=null?(a=$i(q),oe):a},oe}function lR(t,e,a){let n=[],c=t<e,f=e;for(let u=t;c?u<f:u>f;c?u++:u--)n.push(u);return n}const cR=function(t){let e=[1,1];for(let a=1;a<t;a++){let n=[1];for(let c=1;c<=e.length;c++)n[c]=(e[c]||0)+e[c-1];e=n}return e},hR=function(t){let e,a,n,c;if(t=t.map(f=>new Pt(f)),t.length===2)[a,n]=t.map(f=>f.lab()),e=function(f){const u=[0,1,2].map(s=>a[s]+f*(n[s]-a[s]));return new Pt(u,"lab")};else if(t.length===3)[a,n,c]=t.map(f=>f.lab()),e=function(f){const u=[0,1,2].map(s=>(1-f)*(1-f)*a[s]+2*(1-f)*f*n[s]+f*f*c[s]);return new Pt(u,"lab")};else if(t.length===4){let f;[a,n,c,f]=t.map(u=>u.lab()),e=function(u){const s=[0,1,2].map(x=>(1-u)*(1-u)*(1-u)*a[x]+3*(1-u)*(1-u)*u*n[x]+3*(1-u)*u*u*c[x]+u*u*u*f[x]);return new Pt(s,"lab")}}else if(t.length>=5){let f,u,s;f=t.map(x=>x.lab()),s=t.length-1,u=cR(s),e=function(x){const B=1-x,I=[0,1,2].map(R=>f.reduce((F,M,N)=>F+u[N]*B**(s-N)*x**N*M[R],0));return new Pt(I,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},uR=t=>{const e=hR(t);return e.scale=()=>cg(e),e},{round:p5}=Math;Pt.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(p5)};Pt.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,a)=>a<3?t===!1?e:p5(e):e)};const dR=(...t)=>new Pt(...t,"rgb");Object.assign($i,{rgb:dR});Yi.format.rgb=(...t)=>{const e=Li(t,"rgba");return e[3]===void 0&&(e[3]=1),e};Yi.autodetect.push({p:3,test:(...t)=>{if(t=Li(t,"rgba"),Hi(t)==="array"&&(t.length===3||t.length===4&&Hi(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const Qs=(t,e,a)=>{if(!Qs[a])throw new Error("unknown blend mode "+a);return Qs[a](t,e)},ZA=t=>(e,a)=>{const n=$i(a).rgb(),c=$i(e).rgb();return $i.rgb(t(n,c))},HA=t=>(e,a)=>{const n=[];return n[0]=t(e[0],a[0]),n[1]=t(e[1],a[1]),n[2]=t(e[2],a[2]),n},fR=t=>t,gR=(t,e)=>t*e/255,pR=(t,e)=>t>e?e:t,mR=(t,e)=>t>e?t:e,_R=(t,e)=>255*(1-(1-t/255)*(1-e/255)),bR=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),yR=(t,e)=>255*(1-(1-e/255)/(t/255)),vR=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);Qs.normal=ZA(HA(fR));Qs.multiply=ZA(HA(gR));Qs.screen=ZA(HA(_R));Qs.overlay=ZA(HA(bR));Qs.darken=ZA(HA(pR));Qs.lighten=ZA(HA(mR));Qs.dodge=ZA(HA(vR));Qs.burn=ZA(HA(yR));const{pow:xR,sin:wR,cos:BR}=Math;function CR(t=300,e=-1.5,a=1,n=1,c=[0,1]){let f=0,u;Hi(c)==="array"?u=c[1]-c[0]:(u=0,c=[c,c]);const s=function(x){const B=To*((t+120)/360+e*x),I=xR(c[0]+u*x,n),F=(f!==0?a[0]+x*f:a)*I*(1-I)/2,M=BR(B),N=wR(B),D=I+F*(-.14861*M+1.78277*N),V=I+F*(-.29227*M-.90649*N),X=I+F*(1.97294*M);return $i(Om([D*255,V*255,X*255,1]))};return s.start=function(x){return x==null?t:(t=x,s)},s.rotations=function(x){return x==null?e:(e=x,s)},s.gamma=function(x){return x==null?n:(n=x,s)},s.hue=function(x){return x==null?a:(a=x,Hi(a)==="array"?(f=a[1]-a[0],f===0&&(a=a[1])):f=0,s)},s.lightness=function(x){return x==null?c:(Hi(x)==="array"?(c=x,u=x[1]-x[0]):(c=[x,x],u=0),s)},s.scale=()=>$i.scale(s),s.hue(a),s}const MR="0123456789abcdef",{floor:RR,random:IR}=Math,UR=()=>{let t="#";for(let e=0;e<6;e++)t+=MR.charAt(RR(IR()*16));return new Pt(t,"hex")},{log:Vb,pow:ER,floor:FR,abs:TR}=Math;function m5(t,e=null){const a={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Hi(t)==="object"&&(t=Object.values(t)),t.forEach(n=>{e&&Hi(n)==="object"&&(n=n[e]),n!=null&&!isNaN(n)&&(a.values.push(n),a.sum+=n,n<a.min&&(a.min=n),n>a.max&&(a.max=n),a.count+=1)}),a.domain=[a.min,a.max],a.limits=(n,c)=>_5(a,n,c),a}function _5(t,e="equal",a=7){Hi(t)=="array"&&(t=m5(t));const{min:n,max:c}=t,f=t.values.sort((s,x)=>s-x);if(a===1)return[n,c];const u=[];if(e.substr(0,1)==="c"&&(u.push(n),u.push(c)),e.substr(0,1)==="e"){u.push(n);for(let s=1;s<a;s++)u.push(n+s/a*(c-n));u.push(c)}else if(e.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");const s=Math.LOG10E*Vb(n),x=Math.LOG10E*Vb(c);u.push(n);for(let B=1;B<a;B++)u.push(ER(10,s+B/a*(x-s)));u.push(c)}else if(e.substr(0,1)==="q"){u.push(n);for(let s=1;s<a;s++){const x=(f.length-1)*s/a,B=FR(x);if(B===x)u.push(f[B]);else{const I=x-B;u.push(f[B]*(1-I)+f[B+1]*I)}}u.push(c)}else if(e.substr(0,1)==="k"){let s;const x=f.length,B=new Array(x),I=new Array(a);let R=!0,F=0,M=null;M=[],M.push(n);for(let V=1;V<a;V++)M.push(n+V/a*(c-n));for(M.push(c);R;){for(let X=0;X<a;X++)I[X]=0;for(let X=0;X<x;X++){const ee=f[X];let Ae=Number.MAX_VALUE,ce;for(let ue=0;ue<a;ue++){const oe=TR(M[ue]-ee);oe<Ae&&(Ae=oe,ce=ue),I[ce]++,B[X]=ce}}const V=new Array(a);for(let X=0;X<a;X++)V[X]=null;for(let X=0;X<x;X++)s=B[X],V[s]===null?V[s]=f[X]:V[s]+=f[X];for(let X=0;X<a;X++)V[X]*=1/I[X];R=!1;for(let X=0;X<a;X++)if(V[X]!==M[X]){R=!0;break}M=V,F++,F>200&&(R=!1)}const N={};for(let V=0;V<a;V++)N[V]=[];for(let V=0;V<x;V++)s=B[V],N[s].push(f[V]);let D=[];for(let V=0;V<a;V++)D.push(N[V][0]),D.push(N[V][N[V].length-1]);D=D.sort((V,X)=>V-X),u.push(D[0]);for(let V=1;V<D.length;V+=2){const X=D[V];!isNaN(X)&&u.indexOf(X)===-1&&u.push(X)}}return u}const SR=(t,e)=>{t=new Pt(t),e=new Pt(e);const a=t.luminance(),n=e.luminance();return a>n?(a+.05)/(n+.05):(n+.05)/(a+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const Gb=.027,YR=5e-4,NR=.1,jb=1.14,Of=.022,Kb=1.414,LR=(t,e)=>{t=new Pt(t),e=new Pt(e),t.alpha()<1&&(t=Mh(e,t,t.alpha(),"rgb"));const a=$b(...t.rgb()),n=$b(...e.rgb()),c=a>=Of?a:a+Math.pow(Of-a,Kb),f=n>=Of?n:n+Math.pow(Of-n,Kb),u=Math.pow(f,.56)-Math.pow(c,.57),s=Math.pow(f,.65)-Math.pow(c,.62),x=Math.abs(f-c)<YR?0:c<f?u*jb:s*jb;return(Math.abs(x)<NR?0:x>0?x-Gb:x+Gb)*100};function $b(t,e,a){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(a/255,2.4)}const{sqrt:Io,pow:cr,min:PR,max:QR,atan2:qb,abs:Wb,cos:Xf,sin:Jb,exp:kR,PI:ey}=Math;function DR(t,e,a=1,n=1,c=1){var f=function(je){return 360*je/(2*ey)},u=function(je){return 2*ey*je/360};t=new Pt(t),e=new Pt(e);const[s,x,B]=Array.from(t.lab()),[I,R,F]=Array.from(e.lab()),M=(s+I)/2,N=Io(cr(x,2)+cr(B,2)),D=Io(cr(R,2)+cr(F,2)),V=(N+D)/2,X=.5*(1-Io(cr(V,7)/(cr(V,7)+cr(25,7)))),ee=x*(1+X),Ae=R*(1+X),ce=Io(cr(ee,2)+cr(B,2)),ue=Io(cr(Ae,2)+cr(F,2)),oe=(ce+ue)/2,q=f(qb(B,ee)),H=f(qb(F,Ae)),$=q>=0?q:q+360,de=H>=0?H:H+360,ge=Wb($-de)>180?($+de+360)/2:($+de)/2,ye=1-.17*Xf(u(ge-30))+.24*Xf(u(2*ge))+.32*Xf(u(3*ge+6))-.2*Xf(u(4*ge-63));let we=de-$;we=Wb(we)<=180?we:de<=$?we+360:we-360,we=2*Io(ce*ue)*Jb(u(we)/2);const Ve=I-s,ut=ue-ce,at=1+.015*cr(M-50,2)/Io(20+cr(M-50,2)),et=1+.045*oe,xt=1+.015*oe*ye,Mt=30*kR(-cr((ge-275)/25,2)),rt=-(2*Io(cr(oe,7)/(cr(oe,7)+cr(25,7))))*Jb(2*u(Mt)),pt=Io(cr(Ve/(a*at),2)+cr(ut/(n*et),2)+cr(we/(c*xt),2)+rt*(ut/(n*et))*(we/(c*xt)));return QR(0,PR(100,pt))}function zR(t,e,a="lab"){t=new Pt(t),e=new Pt(e);const n=t.get(a),c=e.get(a);let f=0;for(let u in n){const s=(n[u]||0)-(c[u]||0);f+=s*s}return Math.sqrt(f)}const ZR=(...t)=>{try{return new Pt(...t),!0}catch{return!1}},HR={cool(){return cg([$i.hsl(180,1,.9),$i.hsl(250,.7,.4)])},hot(){return cg(["#000","#f00","#ff0","#fff"]).mode("rgb")}},z3={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},b5=Object.keys(z3),ty=new Map(b5.map(t=>[t.toLowerCase(),t])),OR=typeof Proxy=="function"?new Proxy(z3,{get(t,e){const a=e.toLowerCase();if(ty.has(a))return t[ty.get(a)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(b5)}}):z3,XR=(...t)=>{t=Li(t,"cmyk");const[e,a,n,c]=t,f=t.length>4?t[4]:1;return c===1?[0,0,0,f]:[e>=1?0:255*(1-e)*(1-c),a>=1?0:255*(1-a)*(1-c),n>=1?0:255*(1-n)*(1-c),f]},{max:iy}=Math,VR=(...t)=>{let[e,a,n]=Li(t,"rgb");e=e/255,a=a/255,n=n/255;const c=1-iy(e,iy(a,n)),f=c<1?1/(1-c):0,u=(1-e-c)*f,s=(1-a-c)*f,x=(1-n-c)*f;return[u,s,x,c]};Pt.prototype.cmyk=function(){return VR(this._rgb)};const GR=(...t)=>new Pt(...t,"cmyk");Object.assign($i,{cmyk:GR});Yi.format.cmyk=XR;Yi.autodetect.push({p:2,test:(...t)=>{if(t=Li(t,"cmyk"),Hi(t)==="array"&&t.length===4)return"cmyk"}});const jR=(...t)=>{const e=Li(t,"hsla");let a=Yh(t)||"lsa";return e[0]=cs(e[0]||0)+"deg",e[1]=cs(e[1]*100)+"%",e[2]=cs(e[2]*100)+"%",a==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),a="hsla"):e.length=3,`${a.substr(0,3)}(${e.join(" ")})`},KR=(...t)=>{const e=Li(t,"lab");let a=Yh(t)||"lab";return e[0]=cs(e[0])+"%",e[1]=cs(e[1]),e[2]=cs(e[2]),a==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},$R=(...t)=>{const e=Li(t,"lch");let a=Yh(t)||"lab";return e[0]=cs(e[0])+"%",e[1]=cs(e[1]),e[2]=isNaN(e[2])?"none":cs(e[2])+"deg",a==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},qR=(...t)=>{const e=Li(t,"lab");return e[0]=cs(e[0]*100)+"%",e[1]=k3(e[1]),e[2]=k3(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},y5=(...t)=>{const[e,a,n,...c]=Li(t,"rgb"),[f,u,s]=$m(e,a,n),[x,B,I]=d5(f,u,s);return[x,B,I,...c.length>0&&c[0]<1?[c[0]]:[]]},WR=(...t)=>{const e=Li(t,"lch");return e[0]=cs(e[0]*100)+"%",e[1]=k3(e[1]),e[2]=isNaN(e[2])?"none":cs(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:k2}=Math,JR=(...t)=>{const e=Li(t,"rgba");let a=Yh(t)||"rgb";if(a.substr(0,3)==="hsl")return jR(g5(e),a);if(a.substr(0,3)==="lab"){const n=s0();Po("d50");const c=KR(Vm(e),a);return Po(n),c}if(a.substr(0,3)==="lch"){const n=s0();Po("d50");const c=$R(jm(e),a);return Po(n),c}return a.substr(0,5)==="oklab"?qR($m(e)):a.substr(0,5)==="oklch"?WR(y5(e)):(e[0]=k2(e[0]),e[1]=k2(e[1]),e[2]=k2(e[2]),(a==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),a="rgba"),`${a.substr(0,3)}(${e.slice(0,a==="rgb"?3:4).join(" ")})`)},v5=(...t)=>{t=Li(t,"lch");const[e,a,n,...c]=t,[f,u,s]=u5(e,a,n),[x,B,I]=Km(f,u,s);return[x,B,I,...c.length>0&&c[0]<1?[c[0]]:[]]},zo=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Ys=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,hg=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,hs=/\s*/.source,Lh=/\s+/.source,qm=/\s*,\s*/.source,Xg=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Ph=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,x5=new RegExp("^rgba?\\("+hs+[zo,zo,zo].join(Lh)+Ph+"\\)$"),w5=new RegExp("^rgb\\("+hs+[zo,zo,zo].join(qm)+hs+"\\)$"),B5=new RegExp("^rgba\\("+hs+[zo,zo,zo,Ys].join(qm)+hs+"\\)$"),C5=new RegExp("^hsla?\\("+hs+[Xg,hg,hg].join(Lh)+Ph+"\\)$"),M5=new RegExp("^hsl?\\("+hs+[Xg,hg,hg].join(qm)+hs+"\\)$"),R5=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,I5=new RegExp("^lab\\("+hs+[Ys,Ys,Ys].join(Lh)+Ph+"\\)$"),U5=new RegExp("^lch\\("+hs+[Ys,Ys,Xg].join(Lh)+Ph+"\\)$"),E5=new RegExp("^oklab\\("+hs+[Ys,Ys,Ys].join(Lh)+Ph+"\\)$"),F5=new RegExp("^oklch\\("+hs+[Ys,Ys,Xg].join(Lh)+Ph+"\\)$"),{round:T5}=Math,Gc=t=>t.map((e,a)=>a<=2?Ql(T5(e),0,255):e),hr=(t,e=0,a=100,n=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,n?t=e+(t+1)*.5*(a-e):t=e+t*(a-e)),+t),An=(t,e)=>t==="none"?e:t,Wm=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(Yi.format.named)try{return Yi.format.named(t)}catch{}if((e=t.match(x5))||(e=t.match(w5))){let a=e.slice(1,4);for(let c=0;c<3;c++)a[c]=+hr(An(a[c],0),0,255);a=Gc(a);const n=e[4]!==void 0?+hr(e[4],0,1):1;return a[3]=n,a}if(e=t.match(B5)){const a=e.slice(1,5);for(let n=0;n<4;n++)a[n]=+hr(a[n],0,255);return a}if((e=t.match(C5))||(e=t.match(M5))){const a=e.slice(1,4);a[0]=+An(a[0].replace("deg",""),0),a[1]=+hr(An(a[1],0),0,100)*.01,a[2]=+hr(An(a[2],0),0,100)*.01;const n=Gc(D3(a)),c=e[4]!==void 0?+hr(e[4],0,1):1;return n[3]=c,n}if(e=t.match(R5)){const a=e.slice(1,4);a[1]*=.01,a[2]*=.01;const n=D3(a);for(let c=0;c<3;c++)n[c]=T5(n[c]);return n[3]=+e[4],n}if(e=t.match(I5)){const a=e.slice(1,4);a[0]=hr(An(a[0],0),0,100),a[1]=hr(An(a[1],0),-125,125,!0),a[2]=hr(An(a[2],0),-125,125,!0);const n=s0();Po("d50");const c=Gc(Xm(a));Po(n);const f=e[4]!==void 0?+hr(e[4],0,1):1;return c[3]=f,c}if(e=t.match(U5)){const a=e.slice(1,4);a[0]=hr(a[0],0,100),a[1]=hr(An(a[1],0),0,150,!1),a[2]=+An(a[2].replace("deg",""),0);const n=s0();Po("d50");const c=Gc(Gm(a));Po(n);const f=e[4]!==void 0?+hr(e[4],0,1):1;return c[3]=f,c}if(e=t.match(E5)){const a=e.slice(1,4);a[0]=hr(An(a[0],0),0,1),a[1]=hr(An(a[1],0),-.4,.4,!0),a[2]=hr(An(a[2],0),-.4,.4,!0);const n=Gc(Km(a)),c=e[4]!==void 0?+hr(e[4],0,1):1;return n[3]=c,n}if(e=t.match(F5)){const a=e.slice(1,4);a[0]=hr(An(a[0],0),0,1),a[1]=hr(An(a[1],0),0,.4,!1),a[2]=+An(a[2].replace("deg",""),0);const n=Gc(v5(a)),c=e[4]!==void 0?+hr(e[4],0,1):1;return n[3]=c,n}};Wm.test=t=>x5.test(t)||C5.test(t)||I5.test(t)||U5.test(t)||E5.test(t)||F5.test(t)||w5.test(t)||B5.test(t)||M5.test(t)||R5.test(t)||t==="transparent";Pt.prototype.css=function(t){return JR(this._rgb,t)};const eI=(...t)=>new Pt(...t,"css");$i.css=eI;Yi.format.css=Wm;Yi.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Hi(t)==="string"&&Wm.test(t))return"css"}});Yi.format.gl=(...t)=>{const e=Li(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const tI=(...t)=>new Pt(...t,"gl");$i.gl=tI;Pt.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};Pt.prototype.hex=function(t){return l5(this._rgb,t)};const iI=(...t)=>new Pt(...t,"hex");$i.hex=iI;Yi.format.hex=A5;Yi.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&Hi(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:Vf}=Math,S5=t=>{const e=t/100;let a,n,c;return e<66?(a=255,n=e<6?0:-155.25485562709179-.44596950469579133*(n=e-2)+104.49216199393888*Vf(n),c=e<20?0:-254.76935184120902+.8274096064007395*(c=e-10)+115.67994401066147*Vf(c)):(a=351.97690566805693+.114206453784165*(a=e-55)-40.25366309332127*Vf(a),n=325.4494125711974+.07943456536662342*(n=e-50)-28.0852963507957*Vf(n),c=255),[a,n,c,1]},{round:aI}=Math,rI=(...t)=>{const e=Li(t,"rgb"),a=e[0],n=e[2];let c=1e3,f=4e4;const u=.4;let s;for(;f-c>u;){s=(f+c)*.5;const x=S5(s);x[2]/x[0]>=n/a?f=s:c=s}return aI(s)};Pt.prototype.temp=Pt.prototype.kelvin=Pt.prototype.temperature=function(){return rI(this._rgb)};const D2=(...t)=>new Pt(...t,"temp");Object.assign($i,{temp:D2,kelvin:D2,temperature:D2});Yi.format.temp=Yi.format.kelvin=Yi.format.temperature=S5;Pt.prototype.oklch=function(){return y5(this._rgb)};const nI=(...t)=>new Pt(...t,"oklch");Object.assign($i,{oklch:nI});Yi.format.oklch=v5;Yi.autodetect.push({p:2,test:(...t)=>{if(t=Li(t,"oklch"),Hi(t)==="array"&&t.length===3)return"oklch"}});Object.assign($i,{analyze:m5,average:sR,bezier:uR,blend:Qs,brewer:OR,Color:Pt,colors:Ch,contrast:SR,contrastAPCA:LR,cubehelix:CR,deltaE:DR,distance:zR,input:Yi,interpolate:Mh,limits:_5,mix:Mh,random:UR,scale:cg,scales:HR,valid:ZR});const Y5=async(t,e)=>{const n=await new Ag(t).getZxy(e.z,e.x,e.y);if(!n||!n.data)throw new Error("Tile data not found");const c=new Blob([n.data],{type:"image/png"});return new Promise((f,u)=>{const s=new FileReader;s.onloadend=()=>{s.result?f(s.result.toString()):u(new Error("Failed to convert blob to Base64"))},s.onerror=x=>u(x),s.readAsDataURL(c)})};var sI=(t,e,a)=>e(a.dataEntry),oI=ft('<img class="c-no-drag-icon h-full w-full rounded-md object-cover transition-transform duration-150 hover:scale-110"> <div class="pointer-events-none absolute grid h-full w-full place-items-center bg-black/50 opacity-0 transition-opacity duration-150 group-hover:opacity-100"><span class="text-lg text-white">プレビュー</span></div>',1),AI=(t,e,a)=>e(a.dataEntry.id),lI=ft('<button class="c-btn-cancel flex items-center gap-2 px-4"><!> <div>地図に追加済み</div></button>'),cI=(t,e,a)=>e(a.dataEntry.id),hI=ft('<button class="c-btn-confirm flex shrink-0 grow items-center gap-2 px-4"><!> <div>地図に追加</div></button>'),uI=ft('<div class="relative mb-4 flex shrink-0 grow flex-col items-center justify-center overflow-hidden rounded-lg bg-gray-300 p-2"><button class="group relative flex aspect-video w-full shrink-0 cursor-pointer overflow-hidden"><!></button> <div class="flex w-full items-center justify-start gap-2 py-2"><span> </span></div> <div class=" shrink-0"><!></div></div>');function dI(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(eg,"$orderedLayerIds",a);let f=si(e,"showDataEntry",15),u=$t(Jr(c())),s=ra(()=>{if(e.dataEntry)return c6(e.dataEntry)});eg.subscribe(q=>{st(u,q,!0)});const x=async q=>{if(q.type!=="raster")return Promise.resolve(void 0);const H=q.metaData.xyzImageTile?q.metaData.xyzImageTile:tg;return Promise.resolve(q.format.url.replace("{z}",H.z.toString()).replace("{x}",H.x.toString()).replace("{y}",H.y.toString()))},B=async q=>{try{if(q.type!=="raster"||q.format.type!=="pmtiles")return;const H=q.metaData.xyzImageTile?q.metaData.xyzImageTile:tg;return await Y5(q.format.url,H)}catch(H){console.error("Error fetching tile image:",H)}},I=async q=>{if(q.type==="raster"){if(q.format.type==="image")return x(q);if(q.format.type==="pmtiles")return B(q)}else if(q.type==="vector")return q.metaData.coverImage??s7},R=q=>{W(s)&&wh.add(q,W(s))},F=q=>{wh.remove(q)};var M=uI(),N=Le(M);N.__click=[sI,f,e];var D=Le(N);S1(D,()=>I(e.dataEntry),null,(q,H)=>{var $=oI(),de=kt($);Ha(2),di(()=>{ja(de,"src",W(H)),ja(de,"alt",e.dataEntry.metaData.name)}),Xe(q,$)}),Ee(N);var V=Oe(N,2),X=Le(V),ee=Le(X,!0);Ee(X),Ee(V);var Ae=Oe(V,2),ce=Le(Ae);{var ue=q=>{var H=lI();H.__click=[AI,F,e];var $=Le(H);yi($,{icon:"material-symbols:check",class:" h-8 w-8"}),Ha(2),Ee(H),Xe(q,H)},oe=q=>{var H=hI();H.__click=[cI,R,e];var $=Le(H);yi($,{icon:"material-symbols:add",class:" h-8 w-8"}),Ha(2),Ee(H),Xe(q,H)};It(ce,q=>{W(u).includes(e.dataEntry.id)?q(ue):q(oe,!1)})}Ee(Ae),Ee(M),di(()=>xi(ee,e.dataEntry.metaData.name)),Xe(t,M),_i(),n()}$a(["click"]);var fI=(t,e)=>st(e,""),gI=ft('<div class="absolute left-1/2 top-1/2 flex h-full w-full -translate-x-1/2 -translate-y-1/2 items-center justify-center"><span class="text-gray-500">データが見つかりません</span></div>'),pI=ft('<div slot="item"><div class="row svelte-1cjdm0y"></div></div>'),mI=ft('<div><div class="bg-main pointer-events-auto relative flex h-full w-full flex-col overflow-hidden rounded-lg p-2"><div class="flex grow items-center justify-between gap-4 p-2"><span class="shrink-0 text-base text-lg">データカタログ</span> <div class="bg-base flex w-full max-w-[400px] rounded-full border-[1px] px-4"><input class="c-search-form tex grid w-full text-left text-gray-500 svelte-1cjdm0y" type="text" placeholder="検索"> <button class="grid cursor-pointer place-items-center"><!></button></div> <button class="bg-base cursor-pointer rounded-full p-2"><!></button></div> <!> <div class="c-list h-full svelte-1cjdm0y"><!></div></div></div>');function _I(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(Do,"$showDataMenu",a);let f=si(e,"showDataEntry",15),u=Jr([...Pg]),s=$t(Jr([])),x=$t("");Nr(()=>{W(x)?st(s,u.filter(we=>we.metaData.name.toLowerCase().includes(W(x).toLowerCase())),!0):st(s,u,!0)});const B=()=>{Do.set(!Do)};let I=$t(0),R=$t(0),F=$t(2),M=360,N=310;Nr(()=>{W(R)>N*2?(st(F,Math.floor(W(R)/N),!0),W(F)<2&&st(F,2)):st(F,2)});var D=mI(),V=Le(D),X=Le(V),ee=Oe(Le(X),2),Ae=Le(ee);ks(Ae);var ce=Oe(Ae,2);ce.__click=[fI,x];var ue=Le(ce);yi(ue,{icon:"material-symbols:close-rounded",class:"h-8 w-8 text-gray-400"}),Ee(ce),Ee(ee);var oe=Oe(ee,2);oe.__click=B;var q=Le(oe);yi(q,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Ee(oe),Ee(X);var H=Oe(X,2);{var $=we=>{var Ve=gI();Xe(we,Ve)};It(H,we=>{W(s).length===0&&we($)})}var de=Oe(H,2),ge=Le(de);const ye=ra(()=>W(s).length/W(F)+1);yC(ge,{width:"100%",height:"100%",get itemCount(){return W(ye)},get itemSize(){return M},$$slots:{item:(we,Ve)=>{var ut=pI();const at=ra(()=>Ve.index),et=ra(()=>Ve.style);var xt=Le(ut);Ea(xt,21,()=>Array(W(F)),pr,(Mt,Yt,rt)=>{var pt=vi(),je=kt(pt);{var Qe=tt=>{dI(tt,{get dataEntry(){return W(s)[W(at)*W(F)+rt]},get showDataEntry(){return f()},set showDataEntry(bt){f(bt)}})};It(je,tt=>{W(s)[W(at)*W(F)+rt]&&tt(Qe)})}Xe(Mt,pt)}),Ee(xt),Ee(ut),di(()=>{hn(ut,W(et)),hn(xt,`--grid-columns: ${W(F)??""};`)}),Xe(we,ut)}}}),Ee(de),Ee(V),Ee(D),di(()=>{Hr(D,1,`pointer-events-none absolute bottom-0 z-10 h-dvh w-full p-8 pl-[120px] pt-[60px] ${(c()?"":"hidden")??""}`),ce.disabled=!W(x)}),kg(Ae,()=>W(x),we=>st(x,we)),xb(de,"clientHeight",we=>st(I,we)),xb(de,"clientWidth",we=>st(R,we)),Xe(t,D),_i(),n()}$a(["click"]);const bI=(t,e,a)=>{e()&&(wh.add(e().id,W(a)),e(null))},yI=(t,e)=>{e()&&(wh.remove(e().id),e(null))};var vI=ft('<div class="pointer-events-none absolute bottom-4 z-10 flex w-full items-center justify-center gap-4 p-4"><button class="c-btn-cancel pointer-events-auto px-4 text-lg">キャンセル</button> <button class="c-btn-confirm pointer-events-auto px-6 text-lg">地図に追加</button></div>');function xI(t,e){mi(e,!0);let a=si(e,"showDataEntry",15),n=ra(()=>{if(a())return c6(a())});const c=x=>{x.key==="Escape"&&a(null)};var f=vI();fr("keydown",Em,c);var u=Le(f);u.__click=[yI,a];var s=Oe(u,2);s.__click=[bI,a,n],Ee(f),ba(3,f,()=>ds,()=>({duration:200,y:100,opacity:0})),Xe(t,f),_i()}$a(["click"]);var wI=ft(`<div class="absolute bottom-0 z-30 flex h-full w-full items-center justify-center bg-black/50"><div class="bg-opacity-8 bg-main flex max-h-[600px] max-w-[900px] grow flex-col rounded-md p-4 text-base"><div class="flex shrink-0 items-center justify-between pb-4"><span class="text-2xl font-bold">morivis（モリビス） について</span> <button class="bg-base rounded-full p-2"><!></button></div> <div class="flex-flex-col c-scroll overflow-y-auto overflow-x-hidden p-2"><div class="pb-4"><div class="pb-2 text-lg font-bold">概要</div> <div>岐阜県立森林文化アカデミーのクリエーター科20期生の課題研究「WebGIS
						を活用したアカデミー演習林の情報共有化」により作成したアカデミー演習林のWebGISです。現在も開発中であり、機能の追加や改善を行っています。バグなどを見つけた場合は、お手数ですが<a class="text-accent" href="https://github.com/forestacdev/enshurin-viewer/issues" target="_blank" rel="noopener noreferrer">GitHubのイシュー</a>にてご報告ください。</div></div> <div class="pb-4"><div class="pb-2 text-lg font-bold">Contributors / コントリビューターの皆さま</div> <div class="flex max-w-[300px] flex-col gap-2"><a class="lg:hover:bg-accent flex cursor-pointer items-center justify-start gap-2 rounded-full border-2 border-gray-300 p-2 transition-colors lg:hover:text-white" href="https://github.com/satoshi7190" target="_blank" rel="noopener noreferrer"><div class="relative grid h-[50px] w-[50px] place-items-center overflow-hidden rounded-full bg-gray-500"><img class="absolute block h-full w-full rounded-full object-cover" src="https://github.com/satoshi7190.png" alt="satoshi7190's Avatar"></div> <div class="flex flex-col"><span>Satoshi Komatsu</span><span>(@satoshi7190)</span></div></a> <a class="lg:hover:bg-accent flex cursor-pointer items-center justify-start gap-2 rounded-full border-2 border-gray-300 p-2 transition-colors lg:hover:text-white" href="https://www.forest.ac.jp/" target="_blank" rel="noopener noreferrer"><div class="relative grid h-[50px] w-[50px] cursor-pointer place-items-center overflow-hidden rounded-full bg-gray-500"><img class="pointer-events-none absolute block h-full w-full rounded-full object-cover" src="https://pbs.twimg.com/profile_images/1349232244909510656/US-2oTws_400x400.jpg" alt="岐阜県立森林文化アカデミー"></div> <div class="flex flex-col"><span>岐阜県立森林文化アカデミー</span> <span>関係者の方々</span></div></a></div></div></div></div></div>`);function BI(t,e){mi(e,!1);const[a,n]=rr(),c=()=>zi(ig,"$showInfoDialog",a);Xo();var f=vi(),u=kt(f);{var s=x=>{var B=wI(),I=Le(B),R=Le(I),F=Oe(Le(R),2);F.__click=()=>ig.set(!1);var M=Le(F);yi(M,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Ee(F),Ee(R),Ha(2),Ee(I),Ee(B),ba(3,B,()=>ls,()=>({duration:100})),Xe(x,B)};It(u,x=>{c()&&x(s)})}Xe(t,f),_i(),n()}$a(["click"]);var CI=ft(`<div class="absolute bottom-0 z-30 flex h-full w-full items-center justify-center bg-black/50"><div class="bg-opacity-8 bg-main flex max-h-[600px] max-w-[900px] grow flex-col rounded-md p-4 text-base"><div class="flex shrink-0 items-center justify-between overflow-auto pb-4"><span class="text-2xl font-bold">利用規約</span></div> <div class="c-scroll flex h-full grow flex-col overflow-y-auto overflow-x-hidden pb-4"><div class="pb-4">本規約は、本アプリケーション（以下、「本アプリ」）の利用に関する条件を定めるものです。本アプリをご利用いただくことで、本規約に同意したものとみなします。</div> <div class="pb-4"><div class="text-lg font-bold">🚧 開発中のアプリケーションについて 🚧</div> 本アプリは現在開発中であり、動作の安定性や正確性は保証されません。不具合や予期しない挙動が発生する可能性があります。予告なく仕様変更・機能追加・サービス停止・データ削除が行われる場合もありますので、あらかじめご理解のうえご利用ください。</div> <div class="pb-4"><div class="text-lg font-bold">本アプリの目的と禁止事項</div> 本アプリは、地図情報の閲覧および関連機能の提供を目的としています。 ご利用にあたり、以下の行為を禁止します： <div class="pl-2"><div>1. 本アプリの機能やコンテンツを不正に利用する行為</div> <div>2. 他のユーザーや第三者の権利を侵害する行為</div> <div>3. サーバーやネットワークに過度な負荷を与える行為</div> <div>4. 法律や公序良俗に反する行為</div></div></div> <div class="pb-4"><div class="text-lg font-bold">サービスの変更・停止</div> <div>サーバー障害、メンテナンス、その他の理由により、本アプリのサービスを一時的または永久に停止することがあります。その際、制作者は事前に通知を行う義務を負いません。</div></div> <div class="pb-4"><div class="text-lg font-bold">知的財産権について</div> <div>本アプリ内の地図データ、画像、プログラムその他のコンテンツに関する著作権、商標権その他の知的財産権は、制作者または正当な権利を有する第三者に帰属します。これらを無断で複製、改変、再配布することを禁止します。</div></div> <div class="pb-4"><div class="text-lg font-bold">地図情報に関する注意および免責事項</div> <div>本アプリで表示される地図は、岐阜県立森林文化アカデミーの演習林を対象としたものであり、当該施設とは直接の関係はありません。個人が制作したものであり、正式な地図や情報と異なる場合があります。内容の正確性・最新性は保証されませんので、参考情報としてご利用ください。
						また、本アプリの利用により生じたいかなる損害についても、制作者は一切の責任を負いません。</div></div> <div class="pb-4"><div class="text-lg font-bold">個人情報の取扱いについて</div> <div>本アプリの利用に際して取得した個人情報は、制作者のプライバシーポリシーに基づき、適切に取り扱います。</div></div> <div class="pb-4"><div class="text-lg font-bold">Google アナリティクスの利用について</div> <div>本アプリでは、サービスの品質向上および利用状況の分析のために、Google
						アナリティクスを使用しています。Google
						アナリティクスは、トラフィックデータの収集のために Cookie
						を使用しており、データは匿名で収集され、個人を特定するものではありません。Google
						によるデータの取扱いについては、<a class="text-accent underline" target="_blank" href="https://policies.google.com/privacy" rel="noopener noreferrer">Google のプライバシーポリシー</a>をご確認ください。</div></div> <div class="pb-4"><div class="text-lg font-bold">本規約の変更について</div> <div>事前の通知なしに、本アプリの内容や機能を変更、または提供を終了する場合があります。</div></div></div> <div class="flex shrink-0 justify-center overflow-auto pt-2"><button class="c-btn-confirm px-12 py-6 text-lg">同意する</button></div></div></div>`);function MI(t,e){mi(e,!1);const[a,n]=rr(),c=()=>zi(ag,"$showTermsDialog",a);Xo();var f=vi(),u=kt(f);{var s=x=>{var B=CI(),I=Le(B),R=Oe(Le(I),4),F=Le(R);F.__click=()=>{ag.set(!1),o7("userData")},Ee(R),Ee(I),Ee(B),ba(3,I,()=>uB,()=>({duration:300})),ba(3,B,()=>ls,()=>({duration:200})),Xe(x,B)};It(u,x=>{c()&&x(s)})}Xe(t,f),_i(),n()}$a(["click"]);const Q1=yn(null),nh=(t,e,a=!1)=>{Q1.set({message:t,type:e,persistent:a})};var RI=(t,e,a)=>e(a.value),II=(t,e)=>st(e,!0),UI=ft('<div class="grid place-items-center"><!></div>'),EI=ft('<div class="flex flex-col items-start justify-center"><span class="text-base font-semibold"> </span> <button class="text-accent flex w-full cursor-pointer items-center justify-between rounded-md p-2 pl-4 text-left transition-colors duration-150 lg:hover:bg-gray-700"><span> </span> <!></button></div>');function FI(t,e){mi(e,!0);let a=$t(!1);const n=F=>{navigator.clipboard.writeText(F),nh(`クリップボードに ${F} をコピーしました`,"info")};var c=EI(),f=Le(c),u=Le(f,!0);Ee(f);var s=Oe(f,2);s.__click=[RI,n,e],s.__mouseover=[II,a];var x=Le(s),B=Le(x,!0);Ee(x);var I=Oe(x,2);{var R=F=>{var M=UI(),N=Le(M);yi(N,{icon:"majesticons:clipboard-line",class:"mr-2 h-6 w-6 shrink-0 text-base"}),Ee(M),ba(3,M,()=>ls,()=>({duration:100})),Xe(F,M)};It(I,F=>{W(a)&&F(R)})}Ee(s),Ee(c),di(()=>{xi(u,e.key),xi(B,e.value)}),fr("mouseleave",s,()=>st(a,!1)),fr("focus",s,()=>st(a,!0)),fr("blur",s,()=>st(a,!1)),Xe(t,c),_i()}$a(["click","mouseover"]);const ug={pole_1:{image:`${ci}/pole_1.webp`,description:"",url:null},pole_2:{image:`${ci}/pole_2.webp`,description:"",url:null},pole_3:{image:`${ci}/pole_3.webp`,description:"",url:null},pole_4:{image:`${ci}/pole_4.webp`,description:"",url:null},pole_5:{image:`${ci}/pole_5.webp`,description:"",url:null},pole_6:{image:`${ci}/pole_6.webp`,description:"",url:null},pole_a:{image:`${ci}/pole_a.webp`,description:"",url:null},fac_center:{image:`${ci}/fac_center.webp`,description:`アカデミーの玄関であるエントランスホールからテクニカルゾーン、宿泊ゾーン、森の体験ゾーンへと繋がっていきます。
                        ここには講義室や事務室、ゆったりとした学生ホールなどを備えています。`,url:"https://www.forest.ac.jp/facilities/centerzone/"},fac_cottage:{image:`${ci}/fac_cottage.webp`,description:`ゲストや研修・講座受講者のための宿泊施設六角形ユニットで構成され、大小様々な部屋が15部屋あり、最大30人が利用できます。
                        厨房、食堂、洗面所、共同浴室、談話室も備えています。`,url:"https://www.forest.ac.jp/facilities/stay/"},fac_forest_labo:{image:`${ci}/fac_forest_labo.webp`,description:`情報システムを支える情報処理室や数多くの関連図書を保有する図書室を備えます。
                このほか、森の分野と環境の分野に関連する研究施設を備えています。`,url:"https://www.forest.ac.jp/facilities/centerzone/"},fac_kakoutou:{image:`${ci}/fac_kakoutou.webp`,description:"",url:null},fac_kensyutou:{image:`${ci}/fac_kensyutou.webp`,description:"",url:null},fac_koubou:{image:`${ci}/fac_koubou.webp`,description:"一般県民向けの木工講座などをサポートする施設工作に関するさまざまな木工機械などを備えています",url:"https://www.forest.ac.jp/facilities/testroom/"},fac_morinos:{image:`${ci}/fac_morinos.webp`,description:"すべての人と森をつなぎ、森と暮らす楽しさと森林文化の豊かさを次世代に伝えていく「森の入り口」森林総合教育センターです。",url:"https://morinos.net/"},fac_open_labo:{image:`${ci}/fac_open_labo.webp`,description:"",url:"https://www.forest.ac.jp/facilities/testroom/"},fac_ringyoukikaitou:{image:`${ci}/fac_ringyoukikaitou.webp`,description:"高性能林業機械を格納し、その技術を学ぶための学習施設",url:"https://www.forest.ac.jp/facilities/fmeb/"},fac_seizaitou:{image:`${ci}/fac_seizaitou.webp`,description:"",url:"https://www.forest.ac.jp/facilities/testroom/"},fac_syako:{image:`${ci}/fac_syako.webp`,description:"",url:null},fac_wood_labo:{image:`${ci}/fac_wood_labo.webp`,description:"木造建築スタジオや作業室、塗装・乾燥室など木の分野に関連する施設を備えています。２棟を繋ぐように大きな作業デッキが前面に広がります。",url:"https://www.forest.ac.jp/facilities/centerzone/"},fac_tech_a:{image:`${ci}/fac_tech_a.webp`,description:"研修施設と高性能林業機械の保管庫を備える施設前面の広大な実習用グラウンドと合わせて森林技術者のための短期技術研修部門のエリア、テクニカルゾーンを構成します。",url:"https://www.forest.ac.jp/facilities/technicalzone/"},fac_tech_b:{image:`${ci}/fac_tech_b.webp`,description:"研修施設と高性能林業機械の保管庫を備える施設前面の広大な実習用グラウンドと合わせて森林技術者のための短期技術研修部門のエリア、テクニカルゾーンを構成します。",url:"https://www.forest.ac.jp/facilities/technicalzone/"},fac_information:{image:`${ci}/fac_information.webp`,description:"一般県民向け生涯学習講座のための施設。広いスペースを設け各種講座をサポートします。",url:"https://www.forest.ac.jp/facilities/forest/"},ziriki_01:{image:`${ci}/ziriki_01.webp`,description:"アカデミー演習林内の松跡平に造られた八畳の休憩小屋。構造材は全て四寸角(120mm角)で構成され、雨水を集めるように傘をひっくり返したような逆方形の屋根が特徴となっている。内部には可動式のベンチと囲炉裏が設置されている。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_02:{image:`${ci}/ziriki_02.webp`,description:"「みさきのちゃや」の主用途は、地域の子供たちを対象にした“環境教育プログラムキャンプ”における屋外厨房である。日本の多くの屋外厨房はカレーライスやバーべキュ－にしか対応していないが、ここでは家庭で行われる炊事に関して全て対応できるようになっている。未来を担う子供たちがこの「みさきのちゃや」で何かを感じてくれるとうれしく思う。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_03:{image:`${ci}/ziriki_03.webp`,description:"緑豊かな国、日本。国土の２／３は森林が占める。しかし外材普及率は８０％を越え、国内の林業は不振に喘いでいる。そんな中で国産材の活用が叫ばれ、その解決の一端を担うと考えられるのが、今回のテーマ、木材の乾燥である。活木処に求められたもの、それは自然のエネルギーを利用した木材の乾燥であった。利用者の要望にかないつつ、木材にとっても周辺環境にとっても、理想的な乾燥方法をここで模索し、実践することを目的とする。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_04:{image:`${ci}/ziriki_04.webp`,description:"環境教育研究会の提供するカリキュラムには、グループカウンセリングやワークショップ論という科目がある。少人数で集い、寝食を共にし、何かをつくり上げていく集中講義である。このような活動にふさわしい場の提供の他、夏の子どものキャンプ、普段からの学生の利用も可能な多目的空間としてのあり方も求められた。10人程度が生火を見ながら円く座れるという要望を満たすと同時に多目的に利用が可能な空間をつくること、また、機械に頼った生活を見直し、本来の体と心の調節機能を回復させるため、自然環境から多くのものを取り込むことを考えた。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_05:{image:`${ci}/ziriki_05.webp`,description:"自転車通学できる距離に住んでいても便利さにひかれ自動車通学する学生が少なくない。また、美濃市周辺及び校内も自転車利用者にとって快適な環境であるとは言い難い。そこで、省エネかつ健康的な自転車利用生活を楽しめる、そんな魅力的な空間、「アカデミー駐輪場」を建設しようということになった。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_06:{image:`${ci}/ziriki_06.webp`,description:"学内では実習が多く、汗をかいたり汚れたりすることが頻繁にある。実習の後、汗や汚れを簡単に洗い流し、その後の講義やゼミにリフレッシュした気持ちで参加したいという希望と、アカデミーで実施される地域のこどもたち対象のキャンプなどでコテージに完備された浴室を利用するだけでなく、森の中の「シャワー室」を利用することで環境教育をさらに有意義なものにしたいという目的から森のシャワー室を建設することになった。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_07:{image:`${ci}/ziriki_07.webp`,description:"学内に配されたネイチャートレイル（自然の小道）上にはフォリーが点在しているが、活用されずに放置された最後の「黒の迷路」を自力建設により浮き彫りにしたい。　 そこで、「黒の迷路」の活用、この建物が建つレベルから一段上がったフィールドをつなぐ階段の機能、そしてフィールドで行われる炭焼き体験時等の休憩場所としての機能を併せ持った、「連結施設」を建設する。　あわせて、この連結施設も含まれることになるネイチャートレイルを学内に形成し、環境教育に活用することを目的とする。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_08:{image:`${ci}/ziriki_08.webp`,description:"アカデミー校内を流れる小川の上に、学生会室を建設した。 アカデミー校舎のモチーフの格子を入れることで、構造性能を担保しながら、内部と外部を緩やかにつなぎ、木漏れ日などが室内に入り込む。夜は、格子から光が漏れ活動が灯る。 鉄筋コンクリート造（RC造）の基礎から鉄骨（S造）の片持ち張りを跳ね出し、木造の小屋を上部つくるという各構造を活かした混構造の建物となった。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_09:{image:`${ci}/ziriki_09.webp`,description:"半屋外の活動の場として、コナラの木々の間に建設した。詰めれば20人程度が入ることができる。テクニカルセンターとコテージの中間に位置し、ここで行われる活動は行き来する人々の目に留まる。自然観察の拠点に、ある時は森のようちえんの活動が行われ、雨の際は避難場所として活用される。 ３段に作られた屋根が空間にメリハリを、台形の床が方向性を与えて、自然に視線の方向が決まる。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_10:{image:`${ci}/ziriki_10.webp`,description:"2002年度の「みさきのちゃや」のデッキは風雨にさらされて劣化したため、外部デッキの改修に加えたバイオマストイレとして建設した。 デッキの劣化の原因を解体しながら研究し、その対応策として、いくつかの工夫を凝らして階段状にデッキを再構築した。 バイオマストイレは、おが粉と糞尿を混ぜることで、たい肥化を行う。 きちんと発酵させれば匂いも少なく、清潔感が保たれる。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_11:{image:`${ci}/ziriki_11.webp`,description:"校内の複雑な建物の動線を整理すべく、校内の中心にシンボリックな建物を計画した。半円形の持ち上がったデッキのある特徴的な建物で、目印となる。 デッキに上がると、樹冠の高さまで視線が上がり、自然観察の場となったり、見晴らしの良い景色を見ながら昼食をとる場にもなる。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_12:{image:`${ci}/ziriki_12.webp`,description:"アカデミーの入り口にそびえるアカデミーのサイン計画を兼ねた建物である。 内部は複雑に組まれたトラス材があたかも枝のように張り巡らされそこを通る光が木漏れ日のように映える。 来校者の一番最初に目に留まる建物である。 塔の下をくぐれば、散策路とつながるゲートの役割もはたす。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_13:{image:`${ci}/ziriki_13.webp`,description:"アカデミーセンターとマルチメディア実習等をつなぐ渡り廊下を建設した。 学生が行き来する中心的な位置関係から、茶の間のようにくつろいで交流がはかれるように、ベンチは、お盆なども設置し、季節の良い時には学生が語らう姿が見れる。 壁のない構造ながら、安全性を確保すべく、木質ラーメン構法と、樹状に跳ね出した方杖によって開放的な建物となった。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_14:{image:`${ci}/ziriki_14.webp`,description:"森林文化を象徴する「森のあかり」をコンセプトとした高さ10Ｍの木造灯台である。 日が暮れると上部にあかりが灯る。 ”清流の国ぎふ”には、舟運の拠点として川に灯台がつくられてきた歴史がある。 長良川河川敷に現存する「川湊灯台」（県指定史跡）をモチーフに、私たちは森林を舞台に灯台を建設した。 アカデミーのランドマークとして、演習林”山の神”が地上に降りてくる宿り木となるよう、 建物中央に高さ８Ｍの桧の「心柱」を据え付けている。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_15:{image:`${ci}/ziriki_15.webp`,description:"現代の杣人のための小屋 演習林を利用する人、森が好きな人、そういった現代の杣人にとっての”hut(小屋)”であり、日差や雨から守ってくれる”hat(ひさしのある帽子)”のような建物。 山側から降りてくる人を受け止めるような形状と庇を持ち、周囲の自然とは格子を用いて緩やかに区切る。 土地にもともとあったもの（岩、木材、樹木）も利用し建物とその周りの環境をつなげることに生かしていった。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_16:{image:`${ci}/ziriki_16.webp`,description:"自然体験活動の拠点となる炊事場。 森のようちえんやプレーパークなどの子供たちも含め、アカデミー学生も活用し、オアシスとなるような水場。 丸太も用いた樹状トラス構造を構造解析で説き、複雑ながらも力強く利用者を包み込む自然な造形となっている。屋根は２枚の葉をモチーフに、雨水を集める仕掛けを施している。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_17:{image:`${ci}/ziriki_17.webp`,description:"狩猟により得られた獣肉の解体施設 林業の実習棟で捕獲されたイノシシ、シカなどを解体し、精肉として処理する施設。解体の一連の流れを学べるように、通常の解体施設とは異なり開放的なつくりとなっている。 二本ある丸太の搬入された獣を吊るし、泥やダニ等を洗い流し、専用の架台を用いて建物内部に移動する。内部では、電動ウインチなども活用しながら効率的に切り分け、最終的に精肉まで処理する流れを作っている。 下見板張りで経年変化を楽しめる外観と、衛生のため洗い流しやすい室内仕上げとなっている。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_18:{image:`${ci}/ziriki_18.webp`,description:"2006年竣工の自力建設のシャワー室「桂の湯殿」の改修と、休憩室を兼ね備えた複合施設。 バイオマスボイラーを太陽熱給湯に置き換え、ボイラースペースに和室の休憩室を増床、劣化箇所の診断と修繕により機能回復を計った。 また、図書コーナーを併設した休憩室を隣接して建設した。こちらには焼杉をすのこ状に張った外壁が周囲の空間を引き締め、内部はリクライニングチェアを配した個室２ブースが設けられ、空調も含め快適に利用できる。",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_19:{image:`${ci}/ziriki_19.webp`,description:"森と人がつながる場所 テクニカルグラウンドは山と街との中間地点にあり、Cobikiはそこに建つ。 簡易製材機ホリゾンが設置され、丸太からの製材が容易にできる。 丸太の搬入がしやすいように広い開口になっており、複数人での作業も安全に行える。壁面には桟積みに使用する桟木や、帯鋸等が収納できる。ホリゾンのレールを跨ぐことを防止し、また仮の乾燥場としても使えるよう、レールカバーを製作した。 材料にはスギとヒノキを使用し、また仕上げを一部帯鋸仕上げとしたことで、樹種による経年変化の違い、仕上げによる経年変化の違いを見ることができる。",url:"https://www.forest.ac.jp/facilities/self/midori-archi/"},ziriki_20:{image:`${ci}/ziriki_20.webp`,description:"「みどりのアトリエ」は、2008年度の自力建設「ほたるの川床（かわゆか）」を増改築するというものです。学生の複数の方から利活用の要望が出ていたものです。",url:"https://www.forest.ac.jp/facilities/self/midori-archi/"},ziriki_21:{image:`${ci}/ziriki_21.webp`,description:"樹状架構が人と人をつなげる「みち」となる。ウッド・ラボ棟前面に広がるウッドデッキは、学生たちがグリーンウッドワーク（生木を使った木工製作）を行う場。そして、休憩や昼食を取る交流の場でもある。この空間に、庇・屋根付き通路から構成する「木立（こだち）のこみち」を建設した。アカデミーの雰囲気に適した形態として「樹状」で庇・通路のデザインを統一し、柱梁・方杖を細い部材としたことで、既存の校舎や植栽空間にも馴染む軽やかな架構となり、快適な軒下通路・休憩の場・木工製作の場が生まれた。",url:"https://www.forest.ac.jp/facilities/self/jiriki-kodachi/"},ziriki_22:{image:`${ci}/ziriki_22.webp`,description:`今回の自力建設は、2007年度の自力建設「地空楼」を増改築し、木造建築倉庫を建築することでした。
            丁稚という言葉は、大工などの職人仕事で、門下に弟子入りした新入りなどのことをいいます。
            それは、立場は違えど新しく建築の世界に夢を持ち勉学や技術習得に励む私たちに近しいのではないかという思いと、コンセプトの秘密基地にかけて「丁稚基地」と名付けました。
            またここを利用するすべての人が、こだわりと愛着を持って、道具と倉庫本体を扱えるように、その拠点となれるという思いが込められています。`,url:"https://www.forest.ac.jp/facilities/self/jiriki-decchi/"},ziriki_23:{image:`${ci}/ziriki_23.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/jiriki-hotori/"},ziriki_24:{image:`${ci}/ziriki_24.webp`,description:"小規模木材乾燥庫の計画",url:"https://www.forest.ac.jp/facilities/self/shiori-jiriki2024/"},sinrinken:{image:`${ci}/no_image.webp`,description:"森林・林業に関する公設研究機関です。",url:"https://www.forest.rd.pref.gifu.lg.jp/"},gate_ensyurin:{image:`${ci}/gate_ensyurin.webp`,description:"",url:null},aozyutaki:{image:`${ci}/aozyutaki.webp`,description:"",url:null},azumaya_1:{image:`${ci}/azumaya_1.webp`,description:"",url:null},azumaya_kezikabora:{image:`${ci}/azumaya_kezikabora.webp`,description:"",url:null},gate_kokuyurin:{image:`${ci}/gate_kokuyurin.webp`,description:"",url:null},hebiotaki:{image:`${ci}/hebiotaki.webp`,description:"",url:null},heihuuiwa:{image:`${ci}/heihuuiwa.webp`,description:"",url:null},hirumesiiwa:{image:`${ci}/hirumesiiwa.webp`,description:"",url:null},kezikaboraike:{image:`${ci}/kezikaboraike.webp`,description:"",url:null},miharasiiwa:{image:`${ci}/miharasiiwa.webp`,description:"",url:null},mokudou:{image:`${ci}/mokudou.webp`,description:"",url:null},morinoiriguti:{image:`${ci}/morinoiriguti.webp`,description:"",url:null},nagamenoiwa:{image:`${ci}/nagamenoiwa.webp`,description:"",url:null},oosugi:{image:`${ci}/oosugi.webp`,description:"",url:null},sumiyakigoya:{image:`${ci}/sumiyakigoya.webp`,description:"",url:null},toilet:{image:`${ci}/toilet.webp`,description:"",url:null},umanoseiwa:{image:`${ci}/umanoseiwa.webp`,description:"",url:null},yamanokami:{image:`${ci}/yamanokami.webp`,description:"演習林内には、「山の神」と呼ばれる神聖な場所が存在します。この「山の神」は、巨大な磐座（いわくら）の直下に祀られており、周囲には樹齢100年を超えるスギやヒノキの人工林が広がっています。毎年4月、アカデミーでは「入山式」と称する伝統行事が行われます。この式典では、学長をはじめ教職員や学生、隣接する森林研究所の職員が参加し、「山の神」に対して実習や研修の安全を祈願します。式典では、祝詞の奏上や御玉串の奉納が行われ、最後にはお供え物を参加者全員でいただく「直会（なおらい）」が執り行われます。",url:"https://www.forest.ac.jp/academy-archives/jimu0423/"},kozyo_kanritou:{image:null,description:"",url:"https://mori-gakko.net/gifu/"}},TI=[{name:"北海道",bbox:[139.334302,41.35211,148.894833,45.556277]},{name:"青森県",bbox:[139.860725,40.218604,141.68324,41.555998]},{name:"岩手県",bbox:[140.653166,38.747651,142.072461,40.449927]},{name:"宮城県",bbox:[140.274764,37.773252,141.675431,39.002776]},{name:"秋田県",bbox:[139.694597,38.874522,140.995425,40.511122]},{name:"山形県",bbox:[139.539712,37.73383,140.646377,39.208476]},{name:"福島県",bbox:[139.164746,36.791324,141.042336,37.976555]},{name:"茨城県",bbox:[139.687691,35.739138,140.851966,36.945225]},{name:"栃木県",bbox:[139.326731,36.199924,140.291983,37.155039]},{name:"群馬県",bbox:[138.397022,35.985419,139.668249,37.058627]},{name:"埼玉県",bbox:[138.711401,35.753442,139.90032,36.281751]},{name:"千葉県",bbox:[139.739525,34.899595,140.870652,36.104157]},{name:"東京都",bbox:[138.942865,24.224731,153.986895,35.898404]},{name:"神奈川県",bbox:[138.915784,35.128768,139.798226,35.675618]},{name:"新潟県",bbox:[137.635121,36.736544,139.900012,38.553524]},{name:"富山県",bbox:[136.768684,36.274308,137.763276,36.979692]},{name:"石川県",bbox:[136.244148,36.067618,137.360649,37.855068]},{name:"福井県",bbox:[135.449342,35.344187,136.832362,36.295361]},{name:"山梨県",bbox:[138.180108,35.168403,139.13438,35.971564]},{name:"長野県",bbox:[137.325027,35.198461,138.739196,37.030423]},{name:"岐阜県",bbox:[136.276225,35.133729,137.651936,36.465031]},{name:"静岡県",bbox:[137.474177,34.594644,139.176371,35.646621]},{name:"愛知県",bbox:[136.671033,34.578195,137.838064,35.424789]},{name:"三重県",bbox:[135.853192,33.722879,136.987749,35.257953]},{name:"滋賀県",bbox:[135.763805,34.79126,136.454846,35.70372]},{name:"京都府",bbox:[134.853727,34.705754,136.054372,35.779277]},{name:"大阪府",bbox:[135.093449,34.271827,135.746596,35.051282]},{name:"兵庫県",bbox:[134.252809,34.156129,135.468591,35.674667]},{name:"奈良県",bbox:[135.539726,33.858956,136.22982,34.781294]},{name:"和歌山県",bbox:[134.999059,33.433595,136.013461,34.38446]},{name:"鳥取県",bbox:[133.136116,35.057691,134.514725,35.614221]},{name:"島根県",bbox:[131.667965,34.302497,133.385926,37.244272]},{name:"岡山県",bbox:[133.266987,34.2984,134.412698,35.352889]},{name:"広島県",bbox:[132.036485,34.034954,133.470397,35.106602]},{name:"山口県",bbox:[130.775059,33.712909,132.492149,34.798657]},{name:"徳島県",bbox:[133.660905,33.539632,134.820436,34.252034]},{name:"香川県",bbox:[133.446605,34.012302,134.440441,34.564615]},{name:"愛媛県",bbox:[132.017257,32.901919,133.692787,34.299619]},{name:"高知県",bbox:[132.479888,32.702505,134.31367,33.882997]},{name:"福岡県",bbox:[130.032703,33.000004,131.190597,34.249456]},{name:"佐賀県",bbox:[129.740621,32.950517,130.542127,33.618923]},{name:"長崎県",bbox:[128.34462,31.988773,130.380232,34.707891]},{name:"熊本県",bbox:[129.963357,32.094995,131.328424,33.195128]},{name:"大分県",bbox:[130.823676,32.714503,132.085332,33.740236]},{name:"宮崎県",bbox:[130.703426,31.360721,131.882746,32.837348]},{name:"鹿児島県",bbox:[128.395452,27.01874,131.205448,32.307013]},{name:"沖縄県",bbox:[122.933755,24.045713,131.332068,27.885401]},{name:"東北地方",bbox:[139.164746,36.791324,142.072461,41.555998]},{name:"美濃市",bbox:[136.83845019821013,35.5104054980036,136.97907453990035,35.65244055693736]},{name:"森林文化アカデミー",bbox:[136.91278,35.543576,136.92986,35.556704]}],SI=new Map(TI.map(t=>[t.name,t.bbox])),YI=t=>{const e=SI.get(t);return e||(console.warn("getLocationBbox: not found",t),null)},NI=()=>{const t=N7;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},LI={subscribe(t){return NI().page.subscribe(t)}};let Gf=String.fromCharCode,N5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",jf={};function PI(t,e){if(!jf[t]){jf[t]={};for(let a=0;a<t.length;a++)jf[t][t.charAt(a)]=a}return jf[t][e]}function QI(t){return t==null?"":DI(t,6,function(e){return N5.charAt(e)})}function kI(t){return t==null?"":t==""?null:zI((t=t.replace(/ /g,"+")).length,32,function(e){return PI(N5,t.charAt(e))})}function DI(t,e,a){if(t==null)return"";let n,c,f={},u={},s="",x="",B="",I=2,R=3,F=2,M=[],N=0,D=0,V;for(V=0;V<t.length;V+=1)if(s=t.charAt(V),Object.prototype.hasOwnProperty.call(f,s)||(f[s]=R++,u[s]=!0),x=B+s,Object.prototype.hasOwnProperty.call(f,x))B=x;else{if(Object.prototype.hasOwnProperty.call(u,B)){if(256>B.charCodeAt(0)){for(n=0;n<F;n++)N<<=1,D==e-1?(D=0,M.push(a(N)),N=0):D++;for(n=0,c=B.charCodeAt(0);n<8;n++)N=N<<1|1&c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c>>=1}else{for(n=0,c=1;n<F;n++)N=N<<1|c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c=0;for(n=0,c=B.charCodeAt(0);n<16;n++)N=N<<1|1&c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c>>=1}--I==0&&(I=Math.pow(2,F),F++),delete u[B]}else for(n=0,c=f[B];n<F;n++)N=N<<1|1&c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c>>=1;--I==0&&(I=Math.pow(2,F),F++),f[x]=R++,B=String(s)}if(B!==""){if(Object.prototype.hasOwnProperty.call(u,B)){if(256>B.charCodeAt(0)){for(n=0;n<F;n++)N<<=1,D==e-1?(D=0,M.push(a(N)),N=0):D++;for(n=0,c=B.charCodeAt(0);n<8;n++)N=N<<1|1&c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c>>=1}else{for(n=0,c=1;n<F;n++)N=N<<1|c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c=0;for(n=0,c=B.charCodeAt(0);n<16;n++)N=N<<1|1&c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c>>=1}--I==0&&(I=Math.pow(2,F),F++),delete u[B]}else for(n=0,c=f[B];n<F;n++)N=N<<1|1&c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c>>=1;--I==0&&(I=Math.pow(2,F),F++)}for(n=0,c=2;n<F;n++)N=N<<1|1&c,D==e-1?(D=0,M.push(a(N)),N=0):D++,c>>=1;for(;;){if(N<<=1,D==e-1){M.push(a(N));break}D++}return M.join("")}function zI(t,e,a){let n=[],c=4,f=4,u=3,s="",x=[],B,I,R,F,M,N,D,V={val:a(0),position:e,index:1};for(B=0;B<3;B+=1)n[B]=B;for(R=0,M=4,N=1;N!=M;)F=V.val&V.position,V.position>>=1,V.position==0&&(V.position=e,V.val=a(V.index++)),R|=(F>0?1:0)*N,N<<=1;switch(R){case 0:for(R=0,M=256,N=1;N!=M;)F=V.val&V.position,V.position>>=1,V.position==0&&(V.position=e,V.val=a(V.index++)),R|=(F>0?1:0)*N,N<<=1;D=Gf(R);break;case 1:for(R=0,M=65536,N=1;N!=M;)F=V.val&V.position,V.position>>=1,V.position==0&&(V.position=e,V.val=a(V.index++)),R|=(F>0?1:0)*N,N<<=1;D=Gf(R);break;case 2:return""}for(n[3]=D,I=D,x.push(D);;){if(V.index>t)return"";for(R=0,M=Math.pow(2,u),N=1;N!=M;)F=V.val&V.position,V.position>>=1,V.position==0&&(V.position=e,V.val=a(V.index++)),R|=(F>0?1:0)*N,N<<=1;switch(D=R){case 0:for(R=0,M=256,N=1;N!=M;)F=V.val&V.position,V.position>>=1,V.position==0&&(V.position=e,V.val=a(V.index++)),R|=(F>0?1:0)*N,N<<=1;n[f++]=Gf(R),D=f-1,c--;break;case 1:for(R=0,M=65536,N=1;N!=M;)F=V.val&V.position,V.position>>=1,V.position==0&&(V.position=e,V.val=a(V.index++)),R|=(F>0?1:0)*N,N<<=1;n[f++]=Gf(R),D=f-1,c--;break;case 2:return x.join("")}if(c==0&&(c=Math.pow(2,u),u++),n[D])s=n[D];else{if(D!==f)return null;s=I+I.charAt(0)}x.push(s),n[f++]=I+s.charAt(0),c--,I=s,c==0&&(c=Math.pow(2,u),u++)}}let L5;L5=LI;const ZI={keepFocus:!0,noScroll:!0,replaceState:!0},HI={keepFocus:!0,noScroll:!0,replaceState:!1};function OI(t,e,a){var f;const n=Array.from(new Set(Array.from(((f=t==null?void 0:t.keys)==null?void 0:f.call(t))||[]).concat(Object.keys(a??{}))));let c=!1;return[Object.fromEntries(n.map(u=>{if(e[u]!=null)return[u,e[u]];let s=R=>R;const x=a==null?void 0:a[u];typeof x!="boolean"&&typeof(x==null?void 0:x.decode)=="function"&&(s=x.decode);const B=t==null?void 0:t.get(u);let I;return B==null&&(x==null?void 0:x.defaultValue)!=null?(I=x.defaultValue,c=!0):I=s(B),[u,I]})),c]}function XI(t,e,a=(n,c)=>JSON.stringify(n)===JSON.stringify(c)){return typeof t=="object"&&typeof e=="object"&&a(t,e)}function z2({encode:t,decode:e}){function a(n){return{encode:t,decode:e,defaultValue:n}}return a}function VI(t){return{encode:e=>JSON.stringify(e),decode:e=>{if(e===null)return null;try{return JSON.parse(e)}catch{return null}},defaultValue:t}}function GI(t){return{encode:e=>JSON.stringify(e),decode:e=>{if(e===null)return null;try{return JSON.parse(e)}catch{return null}},defaultValue:t}}function jI(t){return{encode:e=>QI(JSON.stringify(e)),decode:e=>{if(!e)return null;try{return JSON.parse(kI(e)??"")}catch{return null}},defaultValue:t}}const Kf={number:z2({encode:t=>t.toString(),decode:t=>t?parseFloat(t):null}),boolean:z2({encode:t=>t+"",decode:t=>t!==null&&t!=="false"}),string:z2({encode:t=>t??"",decode:t=>t}),object:VI,array:GI,lz:jI},Z2=new Set;let ay;const ry=new Map;function Rh(t,{debounceHistory:e=0,pushHistory:a=!0,sort:n=!0,showDefaults:c=!0,equalityFn:f}={}){const u=yn({});let s,x=!0;function B(R,F){x=!1;const M=window.location.hash,N=new URLSearchParams(window.location.search),D=V=>{for(const X of Object.keys(R)){if(R[X]==null){V.delete(X);continue}let ee=ue=>ue.toString();const Ae=t==null?void 0:t[X];typeof Ae!="boolean"&&typeof(Ae==null?void 0:Ae.encode)=="function"&&(ee=Ae.encode);const ce=ee(R[X]);ce==null?V.delete(X):V.set(X,ce)}};Z2.add(D),clearTimeout(ay),ay=setTimeout(async()=>{Z2.forEach(V=>{V(N)}),clearTimeout(ry.get("queryParameters"));{u.set(R);async function V(){n&&N.sort(),await L7(`?${N}${M}`,a?HI:ZI),u.set({})}F||e===0?V():ry.set("queryParameters",setTimeout(V,e))}Z2.clear()})}const{subscribe:I}=t7([L5,u],([R,F],M)=>{var V;const[N,D]=OI((V=R==null?void 0:R.url)==null?void 0:V.searchParams,F,t);if(D&&c&&B(structuredClone(N),x),!XI(s,N,f))return s=structuredClone(N),M(structuredClone(N))});return{set(R){B(R)},subscribe:I,update:R=>{const F=Zo({subscribe:I}),M=R(F);B(M)}}}const KI=t=>{const e=t.slice(1).split("&"),a={};return e.forEach(n=>{a[n.split("=")[0]]=n.split("=")[1]}),a},$I=()=>{const t=Zo(Rh({c:Kf.string(),z:Kf.number(),p:Kf.number(),b:Kf.number()},{pushHistory:!1}));if(t.c===null||t.c===void 0||t.z===null||t.z===void 0||t.p===null||t.p===void 0||t.b===null||t.b===void 0)return A7;const e=t.c.split(",").map(Number),a=Number(t.z),n=Number(t.p),c=Number(t.b);return{center:e,zoom:a,pitch:n,bearing:c}},qI=t=>{const e=Zo(Rh({},{pushHistory:!1})),a=t.center.map(n=>n.toFixed(6));e.c=a,e.z=t.zoom.toFixed(1),e.p=t.pitch.toFixed(0),e.b=t.bearing.toFixed(0),Rh({},{pushHistory:!1}).set(e)},WI=t=>{const e=Zo(Rh({}));e.imageId=t,Rh({},{pushHistory:!1}).set(e)},JI=()=>Zo(Rh({},{pushHistory:!1})).imageId;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Z3=function(t,e){return Z3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(a[c]=n[c])},Z3(t,e)};function Ds(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Z3(t,e);function a(){this.constructor=t}t.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}function as(t,e,a,n){function c(f){return f instanceof a?f:new a(function(u){u(f)})}return new(a||(a=Promise))(function(f,u){function s(I){try{B(n.next(I))}catch(R){u(R)}}function x(I){try{B(n.throw(I))}catch(R){u(R)}}function B(I){I.done?f(I.value):c(I.value).then(s,x)}B((n=n.apply(t,[])).next())})}function Nn(t,e){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},n,c,f,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(B){return function(I){return x([B,I])}}function x(B){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,c&&(f=B[0]&2?c.return:B[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,B[1])).done)return f;switch(c=0,f&&(B=[B[0]&2,f.value]),B[0]){case 0:case 1:f=B;break;case 4:return a.label++,{value:B[1],done:!1};case 5:a.label++,c=B[1],B=[0];continue;case 7:B=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(B[0]===6||B[0]===2)){a=0;continue}if(B[0]===3&&(!f||B[1]>f[0]&&B[1]<f[3])){a.label=B[1];break}if(B[0]===6&&a.label<f[1]){a.label=f[1],f=B;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(B);break}f[2]&&a.ops.pop(),a.trys.pop();continue}B=e.call(t,a)}catch(I){B=[6,I],c=0}finally{n=f=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}}var Ol=function(){function t(e,a,n,c){this.left=e,this.top=a,this.width=n,this.height=c}return t.prototype.add=function(e,a,n,c){return new t(this.left+e,this.top+a,this.width+n,this.height+c)},t.fromClientRect=function(e,a){return new t(a.left+e.windowBounds.left,a.top+e.windowBounds.top,a.width,a.height)},t.fromDOMRectList=function(e,a){var n=Array.from(a).find(function(c){return c.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Jm=function(t,e){return Ol.fromClientRect(t,e.getBoundingClientRect())},Vg=function(t){for(var e=[],a=0,n=t.length;a<n;){var c=t.charCodeAt(a++);if(c>=55296&&c<=56319&&a<n){var f=t.charCodeAt(a++);(f&64512)===56320?e.push(((c&1023)<<10)+(f&1023)+65536):(e.push(c),a--)}else e.push(c)}return e},ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var n=[],c=-1,f="";++c<a;){var u=t[c];u<=65535?n.push(u):(u-=65536,n.push((u>>10)+55296,u%1024+56320)),(c+1===a||n.length>16384)&&(f+=String.fromCharCode.apply(String,n),n.length=0)}return f},ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $f=0;$f<ny.length;$f++)eU[ny.charCodeAt($f)]=$f;var sy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qf=0;qf<sy.length;qf++)Cd[sy.charCodeAt(qf)]=qf;var tU=function(t){var e=t.length*.75,a=t.length,n,c=0,f,u,s,x;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var B=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),I=Array.isArray(B)?B:new Uint8Array(B);for(n=0;n<a;n+=4)f=Cd[t.charCodeAt(n)],u=Cd[t.charCodeAt(n+1)],s=Cd[t.charCodeAt(n+2)],x=Cd[t.charCodeAt(n+3)],I[c++]=f<<2|u>>4,I[c++]=(u&15)<<4|s>>2,I[c++]=(s&3)<<6|x&63;return B},iU=function(t){for(var e=t.length,a=[],n=0;n<e;n+=2)a.push(t[n+1]<<8|t[n]);return a},aU=function(t){for(var e=t.length,a=[],n=0;n<e;n+=4)a.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return a},kl=5,e4=11,H2=2,rU=e4-kl,P5=65536>>kl,nU=1<<kl,O2=nU-1,sU=1024>>kl,oU=P5+sU,AU=oU,lU=32,cU=AU+lU,hU=65536>>e4,uU=1<<rU,dU=uU-1,oy=function(t,e,a){return t.slice?t.slice(e,a):new Uint16Array(Array.prototype.slice.call(t,e,a))},fU=function(t,e,a){return t.slice?t.slice(e,a):new Uint32Array(Array.prototype.slice.call(t,e,a))},gU=function(t,e){var a=tU(t),n=Array.isArray(a)?aU(a):new Uint32Array(a),c=Array.isArray(a)?iU(a):new Uint16Array(a),f=24,u=oy(c,f/2,n[4]/2),s=n[5]===2?oy(c,(f+n[4])/2):fU(n,Math.ceil((f+n[4])/4));return new pU(n[0],n[1],n[2],n[3],u,s)},pU=function(){function t(e,a,n,c,f,u){this.initialValue=e,this.errorValue=a,this.highStart=n,this.highValueIndex=c,this.index=f,this.data=u}return t.prototype.get=function(e){var a;if(e>=0){if(e<55296||e>56319&&e<=65535)return a=this.index[e>>kl],a=(a<<H2)+(e&O2),this.data[a];if(e<=65535)return a=this.index[P5+(e-55296>>kl)],a=(a<<H2)+(e&O2),this.data[a];if(e<this.highStart)return a=cU-hU+(e>>e4),a=this.index[a],a+=e>>kl&dU,a=this.index[a],a=(a<<H2)+(e&O2),this.data[a];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Ay="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wf=0;Wf<Ay.length;Wf++)mU[Ay.charCodeAt(Wf)]=Wf;var _U="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ly=50,bU=1,Q5=2,k5=3,yU=4,vU=5,cy=7,D5=8,hy=9,IA=10,H3=11,uy=12,O3=13,xU=14,Md=15,X3=16,Jf=17,hd=18,wU=19,dy=20,V3=21,ud=22,X2=23,jc=24,Ln=25,Rd=26,Id=27,Kc=28,BU=29,Tl=30,CU=31,e1=32,t1=33,G3=34,j3=35,K3=36,o0=37,$3=38,k1=39,D1=40,V2=41,z5=42,MU=43,RU=[9001,65288],Z5="!",Gi="×",i1="÷",q3=gU(_U),Uo=[Tl,K3],W3=[bU,Q5,k5,vU],H5=[IA,D5],fy=[Id,Rd],IU=W3.concat(H5),gy=[$3,k1,D1,G3,j3],UU=[Md,O3],EU=function(t,e){e===void 0&&(e="strict");var a=[],n=[],c=[];return t.forEach(function(f,u){var s=q3.get(f);if(s>ly?(c.push(!0),s-=ly):c.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(f)!==-1)return n.push(u),a.push(X3);if(s===yU||s===H3){if(u===0)return n.push(u),a.push(Tl);var x=a[u-1];return IU.indexOf(x)===-1?(n.push(n[u-1]),a.push(x)):(n.push(u),a.push(Tl))}if(n.push(u),s===CU)return a.push(e==="strict"?V3:o0);if(s===z5||s===BU)return a.push(Tl);if(s===MU)return f>=131072&&f<=196605||f>=196608&&f<=262141?a.push(o0):a.push(Tl);a.push(s)}),[n,a,c]},G2=function(t,e,a,n){var c=n[a];if(Array.isArray(t)?t.indexOf(c)!==-1:t===c)for(var f=a;f<=n.length;){f++;var u=n[f];if(u===e)return!0;if(u!==IA)break}if(c===IA)for(var f=a;f>0;){f--;var s=n[f];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var x=a;x<=n.length;){x++;var u=n[x];if(u===e)return!0;if(u!==IA)break}if(s!==IA)break}return!1},py=function(t,e){for(var a=t;a>=0;){var n=e[a];if(n===IA)a--;else return n}return 0},FU=function(t,e,a,n,c){if(a[n]===0)return Gi;var f=n-1;if(Array.isArray(c)&&c[f]===!0)return Gi;var u=f-1,s=f+1,x=e[f],B=u>=0?e[u]:0,I=e[s];if(x===Q5&&I===k5)return Gi;if(W3.indexOf(x)!==-1)return Z5;if(W3.indexOf(I)!==-1||H5.indexOf(I)!==-1)return Gi;if(py(f,e)===D5)return i1;if(q3.get(t[f])===H3||(x===e1||x===t1)&&q3.get(t[s])===H3||x===cy||I===cy||x===hy||[IA,O3,Md].indexOf(x)===-1&&I===hy||[Jf,hd,wU,jc,Kc].indexOf(I)!==-1||py(f,e)===ud||G2(X2,ud,f,e)||G2([Jf,hd],V3,f,e)||G2(uy,uy,f,e))return Gi;if(x===IA)return i1;if(x===X2||I===X2)return Gi;if(I===X3||x===X3)return i1;if([O3,Md,V3].indexOf(I)!==-1||x===xU||B===K3&&UU.indexOf(x)!==-1||x===Kc&&I===K3||I===dy||Uo.indexOf(I)!==-1&&x===Ln||Uo.indexOf(x)!==-1&&I===Ln||x===Id&&[o0,e1,t1].indexOf(I)!==-1||[o0,e1,t1].indexOf(x)!==-1&&I===Rd||Uo.indexOf(x)!==-1&&fy.indexOf(I)!==-1||fy.indexOf(x)!==-1&&Uo.indexOf(I)!==-1||[Id,Rd].indexOf(x)!==-1&&(I===Ln||[ud,Md].indexOf(I)!==-1&&e[s+1]===Ln)||[ud,Md].indexOf(x)!==-1&&I===Ln||x===Ln&&[Ln,Kc,jc].indexOf(I)!==-1)return Gi;if([Ln,Kc,jc,Jf,hd].indexOf(I)!==-1)for(var R=f;R>=0;){var F=e[R];if(F===Ln)return Gi;if([Kc,jc].indexOf(F)!==-1)R--;else break}if([Id,Rd].indexOf(I)!==-1)for(var R=[Jf,hd].indexOf(x)!==-1?u:f;R>=0;){var F=e[R];if(F===Ln)return Gi;if([Kc,jc].indexOf(F)!==-1)R--;else break}if($3===x&&[$3,k1,G3,j3].indexOf(I)!==-1||[k1,G3].indexOf(x)!==-1&&[k1,D1].indexOf(I)!==-1||[D1,j3].indexOf(x)!==-1&&I===D1||gy.indexOf(x)!==-1&&[dy,Rd].indexOf(I)!==-1||gy.indexOf(I)!==-1&&x===Id||Uo.indexOf(x)!==-1&&Uo.indexOf(I)!==-1||x===jc&&Uo.indexOf(I)!==-1||Uo.concat(Ln).indexOf(x)!==-1&&I===ud&&RU.indexOf(t[s])===-1||Uo.concat(Ln).indexOf(I)!==-1&&x===hd)return Gi;if(x===V2&&I===V2){for(var M=a[f],N=1;M>0&&(M--,e[M]===V2);)N++;if(N%2!==0)return Gi}return x===e1&&I===t1?Gi:i1},TU=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var a=EU(t,e.lineBreak),n=a[0],c=a[1],f=a[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(c=c.map(function(s){return[Ln,Tl,z5].indexOf(s)!==-1?o0:s}));var u=e.wordBreak==="keep-all"?f.map(function(s,x){return s&&t[x]>=19968&&t[x]<=40959}):void 0;return[n,c,u]},SU=function(){function t(e,a,n,c){this.codePoints=e,this.required=a===Z5,this.start=n,this.end=c}return t.prototype.slice=function(){return ar.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),YU=function(t,e){var a=Vg(t),n=TU(a,e),c=n[0],f=n[1],u=n[2],s=a.length,x=0,B=0;return{next:function(){if(B>=s)return{done:!0,value:null};for(var I=Gi;B<s&&(I=FU(a,f,c,++B,u))===Gi;);if(I!==Gi||B===s){var R=new SU(a,I,x,B);return x=B,{value:R,done:!1}}return{done:!0,value:null}}}},NU=1,LU=2,y0=4,my=8,dg=10,_y=47,Hd=92,PU=9,QU=32,a1=34,dd=61,kU=35,DU=36,zU=37,r1=39,n1=40,fd=41,ZU=95,vn=45,HU=33,OU=60,XU=62,VU=64,GU=91,jU=93,KU=61,$U=123,s1=63,qU=125,by=124,WU=126,JU=128,yy=65533,j2=42,Ll=43,eE=44,tE=58,iE=59,A0=46,aE=0,rE=8,nE=11,sE=14,oE=31,AE=127,Ws=-1,O5=48,X5=97,V5=101,lE=102,cE=117,hE=122,G5=65,j5=69,K5=70,uE=85,dE=90,qr=function(t){return t>=O5&&t<=57},fE=function(t){return t>=55296&&t<=57343},$c=function(t){return qr(t)||t>=G5&&t<=K5||t>=X5&&t<=lE},gE=function(t){return t>=X5&&t<=hE},pE=function(t){return t>=G5&&t<=dE},mE=function(t){return gE(t)||pE(t)},_E=function(t){return t>=JU},o1=function(t){return t===dg||t===PU||t===QU},fg=function(t){return mE(t)||_E(t)||t===ZU},vy=function(t){return fg(t)||qr(t)||t===vn},bE=function(t){return t>=aE&&t<=rE||t===nE||t>=sE&&t<=oE||t===AE},BA=function(t,e){return t!==Hd?!1:e!==dg},A1=function(t,e,a){return t===vn?fg(e)||BA(e,a):fg(t)?!0:!!(t===Hd&&BA(t,e))},K2=function(t,e,a){return t===Ll||t===vn?qr(e)?!0:e===A0&&qr(a):qr(t===A0?e:t)},yE=function(t){var e=0,a=1;(t[e]===Ll||t[e]===vn)&&(t[e]===vn&&(a=-1),e++);for(var n=[];qr(t[e]);)n.push(t[e++]);var c=n.length?parseInt(ar.apply(void 0,n),10):0;t[e]===A0&&e++;for(var f=[];qr(t[e]);)f.push(t[e++]);var u=f.length,s=u?parseInt(ar.apply(void 0,f),10):0;(t[e]===j5||t[e]===V5)&&e++;var x=1;(t[e]===Ll||t[e]===vn)&&(t[e]===vn&&(x=-1),e++);for(var B=[];qr(t[e]);)B.push(t[e++]);var I=B.length?parseInt(ar.apply(void 0,B),10):0;return a*(c+s*Math.pow(10,-u))*Math.pow(10,x*I)},vE={type:2},xE={type:3},wE={type:4},BE={type:13},CE={type:8},ME={type:21},RE={type:9},IE={type:10},UE={type:11},EE={type:12},FE={type:14},l1={type:23},TE={type:1},SE={type:25},YE={type:24},NE={type:26},LE={type:27},PE={type:28},QE={type:29},kE={type:31},J3={type:32},$5=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Vg(e))},t.prototype.read=function(){for(var e=[],a=this.consumeToken();a!==J3;)e.push(a),a=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case a1:return this.consumeStringToken(a1);case kU:var a=this.peekCodePoint(0),n=this.peekCodePoint(1),c=this.peekCodePoint(2);if(vy(a)||BA(n,c)){var f=A1(a,n,c)?LU:NU,u=this.consumeName();return{type:5,value:u,flags:f}}break;case DU:if(this.peekCodePoint(0)===dd)return this.consumeCodePoint(),BE;break;case r1:return this.consumeStringToken(r1);case n1:return vE;case fd:return xE;case j2:if(this.peekCodePoint(0)===dd)return this.consumeCodePoint(),FE;break;case Ll:if(K2(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case eE:return wE;case vn:var s=e,x=this.peekCodePoint(0),B=this.peekCodePoint(1);if(K2(s,x,B))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(A1(s,x,B))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(x===vn&&B===XU)return this.consumeCodePoint(),this.consumeCodePoint(),YE;break;case A0:if(K2(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case _y:if(this.peekCodePoint(0)===j2)for(this.consumeCodePoint();;){var I=this.consumeCodePoint();if(I===j2&&(I=this.consumeCodePoint(),I===_y))return this.consumeToken();if(I===Ws)return this.consumeToken()}break;case tE:return NE;case iE:return LE;case OU:if(this.peekCodePoint(0)===HU&&this.peekCodePoint(1)===vn&&this.peekCodePoint(2)===vn)return this.consumeCodePoint(),this.consumeCodePoint(),SE;break;case VU:var R=this.peekCodePoint(0),F=this.peekCodePoint(1),M=this.peekCodePoint(2);if(A1(R,F,M)){var u=this.consumeName();return{type:7,value:u}}break;case GU:return PE;case Hd:if(BA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case jU:return QE;case KU:if(this.peekCodePoint(0)===dd)return this.consumeCodePoint(),CE;break;case $U:return UE;case qU:return EE;case cE:case uE:var N=this.peekCodePoint(0),D=this.peekCodePoint(1);return N===Ll&&($c(D)||D===s1)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case by:if(this.peekCodePoint(0)===dd)return this.consumeCodePoint(),RE;if(this.peekCodePoint(0)===by)return this.consumeCodePoint(),ME;break;case WU:if(this.peekCodePoint(0)===dd)return this.consumeCodePoint(),IE;break;case Ws:return J3}return o1(e)?(this.consumeWhiteSpace(),kE):qr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):fg(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ar(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],a=this.consumeCodePoint();$c(a)&&e.length<6;)e.push(a),a=this.consumeCodePoint();for(var n=!1;a===s1&&e.length<6;)e.push(a),a=this.consumeCodePoint(),n=!0;if(n){var c=parseInt(ar.apply(void 0,e.map(function(x){return x===s1?O5:x})),16),f=parseInt(ar.apply(void 0,e.map(function(x){return x===s1?K5:x})),16);return{type:30,start:c,end:f}}var u=parseInt(ar.apply(void 0,e),16);if(this.peekCodePoint(0)===vn&&$c(this.peekCodePoint(1))){this.consumeCodePoint(),a=this.consumeCodePoint();for(var s=[];$c(a)&&s.length<6;)s.push(a),a=this.consumeCodePoint();var f=parseInt(ar.apply(void 0,s),16);return{type:30,start:u,end:f}}else return{type:30,start:u,end:u}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===n1?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===n1?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ws)return{type:22,value:""};var a=this.peekCodePoint(0);if(a===r1||a===a1){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ws||this.peekCodePoint(0)===fd)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),l1)}for(;;){var c=this.consumeCodePoint();if(c===Ws||c===fd)return{type:22,value:ar.apply(void 0,e)};if(o1(c))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ws||this.peekCodePoint(0)===fd?(this.consumeCodePoint(),{type:22,value:ar.apply(void 0,e)}):(this.consumeBadUrlRemnants(),l1);if(c===a1||c===r1||c===n1||bE(c))return this.consumeBadUrlRemnants(),l1;if(c===Hd)if(BA(c,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),l1;else e.push(c)}},t.prototype.consumeWhiteSpace=function(){for(;o1(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===fd||e===Ws)return;BA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var a=5e4,n="";e>0;){var c=Math.min(a,e);n+=ar.apply(void 0,this._value.splice(0,c)),e-=c}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var a="",n=0;do{var c=this._value[n];if(c===Ws||c===void 0||c===e)return a+=this.consumeStringSlice(n),{type:0,value:a};if(c===dg)return this._value.splice(0,n),TE;if(c===Hd){var f=this._value[n+1];f!==Ws&&f!==void 0&&(f===dg?(a+=this.consumeStringSlice(n),n=-1,this._value.shift()):BA(c,f)&&(a+=this.consumeStringSlice(n),a+=ar(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],a=y0,n=this.peekCodePoint(0);for((n===Ll||n===vn)&&e.push(this.consumeCodePoint());qr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var c=this.peekCodePoint(1);if(n===A0&&qr(c))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),a=my;qr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),c=this.peekCodePoint(1);var f=this.peekCodePoint(2);if((n===j5||n===V5)&&((c===Ll||c===vn)&&qr(f)||qr(c)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),a=my;qr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[yE(e),a]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),a=e[0],n=e[1],c=this.peekCodePoint(0),f=this.peekCodePoint(1),u=this.peekCodePoint(2);if(A1(c,f,u)){var s=this.consumeName();return{type:15,number:a,flags:n,unit:s}}return c===zU?(this.consumeCodePoint(),{type:16,number:a,flags:n}):{type:17,number:a,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if($c(e)){for(var a=ar(e);$c(this.peekCodePoint(0))&&a.length<6;)a+=ar(this.consumeCodePoint());o1(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(a,16);return n===0||fE(n)||n>1114111?yy:n}return e===Ws?yy:e},t.prototype.consumeName=function(){for(var e="";;){var a=this.consumeCodePoint();if(vy(a))e+=ar(a);else if(BA(a,this.peekCodePoint(0)))e+=ar(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(a),e}},t}(),q5=function(){function t(e){this._tokens=e}return t.create=function(e){var a=new $5;return a.write(e),new t(a.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var a=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return a;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var a=this.consumeComponentValue();if(a.type===32)return e;e.push(a),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var a={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||DE(n,e))return a;this.reconsumeToken(n),a.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var a={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return a;this.reconsumeToken(n),a.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?J3:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),v0=function(t){return t.type===15},Gg=function(t){return t.type===17},Ka=function(t){return t.type===20},em=function(t,e){return Ka(t)&&t.value===e},jg=function(t){return t.type!==31&&t.type!==4},lo=function(t){var e=[],a=[];return t.forEach(function(n){if(n.type===4){if(a.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(a),a=[];return}n.type!==31&&a.push(n)}),a.length&&e.push(a),e},DE=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},PA=function(t){return t.type===17||t.type===15},gr=function(t){return t.type===16||PA(t)},W5=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Or={type:17,number:0,flags:y0},t4={type:16,number:50,flags:y0},UA={type:16,number:100,flags:y0},Ud=function(t,e,a){var n=t[0],c=t[1];return[Ua(n,e),Ua(typeof c<"u"?c:n,a)]},Ua=function(t,e){if(t.type===16)return t.number/100*e;if(v0(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},J5="deg",e8="grad",t8="rad",i8="turn",Kg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case J5:return Math.PI*e.number/180;case e8:return Math.PI/200*e.number;case t8:return e.number;case i8:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},a8=function(t){return t.type===15&&(t.unit===J5||t.unit===e8||t.unit===t8||t.unit===i8)},r8=function(t){var e=t.filter(Ka).map(function(a){return a.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Or,Or];case"to top":case"bottom":return os(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Or,UA];case"to right":case"left":return os(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[UA,UA];case"to bottom":case"top":return os(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[UA,Or];case"to left":case"right":return os(270)}return 0},os=function(t){return Math.PI*t/180},YA={name:"color",parse:function(t,e){if(e.type===18){var a=zE[e.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return a(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),c=e.value.substring(1,2),f=e.value.substring(2,3);return EA(parseInt(n+n,16),parseInt(c+c,16),parseInt(f+f,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),c=e.value.substring(1,2),f=e.value.substring(2,3),u=e.value.substring(3,4);return EA(parseInt(n+n,16),parseInt(c+c,16),parseInt(f+f,16),parseInt(u+u,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),c=e.value.substring(2,4),f=e.value.substring(4,6);return EA(parseInt(n,16),parseInt(c,16),parseInt(f,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),c=e.value.substring(2,4),f=e.value.substring(4,6),u=e.value.substring(6,8);return EA(parseInt(n,16),parseInt(c,16),parseInt(f,16),parseInt(u,16)/255)}}if(e.type===20){var s=l0[e.value.toUpperCase()];if(typeof s<"u")return s}return l0.TRANSPARENT}},fh=function(t){return(255&t)===0},Fr=function(t){var e=255&t,a=255&t>>8,n=255&t>>16,c=255&t>>24;return e<255?"rgba("+c+","+n+","+a+","+e/255+")":"rgb("+c+","+n+","+a+")"},EA=function(t,e,a,n){return(t<<24|e<<16|a<<8|Math.round(n*255)<<0)>>>0},xy=function(t,e){if(t.type===17)return t.number;if(t.type===16){var a=e===3?1:255;return e===3?t.number/100*a:Math.round(t.number/100*a)}return 0},wy=function(t,e){var a=e.filter(jg);if(a.length===3){var n=a.map(xy),c=n[0],f=n[1],u=n[2];return EA(c,f,u,1)}if(a.length===4){var s=a.map(xy),c=s[0],f=s[1],u=s[2],x=s[3];return EA(c,f,u,x)}return 0};function $2(t,e,a){return a<0&&(a+=1),a>=1&&(a-=1),a<1/6?(e-t)*a*6+t:a<1/2?e:a<2/3?(e-t)*6*(2/3-a)+t:t}var By=function(t,e){var a=e.filter(jg),n=a[0],c=a[1],f=a[2],u=a[3],s=(n.type===17?os(n.number):Kg.parse(t,n))/(Math.PI*2),x=gr(c)?c.number/100:0,B=gr(f)?f.number/100:0,I=typeof u<"u"&&gr(u)?Ua(u,1):1;if(x===0)return EA(B*255,B*255,B*255,1);var R=B<=.5?B*(x+1):B+x-B*x,F=B*2-R,M=$2(F,R,s+1/3),N=$2(F,R,s),D=$2(F,R,s-1/3);return EA(M*255,N*255,D*255,I)},zE={hsl:By,hsla:By,rgb:wy,rgba:wy},Cy=function(t,e){return YA.parse(t,q5.create(e).parseComponentValue())},l0={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ZE={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(a){if(Ka(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},HE={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$g=function(t,e){var a=YA.parse(t,e[0]),n=e[1];return n&&gr(n)?{color:a,stop:n}:{color:a,stop:null}},My=function(t,e){var a=t[0],n=t[t.length-1];a.stop===null&&(a.stop=Or),n.stop===null&&(n.stop=UA);for(var c=[],f=0,u=0;u<t.length;u++){var s=t[u].stop;if(s!==null){var x=Ua(s,e);x>f?c.push(x):c.push(f),f=x}else c.push(null)}for(var B=null,u=0;u<c.length;u++){var I=c[u];if(I===null)B===null&&(B=u);else if(B!==null){for(var R=u-B,F=c[B-1],M=(I-F)/(R+1),N=1;N<=R;N++)c[B+N-1]=M*N;B=null}}return t.map(function(D,V){var X=D.color;return{color:X,stop:Math.max(Math.min(1,c[V]/e),0)}})},OE=function(t,e,a){var n=e/2,c=a/2,f=Ua(t[0],e)-n,u=c-Ua(t[1],a);return(Math.atan2(u,f)+Math.PI*2)%(Math.PI*2)},XE=function(t,e,a){var n=typeof t=="number"?t:OE(t,e,a),c=Math.abs(e*Math.sin(n))+Math.abs(a*Math.cos(n)),f=e/2,u=a/2,s=c/2,x=Math.sin(n-Math.PI/2)*s,B=Math.cos(n-Math.PI/2)*s;return[c,f-B,f+B,u-x,u+x]},Is=function(t,e){return Math.sqrt(t*t+e*e)},Ry=function(t,e,a,n,c){var f=[[0,0],[0,e],[t,0],[t,e]];return f.reduce(function(u,s){var x=s[0],B=s[1],I=Is(a-x,n-B);return(c?I<u.optimumDistance:I>u.optimumDistance)?{optimumCorner:s,optimumDistance:I}:u},{optimumDistance:c?1/0:-1/0,optimumCorner:null}).optimumCorner},VE=function(t,e,a,n,c){var f=0,u=0;switch(t.size){case 0:t.shape===0?f=u=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(a),Math.abs(a-c)):t.shape===1&&(f=Math.min(Math.abs(e),Math.abs(e-n)),u=Math.min(Math.abs(a),Math.abs(a-c)));break;case 2:if(t.shape===0)f=u=Math.min(Is(e,a),Is(e,a-c),Is(e-n,a),Is(e-n,a-c));else if(t.shape===1){var s=Math.min(Math.abs(a),Math.abs(a-c))/Math.min(Math.abs(e),Math.abs(e-n)),x=Ry(n,c,e,a,!0),B=x[0],I=x[1];f=Is(B-e,(I-a)/s),u=s*f}break;case 1:t.shape===0?f=u=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(a),Math.abs(a-c)):t.shape===1&&(f=Math.max(Math.abs(e),Math.abs(e-n)),u=Math.max(Math.abs(a),Math.abs(a-c)));break;case 3:if(t.shape===0)f=u=Math.max(Is(e,a),Is(e,a-c),Is(e-n,a),Is(e-n,a-c));else if(t.shape===1){var s=Math.max(Math.abs(a),Math.abs(a-c))/Math.max(Math.abs(e),Math.abs(e-n)),R=Ry(n,c,e,a,!1),B=R[0],I=R[1];f=Is(B-e,(I-a)/s),u=s*f}break}return Array.isArray(t.size)&&(f=Ua(t.size[0],n),u=t.size.length===2?Ua(t.size[1],c):f),[f,u]},GE=function(t,e){var a=os(180),n=[];return lo(e).forEach(function(c,f){if(f===0){var u=c[0];if(u.type===20&&u.value==="to"){a=r8(c);return}else if(a8(u)){a=Kg.parse(t,u);return}}var s=$g(t,c);n.push(s)}),{angle:a,stops:n,type:1}},c1=function(t,e){var a=os(180),n=[];return lo(e).forEach(function(c,f){if(f===0){var u=c[0];if(u.type===20&&["top","left","right","bottom"].indexOf(u.value)!==-1){a=r8(c);return}else if(a8(u)){a=(Kg.parse(t,u)+os(270))%os(360);return}}var s=$g(t,c);n.push(s)}),{angle:a,stops:n,type:1}},jE=function(t,e){var a=os(180),n=[],c=1,f=0,u=3,s=[];return lo(e).forEach(function(x,B){var I=x[0];if(B===0){if(Ka(I)&&I.value==="linear"){c=1;return}else if(Ka(I)&&I.value==="radial"){c=2;return}}if(I.type===18){if(I.name==="from"){var R=YA.parse(t,I.values[0]);n.push({stop:Or,color:R})}else if(I.name==="to"){var R=YA.parse(t,I.values[0]);n.push({stop:UA,color:R})}else if(I.name==="color-stop"){var F=I.values.filter(jg);if(F.length===2){var R=YA.parse(t,F[1]),M=F[0];Gg(M)&&n.push({stop:{type:16,number:M.number*100,flags:M.flags},color:R})}}}}),c===1?{angle:(a+os(180))%os(360),stops:n,type:c}:{size:u,shape:f,stops:n,position:s,type:c}},n8="closest-side",s8="farthest-side",o8="closest-corner",A8="farthest-corner",l8="circle",c8="ellipse",h8="cover",u8="contain",KE=function(t,e){var a=0,n=3,c=[],f=[];return lo(e).forEach(function(u,s){var x=!0;if(s===0){var B=!1;x=u.reduce(function(R,F){if(B)if(Ka(F))switch(F.value){case"center":return f.push(t4),R;case"top":case"left":return f.push(Or),R;case"right":case"bottom":return f.push(UA),R}else(gr(F)||PA(F))&&f.push(F);else if(Ka(F))switch(F.value){case l8:return a=0,!1;case c8:return a=1,!1;case"at":return B=!0,!1;case n8:return n=0,!1;case h8:case s8:return n=1,!1;case u8:case o8:return n=2,!1;case A8:return n=3,!1}else if(PA(F)||gr(F))return Array.isArray(n)||(n=[]),n.push(F),!1;return R},x)}if(x){var I=$g(t,u);c.push(I)}}),{size:n,shape:a,stops:c,position:f,type:2}},h1=function(t,e){var a=0,n=3,c=[],f=[];return lo(e).forEach(function(u,s){var x=!0;if(s===0?x=u.reduce(function(I,R){if(Ka(R))switch(R.value){case"center":return f.push(t4),!1;case"top":case"left":return f.push(Or),!1;case"right":case"bottom":return f.push(UA),!1}else if(gr(R)||PA(R))return f.push(R),!1;return I},x):s===1&&(x=u.reduce(function(I,R){if(Ka(R))switch(R.value){case l8:return a=0,!1;case c8:return a=1,!1;case u8:case n8:return n=0,!1;case s8:return n=1,!1;case o8:return n=2,!1;case h8:case A8:return n=3,!1}else if(PA(R)||gr(R))return Array.isArray(n)||(n=[]),n.push(R),!1;return I},x)),x){var B=$g(t,u);c.push(B)}}),{size:n,shape:a,stops:c,position:f,type:2}},$E=function(t){return t.type===1},qE=function(t){return t.type===2},i4={name:"image",parse:function(t,e){if(e.type===22){var a={url:e.value,type:0};return t.cache.addImage(e.value),a}if(e.type===18){var n=d8[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function WE(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!d8[t.name])}var d8={"linear-gradient":GE,"-moz-linear-gradient":c1,"-ms-linear-gradient":c1,"-o-linear-gradient":c1,"-webkit-linear-gradient":c1,"radial-gradient":KE,"-moz-radial-gradient":h1,"-ms-radial-gradient":h1,"-o-radial-gradient":h1,"-webkit-radial-gradient":h1,"-webkit-gradient":jE},JE={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var a=e[0];return a.type===20&&a.value==="none"?[]:e.filter(function(n){return jg(n)&&WE(n)}).map(function(n){return i4.parse(t,n)})}},eF={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(a){if(Ka(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tF={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return lo(e).map(function(a){return a.filter(gr)}).map(W5)}},iF={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return lo(e).map(function(a){return a.filter(Ka).map(function(n){return n.value}).join(" ")}).map(aF)}},aF=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},gh;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(gh||(gh={}));var rF={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return lo(e).map(function(a){return a.filter(nF)})}},nF=function(t){return Ka(t)||gr(t)},qg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},sF=qg("top"),oF=qg("right"),AF=qg("bottom"),lF=qg("left"),Wg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,a){return W5(a.filter(gr))}}},cF=Wg("top-left"),hF=Wg("top-right"),uF=Wg("bottom-right"),dF=Wg("bottom-left"),Jg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,a){switch(a){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},fF=Jg("top"),gF=Jg("right"),pF=Jg("bottom"),mF=Jg("left"),ep=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,a){return v0(a)?a.number:0}}},_F=ep("top"),bF=ep("right"),yF=ep("bottom"),vF=ep("left"),xF={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wF={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},BF={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ka).reduce(function(a,n){return a|CF(n.value)},0)}},CF=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},MF={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},RF={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},gg;(function(t){t.NORMAL="normal",t.STRICT="strict"})(gg||(gg={}));var IF={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return gg.STRICT;case"normal":default:return gg.NORMAL}}},UF={name:"line-height",initialValue:"normal",prefix:!1,type:4},Iy=function(t,e){return Ka(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:gr(t)?Ua(t,e):e},EF={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:i4.parse(t,e)}},FF={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},TF={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},tp=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},SF=tp("top"),YF=tp("right"),NF=tp("bottom"),LF=tp("left"),PF={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ka).map(function(a){switch(a.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},QF={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},ip=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},kF=ip("top"),DF=ip("right"),zF=ip("bottom"),ZF=ip("left"),HF={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},OF={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},XF={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&em(e[0],"none")?[]:lo(e).map(function(a){for(var n={color:l0.TRANSPARENT,offsetX:Or,offsetY:Or,blur:Or},c=0,f=0;f<a.length;f++){var u=a[f];PA(u)?(c===0?n.offsetX=u:c===1?n.offsetY=u:n.blur=u,c++):n.color=YA.parse(t,u)}return n})}},VF={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},GF={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var a=$F[e.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return a(e.values)}return null}},jF=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number});return e.length===6?e:null},KF=function(t){var e=t.filter(function(x){return x.type===17}).map(function(x){return x.number}),a=e[0],n=e[1];e[2],e[3];var c=e[4],f=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var u=e[12],s=e[13];return e[14],e[15],e.length===16?[a,n,c,f,u,s]:null},$F={matrix:jF,matrix3d:KF},Uy={type:16,number:50,flags:y0},qF=[Uy,Uy],WF={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var a=e.filter(gr);return a.length!==2?qF:[a[0],a[1]]}},JF={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Od;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Od||(Od={}));var eT={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Od.BREAK_ALL;case"keep-all":return Od.KEEP_ALL;case"normal":default:return Od.NORMAL}}},tT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Gg(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},f8={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},iT={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Gg(e)?e.number:1}},aT={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rT={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ka).map(function(a){switch(a.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(a){return a!==0})}},nT={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var a=[],n=[];return e.forEach(function(c){switch(c.type){case 20:case 0:a.push(c.value);break;case 17:a.push(c.number.toString());break;case 4:n.push(a.join(" ")),a.length=0;break}}),a.length&&n.push(a.join(" ")),n.map(function(c){return c.indexOf(" ")===-1?c:"'"+c+"'"})}},sT={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},oT={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Gg(e))return e.number;if(Ka(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},AT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ka).map(function(a){return a.value})}},lT={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Br=function(t,e){return(t&e)!==0},cT={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(v0).map(function(a){return f8.parse(t,a)})}},hT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&em(e[0],"none")?[]:lo(e).map(function(a){for(var n={color:255,offsetX:Or,offsetY:Or,blur:Or,spread:Or,inset:!1},c=0,f=0;f<a.length;f++){var u=a[f];em(u,"inset")?n.inset=!0:PA(u)?(c===0?n.offsetX=u:c===1?n.offsetY=u:c===2?n.blur=u:n.spread=u,c++):n.color=YA.parse(t,u)}return n})}},uT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var a=[0,1,2],n=[];return e.filter(Ka).forEach(function(c){switch(c.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),a.forEach(function(c){n.indexOf(c)===-1&&n.push(c)}),n}},dT={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fT={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return v0(e)?e.number:0}},gT=function(){function t(e,a){var n,c;this.animationDuration=hi(e,cT,a.animationDuration),this.backgroundClip=hi(e,ZE,a.backgroundClip),this.backgroundColor=hi(e,HE,a.backgroundColor),this.backgroundImage=hi(e,JE,a.backgroundImage),this.backgroundOrigin=hi(e,eF,a.backgroundOrigin),this.backgroundPosition=hi(e,tF,a.backgroundPosition),this.backgroundRepeat=hi(e,iF,a.backgroundRepeat),this.backgroundSize=hi(e,rF,a.backgroundSize),this.borderTopColor=hi(e,sF,a.borderTopColor),this.borderRightColor=hi(e,oF,a.borderRightColor),this.borderBottomColor=hi(e,AF,a.borderBottomColor),this.borderLeftColor=hi(e,lF,a.borderLeftColor),this.borderTopLeftRadius=hi(e,cF,a.borderTopLeftRadius),this.borderTopRightRadius=hi(e,hF,a.borderTopRightRadius),this.borderBottomRightRadius=hi(e,uF,a.borderBottomRightRadius),this.borderBottomLeftRadius=hi(e,dF,a.borderBottomLeftRadius),this.borderTopStyle=hi(e,fF,a.borderTopStyle),this.borderRightStyle=hi(e,gF,a.borderRightStyle),this.borderBottomStyle=hi(e,pF,a.borderBottomStyle),this.borderLeftStyle=hi(e,mF,a.borderLeftStyle),this.borderTopWidth=hi(e,_F,a.borderTopWidth),this.borderRightWidth=hi(e,bF,a.borderRightWidth),this.borderBottomWidth=hi(e,yF,a.borderBottomWidth),this.borderLeftWidth=hi(e,vF,a.borderLeftWidth),this.boxShadow=hi(e,hT,a.boxShadow),this.color=hi(e,xF,a.color),this.direction=hi(e,wF,a.direction),this.display=hi(e,BF,a.display),this.float=hi(e,MF,a.cssFloat),this.fontFamily=hi(e,nT,a.fontFamily),this.fontSize=hi(e,sT,a.fontSize),this.fontStyle=hi(e,lT,a.fontStyle),this.fontVariant=hi(e,AT,a.fontVariant),this.fontWeight=hi(e,oT,a.fontWeight),this.letterSpacing=hi(e,RF,a.letterSpacing),this.lineBreak=hi(e,IF,a.lineBreak),this.lineHeight=hi(e,UF,a.lineHeight),this.listStyleImage=hi(e,EF,a.listStyleImage),this.listStylePosition=hi(e,FF,a.listStylePosition),this.listStyleType=hi(e,TF,a.listStyleType),this.marginTop=hi(e,SF,a.marginTop),this.marginRight=hi(e,YF,a.marginRight),this.marginBottom=hi(e,NF,a.marginBottom),this.marginLeft=hi(e,LF,a.marginLeft),this.opacity=hi(e,iT,a.opacity);var f=hi(e,PF,a.overflow);this.overflowX=f[0],this.overflowY=f[f.length>1?1:0],this.overflowWrap=hi(e,QF,a.overflowWrap),this.paddingTop=hi(e,kF,a.paddingTop),this.paddingRight=hi(e,DF,a.paddingRight),this.paddingBottom=hi(e,zF,a.paddingBottom),this.paddingLeft=hi(e,ZF,a.paddingLeft),this.paintOrder=hi(e,uT,a.paintOrder),this.position=hi(e,OF,a.position),this.textAlign=hi(e,HF,a.textAlign),this.textDecorationColor=hi(e,aT,(n=a.textDecorationColor)!==null&&n!==void 0?n:a.color),this.textDecorationLine=hi(e,rT,(c=a.textDecorationLine)!==null&&c!==void 0?c:a.textDecoration),this.textShadow=hi(e,XF,a.textShadow),this.textTransform=hi(e,VF,a.textTransform),this.transform=hi(e,GF,a.transform),this.transformOrigin=hi(e,WF,a.transformOrigin),this.visibility=hi(e,JF,a.visibility),this.webkitTextStrokeColor=hi(e,dT,a.webkitTextStrokeColor),this.webkitTextStrokeWidth=hi(e,fT,a.webkitTextStrokeWidth),this.wordBreak=hi(e,eT,a.wordBreak),this.zIndex=hi(e,tT,a.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return fh(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Br(this.display,4)||Br(this.display,33554432)||Br(this.display,268435456)||Br(this.display,536870912)||Br(this.display,67108864)||Br(this.display,134217728)},t}(),hi=function(t,e,a){var n=new $5,c=a!==null&&typeof a<"u"?a.toString():e.initialValue;n.write(c);var f=new q5(n.read());switch(e.type){case 2:var u=f.parseComponentValue();return e.parse(t,Ka(u)?u.value:e.initialValue);case 0:return e.parse(t,f.parseComponentValue());case 1:return e.parse(t,f.parseComponentValues());case 4:return f.parseComponentValue();case 3:switch(e.format){case"angle":return Kg.parse(t,f.parseComponentValue());case"color":return YA.parse(t,f.parseComponentValue());case"image":return i4.parse(t,f.parseComponentValue());case"length":var s=f.parseComponentValue();return PA(s)?s:Or;case"length-percentage":var x=f.parseComponentValue();return gr(x)?x:Or;case"time":return f8.parse(t,f.parseComponentValue())}break}},pT="data-html2canvas-debug",mT=function(t){var e=t.getAttribute(pT);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Ey=function(t,e){var a=mT(t);return a===1||e===a},co=function(){function t(e,a){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Ey(a,3))debugger;this.styles=new gT(e,window.getComputedStyle(a,null)),mS(a)&&(this.styles.animationDuration.some(function(n){return n>0})&&(a.style.animationDuration="0s"),this.styles.transform!==null&&(a.style.transform="none")),this.bounds=Jm(this.context,a),Ey(a,4)&&(this.flags|=16)}return t}(),_T="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Fy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ed=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var u1=0;u1<Fy.length;u1++)Ed[Fy.charCodeAt(u1)]=u1;var bT=function(t){var e=t.length*.75,a=t.length,n,c=0,f,u,s,x;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var B=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),I=Array.isArray(B)?B:new Uint8Array(B);for(n=0;n<a;n+=4)f=Ed[t.charCodeAt(n)],u=Ed[t.charCodeAt(n+1)],s=Ed[t.charCodeAt(n+2)],x=Ed[t.charCodeAt(n+3)],I[c++]=f<<2|u>>4,I[c++]=(u&15)<<4|s>>2,I[c++]=(s&3)<<6|x&63;return B},yT=function(t){for(var e=t.length,a=[],n=0;n<e;n+=2)a.push(t[n+1]<<8|t[n]);return a},vT=function(t){for(var e=t.length,a=[],n=0;n<e;n+=4)a.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return a},Dl=5,a4=11,q2=2,xT=a4-Dl,g8=65536>>Dl,wT=1<<Dl,W2=wT-1,BT=1024>>Dl,CT=g8+BT,MT=CT,RT=32,IT=MT+RT,UT=65536>>a4,ET=1<<xT,FT=ET-1,Ty=function(t,e,a){return t.slice?t.slice(e,a):new Uint16Array(Array.prototype.slice.call(t,e,a))},TT=function(t,e,a){return t.slice?t.slice(e,a):new Uint32Array(Array.prototype.slice.call(t,e,a))},ST=function(t,e){var a=bT(t),n=Array.isArray(a)?vT(a):new Uint32Array(a),c=Array.isArray(a)?yT(a):new Uint16Array(a),f=24,u=Ty(c,f/2,n[4]/2),s=n[5]===2?Ty(c,(f+n[4])/2):TT(n,Math.ceil((f+n[4])/4));return new YT(n[0],n[1],n[2],n[3],u,s)},YT=function(){function t(e,a,n,c,f,u){this.initialValue=e,this.errorValue=a,this.highStart=n,this.highValueIndex=c,this.index=f,this.data=u}return t.prototype.get=function(e){var a;if(e>=0){if(e<55296||e>56319&&e<=65535)return a=this.index[e>>Dl],a=(a<<q2)+(e&W2),this.data[a];if(e<=65535)return a=this.index[g8+(e-55296>>Dl)],a=(a<<q2)+(e&W2),this.data[a];if(e<this.highStart)return a=IT-UT+(e>>a4),a=this.index[a],a+=e>>Dl&FT,a=this.index[a],a=(a<<q2)+(e&W2),this.data[a];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Sy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",NT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var d1=0;d1<Sy.length;d1++)NT[Sy.charCodeAt(d1)]=d1;var LT=1,J2=2,e3=3,Yy=4,Ny=5,PT=7,Ly=8,t3=9,i3=10,Py=11,Qy=12,ky=13,Dy=14,a3=15,QT=function(t){for(var e=[],a=0,n=t.length;a<n;){var c=t.charCodeAt(a++);if(c>=55296&&c<=56319&&a<n){var f=t.charCodeAt(a++);(f&64512)===56320?e.push(((c&1023)<<10)+(f&1023)+65536):(e.push(c),a--)}else e.push(c)}return e},kT=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var n=[],c=-1,f="";++c<a;){var u=t[c];u<=65535?n.push(u):(u-=65536,n.push((u>>10)+55296,u%1024+56320)),(c+1===a||n.length>16384)&&(f+=String.fromCharCode.apply(String,n),n.length=0)}return f},DT=ST(_T),ns="×",r3="÷",zT=function(t){return DT.get(t)},ZT=function(t,e,a){var n=a-2,c=e[n],f=e[a-1],u=e[a];if(f===J2&&u===e3)return ns;if(f===J2||f===e3||f===Yy||u===J2||u===e3||u===Yy)return r3;if(f===Ly&&[Ly,t3,Py,Qy].indexOf(u)!==-1||(f===Py||f===t3)&&(u===t3||u===i3)||(f===Qy||f===i3)&&u===i3||u===ky||u===Ny||u===PT||f===LT)return ns;if(f===ky&&u===Dy){for(;c===Ny;)c=e[--n];if(c===Dy)return ns}if(f===a3&&u===a3){for(var s=0;c===a3;)s++,c=e[--n];if(s%2===0)return ns}return r3},HT=function(t){var e=QT(t),a=e.length,n=0,c=0,f=e.map(zT);return{next:function(){if(n>=a)return{done:!0,value:null};for(var u=ns;n<a&&(u=ZT(e,f,++n))===ns;);if(u!==ns||n===a){var s=kT.apply(null,e.slice(c,n));return c=n,{value:s,done:!1}}return{done:!0,value:null}}}},OT=function(t){for(var e=HT(t),a=[],n;!(n=e.next()).done;)n.value&&a.push(n.value.slice());return a},XT=function(t){var e=123;if(t.createRange){var a=t.createRange();if(a.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),a.selectNode(n);var c=a.getBoundingClientRect(),f=Math.round(c.height);if(t.body.removeChild(n),f===e)return!0}}return!1},VT=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var a=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,c=Vg(n.data).map(function(x){return ar(x)}),f=0,u={},s=c.every(function(x,B){a.setStart(n,f),a.setEnd(n,f+x.length);var I=a.getBoundingClientRect();f+=x.length;var R=I.x>u.x||I.y>u.y;return u=I,B===0?!0:R});return t.body.removeChild(e),s},GT=function(){return typeof new Image().crossOrigin<"u"},jT=function(){return typeof new XMLHttpRequest().responseType=="string"},KT=function(t){var e=new Image,a=t.createElement("canvas"),n=a.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),a.toDataURL()}catch{return!1}return!0},zy=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},$T=function(t){var e=t.createElement("canvas"),a=100;e.width=a,e.height=a;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,a,a);var c=new Image,f=e.toDataURL();c.src=f;var u=tm(a,a,0,0,c);return n.fillStyle="red",n.fillRect(0,0,a,a),Zy(u).then(function(s){n.drawImage(s,0,0);var x=n.getImageData(0,0,a,a).data;n.fillStyle="red",n.fillRect(0,0,a,a);var B=t.createElement("div");return B.style.backgroundImage="url("+f+")",B.style.height=a+"px",zy(x)?Zy(tm(a,a,0,0,B)):Promise.reject(!1)}).then(function(s){return n.drawImage(s,0,0),zy(n.getImageData(0,0,a,a).data)}).catch(function(){return!1})},tm=function(t,e,a,n,c){var f="http://www.w3.org/2000/svg",u=document.createElementNS(f,"svg"),s=document.createElementNS(f,"foreignObject");return u.setAttributeNS(null,"width",t.toString()),u.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",a.toString()),s.setAttributeNS(null,"y",n.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),u.appendChild(s),s.appendChild(c),u},Zy=function(t){return new Promise(function(e,a){var n=new Image;n.onload=function(){return e(n)},n.onerror=a,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Qn={get SUPPORT_RANGE_BOUNDS(){var t=XT(document);return Object.defineProperty(Qn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Qn.SUPPORT_RANGE_BOUNDS&&VT(document);return Object.defineProperty(Qn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=KT(document);return Object.defineProperty(Qn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?$T(document):Promise.resolve(!1);return Object.defineProperty(Qn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=GT();return Object.defineProperty(Qn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=jT();return Object.defineProperty(Qn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Xd=function(){function t(e,a){this.text=e,this.bounds=a}return t}(),qT=function(t,e,a,n){var c=eS(e,a),f=[],u=0;return c.forEach(function(s){if(a.textDecorationLine.length||s.trim().length>0)if(Qn.SUPPORT_RANGE_BOUNDS){var x=Hy(n,u,s.length).getClientRects();if(x.length>1){var B=r4(s),I=0;B.forEach(function(F){f.push(new Xd(F,Ol.fromDOMRectList(t,Hy(n,I+u,F.length).getClientRects()))),I+=F.length})}else f.push(new Xd(s,Ol.fromDOMRectList(t,x)))}else{var R=n.splitText(s.length);f.push(new Xd(s,WT(t,n))),n=R}else Qn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(s.length));u+=s.length}),f},WT=function(t,e){var a=e.ownerDocument;if(a){var n=a.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var c=e.parentNode;if(c){c.replaceChild(n,e);var f=Jm(t,n);return n.firstChild&&c.replaceChild(n.firstChild,n),f}}return Ol.EMPTY},Hy=function(t,e,a){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var c=n.createRange();return c.setStart(t,e),c.setEnd(t,e+a),c},r4=function(t){if(Qn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(a){return a.segment})}return OT(t)},JT=function(t,e){if(Qn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var a=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(a.segment(t)).map(function(n){return n.segment})}return iS(t,e)},eS=function(t,e){return e.letterSpacing!==0?r4(t):JT(t,e)},tS=[32,160,4961,65792,65793,4153,4241],iS=function(t,e){for(var a=YU(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],c,f=function(){if(c.value){var u=c.value.slice(),s=Vg(u),x="";s.forEach(function(B){tS.indexOf(B)===-1?x+=ar(B):(x.length&&n.push(x),n.push(ar(B)),x="")}),x.length&&n.push(x)}};!(c=a.next()).done;)f();return n},aS=function(){function t(e,a,n){this.text=rS(a.data,n.textTransform),this.textBounds=qT(e,this.text,n,a)}return t}(),rS=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(nS,sS);case 2:return t.toUpperCase();default:return t}},nS=/(^|\s|:|-|\(|\))([a-z])/g,sS=function(t,e,a){return t.length>0?e+a.toUpperCase():t},p8=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;return c.src=n.currentSrc||n.src,c.intrinsicWidth=n.naturalWidth,c.intrinsicHeight=n.naturalHeight,c.context.cache.addImage(c.src),c}return e}(co),m8=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;return c.canvas=n,c.intrinsicWidth=n.width,c.intrinsicHeight=n.height,c}return e}(co),_8=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this,f=new XMLSerializer,u=Jm(a,n);return n.setAttribute("width",u.width+"px"),n.setAttribute("height",u.height+"px"),c.svg="data:image/svg+xml,"+encodeURIComponent(f.serializeToString(n)),c.intrinsicWidth=n.width.baseVal.value,c.intrinsicHeight=n.height.baseVal.value,c.context.cache.addImage(c.svg),c}return e}(co),b8=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;return c.value=n.value,c}return e}(co),im=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;return c.start=n.start,c.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,c}return e}(co),oS=[{type:15,flags:0,unit:"px",number:3}],AS=[{type:16,flags:0,number:50}],lS=function(t){return t.width>t.height?new Ol(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ol(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},cS=function(t){var e=t.type===hS?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},pg="checkbox",mg="radio",hS="password",Oy=707406591,n4=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;switch(c.type=n.type.toLowerCase(),c.checked=n.checked,c.value=cS(n),(c.type===pg||c.type===mg)&&(c.styles.backgroundColor=3739148031,c.styles.borderTopColor=c.styles.borderRightColor=c.styles.borderBottomColor=c.styles.borderLeftColor=2779096575,c.styles.borderTopWidth=c.styles.borderRightWidth=c.styles.borderBottomWidth=c.styles.borderLeftWidth=1,c.styles.borderTopStyle=c.styles.borderRightStyle=c.styles.borderBottomStyle=c.styles.borderLeftStyle=1,c.styles.backgroundClip=[0],c.styles.backgroundOrigin=[0],c.bounds=lS(c.bounds)),c.type){case pg:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=oS;break;case mg:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=AS;break}return c}return e}(co),y8=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this,f=n.options[n.selectedIndex||0];return c.value=f&&f.text||"",c}return e}(co),v8=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;return c.value=n.value,c}return e}(co),x8=function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;c.src=n.src,c.width=parseInt(n.width,10)||0,c.height=parseInt(n.height,10)||0,c.backgroundColor=c.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){c.tree=dS(a,n.contentWindow.document.documentElement);var f=n.contentWindow.document.documentElement?Cy(a,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):l0.TRANSPARENT,u=n.contentWindow.document.body?Cy(a,getComputedStyle(n.contentWindow.document.body).backgroundColor):l0.TRANSPARENT;c.backgroundColor=fh(f)?fh(u)?c.styles.backgroundColor:u:f}}catch{}return c}return e}(co),uS=["OL","UL","MENU"],z1=function(t,e,a,n){for(var c=e.firstChild,f=void 0;c;c=f)if(f=c.nextSibling,pS(c)&&c.data.trim().length>0)a.textNodes.push(new aS(t,c,a.styles));else if(B8(c))if(MS(c)&&c.assignedNodes)c.assignedNodes().forEach(function(s){return z1(t,s,a,n)});else{var u=w8(t,c);u.styles.isVisible()&&(fS(c,u,n)?u.flags|=4:gS(u.styles)&&(u.flags|=2),uS.indexOf(c.tagName)!==-1&&(u.flags|=8),a.elements.push(u),c.slot,c.shadowRoot?z1(t,c.shadowRoot,u,n):!M8(c)&&!C8(c)&&!R8(c)&&z1(t,c,u,n))}},w8=function(t,e){return BS(e)?new p8(t,e):wS(e)?new m8(t,e):C8(e)?new _8(t,e):bS(e)?new b8(t,e):yS(e)?new im(t,e):vS(e)?new n4(t,e):R8(e)?new y8(t,e):M8(e)?new v8(t,e):CS(e)?new x8(t,e):new co(t,e)},dS=function(t,e){var a=w8(t,e);return a.flags|=4,z1(t,e,a,a),a},fS=function(t,e,a){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||xS(t)&&a.styles.isTransparent()},gS=function(t){return t.isPositioned()||t.isFloating()},pS=function(t){return t.nodeType===Node.TEXT_NODE},B8=function(t){return t.nodeType===Node.ELEMENT_NODE},mS=function(t){return B8(t)&&typeof t.style<"u"&&!_S(t)},_S=function(t){return typeof t.className=="object"},bS=function(t){return t.tagName==="LI"},yS=function(t){return t.tagName==="OL"},vS=function(t){return t.tagName==="INPUT"},C8=function(t){return t.tagName==="svg"},xS=function(t){return t.tagName==="BODY"},wS=function(t){return t.tagName==="CANVAS"},BS=function(t){return t.tagName==="IMG"},CS=function(t){return t.tagName==="IFRAME"},M8=function(t){return t.tagName==="TEXTAREA"},R8=function(t){return t.tagName==="SELECT"},MS=function(t){return t.tagName==="SLOT"},Xy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Vy={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},RS={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},IS={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},qc=function(t,e,a,n,c,f){return t<e||t>a?s4(t,c,f.length>0):n.integers.reduce(function(u,s,x){for(;t>=s;)t-=s,u+=n.values[x];return u},"")+f},I8=function(t,e,a,n){var c="";do a||t--,c=n(t)+c,t/=e;while(t*e>=e);return c},tr=function(t,e,a,n,c){var f=a-e+1;return(t<0?"-":"")+(I8(Math.abs(t),f,n,function(u){return ar(Math.floor(u%f)+e)})+c)},Ul=function(t,e,a){a===void 0&&(a=". ");var n=e.length;return I8(Math.abs(t),n,!1,function(c){return e[Math.floor(c%n)]})+a},sh=1,vA=2,xA=4,Fd=8,Eo=function(t,e,a,n,c,f){if(t<-9999||t>9999)return s4(t,4,c.length>0);var u=Math.abs(t),s=c;if(u===0)return e[0]+s;for(var x=0;u>0&&x<=4;x++){var B=u%10;B===0&&Br(f,sh)&&s!==""?s=e[B]+s:B>1||B===1&&x===0||B===1&&x===1&&Br(f,vA)||B===1&&x===1&&Br(f,xA)&&t>100||B===1&&x>1&&Br(f,Fd)?s=e[B]+(x>0?a[x-1]:"")+s:B===1&&x>0&&(s=a[x-1]+s),u=Math.floor(u/10)}return(t<0?n:"")+s},Gy="十百千萬",jy="拾佰仟萬",Ky="マイナス",n3="마이너스",s4=function(t,e,a){var n=a?". ":"",c=a?"、":"",f=a?", ":"",u=a?" ":"";switch(e){case 0:return"•"+u;case 1:return"◦"+u;case 2:return"◾"+u;case 5:var s=tr(t,48,57,!0,n);return s.length<4?"0"+s:s;case 4:return Ul(t,"〇一二三四五六七八九",c);case 6:return qc(t,1,3999,Xy,3,n).toLowerCase();case 7:return qc(t,1,3999,Xy,3,n);case 8:return tr(t,945,969,!1,n);case 9:return tr(t,97,122,!1,n);case 10:return tr(t,65,90,!1,n);case 11:return tr(t,1632,1641,!0,n);case 12:case 49:return qc(t,1,9999,Vy,3,n);case 35:return qc(t,1,9999,Vy,3,n).toLowerCase();case 13:return tr(t,2534,2543,!0,n);case 14:case 30:return tr(t,6112,6121,!0,n);case 15:return Ul(t,"子丑寅卯辰巳午未申酉戌亥",c);case 16:return Ul(t,"甲乙丙丁戊己庚辛壬癸",c);case 17:case 48:return Eo(t,"零一二三四五六七八九",Gy,"負",c,vA|xA|Fd);case 47:return Eo(t,"零壹貳參肆伍陸柒捌玖",jy,"負",c,sh|vA|xA|Fd);case 42:return Eo(t,"零一二三四五六七八九",Gy,"负",c,vA|xA|Fd);case 41:return Eo(t,"零壹贰叁肆伍陆柒捌玖",jy,"负",c,sh|vA|xA|Fd);case 26:return Eo(t,"〇一二三四五六七八九","十百千万",Ky,c,0);case 25:return Eo(t,"零壱弐参四伍六七八九","拾百千万",Ky,c,sh|vA|xA);case 31:return Eo(t,"영일이삼사오육칠팔구","십백천만",n3,f,sh|vA|xA);case 33:return Eo(t,"零一二三四五六七八九","十百千萬",n3,f,0);case 32:return Eo(t,"零壹貳參四五六七八九","拾百千",n3,f,sh|vA|xA);case 18:return tr(t,2406,2415,!0,n);case 20:return qc(t,1,19999,IS,3,n);case 21:return tr(t,2790,2799,!0,n);case 22:return tr(t,2662,2671,!0,n);case 22:return qc(t,1,10999,RS,3,n);case 23:return Ul(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Ul(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return tr(t,3302,3311,!0,n);case 28:return Ul(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",c);case 29:return Ul(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",c);case 34:return tr(t,3792,3801,!0,n);case 37:return tr(t,6160,6169,!0,n);case 38:return tr(t,4160,4169,!0,n);case 39:return tr(t,2918,2927,!0,n);case 40:return tr(t,1776,1785,!0,n);case 43:return tr(t,3046,3055,!0,n);case 44:return tr(t,3174,3183,!0,n);case 45:return tr(t,3664,3673,!0,n);case 46:return tr(t,3872,3881,!0,n);case 3:default:return tr(t,48,57,!0,n)}},$y;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})($y||($y={}));var US=function(){function t(){}return t.getOrigin=function(e){var a=t._link;return a?(a.href=e,a.href=a.href,a.protocol+a.hostname+a.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),Jt=function(){function t(e,a){this.type=0,this.x=e,this.y=a}return t.prototype.add=function(e,a){return new t(this.x+e,this.y+a)},t}(),Wc=function(t,e,a){return new Jt(t.x+(e.x-t.x)*a,t.y+(e.y-t.y)*a)},f1=function(){function t(e,a,n,c){this.type=1,this.start=e,this.startControl=a,this.endControl=n,this.end=c}return t.prototype.subdivide=function(e,a){var n=Wc(this.start,this.startControl,e),c=Wc(this.startControl,this.endControl,e),f=Wc(this.endControl,this.end,e),u=Wc(n,c,e),s=Wc(c,f,e),x=Wc(u,s,e);return a?new t(this.start,n,u,x):new t(x,s,f,this.end)},t.prototype.add=function(e,a){return new t(this.start.add(e,a),this.startControl.add(e,a),this.endControl.add(e,a),this.end.add(e,a))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ss=function(t){return t.type===1},ES=function(){function t(e){var a=e.styles,n=e.bounds,c=Ud(a.borderTopLeftRadius,n.width,n.height),f=c[0],u=c[1],s=Ud(a.borderTopRightRadius,n.width,n.height),x=s[0],B=s[1],I=Ud(a.borderBottomRightRadius,n.width,n.height),R=I[0],F=I[1],M=Ud(a.borderBottomLeftRadius,n.width,n.height),N=M[0],D=M[1],V=[];V.push((f+x)/n.width),V.push((N+R)/n.width),V.push((u+D)/n.height),V.push((B+F)/n.height);var X=Math.max.apply(Math,V);X>1&&(f/=X,u/=X,x/=X,B/=X,R/=X,F/=X,N/=X,D/=X);var ee=n.width-x,Ae=n.height-F,ce=n.width-R,ue=n.height-D,oe=a.borderTopWidth,q=a.borderRightWidth,H=a.borderBottomWidth,$=a.borderLeftWidth,de=Ua(a.paddingTop,e.bounds.width),ge=Ua(a.paddingRight,e.bounds.width),ye=Ua(a.paddingBottom,e.bounds.width),we=Ua(a.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=f>0||u>0?ka(n.left+$/3,n.top+oe/3,f-$/3,u-oe/3,Aa.TOP_LEFT):new Jt(n.left+$/3,n.top+oe/3),this.topRightBorderDoubleOuterBox=f>0||u>0?ka(n.left+ee,n.top+oe/3,x-q/3,B-oe/3,Aa.TOP_RIGHT):new Jt(n.left+n.width-q/3,n.top+oe/3),this.bottomRightBorderDoubleOuterBox=R>0||F>0?ka(n.left+ce,n.top+Ae,R-q/3,F-H/3,Aa.BOTTOM_RIGHT):new Jt(n.left+n.width-q/3,n.top+n.height-H/3),this.bottomLeftBorderDoubleOuterBox=N>0||D>0?ka(n.left+$/3,n.top+ue,N-$/3,D-H/3,Aa.BOTTOM_LEFT):new Jt(n.left+$/3,n.top+n.height-H/3),this.topLeftBorderDoubleInnerBox=f>0||u>0?ka(n.left+$*2/3,n.top+oe*2/3,f-$*2/3,u-oe*2/3,Aa.TOP_LEFT):new Jt(n.left+$*2/3,n.top+oe*2/3),this.topRightBorderDoubleInnerBox=f>0||u>0?ka(n.left+ee,n.top+oe*2/3,x-q*2/3,B-oe*2/3,Aa.TOP_RIGHT):new Jt(n.left+n.width-q*2/3,n.top+oe*2/3),this.bottomRightBorderDoubleInnerBox=R>0||F>0?ka(n.left+ce,n.top+Ae,R-q*2/3,F-H*2/3,Aa.BOTTOM_RIGHT):new Jt(n.left+n.width-q*2/3,n.top+n.height-H*2/3),this.bottomLeftBorderDoubleInnerBox=N>0||D>0?ka(n.left+$*2/3,n.top+ue,N-$*2/3,D-H*2/3,Aa.BOTTOM_LEFT):new Jt(n.left+$*2/3,n.top+n.height-H*2/3),this.topLeftBorderStroke=f>0||u>0?ka(n.left+$/2,n.top+oe/2,f-$/2,u-oe/2,Aa.TOP_LEFT):new Jt(n.left+$/2,n.top+oe/2),this.topRightBorderStroke=f>0||u>0?ka(n.left+ee,n.top+oe/2,x-q/2,B-oe/2,Aa.TOP_RIGHT):new Jt(n.left+n.width-q/2,n.top+oe/2),this.bottomRightBorderStroke=R>0||F>0?ka(n.left+ce,n.top+Ae,R-q/2,F-H/2,Aa.BOTTOM_RIGHT):new Jt(n.left+n.width-q/2,n.top+n.height-H/2),this.bottomLeftBorderStroke=N>0||D>0?ka(n.left+$/2,n.top+ue,N-$/2,D-H/2,Aa.BOTTOM_LEFT):new Jt(n.left+$/2,n.top+n.height-H/2),this.topLeftBorderBox=f>0||u>0?ka(n.left,n.top,f,u,Aa.TOP_LEFT):new Jt(n.left,n.top),this.topRightBorderBox=x>0||B>0?ka(n.left+ee,n.top,x,B,Aa.TOP_RIGHT):new Jt(n.left+n.width,n.top),this.bottomRightBorderBox=R>0||F>0?ka(n.left+ce,n.top+Ae,R,F,Aa.BOTTOM_RIGHT):new Jt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=N>0||D>0?ka(n.left,n.top+ue,N,D,Aa.BOTTOM_LEFT):new Jt(n.left,n.top+n.height),this.topLeftPaddingBox=f>0||u>0?ka(n.left+$,n.top+oe,Math.max(0,f-$),Math.max(0,u-oe),Aa.TOP_LEFT):new Jt(n.left+$,n.top+oe),this.topRightPaddingBox=x>0||B>0?ka(n.left+Math.min(ee,n.width-q),n.top+oe,ee>n.width+q?0:Math.max(0,x-q),Math.max(0,B-oe),Aa.TOP_RIGHT):new Jt(n.left+n.width-q,n.top+oe),this.bottomRightPaddingBox=R>0||F>0?ka(n.left+Math.min(ce,n.width-$),n.top+Math.min(Ae,n.height-H),Math.max(0,R-q),Math.max(0,F-H),Aa.BOTTOM_RIGHT):new Jt(n.left+n.width-q,n.top+n.height-H),this.bottomLeftPaddingBox=N>0||D>0?ka(n.left+$,n.top+Math.min(ue,n.height-H),Math.max(0,N-$),Math.max(0,D-H),Aa.BOTTOM_LEFT):new Jt(n.left+$,n.top+n.height-H),this.topLeftContentBox=f>0||u>0?ka(n.left+$+we,n.top+oe+de,Math.max(0,f-($+we)),Math.max(0,u-(oe+de)),Aa.TOP_LEFT):new Jt(n.left+$+we,n.top+oe+de),this.topRightContentBox=x>0||B>0?ka(n.left+Math.min(ee,n.width+$+we),n.top+oe+de,ee>n.width+$+we?0:x-$+we,B-(oe+de),Aa.TOP_RIGHT):new Jt(n.left+n.width-(q+ge),n.top+oe+de),this.bottomRightContentBox=R>0||F>0?ka(n.left+Math.min(ce,n.width-($+we)),n.top+Math.min(Ae,n.height+oe+de),Math.max(0,R-(q+ge)),F-(H+ye),Aa.BOTTOM_RIGHT):new Jt(n.left+n.width-(q+ge),n.top+n.height-(H+ye)),this.bottomLeftContentBox=N>0||D>0?ka(n.left+$+we,n.top+ue,Math.max(0,N-($+we)),D-(H+ye),Aa.BOTTOM_LEFT):new Jt(n.left+$+we,n.top+n.height-(H+ye))}return t}(),Aa;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Aa||(Aa={}));var ka=function(t,e,a,n,c){var f=4*((Math.sqrt(2)-1)/3),u=a*f,s=n*f,x=t+a,B=e+n;switch(c){case Aa.TOP_LEFT:return new f1(new Jt(t,B),new Jt(t,B-s),new Jt(x-u,e),new Jt(x,e));case Aa.TOP_RIGHT:return new f1(new Jt(t,e),new Jt(t+u,e),new Jt(x,B-s),new Jt(x,B));case Aa.BOTTOM_RIGHT:return new f1(new Jt(x,e),new Jt(x,e+s),new Jt(t+u,B),new Jt(t,B));case Aa.BOTTOM_LEFT:default:return new f1(new Jt(x,B),new Jt(x-u,B),new Jt(t,e+s),new Jt(t,e))}},_g=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},FS=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},bg=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},TS=function(){function t(e,a,n){this.offsetX=e,this.offsetY=a,this.matrix=n,this.type=0,this.target=6}return t}(),g1=function(){function t(e,a){this.path=e,this.target=a,this.type=1}return t}(),SS=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),YS=function(t){return t.type===0},U8=function(t){return t.type===1},NS=function(t){return t.type===2},qy=function(t,e){return t.length===e.length?t.some(function(a,n){return a===e[n]}):!1},LS=function(t,e,a,n,c){return t.map(function(f,u){switch(u){case 0:return f.add(e,a);case 1:return f.add(e+n,a);case 2:return f.add(e+n,a+c);case 3:return f.add(e,a+c)}return f})},E8=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),F8=function(){function t(e,a){if(this.container=e,this.parent=a,this.effects=[],this.curves=new ES(this.container),this.container.styles.opacity<1&&this.effects.push(new SS(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,c=this.container.bounds.top+this.container.styles.transformOrigin[1].number,f=this.container.styles.transform;this.effects.push(new TS(n,c,f))}if(this.container.styles.overflowX!==0){var u=_g(this.curves),s=bg(this.curves);qy(u,s)?this.effects.push(new g1(u,6)):(this.effects.push(new g1(u,2)),this.effects.push(new g1(s,4)))}}return t.prototype.getEffects=function(e){for(var a=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,c=this.effects.slice(0);n;){var f=n.effects.filter(function(x){return!U8(x)});if(a||n.container.styles.position!==0||!n.parent){if(c.unshift.apply(c,f),a=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var u=_g(n.curves),s=bg(n.curves);qy(u,s)||c.unshift(new g1(s,6))}}else c.unshift.apply(c,f);n=n.parent}return c.filter(function(x){return Br(x.target,e)})},t}(),am=function(t,e,a,n){t.container.elements.forEach(function(c){var f=Br(c.flags,4),u=Br(c.flags,2),s=new F8(c,t);Br(c.styles.display,2048)&&n.push(s);var x=Br(c.flags,8)?[]:n;if(f||u){var B=f||c.styles.isPositioned()?a:e,I=new E8(s);if(c.styles.isPositioned()||c.styles.opacity<1||c.styles.isTransformed()){var R=c.styles.zIndex.order;if(R<0){var F=0;B.negativeZIndex.some(function(N,D){return R>N.element.container.styles.zIndex.order?(F=D,!1):F>0}),B.negativeZIndex.splice(F,0,I)}else if(R>0){var M=0;B.positiveZIndex.some(function(N,D){return R>=N.element.container.styles.zIndex.order?(M=D+1,!1):M>0}),B.positiveZIndex.splice(M,0,I)}else B.zeroOrAutoZIndexOrTransformedOrOpacity.push(I)}else c.styles.isFloating()?B.nonPositionedFloats.push(I):B.nonPositionedInlineLevel.push(I);am(s,I,f?I:a,x)}else c.styles.isInlineLevel()?e.inlineLevel.push(s):e.nonInlineLevel.push(s),am(s,e,a,x);Br(c.flags,8)&&T8(c,x)})},T8=function(t,e){for(var a=t instanceof im?t.start:1,n=t instanceof im?t.reversed:!1,c=0;c<e.length;c++){var f=e[c];f.container instanceof b8&&typeof f.container.value=="number"&&f.container.value!==0&&(a=f.container.value),f.listValue=s4(a,f.container.styles.listStyleType,!0),a+=n?-1:1}},PS=function(t){var e=new F8(t,null),a=new E8(e),n=[];return am(e,a,a,n),T8(e.container,n),a},Wy=function(t,e){switch(e){case 0:return As(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return As(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return As(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return As(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},QS=function(t,e){switch(e){case 0:return As(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return As(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return As(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return As(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},kS=function(t,e){switch(e){case 0:return As(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return As(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return As(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return As(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},DS=function(t,e){switch(e){case 0:return p1(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return p1(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return p1(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return p1(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},p1=function(t,e){var a=[];return ss(t)?a.push(t.subdivide(.5,!1)):a.push(t),ss(e)?a.push(e.subdivide(.5,!0)):a.push(e),a},As=function(t,e,a,n){var c=[];return ss(t)?c.push(t.subdivide(.5,!1)):c.push(t),ss(a)?c.push(a.subdivide(.5,!0)):c.push(a),ss(n)?c.push(n.subdivide(.5,!0).reverse()):c.push(n),ss(e)?c.push(e.subdivide(.5,!1).reverse()):c.push(e),c},S8=function(t){var e=t.bounds,a=t.styles;return e.add(a.borderLeftWidth,a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth),-(a.borderTopWidth+a.borderBottomWidth))},yg=function(t){var e=t.styles,a=t.bounds,n=Ua(e.paddingLeft,a.width),c=Ua(e.paddingRight,a.width),f=Ua(e.paddingTop,a.width),u=Ua(e.paddingBottom,a.width);return a.add(n+e.borderLeftWidth,f+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+c),-(e.borderTopWidth+e.borderBottomWidth+f+u))},zS=function(t,e){return t===0?e.bounds:t===2?yg(e):S8(e)},ZS=function(t,e){return t===0?e.bounds:t===2?yg(e):S8(e)},s3=function(t,e,a){var n=zS(oh(t.styles.backgroundOrigin,e),t),c=ZS(oh(t.styles.backgroundClip,e),t),f=HS(oh(t.styles.backgroundSize,e),a,n),u=f[0],s=f[1],x=Ud(oh(t.styles.backgroundPosition,e),n.width-u,n.height-s),B=OS(oh(t.styles.backgroundRepeat,e),x,f,n,c),I=Math.round(n.left+x[0]),R=Math.round(n.top+x[1]);return[B,I,R,u,s]},Jc=function(t){return Ka(t)&&t.value===gh.AUTO},m1=function(t){return typeof t=="number"},HS=function(t,e,a){var n=e[0],c=e[1],f=e[2],u=t[0],s=t[1];if(!u)return[0,0];if(gr(u)&&s&&gr(s))return[Ua(u,a.width),Ua(s,a.height)];var x=m1(f);if(Ka(u)&&(u.value===gh.CONTAIN||u.value===gh.COVER)){if(m1(f)){var B=a.width/a.height;return B<f!=(u.value===gh.COVER)?[a.width,a.width/f]:[a.height*f,a.height]}return[a.width,a.height]}var I=m1(n),R=m1(c),F=I||R;if(Jc(u)&&(!s||Jc(s))){if(I&&R)return[n,c];if(!x&&!F)return[a.width,a.height];if(F&&x){var M=I?n:c*f,N=R?c:n/f;return[M,N]}var D=I?n:a.width,V=R?c:a.height;return[D,V]}if(x){var X=0,ee=0;return gr(u)?X=Ua(u,a.width):gr(s)&&(ee=Ua(s,a.height)),Jc(u)?X=ee*f:(!s||Jc(s))&&(ee=X/f),[X,ee]}var Ae=null,ce=null;if(gr(u)?Ae=Ua(u,a.width):s&&gr(s)&&(ce=Ua(s,a.height)),Ae!==null&&(!s||Jc(s))&&(ce=I&&R?Ae/n*c:a.height),ce!==null&&Jc(u)&&(Ae=I&&R?ce/c*n:a.width),Ae!==null&&ce!==null)return[Ae,ce];throw new Error("Unable to calculate background-size for element")},oh=function(t,e){var a=t[e];return typeof a>"u"?t[0]:a},OS=function(t,e,a,n,c){var f=e[0],u=e[1],s=a[0],x=a[1];switch(t){case 2:return[new Jt(Math.round(n.left),Math.round(n.top+u)),new Jt(Math.round(n.left+n.width),Math.round(n.top+u)),new Jt(Math.round(n.left+n.width),Math.round(x+n.top+u)),new Jt(Math.round(n.left),Math.round(x+n.top+u))];case 3:return[new Jt(Math.round(n.left+f),Math.round(n.top)),new Jt(Math.round(n.left+f+s),Math.round(n.top)),new Jt(Math.round(n.left+f+s),Math.round(n.height+n.top)),new Jt(Math.round(n.left+f),Math.round(n.height+n.top))];case 1:return[new Jt(Math.round(n.left+f),Math.round(n.top+u)),new Jt(Math.round(n.left+f+s),Math.round(n.top+u)),new Jt(Math.round(n.left+f+s),Math.round(n.top+u+x)),new Jt(Math.round(n.left+f),Math.round(n.top+u+x))];default:return[new Jt(Math.round(c.left),Math.round(c.top)),new Jt(Math.round(c.left+c.width),Math.round(c.top)),new Jt(Math.round(c.left+c.width),Math.round(c.height+c.top)),new Jt(Math.round(c.left),Math.round(c.height+c.top))]}},XS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Jy="Hidden Text",VS=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,a){var n=this._document.createElement("div"),c=this._document.createElement("img"),f=this._document.createElement("span"),u=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=a,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",u.appendChild(n),c.src=XS,c.width=1,c.height=1,c.style.margin="0",c.style.padding="0",c.style.verticalAlign="baseline",f.style.fontFamily=e,f.style.fontSize=a,f.style.margin="0",f.style.padding="0",f.appendChild(this._document.createTextNode(Jy)),n.appendChild(f),n.appendChild(c);var s=c.offsetTop-f.offsetTop+2;n.removeChild(f),n.appendChild(this._document.createTextNode(Jy)),n.style.lineHeight="normal",c.style.verticalAlign="super";var x=c.offsetTop-n.offsetTop+2;return u.removeChild(n),{baseline:s,middle:x}},t.prototype.getMetrics=function(e,a){var n=e+" "+a;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,a)),this._data[n]},t}(),Y8=function(){function t(e,a){this.context=e,this.options=a}return t}(),GS=1e4;(function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;return c._activeEffects=[],c.canvas=n.canvas?n.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),n.canvas||(c.canvas.width=Math.floor(n.width*n.scale),c.canvas.height=Math.floor(n.height*n.scale),c.canvas.style.width=n.width+"px",c.canvas.style.height=n.height+"px"),c.fontMetrics=new VS(document),c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-n.x,-n.y),c.ctx.textBaseline="bottom",c._activeEffects=[],c.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),c}return e.prototype.applyEffects=function(a){for(var n=this;this._activeEffects.length;)this.popEffect();a.forEach(function(c){return n.applyEffect(c)})},e.prototype.applyEffect=function(a){this.ctx.save(),NS(a)&&(this.ctx.globalAlpha=a.opacity),YS(a)&&(this.ctx.translate(a.offsetX,a.offsetY),this.ctx.transform(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),this.ctx.translate(-a.offsetX,-a.offsetY)),U8(a)&&(this.path(a.path),this.ctx.clip()),this._activeEffects.push(a)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(a){return as(this,void 0,void 0,function(){var n;return Nn(this,function(c){switch(c.label){case 0:return n=a.element.container.styles,n.isVisible()?[4,this.renderStackContent(a)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(a){return as(this,void 0,void 0,function(){return Nn(this,function(n){switch(n.label){case 0:if(Br(a.container.flags,16))debugger;return a.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(a)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(a)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(a,n,c){var f=this;if(n===0)this.ctx.fillText(a.text,a.bounds.left,a.bounds.top+c);else{var u=r4(a.text);u.reduce(function(s,x){return f.ctx.fillText(x,s,a.bounds.top+c),s+f.ctx.measureText(x).width},a.bounds.left)}},e.prototype.createFontStyle=function(a){var n=a.fontVariant.filter(function(u){return u==="normal"||u==="small-caps"}).join(""),c=WS(a.fontFamily).join(", "),f=v0(a.fontSize)?""+a.fontSize.number+a.fontSize.unit:a.fontSize.number+"px";return[[a.fontStyle,n,a.fontWeight,f,c].join(" "),c,f]},e.prototype.renderTextNode=function(a,n){return as(this,void 0,void 0,function(){var c,f,u,s,x,B,I,R,F=this;return Nn(this,function(M){return c=this.createFontStyle(n),f=c[0],u=c[1],s=c[2],this.ctx.font=f,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",x=this.fontMetrics.getMetrics(u,s),B=x.baseline,I=x.middle,R=n.paintOrder,a.textBounds.forEach(function(N){R.forEach(function(D){switch(D){case 0:F.ctx.fillStyle=Fr(n.color),F.renderTextWithLetterSpacing(N,n.letterSpacing,B);var V=n.textShadow;V.length&&N.text.trim().length&&(V.slice(0).reverse().forEach(function(X){F.ctx.shadowColor=Fr(X.color),F.ctx.shadowOffsetX=X.offsetX.number*F.options.scale,F.ctx.shadowOffsetY=X.offsetY.number*F.options.scale,F.ctx.shadowBlur=X.blur.number,F.renderTextWithLetterSpacing(N,n.letterSpacing,B)}),F.ctx.shadowColor="",F.ctx.shadowOffsetX=0,F.ctx.shadowOffsetY=0,F.ctx.shadowBlur=0),n.textDecorationLine.length&&(F.ctx.fillStyle=Fr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(X){switch(X){case 1:F.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top+B),N.bounds.width,1);break;case 2:F.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top),N.bounds.width,1);break;case 3:F.ctx.fillRect(N.bounds.left,Math.ceil(N.bounds.top+I),N.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&N.text.trim().length&&(F.ctx.strokeStyle=Fr(n.webkitTextStrokeColor),F.ctx.lineWidth=n.webkitTextStrokeWidth,F.ctx.lineJoin=window.chrome?"miter":"round",F.ctx.strokeText(N.text,N.bounds.left,N.bounds.top+B)),F.ctx.strokeStyle="",F.ctx.lineWidth=0,F.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(a,n,c){if(c&&a.intrinsicWidth>0&&a.intrinsicHeight>0){var f=yg(a),u=bg(n);this.path(u),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(c,0,0,a.intrinsicWidth,a.intrinsicHeight,f.left,f.top,f.width,f.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(a){return as(this,void 0,void 0,function(){var n,c,f,u,s,x,ee,ee,B,I,R,F,ce,M,N,ue,D,V,X,ee,Ae,ce,ue;return Nn(this,function(oe){switch(oe.label){case 0:this.applyEffects(a.getEffects(4)),n=a.container,c=a.curves,f=n.styles,u=0,s=n.textNodes,oe.label=1;case 1:return u<s.length?(x=s[u],[4,this.renderTextNode(x,f)]):[3,4];case 2:oe.sent(),oe.label=3;case 3:return u++,[3,1];case 4:if(!(n instanceof p8))return[3,8];oe.label=5;case 5:return oe.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return ee=oe.sent(),this.renderReplacedElement(n,c,ee),[3,8];case 7:return oe.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof m8&&this.renderReplacedElement(n,c,n.canvas),!(n instanceof _8))return[3,12];oe.label=9;case 9:return oe.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return ee=oe.sent(),this.renderReplacedElement(n,c,ee),[3,12];case 11:return oe.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof x8&&n.tree?(B=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,B.render(n.tree)]):[3,14];case 13:I=oe.sent(),n.width&&n.height&&this.ctx.drawImage(I,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),oe.label=14;case 14:if(n instanceof n4&&(R=Math.min(n.bounds.width,n.bounds.height),n.type===pg?n.checked&&(this.ctx.save(),this.path([new Jt(n.bounds.left+R*.39363,n.bounds.top+R*.79),new Jt(n.bounds.left+R*.16,n.bounds.top+R*.5549),new Jt(n.bounds.left+R*.27347,n.bounds.top+R*.44071),new Jt(n.bounds.left+R*.39694,n.bounds.top+R*.5649),new Jt(n.bounds.left+R*.72983,n.bounds.top+R*.23),new Jt(n.bounds.left+R*.84,n.bounds.top+R*.34085),new Jt(n.bounds.left+R*.39363,n.bounds.top+R*.79)]),this.ctx.fillStyle=Fr(Oy),this.ctx.fill(),this.ctx.restore()):n.type===mg&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+R/2,n.bounds.top+R/2,R/4,0,Math.PI*2,!0),this.ctx.fillStyle=Fr(Oy),this.ctx.fill(),this.ctx.restore())),jS(n)&&n.value.length){switch(F=this.createFontStyle(f),ce=F[0],M=F[1],N=this.fontMetrics.getMetrics(ce,M).baseline,this.ctx.font=ce,this.ctx.fillStyle=Fr(f.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=$S(n.styles.textAlign),ue=yg(n),D=0,n.styles.textAlign){case 1:D+=ue.width/2;break;case 2:D+=ue.width;break}V=ue.add(D,0,0,-ue.height/2+1),this.ctx.save(),this.path([new Jt(ue.left,ue.top),new Jt(ue.left+ue.width,ue.top),new Jt(ue.left+ue.width,ue.top+ue.height),new Jt(ue.left,ue.top+ue.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Xd(n.value,V),f.letterSpacing,N),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Br(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(X=n.styles.listStyleImage,X.type!==0)return[3,18];ee=void 0,Ae=X.url,oe.label=15;case 15:return oe.trys.push([15,17,,18]),[4,this.context.cache.match(Ae)];case 16:return ee=oe.sent(),this.ctx.drawImage(ee,n.bounds.left-(ee.width+10),n.bounds.top),[3,18];case 17:return oe.sent(),this.context.logger.error("Error loading list-style-image "+Ae),[3,18];case 18:return[3,20];case 19:a.listValue&&n.styles.listStyleType!==-1&&(ce=this.createFontStyle(f)[0],this.ctx.font=ce,this.ctx.fillStyle=Fr(f.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ue=new Ol(n.bounds.left,n.bounds.top+Ua(n.styles.paddingTop,n.bounds.width),n.bounds.width,Iy(f.lineHeight,f.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Xd(a.listValue,ue),f.letterSpacing,Iy(f.lineHeight,f.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),oe.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(a){return as(this,void 0,void 0,function(){var n,c,X,f,u,X,s,x,X,B,I,X,R,F,X,M,N,X,D,V,X;return Nn(this,function(ee){switch(ee.label){case 0:if(Br(a.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(a.element)];case 1:ee.sent(),n=0,c=a.negativeZIndex,ee.label=2;case 2:return n<c.length?(X=c[n],[4,this.renderStack(X)]):[3,5];case 3:ee.sent(),ee.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(a.element)];case 6:ee.sent(),f=0,u=a.nonInlineLevel,ee.label=7;case 7:return f<u.length?(X=u[f],[4,this.renderNode(X)]):[3,10];case 8:ee.sent(),ee.label=9;case 9:return f++,[3,7];case 10:s=0,x=a.nonPositionedFloats,ee.label=11;case 11:return s<x.length?(X=x[s],[4,this.renderStack(X)]):[3,14];case 12:ee.sent(),ee.label=13;case 13:return s++,[3,11];case 14:B=0,I=a.nonPositionedInlineLevel,ee.label=15;case 15:return B<I.length?(X=I[B],[4,this.renderStack(X)]):[3,18];case 16:ee.sent(),ee.label=17;case 17:return B++,[3,15];case 18:R=0,F=a.inlineLevel,ee.label=19;case 19:return R<F.length?(X=F[R],[4,this.renderNode(X)]):[3,22];case 20:ee.sent(),ee.label=21;case 21:return R++,[3,19];case 22:M=0,N=a.zeroOrAutoZIndexOrTransformedOrOpacity,ee.label=23;case 23:return M<N.length?(X=N[M],[4,this.renderStack(X)]):[3,26];case 24:ee.sent(),ee.label=25;case 25:return M++,[3,23];case 26:D=0,V=a.positiveZIndex,ee.label=27;case 27:return D<V.length?(X=V[D],[4,this.renderStack(X)]):[3,30];case 28:ee.sent(),ee.label=29;case 29:return D++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(a){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(a.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(a){this.ctx.beginPath(),this.formatPath(a),this.ctx.closePath()},e.prototype.formatPath=function(a){var n=this;a.forEach(function(c,f){var u=ss(c)?c.start:c;f===0?n.ctx.moveTo(u.x,u.y):n.ctx.lineTo(u.x,u.y),ss(c)&&n.ctx.bezierCurveTo(c.startControl.x,c.startControl.y,c.endControl.x,c.endControl.y,c.end.x,c.end.y)})},e.prototype.renderRepeat=function(a,n,c,f){this.path(a),this.ctx.fillStyle=n,this.ctx.translate(c,f),this.ctx.fill(),this.ctx.translate(-c,-f)},e.prototype.resizeImage=function(a,n,c){var f;if(a.width===n&&a.height===c)return a;var u=(f=this.canvas.ownerDocument)!==null&&f!==void 0?f:document,s=u.createElement("canvas");s.width=Math.max(1,n),s.height=Math.max(1,c);var x=s.getContext("2d");return x.drawImage(a,0,0,a.width,a.height,0,0,n,c),s},e.prototype.renderBackgroundImage=function(a){return as(this,void 0,void 0,function(){var n,c,f,u,s,x;return Nn(this,function(B){switch(B.label){case 0:n=a.styles.backgroundImage.length-1,c=function(I){var R,F,M,de,at,et,we,Ve,H,N,de,at,et,we,Ve,D,V,X,ee,Ae,ce,ue,oe,q,H,$,de,ge,ye,we,Ve,ut,at,et,xt,Mt,Yt,rt,pt,je,Qe,tt;return Nn(this,function(bt){switch(bt.label){case 0:if(I.type!==0)return[3,5];R=void 0,F=I.url,bt.label=1;case 1:return bt.trys.push([1,3,,4]),[4,f.context.cache.match(F)];case 2:return R=bt.sent(),[3,4];case 3:return bt.sent(),f.context.logger.error("Error loading background-image "+F),[3,4];case 4:return R&&(M=s3(a,n,[R.width,R.height,R.width/R.height]),de=M[0],at=M[1],et=M[2],we=M[3],Ve=M[4],H=f.ctx.createPattern(f.resizeImage(R,we,Ve),"repeat"),f.renderRepeat(de,H,at,et)),[3,6];case 5:$E(I)?(N=s3(a,n,[null,null,null]),de=N[0],at=N[1],et=N[2],we=N[3],Ve=N[4],D=XE(I.angle,we,Ve),V=D[0],X=D[1],ee=D[2],Ae=D[3],ce=D[4],ue=document.createElement("canvas"),ue.width=we,ue.height=Ve,oe=ue.getContext("2d"),q=oe.createLinearGradient(X,Ae,ee,ce),My(I.stops,V).forEach(function(dt){return q.addColorStop(dt.stop,Fr(dt.color))}),oe.fillStyle=q,oe.fillRect(0,0,we,Ve),we>0&&Ve>0&&(H=f.ctx.createPattern(ue,"repeat"),f.renderRepeat(de,H,at,et))):qE(I)&&($=s3(a,n,[null,null,null]),de=$[0],ge=$[1],ye=$[2],we=$[3],Ve=$[4],ut=I.position.length===0?[t4]:I.position,at=Ua(ut[0],we),et=Ua(ut[ut.length-1],Ve),xt=VE(I,at,et,we,Ve),Mt=xt[0],Yt=xt[1],Mt>0&&Yt>0&&(rt=f.ctx.createRadialGradient(ge+at,ye+et,0,ge+at,ye+et,Mt),My(I.stops,Mt*2).forEach(function(dt){return rt.addColorStop(dt.stop,Fr(dt.color))}),f.path(de),f.ctx.fillStyle=rt,Mt!==Yt?(pt=a.bounds.left+.5*a.bounds.width,je=a.bounds.top+.5*a.bounds.height,Qe=Yt/Mt,tt=1/Qe,f.ctx.save(),f.ctx.translate(pt,je),f.ctx.transform(1,0,0,Qe,0,0),f.ctx.translate(-pt,-je),f.ctx.fillRect(ge,tt*(ye-je)+je,we,Ve*tt),f.ctx.restore()):f.ctx.fill())),bt.label=6;case 6:return n--,[2]}})},f=this,u=0,s=a.styles.backgroundImage.slice(0).reverse(),B.label=1;case 1:return u<s.length?(x=s[u],[5,c(x)]):[3,4];case 2:B.sent(),B.label=3;case 3:return u++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(a,n,c){return as(this,void 0,void 0,function(){return Nn(this,function(f){return this.path(Wy(c,n)),this.ctx.fillStyle=Fr(a),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(a,n,c,f){return as(this,void 0,void 0,function(){var u,s;return Nn(this,function(x){switch(x.label){case 0:return n<3?[4,this.renderSolidBorder(a,c,f)]:[3,2];case 1:return x.sent(),[2];case 2:return u=QS(f,c),this.path(u),this.ctx.fillStyle=Fr(a),this.ctx.fill(),s=kS(f,c),this.path(s),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(a){return as(this,void 0,void 0,function(){var n,c,f,u,s,x,B,I,R=this;return Nn(this,function(F){switch(F.label){case 0:return this.applyEffects(a.getEffects(2)),n=a.container.styles,c=!fh(n.backgroundColor)||n.backgroundImage.length,f=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],u=KS(oh(n.backgroundClip,0),a.curves),c||n.boxShadow.length?(this.ctx.save(),this.path(u),this.ctx.clip(),fh(n.backgroundColor)||(this.ctx.fillStyle=Fr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(a.container)]):[3,2];case 1:F.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(M){R.ctx.save();var N=_g(a.curves),D=M.inset?0:GS,V=LS(N,-D+(M.inset?1:-1)*M.spread.number,(M.inset?1:-1)*M.spread.number,M.spread.number*(M.inset?-2:2),M.spread.number*(M.inset?-2:2));M.inset?(R.path(N),R.ctx.clip(),R.mask(V)):(R.mask(N),R.ctx.clip(),R.path(V)),R.ctx.shadowOffsetX=M.offsetX.number+D,R.ctx.shadowOffsetY=M.offsetY.number,R.ctx.shadowColor=Fr(M.color),R.ctx.shadowBlur=M.blur.number,R.ctx.fillStyle=M.inset?Fr(M.color):"rgba(0,0,0,1)",R.ctx.fill(),R.ctx.restore()}),F.label=2;case 2:s=0,x=0,B=f,F.label=3;case 3:return x<B.length?(I=B[x],I.style!==0&&!fh(I.color)&&I.width>0?I.style!==2?[3,5]:[4,this.renderDashedDottedBorder(I.color,I.width,s,a.curves,2)]:[3,11]):[3,13];case 4:return F.sent(),[3,11];case 5:return I.style!==3?[3,7]:[4,this.renderDashedDottedBorder(I.color,I.width,s,a.curves,3)];case 6:return F.sent(),[3,11];case 7:return I.style!==4?[3,9]:[4,this.renderDoubleBorder(I.color,I.width,s,a.curves)];case 8:return F.sent(),[3,11];case 9:return[4,this.renderSolidBorder(I.color,s,a.curves)];case 10:F.sent(),F.label=11;case 11:s++,F.label=12;case 12:return x++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(a,n,c,f,u){return as(this,void 0,void 0,function(){var s,x,B,I,R,F,M,N,D,V,X,ee,Ae,ce,ue,oe,ue,oe;return Nn(this,function(q){return this.ctx.save(),s=DS(f,c),x=Wy(f,c),u===2&&(this.path(x),this.ctx.clip()),ss(x[0])?(B=x[0].start.x,I=x[0].start.y):(B=x[0].x,I=x[0].y),ss(x[1])?(R=x[1].end.x,F=x[1].end.y):(R=x[1].x,F=x[1].y),c===0||c===2?M=Math.abs(B-R):M=Math.abs(I-F),this.ctx.beginPath(),u===3?this.formatPath(s):this.formatPath(x.slice(0,2)),N=n<3?n*3:n*2,D=n<3?n*2:n,u===3&&(N=n,D=n),V=!0,M<=N*2?V=!1:M<=N*2+D?(X=M/(2*N+D),N*=X,D*=X):(ee=Math.floor((M+D)/(N+D)),Ae=(M-ee*N)/(ee-1),ce=(M-(ee+1)*N)/ee,D=ce<=0||Math.abs(D-Ae)<Math.abs(D-ce)?Ae:ce),V&&(u===3?this.ctx.setLineDash([0,N+D]):this.ctx.setLineDash([N,D])),u===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Fr(a),this.ctx.stroke(),this.ctx.setLineDash([]),u===2&&(ss(x[0])&&(ue=x[3],oe=x[0],this.ctx.beginPath(),this.formatPath([new Jt(ue.end.x,ue.end.y),new Jt(oe.start.x,oe.start.y)]),this.ctx.stroke()),ss(x[1])&&(ue=x[1],oe=x[2],this.ctx.beginPath(),this.formatPath([new Jt(ue.end.x,ue.end.y),new Jt(oe.start.x,oe.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(a){return as(this,void 0,void 0,function(){var n;return Nn(this,function(c){switch(c.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Fr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=PS(a),[4,this.renderStack(n)];case 1:return c.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(Y8);var jS=function(t){return t instanceof v8||t instanceof y8?!0:t instanceof n4&&t.type!==mg&&t.type!==pg},KS=function(t,e){switch(t){case 0:return _g(e);case 2:return FS(e);case 1:default:return bg(e)}},$S=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},qS=["-apple-system","system-ui"],WS=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return qS.indexOf(e)===-1}):t};(function(t){Ds(e,t);function e(a,n){var c=t.call(this,a,n)||this;return c.canvas=n.canvas?n.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),c.options=n,c.canvas.width=Math.floor(n.width*n.scale),c.canvas.height=Math.floor(n.height*n.scale),c.canvas.style.width=n.width+"px",c.canvas.style.height=n.height+"px",c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-n.x,-n.y),c.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),c}return e.prototype.render=function(a){return as(this,void 0,void 0,function(){var n,c;return Nn(this,function(f){switch(f.label){case 0:return n=tm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,a),[4,JS(n)];case 1:return c=f.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Fr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(c,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(Y8);var JS=function(t){return new Promise(function(e,a){var n=new Image;n.onload=function(){e(n)},n.onerror=a,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&US.setContext(window);const eY=(t,e)=>{const[a,n,c,f]=e,u=t.lng,s=t.lat;return u>=a&&u<=c&&s>=n&&s<=f},tY=(t,e)=>{const[a,n,c,f]=t,[u,s,x,B]=e;return a<x&&c>u&&n<B&&f>s};var iY={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]};function aY(t,e,a){return t*(1-a)+e*a}var rY=aY,ev=iY,_1=rY,nY=sY;function sY(t){var e,a,n,c,f,u,s,x,F,B,I;if(t||(t={}),x=(t.nshades||72)-1,s=t.format||"hex",u=t.colormap,u||(u="jet"),typeof u=="string"){if(u=u.toLowerCase(),!ev[u])throw Error(u+" not a supported colorscale");f=ev[u]}else if(Array.isArray(u))f=u.slice();else throw Error("unsupported colormap option",u);if(f.length>x+1)throw new Error(u+" map requires nshades to be at least size "+f.length);Array.isArray(t.alpha)?t.alpha.length!==2?B=[1,1]:B=t.alpha.slice():typeof t.alpha=="number"?B=[t.alpha,t.alpha]:B=[1,1],e=f.map(function(D){return Math.round(D.index*x)}),B[0]=Math.min(Math.max(B[0],0),1),B[1]=Math.min(Math.max(B[1],0),1);var R=f.map(function(D,V){var X=f[V].index,ee=f[V].rgb.slice();return ee.length===4&&ee[3]>=0&&ee[3]<=1||(ee[3]=B[0]+(B[1]-B[0])*X),ee}),F=[];for(I=0;I<e.length-1;++I){c=e[I+1]-e[I],a=R[I],n=R[I+1];for(var M=0;M<c;M++){var N=M/c;F.push([Math.round(_1(a[0],n[0],N)),Math.round(_1(a[1],n[1],N)),Math.round(_1(a[2],n[2],N)),_1(a[3],n[3],N)])}}return F.push(f[f.length-1].rgb.concat(B[1])),s==="hex"?F=F.map(AY):s==="rgbaString"?F=F.map(lY):s==="float"&&(F=F.map(oY)),F}function oY(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function AY(t){for(var e,a="#",n=0;n<3;++n)e=t[n],e=e.toString(16),a+=("00"+e).substr(e.length);return a}function lY(t){return"rgba("+t.join(",")+")"}const cY=g6(nY),Nl=class Nl{constructor(e=500){Ia(this,"cache");Ia(this,"cacheSizeLimit");Ia(this,"cacheOrder");this.cache=new Map,this.cacheSizeLimit=e,this.cacheOrder=[]}static getInstance(e=500){return Nl.instance||(Nl.instance=new Nl(e)),Nl.instance}async loadImage(e,a){try{const n=await fetch(e,{signal:a});if(!n.ok)throw new Error("Failed to fetch image");return await createImageBitmap(await n.blob())}catch(n){if(n instanceof Error&&n.name==="AbortError")throw n;return await createImageBitmap(new ImageData(1,1))}}async getAdjacentTilesWithImages(e,a,n,c,f){const u=[{position:"center",dx:0,dy:0},{position:"left",dx:-1,dy:0},{position:"right",dx:1,dy:0},{position:"top",dx:0,dy:-1},{position:"bottom",dx:0,dy:1}],s={};return await Promise.all(u.map(async({position:x,dx:B,dy:I})=>{const R=e+B,F=a+I,M=c.replace("{x}",R.toString()).replace("{y}",F.toString()).replace("{z}",n.toString()),N=this.cache.has(M)?this.cache.get(M):await this.loadImage(M,f.signal);N&&(this.add(M,N),s[x]={tileId:M,image:N})})),s}add(e,a){if(this.cacheOrder.length>=this.cacheSizeLimit){const c=this.cacheOrder.shift();c&&this.cache.delete(c)}this.cache.set(e,a);const n=this.cacheOrder.indexOf(e);n>-1&&this.cacheOrder.splice(n,1),this.cacheOrder.push(e)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}clear(){this.cache.clear(),this.cacheOrder=[]}};Ia(Nl,"instance");let vg=Nl;class hY{constructor(){Ia(this,"cache");this.cache=new Map}createColorArray(e){const a=`${e}`;if(this.has(a))return this.get(a);const n=256,c=new Uint8Array(n*3);let u=cY({colormap:e,nshades:n,format:"rgb",alpha:1}),s=0;for(let x=0;x<n;x++){const B=u[x];c[s++]=B[0],c[s++]=B[1],c[s++]=B[2]}return this.cache.set(a,c),c}add(e,a){this.cache.set(e,a)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}}const uY={elevation:{opacity:1,maxHeight:3776,minHeight:0},shadow:{opacity:.8,shadowColor:"#000000",highlightColor:"#00ff9d",ambient:.3,azimuth:0,altitude:30},edge:{opacity:.9,edgeIntensity:.4,edgeColor:"#ffffff"}};let dY=class{constructor(e){Ia(this,"worker");Ia(this,"pendingRequests");Ia(this,"tileCache");Ia(this,"colorMapCache");Ia(this,"handleMessage",e=>{const{id:a,buffer:n,error:c}=e.data,f=this.pendingRequests.get(a);c?(console.error(`Error processing tile ${a}:`,c),f&&(f.reject(new Error(c)),this.pendingRequests.delete(a))):f&&(f.resolve({data:n}),this.pendingRequests.delete(a))});this.worker=e,this.pendingRequests=new Map,this.tileCache=vg.getInstance(),this.colorMapCache=new hY,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,a){const n=parseInt(e.searchParams.get("x")||"0",10),c=parseInt(e.searchParams.get("y")||"0",10),f=parseInt(e.searchParams.get("z")||"0",10),s=await this.tileCache.getAdjacentTilesWithImages(n,c,f,"https://cyberjapandata.gsi.go.jp/xyz/dem5a_png/{z}/{x}/{y}.png",a);return new Promise((x,B)=>{const I=s.center,R=I.tileId,F=s.left,M=s.right,N=s.top,D=s.bottom;this.pendingRequests.set(R,{resolve:x,reject:B,controller:a});const V=this.colorMapCache.createColorArray("cool");this.worker.postMessage({tileId:R,center:I.image,left:F.image,right:M.image,top:N.image,bottom:D.image,z:f,uniformsData:uY,elevationColorArray:V})})}handleError(e){console.error("Worker error:",e),this.pendingRequests.forEach(a=>{a.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()}cancelAllRequests(){this.pendingRequests.size>0&&this.pendingRequests.forEach(({reject:e,controller:a})=>{a.abort(),e(new Error("Request cancelled"))}),console.info("All requests have been cancelled."),this.pendingRequests.clear()}clearCache(){this.tileCache.clear()}};class fY{constructor(e){Ia(this,"workers",[]);Ia(this,"workerIndex",0);Ia(this,"poolSize");this.poolSize=e;for(let a=0;a<e;a++){const n=new Worker(new URL(""+new URL("../workers/worker-TVW-fspo.js",import.meta.url).href,import.meta.url),{type:"module"});this.workers.push(new dY(n))}}getNextWorker(){const e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.poolSize,e}async request(e,a){return this.getNextWorker().request(e,a)}cancelAllRequests(){this.workers.forEach(e=>e.cancelAllRequests())}clearCache(){this.workers.forEach(e=>e.clearCache())}}const o3=new fY(2),gY=t=>({protocolName:t,request:(e,a)=>{const n=e.url.replace(`${t}://`,""),c=new URL(n);return o3.request(c,a)},cancelAllRequests:()=>o3.cancelAllRequests(),clearCache:()=>o3.clearCache()});function pY(t,e={}){const a=Number(t[0]),n=Number(t[1]),c=Number(t[2]),f=Number(t[3]);if(t.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const u=[a,n];return $7([[u,[c,n],[c,f],[a,f],u]],e.properties,{bbox:t,id:e.id})}var tv=pY;let mY=class{constructor(e){Ia(this,"worker");Ia(this,"pendingRequests");Ia(this,"handleMessage",e=>{const{id:a,buffer:n,error:c}=e.data;if(c){const f=this.pendingRequests.get(a);f&&(f.resolve({data:new Uint8Array}),this.pendingRequests.delete(a))}else{const f=this.pendingRequests.get(a);f&&(f.resolve({data:n}),this.pendingRequests.delete(a))}});Ia(this,"handleError",e=>{console.error("Worker error:",e),this.pendingRequests.forEach(a=>{a.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()});this.worker=e,this.pendingRequests=new Map,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,a){try{const n=parseInt(e.searchParams.get("x")||"0",10),c=parseInt(e.searchParams.get("y")||"0",10),f=parseInt(e.searchParams.get("z")||"0",10),u=Hb([n,c,f]),s=tv(u),B={type:"FeatureCollection",features:iM([n,c,f]).map(F=>{const[M,N,D]=F,V=Hb([M,N,D]);return{...tv(V),properties:{x:n,y:c,z:f,index:`${D}/${M}/${N}`}}})};console.log(B);const{signal:I}=a,R=`${f}/${n}/${c}_tile_index`;return new Promise((F,M)=>{this.pendingRequests.set(R,{resolve:F,reject:M}),I.addEventListener("abort",()=>{this.pendingRequests.delete(R),M(new Error("Request aborted"))}),this.worker.postMessage({id:R,z:f,x:n,y:c,geojson:B})})}catch(n){return Promise.reject(n)}}};const _Y=new Worker(new URL(""+new URL("../workers/worker-DfC3PjOV.js",import.meta.url).href,import.meta.url),{type:"module"}),bY=new mY(_Y),yY=t=>({protocolName:t,request:(e,a)=>{const n=e.url.replace(`${t}://`,"");console.log("urlWithoutProtocol",n);const c=new URL(n);return bY.request(c,a)}}),vY={mapbox:0,gsi:1,terrarium:2},io=[{id:"dem_10b",name:"基盤地図情報数値標高モデル DEM10B",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:14,attribution:"国土地理院",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"dem_5a",name:"基盤地図情報数値標高モデル DEM5A",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem5a_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:15,attribution:"国土地理院",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"dem_5b",name:"基盤地図情報数値標高モデル DEM5B",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem5b_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:15,attribution:"国土地理院",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"dem_5c",name:"基盤地図情報数値標高モデル DEM5C",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem5c_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:15,attribution:"国土地理院",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"tochigi_dem",name:"栃木県 数値標高モデル(DEM)0.5m",tiles:["https://rinya-tochigi.geospatial.jp/2023/rinya/tile/terrainRGB/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[139.326731,36.199924,140.291983,37.155039],attribution:"栃木県",demType:"mapbox"},{id:"kochi_dem",name:"高知県 数値標高モデル(DEM)0.5m",tiles:["https://rinya-kochi.geospatial.jp/2023/rinya/tile/terrainRGB/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[132.479888,32.702505,134.31367,33.882997],attribution:"高知県",demType:"mapbox"},{id:"hyougo_dem",name:"兵庫県 DEM 1m",tiles:["https://tiles.gsj.jp/tiles/elev/hyogodem/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:17,bbox:[134.252809,34.156129,135.468591,35.674667],attribution:"兵庫県",demType:"gsi"},{id:"hyougo_dsm",name:"兵庫県 DSM 1m",tiles:["https://tiles.gsj.jp/tiles/elev/hyogodsm/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:17,bbox:[134.252809,34.156129,135.468591,35.674667],attribution:"兵庫県",demType:"gsi"},{id:"tokyo",name:"東京都",tiles:["https://tiles.gsj.jp/tiles/elev/tokyo/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:19,bbox:[138.942922,32.440258,139.861054,35.898368],attribution:"産総研シームレス標高タイル",demType:"gsi"},{id:"kanagawa",name:"神奈川県",tiles:["https://tiles.gsj.jp/tiles/elev/kanagawa/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[138.9401382,35.1277755,139.7471238,35.6730819],attribution:"産総研シームレス標高タイル",demType:"gsi"},{id:"rinya_toyama_dem",name:"富山県 DEM",tiles:["https://forestgeo.info/opendata/16_toyama/dem_terrainRGB_2021/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[136.75028275928693,36.24106589467564,137.80860073361887,37.01815476882866],attribution:"林野庁",demType:"mapbox"},{id:"rinya_toyama_dchm",name:"富山県 dchm",tiles:["https://forestgeo.info/opendata/16_toyama/dchm_terrainRGB_2021/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[136.75028275928693,36.24106589467564,137.80860073361887,37.01815476882866],attribution:"林野庁",demType:"mapbox"},{id:"rinya_nagaoka_dem",name:"林野庁 DEM 0.5m（長岡地域2024）",tiles:["https://cf192141.cloudfree.jp/nagaoka/dem_terrainRGB_15_2024/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[138.4714917,37.145854,139.2533006,37.744387],attribution:"林野庁",demType:"mapbox"},{id:"rinya_nagaoka_dsm",name:"林野庁 DCHM 0.5m（長岡地域2024）",tiles:["https://cf192141.cloudfree.jp/nagaoka/dchm_terrainRGB_15_2024/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[138.4714917,37.145854,139.2533006,37.744387],attribution:"林野庁",demType:"mapbox"},{id:"astergdemv3",name:"ASTER全球3次元地形データ",tiles:["https://tiles.gsj.jp/tiles/elev/astergdemv3/{z}/{y}/{x}.png"],tileSize:256,minzoom:1,maxzoom:12,attribution:"産総研シームレス標高タイル",bbox:[-180,-85.051129,180,85.051129],demType:"gsi"},{id:"gebco",name:"GEBCO Grid",tiles:["https://tiles.gsj.jp/tiles/elev/gebco/{z}/{y}/{x}.png"],tileSize:256,minzoom:0,maxzoom:9,attribution:"産総研シームレス標高タイル",bbox:[-180,-85.051129,180,85.051129],demType:"gsi"},{id:"tilezen",name:"Tilezen Joerd",tiles:["https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png"],tileSize:256,minzoom:0,maxzoom:15,attribution:'<a href="https://github.com/tilezen/joerd/blob/master/docs/attribution.md">Tilezen Joerd: Attribution</a>',bbox:[-180,-85.051129,180,85.051129],demType:"terrarium"},{id:"lakedepth",name:"湖水深タイル",tiles:["https://cyberjapandata.gsi.go.jp/xyz/lakedepth/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:14,attribution:"国土地理院",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"gsigeoid",name:"ジオイド・モデル「日本のジオイド2011」",tiles:["https://tiles.gsj.jp/tiles/elev/gsigeoid/{z}/{y}/{x}.png"],tileSize:256,minzoom:0,maxzoom:8,attribution:"産総研シームレス標高タイル",bbox:[120,20,150,50],demType:"gsi"}],dr={name:io[0].name,demType:io[0].demType,url:io[0].tiles[0],sourceMaxZoom:io[0].maxzoom,sourceMinZoom:io[0].minzoom,attribution:io[0].attribution,bbox:io[0].bbox};class xY{constructor(e){Ia(this,"worker");Ia(this,"pendingRequests");Ia(this,"tileCache");Ia(this,"handleMessage",e=>{const{id:a,buffer:n,error:c}=e.data,f=this.pendingRequests.get(a);c?(console.error(`Error processing tile ${a}:`,c),f&&(f.reject(new Error(c)),this.pendingRequests.delete(a))):f?(f.resolve({data:n}),this.pendingRequests.delete(a)):console.warn(`No pending request found for tile ${a}`)});Ia(this,"handleError",e=>{console.error("Worker error:",e),this.pendingRequests.forEach(a=>{a.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()});Ia(this,"cancelAllRequests",()=>{this.pendingRequests.size>0&&this.pendingRequests.forEach(({reject:e,controller:a})=>{a.abort(),e(new Error("Request cancelled"))}),this.pendingRequests.clear()});this.worker=e,this.pendingRequests=new Map,this.tileCache=vg.getInstance(),this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,a){try{const n=dr.demType;let c;return this.tileCache.has(e)?c=this.tileCache.get(e):(c=await this.tileCache.loadImage(e,a.signal),this.tileCache.add(e,c)),new Promise((f,u)=>{const s=vY[n];this.pendingRequests.set(e,{resolve:f,reject:u,controller:a}),this.worker.postMessage({image:c,demTypeNumber:s,id:e}),a.signal.addEventListener("abort",()=>{this.pendingRequests.delete(e),u(new Error("Request aborted"))})})}catch(n){return Promise.reject(n)}}clearCache(){this.tileCache.clear()}}const wY=new Worker(new URL(""+new URL("../workers/worker-qG8lXCev.js",import.meta.url).href,import.meta.url),{type:"module"}),A3=new xY(wY),BY=t=>({protocolName:t,request:(e,a)=>{const n=e.url.replace(`${t}://`,"");return A3.request(n,a)},cancelAllRequests:()=>A3.cancelAllRequests(),clearCache:()=>A3.clearCache()}),o4=document.createElement("canvas");o4.width=512;o4.height=512;const CY=o4.getContext("webgl");CY||console.error("WebGL not supported");let Vd=null;const A4=new Worker(new URL(""+new URL("../workers/worker-Re_ZkM3K.js",import.meta.url).href,import.meta.url),{type:"module"});A4.onmessage=async t=>{const{imageBitmap:e,id:a}=t.data;Vd&&!Vd.hasImage(a)&&Vd.addImage(a,e,{pixelRatio:2})};A4.onerror=t=>{console.error("Worker error:",t)};const MY=async t=>{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch image");const a=await e.blob();return await createImageBitmap(a)},RY=async(t,e)=>{if(!e)return;Vd=e;const a=t.id;if(!Vd.hasImage(a))try{const n=ug[a].image;if(!n)return;const c=await MY(n);A4.postMessage({id:a,image:c})}catch(n){console.error(`Error processing image for id ${a}:`,n)}},IY=new HC;Ps.addProtocol("pmtiles",IY.tile);const iv=gY("webgl");Ps.addProtocol(iv.protocolName,iv.request);const xg=BY("terrain");Ps.addProtocol(xg.protocolName,xg.request);const av=yY("tile_index");Ps.addProtocol(av.protocolName,av.request);const UY=()=>{let t=null,e=null;const{subscribe:a,set:n}=yn(null),c=yn(null),f=yn(null),u=yn(null),s=yn(null),x=yn(null),B=yn(null),I=yn(!0),R=yn(null),F=yn(null),M=(ye,we)=>{const Ve=KI(location.search);Ve&&Ve.debug&&Ve.debug==="1"&&rg.set(!0);const ut=$I();e=new Ps.Map({...ut,container:ye,style:we,fadeDuration:50,attributionControl:!1,localIdeographFontFamily:!1,maxPitch:85}),Zo(rg)&&(e.showTileBoundaries=!0),B.set(we),e&&(e.on("click",at=>{c.set(at)}),e.on("data",function(at){I.set(!0)}),e.on("idle",function(at){I.set(!1)}),e.on("rotate",at=>{if(!e)return;const et=e.getBearing();s.set(et)}),e.on("mousedown",at=>{}),e.on("mouseup",at=>{}),e.on("mouseover",at=>{f.set(at)}),e.on("mouseout",at=>{u.set(at)}),e.on("moveend",at=>{if(!e)return;const et=e.getCenter();qI({center:[et.lng,et.lat],zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()}),R.set(at)}),e.on("zoom",at=>{if(!e)return;const et=e.getZoom();x.set(et)}),e.on("styleimagemissing",at=>RY(at,e)),F.set(e))},N=ye=>{e&&(B.set(ye),e.setStyle(ye))},D=(ye,we)=>{e&&(t=new Ps.Marker({element:ye}).setLngLat(we).addTo(e))},V=async()=>{if(!e)return;const ye=e.getCanvasContainer(),we=ye.clientWidth,Ve=ye.clientHeight;return{canvas:ye,witdh:we,height:Ve}},X=()=>{!e||!t||t.remove()},ee=()=>{!e||!e.getTerrain()||setTimeout(()=>{e&&e.terrain.sourceCache.sourceCache.reload()},200)},Ae=(ye,we)=>e==null?void 0:e.queryRenderedFeatures(ye,we),ce=(ye,we)=>{e&&e.panTo(ye,we)},ue=ye=>{e&&e.easeTo(ye)},oe=async ye=>{if(e)if(ye.format.type==="fgb")try{const we=Bd.get(ye.id);if(!we)return;const Ve=ub(we);e.fitBounds(Ve,{bearing:e.getBearing(),padding:100,duration:500})}catch(we){console.error(we)}else if(ye.metaData.bounds)e.fitBounds(ye.metaData.bounds,{bearing:e.getBearing(),padding:100,duration:500});else if(ye.metaData.location){const we=YI(ye.metaData.location);we&&e.fitBounds(we,{bearing:e.getBearing(),padding:100,duration:500})}else console.warn("フォーカスの処理に対応してません",ye.id)},q=async ye=>{if(!e)return;const we=ub(ye.geometry);e.fitBounds(we)},H=ye=>{if(!e)return;const we="search_source",Ve={};Ve[we]={type:"geojson",data:{type:"FeatureCollection",features:[ye]}},e.getSource(we)&&e.removeSource(we),e.addSource(we,Ve[we]);const ut="search_layer",at=[],et={id:ut,source:we};switch(ye.geometry.type){case"Point":at.push({...et,type:"circle",paint:{"circle-radius":10,"circle-color":"#ff0000"}});break;case"LineString":case"MultiLineString":at.push({...et,type:"line",paint:{"line-width":5,"line-color":"#ff0000"}});break;case"Polygon":case"MultiPolygon":at.push({...et,type:"fill",paint:{"fill-color":"#ff0000","fill-opacity":.5}});break}e.addLayer(at[0])},$=()=>{if(!e)return;const{_sw:ye,_ne:we}=e.getBounds();return{minX:ye.lng,minY:ye.lat,maxX:we.lng,maxY:we.lat}},de=()=>{if(!e){console.warn("Map is not ready yet.");return}const ye=e.getStyle(),we={...ye.sources},Ve=[...ye.layers];for(const ut of Ve)e.getLayer(ut.id)&&e.removeLayer(ut.id);for(const ut in we)e.getSource(ut)&&e.removeSource(ut);for(const[ut,at]of Object.entries(we))e.addSource(ut,at);for(const ut of Ve)e.addLayer(ut);Zo(SA)&&e.setTerrain({source:"terrain",exaggeration:1})},ge=()=>{if(!e)return;e.setTerrain(null),e.removeSource("terrain"),xg.cancelAllRequests(),e.addSource("terrain",{type:"raster-dem",tiles:[`${xg.protocolName}://${dr.url}?demType=${dr.demType}`],tileSize:256,minzoom:dr.sourceMinZoom,maxzoom:dr.sourceMaxZoom,attribution:dr.attribution,bounds:dr.bbox}),e.setTerrain({source:"terrain",exaggeration:1});const ye=dr.bbox;if(!ye)return;const we=e.getBounds().toArray();e.getZoom(),tY(dr.bbox,[...we[0],...we[1]])||e.fitBounds(ye,{padding:100,duration:300,bearing:e.getBearing()}),de(),ee()};return{subscribe:a,init:M,setStyle:N,addLockonMarker:D,removeLockonMarker:X,getLockonMarker:()=>t,getMap:()=>e,queryRenderedFeatures:Ae,getZoom:()=>e==null?void 0:e.getZoom(),getCenter:()=>e==null?void 0:e.getCenter(),getPitch:()=>e==null?void 0:e.getPitch(),getBearing:()=>e==null?void 0:e.getBearing(),setBearing:ye=>e==null?void 0:e.setBearing(ye),panTo:ce,easeTo:ye=>ue(ye),addSearchFeature:H,focusLayer:oe,focusFeature:q,onSetStyle:B.subscribe,getTerrain:()=>e==null?void 0:e.getTerrain(),getBounds:$,onClick:c.subscribe,onMouseover:f.subscribe,onMouseout:u.subscribe,onRotate:s.subscribe,onZoom:x.subscribe,onMooveEnd:R.subscribe,onLoading:I.subscribe,onInitialized:F.subscribe,terrainReload:ee,resetDem:ge,resetAllSourcesAndLayers:de,getMapContainer:V}},da=UY();var EY=(t,e)=>e(null),FY=ft('<div class="relative aspect-video w-full shrink-0 overflow-hidden rounded-md"><img class="block h-full w-full object-cover" crossOrigin="anonymous" alt="画像"></div>'),TY=ft('<a class="flex w-full items-center justify-start gap-2" target="_blank" rel="noopener noreferrer"><!> <span class="text-accent"> </span></a>'),SY=ft('<span class="my-2 text-base"> </span> <div class="w-hull bg-base h-[1px] rounded-full"></div>',1),YY=ft('<div class="bg-main w-side-menu absolute left-0 top-0 z-20 flex h-full flex-col gap-2 overflow-hidden px-2 pt-4"><div class="flex w-full cursor-pointer justify-between pb-2"><button class="bg-base mr-auto cursor-pointer rounded-full p-2"><!></button></div> <!> <div class="flex h-full flex-col gap-2"><div class="flex shrink-0 grow flex-col gap-1 text-base"><span class="text-[22px] font-bold"> </span> <span class="text-[14px] text-gray-300"> </span></div>  <div class="c-scroll flex h-full w-full grow flex-col overflow-y-auto overflow-x-hidden"><div class="flex h-full w-full flex-col gap-2"><div class="flex w-full items-center justify-start gap-2"><!> <span class="text-accent"> </span></div> <!> <div class="w-hull bg-base h-[1px] rounded-full"></div> <!></div> <div class="flex h-full w-full flex-col gap-2"><div class="my-4 text-base text-lg">属性情報</div> <!></div></div></div></div>');function NY(t,e){mi(e,!0);let a=si(e,"featureMenuData",15),n=$t("metadata"),c=ra(()=>a()?e.layerEntries.find(R=>a()&&R.id===a().layerId):null),f=ra(()=>a()&&a().properties?ug[a().properties._prop_id]:null),u=ra(()=>{if(a()){const I=e.layerEntries.find(R=>a()&&R.id===a().layerId);if(I&&I.type==="vector"&&W(f)&&W(f).image)return W(f).image}return null});Nr(()=>{if(a()){const I=da.getMap();if(!I)return;const R=I.getLayer(a().layerId);if(!R)return;R.type==="raster"||!a().properties||!a().properties._prop_id?st(n,"metadata"):st(n,"attributes")}}),Nr(()=>{a()&&a().properties&&a().properties._prop_id?st(n,"metadata"):st(n,"attributes")});var s=vi(),x=kt(s);{var B=I=>{var R=YY(),F=Le(R),M=Le(F);M.__click=[EY,a];var N=Le(M);yi(N,{icon:"ep:back",class:"text-main h-4 w-4"}),Ee(M),Ee(F);var D=Oe(F,2);{var V=Yt=>{var rt=FY(),pt=Le(rt);Ee(rt),di(()=>ja(pt,"src",W(u))),ba(3,pt,()=>ls),Xe(Yt,rt)};It(D,Yt=>{W(u)&&Yt(V)})}var X=Oe(D,2),ee=Le(X),Ae=Le(ee),ce=Le(Ae,!0);Ee(Ae);var ue=Oe(Ae,2),oe=Le(ue,!0);Ee(ue),Ee(ee);var q=Oe(ee,2),H=Le(q),$=Le(H),de=Le($);yi(de,{icon:"lucide:map-pin",class:"h-6 w-6 text-base"});var ge=Oe(de,2),ye=Le(ge);Ee(ge),Ee($);var we=Oe($,2);{var Ve=Yt=>{var rt=vi(),pt=kt(rt);{var je=Qe=>{var tt=TY(),bt=Le(tt);yi(bt,{icon:"mdi:web",class:"h-6 w-6 text-base"});var dt=Oe(bt,2),_t=Le(dt,!0);Ee(dt),Ee(tt),di(()=>{ja(tt,"href",W(f).url),xi(_t,W(f).url)}),Xe(Qe,tt)};It(pt,Qe=>{W(f).url&&Qe(je)})}Xe(Yt,rt)};It(we,Yt=>{W(f)&&Yt(Ve)})}var ut=Oe(we,4);{var at=Yt=>{var rt=vi(),pt=kt(rt);{var je=Qe=>{var tt=SY(),bt=kt(tt),dt=Le(bt,!0);Ee(bt),Ha(2),di(()=>xi(dt,W(f).description)),Xe(Qe,tt)};It(pt,Qe=>{W(f).description&&Qe(je)})}Xe(Yt,rt)};It(ut,Yt=>{W(f)&&Yt(at)})}Ee(H);var et=Oe(H,2),xt=Oe(Le(et),2);{var Mt=Yt=>{var rt=vi(),pt=kt(rt);Ea(pt,17,()=>Object.entries(a().properties),pr,(je,Qe)=>{let tt=()=>W(Qe)[0],bt=()=>W(Qe)[1];var dt=vi(),_t=kt(dt);{var zt=Qt=>{FI(Qt,{get key(){return tt()},get value(){return bt()}})};It(_t,Qt=>{tt()!=="_prop_id"&&bt()&&Qt(zt)})}Xe(je,dt)}),Xe(Yt,rt)};It(xt,Yt=>{a().properties&&Yt(Mt)})}Ee(et),Ee(q),Ee(X),Ee(R),di((Yt,rt,pt)=>{xi(ce,Yt),xi(oe,W(c)&&W(c).metaData.name?W(c).metaData.name:""),xi(ye,`${rt??""}, ${pt??""}`)},[()=>{var Yt;return W(c)&&W(c).type==="vector"&&W(c).properties.titles.length&&a().properties?h6(a().properties,W(c).properties.titles):(Yt=W(c))==null?void 0:Yt.metaData.name},()=>a().point[0].toFixed(6),()=>a().point[1].toFixed(6)]),ba(3,R,()=>ds,()=>({duration:300,x:-100,opacity:0})),Xe(I,R)};It(x,I=>{a()&&I(B)})}Xe(t,s),_i()}$a(["click"]);const LY=[{key:"森林文化アカデミー",name:"森林文化アカデミー",url:"https://www.forest.ac.jp/"},{key:"国土地理院",name:"国土地理院",url:"https://maps.gsi.go.jp/development/ichiran.html"},{key:"岐阜県森林研究所",name:"岐阜県森林研究所",url:"https://www.forest.rd.pref.gifu.lg.jp/index.html"},{key:"エコリス地図タイル",name:"エコリス地図タイル",url:"https://map.ecoris.info/#contents"},{key:"産総研地質調査総合センター",name:"産総研地質調査総合センター",url:"https://gbank.gsj.jp/seamless/index.html?lang=ja&"},{key:"Q地図タイル",name:"Q地図タイル",url:"https://info.qchizu.xyz/qchizu/reprint/"},{key:"OSM",name:"&copy; OpenStreetMap contributors",url:"http://osm.org/copyright"},{key:"Esri",name:"Sources: Esri, HERE, Garmin, USGS, Intermap, INCREMENT P, NRCan, Esri Japan, METI, Esri China (Hong Kong), Esri Korea, Esri (Thailand), NGCC, © OpenStreetMap contributors, and the GIS User Community",url:""},{key:"株式会社アドイン研究所",name:"株式会社アドイン研究所",url:"https://www.owl-sys.com/"},{key:"林野庁",name:"林野庁",url:"https://www.rinya.maff.go.jp/index.html"},{key:"東京都オープンデータカタログサイト",name:"東京都オープンデータカタログサイト",url:"https://portal.data.metro.tokyo.lg.jp/"},{key:"環境省生物多様性センター",name:"環境省生物多様性センター",url:"https://www.biodic.go.jp"}],PY=new Map(LY.map(t=>[t.key,t]));var QY=ft('<a class="pointer-events-auto grid grow cursor-pointer select-none place-items-center rounded-full text-xs svelte-1vk0djk" target="_blank" rel="noopener noreferrer"><span> </span></a>'),kY=ft('<div class="pointer-events-none absolute bottom-[4px] right-0 z-10 flex w-full shrink-0 justify-end gap-2 text-nowrap px-2 text-white"><div class="flex gap-2"></div> <span class="grid place-items-center rounded-full"><!></span></div>');function DY(t,e){mi(e,!0);let a=$t(Jr([]));u6.subscribe(u=>{const s=u.map(x=>{const B=PY.get(x);if(B)return B}).filter(x=>x!==void 0);s.length>0&&st(a,s,!0)});var n=vi(),c=kt(n);{var f=u=>{var s=kY(),x=Le(s);Ea(x,21,()=>W(a),pr,(R,F)=>{var M=QY(),N=Le(M),D=Le(N,!0);Ee(N),Ee(M),di(()=>{ja(M,"href",W(F).url),xi(D,W(F).name)}),Xe(R,M)}),Ee(x);var B=Oe(x,2),I=Le(B);yi(I,{icon:"lets-icons:info-alt-fill",class:"h-6 w-6"}),Ee(B),Ee(s),Xe(u,s)};It(c,u=>{W(a)&&u(f)})}Xe(t,n),_i()}var zY=ft('<div class="c-fog pointer-events-none absolute bottom-0 left-0 h-[90px] w-full svelte-1687nq9"><!></div>');function ZY(t,e){var a=zY(),n=Le(a);DY(n,{}),Ee(a),Xe(t,a)}var HY=ft('<div class="pointer-events-auto relative grid h-[50px] w-[50px] shrink-0 place-items-center overflow-hidden"><!></div>');function OY(t,e){mi(e,!1);let a=Wr(),n,c=Wr("");const f=B=>{const I=B[0];if(I.attributeName==="class"){const R=I.target;if(R.classList.contains("maplibregl-ctrl-geolocate-waiting")){st(c,"waiting");return}else if(R.classList.contains("maplibregl-ctrl-geolocate-active")||R.classList.contains("maplibregl-ctrl-geolocate-background")){st(c,"active");return}else if(R.classList.contains("maplibregl-ctrl-geolocate-error")||R.classList.contains("maplibregl-ctrl-geolocate-background-error")){st(c,"error");return}else st(c,"")}};Lr(()=>{da.onInitialized(B=>{if(B){const I=new Sm.GeolocateControl({positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{maxZoom:12},trackUserLocation:!0,showUserLocation:!0});W(a).appendChild(I.onAdd(B)),W(a)&&(n=new MutationObserver(f),n.observe(I._container.children[0],{attributes:!0,attributeFilter:["class"]})),I.on("geolocate",R=>{console.log("geolocate",R.coords)})}})}),Xo();var u=HY(),s=Le(u);const x=e6(()=>W(c)==="waiting"?"css-rotate text-accent":W(c)==="active"?"text-accent":W(c)==="error"?"text-red-500":"text-base");yi(s,{icon:"streamline:location-target-1-solid",get class(){return`absolute h-6 w-6 ${W(x)??""}`}}),Ee(u),Hn(u,B=>st(a,B),()=>W(a)),Xe(t,u),_i()}var XY=ft('<button class="grid h-[50px] w-[50px] shrink-0 cursor-pointer place-items-center p-2"><!></button>');function VY(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(U3,"$showStreetViewLayer",a),f=()=>{U3.set(!c())};let u=$t(null);Lr(()=>{W(u)});var s=XY();s.__click=f;var x=Le(s);const B=ra(()=>c()?"text-accent":"text-base");yi(x,{icon:"fluent:video-360-20-regular",get class(){return`h-8 w-8 ${W(B)??""}`}}),Ee(s),Hn(s,I=>st(u,I),()=>W(u)),Xe(t,s),_i(),n()}$a(["click"]);/*!
 * matrix 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Qo,zl,l4,ap,Td,Z1,wg,Gd,Ss="transform",rm=Ss+"Origin",N8,L8=function(e){var a=e.ownerDocument||e;for(!(Ss in e.style)&&("msTransform"in e.style)&&(Ss="msTransform",rm=Ss+"Origin");a.parentNode&&(a=a.parentNode););if(zl=window,wg=new Xl,a){Qo=a,l4=a.documentElement,ap=a.body,Gd=Qo.createElementNS("http://www.w3.org/2000/svg","g"),Gd.style.transform="none";var n=a.createElement("div"),c=a.createElement("div"),f=a&&(a.body||a.firstElementChild);f&&f.appendChild&&(f.appendChild(n),n.appendChild(c),n.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),N8=c.offsetParent!==n,f.removeChild(n))}return a},GY=function(e){for(var a,n;e&&e!==ap;)n=e._gsap,n&&n.uncache&&n.get(e,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),a?a.push(n):a=[n]),e=e.parentNode;return a},P8=[],Q8=[],jY=function(){return zl.pageYOffset||Qo.scrollTop||l4.scrollTop||ap.scrollTop||0},KY=function(){return zl.pageXOffset||Qo.scrollLeft||l4.scrollLeft||ap.scrollLeft||0},c4=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},$Y=function t(e){if(zl.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return t(e)},l3=function t(e,a){if(e.parentNode&&(Qo||L8(e))){var n=c4(e),c=n?n.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",f=n?a?"rect":"g":"div",u=a!==2?0:100,s=a===3?100:0,x="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",B=Qo.createElementNS?Qo.createElementNS(c.replace(/^https/,"http"),f):Qo.createElement(f);return a&&(n?(Z1||(Z1=t(e)),B.setAttribute("width",.01),B.setAttribute("height",.01),B.setAttribute("transform","translate("+u+","+s+")"),Z1.appendChild(B)):(Td||(Td=t(e),Td.style.cssText=x),B.style.cssText=x+"width:0.1px;height:0.1px;top:"+s+"px;left:"+u+"px",Td.appendChild(B))),B}throw"Need document and parent."},qY=function(e){for(var a=new Xl,n=0;n<e.numberOfItems;n++)a.multiply(e.getItem(n).matrix);return a},WY=function(e){var a=e.getCTM(),n;return a||(n=e.style[Ss],e.style[Ss]="none",e.appendChild(Gd),a=Gd.getCTM(),e.removeChild(Gd),n?e.style[Ss]=n:e.style.removeProperty(Ss.replace(/([A-Z])/g,"-$1").toLowerCase())),a||wg.clone()},JY=function(e,a){var n=c4(e),c=e===n,f=n?P8:Q8,u=e.parentNode,s,x,B,I,R,F;if(e===zl)return e;if(f.length||f.push(l3(e,1),l3(e,2),l3(e,3)),s=n?Z1:Td,n)c?(B=WY(e),I=-B.e/B.a,R=-B.f/B.d,x=wg):e.getBBox?(B=e.getBBox(),x=e.transform?e.transform.baseVal:{},x=x.numberOfItems?x.numberOfItems>1?qY(x):x.getItem(0).matrix:wg,I=x.a*B.x+x.c*B.y,R=x.b*B.x+x.d*B.y):(x=new Xl,I=R=0),(c?n:u).appendChild(s),s.setAttribute("transform","matrix("+x.a+","+x.b+","+x.c+","+x.d+","+(x.e+I)+","+(x.f+R)+")");else{if(I=R=0,N8)for(x=e.offsetParent,B=e;B&&(B=B.parentNode)&&B!==x&&B.parentNode;)(zl.getComputedStyle(B)[Ss]+"").length>4&&(I=B.offsetLeft,R=B.offsetTop,B=0);if(F=zl.getComputedStyle(e),F.position!=="absolute"&&F.position!=="fixed")for(x=e.offsetParent;u&&u!==x;)I+=u.scrollLeft||0,R+=u.scrollTop||0,u=u.parentNode;B=s.style,B.top=e.offsetTop-R+"px",B.left=e.offsetLeft-I+"px",B[Ss]=F[Ss],B[rm]=F[rm],B.position=F.position==="fixed"?"fixed":"absolute",e.parentNode.appendChild(s)}return s},c3=function(e,a,n,c,f,u,s){return e.a=a,e.b=n,e.c=c,e.d=f,e.e=u,e.f=s,e},Xl=function(){function t(a,n,c,f,u,s){a===void 0&&(a=1),n===void 0&&(n=0),c===void 0&&(c=0),f===void 0&&(f=1),u===void 0&&(u=0),s===void 0&&(s=0),c3(this,a,n,c,f,u,s)}var e=t.prototype;return e.inverse=function(){var n=this.a,c=this.b,f=this.c,u=this.d,s=this.e,x=this.f,B=n*u-c*f||1e-10;return c3(this,u/B,-c/B,-f/B,n/B,(f*x-u*s)/B,-(n*x-c*s)/B)},e.multiply=function(n){var c=this.a,f=this.b,u=this.c,s=this.d,x=this.e,B=this.f,I=n.a,R=n.c,F=n.b,M=n.d,N=n.e,D=n.f;return c3(this,I*c+F*u,I*f+F*s,R*c+M*u,R*f+M*s,x+N*c+D*u,B+N*f+D*s)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(n){var c=this.a,f=this.b,u=this.c,s=this.d,x=this.e,B=this.f;return c===n.a&&f===n.b&&u===n.c&&s===n.d&&x===n.e&&B===n.f},e.apply=function(n,c){c===void 0&&(c={});var f=n.x,u=n.y,s=this.a,x=this.b,B=this.c,I=this.d,R=this.e,F=this.f;return c.x=f*s+u*B+R||0,c.y=f*x+u*I+F||0,c},t}();function Sl(t,e,a,n){if(!t||!t.parentNode||(Qo||L8(t)).documentElement===t)return new Xl;var c=GY(t),f=c4(t),u=f?P8:Q8,s=JY(t),x=u[0].getBoundingClientRect(),B=u[1].getBoundingClientRect(),I=u[2].getBoundingClientRect(),R=s.parentNode,F=$Y(t),M=new Xl((B.left-x.left)/100,(B.top-x.top)/100,(I.left-x.left)/100,(I.top-x.top)/100,x.left+(F?0:KY()),x.top+(F?0:jY()));if(R.removeChild(s),c)for(x=c.length;x--;)B=c[x],B.scaleX=B.scaleY=0,B.renderTransform(1,B);return e?M.inverse():M}function rv(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eN(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Ki,Ca,Zn,Ns,ko,h3,So,nm,Sd,FA,k8,sm,c0,h4,Yd,Us,Nd,H1,D8,om,Bg=0,z8=function(){return typeof window<"u"},Z8=function(){return Ki||z8()&&(Ki=window.gsap)&&Ki.registerPlugin&&Ki},CA=function(e){return typeof e=="function"},jd=function(e){return typeof e=="object"},Ts=function(e){return typeof e>"u"},O1=function(){return!1},Kd="transform",Am="transformOrigin",bA=function(e){return Math.round(e*1e4)/1e4},gd=Array.isArray,b1=function(e,a){var n=Zn.createElementNS?Zn.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),e):Zn.createElement(e);return n.style?n:Zn.createElement(e)},nv=180/Math.PI,eh=1e20,tN=new Xl,yA=Date.now||function(){return new Date().getTime()},Zl=[],ph={},iN=0,aN=/^(?:a|input|textarea|button|select)$/i,sv=0,th={},Fo={},H8=function(e,a){var n={},c;for(c in e)n[c]=a?e[c]*a:e[c];return n},rN=function(e,a){for(var n in a)n in e||(e[n]=a[n]);return e},ov=function t(e,a){for(var n=e.length,c;n--;)a?e[n].style.touchAction=a:e[n].style.removeProperty("touch-action"),c=e[n].children,c&&c.length&&t(c,a)},O8=function(){return Zl.forEach(function(e){return e()})},nN=function(e){Zl.push(e),Zl.length===1&&Ki.ticker.add(O8)},Av=function(){return!Zl.length&&Ki.ticker.remove(O8)},lv=function(e){for(var a=Zl.length;a--;)Zl[a]===e&&Zl.splice(a,1);Ki.to(Av,{overwrite:!0,delay:15,duration:0,onComplete:Av,data:"_draggable"})},sN=function(e,a){for(var n in a)n in e||(e[n]=a[n]);return e},wr=function(e,a,n,c){if(e.addEventListener){var f=c0[a];c=c||(k8?{passive:!1}:null),e.addEventListener(f||a,n,c),f&&a!==f&&e.addEventListener(a,n,c)}},ur=function(e,a,n,c){if(e.removeEventListener){var f=c0[a];e.removeEventListener(f||a,n,c),f&&a!==f&&e.removeEventListener(a,n,c)}},es=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},oN=function(e,a){for(var n=e.length;n--;)if(e[n].identifier===a)return!0},AN=function t(e){h4=e.touches&&Bg<e.touches.length,ur(e.target,"touchend",t)},cv=function(e){h4=e.touches&&Bg<e.touches.length,wr(e.target,"touchend",AN)},mh=function(e){return Ca.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},_h=function(e){return Ca.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},hv=function t(e,a){wr(e,"scroll",a),Ih(e.parentNode)||t(e.parentNode,a)},uv=function t(e,a){ur(e,"scroll",a),Ih(e.parentNode)||t(e.parentNode,a)},Ih=function(e){return!e||e===Ns||e.nodeType===9||e===Zn.body||e===Ca||!e.nodeType||!e.parentNode},dv=function(e,a){var n=a==="x"?"Width":"Height",c="scroll"+n,f="client"+n;return Math.max(0,Ih(e)?Math.max(Ns[c],ko[c])-(Ca["inner"+n]||Ns[f]||ko[f]):e[c]-e[f])},u3=function t(e,a){var n=dv(e,"x"),c=dv(e,"y");Ih(e)?e=Fo:t(e.parentNode,a),e._gsMaxScrollX=n,e._gsMaxScrollY=c,a||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},d3=function(e,a,n){var c=e.style;c&&(Ts(c[a])&&(a=Sd(a,e)||a),n==null?c.removeProperty&&c.removeProperty(a.replace(/([A-Z])/g,"-$1").toLowerCase()):c[a]=n)},h0=function(e){return Ca.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},El={},ih=function(e){if(e===Ca)return El.left=El.top=0,El.width=El.right=Ns.clientWidth||e.innerWidth||ko.clientWidth||0,El.height=El.bottom=(e.innerHeight||0)-20<Ns.clientHeight?Ns.clientHeight:e.innerHeight||ko.clientHeight||0,El;var a=e.ownerDocument||Zn,n=Ts(e.pageX)?!e.nodeType&&!Ts(e.left)&&!Ts(e.top)?e:FA(e)[0].getBoundingClientRect():{left:e.pageX-_h(a),top:e.pageY-mh(a),right:e.pageX-_h(a)+1,bottom:e.pageY-mh(a)+1};return Ts(n.right)&&!Ts(n.width)?(n.right=n.left+n.width,n.bottom=n.top+n.height):Ts(n.width)&&(n={width:n.right-n.left,height:n.bottom-n.top,right:n.right,left:n.left,bottom:n.bottom,top:n.top}),n},ir=function(e,a,n){var c=e.vars,f=c[n],u=e._listeners[a],s;return CA(f)&&(s=f.apply(c.callbackScope||e,c[n+"Params"]||[e.pointerEvent])),u&&e.dispatchEvent(a)===!1&&(s=!1),s},fv=function(e,a){var n=FA(e)[0],c,f,u;return!n.nodeType&&n!==Ca?Ts(e.left)?(f=e.min||e.minX||e.minRotation||0,c=e.min||e.minY||0,{left:f,top:c,width:(e.max||e.maxX||e.maxRotation||0)-f,height:(e.max||e.maxY||0)-c}):(u={x:0,y:0},{left:e.left-u.x,top:e.top-u.y,width:e.width,height:e.height}):lN(n,a)},ts={},lN=function(e,a){a=FA(a)[0];var n=e.getBBox&&e.ownerSVGElement,c=e.ownerDocument||Zn,f,u,s,x,B,I,R,F,M,N,D,V,X;if(e===Ca)s=mh(c),f=_h(c),u=f+(c.documentElement.clientWidth||e.innerWidth||c.body.clientWidth||0),x=s+((e.innerHeight||0)-20<c.documentElement.clientHeight?c.documentElement.clientHeight:e.innerHeight||c.body.clientHeight||0);else{if(a===Ca||Ts(a))return e.getBoundingClientRect();f=s=0,n?(N=e.getBBox(),D=N.width,V=N.height):(e.viewBox&&(N=e.viewBox.baseVal)&&(f=N.x||0,s=N.y||0,D=N.width,V=N.height),D||(X=h0(e),N=X.boxSizing==="border-box",D=(parseFloat(X.width)||e.clientWidth||0)+(N?0:parseFloat(X.borderLeftWidth)+parseFloat(X.borderRightWidth)),V=(parseFloat(X.height)||e.clientHeight||0)+(N?0:parseFloat(X.borderTopWidth)+parseFloat(X.borderBottomWidth)))),u=D,x=V}return e===a?{left:f,top:s,width:u-f,height:x-s}:(B=Sl(a,!0).multiply(Sl(e)),I=B.apply({x:f,y:s}),R=B.apply({x:u,y:s}),F=B.apply({x:u,y:x}),M=B.apply({x:f,y:x}),f=Math.min(I.x,R.x,F.x,M.x),s=Math.min(I.y,R.y,F.y,M.y),{left:f,top:s,width:Math.max(I.x,R.x,F.x,M.x)-f,height:Math.max(I.y,R.y,F.y,M.y)-s})},f3=function(e,a,n,c,f,u){var s={},x,B,I;if(a)if(f!==1&&a instanceof Array){if(s.end=x=[],I=a.length,jd(a[0]))for(B=0;B<I;B++)x[B]=H8(a[B],f);else for(B=0;B<I;B++)x[B]=a[B]*f;n+=1.1,c-=1.1}else CA(a)?s.end=function(R){var F=a.call(e,R),M,N;if(f!==1)if(jd(F)){M={};for(N in F)M[N]=F[N]*f;F=M}else F*=f;return F}:s.end=a;return(n||n===0)&&(s.max=n),(c||c===0)&&(s.min=c),u&&(s.velocity=0),s},cN=function t(e){var a;return!e||!e.getAttribute||e===ko?!1:(a=e.getAttribute("data-clickable"))==="true"||a!=="false"&&(aN.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:t(e.parentNode)},y1=function(e,a){for(var n=e.length,c;n--;)c=e[n],c.ondragstart=c.onselectstart=a?null:O1,Ki.set(c,{lazy:!0,userSelect:a?"text":"none"})},hN=function t(e){if(h0(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return t(e)},X8,lm,uN=function(e,a){e=Ki.utils.toArray(e)[0],a=a||{};var n=document.createElement("div"),c=n.style,f=e.firstChild,u=0,s=0,x=e.scrollTop,B=e.scrollLeft,I=e.scrollWidth,R=e.scrollHeight,F=0,M=0,N=0,D,V,X,ee,Ae,ce;X8&&a.force3D!==!1?(Ae="translate3d(",ce="px,0px)"):Kd&&(Ae="translate(",ce="px)"),this.scrollTop=function(ue,oe){if(!arguments.length)return-this.top();this.top(-ue,oe)},this.scrollLeft=function(ue,oe){if(!arguments.length)return-this.left();this.left(-ue,oe)},this.left=function(ue,oe){if(!arguments.length)return-(e.scrollLeft+s);var q=e.scrollLeft-B,H=s;if((q>2||q<-2)&&!oe){B=e.scrollLeft,Ki.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-B),a.onKill&&a.onKill();return}ue=-ue,ue<0?(s=ue-.5|0,ue=0):ue>M?(s=ue-M|0,ue=M):s=0,(s||H)&&(this._skip||(c[Kd]=Ae+-s+"px,"+-u+ce),s+F>=0&&(c.paddingRight=s+F+"px")),e.scrollLeft=ue|0,B=e.scrollLeft},this.top=function(ue,oe){if(!arguments.length)return-(e.scrollTop+u);var q=e.scrollTop-x,H=u;if((q>2||q<-2)&&!oe){x=e.scrollTop,Ki.killTweensOf(this,{top:1,scrollTop:1}),this.top(-x),a.onKill&&a.onKill();return}ue=-ue,ue<0?(u=ue-.5|0,ue=0):ue>N?(u=ue-N|0,ue=N):u=0,(u||H)&&(this._skip||(c[Kd]=Ae+-s+"px,"+-u+ce)),e.scrollTop=ue|0,x=e.scrollTop},this.maxScrollTop=function(){return N},this.maxScrollLeft=function(){return M},this.disable=function(){for(f=n.firstChild;f;)ee=f.nextSibling,e.appendChild(f),f=ee;e===n.parentNode&&e.removeChild(n)},this.enable=function(){if(f=e.firstChild,f!==n){for(;f;)ee=f.nextSibling,n.appendChild(f),f=ee;e.appendChild(n),this.calibrate()}},this.calibrate=function(ue){var oe=e.clientWidth===D,q,H,$;x=e.scrollTop,B=e.scrollLeft,!(oe&&e.clientHeight===V&&n.offsetHeight===X&&I===e.scrollWidth&&R===e.scrollHeight&&!ue)&&((u||s)&&(H=this.left(),$=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),q=h0(e),(!oe||ue)&&(c.display="block",c.width="auto",c.paddingRight="0px",F=Math.max(0,e.scrollWidth-e.clientWidth),F&&(F+=parseFloat(q.paddingLeft)+(lm?parseFloat(q.paddingRight):0))),c.display="inline-block",c.position="relative",c.overflow="visible",c.verticalAlign="top",c.boxSizing="content-box",c.width="100%",c.paddingRight=F+"px",lm&&(c.paddingBottom=q.paddingBottom),D=e.clientWidth,V=e.clientHeight,I=e.scrollWidth,R=e.scrollHeight,M=e.scrollWidth-D,N=e.scrollHeight-V,X=n.offsetHeight,c.display="block",(H||$)&&(this.left(H),this.top($)))},this.content=n,this.element=e,this._skip=!1,this.enable()},g3=function(e){if(z8()&&document.body){var a=window&&window.navigator;Ca=window,Zn=document,Ns=Zn.documentElement,ko=Zn.body,h3=b1("div"),H1=!!window.PointerEvent,So=b1("div"),So.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Nd=So.style.cursor==="grab"?"grab":"move",Yd=a&&a.userAgent.toLowerCase().indexOf("android")!==-1,sm="ontouchstart"in Ns&&"orientation"in Ca||a&&(a.MaxTouchPoints>0||a.msMaxTouchPoints>0),lm=function(){var n=b1("div"),c=b1("div"),f=c.style,u=ko,s;return f.display="inline-block",f.position="relative",n.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",n.appendChild(c),u.appendChild(n),s=c.offsetHeight+18>n.scrollHeight,u.removeChild(n),s}(),c0=function(n){for(var c=n.split(","),f=("onpointerdown"in h3?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in h3?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":n).split(","),u={},s=4;--s>-1;)u[c[s]]=f[s],u[f[s]]=c[s];try{Ns.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){k8=1}}))}catch{}return u}("touchstart,touchmove,touchend,touchcancel"),wr(Zn,"touchcancel",O1),wr(Ca,"touchmove",O1),ko&&ko.addEventListener("touchstart",O1),wr(Zn,"contextmenu",function(){for(var n in ph)ph[n].isPressed&&ph[n].endDrag()}),Ki=nm=Z8()}Ki?(Us=Ki.plugins.inertia,D8=Ki.core.context||function(){},Sd=Ki.utils.checkPrefix,Kd=Sd(Kd),Am=Sd(Am),FA=Ki.utils.toArray,om=Ki.core.getStyleSaver,X8=!!Sd("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},dN=function(){function t(a){this._listeners={},this.target=a||this}var e=t.prototype;return e.addEventListener=function(n,c){var f=this._listeners[n]||(this._listeners[n]=[]);~f.indexOf(c)||f.push(c)},e.removeEventListener=function(n,c){var f=this._listeners[n],u=f&&f.indexOf(c);u>=0&&f.splice(u,1)},e.dispatchEvent=function(n){var c=this,f;return(this._listeners[n]||[]).forEach(function(u){return u.call(c,{type:n,target:c.target})===!1&&(f=!1)}),f},t}(),Uh=function(t){eN(e,t);function e(a,n){var c;c=t.call(this)||this,nm||g3(1),a=FA(a)[0],c.styles=om&&om(a,"transform,left,top"),Us||(Us=Ki.plugins.inertia),c.vars=n=H8(n||{}),c.target=a,c.x=c.y=c.rotation=0,c.dragResistance=parseFloat(n.dragResistance)||0,c.edgeResistance=isNaN(n.edgeResistance)?1:parseFloat(n.edgeResistance)||0,c.lockAxis=n.lockAxis,c.autoScroll=n.autoScroll||0,c.lockedAxis=null,c.allowEventDefault=!!n.allowEventDefault,Ki.getProperty(a,"x");var f=(n.type||"x,y").toLowerCase(),u=~f.indexOf("x")||~f.indexOf("y"),s=f.indexOf("rotation")!==-1,x=s?"rotation":u?"x":"left",B=u?"y":"top",I=!!(~f.indexOf("x")||~f.indexOf("left")||f==="scroll"),R=!!(~f.indexOf("y")||~f.indexOf("top")||f==="scroll"),F=n.minimumMovement||2,M=rv(c),N=FA(n.trigger||n.handle||a),D={},V=0,X=!1,ee=n.autoScrollMarginTop||40,Ae=n.autoScrollMarginRight||40,ce=n.autoScrollMarginBottom||40,ue=n.autoScrollMarginLeft||40,oe=n.clickableTest||cN,q=0,H=a._gsap||Ki.core.getCache(a),$=hN(a),de=function(ne,Se){return parseFloat(H.get(a,ne,Se))},ge=a.ownerDocument||Zn,ye,we,Ve,ut,at,et,xt,Mt,Yt,rt,pt,je,Qe,tt,bt,dt,_t,zt,Qt,Ct,Zt,Ai,Nt,Dt,li,pi,Kt,gt,oi,qi,Si,fa,Ri,ea=function(ne){return es(ne),ne.stopImmediatePropagation&&ne.stopImmediatePropagation(),!1},wi=function Te(ne){if(M.autoScroll&&M.isDragging&&(X||_t)){var Se=a,Ue=M.autoScroll*15,Ze,ct,Bt,He,mt,Wt,ei,ai;for(X=!1,Fo.scrollTop=Ca.pageYOffset!=null?Ca.pageYOffset:ge.documentElement.scrollTop!=null?ge.documentElement.scrollTop:ge.body.scrollTop,Fo.scrollLeft=Ca.pageXOffset!=null?Ca.pageXOffset:ge.documentElement.scrollLeft!=null?ge.documentElement.scrollLeft:ge.body.scrollLeft,He=M.pointerX-Fo.scrollLeft,mt=M.pointerY-Fo.scrollTop;Se&&!ct;)ct=Ih(Se.parentNode),Ze=ct?Fo:Se.parentNode,Bt=ct?{bottom:Math.max(Ns.clientHeight,Ca.innerHeight||0),right:Math.max(Ns.clientWidth,Ca.innerWidth||0),left:0,top:0}:Ze.getBoundingClientRect(),Wt=ei=0,R&&(ai=Ze._gsMaxScrollY-Ze.scrollTop,ai<0?ei=ai:mt>Bt.bottom-ce&&ai?(X=!0,ei=Math.min(ai,Ue*(1-Math.max(0,Bt.bottom-mt)/ce)|0)):mt<Bt.top+ee&&Ze.scrollTop&&(X=!0,ei=-Math.min(Ze.scrollTop,Ue*(1-Math.max(0,mt-Bt.top)/ee)|0)),ei&&(Ze.scrollTop+=ei)),I&&(ai=Ze._gsMaxScrollX-Ze.scrollLeft,ai<0?Wt=ai:He>Bt.right-Ae&&ai?(X=!0,Wt=Math.min(ai,Ue*(1-Math.max(0,Bt.right-He)/Ae)|0)):He<Bt.left+ue&&Ze.scrollLeft&&(X=!0,Wt=-Math.min(Ze.scrollLeft,Ue*(1-Math.max(0,He-Bt.left)/ue)|0)),Wt&&(Ze.scrollLeft+=Wt)),ct&&(Wt||ei)&&(Ca.scrollTo(Ze.scrollLeft,Ze.scrollTop),se(M.pointerX+Wt,M.pointerY+ei)),Se=Ze}if(_t){var Je=M.x,Tt=M.y;s?(M.deltaX=Je-parseFloat(H.rotation),M.rotation=Je,H.rotation=Je+"deg",H.renderTransform(1,H)):we?(R&&(M.deltaY=Tt-we.top(),we.top(Tt)),I&&(M.deltaX=Je-we.left(),we.left(Je))):u?(R&&(M.deltaY=Tt-parseFloat(H.y),H.y=Tt+"px"),I&&(M.deltaX=Je-parseFloat(H.x),H.x=Je+"px"),H.renderTransform(1,H)):(R&&(M.deltaY=Tt-parseFloat(a.style.top||0),a.style.top=Tt+"px"),I&&(M.deltaX=Je-parseFloat(a.style.left||0),a.style.left=Je+"px")),Mt&&!ne&&!gt&&(gt=!0,ir(M,"drag","onDrag")===!1&&(I&&(M.x-=M.deltaX),R&&(M.y-=M.deltaY),Te(!0)),gt=!1)}_t=!1},ji=function(ne,Se){var Ue=M.x,Ze=M.y,ct,Bt;a._gsap||(H=Ki.core.getCache(a)),H.uncache&&Ki.getProperty(a,"x"),u?(M.x=parseFloat(H.x),M.y=parseFloat(H.y)):s?M.x=M.rotation=parseFloat(H.rotation):we?(M.y=we.top(),M.x=we.left()):(M.y=parseFloat(a.style.top||(Bt=h0(a))&&Bt.top)||0,M.x=parseFloat(a.style.left||(Bt||{}).left)||0),(Qt||Ct||Zt)&&!Se&&(M.isDragging||M.isThrowing)&&(Zt&&(th.x=M.x,th.y=M.y,ct=Zt(th),ct.x!==M.x&&(M.x=ct.x,_t=!0),ct.y!==M.y&&(M.y=ct.y,_t=!0)),Qt&&(ct=Qt(M.x),ct!==M.x&&(M.x=ct,s&&(M.rotation=ct),_t=!0)),Ct&&(ct=Ct(M.y),ct!==M.y&&(M.y=ct),_t=!0)),_t&&wi(!0),ne||(M.deltaX=M.x-Ue,M.deltaY=M.y-Ze,ir(M,"throwupdate","onThrowUpdate"))},ha=function(ne,Se,Ue,Ze){return Se==null&&(Se=-1e20),Ue==null&&(Ue=eh),CA(ne)?function(ct){var Bt=M.isPressed?1-M.edgeResistance:1;return ne.call(M,(ct>Ue?Ue+(ct-Ue)*Bt:ct<Se?Se+(ct-Se)*Bt:ct)*Ze)*Ze}:gd(ne)?function(ct){for(var Bt=ne.length,He=0,mt=eh,Wt,ei;--Bt>-1;)Wt=ne[Bt],ei=Wt-ct,ei<0&&(ei=-ei),ei<mt&&Wt>=Se&&Wt<=Ue&&(He=Bt,mt=ei);return ne[He]}:isNaN(ne)?function(ct){return ct}:function(){return ne*Ze}},Cr=function(ne,Se,Ue,Ze,ct,Bt,He){return Bt=Bt&&Bt<eh?Bt*Bt:eh,CA(ne)?function(mt){var Wt=M.isPressed?1-M.edgeResistance:1,ei=mt.x,ai=mt.y,Je,Tt,Ot;return mt.x=ei=ei>Ue?Ue+(ei-Ue)*Wt:ei<Se?Se+(ei-Se)*Wt:ei,mt.y=ai=ai>ct?ct+(ai-ct)*Wt:ai<Ze?Ze+(ai-Ze)*Wt:ai,Je=ne.call(M,mt),Je!==mt&&(mt.x=Je.x,mt.y=Je.y),He!==1&&(mt.x*=He,mt.y*=He),Bt<eh&&(Tt=mt.x-ei,Ot=mt.y-ai,Tt*Tt+Ot*Ot>Bt&&(mt.x=ei,mt.y=ai)),mt}:gd(ne)?function(mt){for(var Wt=ne.length,ei=0,ai=eh,Je,Tt,Ot,ta;--Wt>-1;)Ot=ne[Wt],Je=Ot.x-mt.x,Tt=Ot.y-mt.y,ta=Je*Je+Tt*Tt,ta<ai&&(ei=Wt,ai=ta);return ai<=Bt?ne[ei]:mt}:function(mt){return mt}},Oa=function(){var ne,Se,Ue,Ze;xt=!1,we?(we.calibrate(),M.minX=pt=-we.maxScrollLeft(),M.minY=Qe=-we.maxScrollTop(),M.maxX=rt=M.maxY=je=0,xt=!0):n.bounds&&(ne=fv(n.bounds,a.parentNode),s?(M.minX=pt=ne.left,M.maxX=rt=ne.left+ne.width,M.minY=Qe=M.maxY=je=0):!Ts(n.bounds.maxX)||!Ts(n.bounds.maxY)?(ne=n.bounds,M.minX=pt=ne.minX,M.minY=Qe=ne.minY,M.maxX=rt=ne.maxX,M.maxY=je=ne.maxY):(Se=fv(a,a.parentNode),M.minX=pt=Math.round(de(x,"px")+ne.left-Se.left),M.minY=Qe=Math.round(de(B,"px")+ne.top-Se.top),M.maxX=rt=Math.round(pt+(ne.width-Se.width)),M.maxY=je=Math.round(Qe+(ne.height-Se.height))),pt>rt&&(M.minX=rt,M.maxX=rt=pt,pt=M.minX),Qe>je&&(M.minY=je,M.maxY=je=Qe,Qe=M.minY),s&&(M.minRotation=pt,M.maxRotation=rt),xt=!0),n.liveSnap&&(Ue=n.liveSnap===!0?n.snap||{}:n.liveSnap,Ze=gd(Ue)||CA(Ue),s?(Qt=ha(Ze?Ue:Ue.rotation,pt,rt,1),Ct=null):Ue.points?Zt=Cr(Ze?Ue:Ue.points,pt,rt,Qe,je,Ue.radius,we?-1:1):(I&&(Qt=ha(Ze?Ue:Ue.x||Ue.left||Ue.scrollLeft,pt,rt,we?-1:1)),R&&(Ct=ha(Ze?Ue:Ue.y||Ue.top||Ue.scrollTop,Qe,je,we?-1:1))))},Xa=function(){M.isThrowing=!1,ir(M,"throwcomplete","onThrowComplete")},sa=function(){M.isThrowing=!1},na=function(ne,Se){var Ue,Ze,ct,Bt;ne&&Us?(ne===!0&&(Ue=n.snap||n.liveSnap||{},Ze=gd(Ue)||CA(Ue),ne={resistance:(n.throwResistance||n.resistance||1e3)/(s?10:1)},s?ne.rotation=f3(M,Ze?Ue:Ue.rotation,rt,pt,1,Se):(I&&(ne[x]=f3(M,Ze?Ue:Ue.points||Ue.x||Ue.left,rt,pt,we?-1:1,Se||M.lockedAxis==="x")),R&&(ne[B]=f3(M,Ze?Ue:Ue.points||Ue.y||Ue.top,je,Qe,we?-1:1,Se||M.lockedAxis==="y")),(Ue.points||gd(Ue)&&jd(Ue[0]))&&(ne.linkedProps=x+","+B,ne.radius=Ue.radius))),M.isThrowing=!0,Bt=isNaN(n.overshootTolerance)?n.edgeResistance===1?0:1-M.edgeResistance+.2:n.overshootTolerance,ne.duration||(ne.duration={max:Math.max(n.minDuration||0,"maxDuration"in n?n.maxDuration:2),min:isNaN(n.minDuration)?Bt===0||jd(ne)&&ne.resistance>1e3?0:.5:n.minDuration,overshoot:Bt}),M.tween=ct=Ki.to(we||a,{inertia:ne,data:"_draggable",inherit:!1,onComplete:Xa,onInterrupt:sa,onUpdate:n.fastMode?ir:ji,onUpdateParams:n.fastMode?[M,"onthrowupdate","onThrowUpdate"]:Ue&&Ue.radius?[!1,!0]:[]}),n.fastMode||(we&&(we._skip=!0),ct.render(1e9,!0,!0),ji(!0,!0),M.endX=M.x,M.endY=M.y,s&&(M.endRotation=M.x),ct.play(0),ji(!0,!0),we&&(we._skip=!1))):xt&&M.applyBounds()},va=function(ne){var Se=Dt,Ue;Dt=Sl(a.parentNode,!0),ne&&M.isPressed&&!Dt.equals(Se||new Xl)&&(Ue=Se.inverse().apply({x:Ve,y:ut}),Dt.apply(Ue,Ue),Ve=Ue.x,ut=Ue.y),Dt.equals(tN)&&(Dt=null)},ze=function(){var ne=1-M.edgeResistance,Se=$?_h(ge):0,Ue=$?mh(ge):0,Ze,ct,Bt;u&&(H.x=de(x,"px")+"px",H.y=de(B,"px")+"px",H.renderTransform()),va(!1),ts.x=M.pointerX-Se,ts.y=M.pointerY-Ue,Dt&&Dt.apply(ts,ts),Ve=ts.x,ut=ts.y,_t&&(se(M.pointerX,M.pointerY),wi(!0)),fa=Sl(a),we?(Oa(),et=we.top(),at=we.left()):(ae()?(ji(!0,!0),Oa()):M.applyBounds(),s?(Ze=a.ownerSVGElement?[H.xOrigin-a.getBBox().x,H.yOrigin-a.getBBox().y]:(h0(a)[Am]||"0 0").split(" "),dt=M.rotationOrigin=Sl(a).apply({x:parseFloat(Ze[0])||0,y:parseFloat(Ze[1])||0}),ji(!0,!0),ct=M.pointerX-dt.x-Se,Bt=dt.y-M.pointerY+Ue,at=M.x,et=M.y=Math.atan2(Bt,ct)*nv):(et=de(B,"px"),at=de(x,"px"))),xt&&ne&&(at>rt?at=rt+(at-rt)/ne:at<pt&&(at=pt-(pt-at)/ne),s||(et>je?et=je+(et-je)/ne:et<Qe&&(et=Qe-(Qe-et)/ne))),M.startX=at=bA(at),M.startY=et=bA(et)},ae=function(){return M.tween&&M.tween.isActive()},re=function(){So.parentNode&&!ae()&&!M.isDragging&&So.parentNode.removeChild(So)},fe=function(ne,Se){var Ue;if(!ye||M.isPressed||!ne||(ne.type==="mousedown"||ne.type==="pointerdown")&&!Se&&yA()-q<30&&c0[M.pointerEvent.type]){Si&&ne&&ye&&es(ne);return}if(li=ae(),Ri=!1,M.pointerEvent=ne,c0[ne.type]?(Nt=~ne.type.indexOf("touch")?ne.currentTarget||ne.target:ge,wr(Nt,"touchend",ke),wr(Nt,"touchmove",ve),wr(Nt,"touchcancel",ke),wr(ge,"touchstart",cv)):(Nt=null,wr(ge,"mousemove",ve)),Kt=null,(!H1||!Nt)&&(wr(ge,"mouseup",ke),ne&&ne.target&&wr(ne.target,"mouseup",ke)),Ai=oe.call(M,ne.target)&&n.dragClickables===!1&&!Se,Ai){wr(ne.target,"change",ke),ir(M,"pressInit","onPressInit"),ir(M,"press","onPress"),y1(N,!0),Si=!1;return}if(pi=!Nt||I===R||M.vars.allowNativeTouchScrolling===!1||M.vars.allowContextMenu&&ne&&(ne.ctrlKey||ne.which>2)?!1:I?"y":"x",Si=!pi&&!M.allowEventDefault,Si&&(es(ne),wr(Ca,"touchforcechange",es)),ne.changedTouches?(ne=tt=ne.changedTouches[0],bt=ne.identifier):ne.pointerId?bt=ne.pointerId:tt=bt=null,Bg++,nN(wi),ut=M.pointerY=ne.pageY,Ve=M.pointerX=ne.pageX,ir(M,"pressInit","onPressInit"),(pi||M.autoScroll)&&u3(a.parentNode),a.parentNode&&M.autoScroll&&!we&&!s&&a.parentNode._gsMaxScrollX&&!So.parentNode&&!a.getBBox&&(So.style.width=a.parentNode.scrollWidth+"px",a.parentNode.appendChild(So)),ze(),M.tween&&M.tween.kill(),M.isThrowing=!1,Ki.killTweensOf(we||a,D,!0),we&&Ki.killTweensOf(a,{scrollTo:1},!0),M.tween=M.lockedAxis=null,(n.zIndexBoost||!s&&!we&&n.zIndexBoost!==!1)&&(a.style.zIndex=e.zIndex++),M.isPressed=!0,Mt=!!(n.onDrag||M._listeners.drag),Yt=!!(n.onMove||M._listeners.move),n.cursor!==!1||n.activeCursor)for(Ue=N.length;--Ue>-1;)Ki.set(N[Ue],{cursor:n.activeCursor||n.cursor||(Nd==="grab"?"grabbing":Nd)});ir(M,"press","onPress")},ve=function(ne){var Se=ne,Ue,Ze,ct,Bt,He,mt;if(!ye||h4||!M.isPressed||!ne){Si&&ne&&ye&&es(ne);return}if(M.pointerEvent=ne,Ue=ne.changedTouches,Ue){if(ne=Ue[0],ne!==tt&&ne.identifier!==bt){for(Bt=Ue.length;--Bt>-1&&(ne=Ue[Bt]).identifier!==bt&&ne.target!==a;);if(Bt<0)return}}else if(ne.pointerId&&bt&&ne.pointerId!==bt)return;if(Nt&&pi&&!Kt&&(ts.x=ne.pageX-($?_h(ge):0),ts.y=ne.pageY-($?mh(ge):0),Dt&&Dt.apply(ts,ts),Ze=ts.x,ct=ts.y,He=Math.abs(Ze-Ve),mt=Math.abs(ct-ut),(He!==mt&&(He>F||mt>F)||Yd&&pi===Kt)&&(Kt=He>mt&&I?"x":"y",pi&&Kt!==pi&&wr(Ca,"touchforcechange",es),M.vars.lockAxisOnTouchScroll!==!1&&I&&R&&(M.lockedAxis=Kt==="x"?"y":"x",CA(M.vars.onLockAxis)&&M.vars.onLockAxis.call(M,Se)),Yd&&pi===Kt))){ke(Se);return}!M.allowEventDefault&&(!pi||Kt&&pi!==Kt)&&Se.cancelable!==!1?(es(Se),Si=!0):Si&&(Si=!1),M.autoScroll&&(X=!0),se(ne.pageX,ne.pageY,Yt)},se=function(ne,Se,Ue){var Ze=1-M.dragResistance,ct=1-M.edgeResistance,Bt=M.pointerX,He=M.pointerY,mt=et,Wt=M.x,ei=M.y,ai=M.endX,Je=M.endY,Tt=M.endRotation,Ot=_t,ta,oa,Bi,Gt,Bn,Xt;M.pointerX=ne,M.pointerY=Se,$&&(ne-=_h(ge),Se-=mh(ge)),s?(Gt=Math.atan2(dt.y-Se,ne-dt.x)*nv,Bn=M.y-Gt,Bn>180?(et-=360,M.y=Gt):Bn<-180&&(et+=360,M.y=Gt),M.x!==at||Math.max(Math.abs(Ve-ne),Math.abs(ut-Se))>F?(M.y=Gt,Bi=at+(et-Gt)*Ze):Bi=at):(Dt&&(Xt=ne*Dt.a+Se*Dt.c+Dt.e,Se=ne*Dt.b+Se*Dt.d+Dt.f,ne=Xt),oa=Se-ut,ta=ne-Ve,oa<F&&oa>-F&&(oa=0),ta<F&&ta>-F&&(ta=0),(M.lockAxis||M.lockedAxis)&&(ta||oa)&&(Xt=M.lockedAxis,Xt||(M.lockedAxis=Xt=I&&Math.abs(ta)>Math.abs(oa)?"y":R?"x":null,Xt&&CA(M.vars.onLockAxis)&&M.vars.onLockAxis.call(M,M.pointerEvent)),Xt==="y"?oa=0:Xt==="x"&&(ta=0)),Bi=bA(at+ta*Ze),Gt=bA(et+oa*Ze)),(Qt||Ct||Zt)&&(M.x!==Bi||M.y!==Gt&&!s)&&(Zt&&(th.x=Bi,th.y=Gt,Xt=Zt(th),Bi=bA(Xt.x),Gt=bA(Xt.y)),Qt&&(Bi=bA(Qt(Bi))),Ct&&(Gt=bA(Ct(Gt)))),xt&&(Bi>rt?Bi=rt+Math.round((Bi-rt)*ct):Bi<pt&&(Bi=pt+Math.round((Bi-pt)*ct)),s||(Gt>je?Gt=Math.round(je+(Gt-je)*ct):Gt<Qe&&(Gt=Math.round(Qe+(Gt-Qe)*ct)))),(M.x!==Bi||M.y!==Gt&&!s)&&(s?(M.endRotation=M.x=M.endX=Bi,_t=!0):(R&&(M.y=M.endY=Gt,_t=!0),I&&(M.x=M.endX=Bi,_t=!0)),!Ue||ir(M,"move","onMove")!==!1?!M.isDragging&&M.isPressed&&(M.isDragging=Ri=!0,ir(M,"dragstart","onDragStart")):(M.pointerX=Bt,M.pointerY=He,et=mt,M.x=Wt,M.y=ei,M.endX=ai,M.endY=Je,M.endRotation=Tt,_t=Ot))},ke=function Te(ne,Se){if(!ye||!M.isPressed||ne&&bt!=null&&!Se&&(ne.pointerId&&ne.pointerId!==bt&&ne.target!==a||ne.changedTouches&&!oN(ne.changedTouches,bt))){Si&&ne&&ye&&es(ne);return}M.isPressed=!1;var Ue=ne,Ze=M.isDragging,ct=M.vars.allowContextMenu&&ne&&(ne.ctrlKey||ne.which>2),Bt=Ki.delayedCall(.001,re),He,mt,Wt,ei,ai;if(Nt?(ur(Nt,"touchend",Te),ur(Nt,"touchmove",ve),ur(Nt,"touchcancel",Te),ur(ge,"touchstart",cv)):ur(ge,"mousemove",ve),ur(Ca,"touchforcechange",es),(!H1||!Nt)&&(ur(ge,"mouseup",Te),ne&&ne.target&&ur(ne.target,"mouseup",Te)),_t=!1,Ze&&(V=sv=yA(),M.isDragging=!1),lv(wi),Ai&&!ct){ne&&(ur(ne.target,"change",Te),M.pointerEvent=Ue),y1(N,!1),ir(M,"release","onRelease"),ir(M,"click","onClick"),Ai=!1;return}for(mt=N.length;--mt>-1;)d3(N[mt],"cursor",n.cursor||(n.cursor!==!1?Nd:null));if(Bg--,ne){if(He=ne.changedTouches,He&&(ne=He[0],ne!==tt&&ne.identifier!==bt)){for(mt=He.length;--mt>-1&&(ne=He[mt]).identifier!==bt&&ne.target!==a;);if(mt<0&&!Se)return}M.pointerEvent=Ue,M.pointerX=ne.pageX,M.pointerY=ne.pageY}return ct&&Ue?(es(Ue),Si=!0,ir(M,"release","onRelease")):Ue&&!Ze?(Si=!1,li&&(n.snap||n.bounds)&&na(n.inertia||n.throwProps),ir(M,"release","onRelease"),(!Yd||Ue.type!=="touchmove")&&Ue.type.indexOf("cancel")===-1&&(ir(M,"click","onClick"),yA()-q<300&&ir(M,"doubleclick","onDoubleClick"),ei=Ue.target||a,q=yA(),ai=function(){q!==oi&&M.enabled()&&!M.isPressed&&!Ue.defaultPrevented&&(ei.click?ei.click():ge.createEvent&&(Wt=ge.createEvent("MouseEvents"),Wt.initMouseEvent("click",!0,!0,Ca,1,M.pointerEvent.screenX,M.pointerEvent.screenY,M.pointerX,M.pointerY,!1,!1,!1,!1,0,null),ei.dispatchEvent(Wt)))},!Yd&&!Ue.defaultPrevented&&Ki.delayedCall(.05,ai))):(na(n.inertia||n.throwProps),!M.allowEventDefault&&Ue&&(n.dragClickables!==!1||!oe.call(M,Ue.target))&&Ze&&(!pi||Kt&&pi===Kt)&&Ue.cancelable!==!1?(Si=!0,es(Ue)):Si=!1,ir(M,"release","onRelease")),ae()&&Bt.duration(M.tween.duration()),Ze&&ir(M,"dragend","onDragEnd"),!0},Ge=function(ne){if(ne&&M.isDragging&&!we){var Se=ne.target||a.parentNode,Ue=Se.scrollLeft-Se._gsScrollX,Ze=Se.scrollTop-Se._gsScrollY;(Ue||Ze)&&(Dt?(Ve-=Ue*Dt.a+Ze*Dt.c,ut-=Ze*Dt.d+Ue*Dt.b):(Ve-=Ue,ut-=Ze),Se._gsScrollX+=Ue,Se._gsScrollY+=Ze,se(M.pointerX,M.pointerY))}},Ie=function(ne){var Se=yA(),Ue=Se-q<100,Ze=Se-V<50,ct=Ue&&oi===q,Bt=M.pointerEvent&&M.pointerEvent.defaultPrevented,He=Ue&&qi===q,mt=ne.isTrusted||ne.isTrusted==null&&Ue&&ct;if((ct||Ze&&M.vars.suppressClickOnDrag!==!1)&&ne.stopImmediatePropagation&&ne.stopImmediatePropagation(),Ue&&!(M.pointerEvent&&M.pointerEvent.defaultPrevented)&&(!ct||mt&&!He)){mt&&ct&&(qi=q),oi=q;return}(M.isPressed||Ze||Ue)&&(!mt||!ne.detail||!Ue||Bt)&&es(ne),!Ue&&!Ze&&!Ri&&(ne&&ne.target&&(M.pointerEvent=ne),ir(M,"click","onClick"))},We=function(ne){return Dt?{x:ne.x*Dt.a+ne.y*Dt.c+Dt.e,y:ne.x*Dt.b+ne.y*Dt.d+Dt.f}:{x:ne.x,y:ne.y}};return zt=e.get(a),zt&&zt.kill(),c.startDrag=function(Te,ne){var Se,Ue,Ze,ct;fe(Te||M.pointerEvent,!0),ne&&!M.hitTest(Te||M.pointerEvent)&&(Se=ih(Te||M.pointerEvent),Ue=ih(a),Ze=We({x:Se.left+Se.width/2,y:Se.top+Se.height/2}),ct=We({x:Ue.left+Ue.width/2,y:Ue.top+Ue.height/2}),Ve-=Ze.x-ct.x,ut-=Ze.y-ct.y),M.isDragging||(M.isDragging=Ri=!0,ir(M,"dragstart","onDragStart"))},c.drag=ve,c.endDrag=function(Te){return ke(Te||M.pointerEvent,!0)},c.timeSinceDrag=function(){return M.isDragging?0:(yA()-V)/1e3},c.timeSinceClick=function(){return(yA()-q)/1e3},c.hitTest=function(Te,ne){return e.hitTest(M.target,Te,ne)},c.getDirection=function(Te,ne){var Se=Te==="velocity"&&Us?Te:jd(Te)&&!s?"element":"start",Ue,Ze,ct,Bt,He,mt;return Se==="element"&&(He=ih(M.target),mt=ih(Te)),Ue=Se==="start"?M.x-at:Se==="velocity"?Us.getVelocity(a,x):He.left+He.width/2-(mt.left+mt.width/2),s?Ue<0?"counter-clockwise":"clockwise":(ne=ne||2,Ze=Se==="start"?M.y-et:Se==="velocity"?Us.getVelocity(a,B):He.top+He.height/2-(mt.top+mt.height/2),ct=Math.abs(Ue/Ze),Bt=ct<1/ne?"":Ue<0?"left":"right",ct<ne&&(Bt!==""&&(Bt+="-"),Bt+=Ze<0?"up":"down"),Bt)},c.applyBounds=function(Te,ne){var Se,Ue,Ze,ct,Bt,He;if(Te&&n.bounds!==Te)return n.bounds=Te,M.update(!0,ne);if(ji(!0),Oa(),xt&&!ae()){if(Se=M.x,Ue=M.y,Se>rt?Se=rt:Se<pt&&(Se=pt),Ue>je?Ue=je:Ue<Qe&&(Ue=Qe),(M.x!==Se||M.y!==Ue)&&(Ze=!0,M.x=M.endX=Se,s?M.endRotation=Se:M.y=M.endY=Ue,_t=!0,wi(!0),M.autoScroll&&!M.isDragging))for(u3(a.parentNode),ct=a,Fo.scrollTop=Ca.pageYOffset!=null?Ca.pageYOffset:ge.documentElement.scrollTop!=null?ge.documentElement.scrollTop:ge.body.scrollTop,Fo.scrollLeft=Ca.pageXOffset!=null?Ca.pageXOffset:ge.documentElement.scrollLeft!=null?ge.documentElement.scrollLeft:ge.body.scrollLeft;ct&&!He;)He=Ih(ct.parentNode),Bt=He?Fo:ct.parentNode,R&&Bt.scrollTop>Bt._gsMaxScrollY&&(Bt.scrollTop=Bt._gsMaxScrollY),I&&Bt.scrollLeft>Bt._gsMaxScrollX&&(Bt.scrollLeft=Bt._gsMaxScrollX),ct=Bt;M.isThrowing&&(Ze||M.endX>rt||M.endX<pt||M.endY>je||M.endY<Qe)&&na(n.inertia||n.throwProps,Ze)}return M},c.update=function(Te,ne,Se){if(ne&&M.isPressed){var Ue=Sl(a),Ze=fa.apply({x:M.x-at,y:M.y-et}),ct=Sl(a.parentNode,!0);ct.apply({x:Ue.e-Ze.x,y:Ue.f-Ze.y},Ze),M.x-=Ze.x-ct.e,M.y-=Ze.y-ct.f,wi(!0),ze()}var Bt=M.x,He=M.y;return va(!ne),Te?M.applyBounds():(_t&&Se&&wi(!0),ji(!0)),ne&&(se(M.pointerX,M.pointerY),_t&&wi(!0)),M.isPressed&&!ne&&(I&&Math.abs(Bt-M.x)>.01||R&&Math.abs(He-M.y)>.01&&!s)&&ze(),M.autoScroll&&(u3(a.parentNode,M.isDragging),X=M.isDragging,wi(!0),uv(a,Ge),hv(a,Ge)),M},c.enable=function(Te){var ne={lazy:!0},Se,Ue,Ze;if(n.cursor!==!1&&(ne.cursor=n.cursor||Nd),Ki.utils.checkPrefix("touchCallout")&&(ne.touchCallout="none"),Te!=="soft"){for(ov(N,I===R?"none":n.allowNativeTouchScrolling&&a.scrollHeight===a.clientHeight==(a.scrollWidth===a.clientHeight)||n.allowEventDefault?"manipulation":I?"pan-y":"pan-x"),Ue=N.length;--Ue>-1;)Ze=N[Ue],H1||wr(Ze,"mousedown",fe),wr(Ze,"touchstart",fe),wr(Ze,"click",Ie,!0),Ki.set(Ze,ne),Ze.getBBox&&Ze.ownerSVGElement&&I!==R&&Ki.set(Ze.ownerSVGElement,{touchAction:n.allowNativeTouchScrolling||n.allowEventDefault?"manipulation":I?"pan-y":"pan-x"}),n.allowContextMenu||wr(Ze,"contextmenu",ea);y1(N,!1)}return hv(a,Ge),ye=!0,Us&&Te!=="soft"&&Us.track(we||a,u?"x,y":s?"rotation":"top,left"),a._gsDragID=Se=a._gsDragID||"d"+iN++,ph[Se]=M,we&&(we.enable(),we.element._gsDragID=Se),(n.bounds||s)&&ze(),n.bounds&&M.applyBounds(),M},c.disable=function(Te){for(var ne=M.isDragging,Se=N.length,Ue;--Se>-1;)d3(N[Se],"cursor",null);if(Te!=="soft"){for(ov(N,null),Se=N.length;--Se>-1;)Ue=N[Se],d3(Ue,"touchCallout",null),ur(Ue,"mousedown",fe),ur(Ue,"touchstart",fe),ur(Ue,"click",Ie,!0),ur(Ue,"contextmenu",ea);y1(N,!0),Nt&&(ur(Nt,"touchcancel",ke),ur(Nt,"touchend",ke),ur(Nt,"touchmove",ve)),ur(ge,"mouseup",ke),ur(ge,"mousemove",ve)}return uv(a,Ge),ye=!1,Us&&Te!=="soft"&&(Us.untrack(we||a,u?"x,y":s?"rotation":"top,left"),M.tween&&M.tween.kill()),we&&we.disable(),lv(wi),M.isDragging=M.isPressed=Ai=!1,ne&&ir(M,"dragend","onDragEnd"),M},c.enabled=function(Te,ne){return arguments.length?Te?M.enable(ne):M.disable(ne):ye},c.kill=function(){return M.isThrowing=!1,M.tween&&M.tween.kill(),M.disable(),Ki.set(N,{clearProps:"userSelect"}),delete ph[a._gsDragID],M},c.revert=function(){this.kill(),this.styles&&this.styles.revert()},~f.indexOf("scroll")&&(we=c.scrollProxy=new uN(a,rN({onKill:function(){M.isPressed&&ke(null)}},n)),a.style.overflowY=R&&!sm?"auto":"hidden",a.style.overflowX=I&&!sm?"auto":"hidden",a=we.content),s?D.rotation=1:(I&&(D[x]=1),R&&(D[B]=1)),H.force3D="force3D"in n?n.force3D:!0,D8(rv(c)),c.enable(),c}return e.register=function(n){Ki=n,g3()},e.create=function(n,c){return nm||g3(!0),FA(n).map(function(f){return new e(f,c)})},e.get=function(n){return ph[(FA(n)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(yA()-sv)/1e3},e.hitTest=function(n,c,f){if(n===c)return!1;var u=ih(n),s=ih(c),x=u.top,B=u.left,I=u.right,R=u.bottom,F=u.width,M=u.height,N=s.left>I||s.right<B||s.top>R||s.bottom<x,D,V,X;return N||!f?!N:(X=(f+"").indexOf("%")!==-1,f=parseFloat(f)||0,D={left:Math.max(B,s.left),top:Math.max(x,s.top)},D.width=Math.min(I,s.right)-D.left,D.height=Math.min(R,s.bottom)-D.top,D.width<0||D.height<0?!1:X?(f*=.01,V=D.width*D.height,V>=F*M*f||V>=s.width*s.height*f):D.width>f&&D.height>f)},e}(dN);sN(Uh.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Uh.zIndex=1e3;Uh.version="3.12.7";Z8()&&Ki.registerPlugin(Uh);var fN=ft('<button class="grid h-[50px] w-[50px] shrink-0 cursor-pointer place-items-center p-2"><!></button>');function gN(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(SA,"$isTerrain3d",a),f=I=>{SA.set(!c())};SA.subscribe(I=>{const R=da.getMap();R&&(I?(R.setTerrain({source:"terrain",exaggeration:1}),R.easeTo({pitch:60})):(R.setTerrain(null),R.easeTo({pitch:0})))});let u=$t(null);Lr(()=>{W(u)});var s=fN();s.__click=f;var x=Le(s);const B=ra(()=>c()?"mdi:video-2d":"mdi:video-3d");yi(x,{get icon(){return W(B)},class:"h-8 w-8 text-base"}),Ee(s),Hn(s,I=>st(u,I),()=>W(u)),Xe(t,s),_i(),n()}$a(["click"]);var pN=ft('<div class="css-svg-container svelte-cbomfq"><svg width="271" height="60" viewBox="0 0 271 40" id="forestlogotitle" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-cbomfq"><path d="M115.45 8.13H114.394V13.815H115.45V8.13Z" fill="white" class="svelte-cbomfq"></path><path d="M112.444 11.054V12.847C111.58 12.933 110.591 12.49 110.591 10.972C110.591 9.84498 111.256 9.091 112.224 9.091C113.017 9.091 113.365 9.291 113.5 9.427V8.40201C113.5 8.40201 113.051 8.13101 112.227 8.13101C110.994 8.13101 109.534 8.88499 109.534 10.994C109.534 13.089 110.995 13.815 112.144 13.815C112.707 13.815 113.104 13.815 113.501 13.642V11.054H112.444Z" fill="white" class="svelte-cbomfq"></path><path d="M119.327 9.091V8.13H116.321V13.814H117.378V11.206H119.327V10.246H117.378V9.091H119.327Z" fill="white" class="svelte-cbomfq"></path><path d="M167.536 9.073V8.112H164.53V13.796H165.587V11.188H167.536V10.228H165.587V9.073H167.536Z" fill="white" class="svelte-cbomfq"></path><path d="M121.96 13.814C123.009 13.814 123.859 13.141 123.859 12.083V8.13H122.802V12.083C122.802 12.515 122.44 12.854 121.959 12.854C121.479 12.854 121.116 12.514 121.116 12.083V8.13H120.06V12.083C120.062 13.142 120.912 13.814 121.96 13.814Z" fill="white" class="svelte-cbomfq"></path><path d="M134.163 8.349C134.046 8.261 133.669 8.129 133.158 8.129C131.903 8.129 130.765 8.99901 130.765 10.971C130.765 12.91 131.898 13.814 133.157 13.814C133.655 13.814 133.897 13.72 134.136 13.564V12.664C133.85 12.813 133.655 12.853 133.157 12.853C132.323 12.853 131.821 12.019 131.821 10.971C131.821 9.89001 132.323 9.09201 133.157 9.09201C133.655 9.09201 133.851 9.13801 134.163 9.26901V8.349Z" fill="white" class="svelte-cbomfq"></path><path d="M140.901 8.129C140.437 8.129 139.357 8.129 139.357 8.129V13.815H140.899C142.68 13.815 143.371 12.411 143.371 10.918C143.372 9.362 142.668 8.129 140.901 8.129ZM140.9 12.853C140.692 12.853 140.414 12.853 140.414 12.853V9.09201H140.9C141.881 9.09201 142.315 9.94498 142.315 10.972C142.314 11.963 141.881 12.853 140.9 12.853Z" fill="white" class="svelte-cbomfq"></path><path d="M150.948 8.134L149.895 9.60901L148.839 8.13199H147.775V13.813H148.831V10.104L149.897 11.521L150.948 10.12V13.813H152.005V8.134H150.948Z" fill="white" class="svelte-cbomfq"></path><path d="M147.083 9.09V8.129H144.035V13.817H147.083V12.856H145.091V11.332H147.041V10.372H145.091V9.09H147.083Z" fill="white" class="svelte-cbomfq"></path><path d="M156.749 8.11401H155.569L154.583 10.166L153.596 8.11401H152.417L154.059 11.536V13.798H155.116V11.536L156.749 8.11401Z" fill="white" class="svelte-cbomfq"></path><path d="M161.473 8.112C162.72 8.112 163.787 8.85201 163.787 10.954C163.787 12.506 163.2 13.796 161.473 13.796C159.951 13.796 159.16 12.575 159.16 10.954C159.159 9.00501 160.242 8.112 161.473 8.112ZM160.216 10.958C160.216 11.759 160.547 12.874 161.473 12.874C162.161 12.874 162.73 12.2 162.73 10.954C162.73 9.85401 162.156 9.07199 161.473 9.07199C160.596 9.07199 160.216 10.081 160.216 10.958Z" fill="white" class="svelte-cbomfq"></path><path d="M129.73 13.813H130.832L129.207 8.12799H127.955L126.33 13.813H127.432L127.907 12.151H129.254L129.73 13.813ZM128.183 11.19L128.582 9.79401L128.981 11.19H128.183Z" fill="white" class="svelte-cbomfq"></path><path d="M137.802 13.813H138.904L137.279 8.12799H136.027L134.402 13.813H135.504L135.979 12.151H137.327L137.802 13.813ZM136.254 11.19L136.653 9.79401L137.052 11.19H136.254Z" fill="white" class="svelte-cbomfq"></path><path d="M252.396 12.782V8.06H251.339V13.743H254.572V12.782H252.396Z" fill="white" class="svelte-cbomfq"></path><path d="M248.668 13.743C249.718 13.743 250.567 13.069 250.567 12.012V8.06H249.51V12.012C249.51 12.444 249.148 12.783 248.667 12.783C248.188 12.783 247.824 12.444 247.824 12.012V8.06H246.767V12.012C246.769 13.069 247.619 13.743 248.668 13.743Z" fill="white" class="svelte-cbomfq"></path><path d="M260.204 13.743C261.253 13.743 262.102 13.069 262.102 12.012V8.06H261.045V12.012C261.045 12.444 260.683 12.783 260.203 12.783C259.723 12.783 259.359 12.444 259.359 12.012V8.06H258.302V12.012C258.304 13.069 259.154 13.743 260.204 13.743Z" fill="white" class="svelte-cbomfq"></path><path d="M237.241 8.05801C236.776 8.05801 235.696 8.05801 235.696 8.05801V13.744H237.239C239.02 13.744 239.71 12.34 239.71 10.848C239.71 9.28999 239.007 8.05801 237.241 8.05801ZM237.239 12.781C237.03 12.781 236.753 12.781 236.753 12.781V9.01999H237.239C238.219 9.01999 238.653 9.873 238.653 10.901C238.653 11.892 238.22 12.781 237.239 12.781Z" fill="white" class="svelte-cbomfq"></path><path d="M270.235 9.01801V8.05701H267.188V13.745H270.235V12.784H268.243V11.261H270.193V10.3H268.243V9.01801H270.235Z" fill="white" class="svelte-cbomfq"></path><path d="M229.713 13.743H230.816L229.191 8.05701H227.939L226.314 13.743H227.416L227.892 12.081H229.24L229.713 13.743ZM228.165 11.12L228.564 9.724L228.963 11.12H228.165Z" fill="white" class="svelte-cbomfq"></path><path d="M233.966 8.06V11.3L232.303 8.06H231.246V13.743H232.303V10.508L233.966 13.743H235.022V8.06H233.966Z" fill="white" class="svelte-cbomfq"></path><path d="M265.946 11.921C265.77 11.362 265.563 11.148 265.436 11.065C265.829 10.796 266.137 10.308 266.137 9.67099C266.137 8.79399 265.469 8.06 264.739 8.06H262.864V13.744H263.921V11.26H264.238C264.539 11.26 264.743 11.561 264.827 11.86C264.864 11.994 265.438 13.745 265.438 13.745H266.754C266.451 13.175 266.165 12.621 265.946 11.921ZM263.886 9.01999H264.517C264.903 9.01999 265.046 9.46799 265.046 9.67099C265.046 9.91099 264.902 10.299 264.517 10.299H263.886V9.01999Z" fill="white" class="svelte-cbomfq"></path><path d="M257.713 8.06H254.165V9.01901H255.411V13.743H256.467V9.01901H257.713V8.06Z" fill="white" class="svelte-cbomfq"></path><path d="M246.019 8.27802C245.902 8.19002 245.526 8.05899 245.014 8.05899C243.759 8.05899 242.621 8.928 242.621 10.901C242.621 12.84 243.755 13.743 245.013 13.743C245.511 13.743 245.753 13.649 245.993 13.493V12.594C245.707 12.743 245.511 12.782 245.013 12.782C244.18 12.782 243.677 11.949 243.677 10.901C243.677 9.819 244.18 9.022 245.013 9.022C245.511 9.022 245.707 9.067 246.019 9.198V8.27802Z" fill="white" class="svelte-cbomfq"></path><path d="M214.083 8.112V11.353L212.421 8.112H211.364V13.796H212.421V10.562L214.083 13.796H215.14V8.112H214.083Z" fill="white" class="svelte-cbomfq"></path><path d="M182.747 11.974C182.572 11.415 182.364 11.201 182.238 11.119C182.63 10.849 182.939 10.361 182.939 9.724C182.939 8.847 182.271 8.11301 181.54 8.11301H179.665V13.797H180.722V11.313H181.04C181.341 11.313 181.544 11.614 181.628 11.913C181.666 12.047 182.24 13.798 182.24 13.798H183.555C183.253 13.228 182.967 12.674 182.747 11.974ZM180.687 9.073H181.318C181.705 9.073 181.848 9.51999 181.848 9.72299C181.848 9.96299 181.704 10.352 181.318 10.352H180.687V9.073Z" fill="white" class="svelte-cbomfq"></path><path d="M194.741 8.112H191.193V9.07101H192.438V13.796H193.495V9.07101H194.741V8.112Z" fill="white" class="svelte-cbomfq"></path><path d="M187.678 13.438C187.949 13.638 188.435 13.796 188.902 13.796C189.807 13.796 190.956 13.505 190.956 12.044C190.956 11.376 190.713 10.791 189.707 10.304C189.175 10.046 188.77 9.93101 188.77 9.53601C188.77 9.14901 189.064 9.01001 189.55 9.01001C189.923 9.01001 190.434 9.29901 190.489 9.36801V8.409C190.489 8.409 189.945 8.112 189.36 8.112C188.678 8.112 187.713 8.48101 187.713 9.53601C187.713 10.482 188.556 10.879 188.985 11.034C189.465 11.207 189.891 11.556 189.891 12.044C189.891 12.507 189.528 12.835 188.901 12.835C188.463 12.835 187.858 12.614 187.677 12.478V13.438H187.678Z" fill="white" class="svelte-cbomfq"></path><path d="M197.911 13.438C198.182 13.638 198.669 13.796 199.136 13.796C200.04 13.796 201.189 13.505 201.189 12.044C201.189 11.376 200.947 10.791 199.941 10.304C199.408 10.046 199.003 9.93101 199.003 9.53601C199.003 9.14901 199.297 9.01001 199.784 9.01001C200.156 9.01001 200.667 9.29901 200.723 9.36801V8.409C200.723 8.409 200.178 8.112 199.594 8.112C198.912 8.112 197.946 8.48101 197.946 9.53601C197.946 10.482 198.789 10.879 199.219 11.034C199.699 11.207 200.125 11.556 200.125 12.044C200.125 12.507 199.761 12.835 199.135 12.835C198.697 12.835 198.092 12.614 197.91 12.478V13.438H197.911Z" fill="white" class="svelte-cbomfq"></path><path d="M206.816 8.078H205.759V13.763H206.816V8.078Z" fill="white" class="svelte-cbomfq"></path><path d="M187.073 9.073V8.112H184.026V13.8H187.073V12.84H185.083V11.315H187.032V10.354H185.083V9.073H187.073Z" fill="white" class="svelte-cbomfq"></path><path d="M210.637 9.073V8.112H207.589V13.8H210.637V12.84H208.646V11.315H210.595V10.354H208.646V9.073H210.637Z" fill="white" class="svelte-cbomfq"></path><path d="M222.885 9.073V8.112H219.837V13.8H222.885V12.84H220.894V11.315H222.843V10.354H220.894V9.073H222.885Z" fill="white" class="svelte-cbomfq"></path><path d="M176.739 8.112C177.987 8.112 179.053 8.85201 179.053 10.954C179.053 12.506 178.467 13.796 176.739 13.796C175.218 13.796 174.426 12.575 174.426 10.954C174.426 9.00501 175.509 8.112 176.739 8.112ZM175.483 10.958C175.483 11.759 175.813 12.874 176.739 12.874C177.428 12.874 177.996 12.2 177.996 10.954C177.996 9.85401 177.422 9.07199 176.739 9.07199C175.862 9.07199 175.483 10.081 175.483 10.958Z" fill="white" class="svelte-cbomfq"></path><path d="M205.095 8.33099C204.978 8.24399 204.601 8.112 204.089 8.112C202.834 8.112 201.696 8.98101 201.696 10.954C201.696 12.893 202.829 13.796 204.088 13.796C204.587 13.796 204.827 13.703 205.067 13.546V12.647C204.782 12.796 204.587 12.835 204.088 12.835C203.255 12.835 202.753 12.003 202.753 10.954C202.753 9.87201 203.255 9.07501 204.088 9.07501C204.587 9.07501 204.782 9.12101 205.095 9.25201V8.33099Z" fill="white" class="svelte-cbomfq"></path><path d="M219.234 8.33099C219.117 8.24399 218.74 8.112 218.229 8.112C216.973 8.112 215.836 8.98101 215.836 10.954C215.836 12.893 216.969 13.796 218.227 13.796C218.726 13.796 218.967 13.703 219.207 13.546V12.647C218.921 12.796 218.726 12.835 218.227 12.835C217.394 12.835 216.892 12.003 216.892 10.954C216.892 9.87201 217.394 9.07501 218.227 9.07501C218.726 9.07501 218.921 9.12101 219.234 9.25201V8.33099Z" fill="white" class="svelte-cbomfq"></path><path d="M45.19 32.12C47.463 29.464 48.708 26.324 48.942 24.245L48.976 23.224H45.072V20.756H50.041V19.735L45.072 19.733V17.424H44.051V19.732L38.036 19.729V33.054H36.15V17.424H35.129V33.054H33.241V19.764H32.22V36.473H33.241V34.075H39.057V20.757H44.051V23.225H40.14L40.178 24.246C40.391 26.307 41.618 29.449 43.877 32.119C42.466 33.625 40.801 34.816 39.054 35.384V36.405C41.246 35.656 43.07 34.362 44.532 32.846C46.005 34.39 47.849 35.712 50.074 36.472V35.451C48.303 34.874 46.614 33.657 45.19 32.12ZM41.214 24.245H47.908C47.57 26.616 46.306 29.231 44.536 31.37C42.781 29.224 41.534 26.608 41.214 24.245Z" fill="white" class="svelte-cbomfq"></path><path d="M69.11 32.951H60.693V30.69H67.787V25.919H53.625V23.94H67.788V19.21H60.689V17.425H59.668V19.21H52.605V30.69H59.674V32.951H51.257V33.972H59.674V36.48H60.695V33.972H69.112V32.951H69.11ZM53.625 20.231H66.767V22.92H53.625V20.231ZM53.625 26.94H66.768V29.67H53.625V26.94Z" fill="white" class="svelte-cbomfq"></path><path d="M71.312 29.308V17.425H70.292V30.328H78.708V36.479H79.729V30.328H88.146V29.308H71.312Z" fill="white" class="svelte-cbomfq"></path><path d="M70.417 35.458V36.479C72.783 36.135 75.464 33.856 75.733 30.985H74.712C74.414 33.218 72.146 35.161 70.417 35.458Z" fill="white" class="svelte-cbomfq"></path><path d="M87.944 35.458V36.479C85.578 36.135 82.897 33.856 82.629 30.985H83.65C83.947 33.218 86.216 35.161 87.944 35.458Z" fill="white" class="svelte-cbomfq"></path><path d="M85.875 27.835H86.896V17.425H73.353V27.833L85.875 27.835ZM74.374 26.813V24.542H85.876V26.813H74.374ZM74.374 23.522V21.481H85.876V23.522H74.374ZM85.875 18.444V20.46H74.374V18.444H85.875Z" fill="white" class="svelte-cbomfq"></path><path d="M107.181 20.485V19.465H98.764V17.424H97.743V19.465H89.326V20.485H93.277V35.458H89.326V36.479H107.18V35.458H103.224V20.485H107.181ZM102.205 35.458H94.299V20.485H102.205V35.458Z" fill="white" class="svelte-cbomfq"></path><path d="M127.759 19.158H119.542V17.612H118.113V19.158H109.9V20.587H115.874C114.86 22.971 111.606 24.739 109.9 24.856V26.285C112.247 26.055 116.44 23.957 117.411 20.588H118.113V26.788H119.542V20.588H120.244C121.216 23.957 125.408 26.055 127.755 26.285V24.856C126.049 24.74 122.795 22.971 121.781 20.587H127.76V19.158H127.759Z" fill="white" class="svelte-cbomfq"></path><path d="M117.213 29.17H118.632V27.741H115.692V26.216H114.263V27.741H109.908V29.17H112.779C112.381 32.037 110.963 33.603 109.56 34.347V36.031C111.658 35.154 113.802 32.938 114.226 29.171H114.264V36.748H115.693V29.171H115.742C116.118 30.736 117.171 32.205 118.892 32.844V31.159C117.876 30.623 117.442 30.049 117.213 29.17Z" fill="white" class="svelte-cbomfq"></path><path d="M124.954 29.17H127.76V27.741H123.391V26.208H121.962V27.741H118.969V29.17H120.41C120.012 32.037 118.594 33.603 117.191 34.347V36.031C119.289 35.154 121.433 32.938 121.857 29.171H121.962V36.748H123.391V29.171H123.507C123.931 32.939 126.075 35.154 128.173 36.031V34.347C126.77 33.603 125.352 32.037 124.954 29.17Z" fill="white" class="svelte-cbomfq"></path><path d="M173.946 17.618H172.516C172.346 21.136 170.096 25.097 166.563 27.489V29.173C168.09 28.36 169.44 27.242 170.557 25.935V36.748H171.986V23.693C173.071 21.891 173.765 19.628 173.946 17.618Z" fill="white" class="svelte-cbomfq"></path><path d="M138.237 21.517H136.539C136.829 24.367 137.575 25.259 138.492 26.484V28.422C137.062 27.183 135.596 25.13 135.191 21.517H135.181V36.747H133.752V21.517H133.704C133.491 27.401 131.853 31.244 128.813 33.343V31.659C131.666 28.786 132.107 25.583 132.357 21.516H129.469V20.086H133.752V17.611H135.181V20.086H138.238V21.517H138.237Z" fill="white" class="svelte-cbomfq"></path><path d="M138.528 21.517H140.21C139.929 25.527 139.34 28.595 136.676 31.603V33.287C139.706 31.194 141.342 27.369 141.564 21.517H141.616V36.747H143.045V21.517H143.112C143.326 27.401 144.964 31.244 148.004 33.343V31.659C145.183 28.653 144.716 25.557 144.462 21.516H147.329V20.086H143.046V17.611H141.617V20.086H138.529V21.517H138.528Z" fill="white" class="svelte-cbomfq"></path><path d="M166.641 21.511V20.082H158.401V17.612H156.972V20.082H148.782V21.511H151.863C152.643 24.902 154.418 28.214 156.705 30.882C154.436 33.242 151.686 34.98 148.782 35.316V36.744C151.873 36.524 155.057 34.685 157.709 31.979C160.361 34.685 163.546 36.524 166.636 36.744V35.316C163.733 34.98 160.982 33.243 158.713 30.882C161.001 28.214 162.775 24.902 163.556 21.511H166.641ZM157.709 29.761C155.618 27.256 154.052 24.256 153.328 21.511H162.09C161.366 24.256 159.8 27.256 157.709 29.761Z" fill="white" class="svelte-cbomfq"></path><path d="M231.128 17.692H220.547V19.121H231.128V17.692Z" fill="white" class="svelte-cbomfq"></path><path d="M270.198 25.397H255.146V26.825H270.198V25.397Z" fill="white" class="svelte-cbomfq"></path><path d="M201.714 17.692H185.897V19.121H200.228C199.828 23.985 197.343 26.192 194.061 26.442V20.938H192.632V27.868C192.632 31.243 189.767 35.318 185.897 35.318V36.747C190.38 36.747 194.057 32.508 194.061 27.876C197.789 27.644 201.214 25.346 201.665 19.121H201.715V17.692H201.714Z" fill="white" class="svelte-cbomfq"></path><path d="M210.825 20.167V17.692H209.395V20.167H203.094V21.596H209.395V24.649C209.395 30.5 206.413 33.736 203.094 35.319V36.748C206.938 35.687 210.824 31.129 210.824 24.662V21.597H217.482C217.482 24.854 217.482 33.143 217.482 33.448C217.482 34.528 216.781 35.323 215.791 35.323C215.449 35.323 213.016 35.323 213.016 35.323V36.752C213.016 36.752 215.236 36.752 215.702 36.752C217.412 36.752 218.912 35.538 218.912 33.539C218.912 33.048 218.912 20.245 218.912 20.245V20.169H210.825V20.167Z" fill="white" class="svelte-cbomfq"></path><path d="M236.364 22.718H220.547V24.148H228.124V28.814C228.124 32.683 224.912 35.322 220.547 35.322V36.751C225.032 36.751 229.553 34.125 229.553 28.814V24.148H236.365V22.718H236.364Z" fill="white" class="svelte-cbomfq"></path><path d="M236.365 17.692H234.937V19.215H236.365V17.692Z" fill="white" class="svelte-cbomfq"></path><path d="M233.742 17.692H232.389V19.215H233.742V17.692Z" fill="white" class="svelte-cbomfq"></path><path d="M184.418 22.456V20.772C182.231 22.418 179.548 23.842 177.043 24.252C177.043 20.762 177.043 17.611 177.043 17.611H175.614C175.614 17.611 175.614 32.912 175.614 33.529C175.614 35.734 177.114 36.742 178.825 36.742C179.29 36.742 184.415 36.742 184.415 36.742V35.314C184.415 35.314 179.076 35.314 178.735 35.314C177.745 35.314 177.043 34.519 177.043 33.439C177.043 33.252 177.043 29.483 177.043 25.669C179.828 25.187 182.833 23.603 184.418 22.456Z" fill="white" class="svelte-cbomfq"></path><path d="M253.829 17.61H238.087V19.039H253.829V17.61Z" fill="white" class="svelte-cbomfq"></path><path d="M253.829 22.739H238.087V24.169H253.829V22.739Z" fill="white" class="svelte-cbomfq"></path><path d="M253.829 35.235C253.829 35.235 244.28 35.235 243.897 35.235C240.807 35.235 239.516 33.286 239.516 31.86C239.516 31.519 239.516 30.004 239.516 30.004H238.086C238.086 30.004 238.086 31.245 238.086 31.711C238.086 34.187 239.757 36.665 243.807 36.665C244.425 36.665 253.828 36.665 253.828 36.665V35.235H253.829Z" fill="white" class="svelte-cbomfq"></path><path d="M173.979 9.073V8.10599H170.957V13.748H172.02V9.073H173.979Z" fill="white" class="svelte-cbomfq"></path><path d="M174.136 10.325C174.115 10.745 172.991 11.847 172.152 11.227C171.983 10.294 173.706 9.95802 174.136 10.325Z" fill="white" class="svelte-cbomfq"></path><path d="M3.077 30.092C3.077 29.092 2.578 24.436 10.745 21.269C18.911 18.102 27.328 13.936 27.328 5.85199C27.328 4.99699 27.328 1.522 27.328 1.397C27.328 1.147 27.394 1.069 27.749 1.069C27.749 1.069 31.546 1.069 32.255 1.069V0.429993C32.255 0.429993 21.999 0.429993 21.745 0.429993C7.245 0.429993 2.953 12.414 2.953 19.644C2.953 23.477 2.929 30.092 2.929 30.092" fill="white" class="svelte-cbomfq"></path><path d="M3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 36.185 5.997 36.348 5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.665 39.023 6.011 37.679 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 36.185 5.997 36.348 5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.665 39.023 6.011 37.679 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 1.312 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 1.312 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 1.312 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.375 36.019 0.976 36.019C1.601 36.155 1.899 36.092 2.244 36.019C2.471 36.019 2.709 36.019 2.954 36.019C4.613 36.019 5.982 36.019 6.012 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.25 36.019 0.667 36.019C1.512 36.394 2.344 36.084 2.502 36.019C2.649 36.019 2.8 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.179 36.019 0.487 36.019C0.848 36.287 1.531 36.503 2.725 36.019C2.8 36.019 2.876 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.128 36.019 0.353 36.019C0.994 36.746 2.361 36.332 2.923 36.019C2.933 36.019 2.943 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.089 36.019 0.248 36.019C0.534 36.383 0.728 36.462 1.248 36.544C1.354 36.544 1.466 36.544 1.582 36.544C2.061 36.476 2.377 36.431 3.118 36.019C4.702 36.019 5.982 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.06 36.019 0.168 36.019C0.699 36.992 2.216 36.776 3.317 36.019C4.808 36.019 5.983 36.019 6.01 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.036 36.019 0.104 36.019C0.572 37.053 2.039 37.053 3.515 36.019C4.911 36.019 5.984 36.019 6.01 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.02 36.019 0.057 36.019C0.464 37.341 2.392 37.1 3.718 36.019C5.014 36.019 5.986 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0.007 36.019 0.017 36.019 0.023 36.019C0.327 37.407 2.255 37.407 3.918 36.019C5.112 36.019 5.987 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0.001 36.019 0.003 36.019 0.004 36.019C0.189 37.578 2.461 37.578 4.125 36.019C5.212 36.019 5.988 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.017 36.369 0.004 36.232 0 36.091C0.144 37.779 2.611 37.737 4.329 36.017C5.308 36.017 5.989 36.017 6.01 36.017C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.988999 38.252 0.879999 38.143C0.770999 38.034 0.670999 37.917 0.578999 37.793C0.487999 37.668 0.405999 37.537 0.334999 37.398C0.263999 37.26 0.201999 37.117 0.151999 36.967C0.102999 36.818 0.0639988 36.663 0.0389988 36.505C0.0289988 36.446 0.0209988 36.387 0.0159988 36.327C0.290999 37.994 2.921 37.813 4.555 36.016C5.411 36.016 5.991 36.016 6.01 36.016C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.113 36.849 0.0809998 36.728 0.0559998 36.605C0.494 38.26 3.193 37.925 4.792 36.017C5.516 36.017 5.991 36.017 6.009 36.017C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989004 38.252 0.880004 38.143C0.771004 38.034 0.671004 37.917 0.579004 37.793C0.488004 37.668 0.406004 37.537 0.335004 37.398C0.264004 37.26 0.202004 37.117 0.152004 36.967C0.151004 36.962 0.148004 36.955 0.146004 36.949C0.730004 38.427 3.426 38.188 5.076 36.016C5.639 36.016 5.994 36.016 6.01 36.016C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C1.312 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C1.312 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C1.311 36.019 0 36.019 0 36.019C0 33.019 3.006 31.644 3.006 29.519C3.001 30.452 2.5 31.152 1.684 32.216C1.049 33.044 0.091 34.294 0.472 35.284C0.75 36.009 2.16 36.381 2.949 35.506C3.126 35.31 3.595 34.789 3.605 33.733C3.619 32.298 3.004 30.953 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C2.997 30.455 2.495 31.154 1.677 32.216C-0.421 34.944 0.337 35.769 0.976 36.019C0.375 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C2.708 36.019 2.47 36.019 2.243 36.019C2.266 36.015 2.299 36.009 2.323 36.005C3.318 35.533 3.601 34.731 3.663 34.14C3.831 32.544 3.004 31.091 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C2.987 30.421 2.586 31.034 1.675 32.216C1.132 32.922 -0.523 35.07 0.667 36.019C0.25 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C2.8 36.019 2.649 36.019 2.502 36.019C2.572 35.987 2.666 35.945 2.736 35.913C3.215 35.434 3.757 34.892 3.805 33.733C3.833 33.052 3.678 32.579 3.481 31.979C3.086 30.779 3.004 30.53 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.995 29.741C2.935 30.345 2.659 30.802 2.437 31.169C2.773 30.643 3.005 30.109 3.005 29.519C3.004 29.586 3.002 29.675 2.995 29.741Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 34.975 0.364 34.127 0.84 33.376H0.839C0.535 33.887 -0.178 35.081 0.487 36.019C0.179 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C2.877 36.019 2.801 36.019 2.725 36.019C3.095 35.698 3.866 35.03 3.921 33.733C3.948 33.1 3.72 32.478 3.537 31.979C3.096 30.778 3.004 30.527 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.004 29.599C2.983 30.132 2.805 30.492 2.649 30.809C2.867 30.398 3.006 29.976 3.006 29.519C3.005 29.543 3.005 29.575 3.004 29.599Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.193 0.229 34.489 0.56 33.86C0.247 34.506 -0.028 35.205 0.353 36.019C0.128 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C3.011 35.96 3.087 35.882 3.144 35.824C4.5 34.222 3.998 32.978 3.593 31.979C3.118 30.805 3.006 30.527 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.993 29.757C2.954 30.121 2.843 30.386 2.776 30.544C2.92 30.216 3.005 29.878 3.005 29.519C3.003 29.59 3.001 29.686 2.993 29.757Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.355 0.147 34.771 0.377 34.241C0.242 34.59 -0.036 35.316 0.248 36.019C0.089 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.983 36.019 4.702 36.019 3.118 36.019C3.133 36.005 3.153 35.988 3.168 35.974C4.322 34.554 4.421 33.733 3.648 31.979C3.157 30.865 3.008 30.529 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.004 29.604C2.994 29.824 2.967 30.014 2.858 30.336C2.952 30.073 3.005 29.803 3.005 29.519C3.005 29.544 3.005 29.578 3.004 29.604Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.494 0.093 35.017 0.245 34.579C0.131 34.965 0.001 35.402 0.168 36.019C0.06 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.984 36.019 4.809 36.019 3.318 36.019C3.378 35.945 3.457 35.846 3.515 35.772C4.764 34.197 4.176 32.967 3.703 31.979C3.186 30.897 3.012 30.532 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.989 29.794C2.971 29.936 2.93 30.101 2.918 30.148C2.975 29.945 3.006 29.736 3.006 29.519C3.003 29.602 2.999 29.712 2.989 29.794Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.61 0.057 35.231 0.152 34.876C0.105 35.068 -0.005 35.518 0.104 36.019C0.036 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.985 36.019 4.911 36.019 3.516 36.019C3.537 35.993 3.565 35.956 3.585 35.93C4.811 34.178 4.449 33.304 3.584 31.647C3.093 30.707 3.006 30.211 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.003 29.627C2.994 29.782 2.983 29.844 2.961 29.966C2.99 29.82 3.006 29.671 3.006 29.519C3.005 29.551 3.005 29.595 3.003 29.627Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.721 0.03 35.44 0.083 35.171C0.035 35.504 0.011 35.671 0.057 36.019C0.02 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.986 36.019 5.014 36.019 3.718 36.019C4.741 34.497 4.76 33.704 3.811 31.979C3.259 30.976 3.007 30.518 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.989 29.786C3 29.698 3.006 29.609 3.006 29.518C3.002 29.599 2.998 29.706 2.989 29.786Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.831 0.012 35.65 0.034 35.475C0.011 35.674 0.013 35.74 0.023 36.019C0.008 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.988 36.019 5.113 36.019 3.918 36.019C3.938 35.99 3.964 35.951 3.983 35.92C5.054 34.146 4.661 33.328 3.669 31.648C3.11 30.703 3.007 30.189 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.004 29.596C3.005 29.571 3.006 29.544 3.006 29.519L3.004 29.596Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.943 0.002 35.868 0.006 35.793L0.004 36.019C0.002 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.989 36.019 5.212 36.019 4.125 36.019C4.174 35.934 4.238 35.822 4.286 35.737C5.214 34.048 4.648 33.145 3.711 31.65C3.061 30.612 3.007 30.071 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.99 36.019 5.309 36.019 4.33 36.019C5.277 34.327 4.929 33.449 3.968 31.979C3.369 31.063 3.008 30.509 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.991 36.019 5.412 36.019 4.556 36.019C4.598 35.931 4.654 35.814 4.697 35.726C5.451 34.046 4.863 33.196 3.797 31.651C3.082 30.616 3.017 30.093 3.007 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.993 36.019 5.518 36.019 4.794 36.019C4.832 35.928 4.882 35.808 4.92 35.717C5.55 34.022 5.014 33.279 3.838 31.653C3.079 30.603 3.012 30.045 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.995 36.019 5.64 36.019 5.077 36.019C5.673 34.397 5.393 33.663 4.124 31.98C3.36 30.967 3.023 30.428 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.429 32.615C3.909 35.739 2.083 36.326 0.929001 35.604C-0.297999 34.838 1.116 32.978 1.874 31.978C2.628 30.986 2.989 30.372 3.005 29.564C3.005 29.816 3.003 30.285 3.072 30.785C3.157 31.402 3.335 32.001 3.429 32.615Z" fill="white" class="svelte-cbomfq"></path><path d="M3.345 32.615C3.581 34.542 3.391 34.763 2.759 35.498C2.117 36.245 1.135 35.555 0.944996 35.409C-0.0930036 34.614 1.052 33.091 1.888 31.978C2.632 30.988 2.99 30.376 3.005 29.582C3.004 29.832 3.004 29.832 3.345 32.615Z" fill="white" class="svelte-cbomfq"></path><path d="M3.267 32.615C3.41 33.924 3.468 34.466 3.107 35.023C2.762 35.554 2.183 36.071 1.383 35.519C0.322001 34.788 0.256001 34.204 1.904 31.978C2.61 31.025 2.974 30.403 3.004 29.65C3.006 30.224 3.006 30.224 3.267 32.615Z" fill="white" class="svelte-cbomfq"></path><path d="M3.322 34.14C3.295 34.51 2.649 36.781 1.001 35.024C0.275999 34.252 1.115 33.096 1.927 31.979C2.636 31.002 2.979 30.406 3.004 29.658C3 30.638 3.209 32.835 3.264 33.288C3.297 33.567 3.339 33.917 3.322 34.14Z" fill="white" class="svelte-cbomfq"></path><path d="M3.27 34.14C3.193 35.192 2.23 36.148 1.418 35.238C0.678997 34.408 0.428997 34.129 1.953 31.979C2.653 30.992 2.971 30.428 3.003 29.695C3.003 30.022 3.003 30.022 3.011 30.242C3.043 31.127 3.087 32.209 3.087 32.218C3.114 32.86 3.316 33.488 3.27 34.14Z" fill="white" class="svelte-cbomfq"></path><path d="M3.152 34.467C2.953 35.81 1.677 35.714 1.341 35.024C0.811002 33.936 0.742002 33.796 1.988 31.979C2.86 30.706 2.97 30.298 3.001 29.732C3.004 30.464 3.034 31.196 3.022 31.928C3.009 32.777 3.279 33.611 3.152 34.467Z" fill="white" class="svelte-cbomfq"></path><path d="M3.147 34.218C2.863 36.115 1.62 35.426 1.422 35.024C1.382 34.942 1.371 34.816 1.351 34.727C1.349 34.715 1.346 34.701 1.344 34.689C1.271 34.371 1.055 34.085 1.125 33.733C1.233 33.195 1.604 32.631 2.031 31.979C2.832 30.761 2.963 30.395 3 29.769C3.018 31.411 3.018 31.411 2.975 31.871C2.959 32.041 2.93 32.487 3.006 32.975C3.173 34.047 3.173 34.047 3.147 34.218Z" fill="white" class="svelte-cbomfq"></path><path d="M3.079 34.569C2.807 35.564 1.869 35.707 1.507 35.023C1.441 34.899 1.401 34.709 1.39 34.569C1.386 34.529 1.398 34.475 1.398 34.435C1.397 34.363 1.352 34.273 1.333 34.204C1.332 34.201 1.238 33.811 1.375 33.345C1.639 32.441 2.292 31.749 2.703 30.925C2.84 30.652 2.956 30.379 3 29.805C3.006 30.066 3.013 30.326 3.017 30.587C3.029 31.247 2.884 31.899 2.892 32.559C2.897 33.234 3.271 33.875 3.079 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M3.048 34.569C2.816 35.372 2.009 35.749 1.592 35.023C1.323 34.555 1.486 33.693 1.568 33.344C1.673 32.898 1.77 32.724 2.399 31.592C2.698 31.054 2.934 30.629 2.998 29.841C3.004 29.939 3.014 30.58 3.014 30.586C3.022 31.249 2.787 31.886 2.798 32.55C2.809 33.232 3.254 33.86 3.048 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M3.017 34.569C2.789 35.316 2.031 35.683 1.652 35.023C1.34 34.48 1.553 33.805 2.086 32.672C2.094 32.654 2.899 30.932 2.996 29.886C3.006 30.109 3.011 30.582 3.011 30.586C3.015 31.257 2.706 31.878 2.695 32.547C2.692 32.688 2.786 32.971 2.787 32.973C2.843 33.068 3.188 34.01 3.017 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.985 34.569C2.809 35.127 2.34 35.306 2.337 35.307C2.228 35.346 2.058 35.32 1.952 35.273C1.854 35.23 1.754 35.115 1.701 35.023C1.698 35.019 1.464 34.581 1.596 34.139C1.88 33.19 2.398 32.685 2.402 32.684C2.463 32.66 2.569 32.674 2.618 32.718C2.676 32.772 2.656 32.899 2.683 32.973C2.704 33.034 2.756 33.104 2.791 33.159C2.862 33.27 2.978 33.728 2.978 33.732C3.069 34.191 3.021 34.453 2.985 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.998 30.925C2.956 31.441 2.794 31.701 2.792 31.702C2.762 31.732 2.691 31.773 2.657 31.748C2.647 31.741 2.652 31.533 2.7 31.271C2.759 30.953 2.863 30.646 2.931 30.33C2.961 30.188 2.957 30.041 2.995 29.9C3.011 30.776 3.011 30.776 2.998 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.954 34.569C2.815 35.005 2.427 35.235 2.338 35.268C2.23 35.309 2.062 35.269 1.955 35.225C1.876 35.192 1.794 35.097 1.751 35.023L1.616 34.569C1.628 34.208 1.628 34.208 1.789 33.805C1.816 33.737 1.971 33.377 2.319 33.002L2.577 32.958C2.585 32.963 3.183 33.847 2.954 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.922 34.569C2.806 34.936 2.449 35.184 2.34 35.229C2.233 35.272 2.067 35.218 1.958 35.177C1.896 35.154 1.835 35.079 1.802 35.023C1.691 34.837 1.644 34.334 1.72 34.139C1.85 33.805 1.928 33.603 2.132 33.344C2.176 33.289 2.22 33.199 2.279 33.162C2.353 33.115 2.477 33.043 2.558 33.075C2.606 33.095 2.862 33.577 2.899 33.731C2.936 33.885 3.024 34.247 2.922 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.991 30.925C2.949 31.361 2.823 31.52 2.822 31.521C2.794 31.533 2.743 31.511 2.725 31.485C2.688 31.428 2.723 31.327 2.735 31.26C2.749 31.183 2.766 31.08 2.781 31.004C2.825 30.777 2.89 30.556 2.935 30.329C2.962 30.193 2.967 30.054 2.997 29.918C2.995 30.254 3.022 30.59 2.991 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.891 34.569C2.8 34.853 2.432 35.168 2.341 35.19C2.23 35.217 2.071 35.167 1.962 35.129C1.919 35.114 1.886 35.055 1.853 35.023C1.751 34.922 1.748 34.707 1.709 34.569C1.699 34.532 1.753 34.055 1.937 33.732L2.242 33.325C2.316 33.259 2.448 33.158 2.543 33.187C2.595 33.204 2.606 33.297 2.634 33.344C2.667 33.401 2.727 33.466 2.769 33.516C2.815 33.57 2.844 33.663 2.862 33.732C2.919 33.964 2.991 34.252 2.891 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.983 30.925C2.967 31.08 2.967 31.08 2.84 31.407C2.761 31.32 2.761 31.32 2.768 31.26C2.779 31.159 2.791 31.025 2.809 30.925L2.996 29.944C2.991 30.855 2.991 30.855 2.983 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.859 34.569C2.78 34.816 2.39 35.14 2.342 35.151C2.23 35.177 2.047 35.163 1.965 35.083C1.881 35.002 1.806 34.829 1.74 34.569C1.739 34.566 1.734 34.155 1.985 33.732C2.045 33.633 2.128 33.498 2.217 33.425L2.523 33.299C2.525 33.3 2.808 33.688 2.82 33.732C2.898 34.024 2.96 34.256 2.859 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.977 30.925C2.967 31.01 2.967 31.01 2.859 31.294C2.839 31.264 2.8 31.249 2.793 31.21C2.783 31.156 2.803 31.082 2.808 31.027C2.828 30.845 2.995 29.976 2.996 29.968C2.99 30.8 2.99 30.8 2.977 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.828 34.569C2.772 34.744 2.378 35.106 2.345 35.113C2.233 35.137 2.053 35.115 1.97 35.036C1.931 35 1.775 34.572 1.774 34.569C1.773 34.566 1.732 34.23 2.038 33.732C2.08 33.664 2.135 33.566 2.199 33.518C2.282 33.457 2.415 33.356 2.513 33.384C2.515 33.384 2.788 33.745 2.793 33.764C2.876 34.076 2.926 34.264 2.828 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.969 30.925C2.963 30.98 2.919 31.091 2.869 31.22C2.807 31.135 2.807 31.135 2.826 30.949C2.831 30.903 2.993 30.001 2.994 29.994C2.989 30.75 2.989 30.75 2.969 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.797 34.569C2.764 34.673 2.388 35.066 2.347 35.075C2.304 35.084 2.005 35.004 1.975 34.975C1.879 34.883 1.822 34.7 1.806 34.569C1.79 34.439 1.831 34.262 1.874 34.139C1.875 34.136 2.046 33.756 2.179 33.612C2.252 33.532 2.398 33.424 2.503 33.45C2.509 33.451 3.007 33.915 2.797 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.972 30.848C2.966 30.899 2.952 30.969 2.877 31.166C2.825 31.059 2.825 31.059 2.839 30.925C2.844 30.872 2.991 30.026 2.993 30.019C2.989 30.718 2.989 30.718 2.972 30.848Z" fill="white" class="svelte-cbomfq"></path><path d="M2.766 34.569C2.755 34.604 2.352 35.036 2.349 35.036C2.329 35.041 1.999 34.928 1.981 34.91C1.978 34.908 1.726 34.635 1.909 34.139C1.91 34.136 2.135 33.734 2.16 33.707C2.239 33.622 2.382 33.491 2.495 33.516C2.5 33.518 2.969 33.941 2.766 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.977 30.759C2.956 30.923 2.934 30.982 2.885 31.111C2.835 30.965 2.822 30.924 2.991 30.045C2.989 30.652 2.989 30.652 2.977 30.759Z" fill="white" class="svelte-cbomfq"></path><path d="M2.771 34.248C2.758 34.345 2.775 34.484 2.727 34.569C2.643 34.716 2.515 34.952 2.35 34.991C2.236 35.018 2.07 34.928 1.986 34.845C1.768 34.629 1.94 34.144 1.942 34.139C1.986 34.029 2.058 33.881 2.141 33.795C2.168 33.767 2.471 33.579 2.485 33.582C2.526 33.59 2.654 33.82 2.777 34.105C2.794 34.146 2.777 34.206 2.771 34.248Z" fill="white" class="svelte-cbomfq"></path><path d="M2.98 30.669C2.958 30.859 2.949 30.885 2.892 31.055C2.854 30.909 2.837 30.849 2.99 30.07C2.99 30.349 2.989 30.59 2.98 30.669Z" fill="white" class="svelte-cbomfq"></path><path d="M2.688 34.569C2.625 34.705 2.501 34.91 2.354 34.942C2.239 34.967 2.084 34.857 1.994 34.782C1.941 34.737 1.92 34.636 1.905 34.569C1.904 34.565 1.906 34.125 2.126 33.882C2.16 33.843 2.459 33.646 2.478 33.65C2.5 33.655 2.731 34.076 2.746 34.139C2.773 34.267 2.741 34.451 2.688 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.925 30.925C2.919 30.947 2.907 30.978 2.901 30.999C2.869 30.867 2.851 30.795 2.99 30.094C2.989 30.594 2.989 30.684 2.925 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.647 34.569C2.593 34.688 2.485 34.868 2.356 34.893C2.24 34.916 2.094 34.791 2 34.718C1.962 34.688 1.95 34.615 1.937 34.569C1.936 34.566 1.948 34.147 2.109 33.969C2.118 33.959 2.463 33.716 2.467 33.717C2.471 33.718 2.697 34.128 2.699 34.139C2.727 34.267 2.701 34.451 2.647 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.914 30.925C2.912 30.931 2.909 30.939 2.907 30.945C2.881 30.838 2.86 30.754 2.987 30.12C2.988 30.551 2.989 30.653 2.914 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.607 34.569C2.562 34.671 2.469 34.826 2.359 34.845C2.241 34.866 2.105 34.725 2.006 34.655C1.984 34.639 1.979 34.595 1.97 34.569C1.969 34.566 2.003 34.16 2.093 34.058C2.184 33.954 2.324 33.752 2.458 33.782C2.578 33.808 2.633 34.019 2.655 34.139C2.68 34.268 2.66 34.451 2.607 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.914 30.893C2.893 30.708 2.885 30.64 2.986 30.145C2.986 30.575 2.986 30.583 2.914 30.893Z" fill="white" class="svelte-cbomfq"></path><path d="M2.568 34.569C2.531 34.653 2.454 34.782 2.362 34.798C2.36 34.798 2.032 34.636 2.005 34.569C1.954 34.448 2.016 34.251 2.086 34.139C2.161 34.021 2.314 33.818 2.451 33.846C2.55 33.866 2.597 34.04 2.612 34.139C2.633 34.268 2.62 34.45 2.568 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.92 30.843C2.904 30.648 2.899 30.581 2.984 30.169C2.984 30.566 2.976 30.604 2.92 30.843Z" fill="white" class="svelte-cbomfq"></path><path d="M2.528 34.569C2.5 34.635 2.438 34.739 2.366 34.75C2.262 34.766 2.107 34.666 2.066 34.569C2.014 34.448 2.092 34.254 2.158 34.139C2.213 34.044 2.337 33.889 2.444 33.91C2.52 33.926 2.558 34.061 2.568 34.139C2.585 34.269 2.58 34.45 2.528 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.927 30.793C2.923 30.731 2.913 30.648 2.919 30.587C2.919 30.585 2.974 30.233 2.982 30.194C2.982 30.55 2.967 30.616 2.927 30.793Z" fill="white" class="svelte-cbomfq"></path><path d="M2.489 34.569C2.468 34.618 2.423 34.694 2.369 34.702C2.292 34.714 2.178 34.64 2.146 34.569C2.093 34.449 2.174 34.257 2.232 34.139C2.266 34.069 2.359 33.96 2.436 33.975C2.601 34.009 2.492 34.563 2.489 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.933 30.744C2.93 30.696 2.922 30.634 2.927 30.587C2.927 30.584 2.977 30.238 2.982 30.219C2.98 30.491 2.968 30.561 2.933 30.744Z" fill="white" class="svelte-cbomfq"></path><path d="M2.373 34.655C2.322 34.663 2.248 34.615 2.227 34.569C2.172 34.45 2.259 34.261 2.306 34.139C2.323 34.095 2.382 34.032 2.428 34.04C2.497 34.055 2.493 34.093 2.45 34.568C2.447 34.604 2.407 34.65 2.373 34.655Z" fill="white" class="svelte-cbomfq"></path><path d="M2.938 30.694C2.937 30.662 2.931 30.619 2.934 30.587C2.943 30.486 2.968 30.355 2.979 30.255C2.958 30.587 2.958 30.587 2.938 30.694Z" fill="white" class="svelte-cbomfq"></path><path d="M2.376 34.608C2.354 34.612 2.319 34.589 2.31 34.569C2.254 34.451 2.351 34.266 2.382 34.139C2.386 34.124 2.407 34.104 2.422 34.107C2.438 34.11 2.453 34.114 2.412 34.569C2.41 34.585 2.392 34.606 2.376 34.608Z" fill="white" class="svelte-cbomfq"></path><path d="M2.943 30.645C2.94 30.574 2.956 30.48 2.965 30.411C2.961 30.48 2.956 30.575 2.943 30.645Z" fill="white" class="svelte-cbomfq"></path><path d="M2.948 30.594C2.948 30.585 2.95 30.573 2.951 30.564C2.951 30.573 2.95 30.585 2.948 30.594Z" fill="white" class="svelte-cbomfq"></path><path d="M3.328 25.519C3.953 18.581 8.646 10.35 15.516 6.95599C20.704 4.39299 22.516 4.14299 25.954 0.955994" stroke="white" stroke-width="0.3118" stroke-linecap="round" class="svelte-cbomfq"></path></svg></div>');function mN(t){var e=pN();Xe(t,e)}const _N=()=>{const{subscribe:t,set:e,update:a}=yn({text:"",x:0,y:0,visible:!1});return{subscribe:t,show(n,c){e({text:c,x:n.clientX,y:n.clientY,visible:!0})},hide(){a(n=>({...n,visible:!1}))}}},bN=_N();var yN=ft('<button class="hover:text-accent pointer-events-auto cursor-pointer p-2 text-left text-base duration-150"><!></button>'),vN=()=>Pn.set(!0),xN=ft('<button class="hover:text-accent pointer-events-auto cursor-pointer p-2 text-left text-base duration-150"><!></button>'),wN=ft('<div class="bg-main/60 absolute left-0 top-0 z-10 flex w-full gap-2 p-1 pl-4 pr-4 text-base"><ui><!></ui> <div class="h-hull w-[1px] rounded-full bg-gray-400"></div> <ui class="flex w-full justify-between"><li class="flex"><button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!></button></li> <li class="flex"><button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!></button> <!> <!> <!></li></ui></div>');function BN(t,e){mi(e,!1);const[a,n]=rr(),c=()=>zi(Do,"$showDataMenu",a),f=()=>zi(Fs,"$isSideMenuType",a),u=()=>{Pn.set(!1),Do.set(!c())};Pl.subscribe(de=>{Pn.set(!1)});const s=()=>{f()==="search"?Fs.set(null):Fs.set("search")},x=()=>{f()==="layer"?Fs.set(null):Fs.set("layer")};Xo();var B=wN(),I=Le(B),R=Le(I);{var F=de=>{var ge=yN();ge.__click=()=>Fs.set(null);var ye=Le(ge);yi(ye,{icon:"ep:back",class:"h-8 w-8"}),Ee(ge),Xe(de,ge)},M=de=>{var ge=xN();ge.__click=[vN];var ye=Le(ge);yi(ye,{icon:"ic:round-menu",class:"h-8 w-8"}),Ee(ge),Xe(de,ge)};It(R,de=>{f()?de(F):de(M,!1)})}Ee(I);var N=Oe(I,4),D=Le(N),V=Le(D);V.__click=s;var X=Le(V);yi(X,{icon:"stash:search-solid",class:"h-8 w-8"}),Ee(V);var ee=Oe(V,2);ee.__click=x;var Ae=Le(ee);yi(Ae,{icon:"ic:round-layers",class:"h-8 w-8"}),Ee(ee),Ee(D);var ce=Oe(D,2),ue=Le(ce);ue.__click=u;var oe=Le(ue);yi(oe,{icon:"material-symbols:data-saver-on-rounded",class:"h-8 w-8"}),Ee(ue);var q=Oe(ue,2);VY(q,{});var H=Oe(q,2);gN(H,{});var $=Oe(H,2);OY($,{}),Ee(ce),Ee(N),Ee(B),Xe(t,B),_i(),n()}$a(["click"]);function CN(t){const e=t-1;return e*e*e+1}function V8(t,{from:e,to:a},n={}){var{delay:c=0,duration:f=oe=>Math.sqrt(oe)*120,easing:u=CN}=n,s=getComputedStyle(t),x=s.transform==="none"?"":s.transform,[B,I]=s.transformOrigin.split(" ").map(parseFloat);B/=t.clientWidth,I/=t.clientHeight;var R=MN(t),F=t.clientWidth/a.width/R,M=t.clientHeight/a.height/R,N=e.left+e.width*B,D=e.top+e.height*I,V=a.left+a.width*B,X=a.top+a.height*I,ee=(N-V)*F,Ae=(D-X)*M,ce=e.width/a.width,ue=e.height/a.height;return{delay:c,duration:typeof f=="function"?f(Math.sqrt(ee*ee+Ae*Ae)):f,easing:u,css:(oe,q)=>{var H=q*ee,$=q*Ae,de=oe+q*ce,ge=oe+q*ue;return`transform: ${x} translate(${H}px, ${$}px) scale(${de}, ${ge});`}}}function MN(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,a=1;e!==null;)a*=+getComputedStyle(e).zoom,e=e.parentElement;return a}var RN=ft('<label class="hover:text-accent flex grow cursor-pointer items-start justify-between gap-2 py-2 transition-colors duration-100"><span class="select-none text-base font-bold"> </span> <input type="checkbox" class="hidden"> <div><div></div></div></label>');function QA(t,e){mi(e,!0);let a=si(e,"value",15);var n=RN(),c=Le(n),f=Le(c,!0);Ee(c);var u=Oe(c,2);ks(u);var s=Oe(u,2),x=Le(s);Ee(s),Ee(n),di(()=>{xi(f,e.label),Hr(s,1,`relative flex h-[30px] w-[60px] items-center rounded-full ${(a()?"bg-accent":"bg-gray-400")??""}`),Hr(x,1,`ml-[5px] h-[22px] w-[22px] rounded-full bg-white transition-transform duration-200 ${(a()?"translate-x-[28px]":"")??""}`)}),Fm(u,a),Xe(t,n),_i()}var IN=ft('<li style="display: flex; align-items: center; margin-bottom: 5px;"><span></span> <span> </span></li>'),UN=ft('<h2 class="text-gray-100"> </h2> <ul class="text-gray-100"></ul>',1),EN=ft("<span> </span>"),FN=ft('<h2 class="text-gray-100"> </h2> <div class="flex w-full flex-col gap-2 text-gray-100"><div class="w-full"><div class="h-[25px] w-full rounded-md"></div></div> <div class="flex w-full justify-between"></div></div>',1),TN=ft("<!> <!>",1),SN=ft('<div class="flex-between flex w-full select-none gap-2"><div class="w-full rounded-full p-2"></div></div>'),YN=ft('<div class="flex-between flex w-full select-none gap-2 text-gray-100"><div class="h-[20px] w-[20px] flex-none rounded-full"></div> <div class="w-full"> </div></div>'),NN=ft('<div class="flex w-full select-none items-center justify-center gap-2 text-gray-100"><div class="h-[20px] w-[20px] flex-none rounded-full"></div> <div class="w-full"> </div></div>'),LN=ft("<!> <!>",1);function PN(t,e){mi(e,!0);let a=ra(()=>e.layerEntry.style),n=ra(()=>e.layerEntry.type),c=ra(()=>{if(!(!e.layerEntry||e.layerEntry.type!=="vector"))return e.layerEntry.style.colors.expressions.find(R=>R.key===e.layerEntry.style.colors.key)}),f=ra(()=>{if(W(c)&&W(c).type==="step")return Qg(W(c).mapping)});var u=LN(),s=kt(u);{var x=R=>{var F=TN(),M=kt(F);{var N=X=>{var ee=UN(),Ae=kt(ee),ce=Le(Ae,!0);Ee(Ae);var ue=Oe(Ae,2);Ea(ue,21,()=>W(a).legend.colors,pr,(oe,q,H)=>{var $=IN(),de=Le($),ge=Oe(de,2),ye=Le(ge,!0);Ee(ge),Ee($),di(()=>{hn(de,`width: 20px; height: 20px; background-color: ${W(q)??""}; margin-right: 10px; display: inline-block;`),xi(ye,W(a).legend.labels[H])}),Xe(oe,$)}),Ee(ue),di(()=>xi(ce,W(a).legend.name)),Xe(X,ee)};It(M,X=>{W(a).legend.type==="category"&&X(N)})}var D=Oe(M,2);{var V=X=>{var ee=FN(),Ae=kt(ee),ce=Le(Ae,!0);Ee(Ae);var ue=Oe(Ae,2),oe=Le(ue),q=Le(oe);Ee(oe);var H=Oe(oe,2);Ea(H,21,()=>W(a).legend.range.slice(),pr,($,de)=>{var ge=EN(),ye=Le(ge);Ee(ge),di(()=>xi(ye,`${W(de)??""} ${W(a).legend.unit??""}`)),Xe($,ge)}),Ee(H),Ee(ue),di(()=>{xi(ce,W(a).legend.name),hn(q,`background: linear-gradient(90deg, ${W(a).legend.colors[0]??""} 0%, ${W(a).legend.colors[1]??""} 100%);`)}),Xe(X,ee)};It(D,X=>{W(a).legend.type==="gradient"&&X(V)})}Xe(R,F)};It(s,R=>{W(n)==="raster"&&W(a).type==="categorical"&&R(x)})}var B=Oe(s,2);{var I=R=>{var F=vi(),M=kt(F);{var N=D=>{var V=vi(),X=kt(V);{var ee=ce=>{var ue=SN(),oe=Le(ue);Ee(ue),di(()=>hn(oe,`background-color: ${W(c).mapping.value??""};`)),Xe(ce,ue)},Ae=(ce,ue)=>{{var oe=H=>{var $=vi(),de=kt($);Ea(de,17,()=>W(c).mapping.categories,pr,(ge,ye,we)=>{var Ve=YN(),ut=Le(Ve),at=Oe(ut,2),et=Le(at,!0);Ee(at),Ee(Ve),di(()=>{hn(ut,`background-color: ${W(c).mapping.values[we]??""};`),xi(et,W(c).mapping.categories[we])}),Xe(ge,Ve)}),Xe(H,$)},q=(H,$)=>{{var de=ge=>{var ye=vi(),we=kt(ye);{var Ve=ut=>{var at=vi(),et=kt(at);Ea(et,17,()=>W(f).categories,pr,(xt,Mt,Yt)=>{var rt=NN(),pt=Le(rt),je=Oe(pt,2),Qe=Le(je,!0);Ee(je),Ee(rt),di(()=>{hn(pt,`background-color: ${W(f).values[Yt]??""};`),xi(Qe,W(f).categories[Yt])}),Xe(xt,rt)}),Xe(ut,at)};It(we,ut=>{W(f)&&ut(Ve)})}Xe(ge,ye)};It(H,ge=>{W(c).type==="step"&&ge(de)},$)}};It(ce,H=>{W(c).type==="match"?H(oe):H(q,!1)},ue)}};It(X,ce=>{W(c).type==="single"?ce(ee):ce(Ae,!1)})}Xe(D,V)};It(M,D=>{W(n)==="vector"&&D(N)})}Xe(R,F)};It(B,R=>{W(c)&&R(I)})}Xe(t,u),_i()}var QN=ft('<img class="pointer-events-none absolute block h-full w-full rounded-full object-cover" crossOrigin="anonymous">'),kN=ft('<img crossOrigin="anonymous" class="pointer-events-none absolute block h-full w-full rounded-full object-cover">'),DN=ft('<img crossOrigin="anonymous" class="pointer-events-none absolute block h-full w-full rounded-full object-cover">');function G8(t,e){mi(e,!0);const a=async I=>{if(I.type!=="raster")return Promise.resolve(void 0);const R=I.metaData.xyzImageTile?I.metaData.xyzImageTile:tg;return Promise.resolve(I.format.url.replace("{z}",R.z.toString()).replace("{x}",R.x.toString()).replace("{y}",R.y.toString()))},n=async I=>{try{if(I.type!=="raster"||I.format.type!=="pmtiles")return;const R=I.metaData.xyzImageTile?I.metaData.xyzImageTile:tg;return await Y5(I.format.url,R)}catch(R){console.error("Error fetching tile image:",R)}},c=async I=>await Promise.resolve(I.metaData.coverImage),f=(()=>{if(e.layerEntry.type==="raster"){if(e.layerEntry.format.type==="image")return a(e.layerEntry);if(e.layerEntry.format.type==="pmtiles")return n(e.layerEntry)}else if(e.layerEntry.type==="vector")return c(e.layerEntry)})();var u=vi(),s=kt(u);{var x=I=>{var R=vi(),F=kt(R);{var M=D=>{var V=vi(),X=kt(V);S1(X,()=>f,null,(ee,Ae)=>{var ce=QN();di(()=>{ja(ce,"alt",e.layerEntry.metaData.name),ja(ce,"src",W(Ae))}),ba(3,ce,()=>ls),Xe(ee,ce)}),Xe(D,V)},N=(D,V)=>{{var X=ee=>{var Ae=vi(),ce=kt(Ae);S1(ce,()=>f,null,(ue,oe)=>{var q=kN();di(()=>{ja(q,"alt",e.layerEntry.metaData.name),ja(q,"src",W(oe))}),ba(3,q,()=>ls),Xe(ue,q)}),Xe(ee,Ae)};It(D,ee=>{e.layerEntry.format.type==="pmtiles"&&ee(X)},V)}};It(F,D=>{e.layerEntry.format.type==="image"?D(M):D(N,!1)})}Xe(I,R)},B=(I,R)=>{{var F=M=>{var N=vi(),D=kt(N);{var V=ee=>{var Ae=vi(),ce=kt(Ae);S1(ce,()=>f,null,(ue,oe)=>{var q=DN();di(()=>{ja(q,"alt",e.layerEntry.metaData.name),ja(q,"src",W(oe))}),ba(3,q,()=>ls),Xe(ue,q)}),Xe(ee,Ae)},X=(ee,Ae)=>{{var ce=oe=>{yi(oe,{icon:"ic:baseline-mode-standby",class:"pointer-events-none",width:30})},ue=(oe,q)=>{{var H=de=>{yi(de,{icon:"ic:baseline-polymer",class:"pointer-events-none",width:30})},$=(de,ge)=>{{var ye=Ve=>{yi(Ve,{icon:"ic:baseline-pentagon",class:"pointer-events-none",width:30})},we=(Ve,ut)=>{{var at=et=>{yi(et,{icon:"mynaui:label-solid",class:"pointer-events-none",width:30})};It(Ve,et=>{e.layerEntry.format.geometryType==="Label"&&et(at)},ut)}};It(de,Ve=>{e.layerEntry.format.geometryType==="Polygon"?Ve(ye):Ve(we,!1)},ge)}};It(oe,de=>{e.layerEntry.format.geometryType==="LineString"?de(H):de($,!1)},q)}};It(ee,oe=>{e.layerEntry.format.geometryType==="Point"?oe(ce):oe(ue,!1)},Ae)}};It(D,ee=>{e.layerEntry.metaData.coverImage?ee(V):ee(X,!1)})}Xe(M,N)};It(I,M=>{e.layerEntry.type==="vector"&&M(F)},R)}};It(s,I=>{e.layerEntry.type==="raster"?I(x):I(B,!1)})}Xe(t,u),_i()}const zN=(t,e)=>{e()&&da.focusLayer(e())},ZN=(t,e,a)=>{e()&&Ho(Hl,!a())};var HN=(t,e,a)=>e(t,a().id),ON=ft('<div class="pointer-events-none absolute grid h-full w-full place-items-center bg-black/50"></div> <div><!></div>',1),XN=(t,e,a)=>{e(a().id)},VN=ft('<button class="cursor-pointer"><!></button>'),GN=ft('<div class="flex pl-[33px]"><div class="w-[2px] items-stretch bg-gray-500"></div> <div class="flex w-full flex-col gap-4 px-2 pt-2"><div class="flex gap-4 text-gray-100"><!> <button class="cursor-pointer"><!></button> <button class="cursor-pointer"><!></button></div> <!></div></div>'),jN=ft('<div role="button" tabindex="0" aria-label="レイヤー"><button><div class="flex items-center justify-start gap-2"><label class="relative grid h-[50px] w-[50px] shrink-0 cursor-pointer place-items-center overflow-hidden rounded-full bg-gray-600 text-base"><input type="checkbox" class="hidden"> <!> <!></label> <div><div class="flex flex-col items-start gap-[2px] overflow-hidden"><span> </span> <span class="text-nowrap text-xs text-gray-400"> </span></div></div> <label class="relative ml-auto mr-2 grid shrink-0 cursor-pointer place-items-center overflow-hidden rounded-full text-base"><input type="checkbox" class="hidden"> <!></label></div></button> <!></div>');function j8(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(Hl,"$isStyleEdit",a),f=()=>zi(to,"$selectedLayerId",a);let u=si(e,"layerEntry",15),s=si(e,"enableFlip",15),x=si(e,"dragEnterType",15),B=$t(!1),I=$t(!1),R=$t(!1),F=ra(()=>{if(u()){if(u().type==="raster")return"raster";if(u().type==="vector"){if(u().format.geometryType==="Label")return"label";if(u().format.geometryType==="Point")return"point";if(u().format.geometryType==="LineString")return"line";if(u().format.geometryType==="Polygon")return"polygon"}}});const M=()=>{W(R)||c()||(f()===u().id?to.set(""):to.set(u().id))},N=dt=>{st(B,!W(B)),W(B)&&to.set(dt)};Do.subscribe(dt=>{dt&&Ho(to,"")});const D=()=>{Ho(Hl,!1),u()&&(wh.remove(u().id),to.set(""))};let V=0,X=0;const ee=(dt,_t)=>{const zt=document.getElementById(_t);if(!zt)return;const Qt=zt.getBoundingClientRect();V=dt.clientX-Qt.left,X=dt.clientY-Qt.top},Ae=(dt,_t)=>{if(!dt.dataTransfer)return;dt.dataTransfer.effectAllowed="move";const zt=document.getElementById(_t);dt.dataTransfer.setDragImage(zt,V,X),st(I,!0),s(!1),st(B,!1),x(W(F)),to.set(_t)},ce=dt=>{dt&&f()!==dt&&wh.reorderWithinTypeById(W(F),f(),dt)},ue=()=>{st(I,!1),s(!0),x(null),l7.set("idle")};var oe=jN();ja(oe,"draggable",!0),oe.__mousedown=[HN,ee,u];var q=Le(oe);q.__click=M;var H=Le(q),$=Le(H),de=Le($);ks(de);var ge=Oe(de,2);{var ye=dt=>{G8(dt,{get layerEntry(){return u()}})};It(ge,dt=>{u().style.visible&&dt(ye)})}var we=Oe(ge,2);{var Ve=dt=>{var _t=ON(),zt=kt(_t),Qt=Oe(zt,2),Ct=Le(Qt);yi(Ct,{icon:"akar-icons:eye-slashed",width:30}),Ee(Qt),di(()=>Hr(Qt,1,`pointer-events-none absolute ${(u().style.visible?"text-red-500":"text-neutral-200")??""}`)),ba(3,zt,()=>ls,()=>({duration:100})),ba(3,Qt,()=>ls,()=>({duration:100})),Xe(dt,_t)};It(we,dt=>{(W(R)||!u().style.visible)&&dt(Ve)})}Ee($);var ut=Oe($,2),at=Le(ut),et=Le(at),xt=Le(et,!0);Ee(et);var Mt=Oe(et,2),Yt=Le(Mt,!0);Ee(Mt),Ee(at),Ee(ut);var rt=Oe(ut,2),pt=Le(rt);pt.__input=[XN,N,u];var je=Oe(pt,2);const Qe=ra(()=>W(B)?"-rotate-90":"rotate-90");yi(je,{icon:"weui:arrow-filled",get class(){return`h-8 w-8 text-base transition-transform duration-150 ${W(Qe)??""}`}}),Ee(rt),Ee(H),Ee(q);var tt=Oe(q,2);{var bt=dt=>{var _t=GN(),zt=Oe(Le(_t),2),Qt=Le(zt),Ct=Le(Qt);{var Zt=Kt=>{var gt=VN();gt.__click=[zN,u];var oi=Le(gt);yi(oi,{icon:"hugeicons:target-03",class:"h-8 w-8"}),Ee(gt),Xe(Kt,gt)};It(Ct,Kt=>{u().metaData.location!=="全国"&&u().metaData.location!=="世界"&&Kt(Zt)})}var Ai=Oe(Ct,2);Ai.__click=[ZN,u,c];var Nt=Le(Ai);yi(Nt,{icon:"mdi:mixer-settings",class:"ml-4 h-8 w-8"}),Ee(Ai);var Dt=Oe(Ai,2);Dt.__click=D;var li=Le(Dt);yi(li,{icon:"bx:trash",class:"h-8 w-8"}),Ee(Dt),Ee(Qt);var pi=Oe(Qt,2);PN(pi,{get layerEntry(){return u()}}),Ee(zt),Ee(_t),ba(3,_t,()=>Nm,()=>({duration:200})),Xe(dt,_t)};It(tt,dt=>{W(B)&&dt(bt)})}Ee(oe),di(()=>{Hr(oe,1,`relative flex flex-col transition-opacity ${(x()!==null&&x()!==W(F)?"opacity-50":"")??""} ${(W(I)?"c-dragging-style":"")??""}`),ja(q,"id",u().id),Hr(q,1,`bg-sub c-dragging-style c-rounded border-base relative z-10 cursor-move select-none flex-col overflow-clip text-clip text-nowrap border-2 p-2 text-left transition-colors duration-100 ${(f()===u().id?"css-gradient":" hover:border-accent")??""}`,"svelte-cwcrkw"),Hr(et,1,`text-nowrap text-base ${f()===u().id,""}`),xi(xt,u().metaData.name),xi(Yt,u().metaData.location??"---")}),fr("dragstart",oe,dt=>Ae(dt,u().id)),fr("dragenter",oe,()=>ce(u().id)),fr("dragover",oe,dt=>dt.preventDefault()),fr("dragend",oe,ue),fr("mouseenter",$,()=>st(R,!0)),fr("mouseleave",$,()=>st(R,!1)),Fm(de,()=>u().style.visible,dt=>u(u().style.visible=dt,!0)),Xe(t,oe),_i(),n()}$a(["mousedown","click","input"]);var KN=ft('<div class="mb-1 mt-4 flex items-center gap-2 border-t p-2 text-base"><!> <span> </span></div>'),$N=ft("<div><!> <!></div>"),qN=()=>Do.set(!0),WN=ft('<button class="c-btn-confirm pointer-events-auto flex shrink items-center justify-center gap-2"><!><span>データの追加</span></button>'),JN=ft('<div class="c-fog pointer-events-none absolute bottom-0 z-10 flex h-[100px] w-full items-end justify-center pb-4 svelte-acdvpo"><!></div>'),eL=ft('<div class="bg-main w-side-menu absolute z-10 flex h-full flex-col gap-2"><div class="flex h-[70px] w-full items-center justify-between"></div> <div class="c-scroll-hidden flex grow flex-col gap-2 overflow-y-auto overflow-x-hidden px-2 pb-4"><!> <!> <div class="h-[200px] w-full shrink-0"></div></div> <!></div>');function tL(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(Fs,"$isSideMenuType",a),f=()=>zi(r0,"$showLabelLayer",a),u=()=>zi(c7,"$typeBreakIndices",a),s=()=>zi(Hl,"$isStyleEdit",a);let x=si(e,"layerEntries",15),B=si(e,"tempLayerEntries",15),I=$t(void 0),R=$t(!0),F=$t(null);const M={label:"ラベル",point:"ポイント",line:"ライン",polygon:"ポリゴン",raster:"ラスター"},N={label:"mynaui:label-solid",point:"ic:baseline-mode-standby",line:"ic:baseline-polymer",polygon:"ic:baseline-pentagon",raster:"mdi:raster"};to.subscribe(ee=>{if(ee)st(I,x().find(Ae=>Ae.id===ee),!0);else{st(I,void 0);return}}),Lr(()=>{});var D=vi(),V=kt(D);{var X=ee=>{var Ae=eL(),ce=Oe(Le(Ae),2),ue=Le(ce);QA(ue,{label:"ラベル表示",get value(){return l6(),f()},set value($){Ho(r0,$)}});var oe=Oe(ue,2);Ea(oe,27,x,$=>$.id,($,de,ge,ye)=>{var we=$N(),Ve=Le(we);{var ut=et=>{var xt=KN(),Mt=Le(xt);yi(Mt,{get icon(){return N[u()[W(ge)]]},class:"pointer-events-none",width:20});var Yt=Oe(Mt,2),rt=Le(Yt,!0);Ee(Yt),Ee(xt),di(()=>xi(rt,M[u()[W(ge)]])),Xe(et,xt)};It(Ve,et=>{u()[W(ge)]&&et(ut)})}var at=Oe(Ve,2);j8(at,{get layerEntry(){return x()[W(ge)]},set layerEntry(et){x(x()[W(ge)]=et,!0)},get tempLayerEntries(){return B()},set tempLayerEntries(et){B(et)},get enableFlip(){return W(R)},set enableFlip(et){st(R,et,!0)},get dragEnterType(){return W(F)},set dragEnterType(et){st(F,et,!0)}}),Ee(we),b6(we,()=>V8,()=>({duration:W(R)?200:0})),Xe($,we)}),Ha(2),Ee(ce);var q=Oe(ce,2);{var H=$=>{var de=JN(),ge=Le(de);{var ye=we=>{var Ve=WN();Ve.__click=[qN];var ut=Le(Ve);yi(ut,{icon:"material-symbols:data-saver-on-rounded",class:"h-8 w-8"}),Ha(),Ee(Ve),Xe(we,Ve)};It(ge,we=>{W(F)||we(ye)})}Ee(de),Xe($,de)};It(q,$=>{s()||$(H)})}Ee(Ae),ba(3,Ae,()=>ds,()=>({duration:300,x:-100,opacity:0})),Xe(ee,Ae)};It(V,ee=>{c()==="layer"&&ee(X)})}Xe(t,D),_i(),n()}$a(["click"]);var iL=ft('<div class="flex flex-col gap-2 pb-4 text-base"><span class="select-none"> </span> <input class="css-range svelte-vulzog" type="range"></div>');function Yr(t,e){mi(e,!0);let a=si(e,"value",15),n=si(e,"min",3,0),c=si(e,"max",3,1),f=si(e,"step",3,.01);var u=iL(),s=Le(u),x=Le(s);Ee(s);var B=Oe(s,2);ks(B),Ee(u),di(I=>{xi(x,`${(e.label?`${e.label}: `:"")??""}${I??""}`),ja(B,"min",n()),ja(B,"max",c()),ja(B,"step",f())},[()=>a().toFixed(2)]),kg(B,a),Xe(t,u),_i()}var aL=ft("<!> <!> <!> <!> <!>",1),rL=ft('<li style="display: flex; align-items: center; margin-bottom: 5px;"><span></span> <span> </span></li>'),nL=ft('<h2 class="text-base"> </h2> <ul class="text-base"></ul>',1),sL=ft("<span> </span>"),oL=ft('<h2 class="text-base"> </h2> <div class="flex h-[200px] gap-2 text-base"><div class="h-full py-[10px]"><div class="h-full w-[30px]"></div></div> <div class="flex flex-col justify-between text-base"></div></div>',1),AL=ft('<h1 class="text-base">凡例</h1> <!>',1),lL=ft("<!> <!>",1);function cL(t,e){mi(e,!0);let a=ra(()=>e.layerEntry.style);Lr(()=>{});var n=vi(),c=kt(n);{var f=u=>{var s=lL(),x=kt(s);Yr(x,{label:"不透明度",min:0,max:1,step:.01,get value(){return W(a).opacity},set value(F){W(a).opacity=F}});var B=Oe(x,2);{var I=F=>{var M=aL(),N=kt(M);Yr(N,{label:"明るさ-最小輝度",min:0,max:1,step:.01,get value(){return W(a).brightnessMin},set value(Ae){W(a).brightnessMin=Ae}});var D=Oe(N,2);Yr(D,{label:"明るさ-最大輝度",min:0,max:1,step:.01,get value(){return W(a).brightnessMax},set value(Ae){W(a).brightnessMax=Ae}});var V=Oe(D,2);Yr(V,{label:"コントラスト",min:-1,max:1,step:.01,get value(){return W(a).contrast},set value(Ae){W(a).contrast=Ae}});var X=Oe(V,2);Yr(X,{label:"色相",min:-360,max:360,step:.1,get value(){return W(a).hueRotate},set value(Ae){W(a).hueRotate=Ae}});var ee=Oe(X,2);Yr(ee,{label:"彩度",min:-1,max:1,step:.01,get value(){return W(a).saturation},set value(Ae){W(a).saturation=Ae}}),Xe(F,M)},R=(F,M)=>{{var N=D=>{var V=AL(),X=Oe(kt(V),2);{var ee=ce=>{var ue=nL(),oe=kt(ue),q=Le(oe,!0);Ee(oe);var H=Oe(oe,2);Ea(H,21,()=>W(a).legend.colors,pr,($,de,ge)=>{var ye=rL(),we=Le(ye),Ve=Oe(we,2),ut=Le(Ve,!0);Ee(Ve),Ee(ye),di(()=>{hn(we,`width: 20px; height: 20px; background-color: ${W(de)??""}; margin-right: 10px; display: inline-block;`),xi(ut,W(a).legend.labels[ge])}),Xe($,ye)}),Ee(H),di(()=>xi(q,W(a).legend.name)),Xe(ce,ue)},Ae=(ce,ue)=>{{var oe=q=>{var H=oL(),$=kt(H),de=Le($,!0);Ee($);var ge=Oe($,2),ye=Le(ge),we=Le(ye);Ee(ye);var Ve=Oe(ye,2);Ea(Ve,21,()=>W(a).legend.range.slice().reverse(),pr,(ut,at)=>{var et=sL(),xt=Le(et);Ee(et),di(()=>xi(xt,`${W(at)??""} ${W(a).legend.unit??""}`)),Xe(ut,et)}),Ee(Ve),Ee(ge),di(()=>{xi(de,W(a).legend.name),hn(we,`background: linear-gradient(0deg, ${W(a).legend.colors[0]??""} 0%, ${W(a).legend.colors[1]??""} 100%);`)}),Xe(q,H)};It(ce,q=>{W(a).legend.type==="gradient"&&q(oe)},ue)}};It(X,ce=>{W(a).legend.type==="category"?ce(ee):ce(Ae,!1)})}Xe(D,V)};It(F,D=>{W(a).type==="categorical"&&D(N)},M)}};It(B,F=>{W(a).type==="basemap"?F(I):F(R,!1)})}Xe(u,s)};It(c,u=>{e.layerEntry&&e.layerEntry.type==="raster"&&W(a)&&u(f)})}Xe(t,n),_i()}var hL=ft("<div><!></div>"),uL=ft('<label class="hover:text-accent flex grow cursor-pointer items-center justify-start gap-2 pb-2 pt-4 transition-colors duration-100"><!> <span class="select-none text-base font-bold"> </span> <input type="checkbox" class="hidden"></label> <!> <div class="mt-2 h-[1px] w-full bg-gray-500"></div>',1);function kA(t,e){mi(e,!0);let a=si(e,"value",15);var n=uL(),c=kt(n),f=Le(c);const u=ra(()=>a()?"rotate-90":"rotate-0");yi(f,{icon:"weui:arrow-filled",get class(){return`h-6 w-6 text-base transition-transform duration-150 ${W(u)??""}`}});var s=Oe(f,2),x=Le(s,!0);Ee(s);var B=Oe(s,2);ks(B),Ee(c);var I=Oe(c,2);{var R=F=>{var M=hL(),N=Le(M);h7(N,()=>e.children),Ee(M),ba(3,M,()=>Nm,()=>({duration:250})),Xe(F,M)};It(I,F=>{a()&&F(R)})}Ha(2),di(()=>xi(x,e.label)),Fm(B,a),Xe(t,n),_i()}var dL=ft('<span class="select-none text-base"> </span>'),fL=ft('<label class="hover:text-accent flex cursor-pointer items-center justify-between transition-colors duration-100"><!> <div class="grid h-[30px] w-[30px] place-items-center rounded-full"><input type="color" class="custom-color invisible"></div></label>');function $d(t,e){let a=si(e,"label",8,null),n=si(e,"value",12);var c=fL(),f=Le(c);{var u=B=>{var I=dL(),R=Le(I,!0);Ee(I),di(()=>xi(R,a())),Xe(B,I)};It(f,B=>{a()&&B(u)})}var s=Oe(f,2),x=Le(s);ks(x),Ee(s),Ee(c),di(()=>hn(s,`background-color: ${n()??""}`)),kg(x,n),Xe(t,c)}var gL=(t,e)=>st(e,!W(e)),pL=(t,e)=>st(e,!1),mL=ft('<label><input type="radio" class="hidden"> <div class="flex items-center gap-2"><!> <span class="select-none"> </span></div></label>'),_L=ft('<div class="absolute left-0 top-[60px] z-10 w-full divide-y divide-gray-300 overflow-hidden rounded-lg bg-white shadow-md"></div>'),bL=ft('<div class="relative py-2"><button class="c-select flex w-full justify-between"><div class="flex items-center gap-2"><!> <span> </span></div> <!></button> <!></div>');function K8(t,e){mi(e,!0);const a=[];let n=si(e,"labels",15),c=$t(!1),f=ra(()=>{const I=n().expressions.find(R=>R.key===n().key);if(I)return I}),u=ra(()=>n().expressions);var s=vi(),x=kt(s);{var B=I=>{var R=bL(),F=Le(R);F.__click=[gL,c];var M=Le(F),N=Le(M);yi(N,{icon:"ci:font",width:20});var D=Oe(N,2),V=Le(D,!0);Ee(D),Ee(M);var X=Oe(M,2);yi(X,{icon:"bi:chevron-down",class:"h-6 w-6"}),Ee(F);var ee=Oe(F,2);{var Ae=ce=>{var ue=_L();Ea(ue,21,()=>W(u),oe=>oe.key,(oe,q)=>{var H=mL(),$=Le(H);ks($);var de;$.__change=[pL,c];var ge=Oe($,2),ye=Le(ge);yi(ye,{icon:"ci:font",width:20});var we=Oe(ye,2),Ve=Le(we,!0);Ee(we),Ee(ge),Ee(H),di(()=>{Hr(H,1,`hover:text-accent bg-sub z-20 flex w-full cursor-pointer items-center justify-between gap-2 p-2 text-white transition-colors duration-100 ${(W(q).key===n().key?"bg-accent":"")??""}`),de!==(de=W(q).key)&&($.value=($.__value=W(q).key)==null?"":W(q).key),xi(Ve,W(q).name)}),Dg(a,[],$,()=>(W(q).key,n().key),ut=>n(n().key=ut,!0)),Xe(oe,H)}),Ee(ue),ba(3,ue,()=>ds,()=>({duration:200,y:-20})),Xe(ce,ue)};It(ee,ce=>{W(c)&&ce(Ae)})}Ee(R),di(ce=>xi(V,ce),[()=>{var ce;return(ce=W(u).find(ue=>ue.key===W(f).key))==null?void 0:ce.name}]),Xe(I,R)};It(x,I=>{W(f)&&I(B)})}Xe(t,s),_i()}$a(["click","change"]);var yL=ft("<span></span> <!>",1),vL=ft('<div class="flex-between flex w-full select-none gap-2"><div class="w-full"> </div> <div class="p-2"></div></div>'),xL=ft('<div class="flex-between flex w-full gap-2"></div> <!> <!>',1);function wL(t,e){mi(e,!0);let a=si(e,"setExpression",15),n=ra(()=>{if(a()&&a().type==="step")return Qg(a().mapping)});var c=vi(),f=kt(c);{var u=x=>{$d(x,{label:"全体の色",get value(){return a().mapping.value},set value(B){a(a().mapping.value=B,!0)}})},s=(x,B)=>{{var I=F=>{var M=vi(),N=kt(M);Ea(N,17,()=>a().mapping.categories,pr,(D,V,X)=>{$d(D,{get label(){return a().mapping.categories[X]},get value(){return a().mapping.values[X]},set value(ee){a(a().mapping.values[X]=ee,!0)}})}),Xe(F,M)},R=(F,M)=>{{var N=D=>{var V=xL(),X=kt(V);Ea(X,21,()=>a().mapping.values,pr,(ue,oe,q)=>{var H=yL(),$=kt(H);$.textContent=q===0?"最小":"最大";var de=Oe($,2);$d(de,{get value(){return a().mapping.values[q]},set value(ge){a(a().mapping.values[q]=ge,!0)}}),Xe(ue,H)}),Ee(X);var ee=Oe(X,2);Yr(ee,{label:"分類数",min:2,max:10,step:1,get value(){return a().mapping.divisions},set value(ue){a(a().mapping.divisions=ue,!0)}});var Ae=Oe(ee,2);{var ce=ue=>{var oe=vi(),q=kt(oe);Ea(q,17,()=>W(n).categories,pr,(H,$,de)=>{var ge=vL(),ye=Le(ge),we=Le(ye,!0);Ee(ye);var Ve=Oe(ye,2);Ee(ge),di(()=>{xi(we,W(n).categories[de]),hn(Ve,`background-color: ${W(n).values[de]??""};`)}),Xe(H,ge)}),Xe(ue,oe)};It(Ae,ue=>{W(n)&&ue(ce)})}Xe(D,V)};It(F,D=>{a().type==="step"&&D(N)},M)}};It(x,F=>{a().type==="match"?F(I):F(R,!1)},B)}};It(f,x=>{a().type==="single"?x(u):x(s,!1)})}Xe(t,c),_i()}const BL=t=>{const{range:e,divisions:a,values:n}=t;if(console.log(e,a,n),a<=0)throw new Error("divisions must be greater than 0");const[c,f]=e,u=(f-c)/a;return{categories:Array.from({length:a},(x,B)=>c+u*B),values:n}};var CL=ft('<div class="flex w-full select-none flex-col gap-2"><div><span> </span></div> <!></div>'),ML=ft("<span></span> <!>",1),RL=ft('<div class="flex-between flex w-full select-none gap-2"><div class="w-full"> </div> <div class="p-2"> </div></div>'),IL=ft('<div class="flex-between flex w-full gap-2"></div> <!> <!> ',1),UL=ft("<!> <!> <!> <!>",1);function EL(t,e){mi(e,!0);let a=si(e,"setExpression",15),n=ra(()=>{if(a()&&a().type==="step")return BL(a().mapping)});var c=vi(),f=kt(c);{var u=s=>{var x=UL(),B=kt(x);{var I=X=>{Yr(X,{label:"大きさ",min:1,max:30,step:.01,get value(){return a().mapping.value},set value(ee){a(a().mapping.value=ee,!0)}})};It(B,X=>{a().type==="single"&&X(I)})}var R=Oe(B,2);{var F=X=>{var ee=vi(),Ae=kt(ee);Ea(Ae,17,()=>a().mapping.categories,pr,(ce,ue,oe)=>{Yr(ce,{label:"大きさ",min:2,max:10,step:1,get value(){return a().mapping.values[oe]},set value(q){a(a().mapping.values[oe]=q,!0)}})}),Xe(X,ee)};It(R,X=>{a().type==="match"&&X(F)})}var M=Oe(R,2);{var N=X=>{var ee=vi(),Ae=kt(ee);Ea(Ae,17,()=>a().mapping.range,pr,(ce,ue,oe)=>{var q=CL(),H=Le(q),$=Le(H),de=Le($);Ee($),Ee(H);var ge=Oe(H,2);Yr(ge,{label:"大きさ",min:0,max:30,step:.01,get value(){return a().mapping.values[oe]},set value(ye){a(a().mapping.values[oe]=ye,!0)}}),Ee(q),di(()=>xi(de,`${(oe===0?"最小":"最大")??""}値: ${a().mapping.range[oe]??""}`)),Xe(ce,q)}),Xe(X,ee)};It(M,X=>{a().type==="linear"&&X(N)})}var D=Oe(M,2);{var V=X=>{var ee=IL(),Ae=kt(ee);Ea(Ae,21,()=>a().mapping.values,pr,(H,$,de)=>{var ge=ML(),ye=kt(ge);ye.textContent=de===0?"最小":"最大";var we=Oe(ye,2);Yr(we,{label:"大きさ",min:0,max:30,step:.01,get value(){return a().mapping.values[de]},set value(Ve){a(a().mapping.values[de]=Ve,!0)}}),Xe(H,ge)}),Ee(Ae);var ce=Oe(Ae,2);Yr(ce,{label:"分類数",min:2,max:10,step:1,get value(){return a().mapping.divisions},set value(H){a(a().mapping.divisions=H,!0)}});var ue=Oe(ce,2);{var oe=H=>{var $=vi(),de=kt($);Ea(de,17,()=>W(n).categories,pr,(ge,ye,we)=>{var Ve=RL(),ut=Le(Ve),at=Le(ut,!0);Ee(ut);var et=Oe(ut,2),xt=Le(et,!0);Ee(et),Ee(Ve),di(()=>{xi(at,W(n).categories[we]),xi(xt,W(n).values[we])}),Xe(ge,Ve)}),Xe(H,$)};It(ue,H=>{W(n)&&H(oe)})}var q=Oe(ue);di(H=>xi(q,` ${H??""}`),[()=>JSON.stringify(W(n))]),Xe(X,ee)};It(D,X=>{a().type==="step"&&X(V)})}Xe(s,x)};It(f,s=>{a()&&s(u)})}Xe(t,c),_i()}var FL=(t,e)=>st(e,!W(e)),TL=(t,e)=>st(e,!1),SL=ft('<label><input type="radio" class="hidden"> <div class="flex items-center gap-2"><!> <span class="select-none"> </span></div></label>'),YL=ft('<div class="absolute left-0 top-[60px] z-10 w-full divide-y divide-gray-300 overflow-hidden rounded-lg bg-white shadow-md"></div>'),NL=ft('<div class="relative py-2"><button class="c-select flex w-full justify-between"><div class="flex items-center gap-2"><!> <span> </span></div> <!></button> <!></div> <div class="flex grow flex-col gap-2 overflow-y-auto overflow-x-hidden pt-2"><!> <!></div>',1);function $8(t,e){mi(e,!0);const a=[];let n=si(e,"style",15),c=$t(!1),f=ra(()=>{const I=n().expressions.find(R=>R.key===n().key);if(I)return I}),u=ra(()=>n().expressions);var s=vi(),x=kt(s);{var B=I=>{var R=NL(),F=kt(R),M=Le(F);M.__click=[FL,c];var N=Le(M),D=Le(N);const V=ra(()=>db(W(f).type,e.expressionType));yi(D,{get icon(){return W(V)},width:20});var X=Oe(D,2),ee=Le(X,!0);Ee(X),Ee(N);var Ae=Oe(N,2);yi(Ae,{icon:"bi:chevron-down",class:"h-6 w-6"}),Ee(M);var ce=Oe(M,2);{var ue=ge=>{var ye=YL();Ea(ye,21,()=>W(u),we=>we.key,(we,Ve)=>{var ut=SL(),at=Le(ut);ks(at);var et;at.__change=[TL,c];var xt=Oe(at,2),Mt=Le(xt);const Yt=ra(()=>db(W(Ve).type,e.expressionType));yi(Mt,{get icon(){return W(Yt)},width:20});var rt=Oe(Mt,2),pt=Le(rt,!0);Ee(rt),Ee(xt),Ee(ut),di(()=>{Hr(ut,1,`hover:text-accent bg-sub z-20 flex w-full cursor-pointer items-center justify-between gap-2 p-2 text-white transition-colors duration-100 ${(W(Ve).key===n().key?"bg-accent":"")??""}`),et!==(et=W(Ve).key)&&(at.value=(at.__value=W(Ve).key)==null?"":W(Ve).key),xi(pt,W(Ve).name)}),Dg(a,[],at,()=>(W(Ve).key,n().key),je=>n(n().key=je,!0)),Xe(we,ut)}),Ee(ye),ba(3,ye,()=>ds,()=>({duration:200,y:-20})),Xe(ge,ye)};It(ce,ge=>{W(c)&&ge(ue)})}Ee(F);var oe=Oe(F,2),q=Le(oe);{var H=ge=>{wL(ge,{get setExpression(){return W(f)}})};It(q,ge=>{e.expressionType==="color"&&ge(H)})}var $=Oe(q,2);{var de=ge=>{EL(ge,{get setExpression(){return W(f)}})};It($,ge=>{e.expressionType==="number"&&ge(de)})}Ee(oe),di(ge=>xi(ee,ge),[()=>{var ge;return(ge=W(u).find(ye=>ye.key===n().key))==null?void 0:ge.name}]),Xe(I,R)};It(x,I=>{W(f)&&I(B)})}Xe(t,s),_i()}$a(["click","change"]);var LL=ft("<!> <!>",1);function u4(t,e){mi(e,!0);let a=si(e,"colorStyle",15),n=$t(!1);kA(t,{label:"色の調整",get value(){return W(n)},set value(c){st(n,c,!0)},children:(c,f)=>{var u=LL(),s=kt(u);QA(s,{label:"塗りつぶし",get value(){return a().show},set value(B){a(a().show=B,!0)}});var x=Oe(s,2);$8(x,{expressionType:"color",get style(){return a()},set style(B){a(B)}}),Xe(c,u)},$$slots:{default:!0}}),_i()}var PL=ft("<!> <!>",1);function QL(t,e){mi(e,!0);let a=si(e,"layerEntry",15),n=$t(!1);kA(t,{label:"ラベル",get value(){return W(n)},set value(c){st(n,c,!0)},children:(c,f)=>{var u=PL(),s=kt(u);QA(s,{label:"表示",get value(){return a().style.labels.show},set value(B){a(a().style.labels.show=B,!0)}});var x=Oe(s,2);K8(x,{get labels(){return a().style.labels},set labels(B){a(a().style.labels=B,!0)}}),Xe(c,u)},$$slots:{default:!0}}),_i()}var kL=ft('<label><input type="radio" class="hidden"> <span class="select-none"> </span></label>'),DL=ft('<div class="flex flex-col gap-2"><div class="flex select-none items-center gap-2 text-base"><span> </span></div> <div class="flex w-full overflow-hidden rounded-full"></div></div>');function d4(t,e){mi(e,!0);const a=[];let n=si(e,"group",15);var c=DL(),f=Le(c),u=Le(f),s=Le(u,!0);Ee(u),Ee(f);var x=Oe(f,2);Ea(x,21,()=>e.options,B=>B.key,(B,I)=>{var R=kL(),F=Le(R);ks(F);var M,N=Oe(F,2),D=Le(N,!0);Ee(N),Ee(R),di(()=>{ja(R,"for",W(I).key),Hr(R,1,`z-20 flex w-full cursor-pointer items-center justify-center p-2 text-white ${(W(I).key===n()?"bg-green-600 ":"bg-gray-400")??""}`),ja(F,"id",W(I).key),M!==(M=W(I).key)&&(F.value=(F.__value=W(I).key)==null?"":W(I).key),xi(D,W(I).name)}),Dg(a,[],F,()=>(W(I).key,n()),n),Xe(B,R)}),Ee(x),Ee(c),di(()=>xi(s,e.label)),Xe(t,c),_i()}function q8(t,e){mi(e,!0);let a=si(e,"numberStyle",15),n=$t(!1);kA(t,{get label(){return e.label},get value(){return W(n)},set value(c){st(n,c,!0)},children:(c,f)=>{$8(c,{expressionType:"number",get style(){return a()},set style(u){a(u)}})},$$slots:{default:!0}}),_i()}var zL=ft("<!> <!> <!> <!>",1);function ZL(t,e){mi(e,!0);let a=si(e,"layerEntry",15),n=$t(!1);var c=zL(),f=kt(c);Yr(f,{label:"不透明度",min:0,max:1,step:.01,get value(){return a().style.opacity},set value(B){a(a().style.opacity=B,!0)}});var u=Oe(f,2);u4(u,{get colorStyle(){return a().style.colors},set colorStyle(B){a(a().style.colors=B,!0)}});var s=Oe(u,2);q8(s,{label:"ライン幅",get numberStyle(){return a().style.width},set numberStyle(B){a(a().style.width=B,!0)}});var x=Oe(s,2);kA(x,{label:"スタイル",get value(){return W(n)},set value(B){st(n,B,!0)},children:(B,I)=>{d4(B,{label:"ラインのスタイル",options:[{name:"実線",key:"solid"},{name:"破線",key:"dashed"}],get group(){return a().style.lineStyle},set group(R){a(a().style.lineStyle=R,!0)}})},$$slots:{default:!0}}),Xe(t,c),_i()}var HL=ft("<!> <!>",1);function W8(t,e){mi(e,!0);let a=si(e,"labels",15),n=$t(!1);kA(t,{label:"ラベル",get value(){return W(n)},set value(c){st(n,c,!0)},children:(c,f)=>{var u=HL(),s=kt(u);QA(s,{label:"表示",get value(){return a().show},set value(B){a(a().show=B,!0)}});var x=Oe(s,2);K8(x,{get labels(){return a()},set labels(B){a(B)}}),Xe(c,u)},$$slots:{default:!0}}),_i()}var OL=ft('<!> <!> <div class="flex flex-col gap-2 pb-2"><!></div>',1),XL=ft("<!> <!> <!>",1),VL=ft("<!> <!>",1),GL=ft("<!> <!> <!> <!> <!>",1);function jL(t,e){mi(e,!0);let a=si(e,"layerEntry",15),n=$t(!1),c=$t(!1);var f=GL(),u=kt(f);Yr(u,{label:"不透明度",min:0,max:1,step:.01,get value(){return a().style.opacity},set value(N){a(a().style.opacity=N,!0)}});var s=Oe(u,2);{var x=N=>{d4(N,{label:"ポイントのスタイル",options:[{name:"円",key:"circle"},{name:"アイコン",key:"icon"}],get group(){return a().style.markerType},set group(D){a(a().style.markerType=D,!0)}})};It(s,N=>{a().style.icon&&N(x)})}var B=Oe(s,2);{var I=N=>{var D=XL(),V=kt(D);u4(V,{get colorStyle(){return a().style.colors},set colorStyle(Ae){a(a().style.colors=Ae,!0)}});var X=Oe(V,2);q8(X,{label:"円の半径",get numberStyle(){return a().style.radius},set numberStyle(Ae){a(a().style.radius=Ae,!0)}});var ee=Oe(X,2);kA(ee,{label:"縁",get value(){return W(n)},set value(Ae){st(n,Ae,!0)},children:(Ae,ce)=>{var ue=OL(),oe=kt(ue);QA(oe,{label:"表示",get value(){return a().style.outline.show},set value(de){a(a().style.outline.show=de,!0)}});var q=Oe(oe,2);Yr(q,{label:"縁の幅",min:0,max:10,step:.01,get value(){return a().style.outline.width},set value(de){a(a().style.outline.width=de,!0)}});var H=Oe(q,2),$=Le(H);$d($,{label:"縁の色",get value(){return a().style.outline.color},set value(de){a(a().style.outline.color=de,!0)}}),Ee(H),Xe(Ae,ue)},$$slots:{default:!0}}),Xe(N,D)};It(B,N=>{a().style.markerType==="circle"&&N(I)})}var R=Oe(B,2);{var F=N=>{kA(N,{label:"アイコン",get value(){return W(c)},set value(D){st(c,D,!0)},children:(D,V)=>{var X=VL(),ee=kt(X);QA(ee,{label:"表示",get value(){return a().style.icon.show},set value(ce){a(a().style.icon.show=ce,!0)}});var Ae=Oe(ee,2);Yr(Ae,{label:"アイコンサイズ",min:0,max:.5,step:.01,get value(){return a().style.icon.size},set value(ce){a(a().style.icon.size=ce,!0)}}),Xe(D,X)},$$slots:{default:!0}})};It(R,N=>{a().style.markerType==="icon"&&a().style.icon&&N(F)})}var M=Oe(R,2);W8(M,{get labels(){return a().style.labels},set labels(N){a(a().style.labels=N,!0)}}),Xe(t,f),_i()}var KL=ft('<!> <!> <div class="flex flex-col gap-2 pb-2"><!></div> <!>',1),$L=ft('<div class="py-2"><!> <!> <!> <!></div>');function qL(t,e){mi(e,!0);let a=si(e,"layerEntry",15),n=$t(!1);var c=$L(),f=Le(c);Yr(f,{label:"不透明度",min:0,max:1,step:.01,get value(){return a().style.opacity},set value(B){a(a().style.opacity=B,!0)}});var u=Oe(f,2);u4(u,{get colorStyle(){return a().style.colors},set colorStyle(B){a(a().style.colors=B,!0)}});var s=Oe(u,2);kA(s,{label:"アウトライン",get value(){return W(n)},set value(B){st(n,B,!0)},children:(B,I)=>{var R=KL(),F=kt(R);QA(F,{label:"表示",get value(){return a().style.outline.show},set value(X){a(a().style.outline.show=X,!0)}});var M=Oe(F,2);Yr(M,{label:"ライン幅",min:0,max:10,step:.01,get value(){return a().style.outline.width},set value(X){a(a().style.outline.width=X,!0)}});var N=Oe(M,2),D=Le(N);$d(D,{label:"ラインの色",get value(){return a().style.outline.color},set value(X){a(a().style.outline.color=X,!0)}}),Ee(N);var V=Oe(N,2);d4(V,{label:"ラインのスタイル",options:[{name:"実線",key:"solid"},{name:"破線",key:"dashed"}],get group(){return a().style.outline.lineStyle},set group(X){a(a().style.outline.lineStyle=X,!0)}}),Xe(B,R)},$$slots:{default:!0}});var x=Oe(s,2);W8(x,{get labels(){return a().style.labels},set labels(B){a(a().style.labels=B,!0)}}),Ee(c),Xe(t,c),_i()}var WL=ft("<!> <!> <!> <!>",1);function JL(t,e){mi(e,!0);let a=si(e,"layerEntry",15);var n=vi(),c=kt(n);{var f=u=>{var s=WL(),x=kt(s);{var B=V=>{jL(V,{get layerEntry(){return a()},set layerEntry(X){a(X)}})};It(x,V=>{a().format.geometryType==="Point"&&V(B)})}var I=Oe(x,2);{var R=V=>{ZL(V,{get layerEntry(){return a()},set layerEntry(X){a(X)}})};It(I,V=>{a().format.geometryType==="LineString"&&V(R)})}var F=Oe(I,2);{var M=V=>{qL(V,{get layerEntry(){return a()},set layerEntry(X){a(X)}})};It(F,V=>{a().format.geometryType==="Polygon"&&V(M)})}var N=Oe(F,2);{var D=V=>{QL(V,{get layerEntry(){return a()},set layerEntry(X){a(X)}})};It(N,V=>{a().format.geometryType==="Label"&&V(D)})}Xe(u,s)};It(c,u=>{a()&&a().type==="vector"&&u(f)})}Xe(t,n),_i()}var eP=(t,e)=>Ho(Hl,!1),tP=ft('<div class="bg-main w-side-menu absolute left-0 top-0 z-20 flex h-full flex-col gap-2 overflow-hidden px-2 pt-4"><div class="flex w-full cursor-pointer justify-between pb-2"><button class="bg-base mr-auto cursor-pointer rounded-full p-2"><!></button></div> <div class="flex h-full flex-col gap-2 overflow-auto"><!> <div class="c-scroll h-full grow overflow-x-hidden"><!> <!></div></div></div>');function iP(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(Hl,"$isStyleEdit",a);let f=si(e,"layerEntry",15),u=si(e,"tempLayerEntries",15);const s=R=>{R.key==="Escape"&&f(null)};var x=vi();fr("keydown",Em,s);var B=kt(x);{var I=R=>{var F=tP(),M=Le(F),N=Le(M);N.__click=[eP,c];var D=Le(N);yi(D,{icon:"ep:back",class:"text-main h-4 w-4"}),Ee(N),Ee(M);var V=Oe(M,2),X=Le(V);j8(X,{get layerEntry(){return f()},set layerEntry(q){f(q)},get tempLayerEntries(){return u()},set tempLayerEntries(q){u(q)}});var ee=Oe(X,2),Ae=Le(ee);{var ce=q=>{JL(q,{get layerEntry(){return f()},set layerEntry(H){f(H)}})};It(Ae,q=>{f().type==="vector"&&q(ce)})}var ue=Oe(Ae,2);{var oe=q=>{cL(q,{get layerEntry(){return f()},set layerEntry(H){f(H)}})};It(ue,q=>{f().type==="raster"&&q(oe)})}Ee(ee),Ee(V),Ee(F),ba(3,F,()=>ds,()=>({duration:300,x:-100,opacity:0})),Xe(R,F)};It(B,R=>{f()&&R(I)})}Xe(t,x),_i(),n()}$a(["click"]);const aP=yn(!1);var rP=ft('<div class="absolute bottom-0 z-30 flex h-full w-full items-center justify-center bg-black/50 pointer-events-none"><div class="c-circle svelte-18jkeg5"><div class="c-circle-child"></div></div></div>');function nP(t){const[e,a]=rr(),n=()=>zi(aP,"$showLockOnScreen",e);var c=vi(),f=kt(c);{var u=s=>{var x=rP();ba(3,x,()=>ls,()=>({duration:100})),Xe(s,x)};It(f,s=>{n()&&s(u)})}Xe(t,c),a()}var sP={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((a,n)=>{t.exports=n()})(f6,function a(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},c,f=!n.document&&!!n.postMessage,u=n.IS_PAPA_WORKER||!1,s={},x=0,B={};function I(H){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function($){var de=ue($);de.chunkSize=parseInt(de.chunkSize),$.step||$.chunk||(de.chunkSize=null),this._handle=new D(de),(this._handle.streamer=this)._config=de}).call(this,H),this.parseChunk=function($,de){var ge=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ge){let we=this._config.newline;we||(ye=this._config.quoteChar||'"',we=this._handle.guessLineEndings($,ye)),$=[...$.split(we).slice(ge)].join(we)}this.isFirstChunk&&q(this._config.beforeFirstChunk)&&(ye=this._config.beforeFirstChunk($))!==void 0&&($=ye),this.isFirstChunk=!1,this._halted=!1;var ge=this._partialLine+$,ye=(this._partialLine="",this._handle.parse(ge,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if($=ye.meta.cursor,ge=(this._finished||(this._partialLine=ge.substring($-this._baseIndex),this._baseIndex=$),ye&&ye.data&&(this._rowCount+=ye.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)n.postMessage({results:ye,workerId:B.WORKER_ID,finished:ge});else if(q(this._config.chunk)&&!de){if(this._config.chunk(ye,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=ye=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ye.data),this._completeResults.errors=this._completeResults.errors.concat(ye.errors),this._completeResults.meta=ye.meta),this._completed||!ge||!q(this._config.complete)||ye&&ye.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ge||ye&&ye.meta.paused||this._nextChunk(),ye}this._halted=!0},this._sendError=function($){q(this._config.error)?this._config.error($):u&&this._config.error&&n.postMessage({workerId:B.WORKER_ID,error:$,finished:!1})}}function R(H){var $;(H=H||{}).chunkSize||(H.chunkSize=B.RemoteChunkSize),I.call(this,H),this._nextChunk=f?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(de){this._input=de,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if($=new XMLHttpRequest,this._config.withCredentials&&($.withCredentials=this._config.withCredentials),f||($.onload=oe(this._chunkLoaded,this),$.onerror=oe(this._chunkError,this)),$.open(this._config.downloadRequestBody?"POST":"GET",this._input,!f),this._config.downloadRequestHeaders){var de,ge=this._config.downloadRequestHeaders;for(de in ge)$.setRequestHeader(de,ge[de])}var ye;this._config.chunkSize&&(ye=this._start+this._config.chunkSize-1,$.setRequestHeader("Range","bytes="+this._start+"-"+ye));try{$.send(this._config.downloadRequestBody)}catch(we){this._chunkError(we.message)}f&&$.status===0&&this._chunkError()}},this._chunkLoaded=function(){$.readyState===4&&($.status<200||400<=$.status?this._chunkError():(this._start+=this._config.chunkSize||$.responseText.length,this._finished=!this._config.chunkSize||this._start>=(de=>(de=de.getResponseHeader("Content-Range"))!==null?parseInt(de.substring(de.lastIndexOf("/")+1)):-1)($),this.parseChunk($.responseText)))},this._chunkError=function(de){de=$.statusText||de,this._sendError(new Error(de))}}function F(H){(H=H||{}).chunkSize||(H.chunkSize=B.LocalChunkSize),I.call(this,H);var $,de,ge=typeof FileReader<"u";this.stream=function(ye){this._input=ye,de=ye.slice||ye.webkitSlice||ye.mozSlice,ge?(($=new FileReader).onload=oe(this._chunkLoaded,this),$.onerror=oe(this._chunkError,this)):$=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ye=this._input,we=(this._config.chunkSize&&(we=Math.min(this._start+this._config.chunkSize,this._input.size),ye=de.call(ye,this._start,we)),$.readAsText(ye,this._config.encoding));ge||this._chunkLoaded({target:{result:we}})},this._chunkLoaded=function(ye){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ye.target.result)},this._chunkError=function(){this._sendError($.error)}}function M(H){var $;I.call(this,H=H||{}),this.stream=function(de){return $=de,this._nextChunk()},this._nextChunk=function(){var de,ge;if(!this._finished)return de=this._config.chunkSize,$=de?(ge=$.substring(0,de),$.substring(de)):(ge=$,""),this._finished=!$,this.parseChunk(ge)}}function N(H){I.call(this,H=H||{});var $=[],de=!0,ge=!1;this.pause=function(){I.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){I.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ye){this._input=ye,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ge&&$.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),$.length?this.parseChunk($.shift()):de=!0},this._streamData=oe(function(ye){try{$.push(typeof ye=="string"?ye:ye.toString(this._config.encoding)),de&&(de=!1,this._checkIsFinished(),this.parseChunk($.shift()))}catch(we){this._streamError(we)}},this),this._streamError=oe(function(ye){this._streamCleanUp(),this._sendError(ye)},this),this._streamEnd=oe(function(){this._streamCleanUp(),ge=!0,this._streamData("")},this),this._streamCleanUp=oe(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function D(H){var $,de,ge,ye,we=Math.pow(2,53),Ve=-we,ut=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,at=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,et=this,xt=0,Mt=0,Yt=!1,rt=!1,pt=[],je={data:[],errors:[],meta:{}};function Qe(_t){return H.skipEmptyLines==="greedy"?_t.join("").trim()==="":_t.length===1&&_t[0].length===0}function tt(){if(je&&ge&&(dt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+B.DefaultDelimiter+"'"),ge=!1),H.skipEmptyLines&&(je.data=je.data.filter(function(Ct){return!Qe(Ct)})),bt()){let Ct=function(Zt,Ai){q(H.transformHeader)&&(Zt=H.transformHeader(Zt,Ai)),pt.push(Zt)};if(je)if(Array.isArray(je.data[0])){for(var _t=0;bt()&&_t<je.data.length;_t++)je.data[_t].forEach(Ct);je.data.splice(0,1)}else je.data.forEach(Ct)}function zt(Ct,Zt){for(var Ai=H.header?{}:[],Nt=0;Nt<Ct.length;Nt++){var Dt=Nt,li=Ct[Nt],li=((pi,Kt)=>(gt=>(H.dynamicTypingFunction&&H.dynamicTyping[gt]===void 0&&(H.dynamicTyping[gt]=H.dynamicTypingFunction(gt)),(H.dynamicTyping[gt]||H.dynamicTyping)===!0))(pi)?Kt==="true"||Kt==="TRUE"||Kt!=="false"&&Kt!=="FALSE"&&((gt=>{if(ut.test(gt)&&(gt=parseFloat(gt),Ve<gt&&gt<we))return 1})(Kt)?parseFloat(Kt):at.test(Kt)?new Date(Kt):Kt===""?null:Kt):Kt)(Dt=H.header?Nt>=pt.length?"__parsed_extra":pt[Nt]:Dt,li=H.transform?H.transform(li,Dt):li);Dt==="__parsed_extra"?(Ai[Dt]=Ai[Dt]||[],Ai[Dt].push(li)):Ai[Dt]=li}return H.header&&(Nt>pt.length?dt("FieldMismatch","TooManyFields","Too many fields: expected "+pt.length+" fields but parsed "+Nt,Mt+Zt):Nt<pt.length&&dt("FieldMismatch","TooFewFields","Too few fields: expected "+pt.length+" fields but parsed "+Nt,Mt+Zt)),Ai}var Qt;je&&(H.header||H.dynamicTyping||H.transform)&&(Qt=1,!je.data.length||Array.isArray(je.data[0])?(je.data=je.data.map(zt),Qt=je.data.length):je.data=zt(je.data,0),H.header&&je.meta&&(je.meta.fields=pt),Mt+=Qt)}function bt(){return H.header&&pt.length===0}function dt(_t,zt,Qt,Ct){_t={type:_t,code:zt,message:Qt},Ct!==void 0&&(_t.row=Ct),je.errors.push(_t)}q(H.step)&&(ye=H.step,H.step=function(_t){je=_t,bt()?tt():(tt(),je.data.length!==0&&(xt+=_t.data.length,H.preview&&xt>H.preview?de.abort():(je.data=je.data[0],ye(je,et))))}),this.parse=function(_t,zt,Qt){var Ct=H.quoteChar||'"',Ct=(H.newline||(H.newline=this.guessLineEndings(_t,Ct)),ge=!1,H.delimiter?q(H.delimiter)&&(H.delimiter=H.delimiter(_t),je.meta.delimiter=H.delimiter):((Ct=((Zt,Ai,Nt,Dt,li)=>{var pi,Kt,gt,oi;li=li||[",","	","|",";",B.RECORD_SEP,B.UNIT_SEP];for(var qi=0;qi<li.length;qi++){for(var Si,fa=li[qi],Ri=0,ea=0,wi=0,ji=(gt=void 0,new X({comments:Dt,delimiter:fa,newline:Ai,preview:10}).parse(Zt)),ha=0;ha<ji.data.length;ha++)Nt&&Qe(ji.data[ha])?wi++:(Si=ji.data[ha].length,ea+=Si,gt===void 0?gt=Si:0<Si&&(Ri+=Math.abs(Si-gt),gt=Si));0<ji.data.length&&(ea/=ji.data.length-wi),(Kt===void 0||Ri<=Kt)&&(oi===void 0||oi<ea)&&1.99<ea&&(Kt=Ri,pi=fa,oi=ea)}return{successful:!!(H.delimiter=pi),bestDelimiter:pi}})(_t,H.newline,H.skipEmptyLines,H.comments,H.delimitersToGuess)).successful?H.delimiter=Ct.bestDelimiter:(ge=!0,H.delimiter=B.DefaultDelimiter),je.meta.delimiter=H.delimiter),ue(H));return H.preview&&H.header&&Ct.preview++,$=_t,de=new X(Ct),je=de.parse($,zt,Qt),tt(),Yt?{meta:{paused:!0}}:je||{meta:{paused:!1}}},this.paused=function(){return Yt},this.pause=function(){Yt=!0,de.abort(),$=q(H.chunk)?"":$.substring(de.getCharIndex())},this.resume=function(){et.streamer._halted?(Yt=!1,et.streamer.parseChunk($,!0)):setTimeout(et.resume,3)},this.aborted=function(){return rt},this.abort=function(){rt=!0,de.abort(),je.meta.aborted=!0,q(H.complete)&&H.complete(je),$=""},this.guessLineEndings=function(Zt,Ct){Zt=Zt.substring(0,1048576);var Ct=new RegExp(V(Ct)+"([^]*?)"+V(Ct),"gm"),Qt=(Zt=Zt.replace(Ct,"")).split("\r"),Ct=Zt.split(`
`),Zt=1<Ct.length&&Ct[0].length<Qt[0].length;if(Qt.length===1||Zt)return`
`;for(var Ai=0,Nt=0;Nt<Qt.length;Nt++)Qt[Nt][0]===`
`&&Ai++;return Ai>=Qt.length/2?`\r
`:"\r"}}function V(H){return H.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(H){var $=(H=H||{}).delimiter,de=H.newline,ge=H.comments,ye=H.step,we=H.preview,Ve=H.fastMode,ut=null,at=!1,et=H.quoteChar==null?'"':H.quoteChar,xt=et;if(H.escapeChar!==void 0&&(xt=H.escapeChar),(typeof $!="string"||-1<B.BAD_DELIMITERS.indexOf($))&&($=","),ge===$)throw new Error("Comment character same as delimiter");ge===!0?ge="#":(typeof ge!="string"||-1<B.BAD_DELIMITERS.indexOf(ge))&&(ge=!1),de!==`
`&&de!=="\r"&&de!==`\r
`&&(de=`
`);var Mt=0,Yt=!1;this.parse=function(rt,pt,je){if(typeof rt!="string")throw new Error("Input must be a string");var Qe=rt.length,tt=$.length,bt=de.length,dt=ge.length,_t=q(ye),zt=[],Qt=[],Ct=[],Zt=Mt=0;if(!rt)return Ri();if(Ve||Ve!==!1&&rt.indexOf(et)===-1){for(var Ai=rt.split(de),Nt=0;Nt<Ai.length;Nt++){if(Ct=Ai[Nt],Mt+=Ct.length,Nt!==Ai.length-1)Mt+=de.length;else if(je)return Ri();if(!ge||Ct.substring(0,dt)!==ge){if(_t){if(zt=[],oi(Ct.split($)),ea(),Yt)return Ri()}else oi(Ct.split($));if(we&&we<=Nt)return zt=zt.slice(0,we),Ri(!0)}}return Ri()}for(var Dt=rt.indexOf($,Mt),li=rt.indexOf(de,Mt),pi=new RegExp(V(xt)+V(et),"g"),Kt=rt.indexOf(et,Mt);;)if(rt[Mt]===et)for(Kt=Mt,Mt++;;){if((Kt=rt.indexOf(et,Kt+1))===-1)return je||Qt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:zt.length,index:Mt}),Si();if(Kt===Qe-1)return Si(rt.substring(Mt,Kt).replace(pi,et));if(et===xt&&rt[Kt+1]===xt)Kt++;else if(et===xt||Kt===0||rt[Kt-1]!==xt){Dt!==-1&&Dt<Kt+1&&(Dt=rt.indexOf($,Kt+1));var gt=qi((li=li!==-1&&li<Kt+1?rt.indexOf(de,Kt+1):li)===-1?Dt:Math.min(Dt,li));if(rt.substr(Kt+1+gt,tt)===$){Ct.push(rt.substring(Mt,Kt).replace(pi,et)),rt[Mt=Kt+1+gt+tt]!==et&&(Kt=rt.indexOf(et,Mt)),Dt=rt.indexOf($,Mt),li=rt.indexOf(de,Mt);break}if(gt=qi(li),rt.substring(Kt+1+gt,Kt+1+gt+bt)===de){if(Ct.push(rt.substring(Mt,Kt).replace(pi,et)),fa(Kt+1+gt+bt),Dt=rt.indexOf($,Mt),Kt=rt.indexOf(et,Mt),_t&&(ea(),Yt))return Ri();if(we&&zt.length>=we)return Ri(!0);break}Qt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:zt.length,index:Mt}),Kt++}}else if(ge&&Ct.length===0&&rt.substring(Mt,Mt+dt)===ge){if(li===-1)return Ri();Mt=li+bt,li=rt.indexOf(de,Mt),Dt=rt.indexOf($,Mt)}else if(Dt!==-1&&(Dt<li||li===-1))Ct.push(rt.substring(Mt,Dt)),Mt=Dt+tt,Dt=rt.indexOf($,Mt);else{if(li===-1)break;if(Ct.push(rt.substring(Mt,li)),fa(li+bt),_t&&(ea(),Yt))return Ri();if(we&&zt.length>=we)return Ri(!0)}return Si();function oi(wi){zt.push(wi),Zt=Mt}function qi(wi){var ji=0;return ji=wi!==-1&&(wi=rt.substring(Kt+1,wi))&&wi.trim()===""?wi.length:ji}function Si(wi){return je||(wi===void 0&&(wi=rt.substring(Mt)),Ct.push(wi),Mt=Qe,oi(Ct),_t&&ea()),Ri()}function fa(wi){Mt=wi,oi(Ct),Ct=[],li=rt.indexOf(de,Mt)}function Ri(wi){if(H.header&&!pt&&zt.length&&!at){var ji=zt[0],ha={},Cr=new Set(ji);let Oa=!1;for(let Xa=0;Xa<ji.length;Xa++){let sa=ji[Xa];if(ha[sa=q(H.transformHeader)?H.transformHeader(sa,Xa):sa]){let na,va=ha[sa];for(;na=sa+"_"+va,va++,Cr.has(na););Cr.add(na),ji[Xa]=na,ha[sa]++,Oa=!0,(ut=ut===null?{}:ut)[na]=sa}else ha[sa]=1,ji[Xa]=sa;Cr.add(sa)}Oa&&console.warn("Duplicate headers found and renamed."),at=!0}return{data:zt,errors:Qt,meta:{delimiter:$,linebreak:de,aborted:Yt,truncated:!!wi,cursor:Zt+(pt||0),renamedHeaders:ut}}}function ea(){ye(Ri()),zt=[],Qt=[]}},this.abort=function(){Yt=!0},this.getCharIndex=function(){return Mt}}function ee(H){var $=H.data,de=s[$.workerId],ge=!1;if($.error)de.userError($.error,$.file);else if($.results&&$.results.data){var ye={abort:function(){ge=!0,Ae($.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(q(de.userStep)){for(var we=0;we<$.results.data.length&&(de.userStep({data:$.results.data[we],errors:$.results.errors,meta:$.results.meta},ye),!ge);we++);delete $.results}else q(de.userChunk)&&(de.userChunk($.results,ye,$.file),delete $.results)}$.finished&&!ge&&Ae($.workerId,$.results)}function Ae(H,$){var de=s[H];q(de.userComplete)&&de.userComplete($),de.terminate(),delete s[H]}function ce(){throw new Error("Not implemented.")}function ue(H){if(typeof H!="object"||H===null)return H;var $,de=Array.isArray(H)?[]:{};for($ in H)de[$]=ue(H[$]);return de}function oe(H,$){return function(){H.apply($,arguments)}}function q(H){return typeof H=="function"}return B.parse=function(H,$){var de=($=$||{}).dynamicTyping||!1;if(q(de)&&($.dynamicTypingFunction=de,de={}),$.dynamicTyping=de,$.transform=!!q($.transform)&&$.transform,!$.worker||!B.WORKERS_SUPPORTED)return de=null,B.NODE_STREAM_INPUT,typeof H=="string"?(H=(ge=>ge.charCodeAt(0)!==65279?ge:ge.slice(1))(H),de=new($.download?R:M)($)):H.readable===!0&&q(H.read)&&q(H.on)?de=new N($):(n.File&&H instanceof File||H instanceof Object)&&(de=new F($)),de.stream(H);(de=(()=>{var ge;return!!B.WORKERS_SUPPORTED&&(ge=(()=>{var ye=n.URL||n.webkitURL||null,we=a.toString();return B.BLOB_URL||(B.BLOB_URL=ye.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",we,")();"],{type:"text/javascript"})))})(),(ge=new n.Worker(ge)).onmessage=ee,ge.id=x++,s[ge.id]=ge)})()).userStep=$.step,de.userChunk=$.chunk,de.userComplete=$.complete,de.userError=$.error,$.step=q($.step),$.chunk=q($.chunk),$.complete=q($.complete),$.error=q($.error),delete $.worker,de.postMessage({input:H,config:$,workerId:de.id})},B.unparse=function(H,$){var de=!1,ge=!0,ye=",",we=`\r
`,Ve='"',ut=Ve+Ve,at=!1,et=null,xt=!1,Mt=((()=>{if(typeof $=="object"){if(typeof $.delimiter!="string"||B.BAD_DELIMITERS.filter(function(pt){return $.delimiter.indexOf(pt)!==-1}).length||(ye=$.delimiter),typeof $.quotes!="boolean"&&typeof $.quotes!="function"&&!Array.isArray($.quotes)||(de=$.quotes),typeof $.skipEmptyLines!="boolean"&&typeof $.skipEmptyLines!="string"||(at=$.skipEmptyLines),typeof $.newline=="string"&&(we=$.newline),typeof $.quoteChar=="string"&&(Ve=$.quoteChar),typeof $.header=="boolean"&&(ge=$.header),Array.isArray($.columns)){if($.columns.length===0)throw new Error("Option columns is empty");et=$.columns}$.escapeChar!==void 0&&(ut=$.escapeChar+Ve),$.escapeFormulae instanceof RegExp?xt=$.escapeFormulae:typeof $.escapeFormulae=="boolean"&&$.escapeFormulae&&(xt=/^[=+\-@\t\r].*$/)}})(),new RegExp(V(Ve),"g"));if(typeof H=="string"&&(H=JSON.parse(H)),Array.isArray(H)){if(!H.length||Array.isArray(H[0]))return Yt(null,H,at);if(typeof H[0]=="object")return Yt(et||Object.keys(H[0]),H,at)}else if(typeof H=="object")return typeof H.data=="string"&&(H.data=JSON.parse(H.data)),Array.isArray(H.data)&&(H.fields||(H.fields=H.meta&&H.meta.fields||et),H.fields||(H.fields=Array.isArray(H.data[0])?H.fields:typeof H.data[0]=="object"?Object.keys(H.data[0]):[]),Array.isArray(H.data[0])||typeof H.data[0]=="object"||(H.data=[H.data])),Yt(H.fields||[],H.data||[],at);throw new Error("Unable to serialize unrecognized input");function Yt(pt,je,Qe){var tt="",bt=(typeof pt=="string"&&(pt=JSON.parse(pt)),typeof je=="string"&&(je=JSON.parse(je)),Array.isArray(pt)&&0<pt.length),dt=!Array.isArray(je[0]);if(bt&&ge){for(var _t=0;_t<pt.length;_t++)0<_t&&(tt+=ye),tt+=rt(pt[_t],_t);0<je.length&&(tt+=we)}for(var zt=0;zt<je.length;zt++){var Qt=(bt?pt:je[zt]).length,Ct=!1,Zt=bt?Object.keys(je[zt]).length===0:je[zt].length===0;if(Qe&&!bt&&(Ct=Qe==="greedy"?je[zt].join("").trim()==="":je[zt].length===1&&je[zt][0].length===0),Qe==="greedy"&&bt){for(var Ai=[],Nt=0;Nt<Qt;Nt++){var Dt=dt?pt[Nt]:Nt;Ai.push(je[zt][Dt])}Ct=Ai.join("").trim()===""}if(!Ct){for(var li=0;li<Qt;li++){0<li&&!Zt&&(tt+=ye);var pi=bt&&dt?pt[li]:li;tt+=rt(je[zt][pi],li)}zt<je.length-1&&(!Qe||0<Qt&&!Zt)&&(tt+=we)}}return tt}function rt(pt,je){var Qe,tt;return pt==null?"":pt.constructor===Date?JSON.stringify(pt).slice(1,25):(tt=!1,xt&&typeof pt=="string"&&xt.test(pt)&&(pt="'"+pt,tt=!0),Qe=pt.toString().replace(Mt,ut),(tt=tt||de===!0||typeof de=="function"&&de(pt,je)||Array.isArray(de)&&de[je]||((bt,dt)=>{for(var _t=0;_t<dt.length;_t++)if(-1<bt.indexOf(dt[_t]))return!0;return!1})(Qe,B.BAD_DELIMITERS)||-1<Qe.indexOf(ye)||Qe.charAt(0)===" "||Qe.charAt(Qe.length-1)===" ")?Ve+Qe+Ve:Qe)}},B.RECORD_SEP="",B.UNIT_SEP="",B.BYTE_ORDER_MARK="\uFEFF",B.BAD_DELIMITERS=["\r",`
`,'"',B.BYTE_ORDER_MARK],B.WORKERS_SUPPORTED=!f&&!!n.Worker,B.NODE_STREAM_INPUT=1,B.LocalChunkSize=10485760,B.RemoteChunkSize=5242880,B.DefaultDelimiter=",",B.Parser=X,B.ParserHandle=D,B.NetworkStreamer=R,B.FileStreamer=F,B.StringStreamer=M,B.ReadableStreamStreamer=N,n.jQuery&&((c=n.jQuery).fn.parse=function(H){var $=H.config||{},de=[];return this.each(function(we){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Ve=0;Ve<this.files.length;Ve++)de.push({file:this.files[Ve],inputElem:this,instanceConfig:c.extend({},$)})}),ge(),this;function ge(){if(de.length===0)q(H.complete)&&H.complete();else{var we,Ve,ut,at,et=de[0];if(q(H.before)){var xt=H.before(et.file,et.inputElem);if(typeof xt=="object"){if(xt.action==="abort")return we="AbortError",Ve=et.file,ut=et.inputElem,at=xt.reason,void(q(H.error)&&H.error({name:we},Ve,ut,at));if(xt.action==="skip")return void ye();typeof xt.config=="object"&&(et.instanceConfig=c.extend(et.instanceConfig,xt.config))}else if(xt==="skip")return void ye()}var Mt=et.instanceConfig.complete;et.instanceConfig.complete=function(Yt){q(Mt)&&Mt(Yt,et.file,et.inputElem),ye()},B.parse(et.file,et.instanceConfig)}}function ye(){de.splice(0,1),ge()}}),u&&(n.onmessage=function(H){H=H.data,B.WORKER_ID===void 0&&H&&(B.WORKER_ID=H.workerId),typeof H.input=="string"?n.postMessage({workerId:B.WORKER_ID,results:B.parse(H.input,H.config),finished:!0}):(n.File&&H.input instanceof File||H.input instanceof Object)&&(H=B.parse(H.input,H.config))&&n.postMessage({workerId:B.WORKER_ID,results:H,finished:!0})}),(R.prototype=Object.create(I.prototype)).constructor=R,(F.prototype=Object.create(I.prototype)).constructor=F,(M.prototype=Object.create(M.prototype)).constructor=M,(N.prototype=Object.create(I.prototype)).constructor=N,B})})(sP);const oP=async(t,e)=>{try{const a=await t.arrayBuffer(),n=new Response(a).body;if(!n)throw new Error("ReadableStreamが作成できませんでした");const c=u7(n),f={type:"FeatureCollection",features:[]};if(e===void 0)for await(const u of c)f.features.push(u);return f}catch(a){throw console.error(a),new Error("Failed to parse FGB file")}};var AP=ft('<div class="pointer-events-none absolute h-full w-full bg-slate-500 opacity-50"></div>');function lP(t,e){mi(e,!0);let a=si(e,"tempLayerEntries",15),n=si(e,"showDataEntry",15);const c=["csv","geojson","fgb"],f=I=>{const R=new Set;if(I.features.forEach(F=>{F.geometry&&F.geometry.type&&R.add(F.geometry.type)}),R.has("Point"))return"Point";if(R.has("LineString"))return"LineString";if(R.has("Polygon"))return"Polygon";if(R.has("MultiPoint"))return"Point";if(R.has("MultiLineString"))return"LineString";if(R.has("MultiPolygon"))return"Polygon"},u=async I=>{var D,V;let R;const F=(D=I.name.split(".").pop())==null?void 0:D.toLowerCase();if(!F||!c.includes(F)){nh("対応していないファイル形式です","error");return}switch((V=I.name.split(".").pop())==null?void 0:V.toLowerCase()){case"geojson":R=await d7(I);break;case"fgb":R=await oP(I);break;default:nh("対応していないファイル形式です","error");return}const M=f(R);if(!M){nh("対応していないジオメトリタイプです","error");return}const N=f7(R,M,I.name);if(!N){nh("データが不正です","error");return}a([...a(),N]),n(N),nh("ファイルを読み込みました","success")};Nr(()=>{e.dropFile&&u(e.dropFile)});var s=vi(),x=kt(s);{var B=I=>{var R=AP();Xe(I,R)};It(x,I=>{e.isDragover&&I(B)})}Xe(t,s),_i()}var cP=ft('<div class="absolute bottom-2 left-2 z-20"></div>');function hP(t,e){mi(e,!1);let a=Wr();Lr(()=>{da.onInitialized(c=>{if(c){const f=new Sm.ScaleControl({maxWidth:100,unit:"metric"});W(a).appendChild(f.onAdd(c))}})}),Xo();var n=cP();Hn(n,c=>st(a,c),()=>W(a)),Xe(t,n),_i()}function uP(t){hP(t,{})}var dP=ft('<div class="grid h-[50px] w-[50px] shrink-0 cursor-grab place-items-center overflow-hidden rounded-full border-2"><svg class="h-full w-full scale-50" xmlns="http://www.w3.org/2000/svg" width="132" height="132" viewBox="0 0 132 132"><g transform="translate(47,0)"><path fill="000" d="m19 0 16.455 66H2.545L19 0Z"></path><path fill="#D9D9D9" d="M19 132 2.546 66h32.909L19 132Z"></path></g></svg></div>'),fP=ft('<div class="pointer-events-none absolute bottom-0 flex w-full items-center justify-center"><div class="bg-main pointer-events-auto grid h-[100px] w-[100px] place-items-center overflow-hidden rounded-full"><svg class="h-full w-full scale-50" xmlns="http://www.w3.org/2000/svg" width="132" height="132" viewBox="0 0 132 132"><g transform="translate(47,0)"><path fill="#000" d="m19 0 16.455 66H2.545L19 0Z"></path><path fill="#D9D9D9" d="M19 132 2.546 66h32.909L19 132Z"></path></g></svg></div></div>');function gP(t,e){mi(e,!0),F3.registerPlugin(Uh);let a=$t(null);const n=x=>(x+180)%360-180;da.onRotate(x=>{!W(a)||x==null||W(a)&&F3.set(W(a),{rotation:x*-1})}),Lr(()=>{W(a)&&Uh.create(W(a),{type:"rotation",inertia:!0,dragResistance:.5,onDrag(){const x=n(this.rotation);da.setBearing(x*-1)},onClick(){da.easeTo({bearing:0}),W(a)&&(W(a).style.transform="rotate(0deg)"),this.rotation=0,this.update()},onDragEnd(){const x=da.getBearing();x&&x>=-7&&x<=7&&da.easeTo({bearing:0})}})});var c=vi(),f=kt(c);{var u=x=>{var B=dP();Hn(B,I=>st(a,I),()=>W(a)),Xe(x,B)},s=x=>{var B=fP(),I=Le(B);Hn(I,R=>st(a,R),()=>W(a)),Ee(B),Xe(x,B)};It(f,x=>{g7()?x(u):x(s,!1)})}Xe(t,c),_i()}var pP=ft('<div role="button" tabindex="0"><!> <div class="flex flex-col gap-2"><div class="text-base font-bold"> </div></div></div>');function mP(t,e){mi(e,!0);let a=$t(0),n=$t(!1);da.onZoom(B=>{B&&st(a,B,!0)}),da.onInitialized(B=>{B&&st(a,B.getZoom(),!0)});var c=pP(),f=Le(c);gP(f,{get isHover(){return W(n)},set isHover(B){st(n,B,!0)}});var u=Oe(f,2),s=Le(u),x=Le(s,!0);Ee(s),Ee(u),Ee(c),di(B=>{Hr(c,1,`bg-main absolute bottom-12 right-0 flex h-auto w-[150px] gap-2 rounded-l-full p-2 text-sm text-white transition-opacity duration-200 ${(W(n)?"opacity-100":"opacity-80")??""}`),xi(x,B)},[()=>W(a).toFixed(1)]),fr("mouseenter",c,()=>st(n,!0)),fr("mouseleave",c,()=>st(n,!1)),Xe(t,c),_i()}const _P={street_view_sources:{type:"vector",url:`pmtiles://${F1}/THETA360.pmtiles`}},bP={id:"@street_view_line_layer",type:"line",source:"street_view_sources","source-layer":"THETA360_line",paint:{"line-color":"#08fa00","line-width":10,"line-opacity":.5,"line-blur":.5},layout:{visibility:"none","line-cap":"round","line-join":"round"}},yP={id:"@street_view_circle_layer",type:"circle",source:"street_view_sources","source-layer":"THETA360",minzoom:15,layout:{visibility:"none"},paint:{"circle-color":["case",["boolean",["feature-state","hover"],!1],"#00fad0","#08fa00"],"circle-radius":["case",["boolean",["feature-state","hover"],!1],20,12],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.6],"circle-stroke-width":2,"circle-stroke-color":"#ffffff","circle-stroke-opacity":.5,"circle-blur":.3}};var vP=ft("<div></div>");function xP(t,e){mi(e,!0),da.onInitialized(u=>{});let a=null;const n=u=>{!u.features||u.features.length===0||(a!==null&&e.map.setFeatureState({source:"street_view_sources",sourceLayer:"THETA360",id:a},{hover:!1}),a=u.features[0].id,e.map.setFeatureState({source:"street_view_sources",sourceLayer:"THETA360",id:a},{hover:!0}),e.map.getCanvas().style.cursor="pointer")},c=()=>{a!==null&&(e.map.setFeatureState({source:"street_view_sources",sourceLayer:"THETA360",id:a},{hover:!1}),a=null),e.map.getCanvas().style.cursor=""};U3.subscribe(u=>{!e.map.getLayer("@street_view_line_layer")||!e.map.getLayer("@street_view_circle_layer")||(u?(e.map.setLayoutProperty("@street_view_line_layer","visibility","visible"),e.map.setLayoutProperty("@street_view_circle_layer","visibility","visible"),e.map.on("mousemove","@street_view_circle_layer",n),e.map.on("mouseleave","@street_view_circle_layer",c)):(e.map.setLayoutProperty("@street_view_line_layer","visibility","none"),e.map.setLayoutProperty("@street_view_circle_layer","visibility","none"),e.map.off("mousemove","@street_view_circle_layer",n),e.map.off("mouseleave","@street_view_circle_layer",c)))}),Th(()=>{da.getMap()});var f=vP();Xe(t,f),_i()}var wP=ft('<div class="pointer-events-none relative z-50 grid h-[100px] w-[100px] place-items-center svelte-17wdhqb"><div class="css-ripple-effect svelte-17wdhqb"></div> <div class="border-main absolute h-[12px] w-[12px] rounded-full border-[2px] bg-white svelte-17wdhqb"></div> <div class="border-main absolute h-[24px] w-[24px] rounded-full border-2 svelte-17wdhqb"></div> <div class="border-base absolute h-[20px] w-[20px] rounded-full border-2 svelte-17wdhqb"></div></div>');function BP(t,e){mi(e,!0);let a=$t(null),n=$t(null);Lr(()=>{W(a)&&e.show&&st(n,new Ps.Marker({element:W(a),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map))}),Nr(()=>{e.show?W(n)?W(n).setLngLat(e.lngLat):st(n,new Ps.Marker({element:W(a),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map)):W(n)&&(W(n).remove(),st(n,null))}),Th(()=>{var s;(s=W(n))==null||s.remove()});var c=vi(),f=kt(c);{var u=s=>{var x=wP();Hn(x,B=>st(a,B),()=>W(a)),Xe(s,x)};It(f,s=>{e.show&&s(u)})}Xe(t,c),_i()}class qd{static set(e,a){this.cache.set(e,a)}static get(e){return this.cache.get(e)}static remove(e){this.cache.delete(e)}static clear(){this.cache.clear()}static has(e){return this.cache.has(e)}static keys(){return this.cache.keys()}}Ia(qd,"cache",new Map);var CP=ft("<div></div>");function MP(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(d6,"$clickableVectorIds",a),f=()=>zi(Pl,"$mapMode",a),u=()=>zi(rg,"$DEBUG_MODE",a);let s=si(e,"markerLngLat",15),x=si(e,"featureMenuData",15),B=si(e,"showMarker",15),I=si(e,"clickedLayerIds",15),R=null,F=null;e.map.on("click",N=>{if(e.showDataEntry)return;const D=["@street_view_circle_layer",...c()],V=e.map.queryRenderedFeatures(N.point,{layers:D});if(!V.length){R!==null&&F!==null&&(e.map.setFeatureState({...F,id:R},{selected:!1}),R=null),x(null),I([]),s()?(s(null),B(!1)):(B(!0),s(N.lngLat));return}if(f()==="edit"){const q=V[0].layer.id,H=e.layerEntries.find($=>$.id===q);H&&to.set(H.id)}const X=V.map(q=>q.layer.id),ee=e.layerEntries.filter(q=>{if(q.type==="raster"&&q.interaction.clickable&&q.style.visible){if(q.metaData.location==="全国")return!0;if(q.metaData.bounds&&eY(N.lngLat,q.metaData.bounds))return!0}}).map(q=>q.id);if(X.includes("@street_view_circle_layer")){LA.set(!0);return}const Ae=[...X,...ee];if(I(Ae.length>0?Ae:[]),V.length>0){const q=V[0],H=q.geometry.type==="Point"?q.geometry.coordinates:[N.lngLat.lng,N.lngLat.lat],$=p7(q,H);x($)}u()&&console.warn(V);const ce=V[0],ue=ce.id,oe=qd.get(ce.layer.id);s(N.lngLat),B(!0),F&&R!==null&&e.map.setFeatureState({...F,id:R},{selected:!1}),oe&&(R=ue,F=oe,e.map.setFeatureState({...F,id:ue},{selected:!0}))}),e.map.on("mousemove",N=>{const D=[...c()],V=e.map.queryRenderedFeatures(N.point,{layers:D});V.length>0?(e.map.getCanvas().style.cursor="pointer",e.toggleTooltip(N,V[0])):(e.map.getCanvas().style.cursor="default",e.toggleTooltip())}),Nr(()=>{x()||R!==null&&F!==null&&(e.map.setFeatureState({...F,id:R},{selected:!1}),R=null)}),Th(()=>{da.getMap()});var M=CP();Xe(t,M),_i(),n()}const g={};g.MUNI_ARRAY={};g.MUNI_ARRAY[1100]="1,北海道,1100,札幌市";g.MUNI_ARRAY[1101]="1,北海道,1101,札幌市　中央区";g.MUNI_ARRAY[1102]="1,北海道,1102,札幌市　北区";g.MUNI_ARRAY[1103]="1,北海道,1103,札幌市　東区";g.MUNI_ARRAY[1104]="1,北海道,1104,札幌市　白石区";g.MUNI_ARRAY[1105]="1,北海道,1105,札幌市　豊平区";g.MUNI_ARRAY[1106]="1,北海道,1106,札幌市　南区";g.MUNI_ARRAY[1107]="1,北海道,1107,札幌市　西区";g.MUNI_ARRAY[1108]="1,北海道,1108,札幌市　厚別区";g.MUNI_ARRAY[1109]="1,北海道,1109,札幌市　手稲区";g.MUNI_ARRAY[1110]="1,北海道,1110,札幌市　清田区";g.MUNI_ARRAY[1202]="1,北海道,1202,函館市";g.MUNI_ARRAY[1203]="1,北海道,1203,小樽市";g.MUNI_ARRAY[1204]="1,北海道,1204,旭川市";g.MUNI_ARRAY[1205]="1,北海道,1205,室蘭市";g.MUNI_ARRAY[1206]="1,北海道,1206,釧路市";g.MUNI_ARRAY[1207]="1,北海道,1207,帯広市";g.MUNI_ARRAY[1208]="1,北海道,1208,北見市";g.MUNI_ARRAY[1209]="1,北海道,1209,夕張市";g.MUNI_ARRAY[1210]="1,北海道,1210,岩見沢市";g.MUNI_ARRAY[1211]="1,北海道,1211,網走市";g.MUNI_ARRAY[1212]="1,北海道,1212,留萌市";g.MUNI_ARRAY[1213]="1,北海道,1213,苫小牧市";g.MUNI_ARRAY[1214]="1,北海道,1214,稚内市";g.MUNI_ARRAY[1215]="1,北海道,1215,美唄市";g.MUNI_ARRAY[1216]="1,北海道,1216,芦別市";g.MUNI_ARRAY[1217]="1,北海道,1217,江別市";g.MUNI_ARRAY[1218]="1,北海道,1218,赤平市";g.MUNI_ARRAY[1219]="1,北海道,1219,紋別市";g.MUNI_ARRAY[1220]="1,北海道,1220,士別市";g.MUNI_ARRAY[1221]="1,北海道,1221,名寄市";g.MUNI_ARRAY[1222]="1,北海道,1222,三笠市";g.MUNI_ARRAY[1223]="1,北海道,1223,根室市";g.MUNI_ARRAY[1224]="1,北海道,1224,千歳市";g.MUNI_ARRAY[1225]="1,北海道,1225,滝川市";g.MUNI_ARRAY[1226]="1,北海道,1226,砂川市";g.MUNI_ARRAY[1227]="1,北海道,1227,歌志内市";g.MUNI_ARRAY[1228]="1,北海道,1228,深川市";g.MUNI_ARRAY[1229]="1,北海道,1229,富良野市";g.MUNI_ARRAY[1230]="1,北海道,1230,登別市";g.MUNI_ARRAY[1231]="1,北海道,1231,恵庭市";g.MUNI_ARRAY[1233]="1,北海道,1233,伊達市";g.MUNI_ARRAY[1234]="1,北海道,1234,北広島市";g.MUNI_ARRAY[1235]="1,北海道,1235,石狩市";g.MUNI_ARRAY[1236]="1,北海道,1236,北斗市";g.MUNI_ARRAY[1303]="1,北海道,1303,当別町";g.MUNI_ARRAY[1304]="1,北海道,1304,新篠津村";g.MUNI_ARRAY[1331]="1,北海道,1331,松前町";g.MUNI_ARRAY[1332]="1,北海道,1332,福島町";g.MUNI_ARRAY[1333]="1,北海道,1333,知内町";g.MUNI_ARRAY[1334]="1,北海道,1334,木古内町";g.MUNI_ARRAY[1337]="1,北海道,1337,七飯町";g.MUNI_ARRAY[1343]="1,北海道,1343,鹿部町";g.MUNI_ARRAY[1345]="1,北海道,1345,森町";g.MUNI_ARRAY[1346]="1,北海道,1346,八雲町";g.MUNI_ARRAY[1347]="1,北海道,1347,長万部町";g.MUNI_ARRAY[1361]="1,北海道,1361,江差町";g.MUNI_ARRAY[1362]="1,北海道,1362,上ノ国町";g.MUNI_ARRAY[1363]="1,北海道,1363,厚沢部町";g.MUNI_ARRAY[1364]="1,北海道,1364,乙部町";g.MUNI_ARRAY[1367]="1,北海道,1367,奥尻町";g.MUNI_ARRAY[1370]="1,北海道,1370,今金町";g.MUNI_ARRAY[1371]="1,北海道,1371,せたな町";g.MUNI_ARRAY[1391]="1,北海道,1391,島牧村";g.MUNI_ARRAY[1392]="1,北海道,1392,寿都町";g.MUNI_ARRAY[1393]="1,北海道,1393,黒松内町";g.MUNI_ARRAY[1394]="1,北海道,1394,蘭越町";g.MUNI_ARRAY[1395]="1,北海道,1395,ニセコ町";g.MUNI_ARRAY[1396]="1,北海道,1396,真狩村";g.MUNI_ARRAY[1397]="1,北海道,1397,留寿都村";g.MUNI_ARRAY[1398]="1,北海道,1398,喜茂別町";g.MUNI_ARRAY[1399]="1,北海道,1399,京極町";g.MUNI_ARRAY[1400]="1,北海道,1400,倶知安町";g.MUNI_ARRAY[1401]="1,北海道,1401,共和町";g.MUNI_ARRAY[1402]="1,北海道,1402,岩内町";g.MUNI_ARRAY[1403]="1,北海道,1403,泊村";g.MUNI_ARRAY[1404]="1,北海道,1404,神恵内村";g.MUNI_ARRAY[1405]="1,北海道,1405,積丹町";g.MUNI_ARRAY[1406]="1,北海道,1406,古平町";g.MUNI_ARRAY[1407]="1,北海道,1407,仁木町";g.MUNI_ARRAY[1408]="1,北海道,1408,余市町";g.MUNI_ARRAY[1409]="1,北海道,1409,赤井川村";g.MUNI_ARRAY[1423]="1,北海道,1423,南幌町";g.MUNI_ARRAY[1424]="1,北海道,1424,奈井江町";g.MUNI_ARRAY[1425]="1,北海道,1425,上砂川町";g.MUNI_ARRAY[1427]="1,北海道,1427,由仁町";g.MUNI_ARRAY[1428]="1,北海道,1428,長沼町";g.MUNI_ARRAY[1429]="1,北海道,1429,栗山町";g.MUNI_ARRAY[1430]="1,北海道,1430,月形町";g.MUNI_ARRAY[1431]="1,北海道,1431,浦臼町";g.MUNI_ARRAY[1432]="1,北海道,1432,新十津川町";g.MUNI_ARRAY[1433]="1,北海道,1433,妹背牛町";g.MUNI_ARRAY[1434]="1,北海道,1434,秩父別町";g.MUNI_ARRAY[1436]="1,北海道,1436,雨竜町";g.MUNI_ARRAY[1437]="1,北海道,1437,北竜町";g.MUNI_ARRAY[1438]="1,北海道,1438,沼田町";g.MUNI_ARRAY[1452]="1,北海道,1452,鷹栖町";g.MUNI_ARRAY[1453]="1,北海道,1453,東神楽町";g.MUNI_ARRAY[1454]="1,北海道,1454,当麻町";g.MUNI_ARRAY[1455]="1,北海道,1455,比布町";g.MUNI_ARRAY[1456]="1,北海道,1456,愛別町";g.MUNI_ARRAY[1457]="1,北海道,1457,上川町";g.MUNI_ARRAY[1458]="1,北海道,1458,東川町";g.MUNI_ARRAY[1459]="1,北海道,1459,美瑛町";g.MUNI_ARRAY[1460]="1,北海道,1460,上富良野町";g.MUNI_ARRAY[1461]="1,北海道,1461,中富良野町";g.MUNI_ARRAY[1462]="1,北海道,1462,南富良野町";g.MUNI_ARRAY[1463]="1,北海道,1463,占冠村";g.MUNI_ARRAY[1464]="1,北海道,1464,和寒町";g.MUNI_ARRAY[1465]="1,北海道,1465,剣淵町";g.MUNI_ARRAY[1468]="1,北海道,1468,下川町";g.MUNI_ARRAY[1469]="1,北海道,1469,美深町";g.MUNI_ARRAY[1470]="1,北海道,1470,音威子府村";g.MUNI_ARRAY[1471]="1,北海道,1471,中川町";g.MUNI_ARRAY[1472]="1,北海道,1472,幌加内町";g.MUNI_ARRAY[1481]="1,北海道,1481,増毛町";g.MUNI_ARRAY[1482]="1,北海道,1482,小平町";g.MUNI_ARRAY[1483]="1,北海道,1483,苫前町";g.MUNI_ARRAY[1484]="1,北海道,1484,羽幌町";g.MUNI_ARRAY[1485]="1,北海道,1485,初山別村";g.MUNI_ARRAY[1486]="1,北海道,1486,遠別町";g.MUNI_ARRAY[1487]="1,北海道,1487,天塩町";g.MUNI_ARRAY[1511]="1,北海道,1511,猿払村";g.MUNI_ARRAY[1512]="1,北海道,1512,浜頓別町";g.MUNI_ARRAY[1513]="1,北海道,1513,中頓別町";g.MUNI_ARRAY[1514]="1,北海道,1514,枝幸町";g.MUNI_ARRAY[1516]="1,北海道,1516,豊富町";g.MUNI_ARRAY[1517]="1,北海道,1517,礼文町";g.MUNI_ARRAY[1518]="1,北海道,1518,利尻町";g.MUNI_ARRAY[1519]="1,北海道,1519,利尻富士町";g.MUNI_ARRAY[1520]="1,北海道,1520,幌延町";g.MUNI_ARRAY[1543]="1,北海道,1543,美幌町";g.MUNI_ARRAY[1544]="1,北海道,1544,津別町";g.MUNI_ARRAY[1545]="1,北海道,1545,斜里町";g.MUNI_ARRAY[1546]="1,北海道,1546,清里町";g.MUNI_ARRAY[1547]="1,北海道,1547,小清水町";g.MUNI_ARRAY[1549]="1,北海道,1549,訓子府町";g.MUNI_ARRAY[1550]="1,北海道,1550,置戸町";g.MUNI_ARRAY[1552]="1,北海道,1552,佐呂間町";g.MUNI_ARRAY[1555]="1,北海道,1555,遠軽町";g.MUNI_ARRAY[1559]="1,北海道,1559,湧別町";g.MUNI_ARRAY[1560]="1,北海道,1560,滝上町";g.MUNI_ARRAY[1561]="1,北海道,1561,興部町";g.MUNI_ARRAY[1562]="1,北海道,1562,西興部村";g.MUNI_ARRAY[1563]="1,北海道,1563,雄武町";g.MUNI_ARRAY[1564]="1,北海道,1564,大空町";g.MUNI_ARRAY[1571]="1,北海道,1571,豊浦町";g.MUNI_ARRAY[1575]="1,北海道,1575,壮瞥町";g.MUNI_ARRAY[1578]="1,北海道,1578,白老町";g.MUNI_ARRAY[1581]="1,北海道,1581,厚真町";g.MUNI_ARRAY[1584]="1,北海道,1584,洞爺湖町";g.MUNI_ARRAY[1585]="1,北海道,1585,安平町";g.MUNI_ARRAY[1586]="1,北海道,1586,むかわ町";g.MUNI_ARRAY[1601]="1,北海道,1601,日高町";g.MUNI_ARRAY[1602]="1,北海道,1602,平取町";g.MUNI_ARRAY[1604]="1,北海道,1604,新冠町";g.MUNI_ARRAY[1607]="1,北海道,1607,浦河町";g.MUNI_ARRAY[1608]="1,北海道,1608,様似町";g.MUNI_ARRAY[1609]="1,北海道,1609,えりも町";g.MUNI_ARRAY[1610]="1,北海道,1610,新ひだか町";g.MUNI_ARRAY[1631]="1,北海道,1631,音更町";g.MUNI_ARRAY[1632]="1,北海道,1632,士幌町";g.MUNI_ARRAY[1633]="1,北海道,1633,上士幌町";g.MUNI_ARRAY[1634]="1,北海道,1634,鹿追町";g.MUNI_ARRAY[1635]="1,北海道,1635,新得町";g.MUNI_ARRAY[1636]="1,北海道,1636,清水町";g.MUNI_ARRAY[1637]="1,北海道,1637,芽室町";g.MUNI_ARRAY[1638]="1,北海道,1638,中札内村";g.MUNI_ARRAY[1639]="1,北海道,1639,更別村";g.MUNI_ARRAY[1641]="1,北海道,1641,大樹町";g.MUNI_ARRAY[1642]="1,北海道,1642,広尾町";g.MUNI_ARRAY[1643]="1,北海道,1643,幕別町";g.MUNI_ARRAY[1644]="1,北海道,1644,池田町";g.MUNI_ARRAY[1645]="1,北海道,1645,豊頃町";g.MUNI_ARRAY[1646]="1,北海道,1646,本別町";g.MUNI_ARRAY[1647]="1,北海道,1647,足寄町";g.MUNI_ARRAY[1648]="1,北海道,1648,陸別町";g.MUNI_ARRAY[1649]="1,北海道,1649,浦幌町";g.MUNI_ARRAY[1661]="1,北海道,1661,釧路町";g.MUNI_ARRAY[1662]="1,北海道,1662,厚岸町";g.MUNI_ARRAY[1663]="1,北海道,1663,浜中町";g.MUNI_ARRAY[1664]="1,北海道,1664,標茶町";g.MUNI_ARRAY[1665]="1,北海道,1665,弟子屈町";g.MUNI_ARRAY[1667]="1,北海道,1667,鶴居村";g.MUNI_ARRAY[1668]="1,北海道,1668,白糠町";g.MUNI_ARRAY[1691]="1,北海道,1691,別海町";g.MUNI_ARRAY[1692]="1,北海道,1692,中標津町";g.MUNI_ARRAY[1693]="1,北海道,1693,標津町";g.MUNI_ARRAY[1694]="1,北海道,1694,羅臼町";g.MUNI_ARRAY[1695]="1,北海道,1695,色丹村";g.MUNI_ARRAY[1696]="1,北海道,1696,泊村";g.MUNI_ARRAY[1697]="1,北海道,1697,留夜別村";g.MUNI_ARRAY[1698]="1,北海道,1698,留別村";g.MUNI_ARRAY[1699]="1,北海道,1699,紗那村";g.MUNI_ARRAY[1700]="1,北海道,1700,蘂取村";g.MUNI_ARRAY[2201]="2,青森県,2201,青森市";g.MUNI_ARRAY[2202]="2,青森県,2202,弘前市";g.MUNI_ARRAY[2203]="2,青森県,2203,八戸市";g.MUNI_ARRAY[2204]="2,青森県,2204,黒石市";g.MUNI_ARRAY[2205]="2,青森県,2205,五所川原市";g.MUNI_ARRAY[2206]="2,青森県,2206,十和田市";g.MUNI_ARRAY[2207]="2,青森県,2207,三沢市";g.MUNI_ARRAY[2208]="2,青森県,2208,むつ市";g.MUNI_ARRAY[2209]="2,青森県,2209,つがる市";g.MUNI_ARRAY[2210]="2,青森県,2210,平川市";g.MUNI_ARRAY[2301]="2,青森県,2301,平内町";g.MUNI_ARRAY[2303]="2,青森県,2303,今別町";g.MUNI_ARRAY[2304]="2,青森県,2304,蓬田村";g.MUNI_ARRAY[2307]="2,青森県,2307,外ヶ浜町";g.MUNI_ARRAY[2321]="2,青森県,2321,鰺ヶ沢町";g.MUNI_ARRAY[2323]="2,青森県,2323,深浦町";g.MUNI_ARRAY[2343]="2,青森県,2343,西目屋村";g.MUNI_ARRAY[2361]="2,青森県,2361,藤崎町";g.MUNI_ARRAY[2362]="2,青森県,2362,大鰐町";g.MUNI_ARRAY[2367]="2,青森県,2367,田舎館村";g.MUNI_ARRAY[2381]="2,青森県,2381,板柳町";g.MUNI_ARRAY[2384]="2,青森県,2384,鶴田町";g.MUNI_ARRAY[2387]="2,青森県,2387,中泊町";g.MUNI_ARRAY[2401]="2,青森県,2401,野辺地町";g.MUNI_ARRAY[2402]="2,青森県,2402,七戸町";g.MUNI_ARRAY[2405]="2,青森県,2405,六戸町";g.MUNI_ARRAY[2406]="2,青森県,2406,横浜町";g.MUNI_ARRAY[2408]="2,青森県,2408,東北町";g.MUNI_ARRAY[2411]="2,青森県,2411,六ヶ所村";g.MUNI_ARRAY[2412]="2,青森県,2412,おいらせ町";g.MUNI_ARRAY[2423]="2,青森県,2423,大間町";g.MUNI_ARRAY[2424]="2,青森県,2424,東通村";g.MUNI_ARRAY[2425]="2,青森県,2425,風間浦村";g.MUNI_ARRAY[2426]="2,青森県,2426,佐井村";g.MUNI_ARRAY[2441]="2,青森県,2441,三戸町";g.MUNI_ARRAY[2442]="2,青森県,2442,五戸町";g.MUNI_ARRAY[2443]="2,青森県,2443,田子町";g.MUNI_ARRAY[2445]="2,青森県,2445,南部町";g.MUNI_ARRAY[2446]="2,青森県,2446,階上町";g.MUNI_ARRAY[2450]="2,青森県,2450,新郷村";g.MUNI_ARRAY[3201]="3,岩手県,3201,盛岡市";g.MUNI_ARRAY[3202]="3,岩手県,3202,宮古市";g.MUNI_ARRAY[3203]="3,岩手県,3203,大船渡市";g.MUNI_ARRAY[3205]="3,岩手県,3205,花巻市";g.MUNI_ARRAY[3206]="3,岩手県,3206,北上市";g.MUNI_ARRAY[3207]="3,岩手県,3207,久慈市";g.MUNI_ARRAY[3208]="3,岩手県,3208,遠野市";g.MUNI_ARRAY[3209]="3,岩手県,3209,一関市";g.MUNI_ARRAY[3210]="3,岩手県,3210,陸前高田市";g.MUNI_ARRAY[3211]="3,岩手県,3211,釜石市";g.MUNI_ARRAY[3213]="3,岩手県,3213,二戸市";g.MUNI_ARRAY[3214]="3,岩手県,3214,八幡平市";g.MUNI_ARRAY[3215]="3,岩手県,3215,奥州市";g.MUNI_ARRAY[3216]="3,岩手県,3216,滝沢市";g.MUNI_ARRAY[3301]="3,岩手県,3301,雫石町";g.MUNI_ARRAY[3302]="3,岩手県,3302,葛巻町";g.MUNI_ARRAY[3303]="3,岩手県,3303,岩手町";g.MUNI_ARRAY[3321]="3,岩手県,3321,紫波町";g.MUNI_ARRAY[3322]="3,岩手県,3322,矢巾町";g.MUNI_ARRAY[3366]="3,岩手県,3366,西和賀町";g.MUNI_ARRAY[3381]="3,岩手県,3381,金ケ崎町";g.MUNI_ARRAY[3402]="3,岩手県,3402,平泉町";g.MUNI_ARRAY[3441]="3,岩手県,3441,住田町";g.MUNI_ARRAY[3461]="3,岩手県,3461,大槌町";g.MUNI_ARRAY[3482]="3,岩手県,3482,山田町";g.MUNI_ARRAY[3483]="3,岩手県,3483,岩泉町";g.MUNI_ARRAY[3484]="3,岩手県,3484,田野畑村";g.MUNI_ARRAY[3485]="3,岩手県,3485,普代村";g.MUNI_ARRAY[3501]="3,岩手県,3501,軽米町";g.MUNI_ARRAY[3503]="3,岩手県,3503,野田村";g.MUNI_ARRAY[3506]="3,岩手県,3506,九戸村";g.MUNI_ARRAY[3507]="3,岩手県,3507,洋野町";g.MUNI_ARRAY[3524]="3,岩手県,3524,一戸町";g.MUNI_ARRAY[4100]="4,宮城県,4100,仙台市";g.MUNI_ARRAY[4101]="4,宮城県,4101,仙台市　青葉区";g.MUNI_ARRAY[4102]="4,宮城県,4102,仙台市　宮城野区";g.MUNI_ARRAY[4103]="4,宮城県,4103,仙台市　若林区";g.MUNI_ARRAY[4104]="4,宮城県,4104,仙台市　太白区";g.MUNI_ARRAY[4105]="4,宮城県,4105,仙台市　泉区";g.MUNI_ARRAY[4202]="4,宮城県,4202,石巻市";g.MUNI_ARRAY[4203]="4,宮城県,4203,塩竈市";g.MUNI_ARRAY[4205]="4,宮城県,4205,気仙沼市";g.MUNI_ARRAY[4206]="4,宮城県,4206,白石市";g.MUNI_ARRAY[4207]="4,宮城県,4207,名取市";g.MUNI_ARRAY[4208]="4,宮城県,4208,角田市";g.MUNI_ARRAY[4209]="4,宮城県,4209,多賀城市";g.MUNI_ARRAY[4211]="4,宮城県,4211,岩沼市";g.MUNI_ARRAY[4212]="4,宮城県,4212,登米市";g.MUNI_ARRAY[4213]="4,宮城県,4213,栗原市";g.MUNI_ARRAY[4214]="4,宮城県,4214,東松島市";g.MUNI_ARRAY[4215]="4,宮城県,4215,大崎市";g.MUNI_ARRAY[4216]="4,宮城県,4216,富谷市";g.MUNI_ARRAY[4301]="4,宮城県,4301,蔵王町";g.MUNI_ARRAY[4302]="4,宮城県,4302,七ケ宿町";g.MUNI_ARRAY[4321]="4,宮城県,4321,大河原町";g.MUNI_ARRAY[4322]="4,宮城県,4322,村田町";g.MUNI_ARRAY[4323]="4,宮城県,4323,柴田町";g.MUNI_ARRAY[4324]="4,宮城県,4324,川崎町";g.MUNI_ARRAY[4341]="4,宮城県,4341,丸森町";g.MUNI_ARRAY[4361]="4,宮城県,4361,亘理町";g.MUNI_ARRAY[4362]="4,宮城県,4362,山元町";g.MUNI_ARRAY[4401]="4,宮城県,4401,松島町";g.MUNI_ARRAY[4404]="4,宮城県,4404,七ヶ浜町";g.MUNI_ARRAY[4406]="4,宮城県,4406,利府町";g.MUNI_ARRAY[4421]="4,宮城県,4421,大和町";g.MUNI_ARRAY[4422]="4,宮城県,4422,大郷町";g.MUNI_ARRAY[4423]="4,宮城県,4423,富谷市";g.MUNI_ARRAY[4424]="4,宮城県,4424,大衡村";g.MUNI_ARRAY[4444]="4,宮城県,4444,色麻町";g.MUNI_ARRAY[4445]="4,宮城県,4445,加美町";g.MUNI_ARRAY[4501]="4,宮城県,4501,涌谷町";g.MUNI_ARRAY[4505]="4,宮城県,4505,美里町";g.MUNI_ARRAY[4581]="4,宮城県,4581,女川町";g.MUNI_ARRAY[4606]="4,宮城県,4606,南三陸町";g.MUNI_ARRAY[5201]="5,秋田県,5201,秋田市";g.MUNI_ARRAY[5202]="5,秋田県,5202,能代市";g.MUNI_ARRAY[5203]="5,秋田県,5203,横手市";g.MUNI_ARRAY[5204]="5,秋田県,5204,大館市";g.MUNI_ARRAY[5206]="5,秋田県,5206,男鹿市";g.MUNI_ARRAY[5207]="5,秋田県,5207,湯沢市";g.MUNI_ARRAY[5209]="5,秋田県,5209,鹿角市";g.MUNI_ARRAY[5210]="5,秋田県,5210,由利本荘市";g.MUNI_ARRAY[5211]="5,秋田県,5211,潟上市";g.MUNI_ARRAY[5212]="5,秋田県,5212,大仙市";g.MUNI_ARRAY[5213]="5,秋田県,5213,北秋田市";g.MUNI_ARRAY[5214]="5,秋田県,5214,にかほ市";g.MUNI_ARRAY[5215]="5,秋田県,5215,仙北市";g.MUNI_ARRAY[5303]="5,秋田県,5303,小坂町";g.MUNI_ARRAY[5327]="5,秋田県,5327,上小阿仁村";g.MUNI_ARRAY[5346]="5,秋田県,5346,藤里町";g.MUNI_ARRAY[5348]="5,秋田県,5348,三種町";g.MUNI_ARRAY[5349]="5,秋田県,5349,八峰町";g.MUNI_ARRAY[5361]="5,秋田県,5361,五城目町";g.MUNI_ARRAY[5363]="5,秋田県,5363,八郎潟町";g.MUNI_ARRAY[5366]="5,秋田県,5366,井川町";g.MUNI_ARRAY[5368]="5,秋田県,5368,大潟村";g.MUNI_ARRAY[5434]="5,秋田県,5434,美郷町";g.MUNI_ARRAY[5463]="5,秋田県,5463,羽後町";g.MUNI_ARRAY[5464]="5,秋田県,5464,東成瀬村";g.MUNI_ARRAY[6201]="6,山形県,6201,山形市";g.MUNI_ARRAY[6202]="6,山形県,6202,米沢市";g.MUNI_ARRAY[6203]="6,山形県,6203,鶴岡市";g.MUNI_ARRAY[6204]="6,山形県,6204,酒田市";g.MUNI_ARRAY[6205]="6,山形県,6205,新庄市";g.MUNI_ARRAY[6206]="6,山形県,6206,寒河江市";g.MUNI_ARRAY[6207]="6,山形県,6207,上山市";g.MUNI_ARRAY[6208]="6,山形県,6208,村山市";g.MUNI_ARRAY[6209]="6,山形県,6209,長井市";g.MUNI_ARRAY[6210]="6,山形県,6210,天童市";g.MUNI_ARRAY[6211]="6,山形県,6211,東根市";g.MUNI_ARRAY[6212]="6,山形県,6212,尾花沢市";g.MUNI_ARRAY[6213]="6,山形県,6213,南陽市";g.MUNI_ARRAY[6301]="6,山形県,6301,山辺町";g.MUNI_ARRAY[6302]="6,山形県,6302,中山町";g.MUNI_ARRAY[6321]="6,山形県,6321,河北町";g.MUNI_ARRAY[6322]="6,山形県,6322,西川町";g.MUNI_ARRAY[6323]="6,山形県,6323,朝日町";g.MUNI_ARRAY[6324]="6,山形県,6324,大江町";g.MUNI_ARRAY[6341]="6,山形県,6341,大石田町";g.MUNI_ARRAY[6361]="6,山形県,6361,金山町";g.MUNI_ARRAY[6362]="6,山形県,6362,最上町";g.MUNI_ARRAY[6363]="6,山形県,6363,舟形町";g.MUNI_ARRAY[6364]="6,山形県,6364,真室川町";g.MUNI_ARRAY[6365]="6,山形県,6365,大蔵村";g.MUNI_ARRAY[6366]="6,山形県,6366,鮭川村";g.MUNI_ARRAY[6367]="6,山形県,6367,戸沢村";g.MUNI_ARRAY[6381]="6,山形県,6381,高畠町";g.MUNI_ARRAY[6382]="6,山形県,6382,川西町";g.MUNI_ARRAY[6401]="6,山形県,6401,小国町";g.MUNI_ARRAY[6402]="6,山形県,6402,白鷹町";g.MUNI_ARRAY[6403]="6,山形県,6403,飯豊町";g.MUNI_ARRAY[6426]="6,山形県,6426,三川町";g.MUNI_ARRAY[6428]="6,山形県,6428,庄内町";g.MUNI_ARRAY[6461]="6,山形県,6461,遊佐町";g.MUNI_ARRAY[7201]="7,福島県,7201,福島市";g.MUNI_ARRAY[7202]="7,福島県,7202,会津若松市";g.MUNI_ARRAY[7203]="7,福島県,7203,郡山市";g.MUNI_ARRAY[7204]="7,福島県,7204,いわき市";g.MUNI_ARRAY[7205]="7,福島県,7205,白河市";g.MUNI_ARRAY[7207]="7,福島県,7207,須賀川市";g.MUNI_ARRAY[7208]="7,福島県,7208,喜多方市";g.MUNI_ARRAY[7209]="7,福島県,7209,相馬市";g.MUNI_ARRAY[7210]="7,福島県,7210,二本松市";g.MUNI_ARRAY[7211]="7,福島県,7211,田村市";g.MUNI_ARRAY[7212]="7,福島県,7212,南相馬市";g.MUNI_ARRAY[7213]="7,福島県,7213,伊達市";g.MUNI_ARRAY[7214]="7,福島県,7214,本宮市";g.MUNI_ARRAY[7301]="7,福島県,7301,桑折町";g.MUNI_ARRAY[7303]="7,福島県,7303,国見町";g.MUNI_ARRAY[7308]="7,福島県,7308,川俣町";g.MUNI_ARRAY[7322]="7,福島県,7322,大玉村";g.MUNI_ARRAY[7342]="7,福島県,7342,鏡石町";g.MUNI_ARRAY[7344]="7,福島県,7344,天栄村";g.MUNI_ARRAY[7362]="7,福島県,7362,下郷町";g.MUNI_ARRAY[7364]="7,福島県,7364,檜枝岐村";g.MUNI_ARRAY[7367]="7,福島県,7367,只見町";g.MUNI_ARRAY[7368]="7,福島県,7368,南会津町";g.MUNI_ARRAY[7402]="7,福島県,7402,北塩原村";g.MUNI_ARRAY[7405]="7,福島県,7405,西会津町";g.MUNI_ARRAY[7407]="7,福島県,7407,磐梯町";g.MUNI_ARRAY[7408]="7,福島県,7408,猪苗代町";g.MUNI_ARRAY[7421]="7,福島県,7421,会津坂下町";g.MUNI_ARRAY[7422]="7,福島県,7422,湯川村";g.MUNI_ARRAY[7423]="7,福島県,7423,柳津町";g.MUNI_ARRAY[7444]="7,福島県,7444,三島町";g.MUNI_ARRAY[7445]="7,福島県,7445,金山町";g.MUNI_ARRAY[7446]="7,福島県,7446,昭和村";g.MUNI_ARRAY[7447]="7,福島県,7447,会津美里町";g.MUNI_ARRAY[7461]="7,福島県,7461,西郷村";g.MUNI_ARRAY[7464]="7,福島県,7464,泉崎村";g.MUNI_ARRAY[7465]="7,福島県,7465,中島村";g.MUNI_ARRAY[7466]="7,福島県,7466,矢吹町";g.MUNI_ARRAY[7481]="7,福島県,7481,棚倉町";g.MUNI_ARRAY[7482]="7,福島県,7482,矢祭町";g.MUNI_ARRAY[7483]="7,福島県,7483,塙町";g.MUNI_ARRAY[7484]="7,福島県,7484,鮫川村";g.MUNI_ARRAY[7501]="7,福島県,7501,石川町";g.MUNI_ARRAY[7502]="7,福島県,7502,玉川村";g.MUNI_ARRAY[7503]="7,福島県,7503,平田村";g.MUNI_ARRAY[7504]="7,福島県,7504,浅川町";g.MUNI_ARRAY[7505]="7,福島県,7505,古殿町";g.MUNI_ARRAY[7521]="7,福島県,7521,三春町";g.MUNI_ARRAY[7522]="7,福島県,7522,小野町";g.MUNI_ARRAY[7541]="7,福島県,7541,広野町";g.MUNI_ARRAY[7542]="7,福島県,7542,楢葉町";g.MUNI_ARRAY[7543]="7,福島県,7543,富岡町";g.MUNI_ARRAY[7544]="7,福島県,7544,川内村";g.MUNI_ARRAY[7545]="7,福島県,7545,大熊町";g.MUNI_ARRAY[7546]="7,福島県,7546,双葉町";g.MUNI_ARRAY[7547]="7,福島県,7547,浪江町";g.MUNI_ARRAY[7548]="7,福島県,7548,葛尾村";g.MUNI_ARRAY[7561]="7,福島県,7561,新地町";g.MUNI_ARRAY[7564]="7,福島県,7564,飯舘村";g.MUNI_ARRAY[8201]="8,茨城県,8201,水戸市";g.MUNI_ARRAY[8202]="8,茨城県,8202,日立市";g.MUNI_ARRAY[8203]="8,茨城県,8203,土浦市";g.MUNI_ARRAY[8204]="8,茨城県,8204,古河市";g.MUNI_ARRAY[8205]="8,茨城県,8205,石岡市";g.MUNI_ARRAY[8207]="8,茨城県,8207,結城市";g.MUNI_ARRAY[8208]="8,茨城県,8208,龍ケ崎市";g.MUNI_ARRAY[8210]="8,茨城県,8210,下妻市";g.MUNI_ARRAY[8211]="8,茨城県,8211,常総市";g.MUNI_ARRAY[8212]="8,茨城県,8212,常陸太田市";g.MUNI_ARRAY[8214]="8,茨城県,8214,高萩市";g.MUNI_ARRAY[8215]="8,茨城県,8215,北茨城市";g.MUNI_ARRAY[8216]="8,茨城県,8216,笠間市";g.MUNI_ARRAY[8217]="8,茨城県,8217,取手市";g.MUNI_ARRAY[8219]="8,茨城県,8219,牛久市";g.MUNI_ARRAY[8220]="8,茨城県,8220,つくば市";g.MUNI_ARRAY[8221]="8,茨城県,8221,ひたちなか市";g.MUNI_ARRAY[8222]="8,茨城県,8222,鹿嶋市";g.MUNI_ARRAY[8223]="8,茨城県,8223,潮来市";g.MUNI_ARRAY[8224]="8,茨城県,8224,守谷市";g.MUNI_ARRAY[8225]="8,茨城県,8225,常陸大宮市";g.MUNI_ARRAY[8226]="8,茨城県,8226,那珂市";g.MUNI_ARRAY[8227]="8,茨城県,8227,筑西市";g.MUNI_ARRAY[8228]="8,茨城県,8228,坂東市";g.MUNI_ARRAY[8229]="8,茨城県,8229,稲敷市";g.MUNI_ARRAY[8230]="8,茨城県,8230,かすみがうら市";g.MUNI_ARRAY[8231]="8,茨城県,8231,桜川市";g.MUNI_ARRAY[8232]="8,茨城県,8232,神栖市";g.MUNI_ARRAY[8233]="8,茨城県,8233,行方市";g.MUNI_ARRAY[8234]="8,茨城県,8234,鉾田市";g.MUNI_ARRAY[8235]="8,茨城県,8235,つくばみらい市";g.MUNI_ARRAY[8236]="8,茨城県,8236,小美玉市";g.MUNI_ARRAY[8302]="8,茨城県,8302,茨城町";g.MUNI_ARRAY[8309]="8,茨城県,8309,大洗町";g.MUNI_ARRAY[8310]="8,茨城県,8310,城里町";g.MUNI_ARRAY[8341]="8,茨城県,8341,東海村";g.MUNI_ARRAY[8364]="8,茨城県,8364,大子町";g.MUNI_ARRAY[8442]="8,茨城県,8442,美浦村";g.MUNI_ARRAY[8443]="8,茨城県,8443,阿見町";g.MUNI_ARRAY[8447]="8,茨城県,8447,河内町";g.MUNI_ARRAY[8521]="8,茨城県,8521,八千代町";g.MUNI_ARRAY[8542]="8,茨城県,8542,五霞町";g.MUNI_ARRAY[8546]="8,茨城県,8546,境町";g.MUNI_ARRAY[8564]="8,茨城県,8564,利根町";g.MUNI_ARRAY[9201]="9,栃木県,9201,宇都宮市";g.MUNI_ARRAY[9202]="9,栃木県,9202,足利市";g.MUNI_ARRAY[9203]="9,栃木県,9203,栃木市";g.MUNI_ARRAY[9204]="9,栃木県,9204,佐野市";g.MUNI_ARRAY[9205]="9,栃木県,9205,鹿沼市";g.MUNI_ARRAY[9206]="9,栃木県,9206,日光市";g.MUNI_ARRAY[9208]="9,栃木県,9208,小山市";g.MUNI_ARRAY[9209]="9,栃木県,9209,真岡市";g.MUNI_ARRAY[9210]="9,栃木県,9210,大田原市";g.MUNI_ARRAY[9211]="9,栃木県,9211,矢板市";g.MUNI_ARRAY[9213]="9,栃木県,9213,那須塩原市";g.MUNI_ARRAY[9214]="9,栃木県,9214,さくら市";g.MUNI_ARRAY[9215]="9,栃木県,9215,那須烏山市";g.MUNI_ARRAY[9216]="9,栃木県,9216,下野市";g.MUNI_ARRAY[9301]="9,栃木県,9301,上三川町";g.MUNI_ARRAY[9342]="9,栃木県,9342,益子町";g.MUNI_ARRAY[9343]="9,栃木県,9343,茂木町";g.MUNI_ARRAY[9344]="9,栃木県,9344,市貝町";g.MUNI_ARRAY[9345]="9,栃木県,9345,芳賀町";g.MUNI_ARRAY[9361]="9,栃木県,9361,壬生町";g.MUNI_ARRAY[9364]="9,栃木県,9364,野木町";g.MUNI_ARRAY[9384]="9,栃木県,9384,塩谷町";g.MUNI_ARRAY[9386]="9,栃木県,9386,高根沢町";g.MUNI_ARRAY[9407]="9,栃木県,9407,那須町";g.MUNI_ARRAY[9411]="9,栃木県,9411,那珂川町";g.MUNI_ARRAY[10201]="10,群馬県,10201,前橋市";g.MUNI_ARRAY[10202]="10,群馬県,10202,高崎市";g.MUNI_ARRAY[10203]="10,群馬県,10203,桐生市";g.MUNI_ARRAY[10204]="10,群馬県,10204,伊勢崎市";g.MUNI_ARRAY[10205]="10,群馬県,10205,太田市";g.MUNI_ARRAY[10206]="10,群馬県,10206,沼田市";g.MUNI_ARRAY[10207]="10,群馬県,10207,館林市";g.MUNI_ARRAY[10208]="10,群馬県,10208,渋川市";g.MUNI_ARRAY[10209]="10,群馬県,10209,藤岡市";g.MUNI_ARRAY[10210]="10,群馬県,10210,富岡市";g.MUNI_ARRAY[10211]="10,群馬県,10211,安中市";g.MUNI_ARRAY[10212]="10,群馬県,10212,みどり市";g.MUNI_ARRAY[10344]="10,群馬県,10344,榛東村";g.MUNI_ARRAY[10345]="10,群馬県,10345,吉岡町";g.MUNI_ARRAY[10366]="10,群馬県,10366,上野村";g.MUNI_ARRAY[10367]="10,群馬県,10367,神流町";g.MUNI_ARRAY[10382]="10,群馬県,10382,下仁田町";g.MUNI_ARRAY[10383]="10,群馬県,10383,南牧村";g.MUNI_ARRAY[10384]="10,群馬県,10384,甘楽町";g.MUNI_ARRAY[10421]="10,群馬県,10421,中之条町";g.MUNI_ARRAY[10424]="10,群馬県,10424,長野原町";g.MUNI_ARRAY[10425]="10,群馬県,10425,嬬恋村";g.MUNI_ARRAY[10426]="10,群馬県,10426,草津町";g.MUNI_ARRAY[10428]="10,群馬県,10428,高山村";g.MUNI_ARRAY[10429]="10,群馬県,10429,東吾妻町";g.MUNI_ARRAY[10443]="10,群馬県,10443,片品村";g.MUNI_ARRAY[10444]="10,群馬県,10444,川場村";g.MUNI_ARRAY[10448]="10,群馬県,10448,昭和村";g.MUNI_ARRAY[10449]="10,群馬県,10449,みなかみ町";g.MUNI_ARRAY[10464]="10,群馬県,10464,玉村町";g.MUNI_ARRAY[10521]="10,群馬県,10521,板倉町";g.MUNI_ARRAY[10522]="10,群馬県,10522,明和町";g.MUNI_ARRAY[10523]="10,群馬県,10523,千代田町";g.MUNI_ARRAY[10524]="10,群馬県,10524,大泉町";g.MUNI_ARRAY[10525]="10,群馬県,10525,邑楽町";g.MUNI_ARRAY[11100]="11,埼玉県,11100,さいたま市";g.MUNI_ARRAY[11101]="11,埼玉県,11101,さいたま市　西区";g.MUNI_ARRAY[11102]="11,埼玉県,11102,さいたま市　北区";g.MUNI_ARRAY[11103]="11,埼玉県,11103,さいたま市　大宮区";g.MUNI_ARRAY[11104]="11,埼玉県,11104,さいたま市　見沼区";g.MUNI_ARRAY[11105]="11,埼玉県,11105,さいたま市　中央区";g.MUNI_ARRAY[11106]="11,埼玉県,11106,さいたま市　桜区";g.MUNI_ARRAY[11107]="11,埼玉県,11107,さいたま市　浦和区";g.MUNI_ARRAY[11108]="11,埼玉県,11108,さいたま市　南区";g.MUNI_ARRAY[11109]="11,埼玉県,11109,さいたま市　緑区";g.MUNI_ARRAY[11110]="11,埼玉県,11110,さいたま市　岩槻区";g.MUNI_ARRAY[11201]="11,埼玉県,11201,川越市";g.MUNI_ARRAY[11202]="11,埼玉県,11202,熊谷市";g.MUNI_ARRAY[11203]="11,埼玉県,11203,川口市";g.MUNI_ARRAY[11206]="11,埼玉県,11206,行田市";g.MUNI_ARRAY[11207]="11,埼玉県,11207,秩父市";g.MUNI_ARRAY[11208]="11,埼玉県,11208,所沢市";g.MUNI_ARRAY[11209]="11,埼玉県,11209,飯能市";g.MUNI_ARRAY[11210]="11,埼玉県,11210,加須市";g.MUNI_ARRAY[11211]="11,埼玉県,11211,本庄市";g.MUNI_ARRAY[11212]="11,埼玉県,11212,東松山市";g.MUNI_ARRAY[11214]="11,埼玉県,11214,春日部市";g.MUNI_ARRAY[11215]="11,埼玉県,11215,狭山市";g.MUNI_ARRAY[11216]="11,埼玉県,11216,羽生市";g.MUNI_ARRAY[11217]="11,埼玉県,11217,鴻巣市";g.MUNI_ARRAY[11218]="11,埼玉県,11218,深谷市";g.MUNI_ARRAY[11219]="11,埼玉県,11219,上尾市";g.MUNI_ARRAY[11221]="11,埼玉県,11221,草加市";g.MUNI_ARRAY[11222]="11,埼玉県,11222,越谷市";g.MUNI_ARRAY[11223]="11,埼玉県,11223,蕨市";g.MUNI_ARRAY[11224]="11,埼玉県,11224,戸田市";g.MUNI_ARRAY[11225]="11,埼玉県,11225,入間市";g.MUNI_ARRAY[11227]="11,埼玉県,11227,朝霞市";g.MUNI_ARRAY[11228]="11,埼玉県,11228,志木市";g.MUNI_ARRAY[11229]="11,埼玉県,11229,和光市";g.MUNI_ARRAY[11230]="11,埼玉県,11230,新座市";g.MUNI_ARRAY[11231]="11,埼玉県,11231,桶川市";g.MUNI_ARRAY[11232]="11,埼玉県,11232,久喜市";g.MUNI_ARRAY[11233]="11,埼玉県,11233,北本市";g.MUNI_ARRAY[11234]="11,埼玉県,11234,八潮市";g.MUNI_ARRAY[11235]="11,埼玉県,11235,富士見市";g.MUNI_ARRAY[11237]="11,埼玉県,11237,三郷市";g.MUNI_ARRAY[11238]="11,埼玉県,11238,蓮田市";g.MUNI_ARRAY[11239]="11,埼玉県,11239,坂戸市";g.MUNI_ARRAY[11240]="11,埼玉県,11240,幸手市";g.MUNI_ARRAY[11241]="11,埼玉県,11241,鶴ヶ島市";g.MUNI_ARRAY[11242]="11,埼玉県,11242,日高市";g.MUNI_ARRAY[11243]="11,埼玉県,11243,吉川市";g.MUNI_ARRAY[11245]="11,埼玉県,11245,ふじみ野市";g.MUNI_ARRAY[11301]="11,埼玉県,11301,伊奈町";g.MUNI_ARRAY[11324]="11,埼玉県,11324,三芳町";g.MUNI_ARRAY[11326]="11,埼玉県,11326,毛呂山町";g.MUNI_ARRAY[11327]="11,埼玉県,11327,越生町";g.MUNI_ARRAY[11341]="11,埼玉県,11341,滑川町";g.MUNI_ARRAY[11342]="11,埼玉県,11342,嵐山町";g.MUNI_ARRAY[11343]="11,埼玉県,11343,小川町";g.MUNI_ARRAY[11346]="11,埼玉県,11346,川島町";g.MUNI_ARRAY[11347]="11,埼玉県,11347,吉見町";g.MUNI_ARRAY[11348]="11,埼玉県,11348,鳩山町";g.MUNI_ARRAY[11349]="11,埼玉県,11349,ときがわ町";g.MUNI_ARRAY[11361]="11,埼玉県,11361,横瀬町";g.MUNI_ARRAY[11362]="11,埼玉県,11362,皆野町";g.MUNI_ARRAY[11363]="11,埼玉県,11363,長瀞町";g.MUNI_ARRAY[11365]="11,埼玉県,11365,小鹿野町";g.MUNI_ARRAY[11369]="11,埼玉県,11369,東秩父村";g.MUNI_ARRAY[11381]="11,埼玉県,11381,美里町";g.MUNI_ARRAY[11383]="11,埼玉県,11383,神川町";g.MUNI_ARRAY[11385]="11,埼玉県,11385,上里町";g.MUNI_ARRAY[11408]="11,埼玉県,11408,寄居町";g.MUNI_ARRAY[11442]="11,埼玉県,11442,宮代町";g.MUNI_ARRAY[11246]="11,埼玉県,11246,白岡市";g.MUNI_ARRAY[11464]="11,埼玉県,11464,杉戸町";g.MUNI_ARRAY[11465]="11,埼玉県,11465,松伏町";g.MUNI_ARRAY[12100]="12,千葉県,12100,千葉市";g.MUNI_ARRAY[12101]="12,千葉県,12101,千葉市　中央区";g.MUNI_ARRAY[12102]="12,千葉県,12102,千葉市　花見川区";g.MUNI_ARRAY[12103]="12,千葉県,12103,千葉市　稲毛区";g.MUNI_ARRAY[12104]="12,千葉県,12104,千葉市　若葉区";g.MUNI_ARRAY[12105]="12,千葉県,12105,千葉市　緑区";g.MUNI_ARRAY[12106]="12,千葉県,12106,千葉市　美浜区";g.MUNI_ARRAY[12202]="12,千葉県,12202,銚子市";g.MUNI_ARRAY[12203]="12,千葉県,12203,市川市";g.MUNI_ARRAY[12204]="12,千葉県,12204,船橋市";g.MUNI_ARRAY[12205]="12,千葉県,12205,館山市";g.MUNI_ARRAY[12206]="12,千葉県,12206,木更津市";g.MUNI_ARRAY[12207]="12,千葉県,12207,松戸市";g.MUNI_ARRAY[12208]="12,千葉県,12208,野田市";g.MUNI_ARRAY[12210]="12,千葉県,12210,茂原市";g.MUNI_ARRAY[12211]="12,千葉県,12211,成田市";g.MUNI_ARRAY[12212]="12,千葉県,12212,佐倉市";g.MUNI_ARRAY[12213]="12,千葉県,12213,東金市";g.MUNI_ARRAY[12215]="12,千葉県,12215,旭市";g.MUNI_ARRAY[12216]="12,千葉県,12216,習志野市";g.MUNI_ARRAY[12217]="12,千葉県,12217,柏市";g.MUNI_ARRAY[12218]="12,千葉県,12218,勝浦市";g.MUNI_ARRAY[12219]="12,千葉県,12219,市原市";g.MUNI_ARRAY[12220]="12,千葉県,12220,流山市";g.MUNI_ARRAY[12221]="12,千葉県,12221,八千代市";g.MUNI_ARRAY[12222]="12,千葉県,12222,我孫子市";g.MUNI_ARRAY[12223]="12,千葉県,12223,鴨川市";g.MUNI_ARRAY[12224]="12,千葉県,12224,鎌ケ谷市";g.MUNI_ARRAY[12225]="12,千葉県,12225,君津市";g.MUNI_ARRAY[12226]="12,千葉県,12226,富津市";g.MUNI_ARRAY[12227]="12,千葉県,12227,浦安市";g.MUNI_ARRAY[12228]="12,千葉県,12228,四街道市";g.MUNI_ARRAY[12229]="12,千葉県,12229,袖ケ浦市";g.MUNI_ARRAY[12230]="12,千葉県,12230,八街市";g.MUNI_ARRAY[12231]="12,千葉県,12231,印西市";g.MUNI_ARRAY[12232]="12,千葉県,12232,白井市";g.MUNI_ARRAY[12233]="12,千葉県,12233,富里市";g.MUNI_ARRAY[12234]="12,千葉県,12234,南房総市";g.MUNI_ARRAY[12235]="12,千葉県,12235,匝瑳市";g.MUNI_ARRAY[12236]="12,千葉県,12236,香取市";g.MUNI_ARRAY[12237]="12,千葉県,12237,山武市";g.MUNI_ARRAY[12238]="12,千葉県,12238,いすみ市";g.MUNI_ARRAY[12322]="12,千葉県,12322,酒々井町";g.MUNI_ARRAY[12329]="12,千葉県,12329,栄町";g.MUNI_ARRAY[12342]="12,千葉県,12342,神崎町";g.MUNI_ARRAY[12347]="12,千葉県,12347,多古町";g.MUNI_ARRAY[12349]="12,千葉県,12349,東庄町";g.MUNI_ARRAY[12239]="12,千葉県,12239,大網白里市";g.MUNI_ARRAY[12403]="12,千葉県,12403,九十九里町";g.MUNI_ARRAY[12409]="12,千葉県,12409,芝山町";g.MUNI_ARRAY[12410]="12,千葉県,12410,横芝光町";g.MUNI_ARRAY[12421]="12,千葉県,12421,一宮町";g.MUNI_ARRAY[12422]="12,千葉県,12422,睦沢町";g.MUNI_ARRAY[12423]="12,千葉県,12423,長生村";g.MUNI_ARRAY[12424]="12,千葉県,12424,白子町";g.MUNI_ARRAY[12426]="12,千葉県,12426,長柄町";g.MUNI_ARRAY[12427]="12,千葉県,12427,長南町";g.MUNI_ARRAY[12441]="12,千葉県,12441,大多喜町";g.MUNI_ARRAY[12443]="12,千葉県,12443,御宿町";g.MUNI_ARRAY[12463]="12,千葉県,12463,鋸南町";g.MUNI_ARRAY[13101]="13,東京都,13101,千代田区";g.MUNI_ARRAY[13102]="13,東京都,13102,中央区";g.MUNI_ARRAY[13103]="13,東京都,13103,港区";g.MUNI_ARRAY[13104]="13,東京都,13104,新宿区";g.MUNI_ARRAY[13105]="13,東京都,13105,文京区";g.MUNI_ARRAY[13106]="13,東京都,13106,台東区";g.MUNI_ARRAY[13107]="13,東京都,13107,墨田区";g.MUNI_ARRAY[13108]="13,東京都,13108,江東区";g.MUNI_ARRAY[13109]="13,東京都,13109,品川区";g.MUNI_ARRAY[13110]="13,東京都,13110,目黒区";g.MUNI_ARRAY[13111]="13,東京都,13111,大田区";g.MUNI_ARRAY[13112]="13,東京都,13112,世田谷区";g.MUNI_ARRAY[13113]="13,東京都,13113,渋谷区";g.MUNI_ARRAY[13114]="13,東京都,13114,中野区";g.MUNI_ARRAY[13115]="13,東京都,13115,杉並区";g.MUNI_ARRAY[13116]="13,東京都,13116,豊島区";g.MUNI_ARRAY[13117]="13,東京都,13117,北区";g.MUNI_ARRAY[13118]="13,東京都,13118,荒川区";g.MUNI_ARRAY[13119]="13,東京都,13119,板橋区";g.MUNI_ARRAY[13120]="13,東京都,13120,練馬区";g.MUNI_ARRAY[13121]="13,東京都,13121,足立区";g.MUNI_ARRAY[13122]="13,東京都,13122,葛飾区";g.MUNI_ARRAY[13123]="13,東京都,13123,江戸川区";g.MUNI_ARRAY[13201]="13,東京都,13201,八王子市";g.MUNI_ARRAY[13202]="13,東京都,13202,立川市";g.MUNI_ARRAY[13203]="13,東京都,13203,武蔵野市";g.MUNI_ARRAY[13204]="13,東京都,13204,三鷹市";g.MUNI_ARRAY[13205]="13,東京都,13205,青梅市";g.MUNI_ARRAY[13206]="13,東京都,13206,府中市";g.MUNI_ARRAY[13207]="13,東京都,13207,昭島市";g.MUNI_ARRAY[13208]="13,東京都,13208,調布市";g.MUNI_ARRAY[13209]="13,東京都,13209,町田市";g.MUNI_ARRAY[13210]="13,東京都,13210,小金井市";g.MUNI_ARRAY[13211]="13,東京都,13211,小平市";g.MUNI_ARRAY[13212]="13,東京都,13212,日野市";g.MUNI_ARRAY[13213]="13,東京都,13213,東村山市";g.MUNI_ARRAY[13214]="13,東京都,13214,国分寺市";g.MUNI_ARRAY[13215]="13,東京都,13215,国立市";g.MUNI_ARRAY[13218]="13,東京都,13218,福生市";g.MUNI_ARRAY[13219]="13,東京都,13219,狛江市";g.MUNI_ARRAY[13220]="13,東京都,13220,東大和市";g.MUNI_ARRAY[13221]="13,東京都,13221,清瀬市";g.MUNI_ARRAY[13222]="13,東京都,13222,東久留米市";g.MUNI_ARRAY[13223]="13,東京都,13223,武蔵村山市";g.MUNI_ARRAY[13224]="13,東京都,13224,多摩市";g.MUNI_ARRAY[13225]="13,東京都,13225,稲城市";g.MUNI_ARRAY[13227]="13,東京都,13227,羽村市";g.MUNI_ARRAY[13228]="13,東京都,13228,あきる野市";g.MUNI_ARRAY[13229]="13,東京都,13229,西東京市";g.MUNI_ARRAY[13303]="13,東京都,13303,瑞穂町";g.MUNI_ARRAY[13305]="13,東京都,13305,日の出町";g.MUNI_ARRAY[13307]="13,東京都,13307,檜原村";g.MUNI_ARRAY[13308]="13,東京都,13308,奥多摩町";g.MUNI_ARRAY[13361]="13,東京都,13361,大島町";g.MUNI_ARRAY[13362]="13,東京都,13362,利島村";g.MUNI_ARRAY[13363]="13,東京都,13363,新島村";g.MUNI_ARRAY[13364]="13,東京都,13364,神津島村";g.MUNI_ARRAY[13381]="13,東京都,13381,三宅村";g.MUNI_ARRAY[13382]="13,東京都,13382,御蔵島村";g.MUNI_ARRAY[13401]="13,東京都,13401,八丈町";g.MUNI_ARRAY[13402]="13,東京都,13402,青ヶ島村";g.MUNI_ARRAY[13421]="13,東京都,13421,小笠原村";g.MUNI_ARRAY[14100]="14,神奈川県,14100,横浜市";g.MUNI_ARRAY[14101]="14,神奈川県,14101,横浜市　鶴見区";g.MUNI_ARRAY[14102]="14,神奈川県,14102,横浜市　神奈川区";g.MUNI_ARRAY[14103]="14,神奈川県,14103,横浜市　西区";g.MUNI_ARRAY[14104]="14,神奈川県,14104,横浜市　中区";g.MUNI_ARRAY[14105]="14,神奈川県,14105,横浜市　南区";g.MUNI_ARRAY[14106]="14,神奈川県,14106,横浜市　保土ケ谷区";g.MUNI_ARRAY[14107]="14,神奈川県,14107,横浜市　磯子区";g.MUNI_ARRAY[14108]="14,神奈川県,14108,横浜市　金沢区";g.MUNI_ARRAY[14109]="14,神奈川県,14109,横浜市　港北区";g.MUNI_ARRAY[14110]="14,神奈川県,14110,横浜市　戸塚区";g.MUNI_ARRAY[14111]="14,神奈川県,14111,横浜市　港南区";g.MUNI_ARRAY[14112]="14,神奈川県,14112,横浜市　旭区";g.MUNI_ARRAY[14113]="14,神奈川県,14113,横浜市　緑区";g.MUNI_ARRAY[14114]="14,神奈川県,14114,横浜市　瀬谷区";g.MUNI_ARRAY[14115]="14,神奈川県,14115,横浜市　栄区";g.MUNI_ARRAY[14116]="14,神奈川県,14116,横浜市　泉区";g.MUNI_ARRAY[14117]="14,神奈川県,14117,横浜市　青葉区";g.MUNI_ARRAY[14118]="14,神奈川県,14118,横浜市　都筑区";g.MUNI_ARRAY[14130]="14,神奈川県,14130,川崎市";g.MUNI_ARRAY[14131]="14,神奈川県,14131,川崎市　川崎区";g.MUNI_ARRAY[14132]="14,神奈川県,14132,川崎市　幸区";g.MUNI_ARRAY[14133]="14,神奈川県,14133,川崎市　中原区";g.MUNI_ARRAY[14134]="14,神奈川県,14134,川崎市　高津区";g.MUNI_ARRAY[14135]="14,神奈川県,14135,川崎市　多摩区";g.MUNI_ARRAY[14136]="14,神奈川県,14136,川崎市　宮前区";g.MUNI_ARRAY[14137]="14,神奈川県,14137,川崎市　麻生区";g.MUNI_ARRAY[14150]="14,神奈川県,14150,相模原市";g.MUNI_ARRAY[14151]="14,神奈川県,14151,相模原市　緑区";g.MUNI_ARRAY[14152]="14,神奈川県,14152,相模原市　中央区";g.MUNI_ARRAY[14153]="14,神奈川県,14153,相模原市　南区";g.MUNI_ARRAY[14201]="14,神奈川県,14201,横須賀市";g.MUNI_ARRAY[14203]="14,神奈川県,14203,平塚市";g.MUNI_ARRAY[14204]="14,神奈川県,14204,鎌倉市";g.MUNI_ARRAY[14205]="14,神奈川県,14205,藤沢市";g.MUNI_ARRAY[14206]="14,神奈川県,14206,小田原市";g.MUNI_ARRAY[14207]="14,神奈川県,14207,茅ヶ崎市";g.MUNI_ARRAY[14208]="14,神奈川県,14208,逗子市";g.MUNI_ARRAY[14210]="14,神奈川県,14210,三浦市";g.MUNI_ARRAY[14211]="14,神奈川県,14211,秦野市";g.MUNI_ARRAY[14212]="14,神奈川県,14212,厚木市";g.MUNI_ARRAY[14213]="14,神奈川県,14213,大和市";g.MUNI_ARRAY[14214]="14,神奈川県,14214,伊勢原市";g.MUNI_ARRAY[14215]="14,神奈川県,14215,海老名市";g.MUNI_ARRAY[14216]="14,神奈川県,14216,座間市";g.MUNI_ARRAY[14217]="14,神奈川県,14217,南足柄市";g.MUNI_ARRAY[14218]="14,神奈川県,14218,綾瀬市";g.MUNI_ARRAY[14301]="14,神奈川県,14301,葉山町";g.MUNI_ARRAY[14321]="14,神奈川県,14321,寒川町";g.MUNI_ARRAY[14341]="14,神奈川県,14341,大磯町";g.MUNI_ARRAY[14342]="14,神奈川県,14342,二宮町";g.MUNI_ARRAY[14361]="14,神奈川県,14361,中井町";g.MUNI_ARRAY[14362]="14,神奈川県,14362,大井町";g.MUNI_ARRAY[14363]="14,神奈川県,14363,松田町";g.MUNI_ARRAY[14364]="14,神奈川県,14364,山北町";g.MUNI_ARRAY[14366]="14,神奈川県,14366,開成町";g.MUNI_ARRAY[14382]="14,神奈川県,14382,箱根町";g.MUNI_ARRAY[14383]="14,神奈川県,14383,真鶴町";g.MUNI_ARRAY[14384]="14,神奈川県,14384,湯河原町";g.MUNI_ARRAY[14401]="14,神奈川県,14401,愛川町";g.MUNI_ARRAY[14402]="14,神奈川県,14402,清川村";g.MUNI_ARRAY[15100]="15,新潟県,15100,新潟市";g.MUNI_ARRAY[15101]="15,新潟県,15101,新潟市　北区";g.MUNI_ARRAY[15102]="15,新潟県,15102,新潟市　東区";g.MUNI_ARRAY[15103]="15,新潟県,15103,新潟市　中央区";g.MUNI_ARRAY[15104]="15,新潟県,15104,新潟市　江南区";g.MUNI_ARRAY[15105]="15,新潟県,15105,新潟市　秋葉区";g.MUNI_ARRAY[15106]="15,新潟県,15106,新潟市　南区";g.MUNI_ARRAY[15107]="15,新潟県,15107,新潟市　西区";g.MUNI_ARRAY[15108]="15,新潟県,15108,新潟市　西蒲区";g.MUNI_ARRAY[15202]="15,新潟県,15202,長岡市";g.MUNI_ARRAY[15204]="15,新潟県,15204,三条市";g.MUNI_ARRAY[15205]="15,新潟県,15205,柏崎市";g.MUNI_ARRAY[15206]="15,新潟県,15206,新発田市";g.MUNI_ARRAY[15208]="15,新潟県,15208,小千谷市";g.MUNI_ARRAY[15209]="15,新潟県,15209,加茂市";g.MUNI_ARRAY[15210]="15,新潟県,15210,十日町市";g.MUNI_ARRAY[15211]="15,新潟県,15211,見附市";g.MUNI_ARRAY[15212]="15,新潟県,15212,村上市";g.MUNI_ARRAY[15213]="15,新潟県,15213,燕市";g.MUNI_ARRAY[15216]="15,新潟県,15216,糸魚川市";g.MUNI_ARRAY[15217]="15,新潟県,15217,妙高市";g.MUNI_ARRAY[15218]="15,新潟県,15218,五泉市";g.MUNI_ARRAY[15222]="15,新潟県,15222,上越市";g.MUNI_ARRAY[15223]="15,新潟県,15223,阿賀野市";g.MUNI_ARRAY[15224]="15,新潟県,15224,佐渡市";g.MUNI_ARRAY[15225]="15,新潟県,15225,魚沼市";g.MUNI_ARRAY[15226]="15,新潟県,15226,南魚沼市";g.MUNI_ARRAY[15227]="15,新潟県,15227,胎内市";g.MUNI_ARRAY[15307]="15,新潟県,15307,聖籠町";g.MUNI_ARRAY[15342]="15,新潟県,15342,弥彦村";g.MUNI_ARRAY[15361]="15,新潟県,15361,田上町";g.MUNI_ARRAY[15385]="15,新潟県,15385,阿賀町";g.MUNI_ARRAY[15405]="15,新潟県,15405,出雲崎町";g.MUNI_ARRAY[15461]="15,新潟県,15461,湯沢町";g.MUNI_ARRAY[15482]="15,新潟県,15482,津南町";g.MUNI_ARRAY[15504]="15,新潟県,15504,刈羽村";g.MUNI_ARRAY[15581]="15,新潟県,15581,関川村";g.MUNI_ARRAY[15586]="15,新潟県,15586,粟島浦村";g.MUNI_ARRAY[16201]="16,富山県,16201,富山市";g.MUNI_ARRAY[16202]="16,富山県,16202,高岡市";g.MUNI_ARRAY[16204]="16,富山県,16204,魚津市";g.MUNI_ARRAY[16205]="16,富山県,16205,氷見市";g.MUNI_ARRAY[16206]="16,富山県,16206,滑川市";g.MUNI_ARRAY[16207]="16,富山県,16207,黒部市";g.MUNI_ARRAY[16208]="16,富山県,16208,砺波市";g.MUNI_ARRAY[16209]="16,富山県,16209,小矢部市";g.MUNI_ARRAY[16210]="16,富山県,16210,南砺市";g.MUNI_ARRAY[16211]="16,富山県,16211,射水市";g.MUNI_ARRAY[16321]="16,富山県,16321,舟橋村";g.MUNI_ARRAY[16322]="16,富山県,16322,上市町";g.MUNI_ARRAY[16323]="16,富山県,16323,立山町";g.MUNI_ARRAY[16342]="16,富山県,16342,入善町";g.MUNI_ARRAY[16343]="16,富山県,16343,朝日町";g.MUNI_ARRAY[17201]="17,石川県,17201,金沢市";g.MUNI_ARRAY[17202]="17,石川県,17202,七尾市";g.MUNI_ARRAY[17203]="17,石川県,17203,小松市";g.MUNI_ARRAY[17204]="17,石川県,17204,輪島市";g.MUNI_ARRAY[17205]="17,石川県,17205,珠洲市";g.MUNI_ARRAY[17206]="17,石川県,17206,加賀市";g.MUNI_ARRAY[17207]="17,石川県,17207,羽咋市";g.MUNI_ARRAY[17209]="17,石川県,17209,かほく市";g.MUNI_ARRAY[17210]="17,石川県,17210,白山市";g.MUNI_ARRAY[17211]="17,石川県,17211,能美市";g.MUNI_ARRAY[17212]="17,石川県,17212,野々市市";g.MUNI_ARRAY[17324]="17,石川県,17324,川北町";g.MUNI_ARRAY[17361]="17,石川県,17361,津幡町";g.MUNI_ARRAY[17365]="17,石川県,17365,内灘町";g.MUNI_ARRAY[17384]="17,石川県,17384,志賀町";g.MUNI_ARRAY[17386]="17,石川県,17386,宝達志水町";g.MUNI_ARRAY[17407]="17,石川県,17407,中能登町";g.MUNI_ARRAY[17461]="17,石川県,17461,穴水町";g.MUNI_ARRAY[17463]="17,石川県,17463,能登町";g.MUNI_ARRAY[18201]="18,福井県,18201,福井市";g.MUNI_ARRAY[18202]="18,福井県,18202,敦賀市";g.MUNI_ARRAY[18204]="18,福井県,18204,小浜市";g.MUNI_ARRAY[18205]="18,福井県,18205,大野市";g.MUNI_ARRAY[18206]="18,福井県,18206,勝山市";g.MUNI_ARRAY[18207]="18,福井県,18207,鯖江市";g.MUNI_ARRAY[18208]="18,福井県,18208,あわら市";g.MUNI_ARRAY[18209]="18,福井県,18209,越前市";g.MUNI_ARRAY[18210]="18,福井県,18210,坂井市";g.MUNI_ARRAY[18322]="18,福井県,18322,永平寺町";g.MUNI_ARRAY[18382]="18,福井県,18382,池田町";g.MUNI_ARRAY[18404]="18,福井県,18404,南越前町";g.MUNI_ARRAY[18423]="18,福井県,18423,越前町";g.MUNI_ARRAY[18442]="18,福井県,18442,美浜町";g.MUNI_ARRAY[18481]="18,福井県,18481,高浜町";g.MUNI_ARRAY[18483]="18,福井県,18483,おおい町";g.MUNI_ARRAY[18501]="18,福井県,18501,若狭町";g.MUNI_ARRAY[19201]="19,山梨県,19201,甲府市";g.MUNI_ARRAY[19202]="19,山梨県,19202,富士吉田市";g.MUNI_ARRAY[19204]="19,山梨県,19204,都留市";g.MUNI_ARRAY[19205]="19,山梨県,19205,山梨市";g.MUNI_ARRAY[19206]="19,山梨県,19206,大月市";g.MUNI_ARRAY[19207]="19,山梨県,19207,韮崎市";g.MUNI_ARRAY[19208]="19,山梨県,19208,南アルプス市";g.MUNI_ARRAY[19209]="19,山梨県,19209,北杜市";g.MUNI_ARRAY[19210]="19,山梨県,19210,甲斐市";g.MUNI_ARRAY[19211]="19,山梨県,19211,笛吹市";g.MUNI_ARRAY[19212]="19,山梨県,19212,上野原市";g.MUNI_ARRAY[19213]="19,山梨県,19213,甲州市";g.MUNI_ARRAY[19214]="19,山梨県,19214,中央市";g.MUNI_ARRAY[19346]="19,山梨県,19346,市川三郷町";g.MUNI_ARRAY[19364]="19,山梨県,19364,早川町";g.MUNI_ARRAY[19365]="19,山梨県,19365,身延町";g.MUNI_ARRAY[19366]="19,山梨県,19366,南部町";g.MUNI_ARRAY[19368]="19,山梨県,19368,富士川町";g.MUNI_ARRAY[19384]="19,山梨県,19384,昭和町";g.MUNI_ARRAY[19422]="19,山梨県,19422,道志村";g.MUNI_ARRAY[19423]="19,山梨県,19423,西桂町";g.MUNI_ARRAY[19424]="19,山梨県,19424,忍野村";g.MUNI_ARRAY[19425]="19,山梨県,19425,山中湖村";g.MUNI_ARRAY[19429]="19,山梨県,19429,鳴沢村";g.MUNI_ARRAY[19430]="19,山梨県,19430,富士河口湖町";g.MUNI_ARRAY[19442]="19,山梨県,19442,小菅村";g.MUNI_ARRAY[19443]="19,山梨県,19443,丹波山村";g.MUNI_ARRAY[20201]="20,長野県,20201,長野市";g.MUNI_ARRAY[20202]="20,長野県,20202,松本市";g.MUNI_ARRAY[20203]="20,長野県,20203,上田市";g.MUNI_ARRAY[20204]="20,長野県,20204,岡谷市";g.MUNI_ARRAY[20205]="20,長野県,20205,飯田市";g.MUNI_ARRAY[20206]="20,長野県,20206,諏訪市";g.MUNI_ARRAY[20207]="20,長野県,20207,須坂市";g.MUNI_ARRAY[20208]="20,長野県,20208,小諸市";g.MUNI_ARRAY[20209]="20,長野県,20209,伊那市";g.MUNI_ARRAY[20210]="20,長野県,20210,駒ヶ根市";g.MUNI_ARRAY[20211]="20,長野県,20211,中野市";g.MUNI_ARRAY[20212]="20,長野県,20212,大町市";g.MUNI_ARRAY[20213]="20,長野県,20213,飯山市";g.MUNI_ARRAY[20214]="20,長野県,20214,茅野市";g.MUNI_ARRAY[20215]="20,長野県,20215,塩尻市";g.MUNI_ARRAY[20217]="20,長野県,20217,佐久市";g.MUNI_ARRAY[20218]="20,長野県,20218,千曲市";g.MUNI_ARRAY[20219]="20,長野県,20219,東御市";g.MUNI_ARRAY[20220]="20,長野県,20220,安曇野市";g.MUNI_ARRAY[20303]="20,長野県,20303,小海町";g.MUNI_ARRAY[20304]="20,長野県,20304,川上村";g.MUNI_ARRAY[20305]="20,長野県,20305,南牧村";g.MUNI_ARRAY[20306]="20,長野県,20306,南相木村";g.MUNI_ARRAY[20307]="20,長野県,20307,北相木村";g.MUNI_ARRAY[20309]="20,長野県,20309,佐久穂町";g.MUNI_ARRAY[20321]="20,長野県,20321,軽井沢町";g.MUNI_ARRAY[20323]="20,長野県,20323,御代田町";g.MUNI_ARRAY[20324]="20,長野県,20324,立科町";g.MUNI_ARRAY[20349]="20,長野県,20349,青木村";g.MUNI_ARRAY[20350]="20,長野県,20350,長和町";g.MUNI_ARRAY[20361]="20,長野県,20361,下諏訪町";g.MUNI_ARRAY[20362]="20,長野県,20362,富士見町";g.MUNI_ARRAY[20363]="20,長野県,20363,原村";g.MUNI_ARRAY[20382]="20,長野県,20382,辰野町";g.MUNI_ARRAY[20383]="20,長野県,20383,箕輪町";g.MUNI_ARRAY[20384]="20,長野県,20384,飯島町";g.MUNI_ARRAY[20385]="20,長野県,20385,南箕輪村";g.MUNI_ARRAY[20386]="20,長野県,20386,中川村";g.MUNI_ARRAY[20388]="20,長野県,20388,宮田村";g.MUNI_ARRAY[20402]="20,長野県,20402,松川町";g.MUNI_ARRAY[20403]="20,長野県,20403,高森町";g.MUNI_ARRAY[20404]="20,長野県,20404,阿南町";g.MUNI_ARRAY[20407]="20,長野県,20407,阿智村";g.MUNI_ARRAY[20409]="20,長野県,20409,平谷村";g.MUNI_ARRAY[20410]="20,長野県,20410,根羽村";g.MUNI_ARRAY[20411]="20,長野県,20411,下條村";g.MUNI_ARRAY[20412]="20,長野県,20412,売木村";g.MUNI_ARRAY[20413]="20,長野県,20413,天龍村";g.MUNI_ARRAY[20414]="20,長野県,20414,泰阜村";g.MUNI_ARRAY[20415]="20,長野県,20415,喬木村";g.MUNI_ARRAY[20416]="20,長野県,20416,豊丘村";g.MUNI_ARRAY[20417]="20,長野県,20417,大鹿村";g.MUNI_ARRAY[20422]="20,長野県,20422,上松町";g.MUNI_ARRAY[20423]="20,長野県,20423,南木曽町";g.MUNI_ARRAY[20425]="20,長野県,20425,木祖村";g.MUNI_ARRAY[20429]="20,長野県,20429,王滝村";g.MUNI_ARRAY[20430]="20,長野県,20430,大桑村";g.MUNI_ARRAY[20432]="20,長野県,20432,木曽町";g.MUNI_ARRAY[20446]="20,長野県,20446,麻績村";g.MUNI_ARRAY[20448]="20,長野県,20448,生坂村";g.MUNI_ARRAY[20450]="20,長野県,20450,山形村";g.MUNI_ARRAY[20451]="20,長野県,20451,朝日村";g.MUNI_ARRAY[20452]="20,長野県,20452,筑北村";g.MUNI_ARRAY[20481]="20,長野県,20481,池田町";g.MUNI_ARRAY[20482]="20,長野県,20482,松川村";g.MUNI_ARRAY[20485]="20,長野県,20485,白馬村";g.MUNI_ARRAY[20486]="20,長野県,20486,小谷村";g.MUNI_ARRAY[20521]="20,長野県,20521,坂城町";g.MUNI_ARRAY[20541]="20,長野県,20541,小布施町";g.MUNI_ARRAY[20543]="20,長野県,20543,高山村";g.MUNI_ARRAY[20561]="20,長野県,20561,山ノ内町";g.MUNI_ARRAY[20562]="20,長野県,20562,木島平村";g.MUNI_ARRAY[20563]="20,長野県,20563,野沢温泉村";g.MUNI_ARRAY[20583]="20,長野県,20583,信濃町";g.MUNI_ARRAY[20588]="20,長野県,20588,小川村";g.MUNI_ARRAY[20590]="20,長野県,20590,飯綱町";g.MUNI_ARRAY[20602]="20,長野県,20602,栄村";g.MUNI_ARRAY[21201]="21,岐阜県,21201,岐阜市";g.MUNI_ARRAY[21202]="21,岐阜県,21202,大垣市";g.MUNI_ARRAY[21203]="21,岐阜県,21203,高山市";g.MUNI_ARRAY[21204]="21,岐阜県,21204,多治見市";g.MUNI_ARRAY[21205]="21,岐阜県,21205,関市";g.MUNI_ARRAY[21206]="21,岐阜県,21206,中津川市";g.MUNI_ARRAY[21207]="21,岐阜県,21207,美濃市";g.MUNI_ARRAY[21208]="21,岐阜県,21208,瑞浪市";g.MUNI_ARRAY[21209]="21,岐阜県,21209,羽島市";g.MUNI_ARRAY[21210]="21,岐阜県,21210,恵那市";g.MUNI_ARRAY[21211]="21,岐阜県,21211,美濃加茂市";g.MUNI_ARRAY[21212]="21,岐阜県,21212,土岐市";g.MUNI_ARRAY[21213]="21,岐阜県,21213,各務原市";g.MUNI_ARRAY[21214]="21,岐阜県,21214,可児市";g.MUNI_ARRAY[21215]="21,岐阜県,21215,山県市";g.MUNI_ARRAY[21216]="21,岐阜県,21216,瑞穂市";g.MUNI_ARRAY[21217]="21,岐阜県,21217,飛騨市";g.MUNI_ARRAY[21218]="21,岐阜県,21218,本巣市";g.MUNI_ARRAY[21219]="21,岐阜県,21219,郡上市";g.MUNI_ARRAY[21220]="21,岐阜県,21220,下呂市";g.MUNI_ARRAY[21221]="21,岐阜県,21221,海津市";g.MUNI_ARRAY[21302]="21,岐阜県,21302,岐南町";g.MUNI_ARRAY[21303]="21,岐阜県,21303,笠松町";g.MUNI_ARRAY[21341]="21,岐阜県,21341,養老町";g.MUNI_ARRAY[21361]="21,岐阜県,21361,垂井町";g.MUNI_ARRAY[21362]="21,岐阜県,21362,関ケ原町";g.MUNI_ARRAY[21381]="21,岐阜県,21381,神戸町";g.MUNI_ARRAY[21382]="21,岐阜県,21382,輪之内町";g.MUNI_ARRAY[21383]="21,岐阜県,21383,安八町";g.MUNI_ARRAY[21401]="21,岐阜県,21401,揖斐川町";g.MUNI_ARRAY[21403]="21,岐阜県,21403,大野町";g.MUNI_ARRAY[21404]="21,岐阜県,21404,池田町";g.MUNI_ARRAY[21421]="21,岐阜県,21421,北方町";g.MUNI_ARRAY[21501]="21,岐阜県,21501,坂祝町";g.MUNI_ARRAY[21502]="21,岐阜県,21502,富加町";g.MUNI_ARRAY[21503]="21,岐阜県,21503,川辺町";g.MUNI_ARRAY[21504]="21,岐阜県,21504,七宗町";g.MUNI_ARRAY[21505]="21,岐阜県,21505,八百津町";g.MUNI_ARRAY[21506]="21,岐阜県,21506,白川町";g.MUNI_ARRAY[21507]="21,岐阜県,21507,東白川村";g.MUNI_ARRAY[21521]="21,岐阜県,21521,御嵩町";g.MUNI_ARRAY[21604]="21,岐阜県,21604,白川村";g.MUNI_ARRAY[22100]="22,静岡県,22100,静岡市";g.MUNI_ARRAY[22101]="22,静岡県,22101,静岡市　葵区";g.MUNI_ARRAY[22102]="22,静岡県,22102,静岡市　駿河区";g.MUNI_ARRAY[22103]="22,静岡県,22103,静岡市　清水区";g.MUNI_ARRAY[22130]="22,静岡県,22130,浜松市";g.MUNI_ARRAY[22138]="22,静岡県,22138,浜松市　中央区";g.MUNI_ARRAY[22139]="22,静岡県,22139,浜松市　浜名区";g.MUNI_ARRAY[22140]="22,静岡県,22140,浜松市　天竜区";g.MUNI_ARRAY[22203]="22,静岡県,22203,沼津市";g.MUNI_ARRAY[22205]="22,静岡県,22205,熱海市";g.MUNI_ARRAY[22206]="22,静岡県,22206,三島市";g.MUNI_ARRAY[22207]="22,静岡県,22207,富士宮市";g.MUNI_ARRAY[22208]="22,静岡県,22208,伊東市";g.MUNI_ARRAY[22209]="22,静岡県,22209,島田市";g.MUNI_ARRAY[22210]="22,静岡県,22210,富士市";g.MUNI_ARRAY[22211]="22,静岡県,22211,磐田市";g.MUNI_ARRAY[22212]="22,静岡県,22212,焼津市";g.MUNI_ARRAY[22213]="22,静岡県,22213,掛川市";g.MUNI_ARRAY[22214]="22,静岡県,22214,藤枝市";g.MUNI_ARRAY[22215]="22,静岡県,22215,御殿場市";g.MUNI_ARRAY[22216]="22,静岡県,22216,袋井市";g.MUNI_ARRAY[22219]="22,静岡県,22219,下田市";g.MUNI_ARRAY[22220]="22,静岡県,22220,裾野市";g.MUNI_ARRAY[22221]="22,静岡県,22221,湖西市";g.MUNI_ARRAY[22222]="22,静岡県,22222,伊豆市";g.MUNI_ARRAY[22223]="22,静岡県,22223,御前崎市";g.MUNI_ARRAY[22224]="22,静岡県,22224,菊川市";g.MUNI_ARRAY[22225]="22,静岡県,22225,伊豆の国市";g.MUNI_ARRAY[22226]="22,静岡県,22226,牧之原市";g.MUNI_ARRAY[22301]="22,静岡県,22301,東伊豆町";g.MUNI_ARRAY[22302]="22,静岡県,22302,河津町";g.MUNI_ARRAY[22304]="22,静岡県,22304,南伊豆町";g.MUNI_ARRAY[22305]="22,静岡県,22305,松崎町";g.MUNI_ARRAY[22306]="22,静岡県,22306,西伊豆町";g.MUNI_ARRAY[22325]="22,静岡県,22325,函南町";g.MUNI_ARRAY[22341]="22,静岡県,22341,清水町";g.MUNI_ARRAY[22342]="22,静岡県,22342,長泉町";g.MUNI_ARRAY[22344]="22,静岡県,22344,小山町";g.MUNI_ARRAY[22424]="22,静岡県,22424,吉田町";g.MUNI_ARRAY[22429]="22,静岡県,22429,川根本町";g.MUNI_ARRAY[22461]="22,静岡県,22461,森町";g.MUNI_ARRAY[23100]="23,愛知県,23100,名古屋市";g.MUNI_ARRAY[23101]="23,愛知県,23101,名古屋市　千種区";g.MUNI_ARRAY[23102]="23,愛知県,23102,名古屋市　東区";g.MUNI_ARRAY[23103]="23,愛知県,23103,名古屋市　北区";g.MUNI_ARRAY[23104]="23,愛知県,23104,名古屋市　西区";g.MUNI_ARRAY[23105]="23,愛知県,23105,名古屋市　中村区";g.MUNI_ARRAY[23106]="23,愛知県,23106,名古屋市　中区";g.MUNI_ARRAY[23107]="23,愛知県,23107,名古屋市　昭和区";g.MUNI_ARRAY[23108]="23,愛知県,23108,名古屋市　瑞穂区";g.MUNI_ARRAY[23109]="23,愛知県,23109,名古屋市　熱田区";g.MUNI_ARRAY[23110]="23,愛知県,23110,名古屋市　中川区";g.MUNI_ARRAY[23111]="23,愛知県,23111,名古屋市　港区";g.MUNI_ARRAY[23112]="23,愛知県,23112,名古屋市　南区";g.MUNI_ARRAY[23113]="23,愛知県,23113,名古屋市　守山区";g.MUNI_ARRAY[23114]="23,愛知県,23114,名古屋市　緑区";g.MUNI_ARRAY[23115]="23,愛知県,23115,名古屋市　名東区";g.MUNI_ARRAY[23116]="23,愛知県,23116,名古屋市　天白区";g.MUNI_ARRAY[23201]="23,愛知県,23201,豊橋市";g.MUNI_ARRAY[23202]="23,愛知県,23202,岡崎市";g.MUNI_ARRAY[23203]="23,愛知県,23203,一宮市";g.MUNI_ARRAY[23204]="23,愛知県,23204,瀬戸市";g.MUNI_ARRAY[23205]="23,愛知県,23205,半田市";g.MUNI_ARRAY[23206]="23,愛知県,23206,春日井市";g.MUNI_ARRAY[23207]="23,愛知県,23207,豊川市";g.MUNI_ARRAY[23208]="23,愛知県,23208,津島市";g.MUNI_ARRAY[23209]="23,愛知県,23209,碧南市";g.MUNI_ARRAY[23210]="23,愛知県,23210,刈谷市";g.MUNI_ARRAY[23211]="23,愛知県,23211,豊田市";g.MUNI_ARRAY[23212]="23,愛知県,23212,安城市";g.MUNI_ARRAY[23213]="23,愛知県,23213,西尾市";g.MUNI_ARRAY[23214]="23,愛知県,23214,蒲郡市";g.MUNI_ARRAY[23215]="23,愛知県,23215,犬山市";g.MUNI_ARRAY[23216]="23,愛知県,23216,常滑市";g.MUNI_ARRAY[23217]="23,愛知県,23217,江南市";g.MUNI_ARRAY[23219]="23,愛知県,23219,小牧市";g.MUNI_ARRAY[23220]="23,愛知県,23220,稲沢市";g.MUNI_ARRAY[23221]="23,愛知県,23221,新城市";g.MUNI_ARRAY[23222]="23,愛知県,23222,東海市";g.MUNI_ARRAY[23223]="23,愛知県,23223,大府市";g.MUNI_ARRAY[23224]="23,愛知県,23224,知多市";g.MUNI_ARRAY[23225]="23,愛知県,23225,知立市";g.MUNI_ARRAY[23226]="23,愛知県,23226,尾張旭市";g.MUNI_ARRAY[23227]="23,愛知県,23227,高浜市";g.MUNI_ARRAY[23228]="23,愛知県,23228,岩倉市";g.MUNI_ARRAY[23229]="23,愛知県,23229,豊明市";g.MUNI_ARRAY[23230]="23,愛知県,23230,日進市";g.MUNI_ARRAY[23231]="23,愛知県,23231,田原市";g.MUNI_ARRAY[23232]="23,愛知県,23232,愛西市";g.MUNI_ARRAY[23233]="23,愛知県,23233,清須市";g.MUNI_ARRAY[23234]="23,愛知県,23234,北名古屋市";g.MUNI_ARRAY[23235]="23,愛知県,23235,弥富市";g.MUNI_ARRAY[23236]="23,愛知県,23236,みよし市";g.MUNI_ARRAY[23237]="23,愛知県,23237,あま市";g.MUNI_ARRAY[23238]="23,愛知県,23238,長久手市";g.MUNI_ARRAY[23302]="23,愛知県,23302,東郷町";g.MUNI_ARRAY[23342]="23,愛知県,23342,豊山町";g.MUNI_ARRAY[23361]="23,愛知県,23361,大口町";g.MUNI_ARRAY[23362]="23,愛知県,23362,扶桑町";g.MUNI_ARRAY[23424]="23,愛知県,23424,大治町";g.MUNI_ARRAY[23425]="23,愛知県,23425,蟹江町";g.MUNI_ARRAY[23427]="23,愛知県,23427,飛島村";g.MUNI_ARRAY[23441]="23,愛知県,23441,阿久比町";g.MUNI_ARRAY[23442]="23,愛知県,23442,東浦町";g.MUNI_ARRAY[23445]="23,愛知県,23445,南知多町";g.MUNI_ARRAY[23446]="23,愛知県,23446,美浜町";g.MUNI_ARRAY[23447]="23,愛知県,23447,武豊町";g.MUNI_ARRAY[23501]="23,愛知県,23501,幸田町";g.MUNI_ARRAY[23561]="23,愛知県,23561,設楽町";g.MUNI_ARRAY[23562]="23,愛知県,23562,東栄町";g.MUNI_ARRAY[23563]="23,愛知県,23563,豊根村";g.MUNI_ARRAY[24201]="24,三重県,24201,津市";g.MUNI_ARRAY[24202]="24,三重県,24202,四日市市";g.MUNI_ARRAY[24203]="24,三重県,24203,伊勢市";g.MUNI_ARRAY[24204]="24,三重県,24204,松阪市";g.MUNI_ARRAY[24205]="24,三重県,24205,桑名市";g.MUNI_ARRAY[24207]="24,三重県,24207,鈴鹿市";g.MUNI_ARRAY[24208]="24,三重県,24208,名張市";g.MUNI_ARRAY[24209]="24,三重県,24209,尾鷲市";g.MUNI_ARRAY[24210]="24,三重県,24210,亀山市";g.MUNI_ARRAY[24211]="24,三重県,24211,鳥羽市";g.MUNI_ARRAY[24212]="24,三重県,24212,熊野市";g.MUNI_ARRAY[24214]="24,三重県,24214,いなべ市";g.MUNI_ARRAY[24215]="24,三重県,24215,志摩市";g.MUNI_ARRAY[24216]="24,三重県,24216,伊賀市";g.MUNI_ARRAY[24303]="24,三重県,24303,木曽岬町";g.MUNI_ARRAY[24324]="24,三重県,24324,東員町";g.MUNI_ARRAY[24341]="24,三重県,24341,菰野町";g.MUNI_ARRAY[24343]="24,三重県,24343,朝日町";g.MUNI_ARRAY[24344]="24,三重県,24344,川越町";g.MUNI_ARRAY[24441]="24,三重県,24441,多気町";g.MUNI_ARRAY[24442]="24,三重県,24442,明和町";g.MUNI_ARRAY[24443]="24,三重県,24443,大台町";g.MUNI_ARRAY[24461]="24,三重県,24461,玉城町";g.MUNI_ARRAY[24470]="24,三重県,24470,度会町";g.MUNI_ARRAY[24471]="24,三重県,24471,大紀町";g.MUNI_ARRAY[24472]="24,三重県,24472,南伊勢町";g.MUNI_ARRAY[24543]="24,三重県,24543,紀北町";g.MUNI_ARRAY[24561]="24,三重県,24561,御浜町";g.MUNI_ARRAY[24562]="24,三重県,24562,紀宝町";g.MUNI_ARRAY[25201]="25,滋賀県,25201,大津市";g.MUNI_ARRAY[25202]="25,滋賀県,25202,彦根市";g.MUNI_ARRAY[25203]="25,滋賀県,25203,長浜市";g.MUNI_ARRAY[25204]="25,滋賀県,25204,近江八幡市";g.MUNI_ARRAY[25206]="25,滋賀県,25206,草津市";g.MUNI_ARRAY[25207]="25,滋賀県,25207,守山市";g.MUNI_ARRAY[25208]="25,滋賀県,25208,栗東市";g.MUNI_ARRAY[25209]="25,滋賀県,25209,甲賀市";g.MUNI_ARRAY[25210]="25,滋賀県,25210,野洲市";g.MUNI_ARRAY[25211]="25,滋賀県,25211,湖南市";g.MUNI_ARRAY[25212]="25,滋賀県,25212,高島市";g.MUNI_ARRAY[25213]="25,滋賀県,25213,東近江市";g.MUNI_ARRAY[25214]="25,滋賀県,25214,米原市";g.MUNI_ARRAY[25383]="25,滋賀県,25383,日野町";g.MUNI_ARRAY[25384]="25,滋賀県,25384,竜王町";g.MUNI_ARRAY[25425]="25,滋賀県,25425,愛荘町";g.MUNI_ARRAY[25441]="25,滋賀県,25441,豊郷町";g.MUNI_ARRAY[25442]="25,滋賀県,25442,甲良町";g.MUNI_ARRAY[25443]="25,滋賀県,25443,多賀町";g.MUNI_ARRAY[26100]="26,京都府,26100,京都市";g.MUNI_ARRAY[26101]="26,京都府,26101,京都市　北区";g.MUNI_ARRAY[26102]="26,京都府,26102,京都市　上京区";g.MUNI_ARRAY[26103]="26,京都府,26103,京都市　左京区";g.MUNI_ARRAY[26104]="26,京都府,26104,京都市　中京区";g.MUNI_ARRAY[26105]="26,京都府,26105,京都市　東山区";g.MUNI_ARRAY[26106]="26,京都府,26106,京都市　下京区";g.MUNI_ARRAY[26107]="26,京都府,26107,京都市　南区";g.MUNI_ARRAY[26108]="26,京都府,26108,京都市　右京区";g.MUNI_ARRAY[26109]="26,京都府,26109,京都市　伏見区";g.MUNI_ARRAY[26110]="26,京都府,26110,京都市　山科区";g.MUNI_ARRAY[26111]="26,京都府,26111,京都市　西京区";g.MUNI_ARRAY[26201]="26,京都府,26201,福知山市";g.MUNI_ARRAY[26202]="26,京都府,26202,舞鶴市";g.MUNI_ARRAY[26203]="26,京都府,26203,綾部市";g.MUNI_ARRAY[26204]="26,京都府,26204,宇治市";g.MUNI_ARRAY[26205]="26,京都府,26205,宮津市";g.MUNI_ARRAY[26206]="26,京都府,26206,亀岡市";g.MUNI_ARRAY[26207]="26,京都府,26207,城陽市";g.MUNI_ARRAY[26208]="26,京都府,26208,向日市";g.MUNI_ARRAY[26209]="26,京都府,26209,長岡京市";g.MUNI_ARRAY[26210]="26,京都府,26210,八幡市";g.MUNI_ARRAY[26211]="26,京都府,26211,京田辺市";g.MUNI_ARRAY[26212]="26,京都府,26212,京丹後市";g.MUNI_ARRAY[26213]="26,京都府,26213,南丹市";g.MUNI_ARRAY[26214]="26,京都府,26214,木津川市";g.MUNI_ARRAY[26303]="26,京都府,26303,大山崎町";g.MUNI_ARRAY[26322]="26,京都府,26322,久御山町";g.MUNI_ARRAY[26343]="26,京都府,26343,井手町";g.MUNI_ARRAY[26344]="26,京都府,26344,宇治田原町";g.MUNI_ARRAY[26364]="26,京都府,26364,笠置町";g.MUNI_ARRAY[26365]="26,京都府,26365,和束町";g.MUNI_ARRAY[26366]="26,京都府,26366,精華町";g.MUNI_ARRAY[26367]="26,京都府,26367,南山城村";g.MUNI_ARRAY[26407]="26,京都府,26407,京丹波町";g.MUNI_ARRAY[26463]="26,京都府,26463,伊根町";g.MUNI_ARRAY[26465]="26,京都府,26465,与謝野町";g.MUNI_ARRAY[27100]="27,大阪府,27100,大阪市";g.MUNI_ARRAY[27102]="27,大阪府,27102,大阪市　都島区";g.MUNI_ARRAY[27103]="27,大阪府,27103,大阪市　福島区";g.MUNI_ARRAY[27104]="27,大阪府,27104,大阪市　此花区";g.MUNI_ARRAY[27106]="27,大阪府,27106,大阪市　西区";g.MUNI_ARRAY[27107]="27,大阪府,27107,大阪市　港区";g.MUNI_ARRAY[27108]="27,大阪府,27108,大阪市　大正区";g.MUNI_ARRAY[27109]="27,大阪府,27109,大阪市　天王寺区";g.MUNI_ARRAY[27111]="27,大阪府,27111,大阪市　浪速区";g.MUNI_ARRAY[27113]="27,大阪府,27113,大阪市　西淀川区";g.MUNI_ARRAY[27114]="27,大阪府,27114,大阪市　東淀川区";g.MUNI_ARRAY[27115]="27,大阪府,27115,大阪市　東成区";g.MUNI_ARRAY[27116]="27,大阪府,27116,大阪市　生野区";g.MUNI_ARRAY[27117]="27,大阪府,27117,大阪市　旭区";g.MUNI_ARRAY[27118]="27,大阪府,27118,大阪市　城東区";g.MUNI_ARRAY[27119]="27,大阪府,27119,大阪市　阿倍野区";g.MUNI_ARRAY[27120]="27,大阪府,27120,大阪市　住吉区";g.MUNI_ARRAY[27121]="27,大阪府,27121,大阪市　東住吉区";g.MUNI_ARRAY[27122]="27,大阪府,27122,大阪市　西成区";g.MUNI_ARRAY[27123]="27,大阪府,27123,大阪市　淀川区";g.MUNI_ARRAY[27124]="27,大阪府,27124,大阪市　鶴見区";g.MUNI_ARRAY[27125]="27,大阪府,27125,大阪市　住之江区";g.MUNI_ARRAY[27126]="27,大阪府,27126,大阪市　平野区";g.MUNI_ARRAY[27127]="27,大阪府,27127,大阪市　北区";g.MUNI_ARRAY[27128]="27,大阪府,27128,大阪市　中央区";g.MUNI_ARRAY[27140]="27,大阪府,27140,堺市";g.MUNI_ARRAY[27141]="27,大阪府,27141,堺市　堺区";g.MUNI_ARRAY[27142]="27,大阪府,27142,堺市　中区";g.MUNI_ARRAY[27143]="27,大阪府,27143,堺市　東区";g.MUNI_ARRAY[27144]="27,大阪府,27144,堺市　西区";g.MUNI_ARRAY[27145]="27,大阪府,27145,堺市　南区";g.MUNI_ARRAY[27146]="27,大阪府,27146,堺市　北区";g.MUNI_ARRAY[27147]="27,大阪府,27147,堺市　美原区";g.MUNI_ARRAY[27202]="27,大阪府,27202,岸和田市";g.MUNI_ARRAY[27203]="27,大阪府,27203,豊中市";g.MUNI_ARRAY[27204]="27,大阪府,27204,池田市";g.MUNI_ARRAY[27205]="27,大阪府,27205,吹田市";g.MUNI_ARRAY[27206]="27,大阪府,27206,泉大津市";g.MUNI_ARRAY[27207]="27,大阪府,27207,高槻市";g.MUNI_ARRAY[27208]="27,大阪府,27208,貝塚市";g.MUNI_ARRAY[27209]="27,大阪府,27209,守口市";g.MUNI_ARRAY[27210]="27,大阪府,27210,枚方市";g.MUNI_ARRAY[27211]="27,大阪府,27211,茨木市";g.MUNI_ARRAY[27212]="27,大阪府,27212,八尾市";g.MUNI_ARRAY[27213]="27,大阪府,27213,泉佐野市";g.MUNI_ARRAY[27214]="27,大阪府,27214,富田林市";g.MUNI_ARRAY[27215]="27,大阪府,27215,寝屋川市";g.MUNI_ARRAY[27216]="27,大阪府,27216,河内長野市";g.MUNI_ARRAY[27217]="27,大阪府,27217,松原市";g.MUNI_ARRAY[27218]="27,大阪府,27218,大東市";g.MUNI_ARRAY[27219]="27,大阪府,27219,和泉市";g.MUNI_ARRAY[27220]="27,大阪府,27220,箕面市";g.MUNI_ARRAY[27221]="27,大阪府,27221,柏原市";g.MUNI_ARRAY[27222]="27,大阪府,27222,羽曳野市";g.MUNI_ARRAY[27223]="27,大阪府,27223,門真市";g.MUNI_ARRAY[27224]="27,大阪府,27224,摂津市";g.MUNI_ARRAY[27225]="27,大阪府,27225,高石市";g.MUNI_ARRAY[27226]="27,大阪府,27226,藤井寺市";g.MUNI_ARRAY[27227]="27,大阪府,27227,東大阪市";g.MUNI_ARRAY[27228]="27,大阪府,27228,泉南市";g.MUNI_ARRAY[27229]="27,大阪府,27229,四條畷市";g.MUNI_ARRAY[27230]="27,大阪府,27230,交野市";g.MUNI_ARRAY[27231]="27,大阪府,27231,大阪狭山市";g.MUNI_ARRAY[27232]="27,大阪府,27232,阪南市";g.MUNI_ARRAY[27301]="27,大阪府,27301,島本町";g.MUNI_ARRAY[27321]="27,大阪府,27321,豊能町";g.MUNI_ARRAY[27322]="27,大阪府,27322,能勢町";g.MUNI_ARRAY[27341]="27,大阪府,27341,忠岡町";g.MUNI_ARRAY[27361]="27,大阪府,27361,熊取町";g.MUNI_ARRAY[27362]="27,大阪府,27362,田尻町";g.MUNI_ARRAY[27366]="27,大阪府,27366,岬町";g.MUNI_ARRAY[27381]="27,大阪府,27381,太子町";g.MUNI_ARRAY[27382]="27,大阪府,27382,河南町";g.MUNI_ARRAY[27383]="27,大阪府,27383,千早赤阪村";g.MUNI_ARRAY[28100]="28,兵庫県,28100,神戸市";g.MUNI_ARRAY[28101]="28,兵庫県,28101,神戸市　東灘区";g.MUNI_ARRAY[28102]="28,兵庫県,28102,神戸市　灘区";g.MUNI_ARRAY[28105]="28,兵庫県,28105,神戸市　兵庫区";g.MUNI_ARRAY[28106]="28,兵庫県,28106,神戸市　長田区";g.MUNI_ARRAY[28107]="28,兵庫県,28107,神戸市　須磨区";g.MUNI_ARRAY[28108]="28,兵庫県,28108,神戸市　垂水区";g.MUNI_ARRAY[28109]="28,兵庫県,28109,神戸市　北区";g.MUNI_ARRAY[28110]="28,兵庫県,28110,神戸市　中央区";g.MUNI_ARRAY[28111]="28,兵庫県,28111,神戸市　西区";g.MUNI_ARRAY[28201]="28,兵庫県,28201,姫路市";g.MUNI_ARRAY[28202]="28,兵庫県,28202,尼崎市";g.MUNI_ARRAY[28203]="28,兵庫県,28203,明石市";g.MUNI_ARRAY[28204]="28,兵庫県,28204,西宮市";g.MUNI_ARRAY[28205]="28,兵庫県,28205,洲本市";g.MUNI_ARRAY[28206]="28,兵庫県,28206,芦屋市";g.MUNI_ARRAY[28207]="28,兵庫県,28207,伊丹市";g.MUNI_ARRAY[28208]="28,兵庫県,28208,相生市";g.MUNI_ARRAY[28209]="28,兵庫県,28209,豊岡市";g.MUNI_ARRAY[28210]="28,兵庫県,28210,加古川市";g.MUNI_ARRAY[28212]="28,兵庫県,28212,赤穂市";g.MUNI_ARRAY[28213]="28,兵庫県,28213,西脇市";g.MUNI_ARRAY[28214]="28,兵庫県,28214,宝塚市";g.MUNI_ARRAY[28215]="28,兵庫県,28215,三木市";g.MUNI_ARRAY[28216]="28,兵庫県,28216,高砂市";g.MUNI_ARRAY[28217]="28,兵庫県,28217,川西市";g.MUNI_ARRAY[28218]="28,兵庫県,28218,小野市";g.MUNI_ARRAY[28219]="28,兵庫県,28219,三田市";g.MUNI_ARRAY[28220]="28,兵庫県,28220,加西市";g.MUNI_ARRAY[28221]="28,兵庫県,28221,丹波篠山市";g.MUNI_ARRAY[28222]="28,兵庫県,28222,養父市";g.MUNI_ARRAY[28223]="28,兵庫県,28223,丹波市";g.MUNI_ARRAY[28224]="28,兵庫県,28224,南あわじ市";g.MUNI_ARRAY[28225]="28,兵庫県,28225,朝来市";g.MUNI_ARRAY[28226]="28,兵庫県,28226,淡路市";g.MUNI_ARRAY[28227]="28,兵庫県,28227,宍粟市";g.MUNI_ARRAY[28228]="28,兵庫県,28228,加東市";g.MUNI_ARRAY[28229]="28,兵庫県,28229,たつの市";g.MUNI_ARRAY[28301]="28,兵庫県,28301,猪名川町";g.MUNI_ARRAY[28365]="28,兵庫県,28365,多可町";g.MUNI_ARRAY[28381]="28,兵庫県,28381,稲美町";g.MUNI_ARRAY[28382]="28,兵庫県,28382,播磨町";g.MUNI_ARRAY[28442]="28,兵庫県,28442,市川町";g.MUNI_ARRAY[28443]="28,兵庫県,28443,福崎町";g.MUNI_ARRAY[28446]="28,兵庫県,28446,神河町";g.MUNI_ARRAY[28464]="28,兵庫県,28464,太子町";g.MUNI_ARRAY[28481]="28,兵庫県,28481,上郡町";g.MUNI_ARRAY[28501]="28,兵庫県,28501,佐用町";g.MUNI_ARRAY[28585]="28,兵庫県,28585,香美町";g.MUNI_ARRAY[28586]="28,兵庫県,28586,新温泉町";g.MUNI_ARRAY[29201]="29,奈良県,29201,奈良市";g.MUNI_ARRAY[29202]="29,奈良県,29202,大和高田市";g.MUNI_ARRAY[29203]="29,奈良県,29203,大和郡山市";g.MUNI_ARRAY[29204]="29,奈良県,29204,天理市";g.MUNI_ARRAY[29205]="29,奈良県,29205,橿原市";g.MUNI_ARRAY[29206]="29,奈良県,29206,桜井市";g.MUNI_ARRAY[29207]="29,奈良県,29207,五條市";g.MUNI_ARRAY[29208]="29,奈良県,29208,御所市";g.MUNI_ARRAY[29209]="29,奈良県,29209,生駒市";g.MUNI_ARRAY[29210]="29,奈良県,29210,香芝市";g.MUNI_ARRAY[29211]="29,奈良県,29211,葛城市";g.MUNI_ARRAY[29212]="29,奈良県,29212,宇陀市";g.MUNI_ARRAY[29322]="29,奈良県,29322,山添村";g.MUNI_ARRAY[29342]="29,奈良県,29342,平群町";g.MUNI_ARRAY[29343]="29,奈良県,29343,三郷町";g.MUNI_ARRAY[29344]="29,奈良県,29344,斑鳩町";g.MUNI_ARRAY[29345]="29,奈良県,29345,安堵町";g.MUNI_ARRAY[29361]="29,奈良県,29361,川西町";g.MUNI_ARRAY[29362]="29,奈良県,29362,三宅町";g.MUNI_ARRAY[29363]="29,奈良県,29363,田原本町";g.MUNI_ARRAY[29385]="29,奈良県,29385,曽爾村";g.MUNI_ARRAY[29386]="29,奈良県,29386,御杖村";g.MUNI_ARRAY[29401]="29,奈良県,29401,高取町";g.MUNI_ARRAY[29402]="29,奈良県,29402,明日香村";g.MUNI_ARRAY[29424]="29,奈良県,29424,上牧町";g.MUNI_ARRAY[29425]="29,奈良県,29425,王寺町";g.MUNI_ARRAY[29426]="29,奈良県,29426,広陵町";g.MUNI_ARRAY[29427]="29,奈良県,29427,河合町";g.MUNI_ARRAY[29441]="29,奈良県,29441,吉野町";g.MUNI_ARRAY[29442]="29,奈良県,29442,大淀町";g.MUNI_ARRAY[29443]="29,奈良県,29443,下市町";g.MUNI_ARRAY[29444]="29,奈良県,29444,黒滝村";g.MUNI_ARRAY[29446]="29,奈良県,29446,天川村";g.MUNI_ARRAY[29447]="29,奈良県,29447,野迫川村";g.MUNI_ARRAY[29449]="29,奈良県,29449,十津川村";g.MUNI_ARRAY[29450]="29,奈良県,29450,下北山村";g.MUNI_ARRAY[29451]="29,奈良県,29451,上北山村";g.MUNI_ARRAY[29452]="29,奈良県,29452,川上村";g.MUNI_ARRAY[29453]="29,奈良県,29453,東吉野村";g.MUNI_ARRAY[30201]="30,和歌山県,30201,和歌山市";g.MUNI_ARRAY[30202]="30,和歌山県,30202,海南市";g.MUNI_ARRAY[30203]="30,和歌山県,30203,橋本市";g.MUNI_ARRAY[30204]="30,和歌山県,30204,有田市";g.MUNI_ARRAY[30205]="30,和歌山県,30205,御坊市";g.MUNI_ARRAY[30206]="30,和歌山県,30206,田辺市";g.MUNI_ARRAY[30207]="30,和歌山県,30207,新宮市";g.MUNI_ARRAY[30208]="30,和歌山県,30208,紀の川市";g.MUNI_ARRAY[30209]="30,和歌山県,30209,岩出市";g.MUNI_ARRAY[30304]="30,和歌山県,30304,紀美野町";g.MUNI_ARRAY[30341]="30,和歌山県,30341,かつらぎ町";g.MUNI_ARRAY[30343]="30,和歌山県,30343,九度山町";g.MUNI_ARRAY[30344]="30,和歌山県,30344,高野町";g.MUNI_ARRAY[30361]="30,和歌山県,30361,湯浅町";g.MUNI_ARRAY[30362]="30,和歌山県,30362,広川町";g.MUNI_ARRAY[30366]="30,和歌山県,30366,有田川町";g.MUNI_ARRAY[30381]="30,和歌山県,30381,美浜町";g.MUNI_ARRAY[30382]="30,和歌山県,30382,日高町";g.MUNI_ARRAY[30383]="30,和歌山県,30383,由良町";g.MUNI_ARRAY[30390]="30,和歌山県,30390,印南町";g.MUNI_ARRAY[30391]="30,和歌山県,30391,みなべ町";g.MUNI_ARRAY[30392]="30,和歌山県,30392,日高川町";g.MUNI_ARRAY[30401]="30,和歌山県,30401,白浜町";g.MUNI_ARRAY[30404]="30,和歌山県,30404,上富田町";g.MUNI_ARRAY[30406]="30,和歌山県,30406,すさみ町";g.MUNI_ARRAY[30421]="30,和歌山県,30421,那智勝浦町";g.MUNI_ARRAY[30422]="30,和歌山県,30422,太地町";g.MUNI_ARRAY[30424]="30,和歌山県,30424,古座川町";g.MUNI_ARRAY[30427]="30,和歌山県,30427,北山村";g.MUNI_ARRAY[30428]="30,和歌山県,30428,串本町";g.MUNI_ARRAY[31201]="31,鳥取県,31201,鳥取市";g.MUNI_ARRAY[31202]="31,鳥取県,31202,米子市";g.MUNI_ARRAY[31203]="31,鳥取県,31203,倉吉市";g.MUNI_ARRAY[31204]="31,鳥取県,31204,境港市";g.MUNI_ARRAY[31302]="31,鳥取県,31302,岩美町";g.MUNI_ARRAY[31325]="31,鳥取県,31325,若桜町";g.MUNI_ARRAY[31328]="31,鳥取県,31328,智頭町";g.MUNI_ARRAY[31329]="31,鳥取県,31329,八頭町";g.MUNI_ARRAY[31364]="31,鳥取県,31364,三朝町";g.MUNI_ARRAY[31370]="31,鳥取県,31370,湯梨浜町";g.MUNI_ARRAY[31371]="31,鳥取県,31371,琴浦町";g.MUNI_ARRAY[31372]="31,鳥取県,31372,北栄町";g.MUNI_ARRAY[31384]="31,鳥取県,31384,日吉津村";g.MUNI_ARRAY[31386]="31,鳥取県,31386,大山町";g.MUNI_ARRAY[31389]="31,鳥取県,31389,南部町";g.MUNI_ARRAY[31390]="31,鳥取県,31390,伯耆町";g.MUNI_ARRAY[31401]="31,鳥取県,31401,日南町";g.MUNI_ARRAY[31402]="31,鳥取県,31402,日野町";g.MUNI_ARRAY[31403]="31,鳥取県,31403,江府町";g.MUNI_ARRAY[32201]="32,島根県,32201,松江市";g.MUNI_ARRAY[32202]="32,島根県,32202,浜田市";g.MUNI_ARRAY[32203]="32,島根県,32203,出雲市";g.MUNI_ARRAY[32204]="32,島根県,32204,益田市";g.MUNI_ARRAY[32205]="32,島根県,32205,大田市";g.MUNI_ARRAY[32206]="32,島根県,32206,安来市";g.MUNI_ARRAY[32207]="32,島根県,32207,江津市";g.MUNI_ARRAY[32209]="32,島根県,32209,雲南市";g.MUNI_ARRAY[32343]="32,島根県,32343,奥出雲町";g.MUNI_ARRAY[32386]="32,島根県,32386,飯南町";g.MUNI_ARRAY[32441]="32,島根県,32441,川本町";g.MUNI_ARRAY[32448]="32,島根県,32448,美郷町";g.MUNI_ARRAY[32449]="32,島根県,32449,邑南町";g.MUNI_ARRAY[32501]="32,島根県,32501,津和野町";g.MUNI_ARRAY[32505]="32,島根県,32505,吉賀町";g.MUNI_ARRAY[32525]="32,島根県,32525,海士町";g.MUNI_ARRAY[32526]="32,島根県,32526,西ノ島町";g.MUNI_ARRAY[32527]="32,島根県,32527,知夫村";g.MUNI_ARRAY[32528]="32,島根県,32528,隠岐の島町";g.MUNI_ARRAY[33100]="33,岡山県,33100,岡山市";g.MUNI_ARRAY[33101]="33,岡山県,33101,岡山市　北区";g.MUNI_ARRAY[33102]="33,岡山県,33102,岡山市　中区";g.MUNI_ARRAY[33103]="33,岡山県,33103,岡山市　東区";g.MUNI_ARRAY[33104]="33,岡山県,33104,岡山市　南区";g.MUNI_ARRAY[33202]="33,岡山県,33202,倉敷市";g.MUNI_ARRAY[33203]="33,岡山県,33203,津山市";g.MUNI_ARRAY[33204]="33,岡山県,33204,玉野市";g.MUNI_ARRAY[33205]="33,岡山県,33205,笠岡市";g.MUNI_ARRAY[33207]="33,岡山県,33207,井原市";g.MUNI_ARRAY[33208]="33,岡山県,33208,総社市";g.MUNI_ARRAY[33209]="33,岡山県,33209,高梁市";g.MUNI_ARRAY[33210]="33,岡山県,33210,新見市";g.MUNI_ARRAY[33211]="33,岡山県,33211,備前市";g.MUNI_ARRAY[33212]="33,岡山県,33212,瀬戸内市";g.MUNI_ARRAY[33213]="33,岡山県,33213,赤磐市";g.MUNI_ARRAY[33214]="33,岡山県,33214,真庭市";g.MUNI_ARRAY[33215]="33,岡山県,33215,美作市";g.MUNI_ARRAY[33216]="33,岡山県,33216,浅口市";g.MUNI_ARRAY[33346]="33,岡山県,33346,和気町";g.MUNI_ARRAY[33423]="33,岡山県,33423,早島町";g.MUNI_ARRAY[33445]="33,岡山県,33445,里庄町";g.MUNI_ARRAY[33461]="33,岡山県,33461,矢掛町";g.MUNI_ARRAY[33586]="33,岡山県,33586,新庄村";g.MUNI_ARRAY[33606]="33,岡山県,33606,鏡野町";g.MUNI_ARRAY[33622]="33,岡山県,33622,勝央町";g.MUNI_ARRAY[33623]="33,岡山県,33623,奈義町";g.MUNI_ARRAY[33643]="33,岡山県,33643,西粟倉村";g.MUNI_ARRAY[33663]="33,岡山県,33663,久米南町";g.MUNI_ARRAY[33666]="33,岡山県,33666,美咲町";g.MUNI_ARRAY[33681]="33,岡山県,33681,吉備中央町";g.MUNI_ARRAY[34100]="34,広島県,34100,広島市";g.MUNI_ARRAY[34101]="34,広島県,34101,広島市　中区";g.MUNI_ARRAY[34102]="34,広島県,34102,広島市　東区";g.MUNI_ARRAY[34103]="34,広島県,34103,広島市　南区";g.MUNI_ARRAY[34104]="34,広島県,34104,広島市　西区";g.MUNI_ARRAY[34105]="34,広島県,34105,広島市　安佐南区";g.MUNI_ARRAY[34106]="34,広島県,34106,広島市　安佐北区";g.MUNI_ARRAY[34107]="34,広島県,34107,広島市　安芸区";g.MUNI_ARRAY[34108]="34,広島県,34108,広島市　佐伯区";g.MUNI_ARRAY[34202]="34,広島県,34202,呉市";g.MUNI_ARRAY[34203]="34,広島県,34203,竹原市";g.MUNI_ARRAY[34204]="34,広島県,34204,三原市";g.MUNI_ARRAY[34205]="34,広島県,34205,尾道市";g.MUNI_ARRAY[34207]="34,広島県,34207,福山市";g.MUNI_ARRAY[34208]="34,広島県,34208,府中市";g.MUNI_ARRAY[34209]="34,広島県,34209,三次市";g.MUNI_ARRAY[34210]="34,広島県,34210,庄原市";g.MUNI_ARRAY[34211]="34,広島県,34211,大竹市";g.MUNI_ARRAY[34212]="34,広島県,34212,東広島市";g.MUNI_ARRAY[34213]="34,広島県,34213,廿日市市";g.MUNI_ARRAY[34214]="34,広島県,34214,安芸高田市";g.MUNI_ARRAY[34215]="34,広島県,34215,江田島市";g.MUNI_ARRAY[34302]="34,広島県,34302,府中町";g.MUNI_ARRAY[34304]="34,広島県,34304,海田町";g.MUNI_ARRAY[34307]="34,広島県,34307,熊野町";g.MUNI_ARRAY[34309]="34,広島県,34309,坂町";g.MUNI_ARRAY[34368]="34,広島県,34368,安芸太田町";g.MUNI_ARRAY[34369]="34,広島県,34369,北広島町";g.MUNI_ARRAY[34431]="34,広島県,34431,大崎上島町";g.MUNI_ARRAY[34462]="34,広島県,34462,世羅町";g.MUNI_ARRAY[34545]="34,広島県,34545,神石高原町";g.MUNI_ARRAY[35201]="35,山口県,35201,下関市";g.MUNI_ARRAY[35202]="35,山口県,35202,宇部市";g.MUNI_ARRAY[35203]="35,山口県,35203,山口市";g.MUNI_ARRAY[35204]="35,山口県,35204,萩市";g.MUNI_ARRAY[35206]="35,山口県,35206,防府市";g.MUNI_ARRAY[35207]="35,山口県,35207,下松市";g.MUNI_ARRAY[35208]="35,山口県,35208,岩国市";g.MUNI_ARRAY[35210]="35,山口県,35210,光市";g.MUNI_ARRAY[35211]="35,山口県,35211,長門市";g.MUNI_ARRAY[35212]="35,山口県,35212,柳井市";g.MUNI_ARRAY[35213]="35,山口県,35213,美祢市";g.MUNI_ARRAY[35215]="35,山口県,35215,周南市";g.MUNI_ARRAY[35216]="35,山口県,35216,山陽小野田市";g.MUNI_ARRAY[35305]="35,山口県,35305,周防大島町";g.MUNI_ARRAY[35321]="35,山口県,35321,和木町";g.MUNI_ARRAY[35341]="35,山口県,35341,上関町";g.MUNI_ARRAY[35343]="35,山口県,35343,田布施町";g.MUNI_ARRAY[35344]="35,山口県,35344,平生町";g.MUNI_ARRAY[35502]="35,山口県,35502,阿武町";g.MUNI_ARRAY[36201]="36,徳島県,36201,徳島市";g.MUNI_ARRAY[36202]="36,徳島県,36202,鳴門市";g.MUNI_ARRAY[36203]="36,徳島県,36203,小松島市";g.MUNI_ARRAY[36204]="36,徳島県,36204,阿南市";g.MUNI_ARRAY[36205]="36,徳島県,36205,吉野川市";g.MUNI_ARRAY[36206]="36,徳島県,36206,阿波市";g.MUNI_ARRAY[36207]="36,徳島県,36207,美馬市";g.MUNI_ARRAY[36208]="36,徳島県,36208,三好市";g.MUNI_ARRAY[36301]="36,徳島県,36301,勝浦町";g.MUNI_ARRAY[36302]="36,徳島県,36302,上勝町";g.MUNI_ARRAY[36321]="36,徳島県,36321,佐那河内村";g.MUNI_ARRAY[36341]="36,徳島県,36341,石井町";g.MUNI_ARRAY[36342]="36,徳島県,36342,神山町";g.MUNI_ARRAY[36368]="36,徳島県,36368,那賀町";g.MUNI_ARRAY[36383]="36,徳島県,36383,牟岐町";g.MUNI_ARRAY[36387]="36,徳島県,36387,美波町";g.MUNI_ARRAY[36388]="36,徳島県,36388,海陽町";g.MUNI_ARRAY[36401]="36,徳島県,36401,松茂町";g.MUNI_ARRAY[36402]="36,徳島県,36402,北島町";g.MUNI_ARRAY[36403]="36,徳島県,36403,藍住町";g.MUNI_ARRAY[36404]="36,徳島県,36404,板野町";g.MUNI_ARRAY[36405]="36,徳島県,36405,上板町";g.MUNI_ARRAY[36468]="36,徳島県,36468,つるぎ町";g.MUNI_ARRAY[36489]="36,徳島県,36489,東みよし町";g.MUNI_ARRAY[37201]="37,香川県,37201,高松市";g.MUNI_ARRAY[37202]="37,香川県,37202,丸亀市";g.MUNI_ARRAY[37203]="37,香川県,37203,坂出市";g.MUNI_ARRAY[37204]="37,香川県,37204,善通寺市";g.MUNI_ARRAY[37205]="37,香川県,37205,観音寺市";g.MUNI_ARRAY[37206]="37,香川県,37206,さぬき市";g.MUNI_ARRAY[37207]="37,香川県,37207,東かがわ市";g.MUNI_ARRAY[37208]="37,香川県,37208,三豊市";g.MUNI_ARRAY[37322]="37,香川県,37322,土庄町";g.MUNI_ARRAY[37324]="37,香川県,37324,小豆島町";g.MUNI_ARRAY[37341]="37,香川県,37341,三木町";g.MUNI_ARRAY[37364]="37,香川県,37364,直島町";g.MUNI_ARRAY[37386]="37,香川県,37386,宇多津町";g.MUNI_ARRAY[37387]="37,香川県,37387,綾川町";g.MUNI_ARRAY[37403]="37,香川県,37403,琴平町";g.MUNI_ARRAY[37404]="37,香川県,37404,多度津町";g.MUNI_ARRAY[37406]="37,香川県,37406,まんのう町";g.MUNI_ARRAY[38201]="38,愛媛県,38201,松山市";g.MUNI_ARRAY[38202]="38,愛媛県,38202,今治市";g.MUNI_ARRAY[38203]="38,愛媛県,38203,宇和島市";g.MUNI_ARRAY[38204]="38,愛媛県,38204,八幡浜市";g.MUNI_ARRAY[38205]="38,愛媛県,38205,新居浜市";g.MUNI_ARRAY[38206]="38,愛媛県,38206,西条市";g.MUNI_ARRAY[38207]="38,愛媛県,38207,大洲市";g.MUNI_ARRAY[38210]="38,愛媛県,38210,伊予市";g.MUNI_ARRAY[38213]="38,愛媛県,38213,四国中央市";g.MUNI_ARRAY[38214]="38,愛媛県,38214,西予市";g.MUNI_ARRAY[38215]="38,愛媛県,38215,東温市";g.MUNI_ARRAY[38356]="38,愛媛県,38356,上島町";g.MUNI_ARRAY[38386]="38,愛媛県,38386,久万高原町";g.MUNI_ARRAY[38401]="38,愛媛県,38401,松前町";g.MUNI_ARRAY[38402]="38,愛媛県,38402,砥部町";g.MUNI_ARRAY[38422]="38,愛媛県,38422,内子町";g.MUNI_ARRAY[38442]="38,愛媛県,38442,伊方町";g.MUNI_ARRAY[38484]="38,愛媛県,38484,松野町";g.MUNI_ARRAY[38488]="38,愛媛県,38488,鬼北町";g.MUNI_ARRAY[38506]="38,愛媛県,38506,愛南町";g.MUNI_ARRAY[39201]="39,高知県,39201,高知市";g.MUNI_ARRAY[39202]="39,高知県,39202,室戸市";g.MUNI_ARRAY[39203]="39,高知県,39203,安芸市";g.MUNI_ARRAY[39204]="39,高知県,39204,南国市";g.MUNI_ARRAY[39205]="39,高知県,39205,土佐市";g.MUNI_ARRAY[39206]="39,高知県,39206,須崎市";g.MUNI_ARRAY[39208]="39,高知県,39208,宿毛市";g.MUNI_ARRAY[39209]="39,高知県,39209,土佐清水市";g.MUNI_ARRAY[39210]="39,高知県,39210,四万十市";g.MUNI_ARRAY[39211]="39,高知県,39211,香南市";g.MUNI_ARRAY[39212]="39,高知県,39212,香美市";g.MUNI_ARRAY[39301]="39,高知県,39301,東洋町";g.MUNI_ARRAY[39302]="39,高知県,39302,奈半利町";g.MUNI_ARRAY[39303]="39,高知県,39303,田野町";g.MUNI_ARRAY[39304]="39,高知県,39304,安田町";g.MUNI_ARRAY[39305]="39,高知県,39305,北川村";g.MUNI_ARRAY[39306]="39,高知県,39306,馬路村";g.MUNI_ARRAY[39307]="39,高知県,39307,芸西村";g.MUNI_ARRAY[39341]="39,高知県,39341,本山町";g.MUNI_ARRAY[39344]="39,高知県,39344,大豊町";g.MUNI_ARRAY[39363]="39,高知県,39363,土佐町";g.MUNI_ARRAY[39364]="39,高知県,39364,大川村";g.MUNI_ARRAY[39386]="39,高知県,39386,いの町";g.MUNI_ARRAY[39387]="39,高知県,39387,仁淀川町";g.MUNI_ARRAY[39401]="39,高知県,39401,中土佐町";g.MUNI_ARRAY[39402]="39,高知県,39402,佐川町";g.MUNI_ARRAY[39403]="39,高知県,39403,越知町";g.MUNI_ARRAY[39405]="39,高知県,39405,梼原町";g.MUNI_ARRAY[39410]="39,高知県,39410,日高村";g.MUNI_ARRAY[39411]="39,高知県,39411,津野町";g.MUNI_ARRAY[39412]="39,高知県,39412,四万十町";g.MUNI_ARRAY[39424]="39,高知県,39424,大月町";g.MUNI_ARRAY[39427]="39,高知県,39427,三原村";g.MUNI_ARRAY[39428]="39,高知県,39428,黒潮町";g.MUNI_ARRAY[40100]="40,福岡県,40100,北九州市";g.MUNI_ARRAY[40101]="40,福岡県,40101,北九州市　門司区";g.MUNI_ARRAY[40103]="40,福岡県,40103,北九州市　若松区";g.MUNI_ARRAY[40105]="40,福岡県,40105,北九州市　戸畑区";g.MUNI_ARRAY[40106]="40,福岡県,40106,北九州市　小倉北区";g.MUNI_ARRAY[40107]="40,福岡県,40107,北九州市　小倉南区";g.MUNI_ARRAY[40108]="40,福岡県,40108,北九州市　八幡東区";g.MUNI_ARRAY[40109]="40,福岡県,40109,北九州市　八幡西区";g.MUNI_ARRAY[40130]="40,福岡県,40130,福岡市";g.MUNI_ARRAY[40131]="40,福岡県,40131,福岡市　東区";g.MUNI_ARRAY[40132]="40,福岡県,40132,福岡市　博多区";g.MUNI_ARRAY[40133]="40,福岡県,40133,福岡市　中央区";g.MUNI_ARRAY[40134]="40,福岡県,40134,福岡市　南区";g.MUNI_ARRAY[40135]="40,福岡県,40135,福岡市　西区";g.MUNI_ARRAY[40136]="40,福岡県,40136,福岡市　城南区";g.MUNI_ARRAY[40137]="40,福岡県,40137,福岡市　早良区";g.MUNI_ARRAY[40202]="40,福岡県,40202,大牟田市";g.MUNI_ARRAY[40203]="40,福岡県,40203,久留米市";g.MUNI_ARRAY[40204]="40,福岡県,40204,直方市";g.MUNI_ARRAY[40205]="40,福岡県,40205,飯塚市";g.MUNI_ARRAY[40206]="40,福岡県,40206,田川市";g.MUNI_ARRAY[40207]="40,福岡県,40207,柳川市";g.MUNI_ARRAY[40210]="40,福岡県,40210,八女市";g.MUNI_ARRAY[40211]="40,福岡県,40211,筑後市";g.MUNI_ARRAY[40212]="40,福岡県,40212,大川市";g.MUNI_ARRAY[40213]="40,福岡県,40213,行橋市";g.MUNI_ARRAY[40214]="40,福岡県,40214,豊前市";g.MUNI_ARRAY[40215]="40,福岡県,40215,中間市";g.MUNI_ARRAY[40216]="40,福岡県,40216,小郡市";g.MUNI_ARRAY[40217]="40,福岡県,40217,筑紫野市";g.MUNI_ARRAY[40218]="40,福岡県,40218,春日市";g.MUNI_ARRAY[40219]="40,福岡県,40219,大野城市";g.MUNI_ARRAY[40220]="40,福岡県,40220,宗像市";g.MUNI_ARRAY[40221]="40,福岡県,40221,太宰府市";g.MUNI_ARRAY[40223]="40,福岡県,40223,古賀市";g.MUNI_ARRAY[40224]="40,福岡県,40224,福津市";g.MUNI_ARRAY[40225]="40,福岡県,40225,うきは市";g.MUNI_ARRAY[40226]="40,福岡県,40226,宮若市";g.MUNI_ARRAY[40227]="40,福岡県,40227,嘉麻市";g.MUNI_ARRAY[40228]="40,福岡県,40228,朝倉市";g.MUNI_ARRAY[40229]="40,福岡県,40229,みやま市";g.MUNI_ARRAY[40230]="40,福岡県,40230,糸島市";g.MUNI_ARRAY[40231]="40,福岡県,40231,那珂川市";g.MUNI_ARRAY[40341]="40,福岡県,40341,宇美町";g.MUNI_ARRAY[40342]="40,福岡県,40342,篠栗町";g.MUNI_ARRAY[40343]="40,福岡県,40343,志免町";g.MUNI_ARRAY[40344]="40,福岡県,40344,須恵町";g.MUNI_ARRAY[40345]="40,福岡県,40345,新宮町";g.MUNI_ARRAY[40348]="40,福岡県,40348,久山町";g.MUNI_ARRAY[40349]="40,福岡県,40349,粕屋町";g.MUNI_ARRAY[40381]="40,福岡県,40381,芦屋町";g.MUNI_ARRAY[40382]="40,福岡県,40382,水巻町";g.MUNI_ARRAY[40383]="40,福岡県,40383,岡垣町";g.MUNI_ARRAY[40384]="40,福岡県,40384,遠賀町";g.MUNI_ARRAY[40401]="40,福岡県,40401,小竹町";g.MUNI_ARRAY[40402]="40,福岡県,40402,鞍手町";g.MUNI_ARRAY[40421]="40,福岡県,40421,桂川町";g.MUNI_ARRAY[40447]="40,福岡県,40447,筑前町";g.MUNI_ARRAY[40448]="40,福岡県,40448,東峰村";g.MUNI_ARRAY[40503]="40,福岡県,40503,大刀洗町";g.MUNI_ARRAY[40522]="40,福岡県,40522,大木町";g.MUNI_ARRAY[40544]="40,福岡県,40544,広川町";g.MUNI_ARRAY[40601]="40,福岡県,40601,香春町";g.MUNI_ARRAY[40602]="40,福岡県,40602,添田町";g.MUNI_ARRAY[40604]="40,福岡県,40604,糸田町";g.MUNI_ARRAY[40605]="40,福岡県,40605,川崎町";g.MUNI_ARRAY[40608]="40,福岡県,40608,大任町";g.MUNI_ARRAY[40609]="40,福岡県,40609,赤村";g.MUNI_ARRAY[40610]="40,福岡県,40610,福智町";g.MUNI_ARRAY[40621]="40,福岡県,40621,苅田町";g.MUNI_ARRAY[40625]="40,福岡県,40625,みやこ町";g.MUNI_ARRAY[40642]="40,福岡県,40642,吉富町";g.MUNI_ARRAY[40646]="40,福岡県,40646,上毛町";g.MUNI_ARRAY[40647]="40,福岡県,40647,築上町";g.MUNI_ARRAY[41201]="41,佐賀県,41201,佐賀市";g.MUNI_ARRAY[41202]="41,佐賀県,41202,唐津市";g.MUNI_ARRAY[41203]="41,佐賀県,41203,鳥栖市";g.MUNI_ARRAY[41204]="41,佐賀県,41204,多久市";g.MUNI_ARRAY[41205]="41,佐賀県,41205,伊万里市";g.MUNI_ARRAY[41206]="41,佐賀県,41206,武雄市";g.MUNI_ARRAY[41207]="41,佐賀県,41207,鹿島市";g.MUNI_ARRAY[41208]="41,佐賀県,41208,小城市";g.MUNI_ARRAY[41209]="41,佐賀県,41209,嬉野市";g.MUNI_ARRAY[41210]="41,佐賀県,41210,神埼市";g.MUNI_ARRAY[41327]="41,佐賀県,41327,吉野ヶ里町";g.MUNI_ARRAY[41341]="41,佐賀県,41341,基山町";g.MUNI_ARRAY[41345]="41,佐賀県,41345,上峰町";g.MUNI_ARRAY[41346]="41,佐賀県,41346,みやき町";g.MUNI_ARRAY[41387]="41,佐賀県,41387,玄海町";g.MUNI_ARRAY[41401]="41,佐賀県,41401,有田町";g.MUNI_ARRAY[41423]="41,佐賀県,41423,大町町";g.MUNI_ARRAY[41424]="41,佐賀県,41424,江北町";g.MUNI_ARRAY[41425]="41,佐賀県,41425,白石町";g.MUNI_ARRAY[41441]="41,佐賀県,41441,太良町";g.MUNI_ARRAY[42201]="42,長崎県,42201,長崎市";g.MUNI_ARRAY[42202]="42,長崎県,42202,佐世保市";g.MUNI_ARRAY[42203]="42,長崎県,42203,島原市";g.MUNI_ARRAY[42204]="42,長崎県,42204,諫早市";g.MUNI_ARRAY[42205]="42,長崎県,42205,大村市";g.MUNI_ARRAY[42207]="42,長崎県,42207,平戸市";g.MUNI_ARRAY[42208]="42,長崎県,42208,松浦市";g.MUNI_ARRAY[42209]="42,長崎県,42209,対馬市";g.MUNI_ARRAY[42210]="42,長崎県,42210,壱岐市";g.MUNI_ARRAY[42211]="42,長崎県,42211,五島市";g.MUNI_ARRAY[42212]="42,長崎県,42212,西海市";g.MUNI_ARRAY[42213]="42,長崎県,42213,雲仙市";g.MUNI_ARRAY[42214]="42,長崎県,42214,南島原市";g.MUNI_ARRAY[42307]="42,長崎県,42307,長与町";g.MUNI_ARRAY[42308]="42,長崎県,42308,時津町";g.MUNI_ARRAY[42321]="42,長崎県,42321,東彼杵町";g.MUNI_ARRAY[42322]="42,長崎県,42322,川棚町";g.MUNI_ARRAY[42323]="42,長崎県,42323,波佐見町";g.MUNI_ARRAY[42383]="42,長崎県,42383,小値賀町";g.MUNI_ARRAY[42391]="42,長崎県,42391,佐々町";g.MUNI_ARRAY[42411]="42,長崎県,42411,新上五島町";g.MUNI_ARRAY[43100]="43,熊本県,43100,熊本市";g.MUNI_ARRAY[43101]="43,熊本県,43101,熊本市　中央区";g.MUNI_ARRAY[43102]="43,熊本県,43102,熊本市　東区";g.MUNI_ARRAY[43103]="43,熊本県,43103,熊本市　西区";g.MUNI_ARRAY[43104]="43,熊本県,43104,熊本市　南区";g.MUNI_ARRAY[43105]="43,熊本県,43105,熊本市　北区";g.MUNI_ARRAY[43202]="43,熊本県,43202,八代市";g.MUNI_ARRAY[43203]="43,熊本県,43203,人吉市";g.MUNI_ARRAY[43204]="43,熊本県,43204,荒尾市";g.MUNI_ARRAY[43205]="43,熊本県,43205,水俣市";g.MUNI_ARRAY[43206]="43,熊本県,43206,玉名市";g.MUNI_ARRAY[43208]="43,熊本県,43208,山鹿市";g.MUNI_ARRAY[43210]="43,熊本県,43210,菊池市";g.MUNI_ARRAY[43211]="43,熊本県,43211,宇土市";g.MUNI_ARRAY[43212]="43,熊本県,43212,上天草市";g.MUNI_ARRAY[43213]="43,熊本県,43213,宇城市";g.MUNI_ARRAY[43214]="43,熊本県,43214,阿蘇市";g.MUNI_ARRAY[43215]="43,熊本県,43215,天草市";g.MUNI_ARRAY[43216]="43,熊本県,43216,合志市";g.MUNI_ARRAY[43348]="43,熊本県,43348,美里町";g.MUNI_ARRAY[43364]="43,熊本県,43364,玉東町";g.MUNI_ARRAY[43367]="43,熊本県,43367,南関町";g.MUNI_ARRAY[43368]="43,熊本県,43368,長洲町";g.MUNI_ARRAY[43369]="43,熊本県,43369,和水町";g.MUNI_ARRAY[43403]="43,熊本県,43403,大津町";g.MUNI_ARRAY[43404]="43,熊本県,43404,菊陽町";g.MUNI_ARRAY[43423]="43,熊本県,43423,南小国町";g.MUNI_ARRAY[43424]="43,熊本県,43424,小国町";g.MUNI_ARRAY[43425]="43,熊本県,43425,産山村";g.MUNI_ARRAY[43428]="43,熊本県,43428,高森町";g.MUNI_ARRAY[43432]="43,熊本県,43432,西原村";g.MUNI_ARRAY[43433]="43,熊本県,43433,南阿蘇村";g.MUNI_ARRAY[43441]="43,熊本県,43441,御船町";g.MUNI_ARRAY[43442]="43,熊本県,43442,嘉島町";g.MUNI_ARRAY[43443]="43,熊本県,43443,益城町";g.MUNI_ARRAY[43444]="43,熊本県,43444,甲佐町";g.MUNI_ARRAY[43447]="43,熊本県,43447,山都町";g.MUNI_ARRAY[43468]="43,熊本県,43468,氷川町";g.MUNI_ARRAY[43482]="43,熊本県,43482,芦北町";g.MUNI_ARRAY[43484]="43,熊本県,43484,津奈木町";g.MUNI_ARRAY[43501]="43,熊本県,43501,錦町";g.MUNI_ARRAY[43505]="43,熊本県,43505,多良木町";g.MUNI_ARRAY[43506]="43,熊本県,43506,湯前町";g.MUNI_ARRAY[43507]="43,熊本県,43507,水上村";g.MUNI_ARRAY[43510]="43,熊本県,43510,相良村";g.MUNI_ARRAY[43511]="43,熊本県,43511,五木村";g.MUNI_ARRAY[43512]="43,熊本県,43512,山江村";g.MUNI_ARRAY[43513]="43,熊本県,43513,球磨村";g.MUNI_ARRAY[43514]="43,熊本県,43514,あさぎり町";g.MUNI_ARRAY[43531]="43,熊本県,43531,苓北町";g.MUNI_ARRAY[44201]="44,大分県,44201,大分市";g.MUNI_ARRAY[44202]="44,大分県,44202,別府市";g.MUNI_ARRAY[44203]="44,大分県,44203,中津市";g.MUNI_ARRAY[44204]="44,大分県,44204,日田市";g.MUNI_ARRAY[44205]="44,大分県,44205,佐伯市";g.MUNI_ARRAY[44206]="44,大分県,44206,臼杵市";g.MUNI_ARRAY[44207]="44,大分県,44207,津久見市";g.MUNI_ARRAY[44208]="44,大分県,44208,竹田市";g.MUNI_ARRAY[44209]="44,大分県,44209,豊後高田市";g.MUNI_ARRAY[44210]="44,大分県,44210,杵築市";g.MUNI_ARRAY[44211]="44,大分県,44211,宇佐市";g.MUNI_ARRAY[44212]="44,大分県,44212,豊後大野市";g.MUNI_ARRAY[44213]="44,大分県,44213,由布市";g.MUNI_ARRAY[44214]="44,大分県,44214,国東市";g.MUNI_ARRAY[44322]="44,大分県,44322,姫島村";g.MUNI_ARRAY[44341]="44,大分県,44341,日出町";g.MUNI_ARRAY[44461]="44,大分県,44461,九重町";g.MUNI_ARRAY[44462]="44,大分県,44462,玖珠町";g.MUNI_ARRAY[45201]="45,宮崎県,45201,宮崎市";g.MUNI_ARRAY[45202]="45,宮崎県,45202,都城市";g.MUNI_ARRAY[45203]="45,宮崎県,45203,延岡市";g.MUNI_ARRAY[45204]="45,宮崎県,45204,日南市";g.MUNI_ARRAY[45205]="45,宮崎県,45205,小林市";g.MUNI_ARRAY[45206]="45,宮崎県,45206,日向市";g.MUNI_ARRAY[45207]="45,宮崎県,45207,串間市";g.MUNI_ARRAY[45208]="45,宮崎県,45208,西都市";g.MUNI_ARRAY[45209]="45,宮崎県,45209,えびの市";g.MUNI_ARRAY[45341]="45,宮崎県,45341,三股町";g.MUNI_ARRAY[45361]="45,宮崎県,45361,高原町";g.MUNI_ARRAY[45382]="45,宮崎県,45382,国富町";g.MUNI_ARRAY[45383]="45,宮崎県,45383,綾町";g.MUNI_ARRAY[45401]="45,宮崎県,45401,高鍋町";g.MUNI_ARRAY[45402]="45,宮崎県,45402,新富町";g.MUNI_ARRAY[45403]="45,宮崎県,45403,西米良村";g.MUNI_ARRAY[45404]="45,宮崎県,45404,木城町";g.MUNI_ARRAY[45405]="45,宮崎県,45405,川南町";g.MUNI_ARRAY[45406]="45,宮崎県,45406,都農町";g.MUNI_ARRAY[45421]="45,宮崎県,45421,門川町";g.MUNI_ARRAY[45429]="45,宮崎県,45429,諸塚村";g.MUNI_ARRAY[45430]="45,宮崎県,45430,椎葉村";g.MUNI_ARRAY[45431]="45,宮崎県,45431,美郷町";g.MUNI_ARRAY[45441]="45,宮崎県,45441,高千穂町";g.MUNI_ARRAY[45442]="45,宮崎県,45442,日之影町";g.MUNI_ARRAY[45443]="45,宮崎県,45443,五ヶ瀬町";g.MUNI_ARRAY[46201]="46,鹿児島県,46201,鹿児島市";g.MUNI_ARRAY[46203]="46,鹿児島県,46203,鹿屋市";g.MUNI_ARRAY[46204]="46,鹿児島県,46204,枕崎市";g.MUNI_ARRAY[46206]="46,鹿児島県,46206,阿久根市";g.MUNI_ARRAY[46208]="46,鹿児島県,46208,出水市";g.MUNI_ARRAY[46210]="46,鹿児島県,46210,指宿市";g.MUNI_ARRAY[46213]="46,鹿児島県,46213,西之表市";g.MUNI_ARRAY[46214]="46,鹿児島県,46214,垂水市";g.MUNI_ARRAY[46215]="46,鹿児島県,46215,薩摩川内市";g.MUNI_ARRAY[46216]="46,鹿児島県,46216,日置市";g.MUNI_ARRAY[46217]="46,鹿児島県,46217,曽於市";g.MUNI_ARRAY[46218]="46,鹿児島県,46218,霧島市";g.MUNI_ARRAY[46219]="46,鹿児島県,46219,いちき串木野市";g.MUNI_ARRAY[46220]="46,鹿児島県,46220,南さつま市";g.MUNI_ARRAY[46221]="46,鹿児島県,46221,志布志市";g.MUNI_ARRAY[46222]="46,鹿児島県,46222,奄美市";g.MUNI_ARRAY[46223]="46,鹿児島県,46223,南九州市";g.MUNI_ARRAY[46224]="46,鹿児島県,46224,伊佐市";g.MUNI_ARRAY[46225]="46,鹿児島県,46225,姶良市";g.MUNI_ARRAY[46303]="46,鹿児島県,46303,三島村";g.MUNI_ARRAY[46304]="46,鹿児島県,46304,十島村";g.MUNI_ARRAY[46392]="46,鹿児島県,46392,さつま町";g.MUNI_ARRAY[46404]="46,鹿児島県,46404,長島町";g.MUNI_ARRAY[46452]="46,鹿児島県,46452,湧水町";g.MUNI_ARRAY[46468]="46,鹿児島県,46468,大崎町";g.MUNI_ARRAY[46482]="46,鹿児島県,46482,東串良町";g.MUNI_ARRAY[46490]="46,鹿児島県,46490,錦江町";g.MUNI_ARRAY[46491]="46,鹿児島県,46491,南大隅町";g.MUNI_ARRAY[46492]="46,鹿児島県,46492,肝付町";g.MUNI_ARRAY[46501]="46,鹿児島県,46501,中種子町";g.MUNI_ARRAY[46502]="46,鹿児島県,46502,南種子町";g.MUNI_ARRAY[46505]="46,鹿児島県,46505,屋久島町";g.MUNI_ARRAY[46523]="46,鹿児島県,46523,大和村";g.MUNI_ARRAY[46524]="46,鹿児島県,46524,宇検村";g.MUNI_ARRAY[46525]="46,鹿児島県,46525,瀬戸内町";g.MUNI_ARRAY[46527]="46,鹿児島県,46527,龍郷町";g.MUNI_ARRAY[46529]="46,鹿児島県,46529,喜界町";g.MUNI_ARRAY[46530]="46,鹿児島県,46530,徳之島町";g.MUNI_ARRAY[46531]="46,鹿児島県,46531,天城町";g.MUNI_ARRAY[46532]="46,鹿児島県,46532,伊仙町";g.MUNI_ARRAY[46533]="46,鹿児島県,46533,和泊町";g.MUNI_ARRAY[46534]="46,鹿児島県,46534,知名町";g.MUNI_ARRAY[46535]="46,鹿児島県,46535,与論町";g.MUNI_ARRAY[47201]="47,沖縄県,47201,那覇市";g.MUNI_ARRAY[47205]="47,沖縄県,47205,宜野湾市";g.MUNI_ARRAY[47207]="47,沖縄県,47207,石垣市";g.MUNI_ARRAY[47208]="47,沖縄県,47208,浦添市";g.MUNI_ARRAY[47209]="47,沖縄県,47209,名護市";g.MUNI_ARRAY[47210]="47,沖縄県,47210,糸満市";g.MUNI_ARRAY[47211]="47,沖縄県,47211,沖縄市";g.MUNI_ARRAY[47212]="47,沖縄県,47212,豊見城市";g.MUNI_ARRAY[47213]="47,沖縄県,47213,うるま市";g.MUNI_ARRAY[47214]="47,沖縄県,47214,宮古島市";g.MUNI_ARRAY[47215]="47,沖縄県,47215,南城市";g.MUNI_ARRAY[47301]="47,沖縄県,47301,国頭村";g.MUNI_ARRAY[47302]="47,沖縄県,47302,大宜味村";g.MUNI_ARRAY[47303]="47,沖縄県,47303,東村";g.MUNI_ARRAY[47306]="47,沖縄県,47306,今帰仁村";g.MUNI_ARRAY[47308]="47,沖縄県,47308,本部町";g.MUNI_ARRAY[47311]="47,沖縄県,47311,恩納村";g.MUNI_ARRAY[47313]="47,沖縄県,47313,宜野座村";g.MUNI_ARRAY[47314]="47,沖縄県,47314,金武町";g.MUNI_ARRAY[47315]="47,沖縄県,47315,伊江村";g.MUNI_ARRAY[47324]="47,沖縄県,47324,読谷村";g.MUNI_ARRAY[47325]="47,沖縄県,47325,嘉手納町";g.MUNI_ARRAY[47326]="47,沖縄県,47326,北谷町";g.MUNI_ARRAY[47327]="47,沖縄県,47327,北中城村";g.MUNI_ARRAY[47328]="47,沖縄県,47328,中城村";g.MUNI_ARRAY[47329]="47,沖縄県,47329,西原町";g.MUNI_ARRAY[47348]="47,沖縄県,47348,与那原町";g.MUNI_ARRAY[47350]="47,沖縄県,47350,南風原町";g.MUNI_ARRAY[47353]="47,沖縄県,47353,渡嘉敷村";g.MUNI_ARRAY[47354]="47,沖縄県,47354,座間味村";g.MUNI_ARRAY[47355]="47,沖縄県,47355,粟国村";g.MUNI_ARRAY[47356]="47,沖縄県,47356,渡名喜村";g.MUNI_ARRAY[47357]="47,沖縄県,47357,南大東村";g.MUNI_ARRAY[47358]="47,沖縄県,47358,北大東村";g.MUNI_ARRAY[47359]="47,沖縄県,47359,伊平屋村";g.MUNI_ARRAY[47360]="47,沖縄県,47360,伊是名村";g.MUNI_ARRAY[47361]="47,沖縄県,47361,久米島町";g.MUNI_ARRAY[47362]="47,沖縄県,47362,八重瀬町";g.MUNI_ARRAY[47375]="47,沖縄県,47375,多良間村";g.MUNI_ARRAY[47381]="47,沖縄県,47381,竹富町";g.MUNI_ARRAY[47382]="47,沖縄県,47382,与那国町";const J8=t=>{const e=g.MUNI_ARRAY[t];if(!e)return"";const a=e.split(",");return`${a[1]}${a[3]}`},RP=async(t,e)=>{const a=`https://mreversegeocoder.gsi.go.jp/reverse-geocoder/LonLatToAddress?lat=${e}&lon=${t}`;try{const n=await fetch(a);if(n.ok){const c=await n.json();return`${J8(c.results.muniCd)}${c.results.lv01Nm==="－"?"":c.results.lv01Nm}`}else throw new Error("Failed to fetch")}catch(n){throw n instanceof Error?new Error(n.message):new Error("Unknown error occurred")}},IP=async t=>{const e=`https://msearch.gsi.go.jp/address-search/AddressSearch?q=${t}`;try{const a=await fetch(e,{method:"GET"});if(a.ok)return a.json()}catch(a){throw a instanceof Error?new Error(a.message):new Error("Unknown error occurred")}};var UP=(t,e,a)=>{e(null),a([])},EP=(t,e,a)=>e(W(a).id),FP=(t,e,a)=>st(e,{layerId:W(a).id,bool:!0},!0),TP=ft('<button class="duration-scale-100 relative grid h-[50px] w-[50px] shrink-0 cursor-pointer place-items-center overflow-hidden rounded-full bg-gray-500 transition-all hover:scale-110"><!></button>'),SP=ft('<div class="pointer-events-none absolute bottom-2 grid w-full place-items-center rounded-md"><div class="pointer-events-auto relative flex max-w-[calc(100vw-2rem)] gap-2 rounded-md bg-white p-4 px-6 transition-all duration-100"><button class="absolute right-0 top-0 rounded-full p-2"><!></button> <div class="flex grow flex-col gap-2"><div class="flex gap-2"></div> <div class="flex w-full flex-col items-center justify-center"><span class="text-accent text-xs"> </span> <span class="text-xs"> </span></div></div></div></div>');function YP(t,e){mi(e,!0);let a=si(e,"clickedLayerIds",15),n=si(e,"clickedLayerFeaturesData",15),c=$t(void 0),f=$t(void 0),u=ra(()=>a()?e.layerEntries.filter(F=>a().includes(F.id)):[]);Nr(()=>{(async()=>e.clickedLngLat&&(st(c,await void 0,!0),st(f,await void 0,!0),st(c,await RP(e.clickedLngLat.lng,e.clickedLngLat.lat),!0)))()});let s=$t(Jr({layerId:"",bool:!1}));const x=F=>{var N;!n()||!((N=n().find(D=>D.layerEntry.id===F))!=null&&N.feature)||(n(null),a([]))};Nr(()=>{if(W(s).layerId&&a().length>0){const F=da.getMap();if(!F)return;const M=F.getLayer(W(s).layerId);if(!M)return;let N=M.type;N==="symbol"&&(N="text"),F.setPaintProperty(`@highlight_${W(s).layerId}`,`${N}-color`,W(s).bool?"#00d5ff":Sh),F.moveLayer(`@highlight_${W(s).layerId}`)}});var B=vi(),I=kt(B);{var R=F=>{var M=SP(),N=Le(M),D=Le(N);D.__click=[UP,n,a];var V=Le(D);yi(V,{icon:"material-symbols:close-rounded",class:"h-4 w-4 text-black"}),Ee(D);var X=Oe(D,2),ee=Le(X);Ea(ee,29,()=>W(u),H=>H.id,(H,$)=>{var de=TP();de.__click=[EP,x,$],de.__mousemove=[FP,s,$];var ge=Le(de);G8(ge,{get layerEntry(){return W($)}}),Ee(de),fr("mouseleave",de,()=>st(s,{layerId:W($).id,bool:!1},!0)),b6(de,()=>V8,()=>({duration:200})),Xe(H,de)}),Ee(ee);var Ae=Oe(ee,2),ce=Le(Ae),ue=Le(ce);Ee(ce);var oe=Oe(ce,2),q=Le(oe,!0);Ee(oe),Ee(Ae),Ee(X),Ee(N),Ee(M),di((H,$)=>{xi(ue,`${H??""}, ${$??""}`),xi(q,W(c)??"-----")},[()=>e.clickedLngLat.lng.toFixed(6),()=>e.clickedLngLat.lat.toFixed(6)]),ba(3,M,()=>ds,()=>({duration:200,y:100,opacity:0})),Xe(F,M)};It(I,F=>{a().length>1&&e.clickedLngLat&&F(R)})}Xe(t,B),_i()}$a(["click","mousemove"]);var NP=ft('<div class="absolute translate-y-10 text-base font-bold svelte-1jmlcwl"> </div>'),LP=ft('<div class="pointer-events-none relative z-50 grid h-[100px] w-[100px] place-items-center svelte-1jmlcwl"><!> <div class="css-rotate-effect absolute h-[30px] w-[30px] rotate-45 border-2 border-white svelte-1jmlcwl"></div></div>');function PP(t,e){mi(e,!0);let a=$t(null),n=$t(null);Lr(()=>{W(a)&&e.show&&e.lngLat&&st(n,new Ps.Marker({element:W(a),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map))}),Nr(()=>{e.show?W(n)?W(n).setLngLat(e.lngLat):st(n,new Ps.Marker({element:W(a),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map)):W(n)&&(W(n).remove(),st(n,null))}),Th(()=>{W(a)&&F3.to(W(a),{scale:0,duration:.15,onComplete:()=>{var s;(s=W(n))==null||s.remove()}})});var c=vi(),f=kt(c);{var u=s=>{var x=LP(),B=Le(x);{var I=R=>{var F=NP(),M=Le(F,!0);Ee(F),di(N=>xi(M,N),[()=>e.feature.layer.metadata.titles?h6(e.feature.properties,e.feature.layer.metadata.titles):e.feature.layer.metadata.name]),Xe(R,F)};It(B,R=>{e.feature.layer.metadata&&R(I)})}Ha(2),Ee(x),Hn(x,R=>st(a,R),()=>W(a)),Xe(s,x)};It(f,s=>{e.show&&e.feature&&s(u)})}Xe(t,c),_i()}const QP={v:{type:"vector",minzoom:4,maxzoom:16,tiles:["https://cyberjapandata.gsi.go.jp/xyz/optimal_bvmap-v1/{z}/{x}/{y}.pbf"],attribution:"国土地理院最適化ベクトルタイル"}},kP=[{id:"行政区画界線25000所属界（所属を明示する境界線）",minzoom:11,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1221],layout:{"line-cap":"square"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[4,1,1,5],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":1.5}},{id:"行政区画界線25000市区町村界",minzoom:11,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1212],layout:{"line-cap":"square"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[6,2,1,2,1,2],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":1.5}},{id:"行政区画界線25000都府県界及び北海道総合振興局・振興局界",type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1211],layout:{"line-cap":"round"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[7,5,.1,5],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":["interpolate",["linear"],["zoom"],8,1,9,2.5]}},{id:"行政区画界線地方界",maxzoom:8,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1212],layout:{"line-cap":"square"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[7,5,.1,5],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":1}},{id:"行政区画界線国の所属界",maxzoom:8,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1221],layout:{"line-cap":"square"},paint:{"line-color":"rgba(34,24,21,1)","line-width":1}},{id:"水部表記線point",type:"symbol",source:"v","source-layer":"WRltLine",filter:["==",["geometry-type"],"Point"],layout:{"icon-allow-overlap":!0,"icon-image":"流水方向","icon-size":1.2,"icon-rotate":["get","vt_angle"],"icon-rotation-alignment":"map"}},{id:"注記道路番号",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]],layout:{"icon-allow-overlap":!0,"icon-image":["match",["get","vt_code"],2901,"国道番号-20",2903,"都市高速道路番号-20",2904,"高速道路番号-20",7701,"水面標高-20",""],"icon-size":["let","size",["match",["get","vt_code"],7701,.7,.5],["interpolate",["linear"],["zoom"],15,["var","size"],17,["*",2,["var","size"]]]],"symbol-sort-key":["match",["get","vt_code"],2901,88,2903,50,2904,49,7701,111,0],"text-allow-overlap":!1,"text-font":["Noto Sans JP Light"],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],2901,10,7701,12,8],["interpolate",["linear"],["zoom"],15,["var","size"],17,["*",2,["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100},paint:{"text-color":["match",["get","vt_code"],7701,"rgba(0,0,0,1)","rgba(255,255,255,1)"]}},{id:"注記シンボルなし縦ソート順100以上",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["==",["get","vt_arrng"],2]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["==",["get","vt_arrng"],2]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["==",["get","vt_arrng"],2]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"択捉島",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"東京",1,["さいたま","横浜","大阪"],2,3],1302,["match",["get","vt_text"],"千葉",4,5],1303,["match",["get","vt_text"],["稚内","根室","青森","盛岡","秋田","山形","福島","水戸","前橋","甲府","長野","富山","金沢","福井","岐阜","津","大津","奈良","和歌山","鳥取","松江","山口","徳島","高松","高知","佐賀","長崎","大分","宮崎","那覇"],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,521,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["var","size"],11,["match",["get","vt_code"],[1401,1402,1403],20,422,["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["var","size"],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["vertical"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"注記シンボルなし横ソート順100以上",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"択捉島",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"東京",1,["さいたま","横浜","大阪"],2,3],1302,["match",["get","vt_text"],"千葉",4,5],1303,["match",["get","vt_text"],["稚内","根室","青森","盛岡","秋田","山形","福島","水戸","前橋","甲府","長野","富山","金沢","福井","岐阜","津","大津","奈良","和歌山","鳥取","松江","山口","徳島","高松","高知","佐賀","長崎","大分","宮崎","那覇"],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,521,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["var","size"],11,["match",["get","vt_code"],[1401,1402,1403],20,422,["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["var","size"],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["horizontal"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"注記角度付き線",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"LineString"],["!",["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]],16,["all",["==",["geometry-type"],"LineString"],["in",["get","vt_flag17"],["literal",[0,1]]],["!",["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]],17,["all",["==",["geometry-type"],"LineString"],["in",["get","vt_flag17"],["literal",[1,2]]],["!",["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]]],layout:{"icon-allow-overlap":!1,"symbol-placement":"line-center","text-pitch-alignment":"viewport","text-rotation-alignment":"map","symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"択捉島",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"東京",1,["さいたま","横浜","大阪"],2,3],1302,["match",["get","vt_text"],"千葉",4,5],1303,["match",["get","vt_text"],["稚内","根室","青森","盛岡","秋田","山形","福島","水戸","前橋","甲府","長野","富山","金沢","福井","岐阜","津","大津","奈良","和歌山","鳥取","松江","山口","徳島","高松","高知","佐賀","長崎","大分","宮崎","那覇"],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,521,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["var","size"],11,["match",["get","vt_code"],[1401,1402,1403],20,[422,531],["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["var","size"],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-radial-offset":.5,"text-variable-anchor":["center"],"text-writing-mode":["horizontal","vertical"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"注記シンボルなし縦ソート順100未満",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["!=",["get","vt_text"],"森林文化アカデミー"],["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["==",["get","vt_arrng"],2]],16,["all",["!=",["get","vt_text"],"森林文化アカデミー"],["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["==",["get","vt_arrng"],2]],17,["all",["!=",["get","vt_text"],"森林文化アカデミー"],["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["==",["get","vt_arrng"],2]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"択捉島",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"東京",1,["さいたま","横浜","大阪"],2,3],1302,["match",["get","vt_text"],"千葉",4,5],1303,["match",["get","vt_text"],["稚内","根室","青森","盛岡","秋田","山形","福島","水戸","前橋","甲府","長野","富山","金沢","福井","岐阜","津","大津","奈良","和歌山","鳥取","松江","山口","徳島","高松","高知","佐賀","長崎","大分","宮崎","那覇"],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,521,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["match",["get","vt_code"],[343,352],["*",.9,["var","size"]],["var","size"]],11,["match",["get","vt_code"],[1401,1402,1403],20,[422,531],["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["match",["get","vt_code"],[412],["*",1.3,["var","size"]],["var","size"]],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["vertical"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"注記シンボルなし横ソート順100未満",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"択捉島",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"東京",1,["さいたま","横浜","大阪"],2,3],1302,["match",["get","vt_text"],"千葉",4,5],1303,["match",["get","vt_text"],["稚内","根室","青森","盛岡","秋田","山形","福島","水戸","前橋","甲府","長野","富山","金沢","福井","岐阜","津","大津","奈良","和歌山","鳥取","松江","山口","徳島","高松","高知","佐賀","長崎","大分","宮崎","那覇"],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,521,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["match",["get","vt_code"],[343,352],["*",.9,["var","size"]],["var","size"]],11,["match",["get","vt_code"],[1401,1402,1403],20,[422,531],["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["match",["get","vt_code"],[412],["*",1.3,["var","size"]],["var","size"]],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["horizontal"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}}],ex={sources:QP,layers:kP},DP=()=>ex.sources,zP=()=>ex.layers.filter(t=>t.type==="symbol"),tx=Pg.map(t=>t.id),ZP=t=>{if(!tx.includes(t))throw new Error(`Invalid ID: ${t}`)};m7.forEach(t=>{try{ZP(t)}catch(e){e instanceof Error&&(console.warn(`無効なidです: ${t}`),console.warn("有効なid: ",tx.join(", ")),console.error(e.message))}});const HP={"fill-opacity":.4,"fill-color":Sh,"fill-outline-color":"#ffffff"},OP={"line-color":Sh,"line-opacity":1,"line-width":5},XP={"circle-color":Sh,"circle-radius":10,"circle-stroke-width":5,"circle-stroke-color":"#ffffff"},VP={"text-color":Sh,"text-halo-color":"#FFFFFF","text-halo-width":10,"text-opacity":1},GP=t=>{if(!t)return;const e=t.layerEntry,{format:a,style:n,metaData:c,properties:f,interaction:u,type:s}=e;if(e.type==="raster")return;const x=`@highlight_${e.id}`,B=`${e.id}_source`,I={id:x,source:B,maxzoom:24,minzoom:0};let R;if(s==="vector"){if((a.type==="mvt"||a.type==="pmtiles")&&"sourceLayer"in c&&(I["source-layer"]=c.sourceLayer),R=ax(I,n),!R)return;switch(R.type){case"fill":R.paint=HP;break;case"line":R.paint=OP;break;case"circle":R.paint=XP;break;case"symbol":R.paint=VP;break}R.filter=["==",["id"],t.featureId]}return R},jP=t=>{const a=["match",["get",t.key]],{categories:n,values:c}=t.mapping;if(n.length!==c.length)return console.warn("ステップ式のカテゴリーと値の長さが一致しません。"),"#ff0000";for(let f=0;f<n.length;f++)a.push(n[f],c[f]);return a.push("#00000000"),a},KP=t=>{const e=t.key,a=["step",["case",["==",["get",e],null],-9999,["!=",["to-number",["get",e],-9999],-9999],["to-number",["get",e],-9999],-9999]],{categories:n,values:c}=Qg(t.mapping);return n.length!==c.length?(console.warn("ステップ式のカテゴリーと値の長さが一致しません。"),"#ff0000"):(a.push("#00000000"),n.forEach((f,u)=>{a.push(f,c[u])}),a)},rp=t=>{const e=t.key,a=t.expressions.find(n=>n.key===e);if(!a)return console.warn(`カラー設定が見つかりません: ${e}`),"#ff0000";switch(a.type){case"single":return a.mapping.value;case"match":return jP(a);case"step":return KP(a);default:return console.warn(`カラー設定が見つかりません: ${e}`),"#ff0000"}},$P=t=>{const a=["match",["get",t.key]],{categories:n,values:c}=t.mapping;if(n.length!==c.length)return console.warn("ステップ式のカテゴリーと値の長さが一致しません。"),0;for(let f=0;f<n.length;f++)a.push(n[f],c[f]);return a.push(0),a},qP=t=>{const e=t.key,a=["step",["case",["==",["get",e],null],-9999,["!=",["to-number",["get",e],-9999],-9999],["to-number",["get",e],-9999],-9999]],{categories:n,values:c}=Qg(t.mapping);return n.length!==c.length?(console.warn("ステップ式のカテゴリーと値の長さが一致しません。"),0):(a.push(0),n.forEach((f,u)=>{a.push(f,c[u])}),a)},WP=t=>{const{key:e,mapping:a}=t,[n,c]=a.range,[f,u]=a.values;return["interpolate",["linear"],["get",e],n,f,c,u]},ix=t=>{const e=t.key,a=t.expressions.find(n=>n.key===e);if(!a)return console.warn(`数値設定が見つかりません: ${e}`),0;switch(a.type){case"single":return a.mapping.value;case"match":return $P(a);case"linear":return WP(a);case"step":return qP(a);default:return console.warn(`数値設定が見つかりません: ${e}`),0}},f4=t=>["case",["boolean",["feature-state","selected"],!1],Sh,t],JP=t=>["case",["boolean",["feature-state","selected"],!1],.8,t],eQ=(t,e)=>{const a=e.default,n=rp(e.colors),c=f4(n),f=JP(e.opacity);return{...t,type:"fill",paint:{"fill-opacity":f,"fill-outline-color":"#00000000","fill-color":e.colors.show?c:"#00000000",...a&&a.fill?a.fill.paint:{}},layout:{...a&&a.fill?a.fill.layout:{}}}},tQ=(t,e)=>{const a=e.default,n=rp(e.colors),c=f4(n),f=ix(e.width);return{...t,type:"line",paint:{"line-opacity":e.colors.show?e.opacity:0,"line-color":e.colors.show?c:"#00000000","line-width":f,...e.lineStyle==="dashed"&&{"line-dasharray":[2,2]},...a&&a.line?a.line.paint:{}},layout:{...a&&a.line?a.line.layout:{}}}},iQ=(t,e,a)=>({...t,id:`${t.id}_outline`,type:"line",paint:{"line-color":e.color,"line-width":e.width,"line-opacity":a,...e.lineStyle==="dashed"&&{"line-dasharray":[2,2]}}}),aQ=(t,e)=>{const a=e.outline,n=e.default,c=rp(e.colors),f=f4(c),u=ix(e.radius);return{...t,type:"circle",paint:{"circle-opacity":e.colors.show?e.opacity:0,"circle-stroke-opacity":e.opacity,"circle-color":e.colors.show?f:"#00000000","circle-radius":u,"circle-stroke-color":a.show?e.outline.color:"#00000000","circle-stroke-width":a.show?e.outline.width:0,...n&&n.circle?n.circle.paint:{}},layout:{...n&&n.circle?n.circle.layout:{}}}},rQ=(t,e)=>{var u;const a=e.default,n=rp(e.colors),c=e.labels.key;return{...t,id:`${t.id}`,type:"symbol",paint:{"text-opacity":e.opacity,"icon-opacity":e.opacity,"text-color":n,"text-halo-color":"#FFFFFF","text-halo-width":2,...a&&a.symbol?a.symbol.paint:{}},layout:{"text-field":((u=e.labels.expressions.find(s=>s.key===c))==null?void 0:u.value)??"","text-size":12,"text-max-width":12,"text-font":["Noto Sans JP Light"],...a&&a.symbol?a.symbol.layout:{}}}},nQ=(t,e)=>{var B,I;const a=e.default,n=e.labels.key,c=e.labels.show,f=((B=e.labels.expressions.find(R=>R.key===n))==null?void 0:B.value)??"",u={"text-opacity":1,"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":2},s={"text-field":f,"text-size":12,"text-max-width":12,"text-font":["Noto Sans JP Light"]};return{...t,id:`${t.id}`,type:"symbol",paint:{...c?u:{},...c&&a&&a.symbol?a.symbol.paint:{},"icon-opacity":e.opacity},layout:{...c?s:{},...c&&a&&a.symbol?a.symbol.layout:{},"icon-image":["get","_prop_id"],"icon-size":((I=e.icon)==null?void 0:I.size)??.1,"icon-anchor":"bottom"}}},sQ=(t,e)=>{var f;const a=e.default,n=e.labels.key;return{...t,id:`${t.id}_label`,type:"symbol",paint:{"text-opacity":1,"icon-opacity":1,"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":2,...a?a.symbol.paint:{}},layout:{"text-field":((f=e.labels.expressions.find(u=>u.key===n))==null?void 0:f.value)??"","text-size":12,"text-max-width":12,"text-font":["Noto Sans JP Light"],...a?a.symbol.layout:{}}}},ax=(t,e)=>{var a;switch(e.type){case"fill":return eQ(t,e);case"line":return tQ(t,e);case"circle":switch(e.markerType){case"icon":return(a=e.icon)!=null&&a.show?nQ(t,e):void 0;case"circle":return aQ(t,e);default:console.warn(`未対応の style.markerType: ${e.markerType} （layer.id: ${t.id}）`);return}case"symbol":return rQ(t,e);default:console.warn(`対応してないstyle.typeのデータ: ${t.id}`);return}},gv=(t,e="main")=>{const a=[],n=[],c=[],f=[];qd.clear(),t.filter(s=>s.style.visible).reverse().forEach(s=>{var V;const x=e==="preview"?`${s.id}_${e}`:`${s.id}`,B=`${s.id}_${e}_source`,{format:I,style:R,metaData:F,interaction:M,type:N}=s,D={id:x,source:B,maxzoom:24,minzoom:0,metadata:{name:F.name,location:F.location,titles:s.type==="vector"?s.properties.titles:null}};switch(N){case"raster":{M.clickable&&f.push(x),R.type==="basemap"?a.push({...D,type:"raster",paint:{"raster-opacity":R.opacity,"raster-hue-rotate":R.hueRotate,"raster-brightness-max":R.brightnessMax,"raster-brightness-min":R.brightnessMin,"raster-saturation":R.saturation,"raster-contrast":R.contrast}}):R.type==="categorical"?a.push({...D,type:"raster",paint:{"raster-opacity":R.opacity}}):R.type==="dem"&&a.push({...D,type:"raster",paint:{"raster-opacity":R.opacity}});break}case"vector":{M.clickable&&(c.push(x),"sourceLayer"in F?qd.set(x,{source:B,sourceLayer:F.sourceLayer}):qd.set(x,{source:B})),(I.type==="mvt"||I.type==="pmtiles")&&"sourceLayer"in F&&(D["source-layer"]=F.sourceLayer);const X=ax(D,R);if(X&&a.push(X),R.type==="fill"&&R.outline.show){const ee=iQ(D,R.outline,R.opacity);a.push(ee)}if(R.labels.show&&!(R.type==="circle"&&R.markerType==="icon"&&((V=R.icon)!=null&&V.show))){const ee=sQ(D,R);n.push(ee)}break}default:console.warn(`対応してないtypeのデータ: ${x}`);break}}),d6.set(c),_7.set(f);const u=Zo(r0)&&e==="main"?zP():[];return[...a,...u,...n]},oQ=t=>t.includes("{-y}")?"tms":"xyz",pv=async(t,e="main")=>{const a=await Promise.all(t.map(async(s,x)=>{const B={},I=`${s.id}_${e}_source`,{metaData:R,format:F,type:M,style:N}=s;switch(M){case"raster":{F.type==="image"?N.type==="dem"?B[I]={type:"raster",tiles:[`webgl://${F.url}?x={x}&y={y}&z={z}`],maxzoom:R.maxZoom,minzoom:R.minZoom,tileSize:R.tileSize,attribution:R.attribution,bounds:R.bounds??[-180,-85.051129,180,85.051129]}:B[I]={type:"raster",tiles:[F.url],maxzoom:R.maxZoom,minzoom:R.minZoom,scheme:oQ(F.url),tileSize:R.tileSize,attribution:R.attribution,bounds:R.bounds??[-180,-85.051129,180,85.051129]}:F.type==="pmtiles"&&(B[I]={type:"raster",url:`pmtiles://${F.url}`,maxzoom:R.maxZoom,minzoom:"minZoom"in R?R.minZoom:void 0,tileSize:R.tileSize,attribution:R.attribution,bounds:R.bounds??[-180,-85.051129,180,85.051129]});break}case"vector":{if(F.type==="geojson"||F.type==="fgb"){let D="";Bd.has(s.id)?D=Bd.get(s.id):F.type==="fgb"?(D=await E3(F.url),Bd.set(s.id,D)):F.type==="geojson"&&(D=await b7(F.url),Bd.set(s.id,D)),B[I]={type:"geojson",data:D,generateId:!0,maxzoom:R.maxZoom,attribution:R.attribution}}else F.type==="mvt"?B[I]={type:"vector",tiles:[F.url],maxzoom:R.maxZoom,minzoom:"minZoom"in R?R.minZoom:void 0,promoteId:"promoteId"in R?R.promoteId:void 0,attribution:R.attribution,bounds:R.bounds??[-180,-85.051129,180,85.051129]}:F.type==="pmtiles"&&(B[I]={type:"vector",url:`pmtiles://${F.url}`,maxzoom:R.maxZoom,minzoom:"minZoom"in R?R.minZoom:void 0,promoteId:"promoteId"in R?R.promoteId:void 0,attribution:R.attribution,bounds:R.bounds??[-180,-85.051129,180,85.051129]});break}default:console.warn(`Unknown layer: ${I}`);break}return{index:x,items:B}})),n=new Set,c=a.sort((s,x)=>s.index-x.index).map(s=>{const x=Object.keys(s.items)[0],I=s.items[x].attribution;return n.add(I),s.items}),f=Object.assign({},...c);n.size>0&&u6.set(Array.from(n));const u=Zo(r0)&&e==="main"?DP():{};return{...f,...u}};var AQ=ft("<!> <!> <!> <!> <!>",1),lQ=ft('<div role="region" class="relative h-full w-full"><div></div> <!> <!> <!> <!></div> <!>',1);function cQ(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(SA,"$isTerrain3d",a),f=()=>zi(Pl,"$mapMode",a),u=()=>zi(LA,"$isStreetView",a);let s=si(e,"layerEntries",15),x=si(e,"tempLayerEntries",15),B=si(e,"showDataEntry",15),I=si(e,"featureMenuData",15),R=si(e,"showSelectionMarker",15),F=si(e,"selectionMarkerLngLat",15),M=$t(null),N=$t(null),D=$t(Jr([])),V=null,X=$t(!1),ee=$t(null),Ae=$t(null),ce=$t(!1),ue=$t(null),oe=$t(Jr([]));const q=[136.91278,35.543576,136.92986,35.556704];Jr({type:"canvas",canvas:"canvas-layer",coordinates:[[q[0],q[3]],[q[2],q[3]],[q[2],q[1]],[q[0],q[1]]]});const H=async Qe=>{const tt=await pv(Qe),bt=await gv(Qe);let dt=B()?await pv([B()],"preview"):{};B()&&(dt={...dt,tile_grid:{type:"raster",tiles:["/tile_grid.png"],tileSize:256}});let _t=B()?await gv([B()],"preview"):[];B()&&(_t=[{id:"tile_grid",type:"raster",source:"tile_grid",paint:{"raster-opacity":.5}},..._t]);const zt={source:"terrain",exaggeration:1};return{version:8,glyphs:y7,sprite:"https://gsi-cyberjapan.github.io/optimal_bvmap/sprite/std",sources:{terrain:{type:"raster-dem",tiles:[`terrain://${dr.url}?x={x}&y={y}&z={z}`],tileSize:256,minzoom:dr.sourceMinZoom,maxzoom:dr.sourceMaxZoom,attribution:dr.attribution,bounds:dr.bbox},..._P,...tt,tile_index:{type:"vector",maxzoom:22,tiles:["tile_index://http://{z}/{x}/{y}.png?x={x}&y={y}&z={z}"]},...dt},layers:[...bt,{id:"@overlay_layer",type:"background",paint:{"background-color":"#000000","background-opacity":B()?.7:0}},..._t,bP,yP],sky:{"sky-color":"#2baeff","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#2222ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]},terrain:c()?zt:void 0}};eg.subscribe(Qe=>{const tt=s().filter(bt=>Qe.includes(bt.id));s(tt.sort((bt,dt)=>Qe.indexOf(bt.id)-Qe.indexOf(dt.id)))}),Lr(async()=>{if(!s())return;const Qe=await H(s());!Qe||!W(M)||da.init(W(M),Qe)});const $=M6(async Qe=>{const tt=await H(Qe);da.setStyle(tt),da.terrainReload()},100);Nr(()=>{const Qe=Q7(s());$(Qe)}),Nr(()=>{B(),$(s())}),r0.subscribe(()=>{$(s())});const de=(Qe,tt)=>{if(W(N)){if(!Qe||!tt){st(X,!1);return}Qe&&(st(ee,Qe.lngLat,!0),st(Ae,tt,!0),st(X,!0))}};Nr(()=>{I()||R(!1)});const ge=()=>{const Qe=da.getMap();if(!Qe)return;Qe.getLayersOrder().forEach(bt=>{bt.startsWith("@highlight_")&&Qe.removeLayer(bt)})};Nr(()=>{if(W(oe)){const Qe=da.getMap();if(!Qe)return;W(oe).forEach(({layerEntry:tt,feature:bt,featureId:dt})=>{const _t=GP({layerEntry:tt,featureId:dt});_t&&Qe.addLayer(_t)})}else ge()}),da.onInitialized(Qe=>{st(N,Qe,!0)});const ye=Qe=>{Qe.preventDefault(),st(ce,!0)},we=Qe=>{Qe.preventDefault(),st(ce,!1)},Ve=async Qe=>{Qe.preventDefault(),st(ce,!1);const tt=Qe.dataTransfer;if(!tt)return;const bt=tt.files;if(!bt||bt.length===0)return;const dt=bt[0];st(ue,dt,!0)};var ut=lQ(),at=kt(ut),et=Le(at);Hn(et,Qe=>st(M,Qe),()=>W(M));var xt=Oe(et,2);uP(xt);var Mt=Oe(xt,2);mP(Mt,{});var Yt=Oe(Mt,2);YP(Yt,{get layerEntries(){return s()},get clickedLngLat(){return V},get clickedLayerIds(){return W(D)},set clickedLayerIds(Qe){st(D,Qe,!0)},get featureMenuData(){return I()},set featureMenuData(Qe){I(Qe)},get clickedLayerFeaturesData(){return W(oe)},set clickedLayerFeaturesData(Qe){st(oe,Qe,!0)}});var rt=Oe(Yt,2);nP(rt),Ee(at);var pt=Oe(at,2);{var je=Qe=>{var tt=AQ(),bt=kt(tt);lP(bt,{get map(){return W(N)},get isDragover(){return W(ce)},set isDragover(Ct){st(ce,Ct,!0)},get dropFile(){return W(ue)},set dropFile(Ct){st(ue,Ct,!0)},get tempLayerEntries(){return x()},set tempLayerEntries(Ct){x(Ct)},get showDataEntry(){return B()},set showDataEntry(Ct){B(Ct)}});var dt=Oe(bt,2);xP(dt,{get map(){return W(N)}});var _t=Oe(dt,2);MP(_t,{get map(){return W(N)},get showDataEntry(){return B()},get layerEntries(){return s()},toggleTooltip:de,get markerLngLat(){return F()},set markerLngLat(Ct){F(Ct)},get featureMenuData(){return I()},set featureMenuData(Ct){I(Ct)},get showMarker(){return R()},set showMarker(Ct){R(Ct)},get clickedLayerIds(){return W(D)},set clickedLayerIds(Ct){st(D,Ct,!0)}});var zt=Oe(_t,2);_b(zt,F,Ct=>{BP(Ct,{get map(){return W(N)},get show(){return R()},set show(Zt){R(Zt)},get lngLat(){return F()},set lngLat(Zt){F(Zt)}})});var Qt=Oe(zt,2);_b(Qt,()=>W(X),Ct=>{PP(Ct,{get map(){return W(N)},get feature(){return W(Ae)},get show(){return W(X)},set show(Zt){st(X,Zt,!0)},get lngLat(){return W(ee)},set lngLat(Zt){st(ee,Zt,!0)}})}),Xe(Qe,tt)};It(pt,Qe=>{W(N)&&Qe(je)})}di(()=>Hr(et,1,`c-map-satellite absolute grow bg-black transition-opacity duration-500 ${(!e.showMapCanvas&&f()==="view"?"pointer-events-none bottom-0 left-0 h-full w-full opacity-0":u()&&f()==="small"?"bottom-2 left-2 z-20 h-[200px] w-[300px] overflow-hidden rounded-md border-4 border-white bg-white":"bottom-0 left-0 h-full w-full opacity-100")??""}`,"svelte-1rq0kpq")),fr("drop",at,Ve),fr("dragover",at,ye),fr("dragleave",at,we),Xe(t,ut),_i(),n()}var hQ=ft("<div> </div>");function uQ(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(Q1,"$notificationMessage",a);let f,u=$t("");Q1.subscribe(I=>{I&&!I.persistent&&(clearTimeout(f),f=setTimeout(()=>{Q1.set(null)},3e3)),st(u,(I==null?void 0:I.type)==="error"?"bg-red-500 text-base":(I==null?void 0:I.type)==="success"?"bg-accent text-base":(I==null?void 0:I.type)==="info"?"bg-main text-base":"",!0)}),Lr(()=>()=>{clearTimeout(f)});var s=vi(),x=kt(s);{var B=I=>{var R=hQ(),F=Le(R,!0);Ee(R),di(()=>{Hr(R,1,`pointer-events-none absolute right-0 top-[90px] z-30 grid place-items-center rounded-l-full px-6 py-2 shadow-md ${W(u)??""}`),xi(F,c().message)}),ba(3,R,()=>ds,()=>({duration:300,x:200})),Xe(I,R)};It(x,I=>{c()&&I(B)})}Xe(t,s),_i(),n()}/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:rx,setPrototypeOf:mv,isFrozen:dQ,getPrototypeOf:fQ,getOwnPropertyDescriptor:gQ}=Object;let{freeze:dn,seal:us,create:nx}=Object,{apply:cm,construct:hm}=typeof Reflect<"u"&&Reflect;dn||(dn=function(e){return e});us||(us=function(e){return e});cm||(cm=function(e,a,n){return e.apply(a,n)});hm||(hm=function(e,a){return new e(...a)});const v1=fn(Array.prototype.forEach),pQ=fn(Array.prototype.lastIndexOf),_v=fn(Array.prototype.pop),pd=fn(Array.prototype.push),mQ=fn(Array.prototype.splice),X1=fn(String.prototype.toLowerCase),p3=fn(String.prototype.toString),bv=fn(String.prototype.match),md=fn(String.prototype.replace),_Q=fn(String.prototype.indexOf),bQ=fn(String.prototype.trim),Es=fn(Object.prototype.hasOwnProperty),ln=fn(RegExp.prototype.test),_d=yQ(TypeError);function fn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var a=arguments.length,n=new Array(a>1?a-1:0),c=1;c<a;c++)n[c-1]=arguments[c];return cm(t,e,n)}}function yQ(t){return function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return hm(t,a)}}function Vi(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X1;mv&&mv(t,null);let n=e.length;for(;n--;){let c=e[n];if(typeof c=="string"){const f=a(c);f!==c&&(dQ(e)||(e[n]=f),c=f)}t[c]=!0}return t}function vQ(t){for(let e=0;e<t.length;e++)Es(t,e)||(t[e]=null);return t}function Fl(t){const e=nx(null);for(const[a,n]of rx(t))Es(t,a)&&(Array.isArray(n)?e[a]=vQ(n):n&&typeof n=="object"&&n.constructor===Object?e[a]=Fl(n):e[a]=n);return e}function bd(t,e){for(;t!==null;){const n=gQ(t,e);if(n){if(n.get)return fn(n.get);if(typeof n.value=="function")return fn(n.value)}t=fQ(t)}function a(){return null}return a}const yv=dn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),m3=dn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_3=dn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xQ=dn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),b3=dn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wQ=dn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),vv=dn(["#text"]),xv=dn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),y3=dn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wv=dn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),x1=dn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),BQ=us(/\{\{[\w\W]*|[\w\W]*\}\}/gm),CQ=us(/<%[\w\W]*|[\w\W]*%>/gm),MQ=us(/\$\{[\w\W]*/gm),RQ=us(/^data-[\-\w.\u00B7-\uFFFF]+$/),IQ=us(/^aria-[\-\w]+$/),sx=us(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),UQ=us(/^(?:\w+script|data):/i),EQ=us(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ox=us(/^html$/i),FQ=us(/^[a-z][.\w]*(-[.\w]+)+$/i);var Bv=Object.freeze({__proto__:null,ARIA_ATTR:IQ,ATTR_WHITESPACE:EQ,CUSTOM_ELEMENT:FQ,DATA_ATTR:RQ,DOCTYPE_NAME:ox,ERB_EXPR:CQ,IS_ALLOWED_URI:sx,IS_SCRIPT_OR_DATA:UQ,MUSTACHE_EXPR:BQ,TMPLIT_EXPR:MQ});const yd={element:1,text:3,progressingInstruction:7,comment:8,document:9},TQ=function(){return typeof window>"u"?null:window},SQ=function(e,a){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const c="data-tt-policy-suffix";a&&a.hasAttribute(c)&&(n=a.getAttribute(c));const f="dompurify"+(n?"#"+n:"");try{return e.createPolicy(f,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}},Cv=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ax(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:TQ();const e=Xt=>Ax(Xt);if(e.version="3.2.5",e.removed=[],!t||!t.document||t.document.nodeType!==yd.document||!t.Element)return e.isSupported=!1,e;let{document:a}=t;const n=a,c=n.currentScript,{DocumentFragment:f,HTMLTemplateElement:u,Node:s,Element:x,NodeFilter:B,NamedNodeMap:I=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:R,DOMParser:F,trustedTypes:M}=t,N=x.prototype,D=bd(N,"cloneNode"),V=bd(N,"remove"),X=bd(N,"nextSibling"),ee=bd(N,"childNodes"),Ae=bd(N,"parentNode");if(typeof u=="function"){const Xt=a.createElement("template");Xt.content&&Xt.content.ownerDocument&&(a=Xt.content.ownerDocument)}let ce,ue="";const{implementation:oe,createNodeIterator:q,createDocumentFragment:H,getElementsByTagName:$}=a,{importNode:de}=n;let ge=Cv();e.isSupported=typeof rx=="function"&&typeof Ae=="function"&&oe&&oe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ye,ERB_EXPR:we,TMPLIT_EXPR:Ve,DATA_ATTR:ut,ARIA_ATTR:at,IS_SCRIPT_OR_DATA:et,ATTR_WHITESPACE:xt,CUSTOM_ELEMENT:Mt}=Bv;let{IS_ALLOWED_URI:Yt}=Bv,rt=null;const pt=Vi({},[...yv,...m3,..._3,...b3,...vv]);let je=null;const Qe=Vi({},[...xv,...y3,...wv,...x1]);let tt=Object.seal(nx(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bt=null,dt=null,_t=!0,zt=!0,Qt=!1,Ct=!0,Zt=!1,Ai=!0,Nt=!1,Dt=!1,li=!1,pi=!1,Kt=!1,gt=!1,oi=!0,qi=!1;const Si="user-content-";let fa=!0,Ri=!1,ea={},wi=null;const ji=Vi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ha=null;const Cr=Vi({},["audio","video","img","source","image","track"]);let Oa=null;const Xa=Vi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),sa="http://www.w3.org/1998/Math/MathML",na="http://www.w3.org/2000/svg",va="http://www.w3.org/1999/xhtml";let ze=va,ae=!1,re=null;const fe=Vi({},[sa,na,va],p3);let ve=Vi({},["mi","mo","mn","ms","mtext"]),se=Vi({},["annotation-xml"]);const ke=Vi({},["title","style","font","a","script"]);let Ge=null;const Ie=["application/xhtml+xml","text/html"],We="text/html";let Te=null,ne=null;const Se=a.createElement("form"),Ue=function(De){return De instanceof RegExp||De instanceof Function},Ze=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ne&&ne===De)){if((!De||typeof De!="object")&&(De={}),De=Fl(De),Ge=Ie.indexOf(De.PARSER_MEDIA_TYPE)===-1?We:De.PARSER_MEDIA_TYPE,Te=Ge==="application/xhtml+xml"?p3:X1,rt=Es(De,"ALLOWED_TAGS")?Vi({},De.ALLOWED_TAGS,Te):pt,je=Es(De,"ALLOWED_ATTR")?Vi({},De.ALLOWED_ATTR,Te):Qe,re=Es(De,"ALLOWED_NAMESPACES")?Vi({},De.ALLOWED_NAMESPACES,p3):fe,Oa=Es(De,"ADD_URI_SAFE_ATTR")?Vi(Fl(Xa),De.ADD_URI_SAFE_ATTR,Te):Xa,ha=Es(De,"ADD_DATA_URI_TAGS")?Vi(Fl(Cr),De.ADD_DATA_URI_TAGS,Te):Cr,wi=Es(De,"FORBID_CONTENTS")?Vi({},De.FORBID_CONTENTS,Te):ji,bt=Es(De,"FORBID_TAGS")?Vi({},De.FORBID_TAGS,Te):{},dt=Es(De,"FORBID_ATTR")?Vi({},De.FORBID_ATTR,Te):{},ea=Es(De,"USE_PROFILES")?De.USE_PROFILES:!1,_t=De.ALLOW_ARIA_ATTR!==!1,zt=De.ALLOW_DATA_ATTR!==!1,Qt=De.ALLOW_UNKNOWN_PROTOCOLS||!1,Ct=De.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Zt=De.SAFE_FOR_TEMPLATES||!1,Ai=De.SAFE_FOR_XML!==!1,Nt=De.WHOLE_DOCUMENT||!1,pi=De.RETURN_DOM||!1,Kt=De.RETURN_DOM_FRAGMENT||!1,gt=De.RETURN_TRUSTED_TYPE||!1,li=De.FORCE_BODY||!1,oi=De.SANITIZE_DOM!==!1,qi=De.SANITIZE_NAMED_PROPS||!1,fa=De.KEEP_CONTENT!==!1,Ri=De.IN_PLACE||!1,Yt=De.ALLOWED_URI_REGEXP||sx,ze=De.NAMESPACE||va,ve=De.MATHML_TEXT_INTEGRATION_POINTS||ve,se=De.HTML_INTEGRATION_POINTS||se,tt=De.CUSTOM_ELEMENT_HANDLING||{},De.CUSTOM_ELEMENT_HANDLING&&Ue(De.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tt.tagNameCheck=De.CUSTOM_ELEMENT_HANDLING.tagNameCheck),De.CUSTOM_ELEMENT_HANDLING&&Ue(De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tt.attributeNameCheck=De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),De.CUSTOM_ELEMENT_HANDLING&&typeof De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tt.allowCustomizedBuiltInElements=De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zt&&(zt=!1),Kt&&(pi=!0),ea&&(rt=Vi({},vv),je=[],ea.html===!0&&(Vi(rt,yv),Vi(je,xv)),ea.svg===!0&&(Vi(rt,m3),Vi(je,y3),Vi(je,x1)),ea.svgFilters===!0&&(Vi(rt,_3),Vi(je,y3),Vi(je,x1)),ea.mathMl===!0&&(Vi(rt,b3),Vi(je,wv),Vi(je,x1))),De.ADD_TAGS&&(rt===pt&&(rt=Fl(rt)),Vi(rt,De.ADD_TAGS,Te)),De.ADD_ATTR&&(je===Qe&&(je=Fl(je)),Vi(je,De.ADD_ATTR,Te)),De.ADD_URI_SAFE_ATTR&&Vi(Oa,De.ADD_URI_SAFE_ATTR,Te),De.FORBID_CONTENTS&&(wi===ji&&(wi=Fl(wi)),Vi(wi,De.FORBID_CONTENTS,Te)),fa&&(rt["#text"]=!0),Nt&&Vi(rt,["html","head","body"]),rt.table&&(Vi(rt,["tbody"]),delete bt.tbody),De.TRUSTED_TYPES_POLICY){if(typeof De.TRUSTED_TYPES_POLICY.createHTML!="function")throw _d('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof De.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw _d('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ce=De.TRUSTED_TYPES_POLICY,ue=ce.createHTML("")}else ce===void 0&&(ce=SQ(M,c)),ce!==null&&typeof ue=="string"&&(ue=ce.createHTML(""));dn&&dn(De),ne=De}},ct=Vi({},[...m3,..._3,...xQ]),Bt=Vi({},[...b3,...wQ]),He=function(De){let Ft=Ae(De);(!Ft||!Ft.tagName)&&(Ft={namespaceURI:ze,tagName:"template"});const ni=X1(De.tagName),Ui=X1(Ft.tagName);return re[De.namespaceURI]?De.namespaceURI===na?Ft.namespaceURI===va?ni==="svg":Ft.namespaceURI===sa?ni==="svg"&&(Ui==="annotation-xml"||ve[Ui]):!!ct[ni]:De.namespaceURI===sa?Ft.namespaceURI===va?ni==="math":Ft.namespaceURI===na?ni==="math"&&se[Ui]:!!Bt[ni]:De.namespaceURI===va?Ft.namespaceURI===na&&!se[Ui]||Ft.namespaceURI===sa&&!ve[Ui]?!1:!Bt[ni]&&(ke[ni]||!ct[ni]):!!(Ge==="application/xhtml+xml"&&re[De.namespaceURI]):!1},mt=function(De){pd(e.removed,{element:De});try{Ae(De).removeChild(De)}catch{V(De)}},Wt=function(De,Ft){try{pd(e.removed,{attribute:Ft.getAttributeNode(De),from:Ft})}catch{pd(e.removed,{attribute:null,from:Ft})}if(Ft.removeAttribute(De),De==="is")if(pi||Kt)try{mt(Ft)}catch{}else try{Ft.setAttribute(De,"")}catch{}},ei=function(De){let Ft=null,ni=null;if(li)De="<remove></remove>"+De;else{const Zi=bv(De,/^[\r\n\t ]+/);ni=Zi&&Zi[0]}Ge==="application/xhtml+xml"&&ze===va&&(De='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+De+"</body></html>");const Ui=ce?ce.createHTML(De):De;if(ze===va)try{Ft=new F().parseFromString(Ui,Ge)}catch{}if(!Ft||!Ft.documentElement){Ft=oe.createDocument(ze,"template",null);try{Ft.documentElement.innerHTML=ae?ue:Ui}catch{}}const Ei=Ft.body||Ft.documentElement;return De&&ni&&Ei.insertBefore(a.createTextNode(ni),Ei.childNodes[0]||null),ze===va?$.call(Ft,Nt?"html":"body")[0]:Nt?Ft.documentElement:Ei},ai=function(De){return q.call(De.ownerDocument||De,De,B.SHOW_ELEMENT|B.SHOW_COMMENT|B.SHOW_TEXT|B.SHOW_PROCESSING_INSTRUCTION|B.SHOW_CDATA_SECTION,null)},Je=function(De){return De instanceof R&&(typeof De.nodeName!="string"||typeof De.textContent!="string"||typeof De.removeChild!="function"||!(De.attributes instanceof I)||typeof De.removeAttribute!="function"||typeof De.setAttribute!="function"||typeof De.namespaceURI!="string"||typeof De.insertBefore!="function"||typeof De.hasChildNodes!="function")},Tt=function(De){return typeof s=="function"&&De instanceof s};function Ot(Xt,De,Ft){v1(Xt,ni=>{ni.call(e,De,Ft,ne)})}const ta=function(De){let Ft=null;if(Ot(ge.beforeSanitizeElements,De,null),Je(De))return mt(De),!0;const ni=Te(De.nodeName);if(Ot(ge.uponSanitizeElement,De,{tagName:ni,allowedTags:rt}),De.hasChildNodes()&&!Tt(De.firstElementChild)&&ln(/<[/\w!]/g,De.innerHTML)&&ln(/<[/\w!]/g,De.textContent)||De.nodeType===yd.progressingInstruction||Ai&&De.nodeType===yd.comment&&ln(/<[/\w]/g,De.data))return mt(De),!0;if(!rt[ni]||bt[ni]){if(!bt[ni]&&Bi(ni)&&(tt.tagNameCheck instanceof RegExp&&ln(tt.tagNameCheck,ni)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(ni)))return!1;if(fa&&!wi[ni]){const Ui=Ae(De)||De.parentNode,Ei=ee(De)||De.childNodes;if(Ei&&Ui){const Zi=Ei.length;for(let Va=Zi-1;Va>=0;--Va){const Pr=D(Ei[Va],!0);Pr.__removalCount=(De.__removalCount||0)+1,Ui.insertBefore(Pr,X(De))}}}return mt(De),!0}return De instanceof x&&!He(De)||(ni==="noscript"||ni==="noembed"||ni==="noframes")&&ln(/<\/no(script|embed|frames)/i,De.innerHTML)?(mt(De),!0):(Zt&&De.nodeType===yd.text&&(Ft=De.textContent,v1([ye,we,Ve],Ui=>{Ft=md(Ft,Ui," ")}),De.textContent!==Ft&&(pd(e.removed,{element:De.cloneNode()}),De.textContent=Ft)),Ot(ge.afterSanitizeElements,De,null),!1)},oa=function(De,Ft,ni){if(oi&&(Ft==="id"||Ft==="name")&&(ni in a||ni in Se))return!1;if(!(zt&&!dt[Ft]&&ln(ut,Ft))){if(!(_t&&ln(at,Ft))){if(!je[Ft]||dt[Ft]){if(!(Bi(De)&&(tt.tagNameCheck instanceof RegExp&&ln(tt.tagNameCheck,De)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(De))&&(tt.attributeNameCheck instanceof RegExp&&ln(tt.attributeNameCheck,Ft)||tt.attributeNameCheck instanceof Function&&tt.attributeNameCheck(Ft))||Ft==="is"&&tt.allowCustomizedBuiltInElements&&(tt.tagNameCheck instanceof RegExp&&ln(tt.tagNameCheck,ni)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(ni))))return!1}else if(!Oa[Ft]){if(!ln(Yt,md(ni,xt,""))){if(!((Ft==="src"||Ft==="xlink:href"||Ft==="href")&&De!=="script"&&_Q(ni,"data:")===0&&ha[De])){if(!(Qt&&!ln(et,md(ni,xt,"")))){if(ni)return!1}}}}}}return!0},Bi=function(De){return De!=="annotation-xml"&&bv(De,Mt)},Gt=function(De){Ot(ge.beforeSanitizeAttributes,De,null);const{attributes:Ft}=De;if(!Ft||Je(De))return;const ni={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:je,forceKeepAttr:void 0};let Ui=Ft.length;for(;Ui--;){const Ei=Ft[Ui],{name:Zi,namespaceURI:Va,value:Pr}=Ei,mr=Te(Zi);let Fa=Zi==="value"?Pr:bQ(Pr);if(ni.attrName=mr,ni.attrValue=Fa,ni.keepAttr=!0,ni.forceKeepAttr=void 0,Ot(ge.uponSanitizeAttribute,De,ni),Fa=ni.attrValue,qi&&(mr==="id"||mr==="name")&&(Wt(Zi,De),Fa=Si+Fa),Ai&&ln(/((--!?|])>)|<\/(style|title)/i,Fa)){Wt(Zi,De);continue}if(ni.forceKeepAttr||(Wt(Zi,De),!ni.keepAttr))continue;if(!Ct&&ln(/\/>/i,Fa)){Wt(Zi,De);continue}Zt&&v1([ye,we,Ve],GA=>{Fa=md(Fa,GA," ")});const VA=Te(De.nodeName);if(oa(VA,mr,Fa)){if(ce&&typeof M=="object"&&typeof M.getAttributeType=="function"&&!Va)switch(M.getAttributeType(VA,mr)){case"TrustedHTML":{Fa=ce.createHTML(Fa);break}case"TrustedScriptURL":{Fa=ce.createScriptURL(Fa);break}}try{Va?De.setAttributeNS(Va,Zi,Fa):De.setAttribute(Zi,Fa),Je(De)?mt(De):_v(e.removed)}catch{}}}Ot(ge.afterSanitizeAttributes,De,null)},Bn=function Xt(De){let Ft=null;const ni=ai(De);for(Ot(ge.beforeSanitizeShadowDOM,De,null);Ft=ni.nextNode();)Ot(ge.uponSanitizeShadowNode,Ft,null),ta(Ft),Gt(Ft),Ft.content instanceof f&&Xt(Ft.content);Ot(ge.afterSanitizeShadowDOM,De,null)};return e.sanitize=function(Xt){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ft=null,ni=null,Ui=null,Ei=null;if(ae=!Xt,ae&&(Xt="<!-->"),typeof Xt!="string"&&!Tt(Xt))if(typeof Xt.toString=="function"){if(Xt=Xt.toString(),typeof Xt!="string")throw _d("dirty is not a string, aborting")}else throw _d("toString is not a function");if(!e.isSupported)return Xt;if(Dt||Ze(De),e.removed=[],typeof Xt=="string"&&(Ri=!1),Ri){if(Xt.nodeName){const Pr=Te(Xt.nodeName);if(!rt[Pr]||bt[Pr])throw _d("root node is forbidden and cannot be sanitized in-place")}}else if(Xt instanceof s)Ft=ei("<!---->"),ni=Ft.ownerDocument.importNode(Xt,!0),ni.nodeType===yd.element&&ni.nodeName==="BODY"||ni.nodeName==="HTML"?Ft=ni:Ft.appendChild(ni);else{if(!pi&&!Zt&&!Nt&&Xt.indexOf("<")===-1)return ce&&gt?ce.createHTML(Xt):Xt;if(Ft=ei(Xt),!Ft)return pi?null:gt?ue:""}Ft&&li&&mt(Ft.firstChild);const Zi=ai(Ri?Xt:Ft);for(;Ui=Zi.nextNode();)ta(Ui),Gt(Ui),Ui.content instanceof f&&Bn(Ui.content);if(Ri)return Xt;if(pi){if(Kt)for(Ei=H.call(Ft.ownerDocument);Ft.firstChild;)Ei.appendChild(Ft.firstChild);else Ei=Ft;return(je.shadowroot||je.shadowrootmode)&&(Ei=de.call(n,Ei,!0)),Ei}let Va=Nt?Ft.outerHTML:Ft.innerHTML;return Nt&&rt["!doctype"]&&Ft.ownerDocument&&Ft.ownerDocument.doctype&&Ft.ownerDocument.doctype.name&&ln(ox,Ft.ownerDocument.doctype.name)&&(Va="<!DOCTYPE "+Ft.ownerDocument.doctype.name+`>
`+Va),Zt&&v1([ye,we,Ve],Pr=>{Va=md(Va,Pr," ")}),ce&&gt?ce.createHTML(Va):Va},e.setConfig=function(){let Xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ze(Xt),Dt=!0},e.clearConfig=function(){ne=null,Dt=!1},e.isValidAttribute=function(Xt,De,Ft){ne||Ze({});const ni=Te(Xt),Ui=Te(De);return oa(ni,Ui,Ft)},e.addHook=function(Xt,De){typeof De=="function"&&pd(ge[Xt],De)},e.removeHook=function(Xt,De){if(De!==void 0){const Ft=pQ(ge[Xt],De);return Ft===-1?void 0:mQ(ge[Xt],Ft,1)[0]}return _v(ge[Xt])},e.removeHooks=function(Xt){ge[Xt]=[]},e.removeAllHooks=function(){ge=Cv()},e}var YQ=Ax(),NQ=(t,e)=>e(null),LQ=ft("<div><!></div>"),PQ=ft('<a class="hover:text-accent transition-text flex w-full items-center justify-start gap-2 p-2 duration-150" target="_blank" rel="noopener noreferrer"><!> <span>提供元からダウンロード</span></a>'),QQ=ft('<div class="bg-main w-side-menu absolute left-0 top-0 z-20 flex h-full flex-col gap-2 overflow-hidden px-2 pt-4"><div class="flex w-full cursor-pointer justify-between pb-2"><button class="bg-base ml-auto cursor-pointer rounded-full p-2"><!></button></div> <div class="flex h-full flex-col gap-2 overflow-auto"><div class="flex shrink-0 grow flex-col gap-1 text-base"><div> </div> <div> </div> <!> <!></div>  <div class="c-scroll flex h-full w-full grow flex-col overflow-y-auto"></div></div></div>');function kQ(t,e){mi(e,!0);let a=si(e,"showDataEntry",15);const n=x=>{x.key==="Escape"&&a(null)},c=x=>{const B=/(https?:\/\/[^\s））\]」」＞>、。,]+)/g,R=x.replace(B,F=>`<a href="${F}" target="_blank" rel="noopener noreferrer">${F}</a>`).replace(/\n/g,"<br>");return YQ.sanitize(R,{ALLOWED_TAGS:["a","br"],ALLOWED_ATTR:["href","target","rel"]})};var f=vi();fr("keydown",Em,n);var u=kt(f);{var s=x=>{var B=QQ(),I=Le(B),R=Le(I);R.__click=[NQ,a];var F=Le(R);yi(F,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Ee(R),Ee(I);var M=Oe(I,2),N=Le(M),D=Le(N),V=Le(D,!0);Ee(D);var X=Oe(D,2),ee=Le(X,!0);Ee(X);var Ae=Oe(X,2);{var ce=q=>{var H=LQ(),$=Le(H);m6($,()=>{var de;return c((de=a())==null?void 0:de.metaData.description)},!1,!1),Ee(H),Xe(q,H)};It(Ae,q=>{a()&&q(ce)})}var ue=Oe(Ae,2);{var oe=q=>{var H=PQ(),$=Le(H);yi($,{icon:"el:download",class:"h-8 w-8"}),Ha(2),Ee(H),di(()=>{var de;return ja(H,"href",(de=a())==null?void 0:de.metaData.downloadUrl)}),Xe(q,H)};It(ue,q=>{var H;(H=a())!=null&&H.metaData.downloadUrl&&q(oe)})}Ee(N),Ha(2),Ee(M),Ee(B),di(()=>{var q,H;xi(V,(q=a())==null?void 0:q.metaData.name),xi(ee,(H=a())==null?void 0:H.metaData.location)}),ba(3,B,()=>ds,()=>({duration:300,x:-100,opacity:0})),Xe(x,B)};It(u,x=>{a()&&x(s)})}Xe(t,f),_i()}$a(["click"]);function Oo(t){return Array.isArray?Array.isArray(t):hx(t)==="[object Array]"}function DQ(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function zQ(t){return t==null?"":DQ(t)}function ao(t){return typeof t=="string"}function lx(t){return typeof t=="number"}function ZQ(t){return t===!0||t===!1||HQ(t)&&hx(t)=="[object Boolean]"}function cx(t){return typeof t=="object"}function HQ(t){return cx(t)&&t!==null}function Dn(t){return t!=null}function v3(t){return!t.trim().length}function hx(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const OQ="Incorrect 'index' type",XQ=t=>`Invalid value for key ${t}`,VQ=t=>`Pattern length exceeds max of ${t}.`,GQ=t=>`Missing ${t} property in key`,jQ=t=>`Property 'weight' in key '${t}' must be a positive integer`,Mv=Object.prototype.hasOwnProperty;class KQ{constructor(e){this._keys=[],this._keyMap={};let a=0;e.forEach(n=>{let c=ux(n);this._keys.push(c),this._keyMap[c.id]=c,a+=c.weight}),this._keys.forEach(n=>{n.weight/=a})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ux(t){let e=null,a=null,n=null,c=1,f=null;if(ao(t)||Oo(t))n=t,e=Rv(t),a=um(t);else{if(!Mv.call(t,"name"))throw new Error(GQ("name"));const u=t.name;if(n=u,Mv.call(t,"weight")&&(c=t.weight,c<=0))throw new Error(jQ(u));e=Rv(u),a=um(u),f=t.getFn}return{path:e,id:a,weight:c,src:n,getFn:f}}function Rv(t){return Oo(t)?t:t.split(".")}function um(t){return Oo(t)?t.join("."):t}function $Q(t,e){let a=[],n=!1;const c=(f,u,s)=>{if(Dn(f))if(!u[s])a.push(f);else{let x=u[s];const B=f[x];if(!Dn(B))return;if(s===u.length-1&&(ao(B)||lx(B)||ZQ(B)))a.push(zQ(B));else if(Oo(B)){n=!0;for(let I=0,R=B.length;I<R;I+=1)c(B[I],u,s+1)}else u.length&&c(B,u,s+1)}};return c(t,ao(e)?e.split("."):e,0),n?a:a[0]}const qQ={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},WQ={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},JQ={location:0,threshold:.6,distance:100},ek={useExtendedSearch:!1,getFn:$Q,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ci={...WQ,...qQ,...JQ,...ek};const tk=/[^ ]+/g;function ik(t=1,e=3){const a=new Map,n=Math.pow(10,e);return{get(c){const f=c.match(tk).length;if(a.has(f))return a.get(f);const u=1/Math.pow(f,.5*t),s=parseFloat(Math.round(u*n)/n);return a.set(f,s),s},clear(){a.clear()}}}class g4{constructor({getFn:e=Ci.getFn,fieldNormWeight:a=Ci.fieldNormWeight}={}){this.norm=ik(a,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((a,n)=>{this._keysMap[a.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ao(this.docs[0])?this.docs.forEach((e,a)=>{this._addString(e,a)}):this.docs.forEach((e,a)=>{this._addObject(e,a)}),this.norm.clear())}add(e){const a=this.size();ao(e)?this._addString(e,a):this._addObject(e,a)}removeAt(e){this.records.splice(e,1);for(let a=e,n=this.size();a<n;a+=1)this.records[a].i-=1}getValueForItemAtKeyId(e,a){return e[this._keysMap[a]]}size(){return this.records.length}_addString(e,a){if(!Dn(e)||v3(e))return;let n={v:e,i:a,n:this.norm.get(e)};this.records.push(n)}_addObject(e,a){let n={i:a,$:{}};this.keys.forEach((c,f)=>{let u=c.getFn?c.getFn(e):this.getFn(e,c.path);if(Dn(u)){if(Oo(u)){let s=[];const x=[{nestedArrIndex:-1,value:u}];for(;x.length;){const{nestedArrIndex:B,value:I}=x.pop();if(Dn(I))if(ao(I)&&!v3(I)){let R={v:I,i:B,n:this.norm.get(I)};s.push(R)}else Oo(I)&&I.forEach((R,F)=>{x.push({nestedArrIndex:F,value:R})})}n.$[f]=s}else if(ao(u)&&!v3(u)){let s={v:u,n:this.norm.get(u)};n.$[f]=s}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function dx(t,e,{getFn:a=Ci.getFn,fieldNormWeight:n=Ci.fieldNormWeight}={}){const c=new g4({getFn:a,fieldNormWeight:n});return c.setKeys(t.map(ux)),c.setSources(e),c.create(),c}function ak(t,{getFn:e=Ci.getFn,fieldNormWeight:a=Ci.fieldNormWeight}={}){const{keys:n,records:c}=t,f=new g4({getFn:e,fieldNormWeight:a});return f.setKeys(n),f.setIndexRecords(c),f}function w1(t,{errors:e=0,currentLocation:a=0,expectedLocation:n=0,distance:c=Ci.distance,ignoreLocation:f=Ci.ignoreLocation}={}){const u=e/t.length;if(f)return u;const s=Math.abs(n-a);return c?u+s/c:s?1:u}function rk(t=[],e=Ci.minMatchCharLength){let a=[],n=-1,c=-1,f=0;for(let u=t.length;f<u;f+=1){let s=t[f];s&&n===-1?n=f:!s&&n!==-1&&(c=f-1,c-n+1>=e&&a.push([n,c]),n=-1)}return t[f-1]&&f-n>=e&&a.push([n,f-1]),a}const Yl=32;function nk(t,e,a,{location:n=Ci.location,distance:c=Ci.distance,threshold:f=Ci.threshold,findAllMatches:u=Ci.findAllMatches,minMatchCharLength:s=Ci.minMatchCharLength,includeMatches:x=Ci.includeMatches,ignoreLocation:B=Ci.ignoreLocation}={}){if(e.length>Yl)throw new Error(VQ(Yl));const I=e.length,R=t.length,F=Math.max(0,Math.min(n,R));let M=f,N=F;const D=s>1||x,V=D?Array(R):[];let X;for(;(X=t.indexOf(e,N))>-1;){let q=w1(e,{currentLocation:X,expectedLocation:F,distance:c,ignoreLocation:B});if(M=Math.min(q,M),N=X+I,D){let H=0;for(;H<I;)V[X+H]=1,H+=1}}N=-1;let ee=[],Ae=1,ce=I+R;const ue=1<<I-1;for(let q=0;q<I;q+=1){let H=0,$=ce;for(;H<$;)w1(e,{errors:q,currentLocation:F+$,expectedLocation:F,distance:c,ignoreLocation:B})<=M?H=$:ce=$,$=Math.floor((ce-H)/2+H);ce=$;let de=Math.max(1,F-$+1),ge=u?R:Math.min(F+$,R)+I,ye=Array(ge+2);ye[ge+1]=(1<<q)-1;for(let Ve=ge;Ve>=de;Ve-=1){let ut=Ve-1,at=a[t.charAt(ut)];if(D&&(V[ut]=+!!at),ye[Ve]=(ye[Ve+1]<<1|1)&at,q&&(ye[Ve]|=(ee[Ve+1]|ee[Ve])<<1|1|ee[Ve+1]),ye[Ve]&ue&&(Ae=w1(e,{errors:q,currentLocation:ut,expectedLocation:F,distance:c,ignoreLocation:B}),Ae<=M)){if(M=Ae,N=ut,N<=F)break;de=Math.max(1,2*F-N)}}if(w1(e,{errors:q+1,currentLocation:F,expectedLocation:F,distance:c,ignoreLocation:B})>M)break;ee=ye}const oe={isMatch:N>=0,score:Math.max(.001,Ae)};if(D){const q=rk(V,s);q.length?x&&(oe.indices=q):oe.isMatch=!1}return oe}function sk(t){let e={};for(let a=0,n=t.length;a<n;a+=1){const c=t.charAt(a);e[c]=(e[c]||0)|1<<n-a-1}return e}const Cg=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class fx{constructor(e,{location:a=Ci.location,threshold:n=Ci.threshold,distance:c=Ci.distance,includeMatches:f=Ci.includeMatches,findAllMatches:u=Ci.findAllMatches,minMatchCharLength:s=Ci.minMatchCharLength,isCaseSensitive:x=Ci.isCaseSensitive,ignoreDiacritics:B=Ci.ignoreDiacritics,ignoreLocation:I=Ci.ignoreLocation}={}){if(this.options={location:a,threshold:n,distance:c,includeMatches:f,findAllMatches:u,minMatchCharLength:s,isCaseSensitive:x,ignoreDiacritics:B,ignoreLocation:I},e=x?e:e.toLowerCase(),e=B?Cg(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const R=(M,N)=>{this.chunks.push({pattern:M,alphabet:sk(M),startIndex:N})},F=this.pattern.length;if(F>Yl){let M=0;const N=F%Yl,D=F-N;for(;M<D;)R(this.pattern.substr(M,Yl),M),M+=Yl;if(N){const V=F-Yl;R(this.pattern.substr(V),V)}}else R(this.pattern,0)}searchIn(e){const{isCaseSensitive:a,ignoreDiacritics:n,includeMatches:c}=this.options;if(e=a?e:e.toLowerCase(),e=n?Cg(e):e,this.pattern===e){let D={isMatch:!0,score:0};return c&&(D.indices=[[0,e.length-1]]),D}const{location:f,distance:u,threshold:s,findAllMatches:x,minMatchCharLength:B,ignoreLocation:I}=this.options;let R=[],F=0,M=!1;this.chunks.forEach(({pattern:D,alphabet:V,startIndex:X})=>{const{isMatch:ee,score:Ae,indices:ce}=nk(e,D,V,{location:f+X,distance:u,threshold:s,findAllMatches:x,minMatchCharLength:B,includeMatches:c,ignoreLocation:I});ee&&(M=!0),F+=Ae,ee&&ce&&(R=[...R,...ce])});let N={isMatch:M,score:M?F/this.chunks.length:1};return M&&c&&(N.indices=R),N}}class OA{constructor(e){this.pattern=e}static isMultiMatch(e){return Iv(e,this.multiRegex)}static isSingleMatch(e){return Iv(e,this.singleRegex)}search(){}}function Iv(t,e){const a=t.match(e);return a?a[1]:null}class ok extends OA{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const a=e===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Ak extends OA{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class lk extends OA{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const a=e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class ck extends OA{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const a=!e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class hk extends OA{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const a=e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class uk extends OA{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const a=!e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class gx extends OA{constructor(e,{location:a=Ci.location,threshold:n=Ci.threshold,distance:c=Ci.distance,includeMatches:f=Ci.includeMatches,findAllMatches:u=Ci.findAllMatches,minMatchCharLength:s=Ci.minMatchCharLength,isCaseSensitive:x=Ci.isCaseSensitive,ignoreDiacritics:B=Ci.ignoreDiacritics,ignoreLocation:I=Ci.ignoreLocation}={}){super(e),this._bitapSearch=new fx(e,{location:a,threshold:n,distance:c,includeMatches:f,findAllMatches:u,minMatchCharLength:s,isCaseSensitive:x,ignoreDiacritics:B,ignoreLocation:I})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class px extends OA{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let a=0,n;const c=[],f=this.pattern.length;for(;(n=e.indexOf(this.pattern,a))>-1;)a=n+f,c.push([n,a-1]);const u=!!c.length;return{isMatch:u,score:u?0:1,indices:c}}}const dm=[ok,px,lk,ck,uk,hk,Ak,gx],Uv=dm.length,dk=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,fk="|";function gk(t,e={}){return t.split(fk).map(a=>{let n=a.trim().split(dk).filter(f=>f&&!!f.trim()),c=[];for(let f=0,u=n.length;f<u;f+=1){const s=n[f];let x=!1,B=-1;for(;!x&&++B<Uv;){const I=dm[B];let R=I.isMultiMatch(s);R&&(c.push(new I(R,e)),x=!0)}if(!x)for(B=-1;++B<Uv;){const I=dm[B];let R=I.isSingleMatch(s);if(R){c.push(new I(R,e));break}}}return c})}const pk=new Set([gx.type,px.type]);class mk{constructor(e,{isCaseSensitive:a=Ci.isCaseSensitive,ignoreDiacritics:n=Ci.ignoreDiacritics,includeMatches:c=Ci.includeMatches,minMatchCharLength:f=Ci.minMatchCharLength,ignoreLocation:u=Ci.ignoreLocation,findAllMatches:s=Ci.findAllMatches,location:x=Ci.location,threshold:B=Ci.threshold,distance:I=Ci.distance}={}){this.query=null,this.options={isCaseSensitive:a,ignoreDiacritics:n,includeMatches:c,minMatchCharLength:f,findAllMatches:s,ignoreLocation:u,location:x,threshold:B,distance:I},e=a?e:e.toLowerCase(),e=n?Cg(e):e,this.pattern=e,this.query=gk(this.pattern,this.options)}static condition(e,a){return a.useExtendedSearch}searchIn(e){const a=this.query;if(!a)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:c,ignoreDiacritics:f}=this.options;e=c?e:e.toLowerCase(),e=f?Cg(e):e;let u=0,s=[],x=0;for(let B=0,I=a.length;B<I;B+=1){const R=a[B];s.length=0,u=0;for(let F=0,M=R.length;F<M;F+=1){const N=R[F],{isMatch:D,indices:V,score:X}=N.search(e);if(D){if(u+=1,x+=X,n){const ee=N.constructor.type;pk.has(ee)?s=[...s,...V]:s.push(V)}}else{x=0,u=0,s.length=0;break}}if(u){let F={isMatch:!0,score:x/u};return n&&(F.indices=s),F}}return{isMatch:!1,score:1}}}const fm=[];function _k(...t){fm.push(...t)}function gm(t,e){for(let a=0,n=fm.length;a<n;a+=1){let c=fm[a];if(c.condition(t,e))return new c(t,e)}return new fx(t,e)}const Mg={AND:"$and",OR:"$or"},pm={PATH:"$path",PATTERN:"$val"},mm=t=>!!(t[Mg.AND]||t[Mg.OR]),bk=t=>!!t[pm.PATH],yk=t=>!Oo(t)&&cx(t)&&!mm(t),Ev=t=>({[Mg.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function mx(t,e,{auto:a=!0}={}){const n=c=>{let f=Object.keys(c);const u=bk(c);if(!u&&f.length>1&&!mm(c))return n(Ev(c));if(yk(c)){const x=u?c[pm.PATH]:f[0],B=u?c[pm.PATTERN]:c[x];if(!ao(B))throw new Error(XQ(x));const I={keyId:um(x),pattern:B};return a&&(I.searcher=gm(B,e)),I}let s={children:[],operator:f[0]};return f.forEach(x=>{const B=c[x];Oo(B)&&B.forEach(I=>{s.children.push(n(I))})}),s};return mm(t)||(t=Ev(t)),n(t)}function vk(t,{ignoreFieldNorm:e=Ci.ignoreFieldNorm}){t.forEach(a=>{let n=1;a.matches.forEach(({key:c,norm:f,score:u})=>{const s=c?c.weight:null;n*=Math.pow(u===0&&s?Number.EPSILON:u,(s||1)*(e?1:f))}),a.score=n})}function xk(t,e){const a=t.matches;e.matches=[],Dn(a)&&a.forEach(n=>{if(!Dn(n.indices)||!n.indices.length)return;const{indices:c,value:f}=n;let u={indices:c,value:f};n.key&&(u.key=n.key.src),n.idx>-1&&(u.refIndex=n.idx),e.matches.push(u)})}function wk(t,e){e.score=t.score}function Bk(t,e,{includeMatches:a=Ci.includeMatches,includeScore:n=Ci.includeScore}={}){const c=[];return a&&c.push(xk),n&&c.push(wk),t.map(f=>{const{idx:u}=f,s={item:e[u],refIndex:u};return c.length&&c.forEach(x=>{x(f,s)}),s})}class Qh{constructor(e,a={},n){this.options={...Ci,...a},this.options.useExtendedSearch,this._keyStore=new KQ(this.options.keys),this.setCollection(e,n)}setCollection(e,a){if(this._docs=e,a&&!(a instanceof g4))throw new Error(OQ);this._myIndex=a||dx(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Dn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const a=[];for(let n=0,c=this._docs.length;n<c;n+=1){const f=this._docs[n];e(f,n)&&(this.removeAt(n),n-=1,c-=1,a.push(f))}return a}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:a=-1}={}){const{includeMatches:n,includeScore:c,shouldSort:f,sortFn:u,ignoreFieldNorm:s}=this.options;let x=ao(e)?ao(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return vk(x,{ignoreFieldNorm:s}),f&&x.sort(u),lx(a)&&a>-1&&(x=x.slice(0,a)),Bk(x,this._docs,{includeMatches:n,includeScore:c})}_searchStringList(e){const a=gm(e,this.options),{records:n}=this._myIndex,c=[];return n.forEach(({v:f,i:u,n:s})=>{if(!Dn(f))return;const{isMatch:x,score:B,indices:I}=a.searchIn(f);x&&c.push({item:f,idx:u,matches:[{score:B,value:f,norm:s,indices:I}]})}),c}_searchLogical(e){const a=mx(e,this.options),n=(s,x,B)=>{if(!s.children){const{keyId:R,searcher:F}=s,M=this._findMatches({key:this._keyStore.get(R),value:this._myIndex.getValueForItemAtKeyId(x,R),searcher:F});return M&&M.length?[{idx:B,item:x,matches:M}]:[]}const I=[];for(let R=0,F=s.children.length;R<F;R+=1){const M=s.children[R],N=n(M,x,B);if(N.length)I.push(...N);else if(s.operator===Mg.AND)return[]}return I},c=this._myIndex.records,f={},u=[];return c.forEach(({$:s,i:x})=>{if(Dn(s)){let B=n(a,s,x);B.length&&(f[x]||(f[x]={idx:x,item:s,matches:[]},u.push(f[x])),B.forEach(({matches:I})=>{f[x].matches.push(...I)}))}}),u}_searchObjectList(e){const a=gm(e,this.options),{keys:n,records:c}=this._myIndex,f=[];return c.forEach(({$:u,i:s})=>{if(!Dn(u))return;let x=[];n.forEach((B,I)=>{x.push(...this._findMatches({key:B,value:u[I],searcher:a}))}),x.length&&f.push({idx:s,item:u,matches:x})}),f}_findMatches({key:e,value:a,searcher:n}){if(!Dn(a))return[];let c=[];if(Oo(a))a.forEach(({v:f,i:u,n:s})=>{if(!Dn(f))return;const{isMatch:x,score:B,indices:I}=n.searchIn(f);x&&c.push({score:B,key:e,value:f,idx:u,norm:s,indices:I})});else{const{v:f,n:u}=a,{isMatch:s,score:x,indices:B}=n.searchIn(f);s&&c.push({score:x,key:e,value:f,norm:u,indices:B})}return c}}Qh.version="7.1.0";Qh.createIndex=dx;Qh.parseIndex=ak;Qh.config=Ci;Qh.parseQuery=mx;_k(mk);var Ck=(t,e,a,n)=>{t.key==="Enter"&&!W(e)&&a(n())},Mk=ft('<div class="h-6 w-6 animate-spin cursor-pointer rounded-full border-2 border-gray-400 border-t-transparent"></div>'),Rk=(t,e,a)=>e(a()),Ik=ft("<button><!></button>"),Uk=ft('<div class="duration-15 pointer-events-auto relative flex w-full overflow-hidden rounded-full transition-all"><input type="text" class="bg-base focus:outline-hidden w-full rounded-md px-4 py-2" placeholder="施設名/住所"> <div class="absolute right-1 top-2 grid place-self-center pr-2"><!></div></div>');function Ek(t,e){mi(e,!0);let a=si(e,"results",15),n=si(e,"inputSearchWord",15),c=$t(!1),f=$t(!1);const u=async M=>{if(!(!M||M.length<2)){M=M.trim(),st(c,!0);try{await e.searchFeature(M)}catch(N){console.error(N)}finally{st(c,!1)}}};Nr(()=>{n()||a(null)});var s=Uk(),x=Le(s);ks(x),x.__keydown=[Ck,f,u,n];var B=Oe(x,2),I=Le(B);{var R=M=>{var N=Mk();Xe(M,N)},F=M=>{var N=Ik();N.__click=[Rk,u,n];var D=Le(N);const V=ra(()=>n().trim().length>1?" text-accent":"text-gray-400");yi(D,{icon:"stash:search-solid",get class(){return`h-6 w-6 ${W(V)??""}`}}),Ee(N),di((X,ee)=>{N.disabled=X,Hr(N,1,ee)},[()=>n().trim().length<2,()=>v7(n().trim().length>1?"pointer-events-auto cursor-pointer":"pointer-events-none")]),Xe(M,N)};It(I,M=>{W(c)?M(R):M(F,!1)})}Ee(B),Ee(s),fr("compositionstart",x,()=>st(f,!0)),fr("compositionend",x,()=>st(f,!1)),kg(x,n),Xe(t,s),_i()}$a(["keydown","click"]);const _m=65536*65536,Fv=1/_m,Fk=12,Tv=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),x3=0,B1=1,vd=2,C1=5;class Tk{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,a,n=this.length){for(;this.pos<n;){const c=this.readVarint(),f=c>>3,u=this.pos;this.type=c&7,e(f,a,this),this.pos===u&&this.skip(c)}return a}readMessage(e,a){return this.readFields(e,a,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*_m;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*_m;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const a=this.buf;let n,c;return c=a[this.pos++],n=c&127,c<128||(c=a[this.pos++],n|=(c&127)<<7,c<128)||(c=a[this.pos++],n|=(c&127)<<14,c<128)||(c=a[this.pos++],n|=(c&127)<<21,c<128)?n:(c=a[this.pos],n|=(c&15)<<28,Sk(n,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,a=this.pos;return this.pos=e,e-a>=Fk&&Tv?Tv.decode(this.buf.subarray(a,e)):Vk(this.buf,a,e)}readBytes(){const e=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,e);return this.pos=e,a}readPackedVarint(e=[],a){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(a));return e}readPackedSVarint(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===vd?this.readVarint()+this.pos:this.pos+1}skip(e){const a=e&7;if(a===x3)for(;this.buf[this.pos++]>127;);else if(a===vd)this.pos=this.readVarint()+this.pos;else if(a===C1)this.pos+=4;else if(a===B1)this.pos+=8;else throw new Error(`Unimplemented type: ${a}`)}writeTag(e,a){this.writeVarint(e<<3|a)}realloc(e){let a=this.length||16;for(;a<this.pos+e;)a*=2;if(a!==this.length){const n=new Uint8Array(a);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=a}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Fv),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Fv),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Yk(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const a=this.pos;this.pos=Gk(this.buf,e,this.pos);const n=this.pos-a;n>=128&&Sv(a,n,this),this.pos=a-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const a=e.length;this.writeVarint(a),this.realloc(a);for(let n=0;n<a;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,a){this.pos++;const n=this.pos;e(a,this);const c=this.pos-n;c>=128&&Sv(n,c,this),this.pos=n-1,this.writeVarint(c),this.pos+=c}writeMessage(e,a,n){this.writeTag(e,vd),this.writeRawMessage(a,n)}writePackedVarint(e,a){a.length&&this.writeMessage(e,Pk,a)}writePackedSVarint(e,a){a.length&&this.writeMessage(e,Qk,a)}writePackedBoolean(e,a){a.length&&this.writeMessage(e,zk,a)}writePackedFloat(e,a){a.length&&this.writeMessage(e,kk,a)}writePackedDouble(e,a){a.length&&this.writeMessage(e,Dk,a)}writePackedFixed32(e,a){a.length&&this.writeMessage(e,Zk,a)}writePackedSFixed32(e,a){a.length&&this.writeMessage(e,Hk,a)}writePackedFixed64(e,a){a.length&&this.writeMessage(e,Ok,a)}writePackedSFixed64(e,a){a.length&&this.writeMessage(e,Xk,a)}writeBytesField(e,a){this.writeTag(e,vd),this.writeBytes(a)}writeFixed32Field(e,a){this.writeTag(e,C1),this.writeFixed32(a)}writeSFixed32Field(e,a){this.writeTag(e,C1),this.writeSFixed32(a)}writeFixed64Field(e,a){this.writeTag(e,B1),this.writeFixed64(a)}writeSFixed64Field(e,a){this.writeTag(e,B1),this.writeSFixed64(a)}writeVarintField(e,a){this.writeTag(e,x3),this.writeVarint(a)}writeSVarintField(e,a){this.writeTag(e,x3),this.writeSVarint(a)}writeStringField(e,a){this.writeTag(e,vd),this.writeString(a)}writeFloatField(e,a){this.writeTag(e,C1),this.writeFloat(a)}writeDoubleField(e,a){this.writeTag(e,B1),this.writeDouble(a)}writeBooleanField(e,a){this.writeVarintField(e,+a)}}function Sk(t,e,a){const n=a.buf;let c,f;if(f=n[a.pos++],c=(f&112)>>4,f<128||(f=n[a.pos++],c|=(f&127)<<3,f<128)||(f=n[a.pos++],c|=(f&127)<<10,f<128)||(f=n[a.pos++],c|=(f&127)<<17,f<128)||(f=n[a.pos++],c|=(f&127)<<24,f<128)||(f=n[a.pos++],c|=(f&1)<<31,f<128))return ah(t,c,e);throw new Error("Expected varint not more than 10 bytes")}function ah(t,e,a){return a?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function Yk(t,e){let a,n;if(t>=0?(a=t%4294967296|0,n=t/4294967296|0):(a=~(-t%4294967296),n=~(-t/4294967296),a^4294967295?a=a+1|0:(a=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Nk(a,n,e),Lk(n,e)}function Nk(t,e,a){a.buf[a.pos++]=t&127|128,t>>>=7,a.buf[a.pos++]=t&127|128,t>>>=7,a.buf[a.pos++]=t&127|128,t>>>=7,a.buf[a.pos++]=t&127|128,t>>>=7,a.buf[a.pos]=t&127}function Lk(t,e){const a=(t&7)<<4;e.buf[e.pos++]|=a|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function Sv(t,e,a){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));a.realloc(n);for(let c=a.pos-1;c>=t;c--)a.buf[c+n]=a.buf[c]}function Pk(t,e){for(let a=0;a<t.length;a++)e.writeVarint(t[a])}function Qk(t,e){for(let a=0;a<t.length;a++)e.writeSVarint(t[a])}function kk(t,e){for(let a=0;a<t.length;a++)e.writeFloat(t[a])}function Dk(t,e){for(let a=0;a<t.length;a++)e.writeDouble(t[a])}function zk(t,e){for(let a=0;a<t.length;a++)e.writeBoolean(t[a])}function Zk(t,e){for(let a=0;a<t.length;a++)e.writeFixed32(t[a])}function Hk(t,e){for(let a=0;a<t.length;a++)e.writeSFixed32(t[a])}function Ok(t,e){for(let a=0;a<t.length;a++)e.writeFixed64(t[a])}function Xk(t,e){for(let a=0;a<t.length;a++)e.writeSFixed64(t[a])}function Vk(t,e,a){let n="",c=e;for(;c<a;){const f=t[c];let u=null,s=f>239?4:f>223?3:f>191?2:1;if(c+s>a)break;let x,B,I;s===1?f<128&&(u=f):s===2?(x=t[c+1],(x&192)===128&&(u=(f&31)<<6|x&63,u<=127&&(u=null))):s===3?(x=t[c+1],B=t[c+2],(x&192)===128&&(B&192)===128&&(u=(f&15)<<12|(x&63)<<6|B&63,(u<=2047||u>=55296&&u<=57343)&&(u=null))):s===4&&(x=t[c+1],B=t[c+2],I=t[c+3],(x&192)===128&&(B&192)===128&&(I&192)===128&&(u=(f&15)<<18|(x&63)<<12|(B&63)<<6|I&63,(u<=65535||u>=1114112)&&(u=null))),u===null?(u=65533,s=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|u&1023),n+=String.fromCharCode(u),c+=s}return n}function Gk(t,e,a){for(let n=0,c,f;n<e.length;n++){if(c=e.charCodeAt(n),c>55295&&c<57344)if(f)if(c<56320){t[a++]=239,t[a++]=191,t[a++]=189,f=c;continue}else c=f-55296<<10|c-56320|65536,f=null;else{c>56319||n+1===e.length?(t[a++]=239,t[a++]=191,t[a++]=189):f=c;continue}else f&&(t[a++]=239,t[a++]=191,t[a++]=189,f=null);c<128?t[a++]=c:(c<2048?t[a++]=c>>6|192:(c<65536?t[a++]=c>>12|224:(t[a++]=c>>18|240,t[a++]=c>>12&63|128),t[a++]=c>>6&63|128),t[a++]=c&63|128)}return a}function TA(t,e){this.x=t,this.y=e}TA.prototype={clone(){return new TA(this.x,this.y)},add(t){return this.clone()._add(t)},sub(t){return this.clone()._sub(t)},multByPoint(t){return this.clone()._multByPoint(t)},divByPoint(t){return this.clone()._divByPoint(t)},mult(t){return this.clone()._mult(t)},div(t){return this.clone()._div(t)},rotate(t){return this.clone()._rotate(t)},rotateAround(t,e){return this.clone()._rotateAround(t,e)},matMult(t){return this.clone()._matMult(t)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(t){return this.x===t.x&&this.y===t.y},dist(t){return Math.sqrt(this.distSqr(t))},distSqr(t){const e=t.x-this.x,a=t.y-this.y;return e*e+a*a},angle(){return Math.atan2(this.y,this.x)},angleTo(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith(t){return this.angleWithSep(t.x,t.y)},angleWithSep(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult(t){const e=t[0]*this.x+t[1]*this.y,a=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=a,this},_add(t){return this.x+=t.x,this.y+=t.y,this},_sub(t){return this.x-=t.x,this.y-=t.y,this},_mult(t){return this.x*=t,this.y*=t,this},_div(t){return this.x/=t,this.y/=t,this},_multByPoint(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint(t){return this.x/=t.x,this.y/=t.y,this},_unit(){return this._div(this.mag()),this},_perp(){const t=this.y;return this.y=this.x,this.x=-t,this},_rotate(t){const e=Math.cos(t),a=Math.sin(t),n=e*this.x-a*this.y,c=a*this.x+e*this.y;return this.x=n,this.y=c,this},_rotateAround(t,e){const a=Math.cos(t),n=Math.sin(t),c=e.x+a*(this.x-e.x)-n*(this.y-e.y),f=e.y+n*(this.x-e.x)+a*(this.y-e.y);return this.x=c,this.y=f,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:TA};TA.convert=function(t){if(t instanceof TA)return t;if(Array.isArray(t))return new TA(+t[0],+t[1]);if(t.x!==void 0&&t.y!==void 0)return new TA(+t.x,+t.y);throw new Error("Expected [x, y] or {x, y} point format")};class _x{constructor(e,a,n,c,f){this.properties={},this.extent=n,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=c,this._values=f,e.readFields(jk,this,a)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const a=e.readVarint()+e.pos,n=[];let c,f=1,u=0,s=0,x=0;for(;e.pos<a;){if(u<=0){const B=e.readVarint();f=B&7,u=B>>3}if(u--,f===1||f===2)s+=e.readSVarint(),x+=e.readSVarint(),f===1&&(c&&n.push(c),c=[]),c&&c.push(new TA(s,x));else if(f===7)c&&c.push(c[0].clone());else throw new Error(`unknown command ${f}`)}return c&&n.push(c),n}bbox(){const e=this._pbf;e.pos=this._geometry;const a=e.readVarint()+e.pos;let n=1,c=0,f=0,u=0,s=1/0,x=-1/0,B=1/0,I=-1/0;for(;e.pos<a;){if(c<=0){const R=e.readVarint();n=R&7,c=R>>3}if(c--,n===1||n===2)f+=e.readSVarint(),u+=e.readSVarint(),f<s&&(s=f),f>x&&(x=f),u<B&&(B=u),u>I&&(I=u);else if(n!==7)throw new Error(`unknown command ${n}`)}return[s,B,x,I]}toGeoJSON(e,a,n){const c=this.extent*Math.pow(2,n),f=this.extent*e,u=this.extent*a,s=this.loadGeometry();function x(F){return[(F.x+f)*360/c-180,360/Math.PI*Math.atan(Math.exp((1-(F.y+u)*2/c)*Math.PI))-90]}function B(F){return F.map(x)}let I;if(this.type===1){const F=[];for(const N of s)F.push(N[0]);const M=B(F);I=F.length===1?{type:"Point",coordinates:M[0]}:{type:"MultiPoint",coordinates:M}}else if(this.type===2){const F=s.map(B);I=F.length===1?{type:"LineString",coordinates:F[0]}:{type:"MultiLineString",coordinates:F}}else if(this.type===3){const F=$k(s),M=[];for(const N of F)M.push(N.map(B));I=M.length===1?{type:"Polygon",coordinates:M[0]}:{type:"MultiPolygon",coordinates:M}}else throw new Error("unknown feature type");const R={type:"Feature",geometry:I,properties:this.properties};return this.id!=null&&(R.id=this.id),R}}_x.types=["Unknown","Point","LineString","Polygon"];function jk(t,e,a){t===1?e.id=a.readVarint():t===2?Kk(a,e):t===3?e.type=a.readVarint():t===4&&(e._geometry=a.pos)}function Kk(t,e){const a=t.readVarint()+t.pos;for(;t.pos<a;){const n=e._keys[t.readVarint()],c=e._values[t.readVarint()];e.properties[n]=c}}function $k(t){const e=t.length;if(e<=1)return[t];const a=[];let n,c;for(let f=0;f<e;f++){const u=qk(t[f]);u!==0&&(c===void 0&&(c=u<0),c===u<0?(n&&a.push(n),n=[t[f]]):n&&n.push(t[f]))}return n&&a.push(n),a}function qk(t){let e=0;for(let a=0,n=t.length,c=n-1,f,u;a<n;c=a++)f=t[a],u=t[c],e+=(u.x-f.x)*(f.y+u.y);return e}class Wk{constructor(e,a){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Jk,this,a),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const a=this._pbf.readVarint()+this._pbf.pos;return new _x(this._pbf,a,this.extent,this._keys,this._values)}}function Jk(t,e,a){t===15?e.version=a.readVarint():t===1?e.name=a.readString():t===5?e.extent=a.readVarint():t===2?e._features.push(a.pos):t===3?e._keys.push(a.readString()):t===4&&e._values.push(eD(a))}function eD(t){let e=null;const a=t.readVarint()+t.pos;for(;t.pos<a;){const n=t.readVarint()>>3;e=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return e}class tD{constructor(e,a){this.layers=e.readFields(iD,{},a)}}function iD(t,e,a){if(t===3){const n=new Wk(a,a.readVarint()+a.pos);n.length&&(e[n.name]=n)}}const aD=async(t,{z:e,x:a,y:n},c,f)=>{const s=await new Ag(t).getZxy(e,a,n);if(!s||!s.data)throw new Error("タイル取得失敗");const B=new tD(new Tk(s.data)).layers[c];if(!B)throw new Error("指定レイヤが存在しません");for(let I=0;I<B.length;I++){const R=B.feature(I);if(R.id===f)return R.properties}return console.warn("⚠️ 該当 feature_id が見つかりません"),null};var rD=(t,e,a,n)=>{e(W(a)),n(e())},nD=ft('<button class="bg-sub flex w-full cursor-pointer items-center justify-center gap-2 rounded-full p-2 text-left text-white"> </button>'),sD=ft('<div class="c-scroll-hidden flex grow flex-col gap-4 overflow-y-auto overflow-x-hidden px-2 pb-4"></div>'),oD=(t,e,a)=>e(W(a)),AD=ft('<img alt="Icon" class="h-8 w-8 rounded-full object-cover">'),lD=ft('<button class="flex w-full cursor-pointer items-center justify-center gap-2 p-2 text-left text-base"><div class="grid shrink-0 place-items-center"><!></div> <div class="flex w-full flex-col justify-center gap-[1px]"><span> </span> <span class="text-xs"> </span></div></button>'),cD=ft('<div class="c-scroll-hidden flex grow flex-col divide-y-2 divide-gray-600 overflow-y-auto overflow-x-hidden px-2 pb-4"><!> <div class="h-[200px] w-full shrink-0"></div></div>'),hD=ft('<div class="bg-main w-side-menu absolute z-10 flex h-full flex-col gap-2 pt-[70px]"><div class="flex items-center justify-between p-2"><!></div> <!> <!> <div class="c-fog pointer-events-none absolute bottom-0 z-10 flex h-[100px] w-full items-end justify-center pb-4 svelte-acdvpo"></div></div>');function uD(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(Fs,"$isSideMenuType",a);let f=si(e,"featureMenuData",15),u=si(e,"inputSearchWord",15),s=si(e,"showSelectionMarker",15),x=si(e,"selectionMarkerLngLat",15),B=null;const I=100,R={};Lr(async()=>{B=await fetch(`${x7}/search_data.json`).then(Ae=>Ae.json()).then(Ae=>Ae).catch(Ae=>{console.error("Error fetching search data:",Ae)}),B.forEach(Ae=>{const ce=Ae.layer_id,ue=Pg.find(q=>q.id===ce),oe=ue?ue.metaData.location:null;oe&&(R[ce]=oe)})});let F=$t(Jr([]));const M=async Ae=>{if(Ae.propId){const ce=await aD(`${w7}/fac_search.pmtiles`,Ae.tile,Ae.layerId,Ae.featureId),ue={layerId:Ae.layerId,properties:ce,point:Ae.point,featureId:Ae.featureId};f(ue)}da.easeTo({center:Ae.point,zoom:17}),x(Ae.point),s(!0)},N=async Ae=>{if(!B){console.error("Search data is not loaded yet.");return}const ue=new Qh(B,{keys:["search_values"],threshold:.1}).search(Ae,{limit:I}),oe=ue.map($=>{const de=$.item;return{name:de.name,location:R[de.layer_id]||null,tile:de.tile_coords,point:de.point,layerId:de.layer_id,featureId:de.feature_id,propId:de.prop_id}}),H=(await IP(Ae)).slice(0,I-ue.length).map(({geometry:{coordinates:$},properties:de})=>{const ge=de.addressCode?J8(de.addressCode):null;return{point:$,name:de.title,location:ge}});st(F,[...oe,...H],!0)},D=["アカデミー施設","自力建設","演習林"];var V=vi(),X=kt(V);{var ee=Ae=>{var ce=hD(),ue=Le(ce),oe=Le(ue);Ek(oe,{get layerEntries(){return e.layerEntries},searchFeature:ge=>N(ge),get results(){return W(F)},set results(ge){st(F,ge,!0)},get inputSearchWord(){return u()},set inputSearchWord(ge){u(ge)}}),Ee(ue);var q=Oe(ue,2);{var H=ge=>{var ye=sD();Ea(ye,21,()=>D,pr,(we,Ve)=>{var ut=nD();ut.__click=[rD,u,Ve,N];var at=Le(ut,!0);Ee(ut),di(()=>xi(at,W(Ve))),Xe(we,ut)}),Ee(ye),Xe(ge,ye)};It(q,ge=>{W(F)||ge(H)})}var $=Oe(q,2);{var de=ge=>{var ye=cD(),we=Le(ye);Ea(we,17,()=>W(F),pr,(Ve,ut)=>{var at=lD();at.__click=[oD,M,ut];var et=Le(at),xt=Le(et);{var Mt=tt=>{var bt=AD();di(()=>ja(bt,"src",ug[W(ut).propId].image)),Xe(tt,bt)};It(xt,tt=>{W(ut).propId&&ug[W(ut).propId]&&tt(Mt)})}Ee(et);var Yt=Oe(et,2),rt=Le(Yt),pt=Le(rt,!0);Ee(rt);var je=Oe(rt,2),Qe=Le(je,!0);Ee(je),Ee(Yt),Ee(at),di(()=>{xi(pt,W(ut).name),xi(Qe,W(ut).location??"---")}),Xe(Ve,at)}),Ha(2),Ee(ye),Xe(ge,ye)};It($,ge=>{W(F)&&ge(de)})}Ha(2),Ee(ce),ba(3,ce,()=>ds,()=>({duration:300,x:-100,opacity:0})),Xe(Ae,ce)};It(X,Ae=>{c()==="search"&&Ae(ee)})}Xe(t,V),_i(),n()}$a(["click"]);var dD=ft('<div class="absolute left-0 top-0 z-30 h-full w-full bg-black/50" role="button" tabindex="0"></div> <div class="bg-main absolute left-0 top-0 z-30 flex h-full w-[400px] flex-col gap-2 p-2 text-base"><div class="flex items-center justify-between"><!> <button class="bg-base cursor-pointer rounded-full p-2"><!></button></div> <ui><button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none">検索</span></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none">レイヤー</span></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none">データカタログ</span></button></ui> <div class="w-hull bg-base h-[1px] rounded-full"></div> <ui><button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none">利用規約</span></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none">このアプリについて</span></button> <a class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150" href="https://github.com/forestacdev/enshurin-viewer" target="_blank" rel="noopener noreferrer"><!> <span>GitHub</span></a> <a class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150" href="https://www.forest.ac.jp/" target="_blank" rel="noopener noreferrer"><!> <span>森林文化アカデミーHP</span></a></ui> <ui class="mt-auto">Ver. 0.1.0 beta</ui></div>',1);function fD(t,e){mi(e,!1);const[a,n]=rr(),c=()=>zi(Do,"$showDataMenu",a),f=()=>zi(ig,"$showInfoDialog",a),u=()=>zi(ag,"$showTermsDialog",a),s=()=>zi(Pn,"$showSideMenu",a),x=()=>{Pn.set(!1),Fs.set("layer")},B=()=>{Pn.set(!1),Fs.set("search")},I=()=>{Pn.set(!1),Do.set(!c())},R=()=>{Pn.set(!1),ig.set(!f())},F=()=>{Pn.set(!1),ag.set(!u())};Pl.subscribe(V=>{Pn.set(!1)}),Xo();var M=vi(),N=kt(M);{var D=V=>{var X=dD(),ee=kt(X);ee.__click=()=>Pn.set(!1),ee.__keydown=Qe=>{(Qe.key==="Enter"||Qe.key===" ")&&Pn.set(!1)};var Ae=Oe(ee,2),ce=Le(Ae),ue=Le(ce);mN(ue);var oe=Oe(ue,2);oe.__click=()=>Pn.set(!1);var q=Le(oe);yi(q,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Ee(oe),Ee(ce);var H=Oe(ce,2),$=Le(H);$.__click=B;var de=Le($);yi(de,{icon:"stash:search-solid",class:"h-8 w-8"}),Ha(2),Ee($);var ge=Oe($,2);ge.__click=x;var ye=Le(ge);yi(ye,{icon:"ic:round-layers",class:"h-8 w-8"}),Ha(2),Ee(ge);var we=Oe(ge,2);we.__click=I;var Ve=Le(we);yi(Ve,{icon:"material-symbols:data-saver-on-rounded",class:"h-8 w-8"}),Ha(2),Ee(we),Ee(H);var ut=Oe(H,4),at=Le(ut);at.__click=F;var et=Le(at);yi(et,{icon:"majesticons:note-text",class:"h-8 w-8"}),Ha(2),Ee(at);var xt=Oe(at,2);xt.__click=R;var Mt=Le(xt);yi(Mt,{icon:"akar-icons:info-fill",class:"h-8 w-8"}),Ha(2),Ee(xt);var Yt=Oe(xt,2),rt=Le(Yt);yi(rt,{icon:"mdi:github",class:"h-8 w-8"}),Ha(2),Ee(Yt);var pt=Oe(Yt,2),je=Le(pt);yi(je,{icon:"mdi:web",class:"h-8 w-8"}),Ha(2),Ee(pt),Ee(ut),Ha(2),Ee(Ae),ba(3,ee,()=>ls,()=>({duration:200})),ba(3,Ae,()=>ds,()=>({duration:200,x:-100,opacity:0})),Xe(V,X)};It(N,V=>{s()&&V(D)})}Xe(t,M),_i(),n()}$a(["click","keydown"]);var gD=ft('<div class="c-player-marker z-50 grid scale-75 place-items-center svelte-8jzl6m"><svg xmlns="http://www.w3.org/2000/svg" width="73" height="73" fill="none" class="svelte-8jzl6m"><path fill="#333" d="M36.5 2 59 64 36.5 50.5 14 64 36.5 2Z" class="svelte-8jzl6m"></path><path stroke="#333" d="M36.5 2 59 64 36.5 50.5 14 64 36.5 2Z" class="svelte-8jzl6m"></path></svg></div>');function pD(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(LA,"$isStreetView",a);Lr(()=>{});var f=vi(),u=kt(f);{var s=x=>{var B=gD();Xe(x,B)};It(u,x=>{c()&&x(s)})}Xe(t,f),_i(),n()}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.20.0
 * @author George Michael Brower
 * @license MIT
 */class so{constructor(e,a,n,c,f="div"){this.parent=e,this.object=a,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(f),this.domElement.classList.add("controller"),this.domElement.classList.add(c),this.$name=document.createElement("div"),this.$name.classList.add("name"),so.nextNameID=so.nextNameID||0,this.$name.id=`lil-gui-name-${++so.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",u=>u.stopPropagation()),this.domElement.addEventListener("keyup",u=>u.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.textContent=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const a=this.parent.add(this.object,this.property,e);return a.name(this._name),this.destroy(),a}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.getValue()!==e&&(this.object[this.property]=e,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class mD extends so{constructor(e,a,n){super(e,a,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function bm(t){let e,a;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?a=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?a=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(a=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),a?"#"+a:!1}const _D={isPrimitive:!0,match:t=>typeof t=="string",fromHexString:bm,toHexString:bm},u0={isPrimitive:!0,match:t=>typeof t=="number",fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},bD={isPrimitive:!1,match:t=>Array.isArray(t),fromHexString(t,e,a=1){const n=u0.fromHexString(t);e[0]=(n>>16&255)/255*a,e[1]=(n>>8&255)/255*a,e[2]=(n&255)/255*a},toHexString([t,e,a],n=1){n=255/n;const c=t*n<<16^e*n<<8^a*n<<0;return u0.toHexString(c)}},yD={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,a=1){const n=u0.fromHexString(t);e.r=(n>>16&255)/255*a,e.g=(n>>8&255)/255*a,e.b=(n&255)/255*a},toHexString({r:t,g:e,b:a},n=1){n=255/n;const c=t*n<<16^e*n<<8^a*n<<0;return u0.toHexString(c)}},vD=[_D,u0,bD,yD];function xD(t){return vD.find(e=>e.match(t))}class wD extends so{constructor(e,a,n,c){super(e,a,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=xD(this.initialValue),this._rgbScale=c,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const f=bm(this.$text.value);f&&this._setValueFromHexString(f)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const a=this._format.fromHexString(e);this.setValue(a)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class w3 extends so{constructor(e,a,n){super(e,a,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",c=>{c.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class BD extends so{constructor(e,a,n,c,f,u){super(e,a,n,"number"),this._initInput(),this.min(c),this.max(f);const s=u!==void 0;this.step(s?u:this._getImplicitStep(),s),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,a=!0){return this._step=e,this._stepExplicit=a,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let a=(e-this._min)/(this._max-this._min);a=Math.max(0,Math.min(a,1)),this.$fill.style.width=a*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const a=()=>{let ee=parseFloat(this.$input.value);isNaN(ee)||(this._stepExplicit&&(ee=this._snap(ee)),this.setValue(this._clamp(ee)))},n=ee=>{const Ae=parseFloat(this.$input.value);isNaN(Ae)||(this._snapClampSetValue(Ae+ee),this.$input.value=this.getValue())},c=ee=>{ee.key==="Enter"&&this.$input.blur(),ee.code==="ArrowUp"&&(ee.preventDefault(),n(this._step*this._arrowKeyMultiplier(ee))),ee.code==="ArrowDown"&&(ee.preventDefault(),n(this._step*this._arrowKeyMultiplier(ee)*-1))},f=ee=>{this._inputFocused&&(ee.preventDefault(),n(this._step*this._normalizeMouseWheel(ee)))};let u=!1,s,x,B,I,R;const F=5,M=ee=>{s=ee.clientX,x=B=ee.clientY,u=!0,I=this.getValue(),R=0,window.addEventListener("mousemove",N),window.addEventListener("mouseup",D)},N=ee=>{if(u){const Ae=ee.clientX-s,ce=ee.clientY-x;Math.abs(ce)>F?(ee.preventDefault(),this.$input.blur(),u=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(Ae)>F&&D()}if(!u){const Ae=ee.clientY-B;R-=Ae*this._step*this._arrowKeyMultiplier(ee),I+R>this._max?R=this._max-I:I+R<this._min&&(R=this._min-I),this._snapClampSetValue(I+R)}B=ee.clientY},D=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",D)},V=()=>{this._inputFocused=!0},X=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",a),this.$input.addEventListener("keydown",c),this.$input.addEventListener("wheel",f,{passive:!1}),this.$input.addEventListener("mousedown",M),this.$input.addEventListener("focus",V),this.$input.addEventListener("blur",X)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(X,ee,Ae,ce,ue)=>(X-ee)/(Ae-ee)*(ue-ce)+ce,a=X=>{const ee=this.$slider.getBoundingClientRect();let Ae=e(X,ee.left,ee.right,this._min,this._max);this._snapClampSetValue(Ae)},n=X=>{this._setDraggingStyle(!0),a(X.clientX),window.addEventListener("mousemove",c),window.addEventListener("mouseup",f)},c=X=>{a(X.clientX)},f=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",f)};let u=!1,s,x;const B=X=>{X.preventDefault(),this._setDraggingStyle(!0),a(X.touches[0].clientX),u=!1},I=X=>{X.touches.length>1||(this._hasScrollBar?(s=X.touches[0].clientX,x=X.touches[0].clientY,u=!0):B(X),window.addEventListener("touchmove",R,{passive:!1}),window.addEventListener("touchend",F))},R=X=>{if(u){const ee=X.touches[0].clientX-s,Ae=X.touches[0].clientY-x;Math.abs(ee)>Math.abs(Ae)?B(X):(window.removeEventListener("touchmove",R),window.removeEventListener("touchend",F))}else X.preventDefault(),a(X.touches[0].clientX)},F=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",R),window.removeEventListener("touchend",F)},M=this._callOnFinishChange.bind(this),N=400;let D;const V=X=>{if(Math.abs(X.deltaX)<Math.abs(X.deltaY)&&this._hasScrollBar)return;X.preventDefault();const Ae=this._normalizeMouseWheel(X)*this._step;this._snapClampSetValue(this.getValue()+Ae),this.$input.value=this.getValue(),clearTimeout(D),D=setTimeout(M,N)};this.$slider.addEventListener("mousedown",n),this.$slider.addEventListener("touchstart",I,{passive:!1}),this.$slider.addEventListener("wheel",V,{passive:!1})}_setDraggingStyle(e,a="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${a}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:a,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(a=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),a+-n}_arrowKeyMultiplier(e){let a=this._stepExplicit?1:10;return e.shiftKey?a*=10:e.altKey&&(a/=10),a}_snap(e){let a=0;return this._hasMin?a=this._min:this._hasMax&&(a=this._max),e-=a,e=Math.round(e/this._step)*this._step,e+=a,e=parseFloat(e.toPrecision(15)),e}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class CD extends so{constructor(e,a,n,c){super(e,a,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(c)}options(e){return this._values=Array.isArray(e)?e:Object.values(e),this._names=Array.isArray(e)?e:Object.keys(e),this.$select.replaceChildren(),this._names.forEach(a=>{const n=document.createElement("option");n.textContent=a,this.$select.appendChild(n)}),this.updateDisplay(),this}updateDisplay(){const e=this.getValue(),a=this._values.indexOf(e);return this.$select.selectedIndex=a,this.$display.textContent=a===-1?e:this._names[a],this}}class MD extends so{constructor(e,a,n){super(e,a,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",c=>{c.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}var RD=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "↕";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  font-weight: 600;
  padding: 0 var(--padding);
  width: 100%;
  text-align: left;
  background: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "▾";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "▸";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "✓";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  border: none;
}
.lil-gui .controller button {
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
}
@media (hover: hover) {
  .lil-gui .controller button:hover {
    background: var(--hover-color);
  }
  .lil-gui .controller button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui .controller button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function ID(t){const e=document.createElement("style");e.innerHTML=t;const a=document.querySelector("head link[rel=stylesheet], head style");a?document.head.insertBefore(e,a):document.head.appendChild(e)}let Yv=!1;class p4{constructor({parent:e,autoPlace:a=e===void 0,container:n,width:c,title:f="Controls",closeFolders:u=!1,injectStyles:s=!0,touchStyles:x=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("button"),this.$title.classList.add("title"),this.$title.setAttribute("aria-expanded",!0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(f),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),x&&this.domElement.classList.add("allow-touch-styles"),!Yv&&s&&(ID(RD),Yv=!0),n?n.appendChild(this.domElement):a&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),c&&this.domElement.style.setProperty("--width",c+"px"),this._closeFolders=u}add(e,a,n,c,f){if(Object(n)===n)return new CD(this,e,a,n);const u=e[a];switch(typeof u){case"number":return new BD(this,e,a,n,c,f);case"boolean":return new mD(this,e,a);case"string":return new MD(this,e,a);case"function":return new w3(this,e,a)}console.error(`gui.add failed
	property:`,a,`
	object:`,e,`
	value:`,u)}addColor(e,a,n=1){return new wD(this,e,a,n)}addFolder(e){const a=new p4({parent:this,title:e});return this.root._closeFolders&&a.close(),a}load(e,a=!0){return e.controllers&&this.controllers.forEach(n=>{n instanceof w3||n._name in e.controllers&&n.load(e.controllers[n._name])}),a&&e.folders&&this.folders.forEach(n=>{n._title in e.folders&&n.load(e.folders[n._title])}),this}save(e=!0){const a={controllers:{},folders:{}};return this.controllers.forEach(n=>{if(!(n instanceof w3)){if(n._name in a.controllers)throw new Error(`Cannot save GUI with duplicate property "${n._name}"`);a.controllers[n._name]=n.save()}}),e&&this.folders.forEach(n=>{if(n._title in a.folders)throw new Error(`Cannot save GUI with duplicate folder "${n._title}"`);a.folders[n._title]=n.save()}),a}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const a=this.$children.clientHeight;this.$children.style.height=a+"px",this.domElement.classList.add("transition");const n=f=>{f.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const c=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=c+"px"})}),this}title(e){return this._title=e,this.$title.textContent=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(n=>n.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(a=>{e=e.concat(a.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(a=>{e=e.concat(a.foldersRecursive())}),e}}const UD=[{id:"2d095ab2-c2c6-477e-ba12-daed8b8585be",angleX:345.6,angleY:33.12,angleZ:0},{id:"806d8a3d-5293-453e-9582-80004d2d06c6",angleX:0,angleY:180,angleZ:0},{id:"a4548c3b-a0b7-4ede-a138-c5dc6b875933",angleX:0,angleY:169.92,angleZ:0},{id:"7f74c57d-c9ef-42fc-9fb7-a27d06be2f84",angleX:0,angleY:195.48,angleZ:0},{id:"63fef656-419e-4d3a-9e54-bd3a7a87c682",angleX:0,angleY:22.68,angleZ:0},{id:"f0c9820f-5b58-48ee-99e5-7955e6158884",angleX:0,angleY:185.04,angleZ:0},{id:"bc9bbd19-91ef-4851-8182-3db226e0368d",angleX:0,angleY:190.08,angleZ:0},{id:"dcddcc93-94eb-4ef4-86b9-c02c3cf50bd9",angleX:0,angleY:331.56,angleZ:0},{id:"d3f205e4-2f37-44e5-a2df-04d5d312ed4d",angleX:0,angleY:0,angleZ:0},{id:"18720b37-aea0-46b7-a26e-3f517fab2963",angleX:0,angleY:178.92,angleZ:0},{id:"8eab0199-39e9-43f0-a6ff-b209c86c1190",angleX:6.48,angleY:174.24,angleZ:352.44},{id:"54bbbad1-16d6-41d3-9e02-a69b18a68818",angleX:0,angleY:169.56,angleZ:0},{id:"195b0c47-9ab8-4ef0-92ec-6dae7c45bf4d",angleX:0,angleY:121.32,angleZ:0},{id:"4e9ae76e-1cd1-40d8-842d-c73ea77d31c3",angleX:0,angleY:0,angleZ:0},{id:"5fbb39cc-da39-4993-aac1-da8fffa277b7",angleX:0,angleY:105.12,angleZ:345.96},{id:"c07bdcc3-4f9f-44b0-b3e8-3062d76c1755",angleX:10.44,angleY:149.76,angleZ:343.44},{id:"e48ce9ff-a7af-4303-82e4-907b63ae1f15",angleX:0,angleY:312.12,angleZ:0},{id:"fe8ce83a-1deb-4746-ad57-d065869542db",angleX:0,angleY:0,angleZ:0},{id:"92edfca3-f2cf-4712-947a-fd9ce9bd2443",angleX:351,angleY:24.84,angleZ:0},{id:"fb9da0b1-94b7-4d70-8311-a1b3815a6bf8",angleX:0,angleY:242.64,angleZ:0},{id:"784ffbf9-d075-4590-9f4d-88da92332743",angleX:0,angleY:160.92,angleZ:0},{id:"7d6c4174-0c20-43bf-bc33-1d1f8de0c67c",angleX:0,angleY:63.36,angleZ:0},{id:"f46fa0c6-29bf-4515-b3a8-625f3caf8915",angleX:0,angleY:210.24,angleZ:0},{id:"c4143759-f84c-4d16-b348-2db5c4586ef8",angleX:0,angleY:236.52,angleZ:0},{id:"68669c1b-3c4b-4648-af9b-2b06bbadb69e",angleX:0,angleY:339.12,angleZ:0},{id:"f0446006-4b3c-484d-a60f-89c1a35d440b",angleX:349.2,angleY:340.92,angleZ:357.12},{id:"ccb8bd2f-23d5-4110-8ccb-7896d1192715",angleX:0,angleY:202.32,angleZ:0},{id:"c5d29148-d5f9-4335-98cc-7ace506b0822",angleX:0,angleY:60.12,angleZ:0},{id:"5ceb5e76-be1a-4646-9169-c2621e61d1e1",angleX:0,angleY:309.24,angleZ:0},{id:"ebe9aeea-f131-459d-87e2-04d8567d642f",angleX:0,angleY:0,angleZ:0},{id:"72f6af4d-d44e-420c-b329-05ede39a7c04",angleX:0,angleY:338.04,angleZ:0},{id:"6cc0ab91-1a88-4215-9871-17ab4561a8c0",angleX:0,angleY:157.68,angleZ:0},{id:"820923e2-c0ca-43fd-b328-23c5524169ce",angleX:0,angleY:206.28,angleZ:0},{id:"954c4373-7a88-4b4b-89d4-22aa8ed866c1",angleX:12.6,angleY:243.36,angleZ:0},{id:"e6bdea15-6779-4521-b45e-63045ed19114",angleX:0,angleY:77.04,angleZ:0},{id:"5fd6f5be-c0b1-4bf7-9614-45b124600bad",angleX:0,angleY:159.84,angleZ:0},{id:"fafb18e7-fe8a-4dd8-9f29-7cb74f61803f",angleX:0,angleY:271.44,angleZ:0},{id:"6b1ccdb8-789d-4ae5-9115-d205b029913b",angleX:0,angleY:284.76,angleZ:14.76},{id:"99df69ad-ffe5-4b50-98f5-a8c8e904b322",angleX:0,angleY:22.68,angleZ:0},{id:"52f84182-eeb8-48ea-ab9e-59cc0c7b8f09",angleX:0,angleY:45.72,angleZ:0},{id:"d2c14319-9692-4c9a-bc20-cc115228ddc1",angleX:0,angleY:0,angleZ:0},{id:"24cb17a8-1535-41d6-b8c8-afe22460a5ce",angleX:0,angleY:54.72,angleZ:0},{id:"b993ed6d-ff21-4ed6-9e45-b3d43f918951",angleX:0,angleY:324.72,angleZ:0},{id:"3a1f6bbd-11ba-4350-a16d-7618f0ed6de1",angleX:0,angleY:0,angleZ:0},{id:"a27b8577-698c-4239-88db-f9f026c91fbb",angleX:0,angleY:329.04,angleZ:0},{id:"2f1d27bb-2011-4988-8def-272f2fc27a42",angleX:0,angleY:324.72,angleZ:0},{id:"eb3a85b9-38b7-4d54-aa0d-c478cb98f901",angleX:337.68,angleY:0,angleZ:0},{id:"642d6c4d-4733-4422-bfe8-2960f12caef7",angleX:0,angleY:32.4,angleZ:0},{id:"cf19f20d-94b7-4ae8-91c3-744f8dfa5aba",angleX:0,angleY:76.68,angleZ:0},{id:"2b3776ff-7665-4024-907b-72af43004e60",angleX:0,angleY:231.84,angleZ:0},{id:"81dd6481-87d4-46a7-9759-2cdbe8c32dbf",angleX:0,angleY:338.04,angleZ:0},{id:"644a68f5-b574-4cf6-818e-95b7c18e2c02",angleX:0,angleY:54.36,angleZ:0},{id:"bb6cab72-30a0-45cf-a8c2-ca1761381d4e",angleX:0,angleY:72.72,angleZ:0},{id:"266eed65-5752-44fc-95d8-0107a4124bc0",angleX:0,angleY:165.96,angleZ:0},{id:"00cff6a2-caeb-43c3-a967-b5c8cc2f386b",angleX:0,angleY:182.16,angleZ:0},{id:"18ef3957-8def-4643-9762-d56ac06ee276",angleX:8.28,angleY:235.08,angleZ:0},{id:"33494c1f-9292-4f10-ae1f-4598ba176230",angleX:0,angleY:0,angleZ:0},{id:"8e8da934-5ef1-4c9e-a4dc-742e0b0c68f3",angleX:0,angleY:0,angleZ:0},{id:"ff70f739-ecc3-4c95-8560-2cd9f0a7238e",angleX:0,angleY:226.08,angleZ:0},{id:"24d7e470-d984-476d-9cf3-e5531b7b413b",angleX:0,angleY:309.24,angleZ:0},{id:"16c58973-2bd5-4965-96e2-e0a98b807a9c",angleX:0,angleY:62.28,angleZ:0},{id:"82d238e7-2645-4664-b8ad-8011e91be5a5",angleX:10.08,angleY:180,angleZ:341.64},{id:"dca135b2-149d-426c-ac4e-1ca528788d14",angleX:0,angleY:347.76,angleZ:360},{id:"5581ce61-2ab5-4501-9b82-c8e7b7bcecc7",angleX:0,angleY:238.68,angleZ:0},{id:"9bb88468-a55e-4fb5-8a95-1d4a6b80de39",angleX:0,angleY:81.36,angleZ:0},{id:"b49e3c58-807e-4459-845a-6acec3e01c54",angleX:0,angleY:101.16,angleZ:0},{id:"81d26a76-c4a4-4a41-a4ac-40bae55cd83a",angleX:0,angleY:326.52,angleZ:0},{id:"e05a4426-a94c-4675-895d-837440e3f12e",angleX:18.36,angleY:306,angleZ:7.92},{id:"4966444b-f798-4492-88e7-59c9794d3a74",angleX:0,angleY:195.48,angleZ:0},{id:"785a861c-f536-471b-90db-9fb3fdd5414d",angleX:0,angleY:155.52,angleZ:0},{id:"4169e804-e082-46d5-8286-f170c4c6a6b6",angleX:0,angleY:40.32,angleZ:0},{id:"1068e5d1-c464-4506-89eb-153a71fa0dc0",angleX:0,angleY:351,angleZ:0},{id:"b25c999a-4d12-48ea-bdb7-00c6b9eb7e1e",angleX:0,angleY:271.08,angleZ:0},{id:"f8399f26-4b05-40db-b0d2-27564bdcd5eb",angleX:0,angleY:307.8,angleZ:0},{id:"e79d2113-b714-4743-98fa-db97f9efd9d8",angleX:0,angleY:313.56,angleZ:0},{id:"cde292ce-d6c5-42bb-88d4-2055c3498818",angleX:345.96,angleY:86.76,angleZ:345.96},{id:"51fc8a9c-4884-484c-ade7-aaf400f4b672",angleX:0,angleY:95.4,angleZ:0},{id:"75d09c4a-01a4-4ecc-8540-7856a9a87a64",angleX:0,angleY:169.56,angleZ:0},{id:"443b5e4a-cdd0-416f-ae3e-72b4807146eb",angleX:0,angleY:14.04,angleZ:0},{id:"c1a0e780-39fb-4b53-86d8-5c7027275f13",angleX:0,angleY:201.96,angleZ:0},{id:"7a0b51c3-20d1-4f83-9ccc-828db3e54b00",angleX:0,angleY:191.52,angleZ:0},{id:"31ae9696-1480-428e-8a95-1e5e39f02d94",angleX:0,angleY:323.64,angleZ:0},{id:"c175fcf3-baf9-4b8a-a5a6-f2cae26a2d70",angleX:0,angleY:202.32,angleZ:0},{id:"9ebe4076-473a-4896-9bb7-6ed2441b7637",angleX:0,angleY:180.36,angleZ:0},{id:"65236f73-de4a-4b11-9d79-1d99fe3bc60e",angleX:351.72,angleY:74.88,angleZ:0},{id:"494f8ad9-f560-4df8-b684-5eb2a993aaed",angleX:0,angleY:262.8,angleZ:0},{id:"f692e86a-2276-4ea7-bc91-87cd6ef3f93a",angleX:357.84,angleY:60.12,angleZ:0},{id:"e27f0531-fb28-4e32-b389-bf9beda7b936",angleX:0,angleY:157.68,angleZ:0},{id:"e9fa81f3-8e30-4c98-bbee-c43da9bee234",angleX:0,angleY:29.16,angleZ:0},{id:"089db877-2e33-4f84-b33d-b50fd80be429",angleX:0,angleY:0,angleZ:0},{id:"97e48621-d378-4a21-8705-cb76ca6a5dc8",angleX:0,angleY:230.04,angleZ:0},{id:"b8ad9125-4f3b-47cf-91d1-018dda7e3345",angleX:351.72,angleY:85.32,angleZ:0},{id:"9facc575-a168-4054-8259-14c7b17eb50e",angleX:0,angleY:162.36,angleZ:0},{id:"a2ca91d8-7d5c-4b43-ac8f-bd85c3f35f4b",angleX:345.6,angleY:106.2,angleZ:0},{id:"6b491c73-0a6b-4ab1-a70f-03aeeb0ab151",angleX:0,angleY:7.92,angleZ:0},{id:"00c21f02-7750-4f0c-928e-88ca235e9b67",angleX:0,angleY:244.8,angleZ:0},{id:"464fdb88-ae7c-40e2-a833-7a8aa93eb938",angleX:0,angleY:114.48,angleZ:0},{id:"c68adabc-1bbc-47ba-b17f-a92c9314fdee",angleX:0,angleY:137.52,angleZ:0},{id:"fdbfaac8-9ada-4d5e-ad8f-f19f94de7945",angleX:0,angleY:7.92,angleZ:0},{id:"2f877e3c-02d6-4cb0-b432-35a2db82a33b",angleX:0,angleY:156.6,angleZ:0},{id:"b98098a0-a39e-47e2-9ca6-ce2c918a80f1",angleX:0,angleY:186.12,angleZ:0},{id:"70603dac-68ec-451c-aa7d-4f7ae3ea60eb",angleX:0,angleY:335.16,angleZ:0},{id:"54f1a5ef-52f4-47fc-9143-6f5f47261e1e",angleX:0,angleY:122.76,angleZ:0},{id:"cbec785b-641f-4eb2-ade1-79e57b224973",angleX:0,angleY:151.92,angleZ:0},{id:"827c817d-0923-4613-a769-76d952e396ca",angleX:6.12,angleY:319.68,angleZ:6.12},{id:"266dc671-314c-4a04-b997-333cf4896954",angleX:0,angleY:345.96,angleZ:0},{id:"e6c26e1f-f9a3-4f3f-9d99-0e846e280a94",angleX:0,angleY:135.36,angleZ:0},{id:"b8f6bf36-930c-4825-91ef-c448ae0e39dc",angleX:0,angleY:10.44,angleZ:0},{id:"07e8d184-9438-42cb-a60f-2bbad92682bf",angleX:0,angleY:327.6,angleZ:0},{id:"57a943b7-7c43-435a-9986-855e58befdd0",angleX:347.76,angleY:119.16,angleZ:0},{id:"2f6d9aeb-0e31-4d9b-9cd9-d296be901ff3",angleX:0,angleY:198,angleZ:0},{id:"c3e1acad-e60c-4466-8969-ab3bcd17c88b",angleX:0,angleY:303.48,angleZ:0},{id:"1fa63746-5020-4965-bb7e-76f65702efca",angleX:0,angleY:349.92,angleZ:0},{id:"eea6f2b6-b4f0-4988-ba59-252f4128d6c2",angleX:0,angleY:311.4,angleZ:0},{id:"fbe68c4c-71d7-4a49-ad69-964cb9776db4",angleX:0,angleY:333.36,angleZ:10.44},{id:"3c1d1946-f830-40fb-92a4-c07ba33529aa",angleX:0,angleY:204.12,angleZ:0},{id:"127321ca-f0bf-4d7c-aae3-5daf4f2f8b9a",angleX:0,angleY:29.16,angleZ:0},{id:"c086e123-d912-4012-9fb9-843be0944551",angleX:0,angleY:74.88,angleZ:0},{id:"23345942-6797-4005-8427-440be93a2dcf",angleX:0,angleY:192.24,angleZ:0},{id:"521b00fd-916b-4b8f-a201-3494f4e24bc8",angleX:0,angleY:0,angleZ:0},{id:"0af2b4ad-9a68-4c25-accb-722d369ddbeb",angleX:0,angleY:159.84,angleZ:0},{id:"706fe51b-2ee6-4918-ab11-4311894ff7b8",angleX:0,angleY:203.4,angleZ:0},{id:"0640ba69-2e08-46fa-aba7-28434bd39191",angleX:0,angleY:0,angleZ:0},{id:"26e1f54b-a336-49e4-b1bc-9858a750edca",angleX:0,angleY:141.48,angleZ:0},{id:"13314772-fe08-4088-b84f-9c15282ae495",angleX:0,angleY:213.84,angleZ:0},{id:"b0397178-5992-4daf-8f35-2d052b0aa5cf",angleX:0,angleY:107.28,angleZ:0},{id:"1241a9d6-d02d-43ab-8ef7-db2659bb36b5",angleX:7.56,angleY:244.8,angleZ:357.12},{id:"a058fb1d-afae-4725-984e-7934b778356a",angleX:351.36,angleY:156.96,angleZ:0},{id:"de03328d-71af-4365-8764-84d8cc5089f3",angleX:0,angleY:249.48,angleZ:0},{id:"f9b52d3b-d30e-4182-8c5a-15abbc8ddaed",angleX:0,angleY:10.44,angleZ:0},{id:"568ad1ef-0e4c-4f03-b004-622f7bf8e006",angleX:0,angleY:329.04,angleZ:0},{id:"0262703d-7834-4cb1-9cfc-8be6243342f4",angleX:0,angleY:60.48,angleZ:0},{id:"c814cf7a-f863-4ac2-b526-9c38f91e08bf",angleX:0,angleY:23.76,angleZ:0},{id:"427e1816-3562-4b7c-8eca-cb70131701ef",angleX:0,angleY:262.8,angleZ:0},{id:"5c22abfd-3644-4edd-a1b9-7c32b259fd8e",angleX:0,angleY:54.72,angleZ:0},{id:"7f3d289a-1f2c-429e-bef4-c57f730585ef",angleX:0,angleY:19.44,angleZ:0},{id:"0afc7f0a-0f3e-4888-9ef0-d300085cfade",angleX:0,angleY:0,angleZ:0},{id:"4cd83911-d237-4c24-9ed1-006092ab130b",angleX:0,angleY:329.04,angleZ:0},{id:"16db3bc9-6993-4792-ba52-5b39c93be075",angleX:0,angleY:222.84,angleZ:0},{id:"8a56337d-cd4d-44ab-b528-796f8ea7696e",angleX:0,angleY:92.88,angleZ:0},{id:"79daf39d-f056-4789-a9de-0a307d0d807e",angleX:0,angleY:60.12,angleZ:0},{id:"eec3ff06-c48d-4f4b-83a4-4a860b9038f4",angleX:5.4,angleY:231.84,angleZ:0},{id:"05e29ea3-f816-4d65-9bf4-09d743346025",angleX:0,angleY:153.72,angleZ:0},{id:"8cfb95c6-ffa3-415c-961a-01d2186b5f3d",angleX:0,angleY:227.16,angleZ:0},{id:"055e5fdd-41d7-4a6a-b6e4-68651a9cef61",angleX:0,angleY:236.52,angleZ:0},{id:"b326084b-7beb-4a0e-abf6-cbf4ff93d7b5",angleX:0,angleY:0,angleZ:0},{id:"f4374c5c-1d71-44ba-a3d0-806b09f987a2",angleX:0,angleY:180,angleZ:0},{id:"1c7a4117-5cb8-45d6-95cb-ff3743f11e1b",angleX:0,angleY:159.84,angleZ:0},{id:"139b3d14-371a-41f1-bf72-13005c34146a",angleX:0,angleY:0,angleZ:0},{id:"eff8984a-a037-44a9-a6d3-b67271dca211",angleX:0,angleY:186.12,angleZ:0},{id:"7466df8e-abf4-4f95-9a7e-2687c83cc113",angleX:0,angleY:37.44,angleZ:0},{id:"64576b90-1086-48bf-b906-ec2c3e1bda83",angleX:0,angleY:208.44,angleZ:0},{id:"f8c23b76-cc99-4bc8-92de-e0b9c9375a63",angleX:0,angleY:284.76,angleZ:7.56},{id:"ff9bdda5-96a0-4e9b-b9df-d0c128331fc8",angleX:0,angleY:220.32,angleZ:0},{id:"1bb2789c-badb-4268-b009-2ea4e5b8faf9",angleX:0,angleY:309.6,angleZ:0},{id:"b5cc45cd-42b1-4a9c-b19d-37b2abb7d0f0",angleX:0,angleY:216.36,angleZ:0},{id:"cd12638a-9cca-482d-98ae-391beb963efa",angleX:0,angleY:0,angleZ:0},{id:"ef0c8a1d-58e0-48f8-9d3d-e7b6e67ee0b7",angleX:0,angleY:242.64,angleZ:0},{id:"81226ed7-6310-4831-bd7b-636532f7613c",angleX:0,angleY:28.08,angleZ:0},{id:"13da355c-334e-4d93-8345-87353b9afea0",angleX:352.44,angleY:0,angleZ:8.64},{id:"fb367185-f72c-4db1-94b5-64ae54218cff",angleX:0,angleY:291.24,angleZ:0},{id:"8a2df9a4-1d55-4822-a592-5d8c9321ff01",angleX:0,angleY:190.08,angleZ:0},{id:"2deaba17-ae58-40a8-ae7d-4860ffdbe26a",angleX:0,angleY:20.16,angleZ:0},{id:"6df1449f-fdcd-4b1b-9ad7-1cf143a3d7ed",angleX:0,angleY:360,angleZ:0},{id:"ccf7dfcc-20d0-445f-bfb4-decb932ddf1d",angleX:0,angleY:307.44,angleZ:0},{id:"6424ca53-dde9-42ba-97b1-ad1dd30dbac7",angleX:0,angleY:165.24,angleZ:0},{id:"5aee96c3-4935-4640-9fe8-5e98f4bbc5b5",angleX:341.28,angleY:64.44,angleZ:0},{id:"94af7119-caa8-4ce5-af26-b9957589fb4b",angleX:0,angleY:186.12,angleZ:0},{id:"01fe1f15-5bdd-4bad-bdad-60c5de5eda07",angleX:0,angleY:138.6,angleZ:0},{id:"3fbbb9ba-1375-401b-835e-37387f97edca",angleX:0,angleY:28.44,angleZ:0},{id:"adf966f7-68fc-46fd-ba46-7535aba56e22",angleX:0,angleY:163.8,angleZ:0},{id:"67efccb5-8f40-497b-9b79-044fddda80dc",angleX:0,angleY:323.64,angleZ:0},{id:"b4a9a9e2-de86-4d41-a537-3e58489a7191",angleX:0,angleY:224.64,angleZ:0},{id:"e4efc3ac-f20b-409f-8cf6-dab3aeca894d",angleX:345.6,angleY:116.64,angleZ:0},{id:"e97b4a79-0978-4964-84e5-d0ca6ce7c3ad",angleX:0,angleY:197.64,angleZ:0},{id:"461c6238-9b6e-4d2c-9f31-42bcd78603de",angleX:0,angleY:3.96,angleZ:0},{id:"6ce11aeb-6745-49bc-a714-3f7b0a1559f9",angleX:0,angleY:132.84,angleZ:0},{id:"7bb2a421-711c-47a1-b7e8-5c8c1c6b4bfe",angleX:339.12,angleY:97.56,angleZ:0},{id:"135c0d0c-c1bd-4cfa-8d2d-1d616bfed880",angleX:0,angleY:0,angleZ:0},{id:"58b858ee-0a42-4010-9209-f526403d093a",angleX:0,angleY:226.44,angleZ:0},{id:"45e39230-5f77-4846-bfed-c6f4a362ab1f",angleX:0,angleY:351.72,angleZ:0},{id:"1303c9e1-2989-4ee5-9299-26b696279400",angleX:0,angleY:172.8,angleZ:0},{id:"fe465e59-3a83-4d25-a01a-f532bd65a5c3",angleX:0,angleY:187.2,angleZ:0},{id:"616dd84d-0025-48cc-b52d-cac7a4a709f8",angleX:0,angleY:0,angleZ:0},{id:"a30042b7-0ccc-4250-bed1-3d4e1ec4623c",angleX:0,angleY:60.48,angleZ:0},{id:"f9b7e69e-7157-4363-8a6a-8a2559e63743",angleX:355.32,angleY:159.12,angleZ:345.24},{id:"f9d0c404-369b-4f24-beec-0aa0d485b123",angleX:349.56,angleY:70.56,angleZ:0},{id:"496180f0-b156-4aa9-ad0c-d27bbe140d43",angleX:0,angleY:72.72,angleZ:360},{id:"b69e4150-06e5-4d1e-a7e2-254f33f957bb",angleX:0,angleY:303.48,angleZ:0},{id:"ec9ebeb3-11d9-41d6-aa02-2baa52053d3f",angleX:0,angleY:109.8,angleZ:0},{id:"81ebd549-40bc-4c04-b74e-08cface71827",angleX:11.88,angleY:206.64,angleZ:0},{id:"2f762319-22bc-4b89-9bba-97449334362a",angleX:0,angleY:86.76,angleZ:0},{id:"71f48cf3-ac2d-4d82-b28e-e4cda20d7270",angleX:0,angleY:321.48,angleZ:0},{id:"bff7692f-d52a-4b7e-8c24-2b2d1ed6e507",angleX:0,angleY:7.92,angleZ:0},{id:"3388376e-f176-4b35-8b15-4f8540f6da3f",angleX:0,angleY:312.12,angleZ:0},{id:"bba56b57-83fa-4d64-8167-93c34d6d8c9e",angleX:0,angleY:326.88,angleZ:0},{id:"f79249c3-1aab-45f9-b9dd-47073e325e53",angleX:8.28,angleY:247.68,angleZ:0},{id:"57fa2dba-7969-499e-a643-bf842e0eb588",angleX:0,angleY:335.16,angleZ:0},{id:"b7d87fb6-f438-48fa-bc65-b147ac220a1a",angleX:0,angleY:299.16,angleZ:0},{id:"c905e285-74b5-4082-bea4-33dd5745d2fe",angleX:2.16,angleY:309.96,angleZ:0},{id:"e0fe4510-f608-4c2e-b0d7-3e03f4770db2",angleX:0,angleY:351,angleZ:0},{id:"59b13f27-ab1f-45b1-85b3-0b8319be1784",angleX:0,angleY:267.12,angleZ:0},{id:"24cfb458-cc7c-4e07-82d0-983b70a1d232",angleX:0,angleY:309.24,angleZ:0},{id:"b4535254-6c77-4314-b1d9-305ee4759c3e",angleX:0,angleY:314.28,angleZ:16.56},{id:"8df86ef1-3146-4b3a-bdb3-df139e1e8f8c",angleX:0,angleY:327.6,angleZ:0},{id:"932aa6cc-7d93-4d41-be02-62d3c1c1439d",angleX:6.12,angleY:212.4,angleZ:0},{id:"88dcee97-eab5-4a11-911f-c179a23ec6c5",angleX:0,angleY:111.24,angleZ:0},{id:"f05ddc85-486e-4202-aaa3-506cc0abd09c",angleX:0,angleY:285.12,angleZ:0},{id:"9194fe8f-b0d3-41e9-8973-323ddfa38bd3",angleX:0,angleY:70.56,angleZ:0},{id:"21c11e67-1420-4604-b83d-acbef8c086c6",angleX:0,angleY:0,angleZ:0},{id:"931205df-5fdb-43e3-92e4-2abd37476508",angleX:0,angleY:50.4,angleZ:0},{id:"fe110639-84f5-4e7c-959d-449dcdebe987",angleX:0,angleY:68.76,angleZ:0},{id:"80273d5e-62f3-470b-bea4-3f62172a8b54",angleX:0,angleY:72.72,angleZ:0},{id:"f476affe-ba2d-437d-8a86-30924d2799c5",angleX:0,angleY:147.6,angleZ:0},{id:"17c380bf-b136-4633-b553-ff814b6ad735",angleX:0,angleY:131.4,angleZ:0},{id:"8568780f-01a4-4fac-9849-cafc08adb69e",angleX:0,angleY:293.4,angleZ:0},{id:"fdd56e3b-43f5-4a42-a47b-28856757a6e3",angleX:6.12,angleY:262.08,angleZ:0},{id:"b8ebf798-5d71-4af8-9522-0a36affc9d4a",angleX:0,angleY:10.44,angleZ:0},{id:"30a2a136-ef7c-4eaa-83ee-9a7c1d868c1a",angleX:0,angleY:208.44,angleZ:0},{id:"472756ff-c3c8-42e0-b66c-ece0b95c3690",angleX:0,angleY:351,angleZ:0},{id:"8dc89cf0-1c20-446d-855b-c4bd26f9958e",angleX:0,angleY:23.76,angleZ:0},{id:"d194c8cc-563c-40f9-a26c-1c5647fab509",angleX:0,angleY:28.08,angleZ:0},{id:"dbc39770-ca89-4fe2-8244-45dae960414b",angleX:0,angleY:56.52,angleZ:0},{id:"d6912bbe-9517-461f-b8a4-1a38d8f0f7a9",angleX:0,angleY:284.4,angleZ:0},{id:"e92928ec-3225-4c37-97ff-9f7e55f574ce",angleX:0,angleY:27.72,angleZ:0},{id:"a10afb7e-3035-42c8-983c-d67e79b1dc2d",angleX:0,angleY:23.76,angleZ:0},{id:"82573989-b50c-4134-bf31-236b260ff200",angleX:0,angleY:50.4,angleZ:0},{id:"7667102b-b839-43bc-8c57-631ba3dead76",angleX:0,angleY:329.04,angleZ:0},{id:"cf8f6370-0d97-4f2f-9847-bd046105406e",angleX:0,angleY:50.4,angleZ:0},{id:"0a8f8d58-0a78-474a-bb2b-bb2b30063173",angleX:0,angleY:0,angleZ:0},{id:"694193c7-c04c-42cc-a808-a2518360477f",angleX:0,angleY:202.32,angleZ:0},{id:"a564eea2-6a66-45ed-862c-16ea7f4f7cae",angleX:0,angleY:0,angleZ:0},{id:"0bd7732c-d114-4d2a-b03a-577c3c9fef2d",angleX:0,angleY:186.12,angleZ:0},{id:"8b7ffc70-25d4-47d8-9603-92d7726da83b",angleX:353.88,angleY:0,angleZ:8.28},{id:"d8ebc819-f558-4bac-b7b6-0aac66a99889",angleX:0,angleY:89.28,angleZ:0},{id:"42e3e904-cf13-4f4c-8b2d-3c814d6e1800",angleX:0,angleY:114.12,angleZ:0},{id:"23f0d37b-ba5b-48ce-889f-2dcfc5040879",angleX:0,angleY:0,angleZ:0},{id:"ee517e53-1a1b-4f2b-b31d-6c95d2b377b7",angleX:0,angleY:30.96,angleZ:0},{id:"5c321f14-8758-4964-aa42-f9e7c99fd751",angleX:0,angleY:307.44,angleZ:0},{id:"e2ba912e-a4f6-474f-bfb2-1e766ca84d22",angleX:0,angleY:0,angleZ:0},{id:"4f82ab87-e97c-4dfc-aa78-4857ae45608b",angleX:0,angleY:222.48,angleZ:0},{id:"7d5560a2-3ac1-489e-a40c-c2a6039e2f2a",angleX:339.12,angleY:68.76,angleZ:0},{id:"5ee52673-2a57-489b-91f3-466389349890",angleX:0,angleY:307.44,angleZ:0},{id:"a5212668-5d65-4e52-8159-d63a3db3732f",angleX:0,angleY:224.64,angleZ:0},{id:"c57141a6-65a6-4af2-af39-a0b970410f43",angleX:0,angleY:307.44,angleZ:24.12},{id:"3a675c17-b2c2-401a-b539-b2086206f5ab",angleX:0,angleY:331.56,angleZ:0},{id:"da658994-fcef-4dbe-9a2b-a5381114945d",angleX:0,angleY:0,angleZ:0},{id:"b5841a24-ac4f-4919-b4af-9e4146fa1e92",angleX:0,angleY:275.76,angleZ:0},{id:"89705ef8-9552-4efa-9fb2-14353ef1bf2b",angleX:9.72,angleY:266.76,angleZ:10.44},{id:"05e35ec3-1de6-4a2b-8e88-7a063eedd6b4",angleX:0,angleY:295.2,angleZ:0},{id:"327657c4-eeec-4340-af76-31601379ea5f",angleX:0,angleY:6.12,angleZ:0},{id:"0adbba9c-1bc2-4724-af47-4b7d7817797f",angleX:6.12,angleY:270.36,angleZ:0},{id:"8db18b71-fb3f-434d-8274-9018ae63b1a6",angleX:0,angleY:253.8,angleZ:347.4},{id:"20f1cb19-cacc-458d-9a09-0f054f7bb572",angleX:0,angleY:297.72,angleZ:0},{id:"6ca30412-a8b3-4063-9253-bc070e799b65",angleX:0,angleY:292.68,angleZ:0},{id:"9c01f6dd-330e-4790-8def-2aa1a8f98e32",angleX:0,angleY:6.12,angleZ:0},{id:"5c1c2d16-043d-4426-b8ae-6ed7abe6a5f0",angleX:0,angleY:307.8,angleZ:0},{id:"365fc2ab-6d94-4e3a-b3cc-3682f655f723",angleX:0,angleY:0,angleZ:0},{id:"3fb80330-df57-4136-bde0-e58c52694b0d",angleX:7.56,angleY:122.76,angleZ:0},{id:"53dfc28b-360c-4bd8-9475-c75463fb72c7",angleX:13.32,angleY:209.52,angleZ:0},{id:"ba8a41c5-10f2-4d02-8e6a-3c41dfb76c6c",angleX:0,angleY:78.84,angleZ:0},{id:"2c14f116-9e57-48b8-877e-a0e6afa1af3d",angleX:0,angleY:32.4,angleZ:0},{id:"94635419-73c1-41a4-b538-41404ec0f8de",angleX:0,angleY:182.16,angleZ:0},{id:"f9d647ac-b302-4d4d-bba5-09ae63072e09",angleX:15.84,angleY:194.4,angleZ:0},{id:"2707d75f-a817-432c-ad2f-1898254b96d1",angleX:0,angleY:30.96,angleZ:0},{id:"074a24a3-1dc3-4665-a60b-16844dcb631d",angleX:0,angleY:0,angleZ:0},{id:"03fc32c8-ce1d-4baf-b9f7-a0bf75368f7f",angleX:0,angleY:214.2,angleZ:0},{id:"5fad5b80-2430-46e4-855d-3a6f8cf52a60",angleX:0,angleY:37.08,angleZ:0},{id:"22b39111-10bc-4225-b921-900c49ff0227",angleX:0,angleY:347.76,angleZ:0},{id:"10a31dda-7c52-471e-a3ff-7cb98549e323",angleX:0,angleY:202.32,angleZ:0},{id:"706ca097-5443-44ac-982a-38e62c94b9b4",angleX:0,angleY:14.04,angleZ:0},{id:"a92b4801-e484-4b07-9239-5f273a1de51e",angleX:0,angleY:178.92,angleZ:0},{id:"35481545-a12f-4266-b478-098ced1aa55d",angleX:0,angleY:199.8,angleZ:0},{id:"1793a433-4548-4c75-9f82-f471e93b00f2",angleX:0,angleY:325.44,angleZ:0},{id:"5c9ec8a7-8ed4-4a08-b275-9df589605138",angleX:0,angleY:3.96,angleZ:0},{id:"b69cf6a6-2f48-40bd-b4ad-0bcd12dbc4dd",angleX:0,angleY:200.16,angleZ:0},{id:"317dfec8-7d0d-401c-b89a-17c0f5cf1aab",angleX:0,angleY:202.32,angleZ:0},{id:"c1276f28-9463-43ba-977c-482990cdc03c",angleX:0,angleY:32.4,angleZ:0},{id:"cb883bc2-4ac9-4789-9bc1-a6b3c2defec1",angleX:0,angleY:0,angleZ:0},{id:"33e62202-dc05-4bb0-9c44-67fcc9d7a0ce",angleX:0,angleY:186.12,angleZ:0},{id:"2083b59c-46fd-44f7-bafe-3fb758d17dfd",angleX:0,angleY:78.84,angleZ:0},{id:"8c73d5a3-1327-4d66-85e6-29409ee23e87",angleX:0,angleY:89.28,angleZ:0},{id:"9f73ea95-33d8-4fde-89ba-a4733d147f52",angleX:0,angleY:47.88,angleZ:0},{id:"94c1cb2a-d7ff-4857-a8bc-4c6a5b5b535d",angleX:0,angleY:296.64,angleZ:0},{id:"446ef0fc-d1d0-45d7-b060-24ab6f01c50c",angleX:0,angleY:115.2,angleZ:0},{id:"ba20286d-17d3-474a-a228-2a5b3d58dfc9",angleX:4.32,angleY:307.8,angleZ:0},{id:"bd67aec1-68e1-4378-b343-934c8fd9d710",angleX:0,angleY:325.44,angleZ:0},{id:"7bbbf293-b395-4b87-b724-fec4408714db",angleX:0,angleY:333,angleZ:0},{id:"bdab5079-224d-48d7-bde6-e4d10164f5a2",angleX:20.88,angleY:155.88,angleZ:341.28},{id:"0d114500-bdb8-4663-ab70-6fe98b2732bb",angleX:0,angleY:204.12,angleZ:0},{id:"efc34cd3-9c24-4197-a58c-50c918aff8f4",angleX:0,angleY:275.76,angleZ:7.56},{id:"b7b3d4cf-c4ff-4978-bafe-7aecfa03b179",angleX:0,angleY:337.68,angleZ:0},{id:"c4ef8c64-8224-4997-b1d8-b6fdf4a0b1c8",angleX:20.16,angleY:226.44,angleZ:0},{id:"fb2cbc26-deb9-4b01-9cf2-34b3f52e6e5b",angleX:0,angleY:195.12,angleZ:0},{id:"f426ccfc-48b5-4a73-8454-6a5fa46542a5",angleX:0,angleY:0,angleZ:0},{id:"19ff8574-e1c3-4d3e-a16d-cac9bd29aded",angleX:10.08,angleY:238.68,angleZ:0},{id:"6f828589-123f-4d59-8154-69d8e8668d5d",angleX:351,angleY:333.36,angleZ:7.56},{id:"dbb7545a-b2ec-4c6e-bcd2-4b8988b25c10",angleX:0,angleY:186.12,angleZ:0},{id:"caf3c783-bb45-4c34-b3f8-32c00ca344a6",angleX:0,angleY:161.64,angleZ:0},{id:"f5c61239-6413-4819-8494-fea41c08e7a1",angleX:10.44,angleY:160.92,angleZ:0},{id:"92bc69d3-2d62-43b0-9572-650ff3bc80b3",angleX:0,angleY:88.92,angleZ:0},{id:"087aae56-999d-4a30-9d65-cd819e082cea",angleX:0,angleY:0,angleZ:0},{id:"4fd677ea-2f7d-4169-9354-033f54fa586c",angleX:0,angleY:271.44,angleZ:0},{id:"6df4c0b2-9db1-4a70-a532-485b4f65bc7d",angleX:0,angleY:208.44,angleZ:0},{id:"a242d955-9749-463b-8648-50ce9cb0ccad",angleX:0,angleY:0,angleZ:0},{id:"a1975f69-1e2f-4af8-8378-8f579b709f5e",angleX:0,angleY:347.76,angleZ:0},{id:"2da9a6d7-b6c7-4d16-820b-8b19c469824a",angleX:0,angleY:338.04,angleZ:0},{id:"ca799b01-f12e-427b-811b-621e202bff57",angleX:0,angleY:133.56,angleZ:0},{id:"25a95402-c89a-4a93-96c8-e437bab489e1",angleX:0,angleY:66.6,angleZ:0},{id:"9e1ef4f9-d7b5-4c71-808e-31c0fa3c7f00",angleX:0,angleY:28.08,angleZ:0},{id:"669166d1-1074-496d-8fb3-480f9891d533",angleX:0,angleY:0,angleZ:0},{id:"0d74dc48-0d79-4ed3-886e-4fbcc110069a",angleX:349.56,angleY:62.28,angleZ:0},{id:"cfa203fb-30d0-403e-8c15-5193730b497b",angleX:0,angleY:23.76,angleZ:0},{id:"b72fe2a1-f7f1-43da-9ed4-757410bdb6c2",angleX:349.56,angleY:81,angleZ:0},{id:"917fb0bf-bc0f-4f3d-b1ca-198ee49d9b5b",angleX:0,angleY:329.04,angleZ:0},{id:"3c232da5-3ffe-424b-9d19-4a4cedd6cfb3",angleX:0,angleY:37.08,angleZ:0},{id:"cb07ca41-65a8-4be9-b18f-e4bbe07572a7",angleX:0,angleY:74.88,angleZ:0},{id:"de9611da-d3df-42c8-84d9-a6c7980e3110",angleX:0,angleY:19.44,angleZ:0},{id:"1c4237a9-4e4d-4e91-ad89-99c6dd00871b",angleX:0,angleY:333.36,angleZ:0},{id:"fc09be2e-7c0e-497f-8ea0-ea1cb409fe86",angleX:351.72,angleY:0,angleZ:8.28},{id:"29744b53-07c0-4421-beb6-5dec80f3472f",angleX:0,angleY:125.28,angleZ:0},{id:"07b28994-daeb-43f2-98fc-f247f8910096",angleX:0,angleY:207.36,angleZ:0},{id:"3be778aa-0a96-4ec6-af1b-e8a485bbd219",angleX:0,angleY:224.28,angleZ:0},{id:"17aabe00-ae1a-45b2-a097-3bcaffe79727",angleX:0,angleY:320.04,angleZ:0},{id:"2eeef48d-7544-4e68-9318-d322fe459550",angleX:6.12,angleY:165.24,angleZ:0},{id:"8ded9c6e-e798-4d4f-aa09-99f79c5ed896",angleX:0,angleY:147.24,angleZ:0},{id:"7174be35-d269-4cc2-9916-3d590a8d6bf6",angleX:0,angleY:99.72,angleZ:0},{id:"10b2d859-7381-452d-8bbe-cd2eb18008f9",angleX:0,angleY:202.32,angleZ:0},{id:"03c3716f-ea72-4c03-8dc3-a110c5e7f434",angleX:0,angleY:311.4,angleZ:5.4},{id:"4268001f-1b49-4991-ac65-38f83131274b",angleX:0,angleY:40.32,angleZ:0},{id:"894193c6-1dfc-4b55-b90f-c6cae1de7740",angleX:0,angleY:234.72,angleZ:0},{id:"679337fd-22a1-4ba2-97d8-1329ebd8a2a2",angleX:0,angleY:226.44,angleZ:0},{id:"cc7f68db-6d56-43f1-9cae-32346925edc9",angleX:0,angleY:181.8,angleZ:0},{id:"1dc40771-453a-4f6e-827a-5148c6ce0709",angleX:0,angleY:48.6,angleZ:0},{id:"d74d78e4-8441-43f4-bea7-e4aa8d0254fe",angleX:0,angleY:258.12,angleZ:10.44},{id:"8c227b3d-b649-4d09-8a65-350bdd6eef62",angleX:0,angleY:232.56,angleZ:0},{id:"a8d7c849-6b45-457c-83d5-98fcaa376017",angleX:0,angleY:295.56,angleZ:0},{id:"d825c44d-7702-4803-8956-4637f36224d5",angleX:12.6,angleY:212.04,angleZ:351.72},{id:"a4d1e36b-896a-4ac0-8297-444a87db9a2a",angleX:0,angleY:311.4,angleZ:3.96},{id:"b7671365-2de5-4bac-8108-d6d20033e99d",angleX:0,angleY:299.16,angleZ:0},{id:"8eec979c-341e-45d5-ade7-d01f8a562d8a",angleX:0,angleY:94.68,angleZ:0},{id:"1962c76b-fff7-4cfa-9ceb-e45ed3b9bec0",angleX:0,angleY:304.56,angleZ:0},{id:"a121230b-121e-4c8f-8891-862bf463409d",angleX:0,angleY:41.4,angleZ:0},{id:"458b7055-3f1f-4990-b5d1-97a61ada9dac",angleX:0,angleY:267.12,angleZ:0},{id:"dc2cfdc3-dd1c-4884-81e5-79a497b900d1",angleX:0,angleY:343.8,angleZ:0},{id:"f34bf230-05fe-406c-8f73-ca1cbb31ef1d",angleX:0,angleY:54.72,angleZ:0},{id:"a5c6a3ee-5c9e-421e-a0c7-09595539adcf",angleX:345.6,angleY:41.4,angleZ:0},{id:"6a427e73-4f4b-4c62-a90e-42df3cb7ab77",angleX:0,angleY:157.68,angleZ:0},{id:"60e496aa-83ab-4b33-95d8-40ed966a067f",angleX:0,angleY:266.76,angleZ:0},{id:"23c336f1-547e-4545-90a0-879afeb8e6b4",angleX:0,angleY:34.2,angleZ:0},{id:"7b9a7c8e-99d2-48b3-98dc-cb085991380f",angleX:0,angleY:0,angleZ:0},{id:"855d2309-65d9-4450-96c7-a9678b97e5ad",angleX:0,angleY:203.76,angleZ:0},{id:"6a768950-e8b9-4010-99c2-4d3fec970c8b",angleX:358.56,angleY:116.64,angleZ:354.24},{id:"b8432c5e-9d98-4020-a648-dffce4c22506",angleX:0,angleY:14.04,angleZ:0},{id:"ea25a2c5-2a9a-4996-93f7-9b3678f48e0b",angleX:0,angleY:239.76,angleZ:0},{id:"27f210e9-d92c-41a7-8457-8db8e31f2aec",angleX:0,angleY:228.6,angleZ:0},{id:"df250a25-08e1-4387-b8d9-3374c5ca420b",angleX:0,angleY:226.8,angleZ:0},{id:"78182aab-0630-4fce-8984-248dd02fa580",angleX:0,angleY:12.24,angleZ:0},{id:"5ba44018-fffb-4100-8388-05958f6ae071",angleX:0,angleY:0,angleZ:0},{id:"1d7595fa-cfda-4e44-8ce0-0cff4d474577",angleX:13.32,angleY:185.4,angleZ:343.08},{id:"d96bff50-43e0-452a-b9e7-27bd2fce7bb1",angleX:0,angleY:22.68,angleZ:0},{id:"37239315-a051-40f4-af02-3c3c5817c5e4",angleX:348.48,angleY:95.4,angleZ:350.64},{id:"efe0f634-4911-4e5e-ae64-991185ef85a0",angleX:0,angleY:0,angleZ:0},{id:"3f274290-615a-41ee-a79f-4dbbe0c3211c",angleX:0,angleY:66.6,angleZ:0},{id:"a97b6488-d714-402e-a187-22a364703662",angleX:0,angleY:271.08,angleZ:0},{id:"dd154e89-a94f-410c-b7c4-59d150cb5000",angleX:0,angleY:0,angleZ:0},{id:"320e12c8-bf94-4618-9336-d0d2cd44404a",angleX:0,angleY:149.76,angleZ:0},{id:"4fc8744d-f079-4684-899c-cacb4e968f31",angleX:0,angleY:324.72,angleZ:0},{id:"a5e166dd-8ffe-481d-ad2c-08a89ab31b37",angleX:10.44,angleY:213.84,angleZ:342.36},{id:"39587c55-516c-4083-8289-14324d155078",angleX:0,angleY:41.4,angleZ:0},{id:"670f9e5e-6bad-4a71-90a0-7721ee0070f6",angleX:0,angleY:45.72,angleZ:0},{id:"ce356f46-e4d4-4e27-8cbc-dd8a486bacc3",angleX:0,angleY:0,angleZ:0},{id:"193f9f44-1c38-403b-ac33-b3e1bf985fd8",angleX:0,angleY:151.92,angleZ:0},{id:"82303ce9-c44f-485c-8a47-f2ee89602ff3",angleX:0,angleY:209.52,angleZ:0},{id:"8f379d46-1c3c-454e-a35f-0ba2a4d574c0",angleX:0,angleY:289.08,angleZ:0},{id:"236e48d9-35f6-4301-90a9-6622a0eea679",angleX:0,angleY:200.88,angleZ:0},{id:"60c76fda-3f94-4486-a4b9-3b336bc43387",angleX:0,angleY:103.32,angleZ:0},{id:"5085a435-966c-4be8-97cf-4ae1528e5814",angleX:0,angleY:19.44,angleZ:0},{id:"d06f0b4c-b988-4052-a5e0-1c39b5c2184a",angleX:0,angleY:0,angleZ:0},{id:"364dab4c-2e29-45b4-89a6-5045aebfdb65",angleX:5.4,angleY:258.12,angleZ:0},{id:"df6e9628-82de-4780-bd64-f43588856c64",angleX:18.36,angleY:256.68,angleZ:0},{id:"644f3ee8-9d12-4ea2-99e2-b25dfb10550d",angleX:0,angleY:24.84,angleZ:0},{id:"67b194b8-8d7a-4b47-a79c-7733997d9352",angleX:0,angleY:352.08,angleZ:0},{id:"44d5228f-c1f9-4219-996e-09a30657fcac",angleX:349.92,angleY:143.64,angleZ:0},{id:"ea3fa92d-44d2-441e-8f7a-cd86cba77edc",angleX:189.36,angleY:209.52,angleZ:171.36},{id:"a5513b66-9f5a-4ad3-a5f3-23ff7bd06837",angleX:0,angleY:46.44,angleZ:0},{id:"f677ec46-73e3-4b5a-8c26-9e93226637db",angleX:0,angleY:315.72,angleZ:0},{id:"9d1bc9b3-928b-42e0-9b60-fa966dd2c0dd",angleX:0,angleY:72.36,angleZ:0},{id:"f2336eb2-47a1-4a19-a0f3-b0630e46abe0",angleX:0,angleY:50.4,angleZ:0},{id:"7638d688-4c60-46dd-82b5-5d7239d43587",angleX:0,angleY:258.12,angleZ:0},{id:"517b05ee-1499-4591-b526-bcc34708f2ad",angleX:0,angleY:57.96,angleZ:0},{id:"4cf4ce3d-f946-4b29-90bd-4cff2ec7d38c",angleX:0,angleY:37.08,angleZ:0},{id:"95f8d47e-6b40-4de2-95f3-131cb66e054d",angleX:0,angleY:168.48,angleZ:0},{id:"b3e00b58-88db-46f2-bb5c-8abeb7fb013d",angleX:0,angleY:49.68,angleZ:0},{id:"56f35585-53b4-4bd0-bdb4-1951dddd6490",angleX:0,angleY:232.2,angleZ:0},{id:"2d241ebb-253b-491f-85af-c83e93c40c91",angleX:0,angleY:262.8,angleZ:0},{id:"d033d1c5-ffe3-4c47-a480-e8ac931458f3",angleX:0,angleY:232.56,angleZ:0},{id:"e1ba8326-93ef-49c8-83a9-219c066e01ca",angleX:0,angleY:309.24,angleZ:0},{id:"c77ad40e-ef62-4207-93d7-6dd2d239e8a0",angleX:0,angleY:76.68,angleZ:0},{id:"945ec9a9-13c9-48c2-8cdd-3bdd2705f776",angleX:0,angleY:62.64,angleZ:0},{id:"d51e0367-40fc-435c-8362-b7df137b4976",angleX:0,angleY:0,angleZ:0},{id:"e490d365-e5a6-434b-8321-810725115636",angleX:0,angleY:0,angleZ:0},{id:"02478e04-7660-482e-a4e7-6d2c97abdf83",angleX:0,angleY:0,angleZ:0},{id:"de722777-f747-4a24-a937-eadeac7360ae",angleX:0,angleY:266.76,angleZ:0},{id:"65eef926-db50-4964-a534-37c8241aa1be",angleX:0,angleY:20.16,angleZ:0},{id:"e15dba5b-eaa6-404b-9998-b8a234843c67",angleX:0,angleY:35.28,angleZ:0},{id:"8e1d21ba-a66c-42f3-8d96-b5064ad6a542",angleX:0,angleY:227.16,angleZ:0},{id:"8dc76222-a100-495c-a918-bbfe44981859",angleX:0,angleY:169.92,angleZ:0},{id:"21c62e27-ffb1-4230-9923-0d107f3325f9",angleX:0,angleY:34.2,angleZ:0},{id:"1ed62d31-bbdd-4001-967b-f90068148aef",angleX:0,angleY:50.4,angleZ:0},{id:"5e9d584a-38b0-470a-95c5-e065a1ee2c7e",angleX:0,angleY:172.8,angleZ:0},{id:"719e1ae5-59d3-4bf7-a4af-c859d6715fd5",angleX:0,angleY:37.08,angleZ:0},{id:"ac9a1dd3-29fe-4a58-b2bd-6097888e52ee",angleX:0,angleY:45.72,angleZ:0},{id:"ad497a45-7c06-45ed-b185-da9aad0c137b",angleX:0,angleY:19.44,angleZ:0},{id:"6a8bdc52-a134-485a-8b53-7fd06e47b2e1",angleX:0,angleY:43.56,angleZ:0},{id:"b087ba6e-86b3-45d0-b2c4-bb0bf7f6ffb4",angleX:0,angleY:280.44,angleZ:0},{id:"e64067a6-d27d-4fe9-98bc-c9eb439f179f",angleX:195.48,angleY:195.48,angleZ:173.16},{id:"71c4a3b6-1510-4f11-894a-a6e36ef7a514",angleX:0,angleY:0,angleZ:0},{id:"941a122f-3e22-4347-8fc0-c89fa468e3ca",angleX:18.36,angleY:218.52,angleZ:0},{id:"0c8e39b1-9554-4e66-93a2-3e5cfd972fc9",angleX:10.08,angleY:272.88,angleZ:0},{id:"a1761792-8f3f-4168-a266-5567b511757c",angleX:360,angleY:289.08,angleZ:11.52},{id:"de89e664-d968-4831-9b49-612c18c3fa98",angleX:0,angleY:360,angleZ:0},{id:"2f51b59b-a244-4be2-a47b-fee97eb656ac",angleX:0,angleY:0,angleZ:0},{id:"8ec6de53-fb02-405a-a416-8c182336bb03",angleX:355.32,angleY:32.4,angleZ:351.36},{id:"9b9343c2-b578-4891-9c13-0b00fd4ad4d4",angleX:0,angleY:129.96,angleZ:0},{id:"a97f9be5-c46c-441c-9771-e86abe742e6b",angleX:0,angleY:196.2,angleZ:0},{id:"0d798a6d-9274-4798-9c2f-4f4d4ec0dab7",angleX:0,angleY:207.36,angleZ:0},{id:"e9674cfb-dede-43e4-b01b-1bacd0437dc6",angleX:0,angleY:303.84,angleZ:0},{id:"6465d252-a339-4796-bd58-a844e63624c5",angleX:0,angleY:63.36,angleZ:0},{id:"26df64a9-0e67-4dfa-a278-6f4575b710ee",angleX:0,angleY:120.96,angleZ:0},{id:"26d2a316-286a-4c8e-b427-63d802cc1645",angleX:0,angleY:28.08,angleZ:0},{id:"f2c53bf0-6e5c-47e9-92d6-6c365a97df34",angleX:8.28,angleY:213.84,angleZ:345.6},{id:"4beaf9ec-b02d-4966-9e4c-a561946da0d7",angleX:0,angleY:37.08,angleZ:0},{id:"9866463a-57f2-47bf-b11f-2e5065f6f1a2",angleX:0,angleY:141.48,angleZ:0},{id:"727a4b43-9b11-4fa2-9b31-037d1ad91401",angleX:0,angleY:178.56,angleZ:0},{id:"b53f3879-6aaa-46f4-9dfb-66db3e2aeb9a",angleX:0,angleY:277.2,angleZ:0},{id:"0ba9a2dc-ff82-4706-afce-6d26e0c63412",angleX:0,angleY:0,angleZ:0},{id:"b217d1ab-256c-4568-b932-6bbfd78ff9b4",angleX:0,angleY:159.84,angleZ:0},{id:"e933fbf0-eb98-4003-b310-8b7d24d30e64",angleX:0,angleY:0,angleZ:0},{id:"4039a946-26d4-4548-b807-2c9ac30b634f",angleX:0,angleY:293.4,angleZ:0},{id:"3149a51f-6247-423f-9f80-a2a936cf9c6c",angleX:0,angleY:200.16,angleZ:0},{id:"9b19d4ea-15cf-4aa4-9498-33effa7566fc",angleX:7.56,angleY:193.32,angleZ:351.36},{id:"463b95cf-6228-4328-91fa-ae73a41fd7c9",angleX:0,angleY:16.56,angleZ:0},{id:"749b900e-6d84-4b39-9c7a-4c1ed8b03ade",angleX:0,angleY:72.72,angleZ:0},{id:"094e7771-463c-43ee-8041-27c10784117f",angleX:0,angleY:0,angleZ:0},{id:"519c8fa6-b59c-476e-bd0c-f3505df0db2a",angleX:0,angleY:68.76,angleZ:0},{id:"d1a4fbe7-3892-4a3c-93d7-69b634c31059",angleX:9.36,angleY:183.24,angleZ:340.92},{id:"0ee40bb3-c511-4921-93b1-6f8116e30a80",angleX:0,angleY:159.84,angleZ:343.08},{id:"18ba8de7-559b-448b-afbc-43b1f772a032",angleX:0,angleY:33.12,angleZ:0},{id:"08a0bdf0-92b7-404e-824b-4c095014d3d4",angleX:0,angleY:245.52,angleZ:0},{id:"85be33d8-dce9-4908-ae28-9664e356d90f",angleX:0,angleY:208.08,angleZ:0},{id:"6e67ba20-70e5-4bc9-b945-defd3d533e02",angleX:0,angleY:230.76,angleZ:0},{id:"134960b8-d860-4a6e-97d8-d44ab3ead114",angleX:0,angleY:178.56,angleZ:0},{id:"66facd05-aa77-40a0-81d4-56a3cf98bc3e",angleX:11.88,angleY:233.64,angleZ:0},{id:"d28ca4ff-9069-49ef-9f82-35c5c36a1645",angleX:0,angleY:74.88,angleZ:0},{id:"a1b1dc46-32c7-4d59-8507-d574aad93da7",angleX:0,angleY:0,angleZ:0},{id:"58f64df6-2619-4e54-9c75-3c28928a9ade",angleX:0,angleY:190.08,angleZ:0},{id:"b51031d9-070c-43dd-a18c-86bea63f3294",angleX:0,angleY:0,angleZ:0},{id:"cc16a40a-9cf4-4002-8e40-be3c24291b51",angleX:0,angleY:63.36,angleZ:0},{id:"8b0a9e1f-56fd-419b-832e-f870a15f2d09",angleX:0,angleY:312.84,angleZ:0},{id:"f3bf3352-baaf-4d6d-abf1-6112283e6c5d",angleX:0,angleY:147.6,angleZ:0},{id:"509ec8eb-af3e-4eea-9ad9-63c09520e0ca",angleX:10.44,angleY:195.48,angleZ:347.4},{id:"cea5569e-3e28-4617-8501-31d0a084c429",angleX:0,angleY:191.52,angleZ:335.16},{id:"c0e51d0b-0bda-473c-ad2c-e93545f12e99",angleX:0,angleY:182.88,angleZ:0},{id:"b8151278-cb6b-4cb9-98d7-a89d2736f6ac",angleX:0,angleY:209.52,angleZ:0},{id:"a91ac185-db81-46b7-bb73-82b32d160f8f",angleX:0,angleY:14.76,angleZ:0},{id:"f6999525-e1f5-404a-af19-f240cbbf3b0a",angleX:357.12,angleY:76.68,angleZ:0},{id:"ccd28872-8d1b-4cc0-9ef3-64b605433537",angleX:20.88,angleY:221.76,angleZ:0},{id:"1e62896d-26a7-441e-92e0-188507bbf6fa",angleX:0,angleY:324.72,angleZ:0},{id:"a93a22e6-2e1b-48ae-a101-de9b2d1dccdc",angleX:0,angleY:43.56,angleZ:0},{id:"d210c5e1-a262-4b91-93d4-6aab83cfbd32",angleX:16.2,angleY:242.64,angleZ:0},{id:"b2acda1c-1847-481e-825a-e0faaa5d1e54",angleX:0,angleY:329.04,angleZ:0},{id:"45375db3-cef9-4eb9-bedc-0c58e45b7401",angleX:181.44,angleY:262.08,angleZ:175.32},{id:"4a957cdd-aa62-4329-8df1-7bcfb303a4ce",angleX:0,angleY:183.96,angleZ:347.76},{id:"e5b4b2c2-85c9-4d81-8b3b-c28ffd720584",angleX:0,angleY:104.04,angleZ:351.72},{id:"15b77360-4bc1-4629-b1b4-faa2d98aa503",angleX:0,angleY:32.4,angleZ:0},{id:"88c082ad-1a8d-4c43-9d9f-0d47b1dafdfe",angleX:0,angleY:15.48,angleZ:0},{id:"e8da5890-0124-4611-bc7e-82a4f4acdb7c",angleX:0,angleY:320.04,angleZ:0},{id:"8e415b6d-4bb4-4483-b82d-4fceaa8d4d3d",angleX:0,angleY:244.8,angleZ:0},{id:"bf88a7d0-8d76-49ae-9fad-f1b94a76f586",angleX:343.8,angleY:54.72,angleZ:347.76},{id:"1d8d5060-0d6d-4236-af28-04508a87f241",angleX:0,angleY:35.28,angleZ:0},{id:"b95bca6e-e48b-4a74-ae3b-cd2d25930421",angleX:0,angleY:201.96,angleZ:0},{id:"3417255c-3fc0-407c-8c60-090b5ceae742",angleX:0,angleY:173.16,angleZ:0},{id:"e8851ee9-3850-4060-b471-e2c5d3d88450",angleX:0,angleY:24.12,angleZ:0},{id:"1fdceb48-0ea2-4a2e-9420-186cce851c6c",angleX:0,angleY:0,angleZ:0},{id:"424d4c7a-6ffb-406c-a684-e1c8a7c6996f",angleX:0,angleY:52.56,angleZ:0},{id:"84ec1edc-7833-4b58-9650-7526bd28480d",angleX:0,angleY:58.68,angleZ:0},{id:"3ac92678-2fd6-4d96-84e9-f54014077120",angleX:0,angleY:141.12,angleZ:0},{id:"fba8f184-81cc-44b7-b15e-ba35e10ebd77",angleX:0,angleY:178.92,angleZ:0},{id:"81ab1448-5193-4915-872a-d1ed701e46f7",angleX:0,angleY:38.52,angleZ:0},{id:"ca7fcfbb-24c4-4d89-8e59-58b92bb0d8ac",angleX:0,angleY:258.12,angleZ:347.04},{id:"12920ffc-cc51-42d9-a557-db6e40fb88fc",angleX:0,angleY:59.04,angleZ:0},{id:"a5c37d0f-c02e-42b1-a929-212ed237f22a",angleX:0,angleY:284.76,angleZ:0},{id:"ddacbaca-efd6-4d88-8d57-57be12b1020b",angleX:0,angleY:178.56,angleZ:0},{id:"9ff704c0-4583-45a0-bc66-6c8da9fc8d1e",angleX:0,angleY:39.6,angleZ:0},{id:"476085c8-ed40-48eb-8d40-47a054736110",angleX:0,angleY:22.32,angleZ:0},{id:"5f79e85e-2470-49c2-813b-6485bc3399c3",angleX:0,angleY:307.08,angleZ:0},{id:"b87fa39b-f6a8-4c34-b731-d9b790c43473",angleX:0,angleY:353.88,angleZ:0},{id:"fa1212a6-9370-4bd6-a982-0fd6fd0b1006",angleX:18.36,angleY:208.44,angleZ:0},{id:"78a4ffdc-9007-4c4c-800b-7bbabc0999ca",angleX:0,angleY:59.04,angleZ:355.32},{id:"3a341dec-229c-4afe-94ef-cf3f3b4b3a5a",angleX:0,angleY:320.04,angleZ:0},{id:"9349c037-143e-4240-9b2f-c4ef747fe8ef",angleX:356.4,angleY:99,angleZ:350.28},{id:"dbcbbebe-6d03-4a55-ad19-9ca7cf47417c",angleX:0,angleY:29.16,angleZ:0},{id:"19ae547c-4e29-44da-8868-b4fc838e4839",angleX:12.24,angleY:262.8,angleZ:0},{id:"9fa9957f-d302-4d81-bb82-db15dce6e2ff",angleX:20.16,angleY:224.28,angleZ:0},{id:"6ca2b11b-2e53-4c54-9204-a99e961a3929",angleX:0,angleY:297.72,angleZ:0},{id:"4cbdc906-c0a4-44f7-ab00-4785d777b5ff",angleX:351.36,angleY:28.08,angleZ:0},{id:"a71f4e63-9e0f-46b2-8426-1f69920d6326",angleX:0,angleY:19.44,angleZ:0},{id:"d7d33f9e-e9fa-440c-a8e1-b785c421877f",angleX:0,angleY:209.52,angleZ:0},{id:"3e967e87-673e-4f24-a454-89cedb3e333c",angleX:0,angleY:196.2,angleZ:0},{id:"3c89657d-27f5-4a9b-a9bf-638d4e09dc71",angleX:0,angleY:168.48,angleZ:0},{id:"b6ee4aff-0ccd-4765-b758-d170bc8ba161",angleX:0,angleY:165.24,angleZ:0},{id:"f11c10a4-adff-4521-8e87-319c60b0643d",angleX:8.28,angleY:214.2,angleZ:341.28},{id:"32981b18-835f-42ef-b964-5cdcf87b4532",angleX:0,angleY:0,angleZ:0},{id:"8149051c-97f8-44e4-a2d2-aae5a3f9c710",angleX:0,angleY:50.4,angleZ:0},{id:"e350ed05-21d1-47d0-8b72-168b96204748",angleX:0,angleY:0,angleZ:0},{id:"a021e503-b7b0-4750-8898-98157960490d",angleX:0,angleY:281.16,angleZ:0},{id:"5c845efc-a7e6-42cb-a94e-e5a0f9dba7b1",angleX:0,angleY:134.28,angleZ:0},{id:"1ac0608c-a91f-40de-aac4-3512f2b784a1",angleX:0,angleY:52.56,angleZ:0},{id:"9b9f6b0c-1479-409a-8980-d01aa8a339da",angleX:13.32,angleY:197.64,angleZ:347.04},{id:"0f16ce6c-6669-4c64-a19b-ab45653d42e9",angleX:0,angleY:81,angleZ:0},{id:"adb94e3c-8d9d-4886-b4e7-697d0790837d",angleX:0,angleY:230.76,angleZ:0},{id:"d39b8810-8ad8-49e4-b9c5-af7e730d3f95",angleX:0,angleY:287.28,angleZ:0},{id:"691efdc4-f708-4236-9c98-cfb01c23b585",angleX:345.24,angleY:78.12,angleZ:0},{id:"1fa9aab0-a50b-4c33-9c26-ef0b2b1338b1",angleX:0,angleY:101.88,angleZ:0},{id:"801d501e-e8b0-4a11-b7d6-c3a0313d7025",angleX:0,angleY:35.28,angleZ:0},{id:"ea66ea9b-15de-4bf4-acba-47f20931776b",angleX:353.16,angleY:183.24,angleZ:343.08},{id:"4968807f-2e15-4e4e-b467-2f1251c6e18e",angleX:0,angleY:0,angleZ:0},{id:"2a653b44-f364-48c3-9973-b859600e5fab",angleX:0,angleY:214.2,angleZ:0},{id:"ab50241e-9a34-49fc-89e5-195981460155",angleX:0,angleY:86.76,angleZ:0},{id:"bb37637e-63cb-4110-b17d-eaefc19b44f2",angleX:0,angleY:190.08,angleZ:353.88},{id:"c948ab91-a332-49db-a19b-069a442261e0",angleX:0,angleY:172.8,angleZ:0},{id:"dcabcb1b-6e32-4f2e-b912-2cb65cc71bd6",angleX:0,angleY:40.32,angleZ:0},{id:"95179f3c-f494-4b41-b06f-382e0f1f392c",angleX:0,angleY:0,angleZ:0},{id:"1c1760ca-4b99-43f4-8863-b54e0406c7c5",angleX:347.04,angleY:90.36,angleZ:0},{id:"448f5f27-4a71-4403-9cb3-020bc600e841",angleX:0,angleY:99,angleZ:0},{id:"b10ea466-d8a4-4963-91fa-91b775287eef",angleX:0,angleY:14.76,angleZ:0},{id:"300bdcfb-34e5-4138-89c4-2a35826ccb95",angleX:0,angleY:313.2,angleZ:0},{id:"65fced3c-43c5-4c48-b21c-1bfbfcf274b0",angleX:16.2,angleY:236.52,angleZ:0},{id:"d5551e25-17b0-41d4-8448-90b6a018f27e",angleX:0,angleY:311.4,angleZ:0},{id:"def021e9-dd7b-4135-9807-9f87014862bd",angleX:0,angleY:213.84,angleZ:0},{id:"ad54b9bd-ed72-484c-a412-06ecd74b9b8b",angleX:10.44,angleY:178.92,angleZ:336.96},{id:"64da752b-3aa5-4ac6-9661-381ecd331958",angleX:0,angleY:99,angleZ:0},{id:"c194f42e-7172-4a51-bf7c-3d6f7038e66b",angleX:0,angleY:72.36,angleZ:0},{id:"5e9ba957-4a3f-4e39-b998-d12ad75b80df",angleX:0,angleY:26.28,angleZ:0},{id:"5846bcba-ae9e-4d72-a07b-880da64ed856",angleX:0,angleY:342.36,angleZ:0},{id:"aaa1bb1f-0b12-40dd-8ac3-02e808a124fa",angleX:0,angleY:54.72,angleZ:0},{id:"98c848c4-a820-410f-857d-ed32a2f0cbbe",angleX:0,angleY:307.08,angleZ:0},{id:"4e89f410-240e-4c52-bd25-6e2cde156904",angleX:0,angleY:103.32,angleZ:0},{id:"f89db03c-45ad-4487-aa0a-077d332fbc3c",angleX:0,angleY:320.04,angleZ:0},{id:"4ecd8357-b544-47b6-ba5d-02778164f7c1",angleX:0,angleY:14.76,angleZ:11.52},{id:"8fd5ac3a-f31d-4ee0-becf-0c45fba523c0",angleX:0,angleY:329.04,angleZ:0},{id:"d9ccb49e-b01b-4203-ab6f-5212680d5c1f",angleX:0,angleY:32.4,angleZ:0},{id:"80f6ddd2-ebf1-4a81-afc0-440bd72b3ea6",angleX:0,angleY:133.56,angleZ:0},{id:"2835f9e9-14ba-45c4-87d4-2c8e8ce8a2cb",angleX:10.08,angleY:204.12,angleZ:0},{id:"30f72353-a57a-44b1-9855-f7f71c3e5946",angleX:0,angleY:314.28,angleZ:0},{id:"51950dc5-d1a6-48a4-aab9-ee6f31bede24",angleX:0,angleY:341.64,angleZ:0},{id:"47ad1f1c-3d30-409b-bf10-dca85548627c",angleX:0,angleY:58.68,angleZ:0},{id:"b8642a6c-c45a-48cd-a939-b6506d325bbd",angleX:0,angleY:227.88,angleZ:0},{id:"ce1da565-79e2-4fe2-9655-797defb45c07",angleX:0,angleY:167.76,angleZ:0},{id:"39d50ab3-2272-4278-a43e-e6b06424cfc4",angleX:0,angleY:10.08,angleZ:0},{id:"3cf00d95-8fdb-4be0-a23d-e8b6e3a5a996",angleX:0,angleY:45,angleZ:0},{id:"3ca4e5d5-0f35-4450-a913-d51f17be5dbf",angleX:0,angleY:37.08,angleZ:0},{id:"06722496-3521-4674-bb52-fc37324c2657",angleX:0,angleY:224.64,angleZ:0},{id:"cb10b8d3-63a4-49da-abaf-44ffe4a55006",angleX:0,angleY:27,angleZ:0},{id:"ff47fef4-a73f-4c97-b591-58341087c8ce",angleX:0,angleY:68.04,angleZ:0},{id:"f12f1612-cb80-4fb8-a126-3e74d3d75edb",angleX:0,angleY:147.6,angleZ:0},{id:"c7e6ce9e-b969-424c-9897-e69d4e53cb69",angleX:0,angleY:18,angleZ:0},{id:"3ea20ec5-ac62-46a3-95c7-fec11787dd3e",angleX:0,angleY:39.24,angleZ:0},{id:"9ee3649f-d170-4d77-8e35-b90ce6b96316",angleX:0,angleY:76.68,angleZ:0},{id:"fe926695-3085-49ff-be8a-ccb844a4856b",angleX:0,angleY:22.32,angleZ:0},{id:"49581320-ee5e-499a-97a2-484f44126322",angleX:0,angleY:41.4,angleZ:0},{id:"53684558-cf1a-4f49-96ba-43b463ae4d03",angleX:0,angleY:14.4,angleZ:0},{id:"9b20efd0-10be-4a6a-b3f4-ab938ea97103",angleX:0,angleY:59.04,angleZ:0},{id:"72cd96f6-7272-4b7f-bc9a-ffa96dd4b863",angleX:0,angleY:45.72,angleZ:0},{id:"8fcd5bfa-413f-4ba0-9f22-a7f7d60795ac",angleX:0,angleY:168.12,angleZ:0},{id:"c6c81ae5-d2c2-4ad7-9612-bb67161e5a07",angleX:0,angleY:22.32,angleZ:0},{id:"60d96844-6883-407a-9ad9-36921374ce73",angleX:0,angleY:222.84,angleZ:0},{id:"2d7faa3f-1cef-4cd3-8fa7-7d9d62800885",angleX:0,angleY:58.68,angleZ:0},{id:"b8fda886-166d-4709-93e3-80b4c3dbef1e",angleX:0,angleY:157.68,angleZ:0},{id:"54a89291-95d3-4d2a-94f0-7fbd5c2e45eb",angleX:0,angleY:244.8,angleZ:0},{id:"040c4c38-3793-447e-8925-4565b866d6b0",angleX:0,angleY:343.8,angleZ:0},{id:"b6ff807a-b8bc-46bc-b954-c53b9504090a",angleX:216.36,angleY:135.36,angleZ:208.44},{id:"1cd7f488-6785-4466-8225-bc1cc50a670a",angleX:0,angleY:326.52,angleZ:0},{id:"2393e56c-1bde-40b4-9a8e-d065f217cc39",angleX:0,angleY:30.24,angleZ:0},{id:"e71f4590-b5c1-4008-9c48-d504d4bb6cde",angleX:0,angleY:153.72,angleZ:349.92},{id:"42a3f7cd-4dbc-4145-8888-59f06a65e0e8",angleX:0,angleY:63.36,angleZ:0},{id:"967cfaa6-638b-45dc-89f6-f611ba2831c9",angleX:353.16,angleY:32.4,angleZ:3.24},{id:"a9b0e099-d983-4b54-82ec-17bc99adaec8",angleX:0,angleY:333.36,angleZ:0},{id:"3e2e9999-9dd2-454a-ad82-f95ccaf7b3ae",angleX:353.16,angleY:28.08,angleZ:0},{id:"220c4ff2-0036-434b-b44e-21831a61b087",angleX:355.32,angleY:23.76,angleZ:0},{id:"5434a8df-7f6f-4781-abb2-a221b37f3ef3",angleX:0,angleY:45.72,angleZ:0},{id:"033502e7-8d0a-4664-8840-ea65d8ee0d5b",angleX:0,angleY:329.04,angleZ:0},{id:"766c867b-515d-4857-bdca-7a4c1e919109",angleX:0,angleY:10.08,angleZ:0},{id:"41b095c3-2aaf-4981-b17e-4a8af9986a54",angleX:0,angleY:96.48,angleZ:0},{id:"259ba94e-229f-4840-926a-7f61a6a0e80d",angleX:8.28,angleY:199.8,angleZ:0},{id:"e695e7ac-f7ce-4561-b6b5-e39d9be2ca06",angleX:0,angleY:236.16,angleZ:0},{id:"47f2a7ef-d8d2-4016-a87a-488c0d6a19e9",angleX:0,angleY:0,angleZ:0},{id:"910aea77-e369-42e4-b9f6-1bf364c1c2b2",angleX:0,angleY:351,angleZ:0},{id:"bafecf6a-1ef9-4b9e-b863-a33b299e4ca3",angleX:16.2,angleY:236.52,angleZ:0},{id:"bef71fad-ae91-497d-9969-95597424551a",angleX:0,angleY:123.48,angleZ:0},{id:"7deca03d-bf24-4dcd-a916-d0adefc4f8ab",angleX:0,angleY:10.44,angleZ:0},{id:"e8e111a4-26e4-4708-bc1c-9a8e2d5ca334",angleX:0,angleY:68.76,angleZ:0},{id:"a522db07-460e-4fe5-a8a8-46be19ad25f3",angleX:349.2,angleY:88.2,angleZ:0},{id:"74445a2b-1ec2-4ee1-85e8-f7e796a436ab",angleX:0,angleY:0,angleZ:0},{id:"eb35b15d-df5b-4b47-86c5-7928794d280d",angleX:0,angleY:183.24,angleZ:349.2},{id:"6522c347-9ddf-43c1-8a0c-e803531dc626",angleX:0,angleY:29.16,angleZ:0},{id:"d0f4478e-72eb-4038-ab2b-7e4c11d194d6",angleX:0,angleY:87.12,angleZ:0},{id:"e8bdc348-f894-4be1-b369-041fdf782e19",angleX:0,angleY:68.76,angleZ:0},{id:"e479e06c-2008-484a-b4a7-e26ee3ce170c",angleX:0,angleY:224.64,angleZ:0},{id:"85e5f0c6-b4c1-4880-a338-167f31a62dd2",angleX:0,angleY:81,angleZ:0},{id:"0169db12-7b9f-4837-be47-92a4b1ca022c",angleX:0,angleY:0,angleZ:0},{id:"d134b448-477c-486e-a37a-7e3568d89a9e",angleX:0,angleY:333.72,angleZ:0},{id:"d595e049-58ca-40db-ac05-2ca68410b58b",angleX:345.24,angleY:90.36,angleZ:0},{id:"d135211f-6225-485d-b07b-02d43e4f92ce",angleX:0,angleY:336.96,angleZ:0},{id:"a79214de-8015-4a88-9687-6067b44d0454",angleX:0,angleY:170.64,angleZ:0},{id:"7e39156b-8340-4ccc-ac8f-db79f431167a",angleX:351.36,angleY:114.48,angleZ:349.2},{id:"b9def3bb-babb-47a4-8a21-23b1c6671928",angleX:0,angleY:302.4,angleZ:0},{id:"e35abee1-5e40-42ce-bb44-ba62aeb9aab3",angleX:0,angleY:293.4,angleZ:0},{id:"e687ee38-5263-47dc-91e8-50fdb9ec6ccd",angleX:0,angleY:37.08,angleZ:0},{id:"2836193e-7ee1-42ff-87df-78a938821d98",angleX:0,angleY:117.36,angleZ:0},{id:"223b753b-72ed-423b-a4c2-b69b6c7f2552",angleX:0,angleY:244.8,angleZ:0},{id:"ac782da0-e31e-475d-8045-1ca5b3d99eb3",angleX:0,angleY:120.96,angleZ:0},{id:"7a722d03-9277-4ab3-a9f0-96cb416e61a6",angleX:0,angleY:205.2,angleZ:0},{id:"326d0d41-9848-4628-9dab-5ea2b7823f1b",angleX:0,angleY:7.92,angleZ:0},{id:"a0ce5f4e-f0e2-4461-a0e9-29833bb65f5c",angleX:0,angleY:54.72,angleZ:0},{id:"4d73daff-75bb-42b8-be1a-e081561719d4",angleX:4.68,angleY:191.88,angleZ:0},{id:"a1cc3942-f584-419c-a2e9-d55496c370df",angleX:0,angleY:46.44,angleZ:0},{id:"1d09b7bd-e3d3-43f9-b8ef-fe0f26287879",angleX:0,angleY:342.36,angleZ:0},{id:"4c705ddb-cde8-4453-b066-9d078feb6365",angleX:0,angleY:311.4,angleZ:5.4},{id:"78a98b0e-c44d-4cba-ac8b-7427287f1565",angleX:0,angleY:0,angleZ:0},{id:"3a9ddf7f-73b4-48d1-bc0b-ac3eab562da2",angleX:351.36,angleY:14.76,angleZ:3.24},{id:"85d9257e-07c3-43a5-9b3e-0488404e1815",angleX:0,angleY:50.4,angleZ:0},{id:"31222481-5997-4f1e-9120-b417336352a0",angleX:0,angleY:19.44,angleZ:0},{id:"fe8a04b3-c467-4d28-8166-42de1b8ba3a9",angleX:0,angleY:315.36,angleZ:0},{id:"edc8e738-9733-42d5-9213-5fb93e913ff7",angleX:0,angleY:333.36,angleZ:0},{id:"d2382ee0-2975-4bf9-8820-bd742c1d9d99",angleX:0,angleY:346.68,angleZ:0},{id:"0689098e-f506-4966-8956-30534c424335",angleX:0,angleY:22.68,angleZ:0},{id:"594595a0-cec9-4d15-9411-e5f122e51f4f",angleX:0,angleY:226.44,angleZ:0},{id:"31512da1-7d0d-4bda-8a96-a5ca2aa240cd",angleX:0,angleY:147.6,angleZ:0},{id:"8cb91acf-fc4c-44c0-89c6-99929170135c",angleX:0,angleY:11.88,angleZ:0},{id:"ce3a25b4-2707-442f-a4ab-00cf788c06a7",angleX:0,angleY:247.68,angleZ:0},{id:"ea8f2bae-2a4a-4c40-8984-a19874608a13",angleX:0,angleY:7.92,angleZ:0},{id:"6e06943c-dde7-4cd0-bb91-9d999a394dac",angleX:0,angleY:90,angleZ:0},{id:"1136a825-2a6b-4ad8-820f-322ca7ee15fc",angleX:0,angleY:0,angleZ:0},{id:"b20c67e1-db2e-471b-bbcc-e30aeaa6ccdc",angleX:0,angleY:171.72,angleZ:0},{id:"da8976f0-526f-4628-b1e2-a3fcc869ec47",angleX:0,angleY:50.4,angleZ:0},{id:"7fa12fa9-8ea7-4a5e-bd59-e2429cb8ffc9",angleX:0,angleY:44.28,angleZ:0},{id:"f9144b1d-7b78-461e-a060-c468a55d88cf",angleX:0,angleY:94.68,angleZ:0},{id:"53b0f7da-5877-4411-9ff1-15dd78b23b3a",angleX:0,angleY:28.08,angleZ:0},{id:"e5435b9d-37a0-487c-b2bd-b6d1ff3dc958",angleX:0,angleY:160.92,angleZ:0},{id:"975fcd65-7f28-42d8-80c3-98852827d13e",angleX:0,angleY:28.44,angleZ:0},{id:"e8940989-07c6-4d41-bc07-c3e4ff6ccd3f",angleX:0,angleY:50.4,angleZ:0},{id:"1475c4fb-5988-4d8e-9722-5efeb59cdbec",angleX:0,angleY:222.84,angleZ:0},{id:"f036380d-5938-4aa7-8d4e-227cafe1a46f",angleX:0,angleY:236.16,angleZ:0},{id:"1c1d76af-ab6c-4f9a-ab5f-adc54f17edb4",angleX:0,angleY:0,angleZ:0},{id:"9b46b9b2-f339-45c8-9388-cbd5c63b0634",angleX:0,angleY:20.16,angleZ:0},{id:"ed4f8a25-33f9-4fbf-b885-e2f88b9ac632",angleX:0,angleY:178.56,angleZ:0},{id:"ef2965bc-be4c-4b60-acbb-e7c8082a1c30",angleX:0,angleY:19.44,angleZ:0},{id:"683b9e01-0c7d-4c18-aead-afba5ed9be41",angleX:0,angleY:76.68,angleZ:0},{id:"31968008-d7df-4065-9c7e-7725ba971c94",angleX:0,angleY:145.44,angleZ:0},{id:"7336a149-de77-471f-b21b-2f0239022886",angleX:0,angleY:37.08,angleZ:0},{id:"5ff11ab1-4c28-43b0-b886-29a7e1548b8d",angleX:0,angleY:64.8,angleZ:0},{id:"99fd4c96-10e6-49af-95fd-6f973f72681b",angleX:0,angleY:32.4,angleZ:0},{id:"06d7caca-9189-469f-9c7f-f37f39fa8f51",angleX:0,angleY:205.92,angleZ:0},{id:"a3927682-951f-4a44-8e61-d2eab672d59d",angleX:0,angleY:28.44,angleZ:0},{id:"ace8972d-1d68-4216-a4e2-ba673f6d5587",angleX:12.24,angleY:157.68,angleZ:0},{id:"1edd1b86-95f0-45cc-91f7-f1fa2d8380d0",angleX:0,angleY:346.68,angleZ:0},{id:"01271345-58bd-473f-b23b-be9d27c43932",angleX:0,angleY:14.04,angleZ:0},{id:"a087c253-319c-42a9-8e23-70383a0d3bf8",angleX:0,angleY:0,angleZ:0},{id:"67b25f87-61fd-40ee-a613-980ce7fb78f0",angleX:16.2,angleY:224.28,angleZ:0},{id:"ac8c9f39-29d1-4a1a-8ee5-b698fb61fbac",angleX:0,angleY:333.36,angleZ:0},{id:"24b39b48-0725-4048-b5bb-1911800c5865",angleX:0,angleY:0,angleZ:0},{id:"e4dc65a2-3b81-46bc-8dd2-9ec7797a3895",angleX:0,angleY:0,angleZ:0},{id:"63e5a4a1-0e19-4312-b449-c2706e65315b",angleX:341.64,angleY:19.44,angleZ:349.92},{id:"dc16d298-7da1-4357-95de-64c68178d65b",angleX:0,angleY:50.4,angleZ:0},{id:"d7acd25b-4b46-4fad-9863-41c70f62c9cc",angleX:353.16,angleY:28.08,angleZ:0},{id:"61ac4a60-ffc2-458a-9641-c4bee7dffbcb",angleX:0,angleY:0,angleZ:0},{id:"12ed5b78-44b8-4021-9beb-6f6b6beb4bc3",angleX:0,angleY:315.72,angleZ:0},{id:"da2803b7-828e-4302-9ed0-e0e235c28f0f",angleX:0,angleY:54.72,angleZ:0},{id:"856ef524-c08b-4fae-969e-e39528bd133a",angleX:0,angleY:0,angleZ:0},{id:"51f6faa5-800f-44e0-ad4b-61888aa3c122",angleX:0,angleY:58.68,angleZ:0},{id:"622a48cf-a1c2-4b09-94e5-ef1e14ca558f",angleX:0,angleY:196.2,angleZ:0},{id:"1a73bf99-9eb2-4b6d-a5c3-228e618239e2",angleX:0,angleY:324.72,angleZ:0},{id:"8a668232-6c14-4d7b-90b1-0c834b1629b3",angleX:0,angleY:99,angleZ:0},{id:"91cfba49-43e4-4c49-b859-a84b4c283cd2",angleX:0,angleY:206.28,angleZ:0},{id:"e51ef9f0-b844-4795-8376-bab6e57b477a",angleX:0,angleY:0,angleZ:0},{id:"12c3feed-d255-4aa9-bd9b-b305ed4248e1",angleX:0,angleY:32.4,angleZ:0},{id:"231e4f7d-1aae-47f2-9d82-7e8a873a3df4",angleX:0,angleY:41.4,angleZ:0},{id:"44a67a24-a31d-43b4-b5a0-c9d98f291965",angleX:0,angleY:279,angleZ:0},{id:"c4bd0c8a-6e96-4e37-9db8-b1fe65b51d2c",angleX:0,angleY:208.08,angleZ:0},{id:"b36f09c7-5648-42ec-86a5-a62de7bea673",angleX:349.2,angleY:114.48,angleZ:345.24},{id:"715dba68-9788-4f8c-8a9f-bdeb56c96bb1",angleX:349.2,angleY:98.28,angleZ:0},{id:"bda6aa3f-c55a-4fab-8b01-90a3fa497fb5",angleX:0,angleY:0,angleZ:0},{id:"64a8ca70-c167-453b-bb42-43774422538b",angleX:0,angleY:303.48,angleZ:0},{id:"f1a0215a-ddca-4bc0-af7c-77cc7fc3a9b8",angleX:0,angleY:0,angleZ:0},{id:"78471a59-4c3b-4a24-add0-dd2207e43952",angleX:0,angleY:74.88,angleZ:0},{id:"fa7bcc77-090c-4ac6-9044-c704f45d3fc4",angleX:0,angleY:0,angleZ:0},{id:"583798e3-aed0-4591-9696-7019284c3789",angleX:0,angleY:228.6,angleZ:0},{id:"cbfa771c-efc0-4dac-bd95-dd44645da9a6",angleX:0,angleY:0,angleZ:0},{id:"a0fa708b-29d6-408b-b05d-d2cc836eb01d",angleX:0,angleY:0,angleZ:0},{id:"9ac9a748-ea80-438e-8519-cfd395cf451d",angleX:0,angleY:222.48,angleZ:0},{id:"9ee50019-6791-419d-95a2-8bcdd99e8d3d",angleX:0,angleY:0,angleZ:0},{id:"71eed1ac-15b7-4ec2-95de-e7ad1e454bfd",angleX:349.2,angleY:78.12,angleZ:0},{id:"d88ec09a-fc64-4397-9c1f-1ceb9550c6f8",angleX:360,angleY:144.72,angleZ:345.24},{id:"faa6dfa7-0ece-4627-9cef-28bbae6b2a4f",angleX:18.36,angleY:244.8,angleZ:0},{id:"01361d02-745c-4e9a-a047-8730dc82a5be",angleX:0,angleY:36.36,angleZ:0},{id:"2050c1d9-7ba2-4e28-9aef-482a71e44f42",angleX:0,angleY:32.4,angleZ:0},{id:"3d3799f0-c7b9-4c26-9352-7cd92136f4eb",angleX:0,angleY:151.92,angleZ:0},{id:"c70b3407-8d39-4b04-b82d-517819cfd6e0",angleX:0,angleY:194.04,angleZ:0},{id:"c4b6997e-2e51-430c-8d3b-c3d0f21b3235",angleX:0,angleY:216.36,angleZ:0},{id:"fc829010-9584-4ae6-974c-82504709cccd",angleX:0,angleY:0,angleZ:0},{id:"41bcdc24-11f5-43a3-ba4a-0a8284e06376",angleX:0,angleY:0,angleZ:0},{id:"588f0755-6068-40d2-b895-39f3aae93a88",angleX:6.12,angleY:176.04,angleZ:343.8},{id:"70a6a957-bc0c-4c11-9819-4425fadb9791",angleX:0,angleY:81.36,angleZ:0},{id:"8ca98519-82b3-4ed1-87f2-4f10ca551a16",angleX:0,angleY:129.96,angleZ:0},{id:"c5c5fcaf-59a9-4ff6-bffb-7065ebca3148",angleX:0,angleY:0,angleZ:0},{id:"97586e39-037f-4fc8-ab00-77c0162c6ccb",angleX:173.88,angleY:121.32,angleZ:186.12},{id:"195f040b-77f0-439e-8048-f6f0cdf39036",angleX:0,angleY:90,angleZ:0},{id:"d0a13f8d-4abc-449f-b531-f1b65d7ed240",angleX:0,angleY:32.4,angleZ:0},{id:"fac1230b-390a-43fa-893b-780b07b79ed5",angleX:0,angleY:50.4,angleZ:0},{id:"c6f0f40f-d8a9-466d-a4c3-9c961debf457",angleX:0,angleY:338.04,angleZ:0},{id:"fb12c993-7ccb-403d-b688-265253e0b36a",angleX:0,angleY:28.08,angleZ:11.52},{id:"62deb07b-42d0-419a-8789-00136ea65f9c",angleX:0,angleY:240.48,angleZ:0},{id:"b4f1d2b9-b789-4681-8277-e56e1ced0a8f",angleX:0,angleY:0,angleZ:0},{id:"1942ca48-022f-4dc2-8387-3ce45c6ab5e9",angleX:12.24,angleY:236.52,angleZ:0},{id:"c3baa3f8-b39c-49de-a7b3-e140796477e7",angleX:353.16,angleY:45.72,angleZ:349.2},{id:"1f8b12b6-4345-4a9d-b9ff-7220aecfeea3",angleX:0,angleY:328.68,angleZ:0},{id:"b68270a6-0838-4452-b80c-df9571b999af",angleX:347.04,angleY:45.72,angleZ:353.16},{id:"a1298a00-f0a9-499f-a3f3-5fc7b7eb81da",angleX:0,angleY:302.4,angleZ:0},{id:"b3850a2b-81bd-412e-a0ca-7d0c5f46472e",angleX:0,angleY:3.96,angleZ:0},{id:"a9f5b418-ac6b-4991-bf30-aa9199844b97",angleX:0,angleY:351,angleZ:0},{id:"1ae51f92-3bbc-4633-944a-ba0b0a92fda3",angleX:355.68,angleY:28.08,angleZ:14.76},{id:"b4254232-91b6-475b-a62b-ec4826beefca",angleX:0,angleY:50.4,angleZ:0},{id:"f2e782ef-1e48-4869-9ca5-84c9ef90a83f",angleX:0,angleY:18.72,angleZ:0},{id:"e89486c7-2b5c-4818-ba19-8c6e1f440e16",angleX:0,angleY:226.44,angleZ:0},{id:"d09f0e9a-e4f8-4b94-b52e-36315da41f61",angleX:0,angleY:151.92,angleZ:0},{id:"fc0c6d77-2e00-416d-b0ae-b0fc5bdeb152",angleX:0,angleY:30.24,angleZ:0},{id:"068f7e8f-5f93-492f-b56a-3df3f34699b6",angleX:0,angleY:147.6,angleZ:0},{id:"962bc41e-8c73-4e48-bcb2-ef9017989360",angleX:349.2,angleY:25.56,angleZ:0},{id:"c82c4026-97bd-4d8a-8046-e12b6105ee01",angleX:0,angleY:324.72,angleZ:0},{id:"7d5dd334-7289-4558-b6d9-a06000266ca9",angleX:0,angleY:70.2,angleZ:0},{id:"d0c36669-654f-47c0-8328-1ba59e355ddc",angleX:0,angleY:288.36,angleZ:0},{id:"51d0b70f-c129-49f5-af5b-235a8361e485",angleX:0,angleY:165.24,angleZ:0},{id:"63f7ddea-2d54-4f29-85c5-559e5f666271",angleX:0,angleY:34.2,angleZ:0},{id:"43b155b2-c61d-45bc-9bc3-ea4abcbf02a6",angleX:0,angleY:174.24,angleZ:0},{id:"5dfc44b6-151e-495b-bf7b-9f4a9e46c3e4",angleX:0,angleY:202.32,angleZ:0},{id:"563cef06-c793-4536-8ec6-2e115b47fca1",angleX:0,angleY:20.88,angleZ:0},{id:"9529b440-0715-41fb-bb72-3c4bdd515447",angleX:0,angleY:54.72,angleZ:0},{id:"712bef4b-4914-4865-9c00-ae0694e51a0c",angleX:0,angleY:76.68,angleZ:0},{id:"0dd45b56-d274-45b6-9645-7ef09649d82d",angleX:0,angleY:338.04,angleZ:0},{id:"a0a2b1ad-79e6-4f48-853d-a7d238f8910e",angleX:0,angleY:32.4,angleZ:0},{id:"f411cb6d-0047-4947-bfc7-ccc9b67b40a0",angleX:0,angleY:14.04,angleZ:0},{id:"8f996a2a-bfce-4890-8319-98d0f575e181",angleX:0,angleY:338.04,angleZ:0},{id:"a380b961-ada7-446a-9ac3-4a6c50575f37",angleX:0,angleY:299.52,angleZ:0},{id:"032d41c6-b547-4e36-9be5-ebe73afd6c08",angleX:0,angleY:59.04,angleZ:0},{id:"3fee900b-4aed-49b8-aabb-a2c7bbc1a682",angleX:0,angleY:249.48,angleZ:0},{id:"ce82837f-c800-417b-a9d3-0a7dc8a54a58",angleX:0,angleY:341.64,angleZ:0},{id:"db5b590b-610e-4cee-ad40-30c237c69162",angleX:10.08,angleY:246.6,angleZ:0},{id:"99379a26-5e4f-4aa8-9091-e4b9bb2321bf",angleX:342.36,angleY:45.72,angleZ:0},{id:"c6aff4d5-cb14-4972-a278-51148ac01b3c",angleX:0,angleY:333.36,angleZ:0},{id:"f4ee80ef-1e60-4d9b-8ffb-8132bab84f60",angleX:0,angleY:335.16,angleZ:0},{id:"1eff1d82-5293-4d7f-bf64-b92c9190c214",angleX:0,angleY:32.4,angleZ:0},{id:"0aaa6e9f-d526-441f-8c84-d782c21ef7b5",angleX:0,angleY:0,angleZ:0},{id:"69f80a6e-a01e-49e8-b876-337ebef78b4d",angleX:0,angleY:35.64,angleZ:0},{id:"c445d9ef-460b-4a15-b519-d1480e76e5fd",angleX:0,angleY:138.6,angleZ:0},{id:"e4cce027-b9d5-4715-9455-c583fadb2c63",angleX:0,angleY:32.4,angleZ:0},{id:"d4329668-d86e-4bac-9d8e-413bc20c2b37",angleX:0,angleY:22.68,angleZ:0},{id:"34f20d32-b315-421c-88dc-3072b836dfe3",angleX:0,angleY:94.68,angleZ:0},{id:"0c9b4b83-8a1c-4938-91d3-23c94cdb9487",angleX:10.44,angleY:197.64,angleZ:341.28},{id:"06e4e24c-60d0-417e-b2ff-7f703836d0ac",angleX:0,angleY:238.68,angleZ:0},{id:"8b28fd1d-ac25-485a-b570-e1273dd451d8",angleX:0,angleY:0,angleZ:0},{id:"c03314ec-8e70-4b44-a459-17a9fff7d5ee",angleX:0,angleY:214.2,angleZ:0},{id:"973446b0-b2ee-46d7-9619-75f8c3d8b87e",angleX:0,angleY:120.96,angleZ:0},{id:"db6310f4-be11-4b24-a72a-5d0519a8b4bd",angleX:353.88,angleY:57.96,angleZ:0},{id:"85918fec-a579-4f06-9847-9f18a7db7775",angleX:18.36,angleY:234.72,angleZ:0},{id:"cbbd571b-a81d-4989-a5ed-54580847d302",angleX:0,angleY:50.4,angleZ:0},{id:"405c9f14-1ae5-415f-936b-ff063c47b518",angleX:351.36,angleY:130.68,angleZ:347.04},{id:"7b0105c4-0009-4037-9616-55e933c66a7b",angleX:353.16,angleY:88.2,angleZ:0},{id:"db5b5cdb-b71b-4a1a-8b44-8ce1869516dd",angleX:0,angleY:0,angleZ:0},{id:"76232003-917d-4ca0-9f22-a11a7a90121e",angleX:0,angleY:0,angleZ:0},{id:"294fa545-49bb-41ff-b26f-d30717588771",angleX:0,angleY:213.12,angleZ:0},{id:"e726ff05-2df8-48e7-8ceb-e24ab2d053ab",angleX:0,angleY:181.08,angleZ:0},{id:"356378ec-da9b-41ab-bd5f-cf64a07265d0",angleX:0,angleY:0,angleZ:0},{id:"55a34cc2-3172-4d25-8dbe-85b9c0886d96",angleX:0,angleY:238.68,angleZ:0},{id:"93e8a299-8d20-4309-ae8a-08de47d82225",angleX:0,angleY:84.96,angleZ:0},{id:"6ddc822d-13d1-4d2c-81ef-7d40c692a96e",angleX:0,angleY:0,angleZ:0},{id:"10362f0a-24ef-445d-85df-89dd4bbef96b",angleX:0,angleY:0,angleZ:0},{id:"0cff9dd4-2732-4a5c-ab8f-d73239959f21",angleX:0,angleY:119.16,angleZ:0},{id:"d392268c-9dfa-4bad-bd1c-dc5fd7dc66bf",angleX:0,angleY:0,angleZ:0},{id:"1f9567ed-cf5f-45d6-8436-ddb6d4df01fe",angleX:0,angleY:190.08,angleZ:0},{id:"b41b2e99-c591-42a0-a6fe-8d5a1a3997c5",angleX:14.04,angleY:252.72,angleZ:0},{id:"8a133f62-f50c-491e-a4f2-8236e1b843d3",angleX:353.16,angleY:128.88,angleZ:345.24},{id:"727d3d36-bfe2-4e06-9ce9-c10cea33ab67",angleX:0,angleY:198,angleZ:0},{id:"cf138767-03b4-4850-a59c-48b79fdc1e9e",angleX:0,angleY:151.92,angleZ:0},{id:"09598874-1f95-45a7-b5cb-58b4a4a2e977",angleX:6.12,angleY:186.12,angleZ:343.8},{id:"2f248dc8-ef52-4b1a-bccf-60c6fd2c2d56",angleX:0,angleY:326.52,angleZ:0},{id:"df54d410-c813-40a9-a92b-0f648c889502",angleX:0,angleY:319.68,angleZ:0},{id:"ebf45388-b5ea-42db-8a97-e066f113fa64",angleX:0,angleY:189.36,angleZ:0},{id:"0aa24c92-ac2e-4c93-9654-9f04152ca2d1",angleX:0,angleY:20.16,angleZ:0},{id:"598a3219-5b81-4de7-8966-6717ea360883",angleX:0,angleY:346.68,angleZ:0},{id:"01f39cd6-73ed-4682-b897-95ef88ca6fe1",angleX:0,angleY:116.64,angleZ:0},{id:"92540fda-4a4b-4a2d-aefa-833a5003975c",angleX:0,angleY:23.76,angleZ:0},{id:"2b374b5f-db9e-4c62-a814-e8c3bf802a0b",angleX:0,angleY:54.72,angleZ:0},{id:"da8766c4-9ba2-4802-8a01-4ae9ce8cd2d3",angleX:0,angleY:28.08,angleZ:0},{id:"e5c249ba-eb05-47b1-ab82-2618c3be256c",angleX:18.36,angleY:234.72,angleZ:0},{id:"24efbcaf-8c1f-41e4-865a-6c28f33a01d3",angleX:0,angleY:325.44,angleZ:0},{id:"871c4279-3526-4344-8a61-404ac2555490",angleX:0,angleY:279,angleZ:0},{id:"488af31c-5114-485c-94c8-5ea98eca3b82",angleX:346.68,angleY:23.76,angleZ:7.56},{id:"4a8299a5-6aab-43a4-b5bc-94cf225128aa",angleX:0,angleY:72.36,angleZ:0},{id:"d3ec7a23-6aa1-4156-b430-7bfa0de3648d",angleX:16.2,angleY:226.44,angleZ:0},{id:"f4607ee2-3261-4205-bad0-1a25887c0b71",angleX:0,angleY:297.36,angleZ:0},{id:"f99e35d3-48f7-4cfe-b322-2a91dbe8b0f3",angleX:0,angleY:353.88,angleZ:0},{id:"2aecb14b-f79a-4db0-9e68-9e414cd2470a",angleX:0,angleY:178.56,angleZ:0},{id:"f3a5ad8b-bc49-496a-9568-459423936e6e",angleX:0,angleY:32.4,angleZ:0},{id:"404deb90-80e9-41ce-856c-0555abad1956",angleX:0,angleY:35.28,angleZ:0},{id:"9deb4cf3-26fa-4f4d-9386-3d06a7a11c8a",angleX:349.2,angleY:244.8,angleZ:355.32},{id:"b6392cb0-f41e-413e-9e31-8db26983c6c2",angleX:0,angleY:112.32,angleZ:0},{id:"7b7e482f-b2db-4019-971e-092a6cb81068",angleX:353.88,angleY:62.28,angleZ:4.32},{id:"f8dd09a1-64c2-4188-b94c-32371da0a415",angleX:0,angleY:39.6,angleZ:0},{id:"6131c81d-91ff-412b-baec-8db09d924095",angleX:0,angleY:151.92,angleZ:0},{id:"19957077-2d7b-4547-a16c-26ec6860b2bb",angleX:0,angleY:125.64,angleZ:0},{id:"f08cacef-a65d-440a-aa9d-5f9ca7ec382f",angleX:0,angleY:315.36,angleZ:0},{id:"28e34c1a-a0c3-462a-adb9-31fc629eb43b",angleX:0,angleY:342.36,angleZ:0},{id:"a697322e-0504-4fd7-960c-2a62c9912ace",angleX:0,angleY:249.48,angleZ:0},{id:"79905f23-17a7-4014-a9c2-2b2891c9f539",angleX:0,angleY:290.52,angleZ:0},{id:"8ecef742-ad5b-41dd-a3a0-22b72e92640d",angleX:0,angleY:143.28,angleZ:0},{id:"bdcc3a3b-8810-48f9-b474-697ff2a4f840",angleX:0,angleY:182.88,angleZ:0},{id:"15449e18-6813-4d5c-b3c5-f891d460f2da",angleX:0,angleY:39.6,angleZ:0},{id:"7015f3db-75e6-497f-8207-41e0e314bdb3",angleX:0,angleY:156.6,angleZ:0},{id:"5ab40743-c5fc-4d21-b884-dcc9d5fbd1ed",angleX:0,angleY:78.84,angleZ:0},{id:"1ba02941-19ae-4a27-b5e1-ebdb53118d63",angleX:0,angleY:102.96,angleZ:0},{id:"e9aefd75-d134-43aa-a9be-b0e45c9500fa",angleX:0,angleY:23.76,angleZ:0},{id:"eb2eaba6-87b7-46bb-9b91-de7dd61f42a3",angleX:0,angleY:37.08,angleZ:0},{id:"490d89b8-88f8-4c79-94c2-b65f64e38be0",angleX:0,angleY:59.04,angleZ:0},{id:"ae69474f-f078-4316-8dae-088668b5b58d",angleX:0,angleY:187.56,angleZ:0},{id:"cc8d2f40-3316-40e0-ab18-a0ece7b31635",angleX:0,angleY:341.64,angleZ:0},{id:"790a4448-bc92-4bf4-8924-cfd8cd6fd59a",angleX:0,angleY:297.36,angleZ:0},{id:"9646e4cd-b143-442f-8448-8b61b093d2d3",angleX:16.2,angleY:176.04,angleZ:0},{id:"8ee31e23-5e40-4a77-a63c-fcf8431f092e",angleX:5.4,angleY:249.48,angleZ:355.32},{id:"a9ef9d47-9616-4982-9fc2-65520c2cf31b",angleX:0,angleY:63.36,angleZ:0},{id:"8045a611-dbb0-4d9d-af87-57eeb3e18e00",angleX:0,angleY:314.28,angleZ:0},{id:"985daecb-9aba-4375-8171-1de7324cbf3f",angleX:0,angleY:0,angleZ:0},{id:"2c770943-a210-4562-83df-0970055c2191",angleX:12.6,angleY:242.64,angleZ:0},{id:"40e284e9-ad5b-4fd4-9946-5976f9e8d28b",angleX:0,angleY:337.68,angleZ:0},{id:"160b0e27-fdd1-4634-84a6-d8f0d4d85db8",angleX:0,angleY:0,angleZ:0},{id:"454524a9-a7ca-487f-90ea-b843398ddbba",angleX:0,angleY:68.04,angleZ:0},{id:"c442cfc6-efce-4d2d-bf61-33ea041e0131",angleX:351.36,angleY:35.64,angleZ:0},{id:"f70e4db3-d3e7-4fc2-9803-bab72bf227ec",angleX:0,angleY:143.28,angleZ:0},{id:"3eda3dfe-cd97-4999-9d32-8a95b6800f3b",angleX:0,angleY:336.96,angleZ:0},{id:"6ecad57f-6553-4d86-9397-899b66334ce3",angleX:0,angleY:48.6,angleZ:0},{id:"2af5a053-3c57-4f09-b7f6-fc821685b83d",angleX:0,angleY:335.88,angleZ:0},{id:"02ec175d-e0d2-466c-8966-62f639dfceb2",angleX:0,angleY:108,angleZ:0},{id:"95e79626-e8c9-4926-80b6-5278d6d99b55",angleX:18.36,angleY:194.04,angleZ:356.04},{id:"3eb6481b-4b12-4fb1-a1ad-5e8c51535636",angleX:0,angleY:18.72,angleZ:0},{id:"b3cfe487-e614-4780-8aaa-60315e29a8da",angleX:10.44,angleY:72.36,angleZ:0},{id:"064e98b6-d554-45cc-ae93-55161a2c4ec9",angleX:0,angleY:194.04,angleZ:0},{id:"2c270ffa-0b58-474e-923b-7fc9454e85bd",angleX:353.16,angleY:118.44,angleZ:351.36},{id:"eaade75f-5546-4bdc-a9a6-b6d045629b6f",angleX:10.08,angleY:222.48,angleZ:0},{id:"03a875aa-66bb-4662-843b-ca4c1e0d56f1",angleX:0,angleY:193.32,angleZ:0},{id:"570572c3-6ce8-43ae-9c21-7b3a8a50d09e",angleX:0,angleY:94.68,angleZ:0},{id:"abfd0b5e-7755-40a1-be63-9999d4bf9902",angleX:0,angleY:0,angleZ:0},{id:"e19ed42a-285a-4b21-8f69-ce8c726878a0",angleX:0,angleY:119.16,angleZ:0},{id:"d2702623-c013-4fcc-8422-f93acf9b03dd",angleX:0,angleY:237.24,angleZ:0},{id:"086daa65-ce28-4d21-9229-561d5ee1f209",angleX:0,angleY:0,angleZ:0},{id:"250067b0-8ba7-40ad-848c-97116efe1611",angleX:0,angleY:86.76,angleZ:0},{id:"96148705-da01-4cd7-8f74-b0f758104a9e",angleX:0,angleY:76.68,angleZ:0},{id:"add4c811-60b6-4efc-b518-dea10d230419",angleX:0,angleY:64.44,angleZ:0},{id:"479137ed-bac4-4d0e-ad5c-5b4dee9add7d",angleX:0,angleY:0,angleZ:0},{id:"01ae8d6d-815c-4b47-92f5-2a59606008f4",angleX:0,angleY:208.8,angleZ:0},{id:"16fef51d-6254-4a9a-ac89-6129240bbd8d",angleX:0,angleY:186.12,angleZ:0},{id:"c8ffb6ca-4939-4a92-8332-827d859f3218",angleX:0,angleY:0,angleZ:0},{id:"e7cdba12-1f38-4cf7-adb7-04c0869ccd10",angleX:0,angleY:165.24,angleZ:0},{id:"90bea81b-96ec-46cf-a2c3-5f17b2080d11",angleX:0,angleY:7.92,angleZ:0},{id:"25384263-ba3d-449b-99eb-bf1267721af1",angleX:14.4,angleY:244.8,angleZ:0},{id:"4ceac926-7c78-44af-841c-b5eeb300a10c",angleX:19.44,angleY:264.24,angleZ:360},{id:"079e080a-b68b-4091-8d42-d547a4831123",angleX:0,angleY:103.32,angleZ:0},{id:"d9d07f77-b496-4332-8ea7-8f46e86cc60e",angleX:0,angleY:0,angleZ:0},{id:"eea058b4-250e-45ef-987c-2f5c52a9b27c",angleX:0,angleY:94.68,angleZ:0},{id:"97d910bb-d8a9-4069-b672-01efda751675",angleX:0,angleY:0,angleZ:0},{id:"ea70e8fd-d0ea-4540-ba5b-4a6914ed48e7",angleX:0,angleY:127.44,angleZ:0},{id:"900bfa65-5a78-4a72-acbe-972d52265c88",angleX:0,angleY:196.2,angleZ:0},{id:"b65c35b0-1c4d-45eb-af69-7f8dd532addb",angleX:0,angleY:333.36,angleZ:0},{id:"89cf4c5b-5def-4519-af5c-0edc8f0dc718",angleX:0,angleY:45.72,angleZ:0},{id:"0957ddd1-c390-46c4-9c62-700a0f0a2594",angleX:355.68,angleY:28.08,angleZ:0},{id:"581f103b-d48a-44fa-bc20-c2ca56edfad2",angleX:0,angleY:0,angleZ:0},{id:"19f651ba-f22c-4b23-985f-fd3a613d0f45",angleX:353.16,angleY:50.4,angleZ:347.04},{id:"75d13f51-2991-4073-8be1-1984b8ff8ffa",angleX:12.24,angleY:244.8,angleZ:0},{id:"46538cfb-2674-49a6-a7ef-d19e75bbce68",angleX:1.44,angleY:253.8,angleZ:10.44},{id:"0936f9d4-44a5-4023-bfd2-baabef3058b4",angleX:0,angleY:261,angleZ:0},{id:"cb769bd5-4972-45bb-97c1-989bedd259f3",angleX:10.08,angleY:258.84,angleZ:0},{id:"e564e77f-e329-4442-8ad0-f9551df4327a",angleX:6.12,angleY:242.64,angleZ:4.32},{id:"9d58b5be-8cf8-4169-8192-fc69ed4b111a",angleX:0,angleY:309.6,angleZ:0},{id:"ba44a2c4-7d17-4dac-bd4b-616e836cbf38",angleX:0,angleY:301.68,angleZ:0},{id:"f357a9ef-1bb4-4a28-a8df-50f59933f049",angleX:0,angleY:268.92,angleZ:0},{id:"5d8c8566-a9ee-4023-9e0c-cb5ecf0f6955",angleX:0,angleY:216.36,angleZ:0},{id:"1678d4a3-4f2c-45ba-88e7-bdc2243a0c73",angleX:0,angleY:68.04,angleZ:0},{id:"e7898d33-7209-4faf-9798-3bc4f056e648",angleX:0,angleY:30.24,angleZ:0},{id:"1d4de285-7442-42c7-bfaa-75fa448490b2",angleX:346.68,angleY:37.08,angleZ:10.44},{id:"ea7d9e53-a78d-40d0-a9b2-cef68498ca83",angleX:0,angleY:164.52,angleZ:0},{id:"52b33d61-e205-4adf-9378-6ed1371ca164",angleX:0,angleY:95.4,angleZ:0},{id:"64d00d9a-1c24-45f0-8a93-40bd14a3a111",angleX:0,angleY:213.84,angleZ:0},{id:"fc3c4cd9-c4db-4943-beea-4e6e76e7b1b7",angleX:0,angleY:329.04,angleZ:0},{id:"0d7601b4-0854-41a9-97fe-415c507c8895",angleX:0,angleY:10.44,angleZ:12.24},{id:"0dcc47f3-00ca-4ef0-9288-624aa91655cd",angleX:0,angleY:319.68,angleZ:0},{id:"13084852-6d40-44db-a7f2-d5a664b0499a",angleX:0,angleY:0,angleZ:0},{id:"7f76b592-4b04-45b3-a948-75ff5c5684ff",angleX:0,angleY:134.28,angleZ:0},{id:"d6bfca4d-6a23-42c1-b870-76e36788ac17",angleX:0,angleY:85.68,angleZ:0},{id:"0caae85e-22d3-4855-9ee4-a7843d1ad3a8",angleX:0,angleY:94.68,angleZ:0},{id:"b3c97ccc-1d3c-410d-8e9f-3a2c1861e5c6",angleX:0,angleY:120.96,angleZ:0},{id:"d849782a-52b5-4790-b764-e2da3bf1d1db",angleX:0,angleY:26.28,angleZ:0},{id:"c24891f1-1a4a-4f69-8497-4a61e1dde0dd",angleX:0,angleY:311.4,angleZ:0},{id:"37e33026-02f2-4291-9471-0be244492b30",angleX:0,angleY:10.44,angleZ:0},{id:"28d2c83f-9aba-41c8-85e4-5abe6c55a17d",angleX:0,angleY:28.08,angleZ:0},{id:"3fd52295-9e73-474b-a00d-562e2185be65",angleX:0,angleY:143.64,angleZ:0},{id:"de57865b-6555-4767-a507-59d0be717da6",angleX:0,angleY:28.08,angleZ:0},{id:"440d1594-91d6-4bd4-8ff0-0f9131b3b689",angleX:0,angleY:200.88,angleZ:0},{id:"e250192d-4adf-4cf0-92a7-0c4f74554058",angleX:0,angleY:41.4,angleZ:0},{id:"d9842ef8-5215-4383-9f0d-a41cc4c901c2",angleX:0,angleY:0,angleZ:0},{id:"73039ff0-0b29-4935-958b-ab24f8f15575",angleX:0,angleY:30.24,angleZ:0},{id:"1b04f135-abe6-4ca4-b1ba-747d01375428",angleX:0,angleY:189.36,angleZ:0},{id:"fd2f949a-e2b9-4aae-9178-ae7ef971710c",angleX:0,angleY:279,angleZ:0},{id:"59d88a82-0325-48fe-8866-35110448d632",angleX:0,angleY:301.68,angleZ:0},{id:"09d099c6-5a2b-4be2-a11e-81e95f427811",angleX:10.08,angleY:267.48,angleZ:356.04},{id:"326d8ce8-8235-4058-b61d-5a34b3cd6ddb",angleX:0,angleY:7.92,angleZ:0},{id:"d3e7e2b7-a928-4db8-bdab-fcaee3d6f11c",angleX:0,angleY:0,angleZ:0},{id:"a632d569-06e4-4fc1-8b5d-030e6a078090",angleX:10.08,angleY:242.64,angleZ:0},{id:"7ac02166-ba9a-4db5-b6fd-0ca3658ab68e",angleX:6.12,angleY:227.16,angleZ:14.76},{id:"91f325d3-8f3c-4944-8c71-a6c03e1172b9",angleX:14.4,angleY:255.24,angleZ:0},{id:"5bdb47c1-8ee0-4929-b3e4-82ef8761c0e0",angleX:0,angleY:346.68,angleZ:0},{id:"1fafdf37-dcfa-4a83-a4a3-5b36cbde5950",angleX:0,angleY:41.4,angleZ:0},{id:"e3e39c8a-0dd9-4c78-904b-c500ec33e66e",angleX:349.2,angleY:19.44,angleZ:0},{id:"3e5c37e4-1475-4235-bea9-73c51f70fdfd",angleX:0,angleY:14.76,angleZ:0},{id:"9b17acd8-c770-41c2-968c-8f14614683bb",angleX:0,angleY:212.4,angleZ:0},{id:"e3fd14ea-b1af-4b98-89ce-303adacd9297",angleX:0,angleY:315.72,angleZ:0},{id:"ac6970eb-3c1c-4622-8268-b51786696700",angleX:0,angleY:322.56,angleZ:0},{id:"0fffc947-5b57-4166-8b50-0640cee93698",angleX:32.4,angleY:190.08,angleZ:0},{id:"31c3415f-f53f-400a-9a4f-c09f3be88838",angleX:0,angleY:116.64,angleZ:0},{id:"fdc0a9e6-c5b4-47f2-995e-49c4bf097e65",angleX:0,angleY:0,angleZ:0},{id:"95b29f80-cad2-4bcc-a2c9-40091e2154c5",angleX:0,angleY:103.32,angleZ:0},{id:"6492acb3-b9b9-41bb-bee4-a027ef89acdf",angleX:355.32,angleY:163.08,angleZ:340.92},{id:"ec36de4e-c36e-4a8d-8a0b-01fa1de04e15",angleX:9.72,angleY:196.2,angleZ:352.08},{id:"8718c06a-c2b8-48a2-b4bc-078f5c8a7adb",angleX:0,angleY:30.24,angleZ:0},{id:"7c0d3cb7-4b9b-45e4-8889-6a6d92ec46db",angleX:0,angleY:178.56,angleZ:0},{id:"1eed5111-9456-4508-8c8f-d58613a851c3",angleX:0,angleY:187.92,angleZ:0},{id:"1c3d4fb2-00fe-4b44-9a44-11de47fbd620",angleX:0,angleY:0,angleZ:0},{id:"3c1d3e71-1b1b-4210-a37a-11ce6770a32b",angleX:0,angleY:0,angleZ:0},{id:"6d041cdb-7116-49d0-94cd-86af6eb3551c",angleX:0,angleY:204.12,angleZ:0},{id:"0da0c6d3-b8b3-45bf-8995-ff81e60584ba",angleX:0,angleY:68.04,angleZ:0},{id:"62d9361d-5a31-4400-9f7a-dba0e3d96999",angleX:0,angleY:0,angleZ:0},{id:"2ac67b62-4e68-4518-afa9-43db5759575f",angleX:355.32,angleY:130.68,angleZ:351.36},{id:"ec92c206-e93f-4d46-a6fa-433b814a46e3",angleX:0,angleY:85.68,angleZ:0},{id:"beaacaf9-5b07-431c-855b-35b6750e8a7b",angleX:0,angleY:0,angleZ:0},{id:"ce635c73-de94-4cc5-819c-a2309b99d979",angleX:0,angleY:234.72,angleZ:0},{id:"9e14059d-6e21-46a4-9b5c-fb8a519695d9",angleX:0,angleY:230.76,angleZ:0},{id:"c1821505-60da-4729-a48b-f2d57e9184c8",angleX:0,angleY:0,angleZ:0},{id:"e05a0215-0025-4c34-9576-7fd1add32e78",angleX:0,angleY:40.32,angleZ:0},{id:"66ad565f-3706-43fc-a992-f0c3c4afe8e2",angleX:0,angleY:191.88,angleZ:0},{id:"e13e652b-74e7-49f7-83b4-6529bf209e0c",angleX:13.32,angleY:270.36,angleZ:0},{id:"17dcb546-a93e-4d1b-abfe-d3d3dab1898a",angleX:0,angleY:74.88,angleZ:0},{id:"cbedb471-5d14-4efb-881b-57e839913302",angleX:0,angleY:182.88,angleZ:0},{id:"36119856-baba-42a1-a6e7-9421bb12fe7d",angleX:0,angleY:317.52,angleZ:0},{id:"4d710085-c3e9-4fc8-a3a5-a33b814dc342",angleX:0,angleY:81.36,angleZ:0},{id:"248f4eb5-0b95-4a62-91d2-651aae0507c0",angleX:0,angleY:147.6,angleZ:0},{id:"552910d4-2ac8-401b-b75f-2d2226a23281",angleX:0,angleY:90,angleZ:0},{id:"6c02d004-3b86-4ab8-807f-528b4cad2966",angleX:0,angleY:0,angleZ:0},{id:"27961c34-d642-4568-9637-b7d28cc2fdc4",angleX:16.2,angleY:218.52,angleZ:0},{id:"2a4a6362-daae-4ccf-ad2c-6c10ab96c749",angleX:0,angleY:169.56,angleZ:0},{id:"d344be2c-1ab9-4c32-9495-e89f92253b6b",angleX:352.08,angleY:165.96,angleZ:339.84},{id:"3c9ca04c-3102-4849-a2ac-817675643440",angleX:0,angleY:0,angleZ:0},{id:"409c928d-5dc2-44f2-b6ce-6813f443852a",angleX:0,angleY:6.12,angleZ:0},{id:"f0d9a181-dd63-46a0-9efb-709d1f540727",angleX:0,angleY:10.44,angleZ:0},{id:"c47ea933-7680-4f85-8881-09e2e6c935b6",angleX:0,angleY:307.44,angleZ:0},{id:"aa88708a-7623-4bb2-9807-bb2667dd4838",angleX:0,angleY:262.8,angleZ:6.12},{id:"d95d7167-97ed-42e1-bd17-265697a85cf4",angleX:360,angleY:72.36,angleZ:351.36},{id:"5475123a-4688-4516-9a72-1f8cf0cd6d90",angleX:0,angleY:327.6,angleZ:0},{id:"c6392bf8-be5d-4cd8-b77c-94cd23934a7e",angleX:0,angleY:0,angleZ:0},{id:"0da8e4ee-1147-4142-b3af-d4f6ff8884ae",angleX:349.2,angleY:37.08,angleZ:345.24},{id:"a2a22118-c554-46b5-b12b-6e02c6ec60c7",angleX:10.08,angleY:206.28,angleZ:0},{id:"88a4ccdd-ec23-4b79-81cf-621acdbd3ad2",angleX:0,angleY:216.36,angleZ:0},{id:"aa2bbf5a-2485-4912-a053-af9aedda62df",angleX:0,angleY:272.88,angleZ:0},{id:"f21606f7-0079-4656-a32b-89a91b0d9b94",angleX:0,angleY:257.4,angleZ:0},{id:"ea7c5f14-b812-4a92-bcbb-a38c54194c1a",angleX:0,angleY:30.24,angleZ:0},{id:"dd102186-5c5c-4a83-8ddf-00620baa4c9b",angleX:0,angleY:19.44,angleZ:0},{id:"77dbcf3a-01e9-4c27-adf5-085759ff211f",angleX:0,angleY:14.76,angleZ:0},{id:"98136e5b-bd0a-4646-a637-e3b6f713b2e6",angleX:0,angleY:125.64,angleZ:0},{id:"e367a09f-02ef-4313-a581-73cf61671e27",angleX:0,angleY:191.88,angleZ:0},{id:"1114ce7d-edf3-486e-b8c0-e1f5bc53f83d",angleX:0,angleY:0,angleZ:0},{id:"dcafa112-7cfd-4c88-bc74-9702042131cd",angleX:0,angleY:12.24,angleZ:0},{id:"32003666-c74a-4055-b80a-89ae01551511",angleX:0,angleY:125.64,angleZ:0},{id:"1bf23852-c1e4-49c8-a452-a7f892dce048",angleX:0,angleY:76.68,angleZ:0},{id:"4ad84cd1-0d99-4f77-84ff-4d866fbbf995",angleX:0,angleY:62.64,angleZ:0},{id:"db112114-e2b9-440a-a052-df6c3957c8e9",angleX:0,angleY:68.76,angleZ:0},{id:"58fe7c62-a785-4d02-87a7-517cda89ae6b",angleX:0,angleY:103.32,angleZ:0},{id:"7a6bfaf2-4cb3-4122-ba5c-555d1c55d109",angleX:0,angleY:129.96,angleZ:0},{id:"8dfcf3eb-f10f-44c6-be20-ecb2267b9e2a",angleX:0,angleY:275.04,angleZ:0},{id:"9c7a29f0-3d6f-403e-98d3-2cbf14a9aeb5",angleX:0,angleY:22.32,angleZ:0},{id:"6864ad80-dbfd-4e20-b5c8-0ee0b5ecdd6a",angleX:0,angleY:200.88,angleZ:0},{id:"d186d50e-e703-4473-924c-89165e8fa613",angleX:0,angleY:23.76,angleZ:0},{id:"36865d32-6f56-422b-8950-1663a396f6ef",angleX:0,angleY:0,angleZ:0},{id:"772fed6e-5fec-4ed9-b2d9-2e08132db144",angleX:0,angleY:0,angleZ:0},{id:"edcfb9a5-5d21-4d93-883a-d4214cb4b5f3",angleX:0,angleY:174.6,angleZ:0},{id:"e233f6c9-bcdb-4794-915d-2ed83b54ab89",angleX:0,angleY:26.28,angleZ:0},{id:"d37894a2-2891-44f2-8316-dd2780e1c963",angleX:0,angleY:257.4,angleZ:0},{id:"22095270-fe96-4e39-ba9a-93419c7158a7",angleX:0,angleY:317.52,angleZ:0},{id:"05a79888-459a-42cb-ab52-062611670bbe",angleX:14.04,angleY:228.6,angleZ:357.84},{id:"b13c6e6c-a24d-40c1-9ebd-cfb15c489a18",angleX:357.84,angleY:50.4,angleZ:349.2},{id:"9e6559ae-eae4-4970-81ae-f6cb875b6152",angleX:0,angleY:287.28,angleZ:0},{id:"ffbc46a4-c9a6-4bad-b507-a093e64c70f9",angleX:0,angleY:291.24,angleZ:0},{id:"312239f5-2dcc-47e1-b179-cab8e8de49a6",angleX:355.68,angleY:289.08,angleZ:0},{id:"0a3d4cee-1403-4294-bbb3-1c0e308b9ef6",angleX:355.32,angleY:50.4,angleZ:355.32},{id:"80d47a3d-bfb8-4485-afb2-d43ec208324e",angleX:0,angleY:291.24,angleZ:0},{id:"e827e651-ca3a-43b7-b96d-78ed947ce2a5",angleX:0,angleY:271.44,angleZ:0},{id:"9c00ac00-79ea-4fe0-9600-3b3db5e5beb3",angleX:0,angleY:50.4,angleZ:0},{id:"21c392c4-703e-484d-b7d5-6c3f9a100df6",angleX:0,angleY:28.08,angleZ:0},{id:"cf79be0b-79ae-4dba-bdfa-f64df3660b1c",angleX:14.04,angleY:169.92,angleZ:345.96},{id:"3a4c6d82-ef56-48ee-9617-41b013ce4156",angleX:0,angleY:345.6,angleZ:0},{id:"9c54b945-8869-4263-96aa-3496f0efa2a5",angleX:0,angleY:0,angleZ:0},{id:"574aadc2-cedf-4459-8c02-40ed033d2d9b",angleX:0,angleY:187.56,angleZ:0},{id:"bf2875fd-7f89-4649-9233-d045eced8c74",angleX:0,angleY:212.4,angleZ:0},{id:"36710822-b529-4bd0-b484-a74c779a21a7",angleX:0,angleY:151.92,angleZ:0},{id:"b829673b-655e-4904-a292-8671195ad0e9",angleX:0,angleY:63.36,angleZ:0},{id:"985e23d4-6714-4e32-a87f-ffc51c6ad20e",angleX:0,angleY:94.68,angleZ:0},{id:"f3750530-cc75-4ccf-ab52-02927e7ae23a",angleX:0,angleY:311.4,angleZ:0},{id:"3b817fc0-68b2-4d4e-9672-a742ab59634d",angleX:0,angleY:81,angleZ:0},{id:"9186108b-2ae9-48e5-b6ca-33be70f86b6e",angleX:19.44,angleY:252,angleZ:0},{id:"7876dc42-fc9a-487d-a422-455fd9a06395",angleX:0,angleY:174.24,angleZ:0},{id:"5416d3a3-48c2-44be-b3ea-34f23c466bea",angleX:0,angleY:182.88,angleZ:0},{id:"b5de7082-e92f-4da4-ad87-d96696b6201d",angleX:0,angleY:22.32,angleZ:0},{id:"dfd89ab7-2149-4943-ac5f-006865c0a70c",angleX:0,angleY:226.44,angleZ:0},{id:"b99fd132-ea80-4022-a78e-c8fba46e02de",angleX:0,angleY:0,angleZ:0},{id:"0a5e6996-755e-4ba9-8f29-07dc74c9e8e0",angleX:0,angleY:0,angleZ:0},{id:"ff62cd40-dec9-46f4-97b7-1addf333d5e9",angleX:0,angleY:167.76,angleZ:0},{id:"0ea00b0e-cc23-4929-8fa2-ae8b3b382f98",angleX:0,angleY:236.16,angleZ:0},{id:"3ace23b2-0302-413a-a3df-93bb6d241f06",angleX:360,angleY:153,angleZ:347.04},{id:"8fc553b0-3615-41db-a66a-7c43e60f37bd",angleX:7.92,angleY:96.84,angleZ:345.96},{id:"6be2f0d7-ce2d-456f-adf6-efb5f07b79e7",angleX:0,angleY:213.12,angleZ:0},{id:"bc2ca797-c824-4e56-8c0d-970e5157c91f",angleX:0,angleY:291.24,angleZ:0},{id:"3a6afc01-e883-46fb-848a-7d5d6dfa8f2e",angleX:0,angleY:0,angleZ:0},{id:"a2359f57-2380-48ab-a42f-224ad3d3f342",angleX:0,angleY:172.8,angleZ:0},{id:"cd62f21b-12ca-4327-a055-c152fb94f6cf",angleX:0,angleY:131.4,angleZ:345.6},{id:"1e8d9247-d495-457c-847f-9dcec39bb48f",angleX:0,angleY:173.16,angleZ:0},{id:"09122e6d-9667-4ba1-a9b7-2af5329b31c6",angleX:0,angleY:142.92,angleZ:349.2},{id:"3ae83907-2493-44da-8d4b-4f6759215c7a",angleX:0,angleY:251.64,angleZ:0},{id:"9887ef09-fbb7-4e00-a6c6-ef4bfd5d95d4",angleX:13.32,angleY:189.36,angleZ:0},{id:"be7556b7-ffd9-4d48-bcac-815ce309e087",angleX:0,angleY:0,angleZ:0},{id:"76963b5b-e9fd-4b97-ac2a-5d3a73ab141b",angleX:0,angleY:135.36,angleZ:0},{id:"412a3ee7-4923-4c09-8401-aa4af7384d63",angleX:0,angleY:262.8,angleZ:0},{id:"7f6fd20d-700d-4e59-ba88-3028f324e570",angleX:0,angleY:314.28,angleZ:0},{id:"8e5f6dc9-240c-4716-9a01-52f08337990d",angleX:0,angleY:115.2,angleZ:0},{id:"6319af2a-058b-46eb-a80c-fa63be0817f4",angleX:0,angleY:24.12,angleZ:0},{id:"312e87cd-36f0-4355-8f00-4e0f07d99381",angleX:0,angleY:314.28,angleZ:0},{id:"ff9cce5d-7330-40f2-8987-3b3937f9c5c6",angleX:0,angleY:342.36,angleZ:0},{id:"4be51075-7b71-446e-8507-b0f2f779b24e",angleX:27,angleY:208.08,angleZ:0},{id:"7108245b-9cba-4eab-a248-95014d0ec3f4",angleX:0,angleY:342.36,angleZ:0},{id:"bbec76b7-d04c-4f21-80f8-d08ef1a34e16",angleX:0,angleY:198,angleZ:0},{id:"dc44b3c8-f3e5-47e0-900b-f2ea4b4bf6e2",angleX:0,angleY:245.52,angleZ:0},{id:"da62b7ba-d3e0-4ba1-9070-357ff449a1e0",angleX:0,angleY:280.44,angleZ:0},{id:"ee4b6fae-1782-48ae-8452-f786392a6dbd",angleX:350.64,angleY:66.6,angleZ:0},{id:"8c129a4e-aa45-4f55-a5b3-15965306e8d8",angleX:0,angleY:333.36,angleZ:9.36},{id:"2b227179-667b-4cdc-88a1-33e62f95d861",angleX:0,angleY:173.88,angleZ:0},{id:"ae0e309e-2681-4547-9a8b-af877fbca3a4",angleX:0,angleY:307.44,angleZ:0},{id:"afac4c9a-dc69-42f6-884b-c9ec09474a3a",angleX:0,angleY:256.68,angleZ:0},{id:"315fcfdb-621a-4080-804b-3b162b32a846",angleX:355.68,angleY:324.72,angleZ:0},{id:"6377cfaf-a318-4a03-8290-50698407294c",angleX:352.08,angleY:1.8,angleZ:2.16},{id:"8449a526-efee-4ff3-8469-aeb9d29385e9",angleX:351,angleY:351,angleZ:0},{id:"6466187f-9f85-44ff-9af2-6c16f80d821d",angleX:0,angleY:0,angleZ:0},{id:"130419eb-ece7-43f3-9cd5-2b27c6dff44e",angleX:351.36,angleY:50.4,angleZ:0},{id:"1ead2685-c45e-4f68-b778-b3e12ec9de67",angleX:0,angleY:160.2,angleZ:0},{id:"c065dd74-53a9-4d38-9663-eea0014b5279",angleX:0,angleY:165.24,angleZ:0},{id:"7c7270be-4dc4-44cf-a1ab-b968be9690cb",angleX:10.44,angleY:178.56,angleZ:0},{id:"ca790cc3-7933-43cd-b1ce-d35543113afe",angleX:11.52,angleY:249.48,angleZ:0},{id:"085dd680-2e33-43c5-88fb-630e5d1d114c",angleX:0,angleY:50.4,angleZ:0},{id:"7f98e697-cd4b-4560-bce3-f749528741c4",angleX:0,angleY:23.76,angleZ:0},{id:"f3bc2075-a2d2-4156-b7a7-fc1e70723453",angleX:0,angleY:14.76,angleZ:0},{id:"6e48b15d-e4a6-4e94-a0ac-1ab7568dcc07",angleX:0,angleY:194.04,angleZ:0},{id:"8048e6d5-7db7-44b3-8629-536d3135f982",angleX:0,angleY:0,angleZ:0},{id:"58f7a229-ca31-4b78-898f-91d200bdb2f0",angleX:347.76,angleY:0,angleZ:0},{id:"2156d5ba-e23b-4b6f-989e-0bea69a5e8bf",angleX:0,angleY:289.08,angleZ:0},{id:"c07658b2-d564-4518-9440-ca7abf59f9b3",angleX:0,angleY:258.12,angleZ:0},{id:"b2ac6351-8eb0-4889-8c50-3b596f0e7d5a",angleX:0,angleY:0,angleZ:0},{id:"bdf48149-5364-4ae6-ba34-d6c5fe4546f5",angleX:0,angleY:0,angleZ:0},{id:"aadf9e11-9d16-427b-984a-b913762913fd",angleX:0,angleY:63.36,angleZ:0},{id:"730e925a-a009-42cd-9616-cadea21bc9e0",angleX:0,angleY:12.24,angleZ:0},{id:"f7405dac-3ae2-4753-b24b-04847f9916c6",angleX:0,angleY:20.16,angleZ:7.92},{id:"d39c18aa-df98-42ac-b525-f5682bcac076",angleX:0,angleY:190.08,angleZ:0},{id:"e03f1069-e1d6-4aa9-b719-1e7bf8b167d1",angleX:0,angleY:10.44,angleZ:0},{id:"031844db-aba2-4d45-8335-5d2198cfb63d",angleX:0,angleY:342.36,angleZ:0},{id:"ee336479-6d71-49e2-afbe-7294a79eba8b",angleX:0,angleY:68.04,angleZ:0},{id:"888951c8-de04-47b2-ba28-d35a69a560e6",angleX:0,angleY:0,angleZ:0},{id:"96ef3591-6146-46b1-a856-021320c1ba0a",angleX:10.44,angleY:178.56,angleZ:0},{id:"bc5d00b1-c8db-4351-ae7c-d9feeb6809e3",angleX:5.4,angleY:289.08,angleZ:0},{id:"3ed00d2b-dfbf-4fc3-a8cb-190ace6b6ab5",angleX:0,angleY:30.96,angleZ:0},{id:"7e524fee-a436-4391-9661-81af7cc4ed80",angleX:173.52,angleY:36.72,angleZ:175.68},{id:"65313b3e-e484-4ad4-98bb-cc78f0a47d99",angleX:0,angleY:165.24,angleZ:0},{id:"424fd014-1be7-4199-89b7-2020ed0e3fc6",angleX:0,angleY:0,angleZ:0},{id:"623ce13c-e497-4729-bb13-aa3a1ae676d3",angleX:351.36,angleY:338.04,angleZ:3.24},{id:"96155043-5669-4d00-aff7-2f3936853123",angleX:343.44,angleY:52.56,angleZ:0},{id:"728e9459-896b-4024-b261-738632bd795c",angleX:355.32,angleY:339.12,angleZ:0},{id:"39ca4fab-3670-4b56-9bf9-e625d13c65d8",angleX:12.24,angleY:267.12,angleZ:0},{id:"ea1875e8-2725-4857-8889-07034bb7ba36",angleX:0,angleY:299.16,angleZ:0},{id:"7aff8d49-8dd4-4ea3-a5ea-269d9b1dab46",angleX:0,angleY:333.36,angleZ:17.64},{id:"ea250fe7-499e-45cb-88ce-4ea2ea113d5c",angleX:0,angleY:187.92,angleZ:0},{id:"c1329cdc-0206-41fa-a33d-cb68b7c5acfc",angleX:0,angleY:271.44,angleZ:0},{id:"f8e83ff4-aad9-4cb4-8705-29588b331dce",angleX:2.16,angleY:107.64,angleZ:350.64},{id:"22bbc751-547c-4d67-ba57-a73c47255a54",angleX:0,angleY:235.08,angleZ:0},{id:"e2c81025-ce17-416d-bc6b-a6deb462fe0b",angleX:0,angleY:222.48,angleZ:0},{id:"a0d45386-200b-49bc-a7f8-61d6162ae671",angleX:0,angleY:333.36,angleZ:0},{id:"45d88fd5-117a-4da2-aa3a-c29fb8a87245",angleX:8.28,angleY:274.68,angleZ:0},{id:"e0d7b0c0-b21c-4809-af9e-2bcf161bd0e6",angleX:0,angleY:329.04,angleZ:0},{id:"ac8ce9c2-fac2-49c7-a22a-e414464cce4f",angleX:0,angleY:3.96,angleZ:0},{id:"026e4fa7-037c-4706-aef3-9154dd24116f",angleX:0,angleY:320.4,angleZ:0},{id:"57843219-294b-4b07-999b-04efd218c60a",angleX:0,angleY:311.4,angleZ:0},{id:"ca43997d-83ee-4ebf-aaa7-b9d90d9da820",angleX:0,angleY:113.04,angleZ:0},{id:"986ccf7d-3633-4260-a505-c5952024d833",angleX:0,angleY:0,angleZ:0},{id:"549a1928-7d28-4cc1-a733-bda34ed3f12f",angleX:0,angleY:131.4,angleZ:0},{id:"0dd20d70-c15a-4d44-b2a4-02dc60715c73",angleX:0,angleY:223.92,angleZ:0},{id:"396c43f0-6483-434a-9c85-0c18b7c86936",angleX:13.32,angleY:195.48,angleZ:0},{id:"afdac192-efe0-46b2-b132-d536428590f9",angleX:0,angleY:170.64,angleZ:0},{id:"6fd3623e-d278-4813-916d-d972f573976d",angleX:0,angleY:169.92,angleZ:0},{id:"1fb8b935-f66d-4567-8727-3b898657991e",angleX:15.84,angleY:183.96,angleZ:0},{id:"65277fbc-d690-4c78-9b32-7bb34a2aaf2a",angleX:0,angleY:20.52,angleZ:0},{id:"2d7a2457-887f-4912-83cd-17091bde93a2",angleX:0,angleY:343.8,angleZ:0},{id:"b57acf57-1e47-4f22-87bb-30cb180b5fcb",angleX:0,angleY:162.36,angleZ:0},{id:"db1a36c5-7f72-4eea-a13a-6bbc441e5f40",angleX:0,angleY:174.6,angleZ:0},{id:"ed714c7f-2f30-4467-b5c6-e39bc34149d6",angleX:0,angleY:26.28,angleZ:18.36},{id:"c2f09a85-d670-4e56-aafe-712d2c9cc22d",angleX:0,angleY:226.44,angleZ:0},{id:"ed8c88e6-d6b8-470e-920d-f585d8103f88",angleX:8.28,angleY:181.08,angleZ:345.6},{id:"427903f5-cdec-44d8-8377-a8079d60c3a8",angleX:0,angleY:277.2,angleZ:0},{id:"5e41f0a9-fa0b-485a-bcac-fa4b1a5e4290",angleX:0,angleY:217.44,angleZ:0},{id:"52be2af9-3eb2-460f-bdd5-13eb3f2b0536",angleX:0,angleY:3.96,angleZ:18.72},{id:"7fbea04d-4068-4899-aebc-5fcdc862256c",angleX:0,angleY:262.08,angleZ:0},{id:"d641a9c4-15f4-4ae3-a422-ccd9fad7c7ba",angleX:0,angleY:14.04,angleZ:0},{id:"b96afcb8-ce99-4412-883c-91666e6f2b26",angleX:0,angleY:202.32,angleZ:0},{id:"d3160fbf-1820-45f0-9d1f-d0c2aca53bbd",angleX:0,angleY:66.6,angleZ:0},{id:"2b4d9d07-b2e9-44dd-88bb-7bb7752a279c",angleX:0,angleY:204.48,angleZ:0},{id:"533f439c-ae42-4ff3-b115-176c7923a784",angleX:9.36,angleY:153,angleZ:351.36},{id:"f760447c-9285-421f-a9c6-92024a068025",angleX:0,angleY:258.12,angleZ:0},{id:"acbd7b3a-9acd-460c-8f1a-ad3880fc33dd",angleX:0,angleY:137.52,angleZ:0},{id:"219be8c4-23d7-4d75-82c8-3c6efc6df215",angleX:0,angleY:287.28,angleZ:0},{id:"1cf1359b-18c2-4725-b2dc-ac95dea73575",angleX:0,angleY:46.44,angleZ:0},{id:"29a0e438-0b1a-4c4f-b23e-58ce9bbc6a08",angleX:0,angleY:0,angleZ:0},{id:"3aa222a2-5532-4ee9-8cd6-98b6c23909d1",angleX:0,angleY:111.24,angleZ:0},{id:"9b86ef7f-d281-48e8-a143-1fbece8f511a",angleX:0,angleY:305.28,angleZ:0},{id:"d4c17d71-8ded-48ab-8e66-7523304076f1",angleX:0,angleY:72.36,angleZ:0},{id:"c32fd361-3eb2-45c3-93dd-42345e8b740e",angleX:0,angleY:0,angleZ:0},{id:"0b105b3a-b595-401f-a099-37d2f6a0d55b",angleX:0,angleY:279,angleZ:0},{id:"e232ad28-ede7-4303-b61e-7b6079342be1",angleX:0,angleY:216.36,angleZ:0},{id:"de61350b-5e51-454a-bb64-52f823789319",angleX:0,angleY:224.28,angleZ:0},{id:"c9c6397f-c01e-46b2-b3a0-2d8beab26db4",angleX:0,angleY:307.08,angleZ:0},{id:"5a9e20b3-7eea-4d51-9298-cd6eeae0915a",angleX:9.36,angleY:307.08,angleZ:13.32},{id:"6f17824d-a575-4355-8d47-1a92fdb98258",angleX:0,angleY:0,angleZ:0},{id:"5ba6ab59-2e7c-4a0f-8505-18466a82ac59",angleX:0,angleY:280.44,angleZ:0},{id:"8bc0bd92-a136-46bf-b96a-e966c027f242",angleX:0,angleY:195.12,angleZ:0},{id:"f3b8a9e8-acc0-4dda-a617-1a8f81672827",angleX:347.04,angleY:342.36,angleZ:1.44},{id:"f4c2ecd3-27da-4ff3-88e5-eba3aa6ceaad",angleX:0,angleY:0,angleZ:0},{id:"5c2dd7b4-9981-4d85-968c-49dcf977d1c8",angleX:0,angleY:0,angleZ:0},{id:"dcb26172-633b-4d39-8c55-ce553d678aab",angleX:339.84,angleY:0,angleZ:0},{id:"9d649fdc-12cf-4801-8956-5bd8776f9b77",angleX:0,angleY:0,angleZ:0},{id:"f713b505-1e45-4be6-a072-3d0a991219f6",angleX:0,angleY:204.12,angleZ:0},{id:"eca3fb09-df9d-4641-8cd9-619102dcd502",angleX:0,angleY:160.92,angleZ:0},{id:"32dd1e06-eb6b-4584-9865-f43175771c8e",angleX:0,angleY:160.92,angleZ:0},{id:"21ddaa75-45d4-4efb-9942-7b0249d0d5f3",angleX:173.52,angleY:20.16,angleZ:171.36},{id:"f0edd2b8-f291-40a1-bbe1-67b9fa4e8952",angleX:0,angleY:14.76,angleZ:0},{id:"21a43646-aa64-4fa2-9ff6-66b0adba7b5a",angleX:0,angleY:76.68,angleZ:0},{id:"1363508e-6c3c-45dc-9cce-c088de2507c7",angleX:0,angleY:0,angleZ:0},{id:"f50838b1-341c-4bb8-96b3-078d65716a99",angleX:0,angleY:309.6,angleZ:0},{id:"7188bf6c-88e1-4ea2-a3ee-e8a2482f03c8",angleX:0,angleY:0,angleZ:0},{id:"53fed3f0-99ea-450a-8b70-618cd708620e",angleX:0,angleY:0,angleZ:0},{id:"ff4df0ec-e461-4b29-ba62-d66bf54be88a",angleX:0,angleY:72.72,angleZ:0},{id:"1ab6040d-ee41-40ff-a272-bb3397435c11",angleX:0,angleY:37.08,angleZ:0},{id:"97b2c2ac-4cfc-493a-ac00-e44243de3f3a",angleX:353.88,angleY:35.28,angleZ:0},{id:"70c0df91-6e6b-4560-98e9-7da0293a679e",angleX:0,angleY:0,angleZ:0},{id:"99c8a287-27ed-4cf3-b0c9-55decdeb40d1",angleX:0,angleY:240.12,angleZ:0},{id:"3e98e418-445d-42c0-b430-a0ff5a188bc2",angleX:0,angleY:227.16,angleZ:0},{id:"95931023-ed0c-47b4-8f3b-680c2251688a",angleX:0,angleY:0,angleZ:0},{id:"2ce06809-7059-4af4-80d0-85967e08a5bb",angleX:0,angleY:50.4,angleZ:0},{id:"8f62b936-b075-49fe-af9f-79b828c6bee1",angleX:0,angleY:30.24,angleZ:0},{id:"90705712-862e-4dc7-92c8-61a5ddf73cd8",angleX:0,angleY:342.36,angleZ:0},{id:"0ff2a312-79ff-4082-9943-99c8913cdae4",angleX:0,angleY:345.6,angleZ:0},{id:"56ce3b39-e86c-4929-a9d6-767c8b47f8f3",angleX:0,angleY:0,angleZ:0},{id:"a0b53652-57dc-4415-9184-42728bfe6508",angleX:0,angleY:324.72,angleZ:0},{id:"80074aee-6a81-494b-9385-472bb8497e11",angleX:0,angleY:276.84,angleZ:0},{id:"328bd75d-358a-4745-aeeb-4fb693971225",angleX:0,angleY:32.4,angleZ:0},{id:"85cda45a-a1d9-4f25-abdd-6ced2099cc42",angleX:0,angleY:23.76,angleZ:0},{id:"73428c56-a67e-4f0f-9d4c-220fb78faf98",angleX:6.12,angleY:151.92,angleZ:0},{id:"70906ab0-fa5f-4d15-89c6-f73c714ac748",angleX:169.56,angleY:28.44,angleZ:173.52},{id:"0c7cbaf8-9054-443d-bcfe-741a50a81b96",angleX:0,angleY:54.72,angleZ:0},{id:"153e9b3c-b46f-4933-8714-b6bb0e641536",angleX:0,angleY:165.24,angleZ:0},{id:"18e20bef-6ade-4529-aac6-42f783b61bd1",angleX:0,angleY:180,angleZ:0},{id:"8b9367bf-9d05-4607-921c-dc95870bf801",angleX:0,angleY:0,angleZ:18.36},{id:"cb6b28cc-63b5-4763-bfac-157c75c57645",angleX:0,angleY:0,angleZ:0},{id:"91a8af96-2a7b-4100-843a-955cfea4c74c",angleX:0,angleY:323.64,angleZ:0},{id:"c1efde1f-315e-4702-87b5-1e48fb207a71",angleX:0,angleY:181.44,angleZ:0},{id:"7901450f-321f-4bca-b0e3-5cc7d4b193db",angleX:1.44,angleY:351,angleZ:0},{id:"82edeebc-6546-442e-a6a8-0411ba5da833",angleX:18.36,angleY:254.88,angleZ:0},{id:"0b036bf8-bdf7-43ac-bbc8-65d2d55f3e73",angleX:0,angleY:284.76,angleZ:0},{id:"ef17d55b-ee82-4eda-beb3-0d83a985bd11",angleX:0,angleY:202.32,angleZ:0},{id:"c227b194-0115-411b-8c3b-e1dc61d44562",angleX:0,angleY:91.08,angleZ:0},{id:"b3767913-c829-4a4f-a3cd-0e0c6f928c31",angleX:0,angleY:230.4,angleZ:0},{id:"e5ed916a-b32c-47f5-91c1-76f45fed6180",angleX:0,angleY:237.24,angleZ:0},{id:"93ddd9f9-778c-48c3-a4a4-75d172222bba",angleX:0,angleY:0,angleZ:0},{id:"37a9b608-cef0-4554-ba0f-bea8f0dc1952",angleX:0,angleY:214.2,angleZ:0},{id:"2108d930-8917-48b0-82d0-4c1e53a248b0",angleX:0,angleY:346.68,angleZ:0},{id:"cf471659-5ad9-4607-8ef4-973372b5085f",angleX:0,angleY:117.36,angleZ:0},{id:"d1b05d03-61dc-4a8e-915b-ed879d046912",angleX:0,angleY:311.4,angleZ:0},{id:"f569f6b0-6093-40a9-9e78-d7a45c862597",angleX:0,angleY:307.8,angleZ:0},{id:"891a6217-c721-4c0d-9535-46c269088859",angleX:0,angleY:41.4,angleZ:0},{id:"8ba550bf-e3fa-4f2c-bc56-d4a8a044f226",angleX:0,angleY:30.96,angleZ:0},{id:"5e4a1e5a-a2b8-451d-bfcd-4ce6d304e910",angleX:0,angleY:133.56,angleZ:0},{id:"c77d51e8-8795-4efa-be99-8111c305eeb2",angleX:0,angleY:338.04,angleZ:0},{id:"3e0f3b90-0936-4f8c-8a1e-1e63f4aef801",angleX:0,angleY:262.8,angleZ:0},{id:"9fb550b2-ce1e-42b2-89ff-1794de249e5f",angleX:11.52,angleY:138.96,angleZ:343.08},{id:"8ae3bfc8-b925-4079-9f24-e16d86608e0f",angleX:9.72,angleY:196.2,angleZ:0},{id:"37d67b73-6362-4b35-a1fc-44eade90bf1d",angleX:0,angleY:34.2,angleZ:0},{id:"57f27a9b-4e80-4b7c-9fe2-52dae29700b8",angleX:0,angleY:208.44,angleZ:0},{id:"fa605bb2-539f-4de6-8d64-0f907e828e5f",angleX:0,angleY:68.76,angleZ:0},{id:"56a8290e-d207-43c5-bff9-9d54f51138c4",angleX:0,angleY:60.12,angleZ:0},{id:"ef4688dd-14d2-48aa-8fa5-ccd1b03a0f78",angleX:0,angleY:213.12,angleZ:0},{id:"a508df73-4317-412e-ada9-7a5d2f008fa0",angleX:0,angleY:0,angleZ:16.2},{id:"ebc6b219-6504-4970-8ade-c1f5669ce2ca",angleX:0,angleY:160.2,angleZ:345.6},{id:"c308e107-102a-4684-886e-417b953e14c4",angleX:0,angleY:254.88,angleZ:0},{id:"0a3aa48b-f8e1-49e8-8d9f-b464d968c836",angleX:0,angleY:230.4,angleZ:0},{id:"f4f0fb84-39ff-467d-b1e9-576c5095af9a",angleX:0,angleY:0,angleZ:0},{id:"f89aa7e4-8b3f-432d-8949-35a25ccdc6bd",angleX:355.68,angleY:24.84,angleZ:0},{id:"fd30e166-f9a6-4ad4-933f-a801aa69c365",angleX:0,angleY:174.24,angleZ:0},{id:"8603044c-0c11-4626-a0b8-9798503d6bf3",angleX:0,angleY:135.36,angleZ:349.92},{id:"25a0fd2b-47e5-4f00-9d92-ebeb1ce428d1",angleX:349.92,angleY:48.6,angleZ:7.92},{id:"c2f25b03-462f-4768-9e3c-22d023a23fe8",angleX:0,angleY:217.44,angleZ:0},{id:"18908620-1d6c-4c56-832c-62c89cc4f08a",angleX:0,angleY:159.84,angleZ:0},{id:"0bdaa71b-bdaa-47d4-a83a-2c604be3bf97",angleX:0,angleY:135.36,angleZ:0},{id:"94ca22ee-35df-4bf3-8318-b19261b525d5",angleX:0,angleY:119.16,angleZ:0},{id:"f2bb7a38-14d9-4f7b-ab77-e6c8f98a962f",angleX:0,angleY:52.56,angleZ:0},{id:"a6f1f96d-3dca-4364-bc01-54f0bea42c53",angleX:0,angleY:126.72,angleZ:347.04},{id:"8d882d8c-a8b7-4534-8a1a-1a8df96c05b5",angleX:0,angleY:107.64,angleZ:0},{id:"6bdc4d1f-38de-45ef-af89-db77d153207b",angleX:0,angleY:319.68,angleZ:0},{id:"560f7876-dfdf-4147-ae40-e172c6ee2a5c",angleX:0,angleY:351,angleZ:0},{id:"82fa6a9f-a1df-4633-94aa-ac8434f94e53",angleX:0,angleY:0,angleZ:0},{id:"f480eada-b80e-4091-808a-ba5291f63b40",angleX:0,angleY:0,angleZ:0},{id:"31144530-ee3d-499f-b4a6-4a22cd1dfb06",angleX:0,angleY:287.28,angleZ:0},{id:"f3fdd6db-e3fe-4995-8466-1a0c255e4cf1",angleX:0,angleY:41.4,angleZ:0},{id:"9e53c1e5-259b-4f90-a70d-ebace09a0871",angleX:0,angleY:184.68,angleZ:0},{id:"c900c15b-d884-42f7-a899-6ac4f0d9b9aa",angleX:0,angleY:205.92,angleZ:0},{id:"dba84e3f-df21-4eed-8100-072e6babb05b",angleX:0,angleY:208.44,angleZ:0},{id:"b2c117aa-16cc-4cac-baca-fcf4b04300b0",angleX:0,angleY:351,angleZ:0},{id:"d5fedab7-9935-449b-b22a-592229e1810b",angleX:351.36,angleY:59.04,angleZ:349.2},{id:"faef51dc-a11f-44e1-b320-e3c16c57b8a2",angleX:349.2,angleY:345.24,angleZ:0},{id:"6491efb2-b26f-4092-8bb7-600c056b5e87",angleX:357.12,angleY:120.6,angleZ:347.04},{id:"065786e3-514d-4595-8f52-9d7b771450fc",angleX:0,angleY:320.04,angleZ:0},{id:"7095fa3a-5d82-4f97-855d-caed3323245d",angleX:0,angleY:246.6,angleZ:0},{id:"0da9703a-34c5-4070-9a9c-98833e36c175",angleX:8.28,angleY:153.36,angleZ:348.48},{id:"93c5ce67-1cfe-4e5c-a392-8a70401450f1",angleX:0,angleY:0,angleZ:0},{id:"6d0cc597-b3ba-48fb-b6e7-b351b6fb53b3",angleX:339.12,angleY:37.44,angleZ:0},{id:"49bda40e-2cb1-4979-853b-bc1a7429cafe",angleX:0,angleY:76.68,angleZ:0},{id:"570e9dab-5239-48a9-8c94-0109712348f7",angleX:0,angleY:0,angleZ:0},{id:"94d32d9d-942f-4b72-aa97-f547f095c935",angleX:0,angleY:320.04,angleZ:0},{id:"e04d1db8-ad94-4f67-8da1-0fac4420fc02",angleX:0,angleY:63.36,angleZ:0},{id:"f040638c-69b8-4b8c-acbf-36feb3c8b78e",angleX:0,angleY:19.44,angleZ:0},{id:"40fb911c-eaa2-4840-b93e-e9891b773c48",angleX:6.12,angleY:174.24,angleZ:0},{id:"3ab5824d-1091-47ba-be27-b0c6c3514c17",angleX:9.36,angleY:249.48,angleZ:0},{id:"2517fedb-b79e-465a-8753-7f692aa731d9",angleX:0,angleY:324.72,angleZ:5.4},{id:"0094c207-ce8f-4e95-b89a-594159762e34",angleX:0,angleY:109.08,angleZ:0},{id:"38ab41e1-5ff7-4c03-ae7a-999ecce87c6c",angleX:0,angleY:329.04,angleZ:0},{id:"0a8c9a37-280f-42cf-8736-78d96d4edc32",angleX:0,angleY:258.12,angleZ:0},{id:"c9602571-d542-4fcc-bdf1-5cfbfd887d40",angleX:0,angleY:244.8,angleZ:0},{id:"ffbcbfc0-2c7f-46c1-9ca7-fa10f28d810c",angleX:0,angleY:58.68,angleZ:0},{id:"cb26def4-08a0-4a01-95ed-1c417a0647cc",angleX:0,angleY:41.4,angleZ:0},{id:"8c685e65-e453-4dca-917b-9b5d9d9bbc24",angleX:0,angleY:27,angleZ:0},{id:"2b0928cb-e49f-430c-9c03-ab9a45958664",angleX:0,angleY:345.96,angleZ:0},{id:"afda7ee9-9ce5-47ec-a117-ffee0ba99450",angleX:0,angleY:66.6,angleZ:12.24},{id:"dbfcc025-9d2d-4789-b6bd-b2e25ccbbdd6",angleX:0,angleY:52.56,angleZ:0},{id:"3039f8f4-79fd-4838-9776-540cd54b9bd1",angleX:336.96,angleY:10.44,angleZ:0},{id:"44ee8f29-cea4-4909-a6ba-f9937a3aadca",angleX:0,angleY:32.4,angleZ:0},{id:"4b777e6c-10b2-4d78-ac05-1fa0c16005f2",angleX:0,angleY:258.12,angleZ:0},{id:"af0df66c-2eb3-4e99-9af8-cdb2a9a36183",angleX:0,angleY:236.16,angleZ:0},{id:"71b697ad-dc5c-4744-b45d-2f76b5ef8c84",angleX:17.64,angleY:275.76,angleZ:357.12},{id:"52e126d2-e92c-4c55-bb5d-88bb6521234d",angleX:0,angleY:6.12,angleZ:0},{id:"09bcf575-af67-42dd-a416-b1fc2cd45f05",angleX:0,angleY:44.28,angleZ:0},{id:"a6fa53ae-7db8-4ec7-8fd8-dd97614e7e86",angleX:10.44,angleY:178.56,angleZ:0},{id:"d2e9a15e-5169-49a7-a1da-1be09b39129f",angleX:7.56,angleY:253.8,angleZ:0},{id:"5021b1d7-9f31-455a-b94f-1c2daadb38bb",angleX:0,angleY:54.72,angleZ:0},{id:"c97bfd63-a4a8-4a76-a29e-3c48d6898b60",angleX:0,angleY:355.68,angleZ:0},{id:"9466d213-2ec6-4a0c-b257-264b7c5b2797",angleX:0,angleY:32.4,angleZ:0},{id:"53a62974-f116-49a2-88d3-efcfe96fc4ab",angleX:0,angleY:0,angleZ:0},{id:"87784aaf-5662-48f9-9771-a3371486e28b",angleX:0,angleY:331.56,angleZ:0},{id:"738a8817-f881-459b-a16c-47cf01a7f612",angleX:345.6,angleY:8.28,angleZ:6.12},{id:"52ff2d70-9eb4-4d1b-bd25-f3a061172e9e",angleX:341.28,angleY:39.6,angleZ:0},{id:"732a5441-b579-45d8-bb47-ce6cb9204142",angleX:0,angleY:246.6,angleZ:0},{id:"548f3fca-5f47-475d-8e17-df862c021869",angleX:173.88,angleY:360,angleZ:176.04},{id:"3c49904f-d56d-43eb-aed5-a046d04c1d72",angleX:357.12,angleY:132.84,angleZ:345.24},{id:"7e6b97e5-8f16-4bc4-a845-b81530026699",angleX:0,angleY:345.96,angleZ:0},{id:"f1bdd3a8-16fd-4069-a006-4a37968be2a0",angleX:0,angleY:304.92,angleZ:0},{id:"6c4cf0b4-5059-4592-aec7-11e860f5bf85",angleX:0,angleY:247.68,angleZ:0},{id:"46f5624e-9841-4749-86e2-85193657857e",angleX:355.68,angleY:320.04,angleZ:9.36},{id:"a1fa3281-c7dc-4453-8417-5e18c30ef06b",angleX:0,angleY:210.24,angleZ:0},{id:"06cd3fb7-8ce3-4efa-89b6-1c9d7a651978",angleX:0,angleY:201.96,angleZ:0},{id:"e4f94ef3-6d3c-45ea-b3f1-ab854e55da44",angleX:0,angleY:291.24,angleZ:0},{id:"f62ea0a7-b0d8-4c1b-bbbf-d1190a640637",angleX:0,angleY:186.48,angleZ:0},{id:"fac81733-4380-41d7-9410-61a991769f5f",angleX:0,angleY:22.68,angleZ:0},{id:"964963f0-d617-441d-8c8c-4bc9f58cc38d",angleX:0,angleY:16.2,angleZ:0},{id:"0c479c09-d52a-4eeb-bbbb-d2c39ff04bd1",angleX:0,angleY:322.56,angleZ:0},{id:"32c361b4-e67a-4a37-aa4a-b32aea31279c",angleX:0,angleY:329.04,angleZ:0},{id:"e269d548-00fd-41ac-8b4e-a38656b52262",angleX:0,angleY:112.32,angleZ:0},{id:"39e8583f-e24d-4fcd-ac90-16d5213012d2",angleX:0,angleY:321.48,angleZ:0},{id:"13b671e4-cb8c-44ac-bcb9-bc12fc2d97ba",angleX:0,angleY:108.36,angleZ:0},{id:"209e827d-b657-4a90-9196-b9f2454ee484",angleX:0,angleY:129.24,angleZ:0},{id:"b4f0d2f0-8a28-4942-b344-647a0b3d8ef0",angleX:0,angleY:137.52,angleZ:0},{id:"797b18b2-db96-4410-9ce3-f57844fba029",angleX:0,angleY:151.2,angleZ:0},{id:"8f9bdb58-6a6a-4be4-938e-29866dff2ab8",angleX:0,angleY:149.76,angleZ:0},{id:"24689de3-06d3-44e4-a64e-69b2e14377c1",angleX:341.64,angleY:70.56,angleZ:0},{id:"521aa3d7-3871-44f0-aa8e-4eb3ff143cae",angleX:0,angleY:204.12,angleZ:0},{id:"d109c653-fe9b-4313-96c9-53309d3d3fa0",angleX:0,angleY:198,angleZ:0},{id:"8689cc21-082f-4586-b70d-91d041c75348",angleX:352.08,angleY:113.04,angleZ:0},{id:"7733e3c3-c2f0-484a-ab9d-565b112b14e1",angleX:0,angleY:85.32,angleZ:0},{id:"cca83fed-9f35-40b7-9481-6c1f2d40350a",angleX:0,angleY:110.16,angleZ:0},{id:"42cf6d97-4e69-4cb1-9f54-3d4f2c4ffb48",angleX:0,angleY:200.16,angleZ:0},{id:"0e8f41bc-3670-4084-a702-c1b7a74ef8e4",angleX:0,angleY:226.8,angleZ:0},{id:"3e0cb013-d3db-45c2-a1a7-1b5088c7b2a4",angleX:0,angleY:186.12,angleZ:0},{id:"4096a3d2-e64d-4d70-b5af-1be812ec6db1",angleX:0,angleY:236.52,angleZ:0},{id:"a77c94b7-59dd-439b-b533-da692a05c496",angleX:0,angleY:222.12,angleZ:0},{id:"647f9c34-dbb8-47bc-ad92-a31ed7648688",angleX:0,angleY:10.08,angleZ:0},{id:"cae92209-9810-4c7d-a1ca-b62f2c66508d",angleX:0,angleY:199.8,angleZ:0},{id:"ca6c5a7b-249f-4486-953d-bfed218fd0df",angleX:347.4,angleY:60.12,angleZ:0},{id:"cc3a5f84-16d8-4486-b2d1-b3b11f5f3c93",angleX:0,angleY:163.8,angleZ:343.8},{id:"0886930d-5806-4c8a-8dba-a325ba79904c",angleX:0,angleY:244.8,angleZ:0},{id:"0d7cb416-cbdb-4e5d-8eb9-abf16f22c29e",angleX:0,angleY:133.56,angleZ:0},{id:"f3091844-c9bf-4018-a791-37441fdeb4dd",angleX:0,angleY:262.8,angleZ:0},{id:"9a16c3a5-7f2a-435f-b403-cdd5ed6fb094",angleX:7.56,angleY:118.44,angleZ:347.04},{id:"404ed5e0-e003-49cf-abe4-95f16ede434c",angleX:0,angleY:202.32,angleZ:0},{id:"96622d93-ea10-4d9f-8596-0960c78dea6f",angleX:0,angleY:127.44,angleZ:0},{id:"5bb02ad8-fc89-4dcb-994e-cc73939957ef",angleX:0,angleY:32.4,angleZ:0},{id:"03b6adf5-2b99-4537-b29a-05cacdecebce",angleX:0,angleY:112.32,angleZ:0},{id:"2a027938-9ad5-4ac6-8193-03c73558cdc8",angleX:0,angleY:101.88,angleZ:0},{id:"0135c15a-b396-4717-85c8-fc3335c8f8df",angleX:0,angleY:291.24,angleZ:0},{id:"e8847b7b-2831-4db7-9574-55727f5a7aa7",angleX:0,angleY:316.44,angleZ:0},{id:"485815b0-9d07-4199-9980-27e44efa470d",angleX:337.68,angleY:32.4,angleZ:0},{id:"28c3186f-5308-4ee5-ae23-708af9a54054",angleX:0,angleY:190.08,angleZ:0},{id:"16e3e9b5-63f8-43c0-9a30-414982aabcb5",angleX:0,angleY:197.64,angleZ:0},{id:"b229735b-eebc-4ca0-a05d-d03898945a06",angleX:355.68,angleY:346.68,angleZ:0},{id:"37ebed5b-2c90-4cf8-8d3c-d90d06b2eac7",angleX:0,angleY:230.4,angleZ:0},{id:"b13be940-4086-4e67-be73-ad8d9284a773",angleX:20.16,angleY:216.36,angleZ:6.12},{id:"7312de97-5ec0-4334-b344-514d8b8b4ea0",angleX:0,angleY:293.4,angleZ:0},{id:"684248d7-5f5c-4ba5-ae3e-c959aeb1b149",angleX:0,angleY:302.4,angleZ:0},{id:"613d8aec-b59b-450c-977b-c9f4a02174ad",angleX:187.92,angleY:246.6,angleZ:172.08},{id:"a331bf7f-a069-4064-853d-747fa9e8b90d",angleX:360,angleY:0,angleZ:14.04},{id:"81b0ca7b-de78-4b8e-9b20-6e27e74b0f39",angleX:0,angleY:0,angleZ:0},{id:"2590e02e-1d6a-49b5-a613-f274083a8ffe",angleX:0,angleY:186.12,angleZ:0},{id:"28c9d170-19ce-48af-95a6-0f5743c3c865",angleX:0,angleY:32.4,angleZ:0},{id:"19ec34f2-7fc6-41a3-b591-7348af18b5c5",angleX:0,angleY:163.8,angleZ:0},{id:"606c4136-f171-4635-8a3c-50af1ee236ae",angleX:0,angleY:0,angleZ:0},{id:"081d0301-7bb6-4319-8b7c-44fdd128c085",angleX:0,angleY:41.4,angleZ:0},{id:"2e08194d-077f-4a22-9e1e-447941e4aa2f",angleX:0,angleY:90,angleZ:0},{id:"5a3bf5a4-16b9-408a-84c9-57867e488296",angleX:10.44,angleY:147.6,angleZ:0},{id:"f70cf0c7-37fe-4194-835d-eb0e06c6ee7b",angleX:0,angleY:330.84,angleZ:13.32},{id:"63dc25ea-86af-4ae9-9eb7-0787aec7bf74",angleX:7.56,angleY:240.48,angleZ:0},{id:"fa637666-2dee-4e8b-bb70-6fccc316941d",angleX:0,angleY:311.4,angleZ:0},{id:"9f642f15-825c-4ad3-a6f5-4965b25e1469",angleX:10.44,angleY:165.24,angleZ:346.68},{id:"f7550f0c-3c2c-4bc1-9e8a-52719f8f076f",angleX:0,angleY:222.84,angleZ:0},{id:"3dd075e9-d1ca-4323-88dd-259738a8cae5",angleX:0,angleY:253.8,angleZ:0},{id:"0bec715c-685e-4250-90d8-ae40c987c010",angleX:0,angleY:0,angleZ:0},{id:"8a207fca-bd8d-4f56-b26a-ce0b270b4371",angleX:0,angleY:29.16,angleZ:0},{id:"e10acd49-dd03-4fb4-acef-10435b24a64e",angleX:0,angleY:30.24,angleZ:14.04},{id:"e6df18b4-5166-4c77-9d66-06316208d449",angleX:0,angleY:0,angleZ:0},{id:"233852b2-f212-40d2-ba60-9339b92902a3",angleX:0,angleY:253.8,angleZ:0},{id:"987baf1c-6b57-46e9-ba9a-d9d7f4c41ea0",angleX:0,angleY:262.8,angleZ:0},{id:"91464f1d-45dc-4751-9ed6-d5eff8912f66",angleX:0,angleY:320.04,angleZ:0},{id:"0234a5bf-1c24-40a7-883a-fc429fa08eef",angleX:5.4,angleY:231.84,angleZ:0},{id:"d457d19c-169f-48a8-a0c8-e66b8615be4f",angleX:10.44,angleY:165.24,angleZ:0},{id:"2468432f-2739-4043-9e94-6c5fef6af28e",angleX:6.12,angleY:147.6,angleZ:0},{id:"43f2dbc9-2db3-4cdc-8c3e-7ce1cb4bf010",angleX:0,angleY:209.52,angleZ:346.68},{id:"89089f0d-3d63-48e2-8e5c-77029069ccea",angleX:0,angleY:37.08,angleZ:0},{id:"2f2a9e8b-c465-43de-9cb5-a6abf447012b",angleX:0,angleY:81.36,angleZ:0},{id:"27b8300c-db8e-4e2b-bbea-f773ead10e46",angleX:0,angleY:159.84,angleZ:0},{id:"da1159fb-7014-4242-a12c-1fb8da74321f",angleX:0,angleY:0,angleZ:0},{id:"4848631b-2d8a-418a-b144-ae5c28b3305b",angleX:0,angleY:32.4,angleZ:0},{id:"edc0a62a-c02b-439e-aef2-bf0a169e4fe5",angleX:0,angleY:163.8,angleZ:0},{id:"e01930f4-2845-42a5-bc5e-b97683589e8b",angleX:345.6,angleY:29.16,angleZ:0},{id:"d8c5ffa2-e8f5-4d2d-9e87-c7dbd667a160",angleX:360,angleY:0,angleZ:20.88},{id:"5d98df17-fb2f-4be4-a236-f0a11ac9dffb",angleX:0,angleY:307.08,angleZ:0},{id:"ef90d3ac-d02d-43d7-ae76-22ef77ce984b",angleX:349.2,angleY:108.36,angleZ:351.36},{id:"d06e9149-d9ab-4134-9178-8f853234a866",angleX:18.36,angleY:198,angleZ:0},{id:"6de4190b-a079-4716-b445-da495500d147",angleX:0,angleY:220.32,angleZ:0},{id:"9af60c8c-6af8-4fd1-b2f9-05ad21d87115",angleX:0,angleY:0,angleZ:0},{id:"7fca20bb-fee8-4c98-a6ef-c5f38bf47027",angleX:0,angleY:0,angleZ:0},{id:"263f050a-2644-4e5c-ba20-0fd381ead593",angleX:0,angleY:214.2,angleZ:0},{id:"65594ba6-5a04-40f3-9432-d6124e5ffa5c",angleX:0,angleY:189.36,angleZ:0},{id:"86d310e1-28db-4afe-aaa9-7dba936cf548",angleX:0,angleY:297.72,angleZ:0},{id:"e54edefa-3fbf-4830-95b1-e094529b6914",angleX:0,angleY:0,angleZ:0},{id:"30649240-e8b2-4f08-ba7d-6de368172d76",angleX:0,angleY:74.88,angleZ:0},{id:"1a5066e4-5eaf-43cc-8892-d79d42c3bb29",angleX:0,angleY:295.2,angleZ:0},{id:"7c77deb5-726d-4089-a183-caa5cf4fd18d",angleX:0,angleY:120.96,angleZ:0},{id:"4fe64661-d64f-4367-b38c-298e20a1a90f",angleX:0,angleY:85.68,angleZ:0},{id:"655e6733-6bdf-4c79-bce0-3471608f9e89",angleX:0,angleY:127.44,angleZ:0},{id:"683152bd-96ec-4184-bb12-127e4fa7c1d5",angleX:0,angleY:192.24,angleZ:0},{id:"752c7400-0dc2-4f0d-9ce9-c2e39eea103b",angleX:0,angleY:116.64,angleZ:0},{id:"0b65ffcb-90fa-4fb6-98a4-f4b1f94c29c9",angleX:0,angleY:155.52,angleZ:0},{id:"2190cfe4-dca9-4ac8-b416-6571a1a8f232",angleX:0,angleY:143.64,angleZ:0},{id:"68e9566f-4fe8-4c5d-806f-111a39d98649",angleX:7.92,angleY:186.12,angleZ:347.76},{id:"eac96bc6-63b5-498d-89b5-a7ccb7634175",angleX:0,angleY:240.48,angleZ:0},{id:"0d7b10dc-7a69-43b2-8900-9d1cb91fc13a",angleX:0,angleY:10.08,angleZ:0},{id:"7c288b1b-5b08-436b-97c1-2c7358c3174c",angleX:0,angleY:226.44,angleZ:0},{id:"aae4245d-b43b-4e96-8985-9af33fc872fd",angleX:339.12,angleY:91.44,angleZ:0},{id:"3b4d216f-e6fc-49c2-a671-8456f091b2eb",angleX:0,angleY:205.92,angleZ:0},{id:"fbefe898-fcc9-4e3c-99b2-a4dd6a9c41d1",angleX:0,angleY:190.08,angleZ:0},{id:"2a4597a1-5d75-44a2-b82c-44c3032bd48b",angleX:0,angleY:159.84,angleZ:0},{id:"13757280-5fa3-4d28-8bd3-090995f04fa7",angleX:0,angleY:158.04,angleZ:0}],ED=`uniform samplerCube skybox;	
uniform vec3 rotationAngles;

varying vec4 coords;

// --- 回転行列を定義 ---
mat3 rotateY(float angle) {
    float s = sin(angle);
    float c = cos(angle);
    return mat3(
        c,  0, s,
        0,  1, 0,
       -s,  0, c
    );
}

mat3 rotateX(float angle) {
    float s = sin(angle);
    float c = cos(angle);
    return mat3(
        1,  0,  0,
        0,  c, -s,
        0,  s,  c
    );
}

mat3 rotateZ(float angle) {
    float s = sin(angle);
    float c = cos(angle);
    return mat3(
        c, -s,  0,
        s,  c,  0,
        0,  0,  1
    );
}

void main() {
    // X 軸を反転させた座標を基準にする
    vec3 correctedCoords = vec3(-coords.x, coords.y, coords.z);
    
    // 回転行列を適用（Y → X → Z の順）
    // Y軸から受け取る角度はマイナスにする
    mat3 rotationMatrix = rotateY(-rotationAngles.y) * rotateX(-rotationAngles.x) * rotateZ(-rotationAngles.z);
    
    // 回転を適用
    vec3 rotatedCoords = rotationMatrix * correctedCoords;
    
    // 環境マップのテクスチャを取得
    gl_FragColor = textureCube(skybox, rotatedCoords);

    #include <tonemapping_fragment>
    #include <colorspace_fragment>
}`,FD=`varying vec4 coords;

void main()	{

	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

	coords = modelMatrix * vec4( position, 1.0 );

	gl_Position = projectionMatrix * mvPosition;

}`;function TD(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Vl=1,Gl=2,bh=3,SD=4,ym=5,Nv=6378137,YD=6356752314e-3,Lv=.0066943799901413165,Wd=484813681109536e-20,St=Math.PI/2,ND=.16666666666666666,LD=.04722222222222222,PD=.022156084656084655,jt=1e-10,zr=.017453292519943295,ro=57.29577951308232,la=Math.PI/4,d0=Math.PI*2,Zr=3.14159265359,wn={};wn.greenwich=0;wn.lisbon=-9.131906111111;wn.paris=2.337229166667;wn.bogota=-74.080916666667;wn.madrid=-3.687938888889;wn.rome=12.452333333333;wn.bern=7.439583333333;wn.jakarta=106.807719444444;wn.ferro=-17.666666666667;wn.brussels=4.367975;wn.stockholm=18.058277777778;wn.athens=23.7163375;wn.oslo=10.722916666667;const QD={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Pv=/[\s_\-\/\(\)]/g;function DA(t,e){if(t[e])return t[e];for(var a=Object.keys(t),n=e.toLowerCase().replace(Pv,""),c=-1,f,u;++c<a.length;)if(f=a[c],u=f.toLowerCase().replace(Pv,""),u===n)return t[f]}function vm(t){var e={},a=t.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,x){var B=x.split("=");return B.push(!0),s[B[0].toLowerCase()]=B[1],s},{}),n,c,f,u={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*zr},lat_1:function(s){e.lat1=s*zr},lat_2:function(s){e.lat2=s*zr},lat_ts:function(s){e.lat_ts=s*zr},lon_0:function(s){e.long0=s*zr},lon_1:function(s){e.long1=s*zr},lon_2:function(s){e.long2=s*zr},alpha:function(s){e.alpha=parseFloat(s)*zr},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*zr},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r:function(s){e.a=e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(x){return parseFloat(x)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var x=DA(QD,s);x&&(e.to_meter=x.to_meter)},from_greenwich:function(s){e.from_greenwich=s*zr},pm:function(s){var x=DA(wn,s);e.from_greenwich=(x||parseFloat(s))*zr},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var x="ewnsud";s.length===3&&x.indexOf(s.substr(0,1))!==-1&&x.indexOf(s.substr(1,1))!==-1&&x.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(n in a)c=a[n],n in u?(f=u[n],typeof f=="function"?f(c):e[f]=c):e[n]=c;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var f0=1,bx=2,yx=3,Rg=4,vx=5,m4=-1,kD=/\s/,DD=/[A-Za-z]/,zD=/[A-Za-z84_]/,np=/[,\]]/,xx=/[\d\.E\-\+]/;function Vo(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=f0}Vo.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Rg)for(;kD.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case f0:return this.neutral(t);case bx:return this.keyword(t);case Rg:return this.quoted(t);case vx:return this.afterquote(t);case yx:return this.number(t);case m4:return}};Vo.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Rg;return}if(np.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Vo.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=f0;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=f0,this.currentObject=this.stack.pop(),this.currentObject||(this.state=m4);return}};Vo.prototype.number=function(t){if(xx.test(t)){this.word+=t;return}if(np.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Vo.prototype.quoted=function(t){if(t==='"'){this.state=vx;return}this.word+=t};Vo.prototype.keyword=function(t){if(zD.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=f0;return}if(np.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Vo.prototype.neutral=function(t){if(DD.test(t)){this.word=t,this.state=bx;return}if(t==='"'){this.word="",this.state=Rg;return}if(xx.test(t)){this.word=t,this.state=yx;return}if(np.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Vo.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===m4)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function ZD(t){var e=new Vo(t);return e.output()}function B3(t,e,a){Array.isArray(e)&&(a.unshift(e),e=null);var n=e?{}:t,c=a.reduce(function(f,u){return ch(u,f),f},n);e&&(t[e]=c)}function ch(t,e){if(!Array.isArray(t)){e[t]=!0;return}var a=t.shift();if(a==="PARAMETER"&&(a=t.shift()),t.length===1){if(Array.isArray(t[0])){e[a]={},ch(t[0],e[a]);return}e[a]=t[0];return}if(!t.length){e[a]=!0;return}if(a==="TOWGS84"){e[a]=t;return}if(a==="AXIS"){a in e||(e[a]=[]),e[a].push(t);return}Array.isArray(a)||(e[a]={});var n;switch(a){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[a]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&ch(t[2],e[a]);return;case"SPHEROID":case"ELLIPSOID":e[a]={name:t[0],a:t[1],rf:t[2]},t.length===4&&ch(t[3],e[a]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],B3(e,a,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],B3(e,a,t),e[a].type=a;return;default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return ch(t,e[a]);return B3(e,a,t)}}var HD=.017453292519943295,OD=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function XD(t,e){var a=e[0],n=e[1];!(a in t)&&n in t&&(t[a]=t[n],e.length===3&&(t[a]=e[2](t[a])))}function Js(t){return t*HD}function wx(t){for(var e=Object.keys(t),a=0,n=e.length;a<n;++a){var c=e[a];OD.indexOf(c)!==-1&&VD(t[c]),typeof t[c]=="object"&&wx(t[c])}}function VD(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var a="",n=0,c=t.AXIS.length;n<c;++n){var f=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];f[0].indexOf("north")!==-1||(f[0]==="y"||f[0]==="lat")&&f[1]==="north"?a+="n":f[0].indexOf("south")!==-1||(f[0]==="y"||f[0]==="lat")&&f[1]==="south"?a+="s":f[0].indexOf("east")!==-1||(f[0]==="x"||f[0]==="lon")&&f[1]==="east"?a+="e":(f[0].indexOf("west")!==-1||(f[0]==="x"||f[0]==="lon")&&f[1]==="west")&&(a+="w")}a.length===2&&(a+="u"),a.length===3&&(t.axis=a)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var u=t.GEOGCS;t.type==="GEOGCS"&&(u=t),u&&(u.DATUM?t.datumCode=u.DATUM.name.toLowerCase():t.datumCode=u.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),u.DATUM&&u.DATUM.SPHEROID&&(t.ellps=u.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=u.DATUM.SPHEROID.a,t.rf=parseFloat(u.DATUM.SPHEROID.rf,10)),u.DATUM&&u.DATUM.TOWGS84&&(t.datum_params=u.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function s(I){var R=t.to_meter||1;return I*R}var x=function(I){return XD(t,I)},B=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Js],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Js],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",Js],["lat0","latitude_of_origin",Js],["lat0","standard_parallel_1",Js],["lat1","standard_parallel_1",Js],["lat2","standard_parallel_2",Js],["azimuth","Azimuth"],["alpha","azimuth",Js],["srsCode","name"]];B.forEach(x),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Js(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Js(t.lat0>0?90:-90))}function Bx(t){var e=ZD(t),a=e[0],n={};return ch(e,n),wx(n),n[a]}function cn(t){var e=this;if(arguments.length===2){var a=arguments[1];typeof a=="string"?a.charAt(0)==="+"?cn[t]=vm(arguments[1]):cn[t]=Bx(arguments[1]):cn[t]=a}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(n){Array.isArray(n)?cn.apply(e,n):cn(n)});if(typeof t=="string"){if(t in cn)return cn[t]}else"EPSG"in t?cn["EPSG:"+t.EPSG]=t:"ESRI"in t?cn["ESRI:"+t.ESRI]=t:"IAU2000"in t?cn["IAU2000:"+t.IAU2000]=t:console.log(t);return}}TD(cn);function GD(t){return typeof t=="string"}function jD(t){return t in cn}var KD=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function $D(t){return KD.some(function(e){return t.indexOf(e)>-1})}var qD=["3857","900913","3785","102113"];function WD(t){var e=DA(t,"authority");if(e){var a=DA(e,"epsg");return a&&qD.indexOf(a)>-1}}function JD(t){var e=DA(t,"extension");if(e)return DA(e,"proj4")}function ez(t){return t[0]==="+"}function tz(t){if(GD(t)){if(jD(t))return cn[t];if($D(t)){var e=Bx(t);if(WD(e))return cn["EPSG:3857"];var a=JD(e);return a?vm(a):e}if(ez(t))return vm(t)}else return t}function Qv(t,e){t=t||{};var a,n;if(!e)return t;for(n in e)a=e[n],a!==void 0&&(t[n]=a);return t}function Ao(t,e,a){var n=t*e;return a/Math.sqrt(1-n*n)}function x0(t){return t<0?-1:1}function qt(t){return Math.abs(t)<=Zr?t:t-x0(t)*d0}function Ls(t,e,a){var n=t*a,c=.5*t;return n=Math.pow((1-n)/(1+n),c),Math.tan(.5*(St-e))/n}function g0(t,e){for(var a=.5*t,n,c,f=St-2*Math.atan(e),u=0;u<=15;u++)if(n=t*Math.sin(f),c=St-2*Math.atan(e*Math.pow((1-n)/(1+n),a))-f,f+=c,Math.abs(c)<=1e-10)return f;return-9999}function iz(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ao(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function az(t){var e=t.x,a=t.y;if(a*ro>90&&a*ro<-90&&e*ro>180&&e*ro<-180)return null;var n,c;if(Math.abs(Math.abs(a)-St)<=jt)return null;if(this.sphere)n=this.x0+this.a*this.k0*qt(e-this.long0),c=this.y0+this.a*this.k0*Math.log(Math.tan(la+.5*a));else{var f=Math.sin(a),u=Ls(this.e,a,f);n=this.x0+this.a*this.k0*qt(e-this.long0),c=this.y0-this.a*this.k0*Math.log(u)}return t.x=n,t.y=c,t}function rz(t){var e=t.x-this.x0,a=t.y-this.y0,n,c;if(this.sphere)c=St-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var f=Math.exp(-a/(this.a*this.k0));if(c=g0(this.e,f),c===-9999)return null}return n=qt(this.long0+e/(this.a*this.k0)),t.x=n,t.y=c,t}var nz=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const sz={init:iz,forward:az,inverse:rz,names:nz};function oz(){}function kv(t){return t}var Az=["longlat","identity"];const lz={init:oz,forward:kv,inverse:kv,names:Az};var cz=[sz,lz],V1={},Ig=[];function Cx(t,e){var a=Ig.length;return t.names?(Ig[a]=t,t.names.forEach(function(n){V1[n.toLowerCase()]=a}),this):(console.log(e),!0)}function hz(t){if(!t)return!1;var e=t.toLowerCase();if(typeof V1[e]<"u"&&Ig[V1[e]])return Ig[V1[e]]}function uz(){cz.forEach(Cx)}const dz={start:uz,add:Cx,get:hz};var Ti={};Ti.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ti.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ti.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ti.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ti.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ti.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ti.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ti.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ti.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ti.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ti.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ti.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ti.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ti.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ti.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ti.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Ti.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ti.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ti.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ti.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ti.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ti.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ti.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ti.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ti.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ti.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ti.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ti.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ti.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ti.hough={a:6378270,rf:297,ellipseName:"Hough"};Ti.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ti.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ti.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ti.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ti.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ti.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ti.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ti.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ti.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ti.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ti.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ti.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var fz=Ti.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ti.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function gz(t,e,a,n){var c=t*t,f=e*e,u=(c-f)/c,s=0;n?(t*=1-u*(ND+u*(LD+u*PD)),c=t*t,u=0):s=Math.sqrt(u);var x=(c-f)/f;return{es:u,e:s,ep2:x}}function pz(t,e,a,n,c){if(!t){var f=DA(Ti,n);f||(f=fz),t=f.a,e=f.b,a=f.rf}return a&&!e&&(e=(1-1/a)*t),(a===0||Math.abs(t-e)<jt)&&(c=!0,e=t),{a:t,b:e,rf:a,sphere:c}}var G1={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var mz in G1){var Dv=G1[mz];G1[Dv.datumName]=Dv}function _z(t,e,a,n,c,f,u){var s={};return t===void 0||t==="none"?s.datum_type=ym:s.datum_type=SD,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=Vl),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=Gl,s.datum_params[3]*=Wd,s.datum_params[4]*=Wd,s.datum_params[5]*=Wd,s.datum_params[6]=s.datum_params[6]/1e6+1)),u&&(s.datum_type=bh,s.grids=u),s.a=a,s.b=n,s.es=c,s.ep2=f,s}var Mx={};function bz(t,e){var a=new DataView(e),n=xz(a),c=wz(a,n),f=Bz(a,c,n),u={header:c,subgrids:f};return Mx[t]=u,u}function yz(t){if(t===void 0)return null;var e=t.split(",");return e.map(vz)}function vz(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Mx[t]||null,isNull:!1}}function hh(t){return t/3600*Math.PI/180}function xz(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function wz(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:xm(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function xm(t,e,a){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,a)))}function Bz(t,e,a){for(var n=176,c=[],f=0;f<e.nSubgrids;f++){var u=Mz(t,n,a),s=Rz(t,n,u,a),x=Math.round(1+(u.upperLongitude-u.lowerLongitude)/u.longitudeInterval),B=Math.round(1+(u.upperLatitude-u.lowerLatitude)/u.latitudeInterval);c.push({ll:[hh(u.lowerLongitude),hh(u.lowerLatitude)],del:[hh(u.longitudeInterval),hh(u.latitudeInterval)],lim:[x,B],count:u.gridNodeCount,cvs:Cz(s)}),n+=176+u.gridNodeCount*16}return c}function Cz(t){return t.map(function(e){return[hh(e.longitudeShift),hh(e.latitudeShift)]})}function Mz(t,e,a){return{name:xm(t,e+8,e+16).trim(),parent:xm(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,a),upperLatitude:t.getFloat64(e+88,a),lowerLongitude:t.getFloat64(e+104,a),upperLongitude:t.getFloat64(e+120,a),latitudeInterval:t.getFloat64(e+136,a),longitudeInterval:t.getFloat64(e+152,a),gridNodeCount:t.getInt32(e+168,a)}}function Rz(t,e,a,n){for(var c=e+176,f=16,u=[],s=0;s<a.gridNodeCount;s++){var x={latitudeShift:t.getFloat32(c+s*f,n),longitudeShift:t.getFloat32(c+s*f+4,n),latitudeAccuracy:t.getFloat32(c+s*f+8,n),longitudeAccuracy:t.getFloat32(c+s*f+12,n)};u.push(x)}return u}function oo(t,e){if(!(this instanceof oo))return new oo(t);e=e||function(B){if(B)throw B};var a=tz(t);if(typeof a!="object"){e("Could not parse to valid json: "+t);return}var n=oo.projections.get(a.projName);if(!n){e("Could not get projection name from: "+t);return}if(a.datumCode&&a.datumCode!=="none"){var c=DA(G1,a.datumCode);c&&(a.datum_params=a.datum_params||(c.towgs84?c.towgs84.split(","):null),a.ellps=c.ellipse,a.datumName=c.datumName?c.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var f=pz(a.a,a.b,a.rf,a.ellps,a.sphere),u=gz(f.a,f.b,f.rf,a.R_A),s=yz(a.nadgrids),x=a.datum||_z(a.datumCode,a.datum_params,f.a,f.b,u.es,u.ep2,s);Qv(this,a),Qv(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=u.es,this.e=u.e,this.ep2=u.ep2,this.datum=x,this.init(),e(null,this)}oo.projections=dz;oo.projections.start();function Iz(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Vl?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Gl?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function Rx(t,e,a){var n=t.x,c=t.y,f=t.z?t.z:0,u,s,x,B;if(c<-St&&c>-1.001*St)c=-St;else if(c>St&&c<1.001*St)c=St;else{if(c<-St)return{x:-1/0,y:-1/0,z:t.z};if(c>St)return{x:1/0,y:1/0,z:t.z}}return n>Math.PI&&(n-=2*Math.PI),s=Math.sin(c),B=Math.cos(c),x=s*s,u=a/Math.sqrt(1-e*x),{x:(u+f)*B*Math.cos(n),y:(u+f)*B*Math.sin(n),z:(u*(1-e)+f)*s}}function Ix(t,e,a,n){var c=1e-12,f=c*c,u=30,s,x,B,I,R,F,M,N,D,V,X,ee,Ae,ce=t.x,ue=t.y,oe=t.z?t.z:0,q,H,$;if(s=Math.sqrt(ce*ce+ue*ue),x=Math.sqrt(ce*ce+ue*ue+oe*oe),s/a<c){if(q=0,x/a<c)return H=St,$=-n,{x:t.x,y:t.y,z:t.z}}else q=Math.atan2(ue,ce);B=oe/x,I=s/x,R=1/Math.sqrt(1-e*(2-e)*I*I),N=I*(1-e)*R,D=B*R,Ae=0;do Ae++,M=a/Math.sqrt(1-e*D*D),$=s*N+oe*D-M*(1-e*D*D),F=e*M/(M+$),R=1/Math.sqrt(1-F*(2-F)*I*I),V=I*(1-F)*R,X=B*R,ee=X*N-V*D,N=V,D=X;while(ee*ee>f&&Ae<u);return H=Math.atan(X/Math.abs(V)),{x:q,y:H,z:$}}function Uz(t,e,a){if(e===Vl)return{x:t.x+a[0],y:t.y+a[1],z:t.z+a[2]};if(e===Gl){var n=a[0],c=a[1],f=a[2],u=a[3],s=a[4],x=a[5],B=a[6];return{x:B*(t.x-x*t.y+s*t.z)+n,y:B*(x*t.x+t.y-u*t.z)+c,z:B*(-s*t.x+u*t.y+t.z)+f}}}function Ez(t,e,a){if(e===Vl)return{x:t.x-a[0],y:t.y-a[1],z:t.z-a[2]};if(e===Gl){var n=a[0],c=a[1],f=a[2],u=a[3],s=a[4],x=a[5],B=a[6],I=(t.x-n)/B,R=(t.y-c)/B,F=(t.z-f)/B;return{x:I+x*R-s*F,y:-x*I+R+u*F,z:s*I-u*R+F}}}function M1(t){return t===Vl||t===Gl}function Fz(t,e,a){if(Iz(t,e)||t.datum_type===ym||e.datum_type===ym)return a;var n=t.a,c=t.es;if(t.datum_type===bh){var f=zv(t,!1,a);if(f!==0)return;n=Nv,c=Lv}var u=e.a,s=e.b,x=e.es;if(e.datum_type===bh&&(u=Nv,s=YD,x=Lv),c===x&&n===u&&!M1(t.datum_type)&&!M1(e.datum_type))return a;if(a=Rx(a,c,n),M1(t.datum_type)&&(a=Uz(a,t.datum_type,t.datum_params)),M1(e.datum_type)&&(a=Ez(a,e.datum_type,e.datum_params)),a=Ix(a,x,u,s),e.datum_type===bh){var B=zv(e,!0,a);if(B!==0)return}return a}function zv(t,e,a){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-a.x,y:a.y},c={x:Number.NaN,y:Number.NaN},f=[];e:for(var u=0;u<t.grids.length;u++){var s=t.grids[u];if(f.push(s.name),s.isNull){c=n;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}for(var x=s.grid.subgrids,B=0,I=x.length;B<I;B++){var R=x[B],F=(Math.abs(R.del[1])+Math.abs(R.del[0]))/1e4,M=R.ll[0]-F,N=R.ll[1]-F,D=R.ll[0]+(R.lim[0]-1)*R.del[0]+F,V=R.ll[1]+(R.lim[1]-1)*R.del[1]+F;if(!(N>n.y||M>n.x||V<n.y||D<n.x)&&(c=Tz(n,e,R),!isNaN(c.x)))break e}}return isNaN(c.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*ro+" "+n.y*ro+" tried: '"+f+"'"),-1):(a.x=-c.x,a.y=c.y,0)}function Tz(t,e,a){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var c={x:t.x,y:t.y};c.x-=a.ll[0],c.y-=a.ll[1],c.x=qt(c.x-Math.PI)+Math.PI;var f=Zv(c,a);if(e){if(isNaN(f.x))return n;f.x=c.x-f.x,f.y=c.y-f.y;var u=9,s=1e-12,x,B;do{if(B=Zv(f,a),isNaN(B.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}x={x:c.x-(B.x+f.x),y:c.y-(B.y+f.y)},f.x+=x.x,f.y+=x.y}while(u--&&Math.abs(x.x)>s&&Math.abs(x.y)>s);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=qt(f.x+a.ll[0]),n.y=f.y+a.ll[1]}else isNaN(f.x)||(n.x=t.x+f.x,n.y=t.y+f.y);return n}function Zv(t,e){var a={x:t.x/e.del[0],y:t.y/e.del[1]},n={x:Math.floor(a.x),y:Math.floor(a.y)},c={x:a.x-1*n.x,y:a.y-1*n.y},f={x:Number.NaN,y:Number.NaN},u;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return f;u=n.y*e.lim[0]+n.x;var s={x:e.cvs[u][0],y:e.cvs[u][1]};u++;var x={x:e.cvs[u][0],y:e.cvs[u][1]};u+=e.lim[0];var B={x:e.cvs[u][0],y:e.cvs[u][1]};u--;var I={x:e.cvs[u][0],y:e.cvs[u][1]},R=c.x*c.y,F=c.x*(1-c.y),M=(1-c.x)*(1-c.y),N=(1-c.x)*c.y;return f.x=M*s.x+F*x.x+N*I.x+R*B.x,f.y=M*s.y+F*x.y+N*I.y+R*B.y,f}function Hv(t,e,a){var n=a.x,c=a.y,f=a.z||0,u,s,x,B={};for(x=0;x<3;x++)if(!(e&&x===2&&a.z===void 0))switch(x===0?(u=n,"ew".indexOf(t.axis[x])!==-1?s="x":s="y"):x===1?(u=c,"ns".indexOf(t.axis[x])!==-1?s="y":s="x"):(u=f,s="z"),t.axis[x]){case"e":B[s]=u;break;case"w":B[s]=-u;break;case"n":B[s]=u;break;case"s":B[s]=-u;break;case"u":a[s]!==void 0&&(B.z=u);break;case"d":a[s]!==void 0&&(B.z=-u);break;default:return null}return B}function Ux(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Sz(t){Ov(t.x),Ov(t.y)}function Ov(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Yz(t,e){return(t.datum.datum_type===Vl||t.datum.datum_type===Gl||t.datum.datum_type===bh)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Vl||e.datum.datum_type===Gl||e.datum.datum_type===bh)&&t.datumCode!=="WGS84"}function Ug(t,e,a,n){var c;Array.isArray(a)?a=Ux(a):a={x:a.x,y:a.y,z:a.z,m:a.m};var f=a.z!==void 0;if(Sz(a),t.datum&&e.datum&&Yz(t,e)&&(c=new oo("WGS84"),a=Ug(t,c,a,n),t=c),n&&t.axis!=="enu"&&(a=Hv(t,!1,a)),t.projName==="longlat")a={x:a.x*zr,y:a.y*zr,z:a.z||0};else if(t.to_meter&&(a={x:a.x*t.to_meter,y:a.y*t.to_meter,z:a.z||0}),a=t.inverse(a),!a)return;if(t.from_greenwich&&(a.x+=t.from_greenwich),a=Fz(t.datum,e.datum,a),!!a)return e.from_greenwich&&(a={x:a.x-e.from_greenwich,y:a.y,z:a.z||0}),e.projName==="longlat"?a={x:a.x*ro,y:a.y*ro,z:a.z||0}:(a=e.forward(a),e.to_meter&&(a={x:a.x/e.to_meter,y:a.y/e.to_meter,z:a.z||0})),n&&e.axis!=="enu"?Hv(e,!0,a):(a&&!f&&delete a.z,a)}var Xv=oo("WGS84");function C3(t,e,a,n){var c,f,u;return Array.isArray(a)?(c=Ug(t,e,a,n)||{x:NaN,y:NaN},a.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof c.z=="number"?[c.x,c.y,c.z].concat(a.slice(3)):[c.x,c.y,a[2]].concat(a.slice(3)):[c.x,c.y].concat(a.slice(2)):[c.x,c.y]):(f=Ug(t,e,a,n),u=Object.keys(a),u.length===2||u.forEach(function(s){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;f[s]=a[s]}),f)}function Vv(t){return t instanceof oo?t:t.oProj?t.oProj:oo(t)}function On(t,e,a){t=Vv(t);var n=!1,c;return typeof e>"u"?(e=t,t=Xv,n=!0):(typeof e.x<"u"||Array.isArray(e))&&(a=e,e=t,t=Xv,n=!0),e=Vv(e),a?C3(t,e,a):(c={forward:function(f,u){return C3(t,e,f,u)},inverse:function(f,u){return C3(e,t,f,u)}},n&&(c.oProj=e),c)}var Gv=6,Ex="AJSAJS",Fx="AFAFAF",uh=65,bn=73,rs=79,Ld=86,Pd=90;const Nz={forward:Tx,inverse:Lz,toPoint:Sx};function Tx(t,e){return e=e||5,kz(Pz({lat:t[1],lon:t[0]}),e)}function Lz(t){var e=_4(Nx(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Sx(t){var e=_4(Nx(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function M3(t){return t*(Math.PI/180)}function jv(t){return 180*(t/Math.PI)}function Pz(t){var e=t.lat,a=t.lon,n=6378137,c=.00669438,f=.9996,u,s,x,B,I,R,F,M=M3(e),N=M3(a),D,V;V=Math.floor((a+180)/6)+1,a===180&&(V=60),e>=56&&e<64&&a>=3&&a<12&&(V=32),e>=72&&e<84&&(a>=0&&a<9?V=31:a>=9&&a<21?V=33:a>=21&&a<33?V=35:a>=33&&a<42&&(V=37)),u=(V-1)*6-180+3,D=M3(u),s=c/(1-c),x=n/Math.sqrt(1-c*Math.sin(M)*Math.sin(M)),B=Math.tan(M)*Math.tan(M),I=s*Math.cos(M)*Math.cos(M),R=Math.cos(M)*(N-D),F=n*((1-c/4-3*c*c/64-5*c*c*c/256)*M-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*M)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*M)-35*c*c*c/3072*Math.sin(6*M));var X=f*x*(R+(1-B+I)*R*R*R/6+(5-18*B+B*B+72*I-58*s)*R*R*R*R*R/120)+5e5,ee=f*(F+x*Math.tan(M)*(R*R/2+(5-B+9*I+4*I*I)*R*R*R*R/24+(61-58*B+B*B+600*I-330*s)*R*R*R*R*R*R/720));return e<0&&(ee+=1e7),{northing:Math.round(ee),easting:Math.round(X),zoneNumber:V,zoneLetter:Qz(e)}}function _4(t){var e=t.northing,a=t.easting,n=t.zoneLetter,c=t.zoneNumber;if(c<0||c>60)return null;var f=.9996,u=6378137,s=.00669438,x,B=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),I,R,F,M,N,D,V,X,ee,Ae=a-5e5,ce=e;n<"N"&&(ce-=1e7),V=(c-1)*6-180+3,x=s/(1-s),D=ce/f,X=D/(u*(1-s/4-3*s*s/64-5*s*s*s/256)),ee=X+(3*B/2-27*B*B*B/32)*Math.sin(2*X)+(21*B*B/16-55*B*B*B*B/32)*Math.sin(4*X)+151*B*B*B/96*Math.sin(6*X),I=u/Math.sqrt(1-s*Math.sin(ee)*Math.sin(ee)),R=Math.tan(ee)*Math.tan(ee),F=x*Math.cos(ee)*Math.cos(ee),M=u*(1-s)/Math.pow(1-s*Math.sin(ee)*Math.sin(ee),1.5),N=Ae/(I*f);var ue=ee-I*Math.tan(ee)/M*(N*N/2-(5+3*R+10*F-4*F*F-9*x)*N*N*N*N/24+(61+90*R+298*F+45*R*R-252*x-3*F*F)*N*N*N*N*N*N/720);ue=jv(ue);var oe=(N-(1+2*R+F)*N*N*N/6+(5-2*F+28*R-3*F*F+8*x+24*R*R)*N*N*N*N*N/120)/Math.cos(ee);oe=V+jv(oe);var q;if(t.accuracy){var H=_4({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});q={top:H.lat,right:H.lon,bottom:ue,left:oe}}else q={lat:ue,lon:oe};return q}function Qz(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function kz(t,e){var a="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Dz(t.easting,t.northing,t.zoneNumber)+a.substr(a.length-5,e)+n.substr(n.length-5,e)}function Dz(t,e,a){var n=Yx(a),c=Math.floor(t/1e5),f=Math.floor(e/1e5)%20;return zz(c,f,n)}function Yx(t){var e=t%Gv;return e===0&&(e=Gv),e}function zz(t,e,a){var n=a-1,c=Ex.charCodeAt(n),f=Fx.charCodeAt(n),u=c+t-1,s=f+e,x=!1;u>Pd&&(u=u-Pd+uh-1,x=!0),(u===bn||c<bn&&u>bn||(u>bn||c<bn)&&x)&&u++,(u===rs||c<rs&&u>rs||(u>rs||c<rs)&&x)&&(u++,u===bn&&u++),u>Pd&&(u=u-Pd+uh-1),s>Ld?(s=s-Ld+uh-1,x=!0):x=!1,(s===bn||f<bn&&s>bn||(s>bn||f<bn)&&x)&&s++,(s===rs||f<rs&&s>rs||(s>rs||f<rs)&&x)&&(s++,s===bn&&s++),s>Ld&&(s=s-Ld+uh-1);var B=String.fromCharCode(u)+String.fromCharCode(s);return B}function Nx(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,a=null,n="",c,f=0;!/[A-Z]/.test(c=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;n+=c,f++}var u=parseInt(n,10);if(f===0||f+3>e)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(f++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+t;a=t.substring(f,f+=2);for(var x=Yx(u),B=Zz(a.charAt(0),x),I=Hz(a.charAt(1),x);I<Oz(s);)I+=2e6;var R=e-f;if(R%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var F=R/2,M=0,N=0,D,V,X,ee,Ae;return F>0&&(D=1e5/Math.pow(10,F),V=t.substring(f,f+F),M=parseFloat(V)*D,X=t.substring(f+F),N=parseFloat(X)*D),ee=M+B,Ae=N+I,{easting:ee,northing:Ae,zoneLetter:s,zoneNumber:u,accuracy:D}}function Zz(t,e){for(var a=Ex.charCodeAt(e-1),n=1e5,c=!1;a!==t.charCodeAt(0);){if(a++,a===bn&&a++,a===rs&&a++,a>Pd){if(c)throw"Bad character: "+t;a=uh,c=!0}n+=1e5}return n}function Hz(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var a=Fx.charCodeAt(e-1),n=0,c=!1;a!==t.charCodeAt(0);){if(a++,a===bn&&a++,a===rs&&a++,a>Ld){if(c)throw"Bad character: "+t;a=uh,c=!0}n+=1e5}return n}function Oz(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Eh(t,e,a){if(!(this instanceof Eh))return new Eh(t,e,a);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Eh.fromMGRS=function(t){return new Eh(Sx(t))};Eh.prototype.toMGRS=function(t){return Tx([this.x,this.y],t)};var Xz=1,Vz=.25,Kv=.046875,$v=.01953125,qv=.01068115234375,Gz=.75,jz=.46875,Kz=.013020833333333334,$z=.007120768229166667,qz=.3645833333333333,Wz=.005696614583333333,Jz=.3076171875;function b4(t){var e=[];e[0]=Xz-t*(Vz+t*(Kv+t*($v+t*qv))),e[1]=t*(Gz-t*(Kv+t*($v+t*qv)));var a=t*t;return e[2]=a*(jz-t*(Kz+t*$z)),a*=t,e[3]=a*(qz-t*Wz),e[4]=a*t*Jz,e}function kh(t,e,a,n){return a*=e,e*=e,n[0]*t-a*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var eZ=20;function y4(t,e,a){for(var n=1/(1-e),c=t,f=eZ;f;--f){var u=Math.sin(c),s=1-e*u*u;if(s=(kh(c,u,Math.cos(c),a)-t)*(s*Math.sqrt(s))*n,c-=s,Math.abs(s)<jt)return c}return c}function tZ(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=b4(this.es),this.ml0=kh(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function iZ(t){var e=t.x,a=t.y,n=qt(e-this.long0),c,f,u,s=Math.sin(a),x=Math.cos(a);if(this.es){var I=x*n,R=Math.pow(I,2),F=this.ep2*Math.pow(x,2),M=Math.pow(F,2),N=Math.abs(x)>jt?Math.tan(a):0,D=Math.pow(N,2),V=Math.pow(D,2);c=1-this.es*Math.pow(s,2),I=I/Math.sqrt(c);var X=kh(a,s,x,this.en);f=this.a*(this.k0*I*(1+R/6*(1-D+F+R/20*(5-18*D+V+14*F-58*D*F+R/42*(61+179*V-V*D-479*D)))))+this.x0,u=this.a*(this.k0*(X-this.ml0+s*n*I/2*(1+R/12*(5-D+9*F+4*M+R/30*(61+V-58*D+270*F-330*D*F+R/56*(1385+543*V-V*D-3111*D))))))+this.y0}else{var B=x*Math.sin(n);if(Math.abs(Math.abs(B)-1)<jt)return 93;if(f=.5*this.a*this.k0*Math.log((1+B)/(1-B))+this.x0,u=x*Math.cos(n)/Math.sqrt(1-Math.pow(B,2)),B=Math.abs(u),B>=1){if(B-1>jt)return 93;u=0}else u=Math.acos(u);a<0&&(u=-u),u=this.a*this.k0*(u-this.lat0)+this.y0}return t.x=f,t.y=u,t}function aZ(t){var e,a,n,c,f=(t.x-this.x0)*(1/this.a),u=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+u/this.k0,a=y4(e,this.es,this.en),Math.abs(a)<St){var R=Math.sin(a),F=Math.cos(a),M=Math.abs(F)>jt?Math.tan(a):0,N=this.ep2*Math.pow(F,2),D=Math.pow(N,2),V=Math.pow(M,2),X=Math.pow(V,2);e=1-this.es*Math.pow(R,2);var ee=f*Math.sqrt(e)/this.k0,Ae=Math.pow(ee,2);e=e*M,n=a-e*Ae/(1-this.es)*.5*(1-Ae/12*(5+3*V-9*N*V+N-4*D-Ae/30*(61+90*V-252*N*V+45*X+46*N-Ae/56*(1385+3633*V+4095*X+1574*X*V)))),c=qt(this.long0+ee*(1-Ae/6*(1+2*V+N-Ae/20*(5+28*V+24*X+8*N*V+6*N-Ae/42*(61+662*V+1320*X+720*X*V))))/F)}else n=St*x0(u),c=0;else{var s=Math.exp(f/this.k0),x=.5*(s-1/s),B=this.lat0+u/this.k0,I=Math.cos(B);e=Math.sqrt((1-Math.pow(I,2))/(1+Math.pow(x,2))),n=Math.asin(e),u<0&&(n=-n),x===0&&I===0?c=0:c=qt(Math.atan2(x,I)+this.long0)}return t.x=c,t.y=n,t}var rZ=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const j1={init:tZ,forward:iZ,inverse:aZ,names:rZ};function Lx(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function xn(t,e){t=Math.abs(t),e=Math.abs(e);var a=Math.max(t,e),n=Math.min(t,e)/(a||1);return a*Math.sqrt(1+Math.pow(n,2))}function nZ(t){var e=1+t,a=e-1;return a===0?t:t*Math.log(e)/a}function sZ(t){var e=Math.abs(t);return e=nZ(e*(1+e/(xn(1,e)+1))),t<0?-e:e}function v4(t,e){for(var a=2*Math.cos(2*e),n=t.length-1,c=t[n],f=0,u;--n>=0;)u=-f+a*c+t[n],f=c,c=u;return e+u*Math.sin(2*e)}function oZ(t,e){for(var a=2*Math.cos(e),n=t.length-1,c=t[n],f=0,u;--n>=0;)u=-f+a*c+t[n],f=c,c=u;return Math.sin(e)*u}function AZ(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Px(t,e,a){for(var n=Math.sin(e),c=Math.cos(e),f=Lx(a),u=AZ(a),s=2*c*u,x=-2*n*f,B=t.length-1,I=t[B],R=0,F=0,M=0,N,D;--B>=0;)N=F,D=R,F=I,R=M,I=-N+s*F-x*R+t[B],M=-D+x*F+s*R;return s=n*u,x=c*f,[s*I-x*M,s*M+x*I]}function lZ(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(j1.init.apply(this),this.forward=j1.forward,this.inverse=j1.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),a=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),a=a*e,this.cgb[1]=a*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=a*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),a=a*e,this.cgb[2]=a*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=a*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),a=a*e,this.cgb[3]=a*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=a*(1237/630+e*(-12/5+e*(-24832/14175))),a=a*e,this.cgb[4]=a*(4174/315+e*(-144838/6237)),this.cbg[4]=a*(-734/315+e*(109598/31185)),a=a*e,this.cgb[5]=a*(601676/22275),this.cbg[5]=a*(444337/155925),a=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=a*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=a*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),a=a*e,this.utg[2]=a*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=a*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),a=a*e,this.utg[3]=a*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=a*(49561/161280+e*(-179/168+e*(6601661/7257600))),a=a*e,this.utg[4]=a*(-4583/161280+e*(108847/3991680)),this.gtu[4]=a*(34729/80640+e*(-3418889/1995840)),a=a*e,this.utg[5]=a*(-20648693/638668800),this.gtu[5]=a*(212378941/319334400);var n=v4(this.cbg,this.lat0);this.Zb=-this.Qn*(n+oZ(this.gtu,2*n))}function cZ(t){var e=qt(t.x-this.long0),a=t.y;a=v4(this.cbg,a);var n=Math.sin(a),c=Math.cos(a),f=Math.sin(e),u=Math.cos(e);a=Math.atan2(n,u*c),e=Math.atan2(f*c,xn(n,c*u)),e=sZ(Math.tan(e));var s=Px(this.gtu,2*a,2*e);a=a+s[0],e=e+s[1];var x,B;return Math.abs(e)<=2.623395162778?(x=this.a*(this.Qn*e)+this.x0,B=this.a*(this.Qn*a+this.Zb)+this.y0):(x=1/0,B=1/0),t.x=x,t.y=B,t}function hZ(t){var e=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);a=(a-this.Zb)/this.Qn,e=e/this.Qn;var n,c;if(Math.abs(e)<=2.623395162778){var f=Px(this.utg,2*a,2*e);a=a+f[0],e=e+f[1],e=Math.atan(Lx(e));var u=Math.sin(a),s=Math.cos(a),x=Math.sin(e),B=Math.cos(e);a=Math.atan2(u*B,xn(x,B*s)),e=Math.atan2(x,B*s),n=qt(e+this.long0),c=v4(this.cgb,a)}else n=1/0,c=1/0;return t.x=n,t.y=c,t}var uZ=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const K1={init:lZ,forward:cZ,inverse:hZ,names:uZ};function dZ(t,e){if(t===void 0){if(t=Math.floor((qt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var fZ="etmerc";function gZ(){var t=dZ(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*zr,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,K1.init.apply(this),this.forward=K1.forward,this.inverse=K1.inverse}var pZ=["Universal Transverse Mercator System","utm"];const mZ={init:gZ,names:pZ,dependsOn:fZ};function x4(t,e){return Math.pow((1-t)/(1+t),e)}var _Z=20;function bZ(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+la)/(Math.pow(Math.tan(.5*this.lat0+la),this.C)*x4(this.e*t,this.ratexp))}function yZ(t){var e=t.x,a=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*a+la),this.C)*x4(this.e*Math.sin(a),this.ratexp))-St,t.x=this.C*e,t}function vZ(t){for(var e=1e-14,a=t.x/this.C,n=t.y,c=Math.pow(Math.tan(.5*n+la)/this.K,1/this.C),f=_Z;f>0&&(n=2*Math.atan(c*x4(this.e*Math.sin(t.y),-.5*this.e))-St,!(Math.abs(n-t.y)<e));--f)t.y=n;return f?(t.x=a,t.y=n,t):null}const w4={init:bZ,forward:yZ,inverse:vZ};function xZ(){w4.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function wZ(t){var e,a,n,c;return t.x=qt(t.x-this.long0),w4.forward.apply(this,[t]),e=Math.sin(t.y),a=Math.cos(t.y),n=Math.cos(t.x),c=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*a*n),t.x=c*a*Math.sin(t.x),t.y=c*(this.cosc0*e-this.sinc0*a*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function BZ(t){var e,a,n,c,f;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,f=xn(t.x,t.y)){var u=2*Math.atan2(f,this.R2);e=Math.sin(u),a=Math.cos(u),c=Math.asin(a*this.sinc0+t.y*e*this.cosc0/f),n=Math.atan2(t.x*e,f*this.cosc0*a-t.y*this.sinc0*e)}else c=this.phic0,n=0;return t.x=n,t.y=c,w4.inverse.apply(this,[t]),t.x=qt(t.x+this.long0),t}var CZ=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const MZ={init:xZ,forward:wZ,inverse:BZ,names:CZ};function RZ(t,e,a){return e*=a,Math.tan(.5*(St+t))*Math.pow((1-e)/(1+e),.5*a)}function IZ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=jt&&(this.k0=.5*(1+x0(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=jt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=jt&&Math.abs(Math.cos(this.lat_ts))>jt&&(this.k0=.5*this.cons*Ao(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ls(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ao(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-St,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function UZ(t){var e=t.x,a=t.y,n=Math.sin(a),c=Math.cos(a),f,u,s,x,B,I,R=qt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=jt&&Math.abs(a+this.lat0)<=jt?(t.x=NaN,t.y=NaN,t):this.sphere?(f=2*this.k0/(1+this.sinlat0*n+this.coslat0*c*Math.cos(R)),t.x=this.a*f*c*Math.sin(R)+this.x0,t.y=this.a*f*(this.coslat0*n-this.sinlat0*c*Math.cos(R))+this.y0,t):(u=2*Math.atan(this.ssfn_(a,n,this.e))-St,x=Math.cos(u),s=Math.sin(u),Math.abs(this.coslat0)<=jt?(B=Ls(this.e,a*this.con,this.con*n),I=2*this.a*this.k0*B/this.cons,t.x=this.x0+I*Math.sin(e-this.long0),t.y=this.y0-this.con*I*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<jt?(f=2*this.a*this.k0/(1+x*Math.cos(R)),t.y=f*s):(f=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*x*Math.cos(R))),t.y=f*(this.cosX0*s-this.sinX0*x*Math.cos(R))+this.y0),t.x=f*x*Math.sin(R)+this.x0,t))}function EZ(t){t.x-=this.x0,t.y-=this.y0;var e,a,n,c,f,u=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(u/(2*this.a*this.k0));return e=this.long0,a=this.lat0,u<=jt?(t.x=e,t.y=a,t):(a=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/u),Math.abs(this.coslat0)<jt?this.lat0>0?e=qt(this.long0+Math.atan2(t.x,-1*t.y)):e=qt(this.long0+Math.atan2(t.x,t.y)):e=qt(this.long0+Math.atan2(t.x*Math.sin(s),u*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=a,t)}else if(Math.abs(this.coslat0)<=jt){if(u<=jt)return a=this.lat0,e=this.long0,t.x=e,t.y=a,t;t.x*=this.con,t.y*=this.con,n=u*this.cons/(2*this.a*this.k0),a=this.con*g0(this.e,n),e=this.con*qt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else c=2*Math.atan(u*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,u<=jt?f=this.X0:(f=Math.asin(Math.cos(c)*this.sinX0+t.y*Math.sin(c)*this.cosX0/u),e=qt(this.long0+Math.atan2(t.x*Math.sin(c),u*this.cosX0*Math.cos(c)-t.y*this.sinX0*Math.sin(c)))),a=-1*g0(this.e,Math.tan(.5*(St+f)));return t.x=e,t.y=a,t}var FZ=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const TZ={init:IZ,forward:UZ,inverse:EZ,names:FZ,ssfn_:RZ};function SZ(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),a=this.a,n=this.rf,c=1/n,f=2*c-Math.pow(c,2),u=this.e=Math.sqrt(f);this.R=this.k0*a*Math.sqrt(1-f)/(1-f*Math.pow(e,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),x=Math.log(Math.tan(Math.PI/4+t/2)),B=Math.log((1+u*e)/(1-u*e));this.K=s-this.alpha*x+this.alpha*u/2*B}function YZ(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),a=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+a)+this.K,c=2*(Math.atan(Math.exp(n))-Math.PI/4),f=this.alpha*(t.x-this.lambda0),u=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(c)+Math.cos(this.b0)*Math.cos(f))),s=Math.asin(Math.cos(this.b0)*Math.sin(c)-Math.sin(this.b0)*Math.cos(c)*Math.cos(f));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*u+this.x0,t}function NZ(t){for(var e=t.x-this.x0,a=t.y-this.y0,n=e/this.R,c=2*(Math.atan(Math.exp(a/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(c)+Math.sin(this.b0)*Math.cos(c)*Math.cos(n)),u=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(c))),s=this.lambda0+u/this.alpha,x=0,B=f,I=-1e3,R=0;Math.abs(B-I)>1e-7;){if(++R>20)return;x=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(B))/2)),I=B,B=2*Math.atan(Math.exp(x))-Math.PI/2}return t.x=s,t.y=B,t}var LZ=["somerc"];const PZ={init:SZ,forward:YZ,inverse:NZ,names:LZ};var Ah=1e-7;function QZ(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],a=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(a)!==-1}function kZ(){var t,e,a,n,c,f,u,s,x,B,I=0,R,F=0,M=0,N=0,D=0,V=0,X=0;this.no_off=QZ(this),this.no_rot="no_rot"in this;var ee=!1;"alpha"in this&&(ee=!0);var Ae=!1;if("rectified_grid_angle"in this&&(Ae=!0),ee&&(X=this.alpha),Ae&&(I=this.rectified_grid_angle*zr),ee||Ae)F=this.longc;else if(M=this.long1,D=this.lat1,N=this.long2,V=this.lat2,Math.abs(D-V)<=Ah||(t=Math.abs(D))<=Ah||Math.abs(t-St)<=Ah||Math.abs(Math.abs(this.lat0)-St)<=Ah||Math.abs(Math.abs(V)-St)<=Ah)throw new Error;var ce=1-this.es;e=Math.sqrt(ce),Math.abs(this.lat0)>jt?(s=Math.sin(this.lat0),a=Math.cos(this.lat0),t=1-this.es*s*s,this.B=a*a,this.B=Math.sqrt(1+this.es*this.B*this.B/ce),this.A=this.B*this.k0*e/t,n=this.B*e/(a*Math.sqrt(t)),c=n*n-1,c<=0?c=0:(c=Math.sqrt(c),this.lat0<0&&(c=-c)),this.E=c+=n,this.E*=Math.pow(Ls(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=c=1),ee||Ae?(ee?(R=Math.asin(Math.sin(X)/n),Ae||(I=X)):(R=I,X=Math.asin(n*Math.sin(R))),this.lam0=F-Math.asin(.5*(c-1/c)*Math.tan(R))/this.B):(f=Math.pow(Ls(this.e,D,Math.sin(D)),this.B),u=Math.pow(Ls(this.e,V,Math.sin(V)),this.B),c=this.E/f,x=(u-f)/(u+f),B=this.E*this.E,B=(B-u*f)/(B+u*f),t=M-N,t<-Math.pi?N-=d0:t>Math.pi&&(N+=d0),this.lam0=qt(.5*(M+N)-Math.atan(B*Math.tan(.5*this.B*(M-N))/x)/this.B),R=Math.atan(2*Math.sin(this.B*qt(M-this.lam0))/(c-1/c)),I=X=Math.asin(n*Math.sin(R))),this.singam=Math.sin(R),this.cosgam=Math.cos(R),this.sinrot=Math.sin(I),this.cosrot=Math.cos(I),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(X))),this.lat0<0&&(this.u_0=-this.u_0)),c=.5*R,this.v_pole_n=this.ArB*Math.log(Math.tan(la-c)),this.v_pole_s=this.ArB*Math.log(Math.tan(la+c))}function DZ(t){var e={},a,n,c,f,u,s,x,B;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-St)>jt){if(u=this.E/Math.pow(Ls(this.e,t.y,Math.sin(t.y)),this.B),s=1/u,a=.5*(u-s),n=.5*(u+s),f=Math.sin(this.B*t.x),c=(a*this.singam-f*this.cosgam)/n,Math.abs(Math.abs(c)-1)<jt)throw new Error;B=.5*this.ArB*Math.log((1-c)/(1+c)),s=Math.cos(this.B*t.x),Math.abs(s)<Ah?x=this.A*t.x:x=this.ArB*Math.atan2(a*this.cosgam+f*this.singam,s)}else B=t.y>0?this.v_pole_n:this.v_pole_s,x=this.ArB*t.y;return this.no_rot?(e.x=x,e.y=B):(x-=this.u_0,e.x=B*this.cosrot+x*this.sinrot,e.y=x*this.cosrot-B*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function zZ(t){var e,a,n,c,f,u,s,x={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(a=t.y,e=t.x):(a=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*a),c=.5*(n-1/n),f=.5*(n+1/n),u=Math.sin(this.BrA*e),s=(u*this.cosgam+c*this.singam)/f,Math.abs(Math.abs(s)-1)<jt)x.x=0,x.y=s<0?-St:St;else{if(x.y=this.E/Math.sqrt((1+s)/(1-s)),x.y=g0(this.e,Math.pow(x.y,1/this.B)),x.y===1/0)throw new Error;x.x=-this.rB*Math.atan2(c*this.cosgam-u*this.singam,Math.cos(this.BrA*e))}return x.x+=this.lam0,x}var ZZ=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const HZ={init:kZ,forward:DZ,inverse:zZ,names:ZZ};function OZ(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<jt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),a=Math.cos(this.lat1),n=Ao(this.e,e,a),c=Ls(this.e,this.lat1,e),f=Math.sin(this.lat2),u=Math.cos(this.lat2),s=Ao(this.e,f,u),x=Ls(this.e,this.lat2,f),B=Ls(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>jt?this.ns=Math.log(n/s)/Math.log(c/x):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(c,this.ns)),this.rh=this.a*this.f0*Math.pow(B,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function XZ(t){var e=t.x,a=t.y;Math.abs(2*Math.abs(a)-Math.PI)<=jt&&(a=x0(a)*(St-2*jt));var n=Math.abs(Math.abs(a)-St),c,f;if(n>jt)c=Ls(this.e,a,Math.sin(a)),f=this.a*this.f0*Math.pow(c,this.ns);else{if(n=a*this.ns,n<=0)return null;f=0}var u=this.ns*qt(e-this.long0);return t.x=this.k0*(f*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-f*Math.cos(u))+this.y0,t}function VZ(t){var e,a,n,c,f,u=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(u*u+s*s),a=1):(e=-Math.sqrt(u*u+s*s),a=-1);var x=0;if(e!==0&&(x=Math.atan2(a*u,a*s)),e!==0||this.ns>0){if(a=1/this.ns,n=Math.pow(e/(this.a*this.f0),a),c=g0(this.e,n),c===-9999)return null}else c=-St;return f=qt(x/this.ns+this.long0),t.x=f,t.y=c,t}var GZ=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const jZ={init:OZ,forward:XZ,inverse:VZ,names:GZ};function KZ(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function $Z(t){var e,a,n,c,f,u,s,x=t.x,B=t.y,I=qt(x-this.long0);return e=Math.pow((1+this.e*Math.sin(B))/(1-this.e*Math.sin(B)),this.alfa*this.e/2),a=2*(Math.atan(this.k*Math.pow(Math.tan(B/2+this.s45),this.alfa)/e)-this.s45),n=-I*this.alfa,c=Math.asin(Math.cos(this.ad)*Math.sin(a)+Math.sin(this.ad)*Math.cos(a)*Math.cos(n)),f=Math.asin(Math.cos(a)*Math.sin(n)/Math.cos(c)),u=this.n*f,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(c/2+this.s45),this.n),t.y=s*Math.cos(u)/1,t.x=s*Math.sin(u)/1,this.czech||(t.y*=-1,t.x*=-1),t}function qZ(t){var e,a,n,c,f,u,s,x,B=t.x;t.x=t.y,t.y=B,this.czech||(t.y*=-1,t.x*=-1),u=Math.sqrt(t.x*t.x+t.y*t.y),f=Math.atan2(t.y,t.x),c=f/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/u,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(c)),a=Math.asin(Math.cos(n)*Math.sin(c)/Math.cos(e)),t.x=this.long0-a/this.alfa,s=e,x=0;var I=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(x=1),s=t.y,I+=1;while(x===0&&I<15);return I>=15?null:t}var WZ=["Krovak","krovak"];const JZ={init:KZ,forward:$Z,inverse:qZ,names:WZ};function un(t,e,a,n,c){return t*c-e*Math.sin(2*c)+a*Math.sin(4*c)-n*Math.sin(6*c)}function w0(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function B0(t){return .375*t*(1+.25*t*(1+.46875*t))}function C0(t){return .05859375*t*t*(1+.75*t)}function M0(t){return t*t*t*(35/3072)}function Fh(t,e,a){var n=e*a;return t/Math.sqrt(1-n*n)}function XA(t){return Math.abs(t)<St?t:t-x0(t)*Math.PI}function Eg(t,e,a,n,c){var f,u;f=t/e;for(var s=0;s<15;s++)if(u=(t-(e*f-a*Math.sin(2*f)+n*Math.sin(4*f)-c*Math.sin(6*f)))/(e-2*a*Math.cos(2*f)+4*n*Math.cos(4*f)-6*c*Math.cos(6*f)),f+=u,Math.abs(u)<=1e-10)return f;return NaN}function eH(){this.sphere||(this.e0=w0(this.es),this.e1=B0(this.es),this.e2=C0(this.es),this.e3=M0(this.es),this.ml0=this.a*un(this.e0,this.e1,this.e2,this.e3,this.lat0))}function tH(t){var e,a,n=t.x,c=t.y;if(n=qt(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(c)*Math.sin(n)),a=this.a*(Math.atan2(Math.tan(c),Math.cos(n))-this.lat0);else{var f=Math.sin(c),u=Math.cos(c),s=Fh(this.a,this.e,f),x=Math.tan(c)*Math.tan(c),B=n*Math.cos(c),I=B*B,R=this.es*u*u/(1-this.es),F=this.a*un(this.e0,this.e1,this.e2,this.e3,c);e=s*B*(1-I*x*(1/6-(8-x+8*R)*I/120)),a=F-this.ml0+s*f/u*I*(.5+(5-x+6*R)*I/24)}return t.x=e+this.x0,t.y=a+this.y0,t}function iH(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,a=t.y/this.a,n,c;if(this.sphere){var f=a+this.lat0;n=Math.asin(Math.sin(f)*Math.cos(e)),c=Math.atan2(Math.tan(e),Math.cos(f))}else{var u=this.ml0/this.a+a,s=Eg(u,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-St)<=jt)return t.x=this.long0,t.y=St,a<0&&(t.y*=-1),t;var x=Fh(this.a,this.e,Math.sin(s)),B=x*x*x/this.a/this.a*(1-this.es),I=Math.pow(Math.tan(s),2),R=e*this.a/x,F=R*R;n=s-x*Math.tan(s)/B*R*R*(.5-(1+3*I)*R*R/24),c=R*(1-F*(I/3+(1+3*I)*I*F/15))/Math.cos(s)}return t.x=qt(c+this.long0),t.y=XA(n),t}var aH=["Cassini","Cassini_Soldner","cass"];const rH={init:eH,forward:tH,inverse:iH,names:aH};function NA(t,e){var a;return t>1e-7?(a=t*e,(1-t*t)*(e/(1-a*a)-.5/t*Math.log((1-a)/(1+a)))):2*e}var nH=1,sH=2,oH=3,AH=4;function lH(){var t=Math.abs(this.lat0);if(Math.abs(t-St)<jt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<jt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=NA(this.e,1),this.mmf=.5/(1-this.es),this.apa=_H(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=NA(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function cH(t){var e,a,n,c,f,u,s,x,B,I,R=t.x,F=t.y;if(R=qt(R-this.long0),this.sphere){if(f=Math.sin(F),I=Math.cos(F),n=Math.cos(R),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a=this.mode===this.EQUIT?1+I*n:1+this.sinph0*f+this.cosph0*I*n,a<=jt)return null;a=Math.sqrt(2/a),e=a*I*Math.sin(R),a*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*I*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(F+this.lat0)<jt)return null;a=la-F*.5,a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)),e=a*Math.sin(R),a*=n}}else{switch(s=0,x=0,B=0,n=Math.cos(R),c=Math.sin(R),f=Math.sin(F),u=NA(this.e,f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=u/this.qp,x=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:B=1+this.sinb1*s+this.cosb1*x*n;break;case this.EQUIT:B=1+x*n;break;case this.N_POLE:B=St+F,u=this.qp-u;break;case this.S_POLE:B=F-St,u=this.qp+u;break}if(Math.abs(B)<jt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:B=Math.sqrt(2/B),this.mode===this.OBLIQ?a=this.ymf*B*(this.cosb1*s-this.sinb1*x*n):a=(B=Math.sqrt(2/(1+x*n)))*s*this.ymf,e=this.xmf*B*x*c;break;case this.N_POLE:case this.S_POLE:u>=0?(e=(B=Math.sqrt(u))*c,a=n*(this.mode===this.S_POLE?B:-B)):e=a=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*a+this.y0,t}function hH(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,a=t.y/this.a,n,c,f,u,s,x,B;if(this.sphere){var I=0,R,F=0;if(R=Math.sqrt(e*e+a*a),c=R*.5,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(F=Math.sin(c),I=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(R)<=jt?0:Math.asin(a*F/R),e*=F,a=I*R;break;case this.OBLIQ:c=Math.abs(R)<=jt?this.lat0:Math.asin(I*this.sinph0+a*F*this.cosph0/R),e*=F*this.cosph0,a=(I-Math.sin(c)*this.sinph0)*R;break;case this.N_POLE:a=-a,c=St-c;break;case this.S_POLE:c-=St;break}n=a===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,a)}else{if(B=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,a*=this.dd,x=Math.sqrt(e*e+a*a),x<jt)return t.x=this.long0,t.y=this.lat0,t;u=2*Math.asin(.5*x/this.rq),f=Math.cos(u),e*=u=Math.sin(u),this.mode===this.OBLIQ?(B=f*this.sinb1+a*u*this.cosb1/x,s=this.qp*B,a=x*this.cosb1*f-a*this.sinb1*u):(B=a*u/x,s=this.qp*B,a=x*f)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),s=e*e+a*a,!s)return t.x=this.long0,t.y=this.lat0,t;B=1-s/this.qp,this.mode===this.S_POLE&&(B=-B)}n=Math.atan2(e,a),c=bH(Math.asin(B),this.apa)}return t.x=qt(this.long0+n),t.y=c,t}var uH=.3333333333333333,dH=.17222222222222222,fH=.10257936507936508,gH=.06388888888888888,pH=.0664021164021164,mH=.016415012942191543;function _H(t){var e,a=[];return a[0]=t*uH,e=t*t,a[0]+=e*dH,a[1]=e*gH,e*=t,a[0]+=e*fH,a[1]+=e*pH,a[2]=e*mH,a}function bH(t,e){var a=t+t;return t+e[0]*Math.sin(a)+e[1]*Math.sin(a+a)+e[2]*Math.sin(a+a+a)}var yH=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const vH={init:lH,forward:cH,inverse:hH,names:yH,S_POLE:nH,N_POLE:sH,EQUIT:oH,OBLIQ:AH};function zA(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function xH(){Math.abs(this.lat1+this.lat2)<jt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ao(this.e3,this.sin_po,this.cos_po),this.qs1=NA(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ao(this.e3,this.sin_po,this.cos_po),this.qs2=NA(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=NA(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>jt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function wH(t){var e=t.x,a=t.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var n=NA(this.e3,this.sin_phi),c=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,f=this.ns0*qt(e-this.long0),u=c*Math.sin(f)+this.x0,s=this.rh-c*Math.cos(f)+this.y0;return t.x=u,t.y=s,t}function BH(t){var e,a,n,c,f,u;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),c=0,e!==0&&(c=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?u=Math.asin((this.c-n*n)/(2*this.ns0)):(a=(this.c-n*n)/this.ns0,u=this.phi1z(this.e3,a)),f=qt(c/this.ns0+this.long0),t.x=f,t.y=u,t}function CH(t,e){var a,n,c,f,u,s=zA(.5*e);if(t<jt)return s;for(var x=t*t,B=1;B<=25;B++)if(a=Math.sin(s),n=Math.cos(s),c=t*a,f=1-c*c,u=.5*f*f/n*(e/(1-x)-a/f+.5/t*Math.log((1-c)/(1+c))),s=s+u,Math.abs(u)<=1e-7)return s;return null}var MH=["Albers_Conic_Equal_Area","Albers","aea"];const RH={init:xH,forward:wH,inverse:BH,names:MH,phi1z:CH};function IH(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function UH(t){var e,a,n,c,f,u,s,x,B=t.x,I=t.y;return n=qt(B-this.long0),e=Math.sin(I),a=Math.cos(I),c=Math.cos(n),u=this.sin_p14*e+this.cos_p14*a*c,f=1,u>0||Math.abs(u)<=jt?(s=this.x0+this.a*f*a*Math.sin(n)/u,x=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*a*c)/u):(s=this.x0+this.infinity_dist*a*Math.sin(n),x=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*a*c)),t.x=s,t.y=x,t}function EH(t){var e,a,n,c,f,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(c=Math.atan2(e,this.rc),a=Math.sin(c),n=Math.cos(c),u=zA(n*this.sin_p14+t.y*a*this.cos_p14/e),f=Math.atan2(t.x*a,e*this.cos_p14*n-t.y*this.sin_p14*a),f=qt(this.long0+f)):(u=this.phic0,f=0),t.x=f,t.y=u,t}var FH=["gnom"];const TH={init:IH,forward:UH,inverse:EH,names:FH};function SH(t,e){var a=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-a)<1e-6)return e<0?-1*St:St;for(var n=Math.asin(.5*e),c,f,u,s,x=0;x<30;x++)if(f=Math.sin(n),u=Math.cos(n),s=t*f,c=Math.pow(1-s*s,2)/(2*u)*(e/(1-t*t)-f/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),n+=c,Math.abs(c)<=1e-10)return n;return NaN}function YH(){this.sphere||(this.k0=Ao(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function NH(t){var e=t.x,a=t.y,n,c,f=qt(e-this.long0);if(this.sphere)n=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var u=NA(this.e,Math.sin(a));n=this.x0+this.a*this.k0*f,c=this.y0+this.a*u*.5/this.k0}return t.x=n,t.y=c,t}function LH(t){t.x-=this.x0,t.y-=this.y0;var e,a;return this.sphere?(e=qt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(a=SH(this.e,2*t.y*this.k0/this.a),e=qt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=a,t}var PH=["cea"];const QH={init:YH,forward:NH,inverse:LH,names:PH};function kH(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function DH(t){var e=t.x,a=t.y,n=qt(e-this.long0),c=XA(a-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*c,t}function zH(t){var e=t.x,a=t.y;return t.x=qt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=XA(this.lat0+(a-this.y0)/this.a),t}var ZH=["Equirectangular","Equidistant_Cylindrical","eqc"];const HH={init:kH,forward:DH,inverse:zH,names:ZH};var Wv=20;function OH(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=w0(this.es),this.e1=B0(this.es),this.e2=C0(this.es),this.e3=M0(this.es),this.ml0=this.a*un(this.e0,this.e1,this.e2,this.e3,this.lat0)}function XH(t){var e=t.x,a=t.y,n,c,f,u=qt(e-this.long0);if(f=u*Math.sin(a),this.sphere)Math.abs(a)<=jt?(n=this.a*u,c=-1*this.a*this.lat0):(n=this.a*Math.sin(f)/Math.tan(a),c=this.a*(XA(a-this.lat0)+(1-Math.cos(f))/Math.tan(a)));else if(Math.abs(a)<=jt)n=this.a*u,c=-1*this.ml0;else{var s=Fh(this.a,this.e,Math.sin(a))/Math.tan(a);n=s*Math.sin(f),c=this.a*un(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+s*(1-Math.cos(f))}return t.x=n+this.x0,t.y=c+this.y0,t}function VH(t){var e,a,n,c,f,u,s,x,B;if(n=t.x-this.x0,c=t.y-this.y0,this.sphere)if(Math.abs(c+this.a*this.lat0)<=jt)e=qt(n/this.a+this.long0),a=0;else{u=this.lat0+c/this.a,s=n*n/this.a/this.a+u*u,x=u;var I;for(f=Wv;f;--f)if(I=Math.tan(x),B=-1*(u*(x*I+1)-x-.5*(x*x+s)*I)/((x-u)/I-1),x+=B,Math.abs(B)<=jt){a=x;break}e=qt(this.long0+Math.asin(n*Math.tan(x)/this.a)/Math.sin(a))}else if(Math.abs(c+this.ml0)<=jt)a=0,e=qt(this.long0+n/this.a);else{u=(this.ml0+c)/this.a,s=n*n/this.a/this.a+u*u,x=u;var R,F,M,N,D;for(f=Wv;f;--f)if(D=this.e*Math.sin(x),R=Math.sqrt(1-D*D)*Math.tan(x),F=this.a*un(this.e0,this.e1,this.e2,this.e3,x),M=this.e0-2*this.e1*Math.cos(2*x)+4*this.e2*Math.cos(4*x)-6*this.e3*Math.cos(6*x),N=F/this.a,B=(u*(R*N+1)-N-.5*R*(N*N+s))/(this.es*Math.sin(2*x)*(N*N+s-2*u*N)/(4*R)+(u-N)*(R*M-2/Math.sin(2*x))-M),x-=B,Math.abs(B)<=jt){a=x;break}R=Math.sqrt(1-this.es*Math.pow(Math.sin(a),2))*Math.tan(a),e=qt(this.long0+Math.asin(n*R/this.a)/Math.sin(a))}return t.x=e,t.y=a,t}var GH=["Polyconic","poly"];const jH={init:OH,forward:XH,inverse:VH,names:GH};function KH(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function $H(t){var e,a=t.x,n=t.y,c=n-this.lat0,f=a-this.long0,u=c/Wd*1e-5,s=f,x=1,B=0;for(e=1;e<=10;e++)x=x*u,B=B+this.A[e]*x;var I=B,R=s,F=1,M=0,N,D,V=0,X=0;for(e=1;e<=6;e++)N=F*I-M*R,D=M*I+F*R,F=N,M=D,V=V+this.B_re[e]*F-this.B_im[e]*M,X=X+this.B_im[e]*F+this.B_re[e]*M;return t.x=X*this.a+this.x0,t.y=V*this.a+this.y0,t}function qH(t){var e,a=t.x,n=t.y,c=a-this.x0,f=n-this.y0,u=f/this.a,s=c/this.a,x=1,B=0,I,R,F=0,M=0;for(e=1;e<=6;e++)I=x*u-B*s,R=B*u+x*s,x=I,B=R,F=F+this.C_re[e]*x-this.C_im[e]*B,M=M+this.C_im[e]*x+this.C_re[e]*B;for(var N=0;N<this.iterations;N++){var D=F,V=M,X,ee,Ae=u,ce=s;for(e=2;e<=6;e++)X=D*F-V*M,ee=V*F+D*M,D=X,V=ee,Ae=Ae+(e-1)*(this.B_re[e]*D-this.B_im[e]*V),ce=ce+(e-1)*(this.B_im[e]*D+this.B_re[e]*V);D=1,V=0;var ue=this.B_re[1],oe=this.B_im[1];for(e=2;e<=6;e++)X=D*F-V*M,ee=V*F+D*M,D=X,V=ee,ue=ue+e*(this.B_re[e]*D-this.B_im[e]*V),oe=oe+e*(this.B_im[e]*D+this.B_re[e]*V);var q=ue*ue+oe*oe;F=(Ae*ue+ce*oe)/q,M=(ce*ue-Ae*oe)/q}var H=F,$=M,de=1,ge=0;for(e=1;e<=9;e++)de=de*H,ge=ge+this.D[e]*de;var ye=this.lat0+ge*Wd*1e5,we=this.long0+$;return t.x=we,t.y=ye,t}var WH=["New_Zealand_Map_Grid","nzmg"];const JH={init:KH,forward:$H,inverse:qH,names:WH};function eO(){}function tO(t){var e=t.x,a=t.y,n=qt(e-this.long0),c=this.x0+this.a*n,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return t.x=c,t.y=f,t}function iO(t){t.x-=this.x0,t.y-=this.y0;var e=qt(this.long0+t.x/this.a),a=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=a,t}var aO=["Miller_Cylindrical","mill"];const rO={init:eO,forward:tO,inverse:iO,names:aO};var nO=20;function sO(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=b4(this.es)}function oO(t){var e,a,n=t.x,c=t.y;if(n=qt(n-this.long0),this.sphere){if(!this.m)c=this.n!==1?Math.asin(this.n*Math.sin(c)):c;else for(var f=this.n*Math.sin(c),u=nO;u;--u){var s=(this.m*c+Math.sin(c)-f)/(this.m+Math.cos(c));if(c-=s,Math.abs(s)<jt)break}e=this.a*this.C_x*n*(this.m+Math.cos(c)),a=this.a*this.C_y*c}else{var x=Math.sin(c),B=Math.cos(c);a=this.a*kh(c,x,B,this.en),e=this.a*n*B/Math.sqrt(1-this.es*x*x)}return t.x=e,t.y=a,t}function AO(t){var e,a,n,c;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=zA((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=zA(Math.sin(e)/this.n)),n=qt(n+this.long0),e=XA(e)):(e=y4(t.y/this.a,this.es,this.en),c=Math.abs(e),c<St?(c=Math.sin(e),a=this.long0+t.x*Math.sqrt(1-this.es*c*c)/(this.a*Math.cos(e)),n=qt(a)):c-jt<St&&(n=this.long0)),t.x=n,t.y=e,t}var lO=["Sinusoidal","sinu"];const cO={init:sO,forward:oO,inverse:AO,names:lO};function hO(){}function uO(t){for(var e=t.x,a=t.y,n=qt(e-this.long0),c=a,f=Math.PI*Math.sin(a);;){var u=-(c+Math.sin(c)-f)/(1+Math.cos(c));if(c+=u,Math.abs(u)<jt)break}c/=2,Math.PI/2-Math.abs(a)<jt&&(n=0);var s=.900316316158*this.a*n*Math.cos(c)+this.x0,x=1.4142135623731*this.a*Math.sin(c)+this.y0;return t.x=s,t.y=x,t}function dO(t){var e,a;t.x-=this.x0,t.y-=this.y0,a=t.y/(1.4142135623731*this.a),Math.abs(a)>.999999999999&&(a=.999999999999),e=Math.asin(a);var n=qt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),a=(2*e+Math.sin(2*e))/Math.PI,Math.abs(a)>1&&(a=1);var c=Math.asin(a);return t.x=n,t.y=c,t}var fO=["Mollweide","moll"];const gO={init:hO,forward:uO,inverse:dO,names:fO};function pO(){Math.abs(this.lat1+this.lat2)<jt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=w0(this.es),this.e1=B0(this.es),this.e2=C0(this.es),this.e3=M0(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ao(this.e,this.sinphi,this.cosphi),this.ml1=un(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<jt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ao(this.e,this.sinphi,this.cosphi),this.ml2=un(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=un(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function mO(t){var e=t.x,a=t.y,n;if(this.sphere)n=this.a*(this.g-a);else{var c=un(this.e0,this.e1,this.e2,this.e3,a);n=this.a*(this.g-c)}var f=this.ns*qt(e-this.long0),u=this.x0+n*Math.sin(f),s=this.y0+this.rh-n*Math.cos(f);return t.x=u,t.y=s,t}function _O(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,a,n,c;this.ns>=0?(a=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(a=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var f=0;if(a!==0&&(f=Math.atan2(e*t.x,e*t.y)),this.sphere)return c=qt(this.long0+f/this.ns),n=XA(this.g-a/this.a),t.x=c,t.y=n,t;var u=this.g-a/this.a;return n=Eg(u,this.e0,this.e1,this.e2,this.e3),c=qt(this.long0+f/this.ns),t.x=c,t.y=n,t}var bO=["Equidistant_Conic","eqdc"];const yO={init:pO,forward:mO,inverse:_O,names:bO};function vO(){this.R=this.a}function xO(t){var e=t.x,a=t.y,n=qt(e-this.long0),c,f;Math.abs(a)<=jt&&(c=this.x0+this.R*n,f=this.y0);var u=zA(2*Math.abs(a/Math.PI));(Math.abs(n)<=jt||Math.abs(Math.abs(a)-St)<=jt)&&(c=this.x0,a>=0?f=this.y0+Math.PI*this.R*Math.tan(.5*u):f=this.y0+Math.PI*this.R*-Math.tan(.5*u));var s=.5*Math.abs(Math.PI/n-n/Math.PI),x=s*s,B=Math.sin(u),I=Math.cos(u),R=I/(B+I-1),F=R*R,M=R*(2/B-1),N=M*M,D=Math.PI*this.R*(s*(R-N)+Math.sqrt(x*(R-N)*(R-N)-(N+x)*(F-N)))/(N+x);n<0&&(D=-D),c=this.x0+D;var V=x+R;return D=Math.PI*this.R*(M*V-s*Math.sqrt((N+x)*(x+1)-V*V))/(N+x),a>=0?f=this.y0+D:f=this.y0-D,t.x=c,t.y=f,t}function wO(t){var e,a,n,c,f,u,s,x,B,I,R,F,M;return t.x-=this.x0,t.y-=this.y0,R=Math.PI*this.R,n=t.x/R,c=t.y/R,f=n*n+c*c,u=-Math.abs(c)*(1+f),s=u-2*c*c+n*n,x=-2*u+1+2*c*c+f*f,M=c*c/x+(2*s*s*s/x/x/x-9*u*s/x/x)/27,B=(u-s*s/3/x)/x,I=2*Math.sqrt(-B/3),R=3*M/B/I,Math.abs(R)>1&&(R>=0?R=1:R=-1),F=Math.acos(R)/3,t.y>=0?a=(-I*Math.cos(F+Math.PI/3)-s/3/x)*Math.PI:a=-(-I*Math.cos(F+Math.PI/3)-s/3/x)*Math.PI,Math.abs(n)<jt?e=this.long0:e=qt(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(n*n-c*c)+f*f))/2/n),t.x=e,t.y=a,t}var BO=["Van_der_Grinten_I","VanDerGrinten","vandg"];const CO={init:vO,forward:xO,inverse:wO,names:BO};function MO(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function RO(t){var e=t.x,a=t.y,n=Math.sin(t.y),c=Math.cos(t.y),f=qt(e-this.long0),u,s,x,B,I,R,F,M,N,D,V,X,ee,Ae,ce,ue,oe,q,H,$,de,ge,ye;return this.sphere?Math.abs(this.sin_p12-1)<=jt?(t.x=this.x0+this.a*(St-a)*Math.sin(f),t.y=this.y0-this.a*(St-a)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=jt?(t.x=this.x0+this.a*(St+a)*Math.sin(f),t.y=this.y0+this.a*(St+a)*Math.cos(f),t):(q=this.sin_p12*n+this.cos_p12*c*Math.cos(f),ue=Math.acos(q),oe=ue?ue/Math.sin(ue):1,t.x=this.x0+this.a*oe*c*Math.sin(f),t.y=this.y0+this.a*oe*(this.cos_p12*n-this.sin_p12*c*Math.cos(f)),t):(u=w0(this.es),s=B0(this.es),x=C0(this.es),B=M0(this.es),Math.abs(this.sin_p12-1)<=jt?(I=this.a*un(u,s,x,B,St),R=this.a*un(u,s,x,B,a),t.x=this.x0+(I-R)*Math.sin(f),t.y=this.y0-(I-R)*Math.cos(f),t):Math.abs(this.sin_p12+1)<=jt?(I=this.a*un(u,s,x,B,St),R=this.a*un(u,s,x,B,a),t.x=this.x0+(I+R)*Math.sin(f),t.y=this.y0+(I+R)*Math.cos(f),t):(F=n/c,M=Fh(this.a,this.e,this.sin_p12),N=Fh(this.a,this.e,n),D=Math.atan((1-this.es)*F+this.es*M*this.sin_p12/(N*c)),V=Math.atan2(Math.sin(f),this.cos_p12*Math.tan(D)-this.sin_p12*Math.cos(f)),V===0?H=Math.asin(this.cos_p12*Math.sin(D)-this.sin_p12*Math.cos(D)):Math.abs(Math.abs(V)-Math.PI)<=jt?H=-Math.asin(this.cos_p12*Math.sin(D)-this.sin_p12*Math.cos(D)):H=Math.asin(Math.sin(f)*Math.cos(D)/Math.sin(V)),X=this.e*this.sin_p12/Math.sqrt(1-this.es),ee=this.e*this.cos_p12*Math.cos(V)/Math.sqrt(1-this.es),Ae=X*ee,ce=ee*ee,$=H*H,de=$*H,ge=de*H,ye=ge*H,ue=M*H*(1-$*ce*(1-ce)/6+de/8*Ae*(1-2*ce)+ge/120*(ce*(4-7*ce)-3*X*X*(1-7*ce))-ye/48*Ae),t.x=this.x0+ue*Math.sin(V),t.y=this.y0+ue*Math.cos(V),t))}function IO(t){t.x-=this.x0,t.y-=this.y0;var e,a,n,c,f,u,s,x,B,I,R,F,M,N,D,V,X,ee,Ae,ce,ue,oe,q,H;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*St*this.a?void 0:(a=e/this.a,n=Math.sin(a),c=Math.cos(a),f=this.long0,Math.abs(e)<=jt?u=this.lat0:(u=zA(c*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-St,Math.abs(s)<=jt?this.lat0>=0?f=qt(this.long0+Math.atan2(t.x,-t.y)):f=qt(this.long0-Math.atan2(-t.x,t.y)):f=qt(this.long0+Math.atan2(t.x*n,e*this.cos_p12*c-t.y*this.sin_p12*n))),t.x=f,t.y=u,t)):(x=w0(this.es),B=B0(this.es),I=C0(this.es),R=M0(this.es),Math.abs(this.sin_p12-1)<=jt?(F=this.a*un(x,B,I,R,St),e=Math.sqrt(t.x*t.x+t.y*t.y),M=F-e,u=Eg(M/this.a,x,B,I,R),f=qt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=f,t.y=u,t):Math.abs(this.sin_p12+1)<=jt?(F=this.a*un(x,B,I,R,St),e=Math.sqrt(t.x*t.x+t.y*t.y),M=e-F,u=Eg(M/this.a,x,B,I,R),f=qt(this.long0+Math.atan2(t.x,t.y)),t.x=f,t.y=u,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),V=Math.atan2(t.x,t.y),N=Fh(this.a,this.e,this.sin_p12),X=Math.cos(V),ee=this.e*this.cos_p12*X,Ae=-ee*ee/(1-this.es),ce=3*this.es*(1-Ae)*this.sin_p12*this.cos_p12*X/(1-this.es),ue=e/N,oe=ue-Ae*(1+Ae)*Math.pow(ue,3)/6-ce*(1+3*Ae)*Math.pow(ue,4)/24,q=1-Ae*oe*oe/2-ue*oe*oe*oe/6,D=Math.asin(this.sin_p12*Math.cos(oe)+this.cos_p12*Math.sin(oe)*X),f=qt(this.long0+Math.asin(Math.sin(V)*Math.sin(oe)/Math.cos(D))),H=Math.sin(D),u=Math.atan2((H-this.es*q*this.sin_p12)*Math.tan(D),H*(1-this.es)),t.x=f,t.y=u,t))}var UO=["Azimuthal_Equidistant","aeqd"];const EO={init:MO,forward:RO,inverse:IO,names:UO};function FO(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function TO(t){var e,a,n,c,f,u,s,x,B=t.x,I=t.y;return n=qt(B-this.long0),e=Math.sin(I),a=Math.cos(I),c=Math.cos(n),u=this.sin_p14*e+this.cos_p14*a*c,f=1,(u>0||Math.abs(u)<=jt)&&(s=this.a*f*a*Math.sin(n),x=this.y0+this.a*f*(this.cos_p14*e-this.sin_p14*a*c)),t.x=s,t.y=x,t}function SO(t){var e,a,n,c,f,u,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),a=zA(e/this.a),n=Math.sin(a),c=Math.cos(a),u=this.long0,Math.abs(e)<=jt?(s=this.lat0,t.x=u,t.y=s,t):(s=zA(c*this.sin_p14+t.y*n*this.cos_p14/e),f=Math.abs(this.lat0)-St,Math.abs(f)<=jt?(this.lat0>=0?u=qt(this.long0+Math.atan2(t.x,-t.y)):u=qt(this.long0-Math.atan2(-t.x,t.y)),t.x=u,t.y=s,t):(u=qt(this.long0+Math.atan2(t.x*n,e*this.cos_p14*c-t.y*this.sin_p14*n)),t.x=u,t.y=s,t))}var YO=["ortho"];const NO={init:FO,forward:TO,inverse:SO,names:YO};var Za={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ca={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function LO(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=St-la/2?this.face=Za.TOP:this.lat0<=-(St-la/2)?this.face=Za.BOTTOM:Math.abs(this.long0)<=la?this.face=Za.FRONT:Math.abs(this.long0)<=St+la?this.face=this.long0>0?Za.RIGHT:Za.LEFT:this.face=Za.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function PO(t){var e={x:0,y:0},a,n,c,f,u,s,x={value:0};if(t.x-=this.long0,this.es!==0?a=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):a=t.y,n=t.x,this.face===Za.TOP)f=St-a,n>=la&&n<=St+la?(x.value=ca.AREA_0,c=n-St):n>St+la||n<=-(St+la)?(x.value=ca.AREA_1,c=n>0?n-Zr:n+Zr):n>-(St+la)&&n<=-la?(x.value=ca.AREA_2,c=n+St):(x.value=ca.AREA_3,c=n);else if(this.face===Za.BOTTOM)f=St+a,n>=la&&n<=St+la?(x.value=ca.AREA_0,c=-n+St):n<la&&n>=-la?(x.value=ca.AREA_1,c=-n):n<-la&&n>=-(St+la)?(x.value=ca.AREA_2,c=-n-St):(x.value=ca.AREA_3,c=n>0?-n+Zr:-n-Zr);else{var B,I,R,F,M,N,D;this.face===Za.RIGHT?n=yh(n,+St):this.face===Za.BACK?n=yh(n,3.14159265359):this.face===Za.LEFT&&(n=yh(n,-St)),F=Math.sin(a),M=Math.cos(a),N=Math.sin(n),D=Math.cos(n),B=M*D,I=M*N,R=F,this.face===Za.FRONT?(f=Math.acos(B),c=R1(f,R,I,x)):this.face===Za.RIGHT?(f=Math.acos(I),c=R1(f,R,-B,x)):this.face===Za.BACK?(f=Math.acos(-B),c=R1(f,R,-I,x)):this.face===Za.LEFT?(f=Math.acos(-I),c=R1(f,R,B,x)):(f=c=0,x.value=ca.AREA_0)}return s=Math.atan(12/Zr*(c+Math.acos(Math.sin(c)*Math.cos(la))-St)),u=Math.sqrt((1-Math.cos(f))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(c))))),x.value===ca.AREA_1?s+=St:x.value===ca.AREA_2?s+=Zr:x.value===ca.AREA_3&&(s+=1.5*Zr),e.x=u*Math.cos(s),e.y=u*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function QO(t){var e={lam:0,phi:0},a,n,c,f,u,s,x,B,I,R={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),a=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?R.value=ca.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(R.value=ca.AREA_1,a-=St):t.x<0&&-t.x>=Math.abs(t.y)?(R.value=ca.AREA_2,a=a<0?a+Zr:a-Zr):(R.value=ca.AREA_3,a+=St),I=Zr/12*Math.tan(a),u=Math.sin(I)/(Math.cos(I)-1/Math.sqrt(2)),s=Math.atan(u),c=Math.cos(a),f=Math.tan(n),x=1-c*c*f*f*(1-Math.cos(Math.atan(1/Math.cos(s)))),x<-1?x=-1:x>1&&(x=1),this.face===Za.TOP)B=Math.acos(x),e.phi=St-B,R.value===ca.AREA_0?e.lam=s+St:R.value===ca.AREA_1?e.lam=s<0?s+Zr:s-Zr:R.value===ca.AREA_2?e.lam=s-St:e.lam=s;else if(this.face===Za.BOTTOM)B=Math.acos(x),e.phi=B-St,R.value===ca.AREA_0?e.lam=-s+St:R.value===ca.AREA_1?e.lam=-s:R.value===ca.AREA_2?e.lam=-s-St:e.lam=s<0?-s-Zr:-s+Zr;else{var F,M,N;F=x,I=F*F,I>=1?N=0:N=Math.sqrt(1-I)*Math.sin(s),I+=N*N,I>=1?M=0:M=Math.sqrt(1-I),R.value===ca.AREA_1?(I=M,M=-N,N=I):R.value===ca.AREA_2?(M=-M,N=-N):R.value===ca.AREA_3&&(I=M,M=N,N=-I),this.face===Za.RIGHT?(I=F,F=-M,M=I):this.face===Za.BACK?(F=-F,M=-M):this.face===Za.LEFT&&(I=F,F=M,M=-I),e.phi=Math.acos(-N)-St,e.lam=Math.atan2(M,F),this.face===Za.RIGHT?e.lam=yh(e.lam,-St):this.face===Za.BACK?e.lam=yh(e.lam,-3.14159265359):this.face===Za.LEFT&&(e.lam=yh(e.lam,+St))}if(this.es!==0){var D,V,X;D=e.phi<0?1:0,V=Math.tan(e.phi),X=this.b/Math.sqrt(V*V+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-X*X)/(this.one_minus_f*X)),D&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function R1(t,e,a,n){var c;return t<jt?(n.value=ca.AREA_0,c=0):(c=Math.atan2(e,a),Math.abs(c)<=la?n.value=ca.AREA_0:c>la&&c<=St+la?(n.value=ca.AREA_1,c-=St):c>St+la||c<=-(St+la)?(n.value=ca.AREA_2,c=c>=0?c-Zr:c+Zr):(n.value=ca.AREA_3,c+=St)),c}function yh(t,e){var a=t+e;return a<-3.14159265359?a+=d0:a>3.14159265359&&(a-=d0),a}var kO=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const DO={init:LO,forward:PO,inverse:QO,names:kO};var wm=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Qd=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Qx=.8487,kx=1.3523,Dx=ro/5,zO=1/Dx,dh=18,Fg=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},ZO=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function HO(t,e,a,n){for(var c=e;n;--n){var f=t(c);if(c-=f,Math.abs(f)<a)break}return c}function OO(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function XO(t){var e=qt(t.x-this.long0),a=Math.abs(t.y),n=Math.floor(a*Dx);n<0?n=0:n>=dh&&(n=dh-1),a=ro*(a-zO*n);var c={x:Fg(wm[n],a)*e,y:Fg(Qd[n],a)};return t.y<0&&(c.y=-c.y),c.x=c.x*this.a*Qx+this.x0,c.y=c.y*this.a*kx+this.y0,c}function VO(t){var e={x:(t.x-this.x0)/(this.a*Qx),y:Math.abs(t.y-this.y0)/(this.a*kx)};if(e.y>=1)e.x/=wm[dh][0],e.y=t.y<0?-St:St;else{var a=Math.floor(e.y*dh);for(a<0?a=0:a>=dh&&(a=dh-1);;)if(Qd[a][0]>e.y)--a;else if(Qd[a+1][0]<=e.y)++a;else break;var n=Qd[a],c=5*(e.y-n[0])/(Qd[a+1][0]-n[0]);c=HO(function(f){return(Fg(n,f)-e.y)/ZO(n,f)},c,jt,100),e.x/=Fg(wm[a],c),e.y=(5*a+c)*zr,t.y<0&&(e.y=-e.y)}return e.x=qt(e.x+this.long0),e}var GO=["Robinson","robin"];const jO={init:OO,forward:XO,inverse:VO,names:GO};function KO(){this.name="geocent"}function $O(t){var e=Rx(t,this.es,this.a);return e}function qO(t){var e=Ix(t,this.es,this.a,this.b);return e}var WO=["Geocentric","geocentric","geocent","Geocent"];const JO={init:KO,forward:$O,inverse:qO,names:WO};var $r={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},xd={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function eX(){if(Object.keys(xd).forEach((function(a){if(typeof this[a]>"u")this[a]=xd[a].def;else{if(xd[a].num&&isNaN(this[a]))throw new Error("Invalid parameter value, must be numeric "+a+" = "+this[a]);xd[a].num&&(this[a]=parseFloat(this[a]))}xd[a].degrees&&(this[a]=this[a]*zr)}).bind(this)),Math.abs(Math.abs(this.lat0)-St)<jt?this.mode=this.lat0<0?$r.S_POLE:$r.N_POLE:Math.abs(this.lat0)<jt?this.mode=$r.EQUIT:(this.mode=$r.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function tX(t){t.x-=this.long0;var e=Math.sin(t.y),a=Math.cos(t.y),n=Math.cos(t.x),c,f;switch(this.mode){case $r.OBLIQ:f=this.sinph0*e+this.cosph0*a*n;break;case $r.EQUIT:f=a*n;break;case $r.S_POLE:f=-e;break;case $r.N_POLE:f=e;break}switch(f=this.pn1/(this.p-f),c=f*a*Math.sin(t.x),this.mode){case $r.OBLIQ:f*=this.cosph0*e-this.sinph0*a*n;break;case $r.EQUIT:f*=e;break;case $r.N_POLE:f*=-(a*n);break;case $r.S_POLE:f*=a*n;break}var u,s;return u=f*this.cg+c*this.sg,s=1/(u*this.sw*this.h1+this.cw),c=(c*this.cg-f*this.sg)*this.cw*s,f=u*s,t.x=c*this.a,t.y=f*this.a,t}function iX(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},a,n,c;c=1/(this.pn1-t.y*this.sw),a=this.pn1*t.x*c,n=this.pn1*t.y*this.cw*c,t.x=a*this.cg+n*this.sg,t.y=n*this.cg-a*this.sg;var f=xn(t.x,t.y);if(Math.abs(f)<jt)e.x=0,e.y=t.y;else{var u,s;switch(s=1-f*f*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/f+f/this.pn1),u=Math.sqrt(1-s*s),this.mode){case $r.OBLIQ:e.y=Math.asin(u*this.sinph0+t.y*s*this.cosph0/f),t.y=(u-this.sinph0*Math.sin(e.y))*f,t.x*=s*this.cosph0;break;case $r.EQUIT:e.y=Math.asin(t.y*s/f),t.y=u*f,t.x*=s;break;case $r.N_POLE:e.y=Math.asin(u),t.y=-t.y;break;case $r.S_POLE:e.y=-Math.asin(u);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var aX=["Tilted_Perspective","tpers"];const rX={init:eX,forward:tX,inverse:iX,names:aX};function nX(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function sX(t){var e=t.x,a=t.y,n,c,f,u;if(e=e-this.long0,this.shape==="ellipse"){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/xn(this.radius_p*Math.cos(a),Math.sin(a));if(c=s*Math.cos(e)*Math.cos(a),f=s*Math.sin(e)*Math.cos(a),u=s*Math.sin(a),(this.radius_g-c)*c-f*f-u*u*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=this.radius_g-c,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/xn(u,n)),t.y=this.radius_g_1*Math.atan(u/n)):(t.x=this.radius_g_1*Math.atan(f/n),t.y=this.radius_g_1*Math.atan(u/xn(f,n)))}else this.shape==="sphere"&&(n=Math.cos(a),c=Math.cos(e)*n,f=Math.sin(e)*n,u=Math.sin(a),n=this.radius_g-c,this.flip_axis?(t.x=this.radius_g_1*Math.atan(f/xn(u,n)),t.y=this.radius_g_1*Math.atan(u/n)):(t.x=this.radius_g_1*Math.atan(f/n),t.y=this.radius_g_1*Math.atan(u/xn(f,n))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function oX(t){var e=-1,a=0,n=0,c,f,u,s;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*xn(1,n)):(a=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*xn(1,a));var x=n/this.radius_p;if(c=a*a+x*x+e*e,f=2*this.radius_g*e,u=f*f-4*c*this.C,u<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-f-Math.sqrt(u))/(2*c),e=this.radius_g+s*e,a*=s,n*=s,t.x=Math.atan2(a,e),t.y=Math.atan(n*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+n*n)):(a=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),c=a*a+n*n+e*e,f=2*this.radius_g*e,u=f*f-4*c*this.C,u<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-f-Math.sqrt(u))/(2*c),e=this.radius_g+s*e,a*=s,n*=s,t.x=Math.atan2(a,e),t.y=Math.atan(n*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var AX=["Geostationary Satellite View","Geostationary_Satellite","geos"];const lX={init:nX,forward:sX,inverse:oX,names:AX};var Jd=1.340264,e0=-.081106,t0=893e-6,i0=.003796,Tg=Math.sqrt(3)/2;function cX(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function hX(t){var e=qt(t.x-this.long0),a=t.y,n=Math.asin(Tg*Math.sin(a)),c=n*n,f=c*c*c;return t.x=e*Math.cos(n)/(Tg*(Jd+3*e0*c+f*(7*t0+9*i0*c))),t.y=n*(Jd+e0*c+f*(t0+i0*c)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function uX(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,a=12,n=t.y,c,f,u,s,x,B;for(B=0;B<a&&(c=n*n,f=c*c*c,u=n*(Jd+e0*c+f*(t0+i0*c))-t.y,s=Jd+3*e0*c+f*(7*t0+9*i0*c),n-=x=u/s,!(Math.abs(x)<e));++B);return c=n*n,f=c*c*c,t.x=Tg*t.x*(Jd+3*e0*c+f*(7*t0+9*i0*c))/Math.cos(n),t.y=Math.asin(Math.sin(n)/Tg),t.x=qt(t.x+this.long0),t}var dX=["eqearth","Equal Earth","Equal_Earth"];const fX={init:cX,forward:hX,inverse:uX,names:dX};var p0=1e-10;function gX(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<p0)throw new Error;this.es?(this.en=b4(this.es),this.m1=kh(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=mX,this.forward=pX):(Math.abs(this.phi1)+p0>=St?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=bX,this.forward=_X)}function pX(t){var e=qt(t.x-(this.long0||0)),a=t.y,n,c,f;return n=this.am1+this.m1-kh(a,c=Math.sin(a),f=Math.cos(a),this.en),c=f*e/(n*Math.sqrt(1-this.es*c*c)),t.x=n*Math.sin(c),t.y=this.am1-n*Math.cos(c),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function mX(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,a,n,c;if(a=xn(t.x,t.y=this.am1-t.y),c=y4(this.am1+this.m1-a,this.es,this.en),(e=Math.abs(c))<St)e=Math.sin(c),n=a*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(c);else if(Math.abs(e-St)<=p0)n=0;else throw new Error;return t.x=qt(n+(this.long0||0)),t.y=XA(c),t}function _X(t){var e=qt(t.x-(this.long0||0)),a=t.y,n,c;return c=this.cphi1+this.phi1-a,Math.abs(c)>p0?(t.x=c*Math.sin(n=e*Math.cos(a)/c),t.y=this.cphi1-c*Math.cos(n)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function bX(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,a,n=xn(t.x,t.y=this.cphi1-t.y);if(a=this.cphi1+this.phi1-n,Math.abs(a)>St)throw new Error;return Math.abs(Math.abs(a)-St)<=p0?e=0:e=n*Math.atan2(t.x,t.y)/Math.cos(a),t.x=qt(e+(this.long0||0)),t.y=XA(a),t}var yX=["bonne","Bonne (Werner lat_1=90)"];const vX={init:gX,names:yX};function xX(t){t.Proj.projections.add(j1),t.Proj.projections.add(K1),t.Proj.projections.add(mZ),t.Proj.projections.add(MZ),t.Proj.projections.add(TZ),t.Proj.projections.add(PZ),t.Proj.projections.add(HZ),t.Proj.projections.add(jZ),t.Proj.projections.add(JZ),t.Proj.projections.add(rH),t.Proj.projections.add(vH),t.Proj.projections.add(RH),t.Proj.projections.add(TH),t.Proj.projections.add(QH),t.Proj.projections.add(HH),t.Proj.projections.add(jH),t.Proj.projections.add(JH),t.Proj.projections.add(rO),t.Proj.projections.add(cO),t.Proj.projections.add(gO),t.Proj.projections.add(yO),t.Proj.projections.add(CO),t.Proj.projections.add(EO),t.Proj.projections.add(NO),t.Proj.projections.add(DO),t.Proj.projections.add(jO),t.Proj.projections.add(JO),t.Proj.projections.add(rX),t.Proj.projections.add(lX),t.Proj.projections.add(fX),t.Proj.projections.add(vX)}On.defaultDatum="WGS84";On.Proj=oo;On.WGS84=new On.Proj("WGS84");On.Point=Eh;On.toPoint=Ux;On.defs=cn;On.nadgrid=bz;On.transform=Ug;On.mgrs=Nz;On.version="__VERSION__";xX(On);const wX=async(t,{x:e,y:a,z:n})=>{const c=await fetch("http://127.0.0.1:8000/update_angle",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,angleX:e,angleY:a,angleZ:n})});if(!c.ok){console.error("Failed to update angles:",c.status);return}const f=await c.json();console.log("Updated data:",f)},R3=t=>t*(Math.PI/180);On.defs("EPSG:6677","+proj=tmerc +lat_0=36 +lon_0=139.833333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs");var BX=ft('<div class="css-loading svelte-ms8nyw"><div class="css-spinner svelte-ms8nyw"></div></div>'),CX=(t,e)=>Ho(LA,!1),MX=ft('<div class="bg-main absolute left-4 top-[10px] z-10 flex items-center justify-center gap-2 rounded-lg p-2 text-white svelte-ms8nyw"><button class="cursor-pointer rounded-md p-2 svelte-ms8nyw"><!></button> <span class="svelte-ms8nyw"> <span class="svelte-ms8nyw"></span></span></div>'),RX=(t,e,a)=>{e(W(a).featureData)},IX=ft('<button class="css-arrow svelte-ms8nyw"><!></button>'),UX=ft('<!> <div><div class="css-control-warp svelte-ms8nyw"><div class="css-control svelte-ms8nyw"><!></div></div></div>',1),EX=ft('<div><canvas class="h-full w-full svelte-ms8nyw"></canvas> <!></div>');function FX(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(rg,"$DEBUG_MODE",a),f=()=>zi(LA,"$isStreetView",a),u="https://raw.githubusercontent.com/forestacdev/fac-cubemap-image/main/images/",s=75;new kf(0,0,0),new kf(0,10,0);let x=si(e,"cameraBearing",15),B=$t(null),I,R,F,M,N=$t(!1),D=$t(null),V=$t(null);const X={skybox:{value:null},rotationAngles:{value:new kf}},ee=new gb(10,16,16),Ae=new B7({uniforms:X,vertexShader:FD,fragmentShader:ED,side:C7,wireframe:!1});let ce,ue={x:0,y:0,z:0},oe,q,H;const $=new p4;oe=$.add(ue,"x",0,360).listen(),q=$.add(ue,"y",0,360).listen(),H=$.add(ue,"z",0,360).listen();const de={updateAngle:()=>{wX(e.streetViewPoint.properties.ID,ue)}};$.add(de,"updateAngle").name("Update Angle");let ge=[];const ye=je=>{const bt=new Y7({color:16711680,visible:!!c()});we(),je.forEach(dt=>{const _t=mb.degToRad(dt.bearing),zt=5*Math.sin(_t),Qt=-5*Math.cos(_t),Ct=new gb(.3,16,16),Zt=new pb(Ct,bt);Zt.name=dt.featureData.properties.ID,Zt.position.set(zt,0,Qt),I.add(Zt),ge.push(Zt)})},we=()=>{ge.length>0&&(ge.forEach(je=>{I.remove(je),je.geometry.dispose()}),ge=[])},Ve=new Worker(new URL(""+new URL("../workers/worker-HhaZkm9-.js",import.meta.url).href,import.meta.url),{type:"module"}),ut=async je=>{if(!je)return;st(V,je,!0),st(N,!0);const Qe=`${u}${je.properties.Name}`,tt=je.properties.ID,bt=UD.find(_t=>_t.id===tt),dt=Qe.replace(".JPG","/");Qe&&(Ve.postMessage({urls:[`${dt}face_1.jpg`,`${dt}face_2.jpg`,`${dt}face_3.jpg`,`${dt}face_4.jpg`,`${dt}face_5.jpg`,`${dt}face_6.jpg`]}),Ve.onmessage=_t=>{if(_t.data.error){console.error(_t.data.error),st(N,!1);return}const{blobUrls:zt}=_t.data;new T7().load(zt,Ct=>{Ct.colorSpace=S7,bt&&(ue.x=bt.angleX,ue.y=bt.angleY,ue.z=bt.angleZ,c()&&(oe.setValue(ue.x),q.setValue(ue.y),H.setValue(ue.z)),st(N,!1),X.skybox.value=Ct,ye(e.nextPointData))},void 0,Ct=>console.error("テクスチャの適用に失敗しました",Ct))})},at=()=>{if(!M)return;const je=window.innerWidth,Qe=window.innerHeight;M.setPixelRatio(Math.min(window.devicePixelRatio,2)),M.setSize(je,Qe),R.aspect=je/Qe,R.updateProjectionMatrix()};Lr(async()=>{if(!W(B))return;const je={width:W(B).clientWidth,height:W(B).clientHeight};if(I=new M7,R=new R7(s,je.width/je.height,.1,1e3),R.position.set(0,0,0),R.rotation.order="YXZ",I.add(R),R.aspect=je.width/je.height,R.updateProjectionMatrix(),F=new I7(R,W(B)),F.target.set(R.position.x,R.position.y,R.position.z+.01),F.dampingFactor=.1,F.rotateSpeed*=-1,F.enableDamping=!0,F.enablePan=!1,F.enableZoom=!1,F.maxZoom=1,ce=new pb(ee,Ae),I.add(ce),c()){const tt=new U7(1e3);I.add(tt);const bt=new E7(10,16,10,64);I.add(bt)}M=new F7({canvas:W(B),alpha:!0}),M.setSize(W(B).clientWidth,W(B).clientHeight),M.setPixelRatio(Math.min(window.devicePixelRatio,2)),W(B).addEventListener("resize",at),W(B).addEventListener("wheel",tt=>{R.fov+=tt.deltaY*.05*1,R.fov=Math.max(20,Math.min(100,R.fov)),R.updateProjectionMatrix()});const Qe=()=>{requestAnimationFrame(Qe),F.update();let tt=mb.radToDeg(R.rotation.y);if(tt=(tt+360)%360,!W(D))return;W(D).style.transform=`rotateZ(${tt}deg)`,x((tt+180)%360);let bt=new kf(R3(ue.x),R3(ue.y),R3(ue.z));X.rotationAngles.value=bt,M.render(I,R)};Qe()}),LA.subscribe(async je=>{at()});const et=je=>{e.setPoint(je)};Nr(()=>ut(e.streetViewPoint));var xt=EX(),Mt=Le(xt);Hn(Mt,je=>st(B,je),()=>W(B));var Yt=Oe(Mt,2);{var rt=je=>{var Qe=BX();Xe(je,Qe)},pt=je=>{var Qe=UX(),tt=kt(Qe);{var bt=Zt=>{var Ai=MX(),Nt=Le(Ai);Nt.__click=[CX,f];var Dt=Le(Nt);yi(Dt,{icon:"ep:back",class:"h-4 w-4"}),Ee(Nt);var li=Oe(Nt,2),pi=Le(li);Ha(),Ee(li),Ee(Ai),di(()=>xi(pi,`撮影日:${e.streetViewPoint.properties.Date??""}`)),Xe(Zt,Ai)};It(tt,Zt=>{e.showThreeCanvas&&Zt(bt)})}var dt=Oe(tt,2),_t=Le(dt),zt=Le(_t),Qt=Le(zt);{var Ct=Zt=>{var Ai=vi(),Nt=kt(Ai);Ea(Nt,17,()=>e.nextPointData,pr,(Dt,li)=>{var pi=IX();pi.__click=[RX,et,li];var Kt=Le(pi);const gt=ra(()=>e.showThreeCanvas?128:64),oi=ra(()=>e.showThreeCanvas?128:64);yi(Kt,{icon:"ep:arrow-up-bold",get width(){return W(gt)},get height(){return W(oi)},class:"",get style(){return`transform: rotate(${W(li).bearing??""}deg);`}}),Ee(pi),di(()=>hn(pi,`--angle: ${W(li).bearing??""}deg; --distance: ${(e.showThreeCanvas?"175":"64")??""}px;`)),Xe(Dt,pi)}),Xe(Zt,Ai)};It(Qt,Zt=>{e.nextPointData&&Zt(Ct)})}Ee(zt),Hn(zt,Zt=>st(D,Zt),()=>W(D)),Ee(_t),Ee(dt),di(()=>Hr(dt,1,`css-3d pointer-events-none absolute bottom-0 grid w-full place-items-center p-0 ${(e.showThreeCanvas?" h-[400px]":" h-full")??""}`,"svelte-ms8nyw")),Xe(je,Qe)};It(Yt,je=>{W(N)?je(rt):je(pt,!1)})}Ee(xt),di(()=>Hr(xt,1,`absolute z-10 flex overflow-hidden duration-500 ${(e.showThreeCanvas?"bottom-0 right-0 h-full w-full opacity-100":"pointer-events-none bottom-0 right-0 h-full w-full opacity-0")??""}`,"svelte-ms8nyw")),Xe(t,xt),_i(),n()}$a(["click"]);var TX=ft('<label> <input type="radio" class="hidden"></label>'),SX=ft('<div class="bg-main w-side-menu absolute z-10 flex h-full flex-col gap-2"><div class="flex items-center justify-between p-2"><span class="p-2 text-base text-lg">地形</span> <button class="bg-base rounded-full p-2"><!></button></div> <div class="c-scroll-hidden flex grow flex-col divide-y-2 overflow-y-auto overflow-x-hidden px-2 pb-4"><!> <!></div> <div class="c-fog pointer-events-none absolute bottom-0 z-10 flex h-[100px] w-full items-end justify-center pb-4 svelte-acdvpo"></div></div>');function YX(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(fb,"$showTerrainMenu",a),f=()=>zi(SA,"$isTerrain3d",a),u=[];SA.subscribe(R=>{const F=da.getMap();F&&(R?(F.setTerrain({source:"terrain",exaggeration:1}),F.easeTo({pitch:60})):(F.setTerrain(null),F.easeTo({pitch:0})))});let s=$t(Jr(io[0]));Jr([...io]),Nr(()=>{dr.url=W(s).tiles[0],dr.demType=W(s).demType,dr.sourceMinZoom=W(s).minzoom,dr.sourceMaxZoom=W(s).maxzoom,dr.bbox=W(s).bbox,dr.attribution=W(s).attribution,da.resetDem()});var x=vi(),B=kt(x);{var I=R=>{var F=SX(),M=Le(F),N=Oe(Le(M),2);N.__click=()=>{fb.set(!1)};var D=Le(N);yi(D,{icon:"material-symbols:close-rounded",class:"text-main w-4] h-4"}),Ee(N),Ee(M);var V=Oe(M,2),X=Le(V);QA(X,{label:"3D表示",get value(){return l6(),f()},set value(Ae){Ho(SA,Ae)}});var ee=Oe(X,2);Ea(ee,17,()=>io,pr,(Ae,ce)=>{var ue=TX(),oe=Le(ue),q=Oe(oe);ks(q);var H;Ee(ue),di(()=>{Hr(ue,1,`flex cursor-pointer items-center justify-between gap-2 p-2 text-left text-base ${(W(ce).id===W(s).id?"bg-accent text-main":"")??""}`),xi(oe,`${W(ce).name??""} `),ja(q,"id",W(ce).id),H!==(H=W(ce))&&(q.value=(q.__value=W(ce))==null?"":W(ce))}),Dg(u,[],q,()=>(W(ce),W(s)),$=>st(s,$)),Xe(Ae,ue)}),Ee(V),Ha(2),Ee(F),ba(3,F,()=>ds,()=>({duration:300,x:-100,opacity:0})),Xe(R,F)};It(B,R=>{c()&&R(I)})}Xe(t,x),_i(),n()}$a(["click"]);var NX=ft('<div class="bg-base absolute z-50"> </div>');function LX(t,e){mi(e,!1);const[a,n]=rr(),c=()=>zi(bN,"$tooltip",a);Xo();var f=vi(),u=kt(f);{var s=x=>{var B=NX(),I=Le(B,!0);Ee(B),di(()=>{hn(B,`top: ${c().y+10}px;left: ${c().x+10}px;`),xi(I,c().text)}),Xe(x,B)};It(u,x=>{c().visible&&x(s)})}Xe(t,f),_i(),n()}const PX=""+new URL("../assets/2001.CwL8XJaL.svg",import.meta.url).href;var QX=ft('<div class="c-loading svelte-1wdd9k2"><div class="spinner svelte-1wdd9k2"></div> <img alt="Logo" class="absolute left-0 top-0 h-full w-full" width="800" height="1052"></div>');function kX(t,e){mi(e,!0);let a=$t(!1),n=$t(null);Lr(async()=>{await N1(1500),da.onInitialized(s=>{s?s.on("load",()=>{s.resize(),st(a,!1)}):(s.resize(),st(a,!1))})});var c=vi(),f=kt(c);{var u=s=>{var x=QX(),B=Oe(Le(x),2);ja(B,"src",PX),Ee(x),Hn(x,I=>st(n,I),()=>W(n)),ba(3,x,()=>ls,()=>({duration:300})),Xe(s,x)};It(f,s=>{W(a)&&s(u)})}Xe(t,c),_i()}var DX=ft('<div class="bg-main w-side-menu flex h-full shrink-0 flex-col"></div>'),zX=ft('<div class="relative flex h-full w-full grow"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>  <!> <!> <!> <!> <!>',1);function AV(t,e){mi(e,!0);const[a,n]=rr(),c=()=>zi(to,"$selectedLayerId",a),f=()=>zi(Hl,"$isStyleEdit",a),u=()=>zi(LA,"$isStreetView",a),s=()=>zi(Pl,"$mapMode",a),x=()=>zi(Fs,"$isSideMenuType",a);let B=$t(Jr([])),I=ra(()=>[...Pg,...W(B)]),R=$t(Jr([])),F=$t(null),M=ra(()=>{const gt=W(R).find(oi=>oi.id===c());return gt&&f()?gt:null}),N=$t(""),D=$t(null),V=$t(Jr({})),X=$t(null),ee=$t(null),Ae=$t(Jr({type:"FeatureCollection",features:[]})),ce=$t(Jr({type:"FeatureCollection",features:[]})),ue=$t(0),oe=$t(!0),q=$t(!1),H=$t(null),$=$t(!1),de=$t(null);const ge=document.createElement("div");document.body.appendChild(ge),Lr(async()=>{a7(pD,{target:ge,props:{cameraBearing:W(ue),angleMarker:W(X)}}),st(Ae,await E3(`${F1}/nodes.fgb`),!0),st(ce,await E3(`${F1}/links.fgb`),!0),st(V,await fetch(`${F1}/node_connections.json`).then(gt=>gt.json()),!0),JI()});const ye=async gt=>{var fa;if(!gt)return;const oi=gt.properties.ID;WI(oi);const qi=(W(V)[oi]||[]).map(Ri=>W(Ae).features.find(ea=>ea.properties.ID===Ri)).filter(Ri=>Ri!==void 0).map(Ri=>({featureData:Ri,bearing:eB(gt,Ri)})),Si=da.getMap();Si&&(u()&&(we(Si,gt.geometry.coordinates),Si.panTo(gt.geometry.coordinates,{duration:1e3,animate:!0})),W(X)&&W(X).remove(),st(X,new Ps.Marker({element:ge,pitchAlignment:"map",rotationAlignment:"map",draggable:!0,rotation:-W(ue)+180}).setLngLat(gt.geometry.coordinates).addTo(Si),!0),W(X).togglePopup(),st(D,qi,!0),st(ee,gt,!0),(fa=W(X))==null||fa.on("dragend",()=>{var wi;const Ri=(wi=W(X))==null?void 0:wi.getLngLat();if(!Ri)return;const ea=Rb([Ri.lng,Ri.lat],W(Ae));ye(ea)}))};Nr(()=>{W(ue)&&W(X)&&W(X).setRotation(-W(ue)+180)}),da.onClick(gt=>{if(!(!gt||s()==="edit")&&W(Ae).features.length>0){const oi=Rb([gt.lngLat.lng,gt.lngLat.lat],W(Ae));tB(oi,[gt.lngLat.lng,gt.lngLat.lat],{units:"meters"})<100&&ye(oi)}});const we=(gt,oi)=>{const qi=gt.queryTerrainElevation(oi);gt.setCenterClampedToGround(!1),gt.setCenterElevation(qi??0),console.warn("elevation",qi),gt._elevationStart=gt._elevationTarget},Ve=gt=>{gt.setCenterClampedToGround(!0),gt.setCenterElevation(0),gt._elevationStart=gt._elevationTarget};LA.subscribe(async gt=>{const oi=da.getMap();oi&&(gt?(we(oi,W(ee).geometry.coordinates),oi.easeTo({center:W(ee).geometry.coordinates,zoom:20,duration:750,bearing:-W(ue)+180,pitch:65}),await N1(750),st(oe,!1),st(q,!0),await N1(500),oi.setBearing(0),oi.setPitch(0),Ho(Pl,"small")):(oi.easeTo({center:W(ee).geometry.coordinates,zoom:20,duration:0,bearing:-W(ue)+180,pitch:65}),Ho(Pl,"view"),st(oe,!0),st(q,!1),Ve(oi),await N1(300),oi.easeTo({zoom:17,bearing:0,pitch:0,duration:750})))}),eg.subscribe(gt=>{st(R,W(I).filter(oi=>gt.includes(oi.id)),!0)}),M6(gt=>{gt.forEach(oi=>{const qi=W(I).findIndex(Si=>Si.id===oi.id);qi!==-1&&(W(I)[qi]={...oi})})},100);var ut=zX(),at=kt(ut),et=Le(at);{var xt=gt=>{var oi=DX();ba(1,oi,()=>Nm,()=>({duration:1,delay:200,axis:"x"})),Xe(gt,oi)};It(et,gt=>{x()&&gt(xt)})}var Mt=Oe(et,2);tL(Mt,{get layerEntries(){return W(R)},set layerEntries(gt){st(R,gt,!0)},get tempLayerEntries(){return W(B)},set tempLayerEntries(gt){st(B,gt,!0)}});var Yt=Oe(Mt,2);uD(Yt,{get layerEntries(){return W(R)},get featureMenuData(){return W(H)},set featureMenuData(gt){st(H,gt,!0)},get inputSearchWord(){return W(N)},set inputSearchWord(gt){st(N,gt,!0)},get showSelectionMarker(){return W($)},set showSelectionMarker(gt){st($,gt,!0)},get selectionMarkerLngLat(){return W(de)},set selectionMarkerLngLat(gt){st(de,gt,!0)}});var rt=Oe(Yt,2);cQ(rt,{get streetViewLineData(){return W(ce)},get streetViewPointData(){return W(Ae)},get angleMarker(){return W(X)},get streetViewPoint(){return W(ee)},get showMapCanvas(){return W(oe)},get layerEntries(){return W(R)},set layerEntries(gt){st(R,gt,!0)},get tempLayerEntries(){return W(B)},set tempLayerEntries(gt){st(B,gt,!0)},get showDataEntry(){return W(F)},set showDataEntry(gt){st(F,gt,!0)},get featureMenuData(){return W(H)},set featureMenuData(gt){st(H,gt,!0)},get showSelectionMarker(){return W($)},set showSelectionMarker(gt){st($,gt,!0)},get selectionMarkerLngLat(){return W(de)},set selectionMarkerLngLat(gt){st(de,gt,!0)}});var pt=Oe(rt,2);BN(pt,{});var je=Oe(pt,2);ZY(je);var Qe=Oe(je,2);iP(Qe,{get layerEntry(){return W(M)},set layerEntry(gt){st(M,gt,!0)},get tempLayerEntries(){return W(B)},set tempLayerEntries(gt){st(B,gt,!0)}});var tt=Oe(Qe,2);NY(tt,{get layerEntries(){return W(R)},get featureMenuData(){return W(H)},set featureMenuData(gt){st(H,gt,!0)}});var bt=Oe(tt,2);kQ(bt,{get showDataEntry(){return W(F)},set showDataEntry(gt){st(F,gt,!0)}});var dt=Oe(bt,2);YX(dt,{});var _t=Oe(dt,2);{var zt=gt=>{_I(gt,{get showDataEntry(){return W(F)},set showDataEntry(oi){st(F,oi,!0)}})};It(_t,gt=>{W(F)||gt(zt)})}var Qt=Oe(_t,2);{var Ct=gt=>{xI(gt,{get showDataEntry(){return W(F)},set showDataEntry(oi){st(F,oi,!0)}})};It(Qt,gt=>{W(F)&&gt(Ct)})}var Zt=Oe(Qt,2);FX(Zt,{get streetViewPoint(){return W(ee)},get nextPointData(){return W(D)},get showThreeCanvas(){return W(q)},setPoint:ye,get cameraBearing(){return W(ue)},set cameraBearing(gt){st(ue,gt,!0)}}),Ee(at);var Ai=Oe(at,2);LX(Ai,{});var Nt=Oe(Ai,2);fD(Nt,{});var Dt=Oe(Nt,2);uQ(Dt,{});var li=Oe(Dt,2);BI(li,{});var pi=Oe(li,2);MI(pi,{});var Kt=Oe(pi,2);kX(Kt,{}),Xe(t,ut),_i(),n()}export{AV as component};
