var MB=Object.defineProperty;var RB=(t,e,r)=>e in t?MB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var mr=(t,e,r)=>RB(t,typeof e!="symbol"?e+"":e,r);import{b as My,m as IB,w as UB,n as S4,f as Mr,c as Xe,o as EB,d as dt,i as qi,e as Ln}from"../chunks/Cj_70yce.js";import{ap as Z5,av as FB,aA as TB,h as Kn,a as R0,aB as N4,b as Rp,aC as SB,U as Cm,aD as l0,a2 as Fg,G as co,D as I0,an as Tg,am as Sg,aE as Ry,x as NB,e as Y4,f as V0,p as A0,aj as YB,g as Ho,aF as PB,aG as LB,s as hg,j as Gd,v as QB,K as re,Q as H5,c as kB,r as Iy,d as h3,m as DB,aH as O5,t as X5,aI as u3,y as Ng,aJ as P4,aK as zB,aL as L4,aM as ZB,q as HB,aN as OB,at as V5,aO as XB,k as G5,n as VB,l as GB,E as jB,aP as KB,aQ as $B,A as qB,C as Q4,aR as WB,aS as JB,F as Ed,ao as eC,aT as tC,aU as rC,B as k4,aV as iC,L as nC,w as fr,af as In,N as ht,aW as tu,aX as aC,aY as sC,ab as Dt,z as gr,aZ as d3,a8 as oC,ah as Pe,ai as Fe,ad as hr,a_ as lC,a3 as AC,a$ as D4,az as Gn,ae as er,$ as $n,ac as Ze,b0 as Ki,al as bi,J as $o,a5 as Dn,ag as cC}from"../chunks/C6fWmdtW.js";import{a as hC,s as _r,m as uC}from"../chunks/Ck3uj07T.js";import{i as Ut}from"../chunks/JLJEAAAJ.js";import{l as dC,p as xr,s as kr,a as sn,b as Ol,m as j5}from"../chunks/COJ-qBUF.js";import{d as Uy,I as Yg,s as Mn,C as fC,F as sr,g as Ip,e as gC,H as ru,f as K5,h as pC,l as $5,M as q5,j as W5,r as bo,k as mn,m as zs,n as Pg,b as Lg,o as mC,D as Qg,p as Dl,i as z4,q as Oa,a as _C,t as Ey,u as Ps,v as ac,w as Zs,x as Mm,S as ug,y as Xl,z as bC,A as yC,B as kg,E as vC,G as Ys,J as Fy}from"../chunks/BHO0E0lc.js";import{l as J5,g as Z4,d as Rm,V as m1,m as Ty,S as xC,n as wC,e as BC,P as CC,O as MC,j as Sy,A as RC,o as IC,W as UC,b as Ny,p as EC,q as FC,r as TC}from"../chunks/BGSar6W7.js";import{i as Wl}from"../chunks/BbigkJSh.js";import{b as Ga}from"../chunks/D3yPRBTh.js";import{s as SC,g as NC}from"../chunks/D3n3I5ww.js";const YC=[];function e8(t,e=!1){return dg(t,new Map,"",YC)}function dg(t,e,r,a,l=null){if(typeof t=="object"&&t!==null){var u=e.get(t);if(u!==void 0)return u;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Z5(t)){var h=Array(t.length);e.set(t,h),l!==null&&e.set(l,h);for(var s=0;s<t.length;s+=1){var y=t[s];s in t&&(h[s]=dg(y,e,r,a))}return h}if(FB(t)===TB){h={},e.set(t,h),l!==null&&e.set(l,h);for(var x in t)h[x]=dg(t[x],e,r,a);return h}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return dg(t.toJSON(),e,r,a,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}const f3=0,_1=1,g3=2;function Im(t,e,r,a,l){Kn&&R0();var u=t,h=N4(),s=NB,y=Cm,x,C,I,U=(h?Fg:co)(void 0),R=(h?Fg:co)(void 0),N=!1;function D(H,W){N=!0,W&&(Tg(O),Sg(O),Ry(s));try{H===_1&&a&&(C?Y4(C):C=V0(()=>a(u,U))),H!==f3&&x&&A0(x,()=>x=null),H!==_1&&C&&A0(C,()=>C=null),H!==g3&&I&&A0(I,()=>I=null)}finally{W&&(Ry(null),Sg(null),Tg(null),YB())}}var O=Rp(()=>{if(y!==(y=e())){if(SB(y)){var H=y;N=!1,H.then(W=>{H===y&&(l0(U,W),D(_1,!0))},W=>{if(H===y)throw l0(R,W),D(g3,!0),R.v}),Kn||I0(()=>{N||D(f3,!0)})}else l0(U,y),D(_1,!1);return()=>y=Cm}});Kn&&(u=Ho)}function Yy(t,e,r){Kn&&R0();var a=t,l=Cm,u,h=N4()?PB:LB;Rp(()=>{h(l,l=e())&&(u&&A0(u),u=V0(()=>r(a)))}),Kn&&(a=Ho)}let fg=null;function Rn(t,e){return e}function PC(t,e,r,a){for(var l=[],u=e.length,h=0;h<u;h++)ZB(e[h].e,l,!0);var s=u>0&&l.length===0&&r!==null;if(s){var y=r.parentNode;HB(y),y.append(r),a.clear(),El(t,e[0].prev,e[u-1].next)}OB(l,()=>{for(var x=0;x<u;x++){var C=e[x];s||(a.delete(C.k),El(t,C.prev,C.next)),V5(C.e,!s)}})}function Qi(t,e,r,a,l,u=null){var h=t,s={flags:e,items:new Map,first:null},y=(e&O5)!==0;if(y){var x=t;h=Kn?hg(Gd(x)):x.appendChild(QB())}Kn&&R0();var C=null,I=!1,U=H5(()=>{var R=r();return Z5(R)?R:R==null?[]:X5(R)});Rp(()=>{var R=re(U),N=R.length;if(I&&N===0)return;I=N===0;let D=!1;if(Kn){var O=h.data===kB;O!==(N===0)&&(h=Iy(),hg(h),h3(!1),D=!0)}if(Kn){for(var H=null,W,se=0;se<N;se++){if(Ho.nodeType===8&&Ho.data===DB){h=Ho,D=!0,h3(!1);break}var de=R[se],le=a(de,se);W=t8(Ho,s,H,null,de,le,se,l,e,r),s.items.set(le,W),H=W}N>0&&hg(Iy())}Kn||LC(R,s,h,l,e,a,r),u!==null&&(N===0?C?Y4(C):C=V0(()=>u(h)):C!==null&&A0(C,()=>{C=null})),D&&h3(!0),re(U)}),Kn&&(h=Ho)}function LC(t,e,r,a,l,u,h){var Ve,ut,nt,rt;var s=(l&zB)!==0,y=(l&(L4|P4))!==0,x=t.length,C=e.items,I=e.first,U=I,R,N=null,D,O=[],H=[],W,se,de,le;if(s)for(le=0;le<x;le+=1)W=t[le],se=u(W,le),de=C.get(se),de!==void 0&&((Ve=de.a)==null||Ve.measure(),(D??(D=new Set)).add(de));for(le=0;le<x;le+=1){if(W=t[le],se=u(W,le),de=C.get(se),de===void 0){var he=U?U.e.nodes_start:r;N=t8(he,e,N,N===null?e.first:N.next,W,se,le,a,l,h),C.set(se,N),O=[],H=[],U=N.next;continue}if(y&&QC(de,W,le,l),de.e.f&u3&&(Y4(de.e),s&&((ut=de.a)==null||ut.unfix(),(D??(D=new Set)).delete(de))),de!==U){if(R!==void 0&&R.has(de)){if(O.length<H.length){var ae=H[0],V;N=ae.prev;var K=O[0],oe=O[O.length-1];for(V=0;V<O.length;V+=1)Py(O[V],ae,r);for(V=0;V<H.length;V+=1)R.delete(H[V]);El(e,K.prev,oe.next),El(e,N,K),El(e,oe,ae),U=ae,N=oe,le-=1,O=[],H=[]}else R.delete(de),Py(de,U,r),El(e,de.prev,de.next),El(e,de,N===null?e.first:N.next),El(e,N,de),N=de;continue}for(O=[],H=[];U!==null&&U.k!==se;)U.e.f&u3||(R??(R=new Set)).add(U),H.push(U),U=U.next;if(U===null)continue;de=U}O.push(de),N=de,U=de.next}if(U!==null||R!==void 0){for(var ce=R===void 0?[]:X5(R);U!==null;)U.e.f&u3||ce.push(U),U=U.next;var ye=ce.length;if(ye>0){var we=l&O5&&x===0?r:null;if(s){for(le=0;le<ye;le+=1)(nt=ce[le].a)==null||nt.measure();for(le=0;le<ye;le+=1)(rt=ce[le].a)==null||rt.fix()}PC(e,ce,we,C)}}s&&I0(()=>{var ft;if(D!==void 0)for(de of D)(ft=de.a)==null||ft.apply()}),Ng.first=e.first&&e.first.e,Ng.last=N&&N.e}function QC(t,e,r,a){a&L4&&l0(t.v,e),a&P4?l0(t.i,r):t.i=r}function t8(t,e,r,a,l,u,h,s,y,x){var C=fg,I=(y&L4)!==0,U=(y&XB)===0,R=I?U?co(l):Fg(l):l,N=y&P4?Fg(h):h,D={i:N,v:R,k:u,a:null,e:null,prev:r,next:a};fg=D;try{return D.e=V0(()=>s(t,R,N,x),Kn),D.e.prev=r&&r.e,D.e.next=a&&a.e,r===null?e.first=D:(r.next=D,r.e.next=D.e),a!==null&&(a.prev=D,a.e.prev=D.e),D}finally{fg=C}}function Py(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,l=e?e.e.nodes_start:r,u=t.e.nodes_start;u!==a;){var h=G5(u);l.before(u),u=h}}function El(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function r8(t,e,r,a,l){var u=t,h="",s;Rp(()=>{if(h===(h=e()??"")){Kn&&R0();return}s!==void 0&&(V5(s),s=void 0),h!==""&&(s=V0(()=>{if(Kn){Ho.data;for(var y=R0(),x=y;y!==null&&(y.nodeType!==8||y.data!=="");)x=y,y=G5(y);if(y===null)throw VB(),GB;My(Ho,x),u=hg(y);return}var C=h+"";r&&(C=`<svg>${C}</svg>`);var I=IB(C);if((r||a)&&(I=Gd(I)),My(Gd(I),I.lastChild),r||a)for(;Gd(I);)u.before(Gd(I));else u.before(I)}))})}const kC=()=>performance.now(),Oo={tick:t=>requestAnimationFrame(t),now:()=>kC(),tasks:new Set};function i8(){const t=Oo.now();Oo.tasks.forEach(e=>{e.c(t)||(Oo.tasks.delete(e),e.f())}),Oo.tasks.size!==0&&Oo.tick(i8)}function DC(t){let e;return Oo.tasks.size===0&&Oo.tick(i8),{promise:new Promise(r=>{Oo.tasks.add(e={c:t,f:r})}),abort(){Oo.tasks.delete(e)}}}function b1(t,e){UB(()=>{t.dispatchEvent(new CustomEvent(e))})}function zC(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Ly(t){const e={},r=t.split(";");for(const a of r){const[l,u]=a.split(":");if(!l||u===void 0)break;const h=zC(l.trim());e[h]=u.trim()}return e}const ZC=t=>t;function n8(t,e,r){var a=fg,l,u,h,s=null;a.a??(a.a={element:t,measure(){l=this.element.getBoundingClientRect()},apply(){if(h==null||h.abort(),u=this.element.getBoundingClientRect(),l.left!==u.left||l.right!==u.right||l.top!==u.top||l.bottom!==u.bottom){const y=e()(this.element,{from:l,to:u},r==null?void 0:r());h=Dg(this.element,y,void 0,1,()=>{h==null||h.abort(),h=void 0})}},fix(){if(!t.getAnimations().length){var{position:y,width:x,height:C}=getComputedStyle(t);if(y!=="absolute"&&y!=="fixed"){var I=t.style;s={position:I.position,width:I.width,height:I.height,transform:I.transform},I.position="absolute",I.width=x,I.height=C;var U=t.getBoundingClientRect();if(l.left!==U.left||l.top!==U.top){var R=`translate(${l.left-U.left}px, ${l.top-U.top}px)`;I.transform=I.transform?`${I.transform} ${R}`:R}}}},unfix(){if(s){var y=t.style;y.position=s.position,y.width=s.width,y.height=s.height,y.transform=s.transform}}}),a.a.element=t}function Ri(t,e,r,a){var l=(t&tC)!==0,u=(t&rC)!==0,h=l&&u,s=(t&WB)!==0,y=h?"both":l?"in":"out",x,C=e.inert,I=e.style.overflow,U,R;function N(){var se=eC,de=Ng;Sg(null),Tg(null);try{return x??(x=r()(e,(a==null?void 0:a())??{},{direction:y}))}finally{Sg(se),Tg(de)}}var D={is_global:s,in(){var se;if(e.inert=C,!l){R==null||R.abort(),(se=R==null?void 0:R.reset)==null||se.call(R);return}u||U==null||U.abort(),b1(e,"introstart"),U=Dg(e,N(),R,1,()=>{b1(e,"introend"),U==null||U.abort(),U=x=void 0,e.style.overflow=I})},out(se){if(!u){se==null||se(),x=void 0;return}e.inert=!0,b1(e,"outrostart"),R=Dg(e,N(),U,0,()=>{b1(e,"outroend"),se==null||se()})},stop:()=>{U==null||U.abort(),R==null||R.abort()}},O=Ng;if((O.transitions??(O.transitions=[])).push(D),l&&hC){var H=s;if(!H){for(var W=O.parent;W&&W.f&jB;)for(;(W=W.parent)&&!(W.f&KB););H=!W||(W.f&$B)!==0}H&&qB(()=>{Q4(()=>D.in())})}}function Dg(t,e,r,a,l){var u=a===1;if(JB(e)){var h,s=!1;return I0(()=>{if(!s){var O=e({direction:u?"in":"out"});h=Dg(t,O,r,a,l)}}),{abort:()=>{s=!0,h==null||h.abort()},deactivate:()=>h.deactivate(),reset:()=>h.reset(),t:()=>h.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return l(),{abort:Ed,deactivate:Ed,reset:Ed,t:()=>a};const{delay:y=0,css:x,tick:C,easing:I=ZC}=e;var U=[];if(u&&r===void 0&&(C&&C(0,1),x)){var R=Ly(x(0,1));U.push(R,R)}var N=()=>1-a,D=t.animate(U,{duration:y});return D.onfinish=()=>{var O=(r==null?void 0:r.t())??1-a;r==null||r.abort();var H=a-O,W=e.duration*Math.abs(H),se=[];if(W>0){var de=!1;if(x)for(var le=Math.ceil(W/16.666666666666668),he=0;he<=le;he+=1){var ae=O+H*I(he/le),V=Ly(x(ae,1-ae));se.push(V),de||(de=V.overflow==="hidden")}de&&(t.style.overflow="hidden"),N=()=>{var K=D.currentTime;return O+H*I(K/W)},C&&DC(()=>{if(D.playState!=="running")return!1;var K=N();return C(K,1-K),!0})}D=t.animate(se,{duration:W,fill:"forwards"}),D.onfinish=()=>{N=()=>a,C==null||C(a,1-a),l()}},{abort:()=>{D&&(D.cancel(),D.effect=null,D.onfinish=Ed)},deactivate:()=>{l=Ed},reset:()=>{a===0&&(C==null||C(1,0))},t:()=>N()}}function Up(t,e,r=e){var a=N4();S4(t,"input",l=>{var u=l?t.defaultValue:t.value;if(u=m3(t)?_3(u):u,r(u),a&&u!==(u=e())){var h=t.selectionStart,s=t.selectionEnd;t.value=u??"",s!==null&&(t.selectionStart=h,t.selectionEnd=Math.min(s,t.value.length))}}),(Kn&&t.defaultValue!==t.value||Q4(e)==null&&t.value)&&r(m3(t)?_3(t.value):t.value),k4(()=>{var l=e();m3(t)&&l===_3(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}const p3=new Set;function Ep(t,e,r,a,l=a){var u=r.getAttribute("type")==="checkbox",h=t;let s=!1;if(e!==null)for(var y of e)h=h[y]??(h[y]=[]);h.push(r),S4(r,"change",()=>{var x=r.__value;u&&(x=Qy(h,x,r.checked)),l(x)},()=>l(u?[]:null)),k4(()=>{var x=a();if(Kn&&r.defaultChecked!==r.checked){s=!0;return}u?(x=x||[],r.checked=x.includes(r.__value)):r.checked=iC(r.__value,x)}),nC(()=>{var x=h.indexOf(r);x!==-1&&h.splice(x,1)}),p3.has(h)||(p3.add(h),I0(()=>{h.sort((x,C)=>x.compareDocumentPosition(C)===4?-1:1),p3.delete(h)})),I0(()=>{if(s){var x;if(u)x=Qy(h,x,r.checked);else{var C=h.find(I=>I.checked);x=C==null?void 0:C.__value}l(x)}})}function a8(t,e,r=e){S4(t,"change",a=>{var l=a?t.defaultChecked:t.checked;r(l)}),(Kn&&t.defaultChecked!==t.checked||Q4(e)==null)&&r(t.checked),k4(()=>{var a=e();t.checked=!!a})}function Qy(t,e,r){for(var a=new Set,l=0;l<t.length;l+=1)t[l].checked&&a.add(t[l].__value);return r||a.delete(e),Array.from(a)}function m3(t){var e=t.type;return e==="number"||e==="range"}function _3(t){return t===""?null:+t}var Qa=63710088e-1,HC={centimeters:Qa*100,centimetres:Qa*100,degrees:360/(2*Math.PI),feet:Qa*3.28084,inches:Qa*39.37,kilometers:Qa/1e3,kilometres:Qa/1e3,meters:Qa,metres:Qa,miles:Qa/1609.344,millimeters:Qa*1e3,millimetres:Qa*1e3,nauticalmiles:Qa/1852,radians:1,yards:Qa*1.0936};function OC(t,e,r={}){const a={type:"Feature"};return(r.id===0||r.id)&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.properties=e||{},a.geometry=t,a}function XC(t,e,r={}){for(const l of t){if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(l[l.length-1].length!==l[0].length)throw new Error("First and last Position are not equivalent.");for(let u=0;u<l[l.length-1].length;u++)if(l[l.length-1][u]!==l[0][u])throw new Error("First and last Position are not equivalent.")}return OC({type:"Polygon",coordinates:t},e,r)}function VC(t,e="kilometers"){const r=HC[e];if(!r)throw new Error(e+" units is invalid");return t*r}function GC(t){return t%(2*Math.PI)*180/Math.PI}function Nl(t){return t%360*Math.PI/180}function zg(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function s8(t,e,r={}){if(r.final===!0)return jC(t,e);const a=zg(t),l=zg(e),u=Nl(a[0]),h=Nl(l[0]),s=Nl(a[1]),y=Nl(l[1]),x=Math.sin(h-u)*Math.cos(y),C=Math.cos(s)*Math.sin(y)-Math.sin(s)*Math.cos(y)*Math.cos(h-u);return GC(Math.atan2(x,C))}function jC(t,e){let r=s8(e,t);return r=(r+180)%360,r}var KC=s8;function o8(t,e,r={}){var a=zg(t),l=zg(e),u=Nl(l[1]-a[1]),h=Nl(l[0]-a[0]),s=Nl(a[1]),y=Nl(l[1]),x=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(h/2),2)*Math.cos(s)*Math.cos(y);return VC(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)),r.units)}var $C=o8;function qC(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return l8(t);case"FeatureCollection":return WC(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return H4(t);default:throw new Error("unknown GeoJSON type")}}function l8(t){const e={type:"Feature"};return Object.keys(t).forEach(r=>{switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=A8(t.properties),t.geometry==null?e.geometry=null:e.geometry=H4(t.geometry),e}function A8(t){const e={};return t&&Object.keys(t).forEach(r=>{const a=t[r];typeof a=="object"?a===null?e[r]=null:Array.isArray(a)?e[r]=a.map(l=>l):e[r]=A8(a):e[r]=a}),e}function WC(t){const e={type:"FeatureCollection"};return Object.keys(t).forEach(r=>{switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(r=>l8(r)),e}function H4(t){const e={type:t.type};return t.bbox&&(e.bbox=t.bbox),t.type==="GeometryCollection"?(e.geometries=t.geometries.map(r=>H4(r)),e):(e.coordinates=c8(t.coordinates),e)}function c8(t){const e=t;return typeof e[0]!="object"?e.slice():e.map(r=>c8(r))}function h8(t,e,r){if(t!==null)for(var a,l,u,h,s,y,x,C=0,I=0,U,R=t.type,N=R==="FeatureCollection",D=R==="Feature",O=N?t.features.length:1,H=0;H<O;H++){x=N?t.features[H].geometry:D?t.geometry:t,U=x?x.type==="GeometryCollection":!1,s=U?x.geometries.length:1;for(var W=0;W<s;W++){var se=0,de=0;if(h=U?x.geometries[W]:x,h!==null){y=h.coordinates;var le=h.type;switch(C=0,le){case null:break;case"Point":if(e(y,I,H,se,de)===!1)return!1;I++,se++;break;case"LineString":case"MultiPoint":for(a=0;a<y.length;a++){if(e(y[a],I,H,se,de)===!1)return!1;I++,le==="MultiPoint"&&se++}le==="LineString"&&se++;break;case"Polygon":case"MultiLineString":for(a=0;a<y.length;a++){for(l=0;l<y[a].length-C;l++){if(e(y[a][l],I,H,se,de)===!1)return!1;I++}le==="MultiLineString"&&se++,le==="Polygon"&&de++}le==="Polygon"&&se++;break;case"MultiPolygon":for(a=0;a<y.length;a++){for(de=0,l=0;l<y[a].length;l++){for(u=0;u<y[a][l].length-C;u++){if(e(y[a][l][u],I,H,se,de)===!1)return!1;I++}de++}se++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(h8(h.geometries[a],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function JC(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var r=0;r<t.features.length&&e(t.features[r],r)!==!1;r++);}var eM=Object.defineProperty,tM=Object.defineProperties,rM=Object.getOwnPropertyDescriptors,ky=Object.getOwnPropertySymbols,iM=Object.prototype.hasOwnProperty,nM=Object.prototype.propertyIsEnumerable,Dy=(t,e,r)=>e in t?eM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zy=(t,e)=>{for(var r in e||(e={}))iM.call(e,r)&&Dy(t,r,e[r]);if(ky)for(var r of ky(e))nM.call(e,r)&&Dy(t,r,e[r]);return t},Zy=(t,e)=>tM(t,rM(e));function aM(t,e,r={}){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");let a=1/0,l=0;JC(e,(h,s)=>{const y=o8(t,h,r);y<a&&(l=s,a=y)});const u=qC(e.features[l]);return Zy(zy({},u),{properties:Zy(zy({},u.properties),{featureIndex:l,distanceToPoint:a})})}var Hy=aM;class sM extends Error{constructor(e="The operation was aborted"){super(e),this.name="AbortError"}}function u8(t,e,{signal:r,edges:a}={}){let l,u=null;const h=a!=null&&a.includes("leading"),s=a==null||a.includes("trailing"),y=()=>{u!==null&&(t.apply(l,u),l=void 0,u=null)},x=()=>{s&&y(),R()};let C=null;const I=()=>{C!=null&&clearTimeout(C),C=setTimeout(()=>{C=null,x()},e)},U=()=>{C!==null&&(clearTimeout(C),C=null)},R=()=>{U(),l=void 0,u=null},N=()=>{U(),y()},D=function(...O){if(r!=null&&r.aborted)return;l=this,u=O;const H=C==null;I(),h&&H&&y()};return D.schedule=I,D.cancel=R,D.flush=N,r==null||r.addEventListener("abort",R,{once:!0}),D}function gg(t,{signal:e}={}){return new Promise((r,a)=>{const l=()=>{a(new sM)},u=()=>{clearTimeout(h),l()};if(e!=null&&e.aborted)return l();const h=setTimeout(()=>{e==null||e.removeEventListener("abort",u),r()},t);e==null||e.addEventListener("abort",u,{once:!0})})}var d8={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */(function(t,e){(function(r,a){t.exports=a()})(J5,function(){var r={},a={};function l(h,s,y){if(a[h]=y,h==="index"){var x="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",C={};return a.shared(C),a.index(r,C),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))),r}}l("shared",["exports"],function(h){function s(A,n,c,d){return new(c||(c=Promise))(function(m,v){function w(S){try{F(d.next(S))}catch(P){v(P)}}function M(S){try{F(d.throw(S))}catch(P){v(P)}}function F(S){var P;S.done?m(S.value):(P=S.value,P instanceof c?P:new c(function(k){k(P)})).then(w,M)}F((d=d.apply(A,n||[])).next())})}function y(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var x,C;function I(){if(C)return x;function A(n,c){this.x=n,this.y=c}return C=1,x=A,A.prototype={clone:function(){return new A(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,c){return this.clone()._rotateAround(n,c)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var c=n.x-this.x,d=n.y-this.y;return c*c+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,c){return Math.atan2(this.x*c-this.y*n,this.x*n+this.y*c)},_matMult:function(n){var c=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=c,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var c=Math.cos(n),d=Math.sin(n),m=d*this.x+c*this.y;return this.x=c*this.x-d*this.y,this.y=m,this},_rotateAround:function(n,c){var d=Math.cos(n),m=Math.sin(n),v=c.y+m*(this.x-c.x)+d*(this.y-c.y);return this.x=c.x+d*(this.x-c.x)-m*(this.y-c.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(n){return n instanceof A?n:Array.isArray(n)?new A(n[0],n[1]):n},x}typeof SuppressedError=="function"&&SuppressedError;var U,R,N=y(I()),D=function(){if(R)return U;function A(n,c,d,m){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=c,this.p2x=d,this.p2y=m}return R=1,U=A,A.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,c){if(c===void 0&&(c=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,m=0;m<8;m++){var v=this.sampleCurveX(d)-n;if(Math.abs(v)<c)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=v/w}var M=0,F=1;for(d=n,m=0;m<20&&(v=this.sampleCurveX(d),!(Math.abs(v-n)<c));m++)n>v?M=d:F=d,d=.5*(F-M)+M;return d},solve:function(n,c){return this.sampleCurveY(this.solveCurveX(n,c))}},U}(),O=y(D);let H,W;function se(){return H==null&&(H=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H}function de(){if(W==null&&(W=!1,se())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){const m=4*d;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const c=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&c[d]!==d){W=!0;break}}}return W||!1}var le=1e-6,he=typeof Float32Array<"u"?Float32Array:Array;function ae(){var A=new he(9);return he!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}function V(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function K(){var A=new he(3);return he!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function oe(A){return Math.hypot(A[0],A[1],A[2])}function ce(A,n,c){var d=new he(3);return d[0]=A,d[1]=n,d[2]=c,d}Math.hypot||(Math.hypot=function(){for(var A=0,n=arguments.length;n--;)A+=arguments[n]*arguments[n];return Math.sqrt(A)});var ye,we=oe;function Ve(A,n,c){var d=n[0],m=n[1],v=n[2],w=n[3];return A[0]=c[0]*d+c[4]*m+c[8]*v+c[12]*w,A[1]=c[1]*d+c[5]*m+c[9]*v+c[13]*w,A[2]=c[2]*d+c[6]*m+c[10]*v+c[14]*w,A[3]=c[3]*d+c[7]*m+c[11]*v+c[15]*w,A}function ut(){var A=new he(4);return he!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A[3]=1,A}function nt(){var A=new he(2);return he!=Float32Array&&(A[0]=0,A[1]=0),A}function rt(A,n){var c=new he(2);return c[0]=A,c[1]=n,c}K(),ye=new he(4),he!=Float32Array&&(ye[0]=0,ye[1]=0,ye[2]=0,ye[3]=0),K(),ce(1,0,0),ce(0,1,0),ut(),ut(),ae(),nt();const ft=8192;function _t(A,n,c){return n*(ft/(A.tileSize*Math.pow(2,c-A.tileID.overscaledZ)))}function gt(A,n){return(A%n+n)%n}function Je(A,n,c){return A*(1-c)+n*c}function je(A){if(A<=0)return 0;if(A>=1)return 1;const n=A*A,c=n*A;return 4*(A<.5?c:3*(A-n)+c-.75)}function Qe(A,n,c,d){const m=new O(A,n,c,d);return v=>m.solve(v)}const pt=Qe(.25,.1,.25,1);function $e(A,n,c){return Math.min(c,Math.max(n,A))}function wt(A,n,c){const d=c-n,m=((A-n)%d+d)%d+n;return m===n?c:m}function Ct(A,...n){for(const c of n)for(const d in c)A[d]=c[d];return A}let Mt=1;function Pt(A,n,c){const d={};for(const m in A)d[m]=n.call(this,A[m],m,A);return d}function ar(A,n,c){const d={};for(const m in A)n.call(this,A[m],m,A)&&(d[m]=A[m]);return d}function Lt(A){return Array.isArray(A)?A.map(Lt):typeof A=="object"&&A?Pt(A,Lt):A}const Ot={};function Qt(A){Ot[A]||(typeof console<"u"&&console.warn(A),Ot[A]=!0)}function St(A,n,c){return(c.y-A.y)*(n.x-A.x)>(n.y-A.y)*(c.x-A.x)}function Zt(A){return typeof WorkerGlobalScope<"u"&&A!==void 0&&A instanceof WorkerGlobalScope}let lr=null;function dr(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}const rr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Br(A,n,c,d,m){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(A,{timestamp:0});try{const w=v==null?void 0:v.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const M=w.startsWith("BGR"),F=new Uint8ClampedArray(d*m*4);if(yield v.copyTo(F,function(S,P,k,X,j){const $=4*Math.max(1,0),ee=(Math.max(0,k)-k)*X*4+$,fe=4*X,be=Math.max(0,P),Ye=Math.max(0,k);return{rect:{x:be,y:Ye,width:Math.min(S.width,P+X)-be,height:Math.min(S.height,k+j)-Ye},layout:[{offset:ee,stride:fe}]}}(A,n,c,d,m)),M)for(let S=0;S<F.length;S+=4){const P=F[S];F[S]=F[S+2],F[S+2]=P}return F}finally{v.close()}})}let Dr,vi;function Gr(A,n,c,d){return A.addEventListener(n,c,d),{unsubscribe:()=>{A.removeEventListener(n,c,d)}}}function Fi(A){return A/Math.PI*180}const Kr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},hi={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Rr="AbortError";function $r(){return new Error(Rr)}const ui={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Un(A){return ui.REGISTERED_PROTOCOLS[A.substring(0,A.indexOf("://"))]}const Xi="global-dispatcher";class Vi extends Error{constructor(n,c,d,m){super(`AJAXError: ${c} (${n}): ${d}`),this.status=n,this.statusText=c,this.url=d,this.body=m}}const si=()=>Zt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ni=function(A,n){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){const d=Un(A.url);if(d)return d(A,n);if(Zt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,targetMapId:Xi},n)}if(!(/^file:/.test(c=A.url)||/^file:/.test(si())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return s(this,void 0,void 0,function*(){const v=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:si(),signal:m.signal});let w,M;d.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{w=yield fetch(v)}catch(S){throw new Vi(0,S.message,d.url,new Blob)}if(!w.ok){const S=yield w.blob();throw new Vi(w.status,w.statusText,d.url,S)}M=d.type==="arrayBuffer"||d.type==="image"?w.arrayBuffer():d.type==="json"?w.json():w.text();const F=yield M;if(m.signal.aborted)throw $r();return{data:F,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(A,n);if(Zt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,mustQueue:!0,targetMapId:Xi},n)}var c;return function(d,m){return new Promise((v,w)=>{var M;const F=new XMLHttpRequest;F.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(F.responseType="arraybuffer");for(const S in d.headers)F.setRequestHeader(S,d.headers[S]);d.type==="json"&&(F.responseType="text",!((M=d.headers)===null||M===void 0)&&M.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=d.credentials==="include",F.onerror=()=>{w(new Error(F.statusText))},F.onload=()=>{if(!m.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let S=F.response;if(d.type==="json")try{S=JSON.parse(F.response)}catch(P){return void w(P)}v({data:S,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const S=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});w(new Vi(F.status,F.statusText,d.url,S))}},m.signal.addEventListener("abort",()=>{F.abort(),w($r())}),F.send(d.body)})}(A,n)};function xi(A){if(!A||A.indexOf("://")<=0||A.indexOf("data:image/")===0||A.indexOf("blob:")===0)return!0;const n=new URL(A),c=window.location;return n.protocol===c.protocol&&n.host===c.host}function ze(A,n,c){c[A]&&c[A].indexOf(n)!==-1||(c[A]=c[A]||[],c[A].push(n))}function te(A,n,c){if(c&&c[A]){const d=c[A].indexOf(n);d!==-1&&c[A].splice(d,1)}}class ie{constructor(n,c={}){Ct(this,c),this.type=n}}class ge extends ie{constructor(n,c={}){super("error",Ct({error:n},c))}}class ve{on(n,c){return this._listeners=this._listeners||{},ze(n,c,this._listeners),{unsubscribe:()=>{this.off(n,c)}}}off(n,c){return te(n,c,this._listeners),te(n,c,this._oneTimeListeners),this}once(n,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},ze(n,c,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,c){typeof n=="string"&&(n=new ie(n,c||{}));const d=n.type;if(this.listens(d)){n.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const M of m)M.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const M of v)te(d,M,this._oneTimeListeners),M.call(this,n);const w=this._eventedParent;w&&(Ct(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(n))}else n instanceof ge&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,c){return this._eventedParent=n,this._eventedParentData=c,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ke=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ge(A,n){const c={};for(const d in A)d!=="ref"&&(c[d]=A[d]);return ke.forEach(d=>{d in n&&(c[d]=n[d])}),c}function Ie(A,n){if(Array.isArray(A)){if(!Array.isArray(n)||A.length!==n.length)return!1;for(let c=0;c<A.length;c++)if(!Ie(A[c],n[c]))return!1;return!0}if(typeof A=="object"&&A!==null&&n!==null){if(typeof n!="object"||Object.keys(A).length!==Object.keys(n).length)return!1;for(const c in A)if(!Ie(A[c],n[c]))return!1;return!0}return A===n}function et(A,n){A.push(n)}function Te(A,n,c){et(c,{command:"addSource",args:[A,n[A]]})}function ne(A,n,c){et(n,{command:"removeSource",args:[A]}),c[A]=!0}function Se(A,n,c,d){ne(A,c,d),Te(A,n,c)}function Ue(A,n,c){let d;for(d in A[c])if(Object.prototype.hasOwnProperty.call(A[c],d)&&d!=="data"&&!Ie(A[c][d],n[c][d]))return!1;for(d in n[c])if(Object.prototype.hasOwnProperty.call(n[c],d)&&d!=="data"&&!Ie(A[c][d],n[c][d]))return!1;return!0}function He(A,n,c,d,m,v){A=A||{},n=n||{};for(const w in A)Object.prototype.hasOwnProperty.call(A,w)&&(Ie(A[w],n[w])||c.push({command:v,args:[d,w,n[w],m]}));for(const w in n)Object.prototype.hasOwnProperty.call(n,w)&&!Object.prototype.hasOwnProperty.call(A,w)&&(Ie(A[w],n[w])||c.push({command:v,args:[d,w,n[w],m]}))}function At(A){return A.id}function xt(A,n){return A[n.id]=n,A}class Oe{constructor(n,c,d,m){this.message=(n?`${n}: `:"")+d,m&&(this.identifier=m),c!=null&&c.__line__&&(this.line=c.__line__)}}function mt(A,...n){for(const c of n)for(const d in c)A[d]=c[d];return A}class Kt extends Error{constructor(n,c){super(c),this.message=c,this.key=n}}class qt{constructor(n,c=[]){this.parent=n,this.bindings={};for(const[d,m]of c)this.bindings[d]=m}concat(n){return new qt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const tr={kind:"null"},tt={kind:"number"},Ft={kind:"string"},zt={kind:"boolean"},ti={kind:"color"},oi={kind:"projectionDefinition"},yr={kind:"object"},Vt={kind:"value"},Ia={kind:"collator"},Ht={kind:"formatted"},De={kind:"padding"},Et={kind:"resolvedImage"},nr={kind:"variableAnchorOffsetCollection"};function Ir(A,n){return{kind:"array",itemType:A,N:n}}function Ur(A){if(A.kind==="array"){const n=Ur(A.itemType);return typeof A.N=="number"?`array<${n}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${n}>`}return A.kind}const zr=[tr,tt,Ft,zt,ti,oi,Ht,yr,Ir(Vt),De,Et,nr];function Gi(A,n){if(n.kind==="error")return null;if(A.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Gi(A.itemType,n.itemType))&&(typeof A.N!="number"||A.N===n.N))return null}else{if(A.kind===n.kind)return null;if(A.kind==="value"){for(const c of zr)if(!Gi(c,n))return null}}return`Expected ${Ur(A)} but found ${Ur(n)} instead.`}function zn(A,n){return n.some(c=>c.kind===A.kind)}function _n(A,n){return n.some(c=>c==="null"?A===null:c==="array"?Array.isArray(A):c==="object"?A&&!Array.isArray(A)&&typeof A=="object":c===typeof A)}function Ti(A,n){return A.kind==="array"&&n.kind==="array"?A.itemType.kind===n.itemType.kind&&typeof A.N=="number":A.kind===n.kind}const iA=.96422,nA=.82521,cu=4/29,el=6/29,hu=3*el*el,e2=el*el*el,t2=Math.PI/180,r2=180/Math.PI;function sf(A){return(A%=360)<0&&(A+=360),A}function of([A,n,c,d]){let m,v;const w=du((.2225045*(A=uu(A))+.7168786*(n=uu(n))+.0606169*(c=uu(c)))/1);A===n&&n===c?m=v=w:(m=du((.4360747*A+.3850649*n+.1430804*c)/iA),v=du((.0139322*A+.0971045*n+.7141733*c)/nA));const M=116*w-16;return[M<0?0:M,500*(m-w),200*(w-v),d]}function uu(A){return A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function du(A){return A>e2?Math.pow(A,1/3):A/hu+cu}function fu([A,n,c,d]){let m=(A+16)/116,v=isNaN(n)?m:m+n/500,w=isNaN(c)?m:m-c/200;return m=1*gu(m),v=iA*gu(v),w=nA*gu(w),[xo(3.1338561*v-1.6168667*m-.4906146*w),xo(-.9787684*v+1.9161415*m+.033454*w),xo(.0719453*v-.2289914*m+1.4052427*w),d]}function xo(A){return(A=A<=.00304?12.92*A:1.055*Math.pow(A,1/2.4)-.055)<0?0:A>1?1:A}function gu(A){return A>el?A*A*A:hu*(A-cu)}function uc(A){return parseInt(A.padEnd(2,A),16)/255}function tl(A,n){return rl(n?A/100:A,0,1)}function rl(A,n,c){return Math.min(Math.max(n,A),c)}function lf(A){return!A.some(Number.isNaN)}const i2={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function _s(A,n,c){return A+c*(n-A)}function il(A,n,c){return A.map((d,m)=>_s(d,n[m],c))}class Er{constructor(n,c,d,m=1,v=!0){this.r=n,this.g=c,this.b=d,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,c,d,m]))}static parse(n){if(n instanceof Er)return n;if(typeof n!="string")return;const c=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=i2[d];if(m){const[w,M,F]=m;return[w/255,M/255,F/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const w=d.length<6?1:2;let M=1;return[uc(d.slice(M,M+=w)),uc(d.slice(M,M+=w)),uc(d.slice(M,M+=w)),uc(d.slice(M,M+w)||"ff")]}if(d.startsWith("rgb")){const w=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[M,F,S,P,k,X,j,$,ee,fe,be,Ye]=w,Be=[P||" ",j||" ",fe].join("");if(Be==="  "||Be==="  /"||Be===",,"||Be===",,,"){const G=[S,X,ee].join(""),ue=G==="%%%"?100:G===""?255:0;if(ue){const Ce=[rl(+F/ue,0,1),rl(+k/ue,0,1),rl(+$/ue,0,1),be?tl(+be,Ye):1];if(lf(Ce))return Ce}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[w,M,F,S,P,k,X,j,$]=v,ee=[F||" ",P||" ",X].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){const fe=[+M,rl(+S,0,100),rl(+k,0,100),j?tl(+j,$):1];if(lf(fe))return function([be,Ye,Be,G]){function ue(Ce){const qe=(Ce+be/30)%12,yt=Ye*Math.min(Be,1-Be);return Be-yt*Math.max(-1,Math.min(qe-3,9-qe,1))}return be=sf(be),Ye/=100,Be/=100,[ue(0),ue(8),ue(4),G]}(fe)}}}(n);return c?new Er(...c,!1):void 0}get rgb(){const{r:n,g:c,b:d,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[n/v,c/v,d/v,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[c,d,m,v]=of(n),w=Math.sqrt(d*d+m*m);return[Math.round(1e4*w)?sf(Math.atan2(m,d)*r2):NaN,w,c,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",of(this.rgb))}overwriteGetter(n,c){return Object.defineProperty(this,n,{value:c}),c}toString(){const[n,c,d,m]=this.rgb;return`rgba(${[n,c,d].map(v=>Math.round(255*v)).join(",")},${m})`}static interpolate(n,c,d,m="rgb"){switch(m){case"rgb":{const[v,w,M,F]=il(n.rgb,c.rgb,d);return new Er(v,w,M,F,!1)}case"hcl":{const[v,w,M,F]=n.hcl,[S,P,k,X]=c.hcl;let j,$;if(isNaN(v)||isNaN(S))isNaN(v)?isNaN(S)?j=NaN:(j=S,M!==1&&M!==0||($=P)):(j=v,k!==1&&k!==0||($=w));else{let Be=S-v;S>v&&Be>180?Be-=360:S<v&&v-S>180&&(Be+=360),j=v+d*Be}const[ee,fe,be,Ye]=function([Be,G,ue,Ce]){return Be=isNaN(Be)?0:Be*t2,fu([ue,Math.cos(Be)*G,Math.sin(Be)*G,Ce])}([j,$??_s(w,P,d),_s(M,k,d),_s(F,X,d)]);return new Er(ee,fe,be,Ye,!1)}case"lab":{const[v,w,M,F]=fu(il(n.lab,c.lab,d));return new Er(v,w,M,F,!1)}}}}Er.black=new Er(0,0,0,1),Er.white=new Er(1,1,1,1),Er.transparent=new Er(0,0,0,0),Er.red=new Er(1,0,0,1);class Lr{constructor(n,c,d){this.sensitivity=n?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,c){return this.collator.compare(n,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const nl=["bottom","center","top"];class Ka{constructor(n,c,d,m,v,w){this.text=n,this.image=c,this.scale=d,this.fontStack=m,this.textColor=v,this.verticalAlign=w}}class Wn{constructor(n){this.sections=n}static fromString(n){return new Wn([new Ka(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Wn?n:Wn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class En{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof En)return n;if(typeof n=="number")return new En([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const c of n)if(typeof c!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new En(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){return new En(il(n.values,c.values,d))}}class Si{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const aA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class bn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof bn)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let c=0;c<n.length;c+=2){const d=n[c],m=n[c+1];if(typeof d!="string"||!aA.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new bn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,c,d){const m=n.values,v=c.values;if(m.length!==v.length)throw new Si(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${c.toString()}`);const w=[];for(let M=0;M<m.length;M+=2){if(m[M]!==v[M])throw new Si(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${m[M]}, to[${M}]: ${v[M]}`);w.push(m[M]);const[F,S]=m[M+1],[P,k]=v[M+1];w.push([_s(F,P,d),_s(S,k,d)])}return new bn(w)}}class oa{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new oa({name:n,available:!1}):null}}class Zn{constructor(n,c,d){this.from=n,this.to=c,this.transition=d}static interpolate(n,c,d){return new Zn(n,c,d)}static parse(n){return n instanceof Zn?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new Zn(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new Zn(n.from,n.to,n.transition):typeof n=="string"?new Zn(n,n,1):void 0}}function $s(A,n,c,d){return typeof A=="number"&&A>=0&&A<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[A,n,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[A,n,c,d]:[A,n,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sA(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof Zn||A instanceof Er||A instanceof Lr||A instanceof Wn||A instanceof En||A instanceof bn||A instanceof oa)return!0;if(Array.isArray(A)){for(const n of A)if(!sA(n))return!1;return!0}if(typeof A=="object"){for(const n in A)if(!sA(A[n]))return!1;return!0}return!1}function Ni(A){if(A===null)return tr;if(typeof A=="string")return Ft;if(typeof A=="boolean")return zt;if(typeof A=="number")return tt;if(A instanceof Er)return ti;if(A instanceof Zn)return oi;if(A instanceof Lr)return Ia;if(A instanceof Wn)return Ht;if(A instanceof En)return De;if(A instanceof bn)return nr;if(A instanceof oa)return Et;if(Array.isArray(A)){const n=A.length;let c;for(const d of A){const m=Ni(d);if(c){if(c===m)continue;c=Vt;break}c=m}return Ir(c||Vt,n)}return yr}function $a(A){const n=typeof A;return A===null?"":n==="string"||n==="number"||n==="boolean"?String(A):A instanceof Er||A instanceof Zn||A instanceof Wn||A instanceof En||A instanceof bn||A instanceof oa?A.toString():JSON.stringify(A)}class qs{constructor(n,c){this.type=n,this.value=c}static parse(n,c){if(n.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!sA(n[1]))return c.error("invalid value");const d=n[1];let m=Ni(d);const v=c.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new qs(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const oA={string:Ft,number:tt,boolean:zt,object:yr};class ya{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d,m=1;const v=n[0];if(v==="array"){let M,F;if(n.length>2){const S=n[1];if(typeof S!="string"||!(S in oA)||S==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);M=oA[S],m++}else M=Vt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return c.error('The length argument to "array" must be a positive integer literal',2);F=n[2],m++}d=Ir(M,F)}else{if(!oA[v])throw new Error(`Types doesn't contain name = ${v}`);d=oA[v]}const w=[];for(;m<n.length;m++){const M=c.parse(n[m],m,Vt);if(!M)return null;w.push(M)}return new ya(d,w)}evaluate(n){for(let c=0;c<this.args.length;c++){const d=this.args[c].evaluate(n);if(!Gi(this.type,Ni(d)))return d;if(c===this.args.length-1)throw new Si(`Expected value to be of type ${Ur(this.type)}, but found ${Ur(Ni(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const lA={"to-boolean":zt,"to-color":ti,"to-number":tt,"to-string":Ft};class Jr{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");const d=n[0];if(!lA[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return c.error("Expected one argument.");const m=lA[d],v=[];for(let w=1;w<n.length;w++){const M=c.parse(n[w],w,Vt);if(!M)return null;v.push(M)}return new Jr(m,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let c,d;for(const m of this.args){if(c=m.evaluate(n),d=null,c instanceof Er)return c;if(typeof c=="string"){const v=n.parseColor(c);if(v)return v}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:$s(c[0],c[1],c[2],c[3]),!d))return new Er(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Si(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const d of this.args){c=d.evaluate(n);const m=En.parse(c);if(m)return m}throw new Si(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const d of this.args){c=d.evaluate(n);const m=bn.parse(c);if(m)return m}throw new Si(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const d of this.args){if(c=d.evaluate(n),c===null)return 0;const m=Number(c);if(!isNaN(m))return m}throw new Si(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Wn.fromString($a(this.args[0].evaluate(n)));case"resolvedImage":return oa.fromString($a(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return $a(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const pu=["Unknown","Point","LineString","Polygon"];class Hr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?pu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let c=this._parseColorCache[n];return c||(c=this._parseColorCache[n]=Er.parse(n)),c}}class wr{constructor(n,c,d=[],m,v=new qt,w=[]){this.registry=n,this.path=d,this.key=d.map(M=>`[${M}]`).join(""),this.scope=v,this.errors=w,this.expectedType=m,this._isConstant=c}parse(n,c,d,m,v={}){return c?this.concat(c,d,m)._parse(n,v):this._parse(n,v)}_parse(n,c){function d(m,v,w){return w==="assert"?new ya(v,[m]):w==="coerce"?new Jr(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let w=v.parse(n,this);if(!w)return null;if(this.expectedType){const M=this.expectedType,F=w.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||F.kind!=="value")if(M.kind!=="projectionDefinition"||F.kind!=="string"&&F.kind!=="array")if(M.kind!=="color"&&M.kind!=="formatted"&&M.kind!=="resolvedImage"||F.kind!=="value"&&F.kind!=="string")if(M.kind!=="padding"||F.kind!=="value"&&F.kind!=="number"&&F.kind!=="array")if(M.kind!=="variableAnchorOffsetCollection"||F.kind!=="value"&&F.kind!=="array"){if(this.checkSubtype(M,F))return null}else w=d(w,M,c.typeAnnotation||"coerce");else w=d(w,M,c.typeAnnotation||"coerce");else w=d(w,M,c.typeAnnotation||"coerce");else w=d(w,M,c.typeAnnotation||"coerce");else w=d(w,M,c.typeAnnotation||"assert")}if(!(w instanceof qs)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const M=new Hr;try{w=new qs(w.type,w.evaluate(M))}catch(F){return this.error(F.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,c,d){const m=typeof n=="number"?this.path.concat(n):this.path,v=d?this.scope.concat(d):this.scope;return new wr(this.registry,this._isConstant,m,c||null,v,this.errors)}error(n,...c){const d=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new Kt(d,n))}checkSubtype(n,c){const d=Gi(n,c);return d&&this.error(d),d}}class al{constructor(n,c){this.type=c.type,this.bindings=[].concat(n),this.result=c}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const c of this.bindings)n(c[1]);n(this.result)}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let v=1;v<n.length-1;v+=2){const w=n[v];if(typeof w!="string")return c.error(`Expected string, but found ${typeof w} instead.`,v);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",v);const M=c.parse(n[v+1],v+1);if(!M)return null;d.push([w,M])}const m=c.parse(n[n.length-1],n.length-1,c.expectedType,d);return m?new al(d,m):null}outputDefined(){return this.result.outputDefined()}}class Qr{constructor(n,c){this.type=c.type,this.name=n,this.boundExpression=c}static parse(n,c){if(n.length!==2||typeof n[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const d=n[1];return c.scope.has(d)?new Qr(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class AA{constructor(n,c,d){this.type=n,this.index=c,this.input=d}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=c.parse(n[1],1,tt),m=c.parse(n[2],2,Ir(c.expectedType||Vt));return d&&m?new AA(m.type.itemType,d,m):null}evaluate(n){const c=this.index.evaluate(n),d=this.input.evaluate(n);if(c<0)throw new Si(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new Si(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new Si(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Ua{constructor(n,c){this.type=zt,this.needle=n,this.haystack=c}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=c.parse(n[1],1,Vt),m=c.parse(n[2],2,Vt);return d&&m?zn(d.type,[zt,Ft,tt,tr,Vt])?new Ua(d,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(d.type)} instead`):null}evaluate(n){const c=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!_n(c,["boolean","string","number","null"]))throw new Si(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(Ni(c))} instead.`);if(!_n(d,["string","array"]))throw new Si(`Expected second argument to be of type array or string, but found ${Ur(Ni(d))} instead.`);return d.indexOf(c)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class sl{constructor(n,c,d){this.type=tt,this.needle=n,this.haystack=c,this.fromIndex=d}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=c.parse(n[1],1,Vt),m=c.parse(n[2],2,Vt);if(!d||!m)return null;if(!zn(d.type,[zt,Ft,tt,tr,Vt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(d.type)} instead`);if(n.length===4){const v=c.parse(n[3],3,tt);return v?new sl(d,m,v):null}return new sl(d,m)}evaluate(n){const c=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!_n(c,["boolean","string","number","null"]))throw new Si(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(Ni(c))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(n)),_n(d,["string"])){const v=d.indexOf(c,m);return v===-1?-1:[...d.slice(0,v)].length}if(_n(d,["array"]))return d.indexOf(c,m);throw new Si(`Expected second argument to be of type array or string, but found ${Ur(Ni(d))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class dc{constructor(n,c,d,m,v,w){this.inputType=n,this.type=c,this.input=d,this.cases=m,this.outputs=v,this.otherwise=w}static parse(n,c){if(n.length<5)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return c.error("Expected an even number of arguments.");let d,m;c.expectedType&&c.expectedType.kind!=="value"&&(m=c.expectedType);const v={},w=[];for(let S=2;S<n.length-1;S+=2){let P=n[S];const k=n[S+1];Array.isArray(P)||(P=[P]);const X=c.concat(S);if(P.length===0)return X.error("Expected at least one branch label.");for(const $ of P){if(typeof $!="number"&&typeof $!="string")return X.error("Branch labels must be numbers or strings.");if(typeof $=="number"&&Math.abs($)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof $=="number"&&Math.floor($)!==$)return X.error("Numeric branch labels must be integer values.");if(d){if(X.checkSubtype(d,Ni($)))return null}else d=Ni($);if(v[String($)]!==void 0)return X.error("Branch labels must be unique.");v[String($)]=w.length}const j=c.parse(k,S,m);if(!j)return null;m=m||j.type,w.push(j)}const M=c.parse(n[1],1,Vt);if(!M)return null;const F=c.parse(n[n.length-1],n.length-1,m);return F?M.type.kind!=="value"&&c.concat(1).checkSubtype(d,M.type)?null:new dc(d,m,M,v,w,F):null}evaluate(n){const c=this.input.evaluate(n);return(Ni(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class fc{constructor(n,c,d){this.type=n,this.branches=c,this.otherwise=d}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);const m=[];for(let w=1;w<n.length-1;w+=2){const M=c.parse(n[w],w,zt);if(!M)return null;const F=c.parse(n[w+1],w+1,d);if(!F)return null;m.push([M,F]),d=d||F.type}const v=c.parse(n[n.length-1],n.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new fc(d,m,v)}evaluate(n){for(const[c,d]of this.branches)if(c.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[c,d]of this.branches)n(c),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class ol{constructor(n,c,d,m){this.type=n,this.input=c,this.beginIndex=d,this.endIndex=m}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=c.parse(n[1],1,Vt),m=c.parse(n[2],2,tt);if(!d||!m)return null;if(!zn(d.type,[Ir(Vt),Ft,Vt]))return c.error(`Expected first argument to be of type array or string, but found ${Ur(d.type)} instead`);if(n.length===4){const v=c.parse(n[3],3,tt);return v?new ol(d.type,d,m,v):null}return new ol(d.type,d,m)}evaluate(n){const c=this.input.evaluate(n),d=this.beginIndex.evaluate(n);let m;if(this.endIndex&&(m=this.endIndex.evaluate(n)),_n(c,["string"]))return[...c].slice(d,m).join("");if(_n(c,["array"]))return c.slice(d,m);throw new Si(`Expected first argument to be of type array or string, but found ${Ur(Ni(c))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function cA(A,n){const c=A.length-1;let d,m,v=0,w=c,M=0;for(;v<=w;)if(M=Math.floor((v+w)/2),d=A[M],m=A[M+1],d<=n){if(M===c||n<m)return M;v=M+1}else{if(!(d>n))throw new Si("Input is not a number.");w=M-1}return 0}class hA{constructor(n,c,d){this.type=n,this.input=c,this.labels=[],this.outputs=[];for(const[m,v]of d)this.labels.push(m),this.outputs.push(v)}static parse(n,c){if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");const d=c.parse(n[1],1,tt);if(!d)return null;const m=[];let v=null;c.expectedType&&c.expectedType.kind!=="value"&&(v=c.expectedType);for(let w=1;w<n.length;w+=2){const M=w===1?-1/0:n[w],F=n[w+1],S=w,P=w+1;if(typeof M!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(m.length&&m[m.length-1][0]>=M)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);const k=c.parse(F,P,v);if(!k)return null;v=v||k.type,m.push([M,k])}return new hA(v,d,m)}evaluate(n){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(n);const m=this.input.evaluate(n);if(m<=c[0])return d[0].evaluate(n);const v=c.length;return m>=c[v-1]?d[v-1].evaluate(n):d[cA(c,m)].evaluate(n)}eachChild(n){n(this.input);for(const c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Af(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var gc,ll,Fn=function(){if(ll)return gc;function A(n,c,d,m){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=c,this.p2x=d,this.p2y=m}return ll=1,gc=A,A.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,c){if(c===void 0&&(c=1e-6),n<0)return 0;if(n>1)return 1;for(var d=n,m=0;m<8;m++){var v=this.sampleCurveX(d)-n;if(Math.abs(v)<c)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=v/w}var M=0,F=1;for(d=n,m=0;m<20&&(v=this.sampleCurveX(d),!(Math.abs(v-n)<c));m++)n>v?M=d:F=d,d=.5*(F-M)+M;return d},solve:function(n,c){return this.sampleCurveY(this.solveCurveX(n,c))}},gc}(),pc=Af(Fn);class Jn{constructor(n,c,d,m,v){this.type=n,this.operator=c,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[w,M]of v)this.labels.push(w),this.outputs.push(M)}static interpolationFactor(n,c,d,m){let v=0;if(n.name==="exponential")v=Al(c,n.base,d,m);else if(n.name==="linear")v=Al(c,1,d,m);else if(n.name==="cubic-bezier"){const w=n.controlPoints;v=new pc(w[0],w[1],w[2],w[3]).solve(Al(c,1,d,m))}return v}static parse(n,c){let[d,m,v,...w]=n;if(!Array.isArray(m)||m.length===0)return c.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const S=m[1];if(typeof S!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:S}}else{if(m[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const S=m.slice(1);if(S.length!==4||S.some(P=>typeof P!="number"||P<0||P>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:S}}}if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(v=c.parse(v,2,tt),!v)return null;const M=[];let F=null;d==="interpolate-hcl"||d==="interpolate-lab"?F=ti:c.expectedType&&c.expectedType.kind!=="value"&&(F=c.expectedType);for(let S=0;S<w.length;S+=2){const P=w[S],k=w[S+1],X=S+3,j=S+4;if(typeof P!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(M.length&&M[M.length-1][0]>=P)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const $=c.parse(k,j,F);if(!$)return null;F=F||$.type,M.push([P,$])}return Ti(F,tt)||Ti(F,oi)||Ti(F,ti)||Ti(F,De)||Ti(F,nr)||Ti(F,Ir(tt))?new Jn(F,d,m,v,M):c.error(`Type ${Ur(F)} is not interpolatable.`)}evaluate(n){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(n);const m=this.input.evaluate(n);if(m<=c[0])return d[0].evaluate(n);const v=c.length;if(m>=c[v-1])return d[v-1].evaluate(n);const w=cA(c,m),M=Jn.interpolationFactor(this.interpolation,m,c[w],c[w+1]),F=d[w].evaluate(n),S=d[w+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return _s(F,S,M);case"color":return Er.interpolate(F,S,M);case"padding":return En.interpolate(F,S,M);case"variableAnchorOffsetCollection":return bn.interpolate(F,S,M);case"array":return il(F,S,M);case"projectionDefinition":return Zn.interpolate(F,S,M)}case"interpolate-hcl":return Er.interpolate(F,S,M,"hcl");case"interpolate-lab":return Er.interpolate(F,S,M,"lab")}}eachChild(n){n(this.input);for(const c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Al(A,n,c,d){const m=d-c,v=A-c;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}const di={color:Er.interpolate,number:_s,padding:En.interpolate,variableAnchorOffsetCollection:bn.interpolate,array:il};class uA{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let d=null;const m=c.expectedType;m&&m.kind!=="value"&&(d=m);const v=[];for(const M of n.slice(1)){const F=c.parse(M,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!F)return null;d=d||F.type,v.push(F)}if(!d)throw new Error("No output type");const w=m&&v.some(M=>Gi(m,M.type));return new uA(w?Vt:d,v)}evaluate(n){let c,d=null,m=0;for(const v of this.args)if(m++,d=v.evaluate(n),d&&d instanceof oa&&!d.available&&(c||(c=d.name),d=null,m===this.args.length&&(d=c)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function mc(A,n){return A==="=="||A==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function mu(A,n,c,d){return d.compare(n,c)===0}function cl(A,n,c){const d=A!=="=="&&A!=="!=";return class f8{constructor(v,w,M){this.type=zt,this.lhs=v,this.rhs=w,this.collator=M,this.hasUntypedArgument=v.type.kind==="value"||w.type.kind==="value"}static parse(v,w){if(v.length!==3&&v.length!==4)return w.error("Expected two or three arguments.");const M=v[0];let F=w.parse(v[1],1,Vt);if(!F)return null;if(!mc(M,F.type))return w.concat(1).error(`"${M}" comparisons are not supported for type '${Ur(F.type)}'.`);let S=w.parse(v[2],2,Vt);if(!S)return null;if(!mc(M,S.type))return w.concat(2).error(`"${M}" comparisons are not supported for type '${Ur(S.type)}'.`);if(F.type.kind!==S.type.kind&&F.type.kind!=="value"&&S.type.kind!=="value")return w.error(`Cannot compare types '${Ur(F.type)}' and '${Ur(S.type)}'.`);d&&(F.type.kind==="value"&&S.type.kind!=="value"?F=new ya(S.type,[F]):F.type.kind!=="value"&&S.type.kind==="value"&&(S=new ya(F.type,[S])));let P=null;if(v.length===4){if(F.type.kind!=="string"&&S.type.kind!=="string"&&F.type.kind!=="value"&&S.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(P=w.parse(v[3],3,Ia),!P)return null}return new f8(F,S,P)}evaluate(v){const w=this.lhs.evaluate(v),M=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const F=Ni(w),S=Ni(M);if(F.kind!==S.kind||F.kind!=="string"&&F.kind!=="number")throw new Si(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${F.kind}, ${S.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const F=Ni(w),S=Ni(M);if(F.kind!=="string"||S.kind!=="string")return n(v,w,M)}return this.collator?c(v,w,M,this.collator.evaluate(v)):n(v,w,M)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const _c=cl("==",function(A,n,c){return n===c},mu),_u=cl("!=",function(A,n,c){return n!==c},function(A,n,c,d){return!mu(0,n,c,d)}),n2=cl("<",function(A,n,c){return n<c},function(A,n,c,d){return d.compare(n,c)<0}),bc=cl(">",function(A,n,c){return n>c},function(A,n,c,d){return d.compare(n,c)>0}),yc=cl("<=",function(A,n,c){return n<=c},function(A,n,c,d){return d.compare(n,c)<=0}),Ea=cl(">=",function(A,n,c){return n>=c},function(A,n,c,d){return d.compare(n,c)>=0});class dA{constructor(n,c,d){this.type=Ia,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=c}static parse(n,c){if(n.length!==2)return c.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");const m=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,zt);if(!m)return null;const v=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,zt);if(!v)return null;let w=null;return d.locale&&(w=c.parse(d.locale,1,Ft),!w)?null:new dA(m,v,w)}evaluate(n){return new Lr(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class hl{constructor(n,c,d,m,v){this.type=Ft,this.number=n,this.locale=c,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,c){if(n.length!==3)return c.error("Expected two arguments.");const d=c.parse(n[1],1,tt);if(!d)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=c.parse(m.locale,1,Ft),!v))return null;let w=null;if(m.currency&&(w=c.parse(m.currency,1,Ft),!w))return null;let M=null;if(m["min-fraction-digits"]&&(M=c.parse(m["min-fraction-digits"],1,tt),!M))return null;let F=null;return m["max-fraction-digits"]&&(F=c.parse(m["max-fraction-digits"],1,tt),!F)?null:new hl(d,v,w,M,F)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class vc{constructor(n){this.type=Ht,this.sections=n}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");const m=[];let v=!1;for(let w=1;w<=n.length-1;++w){const M=n[w];if(v&&typeof M=="object"&&!Array.isArray(M)){v=!1;let F=null;if(M["font-scale"]&&(F=c.parse(M["font-scale"],1,tt),!F))return null;let S=null;if(M["text-font"]&&(S=c.parse(M["text-font"],1,Ir(Ft)),!S))return null;let P=null;if(M["text-color"]&&(P=c.parse(M["text-color"],1,ti),!P))return null;let k=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!nl.includes(M["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(k=c.parse(M["vertical-align"],1,Ft),!k)return null}const X=m[m.length-1];X.scale=F,X.font=S,X.textColor=P,X.verticalAlign=k}else{const F=c.parse(n[w],1,Vt);if(!F)return null;const S=F.type.kind;if(S!=="string"&&S!=="value"&&S!=="null"&&S!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new vc(m)}evaluate(n){return new Wn(this.sections.map(c=>{const d=c.content.evaluate(n);return Ni(d)===Et?new Ka("",d,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(n):null):new Ka($a(d),null,c.scale?c.scale.evaluate(n):null,c.font?c.font.evaluate(n).join(","):null,c.textColor?c.textColor.evaluate(n):null,c.verticalAlign?c.verticalAlign.evaluate(n):null)}))}eachChild(n){for(const c of this.sections)n(c.content),c.scale&&n(c.scale),c.font&&n(c.font),c.textColor&&n(c.textColor),c.verticalAlign&&n(c.verticalAlign)}outputDefined(){return!1}}class fA{constructor(n){this.type=Et,this.input=n}static parse(n,c){if(n.length!==2)return c.error("Expected two arguments.");const d=c.parse(n[1],1,Ft);return d?new fA(d):c.error("No image name provided.")}evaluate(n){const c=this.input.evaluate(n),d=oa.fromString(c);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(c)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class bu{constructor(n){this.type=tt,this.input=n}static parse(n,c){if(n.length!==2)return c.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=c.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${Ur(d.type)} instead.`):new bu(d):null}evaluate(n){const c=this.input.evaluate(n);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new Si(`Expected value to be of type string or array, but found ${Ur(Ni(c))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const qa=8192;function a2(A,n){const c=(180+A[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(c*m*qa),Math.round(d*m*qa)]}function yu(A,n){const c=Math.pow(2,n.z);return[(m=(A[0]/qa+n.x)/c,360*m-180),(d=(A[1]/qa+n.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function Ws(A,n){A[0]=Math.min(A[0],n[0]),A[1]=Math.min(A[1],n[1]),A[2]=Math.max(A[2],n[0]),A[3]=Math.max(A[3],n[1])}function gA(A,n){return!(A[0]<=n[0]||A[2]>=n[2]||A[1]<=n[1]||A[3]>=n[3])}function cf(A,n,c){const d=A[0]-n[0],m=A[1]-n[1],v=A[0]-c[0],w=A[1]-c[1];return d*w-v*m==0&&d*v<=0&&m*w<=0}function pA(A,n,c,d){return(m=[d[0]-c[0],d[1]-c[1]])[0]*(v=[n[0]-A[0],n[1]-A[1]])[1]-m[1]*v[0]!=0&&!(!uf(A,n,c,d)||!uf(c,d,A,n));var m,v}function s2(A,n,c){for(const d of c)for(let m=0;m<d.length-1;++m)if(pA(A,n,d[m],d[m+1]))return!0;return!1}function wo(A,n,c=!1){let d=!1;for(const M of n)for(let F=0;F<M.length-1;F++){if(cf(A,M[F],M[F+1]))return c;(v=M[F])[1]>(m=A)[1]!=(w=M[F+1])[1]>m[1]&&m[0]<(w[0]-v[0])*(m[1]-v[1])/(w[1]-v[1])+v[0]&&(d=!d)}var m,v,w;return d}function o2(A,n){for(const c of n)if(wo(A,c))return!0;return!1}function hf(A,n){for(const c of A)if(!wo(c,n))return!1;for(let c=0;c<A.length-1;++c)if(s2(A[c],A[c+1],n))return!1;return!0}function l2(A,n){for(const c of n)if(hf(A,c))return!0;return!1}function uf(A,n,c,d){const m=d[0]-c[0],v=d[1]-c[1],w=(A[0]-c[0])*v-m*(A[1]-c[1]),M=(n[0]-c[0])*v-m*(n[1]-c[1]);return w>0&&M<0||w<0&&M>0}function vu(A,n,c){const d=[];for(let m=0;m<A.length;m++){const v=[];for(let w=0;w<A[m].length;w++){const M=a2(A[m][w],c);Ws(n,M),v.push(M)}d.push(v)}return d}function xu(A,n,c){const d=[];for(let m=0;m<A.length;m++){const v=vu(A[m],n,c);d.push(v)}return d}function wu(A,n,c,d){if(A[0]<c[0]||A[0]>c[2]){const m=.5*d;let v=A[0]-c[0]>m?-d:c[0]-A[0]>m?d:0;v===0&&(v=A[0]-c[2]>m?-d:c[2]-A[0]>m?d:0),A[0]+=v}Ws(n,A)}function Bu(A,n,c,d){const m=Math.pow(2,d.z)*qa,v=[d.x*qa,d.y*qa],w=[];for(const M of A)for(const F of M){const S=[F.x+v[0],F.y+v[1]];wu(S,n,c,m),w.push(S)}return w}function df(A,n,c,d){const m=Math.pow(2,d.z)*qa,v=[d.x*qa,d.y*qa],w=[];for(const F of A){const S=[];for(const P of F){const k=[P.x+v[0],P.y+v[1]];Ws(n,k),S.push(k)}w.push(S)}if(n[2]-n[0]<=m/2){(M=n)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const F of w)for(const S of F)wu(S,n,c,m)}var M;return w}class Bo{constructor(n,c){this.type=zt,this.geojson=n,this.geometries=c}static parse(n,c){if(n.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(sA(n[1])){const d=n[1];if(d.type==="FeatureCollection"){const m=[];for(const v of d.features){const{type:w,coordinates:M}=v.geometry;w==="Polygon"&&m.push(M),w==="MultiPolygon"&&m.push(...M)}if(m.length)return new Bo(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Bo(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Bo(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(c,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(d.type==="Polygon"){const M=vu(d.coordinates,v,w),F=Bu(c.geometry(),m,v,w);if(!gA(m,v))return!1;for(const S of F)if(!wo(S,M))return!1}if(d.type==="MultiPolygon"){const M=xu(d.coordinates,v,w),F=Bu(c.geometry(),m,v,w);if(!gA(m,v))return!1;for(const S of F)if(!o2(S,M))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(c,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(d.type==="Polygon"){const M=vu(d.coordinates,v,w),F=df(c.geometry(),m,v,w);if(!gA(m,v))return!1;for(const S of F)if(!hf(S,M))return!1}if(d.type==="MultiPolygon"){const M=xu(d.coordinates,v,w),F=df(c.geometry(),m,v,w);if(!gA(m,v))return!1;for(const S of F)if(!l2(S,M))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let ff=class{constructor(A=[],n=(c,d)=>c<d?-1:c>d?1:0){if(this.data=A,this.length=this.data.length,this.compare=n,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:n,compare:c}=this,d=n[A];for(;A>0;){const m=A-1>>1,v=n[m];if(c(d,v)>=0)break;n[A]=v,A=m}n[A]=d}_down(A){const{data:n,compare:c}=this,d=this.length>>1,m=n[A];for(;A<d;){let v=1+(A<<1);const w=v+1;if(w<this.length&&c(n[w],n[v])<0&&(v=w),c(n[v],m)>=0)break;n[A]=n[v],A=v}n[A]=m}};function xc(A,n,c=0,d=A.length-1,m=A2){for(;d>c;){if(d-c>600){const F=d-c+1,S=n-c+1,P=Math.log(F),k=.5*Math.exp(2*P/3),X=.5*Math.sqrt(P*k*(F-k)/F)*(S-F/2<0?-1:1);xc(A,n,Math.max(c,Math.floor(n-S*k/F+X)),Math.min(d,Math.floor(n+(F-S)*k/F+X)),m)}const v=A[n];let w=c,M=d;for(mA(A,c,n),m(A[d],v)>0&&mA(A,c,d);w<M;){for(mA(A,w,M),w++,M--;m(A[w],v)<0;)w++;for(;m(A[M],v)>0;)M--}m(A[c],v)===0?mA(A,c,M):(M++,mA(A,M,d)),M<=n&&(c=M+1),n<=M&&(d=M-1)}}function mA(A,n,c){const d=A[n];A[n]=A[c],A[c]=d}function A2(A,n){return A<n?-1:A>n?1:0}function wc(A,n){if(A.length<=1)return[A];const c=[];let d,m;for(const v of A){const w=pf(v);w!==0&&(v.area=Math.abs(w),m===void 0&&(m=w<0),m===w<0?(d&&c.push(d),d=[v]):d.push(v))}if(d&&c.push(d),n>1)for(let v=0;v<c.length;v++)c[v].length<=n||(xc(c[v],n,1,c[v].length-1,gf),c[v]=c[v].slice(0,n));return c}function gf(A,n){return n.area-A.area}function pf(A){let n=0;for(let c,d,m=0,v=A.length,w=v-1;m<v;w=m++)c=A[m],d=A[w],n+=(d.x-c.x)*(c.y+d.y);return n}const mf=1/298.257223563,_f=mf*(2-mf),Cu=Math.PI/180;class Bc{constructor(n){const c=6378.137*Cu*1e3,d=Math.cos(n*Cu),m=1/(1-_f*(1-d*d)),v=Math.sqrt(m);this.kx=c*v*d,this.ky=c*v*m*(1-_f)}distance(n,c){const d=this.wrap(n[0]-c[0])*this.kx,m=(n[1]-c[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(n,c){let d,m,v,w,M=1/0;for(let F=0;F<n.length-1;F++){let S=n[F][0],P=n[F][1],k=this.wrap(n[F+1][0]-S)*this.kx,X=(n[F+1][1]-P)*this.ky,j=0;k===0&&X===0||(j=(this.wrap(c[0]-S)*this.kx*k+(c[1]-P)*this.ky*X)/(k*k+X*X),j>1?(S=n[F+1][0],P=n[F+1][1]):j>0&&(S+=k/this.kx*j,P+=X/this.ky*j)),k=this.wrap(c[0]-S)*this.kx,X=(c[1]-P)*this.ky;const $=k*k+X*X;$<M&&(M=$,d=S,m=P,v=F,w=j)}return{point:[d,m],index:v,t:Math.max(0,Math.min(1,w))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function bf(A,n){return n[0]-A[0]}function Cc(A){return A[1]-A[0]+1}function bs(A,n){return A[1]>=A[0]&&A[1]<n}function Mc(A,n){if(A[0]>A[1])return[null,null];const c=Cc(A);if(n){if(c===2)return[A,null];const m=Math.floor(c/2);return[[A[0],A[0]+m],[A[0]+m,A[1]]]}if(c===1)return[A,null];const d=Math.floor(c/2)-1;return[[A[0],A[0]+d],[A[0]+d+1,A[1]]]}function Mu(A,n){if(!bs(n,A.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)Ws(c,A[d]);return c}function Ru(A){const n=[1/0,1/0,-1/0,-1/0];for(const c of A)for(const d of c)Ws(n,d);return n}function yf(A){return A[0]!==-1/0&&A[1]!==-1/0&&A[2]!==1/0&&A[3]!==1/0}function Iu(A,n,c){if(!yf(A)||!yf(n))return NaN;let d=0,m=0;return A[2]<n[0]&&(d=n[0]-A[2]),A[0]>n[2]&&(d=A[0]-n[2]),A[1]>n[3]&&(m=A[1]-n[3]),A[3]<n[1]&&(m=n[1]-A[3]),c.distance([0,0],[d,m])}function Pr(A,n,c){const d=c.pointOnLine(n,A);return c.distance(A,d.point)}function Uu(A,n,c,d,m){const v=Math.min(Pr(A,[c,d],m),Pr(n,[c,d],m)),w=Math.min(Pr(c,[A,n],m),Pr(d,[A,n],m));return Math.min(v,w)}function c2(A,n,c,d,m){if(!bs(n,A.length)||!bs(d,c.length))return 1/0;let v=1/0;for(let w=n[0];w<n[1];++w){const M=A[w],F=A[w+1];for(let S=d[0];S<d[1];++S){const P=c[S],k=c[S+1];if(pA(M,F,P,k))return 0;v=Math.min(v,Uu(M,F,P,k,m))}}return v}function h2(A,n,c,d,m){if(!bs(n,A.length)||!bs(d,c.length))return NaN;let v=1/0;for(let w=n[0];w<=n[1];++w)for(let M=d[0];M<=d[1];++M)if(v=Math.min(v,m.distance(A[w],c[M])),v===0)return v;return v}function u2(A,n,c){if(wo(A,n,!0))return 0;let d=1/0;for(const m of n){const v=m[0],w=m[m.length-1];if(v!==w&&(d=Math.min(d,Pr(A,[w,v],c)),d===0))return d;const M=c.pointOnLine(m,A);if(d=Math.min(d,c.distance(A,M.point)),d===0)return d}return d}function d2(A,n,c,d){if(!bs(n,A.length))return NaN;for(let v=n[0];v<=n[1];++v)if(wo(A[v],c,!0))return 0;let m=1/0;for(let v=n[0];v<n[1];++v){const w=A[v],M=A[v+1];for(const F of c)for(let S=0,P=F.length,k=P-1;S<P;k=S++){const X=F[k],j=F[S];if(pA(w,M,X,j))return 0;m=Math.min(m,Uu(w,M,X,j,d))}}return m}function vf(A,n){for(const c of A)for(const d of c)if(wo(d,n,!0))return!0;return!1}function f2(A,n,c,d=1/0){const m=Ru(A),v=Ru(n);if(d!==1/0&&Iu(m,v,c)>=d)return d;if(gA(m,v)){if(vf(A,n))return 0}else if(vf(n,A))return 0;let w=1/0;for(const M of A)for(let F=0,S=M.length,P=S-1;F<S;P=F++){const k=M[P],X=M[F];for(const j of n)for(let $=0,ee=j.length,fe=ee-1;$<ee;fe=$++){const be=j[fe],Ye=j[$];if(pA(k,X,be,Ye))return 0;w=Math.min(w,Uu(k,X,be,Ye,c))}}return w}function xf(A,n,c,d,m,v){if(!v)return;const w=Iu(Mu(d,v),m,c);w<n&&A.push([w,v,[0,0]])}function Rc(A,n,c,d,m,v,w){if(!v||!w)return;const M=Iu(Mu(d,v),Mu(m,w),c);M<n&&A.push([M,v,w])}function Ic(A,n,c,d,m=1/0){let v=Math.min(d.distance(A[0],c[0][0]),m);if(v===0)return v;const w=new ff([[0,[0,A.length-1],[0,0]]],bf),M=Ru(c);for(;w.length>0;){const F=w.pop();if(F[0]>=v)continue;const S=F[1],P=n?50:100;if(Cc(S)<=P){if(!bs(S,A.length))return NaN;if(n){const k=d2(A,S,c,d);if(isNaN(k)||k===0)return k;v=Math.min(v,k)}else for(let k=S[0];k<=S[1];++k){const X=u2(A[k],c,d);if(v=Math.min(v,X),v===0)return 0}}else{const k=Mc(S,n);xf(w,v,d,A,M,k[0]),xf(w,v,d,A,M,k[1])}}return v}function Uc(A,n,c,d,m,v=1/0){let w=Math.min(v,m.distance(A[0],c[0]));if(w===0)return w;const M=new ff([[0,[0,A.length-1],[0,c.length-1]]],bf);for(;M.length>0;){const F=M.pop();if(F[0]>=w)continue;const S=F[1],P=F[2],k=n?50:100,X=d?50:100;if(Cc(S)<=k&&Cc(P)<=X){if(!bs(S,A.length)&&bs(P,c.length))return NaN;let j;if(n&&d)j=c2(A,S,c,P,m),w=Math.min(w,j);else if(n&&!d){const $=A.slice(S[0],S[1]+1);for(let ee=P[0];ee<=P[1];++ee)if(j=Pr(c[ee],$,m),w=Math.min(w,j),w===0)return w}else if(!n&&d){const $=c.slice(P[0],P[1]+1);for(let ee=S[0];ee<=S[1];++ee)if(j=Pr(A[ee],$,m),w=Math.min(w,j),w===0)return w}else j=h2(A,S,c,P,m),w=Math.min(w,j)}else{const j=Mc(S,n),$=Mc(P,d);Rc(M,w,m,A,c,j[0],$[0]),Rc(M,w,m,A,c,j[0],$[1]),Rc(M,w,m,A,c,j[1],$[0]),Rc(M,w,m,A,c,j[1],$[1])}}return w}function Eu(A){return A.type==="MultiPolygon"?A.coordinates.map(n=>({type:"Polygon",coordinates:n})):A.type==="MultiLineString"?A.coordinates.map(n=>({type:"LineString",coordinates:n})):A.type==="MultiPoint"?A.coordinates.map(n=>({type:"Point",coordinates:n})):[A]}class Co{constructor(n,c){this.type=tt,this.geojson=n,this.geometries=c}static parse(n,c){if(n.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(sA(n[1])){const d=n[1];if(d.type==="FeatureCollection")return new Co(d,d.features.map(m=>Eu(m.geometry)).flat());if(d.type==="Feature")return new Co(d,Eu(d.geometry));if("type"in d&&"coordinates"in d)return new Co(d,Eu(d))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(c,d){const m=c.geometry(),v=m.flat().map(F=>yu([F.x,F.y],c.canonical));if(m.length===0)return NaN;const w=new Bc(v[0][1]);let M=1/0;for(const F of d){switch(F.type){case"Point":M=Math.min(M,Uc(v,!1,[F.coordinates],!1,w,M));break;case"LineString":M=Math.min(M,Uc(v,!1,F.coordinates,!0,w,M));break;case"Polygon":M=Math.min(M,Ic(v,!1,F.coordinates,w,M))}if(M===0)return M}return M}(n,this.geometries);if(n.geometryType()==="LineString")return function(c,d){const m=c.geometry(),v=m.flat().map(F=>yu([F.x,F.y],c.canonical));if(m.length===0)return NaN;const w=new Bc(v[0][1]);let M=1/0;for(const F of d){switch(F.type){case"Point":M=Math.min(M,Uc(v,!0,[F.coordinates],!1,w,M));break;case"LineString":M=Math.min(M,Uc(v,!0,F.coordinates,!0,w,M));break;case"Polygon":M=Math.min(M,Ic(v,!0,F.coordinates,w,M))}if(M===0)return M}return M}(n,this.geometries);if(n.geometryType()==="Polygon")return function(c,d){const m=c.geometry();if(m.length===0||m[0].length===0)return NaN;const v=wc(m,0).map(F=>F.map(S=>S.map(P=>yu([P.x,P.y],c.canonical)))),w=new Bc(v[0][0][0][1]);let M=1/0;for(const F of d)for(const S of v){switch(F.type){case"Point":M=Math.min(M,Ic([F.coordinates],!1,S,w,M));break;case"LineString":M=Math.min(M,Ic(F.coordinates,!0,S,w,M));break;case"Polygon":M=Math.min(M,f2(S,F.coordinates,w,M))}if(M===0)return M}return M}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ul={"==":_c,"!=":_u,">":bc,"<":n2,">=":Ea,"<=":yc,array:ya,at:AA,boolean:ya,case:fc,coalesce:uA,collator:dA,format:vc,image:fA,in:Ua,"index-of":sl,interpolate:Jn,"interpolate-hcl":Jn,"interpolate-lab":Jn,length:bu,let:al,literal:qs,match:dc,number:ya,"number-format":hl,object:ya,slice:ol,step:hA,string:ya,"to-boolean":Jr,"to-color":Jr,"to-number":Jr,"to-string":Jr,var:Qr,within:Bo,distance:Co};class va{constructor(n,c,d,m){this.name=n,this.type=c,this._evaluate=d,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,c){const d=n[0],m=va.definitions[d];if(!m)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,M=w.filter(([S])=>!Array.isArray(S)||S.length===n.length-1);let F=null;for(const[S,P]of M){F=new wr(c.registry,Ec,c.path,null,c.scope);const k=[];let X=!1;for(let j=1;j<n.length;j++){const $=n[j],ee=Array.isArray(S)?S[j-1]:S.type,fe=F.parse($,1+k.length,ee);if(!fe){X=!0;break}k.push(fe)}if(!X)if(Array.isArray(S)&&S.length!==k.length)F.error(`Expected ${S.length} arguments, but found ${k.length} instead.`);else{for(let j=0;j<k.length;j++){const $=Array.isArray(S)?S[j]:S.type,ee=k[j];F.concat(j+1).checkSubtype($,ee.type)}if(F.errors.length===0)return new va(d,v,P,k)}}if(M.length===1)c.errors.push(...F.errors);else{const S=(M.length?M:w).map(([k])=>{return X=k,Array.isArray(X)?`(${X.map(Ur).join(", ")})`:`(${Ur(X.type)}...)`;var X}).join(" | "),P=[];for(let k=1;k<n.length;k++){const X=c.parse(n[k],1+P.length);if(!X)return null;P.push(Ur(X.type))}c.error(`Expected arguments of type ${S}, but found (${P.join(", ")}) instead.`)}return null}static register(n,c){va.definitions=c;for(const d in c)n[d]=va}}function wf(A,[n,c,d,m]){n=n.evaluate(A),c=c.evaluate(A),d=d.evaluate(A);const v=m?m.evaluate(A):1,w=$s(n,c,d,v);if(w)throw new Si(w);return new Er(n/255,c/255,d/255,v,!1)}function Bf(A,n){return A in n}function Fu(A,n){const c=n[A];return c===void 0?null:c}function Mo(A){return{type:A}}function Ec(A){if(A instanceof Qr)return Ec(A.boundExpression);if(A instanceof va&&A.name==="error"||A instanceof dA||A instanceof Bo||A instanceof Co)return!1;const n=A instanceof Jr||A instanceof ya;let c=!0;return A.eachChild(d=>{c=n?c&&Ec(d):c&&d instanceof qs}),!!c&&Fc(A)&&Tc(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fc(A){if(A instanceof va&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Bo||A instanceof Co)return!1;let n=!0;return A.eachChild(c=>{n&&!Fc(c)&&(n=!1)}),n}function _A(A){if(A instanceof va&&A.name==="feature-state")return!1;let n=!0;return A.eachChild(c=>{n&&!_A(c)&&(n=!1)}),n}function Tc(A,n){if(A instanceof va&&n.indexOf(A.name)>=0)return!1;let c=!0;return A.eachChild(d=>{c&&!Tc(d,n)&&(c=!1)}),c}function Cf(A){return{result:"success",value:A}}function dl(A){return{result:"error",value:A}}function fl(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Mf(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Tu(A){return!!A.expression&&A.expression.interpolated}function Or(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function Sc(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function g2(A){return A}function Nc(A,n){const c=n.type==="color",d=A.stops&&typeof A.stops[0][0]=="object",m=d||!(d||A.property!==void 0),v=A.type||(Tu(n)?"exponential":"interval");if(c||n.type==="padding"){const P=c?Er.parse:En.parse;(A=mt({},A)).stops&&(A.stops=A.stops.map(k=>[k[0],P(k[1])])),A.default=P(A.default?A.default:n.default)}if(A.colorSpace&&(w=A.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${A.colorSpace}"`);var w;let M,F,S;if(v==="exponential")M=Su;else if(v==="interval")M=m2;else if(v==="categorical"){M=p2,F=Object.create(null);for(const P of A.stops)F[P[0]]=P[1];S=typeof A.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);M=_2}if(d){const P={},k=[];for(let $=0;$<A.stops.length;$++){const ee=A.stops[$],fe=ee[0].zoom;P[fe]===void 0&&(P[fe]={zoom:fe,type:A.type,property:A.property,default:A.default,stops:[]},k.push(fe)),P[fe].stops.push([ee[0].value,ee[1]])}const X=[];for(const $ of k)X.push([P[$].zoom,Nc(P[$],n)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:Jn.interpolationFactor.bind(void 0,j),zoomStops:X.map($=>$[0]),evaluate:({zoom:$},ee)=>Su({stops:X,base:A.base},n,$).evaluate($,ee)}}if(m){const P=v==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Jn.interpolationFactor.bind(void 0,P),zoomStops:A.stops.map(k=>k[0]),evaluate:({zoom:k})=>M(A,n,k,F,S)}}return{kind:"source",evaluate(P,k){const X=k&&k.properties?k.properties[A.property]:void 0;return X===void 0?bA(A.default,n.default):M(A,n,X,F,S)}}}function bA(A,n,c){return A!==void 0?A:n!==void 0?n:c!==void 0?c:void 0}function p2(A,n,c,d,m){return bA(typeof c===m?d[c]:void 0,A.default,n.default)}function m2(A,n,c){if(Or(c)!=="number")return bA(A.default,n.default);const d=A.stops.length;if(d===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[d-1][0])return A.stops[d-1][1];const m=cA(A.stops.map(v=>v[0]),c);return A.stops[m][1]}function Su(A,n,c){const d=A.base!==void 0?A.base:1;if(Or(c)!=="number")return bA(A.default,n.default);const m=A.stops.length;if(m===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[m-1][0])return A.stops[m-1][1];const v=cA(A.stops.map(P=>P[0]),c),w=function(P,k,X,j){const $=j-X,ee=P-X;return $===0?0:k===1?ee/$:(Math.pow(k,ee)-1)/(Math.pow(k,$)-1)}(c,d,A.stops[v][0],A.stops[v+1][0]),M=A.stops[v][1],F=A.stops[v+1][1],S=di[n.type]||g2;return typeof M.evaluate=="function"?{evaluate(...P){const k=M.evaluate.apply(void 0,P),X=F.evaluate.apply(void 0,P);if(k!==void 0&&X!==void 0)return S(k,X,w,A.colorSpace)}}:S(M,F,w,A.colorSpace)}function _2(A,n,c){switch(n.type){case"color":c=Er.parse(c);break;case"formatted":c=Wn.fromString(c.toString());break;case"resolvedImage":c=oa.fromString(c.toString());break;case"padding":c=En.parse(c);break;default:Or(c)===n.type||n.type==="enum"&&n.values[c]||(c=void 0)}return bA(c,A.default,n.default)}va.register(ul,{error:[{kind:"error"},[Ft],(A,[n])=>{throw new Si(n.evaluate(A))}],typeof:[Ft,[Vt],(A,[n])=>Ur(Ni(n.evaluate(A)))],"to-rgba":[Ir(tt,4),[ti],(A,[n])=>{const[c,d,m,v]=n.evaluate(A).rgb;return[255*c,255*d,255*m,v]}],rgb:[ti,[tt,tt,tt],wf],rgba:[ti,[tt,tt,tt,tt],wf],has:{type:zt,overloads:[[[Ft],(A,[n])=>Bf(n.evaluate(A),A.properties())],[[Ft,yr],(A,[n,c])=>Bf(n.evaluate(A),c.evaluate(A))]]},get:{type:Vt,overloads:[[[Ft],(A,[n])=>Fu(n.evaluate(A),A.properties())],[[Ft,yr],(A,[n,c])=>Fu(n.evaluate(A),c.evaluate(A))]]},"feature-state":[Vt,[Ft],(A,[n])=>Fu(n.evaluate(A),A.featureState||{})],properties:[yr,[],A=>A.properties()],"geometry-type":[Ft,[],A=>A.geometryType()],id:[Vt,[],A=>A.id()],zoom:[tt,[],A=>A.globals.zoom],"heatmap-density":[tt,[],A=>A.globals.heatmapDensity||0],"line-progress":[tt,[],A=>A.globals.lineProgress||0],accumulated:[Vt,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[tt,Mo(tt),(A,n)=>{let c=0;for(const d of n)c+=d.evaluate(A);return c}],"*":[tt,Mo(tt),(A,n)=>{let c=1;for(const d of n)c*=d.evaluate(A);return c}],"-":{type:tt,overloads:[[[tt,tt],(A,[n,c])=>n.evaluate(A)-c.evaluate(A)],[[tt],(A,[n])=>-n.evaluate(A)]]},"/":[tt,[tt,tt],(A,[n,c])=>n.evaluate(A)/c.evaluate(A)],"%":[tt,[tt,tt],(A,[n,c])=>n.evaluate(A)%c.evaluate(A)],ln2:[tt,[],()=>Math.LN2],pi:[tt,[],()=>Math.PI],e:[tt,[],()=>Math.E],"^":[tt,[tt,tt],(A,[n,c])=>Math.pow(n.evaluate(A),c.evaluate(A))],sqrt:[tt,[tt],(A,[n])=>Math.sqrt(n.evaluate(A))],log10:[tt,[tt],(A,[n])=>Math.log(n.evaluate(A))/Math.LN10],ln:[tt,[tt],(A,[n])=>Math.log(n.evaluate(A))],log2:[tt,[tt],(A,[n])=>Math.log(n.evaluate(A))/Math.LN2],sin:[tt,[tt],(A,[n])=>Math.sin(n.evaluate(A))],cos:[tt,[tt],(A,[n])=>Math.cos(n.evaluate(A))],tan:[tt,[tt],(A,[n])=>Math.tan(n.evaluate(A))],asin:[tt,[tt],(A,[n])=>Math.asin(n.evaluate(A))],acos:[tt,[tt],(A,[n])=>Math.acos(n.evaluate(A))],atan:[tt,[tt],(A,[n])=>Math.atan(n.evaluate(A))],min:[tt,Mo(tt),(A,n)=>Math.min(...n.map(c=>c.evaluate(A)))],max:[tt,Mo(tt),(A,n)=>Math.max(...n.map(c=>c.evaluate(A)))],abs:[tt,[tt],(A,[n])=>Math.abs(n.evaluate(A))],round:[tt,[tt],(A,[n])=>{const c=n.evaluate(A);return c<0?-Math.round(-c):Math.round(c)}],floor:[tt,[tt],(A,[n])=>Math.floor(n.evaluate(A))],ceil:[tt,[tt],(A,[n])=>Math.ceil(n.evaluate(A))],"filter-==":[zt,[Ft,Vt],(A,[n,c])=>A.properties()[n.value]===c.value],"filter-id-==":[zt,[Vt],(A,[n])=>A.id()===n.value],"filter-type-==":[zt,[Ft],(A,[n])=>A.geometryType()===n.value],"filter-<":[zt,[Ft,Vt],(A,[n,c])=>{const d=A.properties()[n.value],m=c.value;return typeof d==typeof m&&d<m}],"filter-id-<":[zt,[Vt],(A,[n])=>{const c=A.id(),d=n.value;return typeof c==typeof d&&c<d}],"filter->":[zt,[Ft,Vt],(A,[n,c])=>{const d=A.properties()[n.value],m=c.value;return typeof d==typeof m&&d>m}],"filter-id->":[zt,[Vt],(A,[n])=>{const c=A.id(),d=n.value;return typeof c==typeof d&&c>d}],"filter-<=":[zt,[Ft,Vt],(A,[n,c])=>{const d=A.properties()[n.value],m=c.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[zt,[Vt],(A,[n])=>{const c=A.id(),d=n.value;return typeof c==typeof d&&c<=d}],"filter->=":[zt,[Ft,Vt],(A,[n,c])=>{const d=A.properties()[n.value],m=c.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[zt,[Vt],(A,[n])=>{const c=A.id(),d=n.value;return typeof c==typeof d&&c>=d}],"filter-has":[zt,[Vt],(A,[n])=>n.value in A.properties()],"filter-has-id":[zt,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[zt,[Ir(Ft)],(A,[n])=>n.value.indexOf(A.geometryType())>=0],"filter-id-in":[zt,[Ir(Vt)],(A,[n])=>n.value.indexOf(A.id())>=0],"filter-in-small":[zt,[Ft,Ir(Vt)],(A,[n,c])=>c.value.indexOf(A.properties()[n.value])>=0],"filter-in-large":[zt,[Ft,Ir(Vt)],(A,[n,c])=>function(d,m,v,w){for(;v<=w;){const M=v+w>>1;if(m[M]===d)return!0;m[M]>d?w=M-1:v=M+1}return!1}(A.properties()[n.value],c.value,0,c.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(A,[n,c])=>n.evaluate(A)&&c.evaluate(A)],[Mo(zt),(A,n)=>{for(const c of n)if(!c.evaluate(A))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(A,[n,c])=>n.evaluate(A)||c.evaluate(A)],[Mo(zt),(A,n)=>{for(const c of n)if(c.evaluate(A))return!0;return!1}]]},"!":[zt,[zt],(A,[n])=>!n.evaluate(A)],"is-supported-script":[zt,[Ft],(A,[n])=>{const c=A.globals&&A.globals.isSupportedScript;return!c||c(n.evaluate(A))}],upcase:[Ft,[Ft],(A,[n])=>n.evaluate(A).toUpperCase()],downcase:[Ft,[Ft],(A,[n])=>n.evaluate(A).toLowerCase()],concat:[Ft,Mo(Vt),(A,n)=>n.map(c=>$a(c.evaluate(A))).join("")],"resolved-locale":[Ft,[Ia],(A,[n])=>n.evaluate(A).resolvedLocale()]});class Nu{constructor(n,c){var d;this.expression=n,this._warningHistory={},this._evaluator=new Hr,this._defaultValue=c?(d=c).type==="color"&&Sc(d.default)?new Er(0,0,0,0):d.type==="color"?Er.parse(d.default)||null:d.type==="padding"?En.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?bn.parse(d.default)||null:d.type==="projectionDefinition"?Zn.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(n,c,d,m,v,w){return this._evaluator.globals=n,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(n,c,d,m,v,w){this._evaluator.globals=n,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Si(`Expected value to be one of ${Object.keys(this._enumValues).map(F=>JSON.stringify(F)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function Ro(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in ul}function yA(A,n){const c=new wr(ul,Ec,[],n?function(m){const v={color:ti,string:Ft,number:tt,enum:Ft,boolean:zt,formatted:Ht,padding:De,projectionDefinition:oi,resolvedImage:Et,variableAnchorOffsetCollection:nr};return m.type==="array"?Ir(v[m.value]||Vt,m.length):v[m.type]}(n):void 0),d=c.parse(A,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Cf(new Nu(d,n)):dl(c.errors)}class Yu{constructor(n,c){this.kind=n,this._styleExpression=c,this.isStateDependent=n!=="constant"&&!_A(c.expression)}evaluateWithoutErrorHandling(n,c,d,m,v,w){return this._styleExpression.evaluateWithoutErrorHandling(n,c,d,m,v,w)}evaluate(n,c,d,m,v,w){return this._styleExpression.evaluate(n,c,d,m,v,w)}}class Pu{constructor(n,c,d,m){this.kind=n,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=n!=="camera"&&!_A(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,c,d,m,v,w){return this._styleExpression.evaluateWithoutErrorHandling(n,c,d,m,v,w)}evaluate(n,c,d,m,v,w){return this._styleExpression.evaluate(n,c,d,m,v,w)}interpolationFactor(n,c,d){return this.interpolationType?Jn.interpolationFactor(this.interpolationType,n,c,d):0}}function Rf(A,n){const c=yA(A,n);if(c.result==="error")return c;const d=c.value.expression,m=Fc(d);if(!m&&!fl(n))return dl([new Kt("","data expressions not supported")]);const v=Tc(d,["zoom"]);if(!v&&!Mf(n))return dl([new Kt("","zoom expressions not supported")]);const w=Pc(d);return w||v?w instanceof Kt?dl([w]):w instanceof Jn&&!Tu(n)?dl([new Kt("",'"interpolate" expressions cannot be used with this property')]):Cf(w?new Pu(m?"camera":"composite",c.value,w.labels,w instanceof Jn?w.interpolation:void 0):new Yu(m?"constant":"source",c.value)):dl([new Kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yc{constructor(n,c){this._parameters=n,this._specification=c,mt(this,Nc(this._parameters,this._specification))}static deserialize(n){return new Yc(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Pc(A){let n=null;if(A instanceof al)n=Pc(A.result);else if(A instanceof uA){for(const c of A.args)if(n=Pc(c),n)break}else(A instanceof hA||A instanceof Jn)&&A.input instanceof va&&A.input.name==="zoom"&&(n=A);return n instanceof Kt||A.eachChild(c=>{const d=Pc(c);d instanceof Kt?n=d:!n&&d?n=new Kt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new Kt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Lc(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const n of A.slice(1))if(!Lc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const If={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Lu(A){if(A==null)return{filter:()=>!0,needGeometry:!1};Lc(A)||(A=vA(A));const n=yA(A,If);if(n.result==="error")throw new Error(n.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,m)=>n.value.evaluate(c,d,{},m),needGeometry:Qu(A)}}function b2(A,n){return A<n?-1:A>n?1:0}function Qu(A){if(!Array.isArray(A))return!1;if(A[0]==="within"||A[0]==="distance")return!0;for(let n=1;n<A.length;n++)if(Qu(A[n]))return!0;return!1}function vA(A){if(!A)return!0;const n=A[0];return A.length<=1?n!=="any":n==="=="?Qc(A[1],A[2],"=="):n==="!="?gl(Qc(A[1],A[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Qc(A[1],A[2],n):n==="any"?(c=A.slice(1),["any"].concat(c.map(vA))):n==="all"?["all"].concat(A.slice(1).map(vA)):n==="none"?["all"].concat(A.slice(1).map(vA).map(gl)):n==="in"?ku(A[1],A.slice(2)):n==="!in"?gl(ku(A[1],A.slice(2))):n==="has"?kc(A[1]):n!=="!has"||gl(kc(A[1]));var c}function Qc(A,n,c){switch(A){case"$type":return[`filter-type-${c}`,n];case"$id":return[`filter-id-${c}`,n];default:return[`filter-${c}`,A,n]}}function ku(A,n){if(n.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(c=>typeof c!=typeof n[0])?["filter-in-large",A,["literal",n.sort(b2)]]:["filter-in-small",A,["literal",n]]}}function kc(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function gl(A){return["!",A]}function xA(A){const n=typeof A;if(n==="number"||n==="boolean"||n==="string"||A==null)return JSON.stringify(A);if(Array.isArray(A)){let m="[";for(const v of A)m+=`${xA(v)},`;return`${m}]`}const c=Object.keys(A).sort();let d="{";for(let m=0;m<c.length;m++)d+=`${JSON.stringify(c[m])}:${xA(A[c[m]])},`;return`${d}}`}function Dc(A){let n="";for(const c of ke)n+=`/${xA(A[c])}`;return n}function Uf(A){const n=A.value;return n?[new Oe(A.key,n,"constants have been deprecated as of v8")]:[]}function ki(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Io(A){if(Array.isArray(A))return A.map(Io);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const n={};for(const c in A)n[c]=Io(A[c]);return n}return ki(A)}function xa(A){const n=A.key,c=A.value,d=A.valueSpec||{},m=A.objectElementValidators||{},v=A.style,w=A.styleSpec,M=A.validateSpec;let F=[];const S=Or(c);if(S!=="object")return[new Oe(n,c,`object expected, ${S} found`)];for(const P in c){const k=P.split(".")[0],X=d[k]||d["*"];let j;if(m[k])j=m[k];else if(d[k])j=M;else if(m["*"])j=m["*"];else{if(!d["*"]){F.push(new Oe(n,c[P],`unknown property "${P}"`));continue}j=M}F=F.concat(j({key:(n&&`${n}.`)+P,value:c[P],valueSpec:X,style:v,styleSpec:w,object:c,objectKey:P,validateSpec:M},c))}for(const P in d)m[P]||d[P].required&&d[P].default===void 0&&c[P]===void 0&&F.push(new Oe(n,c,`missing required property "${P}"`));return F}function Du(A){const n=A.value,c=A.valueSpec,d=A.style,m=A.styleSpec,v=A.key,w=A.arrayElementValidator||A.validateSpec;if(Or(n)!=="array")return[new Oe(v,n,`array expected, ${Or(n)} found`)];if(c.length&&n.length!==c.length)return[new Oe(v,n,`array length ${c.length} expected, length ${n.length} found`)];if(c["min-length"]&&n.length<c["min-length"])return[new Oe(v,n,`array length at least ${c["min-length"]} expected, length ${n.length} found`)];let M={type:c.value,values:c.values};m.$version<7&&(M.function=c.function),Or(c.value)==="object"&&(M=c.value);let F=[];for(let S=0;S<n.length;S++)F=F.concat(w({array:n,arrayIndex:S,value:n[S],valueSpec:M,validateSpec:A.validateSpec,style:d,styleSpec:m,key:`${v}[${S}]`}));return F}function zu(A){const n=A.key,c=A.value,d=A.valueSpec;let m=Or(c);return m==="number"&&c!=c&&(m="NaN"),m!=="number"?[new Oe(n,c,`number expected, ${m} found`)]:"minimum"in d&&c<d.minimum?[new Oe(n,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new Oe(n,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function Zu(A){const n=A.valueSpec,c=ki(A.value.type);let d,m,v,w={};const M=c!=="categorical"&&A.value.property===void 0,F=!M,S=Or(A.value.stops)==="array"&&Or(A.value.stops[0])==="array"&&Or(A.value.stops[0][0])==="object",P=xa({key:A.key,value:A.value,valueSpec:A.styleSpec.function,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(j){if(c==="identity")return[new Oe(j.key,j.value,'identity function may not have a "stops" property')];let $=[];const ee=j.value;return $=$.concat(Du({key:j.key,value:ee,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:k})),Or(ee)==="array"&&ee.length===0&&$.push(new Oe(j.key,ee,"array must have at least one stop")),$},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:n,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return c==="identity"&&M&&P.push(new Oe(A.key,A.value,'missing required property "property"')),c==="identity"||A.value.stops||P.push(new Oe(A.key,A.value,'missing required property "stops"')),c==="exponential"&&A.valueSpec.expression&&!Tu(A.valueSpec)&&P.push(new Oe(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(F&&!fl(A.valueSpec)?P.push(new Oe(A.key,A.value,"property functions not supported")):M&&!Mf(A.valueSpec)&&P.push(new Oe(A.key,A.value,"zoom functions not supported"))),c!=="categorical"&&!S||A.value.property!==void 0||P.push(new Oe(A.key,A.value,'"property" property is required')),P;function k(j){let $=[];const ee=j.value,fe=j.key;if(Or(ee)!=="array")return[new Oe(fe,ee,`array expected, ${Or(ee)} found`)];if(ee.length!==2)return[new Oe(fe,ee,`array length 2 expected, length ${ee.length} found`)];if(S){if(Or(ee[0])!=="object")return[new Oe(fe,ee,`object expected, ${Or(ee[0])} found`)];if(ee[0].zoom===void 0)return[new Oe(fe,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new Oe(fe,ee,"object stop key must have value")];if(v&&v>ki(ee[0].zoom))return[new Oe(fe,ee[0].zoom,"stop zoom values must appear in ascending order")];ki(ee[0].zoom)!==v&&(v=ki(ee[0].zoom),m=void 0,w={}),$=$.concat(xa({key:`${fe}[0]`,value:ee[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:zu,value:X}}))}else $=$.concat(X({key:`${fe}[0]`,value:ee[0],validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},ee));return Ro(Io(ee[1]))?$.concat([new Oe(`${fe}[1]`,ee[1],"expressions are not allowed in function stops.")]):$.concat(j.validateSpec({key:`${fe}[1]`,value:ee[1],valueSpec:n,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function X(j,$){const ee=Or(j.value),fe=ki(j.value),be=j.value!==null?j.value:$;if(d){if(ee!==d)return[new Oe(j.key,be,`${ee} stop domain type must match previous stop domain type ${d}`)]}else d=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new Oe(j.key,be,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&c!=="categorical"){let Ye=`number expected, ${ee} found`;return fl(n)&&c===void 0&&(Ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Oe(j.key,be,Ye)]}return c!=="categorical"||ee!=="number"||isFinite(fe)&&Math.floor(fe)===fe?c!=="categorical"&&ee==="number"&&m!==void 0&&fe<m?[new Oe(j.key,be,"stop domain values must appear in ascending order")]:(m=fe,c==="categorical"&&fe in w?[new Oe(j.key,be,"stop domain values must be unique")]:(w[fe]=!0,[])):[new Oe(j.key,be,`integer expected, found ${fe}`)]}}function Uo(A){const n=(A.expressionContext==="property"?Rf:yA)(Io(A.value),A.valueSpec);if(n.result==="error")return n.value.map(d=>new Oe(`${A.key}${d.key}`,A.value,d.message));const c=n.value.expression||n.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!c.outputDefined())return[new Oe(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!_A(c))return[new Oe(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!_A(c))return[new Oe(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!Tc(c,["zoom","feature-state"]))return[new Oe(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Fc(c))return[new Oe(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Js(A){const n=A.key,c=A.value,d=A.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(ki(c))===-1&&m.push(new Oe(n,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf(ki(c))===-1&&m.push(new Oe(n,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function Hu(A){return Lc(Io(A.value))?Uo(mt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ou(A)}function Ou(A){const n=A.value,c=A.key;if(Or(n)!=="array")return[new Oe(c,n,`array expected, ${Or(n)} found`)];const d=A.styleSpec;let m,v=[];if(n.length<1)return[new Oe(c,n,"filter array must have at least 1 element")];switch(v=v.concat(Js({key:`${c}[0]`,value:n[0],valueSpec:d.filter_operator,style:A.style,styleSpec:A.styleSpec})),ki(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&ki(n[1])==="$type"&&v.push(new Oe(c,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Oe(c,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Or(n[1]),m!=="string"&&v.push(new Oe(`${c}[1]`,n[1],`string expected, ${m} found`)));for(let w=2;w<n.length;w++)m=Or(n[w]),ki(n[1])==="$type"?v=v.concat(Js({key:`${c}[${w}]`,value:n[w],valueSpec:d.geometry_type,style:A.style,styleSpec:A.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Oe(`${c}[${w}]`,n[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<n.length;w++)v=v.concat(Ou({key:`${c}[${w}]`,value:n[w],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":m=Or(n[1]),n.length!==2?v.push(new Oe(c,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Oe(`${c}[1]`,n[1],`string expected, ${m} found`))}return v}function Xu(A,n){const c=A.key,d=A.validateSpec,m=A.style,v=A.styleSpec,w=A.value,M=A.objectKey,F=v[`${n}_${A.layerType}`];if(!F)return[];const S=M.match(/^(.*)-transition$/);if(n==="paint"&&S&&F[S[1]]&&F[S[1]].transition)return d({key:c,value:w,valueSpec:v.transition,style:m,styleSpec:v});const P=A.valueSpec||F[M];if(!P)return[new Oe(c,w,`unknown property "${M}"`)];let k;if(Or(w)==="string"&&fl(P)&&!P.tokens&&(k=/^{([^}]+)}$/.exec(w)))return[new Oe(c,w,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];const X=[];return A.layerType==="symbol"&&(M==="text-field"&&m&&!m.glyphs&&X.push(new Oe(c,w,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&Sc(Io(w))&&ki(w.type)==="identity"&&X.push(new Oe(c,w,'"text-font" does not support identity functions'))),X.concat(d({key:A.key,value:w,valueSpec:P,style:m,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:M}))}function Ef(A){return Xu(A,"paint")}function Vu(A){return Xu(A,"layout")}function Gu(A){let n=[];const c=A.value,d=A.key,m=A.style,v=A.styleSpec;c.type||c.ref||n.push(new Oe(d,c,'either "type" or "ref" is required'));let w=ki(c.type);const M=ki(c.ref);if(c.id){const F=ki(c.id);for(let S=0;S<A.arrayIndex;S++){const P=m.layers[S];ki(P.id)===F&&n.push(new Oe(d,c.id,`duplicate layer id "${c.id}", previously used at line ${P.id.__line__}`))}}if("ref"in c){let F;["type","source","source-layer","filter","layout"].forEach(S=>{S in c&&n.push(new Oe(d,c[S],`"${S}" is prohibited for ref layers`))}),m.layers.forEach(S=>{ki(S.id)===M&&(F=S)}),F?F.ref?n.push(new Oe(d,c.ref,"ref cannot reference another ref layer")):w=ki(F.type):n.push(new Oe(d,c.ref,`ref layer "${M}" not found`))}else if(w!=="background")if(c.source){const F=m.sources&&m.sources[c.source],S=F&&ki(F.type);F?S==="vector"&&w==="raster"?n.push(new Oe(d,c.source,`layer "${c.id}" requires a raster source`)):S!=="raster-dem"&&w==="hillshade"?n.push(new Oe(d,c.source,`layer "${c.id}" requires a raster-dem source`)):S==="raster"&&w!=="raster"?n.push(new Oe(d,c.source,`layer "${c.id}" requires a vector source`)):S!=="vector"||c["source-layer"]?S==="raster-dem"&&w!=="hillshade"?n.push(new Oe(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!c.paint||!c.paint["line-gradient"]||S==="geojson"&&F.lineMetrics||n.push(new Oe(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Oe(d,c,`layer "${c.id}" must specify a "source-layer"`)):n.push(new Oe(d,c.source,`source "${c.source}" not found`))}else n.push(new Oe(d,c,'missing required property "source"'));return n=n.concat(xa({key:d,value:c,valueSpec:v.layer,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":()=>[],type:()=>A.validateSpec({key:`${d}.type`,value:c.type,valueSpec:v.layer.type,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,object:c,objectKey:"type"}),filter:Hu,layout:F=>xa({layer:c,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":S=>Vu(mt({layerType:w},S))}}),paint:F=>xa({layer:c,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":S=>Ef(mt({layerType:w},S))}})}})),n}function Fa(A){const n=A.value,c=A.key,d=Or(n);return d!=="string"?[new Oe(c,n,`string expected, ${d} found`)]:[]}const Ff={promoteId:function({key:A,value:n}){if(Or(n)==="string")return Fa({key:A,value:n});{const c=[];for(const d in n)c.push(...Fa({key:`${A}.${d}`,value:n[d]}));return c}}};function Tf(A){const n=A.value,c=A.key,d=A.styleSpec,m=A.style,v=A.validateSpec;if(!n.type)return[new Oe(c,n,'"type" is required')];const w=ki(n.type);let M;switch(w){case"vector":case"raster":return M=xa({key:c,value:n,valueSpec:d[`source_${w.replace("-","_")}`],style:A.style,styleSpec:d,objectElementValidators:Ff,validateSpec:v}),M;case"raster-dem":return M=function(F){var S;const P=(S=F.sourceName)!==null&&S!==void 0?S:"",k=F.value,X=F.styleSpec,j=X.source_raster_dem,$=F.style;let ee=[];const fe=Or(k);if(k===void 0)return ee;if(fe!=="object")return ee.push(new Oe("source_raster_dem",k,`object expected, ${fe} found`)),ee;const be=ki(k.encoding)==="custom",Ye=["redFactor","greenFactor","blueFactor","baseShift"],Be=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const G in k)!be&&Ye.includes(G)?ee.push(new Oe(G,k[G],`In "${P}": "${G}" is only valid when "encoding" is set to "custom". ${Be} encoding found`)):j[G]?ee=ee.concat(F.validateSpec({key:G,value:k[G],valueSpec:j[G],validateSpec:F.validateSpec,style:$,styleSpec:X})):ee.push(new Oe(G,k[G],`unknown property "${G}"`));return ee}({sourceName:c,value:n,style:A.style,styleSpec:d,validateSpec:v}),M;case"geojson":if(M=xa({key:c,value:n,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:v,objectElementValidators:Ff}),n.cluster)for(const F in n.clusterProperties){const[S,P]=n.clusterProperties[F],k=typeof S=="string"?[S,["accumulated"],["get",F]]:S;M.push(...Uo({key:`${c}.${F}.map`,value:P,expressionContext:"cluster-map"})),M.push(...Uo({key:`${c}.${F}.reduce`,value:k,expressionContext:"cluster-reduce"}))}return M;case"video":return xa({key:c,value:n,valueSpec:d.source_video,style:m,validateSpec:v,styleSpec:d});case"image":return xa({key:c,value:n,valueSpec:d.source_image,style:m,validateSpec:v,styleSpec:d});case"canvas":return[new Oe(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Js({key:`${c}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Sf(A){const n=A.value,c=A.styleSpec,d=c.light,m=A.style;let v=[];const w=Or(n);if(n===void 0)return v;if(w!=="object")return v=v.concat([new Oe("light",n,`object expected, ${w} found`)]),v;for(const M in n){const F=M.match(/^(.*)-transition$/);v=v.concat(F&&d[F[1]]&&d[F[1]].transition?A.validateSpec({key:M,value:n[M],valueSpec:c.transition,validateSpec:A.validateSpec,style:m,styleSpec:c}):d[M]?A.validateSpec({key:M,value:n[M],valueSpec:d[M],validateSpec:A.validateSpec,style:m,styleSpec:c}):[new Oe(M,n[M],`unknown property "${M}"`)])}return v}function Nf(A){const n=A.value,c=A.styleSpec,d=c.sky,m=A.style,v=Or(n);if(n===void 0)return[];if(v!=="object")return[new Oe("sky",n,`object expected, ${v} found`)];let w=[];for(const M in n)w=w.concat(d[M]?A.validateSpec({key:M,value:n[M],valueSpec:d[M],style:m,styleSpec:c}):[new Oe(M,n[M],`unknown property "${M}"`)]);return w}function Yf(A){const n=A.value,c=A.styleSpec,d=c.terrain,m=A.style;let v=[];const w=Or(n);if(n===void 0)return v;if(w!=="object")return v=v.concat([new Oe("terrain",n,`object expected, ${w} found`)]),v;for(const M in n)v=v.concat(d[M]?A.validateSpec({key:M,value:n[M],valueSpec:d[M],validateSpec:A.validateSpec,style:m,styleSpec:c}):[new Oe(M,n[M],`unknown property "${M}"`)]);return v}function Pf(A){let n=[];const c=A.value,d=A.key;if(Array.isArray(c)){const m=[],v=[];for(const w in c)c[w].id&&m.includes(c[w].id)&&n.push(new Oe(d,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),m.push(c[w].id),c[w].url&&v.includes(c[w].url)&&n.push(new Oe(d,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),v.push(c[w].url),n=n.concat(xa({key:`${d}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:A.validateSpec}));return n}return Fa({key:d,value:c})}const pl={"*":()=>[],array:Du,boolean:function(A){const n=A.value,c=A.key,d=Or(n);return d!=="boolean"?[new Oe(c,n,`boolean expected, ${d} found`)]:[]},number:zu,color:function(A){const n=A.key,c=A.value,d=Or(c);return d!=="string"?[new Oe(n,c,`color expected, ${d} found`)]:Er.parse(String(c))?[]:[new Oe(n,c,`color expected, "${c}" found`)]},constants:Uf,enum:Js,filter:Hu,function:Zu,layer:Gu,object:xa,source:Tf,light:Sf,sky:Nf,terrain:Yf,projection:function(A){const n=A.value,c=A.styleSpec,d=c.projection,m=A.style,v=Or(n);if(n===void 0)return[];if(v!=="object")return[new Oe("projection",n,`object expected, ${v} found`)];let w=[];for(const M in n)w=w.concat(d[M]?A.validateSpec({key:M,value:n[M],valueSpec:d[M],style:m,styleSpec:c}):[new Oe(M,n[M],`unknown property "${M}"`)]);return w},projectionDefinition:function(A){const n=A.key;let c=A.value;c=c instanceof String?c.valueOf():c;const d=Or(c);return d!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(c)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(c)?["array","string"].includes(d)?[]:[new Oe(n,c,`projection expected, invalid type "${d}" found`)]:[new Oe(n,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:Fa,formatted:function(A){return Fa(A).length===0?[]:Uo(A)},resolvedImage:function(A){return Fa(A).length===0?[]:Uo(A)},padding:function(A){const n=A.key,c=A.value;if(Or(c)==="array"){if(c.length<1||c.length>4)return[new Oe(n,c,`padding requires 1 to 4 values; ${c.length} values found`)];const d={type:"number"};let m=[];for(let v=0;v<c.length;v++)m=m.concat(A.validateSpec({key:`${n}[${v}]`,value:c[v],validateSpec:A.validateSpec,valueSpec:d}));return m}return zu({key:n,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(A){const n=A.key,c=A.value,d=Or(c),m=A.styleSpec;if(d!=="array"||c.length<1||c.length%2!=0)return[new Oe(n,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let w=0;w<c.length;w+=2)v=v.concat(Js({key:`${n}[${w}]`,value:c[w],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Du({key:`${n}[${w+1}]`,value:c[w+1],valueSpec:{length:2,value:"number"},validateSpec:A.validateSpec,style:A.style,styleSpec:m}));return v},sprite:Pf};function eo(A){const n=A.value,c=A.valueSpec,d=A.styleSpec;return A.validateSpec=eo,c.expression&&Sc(ki(n))?Zu(A):c.expression&&Ro(Io(n))?Uo(A):c.type&&pl[c.type]?pl[c.type](A):xa(mt({},A,{valueSpec:c.type?d[c.type]:c}))}function ea(A){const n=A.value,c=A.key,d=Fa(A);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new Oe(c,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new Oe(c,n,'"glyphs" url must include a "{range}" token'))),d}function Hn(A,n=Ae){let c=[];return c=c.concat(eo({key:"",value:A,valueSpec:n.$root,styleSpec:n,style:A,validateSpec:eo,objectElementValidators:{glyphs:ea,"*":()=>[]}})),A.constants&&(c=c.concat(Uf({key:"constants",value:A.constants}))),Lf(c)}function Ta(A){return function(n){return A({...n,validateSpec:eo})}}function Lf(A){return[].concat(A).sort((n,c)=>n.line-c.line)}function Wa(A){return function(...n){return Lf(A.apply(this,n))}}Hn.source=Wa(Ta(Tf)),Hn.sprite=Wa(Ta(Pf)),Hn.glyphs=Wa(Ta(ea)),Hn.light=Wa(Ta(Sf)),Hn.sky=Wa(Ta(Nf)),Hn.terrain=Wa(Ta(Yf)),Hn.layer=Wa(Ta(Gu)),Hn.filter=Wa(Ta(Hu)),Hn.paintProperty=Wa(Ta(Ef)),Hn.layoutProperty=Wa(Ta(Vu));const Ja=Hn,Qf=Ja.light,ju=Ja.sky,y2=Ja.paintProperty,Ku=Ja.layoutProperty;function kf(A,n){let c=!1;if(n&&n.length)for(const d of n)A.fire(new ge(new Error(d.message))),c=!0;return c}class ys{constructor(n,c,d){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const w=new Int32Array(this.arrayBuffer);n=w[0],this.d=(c=w[1])+2*(d=w[2]);for(let F=0;F<this.d*this.d;F++){const S=w[3+F],P=w[3+F+1];m.push(S===P?null:w.subarray(S,P))}const M=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],M),this.bboxes=w.subarray(M),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=n,this.padding=d,this.scale=c/n,this.uid=0;const v=d/c*n;this.min=-v,this.max=n+v}insert(n,c,d,m,v){this._forEachCell(c,d,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,c,d,m,v,w){this.cells[v].push(w)}query(n,c,d,m,v){const w=this.min,M=this.max;if(n<=w&&c<=w&&M<=d&&M<=m&&!v)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(n,c,d,m,this._queryCell,F,{},v),F}}_queryCell(n,c,d,m,v,w,M,F){const S=this.cells[v];if(S!==null){const P=this.keys,k=this.bboxes;for(let X=0;X<S.length;X++){const j=S[X];if(M[j]===void 0){const $=4*j;(F?F(k[$+0],k[$+1],k[$+2],k[$+3]):n<=k[$+2]&&c<=k[$+3]&&d>=k[$+0]&&m>=k[$+1])?(M[j]=!0,w.push(P[j])):M[j]=!1}}}}_forEachCell(n,c,d,m,v,w,M,F){const S=this._convertToCellCoord(n),P=this._convertToCellCoord(c),k=this._convertToCellCoord(d),X=this._convertToCellCoord(m);for(let j=S;j<=k;j++)for(let $=P;$<=X;$++){const ee=this.d*$+j;if((!F||F(this._convertFromCellCoord(j),this._convertFromCellCoord($),this._convertFromCellCoord(j+1),this._convertFromCellCoord($+1)))&&v.call(this,n,c,d,m,ee,w,M,F))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,c=3+this.cells.length+1+1;let d=0;for(let w=0;w<this.cells.length;w++)d+=this.cells[w].length;const m=new Int32Array(c+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=c;for(let w=0;w<n.length;w++){const M=n[w];m[3+w]=v,m.set(M,v),v+=M.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,c){const d=n.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(n){return new ys(n.buffer)}}const vs={};function kt(A,n,c={}){if(vs[A])throw new Error(`${A} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:A,writeable:!1}),vs[A]={klass:n,omit:c.omit||[],shallow:c.shallow||[]}}kt("Object",Object),kt("TransferableGridIndex",ys),kt("Color",Er),kt("Error",Error),kt("AJAXError",Vi),kt("ResolvedImage",oa),kt("StylePropertyFunction",Yc),kt("StyleExpression",Nu,{omit:["_evaluator"]}),kt("ZoomDependentExpression",Pu),kt("ZoomConstantExpression",Yu),kt("CompoundExpression",va,{omit:["_evaluate"]});for(const A in ul)ul[A]._classRegistryKey||kt(`Expression_${A}`,ul[A]);function Df(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function $u(A){return A.$name||A.constructor._classRegistryKey}function wA(A){return!function(n){if(n===null||typeof n!="object")return!1;const c=$u(n);return!(!c||c==="Object")}(A)&&(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||A instanceof Error||Df(A)||dr(A)||ArrayBuffer.isView(A)||A instanceof ImageData)}function BA(A,n){if(wA(A))return(Df(A)||dr(A))&&n&&n.push(A),ArrayBuffer.isView(A)&&n&&n.push(A.buffer),A instanceof ImageData&&n&&n.push(A.data.buffer),A;if(Array.isArray(A)){const v=[];for(const w of A)v.push(BA(w,n));return v}if(typeof A!="object")throw new Error("can't serialize object of type "+typeof A);const c=$u(A);if(!c)throw new Error(`can't serialize object of unregistered class ${A.constructor.name}`);if(!vs[c])throw new Error(`${c} is not registered.`);const{klass:d}=vs[c],m=d.serialize?d.serialize(A,n):{};if(d.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in A){if(!A.hasOwnProperty(v)||vs[c].omit.indexOf(v)>=0)continue;const w=A[v];m[v]=vs[c].shallow.indexOf(v)>=0?w:BA(w,n)}A instanceof Error&&(m.message=A.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(m.$name=c),m}function Eo(A){if(wA(A))return A;if(Array.isArray(A))return A.map(Eo);if(typeof A!="object")throw new Error("can't deserialize object of type "+typeof A);const n=$u(A)||"Object";if(!vs[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:c}=vs[n];if(!c)throw new Error(`can't deserialize unregistered class ${n}`);if(c.deserialize)return c.deserialize(A);const d=Object.create(c.prototype);for(const m of Object.keys(A)){if(m==="$name")continue;const v=A[m];d[m]=vs[n].shallow.indexOf(m)>=0?v:Eo(v)}return d}class CA{constructor(){this.first=!0}update(n,c){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const Sr={"Latin-1 Supplement":A=>A>=128&&A<=255,"Hangul Jamo":A=>A>=4352&&A<=4607,Khmer:A=>A>=6016&&A<=6143,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Kanbun:A=>A>=12688&&A<=12703,"CJK Strokes":A=>A>=12736&&A<=12783,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Hangul Syllables":A=>A>=44032&&A<=55215,"Private Use Area":A=>A>=57344&&A<=63743,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function zc(A){for(const n of A)if(Hc(n.charCodeAt(0)))return!0;return!1}function zf(A){for(const n of A)if(!Zf(n.charCodeAt(0)))return!1;return!0}function Zc(A){const n=A.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(n.join("|"),"u")}const qu=Zc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Zf(A){return!qu.test(String.fromCodePoint(A))}const Hf=Zc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Hc(A){return!(A!==746&&A!==747&&(A<4352||!(Sr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Sr["CJK Compatibility"](A)||Sr["CJK Strokes"](A)||!(!Sr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||Sr["Enclosed CJK Letters and Months"](A)||Sr["Ideographic Description Characters"](A)||Sr.Kanbun(A)||Sr.Katakana(A)&&A!==12540||!(!Sr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!Sr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Sr["Vertical Forms"](A)||Sr["Yijing Hexagram Symbols"](A)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(A))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(A))||Hf.test(String.fromCodePoint(A)))))}function Of(A){return!(Hc(A)||function(n){return!!(Sr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Sr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Sr["Letterlike Symbols"](n)||Sr["Number Forms"](n)||Sr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Sr["Control Pictures"](n)&&n!==9251||Sr["Optical Character Recognition"](n)||Sr["Enclosed Alphanumerics"](n)||Sr["Geometric Shapes"](n)||Sr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Sr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Sr["CJK Symbols and Punctuation"](n)||Sr.Katakana(n)||Sr["Private Use Area"](n)||Sr["CJK Compatibility Forms"](n)||Sr["Small Form Variants"](n)||Sr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(A))}const Xf=Zc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Wu(A){return Xf.test(String.fromCodePoint(A))}function Vf(A,n){return!(!n&&Wu(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Sr.Khmer(A))}function v2(A){for(const n of A)if(Wu(n.charCodeAt(0)))return!0;return!1}const to=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(A){this.pluginStatus=A.pluginStatus,this.pluginURL=A.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(A){if(to.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=A.applyArabicShaping,this.processBidirectionalText=A.processBidirectionalText,this.processStyledBidirectionalText=A.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(A,n){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(A.pluginStatus!=="loading")return this.setState(A),A;const c=A.pluginURL,d=new Promise(v=>{this.loadScriptResolve=v});n(c);const m=new Promise(v=>setTimeout(()=>v(),this.TIMEOUT));if(yield Promise.race([d,m]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:c};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)})}};class gi{constructor(n,c){this.zoom=n,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new CA,this.transition={})}isSupportedScript(n){return function(c,d){for(const m of c)if(!Vf(m.charCodeAt(0),d))return!1;return!0}(n,to.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,c=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class MA{constructor(n,c){this.property=n,this.value=c,this.expression=function(d,m){if(Sc(d))return new Yc(d,m);if(Ro(d)){const v=Rf(d,m);if(v.result==="error")throw new Error(v.value.map(w=>`${w.key}: ${w.message}`).join(", "));return v.value}{let v=d;return m.type==="color"&&typeof d=="string"?v=Er.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?v=bn.parse(d):m.type==="projectionDefinition"&&typeof d=="string"&&(v=Zn.parse(d)):v=En.parse(d),{kind:"constant",evaluate:()=>v}}}(c===void 0?n.specification.default:c,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,c,d){return this.property.possiblyEvaluate(this,n,c,d)}}class Oc{constructor(n){this.property=n,this.value=new MA(n,void 0)}transitioned(n,c){return new RA(this.property,this.value,c,Ct({},n.transition,this.transition),n.now)}untransitioned(){return new RA(this.property,this.value,null,{},0)}}class Ju{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Lt(this._values[n].value.value)}setValue(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Oc(this._values[n].property)),this._values[n].value=new MA(this._values[n].property,c===null?void 0:Lt(c))}getTransition(n){return Lt(this._values[n].transition)}setTransition(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Oc(this._values[n].property)),this._values[n].transition=Lt(c)||void 0}serialize(){const n={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(n[c]=d);const m=this.getTransition(c);m!==void 0&&(n[`${c}-transition`]=m)}return n}transitioned(n,c){const d=new Gf(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(n,c._values[m]);return d}untransitioned(){const n=new Gf(this._properties);for(const c of Object.keys(this._values))n._values[c]=this._values[c].untransitioned();return n}}class RA{constructor(n,c,d,m,v){this.property=n,this.value=c,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(n,c,d){const m=n.now||0,v=this.value.possiblyEvaluate(n,c,d),w=this.prior;if(w){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return w.possiblyEvaluate(n,c,d);{const M=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(n,c,d),v,je(M))}}return v}}class Gf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,c,d){const m=new Xc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,c,d);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class ed{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Lt(this._values[n].value)}setValue(n,c){this._values[n]=new MA(this._values[n].property,c===null?void 0:Lt(c))}serialize(){const n={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(n[c]=d)}return n}possiblyEvaluate(n,c,d){const m=new Xc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,c,d);return m}}class es{constructor(n,c,d){this.property=n,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,c,d,m){return this.property.evaluate(this.value,this.parameters,n,c,d,m)}}class Xc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class ir{constructor(n){this.specification=n}possiblyEvaluate(n,c){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(c)}interpolate(n,c,d){const m=di[this.specification.type];return m?m(n,c,d):n}}class ur{constructor(n,c){this.specification=n,this.overrides=c}possiblyEvaluate(n,c,d,m){return new es(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(c,null,{},d,m)}:n.expression,c)}interpolate(n,c,d){if(n.value.kind!=="constant"||c.value.kind!=="constant")return n;if(n.value.value===void 0||c.value.value===void 0)return new es(this,{kind:"constant",value:void 0},n.parameters);const m=di[this.specification.type];if(m){const v=m(n.value.value,c.value.value,d);return new es(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,c,d,m,v,w){return n.kind==="constant"?n.value:n.evaluate(c,d,m,v,w)}}class IA extends ur{possiblyEvaluate(n,c,d,m){if(n.value===void 0)return new es(this,{kind:"constant",value:void 0},c);if(n.expression.kind==="constant"){const v=n.expression.evaluate(c,null,{},d,m),w=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,M=this._calculate(w,w,w,c);return new es(this,{kind:"constant",value:M},c)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:c.zoom-1}),n.expression.evaluate({zoom:c.zoom}),n.expression.evaluate({zoom:c.zoom+1}),c);return new es(this,{kind:"constant",value:v},c)}return new es(this,n.expression,c)}evaluate(n,c,d,m,v,w){if(n.kind==="source"){const M=n.evaluate(c,d,m,v,w);return this._calculate(M,M,M,c)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(c.zoom)-1},d,m),n.evaluate({zoom:Math.floor(c.zoom)},d,m),n.evaluate({zoom:Math.floor(c.zoom)+1},d,m),c):n.value}_calculate(n,c,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:d,to:c}}interpolate(n){return n}}class td{constructor(n){this.specification=n}possiblyEvaluate(n,c,d,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(c,null,{},d,m);return this._calculate(v,v,v,c)}return this._calculate(n.expression.evaluate(new gi(Math.floor(c.zoom-1),c)),n.expression.evaluate(new gi(Math.floor(c.zoom),c)),n.expression.evaluate(new gi(Math.floor(c.zoom+1),c)),c)}}_calculate(n,c,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:d,to:c}}interpolate(n){return n}}class rd{constructor(n){this.specification=n}possiblyEvaluate(n,c,d,m){return!!n.expression.evaluate(c,null,{},d,m)}interpolate(){return!1}}class ta{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in n){const d=n[c];d.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new MA(d,void 0),v=this.defaultTransitionablePropertyValues[c]=new Oc(d);this.defaultTransitioningPropertyValues[c]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}kt("DataDrivenProperty",ur),kt("DataConstantProperty",ir),kt("CrossFadedDataDrivenProperty",IA),kt("CrossFadedProperty",td),kt("ColorRampProperty",rd);const jf="-transition";class ts extends ve{constructor(n,c){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),c.layout&&(this._unevaluatedLayout=new ed(c.layout)),c.paint)){this._transitionablePaint=new Ju(c.paint);for(const d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(const d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xc(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,c,d={}){c!=null&&this._validate(Ku,`layers.${this.id}.layout.${n}`,n,c,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,c):this.visibility=c)}getPaintProperty(n){return n.endsWith(jf)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,c,d={}){if(c!=null&&this._validate(y2,`layers.${this.id}.paint.${n}`,n,c,d))return!1;if(n.endsWith(jf))return this._transitionablePaint.setTransition(n.slice(0,-11),c||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),M=m.value;this._transitionablePaint.setValue(n,c),this._handleSpecialPaintPropertyUpdate(n);const F=this._transitionablePaint._values[n].value;return F.isDataDriven()||w||v||this._handleOverridablePaintPropertyUpdate(n,M,F)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,c,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,c){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,c)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ar(n,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(n,c,d,m,v={}){return(!v||v.validate!==!1)&&kf(this,n.call(Ja,{key:c,layerType:this.type,objectKey:d,value:m,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const c=this.paint.get(n);if(c instanceof es&&fl(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const ml={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class UA{constructor(n,c){this._structArray=n,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Yi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,c){return n._trim(),c&&(n.isTransferred=!0,c.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const c=Object.create(this.prototype);return c.arrayBuffer=n.arrayBuffer,c.length=n.length,c.capacity=n.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Zi(A,n=1){let c=0,d=0;return{members:A.map(m=>{const v=ml[m.type].BYTES_PER_ELEMENT,w=c=id(c,Math.max(n,v)),M=m.components||1;return d=Math.max(d,v),c+=v*M,{name:m.name,type:m.type,components:M,offset:w}}),size:id(c,Math.max(d,n)),alignment:n}}function id(A,n){return Math.ceil(A/n)*n}class EA extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){const m=2*n;return this.int16[m+0]=c,this.int16[m+1]=d,n}}EA.prototype.bytesPerElement=4,kt("StructArrayLayout2i4",EA);class Vc extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,d)}emplace(n,c,d,m){const v=3*n;return this.int16[v+0]=c,this.int16[v+1]=d,this.int16[v+2]=m,n}}Vc.prototype.bytesPerElement=6,kt("StructArrayLayout3i6",Vc);class xs extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,c,d,m)}emplace(n,c,d,m,v){const w=4*n;return this.int16[w+0]=c,this.int16[w+1]=d,this.int16[w+2]=m,this.int16[w+3]=v,n}}xs.prototype.bytesPerElement=8,kt("StructArrayLayout4i8",xs);class Gc extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w){const M=this.length;return this.resize(M+1),this.emplace(M,n,c,d,m,v,w)}emplace(n,c,d,m,v,w,M){const F=6*n;return this.int16[F+0]=c,this.int16[F+1]=d,this.int16[F+2]=m,this.int16[F+3]=v,this.int16[F+4]=w,this.int16[F+5]=M,n}}Gc.prototype.bytesPerElement=12,kt("StructArrayLayout2i4i12",Gc);class FA extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w){const M=this.length;return this.resize(M+1),this.emplace(M,n,c,d,m,v,w)}emplace(n,c,d,m,v,w,M){const F=4*n,S=8*n;return this.int16[F+0]=c,this.int16[F+1]=d,this.uint8[S+4]=m,this.uint8[S+5]=v,this.uint8[S+6]=w,this.uint8[S+7]=M,n}}FA.prototype.bytesPerElement=8,kt("StructArrayLayout2i4ub8",FA);class _l extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){const m=2*n;return this.float32[m+0]=c,this.float32[m+1]=d,n}}_l.prototype.bytesPerElement=8,kt("StructArrayLayout2f8",_l);class TA extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w,M,F,S,P){const k=this.length;return this.resize(k+1),this.emplace(k,n,c,d,m,v,w,M,F,S,P)}emplace(n,c,d,m,v,w,M,F,S,P,k){const X=10*n;return this.uint16[X+0]=c,this.uint16[X+1]=d,this.uint16[X+2]=m,this.uint16[X+3]=v,this.uint16[X+4]=w,this.uint16[X+5]=M,this.uint16[X+6]=F,this.uint16[X+7]=S,this.uint16[X+8]=P,this.uint16[X+9]=k,n}}TA.prototype.bytesPerElement=20,kt("StructArrayLayout10ui20",TA);class nd extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w,M,F,S,P,k,X){const j=this.length;return this.resize(j+1),this.emplace(j,n,c,d,m,v,w,M,F,S,P,k,X)}emplace(n,c,d,m,v,w,M,F,S,P,k,X,j){const $=12*n;return this.int16[$+0]=c,this.int16[$+1]=d,this.int16[$+2]=m,this.int16[$+3]=v,this.uint16[$+4]=w,this.uint16[$+5]=M,this.uint16[$+6]=F,this.uint16[$+7]=S,this.int16[$+8]=P,this.int16[$+9]=k,this.int16[$+10]=X,this.int16[$+11]=j,n}}nd.prototype.bytesPerElement=24,kt("StructArrayLayout4i4ui4i24",nd);class bl extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,d)}emplace(n,c,d,m){const v=3*n;return this.float32[v+0]=c,this.float32[v+1]=d,this.float32[v+2]=m,n}}bl.prototype.bytesPerElement=12,kt("StructArrayLayout3f12",bl);class Fo extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint32[1*n+0]=c,n}}Fo.prototype.bytesPerElement=4,kt("StructArrayLayout1ul4",Fo);class ad extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w,M,F,S){const P=this.length;return this.resize(P+1),this.emplace(P,n,c,d,m,v,w,M,F,S)}emplace(n,c,d,m,v,w,M,F,S,P){const k=10*n,X=5*n;return this.int16[k+0]=c,this.int16[k+1]=d,this.int16[k+2]=m,this.int16[k+3]=v,this.int16[k+4]=w,this.int16[k+5]=M,this.uint32[X+3]=F,this.uint16[k+8]=S,this.uint16[k+9]=P,n}}ad.prototype.bytesPerElement=20,kt("StructArrayLayout6i1ul2ui20",ad);class jc extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w){const M=this.length;return this.resize(M+1),this.emplace(M,n,c,d,m,v,w)}emplace(n,c,d,m,v,w,M){const F=6*n;return this.int16[F+0]=c,this.int16[F+1]=d,this.int16[F+2]=m,this.int16[F+3]=v,this.int16[F+4]=w,this.int16[F+5]=M,n}}jc.prototype.bytesPerElement=12,kt("StructArrayLayout2i2i2i12",jc);class To extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,c,d,m,v)}emplace(n,c,d,m,v,w){const M=4*n,F=8*n;return this.float32[M+0]=c,this.float32[M+1]=d,this.float32[M+2]=m,this.int16[F+6]=v,this.int16[F+7]=w,n}}To.prototype.bytesPerElement=16,kt("StructArrayLayout2f1f2i16",To);class sd extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w){const M=this.length;return this.resize(M+1),this.emplace(M,n,c,d,m,v,w)}emplace(n,c,d,m,v,w,M){const F=16*n,S=4*n,P=8*n;return this.uint8[F+0]=c,this.uint8[F+1]=d,this.float32[S+1]=m,this.float32[S+2]=v,this.int16[P+6]=w,this.int16[P+7]=M,n}}sd.prototype.bytesPerElement=16,kt("StructArrayLayout2ub2f2i16",sd);class Kc extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,d)}emplace(n,c,d,m){const v=3*n;return this.uint16[v+0]=c,this.uint16[v+1]=d,this.uint16[v+2]=m,n}}Kc.prototype.bytesPerElement=6,kt("StructArrayLayout3ui6",Kc);class $c extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w,M,F,S,P,k,X,j,$,ee,fe,be){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,n,c,d,m,v,w,M,F,S,P,k,X,j,$,ee,fe,be)}emplace(n,c,d,m,v,w,M,F,S,P,k,X,j,$,ee,fe,be,Ye){const Be=24*n,G=12*n,ue=48*n;return this.int16[Be+0]=c,this.int16[Be+1]=d,this.uint16[Be+2]=m,this.uint16[Be+3]=v,this.uint32[G+2]=w,this.uint32[G+3]=M,this.uint32[G+4]=F,this.uint16[Be+10]=S,this.uint16[Be+11]=P,this.uint16[Be+12]=k,this.float32[G+7]=X,this.float32[G+8]=j,this.uint8[ue+36]=$,this.uint8[ue+37]=ee,this.uint8[ue+38]=fe,this.uint32[G+10]=be,this.int16[Be+22]=Ye,n}}$c.prototype.bytesPerElement=48,kt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",$c);class od extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,m,v,w,M,F,S,P,k,X,j,$,ee,fe,be,Ye,Be,G,ue,Ce,qe,yt,it,at,Bt,vt){const It=this.length;return this.resize(It+1),this.emplace(It,n,c,d,m,v,w,M,F,S,P,k,X,j,$,ee,fe,be,Ye,Be,G,ue,Ce,qe,yt,it,at,Bt,vt)}emplace(n,c,d,m,v,w,M,F,S,P,k,X,j,$,ee,fe,be,Ye,Be,G,ue,Ce,qe,yt,it,at,Bt,vt,It){const lt=32*n,Xt=16*n;return this.int16[lt+0]=c,this.int16[lt+1]=d,this.int16[lt+2]=m,this.int16[lt+3]=v,this.int16[lt+4]=w,this.int16[lt+5]=M,this.int16[lt+6]=F,this.int16[lt+7]=S,this.uint16[lt+8]=P,this.uint16[lt+9]=k,this.uint16[lt+10]=X,this.uint16[lt+11]=j,this.uint16[lt+12]=$,this.uint16[lt+13]=ee,this.uint16[lt+14]=fe,this.uint16[lt+15]=be,this.uint16[lt+16]=Ye,this.uint16[lt+17]=Be,this.uint16[lt+18]=G,this.uint16[lt+19]=ue,this.uint16[lt+20]=Ce,this.uint16[lt+21]=qe,this.uint16[lt+22]=yt,this.uint32[Xt+12]=it,this.float32[Xt+13]=at,this.float32[Xt+14]=Bt,this.uint16[lt+30]=vt,this.uint16[lt+31]=It,n}}od.prototype.bytesPerElement=64,kt("StructArrayLayout8i15ui1ul2f2ui64",od);class _ extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.float32[1*n+0]=c,n}}_.prototype.bytesPerElement=4,kt("StructArrayLayout1f4",_);class i extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,d)}emplace(n,c,d,m){const v=3*n;return this.uint16[6*n+0]=c,this.float32[v+1]=d,this.float32[v+2]=m,n}}i.prototype.bytesPerElement=12,kt("StructArrayLayout1ui2f12",i);class o extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,d)}emplace(n,c,d,m){const v=4*n;return this.uint32[2*n+0]=c,this.uint16[v+2]=d,this.uint16[v+3]=m,n}}o.prototype.bytesPerElement=8,kt("StructArrayLayout1ul2ui8",o);class f extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,c)}emplace(n,c,d){const m=2*n;return this.uint16[m+0]=c,this.uint16[m+1]=d,n}}f.prototype.bytesPerElement=4,kt("StructArrayLayout2ui4",f);class p extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint16[1*n+0]=c,n}}p.prototype.bytesPerElement=2,kt("StructArrayLayout1ui2",p);class b extends Yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,c,d,m)}emplace(n,c,d,m,v){const w=4*n;return this.float32[w+0]=c,this.float32[w+1]=d,this.float32[w+2]=m,this.float32[w+3]=v,n}}b.prototype.bytesPerElement=16,kt("StructArrayLayout4f16",b);class B extends UA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new N(this.anchorPointX,this.anchorPointY)}}B.prototype.size=20;class E extends ad{get(n){return new B(this,n)}}kt("CollisionBoxArray",E);class T extends UA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}T.prototype.size=48;class Y extends $c{get(n){return new T(this,n)}}kt("PlacedSymbolArray",Y);class Q extends UA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Q.prototype.size=64;class z extends od{get(n){return new Q(this,n)}}kt("SymbolInstanceArray",z);class Z extends _{getoffsetX(n){return this.float32[1*n+0]}}kt("GlyphOffsetArray",Z);class q extends Vc{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}kt("SymbolLineVertexArray",q);class J extends UA{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}J.prototype.size=12;class me extends i{get(n){return new J(this,n)}}kt("TextAnchorOffsetArray",me);class pe extends UA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}pe.prototype.size=8;class _e extends o{get(n){return new pe(this,n)}}kt("FeatureIndexArray",_e);class xe extends EA{}class Me extends EA{}class Re extends EA{}class Ee extends Gc{}class Le extends FA{}class Ne extends _l{}class Ke extends TA{}class We extends nd{}class ot extends bl{}class ct extends Fo{}class st extends jc{}class Nt extends sd{}class Rt extends Kc{}class bt extends f{}const Wt=Zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Cr}=Wt;class pr{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,c,d,m){const v=this.segments[this.segments.length-1];return n>pr.MAX_VERTEX_ARRAY_LENGTH&&Qt(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${pr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+n>pr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m?this.createNewSegment(c,d,m):v}createNewSegment(n,c,d){const m={vertexOffset:n.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(m.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(n,c,d){return this.prepareSegment(0,n,c,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const c in n.vaos)n.vaos[c].destroy()}static simpleSegment(n,c,d,m){return new pr([{vertexOffset:n,primitiveOffset:c,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function wi(A,n){return 256*(A=$e(Math.floor(A),0,255))+$e(Math.floor(n),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,kt("SegmentVector",pr);const ri=Zi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Bi,pi,ii,ei={exports:{}},on={exports:{}},Wi={exports:{}},yn=function(){if(ii)return ei.exports;ii=1;var A=(Bi||(Bi=1,on.exports=function(c,d){var m,v,w,M,F,S,P,k;for(v=c.length-(m=3&c.length),w=d,F=3432918353,S=461845907,k=0;k<v;)P=255&c.charCodeAt(k)|(255&c.charCodeAt(++k))<<8|(255&c.charCodeAt(++k))<<16|(255&c.charCodeAt(++k))<<24,++k,w=27492+(65535&(M=5*(65535&(w=(w^=P=(65535&(P=(P=(65535&P)*F+(((P>>>16)*F&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(P=0,m){case 3:P^=(255&c.charCodeAt(k+2))<<16;case 2:P^=(255&c.charCodeAt(k+1))<<8;case 1:w^=P=(65535&(P=(P=(65535&(P^=255&c.charCodeAt(k)))*F+(((P>>>16)*F&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return w^=c.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),on.exports),n=(pi||(pi=1,Wi.exports=function(c,d){for(var m,v=c.length,w=d^v,M=0;v>=4;)m=1540483477*(65535&(m=255&c.charCodeAt(M)|(255&c.charCodeAt(++M))<<8|(255&c.charCodeAt(++M))<<16|(255&c.charCodeAt(++M))<<24))+((1540483477*(m>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),v-=4,++M;switch(v){case 3:w^=(255&c.charCodeAt(M+2))<<16;case 2:w^=(255&c.charCodeAt(M+1))<<8;case 1:w=1540483477*(65535&(w^=255&c.charCodeAt(M)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Wi.exports);return ei.exports=A,ei.exports.murmur3=A,ei.exports.murmur2=n,ei.exports}(),Tn=y(yn);class rs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,c,d,m){this.ids.push(ro(n)),this.positions.push(c,d,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=ro(n);let d=0,m=this.ids.length-1;for(;d<m;){const w=d+m>>1;this.ids[w]>=c?m=w:d=w+1}const v=[];for(;this.ids[d]===c;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(n,c){const d=new Float64Array(n.ids),m=new Uint32Array(n.positions);return ws(d,m,0,d.length-1),c&&c.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(n){const c=new rs;return c.ids=n.ids,c.positions=n.positions,c.indexed=!0,c}}function ro(A){const n=+A;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Tn(String(A))}function ws(A,n,c,d){for(;c<d;){const m=A[c+d>>1];let v=c-1,w=d+1;for(;;){do v++;while(A[v]<m);do w--;while(A[w]>m);if(v>=w)break;Bs(A,v,w),Bs(n,3*v,3*w),Bs(n,3*v+1,3*w+1),Bs(n,3*v+2,3*w+2)}w-c<d-w?(ws(A,n,c,w),c=w+1):(ws(A,n,w+1,d),d=w)}}function Bs(A,n,c){const d=A[n];A[n]=A[c],A[c]=d}kt("FeaturePositionMap",rs);class is{constructor(n,c){this.gl=n.gl,this.location=c}}class So extends is{constructor(n,c){super(n,c),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class No extends is{constructor(n,c){super(n,c),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class la extends is{constructor(n,c){super(n,c),this.current=Er.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const io=new Float32Array(16);function Cs(A){return[wi(255*A.r,255*A.g),wi(255*A.b,255*A.a)]}class Ms{constructor(n,c,d){this.value=n,this.uniformNames=c.map(m=>`u_${m}`),this.type=d}setUniform(n,c,d){n.set(d.constantOr(this.value))}getBinding(n,c,d){return this.type==="color"?new la(n,c):new So(n,c)}}class Ii{constructor(n,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=n.tlbr}setUniform(n,c,d,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,c,d){return d.substr(0,9)==="u_pattern"?new No(n,c):new So(n,c)}}class mi{constructor(n,c,d,m){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,c,d,m,v){const w=this.paintVertexArray.length,M=this.expression.evaluate(new gi(0),c,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(w,n,M)}updatePaintArray(n,c,d,m){const v=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(n,c,v)}_setPaintValue(n,c,d){if(this.type==="color"){const m=Cs(d);for(let v=n;v<c;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<c;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Di{constructor(n,c,d,m,v,w){this.expression=n,this.uniformNames=c.map(M=>`u_${M}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=c.map(M=>({name:`a_${M}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(n,c,d,m,v){const w=this.expression.evaluate(new gi(this.zoom),c,{},m,[],v),M=this.expression.evaluate(new gi(this.zoom+1),c,{},m,[],v),F=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(F,n,w,M)}updatePaintArray(n,c,d,m){const v=this.expression.evaluate({zoom:this.zoom},d,m),w=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(n,c,v,w)}_setPaintValue(n,c,d,m){if(this.type==="color"){const v=Cs(d),w=Cs(m);for(let M=n;M<c;M++)this.paintVertexArray.emplace(M,v[0],v[1],w[0],w[1])}else{for(let v=n;v<c;v++)this.paintVertexArray.emplace(v,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,c){const d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=$e(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,c,d){return new So(n,c)}}class Ci{constructor(n,c,d,m,v,w){this.expression=n,this.type=c,this.useIntegerZoom=d,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,c,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(n,c,d,m,v){this._setPaintValues(n,c,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(n,c,d,m){if(!m||!d)return;const{min:v,mid:w,max:M}=d,F=m[v],S=m[w],P=m[M];if(F&&S&&P)for(let k=n;k<c;k++)this.zoomInPaintVertexArray.emplace(k,S.tl[0],S.tl[1],S.br[0],S.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],S.pixelRatio,F.pixelRatio),this.zoomOutPaintVertexArray.emplace(k,S.tl[0],S.tl[1],S.br[0],S.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],S.pixelRatio,P.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ri.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ri.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Kf{constructor(n,c,d){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!d(v))continue;const w=n.paint.get(v);if(!(w instanceof es&&fl(w.property.specification)))continue;const M=x2(v,n.type),F=w.value,S=w.property.specification.type,P=w.property.useIntegerZoom,k=w.property.specification["property-type"],X=k==="cross-faded"||k==="cross-faded-data-driven";if(F.kind==="constant")this.binders[v]=X?new Ii(F.value,M):new Ms(F.value,M,S),m.push(`/u_${v}`);else if(F.kind==="source"||X){const j=$f(v,S,"source");this.binders[v]=X?new Ci(F,S,P,c,j,n.id):new mi(F,M,S,j),m.push(`/a_${v}`)}else{const j=$f(v,S,"composite");this.binders[v]=new Di(F,M,S,P,c,j),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const c=this.binders[n];return c instanceof mi||c instanceof Di?c.maxValue:0}populatePaintArrays(n,c,d,m,v){for(const w in this.binders){const M=this.binders[w];(M instanceof mi||M instanceof Di||M instanceof Ci)&&M.populatePaintArray(n,c,d,m,v)}}setConstantPatternPositions(n,c){for(const d in this.binders){const m=this.binders[d];m instanceof Ii&&m.setConstantPatternPositions(n,c)}}updatePaintArrays(n,c,d,m,v){let w=!1;for(const M in n){const F=c.getPositions(M);for(const S of F){const P=d.feature(S.index);for(const k in this.binders){const X=this.binders[k];if((X instanceof mi||X instanceof Di||X instanceof Ci)&&X.expression.isStateDependent===!0){const j=m.paint.get(k);X.expression=j.value,X.updatePaintArray(S.start,S.end,P,n[M],v),w=!0}}}}return w}defines(){const n=[];for(const c in this.binders){const d=this.binders[c];(d instanceof Ms||d instanceof Ii)&&n.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof mi||d instanceof Di)for(let m=0;m<d.paintVertexAttributes.length;m++)n.push(d.paintVertexAttributes[m].name);else if(d instanceof Ci)for(let m=0;m<ri.members.length;m++)n.push(ri.members[m].name)}return n}getBinderUniforms(){const n=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Ms||d instanceof Ii||d instanceof Di)for(const m of d.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,c){const d=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Ms||v instanceof Ii||v instanceof Di){for(const w of v.uniformNames)if(c[w]){const M=v.getBinding(n,c[w],w);d.push({name:w,property:m,binding:M})}}}return d}setUniforms(n,c,d,m){for(const{name:v,property:w,binding:M}of c)this.binders[w].setUniform(M,m,d.get(w),v)}updatePaintBuffers(n){this._buffers=[];for(const c in this.binders){const d=this.binders[c];if(n&&d instanceof Ci){const m=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof mi||d instanceof Di)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const c in this.binders){const d=this.binders[c];(d instanceof mi||d instanceof Di||d instanceof Ci)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const c=this.binders[n];(c instanceof mi||c instanceof Di||c instanceof Ci)&&c.destroy()}}}class Yo{constructor(n,c,d=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new Kf(m,c,d);this.needsUpload=!1,this._featureMap=new rs,this._bufferOffset=0}populatePaintArrays(n,c,d,m,v,w){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(n,c,m,v,w);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,c,d,m){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,c,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function x2(A,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${n}-`,"").replace(/-/g,"_")]}function $f(A,n,c){const d={color:{source:_l,composite:b},number:{source:_,composite:_l}},m=function(v){return{"line-pattern":{source:Ke,composite:Ke},"fill-pattern":{source:Ke,composite:Ke},"fill-extrusion-pattern":{source:Ke,composite:Ke}}[v]}(A);return m&&m[c]||d[n][c]}kt("ConstantBinder",Ms),kt("CrossFadedConstantBinder",Ii),kt("SourceExpressionBinder",mi),kt("CrossFadedCompositeBinder",Ci),kt("CompositeExpressionBinder",Di),kt("ProgramConfiguration",Kf,{omit:["_buffers"]}),kt("ProgramConfigurationSet",Yo);const ld=Math.pow(2,14)-1,qf=-ld-1;function Aa(A){const n=ft/A.extent,c=A.loadGeometry();for(let d=0;d<c.length;d++){const m=c[d];for(let v=0;v<m.length;v++){const w=m[v],M=Math.round(w.x*n),F=Math.round(w.y*n);w.x=$e(M,qf,ld),w.y=$e(F,qf,ld),(M<w.x||M>w.x+1||F<w.y||F>w.y+1)&&Qt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function no(A,n){return{type:A.type,id:A.id,properties:A.properties,geometry:n?Aa(A):[]}}const Ad=-32768;function Wf(A,n,c,d,m){A.emplaceBack(Ad+8*n+d,Ad+8*c+m)}class SA{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Me,this.indexArray=new Rt,this.segments=new pr,this.programConfigurations=new Yo(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){const m=this.layers[0],v=[];let w=null,M=!1,F=m.type==="heatmap";if(m.type==="circle"){const P=m;w=P.layout.get("circle-sort-key"),M=!w.isConstant(),F=F||P.paint.get("circle-pitch-alignment")==="map"}const S=F?c.subdivisionGranularity.circle:1;for(const{feature:P,id:k,index:X,sourceLayerIndex:j}of n){const $=this.layers[0]._featureFilter.needGeometry,ee=no(P,$);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),ee,d))continue;const fe=M?w.evaluate(ee,{},d):void 0,be={id:k,properties:P.properties,type:P.type,sourceLayerIndex:j,index:X,geometry:$?ee.geometry:Aa(P),patterns:{},sortKey:fe};v.push(be)}M&&v.sort((P,k)=>P.sortKey-k.sortKey);for(const P of v){const{geometry:k,index:X,sourceLayerIndex:j}=P,$=n[X].feature;this.addFeature(P,k,X,d,S),c.featureIndex.insert($,k,X,j,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Cr),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,c,d,m,v=1){let w;switch(v){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const M=w.length;for(const F of c)for(const S of F){const P=S.x,k=S.y;if(P<0||P>=ft||k<0||k>=ft)continue;const X=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,n.sortKey),j=X.vertexLength;for(let $=0;$<M;$++)for(let ee=0;ee<M;ee++)Wf(this.layoutVertexArray,P,k,w[ee],w[$]);for(let $=0;$<M-1;$++)for(let ee=0;ee<M-1;ee++){const fe=j+$*M+ee,be=j+($+1)*M+ee;this.indexArray.emplaceBack(fe,be+1,fe+1),this.indexArray.emplaceBack(fe,be,be+1)}X.vertexLength+=M*M,X.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},m)}}function cd(A,n){for(let c=0;c<A.length;c++)if(NA(n,A[c]))return!0;for(let c=0;c<n.length;c++)if(NA(A,n[c]))return!0;return!!w2(A,n)}function hd(A,n,c){return!!NA(A,n)||!!B2(n,A,c)}function O_(A,n){if(A.length===1)return V_(n,A[0]);for(let c=0;c<n.length;c++){const d=n[c];for(let m=0;m<d.length;m++)if(NA(A,d[m]))return!0}for(let c=0;c<A.length;c++)if(V_(n,A[c]))return!0;for(let c=0;c<n.length;c++)if(w2(A,n[c]))return!0;return!1}function O9(A,n,c){if(A.length>1){if(w2(A,n))return!0;for(let d=0;d<n.length;d++)if(B2(n[d],A,c))return!0}for(let d=0;d<A.length;d++)if(B2(A[d],n,c))return!0;return!1}function w2(A,n){if(A.length===0||n.length===0)return!1;for(let c=0;c<A.length-1;c++){const d=A[c],m=A[c+1];for(let v=0;v<n.length-1;v++)if(X9(d,m,n[v],n[v+1]))return!0}return!1}function X9(A,n,c,d){return St(A,c,d)!==St(n,c,d)&&St(A,n,c)!==St(A,n,d)}function B2(A,n,c){const d=c*c;if(n.length===1)return A.distSqr(n[0])<d;for(let m=1;m<n.length;m++)if(X_(A,n[m-1],n[m])<d)return!0;return!1}function X_(A,n,c){const d=n.distSqr(c);if(d===0)return A.distSqr(n);const m=((A.x-n.x)*(c.x-n.x)+(A.y-n.y)*(c.y-n.y))/d;return A.distSqr(m<0?n:m>1?c:c.sub(n)._mult(m)._add(n))}function V_(A,n){for(let c=0;c<A.length;c++)if(NA(A[c],n))return!0;return!1}function NA(A,n){let c=!1;for(let d=0,m=A.length-1;d<A.length;m=d++){const v=A[d],w=A[m];v.y>n.y!=w.y>n.y&&n.x<(w.x-v.x)*(n.y-v.y)/(w.y-v.y)+v.x&&(c=!c)}return c}function V9(A,n,c){const d=c[0],m=c[2];if(A.x<d.x&&n.x<d.x||A.x>m.x&&n.x>m.x||A.y<d.y&&n.y<d.y||A.y>m.y&&n.y>m.y)return!1;const v=St(A,n,c[0]);return v!==St(A,n,c[1])||v!==St(A,n,c[2])||v!==St(A,n,c[3])}function ud(A,n,c){const d=n.paint.get(A).value;return d.kind==="constant"?d.value:c.programConfigurations.get(n.id).getMaxValue(A)}function Jf(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function e1(A,n,c,d,m){if(!n[0]&&!n[1])return A;const v=N.convert(n)._mult(m);c==="viewport"&&v._rotate(-d);const w=[];for(let M=0;M<A.length;M++)w.push(A[M].sub(v));return w}let G_,j_;kt("CircleBucket",SA,{omit:["layers"]});var G9={get paint(){return j_=j_||new ta({"circle-radius":new ur(Ae.paint_circle["circle-radius"]),"circle-color":new ur(Ae.paint_circle["circle-color"]),"circle-blur":new ur(Ae.paint_circle["circle-blur"]),"circle-opacity":new ur(Ae.paint_circle["circle-opacity"]),"circle-translate":new ir(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new ir(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ir(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ir(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ur(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ur(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ur(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return G_=G_||new ta({"circle-sort-key":new ur(Ae.layout_circle["circle-sort-key"])})}};class j9 extends ts{constructor(n){super(n,G9)}createBucket(n){return new SA(n)}queryRadius(n){const c=n;return ud("circle-radius",this,c)+ud("circle-stroke-width",this,c)+Jf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:m,transform:v,pixelsToTileUnits:w,unwrappedTileID:M,getElevation:F}){const S=e1(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,w),P=this.paint.get("circle-radius").evaluate(c,d)+this.paint.get("circle-stroke-width").evaluate(c,d),k=this.paint.get("circle-pitch-alignment")==="map",X=k?S:function($,ee,fe,be){return $.map(Ye=>K_(Ye,ee,fe,be))}(S,v,M,F),j=k?P*w:P;for(const $ of m)for(const ee of $){const fe=k?ee:K_(ee,v,M,F);let be=j;const Ye=v.projectTileCoordinates(ee.x,ee.y,M,F).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Ye/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=v.cameraToCenterDistance/Ye),hd(X,fe,be))return!0}return!1}}function K_(A,n,c,d){const m=n.projectTileCoordinates(A.x,A.y,c,d).point;return new N((.5*m.x+.5)*n.width,(.5*-m.y+.5)*n.height)}class $_ extends SA{}let q_;kt("HeatmapBucket",$_,{omit:["layers"]});var K9={get paint(){return q_=q_||new ta({"heatmap-radius":new ur(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ur(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ir(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rd(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ir(Ae.paint_heatmap["heatmap-opacity"])})}};function C2(A,{width:n,height:c},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*c*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*c*d}`)}else m=new Uint8Array(n*c*d);return A.width=n,A.height=c,A.data=m,A}function W_(A,{width:n,height:c},d){if(n===A.width&&c===A.height)return;const m=C2({},{width:n,height:c},d);M2(A,m,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,n),height:Math.min(A.height,c)},d),A.width=n,A.height=c,A.data=m.data}function M2(A,n,c,d,m,v){if(m.width===0||m.height===0)return n;if(m.width>A.width||m.height>A.height||c.x>A.width-m.width||c.y>A.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||d.x>n.width-m.width||d.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=A.data,M=n.data;if(w===M)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<m.height;F++){const S=((c.y+F)*A.width+c.x)*v,P=((d.y+F)*n.width+d.x)*v;for(let k=0;k<m.width*v;k++)M[P+k]=w[S+k]}return n}class dd{constructor(n,c){C2(this,n,1,c)}resize(n){W_(this,n,1)}clone(){return new dd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,d,m,v){M2(n,c,d,m,v,1)}}class Sa{constructor(n,c){C2(this,n,4,c)}resize(n){W_(this,n,4)}replace(n,c){c?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Sa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,d,m,v){M2(n,c,d,m,v,4)}}function J_(A){const n={},c=A.resolution||256,d=A.clips?A.clips.length:1,m=A.image||new Sa({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const v=(w,M,F)=>{n[A.evaluationKey]=F;const S=A.expression.evaluate(n);m.data[w+M+0]=Math.floor(255*S.r/S.a),m.data[w+M+1]=Math.floor(255*S.g/S.a),m.data[w+M+2]=Math.floor(255*S.b/S.a),m.data[w+M+3]=Math.floor(255*S.a)};if(A.clips)for(let w=0,M=0;w<d;++w,M+=4*c)for(let F=0,S=0;F<c;F++,S+=4){const P=F/(c-1),{start:k,end:X}=A.clips[w];v(M,S,k*(1-P)+X*P)}else for(let w=0,M=0;w<c;w++,M+=4)v(0,M,w/(c-1));return m}kt("AlphaImage",dd),kt("RGBAImage",Sa);const R2="big-fb";class $9 extends ts{createBucket(n){return new $_(n)}constructor(n){super(n,K9),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=J_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(R2)&&this.heatmapFbos.delete(R2)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let eb;var q9={get paint(){return eb=eb||new ta({"hillshade-illumination-direction":new ir(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ir(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ir(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ir(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ir(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ir(Ae.paint_hillshade["hillshade-accent-color"])})}};class W9 extends ts{constructor(n){super(n,q9)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const J9=Zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:e7}=J9;function I2(A,n,c){const d=c.patternDependencies;let m=!1;for(const v of n){const w=v.paint.get(`${A}-pattern`);w.isConstant()||(m=!0);const M=w.constantOr(null);M&&(m=!0,d[M.to]=!0,d[M.from]=!0)}return m}function U2(A,n,c,d,m){const v=m.patternDependencies;for(const w of n){const M=w.paint.get(`${A}-pattern`).value;if(M.kind!=="constant"){let F=M.evaluate({zoom:d-1},c,{},m.availableImages),S=M.evaluate({zoom:d},c,{},m.availableImages),P=M.evaluate({zoom:d+1},c,{},m.availableImages);F=F&&F.name?F.name:F,S=S&&S.name?S.name:S,P=P&&P.name?P.name:P,v[F]=!0,v[S]=!0,v[P]=!0,c.patterns[w.id]={min:F,mid:S,max:P}}}return c}function tb(A,n,c,d,m){let v;if(m===function(w,M,F,S){let P=0;for(let k=M,X=F-S;k<F;k+=S)P+=(w[X]-w[k])*(w[k+1]+w[X+1]),X=k;return P}(A,n,c,d)>0)for(let w=n;w<c;w+=d)v=ab(w/d|0,A[w],A[w+1],v);else for(let w=c-d;w>=n;w-=d)v=ab(w/d|0,A[w],A[w+1],v);return v&&qc(v,v.next)&&(md(v),v=v.next),v}function YA(A,n){if(!A)return A;n||(n=A);let c,d=A;do if(c=!1,d.steiner||!qc(d,d.next)&&Hi(d.prev,d,d.next)!==0)d=d.next;else{if(md(d),d=n=d.prev,d===d.next)break;c=!0}while(c||d!==n);return n}function fd(A,n,c,d,m,v,w){if(!A)return;!w&&v&&function(F,S,P,k){let X=F;do X.z===0&&(X.z=E2(X.x,X.y,S,P,k)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==F);X.prevZ.nextZ=null,X.prevZ=null,function(j){let $,ee=1;do{let fe,be=j;j=null;let Ye=null;for($=0;be;){$++;let Be=be,G=0;for(let Ce=0;Ce<ee&&(G++,Be=Be.nextZ,Be);Ce++);let ue=ee;for(;G>0||ue>0&&Be;)G!==0&&(ue===0||!Be||be.z<=Be.z)?(fe=be,be=be.nextZ,G--):(fe=Be,Be=Be.nextZ,ue--),Ye?Ye.nextZ=fe:j=fe,fe.prevZ=Ye,Ye=fe;be=Be}Ye.nextZ=null,ee*=2}while($>1)}(X)}(A,d,m,v);let M=A;for(;A.prev!==A.next;){const F=A.prev,S=A.next;if(v?r7(A,d,m,v):t7(A))n.push(F.i,A.i,S.i),md(A),A=S.next,M=S.next;else if((A=S)===M){w?w===1?fd(A=i7(YA(A),n),n,c,d,m,v,2):w===2&&n7(A,n,c,d,m,v):fd(YA(A),n,c,d,m,v,1);break}}}function t7(A){const n=A.prev,c=A,d=A.next;if(Hi(n,c,d)>=0)return!1;const m=n.x,v=c.x,w=d.x,M=n.y,F=c.y,S=d.y,P=Math.min(m,v,w),k=Math.min(M,F,S),X=Math.max(m,v,w),j=Math.max(M,F,S);let $=d.next;for(;$!==n;){if($.x>=P&&$.x<=X&&$.y>=k&&$.y<=j&&gd(m,M,v,F,w,S,$.x,$.y)&&Hi($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function r7(A,n,c,d){const m=A.prev,v=A,w=A.next;if(Hi(m,v,w)>=0)return!1;const M=m.x,F=v.x,S=w.x,P=m.y,k=v.y,X=w.y,j=Math.min(M,F,S),$=Math.min(P,k,X),ee=Math.max(M,F,S),fe=Math.max(P,k,X),be=E2(j,$,n,c,d),Ye=E2(ee,fe,n,c,d);let Be=A.prevZ,G=A.nextZ;for(;Be&&Be.z>=be&&G&&G.z<=Ye;){if(Be.x>=j&&Be.x<=ee&&Be.y>=$&&Be.y<=fe&&Be!==m&&Be!==w&&gd(M,P,F,k,S,X,Be.x,Be.y)&&Hi(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,G.x>=j&&G.x<=ee&&G.y>=$&&G.y<=fe&&G!==m&&G!==w&&gd(M,P,F,k,S,X,G.x,G.y)&&Hi(G.prev,G,G.next)>=0))return!1;G=G.nextZ}for(;Be&&Be.z>=be;){if(Be.x>=j&&Be.x<=ee&&Be.y>=$&&Be.y<=fe&&Be!==m&&Be!==w&&gd(M,P,F,k,S,X,Be.x,Be.y)&&Hi(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;G&&G.z<=Ye;){if(G.x>=j&&G.x<=ee&&G.y>=$&&G.y<=fe&&G!==m&&G!==w&&gd(M,P,F,k,S,X,G.x,G.y)&&Hi(G.prev,G,G.next)>=0)return!1;G=G.nextZ}return!0}function i7(A,n){let c=A;do{const d=c.prev,m=c.next.next;!qc(d,m)&&ib(d,c,c.next,m)&&pd(d,m)&&pd(m,d)&&(n.push(d.i,c.i,m.i),md(c),md(c.next),c=A=m),c=c.next}while(c!==A);return YA(c)}function n7(A,n,c,d,m,v){let w=A;do{let M=w.next.next;for(;M!==w.prev;){if(w.i!==M.i&&A7(w,M)){let F=nb(w,M);return w=YA(w,w.next),F=YA(F,F.next),fd(w,n,c,d,m,v,0),void fd(F,n,c,d,m,v,0)}M=M.next}w=w.next}while(w!==A)}function a7(A,n){let c=A.x-n.x;return c===0&&(c=A.y-n.y,c===0)&&(c=(A.next.y-A.y)/(A.next.x-A.x)-(n.next.y-n.y)/(n.next.x-n.x)),c}function s7(A,n){const c=function(m,v){let w=v;const M=m.x,F=m.y;let S,P=-1/0;if(qc(m,w))return w;do{if(qc(m,w.next))return w.next;if(F<=w.y&&F>=w.next.y&&w.next.y!==w.y){const ee=w.x+(F-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(ee<=M&&ee>P&&(P=ee,S=w.x<w.next.x?w:w.next,ee===M))return S}w=w.next}while(w!==v);if(!S)return null;const k=S,X=S.x,j=S.y;let $=1/0;w=S;do{if(M>=w.x&&w.x>=X&&M!==w.x&&rb(F<j?M:P,F,X,j,F<j?P:M,F,w.x,w.y)){const ee=Math.abs(F-w.y)/(M-w.x);pd(w,m)&&(ee<$||ee===$&&(w.x>S.x||w.x===S.x&&o7(S,w)))&&(S=w,$=ee)}w=w.next}while(w!==k);return S}(A,n);if(!c)return n;const d=nb(c,A);return YA(d,d.next),YA(c,c.next)}function o7(A,n){return Hi(A.prev,A,n.prev)<0&&Hi(n.next,A,A.next)<0}function E2(A,n,c,d,m){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-c)*m|0)|A<<8))|A<<4))|A<<2))|A<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function l7(A){let n=A,c=A;do(n.x<c.x||n.x===c.x&&n.y<c.y)&&(c=n),n=n.next;while(n!==A);return c}function rb(A,n,c,d,m,v,w,M){return(m-w)*(n-M)>=(A-w)*(v-M)&&(A-w)*(d-M)>=(c-w)*(n-M)&&(c-w)*(v-M)>=(m-w)*(d-M)}function gd(A,n,c,d,m,v,w,M){return!(A===w&&n===M)&&rb(A,n,c,d,m,v,w,M)}function A7(A,n){return A.next.i!==n.i&&A.prev.i!==n.i&&!function(c,d){let m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==d.i&&m.next.i!==d.i&&ib(m,m.next,c,d))return!0;m=m.next}while(m!==c);return!1}(A,n)&&(pd(A,n)&&pd(n,A)&&function(c,d){let m=c,v=!1;const w=(c.x+d.x)/2,M=(c.y+d.y)/2;do m.y>M!=m.next.y>M&&m.next.y!==m.y&&w<(m.next.x-m.x)*(M-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==c);return v}(A,n)&&(Hi(A.prev,A,n.prev)||Hi(A,n.prev,n))||qc(A,n)&&Hi(A.prev,A,A.next)>0&&Hi(n.prev,n,n.next)>0)}function Hi(A,n,c){return(n.y-A.y)*(c.x-n.x)-(n.x-A.x)*(c.y-n.y)}function qc(A,n){return A.x===n.x&&A.y===n.y}function ib(A,n,c,d){const m=r1(Hi(A,n,c)),v=r1(Hi(A,n,d)),w=r1(Hi(c,d,A)),M=r1(Hi(c,d,n));return m!==v&&w!==M||!(m!==0||!t1(A,c,n))||!(v!==0||!t1(A,d,n))||!(w!==0||!t1(c,A,d))||!(M!==0||!t1(c,n,d))}function t1(A,n,c){return n.x<=Math.max(A.x,c.x)&&n.x>=Math.min(A.x,c.x)&&n.y<=Math.max(A.y,c.y)&&n.y>=Math.min(A.y,c.y)}function r1(A){return A>0?1:A<0?-1:0}function pd(A,n){return Hi(A.prev,A,A.next)<0?Hi(A,n,A.next)>=0&&Hi(A,A.prev,n)>=0:Hi(A,n,A.prev)<0||Hi(A,A.next,n)<0}function nb(A,n){const c=F2(A.i,A.x,A.y),d=F2(n.i,n.x,n.y),m=A.next,v=n.prev;return A.next=n,n.prev=A,c.next=m,m.prev=c,d.next=c,c.prev=d,v.next=d,d.prev=v,d}function ab(A,n,c,d){const m=F2(A,n,c);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function md(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function F2(A,n,c){return{i:A,x:n,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Wc{constructor(n,c){if(c>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=c}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class i1{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}i1.noSubdivision=new i1({fill:new Wc(0,0),line:new Wc(0,0),tile:new Wc(0,0),stencil:new Wc(0,0),circle:1}),kt("SubdivisionGranularityExpression",Wc),kt("SubdivisionGranularitySetting",i1);const Jc=-32768,_d=32767;class c7{constructor(n,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=ft/n,this._canonical=c}_getKey(n,c){return(n+=32768)<<16|(c+=32768)<<0}_vertexToIndex(n,c){if(n<-32768||c<-32768||n>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(n),m=0|Math.round(c),v=this._getKey(d,m);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,w),this._vertexBuffer.push(d,m),w}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(m,v){const w=[];for(let M=0;M<v.length;M+=3){const F=v[M],S=v[M+1],P=v[M+2],k=m[2*F],X=m[2*F+1];(m[2*S]-k)*(m[2*P+1]-X)-(m[2*S+1]-X)*(m[2*P]-k)>0?(w.push(F),w.push(P),w.push(S)):(w.push(F),w.push(S),w.push(P))}return w}(this._vertexBuffer,n);const c=[],d=n.length;for(let m=0;m<d;m+=3){const v=[n[m+0],n[m+1],n[m+2]],w=[this._vertexBuffer[2*n[m+0]+0],this._vertexBuffer[2*n[m+0]+1],this._vertexBuffer[2*n[m+1]+0],this._vertexBuffer[2*n[m+1]+1],this._vertexBuffer[2*n[m+2]+0],this._vertexBuffer[2*n[m+2]+1]];let M=1/0,F=1/0,S=-1/0,P=-1/0;for(let ee=0;ee<3;ee++){const fe=w[2*ee],be=w[2*ee+1];M=Math.min(M,fe),S=Math.max(S,fe),F=Math.min(F,be),P=Math.max(P,be)}if(M===S||F===P)continue;const k=Math.floor(M/this._granularityCellSize),X=Math.ceil(S/this._granularityCellSize),j=Math.floor(F/this._granularityCellSize),$=Math.ceil(P/this._granularityCellSize);if(k!==X||j!==$)for(let ee=j;ee<$;ee++){const fe=this._scanlineGenerateVertexRingForCellRow(ee,w,v);h7(this._vertexBuffer,fe,c)}else c.push(...v)}return c}_scanlineGenerateVertexRingForCellRow(n,c,d){const m=n*this._granularityCellSize,v=m+this._granularityCellSize,w=[];for(let M=0;M<3;M++){const F=c[2*M],S=c[2*M+1],P=c[2*(M+1)%6],k=c[(2*(M+1)+1)%6],X=c[2*(M+2)%6],j=c[(2*(M+2)+1)%6],$=P-F,ee=k-S,fe=$===0,be=ee===0,Ye=(m-S)/ee,Be=(v-S)/ee,G=Math.min(Ye,Be),ue=Math.max(Ye,Be);if(!be&&(G>=1||ue<=0)||be&&(S<m||S>v)){k>=m&&k<=v&&w.push(d[(M+1)%3]);continue}!be&&G>0&&w.push(this._vertexToIndex(F+$*G,S+ee*G));const Ce=F+$*Math.max(G,0),qe=F+$*Math.min(ue,1);fe||this._generateIntraEdgeVertices(w,F,S,P,k,Ce,qe),!be&&ue<1&&w.push(this._vertexToIndex(F+$*ue,S+ee*ue)),(be||k>=m&&k<=v)&&w.push(d[(M+1)%3]),!be&&(k<=m||k>=v)&&this._generateInterEdgeVertices(w,F,S,P,k,X,j,qe,m,v)}return w}_generateIntraEdgeVertices(n,c,d,m,v,w,M){const F=m-c,S=v-d,P=S===0,k=P?Math.min(c,m):Math.min(w,M),X=P?Math.max(c,m):Math.max(w,M),j=Math.floor(k/this._granularityCellSize)+1,$=Math.ceil(X/this._granularityCellSize)-1;if(P?c<m:w<M)for(let ee=j;ee<=$;ee++){const fe=ee*this._granularityCellSize;n.push(this._vertexToIndex(fe,d+S*(fe-c)/F))}else for(let ee=$;ee>=j;ee--){const fe=ee*this._granularityCellSize;n.push(this._vertexToIndex(fe,d+S*(fe-c)/F))}}_generateInterEdgeVertices(n,c,d,m,v,w,M,F,S,P){const k=v-d,X=w-m,j=M-v,$=(S-v)/j,ee=(P-v)/j,fe=Math.min($,ee),be=Math.max($,ee),Ye=m+X*fe;let Be=Math.floor(Math.min(Ye,F)/this._granularityCellSize)+1,G=Math.ceil(Math.max(Ye,F)/this._granularityCellSize)-1,ue=F<Ye;const Ce=j===0;if(Ce&&(M===S||M===P))return;if(Ce||fe>=1||be<=0){const yt=d-M,it=w+(c-w)*Math.min((S-M)/yt,(P-M)/yt);Be=Math.floor(Math.min(it,F)/this._granularityCellSize)+1,G=Math.ceil(Math.max(it,F)/this._granularityCellSize)-1,ue=F<it}const qe=k>0?P:S;if(ue)for(let yt=Be;yt<=G;yt++)n.push(this._vertexToIndex(yt*this._granularityCellSize,qe));else for(let yt=G;yt>=Be;yt--)n.push(this._vertexToIndex(yt*this._granularityCellSize,qe))}_generateOutline(n){const c=[];for(const d of n){const m=PA(d,this._granularity,!0),v=this._pointArrayToIndices(m),w=[];for(let M=1;M<v.length;M++)w.push(v[M-1]),w.push(v[M]);c.push(w)}return c}_handlePoles(n){let c=!1,d=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(c||d)&&this._fillPoles(n,c,d)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let c=0;c<n.length;c+=2){const d=n[c+1];d===Jc&&(n[c+1]=-32767),d===_d&&(n[c+1]=32766)}}_generatePoleQuad(n,c,d,m,v,w){m>v!=(w===Jc)?(n.push(c),n.push(d),n.push(this._vertexToIndex(m,w)),n.push(d),n.push(this._vertexToIndex(v,w)),n.push(this._vertexToIndex(m,w))):(n.push(d),n.push(c),n.push(this._vertexToIndex(m,w)),n.push(this._vertexToIndex(v,w)),n.push(d),n.push(this._vertexToIndex(m,w)))}_fillPoles(n,c,d){const m=this._vertexBuffer,v=ft,w=n.length;for(let M=2;M<w;M+=3){const F=n[M-2],S=n[M-1],P=n[M],k=m[2*F],X=m[2*F+1],j=m[2*S],$=m[2*S+1],ee=m[2*P],fe=m[2*P+1];c&&(X===0&&$===0&&this._generatePoleQuad(n,F,S,k,j,Jc),$===0&&fe===0&&this._generatePoleQuad(n,S,P,j,ee,Jc),fe===0&&X===0&&this._generatePoleQuad(n,P,F,ee,k,Jc)),d&&(X===v&&$===v&&this._generatePoleQuad(n,F,S,k,j,_d),$===v&&fe===v&&this._generatePoleQuad(n,S,P,j,ee,_d),fe===v&&X===v&&this._generatePoleQuad(n,P,F,ee,k,_d))}}_initializeVertices(n){for(let c=0;c<n.length;c+=2)this._vertexToIndex(n[c],n[c+1])}subdividePolygonInternal(n,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:m}=function(M){const F=[],S=[];for(const P of M)if(P.length!==0){P!==M[0]&&F.push(S.length/2);for(let k=0;k<P.length;k++)S.push(P[k].x),S.push(P[k].y)}return{flattened:S,holeIndices:F}}(n);let v;this._initializeVertices(d);try{const M=function(S,P,k=2){const X=P&&P.length,j=X?P[0]*k:S.length;let $=tb(S,0,j,k,!0);const ee=[];if(!$||$.next===$.prev)return ee;let fe,be,Ye;if(X&&($=function(Be,G,ue,Ce){const qe=[];for(let yt=0,it=G.length;yt<it;yt++){const at=tb(Be,G[yt]*Ce,yt<it-1?G[yt+1]*Ce:Be.length,Ce,!1);at===at.next&&(at.steiner=!0),qe.push(l7(at))}qe.sort(a7);for(let yt=0;yt<qe.length;yt++)ue=s7(qe[yt],ue);return ue}(S,P,$,k)),S.length>80*k){fe=1/0,be=1/0;let Be=-1/0,G=-1/0;for(let ue=k;ue<j;ue+=k){const Ce=S[ue],qe=S[ue+1];Ce<fe&&(fe=Ce),qe<be&&(be=qe),Ce>Be&&(Be=Ce),qe>G&&(G=qe)}Ye=Math.max(Be-fe,G-be),Ye=Ye!==0?32767/Ye:0}return fd($,ee,k,fe,be,Ye,0),ee}(d,m),F=this._convertIndices(d,M);v=this._subdivideTrianglesScanline(F)}catch(M){console.error(M)}let w=[];return c&&(w=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:w}}_convertIndices(n,c){const d=[];for(let m=0;m<c.length;m++)d.push(this._vertexToIndex(n[2*c[m]],n[2*c[m]+1]));return d}_pointArrayToIndices(n){const c=[];for(let d=0;d<n.length;d++){const m=n[d];c.push(this._vertexToIndex(m.x,m.y))}return c}}function sb(A,n,c,d=!0){return new c7(c,n).subdividePolygonInternal(A,d)}function PA(A,n,c=!1){if(!A||A.length<1)return[];if(A.length<2)return[];const d=A[0],m=A[A.length-1],v=c&&(d.x!==m.x||d.y!==m.y);if(n<2)return v?[...A,A[0]]:[...A];const w=Math.floor(ft/n),M=[];M.push(new N(A[0].x,A[0].y));const F=A.length,S=v?F:F-1;for(let P=0;P<S;P++){const k=A[P],X=P<F-1?A[P+1]:A[0],j=k.x,$=k.y,ee=X.x,fe=X.y,be=j!==ee,Ye=$!==fe;if(!be&&!Ye)continue;const Be=ee-j,G=fe-$,ue=Math.abs(Be),Ce=Math.abs(G);let qe=j,yt=$;for(;;){const at=Be>0?(Math.floor(qe/w)+1)*w:(Math.ceil(qe/w)-1)*w,Bt=G>0?(Math.floor(yt/w)+1)*w:(Math.ceil(yt/w)-1)*w,vt=Math.abs(qe-at),It=Math.abs(yt-Bt),lt=Math.abs(qe-ee),Xt=Math.abs(yt-fe),cr=be?vt/ue:Number.POSITIVE_INFINITY,Ar=Ye?It/Ce:Number.POSITIVE_INFINITY;if((lt<=vt||!be)&&(Xt<=It||!Ye))break;if(cr<Ar&&be||!Ye){qe=at,yt+=G*cr;const Jt=new N(qe,Math.round(yt));M[M.length-1].x===Jt.x&&M[M.length-1].y===Jt.y||M.push(Jt)}else{qe+=Be*Ar,yt=Bt;const Jt=new N(Math.round(qe),yt);M[M.length-1].x===Jt.x&&M[M.length-1].y===Jt.y||M.push(Jt)}}const it=new N(ee,fe);M[M.length-1].x===it.x&&M[M.length-1].y===it.y||M.push(it)}return M}function h7(A,n,c){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,m=A[2*n[0]];for(let F=1;F<n.length;F++){const S=A[2*n[F]];S<m&&(m=S,d=F)}const v=n.length;let w=d,M=(w+1)%v;for(;;){const F=w-1>=0?w-1:v-1,S=(M+1)%v,P=A[2*n[F]],k=A[2*n[S]],X=A[2*n[w]],j=A[2*n[w]+1],$=A[2*n[M]+1];let ee=!1;if(P<k)ee=!0;else if(P>k)ee=!1;else{const fe=$-j,be=-(A[2*n[M]]-X),Ye=j<$?1:-1;((P-X)*fe+(A[2*n[F]+1]-j)*be)*Ye>((k-X)*fe+(A[2*n[S]+1]-j)*be)*Ye&&(ee=!0)}if(ee){const fe=n[F],be=n[w],Ye=n[M];fe!==be&&fe!==Ye&&be!==Ye&&c.push(Ye,be,fe),w--,w<0&&(w=v-1)}else{const fe=n[S],be=n[w],Ye=n[M];fe!==be&&fe!==Ye&&be!==Ye&&c.push(Ye,be,fe),M++,M>=v&&(M=0)}if(F===S)break}}function ob(A,n,c,d,m,v,w,M,F){const S=m.length/2,P=w&&M&&F;if(S<pr.MAX_VERTEX_ARRAY_LENGTH){const k=n.prepareSegment(S,c,d),X=k.vertexLength;for(let ee=0;ee<v.length;ee+=3)d.emplaceBack(X+v[ee],X+v[ee+1],X+v[ee+2]);let j,$;k.vertexLength+=S,k.primitiveLength+=v.length/3,P&&($=w.prepareSegment(S,c,M),j=$.vertexLength,$.vertexLength+=S);for(let ee=0;ee<m.length;ee+=2)A(m[ee],m[ee+1]);if(P)for(let ee=0;ee<F.length;ee++){const fe=F[ee];for(let be=1;be<fe.length;be+=2)M.emplaceBack(j+fe[be-1],j+fe[be]);$.primitiveLength+=fe.length/2}}else(function(k,X,j,$,ee,fe){const be=[];for(let Ce=0;Ce<$.length/2;Ce++)be.push(-1);const Ye={count:0};let Be=0,G=k.getOrCreateLatestSegment(X,j),ue=G.vertexLength;for(let Ce=2;Ce<ee.length;Ce+=3){const qe=ee[Ce-2],yt=ee[Ce-1],it=ee[Ce];let at=be[qe]<Be,Bt=be[yt]<Be,vt=be[it]<Be;G.vertexLength+((at?1:0)+(Bt?1:0)+(vt?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(G=k.createNewSegment(X,j),Be=Ye.count,at=!0,Bt=!0,vt=!0,ue=0);const It=bd(be,$,fe,Ye,qe,at,G),lt=bd(be,$,fe,Ye,yt,Bt,G),Xt=bd(be,$,fe,Ye,it,vt,G);j.emplaceBack(ue+It-Be,ue+lt-Be,ue+Xt-Be),G.primitiveLength++}})(n,c,d,m,v,A),P&&function(k,X,j,$,ee,fe){const be=[];for(let Ce=0;Ce<$.length/2;Ce++)be.push(-1);const Ye={count:0};let Be=0,G=k.getOrCreateLatestSegment(X,j),ue=G.vertexLength;for(let Ce=0;Ce<ee.length;Ce++){const qe=ee[Ce];for(let yt=1;yt<ee[Ce].length;yt+=2){const it=qe[yt-1],at=qe[yt];let Bt=be[it]<Be,vt=be[at]<Be;G.vertexLength+((Bt?1:0)+(vt?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(G=k.createNewSegment(X,j),Be=Ye.count,Bt=!0,vt=!0,ue=0);const It=bd(be,$,fe,Ye,it,Bt,G),lt=bd(be,$,fe,Ye,at,vt,G);j.emplaceBack(ue+It-Be,ue+lt-Be),G.primitiveLength++}}}(w,c,M,m,F,A),n.forceNewSegmentOnNextPrepare(),w==null||w.forceNewSegmentOnNextPrepare()}function bd(A,n,c,d,m,v,w){if(v){const M=d.count;return c(n[2*m],n[2*m+1]),A[m]=d.count,d.count++,w.vertexLength++,M}return A[m]}class T2{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Re,this.indexArray=new Rt,this.indexArray2=new bt,this.programConfigurations=new Yo(n.layers,n.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.hasPattern=I2("fill",this.layers,c);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),w=[];for(const{feature:M,id:F,index:S,sourceLayerIndex:P}of n){const k=this.layers[0]._featureFilter.needGeometry,X=no(M,k);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),X,d))continue;const j=v?m.evaluate(X,{},d,c.availableImages):void 0,$={id:F,properties:M.properties,type:M.type,sourceLayerIndex:P,index:S,geometry:k?X.geometry:Aa(M),patterns:{},sortKey:j};w.push($)}v&&w.sort((M,F)=>M.sortKey-F.sortKey);for(const M of w){const{geometry:F,index:S,sourceLayerIndex:P}=M;if(this.hasPattern){const k=U2("fill",this.layers,M,this.zoom,c);this.patternFeatures.push(k)}else this.addFeature(M,F,S,d,{},c.subdivisionGranularity);c.featureIndex.insert(n[S].feature,F,S,P,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}addFeatures(n,c,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,e7),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,c,d,m,v,w){for(const M of wc(c,500)){const F=sb(M,m,w.fill.getGranularityForZoomLevel(m.z)),S=this.layoutVertexArray;ob((P,k)=>{S.emplaceBack(P,k)},this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,m)}}let lb,Ab;kt("FillBucket",T2,{omit:["layers","patternFeatures"]});var u7={get paint(){return Ab=Ab||new ta({"fill-antialias":new ir(Ae.paint_fill["fill-antialias"]),"fill-opacity":new ur(Ae.paint_fill["fill-opacity"]),"fill-color":new ur(Ae.paint_fill["fill-color"]),"fill-outline-color":new ur(Ae.paint_fill["fill-outline-color"]),"fill-translate":new ir(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new ir(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new IA(Ae.paint_fill["fill-pattern"])})},get layout(){return lb=lb||new ta({"fill-sort-key":new ur(Ae.layout_fill["fill-sort-key"])})}};class d7 extends ts{constructor(n){super(n,u7)}recalculate(n,c){super.recalculate(n,c);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new T2(n)}queryRadius(){return Jf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:c,transform:d,pixelsToTileUnits:m}){return O_(e1(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,m),c)}isTileClipped(){return!0}}const f7=Zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),g7=Zi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:p7}=f7;var S2,cb,N2,hb,Y2,ub,db,n1={};function fb(){if(cb)return S2;cb=1;var A=I();function n(m,v,w,M,F){this.properties={},this.extent=w,this.type=0,this._pbf=m,this._geometry=-1,this._keys=M,this._values=F,m.readFields(c,this,v)}function c(m,v,w){m==1?v.id=w.readVarint():m==2?function(M,F){for(var S=M.readVarint()+M.pos;M.pos<S;){var P=F._keys[M.readVarint()],k=F._values[M.readVarint()];F.properties[P]=k}}(w,v):m==3?v.type=w.readVarint():m==4&&(v._geometry=w.pos)}function d(m){for(var v,w,M=0,F=0,S=m.length,P=S-1;F<S;P=F++)M+=((w=m[P]).x-(v=m[F]).x)*(v.y+w.y);return M}return S2=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var v,w=m.readVarint()+m.pos,M=1,F=0,S=0,P=0,k=[];m.pos<w;){if(F<=0){var X=m.readVarint();M=7&X,F=X>>3}if(F--,M===1||M===2)S+=m.readSVarint(),P+=m.readSVarint(),M===1&&(v&&k.push(v),v=[]),v.push(new A(S,P));else{if(M!==7)throw new Error("unknown command "+M);v&&v.push(v[0].clone())}}return v&&k.push(v),k},n.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var v=m.readVarint()+m.pos,w=1,M=0,F=0,S=0,P=1/0,k=-1/0,X=1/0,j=-1/0;m.pos<v;){if(M<=0){var $=m.readVarint();w=7&$,M=$>>3}if(M--,w===1||w===2)(F+=m.readSVarint())<P&&(P=F),F>k&&(k=F),(S+=m.readSVarint())<X&&(X=S),S>j&&(j=S);else if(w!==7)throw new Error("unknown command "+w)}return[P,X,k,j]},n.prototype.toGeoJSON=function(m,v,w){var M,F,S=this.extent*Math.pow(2,w),P=this.extent*m,k=this.extent*v,X=this.loadGeometry(),j=n.types[this.type];function $(be){for(var Ye=0;Ye<be.length;Ye++){var Be=be[Ye];be[Ye]=[360*(Be.x+P)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Be.y+k)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(M=0;M<X.length;M++)ee[M]=X[M][0];$(X=ee);break;case 2:for(M=0;M<X.length;M++)$(X[M]);break;case 3:for(X=function(be){var Ye=be.length;if(Ye<=1)return[be];for(var Be,G,ue=[],Ce=0;Ce<Ye;Ce++){var qe=d(be[Ce]);qe!==0&&(G===void 0&&(G=qe<0),G===qe<0?(Be&&ue.push(Be),Be=[be[Ce]]):Be.push(be[Ce]))}return Be&&ue.push(Be),ue}(X),M=0;M<X.length;M++)for(F=0;F<X[M].length;F++)$(X[M][F])}X.length===1?X=X[0]:j="Multi"+j;var fe={type:"Feature",geometry:{type:j,coordinates:X},properties:this.properties};return"id"in this&&(fe.id=this.id),fe},S2}function gb(){if(hb)return N2;hb=1;var A=fb();function n(d,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(c,this,m),this.length=this._features.length}function c(d,m,v){d===15?m.version=v.readVarint():d===1?m.name=v.readString():d===5?m.extent=v.readVarint():d===2?m._features.push(v.pos):d===3?m._keys.push(v.readString()):d===4&&m._values.push(function(w){for(var M=null,F=w.readVarint()+w.pos;w.pos<F;){var S=w.readVarint()>>3;M=S===1?w.readString():S===2?w.readFloat():S===3?w.readDouble():S===4?w.readVarint64():S===5?w.readVarint():S===6?w.readSVarint():S===7?w.readBoolean():null}return M}(v))}return N2=n,n.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var m=this._pbf.readVarint()+this._pbf.pos;return new A(this._pbf,m,this.extent,this._keys,this._values)},N2}function pb(){return db||(db=1,n1.VectorTile=function(){if(ub)return Y2;ub=1;var A=gb();function n(c,d,m){if(c===3){var v=new A(m,m.readVarint()+m.pos);v.length&&(d[v.name]=v)}}return Y2=function(c,d){this.layers=c.readFields(n,{},d)},Y2}(),n1.VectorTileFeature=fb(),n1.VectorTileLayer=gb()),n1}var yd=y(pb());const m7=yd.VectorTileFeature.types,P2=Math.pow(2,13);function vd(A,n,c,d,m,v,w,M){A.emplaceBack(n,c,2*Math.floor(d*P2)+w,m*P2*2,v*P2*2,Math.round(M))}class L2{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ee,this.centroidVertexArray=new xe,this.indexArray=new Rt,this.programConfigurations=new Yo(n.layers,n.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.features=[],this.hasPattern=I2("fill-extrusion",this.layers,c);for(const{feature:m,id:v,index:w,sourceLayerIndex:M}of n){const F=this.layers[0]._featureFilter.needGeometry,S=no(m,F);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),S,d))continue;const P={id:v,sourceLayerIndex:M,index:w,geometry:F?S.geometry:Aa(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(U2("fill-extrusion",this.layers,P,this.zoom,c)):this.addFeature(P,P.geometry,w,d,{},c.subdivisionGranularity),c.featureIndex.insert(m,P.geometry,w,M,this.index,!0)}}addFeatures(n,c,d){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,c,d,n.subdivisionGranularity)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,p7),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,g7.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,c,d,m,v,w){for(const M of wc(c,500)){const F={x:0,y:0,sampleCount:0},S=this.layoutVertexArray.length;this.processPolygon(F,m,n,M,w);const P=this.layoutVertexArray.length-S,k=Math.floor(F.x/F.sampleCount),X=Math.floor(F.y/F.sampleCount);for(let j=0;j<P;j++)this.centroidVertexArray.emplaceBack(k,X)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,m)}processPolygon(n,c,d,m,v){if(m.length<1||mb(m[0]))return;for(const k of m)k.length!==0&&_7(n,k);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=v.fill.getGranularityForZoomLevel(c.z),F=m7[d.type]==="Polygon";for(const k of m){if(k.length===0||mb(k))continue;const X=PA(k,M,F);this._generateSideFaces(X,w)}if(!F)return;const S=sb(m,c,M,!1),P=this.layoutVertexArray;ob((k,X)=>{vd(P,k,X,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles)}_generateSideFaces(n,c){let d=0;for(let m=1;m<n.length;m++){const v=n[m],w=n[m-1];if(b7(v,w))continue;c.segment.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const M=v.sub(w)._perp()._unit(),F=w.dist(v);d+F>32768&&(d=0),vd(this.layoutVertexArray,v.x,v.y,M.x,M.y,0,0,d),vd(this.layoutVertexArray,v.x,v.y,M.x,M.y,0,1,d),d+=F,vd(this.layoutVertexArray,w.x,w.y,M.x,M.y,0,0,d),vd(this.layoutVertexArray,w.x,w.y,M.x,M.y,0,1,d);const S=c.segment.vertexLength;this.indexArray.emplaceBack(S,S+2,S+1),this.indexArray.emplaceBack(S+1,S+2,S+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function _7(A,n){for(let c=0;c<n.length;c++){const d=n[c];c===n.length-1&&n[0].x===d.x&&n[0].y===d.y||(A.x+=d.x,A.y+=d.y,A.sampleCount++)}}function b7(A,n){return A.x===n.x&&(A.x<0||A.x>ft)||A.y===n.y&&(A.y<0||A.y>ft)}function mb(A){return A.every(n=>n.x<0)||A.every(n=>n.x>ft)||A.every(n=>n.y<0)||A.every(n=>n.y>ft)}let _b;kt("FillExtrusionBucket",L2,{omit:["layers","features"]});var y7={get paint(){return _b=_b||new ta({"fill-extrusion-opacity":new ir(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ur(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ir(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ir(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new IA(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ur(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ur(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ir(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class v7 extends ts{constructor(n){super(n,y7)}createBucket(n){return new L2(n)}queryRadius(){return Jf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:m,transform:v,pixelsToTileUnits:w,pixelPosMatrix:M}){const F=e1(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,w),S=this.paint.get("fill-extrusion-height").evaluate(c,d),P=this.paint.get("fill-extrusion-base").evaluate(c,d),k=function(j,$,ee){const fe=[];for(const be of j){const Ye=[be.x,be.y,0,1];Ve(Ye,Ye,$),fe.push(new N(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return fe}(F,M),X=function(j,$,ee,fe){const be=[],Ye=[],Be=fe[8]*$,G=fe[9]*$,ue=fe[10]*$,Ce=fe[11]*$,qe=fe[8]*ee,yt=fe[9]*ee,it=fe[10]*ee,at=fe[11]*ee;for(const Bt of j){const vt=[],It=[];for(const lt of Bt){const Xt=lt.x,cr=lt.y,Ar=fe[0]*Xt+fe[4]*cr+fe[12],Jt=fe[1]*Xt+fe[5]*cr+fe[13],Yr=fe[2]*Xt+fe[6]*cr+fe[14],Pi=fe[3]*Xt+fe[7]*cr+fe[15],en=Yr+ue,Nn=Pi+Ce,Ya=Ar+qe,ha=Jt+yt,vn=Yr+it,Ui=Pi+at,ln=new N((Ar+Be)/Nn,(Jt+G)/Nn);ln.z=en/Nn,vt.push(ln);const xn=new N(Ya/Ui,ha/Ui);xn.z=vn/Ui,It.push(xn)}be.push(vt),Ye.push(It)}return[be,Ye]}(m,P,S,M);return function(j,$,ee){let fe=1/0;O_(ee,$)&&(fe=bb(ee,$[0]));for(let be=0;be<$.length;be++){const Ye=$[be],Be=j[be];for(let G=0;G<Ye.length-1;G++){const ue=Ye[G],Ce=[ue,Ye[G+1],Be[G+1],Be[G],ue];cd(ee,Ce)&&(fe=Math.min(fe,bb(ee,Ce)))}}return fe!==1/0&&fe}(X[0],X[1],k)}}function xd(A,n){return A.x*n.x+A.y*n.y}function bb(A,n){if(A.length===1){let c=0;const d=n[c++];let m;for(;!m||d.equals(m);)if(m=n[c++],!m)return 1/0;for(;c<n.length;c++){const v=n[c],w=A[0],M=m.sub(d),F=v.sub(d),S=w.sub(d),P=xd(M,M),k=xd(M,F),X=xd(F,F),j=xd(S,M),$=xd(S,F),ee=P*X-k*k,fe=(X*j-k*$)/ee,be=(P*$-k*j)/ee,Ye=d.z*(1-fe-be)+m.z*fe+v.z*be;if(isFinite(Ye))return Ye}return 1/0}{let c=1/0;for(const d of n)c=Math.min(c,d.z);return c}}const x7=Zi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:w7}=x7,B7=Zi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:C7}=B7,M7=yd.VectorTileFeature.types,R7=Math.cos(Math.PI/180*37.5),yb=Math.pow(2,14)/.5;class Q2{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Le,this.layoutVertexArray2=new Ne,this.indexArray=new Rt,this.programConfigurations=new Yo(n.layers,n.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,d){this.hasPattern=I2("line",this.layers,c);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),w=[];for(const{feature:M,id:F,index:S,sourceLayerIndex:P}of n){const k=this.layers[0]._featureFilter.needGeometry,X=no(M,k);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),X,d))continue;const j=v?m.evaluate(X,{},d):void 0,$={id:F,properties:M.properties,type:M.type,sourceLayerIndex:P,index:S,geometry:k?X.geometry:Aa(M),patterns:{},sortKey:j};w.push($)}v&&w.sort((M,F)=>M.sortKey-F.sortKey);for(const M of w){const{geometry:F,index:S,sourceLayerIndex:P}=M;if(this.hasPattern){const k=U2("line",this.layers,M,this.zoom,c);this.patternFeatures.push(k)}else this.addFeature(M,F,S,d,{},c.subdivisionGranularity);c.featureIndex.insert(n[S].feature,F,S,P,this.index)}}update(n,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,d)}addFeatures(n,c,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,d,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,C7)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,w7),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,c,d,m,v,w){const M=this.layers[0].layout,F=M.get("line-join").evaluate(n,{}),S=M.get("line-cap"),P=M.get("line-miter-limit"),k=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const X of c)this.addLine(X,n,F,S,P,k,m,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,m)}addLine(n,c,d,m,v,w,M,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=PA(n,M?F.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<n.length-1;Be++)this.totalDistance+=n[Be].dist(n[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=M7[c.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let k=0;for(;k<P-1&&n[k].equals(n[k+1]);)k++;if(P<(S?3:2))return;d==="bevel"&&(v=1.05);const X=this.overscaling<=16?15*ft/(512*this.overscaling):0,j=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let $,ee,fe,be,Ye;this.e1=this.e2=-1,S&&($=n[P-2],Ye=n[k].sub($)._unit()._perp());for(let Be=k;Be<P;Be++){if(fe=Be===P-1?S?n[k+1]:void 0:n[Be+1],fe&&n[Be].equals(fe))continue;Ye&&(be=Ye),$&&(ee=$),$=n[Be],Ye=fe?fe.sub($)._unit()._perp():be,be=be||Ye;let G=be.add(Ye);G.x===0&&G.y===0||G._unit();const ue=be.x*Ye.x+be.y*Ye.y,Ce=G.x*Ye.x+G.y*Ye.y,qe=Ce!==0?1/Ce:1/0,yt=2*Math.sqrt(2-2*Ce),it=Ce<R7&&ee&&fe,at=be.x*Ye.y-be.y*Ye.x>0;if(it&&Be>k){const It=$.dist(ee);if(It>2*X){const lt=$.sub($.sub(ee)._mult(X/It)._round());this.updateDistance(ee,lt),this.addCurrentVertex(lt,be,0,0,j),ee=lt}}const Bt=ee&&fe;let vt=Bt?d:S?"butt":m;if(Bt&&vt==="round"&&(qe<w?vt="miter":qe<=2&&(vt="fakeround")),vt==="miter"&&qe>v&&(vt="bevel"),vt==="bevel"&&(qe>2&&(vt="flipbevel"),qe<v&&(vt="miter")),ee&&this.updateDistance(ee,$),vt==="miter")G._mult(qe),this.addCurrentVertex($,G,0,0,j);else if(vt==="flipbevel"){if(qe>100)G=Ye.mult(-1);else{const It=qe*be.add(Ye).mag()/be.sub(Ye).mag();G._perp()._mult(It*(at?-1:1))}this.addCurrentVertex($,G,0,0,j),this.addCurrentVertex($,G.mult(-1),0,0,j)}else if(vt==="bevel"||vt==="fakeround"){const It=-Math.sqrt(qe*qe-1),lt=at?It:0,Xt=at?0:It;if(ee&&this.addCurrentVertex($,be,lt,Xt,j),vt==="fakeround"){const cr=Math.round(180*yt/Math.PI/20);for(let Ar=1;Ar<cr;Ar++){let Jt=Ar/cr;if(Jt!==.5){const Pi=Jt-.5;Jt+=Jt*Pi*(Jt-1)*((1.0904+ue*(ue*(3.55645-1.43519*ue)-3.2452))*Pi*Pi+(.848013+ue*(.215638*ue-1.06021)))}const Yr=Ye.sub(be)._mult(Jt)._add(be)._unit()._mult(at?-1:1);this.addHalfVertex($,Yr.x,Yr.y,!1,at,0,j)}}fe&&this.addCurrentVertex($,Ye,-lt,-Xt,j)}else if(vt==="butt")this.addCurrentVertex($,G,0,0,j);else if(vt==="square"){const It=ee?1:-1;this.addCurrentVertex($,G,It,It,j)}else vt==="round"&&(ee&&(this.addCurrentVertex($,be,0,0,j),this.addCurrentVertex($,be,1,1,j,!0)),fe&&(this.addCurrentVertex($,Ye,-1,-1,j,!0),this.addCurrentVertex($,Ye,0,0,j)));if(it&&Be<P-1){const It=$.dist(fe);if(It>2*X){const lt=$.add(fe.sub($)._mult(X/It)._round());this.updateDistance($,lt),this.addCurrentVertex(lt,Ye,0,0,j),$=lt}}}}addCurrentVertex(n,c,d,m,v,w=!1){const M=c.y*m-c.x,F=-c.y-c.x*m;this.addHalfVertex(n,c.x+c.y*d,c.y-c.x*d,w,!1,d,v),this.addHalfVertex(n,M,F,w,!0,-m,v),this.distance>yb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,c,d,m,v,w))}addHalfVertex({x:n,y:c},d,m,v,w,M,F){const S=.5*(this.lineClips?this.scaledDistance*(yb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(c<<1)+(w?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(M===0?0:M<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,P,this.e2),F.primitiveLength++),w?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,c){this.distance+=n.dist(c),this.updateScaledDistance()}}let vb,xb;kt("LineBucket",Q2,{omit:["layers","patternFeatures"]});var wb={get paint(){return xb=xb||new ta({"line-opacity":new ur(Ae.paint_line["line-opacity"]),"line-color":new ur(Ae.paint_line["line-color"]),"line-translate":new ir(Ae.paint_line["line-translate"]),"line-translate-anchor":new ir(Ae.paint_line["line-translate-anchor"]),"line-width":new ur(Ae.paint_line["line-width"]),"line-gap-width":new ur(Ae.paint_line["line-gap-width"]),"line-offset":new ur(Ae.paint_line["line-offset"]),"line-blur":new ur(Ae.paint_line["line-blur"]),"line-dasharray":new td(Ae.paint_line["line-dasharray"]),"line-pattern":new IA(Ae.paint_line["line-pattern"]),"line-gradient":new rd(Ae.paint_line["line-gradient"])})},get layout(){return vb=vb||new ta({"line-cap":new ir(Ae.layout_line["line-cap"]),"line-join":new ur(Ae.layout_line["line-join"]),"line-miter-limit":new ir(Ae.layout_line["line-miter-limit"]),"line-round-limit":new ir(Ae.layout_line["line-round-limit"]),"line-sort-key":new ur(Ae.layout_line["line-sort-key"])})}};class I7 extends ur{possiblyEvaluate(n,c){return c=new gi(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(n,c)}evaluate(n,c,d,m){return c=Ct({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(n,c,d,m)}}let a1;class U7 extends ts{constructor(n){super(n,wb),this.gradientVersion=0,a1||(a1=new I7(wb.paint.properties["line-width"].specification),a1.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof hA,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,c){super.recalculate(n,c),this.paint._values["line-floorwidth"]=a1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Q2(n)}queryRadius(n){const c=n,d=Bb(ud("line-width",this,c),ud("line-gap-width",this,c)),m=ud("line-offset",this,c);return d/2+Math.abs(m)+Jf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:c,featureState:d,geometry:m,transform:v,pixelsToTileUnits:w}){const M=e1(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,w),F=w/2*Bb(this.paint.get("line-width").evaluate(c,d),this.paint.get("line-gap-width").evaluate(c,d)),S=this.paint.get("line-offset").evaluate(c,d);return S&&(m=function(P,k){const X=[];for(let j=0;j<P.length;j++){const $=P[j],ee=[];for(let fe=0;fe<$.length;fe++){const be=$[fe-1],Ye=$[fe],Be=$[fe+1],G=fe===0?new N(0,0):Ye.sub(be)._unit()._perp(),ue=fe===$.length-1?new N(0,0):Be.sub(Ye)._unit()._perp(),Ce=G._add(ue)._unit(),qe=Ce.x*ue.x+Ce.y*ue.y;qe!==0&&Ce._mult(1/qe),ee.push(Ce._mult(k)._add(Ye))}X.push(ee)}return X}(m,S*w)),function(P,k,X){for(let j=0;j<k.length;j++){const $=k[j];if(P.length>=3){for(let ee=0;ee<$.length;ee++)if(NA(P,$[ee]))return!0}if(O9(P,$,X))return!0}return!1}(M,m,F)}isTileClipped(){return!0}}function Bb(A,n){return n>0?n+2*A:A}const E7=Zi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),F7=Zi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Zi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const T7=Zi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Zi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Cb=Zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),S7=Zi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function N7(A,n,c){return A.sections.forEach(d=>{d.text=function(m,v,w){const M=v.layout.get("text-transform").evaluate(w,{});return M==="uppercase"?m=m.toLocaleUpperCase():M==="lowercase"&&(m=m.toLocaleLowerCase()),to.applyArabicShaping&&(m=to.applyArabicShaping(m)),m}(d.text,n,c)}),A}Zi([{name:"triangle",components:3,type:"Uint16"}]),Zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Zi([{type:"Float32",name:"offsetX"}]),Zi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Zi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const wd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Mb,k2,Rb,Ji=24,D2={};function Y7(){return Mb||(Mb=1,D2.read=function(A,n,c,d,m){var v,w,M=8*m-d-1,F=(1<<M)-1,S=F>>1,P=-7,k=c?m-1:0,X=c?-1:1,j=A[n+k];for(k+=X,v=j&(1<<-P)-1,j>>=-P,P+=M;P>0;v=256*v+A[n+k],k+=X,P-=8);for(w=v&(1<<-P)-1,v>>=-P,P+=d;P>0;w=256*w+A[n+k],k+=X,P-=8);if(v===0)v=1-S;else{if(v===F)return w?NaN:1/0*(j?-1:1);w+=Math.pow(2,d),v-=S}return(j?-1:1)*w*Math.pow(2,v-d)},D2.write=function(A,n,c,d,m,v){var w,M,F,S=8*v-m-1,P=(1<<S)-1,k=P>>1,X=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=d?0:v-1,$=d?1:-1,ee=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(M=isNaN(n)?1:0,w=P):(w=Math.floor(Math.log(n)/Math.LN2),n*(F=Math.pow(2,-w))<1&&(w--,F*=2),(n+=w+k>=1?X/F:X*Math.pow(2,1-k))*F>=2&&(w++,F/=2),w+k>=P?(M=0,w=P):w+k>=1?(M=(n*F-1)*Math.pow(2,m),w+=k):(M=n*Math.pow(2,k-1)*Math.pow(2,m),w=0));m>=8;A[c+j]=255&M,j+=$,M/=256,m-=8);for(w=w<<m|M,S+=m;S>0;A[c+j]=255&w,j+=$,w/=256,S-=8);A[c+j-$]|=128*ee}),D2}function Ib(){if(Rb)return k2;Rb=1,k2=n;var A=Y7();function n(G){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(G)?G:new Uint8Array(G||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var c=4294967296,d=1/c,m=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function v(G){return G.type===n.Bytes?G.readVarint()+G.pos:G.pos+1}function w(G,ue,Ce){return Ce?4294967296*ue+(G>>>0):4294967296*(ue>>>0)+(G>>>0)}function M(G,ue,Ce){var qe=ue<=16383?1:ue<=2097151?2:ue<=268435455?3:Math.floor(Math.log(ue)/(7*Math.LN2));Ce.realloc(qe);for(var yt=Ce.pos-1;yt>=G;yt--)Ce.buf[yt+qe]=Ce.buf[yt]}function F(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeVarint(G[Ce])}function S(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeSVarint(G[Ce])}function P(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeFloat(G[Ce])}function k(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeDouble(G[Ce])}function X(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeBoolean(G[Ce])}function j(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeFixed32(G[Ce])}function $(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeSFixed32(G[Ce])}function ee(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeFixed64(G[Ce])}function fe(G,ue){for(var Ce=0;Ce<G.length;Ce++)ue.writeSFixed64(G[Ce])}function be(G,ue){return(G[ue]|G[ue+1]<<8|G[ue+2]<<16)+16777216*G[ue+3]}function Ye(G,ue,Ce){G[Ce]=ue,G[Ce+1]=ue>>>8,G[Ce+2]=ue>>>16,G[Ce+3]=ue>>>24}function Be(G,ue){return(G[ue]|G[ue+1]<<8|G[ue+2]<<16)+(G[ue+3]<<24)}return n.prototype={destroy:function(){this.buf=null},readFields:function(G,ue,Ce){for(Ce=Ce||this.length;this.pos<Ce;){var qe=this.readVarint(),yt=qe>>3,it=this.pos;this.type=7&qe,G(yt,ue,this),this.pos===it&&this.skip(qe)}return ue},readMessage:function(G,ue){return this.readFields(G,ue,this.readVarint()+this.pos)},readFixed32:function(){var G=be(this.buf,this.pos);return this.pos+=4,G},readSFixed32:function(){var G=Be(this.buf,this.pos);return this.pos+=4,G},readFixed64:function(){var G=be(this.buf,this.pos)+be(this.buf,this.pos+4)*c;return this.pos+=8,G},readSFixed64:function(){var G=be(this.buf,this.pos)+Be(this.buf,this.pos+4)*c;return this.pos+=8,G},readFloat:function(){var G=A.read(this.buf,this.pos,!0,23,4);return this.pos+=4,G},readDouble:function(){var G=A.read(this.buf,this.pos,!0,52,8);return this.pos+=8,G},readVarint:function(G){var ue,Ce,qe=this.buf;return ue=127&(Ce=qe[this.pos++]),Ce<128?ue:(ue|=(127&(Ce=qe[this.pos++]))<<7,Ce<128?ue:(ue|=(127&(Ce=qe[this.pos++]))<<14,Ce<128?ue:(ue|=(127&(Ce=qe[this.pos++]))<<21,Ce<128?ue:function(yt,it,at){var Bt,vt,It=at.buf;if(Bt=(112&(vt=It[at.pos++]))>>4,vt<128||(Bt|=(127&(vt=It[at.pos++]))<<3,vt<128)||(Bt|=(127&(vt=It[at.pos++]))<<10,vt<128)||(Bt|=(127&(vt=It[at.pos++]))<<17,vt<128)||(Bt|=(127&(vt=It[at.pos++]))<<24,vt<128)||(Bt|=(1&(vt=It[at.pos++]))<<31,vt<128))return w(yt,Bt,it);throw new Error("Expected varint not more than 10 bytes")}(ue|=(15&(Ce=qe[this.pos]))<<28,G,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var G=this.readVarint();return G%2==1?(G+1)/-2:G/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var G=this.readVarint()+this.pos,ue=this.pos;return this.pos=G,G-ue>=12&&m?function(Ce,qe,yt){return m.decode(Ce.subarray(qe,yt))}(this.buf,ue,G):function(Ce,qe,yt){for(var it="",at=qe;at<yt;){var Bt,vt,It,lt=Ce[at],Xt=null,cr=lt>239?4:lt>223?3:lt>191?2:1;if(at+cr>yt)break;cr===1?lt<128&&(Xt=lt):cr===2?(192&(Bt=Ce[at+1]))==128&&(Xt=(31&lt)<<6|63&Bt)<=127&&(Xt=null):cr===3?(vt=Ce[at+2],(192&(Bt=Ce[at+1]))==128&&(192&vt)==128&&((Xt=(15&lt)<<12|(63&Bt)<<6|63&vt)<=2047||Xt>=55296&&Xt<=57343)&&(Xt=null)):cr===4&&(vt=Ce[at+2],It=Ce[at+3],(192&(Bt=Ce[at+1]))==128&&(192&vt)==128&&(192&It)==128&&((Xt=(15&lt)<<18|(63&Bt)<<12|(63&vt)<<6|63&It)<=65535||Xt>=1114112)&&(Xt=null)),Xt===null?(Xt=65533,cr=1):Xt>65535&&(Xt-=65536,it+=String.fromCharCode(Xt>>>10&1023|55296),Xt=56320|1023&Xt),it+=String.fromCharCode(Xt),at+=cr}return it}(this.buf,ue,G)},readBytes:function(){var G=this.readVarint()+this.pos,ue=this.buf.subarray(this.pos,G);return this.pos=G,ue},readPackedVarint:function(G,ue){if(this.type!==n.Bytes)return G.push(this.readVarint(ue));var Ce=v(this);for(G=G||[];this.pos<Ce;)G.push(this.readVarint(ue));return G},readPackedSVarint:function(G){if(this.type!==n.Bytes)return G.push(this.readSVarint());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readSVarint());return G},readPackedBoolean:function(G){if(this.type!==n.Bytes)return G.push(this.readBoolean());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readBoolean());return G},readPackedFloat:function(G){if(this.type!==n.Bytes)return G.push(this.readFloat());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readFloat());return G},readPackedDouble:function(G){if(this.type!==n.Bytes)return G.push(this.readDouble());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readDouble());return G},readPackedFixed32:function(G){if(this.type!==n.Bytes)return G.push(this.readFixed32());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readFixed32());return G},readPackedSFixed32:function(G){if(this.type!==n.Bytes)return G.push(this.readSFixed32());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readSFixed32());return G},readPackedFixed64:function(G){if(this.type!==n.Bytes)return G.push(this.readFixed64());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readFixed64());return G},readPackedSFixed64:function(G){if(this.type!==n.Bytes)return G.push(this.readSFixed64());var ue=v(this);for(G=G||[];this.pos<ue;)G.push(this.readSFixed64());return G},skip:function(G){var ue=7&G;if(ue===n.Varint)for(;this.buf[this.pos++]>127;);else if(ue===n.Bytes)this.pos=this.readVarint()+this.pos;else if(ue===n.Fixed32)this.pos+=4;else{if(ue!==n.Fixed64)throw new Error("Unimplemented type: "+ue);this.pos+=8}},writeTag:function(G,ue){this.writeVarint(G<<3|ue)},realloc:function(G){for(var ue=this.length||16;ue<this.pos+G;)ue*=2;if(ue!==this.length){var Ce=new Uint8Array(ue);Ce.set(this.buf),this.buf=Ce,this.length=ue}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(G){this.realloc(4),Ye(this.buf,G,this.pos),this.pos+=4},writeSFixed32:function(G){this.realloc(4),Ye(this.buf,G,this.pos),this.pos+=4},writeFixed64:function(G){this.realloc(8),Ye(this.buf,-1&G,this.pos),Ye(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeSFixed64:function(G){this.realloc(8),Ye(this.buf,-1&G,this.pos),Ye(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeVarint:function(G){(G=+G||0)>268435455||G<0?function(ue,Ce){var qe,yt;if(ue>=0?(qe=ue%4294967296|0,yt=ue/4294967296|0):(yt=~(-ue/4294967296),4294967295^(qe=~(-ue%4294967296))?qe=qe+1|0:(qe=0,yt=yt+1|0)),ue>=18446744073709552e3||ue<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ce.realloc(10),function(it,at,Bt){Bt.buf[Bt.pos++]=127&it|128,it>>>=7,Bt.buf[Bt.pos++]=127&it|128,it>>>=7,Bt.buf[Bt.pos++]=127&it|128,it>>>=7,Bt.buf[Bt.pos++]=127&it|128,Bt.buf[Bt.pos]=127&(it>>>=7)}(qe,0,Ce),function(it,at){var Bt=(7&it)<<4;at.buf[at.pos++]|=Bt|((it>>>=3)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it)))))}(yt,Ce)}(G,this):(this.realloc(4),this.buf[this.pos++]=127&G|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=G>>>7&127))))},writeSVarint:function(G){this.writeVarint(G<0?2*-G-1:2*G)},writeBoolean:function(G){this.writeVarint(!!G)},writeString:function(G){G=String(G),this.realloc(4*G.length),this.pos++;var ue=this.pos;this.pos=function(qe,yt,it){for(var at,Bt,vt=0;vt<yt.length;vt++){if((at=yt.charCodeAt(vt))>55295&&at<57344){if(!Bt){at>56319||vt+1===yt.length?(qe[it++]=239,qe[it++]=191,qe[it++]=189):Bt=at;continue}if(at<56320){qe[it++]=239,qe[it++]=191,qe[it++]=189,Bt=at;continue}at=Bt-55296<<10|at-56320|65536,Bt=null}else Bt&&(qe[it++]=239,qe[it++]=191,qe[it++]=189,Bt=null);at<128?qe[it++]=at:(at<2048?qe[it++]=at>>6|192:(at<65536?qe[it++]=at>>12|224:(qe[it++]=at>>18|240,qe[it++]=at>>12&63|128),qe[it++]=at>>6&63|128),qe[it++]=63&at|128)}return it}(this.buf,G,this.pos);var Ce=this.pos-ue;Ce>=128&&M(ue,Ce,this),this.pos=ue-1,this.writeVarint(Ce),this.pos+=Ce},writeFloat:function(G){this.realloc(4),A.write(this.buf,G,this.pos,!0,23,4),this.pos+=4},writeDouble:function(G){this.realloc(8),A.write(this.buf,G,this.pos,!0,52,8),this.pos+=8},writeBytes:function(G){var ue=G.length;this.writeVarint(ue),this.realloc(ue);for(var Ce=0;Ce<ue;Ce++)this.buf[this.pos++]=G[Ce]},writeRawMessage:function(G,ue){this.pos++;var Ce=this.pos;G(ue,this);var qe=this.pos-Ce;qe>=128&&M(Ce,qe,this),this.pos=Ce-1,this.writeVarint(qe),this.pos+=qe},writeMessage:function(G,ue,Ce){this.writeTag(G,n.Bytes),this.writeRawMessage(ue,Ce)},writePackedVarint:function(G,ue){ue.length&&this.writeMessage(G,F,ue)},writePackedSVarint:function(G,ue){ue.length&&this.writeMessage(G,S,ue)},writePackedBoolean:function(G,ue){ue.length&&this.writeMessage(G,X,ue)},writePackedFloat:function(G,ue){ue.length&&this.writeMessage(G,P,ue)},writePackedDouble:function(G,ue){ue.length&&this.writeMessage(G,k,ue)},writePackedFixed32:function(G,ue){ue.length&&this.writeMessage(G,j,ue)},writePackedSFixed32:function(G,ue){ue.length&&this.writeMessage(G,$,ue)},writePackedFixed64:function(G,ue){ue.length&&this.writeMessage(G,ee,ue)},writePackedSFixed64:function(G,ue){ue.length&&this.writeMessage(G,fe,ue)},writeBytesField:function(G,ue){this.writeTag(G,n.Bytes),this.writeBytes(ue)},writeFixed32Field:function(G,ue){this.writeTag(G,n.Fixed32),this.writeFixed32(ue)},writeSFixed32Field:function(G,ue){this.writeTag(G,n.Fixed32),this.writeSFixed32(ue)},writeFixed64Field:function(G,ue){this.writeTag(G,n.Fixed64),this.writeFixed64(ue)},writeSFixed64Field:function(G,ue){this.writeTag(G,n.Fixed64),this.writeSFixed64(ue)},writeVarintField:function(G,ue){this.writeTag(G,n.Varint),this.writeVarint(ue)},writeSVarintField:function(G,ue){this.writeTag(G,n.Varint),this.writeSVarint(ue)},writeStringField:function(G,ue){this.writeTag(G,n.Bytes),this.writeString(ue)},writeFloatField:function(G,ue){this.writeTag(G,n.Fixed32),this.writeFloat(ue)},writeDoubleField:function(G,ue){this.writeTag(G,n.Fixed64),this.writeDouble(ue)},writeBooleanField:function(G,ue){this.writeVarintField(G,!!ue)}},k2}var z2=y(Ib());const Z2=3;function P7(A,n,c){A===1&&c.readMessage(L7,n)}function L7(A,n,c){if(A===3){const{id:d,bitmap:m,width:v,height:w,left:M,top:F,advance:S}=c.readMessage(Q7,{});n.push({id:d,bitmap:new dd({width:v+2*Z2,height:w+2*Z2},m),metrics:{width:v,height:w,left:M,top:F,advance:S}})}}function Q7(A,n,c){A===1?n.id=c.readVarint():A===2?n.bitmap=c.readBytes():A===3?n.width=c.readVarint():A===4?n.height=c.readVarint():A===5?n.left=c.readSVarint():A===6?n.top=c.readSVarint():A===7&&(n.advance=c.readVarint())}const k7=Z2;function Ub(A){let n=0,c=0;for(const w of A)n+=w.w*w.h,c=Math.max(c,w.w);A.sort((w,M)=>M.h-w.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),c),h:1/0}];let m=0,v=0;for(const w of A)for(let M=d.length-1;M>=0;M--){const F=d[M];if(!(w.w>F.w||w.h>F.h)){if(w.x=F.x,w.y=F.y,v=Math.max(v,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===F.w&&w.h===F.h){const S=d.pop();M<d.length&&(d[M]=S)}else w.h===F.h?(F.x+=w.w,F.w-=w.w):w.w===F.w?(F.y+=w.h,F.h-=w.h):(d.push({x:F.x+w.w,y:F.y,w:F.w-w.w,h:w.h}),F.y+=w.h,F.h-=w.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}const ca=1;class H2{constructor(n,{pixelRatio:c,version:d,stretchX:m,stretchY:v,content:w,textFitWidth:M,textFitHeight:F}){this.paddedRect=n,this.pixelRatio=c,this.stretchX=m,this.stretchY=v,this.content=w,this.version=d,this.textFitWidth=M,this.textFitHeight=F}get tl(){return[this.paddedRect.x+ca,this.paddedRect.y+ca]}get br(){return[this.paddedRect.x+this.paddedRect.w-ca,this.paddedRect.y+this.paddedRect.h-ca]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ca)/this.pixelRatio,(this.paddedRect.h-2*ca)/this.pixelRatio]}}class Eb{constructor(n,c){const d={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,d,v),this.addImages(c,m,v);const{w,h:M}=Ub(v),F=new Sa({width:w||1,height:M||1});for(const S in n){const P=n[S],k=d[S].paddedRect;Sa.copy(P.data,F,{x:0,y:0},{x:k.x+ca,y:k.y+ca},P.data)}for(const S in c){const P=c[S],k=m[S].paddedRect,X=k.x+ca,j=k.y+ca,$=P.data.width,ee=P.data.height;Sa.copy(P.data,F,{x:0,y:0},{x:X,y:j},P.data),Sa.copy(P.data,F,{x:0,y:ee-1},{x:X,y:j-1},{width:$,height:1}),Sa.copy(P.data,F,{x:0,y:0},{x:X,y:j+ee},{width:$,height:1}),Sa.copy(P.data,F,{x:$-1,y:0},{x:X-1,y:j},{width:1,height:ee}),Sa.copy(P.data,F,{x:0,y:0},{x:X+$,y:j},{width:1,height:ee})}this.image=F,this.iconPositions=d,this.patternPositions=m}addImages(n,c,d){for(const m in n){const v=n[m],w={x:0,y:0,w:v.data.width+2*ca,h:v.data.height+2*ca};d.push(w),c[m]=new H2(w,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,c){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),c)}patchUpdatedImage(n,c,d){if(!n||!c||n.version===c.version)return;n.version=c.version;const[m,v]=n.tl;d.update(c.data,void 0,{x:m,y:v})}}var yl;kt("ImagePosition",H2),kt("ImageAtlas",Eb),h.al=void 0,(yl=h.al||(h.al={}))[yl.none=0]="none",yl[yl.horizontal=1]="horizontal",yl[yl.vertical=2]="vertical",yl[yl.horizontalOnly=3]="horizontalOnly";const s1=-17;class Bd{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,c,d){const m=new Bd;return m.scale=n||1,m.fontStack=c,m.verticalAlign=d||"bottom",m}static forImage(n,c){const d=new Bd;return d.imageName=n,d.verticalAlign=c||"bottom",d}}class eh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,c){const d=new eh;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?d.addImageSection(v):d.addTextSection(v,c)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let c="";for(let d=0;d<n.length;d++){const m=n.charCodeAt(d+1)||null,v=n.charCodeAt(d-1)||null;c+=m&&Of(m)&&!wd[n[d+1]]||v&&Of(v)&&!wd[n[d-1]]||!wd[n[d]]?n[d]:wd[n[d]]}return c}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&l1[this.text.charCodeAt(d)];d++)n++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&l1[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(n,c),this.sectionIndex=this.sectionIndex.slice(n,c)}substring(n,c){const d=new eh;return d.text=this.text.substring(n,c),d.sectionIndex=this.sectionIndex.slice(n,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,c)=>Math.max(n,this.sections[c].scale),0)}getMaxImageSize(n){let c=0,d=0;for(let m=0;m<this.length();m++){const v=this.getSection(m);if(v.imageName){const w=n[v.imageName];if(!w)continue;const M=w.displaySize;c=Math.max(c,M[0]),d=Math.max(d,M[1])}}return{maxImageWidth:c,maxImageHeight:d}}addTextSection(n,c){this.text+=n.text,this.sections.push(Bd.forText(n.scale,n.fontStack||c,n.verticalAlign));const d=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(d)}addImageSection(n){const c=n.image?n.image.name:"";if(c.length===0)return void Qt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Bd.forImage(c,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Qt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function o1(A,n,c,d,m,v,w,M,F,S,P,k,X,j,$){const ee=eh.fromFeature(A,m);let fe;k===h.al.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:be,processStyledBidirectionalText:Ye}=to;if(be&&ee.sections.length===1){fe=[];const ue=be(ee.toString(),O2(ee,S,v,n,d,j));for(const Ce of ue){const qe=new eh;qe.text=Ce,qe.sections=ee.sections;for(let yt=0;yt<Ce.length;yt++)qe.sectionIndex.push(0);fe.push(qe)}}else if(Ye){fe=[];const ue=Ye(ee.text,ee.sectionIndex,O2(ee,S,v,n,d,j));for(const Ce of ue){const qe=new eh;qe.text=Ce[0],qe.sectionIndex=Ce[1],qe.sections=ee.sections,fe.push(qe)}}else fe=function(ue,Ce){const qe=[],yt=ue.text;let it=0;for(const at of Ce)qe.push(ue.substring(it,at)),it=at;return it<yt.length&&qe.push(ue.substring(it,yt.length)),qe}(ee,O2(ee,S,v,n,d,j));const Be=[],G={positionedLines:Be,text:ee.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:k,iconsInText:!1,verticalizable:!1};return function(ue,Ce,qe,yt,it,at,Bt,vt,It,lt,Xt,cr){let Ar=0,Jt=0,Yr=0,Pi=0;const en=vt==="right"?1:vt==="left"?0:.5,Nn=Ji/cr;let Ya=0;for(const Ui of it){Ui.trim();const ln=Ui.getMaxScale(),xn={positionedGlyphs:[],lineOffset:0};ue.positionedLines[Ya]=xn;const wn=xn.positionedGlyphs;let ra=0;if(!Ui.length()){Jt+=at,++Ya;continue}const Pa=H7(yt,Ui,Nn);for(let ua=0;ua<Ui.length();ua++){const tn=Ui.getSection(ua),cn=Ui.getSectionIndex(ua),hn=Ui.getCharCode(ua),ji=O7(It,Xt,hn);let _i;if(tn.imageName){if(ue.iconsInText=!0,tn.scale=tn.scale*Nn,_i=V7(tn,ji,ln,Pa,yt),!_i)continue;ra=Math.max(ra,_i.imageOffset)}else if(_i=X7(tn,hn,ji,Pa,Ce,qe),!_i)continue;const{rect:Rs,metrics:nh,baselineOffset:Is}=_i;wn.push({glyph:hn,imageName:tn.imageName,x:Ar,y:Jt+Is+s1,vertical:ji,scale:tn.scale,fontStack:tn.fontStack,sectionIndex:cn,metrics:nh,rect:Rs}),ji?(ue.verticalizable=!0,Ar+=(tn.imageName?nh.advance:Ji)*tn.scale+lt):Ar+=nh.advance*tn.scale+lt}wn.length!==0&&(Yr=Math.max(Ar-lt,Yr),G7(wn,0,wn.length-1,en)),Ar=0,xn.lineOffset=Math.max(ra,(ln-1)*Ji);const An=at*ln+ra;Jt+=An,Pi=Math.max(An,Pi),++Ya}const{horizontalAlign:ha,verticalAlign:vn}=X2(Bt);(function(Ui,ln,xn,wn,ra,Pa,An,ua,tn){const cn=(ln-xn)*ra;let hn=0;hn=Pa!==An?-ua*wn-s1:-wn*tn*An+.5*An;for(const ji of Ui)for(const _i of ji.positionedGlyphs)_i.x+=cn,_i.y+=hn})(ue.positionedLines,en,ha,vn,Yr,Pi,at,Jt,it.length),ue.top+=-vn*Jt,ue.bottom=ue.top+Jt,ue.left+=-ha*Yr,ue.right=ue.left+Yr}(G,n,c,d,fe,w,M,F,k,S,X,$),!function(ue){for(const Ce of ue)if(Ce.positionedGlyphs.length!==0)return!1;return!0}(Be)&&G}const l1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},D7={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},z7={40:!0};function Fb(A,n,c,d,m,v){if(n.imageName){const w=d[n.imageName];return w?w.displaySize[0]*n.scale*Ji/v+m:0}{const w=c[n.fontStack],M=w&&w[A];return M?M.metrics.advance*n.scale+m:0}}function Tb(A,n,c,d){const m=Math.pow(A-n,2);return d?A<n?m/2:2*m:m+Math.abs(c)*c}function Z7(A,n,c){let d=0;return A===10&&(d-=1e4),c&&(d+=150),A!==40&&A!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function Sb(A,n,c,d,m,v){let w=null,M=Tb(n,c,m,v);for(const F of d){const S=Tb(n-F.x,c,m,v)+F.badness;S<=M&&(w=F,M=S)}return{index:A,x:n,priorBreak:w,badness:M}}function Nb(A){return A?Nb(A.priorBreak).concat(A.index):[]}function O2(A,n,c,d,m,v){if(!A)return[];const w=[],M=function(k,X,j,$,ee,fe){let be=0;for(let Ye=0;Ye<k.length();Ye++){const Be=k.getSection(Ye);be+=Fb(k.getCharCode(Ye),Be,$,ee,X,fe)}return be/Math.max(1,Math.ceil(be/j))}(A,n,c,d,m,v),F=A.text.indexOf("")>=0;let S=0;for(let k=0;k<A.length();k++){const X=A.getSection(k),j=A.getCharCode(k);if(l1[j]||(S+=Fb(j,X,d,m,n,v)),k<A.length()-1){const $=!((P=j)<11904)&&(!!Sr["CJK Compatibility Forms"](P)||!!Sr["CJK Compatibility"](P)||!!Sr["CJK Strokes"](P)||!!Sr["CJK Symbols and Punctuation"](P)||!!Sr["Enclosed CJK Letters and Months"](P)||!!Sr["Halfwidth and Fullwidth Forms"](P)||!!Sr["Ideographic Description Characters"](P)||!!Sr["Vertical Forms"](P)||Hf.test(String.fromCodePoint(P)));(D7[j]||$||X.imageName||k!==A.length()-2&&z7[A.getCharCode(k+1)])&&w.push(Sb(k+1,S,M,w,Z7(j,A.getCharCode(k+1),$&&F),!1))}}var P;return Nb(Sb(A.length(),S,M,w,0,!0))}function X2(A){let n=.5,c=.5;switch(A){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:n,verticalAlign:c}}function H7(A,n,c){const d=n.getMaxScale()*Ji,{maxImageWidth:m,maxImageHeight:v}=n.getMaxImageSize(A),w=Math.max(d,v*c);return{verticalLineContentWidth:Math.max(d,m*c),horizontalLineContentHeight:w}}function Yb(A){switch(A){case"top":return 0;case"center":return .5;default:return 1}}function O7(A,n,c){return!(A===h.al.horizontal||!n&&!Hc(c)||n&&(l1[c]||(d=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function X7(A,n,c,d,m,v){const w=v[A.fontStack],M=function(S,P,k,X){if(S&&S.rect)return S;const j=P[k.fontStack],$=j&&j[X];return $?{rect:null,metrics:$.metrics}:null}(w&&w[n],m,A,n);if(M===null)return null;let F;if(c)F=d.verticalLineContentWidth-A.scale*Ji;else{const S=Yb(A.verticalAlign);F=(d.horizontalLineContentHeight-A.scale*Ji)*S}return{rect:M.rect,metrics:M.metrics,baselineOffset:F}}function V7(A,n,c,d,m){const v=m[A.imageName];if(!v)return null;const w=v.paddedRect,M=v.displaySize,F={width:M[0],height:M[1],left:ca,top:-3,advance:n?M[1]:M[0]};let S;if(n)S=d.verticalLineContentWidth-M[1]*A.scale;else{const P=Yb(A.verticalAlign);S=(d.horizontalLineContentHeight-M[1]*A.scale)*P}return{rect:w,metrics:F,baselineOffset:S,imageOffset:(n?M[0]:M[1])*A.scale-Ji*c}}function G7(A,n,c,d){if(d===0)return;const m=A[c],v=(A[c].x+m.metrics.advance*m.scale)*d;for(let w=n;w<=c;w++)A[w].x-=v}function j7(A,n,c){const{horizontalAlign:d,verticalAlign:m}=X2(c),v=n[0]-A.displaySize[0]*d,w=n[1]-A.displaySize[1]*m;return{image:A,top:w,bottom:w+A.displaySize[1],left:v,right:v+A.displaySize[0]}}function Pb(A){var n,c;let d=A.left,m=A.top,v=A.right-d,w=A.bottom-m;const M=(n=A.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",F=(c=A.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",S=(A.image.content[2]-A.image.content[0])/(A.image.content[3]-A.image.content[1]);if(F==="proportional"){if(M==="stretchOnly"&&v/w<S||M==="proportional"){const P=Math.ceil(w*S);d*=P/v,v=P}}else if(M==="proportional"&&F==="stretchOnly"&&S!==0&&v/w>S){const P=Math.ceil(v/S);m*=P/w,w=P}return{x1:d,y1:m,x2:d+v,y2:m+w}}function Lb(A,n,c,d,m,v){const w=A.image;let M;if(w.content){const fe=w.content,be=w.pixelRatio||1;M=[fe[0]/be,fe[1]/be,w.displaySize[0]-fe[2]/be,w.displaySize[1]-fe[3]/be]}const F=n.left*v,S=n.right*v;let P,k,X,j;c==="width"||c==="both"?(j=m[0]+F-d[3],k=m[0]+S+d[1]):(j=m[0]+(F+S-w.displaySize[0])/2,k=j+w.displaySize[0]);const $=n.top*v,ee=n.bottom*v;return c==="height"||c==="both"?(P=m[1]+$-d[0],X=m[1]+ee+d[2]):(P=m[1]+($+ee-w.displaySize[1])/2,X=P+w.displaySize[1]),{image:w,top:P,right:k,bottom:X,left:j,collisionPadding:M}}const Cd=255,ao=128,vl=Cd*ao;function Qb(A,n){const{expression:c}=n;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new gi(A+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=c;let v=0;for(;v<d.length&&d[v]<=A;)v++;v=Math.max(0,v-1);let w=v;for(;w<d.length&&d[w]<A+1;)w++;w=Math.min(d.length-1,w);const M=d[v],F=d[w];return c.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:F,interpolationType:m}:{kind:"camera",minZoom:M,maxZoom:F,minSize:c.evaluate(new gi(M)),maxSize:c.evaluate(new gi(F)),interpolationType:m}}}function V2(A,n,c){let d="never";const m=A.get(n);return m?d=m:A.get(c)&&(d="always"),d}const K7=yd.VectorTileFeature.types,$7=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function A1(A,n,c,d,m,v,w,M,F,S,P,k,X){const j=M?Math.min(vl,Math.round(M[0])):0,$=M?Math.min(vl,Math.round(M[1])):0;A.emplaceBack(n,c,Math.round(32*d),Math.round(32*m),v,w,(j<<1)+(F?1:0),$,16*S,16*P,256*k,256*X)}function G2(A,n,c){A.emplaceBack(n.x,n.y,c),A.emplaceBack(n.x,n.y,c),A.emplaceBack(n.x,n.y,c),A.emplaceBack(n.x,n.y,c)}function q7(A){for(const n of A.sections)if(v2(n.text))return!0;return!1}class j2{constructor(n){this.layoutVertexArray=new We,this.indexArray=new Rt,this.programConfigurations=n,this.segments=new pr,this.dynamicLayoutVertexArray=new ot,this.opacityVertexArray=new ct,this.hasVisibleVertices=!1,this.placedSymbolArray=new Y}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,c,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,E7.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,F7.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,$7,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}kt("SymbolBuffers",j2);class K2{constructor(n,c,d){this.layoutVertexArray=new n,this.layoutAttributes=c,this.indexArray=new d,this.segments=new pr,this.collisionVertexArray=new Nt}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,T7.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}kt("CollisionBuffers",K2);class th{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(w=>w.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qb(this.zoom,c["text-size"]),this.iconSizeData=Qb(this.zoom,c["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=V2(d,"text-overlap","text-allow-overlap")!=="never"||V2(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(w=>h.al[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=n.sourceID}createArrays(){this.text=new j2(new Yo(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new j2(new Yo(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Z,this.lineVertexArray=new q,this.symbolInstances=new z,this.textAnchorOffsets=new me}calculateGlyphDependencies(n,c,d,m,v){for(let w=0;w<n.length;w++)if(c[n.charCodeAt(w)]=!0,(d||m)&&v){const M=wd[n.charAt(w)];M&&(c[M.charCodeAt(0)]=!0)}}populate(n,c,d){const m=this.layers[0],v=m.layout,w=v.get("text-font"),M=v.get("text-field"),F=v.get("icon-image"),S=(M.value.kind!=="constant"||M.value.value instanceof Wn&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),P=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,k=v.get("symbol-sort-key");if(this.features=[],!S&&!P)return;const X=c.iconDependencies,j=c.glyphDependencies,$=c.availableImages,ee=new gi(this.zoom);for(const{feature:fe,id:be,index:Ye,sourceLayerIndex:Be}of n){const G=m._featureFilter.needGeometry,ue=no(fe,G);if(!m._featureFilter.filter(ee,ue,d))continue;let Ce,qe;if(G||(ue.geometry=Aa(fe)),S){const it=m.getValueAndResolveTokens("text-field",ue,d,$),at=Wn.factory(it),Bt=this.hasRTLText=this.hasRTLText||q7(at);(!Bt||to.getRTLTextPluginStatus()==="unavailable"||Bt&&to.isParsed())&&(Ce=N7(at,m,ue))}if(P){const it=m.getValueAndResolveTokens("icon-image",ue,d,$);qe=it instanceof oa?it:oa.fromString(it)}if(!Ce&&!qe)continue;const yt=this.sortFeaturesByKey?k.evaluate(ue,{},d):void 0;if(this.features.push({id:be,text:Ce,icon:qe,index:Ye,sourceLayerIndex:Be,geometry:ue.geometry,properties:fe.properties,type:K7[fe.type],sortKey:yt}),qe&&(X[qe.name]=!0),Ce){const it=w.evaluate(ue,{},d).join(","),at=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.al.vertical)>=0;for(const Bt of Ce.sections)if(Bt.image)X[Bt.image.name]=!0;else{const vt=zc(Ce.toString()),It=Bt.fontStack||it,lt=j[It]=j[It]||{};this.calculateGlyphDependencies(Bt.text,lt,at,this.allowVerticalPlacement,vt)}}}v.get("symbol-placement")==="line"&&(this.features=function(fe){const be={},Ye={},Be=[];let G=0;function ue(it){Be.push(fe[it]),G++}function Ce(it,at,Bt){const vt=Ye[it];return delete Ye[it],Ye[at]=vt,Be[vt].geometry[0].pop(),Be[vt].geometry[0]=Be[vt].geometry[0].concat(Bt[0]),vt}function qe(it,at,Bt){const vt=be[at];return delete be[at],be[it]=vt,Be[vt].geometry[0].shift(),Be[vt].geometry[0]=Bt[0].concat(Be[vt].geometry[0]),vt}function yt(it,at,Bt){const vt=Bt?at[0][at[0].length-1]:at[0][0];return`${it}:${vt.x}:${vt.y}`}for(let it=0;it<fe.length;it++){const at=fe[it],Bt=at.geometry,vt=at.text?at.text.toString():null;if(!vt){ue(it);continue}const It=yt(vt,Bt),lt=yt(vt,Bt,!0);if(It in Ye&&lt in be&&Ye[It]!==be[lt]){const Xt=qe(It,lt,Bt),cr=Ce(It,lt,Be[Xt].geometry);delete be[It],delete Ye[lt],Ye[yt(vt,Be[cr].geometry,!0)]=cr,Be[Xt].geometry=null}else It in Ye?Ce(It,lt,Bt):lt in be?qe(It,lt,Bt):(ue(it),be[It]=G-1,Ye[lt]=G-1)}return Be.filter(it=>it.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,be)=>fe.sortKey-be.sortKey)}update(n,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,c){const d=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(c[n.segment+1]),v=n.dist(c[n.segment]);const w={};for(let M=n.segment+1;M<c.length;M++)w[M]={x:c[M].x,y:c[M].y,tileUnitDistanceFromAnchor:m},M<c.length-1&&(m+=c[M+1].dist(c[M]));for(let M=n.segment||0;M>=0;M--)w[M]={x:c[M].x,y:c[M].y,tileUnitDistanceFromAnchor:v},M>0&&(v+=c[M-1].dist(c[M]));for(let M=0;M<c.length;M++){const F=w[M];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,c,d,m,v,w,M,F,S,P,k,X){const j=n.indexArray,$=n.layoutVertexArray,ee=n.segments.prepareSegment(4*c.length,$,j,this.canOverlap?w.sortKey:void 0),fe=this.glyphOffsetArray.length,be=ee.vertexLength,Ye=this.allowVerticalPlacement&&M===h.al.vertical?Math.PI/2:0,Be=w.text&&w.text.sections;for(let G=0;G<c.length;G++){const{tl:ue,tr:Ce,bl:qe,br:yt,tex:it,pixelOffsetTL:at,pixelOffsetBR:Bt,minFontScaleX:vt,minFontScaleY:It,glyphOffset:lt,isSDF:Xt,sectionIndex:cr}=c[G],Ar=ee.vertexLength,Jt=lt[1];A1($,F.x,F.y,ue.x,Jt+ue.y,it.x,it.y,d,Xt,at.x,at.y,vt,It),A1($,F.x,F.y,Ce.x,Jt+Ce.y,it.x+it.w,it.y,d,Xt,Bt.x,at.y,vt,It),A1($,F.x,F.y,qe.x,Jt+qe.y,it.x,it.y+it.h,d,Xt,at.x,Bt.y,vt,It),A1($,F.x,F.y,yt.x,Jt+yt.y,it.x+it.w,it.y+it.h,d,Xt,Bt.x,Bt.y,vt,It),G2(n.dynamicLayoutVertexArray,F,Ye),j.emplaceBack(Ar,Ar+2,Ar+1),j.emplaceBack(Ar+1,Ar+2,Ar+3),ee.vertexLength+=4,ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),G!==c.length-1&&cr===c[G+1].sectionIndex||n.programConfigurations.populatePaintArrays($.length,w,w.index,{},X,Be&&Be[cr])}n.placedSymbolArray.emplaceBack(F.x,F.y,fe,this.glyphOffsetArray.length-fe,be,S,P,F.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],M,0,!1,0,k)}_addCollisionDebugVertex(n,c,d,m,v,w){return c.emplaceBack(0,0),n.emplaceBack(d.x,d.y,m,v,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(n,c,d,m,v,w,M){const F=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),S=F.vertexLength,P=v.layoutVertexArray,k=v.collisionVertexArray,X=M.anchorX,j=M.anchorY;this._addCollisionDebugVertex(P,k,w,X,j,new N(n,c)),this._addCollisionDebugVertex(P,k,w,X,j,new N(d,c)),this._addCollisionDebugVertex(P,k,w,X,j,new N(d,m)),this._addCollisionDebugVertex(P,k,w,X,j,new N(n,m)),F.vertexLength+=4;const $=v.indexArray;$.emplaceBack(S,S+1),$.emplaceBack(S+1,S+2),$.emplaceBack(S+2,S+3),$.emplaceBack(S+3,S),F.primitiveLength+=4}addDebugCollisionBoxes(n,c,d,m){for(let v=n;v<c;v++){const w=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new K2(st,Cb.members,bt),this.iconCollisionBox=new K2(st,Cb.members,bt);for(let n=0;n<this.symbolInstances.length;n++){const c=this.symbolInstances.get(n);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(n,c,d,m,v,w,M,F,S){const P={};for(let k=c;k<d;k++){const X=n.get(k);P.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},P.textFeatureIndex=X.featureIndex;break}for(let k=m;k<v;k++){const X=n.get(k);P.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},P.verticalTextFeatureIndex=X.featureIndex;break}for(let k=w;k<M;k++){const X=n.get(k);P.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},P.iconFeatureIndex=X.featureIndex;break}for(let k=F;k<S;k++){const X=n.get(k);P.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},P.verticalIconFeatureIndex=X.featureIndex;break}return P}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,c){const d=n.placedSymbolArray.get(c),m=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+2,v+1),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(n),d=Math.cos(n),m=[],v=[],w=[];for(let M=0;M<this.symbolInstances.length;++M){w.push(M);const F=this.symbolInstances.get(M);m.push(0|Math.round(c*F.anchorX+d*F.anchorY)),v.push(F.featureIndex)}return w.sort((M,F)=>m[M]-m[F]||v[F]-v[M]),w}addToSortKeyRanges(n,c){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,v,w)=>{m>=0&&w.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let kb,Db;kt("SymbolBucket",th,{omit:["layers","collisionBoxArray","features","compareText"]}),th.MAX_GLYPHS=65535,th.addDynamicAttributes=G2;var $2={get paint(){return Db=Db||new ta({"icon-opacity":new ur(Ae.paint_symbol["icon-opacity"]),"icon-color":new ur(Ae.paint_symbol["icon-color"]),"icon-halo-color":new ur(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new ur(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ur(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new ir(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new ir(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new ur(Ae.paint_symbol["text-opacity"]),"text-color":new ur(Ae.paint_symbol["text-color"],{runtimeType:ti,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new ur(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new ur(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new ur(Ae.paint_symbol["text-halo-blur"]),"text-translate":new ir(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new ir(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return kb=kb||new ta({"symbol-placement":new ir(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new ir(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ir(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ur(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ir(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ir(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ir(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ir(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new ir(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ir(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new ur(Ae.layout_symbol["icon-size"]),"icon-text-fit":new ir(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ir(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new ur(Ae.layout_symbol["icon-image"]),"icon-rotate":new ur(Ae.layout_symbol["icon-rotate"]),"icon-padding":new ur(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new ir(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new ur(Ae.layout_symbol["icon-offset"]),"icon-anchor":new ur(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ir(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ir(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ir(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new ur(Ae.layout_symbol["text-field"]),"text-font":new ur(Ae.layout_symbol["text-font"]),"text-size":new ur(Ae.layout_symbol["text-size"]),"text-max-width":new ur(Ae.layout_symbol["text-max-width"]),"text-line-height":new ir(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new ur(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new ur(Ae.layout_symbol["text-justify"]),"text-radial-offset":new ur(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ir(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ur(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ur(Ae.layout_symbol["text-anchor"]),"text-max-angle":new ir(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new ir(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new ur(Ae.layout_symbol["text-rotate"]),"text-padding":new ir(Ae.layout_symbol["text-padding"]),"text-keep-upright":new ir(Ae.layout_symbol["text-keep-upright"]),"text-transform":new ur(Ae.layout_symbol["text-transform"]),"text-offset":new ur(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new ir(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new ir(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new ir(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new ir(Ae.layout_symbol["text-optional"])})}};class zb{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:tr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(n.formattedSection))return c.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}kt("FormatSectionOverride",zb,{omit:["defaultValue"]});class c1 extends ts{constructor(n){super(n,$2)}recalculate(n,c){if(super.recalculate(n,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const v of d)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,c,d,m){const v=this.layout.get(n).evaluate(c,{},d,m),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||Ro(w.value)||!v?v:function(M,F){return F.replace(/{([^{}]+)}/g,(S,P)=>M&&P in M?String(M[P]):"")}(c.properties,v)}createBucket(n){return new th(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of $2.paint.overridableProperties){if(!c1.hasPaintOverride(this.layout,n))continue;const c=this.paint.get(n),d=new zb(c),m=new Nu(d,c.property.specification);let v=null;v=c.value.kind==="constant"||c.value.kind==="source"?new Yu("source",m):new Pu("composite",m,c.value.zoomStops),this.paint._values[n]=new es(c.property,v,c.parameters)}}_handleOverridablePaintPropertyUpdate(n,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&c1.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,c){const d=n.get("text-field"),m=$2.paint.properties[c];let v=!1;const w=M=>{for(const F of M)if(m.overrides&&m.overrides.hasOverride(F))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Wn)w(d.value.value.sections);else if(d.value.kind==="source"){const M=S=>{v||(S instanceof qs&&Ni(S.value)===Ht?w(S.value.sections):S instanceof vc?w(S.sections):S.eachChild(M))},F=d.value;F._styleExpression&&M(F._styleExpression.expression)}return v}}let Zb;var W7={get paint(){return Zb=Zb||new ta({"background-color":new ir(Ae.paint_background["background-color"]),"background-pattern":new td(Ae.paint_background["background-pattern"]),"background-opacity":new ir(Ae.paint_background["background-opacity"])})}};class J7 extends ts{constructor(n){super(n,W7)}}let Hb;var eB={get paint(){return Hb=Hb||new ta({"raster-opacity":new ir(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new ir(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ir(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ir(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new ir(Ae.paint_raster["raster-saturation"]),"raster-contrast":new ir(Ae.paint_raster["raster-contrast"]),"raster-resampling":new ir(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new ir(Ae.paint_raster["raster-fade-duration"])})}};class tB extends ts{constructor(n){super(n,eB)}}class rB extends ts{constructor(n){super(n,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class iB{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const nB={once:!0},q2=63710088e-1;class xl{constructor(n,c){if(isNaN(n)||isNaN(c))throw new Error(`Invalid LngLat object: (${n}, ${c})`);if(this.lng=+n,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xl(wt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const c=Math.PI/180,d=this.lat*c,m=n.lat*c,v=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((n.lng-this.lng)*c);return q2*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof xl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new xl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new xl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ob=2*Math.PI*q2;function Xb(A){return Ob*Math.cos(A*Math.PI/180)}function Vb(A){return(180+A)/360}function Gb(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function jb(A,n){return A/Xb(n)}function W2(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function Kb(A,n){return A*Xb(W2(n))}class Md{constructor(n,c,d=0){this.x=+n,this.y=+c,this.z=+d}static fromLngLat(n,c=0){const d=xl.convert(n);return new Md(Vb(d.lng),Gb(d.lat),jb(c,d.lat))}toLngLat(){return new xl(360*this.x-180,W2(this.y))}toAltitude(){return Kb(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ob*(n=W2(this.y),1/Math.cos(n*Math.PI/180));var n}}function $b(A,n,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[A*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class J2{constructor(n,c,d){if(!function(m,v,w){return!(m<0||m>25||w<0||w>=Math.pow(2,m)||v<0||v>=Math.pow(2,m))}(n,c,d))throw new Error(`x=${c}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=c,this.y=d,this.key=rh(0,n,n,c,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,c,d){const m=(w=this.y,M=this.z,F=$b(256*(v=this.x),256*(w=Math.pow(2,M)-w-1),M),S=$b(256*(v+1),256*(w+1),M),F[0]+","+F[1]+","+S[0]+","+S[1]);var v,w,M,F,S;const P=function(k,X,j){let $,ee="";for(let fe=k;fe>0;fe--)$=1<<fe-1,ee+=(X&$?1:0)+(j&$?2:0);return ee}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const c=this.z-n.z;return c>0&&n.x===this.x>>c&&n.y===this.y>>c}getTilePoint(n){const c=Math.pow(2,this.z);return new N((n.x*c-this.x)*ft,(n.y*c-this.y)*ft)}toString(){return`${this.z}/${this.x}/${this.y}`}}class qb{constructor(n,c){this.wrap=n,this.canonical=c,this.key=rh(n,c.z,c.z,c.x,c.y)}}class Na{constructor(n,c,d,m,v){if(this.terrainRttPosMatrix32f=null,n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=c,this.canonical=new J2(d,+m,+v),this.key=rh(c,n,d,m,v)}clone(){return new Na(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-n;return n>this.canonical.z?new Na(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Na(n,this.wrap,n,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(n,c){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?rh(this.wrap*+c,n,this.canonical.z,this.canonical.x,this.canonical.y):rh(this.wrap*+c,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const c=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>c&&n.canonical.y===this.canonical.y>>c}children(n){if(this.overscaledZ>=n)return[new Na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new Na(c,this.wrap,c,d,m),new Na(c,this.wrap,c,d+1,m),new Na(c,this.wrap,c,d,m+1),new Na(c,this.wrap,c,d+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Na(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new qb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Md(n.x-this.wrap,n.y))}}function rh(A,n,c,d,m){(A*=2)<0&&(A=-1*A-1);const v=1<<c;return(v*v*A+v*m+d).toString(36)+c.toString(36)+n.toString(36)}kt("CanonicalTileID",J2),kt("OverscaledTileID",Na,{omit:["terrainRttPosMatrix32f"]});class Wb{constructor(n,c,d,m=1,v=1,w=1,M=0){if(this.uid=n,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Qt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const F=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=w,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let S=0;S<F;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(F,S)]=this.data[this._idx(F-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,F)]=this.data[this._idx(S,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<F;S++)for(let P=0;P<F;P++){const k=this.get(S,P);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(n,c){const d=new Uint8Array(this.data.buffer),m=4*this._idx(n,c);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,c){if(n<-1||n>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(n+1)}unpack(n,c,d){return n*this.redFactor+c*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new Sa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,c,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,v=c*this.dim+this.dim,w=d*this.dim,M=d*this.dim+this.dim;switch(c){case-1:m=v-1;break;case 1:v=m+1}switch(d){case-1:w=M-1;break;case 1:M=w+1}const F=-c*this.dim,S=-d*this.dim;for(let P=w;P<M;P++)for(let k=m;k<v;k++)this.data[this._idx(k,P)]=n.data[this._idx(k+F,P+S)]}}kt("DEMData",Wb);class Jb{constructor(n){this._stringToNumber={},this._numberToString=[];for(let c=0;c<n.length;c++){const d=n[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class ey{constructor(n,c,d,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=c,n._x=d,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(n[c]=this[c]);return n}}class ty{constructor(n,c){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new ys(ft,16,0),this.grid3D=new ys(ft,16,0),this.featureIndexArray=new _e,this.promoteId=c}insert(n,c,d,m,v,w){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,v);const F=w?this.grid3D:this.grid;for(let S=0;S<c.length;S++){const P=c[S],k=[1/0,1/0,-1/0,-1/0];for(let X=0;X<P.length;X++){const j=P[X];k[0]=Math.min(k[0],j.x),k[1]=Math.min(k[1],j.y),k[2]=Math.max(k[2],j.x),k[3]=Math.max(k[3],j.y)}k[0]<ft&&k[1]<ft&&k[2]>=0&&k[3]>=0&&F.insert(M,k[0],k[1],k[2],k[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new yd.VectorTile(new z2(this.rawTileData)).layers,this.sourceLayerCoder=new Jb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,c,d,m){this.loadVTLayers();const v=n.params,w=ft/n.tileSize/n.scale,M=Lu(v.filter),F=n.queryGeometry,S=n.queryPadding*w,P=iy(F),k=this.grid.query(P.minX-S,P.minY-S,P.maxX+S,P.maxY+S),X=iy(n.cameraQueryGeometry),j=this.grid3D.query(X.minX-S,X.minY-S,X.maxX+S,X.maxY+S,(fe,be,Ye,Be)=>function(G,ue,Ce,qe,yt){for(const at of G)if(ue<=at.x&&Ce<=at.y&&qe>=at.x&&yt>=at.y)return!0;const it=[new N(ue,Ce),new N(ue,yt),new N(qe,yt),new N(qe,Ce)];if(G.length>2){for(const at of it)if(NA(G,at))return!0}for(let at=0;at<G.length-1;at++)if(V9(G[at],G[at+1],it))return!0;return!1}(n.cameraQueryGeometry,fe-S,be-S,Ye+S,Be+S));for(const fe of j)k.push(fe);k.sort(aB);const $={};let ee;for(let fe=0;fe<k.length;fe++){const be=k[fe];if(be===ee)continue;ee=be;const Ye=this.featureIndexArray.get(be);let Be=null;this.loadMatchingFeature($,Ye.bucketIndex,Ye.sourceLayerIndex,Ye.featureIndex,M,v.layers,v.availableImages,c,d,m,(G,ue,Ce)=>(Be||(Be=Aa(G)),ue.queryIntersectsFeature({queryGeometry:F,feature:G,featureState:Ce,geometry:Be,zoom:this.z,transform:n.transform,pixelsToTileUnits:w,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return $}loadMatchingFeature(n,c,d,m,v,w,M,F,S,P,k){const X=this.bucketLayerIDs[c];if(w&&!X.some(fe=>w.has(fe)))return;const j=this.sourceLayerCoder.decode(d),$=this.vtLayers[j].feature(m);if(v.needGeometry){const fe=no($,!0);if(!v.filter(new gi(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!v.filter(new gi(this.tileID.overscaledZ),$))return;const ee=this.getId($,j);for(let fe=0;fe<X.length;fe++){const be=X[fe];if(w&&!w.has(be))continue;const Ye=F[be];if(!Ye)continue;let Be={};ee&&P&&(Be=P.getState(Ye.sourceLayer||"_geojsonTileLayer",ee));const G=Ct({},S[be]);G.paint=ry(G.paint,Ye.paint,$,Be,M),G.layout=ry(G.layout,Ye.layout,$,Be,M);const ue=!k||k($,Ye,Be);if(!ue)continue;const Ce=new ey($,this.z,this.x,this.y,ee);Ce.layer=G;let qe=n[be];qe===void 0&&(qe=n[be]=[]),qe.push({featureIndex:m,feature:Ce,intersectionZ:ue})}}lookupSymbolFeatures(n,c,d,m,v,w,M,F){const S={};this.loadVTLayers();const P=Lu(v);for(const k of n)this.loadMatchingFeature(S,d,m,k,P,w,M,F,c);return S}hasLayer(n){for(const c of this.bucketLayerIDs)for(const d of c)if(n===d)return!0;return!1}getId(n,c){var d;let m=n.id;return this.promoteId&&(m=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((d=n.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(m=Number(n.properties.cluster_id))),m}}function ry(A,n,c,d,m){return Pt(A,(v,w)=>{const M=n instanceof Xc?n.get(w):null;return M&&M.evaluate?M.evaluate(c,d,m):M})}function iy(A){let n=1/0,c=1/0,d=-1/0,m=-1/0;for(const v of A)n=Math.min(n,v.x),c=Math.min(c,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return{minX:n,minY:c,maxX:d,maxY:m}}function aB(A,n){return n-A}function ny(A,n,c,d,m){const v=[];for(let w=0;w<A.length;w++){const M=A[w];let F;for(let S=0;S<M.length-1;S++){let P=M[S],k=M[S+1];P.x<n&&k.x<n||(P.x<n?P=new N(n,P.y+(n-P.x)/(k.x-P.x)*(k.y-P.y))._round():k.x<n&&(k=new N(n,P.y+(n-P.x)/(k.x-P.x)*(k.y-P.y))._round()),P.y<c&&k.y<c||(P.y<c?P=new N(P.x+(c-P.y)/(k.y-P.y)*(k.x-P.x),c)._round():k.y<c&&(k=new N(P.x+(c-P.y)/(k.y-P.y)*(k.x-P.x),c)._round()),P.x>=d&&k.x>=d||(P.x>=d?P=new N(d,P.y+(d-P.x)/(k.x-P.x)*(k.y-P.y))._round():k.x>=d&&(k=new N(d,P.y+(d-P.x)/(k.x-P.x)*(k.y-P.y))._round()),P.y>=m&&k.y>=m||(P.y>=m?P=new N(P.x+(m-P.y)/(k.y-P.y)*(k.x-P.x),m)._round():k.y>=m&&(k=new N(P.x+(m-P.y)/(k.y-P.y)*(k.x-P.x),m)._round()),F&&P.equals(F[F.length-1])||(F=[P],v.push(F)),F.push(k)))))}}return v}kt("FeatureIndex",ty,{omit:["rawTileData","sourceLayerCoder"]});class wl extends N{constructor(n,c,d,m){super(n,c),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new wl(this.x,this.y,this.angle,this.segment)}}function ay(A,n,c,d,m){if(n.segment===void 0||c===0)return!0;let v=n,w=n.segment+1,M=0;for(;M>-c/2;){if(w--,w<0)return!1;M-=A[w].dist(v),v=A[w]}M+=A[w].dist(A[w+1]),w++;const F=[];let S=0;for(;M<c/2;){const P=A[w],k=A[w+1];if(!k)return!1;let X=A[w-1].angleTo(P)-P.angleTo(k);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:M,angleDelta:X}),S+=X;M-F[0].distance>d;)S-=F.shift().angleDelta;if(S>m)return!1;w++,M+=P.dist(k)}return!0}function sy(A){let n=0;for(let c=0;c<A.length-1;c++)n+=A[c].dist(A[c+1]);return n}function oy(A,n,c){return A?.6*n*c:0}function ly(A,n){return Math.max(A?A.right-A.left:0,n?n.right-n.left:0)}function sB(A,n,c,d,m,v){const w=oy(c,m,v),M=ly(c,d)*v;let F=0;const S=sy(A)/2;for(let P=0;P<A.length-1;P++){const k=A[P],X=A[P+1],j=k.dist(X);if(F+j>S){const $=(S-F)/j,ee=di.number(k.x,X.x,$),fe=di.number(k.y,X.y,$),be=new wl(ee,fe,X.angleTo(k),P);return be._round(),!w||ay(A,be,M,w,n)?be:void 0}F+=j}}function oB(A,n,c,d,m,v,w,M,F){const S=oy(d,v,w),P=ly(d,m),k=P*w,X=A[0].x===0||A[0].x===F||A[0].y===0||A[0].y===F;return n-k<n/4&&(n=k+n/4),Ay(A,X?n/2*M%n:(P/2+2*v)*w*M%n,n,S,c,k,X,!1,F)}function Ay(A,n,c,d,m,v,w,M,F){const S=v/2,P=sy(A);let k=0,X=n-c,j=[];for(let $=0;$<A.length-1;$++){const ee=A[$],fe=A[$+1],be=ee.dist(fe),Ye=fe.angleTo(ee);for(;X+c<k+be;){X+=c;const Be=(X-k)/be,G=di.number(ee.x,fe.x,Be),ue=di.number(ee.y,fe.y,Be);if(G>=0&&G<F&&ue>=0&&ue<F&&X-S>=0&&X+S<=P){const Ce=new wl(G,ue,Ye,$);Ce._round(),d&&!ay(A,Ce,v,d,m)||j.push(Ce)}}k+=be}return M||j.length||w||(j=Ay(A,k/2,c,d,m,v,w,!0,F)),j}kt("Anchor",wl);const Rd=ca;function cy(A,n,c,d){const m=[],v=A.image,w=v.pixelRatio,M=v.paddedRect.w-2*Rd,F=v.paddedRect.h-2*Rd;let S={x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};const P=v.stretchX||[[0,M]],k=v.stretchY||[[0,F]],X=(lt,Xt)=>lt+Xt[1]-Xt[0],j=P.reduce(X,0),$=k.reduce(X,0),ee=M-j,fe=F-$;let be=0,Ye=j,Be=0,G=$,ue=0,Ce=ee,qe=0,yt=fe;if(v.content&&d){const lt=v.content,Xt=lt[2]-lt[0],cr=lt[3]-lt[1];(v.textFitWidth||v.textFitHeight)&&(S=Pb(A)),be=h1(P,0,lt[0]),Be=h1(k,0,lt[1]),Ye=h1(P,lt[0],lt[2]),G=h1(k,lt[1],lt[3]),ue=lt[0]-be,qe=lt[1]-Be,Ce=Xt-Ye,yt=cr-G}const it=S.x1,at=S.y1,Bt=S.x2-it,vt=S.y2-at,It=(lt,Xt,cr,Ar)=>{const Jt=u1(lt.stretch-be,Ye,Bt,it),Yr=d1(lt.fixed-ue,Ce,lt.stretch,j),Pi=u1(Xt.stretch-Be,G,vt,at),en=d1(Xt.fixed-qe,yt,Xt.stretch,$),Nn=u1(cr.stretch-be,Ye,Bt,it),Ya=d1(cr.fixed-ue,Ce,cr.stretch,j),ha=u1(Ar.stretch-Be,G,vt,at),vn=d1(Ar.fixed-qe,yt,Ar.stretch,$),Ui=new N(Jt,Pi),ln=new N(Nn,Pi),xn=new N(Nn,ha),wn=new N(Jt,ha),ra=new N(Yr/w,en/w),Pa=new N(Ya/w,vn/w),An=n*Math.PI/180;if(An){const cn=Math.sin(An),hn=Math.cos(An),ji=[hn,-cn,cn,hn];Ui._matMult(ji),ln._matMult(ji),wn._matMult(ji),xn._matMult(ji)}const ua=lt.stretch+lt.fixed,tn=Xt.stretch+Xt.fixed;return{tl:Ui,tr:ln,bl:wn,br:xn,tex:{x:v.paddedRect.x+Rd+ua,y:v.paddedRect.y+Rd+tn,w:cr.stretch+cr.fixed-ua,h:Ar.stretch+Ar.fixed-tn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ra,pixelOffsetBR:Pa,minFontScaleX:Ce/w/Bt,minFontScaleY:yt/w/vt,isSDF:c}};if(d&&(v.stretchX||v.stretchY)){const lt=hy(P,ee,j),Xt=hy(k,fe,$);for(let cr=0;cr<lt.length-1;cr++){const Ar=lt[cr],Jt=lt[cr+1];for(let Yr=0;Yr<Xt.length-1;Yr++)m.push(It(Ar,Xt[Yr],Jt,Xt[Yr+1]))}}else m.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:F+1}));return m}function h1(A,n,c){let d=0;for(const m of A)d+=Math.max(n,Math.min(c,m[1]))-Math.max(n,Math.min(c,m[0]));return d}function hy(A,n,c){const d=[{fixed:-1,stretch:0}];for(const[m,v]of A){const w=d[d.length-1];d.push({fixed:m-w.stretch,stretch:w.stretch}),d.push({fixed:m-w.stretch,stretch:w.stretch+(v-m)})}return d.push({fixed:n+Rd,stretch:c}),d}function u1(A,n,c,d){return A/n*c+d}function d1(A,n,c,d){return A-n*c/d}class f1{constructor(n,c,d,m,v,w,M,F,S,P){var k;if(this.boxStartIndex=n.length,S){let X=w.top,j=w.bottom;const $=w.collisionPadding;$&&(X-=$[1],j+=$[3]);let ee=j-X;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{const X=!((k=w.image)===null||k===void 0)&&k.content&&(w.image.textFitWidth||w.image.textFitHeight)?Pb(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};X.y1=X.y1*M-F[0],X.y2=X.y2*M+F[2],X.x1=X.x1*M-F[3],X.x2=X.x2*M+F[1];const j=w.collisionPadding;if(j&&(X.x1-=j[0]*M,X.y1-=j[1]*M,X.x2+=j[2]*M,X.y2+=j[3]*M),P){const $=new N(X.x1,X.y1),ee=new N(X.x2,X.y1),fe=new N(X.x1,X.y2),be=new N(X.x2,X.y2),Ye=P*Math.PI/180;$._rotate(Ye),ee._rotate(Ye),fe._rotate(Ye),be._rotate(Ye),X.x1=Math.min($.x,ee.x,fe.x,be.x),X.x2=Math.max($.x,ee.x,fe.x,be.x),X.y1=Math.min($.y,ee.y,fe.y,be.y),X.y2=Math.max($.y,ee.y,fe.y,be.y)}n.emplaceBack(c.x,c.y,X.x1,X.y1,X.x2,X.y2,d,m,v)}this.boxEndIndex=n.length}}class lB{constructor(n=[],c=(d,m)=>d<m?-1:d>m?1:0){if(this.data=n,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:c,compare:d}=this,m=c[n];for(;n>0;){const v=n-1>>1,w=c[v];if(d(m,w)>=0)break;c[n]=w,n=v}c[n]=m}_down(n){const{data:c,compare:d}=this,m=this.length>>1,v=c[n];for(;n<m;){let w=1+(n<<1);const M=w+1;if(M<this.length&&d(c[M],c[w])<0&&(w=M),d(c[w],v)>=0)break;c[n]=c[w],n=w}c[n]=v}}function AB(A,n=1,c=!1){let d=1/0,m=1/0,v=-1/0,w=-1/0;const M=A[0];for(let j=0;j<M.length;j++){const $=M[j];(!j||$.x<d)&&(d=$.x),(!j||$.y<m)&&(m=$.y),(!j||$.x>v)&&(v=$.x),(!j||$.y>w)&&(w=$.y)}const F=Math.min(v-d,w-m);let S=F/2;const P=new lB([],cB);if(F===0)return new N(d,m);for(let j=d;j<v;j+=F)for(let $=m;$<w;$+=F)P.push(new ih(j+S,$+S,S,A));let k=function(j){let $=0,ee=0,fe=0;const be=j[0];for(let Ye=0,Be=be.length,G=Be-1;Ye<Be;G=Ye++){const ue=be[Ye],Ce=be[G],qe=ue.x*Ce.y-Ce.x*ue.y;ee+=(ue.x+Ce.x)*qe,fe+=(ue.y+Ce.y)*qe,$+=3*qe}return new ih(ee/$,fe/$,0,j)}(A),X=P.length;for(;P.length;){const j=P.pop();(j.d>k.d||!k.d)&&(k=j,c&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,X)),j.max-k.d<=n||(S=j.h/2,P.push(new ih(j.p.x-S,j.p.y-S,S,A)),P.push(new ih(j.p.x+S,j.p.y-S,S,A)),P.push(new ih(j.p.x-S,j.p.y+S,S,A)),P.push(new ih(j.p.x+S,j.p.y+S,S,A)),X+=4)}return c&&(console.log(`num probes: ${X}`),console.log(`best distance: ${k.d}`)),k.p}function cB(A,n){return n.max-A.max}function ih(A,n,c,d){this.p=new N(A,n),this.h=c,this.d=function(m,v){let w=!1,M=1/0;for(let F=0;F<v.length;F++){const S=v[F];for(let P=0,k=S.length,X=k-1;P<k;X=P++){const j=S[P],$=S[X];j.y>m.y!=$.y>m.y&&m.x<($.x-j.x)*(m.y-j.y)/($.y-j.y)+j.x&&(w=!w),M=Math.min(M,X_(m,j,$))}}return(w?1:-1)*Math.sqrt(M)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Sn;h.aB=void 0,(Sn=h.aB||(h.aB={}))[Sn.center=1]="center",Sn[Sn.left=2]="left",Sn[Sn.right=3]="right",Sn[Sn.top=4]="top",Sn[Sn.bottom=5]="bottom",Sn[Sn["top-left"]=6]="top-left",Sn[Sn["top-right"]=7]="top-right",Sn[Sn["bottom-left"]=8]="bottom-left",Sn[Sn["bottom-right"]=9]="bottom-right";const Bl=7,e3=Number.POSITIVE_INFINITY;function uy(A,n){return n[1]!==e3?function(c,d,m){let v=0,w=0;switch(d=Math.abs(d),m=Math.abs(m),c){case"top-right":case"top-left":case"top":w=m-Bl;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+Bl}switch(c){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,w]}(A,n[0],n[1]):function(c,d){let m=0,v=0;d<0&&(d=0);const w=d/Math.SQRT2;switch(c){case"top-right":case"top-left":v=w-Bl;break;case"bottom-right":case"bottom-left":v=-w+Bl;break;case"bottom":v=-d+Bl;break;case"top":v=d-Bl}switch(c){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=d;break;case"right":m=-d}return[m,v]}(A,n[0])}function dy(A,n,c){var d;const m=A.layout,v=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},c);if(v){const M=v.values,F=[];for(let S=0;S<M.length;S+=2){const P=F[S]=M[S],k=M[S+1].map(X=>X*Ji);P.startsWith("top")?k[1]-=Bl:P.startsWith("bottom")&&(k[1]+=Bl),F[S+1]=k}return new bn(F)}const w=m.get("text-variable-anchor");if(w){let M;M=A._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},c)*Ji,e3]:m.get("text-offset").evaluate(n,{},c).map(S=>S*Ji);const F=[];for(const S of w)F.push(S,uy(S,M));return new bn(F)}return null}function t3(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hB(A,n,c,d,m,v,w,M,F,S,P,k){let X=v.textMaxSize.evaluate(n,{});X===void 0&&(X=w);const j=A.layers[0].layout,$=j.get("icon-offset").evaluate(n,{},P),ee=gy(c.horizontal),fe=w/24,be=A.tilePixelRatio*fe,Ye=A.tilePixelRatio*X/24,Be=A.tilePixelRatio*M,G=A.tilePixelRatio*j.get("symbol-spacing"),ue=j.get("text-padding")*A.tilePixelRatio,Ce=function(cr,Ar,Jt,Yr=1){const Pi=cr.get("icon-padding").evaluate(Ar,{},Jt),en=Pi&&Pi.values;return[en[0]*Yr,en[1]*Yr,en[2]*Yr,en[3]*Yr]}(j,n,P,A.tilePixelRatio),qe=j.get("text-max-angle")/180*Math.PI,yt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",it=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",at=j.get("symbol-placement"),Bt=G/2,vt=j.get("icon-text-fit");let It;d&&vt!=="none"&&(A.allowVerticalPlacement&&c.vertical&&(It=Lb(d,c.vertical,vt,j.get("icon-text-fit-padding"),$,fe)),ee&&(d=Lb(d,ee,vt,j.get("icon-text-fit-padding"),$,fe)));const lt=P?k.line.getGranularityForZoomLevel(P.z):1,Xt=(cr,Ar)=>{Ar.x<0||Ar.x>=ft||Ar.y<0||Ar.y>=ft||function(Jt,Yr,Pi,en,Nn,Ya,ha,vn,Ui,ln,xn,wn,ra,Pa,An,ua,tn,cn,hn,ji,_i,Rs,nh,Is,fB){const ah=Jt.addToLineVertexArray(Yr,Pi);let LA,sh,oh,lh,by=0,yy=0,vy=0,xy=0,A3=-1,c3=-1;const Po={};let wy=Tn("");if(Jt.allowVerticalPlacement&&en.vertical){const On=vn.layout.get("text-rotate").evaluate(_i,{},Is)+90;oh=new f1(Ui,Yr,ln,xn,wn,en.vertical,ra,Pa,An,On),ha&&(lh=new f1(Ui,Yr,ln,xn,wn,ha,tn,cn,An,On))}if(Nn){const On=vn.layout.get("icon-rotate").evaluate(_i,{}),La=vn.layout.get("icon-text-fit")!=="none",QA=cy(Nn,On,nh,La),Es=ha?cy(ha,On,nh,La):void 0;sh=new f1(Ui,Yr,ln,xn,wn,Nn,tn,cn,!1,On),by=4*QA.length;const kA=Jt.iconSizeData;let so=null;kA.kind==="source"?(so=[ao*vn.layout.get("icon-size").evaluate(_i,{})],so[0]>vl&&Qt(`${Jt.layerIds[0]}: Value for "icon-size" is >= ${Cd}. Reduce your "icon-size".`)):kA.kind==="composite"&&(so=[ao*Rs.compositeIconSizes[0].evaluate(_i,{},Is),ao*Rs.compositeIconSizes[1].evaluate(_i,{},Is)],(so[0]>vl||so[1]>vl)&&Qt(`${Jt.layerIds[0]}: Value for "icon-size" is >= ${Cd}. Reduce your "icon-size".`)),Jt.addSymbols(Jt.icon,QA,so,ji,hn,_i,h.al.none,Yr,ah.lineStartIndex,ah.lineLength,-1,Is),A3=Jt.icon.placedSymbolArray.length-1,Es&&(yy=4*Es.length,Jt.addSymbols(Jt.icon,Es,so,ji,hn,_i,h.al.vertical,Yr,ah.lineStartIndex,ah.lineLength,-1,Is),c3=Jt.icon.placedSymbolArray.length-1)}const By=Object.keys(en.horizontal);for(const On of By){const La=en.horizontal[On];if(!LA){wy=Tn(La.text);const Es=vn.layout.get("text-rotate").evaluate(_i,{},Is);LA=new f1(Ui,Yr,ln,xn,wn,La,ra,Pa,An,Es)}const QA=La.positionedLines.length===1;if(vy+=fy(Jt,Yr,La,Ya,vn,An,_i,ua,ah,en.vertical?h.al.horizontal:h.al.horizontalOnly,QA?By:[On],Po,A3,Rs,Is),QA)break}en.vertical&&(xy+=fy(Jt,Yr,en.vertical,Ya,vn,An,_i,ua,ah,h.al.vertical,["vertical"],Po,c3,Rs,Is));const gB=LA?LA.boxStartIndex:Jt.collisionBoxArray.length,pB=LA?LA.boxEndIndex:Jt.collisionBoxArray.length,mB=oh?oh.boxStartIndex:Jt.collisionBoxArray.length,_B=oh?oh.boxEndIndex:Jt.collisionBoxArray.length,bB=sh?sh.boxStartIndex:Jt.collisionBoxArray.length,yB=sh?sh.boxEndIndex:Jt.collisionBoxArray.length,vB=lh?lh.boxStartIndex:Jt.collisionBoxArray.length,xB=lh?lh.boxEndIndex:Jt.collisionBoxArray.length;let Us=-1;const p1=(On,La)=>On&&On.circleDiameter?Math.max(On.circleDiameter,La):La;Us=p1(LA,Us),Us=p1(oh,Us),Us=p1(sh,Us),Us=p1(lh,Us);const Cy=Us>-1?1:0;Cy&&(Us*=fB/Ji),Jt.glyphOffsetArray.length>=th.MAX_GLYPHS&&Qt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_i.sortKey!==void 0&&Jt.addToSortKeyRanges(Jt.symbolInstances.length,_i.sortKey);const wB=dy(vn,_i,Is),[BB,CB]=function(On,La){const QA=On.length,Es=La==null?void 0:La.values;if((Es==null?void 0:Es.length)>0)for(let kA=0;kA<Es.length;kA+=2){const so=Es[kA+1];On.emplaceBack(h.aB[Es[kA]],so[0],so[1])}return[QA,On.length]}(Jt.textAnchorOffsets,wB);Jt.symbolInstances.emplaceBack(Yr.x,Yr.y,Po.right>=0?Po.right:-1,Po.center>=0?Po.center:-1,Po.left>=0?Po.left:-1,Po.vertical||-1,A3,c3,wy,gB,pB,mB,_B,bB,yB,vB,xB,ln,vy,xy,by,yy,Cy,0,ra,Us,BB,CB)}(A,Ar,cr,c,d,m,It,A.layers[0],A.collisionBoxArray,n.index,n.sourceLayerIndex,A.index,be,[ue,ue,ue,ue],yt,F,Be,Ce,it,$,n,v,S,P,w)};if(at==="line")for(const cr of ny(n.geometry,0,0,ft,ft)){const Ar=PA(cr,lt),Jt=oB(Ar,G,qe,c.vertical||ee,d,24,Ye,A.overscaling,ft);for(const Yr of Jt)ee&&uB(A,ee.text,Bt,Yr)||Xt(Ar,Yr)}else if(at==="line-center"){for(const cr of n.geometry)if(cr.length>1){const Ar=PA(cr,lt),Jt=sB(Ar,qe,c.vertical||ee,d,24,Ye);Jt&&Xt(Ar,Jt)}}else if(n.type==="Polygon")for(const cr of wc(n.geometry,0)){const Ar=AB(cr,16);Xt(PA(cr[0],lt,!0),new wl(Ar.x,Ar.y,0))}else if(n.type==="LineString")for(const cr of n.geometry){const Ar=PA(cr,lt);Xt(Ar,new wl(Ar[0].x,Ar[0].y,0))}else if(n.type==="Point")for(const cr of n.geometry)for(const Ar of cr)Xt([Ar],new wl(Ar.x,Ar.y,0))}function fy(A,n,c,d,m,v,w,M,F,S,P,k,X,j,$){const ee=function(Ye,Be,G,ue,Ce,qe,yt,it){const at=ue.layout.get("text-rotate").evaluate(qe,{})*Math.PI/180,Bt=[];for(const vt of Be.positionedLines)for(const It of vt.positionedGlyphs){if(!It.rect)continue;const lt=It.rect||{};let Xt=k7+1,cr=!0,Ar=1,Jt=0;const Yr=(Ce||it)&&It.vertical,Pi=It.metrics.advance*It.scale/2;if(it&&Be.verticalizable&&(Jt=vt.lineOffset/2-(It.imageName?-(Ji-It.metrics.width*It.scale)/2:(It.scale-1)*Ji)),It.imageName){const cn=yt[It.imageName];cr=cn.sdf,Ar=cn.pixelRatio,Xt=ca/Ar}const en=Ce?[It.x+Pi,It.y]:[0,0];let Nn=Ce?[0,0]:[It.x+Pi+G[0],It.y+G[1]-Jt],Ya=[0,0];Yr&&(Ya=Nn,Nn=[0,0]);const ha=It.metrics.isDoubleResolution?2:1,vn=(It.metrics.left-Xt)*It.scale-Pi+Nn[0],Ui=(-It.metrics.top-Xt)*It.scale+Nn[1],ln=vn+lt.w/ha*It.scale/Ar,xn=Ui+lt.h/ha*It.scale/Ar,wn=new N(vn,Ui),ra=new N(ln,Ui),Pa=new N(vn,xn),An=new N(ln,xn);if(Yr){const cn=new N(-Pi,Pi-s1),hn=-Math.PI/2,ji=Ji/2-Pi,_i=new N(5-s1-ji,-(It.imageName?ji:0)),Rs=new N(...Ya);wn._rotateAround(hn,cn)._add(_i)._add(Rs),ra._rotateAround(hn,cn)._add(_i)._add(Rs),Pa._rotateAround(hn,cn)._add(_i)._add(Rs),An._rotateAround(hn,cn)._add(_i)._add(Rs)}if(at){const cn=Math.sin(at),hn=Math.cos(at),ji=[hn,-cn,cn,hn];wn._matMult(ji),ra._matMult(ji),Pa._matMult(ji),An._matMult(ji)}const ua=new N(0,0),tn=new N(0,0);Bt.push({tl:wn,tr:ra,bl:Pa,br:An,tex:lt,writingMode:Be.writingMode,glyphOffset:en,sectionIndex:It.sectionIndex,isSDF:cr,pixelOffsetTL:ua,pixelOffsetBR:tn,minFontScaleX:0,minFontScaleY:0})}return Bt}(0,c,M,m,v,w,d,A.allowVerticalPlacement),fe=A.textSizeData;let be=null;fe.kind==="source"?(be=[ao*m.layout.get("text-size").evaluate(w,{})],be[0]>vl&&Qt(`${A.layerIds[0]}: Value for "text-size" is >= ${Cd}. Reduce your "text-size".`)):fe.kind==="composite"&&(be=[ao*j.compositeTextSizes[0].evaluate(w,{},$),ao*j.compositeTextSizes[1].evaluate(w,{},$)],(be[0]>vl||be[1]>vl)&&Qt(`${A.layerIds[0]}: Value for "text-size" is >= ${Cd}. Reduce your "text-size".`)),A.addSymbols(A.text,ee,be,M,v,w,S,n,F.lineStartIndex,F.lineLength,X,$);for(const Ye of P)k[Ye]=A.text.placedSymbolArray.length-1;return 4*ee.length}function gy(A){for(const n in A)return A[n];return null}function uB(A,n,c,d){const m=A.compareText;if(n in m){const v=m[n];for(let w=v.length-1;w>=0;w--)if(d.dist(v[w])<c)return!0}else m[n]=[];return m[n].push(d),!1}const py=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class r3{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,d]=new Uint8Array(n,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=py[15&d];if(!v)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(n,2,1),[M]=new Uint32Array(n,4,1);return new r3(M,w,v,n)}constructor(n,c=64,d=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=py.indexOf(this.ArrayType),w=2*n*this.ArrayType.BYTES_PER_ELEMENT,M=n*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-M%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+M+F,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+w+M+F),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+M+F,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=n)}add(n,c){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=c,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return i3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,c,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:w,nodeSize:M}=this,F=[0,v.length-1,0],S=[];for(;F.length;){const P=F.pop()||0,k=F.pop()||0,X=F.pop()||0;if(k-X<=M){for(let fe=X;fe<=k;fe++){const be=w[2*fe],Ye=w[2*fe+1];be>=n&&be<=d&&Ye>=c&&Ye<=m&&S.push(v[fe])}continue}const j=X+k>>1,$=w[2*j],ee=w[2*j+1];$>=n&&$<=d&&ee>=c&&ee<=m&&S.push(v[j]),(P===0?n<=$:c<=ee)&&(F.push(X),F.push(j-1),F.push(1-P)),(P===0?d>=$:m>=ee)&&(F.push(j+1),F.push(k),F.push(1-P))}return S}within(n,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:w}=this,M=[0,m.length-1,0],F=[],S=d*d;for(;M.length;){const P=M.pop()||0,k=M.pop()||0,X=M.pop()||0;if(k-X<=w){for(let fe=X;fe<=k;fe++)_y(v[2*fe],v[2*fe+1],n,c)<=S&&F.push(m[fe]);continue}const j=X+k>>1,$=v[2*j],ee=v[2*j+1];_y($,ee,n,c)<=S&&F.push(m[j]),(P===0?n-d<=$:c-d<=ee)&&(M.push(X),M.push(j-1),M.push(1-P)),(P===0?n+d>=$:c+d>=ee)&&(M.push(j+1),M.push(k),M.push(1-P))}return F}}function i3(A,n,c,d,m,v){if(m-d<=c)return;const w=d+m>>1;my(A,n,w,d,m,v),i3(A,n,c,d,w-1,1-v),i3(A,n,c,w+1,m,1-v)}function my(A,n,c,d,m,v){for(;m>d;){if(m-d>600){const S=m-d+1,P=c-d+1,k=Math.log(S),X=.5*Math.exp(2*k/3),j=.5*Math.sqrt(k*X*(S-X)/S)*(P-S/2<0?-1:1);my(A,n,c,Math.max(d,Math.floor(c-P*X/S+j)),Math.min(m,Math.floor(c+(S-P)*X/S+j)),v)}const w=n[2*c+v];let M=d,F=m;for(Id(A,n,d,c),n[2*m+v]>w&&Id(A,n,d,m);M<F;){for(Id(A,n,M,F),M++,F--;n[2*M+v]<w;)M++;for(;n[2*F+v]>w;)F--}n[2*d+v]===w?Id(A,n,d,F):(F++,Id(A,n,F,m)),F<=c&&(d=F+1),c<=F&&(m=F-1)}}function Id(A,n,c,d){n3(A,c,d),n3(n,2*c,2*d),n3(n,2*c+1,2*d+1)}function n3(A,n,c){const d=A[n];A[n]=A[c],A[c]=d}function _y(A,n,c,d){const m=A-c,v=n-d;return m*m+v*v}var a3;h.cm=void 0,(a3=h.cm||(h.cm={})).create="create",a3.load="load",a3.fullLoad="fullLoad";let g1=null,Ud=[];const s3=1e3/60,o3="loadTime",l3="fullLoadTime",dB={mark(A){performance.mark(A)},frame(A){const n=A;g1!=null&&Ud.push(n-g1),g1=n},clearMetrics(){g1=null,Ud=[],performance.clearMeasures(o3),performance.clearMeasures(l3);for(const A in h.cm)performance.clearMarks(h.cm[A])},getPerformanceMetrics(){performance.measure(o3,h.cm.create,h.cm.load),performance.measure(l3,h.cm.create,h.cm.fullLoad);const A=performance.getEntriesByName(o3)[0].duration,n=performance.getEntriesByName(l3)[0].duration,c=Ud.length,d=1/(Ud.reduce((v,w)=>v+w,0)/c/1e3),m=Ud.filter(v=>v>s3).reduce((v,w)=>v+(w-s3)/s3,0);return{loadTime:A,fullLoadTime:n,fps:d,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};h.$=Md,h.A=he,h.B=di,h.C=gi,h.D=ir,h.E=ve,h.F=ju,h.G=function(A){if(lr==null){const n=A.navigator?A.navigator.userAgent:null;lr=!!A.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return lr},h.H=class{constructor(A,n){this.target=A,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new iB(()=>this.process()),this.subscription=Gr(this.target,"message",c=>this.receive(c),!1),this.globalScope=Zt(self)?A:window}registerMessageHandler(A,n){this.messageHandlers[A]=n}sendAsync(A,n){return new Promise((c,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=n?Gr(n.signal,"abort",()=>{v==null||v.unsubscribe(),delete this.resolveRejects[m];const F={id:m,type:"<cancel>",origin:location.origin,targetMapId:A.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)},nB):null;this.resolveRejects[m]={resolve:F=>{v==null||v.unsubscribe(),c(F)},reject:F=>{v==null||v.unsubscribe(),d(F)}};const w=[],M=Object.assign(Object.assign({},A),{id:m,sourceMapId:this.mapId,origin:location.origin,data:BA(A.data,w)});this.target.postMessage(M,{transfer:w})})}receive(A){const n=A.data,c=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[c];const d=this.abortControllers[c];return delete this.abortControllers[c],void(d&&d.abort())}if(Zt(self)||n.mustQueue)return this.tasks[c]=n,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,n)}}process(){if(this.taskQueue.length===0)return;const A=this.taskQueue.shift(),n=this.tasks[A];delete this.tasks[A],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(A,n)}processTask(A,n){return s(this,void 0,void 0,function*(){if(n.type==="<response>"){const m=this.resolveRejects[A];return delete this.resolveRejects[A],m?void(n.error?m.reject(Eo(n.error)):m.resolve(Eo(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(A,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=Eo(n.data),d=new AbortController;this.abortControllers[A]=d;try{const m=yield this.messageHandlers[n.type](n.sourceMapId,c,d);this.completeTask(A,null,m)}catch(m){this.completeTask(A,m)}})}completeTask(A,n,c){const d=[];delete this.abortControllers[A];const m={id:A,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?BA(n):null,data:BA(c,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.I=H2,h.J=Xi,h.K=function(){var A=new he(16);return he!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},h.L=function(A,n,c){var d,m,v,w,M,F,S,P,k,X,j,$,ee=c[0],fe=c[1],be=c[2];return n===A?(A[12]=n[0]*ee+n[4]*fe+n[8]*be+n[12],A[13]=n[1]*ee+n[5]*fe+n[9]*be+n[13],A[14]=n[2]*ee+n[6]*fe+n[10]*be+n[14],A[15]=n[3]*ee+n[7]*fe+n[11]*be+n[15]):(m=n[1],v=n[2],w=n[3],M=n[4],F=n[5],S=n[6],P=n[7],k=n[8],X=n[9],j=n[10],$=n[11],A[0]=d=n[0],A[1]=m,A[2]=v,A[3]=w,A[4]=M,A[5]=F,A[6]=S,A[7]=P,A[8]=k,A[9]=X,A[10]=j,A[11]=$,A[12]=d*ee+M*fe+k*be+n[12],A[13]=m*ee+F*fe+X*be+n[13],A[14]=v*ee+S*fe+j*be+n[14],A[15]=w*ee+P*fe+$*be+n[15]),A},h.M=function(A,n,c){var d=c[0],m=c[1],v=c[2];return A[0]=n[0]*d,A[1]=n[1]*d,A[2]=n[2]*d,A[3]=n[3]*d,A[4]=n[4]*m,A[5]=n[5]*m,A[6]=n[6]*m,A[7]=n[7]*m,A[8]=n[8]*v,A[9]=n[9]*v,A[10]=n[10]*v,A[11]=n[11]*v,A[12]=n[12],A[13]=n[13],A[14]=n[14],A[15]=n[15],A},h.N=function(A,n,c){var d=n[0],m=n[1],v=n[2],w=n[3],M=n[4],F=n[5],S=n[6],P=n[7],k=n[8],X=n[9],j=n[10],$=n[11],ee=n[12],fe=n[13],be=n[14],Ye=n[15],Be=c[0],G=c[1],ue=c[2],Ce=c[3];return A[0]=Be*d+G*M+ue*k+Ce*ee,A[1]=Be*m+G*F+ue*X+Ce*fe,A[2]=Be*v+G*S+ue*j+Ce*be,A[3]=Be*w+G*P+ue*$+Ce*Ye,A[4]=(Be=c[4])*d+(G=c[5])*M+(ue=c[6])*k+(Ce=c[7])*ee,A[5]=Be*m+G*F+ue*X+Ce*fe,A[6]=Be*v+G*S+ue*j+Ce*be,A[7]=Be*w+G*P+ue*$+Ce*Ye,A[8]=(Be=c[8])*d+(G=c[9])*M+(ue=c[10])*k+(Ce=c[11])*ee,A[9]=Be*m+G*F+ue*X+Ce*fe,A[10]=Be*v+G*S+ue*j+Ce*be,A[11]=Be*w+G*P+ue*$+Ce*Ye,A[12]=(Be=c[12])*d+(G=c[13])*M+(ue=c[14])*k+(Ce=c[15])*ee,A[13]=Be*m+G*F+ue*X+Ce*fe,A[14]=Be*v+G*S+ue*j+Ce*be,A[15]=Be*w+G*P+ue*$+Ce*Ye,A},h.O=function(A,n){const c={};for(let d=0;d<n.length;d++){const m=n[d];m in A&&(c[m]=A[m])}return c},h.P=N,h.Q=xl,h.R=Sa,h.S=Gb,h.T=Ju,h.U=Vb,h.V=se,h.W=de,h.X=Br,h.Y=Na,h.Z=ft,h._=s,h.a=ui,h.a$=function(A,n,c){var d=Math.sin(c),m=Math.cos(c),v=n[4],w=n[5],M=n[6],F=n[7],S=n[8],P=n[9],k=n[10],X=n[11];return n!==A&&(A[0]=n[0],A[1]=n[1],A[2]=n[2],A[3]=n[3],A[12]=n[12],A[13]=n[13],A[14]=n[14],A[15]=n[15]),A[4]=v*m+S*d,A[5]=w*m+P*d,A[6]=M*m+k*d,A[7]=F*m+X*d,A[8]=S*m-v*d,A[9]=P*m-w*d,A[10]=k*m-M*d,A[11]=X*m-F*d,A},h.a0=25,h.a1=J2,h.a2=A=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(c=>{n.onloadstart=()=>{c(n)};for(const d of A){const m=window.document.createElement("source");xi(d)||(n.crossOrigin="Anonymous"),m.src=d,n.appendChild(m)}})},h.a3=Oe,h.a4=function(){return Mt++},h.a5=E,h.a6=th,h.a7=Lu,h.a8=no,h.a9=ey,h.aA=function(A,n,c,d,m=!1){if(!c[0]&&!c[1])return[0,0];const v=m?d==="map"?-A.bearingInRadians:0:d==="viewport"?A.bearingInRadians:0;if(v){const w=Math.sin(v),M=Math.cos(v);c=[c[0]*M-c[1]*w,c[0]*w+c[1]*M]}return[m?c[0]:_t(n,c[0],A.zoom),m?c[1]:_t(n,c[1],A.zoom)]},h.aC=V2,h.aD=t3,h.aE=X2,h.aF=r3,h.aG=Zi,h.aH=i1,h.aI=xe,h.aJ=pr,h.aK=Rt,h.aL=wt,h.aM=Fi,h.aN=Kb,h.aO=function(A,n,c){return A[0]=n[0]*c,A[1]=n[1]*c,A[2]=n[2]*c,A},h.aP=function(A,n,c){return A[0]=n[0]+c[0],A[1]=n[1]+c[1],A[2]=n[2]+c[2],A},h.aQ=function(A){var n=new he(3);return n[0]=A[0],n[1]=A[1],n[2]=A[2],n},h.aR=function(A,n,c){return A[0]=n[0]*c[0],A[1]=n[1]*c[1],A[2]=n[2]*c[2],A[3]=n[3]*c[3],A},h.aS=function(A,n,c){return A[0]=n[0]-c[0],A[1]=n[1]-c[1],A[2]=n[2]-c[2],A},h.aT=function(A,n){var c=n[0],d=n[1],m=n[2],v=c*c+d*d+m*m;return v>0&&(v=1/Math.sqrt(v)),A[0]=n[0]*v,A[1]=n[1]*v,A[2]=n[2]*v,A},h.aU=function(A,n,c){var d=n[0],m=n[1],v=n[2],w=c[0],M=c[1],F=c[2];return A[0]=m*F-v*M,A[1]=v*w-d*F,A[2]=d*M-m*w,A},h.aV=function(A,n){return A[0]*n[0]+A[1]*n[1]+A[2]*n[2]},h.aW=qb,h.aX=rh,h.aY=function(A,n,c,d,m){var v,w=1/Math.tan(n/2);return A[0]=w/c,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=w,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,m!=null&&m!==1/0?(A[10]=(m+d)*(v=1/(d-m)),A[14]=2*m*d*v):(A[10]=-1,A[14]=-2*d),A},h.aZ=function(A){var n=new he(16);return n[0]=A[0],n[1]=A[1],n[2]=A[2],n[3]=A[3],n[4]=A[4],n[5]=A[5],n[6]=A[6],n[7]=A[7],n[8]=A[8],n[9]=A[9],n[10]=A[10],n[11]=A[11],n[12]=A[12],n[13]=A[13],n[14]=A[14],n[15]=A[15],n},h.a_=function(A,n,c){var d=Math.sin(c),m=Math.cos(c),v=n[0],w=n[1],M=n[2],F=n[3],S=n[4],P=n[5],k=n[6],X=n[7];return n!==A&&(A[8]=n[8],A[9]=n[9],A[10]=n[10],A[11]=n[11],A[12]=n[12],A[13]=n[13],A[14]=n[14],A[15]=n[15]),A[0]=v*m+S*d,A[1]=w*m+P*d,A[2]=M*m+k*d,A[3]=F*m+X*d,A[4]=S*m-v*d,A[5]=P*m-w*d,A[6]=k*m-M*d,A[7]=X*m-F*d,A},h.aa=function(A){const n={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,m,v)=>{const w=m||v;return n[d]=!w||w.toLowerCase(),""}),n["max-age"]){const c=parseInt(n["max-age"],10);isNaN(c)?delete n["max-age"]:n["max-age"]=c}return n},h.ab=function(A){return A*Math.PI/180},h.ac=function(A){return Math.pow(2,A)},h.ad=V,h.ae=$e,h.af=85.051129,h.ag=jb,h.ah=function(A){return Math.log(A)/Math.LN2},h.ai=function(A){var n=A[0],c=A[1];return n*n+c*c},h.aj=function(A,n){const c=[];for(const d in A)d in n||c.push(d);return c},h.ak=function(A,n){let c=0,d=0;if(A.kind==="constant")d=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:w}=A,M=m?$e(Jn.interpolationFactor(m,n,v,w),0,1):0;A.kind==="camera"?d=di.number(A.minSize,A.maxSize,M):c=M}return{uSizeT:c,uSize:d}},h.am=function(A,{uSize:n,uSizeT:c},{lowerSize:d,upperSize:m}){return A.kind==="source"?d/ao:A.kind==="composite"?di.number(d/ao,m/ao,c):n},h.an=function(A,n){var c=n[0],d=n[1],m=n[2],v=n[3],w=n[4],M=n[5],F=n[6],S=n[7],P=n[8],k=n[9],X=n[10],j=n[11],$=n[12],ee=n[13],fe=n[14],be=n[15],Ye=c*M-d*w,Be=c*F-m*w,G=c*S-v*w,ue=d*F-m*M,Ce=d*S-v*M,qe=m*S-v*F,yt=P*ee-k*$,it=P*fe-X*$,at=P*be-j*$,Bt=k*fe-X*ee,vt=k*be-j*ee,It=X*be-j*fe,lt=Ye*It-Be*vt+G*Bt+ue*at-Ce*it+qe*yt;return lt?(A[0]=(M*It-F*vt+S*Bt)*(lt=1/lt),A[1]=(m*vt-d*It-v*Bt)*lt,A[2]=(ee*qe-fe*Ce+be*ue)*lt,A[3]=(X*Ce-k*qe-j*ue)*lt,A[4]=(F*at-w*It-S*it)*lt,A[5]=(c*It-m*at+v*it)*lt,A[6]=(fe*G-$*qe-be*Be)*lt,A[7]=(P*qe-X*G+j*Be)*lt,A[8]=(w*vt-M*at+S*yt)*lt,A[9]=(d*at-c*vt-v*yt)*lt,A[10]=($*Ce-ee*G+be*Ye)*lt,A[11]=(k*G-P*Ce-j*Ye)*lt,A[12]=(M*it-w*Bt-F*yt)*lt,A[13]=(c*Bt-d*it+m*yt)*lt,A[14]=(ee*Be-$*ue-fe*Ye)*lt,A[15]=(P*ue-k*Be+X*Ye)*lt,A):null},h.ao=nt,h.ap=function(A){return Math.hypot(A[0],A[1])},h.aq=function(A){return A[0]=0,A[1]=0,A},h.ar=function(A,n,c){return A[0]=n[0]*c,A[1]=n[1]*c,A},h.as=G2,h.at=Ve,h.au=function(A,n,c,d){const m=n.y-A.y,v=n.x-A.x,w=d.y-c.y,M=d.x-c.x,F=w*v-M*m;if(F===0)return null;const S=(M*(A.y-c.y)-w*(A.x-c.x))/F;return new N(A.x+S*v,A.y+S*m)},h.av=ny,h.aw=cd,h.ax=function(A){let n=1/0,c=1/0,d=-1/0,m=-1/0;for(const v of A)n=Math.min(n,v.x),c=Math.min(c,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return[n,c,d,m]},h.ay=Ji,h.az=_t,h.b=dr,h.b$=function(A,n){var c=A[0],d=A[1],m=A[2],v=A[3],w=A[4],M=A[5],F=A[6],S=A[7],P=A[8],k=A[9],X=A[10],j=A[11],$=A[12],ee=A[13],fe=A[14],be=A[15],Ye=n[0],Be=n[1],G=n[2],ue=n[3],Ce=n[4],qe=n[5],yt=n[6],it=n[7],at=n[8],Bt=n[9],vt=n[10],It=n[11],lt=n[12],Xt=n[13],cr=n[14],Ar=n[15];return Math.abs(c-Ye)<=le*Math.max(1,Math.abs(c),Math.abs(Ye))&&Math.abs(d-Be)<=le*Math.max(1,Math.abs(d),Math.abs(Be))&&Math.abs(m-G)<=le*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(v-ue)<=le*Math.max(1,Math.abs(v),Math.abs(ue))&&Math.abs(w-Ce)<=le*Math.max(1,Math.abs(w),Math.abs(Ce))&&Math.abs(M-qe)<=le*Math.max(1,Math.abs(M),Math.abs(qe))&&Math.abs(F-yt)<=le*Math.max(1,Math.abs(F),Math.abs(yt))&&Math.abs(S-it)<=le*Math.max(1,Math.abs(S),Math.abs(it))&&Math.abs(P-at)<=le*Math.max(1,Math.abs(P),Math.abs(at))&&Math.abs(k-Bt)<=le*Math.max(1,Math.abs(k),Math.abs(Bt))&&Math.abs(X-vt)<=le*Math.max(1,Math.abs(X),Math.abs(vt))&&Math.abs(j-It)<=le*Math.max(1,Math.abs(j),Math.abs(It))&&Math.abs($-lt)<=le*Math.max(1,Math.abs($),Math.abs(lt))&&Math.abs(ee-Xt)<=le*Math.max(1,Math.abs(ee),Math.abs(Xt))&&Math.abs(fe-cr)<=le*Math.max(1,Math.abs(fe),Math.abs(cr))&&Math.abs(be-Ar)<=le*Math.max(1,Math.abs(be),Math.abs(Ar))},h.b0=function(){const A=new Float32Array(16);return V(A),A},h.b1=function(){const A=new Float64Array(16);return V(A),A},h.b2=function(){return new Float64Array(16)},h.b3=function(A,n,c){const d=new Float64Array(4);return function(m,v,w,M){var F=.5*Math.PI/180;v*=F,w*=F,M*=F;var S=Math.sin(v),P=Math.cos(v),k=Math.sin(w),X=Math.cos(w),j=Math.sin(M),$=Math.cos(M);m[0]=S*X*$-P*k*j,m[1]=P*k*$+S*X*j,m[2]=P*X*j-S*k*$,m[3]=P*X*$+S*k*j}(d,A,n-90,c),d},h.b4=function(A,n,c,d){var m,v,w,M,F,S=n[0],P=n[1],k=n[2],X=n[3],j=c[0],$=c[1],ee=c[2],fe=c[3];return(v=S*j+P*$+k*ee+X*fe)<0&&(v=-v,j=-j,$=-$,ee=-ee,fe=-fe),1-v>le?(m=Math.acos(v),w=Math.sin(m),M=Math.sin((1-d)*m)/w,F=Math.sin(d*m)/w):(M=1-d,F=d),A[0]=M*S+F*j,A[1]=M*P+F*$,A[2]=M*k+F*ee,A[3]=M*X+F*fe,A},h.b5=function(A){const n=new Float64Array(9);var c,d,m,v,w,M,F,S,P,k,X,j,$,ee,fe,be,Ye,Be;k=(m=(d=A)[0])*(F=m+m),X=(v=d[1])*F,$=(w=d[2])*F,ee=w*(S=v+v),be=(M=d[3])*F,Ye=M*S,Be=M*(P=w+w),(c=n)[0]=1-(j=v*S)-(fe=w*P),c[3]=X-Be,c[6]=$+Ye,c[1]=X+Be,c[4]=1-k-fe,c[7]=ee-be,c[2]=$-Ye,c[5]=ee+be,c[8]=1-k-j;const G=Fi(-Math.asin($e(n[2],-1,1)));let ue,Ce;return Math.hypot(n[5],n[8])<.001?(ue=0,Ce=-Fi(Math.atan2(n[3],n[4]))):(ue=Fi(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),Ce=Fi(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:ue,pitch:G+90,bearing:Ce}},h.b6=function(A,n){return A.roll==n.roll&&A.pitch==n.pitch&&A.bearing==n.bearing},h.b7=Er,h.b8=So,h.b9=Jc,h.bA=function(A){if(A.type==="custom")return new rB(A);switch(A.type){case"background":return new J7(A);case"circle":return new j9(A);case"fill":return new d7(A);case"fill-extrusion":return new v7(A);case"heatmap":return new $9(A);case"hillshade":return new W9(A);case"line":return new U7(A);case"raster":return new tB(A);case"symbol":return new c1(A)}},h.bB=Lt,h.bC=function(A,n){if(!A)return[{command:"setStyle",args:[n]}];let c=[];try{if(!Ie(A.version,n.version))return[{command:"setStyle",args:[n]}];Ie(A.center,n.center)||c.push({command:"setCenter",args:[n.center]}),Ie(A.centerAltitude,n.centerAltitude)||c.push({command:"setCenterAltitude",args:[n.centerAltitude]}),Ie(A.zoom,n.zoom)||c.push({command:"setZoom",args:[n.zoom]}),Ie(A.bearing,n.bearing)||c.push({command:"setBearing",args:[n.bearing]}),Ie(A.pitch,n.pitch)||c.push({command:"setPitch",args:[n.pitch]}),Ie(A.roll,n.roll)||c.push({command:"setRoll",args:[n.roll]}),Ie(A.sprite,n.sprite)||c.push({command:"setSprite",args:[n.sprite]}),Ie(A.glyphs,n.glyphs)||c.push({command:"setGlyphs",args:[n.glyphs]}),Ie(A.transition,n.transition)||c.push({command:"setTransition",args:[n.transition]}),Ie(A.light,n.light)||c.push({command:"setLight",args:[n.light]}),Ie(A.terrain,n.terrain)||c.push({command:"setTerrain",args:[n.terrain]}),Ie(A.sky,n.sky)||c.push({command:"setSky",args:[n.sky]}),Ie(A.projection,n.projection)||c.push({command:"setProjection",args:[n.projection]});const d={},m=[];(function(w,M,F,S){let P;for(P in M=M||{},w=w||{})Object.prototype.hasOwnProperty.call(w,P)&&(Object.prototype.hasOwnProperty.call(M,P)||ne(P,F,S));for(P in M)Object.prototype.hasOwnProperty.call(M,P)&&(Object.prototype.hasOwnProperty.call(w,P)?Ie(w[P],M[P])||(w[P].type==="geojson"&&M[P].type==="geojson"&&Ue(w,M,P)?et(F,{command:"setGeoJSONSourceData",args:[P,M[P].data]}):Se(P,M,F,S)):Te(P,M,F))})(A.sources,n.sources,m,d);const v=[];A.layers&&A.layers.forEach(w=>{"source"in w&&d[w.source]?c.push({command:"removeLayer",args:[w.id]}):v.push(w)}),c=c.concat(m),function(w,M,F){M=M||[];const S=(w=w||[]).map(At),P=M.map(At),k=w.reduce(xt,{}),X=M.reduce(xt,{}),j=S.slice(),$=Object.create(null);let ee,fe,be,Ye,Be;for(let G=0,ue=0;G<S.length;G++)ee=S[G],Object.prototype.hasOwnProperty.call(X,ee)?ue++:(et(F,{command:"removeLayer",args:[ee]}),j.splice(j.indexOf(ee,ue),1));for(let G=0,ue=0;G<P.length;G++)ee=P[P.length-1-G],j[j.length-1-G]!==ee&&(Object.prototype.hasOwnProperty.call(k,ee)?(et(F,{command:"removeLayer",args:[ee]}),j.splice(j.lastIndexOf(ee,j.length-ue),1)):ue++,Ye=j[j.length-G],et(F,{command:"addLayer",args:[X[ee],Ye]}),j.splice(j.length-G,0,ee),$[ee]=!0);for(let G=0;G<P.length;G++)if(ee=P[G],fe=k[ee],be=X[ee],!$[ee]&&!Ie(fe,be))if(Ie(fe.source,be.source)&&Ie(fe["source-layer"],be["source-layer"])&&Ie(fe.type,be.type)){for(Be in He(fe.layout,be.layout,F,ee,null,"setLayoutProperty"),He(fe.paint,be.paint,F,ee,null,"setPaintProperty"),Ie(fe.filter,be.filter)||et(F,{command:"setFilter",args:[ee,be.filter]}),Ie(fe.minzoom,be.minzoom)&&Ie(fe.maxzoom,be.maxzoom)||et(F,{command:"setLayerZoomRange",args:[ee,be.minzoom,be.maxzoom]}),fe)Object.prototype.hasOwnProperty.call(fe,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?He(fe[Be],be[Be],F,ee,Be.slice(6),"setPaintProperty"):Ie(fe[Be],be[Be])||et(F,{command:"setLayerProperty",args:[ee,Be,be[Be]]}));for(Be in be)Object.prototype.hasOwnProperty.call(be,Be)&&!Object.prototype.hasOwnProperty.call(fe,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?He(fe[Be],be[Be],F,ee,Be.slice(6),"setPaintProperty"):Ie(fe[Be],be[Be])||et(F,{command:"setLayerProperty",args:[ee,Be,be[Be]]}))}else et(F,{command:"removeLayer",args:[ee]}),Ye=j[j.lastIndexOf(ee)+1],et(F,{command:"addLayer",args:[be,Ye]})}(v,n.layers,c)}catch(d){console.warn("Unable to compute style diff:",d),c=[{command:"setStyle",args:[n]}]}return c},h.bD=function(A){const n=[],c=A.id;return c===void 0&&n.push({message:`layers.${c}: missing required property "id"`}),A.render===void 0&&n.push({message:`layers.${c}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&n.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),n},h.bE=function A(n,c){if(Array.isArray(n)){if(!Array.isArray(c)||n.length!==c.length)return!1;for(let d=0;d<n.length;d++)if(!A(n[d],c[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&c!==null){if(typeof c!="object"||Object.keys(n).length!==Object.keys(c).length)return!1;for(const d in n)if(!A(n[d],c[d]))return!1;return!0}return n===c},h.bF=Pt,h.bG=ar,h.bH=class extends is{constructor(A,n){super(A,n),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},h.bI=la,h.bJ=class extends is{constructor(A,n){super(A,n),this.current=io}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let n=1;n<16;n++)if(A[n]!==this.current[n]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},h.bK=No,h.bL=class extends is{constructor(A,n){super(A,n),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},h.bM=class extends is{constructor(A,n){super(A,n),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},h.bN=ae,h.bO=function(A,n){var c=Math.sin(n),d=Math.cos(n);return A[0]=d,A[1]=c,A[2]=0,A[3]=-c,A[4]=d,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},h.bP=function(A,n,c){var d=n[0],m=n[1],v=n[2];return A[0]=d*c[0]+m*c[3]+v*c[6],A[1]=d*c[1]+m*c[4]+v*c[7],A[2]=d*c[2]+m*c[5]+v*c[8],A},h.bQ=function(A,n,c,d,m,v,w){var M=1/(n-c),F=1/(d-m),S=1/(v-w);return A[0]=-2*M,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*F,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*S,A[11]=0,A[12]=(n+c)*M,A[13]=(m+d)*F,A[14]=(w+v)*S,A[15]=1,A},h.bR=class extends To{},h.bS=S7,h.bT=class extends Kc{},h.bU=R2,h.bV=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},h.bW=J_,h.bX=function(A,n,c){var d=n[0],m=n[1],v=n[2],w=c[3]*d+c[7]*m+c[11]*v+c[15];return A[0]=(c[0]*d+c[4]*m+c[8]*v+c[12])/(w=w||1),A[1]=(c[1]*d+c[5]*m+c[9]*v+c[13])/w,A[2]=(c[2]*d+c[6]*m+c[10]*v+c[14])/w,A},h.bY=class extends xs{},h.bZ=class extends p{},h.b_=function(A,n){return A[0]===n[0]&&A[1]===n[1]&&A[2]===n[2]&&A[3]===n[3]&&A[4]===n[4]&&A[5]===n[5]&&A[6]===n[6]&&A[7]===n[7]&&A[8]===n[8]&&A[9]===n[9]&&A[10]===n[10]&&A[11]===n[11]&&A[12]===n[12]&&A[13]===n[13]&&A[14]===n[14]&&A[15]===n[15]},h.ba=_d,h.bb=Wc,h.bc=Je,h.bd=je,h.be=Zn,h.bf=function(A,n,c,d,m){return Je(d,m,$e((A-n)/(c-n),0,1))},h.bg=gt,h.bh=function(){return new Float64Array(3)},h.bi=function(A,n,c,d){return A[0]=n[0]+c[0]*d,A[1]=n[1]+c[1]*d,A[2]=n[2]+c[2]*d,A},h.bj=we,h.bk=function(){return new Float64Array(4)},h.bl=function(A,n,c,d){var m=[],v=[];return m[0]=n[0]-c[0],m[1]=n[1]-c[1],m[2]=n[2]-c[2],v[0]=m[0]*Math.cos(d)-m[1]*Math.sin(d),v[1]=m[0]*Math.sin(d)+m[1]*Math.cos(d),v[2]=m[2],A[0]=v[0]+c[0],A[1]=v[1]+c[1],A[2]=v[2]+c[2],A},h.bm=function(A,n,c,d){var m=[],v=[];return m[0]=n[0]-c[0],m[1]=n[1]-c[1],m[2]=n[2]-c[2],v[0]=m[0],v[1]=m[1]*Math.cos(d)-m[2]*Math.sin(d),v[2]=m[1]*Math.sin(d)+m[2]*Math.cos(d),A[0]=v[0]+c[0],A[1]=v[1]+c[1],A[2]=v[2]+c[2],A},h.bn=function(A,n,c,d){var m=[],v=[];return m[0]=n[0]-c[0],m[1]=n[1]-c[1],m[2]=n[2]-c[2],v[0]=m[2]*Math.sin(d)+m[0]*Math.cos(d),v[1]=m[1],v[2]=m[2]*Math.cos(d)-m[0]*Math.sin(d),A[0]=v[0]+c[0],A[1]=v[1]+c[1],A[2]=v[2]+c[2],A},h.bo=oe,h.bp=function(A,n,c){var d=Math.sin(c),m=Math.cos(c),v=n[0],w=n[1],M=n[2],F=n[3],S=n[8],P=n[9],k=n[10],X=n[11];return n!==A&&(A[4]=n[4],A[5]=n[5],A[6]=n[6],A[7]=n[7],A[12]=n[12],A[13]=n[13],A[14]=n[14],A[15]=n[15]),A[0]=v*m-S*d,A[1]=w*m-P*d,A[2]=M*m-k*d,A[3]=F*m-X*d,A[8]=v*d+S*m,A[9]=w*d+P*m,A[10]=M*d+k*m,A[11]=F*d+X*m,A},h.bq=function(A,n){const c=gt(A,360),d=gt(n,360),m=d-c,v=d>c?m-360:m+360;return Math.abs(m)<Math.abs(v)?m:v},h.br=function(A){return A[0]=0,A[1]=0,A[2]=0,A},h.bs=function(A,n,c,d){const m=Math.sqrt(A*A+n*n),v=Math.sqrt(c*c+d*d);A/=m,n/=m,c/=v,d/=v;const w=Math.acos(A*c+n*d);return-n*c+A*d>0?w:-w},h.bt=function(A,n){return A[0]*n[0]+A[1]*n[1]+A[2]*n[2]+A[3]},h.bu=q2,h.bv=function(A,n){const c=gt(A,2*Math.PI),d=gt(n,2*Math.PI);return Math.min(Math.abs(c-d),Math.abs(c-d+2*Math.PI),Math.abs(c-d-2*Math.PI))},h.bw=function(){const A={},n=Ae.$version;for(const c in Ae.$root){const d=Ae.$root[c];if(d.required){let m=null;m=c==="version"?n:d.type==="array"?[]:{},m!=null&&(A[c]=m)}}return A},h.bx=CA,h.by=si,h.bz=function(A){A=A.slice();const n=Object.create(null);for(let c=0;c<A.length;c++)n[A[c].id]=A[c];for(let c=0;c<A.length;c++)"ref"in A[c]&&(A[c]=Ge(A[c],n[A[c].ref]));return A},h.c=$r,h.c0=function(A,n){return A[0]=n[0],A[1]=n[1],A[2]=n[2],A[3]=n[3],A[4]=n[4],A[5]=n[5],A[6]=n[6],A[7]=n[7],A[8]=n[8],A[9]=n[9],A[10]=n[10],A[11]=n[11],A[12]=n[12],A[13]=n[13],A[14]=n[14],A[15]=n[15],A},h.c1=A=>A.type==="symbol",h.c2=A=>A.type==="circle",h.c3=A=>A.type==="heatmap",h.c4=A=>A.type==="line",h.c5=A=>A.type==="fill",h.c6=A=>A.type==="fill-extrusion",h.c7=A=>A.type==="hillshade",h.c8=A=>A.type==="raster",h.c9=A=>A.type==="background",h.cA=yd,h.cB=z2,h.cC=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},h.cD=function(A,n,c,d,m){return s(this,void 0,void 0,function*(){if(de())try{return yield Br(A,n,c,d,m)}catch{}return function(v,w,M,F,S){const P=v.width,k=v.height;Dr&&vi||(Dr=new OffscreenCanvas(P,k),vi=Dr.getContext("2d",{willReadFrequently:!0})),Dr.width=P,Dr.height=k,vi.drawImage(v,0,0,P,k);const X=vi.getImageData(w,M,F,S);return vi.clearRect(0,0,P,k),X.data}(A,n,c,d,m)})},h.cE=Wb,h.cF=y,h.cG=I,h.cH=pb,h.cI=Ib,h.cJ=yA,h.cK=to,h.ca=A=>A.type==="custom",h.cb=Qe,h.cc=function(A,n,c){const d=rt(n.x-c.x,n.y-c.y),m=rt(A.x-c.x,A.y-c.y);var v,w;return Fi(Math.atan2(d[0]*m[1]-d[1]*m[0],(v=d)[0]*(w=m)[0]+v[1]*w[1]))},h.cd=pt,h.ce=function(A,n){return hi[n]&&(A instanceof MouseEvent||A instanceof WheelEvent)},h.cf=function(A,n){return Kr[n]&&"touches"in A},h.cg=function(A){return Kr[A]||hi[A]},h.ch=function(A,n,c){var d=n[0],m=n[1];return A[0]=c[0]*d+c[4]*m+c[12],A[1]=c[1]*d+c[5]*m+c[13],A},h.ci=function(A,n){const{x:c,y:d}=Md.fromLngLat(n);return!(A<0||A>25||d<0||d>=1||c<0||c>=1)},h.cj=function(A,n){return A[0]=n[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=n[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=n[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},h.ck=class extends Vc{},h.cl=dB,h.cn=function(A){return A.message===Rr},h.co=Vi,h.cp=function(A,n){ui.REGISTERED_PROTOCOLS[A]=n},h.cq=function(A){delete ui.REGISTERED_PROTOCOLS[A]},h.cr=function(A,n){const c={};for(let m=0;m<A.length;m++){const v=n&&n[A[m].id]||Dc(A[m]);n&&(n[A[m].id]=v);let w=c[v];w||(w=c[v]=[]),w.push(A[m])}const d=[];for(const m in c)d.push(c[m]);return d},h.cs=kt,h.ct=Jb,h.cu=ty,h.cv=Eb,h.cw=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=ft/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;const n=A.bucket.layers[0],c=n.layout,d=n._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new gi(A.bucket.zoom+1),A.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new gi(A.bucket.zoom+1),A.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new gi(18))};if(A.bucket.textSizeData.kind==="composite"){const{minZoom:S,maxZoom:P}=A.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new gi(S),A.canonical),d["text-size"].possiblyEvaluate(new gi(P),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){const{minZoom:S,maxZoom:P}=A.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new gi(S),A.canonical),d["icon-size"].possiblyEvaluate(new gi(P),A.canonical)]}const v=c.get("text-line-height")*Ji,w=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",M=c.get("text-keep-upright"),F=c.get("text-size");for(const S of A.bucket.features){const P=c.get("text-font").evaluate(S,{},A.canonical).join(","),k=F.evaluate(S,{},A.canonical),X=m.layoutTextSize.evaluate(S,{},A.canonical),j=m.layoutIconSize.evaluate(S,{},A.canonical),$={horizontal:{},vertical:void 0},ee=S.text;let fe,be=[0,0];if(ee){const G=ee.toString(),ue=c.get("text-letter-spacing").evaluate(S,{},A.canonical)*Ji,Ce=zf(G)?ue:0,qe=c.get("text-anchor").evaluate(S,{},A.canonical),yt=dy(n,S,A.canonical);if(!yt){const vt=c.get("text-radial-offset").evaluate(S,{},A.canonical);be=vt?uy(qe,[vt*Ji,e3]):c.get("text-offset").evaluate(S,{},A.canonical).map(It=>It*Ji)}let it=w?"center":c.get("text-justify").evaluate(S,{},A.canonical);const at=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(S,{},A.canonical)*Ji:1/0,Bt=()=>{A.bucket.allowVerticalPlacement&&zc(G)&&($.vertical=o1(ee,A.glyphMap,A.glyphPositions,A.imagePositions,P,at,v,qe,"left",Ce,be,h.al.vertical,!0,X,k))};if(!w&&yt){const vt=new Set;if(it==="auto")for(let lt=0;lt<yt.values.length;lt+=2)vt.add(t3(yt.values[lt]));else vt.add(it);let It=!1;for(const lt of vt)if(!$.horizontal[lt])if(It)$.horizontal[lt]=$.horizontal[0];else{const Xt=o1(ee,A.glyphMap,A.glyphPositions,A.imagePositions,P,at,v,"center",lt,Ce,be,h.al.horizontal,!1,X,k);Xt&&($.horizontal[lt]=Xt,It=Xt.positionedLines.length===1)}Bt()}else{it==="auto"&&(it=t3(qe));const vt=o1(ee,A.glyphMap,A.glyphPositions,A.imagePositions,P,at,v,qe,it,Ce,be,h.al.horizontal,!1,X,k);vt&&($.horizontal[it]=vt),Bt(),zc(G)&&w&&M&&($.vertical=o1(ee,A.glyphMap,A.glyphPositions,A.imagePositions,P,at,v,qe,it,Ce,be,h.al.vertical,!1,X,k))}}let Ye=!1;if(S.icon&&S.icon.name){const G=A.imageMap[S.icon.name];G&&(fe=j7(A.imagePositions[S.icon.name],c.get("icon-offset").evaluate(S,{},A.canonical),c.get("icon-anchor").evaluate(S,{},A.canonical)),Ye=!!G.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=Ye:A.bucket.sdfIcons!==Ye&&Qt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(G.pixelRatio!==A.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}const Be=gy($.horizontal)||$.vertical;A.bucket.iconsInText=!!Be&&Be.iconsInText,(Be||fe)&&hB(A.bucket,S,$,fe,A.imageMap,m,X,j,be,Ye,A.canonical,A.subdivisionGranularity)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},h.cx=Q2,h.cy=T2,h.cz=L2,h.d=xi,h.e=Ct,h.f=A=>s(void 0,void 0,void 0,function*(){if(A.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(A)],{type:"image/png"});try{return createImageBitmap(n)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),h.g=Un,h.h=A=>new Promise((n,c)=>{const d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=rr})},d.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(A)],{type:"image/png"});d.src=A.byteLength?URL.createObjectURL(m):rr}),h.i=Zt,h.j=(A,n)=>ni(Ct(A,{type:"json"}),n),h.k=ge,h.l=ie,h.m=ni,h.n=(A,n)=>ni(Ct(A,{type:"arrayBuffer"}),n),h.o=function(A){return new z2(A).readFields(P7,[])},h.p=Ub,h.q=dd,h.r=ta,h.s=Gr,h.t=Qf,h.u=Sr,h.v=Ae,h.w=Qt,h.x=kf,h.y=Ja,h.z=function([A,n,c]){return n+=90,n*=Math.PI/180,c*=Math.PI/180,{x:A*Math.cos(n)*Math.sin(c),y:A*Math.sin(n)*Math.sin(c),z:A*Math.cos(c)}}}),l("worker",["./shared"],function(h){class s{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,ie){for(const ve of te){this._layerConfigs[ve.id]=ve;const Ae=this._layers[ve.id]=h.bA(ve);Ae._featureFilter=h.a7(Ae.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(const ve of ie)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};const ge=h.cr(Object.values(this._layerConfigs),this.keyCache);for(const ve of ge){const Ae=ve.map(ne=>this._layers[ne.id]),ke=Ae[0];if(ke.visibility==="none")continue;const Ge=ke.source||"";let Ie=this.familiesBySource[Ge];Ie||(Ie=this.familiesBySource[Ge]={});const et=ke.sourceLayer||"_geojsonTileLayer";let Te=Ie[et];Te||(Te=Ie[et]=[]),Te.push(Ae)}}}class y{constructor(te){const ie={},ge=[];for(const Ge in te){const Ie=te[Ge],et=ie[Ge]={};for(const Te in Ie){const ne=Ie[+Te];if(!ne||ne.bitmap.width===0||ne.bitmap.height===0)continue;const Se={x:0,y:0,w:ne.bitmap.width+2,h:ne.bitmap.height+2};ge.push(Se),et[Te]={rect:Se,metrics:ne.metrics}}}const{w:ve,h:Ae}=h.p(ge),ke=new h.q({width:ve||1,height:Ae||1});for(const Ge in te){const Ie=te[Ge];for(const et in Ie){const Te=Ie[+et];if(!Te||Te.bitmap.width===0||Te.bitmap.height===0)continue;const ne=ie[Ge][et].rect;h.q.copy(Te.bitmap,ke,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Te.bitmap)}}this.image=ke,this.positions=ie}}h.cs("GlyphAtlas",y);class x{constructor(te){this.tileID=new h.Y(te.tileID.overscaledZ,te.tileID.wrap,te.tileID.canonical.z,te.tileID.canonical.x,te.tileID.canonical.y),this.uid=te.uid,this.zoom=te.zoom,this.pixelRatio=te.pixelRatio,this.tileSize=te.tileSize,this.source=te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=te.showCollisionBoxes,this.collectResourceTiming=!!te.collectResourceTiming,this.returnDependencies=!!te.returnDependencies,this.promoteId=te.promoteId,this.inFlightDependencies=[]}parse(te,ie,ge,ve,Ae){return h._(this,void 0,void 0,function*(){this.status="parsing",this.data=te,this.collisionBoxArray=new h.a5;const ke=new h.ct(Object.keys(te.layers).sort()),Ge=new h.cu(this.tileID,this.promoteId);Ge.bucketLayerIDs=[];const Ie={},et={featureIndex:Ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge,subdivisionGranularity:Ae},Te=ie.familiesBySource[this.source];for(const tt in Te){const Ft=te.layers[tt];if(!Ft)continue;Ft.version===1&&h.w(`Vector tile source "${this.source}" layer "${tt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const zt=ke.encode(tt),ti=[];for(let oi=0;oi<Ft.length;oi++){const yr=Ft.feature(oi),Vt=Ge.getId(yr,tt);ti.push({feature:yr,id:Vt,index:oi,sourceLayerIndex:zt})}for(const oi of Te[tt]){const yr=oi[0];yr.source!==this.source&&h.w(`layer.source = ${yr.source} does not equal this.source = ${this.source}`),yr.minzoom&&this.zoom<Math.floor(yr.minzoom)||yr.maxzoom&&this.zoom>=yr.maxzoom||yr.visibility!=="none"&&(C(oi,this.zoom,ge),(Ie[yr.id]=yr.createBucket({index:Ge.bucketLayerIDs.length,layers:oi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zt,sourceID:this.source})).populate(ti,et,this.tileID.canonical),Ge.bucketLayerIDs.push(oi.map(Vt=>Vt.id)))}}const ne=h.bF(et.glyphDependencies,tt=>Object.keys(tt).map(Number));this.inFlightDependencies.forEach(tt=>tt==null?void 0:tt.abort()),this.inFlightDependencies=[];let Se=Promise.resolve({});if(Object.keys(ne).length){const tt=new AbortController;this.inFlightDependencies.push(tt),Se=ve.sendAsync({type:"GG",data:{stacks:ne,source:this.source,tileID:this.tileID,type:"glyphs"}},tt)}const Ue=Object.keys(et.iconDependencies);let He=Promise.resolve({});if(Ue.length){const tt=new AbortController;this.inFlightDependencies.push(tt),He=ve.sendAsync({type:"GI",data:{icons:Ue,source:this.source,tileID:this.tileID,type:"icons"}},tt)}const At=Object.keys(et.patternDependencies);let xt=Promise.resolve({});if(At.length){const tt=new AbortController;this.inFlightDependencies.push(tt),xt=ve.sendAsync({type:"GI",data:{icons:At,source:this.source,tileID:this.tileID,type:"patterns"}},tt)}const[Oe,mt,Kt]=yield Promise.all([Se,He,xt]),qt=new y(Oe),tr=new h.cv(mt,Kt);for(const tt in Ie){const Ft=Ie[tt];Ft instanceof h.a6?(C(Ft.layers,this.zoom,ge),h.cw({bucket:Ft,glyphMap:Oe,glyphPositions:qt.positions,imageMap:mt,imagePositions:tr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:et.subdivisionGranularity})):Ft.hasPattern&&(Ft instanceof h.cx||Ft instanceof h.cy||Ft instanceof h.cz)&&(C(Ft.layers,this.zoom,ge),Ft.addFeatures(et,this.tileID.canonical,tr.patternPositions))}return this.status="done",{buckets:Object.values(Ie).filter(tt=>!tt.isEmpty()),featureIndex:Ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qt.image,imageAtlas:tr,glyphMap:this.returnDependencies?Oe:null,iconMap:this.returnDependencies?mt:null,glyphPositions:this.returnDependencies?qt.positions:null}})}}function C(ze,te,ie){const ge=new h.C(te);for(const ve of ze)ve.recalculate(ge,ie)}class I{constructor(te,ie,ge){this.actor=te,this.layerIndex=ie,this.availableImages=ge,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(te,ie){return h._(this,void 0,void 0,function*(){const ge=yield h.n(te.request,ie);try{return{vectorTile:new h.cA.VectorTile(new h.cB(ge.data)),rawData:ge.data,cacheControl:ge.cacheControl,expires:ge.expires}}catch(ve){const Ae=new Uint8Array(ge.data);let ke=`Unable to parse the tile at ${te.request.url}, `;throw ke+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ve.message}`,new Error(ke)}})}loadTile(te){return h._(this,void 0,void 0,function*(){const ie=te.uid,ge=!!(te&&te.request&&te.request.collectResourceTiming)&&new h.cC(te.request),ve=new x(te);this.loading[ie]=ve;const Ae=new AbortController;ve.abort=Ae;try{const ke=yield this.loadVectorTile(te,Ae);if(delete this.loading[ie],!ke)return null;const Ge=ke.rawData,Ie={};ke.expires&&(Ie.expires=ke.expires),ke.cacheControl&&(Ie.cacheControl=ke.cacheControl);const et={};if(ge){const ne=ge.finish();ne&&(et.resourceTiming=JSON.parse(JSON.stringify(ne)))}ve.vectorTile=ke.vectorTile;const Te=ve.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity);this.loaded[ie]=ve,this.fetching[ie]={rawTileData:Ge,cacheControl:Ie,resourceTiming:et};try{const ne=yield Te;return h.e({rawTileData:Ge.slice(0)},ne,Ie,et)}finally{delete this.fetching[ie]}}catch(ke){throw delete this.loading[ie],ve.status="done",this.loaded[ie]=ve,ke}})}reloadTile(te){return h._(this,void 0,void 0,function*(){const ie=te.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ge=this.loaded[ie];if(ge.showCollisionBoxes=te.showCollisionBoxes,ge.status==="parsing"){const ve=yield ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity);let Ae;if(this.fetching[ie]){const{rawTileData:ke,cacheControl:Ge,resourceTiming:Ie}=this.fetching[ie];delete this.fetching[ie],Ae=h.e({rawTileData:ke.slice(0)},ve,Ge,Ie)}else Ae=ve;return Ae}if(ge.status==="done"&&ge.vectorTile)return ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity)})}abortTile(te){return h._(this,void 0,void 0,function*(){const ie=this.loading,ge=te.uid;ie&&ie[ge]&&ie[ge].abort&&(ie[ge].abort.abort(),delete ie[ge])})}removeTile(te){return h._(this,void 0,void 0,function*(){this.loaded&&this.loaded[te.uid]&&delete this.loaded[te.uid]})}}class U{constructor(){this.loaded={}}loadTile(te){return h._(this,void 0,void 0,function*(){const{uid:ie,encoding:ge,rawImageData:ve,redFactor:Ae,greenFactor:ke,blueFactor:Ge,baseShift:Ie}=te,et=ve.width+2,Te=ve.height+2,ne=h.b(ve)?new h.R({width:et,height:Te},yield h.cD(ve,-1,-1,et,Te)):ve,Se=new h.cE(ie,ne,ge,Ae,ke,Ge,Ie);return this.loaded=this.loaded||{},this.loaded[ie]=Se,Se})}removeTile(te){const ie=this.loaded,ge=te.uid;ie&&ie[ge]&&delete ie[ge]}}var R,N,D=function(){if(N)return R;function ze(ie,ge){if(ie.length!==0){te(ie[0],ge);for(var ve=1;ve<ie.length;ve++)te(ie[ve],!ge)}}function te(ie,ge){for(var ve=0,Ae=0,ke=0,Ge=ie.length,Ie=Ge-1;ke<Ge;Ie=ke++){var et=(ie[ke][0]-ie[Ie][0])*(ie[Ie][1]+ie[ke][1]),Te=ve+et;Ae+=Math.abs(ve)>=Math.abs(et)?ve-Te+et:et-Te+ve,ve=Te}ve+Ae>=0!=!!ge&&ie.reverse()}return N=1,R=function ie(ge,ve){var Ae,ke=ge&&ge.type;if(ke==="FeatureCollection")for(Ae=0;Ae<ge.features.length;Ae++)ie(ge.features[Ae],ve);else if(ke==="GeometryCollection")for(Ae=0;Ae<ge.geometries.length;Ae++)ie(ge.geometries[Ae],ve);else if(ke==="Feature")ie(ge.geometry,ve);else if(ke==="Polygon")ze(ge.coordinates,ve);else if(ke==="MultiPolygon")for(Ae=0;Ae<ge.coordinates.length;Ae++)ze(ge.coordinates[Ae],ve);return ge}}(),O=h.cF(D);const H=h.cA.VectorTileFeature.prototype.toGeoJSON;class W{constructor(te){this._feature=te,this.extent=h.Z,this.type=te.type,this.properties=te.tags,"id"in te&&!isNaN(te.id)&&(this.id=parseInt(te.id,10))}loadGeometry(){if(this._feature.type===1){const te=[];for(const ie of this._feature.geometry)te.push([new h.P(ie[0],ie[1])]);return te}{const te=[];for(const ie of this._feature.geometry){const ge=[];for(const ve of ie)ge.push(new h.P(ve[0],ve[1]));te.push(ge)}return te}}toGeoJSON(te,ie,ge){return H.call(this,te,ie,ge)}}class se{constructor(te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.Z,this.length=te.length,this._features=te}feature(te){return new W(this._features[te])}}var de,le,he,ae={exports:{}},V=function(){if(he)return ae.exports;he=1;var ze=h.cI(),te=function(){if(le)return de;le=1;var Te=h.cG(),ne=h.cH().VectorTileFeature;function Se(He,At){this.options=At||{},this.features=He,this.length=He.length}function Ue(He,At){this.id=typeof He.id=="number"?He.id:void 0,this.type=He.type,this.rawGeometry=He.type===1?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=At||4096}return de=Se,Se.prototype.feature=function(He){return new Ue(this.features[He],this.options.extent)},Ue.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var At=0;At<He.length;At++){for(var xt=He[At],Oe=[],mt=0;mt<xt.length;mt++)Oe.push(new Te(xt[mt][0],xt[mt][1]));this.geometry.push(Oe)}return this.geometry},Ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,At=1/0,xt=-1/0,Oe=1/0,mt=-1/0,Kt=0;Kt<He.length;Kt++)for(var qt=He[Kt],tr=0;tr<qt.length;tr++){var tt=qt[tr];At=Math.min(At,tt.x),xt=Math.max(xt,tt.x),Oe=Math.min(Oe,tt.y),mt=Math.max(mt,tt.y)}return[At,Oe,xt,mt]},Ue.prototype.toGeoJSON=ne.prototype.toGeoJSON,de}();function ie(Te){var ne=new ze;return function(Se,Ue){for(var He in Se.layers)Ue.writeMessage(3,ge,Se.layers[He])}(Te,ne),ne.finish()}function ge(Te,ne){var Se;ne.writeVarintField(15,Te.version||1),ne.writeStringField(1,Te.name||""),ne.writeVarintField(5,Te.extent||4096);var Ue={keys:[],values:[],keycache:{},valuecache:{}};for(Se=0;Se<Te.length;Se++)Ue.feature=Te.feature(Se),ne.writeMessage(2,ve,Ue);var He=Ue.keys;for(Se=0;Se<He.length;Se++)ne.writeStringField(3,He[Se]);var At=Ue.values;for(Se=0;Se<At.length;Se++)ne.writeMessage(4,et,At[Se])}function ve(Te,ne){var Se=Te.feature;Se.id!==void 0&&ne.writeVarintField(1,Se.id),ne.writeMessage(2,Ae,Te),ne.writeVarintField(3,Se.type),ne.writeMessage(4,Ie,Se)}function Ae(Te,ne){var Se=Te.feature,Ue=Te.keys,He=Te.values,At=Te.keycache,xt=Te.valuecache;for(var Oe in Se.properties){var mt=Se.properties[Oe],Kt=At[Oe];if(mt!==null){Kt===void 0&&(Ue.push(Oe),At[Oe]=Kt=Ue.length-1),ne.writeVarint(Kt);var qt=typeof mt;qt!=="string"&&qt!=="boolean"&&qt!=="number"&&(mt=JSON.stringify(mt));var tr=qt+":"+mt,tt=xt[tr];tt===void 0&&(He.push(mt),xt[tr]=tt=He.length-1),ne.writeVarint(tt)}}}function ke(Te,ne){return(ne<<3)+(7&Te)}function Ge(Te){return Te<<1^Te>>31}function Ie(Te,ne){for(var Se=Te.loadGeometry(),Ue=Te.type,He=0,At=0,xt=Se.length,Oe=0;Oe<xt;Oe++){var mt=Se[Oe],Kt=1;Ue===1&&(Kt=mt.length),ne.writeVarint(ke(1,Kt));for(var qt=Ue===3?mt.length-1:mt.length,tr=0;tr<qt;tr++){tr===1&&Ue!==1&&ne.writeVarint(ke(2,qt-1));var tt=mt[tr].x-He,Ft=mt[tr].y-At;ne.writeVarint(Ge(tt)),ne.writeVarint(Ge(Ft)),He+=tt,At+=Ft}Ue===3&&ne.writeVarint(ke(7,1))}}function et(Te,ne){var Se=typeof Te;Se==="string"?ne.writeStringField(1,Te):Se==="boolean"?ne.writeBooleanField(7,Te):Se==="number"&&(Te%1!=0?ne.writeDoubleField(3,Te):Te<0?ne.writeSVarintField(6,Te):ne.writeVarintField(5,Te))}return ae.exports=ie,ae.exports.fromVectorTileJs=ie,ae.exports.fromGeojsonVt=function(Te,ne){ne=ne||{};var Se={};for(var Ue in Te)Se[Ue]=new te(Te[Ue].features,ne),Se[Ue].name=Ue,Se[Ue].version=ne.version,Se[Ue].extent=ne.extent;return ie({layers:Se})},ae.exports.GeoJSONWrapper=te,ae.exports}(),K=h.cF(V);const oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},ce=Math.fround||(ye=new Float32Array(1),ze=>(ye[0]=+ze,ye[0]));var ye;const we=3,Ve=5,ut=6;class nt{constructor(te){this.options=Object.assign(Object.create(oe),te),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(te){const{log:ie,minZoom:ge,maxZoom:ve}=this.options;ie&&console.time("total time");const Ae=`prepare ${te.length} points`;ie&&console.time(Ae),this.points=te;const ke=[];for(let Ie=0;Ie<te.length;Ie++){const et=te[Ie];if(!et.geometry)continue;const[Te,ne]=et.geometry.coordinates,Se=ce(_t(Te)),Ue=ce(gt(ne));ke.push(Se,Ue,1/0,Ie,-1,1),this.options.reduce&&ke.push(0)}let Ge=this.trees[ve+1]=this._createTree(ke);ie&&console.timeEnd(Ae);for(let Ie=ve;Ie>=ge;Ie--){const et=+Date.now();Ge=this.trees[Ie]=this._createTree(this._cluster(Ge,Ie)),ie&&console.log("z%d: %d clusters in %dms",Ie,Ge.numItems,+Date.now()-et)}return ie&&console.timeEnd("total time"),this}getClusters(te,ie){let ge=((te[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,te[1]));let Ae=te[2]===180?180:((te[2]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)ge=-180,Ae=180;else if(ge>Ae){const ne=this.getClusters([ge,ve,180,ke],ie),Se=this.getClusters([-180,ve,Ae,ke],ie);return ne.concat(Se)}const Ge=this.trees[this._limitZoom(ie)],Ie=Ge.range(_t(ge),gt(ke),_t(Ae),gt(ve)),et=Ge.data,Te=[];for(const ne of Ie){const Se=this.stride*ne;Te.push(et[Se+Ve]>1?rt(et,Se,this.clusterProps):this.points[et[Se+we]])}return Te}getChildren(te){const ie=this._getOriginId(te),ge=this._getOriginZoom(te),ve="No cluster with the specified id.",Ae=this.trees[ge];if(!Ae)throw new Error(ve);const ke=Ae.data;if(ie*this.stride>=ke.length)throw new Error(ve);const Ge=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Ie=Ae.within(ke[ie*this.stride],ke[ie*this.stride+1],Ge),et=[];for(const Te of Ie){const ne=Te*this.stride;ke[ne+4]===te&&et.push(ke[ne+Ve]>1?rt(ke,ne,this.clusterProps):this.points[ke[ne+we]])}if(et.length===0)throw new Error(ve);return et}getLeaves(te,ie,ge){const ve=[];return this._appendLeaves(ve,te,ie=ie||10,ge=ge||0,0),ve}getTile(te,ie,ge){const ve=this.trees[this._limitZoom(te)],Ae=Math.pow(2,te),{extent:ke,radius:Ge}=this.options,Ie=Ge/ke,et=(ge-Ie)/Ae,Te=(ge+1+Ie)/Ae,ne={features:[]};return this._addTileFeatures(ve.range((ie-Ie)/Ae,et,(ie+1+Ie)/Ae,Te),ve.data,ie,ge,Ae,ne),ie===0&&this._addTileFeatures(ve.range(1-Ie/Ae,et,1,Te),ve.data,Ae,ge,Ae,ne),ie===Ae-1&&this._addTileFeatures(ve.range(0,et,Ie/Ae,Te),ve.data,-1,ge,Ae,ne),ne.features.length?ne:null}getClusterExpansionZoom(te){let ie=this._getOriginZoom(te)-1;for(;ie<=this.options.maxZoom;){const ge=this.getChildren(te);if(ie++,ge.length!==1)break;te=ge[0].properties.cluster_id}return ie}_appendLeaves(te,ie,ge,ve,Ae){const ke=this.getChildren(ie);for(const Ge of ke){const Ie=Ge.properties;if(Ie&&Ie.cluster?Ae+Ie.point_count<=ve?Ae+=Ie.point_count:Ae=this._appendLeaves(te,Ie.cluster_id,ge,ve,Ae):Ae<ve?Ae++:te.push(Ge),te.length===ge)break}return Ae}_createTree(te){const ie=new h.aF(te.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<te.length;ge+=this.stride)ie.add(te[ge],te[ge+1]);return ie.finish(),ie.data=te,ie}_addTileFeatures(te,ie,ge,ve,Ae,ke){for(const Ge of te){const Ie=Ge*this.stride,et=ie[Ie+Ve]>1;let Te,ne,Se;if(et)Te=ft(ie,Ie,this.clusterProps),ne=ie[Ie],Se=ie[Ie+1];else{const At=this.points[ie[Ie+we]];Te=At.properties;const[xt,Oe]=At.geometry.coordinates;ne=_t(xt),Se=gt(Oe)}const Ue={type:1,geometry:[[Math.round(this.options.extent*(ne*Ae-ge)),Math.round(this.options.extent*(Se*Ae-ve))]],tags:Te};let He;He=et||this.options.generateId?ie[Ie+we]:this.points[ie[Ie+we]].id,He!==void 0&&(Ue.id=He),ke.features.push(Ue)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,ie){const{radius:ge,extent:ve,reduce:Ae,minPoints:ke}=this.options,Ge=ge/(ve*Math.pow(2,ie)),Ie=te.data,et=[],Te=this.stride;for(let ne=0;ne<Ie.length;ne+=Te){if(Ie[ne+2]<=ie)continue;Ie[ne+2]=ie;const Se=Ie[ne],Ue=Ie[ne+1],He=te.within(Ie[ne],Ie[ne+1],Ge),At=Ie[ne+Ve];let xt=At;for(const Oe of He){const mt=Oe*Te;Ie[mt+2]>ie&&(xt+=Ie[mt+Ve])}if(xt>At&&xt>=ke){let Oe,mt=Se*At,Kt=Ue*At,qt=-1;const tr=((ne/Te|0)<<5)+(ie+1)+this.points.length;for(const tt of He){const Ft=tt*Te;if(Ie[Ft+2]<=ie)continue;Ie[Ft+2]=ie;const zt=Ie[Ft+Ve];mt+=Ie[Ft]*zt,Kt+=Ie[Ft+1]*zt,Ie[Ft+4]=tr,Ae&&(Oe||(Oe=this._map(Ie,ne,!0),qt=this.clusterProps.length,this.clusterProps.push(Oe)),Ae(Oe,this._map(Ie,Ft)))}Ie[ne+4]=tr,et.push(mt/xt,Kt/xt,1/0,tr,-1,xt),Ae&&et.push(qt)}else{for(let Oe=0;Oe<Te;Oe++)et.push(Ie[ne+Oe]);if(xt>1)for(const Oe of He){const mt=Oe*Te;if(!(Ie[mt+2]<=ie)){Ie[mt+2]=ie;for(let Kt=0;Kt<Te;Kt++)et.push(Ie[mt+Kt])}}}}return et}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,ie,ge){if(te[ie+Ve]>1){const ke=this.clusterProps[te[ie+ut]];return ge?Object.assign({},ke):ke}const ve=this.points[te[ie+we]].properties,Ae=this.options.map(ve);return ge&&Ae===ve?Object.assign({},Ae):Ae}}function rt(ze,te,ie){return{type:"Feature",id:ze[te+we],properties:ft(ze,te,ie),geometry:{type:"Point",coordinates:[(ge=ze[te],360*(ge-.5)),Je(ze[te+1])]}};var ge}function ft(ze,te,ie){const ge=ze[te+Ve],ve=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+"k":ge,Ae=ze[te+ut],ke=Ae===-1?{}:Object.assign({},ie[Ae]);return Object.assign(ke,{cluster:!0,cluster_id:ze[te+we],point_count:ge,point_count_abbreviated:ve})}function _t(ze){return ze/360+.5}function gt(ze){const te=Math.sin(ze*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function Je(ze){const te=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function je(ze,te,ie,ge){let ve=ge;const Ae=te+(ie-te>>1);let ke,Ge=ie-te;const Ie=ze[te],et=ze[te+1],Te=ze[ie],ne=ze[ie+1];for(let Se=te+3;Se<ie;Se+=3){const Ue=Qe(ze[Se],ze[Se+1],Ie,et,Te,ne);if(Ue>ve)ke=Se,ve=Ue;else if(Ue===ve){const He=Math.abs(Se-Ae);He<Ge&&(ke=Se,Ge=He)}}ve>ge&&(ke-te>3&&je(ze,te,ke,ge),ze[ke+2]=ve,ie-ke>3&&je(ze,ke,ie,ge))}function Qe(ze,te,ie,ge,ve,Ae){let ke=ve-ie,Ge=Ae-ge;if(ke!==0||Ge!==0){const Ie=((ze-ie)*ke+(te-ge)*Ge)/(ke*ke+Ge*Ge);Ie>1?(ie=ve,ge=Ae):Ie>0&&(ie+=ke*Ie,ge+=Ge*Ie)}return ke=ze-ie,Ge=te-ge,ke*ke+Ge*Ge}function pt(ze,te,ie,ge){const ve={id:ze??null,type:te,geometry:ie,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(te==="Point"||te==="MultiPoint"||te==="LineString")$e(ve,ie);else if(te==="Polygon")$e(ve,ie[0]);else if(te==="MultiLineString")for(const Ae of ie)$e(ve,Ae);else if(te==="MultiPolygon")for(const Ae of ie)$e(ve,Ae[0]);return ve}function $e(ze,te){for(let ie=0;ie<te.length;ie+=3)ze.minX=Math.min(ze.minX,te[ie]),ze.minY=Math.min(ze.minY,te[ie+1]),ze.maxX=Math.max(ze.maxX,te[ie]),ze.maxY=Math.max(ze.maxY,te[ie+1])}function wt(ze,te,ie,ge){if(!te.geometry)return;const ve=te.geometry.coordinates;if(ve&&ve.length===0)return;const Ae=te.geometry.type,ke=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let Ge=[],Ie=te.id;if(ie.promoteId?Ie=te.properties[ie.promoteId]:ie.generateId&&(Ie=ge||0),Ae==="Point")Ct(ve,Ge);else if(Ae==="MultiPoint")for(const et of ve)Ct(et,Ge);else if(Ae==="LineString")Mt(ve,Ge,ke,!1);else if(Ae==="MultiLineString"){if(ie.lineMetrics){for(const et of ve)Ge=[],Mt(et,Ge,ke,!1),ze.push(pt(Ie,"LineString",Ge,te.properties));return}Pt(ve,Ge,ke,!1)}else if(Ae==="Polygon")Pt(ve,Ge,ke,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(const et of te.geometry.geometries)wt(ze,{id:Ie,geometry:et,properties:te.properties},ie,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const et of ve){const Te=[];Pt(et,Te,ke,!0),Ge.push(Te)}}ze.push(pt(Ie,Ae,Ge,te.properties))}function Ct(ze,te){te.push(ar(ze[0]),Lt(ze[1]),0)}function Mt(ze,te,ie,ge){let ve,Ae,ke=0;for(let Ie=0;Ie<ze.length;Ie++){const et=ar(ze[Ie][0]),Te=Lt(ze[Ie][1]);te.push(et,Te,0),Ie>0&&(ke+=ge?(ve*Te-et*Ae)/2:Math.sqrt(Math.pow(et-ve,2)+Math.pow(Te-Ae,2))),ve=et,Ae=Te}const Ge=te.length-3;te[2]=1,je(te,0,Ge,ie),te[Ge+2]=1,te.size=Math.abs(ke),te.start=0,te.end=te.size}function Pt(ze,te,ie,ge){for(let ve=0;ve<ze.length;ve++){const Ae=[];Mt(ze[ve],Ae,ie,ge),te.push(Ae)}}function ar(ze){return ze/360+.5}function Lt(ze){const te=Math.sin(ze*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function Ot(ze,te,ie,ge,ve,Ae,ke,Ge){if(ge/=te,Ae>=(ie/=te)&&ke<ge)return ze;if(ke<ie||Ae>=ge)return null;const Ie=[];for(const et of ze){const Te=et.geometry;let ne=et.type;const Se=ve===0?et.minX:et.minY,Ue=ve===0?et.maxX:et.maxY;if(Se>=ie&&Ue<ge){Ie.push(et);continue}if(Ue<ie||Se>=ge)continue;let He=[];if(ne==="Point"||ne==="MultiPoint")Qt(Te,He,ie,ge,ve);else if(ne==="LineString")St(Te,He,ie,ge,ve,!1,Ge.lineMetrics);else if(ne==="MultiLineString")lr(Te,He,ie,ge,ve,!1);else if(ne==="Polygon")lr(Te,He,ie,ge,ve,!0);else if(ne==="MultiPolygon")for(const At of Te){const xt=[];lr(At,xt,ie,ge,ve,!0),xt.length&&He.push(xt)}if(He.length){if(Ge.lineMetrics&&ne==="LineString"){for(const At of He)Ie.push(pt(et.id,ne,At,et.tags));continue}ne!=="LineString"&&ne!=="MultiLineString"||(He.length===1?(ne="LineString",He=He[0]):ne="MultiLineString"),ne!=="Point"&&ne!=="MultiPoint"||(ne=He.length===3?"Point":"MultiPoint"),Ie.push(pt(et.id,ne,He,et.tags))}}return Ie.length?Ie:null}function Qt(ze,te,ie,ge,ve){for(let Ae=0;Ae<ze.length;Ae+=3){const ke=ze[Ae+ve];ke>=ie&&ke<=ge&&dr(te,ze[Ae],ze[Ae+1],ze[Ae+2])}}function St(ze,te,ie,ge,ve,Ae,ke){let Ge=Zt(ze);const Ie=ve===0?rr:Br;let et,Te,ne=ze.start;for(let xt=0;xt<ze.length-3;xt+=3){const Oe=ze[xt],mt=ze[xt+1],Kt=ze[xt+2],qt=ze[xt+3],tr=ze[xt+4],tt=ve===0?Oe:mt,Ft=ve===0?qt:tr;let zt=!1;ke&&(et=Math.sqrt(Math.pow(Oe-qt,2)+Math.pow(mt-tr,2))),tt<ie?Ft>ie&&(Te=Ie(Ge,Oe,mt,qt,tr,ie),ke&&(Ge.start=ne+et*Te)):tt>ge?Ft<ge&&(Te=Ie(Ge,Oe,mt,qt,tr,ge),ke&&(Ge.start=ne+et*Te)):dr(Ge,Oe,mt,Kt),Ft<ie&&tt>=ie&&(Te=Ie(Ge,Oe,mt,qt,tr,ie),zt=!0),Ft>ge&&tt<=ge&&(Te=Ie(Ge,Oe,mt,qt,tr,ge),zt=!0),!Ae&&zt&&(ke&&(Ge.end=ne+et*Te),te.push(Ge),Ge=Zt(ze)),ke&&(ne+=et)}let Se=ze.length-3;const Ue=ze[Se],He=ze[Se+1],At=ve===0?Ue:He;At>=ie&&At<=ge&&dr(Ge,Ue,He,ze[Se+2]),Se=Ge.length-3,Ae&&Se>=3&&(Ge[Se]!==Ge[0]||Ge[Se+1]!==Ge[1])&&dr(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&te.push(Ge)}function Zt(ze){const te=[];return te.size=ze.size,te.start=ze.start,te.end=ze.end,te}function lr(ze,te,ie,ge,ve,Ae){for(const ke of ze)St(ke,te,ie,ge,ve,Ae,!1)}function dr(ze,te,ie,ge){ze.push(te,ie,ge)}function rr(ze,te,ie,ge,ve,Ae){const ke=(Ae-te)/(ge-te);return dr(ze,Ae,ie+(ve-ie)*ke,1),ke}function Br(ze,te,ie,ge,ve,Ae){const ke=(Ae-ie)/(ve-ie);return dr(ze,te+(ge-te)*ke,Ae,1),ke}function Dr(ze,te){const ie=[];for(let ge=0;ge<ze.length;ge++){const ve=ze[ge],Ae=ve.type;let ke;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")ke=vi(ve.geometry,te);else if(Ae==="MultiLineString"||Ae==="Polygon"){ke=[];for(const Ge of ve.geometry)ke.push(vi(Ge,te))}else if(Ae==="MultiPolygon"){ke=[];for(const Ge of ve.geometry){const Ie=[];for(const et of Ge)Ie.push(vi(et,te));ke.push(Ie)}}ie.push(pt(ve.id,Ae,ke,ve.tags))}return ie}function vi(ze,te){const ie=[];ie.size=ze.size,ze.start!==void 0&&(ie.start=ze.start,ie.end=ze.end);for(let ge=0;ge<ze.length;ge+=3)ie.push(ze[ge]+te,ze[ge+1],ze[ge+2]);return ie}function Gr(ze,te){if(ze.transformed)return ze;const ie=1<<ze.z,ge=ze.x,ve=ze.y;for(const Ae of ze.features){const ke=Ae.geometry,Ge=Ae.type;if(Ae.geometry=[],Ge===1)for(let Ie=0;Ie<ke.length;Ie+=2)Ae.geometry.push(Fi(ke[Ie],ke[Ie+1],te,ie,ge,ve));else for(let Ie=0;Ie<ke.length;Ie++){const et=[];for(let Te=0;Te<ke[Ie].length;Te+=2)et.push(Fi(ke[Ie][Te],ke[Ie][Te+1],te,ie,ge,ve));Ae.geometry.push(et)}}return ze.transformed=!0,ze}function Fi(ze,te,ie,ge,ve,Ae){return[Math.round(ie*(ze*ge-ve)),Math.round(ie*(te*ge-Ae))]}function Kr(ze,te,ie,ge,ve){const Ae=te===ve.maxZoom?0:ve.tolerance/((1<<te)*ve.extent),ke={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:ie,y:ge,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ge of ze)hi(ke,Ge,Ae,ve);return ke}function hi(ze,te,ie,ge){const ve=te.geometry,Ae=te.type,ke=[];if(ze.minX=Math.min(ze.minX,te.minX),ze.minY=Math.min(ze.minY,te.minY),ze.maxX=Math.max(ze.maxX,te.maxX),ze.maxY=Math.max(ze.maxY,te.maxY),Ae==="Point"||Ae==="MultiPoint")for(let Ge=0;Ge<ve.length;Ge+=3)ke.push(ve[Ge],ve[Ge+1]),ze.numPoints++,ze.numSimplified++;else if(Ae==="LineString")Rr(ke,ve,ze,ie,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let Ge=0;Ge<ve.length;Ge++)Rr(ke,ve[Ge],ze,ie,Ae==="Polygon",Ge===0);else if(Ae==="MultiPolygon")for(let Ge=0;Ge<ve.length;Ge++){const Ie=ve[Ge];for(let et=0;et<Ie.length;et++)Rr(ke,Ie[et],ze,ie,!0,et===0)}if(ke.length){let Ge=te.tags||null;if(Ae==="LineString"&&ge.lineMetrics){Ge={};for(const et in te.tags)Ge[et]=te.tags[et];Ge.mapbox_clip_start=ve.start/ve.size,Ge.mapbox_clip_end=ve.end/ve.size}const Ie={geometry:ke,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:Ge};te.id!==null&&(Ie.id=te.id),ze.features.push(Ie)}}function Rr(ze,te,ie,ge,ve,Ae){const ke=ge*ge;if(ge>0&&te.size<(ve?ke:ge))return void(ie.numPoints+=te.length/3);const Ge=[];for(let Ie=0;Ie<te.length;Ie+=3)(ge===0||te[Ie+2]>ke)&&(ie.numSimplified++,Ge.push(te[Ie],te[Ie+1])),ie.numPoints++;ve&&function(Ie,et){let Te=0;for(let ne=0,Se=Ie.length,Ue=Se-2;ne<Se;Ue=ne,ne+=2)Te+=(Ie[ne]-Ie[Ue])*(Ie[ne+1]+Ie[Ue+1]);if(Te>0===et)for(let ne=0,Se=Ie.length;ne<Se/2;ne+=2){const Ue=Ie[ne],He=Ie[ne+1];Ie[ne]=Ie[Se-2-ne],Ie[ne+1]=Ie[Se-1-ne],Ie[Se-2-ne]=Ue,Ie[Se-1-ne]=He}}(Ge,Ae),ze.push(Ge)}const $r={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ui{constructor(te,ie){const ge=(ie=this.options=function(Ae,ke){for(const Ge in ke)Ae[Ge]=ke[Ge];return Ae}(Object.create($r),ie)).debug;if(ge&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let ve=function(Ae,ke){const Ge=[];if(Ae.type==="FeatureCollection")for(let Ie=0;Ie<Ae.features.length;Ie++)wt(Ge,Ae.features[Ie],ke,Ie);else wt(Ge,Ae.type==="Feature"?Ae:{geometry:Ae},ke);return Ge}(te,ie);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ve=function(Ae,ke){const Ge=ke.buffer/ke.extent;let Ie=Ae;const et=Ot(Ae,1,-1-Ge,Ge,0,-1,2,ke),Te=Ot(Ae,1,1-Ge,2+Ge,0,-1,2,ke);return(et||Te)&&(Ie=Ot(Ae,1,-Ge,1+Ge,0,-1,2,ke)||[],et&&(Ie=Dr(et,1).concat(Ie)),Te&&(Ie=Ie.concat(Dr(Te,-1)))),Ie}(ve,ie),ve.length&&this.splitTile(ve,0,0,0),ge&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(te,ie,ge,ve,Ae,ke,Ge){const Ie=[te,ie,ge,ve],et=this.options,Te=et.debug;for(;Ie.length;){ve=Ie.pop(),ge=Ie.pop(),ie=Ie.pop(),te=Ie.pop();const ne=1<<ie,Se=Un(ie,ge,ve);let Ue=this.tiles[Se];if(!Ue&&(Te>1&&console.time("creation"),Ue=this.tiles[Se]=Kr(te,ie,ge,ve,et),this.tileCoords.push({z:ie,x:ge,y:ve}),Te)){Te>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,ge,ve,Ue.numFeatures,Ue.numPoints,Ue.numSimplified),console.timeEnd("creation"));const zt=`z${ie}`;this.stats[zt]=(this.stats[zt]||0)+1,this.total++}if(Ue.source=te,Ae==null){if(ie===et.indexMaxZoom||Ue.numPoints<=et.indexMaxPoints)continue}else{if(ie===et.maxZoom||ie===Ae)continue;if(Ae!=null){const zt=Ae-ie;if(ge!==ke>>zt||ve!==Ge>>zt)continue}}if(Ue.source=null,te.length===0)continue;Te>1&&console.time("clipping");const He=.5*et.buffer/et.extent,At=.5-He,xt=.5+He,Oe=1+He;let mt=null,Kt=null,qt=null,tr=null,tt=Ot(te,ne,ge-He,ge+xt,0,Ue.minX,Ue.maxX,et),Ft=Ot(te,ne,ge+At,ge+Oe,0,Ue.minX,Ue.maxX,et);te=null,tt&&(mt=Ot(tt,ne,ve-He,ve+xt,1,Ue.minY,Ue.maxY,et),Kt=Ot(tt,ne,ve+At,ve+Oe,1,Ue.minY,Ue.maxY,et),tt=null),Ft&&(qt=Ot(Ft,ne,ve-He,ve+xt,1,Ue.minY,Ue.maxY,et),tr=Ot(Ft,ne,ve+At,ve+Oe,1,Ue.minY,Ue.maxY,et),Ft=null),Te>1&&console.timeEnd("clipping"),Ie.push(mt||[],ie+1,2*ge,2*ve),Ie.push(Kt||[],ie+1,2*ge,2*ve+1),Ie.push(qt||[],ie+1,2*ge+1,2*ve),Ie.push(tr||[],ie+1,2*ge+1,2*ve+1)}}getTile(te,ie,ge){te=+te,ie=+ie,ge=+ge;const ve=this.options,{extent:Ae,debug:ke}=ve;if(te<0||te>24)return null;const Ge=1<<te,Ie=Un(te,ie=ie+Ge&Ge-1,ge);if(this.tiles[Ie])return Gr(this.tiles[Ie],Ae);ke>1&&console.log("drilling down to z%d-%d-%d",te,ie,ge);let et,Te=te,ne=ie,Se=ge;for(;!et&&Te>0;)Te--,ne>>=1,Se>>=1,et=this.tiles[Un(Te,ne,Se)];return et&&et.source?(ke>1&&(console.log("found parent tile z%d-%d-%d",Te,ne,Se),console.time("drilling down")),this.splitTile(et.source,Te,ne,Se,te,ie,ge),ke>1&&console.timeEnd("drilling down"),this.tiles[Ie]?Gr(this.tiles[Ie],Ae):null):null}}function Un(ze,te,ie){return 32*((1<<ze)*ie+te)+ze}function Xi(ze,te){return te?ze.properties[te]:ze.id}function Vi(ze,te){if(ze==null)return!0;if(ze.type==="Feature")return Xi(ze,te)!=null;if(ze.type==="FeatureCollection"){const ie=new Set;for(const ge of ze.features){const ve=Xi(ge,te);if(ve==null||ie.has(ve))return!1;ie.add(ve)}return!0}return!1}function si(ze,te){const ie=new Map;if(ze!=null)if(ze.type==="Feature")ie.set(Xi(ze,te),ze);else for(const ge of ze.features)ie.set(Xi(ge,te),ge);return ie}class ni extends I{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(te,ie){return h._(this,void 0,void 0,function*(){const ge=te.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ve=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!ve)return null;const Ae=new se(ve.features);let ke=K(Ae);return ke.byteOffset===0&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),{vectorTile:Ae,rawData:ke.buffer}})}loadData(te){return h._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const ge=!!(te&&te.request&&te.request.collectResourceTiming)&&new h.cC(te.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(te,this._pendingRequest),this._geoJSONIndex=te.cluster?new nt(function({superclusterOptions:ke,clusterProperties:Ge}){if(!Ge||!ke)return ke;const Ie={},et={},Te={accumulated:null,zoom:0},ne={properties:null},Se=Object.keys(Ge);for(const Ue of Se){const[He,At]=Ge[Ue],xt=h.cJ(At),Oe=h.cJ(typeof He=="string"?[He,["accumulated"],["get",Ue]]:He);Ie[Ue]=xt.value,et[Ue]=Oe.value}return ke.map=Ue=>{ne.properties=Ue;const He={};for(const At of Se)He[At]=Ie[At].evaluate(Te,ne);return He},ke.reduce=(Ue,He)=>{ne.properties=He;for(const At of Se)Te.accumulated=Ue[At],Ue[At]=et[At].evaluate(Te,ne)},ke}(te)).load((yield this._pendingData).features):(ve=yield this._pendingData,new ui(ve,te.geojsonVtOptions)),this.loaded={};const Ae={};if(ge){const ke=ge.finish();ke&&(Ae.resourceTiming={},Ae.resourceTiming[te.source]=JSON.parse(JSON.stringify(ke)))}return Ae}catch(Ae){if(delete this._pendingRequest,h.cn(Ae))return{abandoned:!0};throw Ae}var ve})}getData(){return h._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(te){const ie=this.loaded;return ie&&ie[te.uid]?super.reloadTile(te):this.loadTile(te)}loadAndProcessGeoJSON(te,ie){return h._(this,void 0,void 0,function*(){let ge=yield this.loadGeoJSON(te,ie);if(delete this._pendingRequest,typeof ge!="object")throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(O(ge,!0),te.filter){const ve=h.cJ(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ve.result==="error")throw new Error(ve.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));ge={type:"FeatureCollection",features:ge.features.filter(ke=>ve.value.evaluate({zoom:0},ke))}}return ge})}loadGeoJSON(te,ie){return h._(this,void 0,void 0,function*(){const{promoteId:ge}=te;if(te.request){const ve=yield h.j(te.request,ie);return this._dataUpdateable=Vi(ve.data,ge)?si(ve.data,ge):void 0,ve.data}if(typeof te.data=="string")try{const ve=JSON.parse(te.data);return this._dataUpdateable=Vi(ve,ge)?si(ve,ge):void 0,ve}catch{throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`)}if(!te.dataDiff)throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${te.source}`);return function(ve,Ae,ke){var Ge,Ie,et,Te;if(Ae.removeAll&&ve.clear(),Ae.remove)for(const ne of Ae.remove)ve.delete(ne);if(Ae.add)for(const ne of Ae.add){const Se=Xi(ne,ke);Se!=null&&ve.set(Se,ne)}if(Ae.update)for(const ne of Ae.update){let Se=ve.get(ne.id);if(Se==null)continue;const Ue=!ne.removeAllProperties&&(((Ge=ne.removeProperties)===null||Ge===void 0?void 0:Ge.length)>0||((Ie=ne.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0);if((ne.newGeometry||ne.removeAllProperties||Ue)&&(Se=Object.assign({},Se),ve.set(ne.id,Se),Ue&&(Se.properties=Object.assign({},Se.properties))),ne.newGeometry&&(Se.geometry=ne.newGeometry),ne.removeAllProperties)Se.properties={};else if(((et=ne.removeProperties)===null||et===void 0?void 0:et.length)>0)for(const He of ne.removeProperties)Object.prototype.hasOwnProperty.call(Se.properties,He)&&delete Se.properties[He];if(((Te=ne.addOrUpdateProperties)===null||Te===void 0?void 0:Te.length)>0)for(const{key:He,value:At}of ne.addOrUpdateProperties)Se.properties[He]=At}}(this._dataUpdateable,te.dataDiff,ge),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(te){return h._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(te){return this._geoJSONIndex.getClusterExpansionZoom(te.clusterId)}getClusterChildren(te){return this._geoJSONIndex.getChildren(te.clusterId)}getClusterLeaves(te){return this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset)}}class xi{constructor(te){this.self=te,this.actor=new h.H(te),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ie,ge)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=ge},this.self.addProtocol=h.cp,this.self.removeProtocol=h.cq,this.self.registerRTLTextPlugin=ie=>{h.cK.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,ge)=>this._getDEMWorkerSource(ie,ge.source).loadTile(ge)),this.actor.registerMessageHandler("RDT",(ie,ge)=>h._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,ge.source).removeTile(ge)})),this.actor.registerMessageHandler("GCEZ",(ie,ge)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ge.type,ge.source).getClusterExpansionZoom(ge)})),this.actor.registerMessageHandler("GCC",(ie,ge)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ge.type,ge.source).getClusterChildren(ge)})),this.actor.registerMessageHandler("GCL",(ie,ge)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ge.type,ge.source).getClusterLeaves(ge)})),this.actor.registerMessageHandler("LD",(ie,ge)=>this._getWorkerSource(ie,ge.type,ge.source).loadData(ge)),this.actor.registerMessageHandler("GD",(ie,ge)=>this._getWorkerSource(ie,ge.type,ge.source).getData()),this.actor.registerMessageHandler("LT",(ie,ge)=>this._getWorkerSource(ie,ge.type,ge.source).loadTile(ge)),this.actor.registerMessageHandler("RT",(ie,ge)=>this._getWorkerSource(ie,ge.type,ge.source).reloadTile(ge)),this.actor.registerMessageHandler("AT",(ie,ge)=>this._getWorkerSource(ie,ge.type,ge.source).abortTile(ge)),this.actor.registerMessageHandler("RMT",(ie,ge)=>this._getWorkerSource(ie,ge.type,ge.source).removeTile(ge)),this.actor.registerMessageHandler("RS",(ie,ge)=>h._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][ge.type]||!this.workerSources[ie][ge.type][ge.source])return;const ve=this.workerSources[ie][ge.type][ge.source];delete this.workerSources[ie][ge.type][ge.source],ve.removeSource!==void 0&&ve.removeSource(ge)})),this.actor.registerMessageHandler("RM",ie=>h._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie]})),this.actor.registerMessageHandler("SR",(ie,ge)=>h._(this,void 0,void 0,function*(){this.referrer=ge})),this.actor.registerMessageHandler("SRPS",(ie,ge)=>this._syncRTLPluginState(ie,ge)),this.actor.registerMessageHandler("IS",(ie,ge)=>h._(this,void 0,void 0,function*(){this.self.importScripts(ge)})),this.actor.registerMessageHandler("SI",(ie,ge)=>this._setImages(ie,ge)),this.actor.registerMessageHandler("UL",(ie,ge)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(ge.layers,ge.removedIds)})),this.actor.registerMessageHandler("SL",(ie,ge)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(ge)}))}_setImages(te,ie){return h._(this,void 0,void 0,function*(){this.availableImages[te]=ie;for(const ge in this.workerSources[te]){const ve=this.workerSources[te][ge];for(const Ae in ve)ve[Ae].availableImages=ie}})}_syncRTLPluginState(te,ie){return h._(this,void 0,void 0,function*(){return yield h.cK.syncState(ie,this.self.importScripts)})}_getAvailableImages(te){let ie=this.availableImages[te];return ie||(ie=[]),ie}_getLayerIndex(te){let ie=this.layerIndexes[te];return ie||(ie=this.layerIndexes[te]=new s),ie}_getWorkerSource(te,ie,ge){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][ie]||(this.workerSources[te][ie]={}),!this.workerSources[te][ie][ge]){const ve={sendAsync:(Ae,ke)=>(Ae.targetMapId=te,this.actor.sendAsync(Ae,ke))};switch(ie){case"vector":this.workerSources[te][ie][ge]=new I(ve,this._getLayerIndex(te),this._getAvailableImages(te));break;case"geojson":this.workerSources[te][ie][ge]=new ni(ve,this._getLayerIndex(te),this._getAvailableImages(te));break;default:this.workerSources[te][ie][ge]=new this.externalWorkerSourceTypes[ie](ve,this._getLayerIndex(te),this._getAvailableImages(te))}}return this.workerSources[te][ie][ge]}_getDEMWorkerSource(te,ie){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][ie]||(this.demWorkerSources[te][ie]=new U),this.demWorkerSources[te][ie]}}return h.i(self)&&(self.worker=new xi(self)),xi}),l("index",["exports","./shared"],function(h,s){var y="5.4.0";function x(){var _=new s.A(4);return s.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let C,I;const U={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,i,o){const f=requestAnimationFrame(b=>{p(),i(b)}),{unsubscribe:p}=s.s(_.signal,"abort",()=>{p(),cancelAnimationFrame(f),o(s.c())},!1)},frameAsync(_){return new Promise((i,o)=>{this.frame(_,i,o)})},getImageData(_,i=0){return this.getImageCanvasContext(_).getImageData(-i,-i,_.width+2*i,_.height+2*i)},getImageCanvasContext(_){const i=window.document.createElement("canvas"),o=i.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return i.width=_.width,i.height=_.height,o.drawImage(_,0,0,_.width,_.height),o},resolveURL:_=>(C||(C=document.createElement("a")),C.href=_,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class R{static testProp(i){if(!R.docStyle)return i[0];for(let o=0;o<i.length;o++)if(i[o]in R.docStyle)return i[o];return i[0]}static create(i,o,f){const p=window.document.createElement(i);return o!==void 0&&(p.className=o),f&&f.appendChild(p),p}static createNS(i,o){return window.document.createElementNS(i,o)}static disableDrag(){R.docStyle&&R.selectProp&&(R.userSelect=R.docStyle[R.selectProp],R.docStyle[R.selectProp]="none")}static enableDrag(){R.docStyle&&R.selectProp&&(R.docStyle[R.selectProp]=R.userSelect)}static setTransform(i,o){i.style[R.transformProp]=o}static addEventListener(i,o,f,p={}){i.addEventListener(o,f,"passive"in p?p:p.capture)}static removeEventListener(i,o,f,p={}){i.removeEventListener(o,f,"passive"in p?p:p.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",R.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",R.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",R.suppressClickInternal,!0)},0)}static getScale(i){const o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}static getPoint(i,o,f){const p=o.boundingClientRect;return new s.P((f.clientX-p.left)/o.x-i.clientLeft,(f.clientY-p.top)/o.y-i.clientTop)}static mousePos(i,o){const f=R.getScale(i);return R.getPoint(i,f,o)}static touchPos(i,o){const f=[],p=R.getScale(i);for(let b=0;b<o.length;b++)f.push(R.getPoint(i,p,o[b]));return f}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){const o=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),f=o.querySelectorAll("script");for(const p of f)p.remove();return R.clean(o),o.innerHTML}static isPossiblyDangerous(i,o){const f=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!f.includes("javascript:")&&!f.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){const o=i.children;for(const f of o)R.removeAttributes(f),R.clean(f)}static removeAttributes(i){for(const{name:o,value:f}of i.attributes)R.isPossiblyDangerous(o,f)&&i.removeAttribute(o)}}R.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,R.selectProp=R.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),R.transformProp=R.testProp(["transform","WebkitTransform"]);const N={supported:!1,testSupport:function(_){!H&&O&&(W?se(_):D=_)}};let D,O,H=!1,W=!1;function se(_){const i=_.createTexture();_.bindTexture(_.TEXTURE_2D,i);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,O),_.isContextLost())return;N.supported=!0}catch{}_.deleteTexture(i),H=!0}var de;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{D&&se(D),D=null,W=!0},O.onerror=()=>{H=!0,D=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let i,o,f,p;_.resetRequestQueue=()=>{i=[],o=0,f=0,p={}},_.addThrottleControl=T=>{const Y=f++;return p[Y]=T,Y},_.removeThrottleControl=T=>{delete p[T],B()},_.getImage=(T,Y,Q=!0)=>new Promise((z,Z)=>{N.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),s.e(T,{type:"image"}),i.push({abortController:Y,requestParameters:T,supportImageRefresh:Q,state:"queued",onError:q=>{Z(q)},onSuccess:q=>{z(q)}}),B()});const b=T=>s._(this,void 0,void 0,function*(){T.state="running";const{requestParameters:Y,supportImageRefresh:Q,onError:z,onSuccess:Z,abortController:q}=T,J=Q===!1&&!s.i(self)&&!s.g(Y.url)&&(!Y.headers||Object.keys(Y.headers).reduce((_e,xe)=>_e&&xe==="accept",!0));o++;const me=J?E(Y,q):s.m(Y,q);try{const _e=yield me;delete T.abortController,T.state="completed",_e.data instanceof HTMLImageElement||s.b(_e.data)?Z(_e):_e.data&&Z({data:yield(pe=_e.data,typeof createImageBitmap=="function"?s.f(pe):s.h(pe)),cacheControl:_e.cacheControl,expires:_e.expires})}catch(_e){delete T.abortController,z(_e)}finally{o--,B()}var pe}),B=()=>{const T=(()=>{for(const Y of Object.keys(p))if(p[Y]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Y=o;Y<T&&i.length>0;Y++){const Q=i.shift();Q.abortController.signal.aborted?Y--:b(Q)}},E=(T,Y)=>new Promise((Q,z)=>{const Z=new Image,q=T.url,J=T.credentials;J&&J==="include"?Z.crossOrigin="use-credentials":(J&&J==="same-origin"||!s.d(q))&&(Z.crossOrigin="anonymous"),Y.signal.addEventListener("abort",()=>{Z.src="",z(s.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,Q({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,Y.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=q})}(de||(de={})),de.resetRequestQueue();class le{constructor(i){this._transformRequestFn=i}transformRequest(i,o){return this._transformRequestFn&&this._transformRequestFn(i,o)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function he(_){const i=[];if(typeof _=="string")i.push({id:"default",url:_});else if(_&&_.length>0){const o=[];for(const{id:f,url:p}of _){const b=`${f}${p}`;o.indexOf(b)===-1&&(o.push(b),i.push({id:f,url:p}))}}return i}function ae(_,i,o){try{const f=new URL(_);return f.pathname+=`${i}${o}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class V{constructor(i,o,f,p){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(o,p)}update(i,o,f){const{width:p,height:b}=i,B=!(this.size&&this.size[0]===p&&this.size[1]===b||f),{context:E}=this,{gl:T}=E;if(this.useMipmap=!!(o&&o.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!o||o.premultiply!==!1)),B)this.size=[p,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,i):T.texImage2D(T.TEXTURE_2D,0,this.format,p,b,0,this.format,T.UNSIGNED_BYTE,i.data);else{const{x:Y,y:Q}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?T.texSubImage2D(T.TEXTURE_2D,0,Y,Q,T.RGBA,T.UNSIGNED_BYTE,i):T.texSubImage2D(T.TEXTURE_2D,0,Y,Q,p,b,T.RGBA,T.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,o,f){const{context:p}=this,{gl:b}=p;b.bindTexture(b.TEXTURE_2D,this.texture),f!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,f||i),this.filter=i),o!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function K(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class oe extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:o,promiseResolve:f}of this.requestors)f(this._getImagesForIds(o));this.requestors=[]}}getImage(i){const o=this.images[i];if(o&&!o.data&&o.spriteData){const f=o.spriteData;o.data=new s.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),o.spriteData=null}return o}addImage(i,o){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,o)&&(this.images[i]=o)}_validate(i,o){let f=!0;const p=o.data||o.spriteData;return this._validateStretch(o.stretchX,p&&p.width)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(o.stretchY,p&&p.height)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(o.content,o)||(this.fire(new s.k(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,o){if(!i)return!0;let f=0;for(const p of i){if(p[0]<f||p[1]<p[0]||o<p[1])return!1;f=p[1]}return!0}_validateContent(i,o){if(!i)return!0;if(i.length!==4)return!1;const f=o.spriteData,p=f&&f.width||o.data.width,b=f&&f.height||o.data.height;return!(i[0]<0||p<i[0]||i[1]<0||b<i[1]||i[2]<0||p<i[2]||i[3]<0||b<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,o,f=!0){const p=this.getImage(i);if(f&&(p.data.width!==o.data.width||p.data.height!==o.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=p.version+1,this.images[i]=o,this.updatedImages[i]=!0}removeImage(i){const o=this.images[i];delete this.images[i],delete this.patterns[i],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((o,f)=>{let p=!0;if(!this.isLoaded())for(const b of i)this.images[b]||(p=!1);this.isLoaded()||p?o(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:o})})}_getImagesForIds(i){const o={};for(const f of i){let p=this.getImage(f);p||(this.fire(new s.l("styleimagemissing",{id:f})),p=this.getImage(f)),p?o[f]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:s.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:i,height:o}=this.atlasImage;return{width:i,height:o}}getPattern(i){const o=this.patterns[i],f=this.getImage(i);if(!f)return null;if(o&&o.position.version===f.version)return o.position;if(o)o.position.version=f.version;else{const p={w:f.data.width+2,h:f.data.height+2,x:0,y:0},b=new s.I(p,f);this.patterns[i]={bin:p,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const o=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new V(i,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:o,h:f}=s.p(i),p=this.atlasImage;p.resize({width:o||1,height:f||1});for(const b in this.patterns){const{bin:B}=this.patterns[b],E=B.x+1,T=B.y+1,Y=this.getImage(b).data,Q=Y.width,z=Y.height;s.R.copy(Y,p,{x:0,y:0},{x:E,y:T},{width:Q,height:z}),s.R.copy(Y,p,{x:0,y:z-1},{x:E,y:T-1},{width:Q,height:1}),s.R.copy(Y,p,{x:0,y:0},{x:E,y:T+z},{width:Q,height:1}),s.R.copy(Y,p,{x:Q-1,y:0},{x:E-1,y:T},{width:1,height:z}),s.R.copy(Y,p,{x:0,y:0},{x:E+Q,y:T},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const o of i){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const f=this.getImage(o);f||s.w(`Image with ID: "${o}" was not found`),K(f)&&this.updateImage(o,f)}}}const ce=1e20;function ye(_,i,o,f,p,b,B,E,T){for(let Y=i;Y<i+f;Y++)we(_,o*b+Y,b,p,B,E,T);for(let Y=o;Y<o+p;Y++)we(_,Y*b+i,1,f,B,E,T)}function we(_,i,o,f,p,b,B){b[0]=0,B[0]=-1e20,B[1]=ce,p[0]=_[i];for(let E=1,T=0,Y=0;E<f;E++){p[E]=_[i+E*o];const Q=E*E;do{const z=b[T];Y=(p[E]-p[z]+Q-z*z)/(E-z)/2}while(Y<=B[T]&&--T>-1);T++,b[T]=E,B[T]=Y,B[T+1]=ce}for(let E=0,T=0;E<f;E++){for(;B[T+1]<E;)T++;const Y=b[T],Q=E-Y;_[i+E*o]=p[Y]+Q*Q}}class Ve{constructor(i,o){this.requestManager=i,this.localIdeographFontFamily=o,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return s._(this,void 0,void 0,function*(){const o=[];for(const b in i)for(const B of i[b])o.push(this._getAndCacheGlyphsPromise(b,B));const f=yield Promise.all(o),p={};for(const{stack:b,id:B,glyph:E}of f)p[b]||(p[b]={}),p[b][B]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return p})}_getAndCacheGlyphsPromise(i,o){return s._(this,void 0,void 0,function*(){let f=this.entries[i];f||(f=this.entries[i]={glyphs:{},requests:{},ranges:{}});let p=f.glyphs[o];if(p!==void 0)return{stack:i,id:o,glyph:p};if(p=this._tinySDF(f,i,o),p)return f.glyphs[o]=p,{stack:i,id:o,glyph:p};const b=Math.floor(o/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[b])return{stack:i,id:o,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[b]){const E=Ve.loadGlyphRange(i,b,this.url,this.requestManager);f.requests[b]=E}const B=yield f.requests[b];for(const E in B)this._doesCharSupportLocalGlyph(+E)||(f.glyphs[+E]=B[+E]);return f.ranges[b]=!0,{stack:i,id:o,glyph:B[o]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))||s.u["CJK Unified Ideographs"](i)||s.u["Hangul Syllables"](i)||s.u.Hiragana(i)||s.u.Katakana(i)||s.u["CJK Symbols and Punctuation"](i)||s.u["Halfwidth and Fullwidth Forms"](i))}_tinySDF(i,o,f){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(f))return;let b=i.tinySDF;if(!b){let E="400";/bold/i.test(o)?E="900":/medium/i.test(o)?E="500":/light/i.test(o)&&(E="200"),b=i.tinySDF=new Ve.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:E})}const B=b.draw(String.fromCharCode(f));return{id:f,bitmap:new s.q({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ve.loadGlyphRange=function(_,i,o,f){return s._(this,void 0,void 0,function*(){const p=256*i,b=p+255,B=f.transformRequest(o.replace("{fontstack}",_).replace("{range}",`${p}-${b}`),"Glyphs"),E=yield s.n(B,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${i}, ${p}-${b}`);const T={};for(const Y of s.o(E.data))T[Y.id]=Y;return T})},Ve.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:o=8,cutoff:f=.25,fontFamily:p="sans-serif",fontWeight:b="normal",fontStyle:B="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=o;const E=this.size=_+4*i,T=this._createCanvas(E),Y=this.ctx=T.getContext("2d",{willReadFrequently:!0});Y.font=`${B} ${b} ${_}px ${p}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:o,actualBoundingBoxDescent:f,actualBoundingBoxLeft:p,actualBoundingBoxRight:b}=this.ctx.measureText(_),B=Math.ceil(o),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-p))),T=Math.min(this.size-this.buffer,B+Math.ceil(f)),Y=E+2*this.buffer,Q=T+2*this.buffer,z=Math.max(Y*Q,0),Z=new Uint8ClampedArray(z),q={data:Z,width:Y,height:Q,glyphWidth:E,glyphHeight:T,glyphTop:B,glyphLeft:0,glyphAdvance:i};if(E===0||T===0)return q;const{ctx:J,buffer:me,gridInner:pe,gridOuter:_e}=this;J.clearRect(me,me,E,T),J.fillText(_,me,me+B);const xe=J.getImageData(me,me,E,T);_e.fill(ce,0,z),pe.fill(0,0,z);for(let Me=0;Me<T;Me++)for(let Re=0;Re<E;Re++){const Ee=xe.data[4*(Me*E+Re)+3]/255;if(Ee===0)continue;const Le=(Me+me)*Y+Re+me;if(Ee===1)_e[Le]=0,pe[Le]=ce;else{const Ne=.5-Ee;_e[Le]=Ne>0?Ne*Ne:0,pe[Le]=Ne<0?Ne*Ne:0}}ye(_e,0,0,Y,Q,Y,this.f,this.v,this.z),ye(pe,me,me,E,T,Y,this.f,this.v,this.z);for(let Me=0;Me<z;Me++){const Re=Math.sqrt(_e[Me])-Math.sqrt(pe[Me]);Z[Me]=Math.round(255-255*(Re/this.radius+this.cutoff))}return q}};class ut{constructor(){this.specification=s.v.light.position}possiblyEvaluate(i,o){return s.z(i.expression.evaluate(o))}interpolate(i,o,f){return{x:s.B.number(i.x,o.x,f),y:s.B.number(i.y,o.y,f),z:s.B.number(i.z,o.z,f)}}}let nt;class rt extends s.E{constructor(i){super(),nt=nt||new s.r({anchor:new s.D(s.v.light.anchor),position:new ut,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(nt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,o={}){if(!this._validate(s.t,i,o))for(const f in i){const p=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,o,f){return(!f||f.validate!==!1)&&s.x(this,i.call(s.y,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const ft=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class _t extends s.E{constructor(i){super(),this._transitionable=new s.T(ft),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(i,o={}){if(!this._validate(s.F,i,o)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in i){const p=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,o,f={}){return(f==null?void 0:f.validate)!==!1&&s.x(this,i.call(s.y,s.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class gt{constructor(i,o){this.width=i,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,o){const f=i.join(",")+String(o);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,o)),this.dashEntry[f]}getDashRanges(i,o,f){const p=[];let b=i.length%2==1?-i[i.length-1]*f:0,B=i[0]*f,E=!0;p.push({left:b,right:B,isDash:E,zeroLength:i[0]===0});let T=i[0];for(let Y=1;Y<i.length;Y++){E=!E;const Q=i[Y];b=T*f,T+=Q,B=T*f,p.push({left:b,right:B,isDash:E,zeroLength:Q===0})}return p}addRoundDash(i,o,f){const p=o/2;for(let b=-f;b<=f;b++){const B=this.width*(this.nextRow+f+b);let E=0,T=i[E];for(let Y=0;Y<this.width;Y++){Y/T.right>1&&(T=i[++E]);const Q=Math.abs(Y-T.left),z=Math.abs(Y-T.right),Z=Math.min(Q,z);let q;const J=b/f*(p+1);if(T.isDash){const me=p-Math.abs(J);q=Math.sqrt(Z*Z+me*me)}else q=p-Math.sqrt(Z*Z+J*J);this.data[B+Y]=Math.max(0,Math.min(255,q+128))}}}addRegularDash(i){for(let E=i.length-1;E>=0;--E){const T=i[E],Y=i[E+1];T.zeroLength?i.splice(E,1):Y&&Y.isDash===T.isDash&&(Y.left=T.left,i.splice(E,1))}const o=i[0],f=i[i.length-1];o.isDash===f.isDash&&(o.left=f.left-this.width,f.right=o.right+this.width);const p=this.width*this.nextRow;let b=0,B=i[b];for(let E=0;E<this.width;E++){E/B.right>1&&(B=i[++b]);const T=Math.abs(E-B.left),Y=Math.abs(E-B.right),Q=Math.min(T,Y);this.data[p+E]=Math.max(0,Math.min(255,(B.isDash?Q:-Q)+128))}}addDash(i,o){const f=o?7:0,p=2*f+1;if(this.nextRow+p>this.height)return s.w("LineAtlas out of space"),null;let b=0;for(let E=0;E<i.length;E++)b+=i[E];if(b!==0){const E=this.width/b,T=this.getDashRanges(i,this.width,E);o?this.addRoundDash(T,E,f):this.addRegularDash(T)}const B={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:b};return this.nextRow+=p,this.dirty=!0,B}bind(i){const o=i.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const Je="maplibre_preloaded_worker_pool";class je{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<je.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Je]}numActive(){return Object.keys(this.active).length}}const Qe=Math.floor(U.hardwareConcurrency/2);let pt,$e;function wt(){return pt||(pt=new je),pt}je.workerCount=s.G(globalThis)?Math.max(Math.min(Qe,3),1):1;class Ct{constructor(i,o){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=o;const f=this.workerPool.acquire(o);for(let p=0;p<f.length;p++){const b=new s.H(f[p],o);b.name=`Worker ${p}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,o){const f=[];for(const p of this.actors)f.push(p.sendAsync({type:i,data:o}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,o){for(const f of this.actors)f.registerMessageHandler(i,o)}}function Mt(){return $e||($e=new Ct(wt(),s.J),$e.registerMessageHandler("GR",(_,i,o)=>s.m(i,o))),$e}function Pt(_,i){const o=s.K();return s.L(o,o,[1,1,0]),s.M(o,o,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?s.N(o,o,_.calculatePosMatrix(i.toUnwrapped())):o}function ar(_,i,o,f,p,b,B){var E;const T=function(Z,q,J){if(Z)for(const me of Z){const pe=q[me];if(pe&&pe.source===J&&pe.type==="fill-extrusion")return!0}else for(const me in q){const pe=q[me];if(pe.source===J&&pe.type==="fill-extrusion")return!0}return!1}((E=p==null?void 0:p.layers)!==null&&E!==void 0?E:null,i,_.id),Y=b.maxPitchScaleFactor(),Q=_.tilesIn(f,Y,T);Q.sort(Lt);const z=[];for(const Z of Q)z.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(i,o,_._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,p,b,Y,Pt(_.transform,Z.tileID),B?(q,J)=>B(Z.tileID,q,J):void 0)});return function(Z,q){for(const J in Z)for(const me of Z[J])Ot(me,q);return Z}(function(Z){const q={},J={};for(const me of Z){const pe=me.queryResults,_e=me.wrappedTileID,xe=J[_e]=J[_e]||{};for(const Me in pe){const Re=pe[Me],Ee=xe[Me]=xe[Me]||{},Le=q[Me]=q[Me]||[];for(const Ne of Re)Ee[Ne.featureIndex]||(Ee[Ne.featureIndex]=!0,Le.push(Ne))}}return q}(z),_)}function Lt(_,i){const o=_.tileID,f=i.tileID;return o.overscaledZ-f.overscaledZ||o.canonical.y-f.canonical.y||o.wrap-f.wrap||o.canonical.x-f.canonical.x}function Ot(_,i){const o=_.feature,f=i.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=f}function Qt(_,i,o){return s._(this,void 0,void 0,function*(){let f=_;if(_.url?f=(yield s.j(i.transformRequest(_.url,"Source"),o)).data:yield U.frameAsync(o),!f)return null;const p=s.O(s.e(f,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(p.vectorLayerIds=f.vector_layers.map(b=>b.id)),p})}class St{constructor(i,o){i&&(o?this.setSouthWest(i).setNorthEast(o):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof s.Q?new s.Q(i.lng,i.lat):s.Q.convert(i),this}setSouthWest(i){return this._sw=i instanceof s.Q?new s.Q(i.lng,i.lat):s.Q.convert(i),this}extend(i){const o=this._sw,f=this._ne;let p,b;if(i instanceof s.Q)p=i,b=i;else{if(!(i instanceof St))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(St.convert(i)):this.extend(s.Q.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(s.Q.convert(i)):this;if(p=i._sw,b=i._ne,!p||!b)return this}return o||f?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new s.Q(p.lng,p.lat),this._ne=new s.Q(b.lng,b.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:o,lat:f}=s.Q.convert(i);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&p}static convert(i){return i instanceof St?i:i&&new St(i)}static fromLngLat(i,o=0){const f=360*o/40075017,p=f/Math.cos(Math.PI/180*i.lat);return new St(new s.Q(i.lng-p,i.lat-f),new s.Q(i.lng+p,i.lat+f))}adjustAntiMeridian(){const i=new s.Q(this._sw.lng,this._sw.lat),o=new s.Q(this._ne.lng,this._ne.lat);return new St(i,i.lng>o.lng?new s.Q(o.lng+360,o.lat):o)}}class Zt{constructor(i,o,f){this.bounds=St.convert(this.validateBounds(i)),this.minzoom=o||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const o=Math.pow(2,i.z),f=Math.floor(s.U(this.bounds.getWest())*o),p=Math.floor(s.S(this.bounds.getNorth())*o),b=Math.ceil(s.U(this.bounds.getEast())*o),B=Math.ceil(s.S(this.bounds.getSouth())*o);return i.x>=f&&i.x<b&&i.y>=p&&i.y<B}}class lr extends s.E{constructor(i,o,f,p){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(o,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Qt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(s.e(this,i),i.bounds&&(this.tileBounds=new Zt(i.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new s.k(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(o,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};f.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((b,B)=>{i.reloadPromise={resolve:b,reject:B}})}else i.actor=this.dispatcher.getActor(),p="LT";i.abortController=new AbortController;try{const b=yield i.actor.sendAsync({type:p,data:f},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,b)}catch(b){if(delete i.abortController,i.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,o){if(o&&o.resourceTiming&&(i.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&i.setExpiryData(o),i.loadVectorData(o,this.map.painter),i.reloadPromise){const f=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(f.resolve).catch(f.reject)}}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class dr extends s.E{constructor(i,o,f,p){super(),this.id=i,this.dispatcher=f,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},o),s.e(this,s.O(o,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(i=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Qt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(s.e(this,o),o.bounds&&(this.tileBounds=new Zt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(o){this._tileJSONRequest=null,this.fire(new s.k(o))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return s.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const f=yield de.getImage(this.map._requestManager.transformRequest(o,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&i.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const p=this.map.painter.context,b=p.gl,B=f.data;i.texture=this.map.painter.getTileTexture(B.width),i.texture?i.texture.update(B,{useMipmap:!0}):(i.texture=new V(p,B,b.RGBA,{useMipmap:!0}),i.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(f){if(delete i.abortController,i.aborted)i.state="unloaded";else if(f)throw i.state="errored",f}})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class rr extends dr{constructor(i,o,f,p){super(i,o,f,p),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(o,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const p=yield de.getImage(f,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){const b=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const B=s.b(b)&&s.V()?b:yield this.readImageNow(b),E={type:this.type,uid:i.uid,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const T=yield i.actor.sendAsync({type:"LDT",data:E});i.dem=T,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}readImageNow(i){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){const o=i.width+2,f=i.height+2;try{return new s.R({width:o,height:f},yield s.X(i,-1,-1,o,f))}catch{}}return U.getImageData(i,1)})}_getNeighboringTiles(i){const o=i.canonical,f=Math.pow(2,o.z),p=(o.x-1+f)%f,b=o.x===0?i.wrap-1:i.wrap,B=(o.x+1+f)%f,E=o.x+1===f?i.wrap+1:i.wrap,T={};return T[new s.Y(i.overscaledZ,b,o.z,p,o.y).key]={backfilled:!1},T[new s.Y(i.overscaledZ,E,o.z,B,o.y).key]={backfilled:!1},o.y>0&&(T[new s.Y(i.overscaledZ,b,o.z,p,o.y-1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,i.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,E,o.z,B,o.y-1).key]={backfilled:!1}),o.y+1<f&&(T[new s.Y(i.overscaledZ,b,o.z,p,o.y+1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,i.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},T[new s.Y(i.overscaledZ,E,o.z,B,o.y+1).key]={backfilled:!1}),T}unloadTile(i){return s._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Br extends s.E{constructor(i,o,f,p){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(p),this._data=o.data,this._options=s.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(i){return i*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return s._(this,void 0,void 0,function*(){const i=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}getCoordinatesFromGeometry(i){return i.type==="GeometryCollection"?i.geometries.map(o=>o.coordinates).flat(1/0):i.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const i=new St,o=yield this.getData();let f;switch(o.type){case"FeatureCollection":f=o.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(o.geometry);break;default:f=this.getCoordinatesFromGeometry(o)}if(f.length==0)return i;for(let p=0;p<f.length-1;p+=2)i.extend([f[p],f[p+1]]);return i})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,o,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:o,offset:f}})}_updateWorkerData(i){return s._(this,void 0,void 0,function*(){const o=s.e({type:this.type},this.workerOptions);i?o.dataDiff=i:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(U.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let p=null;f.resourceTiming&&f.resourceTiming[this.id]&&(p=f.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&s.e(b,{resourceTiming:p}),this.fire(new s.l("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(f))}})}loaded(){return this._pendingLoads===0}loadTile(i){return s._(this,void 0,void 0,function*(){const o=i.actor?"RT":"LT";i.actor=this.actor;const f={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};i.abortController=new AbortController;const p=yield this.actor.sendAsync({type:o,data:f},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(p,this.map.painter,o==="RT")})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Dr extends s.E{constructor(i,o,f,p){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=f,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=o}load(i){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield de.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,i&&(this.coordinates=i),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new s.k(o))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const o=i.map(s.$.fromLngLat);var f;return this.tileID=function(p){let b=1/0,B=1/0,E=-1/0,T=-1/0;for(const Z of p)b=Math.min(b,Z.x),B=Math.min(B,Z.y),E=Math.max(E,Z.x),T=Math.max(T,Z.y);const Y=Math.max(E-b,T-B),Q=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),z=Math.pow(2,Q);return new s.a1(Q,Math.floor((b+E)/2*z),Math.floor((B+T)/2*z))}(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,o=i.gl;this.texture||(this.texture=new V(i,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const b=this.tiles[p];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){let o=1/0,f=1/0,p=-1/0,b=-1/0;for(const E of i)o=Math.min(o,E.x),f=Math.min(f,E.y),p=Math.max(p,E.x),b=Math.max(b,E.y);const B={};for(let E=0;E<=s.a0;E++){const T=Math.pow(2,E),Y=Math.floor(o*T),Q=Math.floor(f*T),z=Math.floor(p*T),Z=Math.floor(b*T);B[E]={minTileX:Y,minTileY:Q,maxTileX:z,maxTileY:Z}}return B}}class vi extends Dr{constructor(i,o,f,p){super(i,o,f,p),this.roundZoom=!0,this.type="video",this.options=o}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const o of i.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield s.a2(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new s.k(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const o=this.video.seekable;i<o.start(0)||i>o.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,o=i.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new V(i,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const b=this.tiles[p];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Gr extends Dr{constructor(i,o,f,p){super(i,o,f,p),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(B=>typeof B!="number"))||this.fire(new s.k(new s.a3(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${i}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${i}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,f=o.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new V(o,this.canvas,f.RGBA,{premultiply:!0});let p=!1;for(const b in this.tiles){const B=this.tiles[b];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,p=!0)}p&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Fi={},Kr=_=>{switch(_){case"geojson":return Br;case"image":return Dr;case"raster":return dr;case"raster-dem":return rr;case"vector":return lr;case"video":return vi;case"canvas":return Gr}return Fi[_]},hi="RTLPluginLoaded";class Rr extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Mt()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return s._(this,arguments,void 0,function*(o,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=U.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(hi))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let $r=null;function ui(){return $r||($r=new Rr),$r}class Un{constructor(i,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=s.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const o=i+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,o,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,b){const B={};if(!b)return B;for(const E of p){const T=E.layerIds.map(Y=>b.getLayer(Y)).filter(Boolean);if(T.length!==0){E.layers=T,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(Y=>T.filter(Q=>Q.id===Y)[0]));for(const Y of T)B[Y.id]=E}}return B}(i.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const b=this.buckets[p];if(b instanceof s.a6){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const b=this.buckets[p];if(b instanceof s.a6&&b.hasRTLText){this.hasRTLText=!0,ui().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const b=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const p=this.buckets[f];p.uploadPending()&&p.upload(i)}const o=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new V(i,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new V(i,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,o,f,p,b,B,E,T,Y,Q,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:b,scale:B,tileSize:this.tileSize,pixelPosMatrix:Q,transform:T,params:E,queryPadding:this.queryPadding*Y,getElevation:z},i,o,f):{}}querySourceFeatures(i,o){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const p=f.loadVTLayers(),b=o&&o.sourceLayer?o.sourceLayer:"",B=p._geojsonTileLayer||p[b];if(!B)return;const E=s.a7(o&&o.filter),{z:T,x:Y,y:Q}=this.tileID.canonical,z={z:T,x:Y,y:Q};for(let Z=0;Z<B.length;Z++){const q=B.feature(Z);if(E.needGeometry){const pe=s.a8(q,!0);if(!E.filter(new s.C(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!E.filter(new s.C(this.tileID.overscaledZ),q))continue;const J=f.getId(q,b),me=new s.a9(q,T,Y,Q,J);me.tile=z,i.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const o=this.expirationTime;if(i.cacheControl){const f=s.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let p=!1;if(this.expirationTime>f)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const b=this.expirationTime-o;b?this.expirationTime=f+Math.max(b,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!o.style.hasLayer(p))continue;const b=this.buckets[p],B=b.layers[0].sourceLayer||"_geojsonTileLayer",E=f[B],T=i[B];if(!E||!T||Object.keys(T).length===0)continue;b.update(T,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Y=o&&o.style&&o.style.getLayer(p);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=U.now()+i}setDependencies(i,o){const f={};for(const p of o)f[p]=!0;this.dependencies[i]=f}hasDependency(i,o){for(const f of i){const p=this.dependencies[f];if(p){for(const b of o)if(p[b])return!0}}return!1}}class Xi{constructor(i,o){this.max=i,this.onRemove=o,this.reset()}reset(){for(const i in this.data)for(const o of this.data[i])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(i,o,f){const p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const b={value:o,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},f)),this.data[p].push(b),this.order.push(p),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const o=this.data[i].shift();return o.timeout&&clearTimeout(o.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),o.value}getByKey(i){const o=this.data[i];return o?o[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,o){if(!this.has(i))return this;const f=i.wrapped().key,p=o===void 0?0:this.data[f].indexOf(o),b=this.data[f][p];return this.data[f].splice(p,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(i){const o=[];for(const f in this.data)for(const p of this.data[f])i(p.value)||o.push(p);for(const f of o)this.remove(f.value.tileID,f)}}class Vi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,o,f){const p=String(o);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},s.e(this.stateChanges[i][p],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==p&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(const b in this.state[i][p])f[b]||(this.deletedStates[i][p][b]=null)}else for(const b in f)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][b]===null&&delete this.deletedStates[i][p][b]}removeFeatureState(i,o,f){if(this.deletedStates[i]===null)return;const p=String(o);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&o!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][f]=null);else if(o!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(f in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][f]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,o){const f=String(o),p=s.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][o];if(b===null)return{};for(const B in b)delete p[B]}return p}initializeTileState(i,o){i.setFeatureState(this.state,o)}coalesceChanges(i,o){const f={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const b={};for(const B in this.stateChanges[p])this.state[p][B]||(this.state[p][B]={}),s.e(this.state[p][B],this.stateChanges[p][B]),b[B]=this.state[p][B];f[p]=b}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const b={};if(this.deletedStates[p]===null)for(const B in this.state[p])b[B]={},this.state[p][B]={};else for(const B in this.deletedStates[p]){if(this.deletedStates[p][B]===null)this.state[p][B]={};else for(const E of Object.keys(this.deletedStates[p][B]))delete this.state[p][B][E];b[B]=this.state[p][B]}f[p]=f[p]||{},s.e(f[p],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const p in i)i[p].setFeatureState(f,o)}}const si=89.25;function ni(_,i){const o=s.ae(i.lat,-85.051129,s.af);return new s.P(s.U(i.lng)*_,s.S(o)*_)}function xi(_,i){return new s.$(i.x/_,i.y/_).toLngLat()}function ze(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-_.pitch)),Math.tan(s.ab(si-_.pitch)))}function te(_,i){const o=_.canonical,f=i/s.ac(o.z),p=o.x+Math.pow(2,o.z)*_.wrap,b=s.ad(new Float64Array(16));return s.L(b,b,[p*f,o.y*f,0]),s.M(b,b,[f/s.Z,f/s.Z,1]),b}function ie(_,i,o,f,p){const b=s.$.fromLngLat(_,i),B=p*s.ag(1,_.lat),E=B*Math.cos(s.ab(o)),T=Math.sqrt(B*B-E*E),Y=T*Math.sin(s.ab(-f)),Q=T*Math.cos(s.ab(-f));return new s.$(b.x+Y,b.y+Q,b.z+E)}function ge(_,i,o){const f=i.intersectsFrustum(_);if(!o)return f;const p=i.intersectsPlane(o);return f===0||p===0?0:f===2&&p===2?2:1}function ve(_,i,o){let f=0;const p=(o-i)/10;for(let b=0;b<10;b++)f+=p*Math.pow(Math.cos(i+(b+.5)/10*(o-i)),_);return f}function Ae(_,i){return function(o,f,p,b,B){const E=2*((_-1)/s.ah(Math.cos(s.ab(si-B))/Math.cos(s.ab(si)))-1),T=Math.acos(p/b),Y=2*ve(E-1,0,s.ab(B/2)),Q=Math.min(s.ab(si),T+s.ab(B/2)),z=ve(E-1,Math.min(Q,T-s.ab(B/2)),Q),Z=Math.atan(f/p),q=Math.hypot(f,p);let J=o;return J+=s.ah(b/q/Math.max(.5,Math.cos(s.ab(B/2)))),J+=E*s.ah(Math.cos(Z))/2,J-=s.ah(Math.max(1,z/Y/i))/2,J}}const ke=Ae(9.314,3);function Ge(_,i){const o=(i.roundZoom?Math.round:Math.floor)(_.zoom+s.ah(_.tileSize/i.tileSize));return Math.max(0,o)}function Ie(_,i){const o=_.getCameraFrustum(),f=_.getClippingPlane(),p=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=s.$.fromLngLat(_.center,_.elevation);p.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const B=_.getCoveringTilesDetailsProvider(),E=B.allowVariableZoom(_,i),T=Ge(_,i),Y=i.minzoom||0,Q=i.maxzoom!==void 0?i.maxzoom:_.maxZoom,z=Math.min(Math.max(0,T),Q),Z=Math.pow(2,z),q=[Z*p.x,Z*p.y,0],J=[Z*b.x,Z*b.y,0],me=Math.hypot(b.x-p.x,b.y-p.y),pe=Math.abs(b.z-p.z),_e=Math.hypot(me,pe),xe=Ee=>({zoom:0,x:0,y:0,wrap:Ee,fullyVisible:!1}),Me=[],Re=[];if(_.renderWorldCopies&&B.allowWorldCopies())for(let Ee=1;Ee<=3;Ee++)Me.push(xe(-Ee)),Me.push(xe(Ee));for(Me.push(xe(0));Me.length>0;){const Ee=Me.pop(),Le=Ee.x,Ne=Ee.y;let Ke=Ee.fullyVisible;const We={x:Le,y:Ne,z:Ee.zoom},ot=B.getTileAABB(We,Ee.wrap,_.elevation,i);if(!Ke){const Rt=ge(o,ot,f);if(Rt===0)continue;Ke=Rt===2}const ct=B.distanceToTile2d(p.x,p.y,We,ot);let st=T;E&&(st=(i.calculateTileZoom||ke)(_.zoom+s.ah(_.tileSize/i.tileSize),ct,pe,_e,_.fov)),st=(i.roundZoom?Math.round:Math.floor)(st),st=Math.max(0,st);const Nt=Math.min(st,Q);if(Ee.wrap=B.getWrap(b,We,Ee.wrap),Ee.zoom>=Nt){if(Ee.zoom<Y)continue;const Rt=z-Ee.zoom,bt=q[0]-.5-(Le<<Rt),Wt=q[1]-.5-(Ne<<Rt),Cr=i.reparseOverscaled?Math.max(Ee.zoom,st):Ee.zoom;Re.push({tileID:new s.Y(Ee.zoom===Q?Cr:Ee.zoom,Ee.wrap,Ee.zoom,Le,Ne),distanceSq:s.ai([J[0]-.5-Le,J[1]-.5-Ne]),tileDistanceToCamera:Math.sqrt(bt*bt+Wt*Wt)})}else for(let Rt=0;Rt<4;Rt++)Me.push({zoom:Ee.zoom+1,x:(Le<<1)+Rt%2,y:(Ne<<1)+(Rt>>1),wrap:Ee.wrap,fullyVisible:Ke})}return Re.sort((Ee,Le)=>Ee.distanceSq-Le.distanceSq).map(Ee=>Ee.tileID)}class et extends s.E{constructor(i,o,f){super(),this.id=i,this.dispatcher=f,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,b,B,E)=>{const T=new(Kr(b.type))(p,b,B,E);if(T.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${T.id}`);return T})(i,o,f,this),this._tiles={},this._cache=new Xi(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Vi,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const o=this._tiles[i];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,o,f){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,o,f)}catch(p){i.state="errored",p.status!==404?this._source.fire(new s.k(p,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new s.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const f=this._tiles[o];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Te).map(i=>i.key)}getRenderableIds(i){const o=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&o.push(this._tiles[f]);return i?o.sort((f,p)=>{const b=f.tileID,B=p.tileID,E=new s.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians),T=new s.P(B.canonical.x,B.canonical.y)._rotate(-this.transform.bearingInRadians);return b.overscaledZ-B.overscaledZ||T.y-E.y||T.x-E.x}).map(f=>f.tileID.key):o.map(f=>f.tileID).sort(Te).map(f=>f.key)}hasRenderableParent(i){const o=this.findLoadedParent(i,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(i,o){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(o||!this._tiles[i].holdingForFade())}reload(i){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)(i||this._tiles[o].state!=="errored")&&this._reloadTile(o,"reloading")}}_reloadTile(i,o){return s._(this,void 0,void 0,function*(){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=o),yield this._loadTile(f,i,o))})}_tileLoaded(i,o,f){i.timeAdded=U.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(o,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const o=this.getRenderableIds();for(let p=0;p<o.length;p++){const b=o[p];if(i.neighboringTiles&&i.neighboringTiles[b]){const B=this.getTileByID(b);f(i,B),f(B,i)}}function f(p,b){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let B=b.tileID.canonical.x-p.tileID.canonical.x;const E=b.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),Y=b.tileID.key;B===0&&E===0||Math.abs(E)>1||(Math.abs(B)>1&&(Math.abs(B+T)===1?B+=T:Math.abs(B-T)===1&&(B-=T)),b.dem&&p.dem&&(p.dem.backfillBorder(b.dem,B,E),p.neighboringTiles&&p.neighboringTiles[Y]&&(p.neighboringTiles[Y].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,o,f,p){for(const b in this._tiles){let B=this._tiles[b];if(p[b]||!B.hasData()||B.tileID.overscaledZ<=o||B.tileID.overscaledZ>f)continue;let E=B.tileID;for(;B&&B.tileID.overscaledZ>o+1;){const Y=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[Y.key],B&&B.hasData()&&(E=Y)}let T=E;for(;T.overscaledZ>o;)if(T=T.scaledTo(T.overscaledZ-1),i[T.key]||i[T.canonical.key]){p[E.key]=E;break}}}findLoadedParent(i,o){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=o?f:null}for(let f=i.overscaledZ-1;f>=o;f--){const p=i.scaledTo(f),b=this._getLoadedTile(p);if(b)return b}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const o=this._tiles[i.key];return o&&o.hasData()?o:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const o=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,p=Math.floor(o*f*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(b)}handleWrapJump(i){const o=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,o){const f={};for(const p in this._tiles){const b=this._tiles[p];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+o),f[b.tileID.key]=b}this._tiles=f;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(i,o,f,p,b,B){const E={},T={},Y=Object.keys(i),Q=U.now();for(const z of Y){const Z=i[z],q=this._tiles[z];if(!q||q.fadeEndTime!==0&&q.fadeEndTime<=Q)continue;const J=this.findLoadedParent(Z,o),me=this.findLoadedSibling(Z),pe=J||me||null;pe&&(this._addTile(pe.tileID),E[pe.tileID.key]=pe.tileID),T[z]=Z}this._retainLoadedChildren(T,p,f,i);for(const z in E)i[z]||(this._coveredTiles[z]=!0,i[z]=E[z]);if(B){const z={},Z={};for(const q of b)this._tiles[q.key].hasData()?z[q.key]=q:Z[q.key]=q;for(const q in Z){const J=Z[q].children(this._source.maxzoom);this._tiles[J[0].key]&&this._tiles[J[1].key]&&this._tiles[J[2].key]&&this._tiles[J[3].key]&&(z[J[0].key]=i[J[0].key]=J[0],z[J[1].key]=i[J[1].key]=J[1],z[J[2].key]=i[J[2].key]=J[2],z[J[3].key]=i[J[3].key]=J[3],delete Z[q])}for(const q in Z){const J=Z[q],me=this.findLoadedParent(J,this._source.minzoom),pe=this.findLoadedSibling(J),_e=me||pe||null;if(_e){z[_e.tileID.key]=i[_e.tileID.key]=_e.tileID;for(const xe in z)z[xe].isChildOf(_e.tileID)&&delete z[xe]}}for(const q in this._tiles)z[q]||(this._coveredTiles[q]=!0)}}update(i,o){if(!this._sourceLoaded||this._paused)return;let f;this.transform=i,this.terrain=o,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new s.Y(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(f=Ie(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter(Q=>this._source.hasTile(Q)))):f=[];const p=Ge(i,this._source),b=Math.max(p-et.maxOverzooming,this._source.minzoom),B=Math.max(p+et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const z of f)if(z.canonical.z>this._source.minzoom){const Z=z.scaledTo(z.canonical.z-1);Q[Z.key]=Z;const q=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));Q[q.key]=q}f=f.concat(Object.values(Q))}const E=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=this._updateRetainedTiles(f,p);ne(this._source.type)&&this._updateCoveredAndRetainedTiles(T,b,B,p,f,o);for(const Q in T)this._tiles[Q].clearFadeHold();const Y=s.aj(this._tiles,T);for(const Q of Y){const z=this._tiles[Q];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,o){var f;const p={},b={},B=Math.max(o-et.maxOverzooming,this._source.minzoom),E=Math.max(o+et.maxUnderzooming,this._source.minzoom),T={};for(const Y of i){const Q=this._addTile(Y);p[Y.key]=Y,Q.hasData()||o<this._source.maxzoom&&(T[Y.key]=Y)}this._retainLoadedChildren(T,o,E,p);for(const Y of i){let Q=this._tiles[Y.key];if(Q.hasData())continue;if(o+1>this._source.maxzoom){const Z=Y.children(this._source.maxzoom)[0],q=this.getTile(Z);if(q&&q.hasData()){p[Z.key]=Z;continue}}else{const Z=Y.children(this._source.maxzoom);if(p[Z[0].key]&&p[Z[1].key]&&p[Z[2].key]&&p[Z[3].key])continue}let z=Q.wasRequested();for(let Z=Y.overscaledZ-1;Z>=B;--Z){const q=Y.scaledTo(Z);if(b[q.key])break;if(b[q.key]=!0,Q=this.getTile(q),!Q&&z&&(Q=this._addTile(q)),Q){const J=Q.hasData();if((J||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||z)&&(p[q.key]=q),z=Q.wasRequested(),J)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const o=[];let f,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){f=this._loadedParentTiles[p.key];break}o.push(p.key);const b=p.scaledTo(p.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;p=b}for(const b of o)this._loadedParentTiles[b]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const o=this._tiles[i].tileID,f=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=f}}_addTile(i){let o=this._tiles[i.key];if(o)return o;o=this._cache.getAndRemove(i),o&&(this._setTileReloadTimer(i.key,o),o.tileID=i,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,o)));const f=o;return o||(o=new Un(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(o,i.key,o.state)),o.uses++,this._tiles[i.key]=o,f||this._source.fire(new s.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(i,o){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=o.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const o=this._tiles[i];o&&(o.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(i){const o=i.sourceDataType;i.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&o==="content"&&(this.reload(i.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,o,f){const p=[],b=this.transform;if(!b)return p;const B=f?b.getCameraQueryGeometry(i):i,E=i.map(J=>b.screenPointToMercatorCoordinate(J,this.terrain)),T=B.map(J=>b.screenPointToMercatorCoordinate(J,this.terrain)),Y=this.getIds();let Q=1/0,z=1/0,Z=-1/0,q=-1/0;for(const J of T)Q=Math.min(Q,J.x),z=Math.min(z,J.y),Z=Math.max(Z,J.x),q=Math.max(q,J.y);for(let J=0;J<Y.length;J++){const me=this._tiles[Y[J]];if(me.holdingForFade())continue;const pe=b.getCoveringTilesDetailsProvider().allowWorldCopies()?me.tileID:me.tileID.unwrapTo(0),_e=Math.pow(2,b.zoom-me.tileID.overscaledZ),xe=o*me.queryPadding*s.Z/me.tileSize/_e,Me=[pe.getTilePoint(new s.$(Q,z)),pe.getTilePoint(new s.$(Z,q))];if(Me[0].x-xe<s.Z&&Me[0].y-xe<s.Z&&Me[1].x+xe>=0&&Me[1].y+xe>=0){const Re=E.map(Le=>pe.getTilePoint(Le)),Ee=T.map(Le=>pe.getTilePoint(Le));p.push({tile:me,tileID:pe,queryGeometry:Re,cameraQueryGeometry:Ee,scale:_e})}}return p}getVisibleCoordinates(i){const o=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(ne(this._source.type)){const i=U.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=i)return!0}return!1}setFeatureState(i,o,f){this._state.updateState(i=i||"_geojsonTileLayer",o,f)}removeFeatureState(i,o,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",o,f)}getFeatureState(i,o){return this._state.getState(i=i||"_geojsonTileLayer",o)}setDependencies(i,o,f){const p=this._tiles[i];p&&p.setDependencies(o,f)}reloadTilesForDependencies(i,o){for(const f in this._tiles)this._tiles[f].hasDependency(i,o)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,o))}}function Te(_,i){const o=Math.abs(2*_.wrap)-+(_.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||f-o||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function ne(_){return _==="raster"||_==="image"||_==="video"}et.maxOverzooming=10,et.maxUnderzooming=3;class Se{constructor(i,o){this.reset(i,o)}reset(i,o){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.ae(i,0,1);let o=1,f=this._distances[o];const p=i*this.paddedLength+this.padding;for(;f<p&&o<this._distances.length;)f=this._distances[++o];const b=o-1,B=this._distances[b],E=f-B,T=E>0?(p-B)/E:0;return this.points[b].mult(1-T).add(this.points[o].mult(T))}}function Ue(_,i){let o=!0;return _==="always"||_!=="never"&&i!=="never"||(o=!1),o}class He{constructor(i,o,f){const p=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(o/f);for(let B=0;B<this.xCellCount*this.yCellCount;B++)p.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=o,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,o,f,p,b){this._forEachCell(o,f,p,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(o),this.bboxes.push(f),this.bboxes.push(p),this.bboxes.push(b)}insertCircle(i,o,f,p){this._forEachCell(o-p,f-p,o+p,f+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(o),this.circles.push(f),this.circles.push(p)}_insertBoxCell(i,o,f,p,b,B){this.boxCells[b].push(B)}_insertCircleCell(i,o,f,p,b,B){this.circleCells[b].push(B)}_query(i,o,f,p,b,B,E){if(f<0||i>this.width||p<0||o>this.height)return[];const T=[];if(i<=0&&o<=0&&this.width<=f&&this.height<=p){if(b)return[{key:null,x1:i,y1:o,x2:f,y2:p}];for(let Y=0;Y<this.boxKeys.length;Y++)T.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(let Y=0;Y<this.circleKeys.length;Y++){const Q=this.circles[3*Y],z=this.circles[3*Y+1],Z=this.circles[3*Y+2];T.push({key:this.circleKeys[Y],x1:Q-Z,y1:z-Z,x2:Q+Z,y2:z+Z})}}else this._forEachCell(i,o,f,p,this._queryCell,T,{hitTest:b,overlapMode:B,seenUids:{box:{},circle:{}}},E);return T}query(i,o,f,p){return this._query(i,o,f,p,!1,null)}hitTest(i,o,f,p,b,B){return this._query(i,o,f,p,!0,b,B).length>0}hitTestCircle(i,o,f,p,b){const B=i-f,E=i+f,T=o-f,Y=o+f;if(E<0||B>this.width||Y<0||T>this.height)return!1;const Q=[];return this._forEachCell(B,T,E,Y,this._queryCellCircle,Q,{hitTest:!0,overlapMode:p,circle:{x:i,y:o,radius:f},seenUids:{box:{},circle:{}}},b),Q.length>0}_queryCell(i,o,f,p,b,B,E,T){const{seenUids:Y,hitTest:Q,overlapMode:z}=E,Z=this.boxCells[b];if(Z!==null){const J=this.bboxes;for(const me of Z)if(!Y.box[me]){Y.box[me]=!0;const pe=4*me,_e=this.boxKeys[me];if(i<=J[pe+2]&&o<=J[pe+3]&&f>=J[pe+0]&&p>=J[pe+1]&&(!T||T(_e))&&(!Q||!Ue(z,_e.overlapMode))&&(B.push({key:_e,x1:J[pe],y1:J[pe+1],x2:J[pe+2],y2:J[pe+3]}),Q))return!0}}const q=this.circleCells[b];if(q!==null){const J=this.circles;for(const me of q)if(!Y.circle[me]){Y.circle[me]=!0;const pe=3*me,_e=this.circleKeys[me];if(this._circleAndRectCollide(J[pe],J[pe+1],J[pe+2],i,o,f,p)&&(!T||T(_e))&&(!Q||!Ue(z,_e.overlapMode))){const xe=J[pe],Me=J[pe+1],Re=J[pe+2];if(B.push({key:_e,x1:xe-Re,y1:Me-Re,x2:xe+Re,y2:Me+Re}),Q)return!0}}}return!1}_queryCellCircle(i,o,f,p,b,B,E,T){const{circle:Y,seenUids:Q,overlapMode:z}=E,Z=this.boxCells[b];if(Z!==null){const J=this.bboxes;for(const me of Z)if(!Q.box[me]){Q.box[me]=!0;const pe=4*me,_e=this.boxKeys[me];if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,J[pe+0],J[pe+1],J[pe+2],J[pe+3])&&(!T||T(_e))&&!Ue(z,_e.overlapMode))return B.push(!0),!0}}const q=this.circleCells[b];if(q!==null){const J=this.circles;for(const me of q)if(!Q.circle[me]){Q.circle[me]=!0;const pe=3*me,_e=this.circleKeys[me];if(this._circlesCollide(J[pe],J[pe+1],J[pe+2],Y.x,Y.y,Y.radius)&&(!T||T(_e))&&!Ue(z,_e.overlapMode))return B.push(!0),!0}}}_forEachCell(i,o,f,p,b,B,E,T){const Y=this._convertToXCellCoord(i),Q=this._convertToYCellCoord(o),z=this._convertToXCellCoord(f),Z=this._convertToYCellCoord(p);for(let q=Y;q<=z;q++)for(let J=Q;J<=Z;J++)if(b.call(this,i,o,f,p,this.xCellCount*J+q,B,E,T))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,o,f,p,b,B){const E=p-i,T=b-o,Y=f+B;return Y*Y>E*E+T*T}_circleAndRectCollide(i,o,f,p,b,B,E){const T=(B-p)/2,Y=Math.abs(i-(p+T));if(Y>T+f)return!1;const Q=(E-b)/2,z=Math.abs(o-(b+Q));if(z>Q+f)return!1;if(Y<=T||z<=Q)return!0;const Z=Y-T,q=z-Q;return Z*Z+q*q<=f*f}}function At(_,i,o){const f=s.K();if(!_){const{vecSouth:z,vecEast:Z}=Oe(i),q=x();q[0]=Z[0],q[1]=Z[1],q[2]=z[0],q[3]=z[1],p=q,(Q=(B=(b=q)[0])*(Y=b[3])-(T=b[2])*(E=b[1]))&&(p[0]=Y*(Q=1/Q),p[1]=-E*Q,p[2]=-T*Q,p[3]=B*Q),f[0]=q[0],f[1]=q[1],f[4]=q[2],f[5]=q[3]}var p,b,B,E,T,Y,Q;return s.M(f,f,[1/o,1/o,1]),f}function xt(_,i,o,f){if(_){const p=s.K();if(!i){const{vecSouth:b,vecEast:B}=Oe(o);p[0]=B[0],p[1]=B[1],p[4]=b[0],p[5]=b[1]}return s.M(p,p,[f,f,1]),p}return o.pixelsToClipSpaceMatrix}function Oe(_){const i=Math.cos(_.rollInRadians),o=Math.sin(_.rollInRadians),f=Math.cos(_.pitchInRadians),p=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),B=s.ao();B[0]=-p*f*o-b*i,B[1]=-b*f*o+p*i;const E=s.ap(B);E<1e-9?s.aq(B):s.ar(B,B,1/E);const T=s.ao();T[0]=p*f*i-b*o,T[1]=b*f*i+p*o;const Y=s.ap(T);return Y<1e-9?s.aq(T):s.ar(T,T,1/Y),{vecEast:T,vecSouth:B}}function mt(_,i,o,f){let p;f?(p=[_,i,f(_,i),1],s.at(p,p,o)):(p=[_,i,0,1],Ur(p,p,o));const b=p[3];return{point:new s.P(p[0]/b,p[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function Kt(_,i){return .5+_/i*.5}function qt(_,i){return _.x>=-i[0]&&_.x<=i[0]&&_.y>=-i[1]&&_.y<=i[1]}function tr(_,i,o,f,p,b,B,E,T,Y,Q,z,Z){const q=o?_.textSizeData:_.iconSizeData,J=s.ak(q,i.transform.zoom),me=[256/i.width*2+1,256/i.height*2+1],pe=o?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;pe.clear();const _e=_.lineVertexArray,xe=o?_.text.placedSymbolArray:_.icon.placedSymbolArray,Me=i.transform.width/i.transform.height;let Re=!1;for(let Ee=0;Ee<xe.length;Ee++){const Le=xe.get(Ee);if(Le.hidden||Le.writingMode===s.al.vertical&&!Re){Ir(Le.numGlyphs,pe);continue}Re=!1;const Ne=new s.P(Le.anchorX,Le.anchorY),Ke={getElevation:Z,pitchedLabelPlaneMatrix:f,lineVertexArray:_e,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:Ne,unwrappedTileID:T,width:Y,height:Q,translation:z},We=Ia(Le.anchorX,Le.anchorY,Ke);if(!qt(We.point,me)){Ir(Le.numGlyphs,pe);continue}const ot=Kt(i.transform.cameraToCenterDistance,We.signedDistanceFromCamera),ct=s.am(q,J,Le),st=b?ct*i.transform.getPitchedTextCorrection(Le.anchorX,Le.anchorY,T)/ot:ct*ot,Nt=zt({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:p,symbol:Le,fontSize:st,flip:!1,keepUpright:B,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Me,rotateToLine:E});Re=Nt.useVertical,(Nt.notEnoughRoom||Re||Nt.needsFlipping&&zt({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:p,symbol:Le,fontSize:st,flip:!0,keepUpright:B,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Me,rotateToLine:E}).notEnoughRoom)&&Ir(Le.numGlyphs,pe)}o?_.text.dynamicLayoutVertexBuffer.updateData(pe):_.icon.dynamicLayoutVertexBuffer.updateData(pe)}function tt(_,i,o,f,p,b,B,E){const T=b.glyphStartIndex+b.numGlyphs,Y=b.lineStartIndex,Q=b.lineStartIndex+b.lineLength,z=i.getoffsetX(b.glyphStartIndex),Z=i.getoffsetX(T-1),q=Et(_*z,o,f,p,b.segment,Y,Q,E,B);if(!q)return null;const J=Et(_*Z,o,f,p,b.segment,Y,Q,E,B);return J?E.projectionCache.anyProjectionOccluded?null:{first:q,last:J}:null}function Ft(_,i,o,f){return _===s.al.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*f?{useVertical:!0}:(_===s.al.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function zt(_){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:o,symbol:f,fontSize:p,flip:b,keepUpright:B,glyphOffsetArray:E,dynamicLayoutVertexArray:T,aspectRatio:Y,rotateToLine:Q}=_,z=p/24,Z=f.lineOffsetX*z,q=f.lineOffsetY*z;let J;if(f.numGlyphs>1){const me=f.glyphStartIndex+f.numGlyphs,pe=f.lineStartIndex,_e=f.lineStartIndex+f.lineLength,xe=tt(z,E,Z,q,b,f,Q,i);if(!xe)return{notEnoughRoom:!0};const Me=Vt(xe.first.point.x,xe.first.point.y,i,o),Re=Vt(xe.last.point.x,xe.last.point.y,i,o);if(B&&!b){const Ee=Ft(f.writingMode,Me,Re,Y);if(Ee)return Ee}J=[xe.first];for(let Ee=f.glyphStartIndex+1;Ee<me-1;Ee++)J.push(Et(z*E.getoffsetX(Ee),Z,q,b,f.segment,pe,_e,i,Q));J.push(xe.last)}else{if(B&&!b){const pe=yr(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,_e=f.lineStartIndex+f.segment+1,xe=new s.P(i.lineVertexArray.getx(_e),i.lineVertexArray.gety(_e)),Me=yr(xe.x,xe.y,i),Re=Me.signedDistanceFromCamera>0?Me.point:ti(i.tileAnchorPoint,xe,pe,1,i),Ee=Vt(pe.x,pe.y,i,o),Le=Vt(Re.x,Re.y,i,o),Ne=Ft(f.writingMode,Ee,Le,Y);if(Ne)return Ne}const me=Et(z*E.getoffsetX(f.glyphStartIndex),Z,q,b,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,i,Q);if(!me||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};J=[me]}for(const me of J)s.as(T,me.point,me.angle);return{}}function ti(_,i,o,f,p){const b=_.add(_.sub(i)._unit()),B=yr(b.x,b.y,p).point,E=o.sub(B);return o.add(E._mult(f/E.mag()))}function oi(_,i,o){const f=i.projectionCache;if(f.projections[_])return f.projections[_];const p=new s.P(i.lineVertexArray.getx(_),i.lineVertexArray.gety(_)),b=yr(p.x,p.y,i);if(b.signedDistanceFromCamera>0)return f.projections[_]=b.point,f.anyProjectionOccluded=f.anyProjectionOccluded||b.isOccluded,b.point;const B=_-o.direction;return ti(o.distanceFromAnchor===0?i.tileAnchorPoint:new s.P(i.lineVertexArray.getx(B),i.lineVertexArray.gety(B)),p,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,i)}function yr(_,i,o){const f=_+o.translation[0],p=i+o.translation[1];let b;return o.pitchWithMap?(b=mt(f,p,o.pitchedLabelPlaneMatrix,o.getElevation),b.isOccluded=!1):(b=o.transform.projectTileCoordinates(f,p,o.unwrappedTileID,o.getElevation),b.point.x=(.5*b.point.x+.5)*o.width,b.point.y=(.5*-b.point.y+.5)*o.height),b}function Vt(_,i,o,f){if(o.pitchWithMap){const p=[_,i,0,1];return s.at(p,p,f),o.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],o.unwrappedTileID,o.getElevation).point}return{x:_/o.width*2-1,y:i/o.height*2-1}}function Ia(_,i,o){return o.transform.projectTileCoordinates(_,i,o.unwrappedTileID,o.getElevation)}function Ht(_,i,o){return _._unit()._perp()._mult(i*o)}function De(_,i,o,f,p,b,B,E,T){if(E.projectionCache.offsets[_])return E.projectionCache.offsets[_];const Y=o.add(i);if(_+T.direction<f||_+T.direction>=p)return E.projectionCache.offsets[_]=Y,Y;const Q=oi(_+T.direction,E,T),z=Ht(Q.sub(o),B,T.direction),Z=o.add(z),q=Q.add(z);return E.projectionCache.offsets[_]=s.au(b,Y,Z,q)||Y,E.projectionCache.offsets[_]}function Et(_,i,o,f,p,b,B,E,T){const Y=f?_-i:_+i;let Q=Y>0?1:-1,z=0;f&&(Q*=-1,z=Math.PI),Q<0&&(z+=Math.PI);let Z,q=Q>0?b+p:b+p+1;E.projectionCache.cachedAnchorPoint?Z=E.projectionCache.cachedAnchorPoint:(Z=yr(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=Z);let J,me,pe=Z,_e=Z,xe=0,Me=0;const Re=Math.abs(Y),Ee=[];let Le;for(;xe+Me<=Re;){if(q+=Q,q<b||q>=B)return null;xe+=Me,_e=pe,me=J;const We={absOffsetX:Re,direction:Q,distanceFromAnchor:xe,previousVertex:_e};if(pe=oi(q,E,We),o===0)Ee.push(_e),Le=pe.sub(_e);else{let ot;const ct=pe.sub(_e);ot=ct.mag()===0?Ht(oi(q+Q,E,We).sub(pe),o,Q):Ht(ct,o,Q),me||(me=_e.add(ot)),J=De(q,ot,pe,b,B,me,o,E,We),Ee.push(me),Le=J.sub(me)}Me=Le.mag()}const Ne=Le._mult((Re-xe)/Me)._add(me||_e),Ke=z+Math.atan2(pe.y-_e.y,pe.x-_e.x);return Ee.push(Ne),{point:Ne,angle:T?Ke:0,path:Ee}}const nr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ir(_,i){for(let o=0;o<_;o++){const f=i.length;i.resize(f+4),i.float32.set(nr,3*f)}}function Ur(_,i,o){const f=i[0],p=i[1];return _[0]=o[0]*f+o[4]*p+o[12],_[1]=o[1]*f+o[5]*p+o[13],_[3]=o[3]*f+o[7]*p+o[15],_}const zr=100;class Gi{constructor(i,o=new He(i.width+200,i.height+200,25),f=new He(i.width+200,i.height+200,25)){this.transform=i,this.grid=o,this.ignoredGrid=f,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+zr,this.screenBottomBoundary=i.height+zr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,o,f,p,b,B,E,T,Y,Q,z,Z){const q=this.projectAndGetPerspectiveRatio(i.anchorPointX+T[0],i.anchorPointY+T[1],b,Q,Z),J=f*q.perspectiveRatio;let me;if(B||E)me=this._projectCollisionBox(i,J,p,b,B,E,T,q,Q,z,Z);else{const Le=q.x+(z?z.x*J:0),Ne=q.y+(z?z.y*J:0);me={allPointsOccluded:!1,box:[Le+i.x1*J,Ne+i.y1*J,Le+i.x2*J,Ne+i.y2*J]}}const[pe,_e,xe,Me]=me.box,Re=B?me.allPointsOccluded:q.isOccluded;let Ee=Re;return Ee||(Ee=q.perspectiveRatio<this.perspectiveRatioCutoff),Ee||(Ee=!this.isInsideGrid(pe,_e,xe,Me)),Ee||o!=="always"&&this.grid.hitTest(pe,_e,xe,Me,o,Y)?{box:[pe,_e,xe,Me],placeable:!1,offscreen:!1,occluded:Re}:{box:[pe,_e,xe,Me],placeable:!0,offscreen:this.isOffscreen(pe,_e,xe,Me),occluded:Re}}placeCollisionCircles(i,o,f,p,b,B,E,T,Y,Q,z,Z,q,J){const me=[],pe=new s.P(o.anchorX,o.anchorY),_e=this.getPerspectiveRatio(pe.x,pe.y,B,J),xe=(Y?b*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,B)/_e:b*_e)/s.ay,Me={getElevation:J,pitchedLabelPlaneMatrix:E,lineVertexArray:f,pitchWithMap:Y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:B,width:this.transform.width,height:this.transform.height,translation:q},Re=tt(xe,p,o.lineOffsetX*xe,o.lineOffsetY*xe,!1,o,!1,Me);let Ee=!1,Le=!1,Ne=!0;if(Re){const Ke=.5*z*_e+Z,We=new s.P(-100,-100),ot=new s.P(this.screenRightBoundary,this.screenBottomBoundary),ct=new Se,st=Re.first,Nt=Re.last;let Rt=[];for(let Cr=st.path.length-1;Cr>=1;Cr--)Rt.push(st.path[Cr]);for(let Cr=1;Cr<Nt.path.length;Cr++)Rt.push(Nt.path[Cr]);const bt=2.5*Ke;if(Y){const Cr=this.projectPathToScreenSpace(Rt,Me);Rt=Cr.some(pr=>pr.signedDistanceFromCamera<=0)?[]:Cr.map(pr=>pr.point)}let Wt=[];if(Rt.length>0){const Cr=Rt[0].clone(),pr=Rt[0].clone();for(let wi=1;wi<Rt.length;wi++)Cr.x=Math.min(Cr.x,Rt[wi].x),Cr.y=Math.min(Cr.y,Rt[wi].y),pr.x=Math.max(pr.x,Rt[wi].x),pr.y=Math.max(pr.y,Rt[wi].y);Wt=Cr.x>=We.x&&pr.x<=ot.x&&Cr.y>=We.y&&pr.y<=ot.y?[Rt]:pr.x<We.x||Cr.x>ot.x||pr.y<We.y||Cr.y>ot.y?[]:s.av([Rt],We.x,We.y,ot.x,ot.y)}for(const Cr of Wt){ct.reset(Cr,.25*Ke);let pr=0;pr=ct.length<=.5*Ke?1:Math.ceil(ct.paddedLength/bt)+1;for(let wi=0;wi<pr;wi++){const ri=wi/Math.max(pr-1,1),Bi=ct.lerp(ri),pi=Bi.x+zr,ii=Bi.y+zr;me.push(pi,ii,Ke,0);const ei=pi-Ke,on=ii-Ke,Wi=pi+Ke,yn=ii+Ke;if(Ne=Ne&&this.isOffscreen(ei,on,Wi,yn),Le=Le||this.isInsideGrid(ei,on,Wi,yn),i!=="always"&&this.grid.hitTestCircle(pi,ii,Ke,i,Q)&&(Ee=!0,!T))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!T&&Ee||!Le||_e<this.perspectiveRatioCutoff?[]:me,offscreen:Ne,collisionDetected:Ee}}projectPathToScreenSpace(i,o){const f=function(p,b){const B=s.K();return s.an(B,b.pitchedLabelPlaneMatrix),p.map(E=>{const T=mt(E.x,E.y,B,b.getElevation),Y=b.transform.projectTileCoordinates(T.point.x,T.point.y,b.unwrappedTileID,b.getElevation);return Y.point.x=(.5*Y.point.x+.5)*b.width,Y.point.y=(.5*-Y.point.y+.5)*b.height,Y})}(i,o);return function(p){let b=0,B=0,E=0,T=0;for(let Y=0;Y<p.length;Y++)p[Y].isOccluded?(E=Y+1,T=0):(T++,T>B&&(B=T,b=E));return p.slice(b,b+B)}(f)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let f=1/0,p=1/0,b=-1/0,B=-1/0;for(const Q of i){const z=new s.P(Q.x+zr,Q.y+zr);f=Math.min(f,z.x),p=Math.min(p,z.y),b=Math.max(b,z.x),B=Math.max(B,z.y),o.push(z)}const E=this.grid.query(f,p,b,B).concat(this.ignoredGrid.query(f,p,b,B)),T={},Y={};for(const Q of E){const z=Q.key;if(T[z.bucketInstanceId]===void 0&&(T[z.bucketInstanceId]={}),T[z.bucketInstanceId][z.featureIndex])continue;const Z=[new s.P(Q.x1,Q.y1),new s.P(Q.x2,Q.y1),new s.P(Q.x2,Q.y2),new s.P(Q.x1,Q.y2)];s.aw(o,Z)&&(T[z.bucketInstanceId][z.featureIndex]=!0,Y[z.bucketInstanceId]===void 0&&(Y[z.bucketInstanceId]=[]),Y[z.bucketInstanceId].push(z.featureIndex))}return Y}insertCollisionBox(i,o,f,p,b,B){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:b,collisionGroupID:B,overlapMode:o},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,o,f,p,b,B){const E=f?this.ignoredGrid:this.grid,T={bucketInstanceId:p,featureIndex:b,collisionGroupID:B,overlapMode:o};for(let Y=0;Y<i.length;Y+=4)E.insertCircle(T,i[Y],i[Y+1],i[Y+2])}projectAndGetPerspectiveRatio(i,o,f,p,b){if(b){let B;p?(B=[i,o,p(i,o),1],s.at(B,B,b)):(B=[i,o,0,1],Ur(B,B,b));const E=B[3];return{x:(B[0]/E+1)/2*this.transform.width+zr,y:(-B[1]/E+1)/2*this.transform.height+zr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}{const B=this.transform.projectTileCoordinates(i,o,f,p);return{x:(B.point.x+1)/2*this.transform.width+zr,y:(1-B.point.y)/2*this.transform.height+zr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/B.signedDistanceFromCamera*.5,isOccluded:B.isOccluded,signedDistanceFromCamera:B.signedDistanceFromCamera}}}getPerspectiveRatio(i,o,f,p){const b=this.transform.projectTileCoordinates(i,o,f,p);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(i,o,f,p){return f<zr||i>=this.screenRightBoundary||p<zr||o>this.screenBottomBoundary}isInsideGrid(i,o,f,p){return f>=0&&i<this.gridRightBoundary&&p>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const i=s.ad([]);return s.L(i,i,[-100,-100,0]),i}_projectCollisionBox(i,o,f,p,b,B,E,T,Y,Q,z){let Z=1,q=0,J=0,me=1;const pe=i.anchorPointX+E[0],_e=i.anchorPointY+E[1];if(B&&!b){const Rt=this.projectAndGetPerspectiveRatio(pe+1,_e,p,Y,z),bt=Rt.x-T.x,Wt=Math.atan((Rt.y-T.y)/bt)+(bt<0?Math.PI:0),Cr=Math.sin(Wt),pr=Math.cos(Wt);Z=pr,q=Cr,J=-Cr,me=pr}else if(!B&&b){const Rt=Oe(this.transform);Z=Rt.vecEast[0],q=Rt.vecEast[1],J=Rt.vecSouth[0],me=Rt.vecSouth[1]}let xe=T.x,Me=T.y,Re=o;b&&(xe=pe,Me=_e,Re=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),Re*=this.transform.getPitchedTextCorrection(pe,_e,p),Q||(Re*=s.ae(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Q&&(xe+=Z*Q.x*Re+J*Q.y*Re,Me+=q*Q.x*Re+me*Q.y*Re);const Ee=i.x1*Re,Le=i.x2*Re,Ne=(Ee+Le)/2,Ke=i.y1*Re,We=i.y2*Re,ot=(Ke+We)/2,ct=[{offsetX:Ee,offsetY:Ke},{offsetX:Ne,offsetY:Ke},{offsetX:Le,offsetY:Ke},{offsetX:Le,offsetY:ot},{offsetX:Le,offsetY:We},{offsetX:Ne,offsetY:We},{offsetX:Ee,offsetY:We},{offsetX:Ee,offsetY:ot}];let st=[];for(const{offsetX:Rt,offsetY:bt}of ct)st.push(new s.P(xe+Z*Rt+J*bt,Me+q*Rt+me*bt));let Nt=!1;if(b){const Rt=st.map(bt=>this.projectAndGetPerspectiveRatio(bt.x,bt.y,p,Y,z));Nt=Rt.some(bt=>!bt.isOccluded),st=Rt.map(bt=>new s.P(bt.x,bt.y))}else Nt=!0;return{box:s.ax(st),allPointsOccluded:!Nt}}}class zn{constructor(i,o,f,p){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?o:-o))):p&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class _n{constructor(i,o,f,p,b){this.text=new zn(i?i.text:null,o,f,b),this.icon=new zn(i?i.icon:null,o,p,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ti{constructor(i,o,f){this.text=i,this.icon=o,this.skipFade=f}}class iA{constructor(i,o,f,p,b){this.bucketInstanceId=i,this.featureIndex=o,this.sourceLayerIndex=f,this.bucketIndex=p,this.tileID=b}}class nA{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const o=++this.maxGroupID;this.collisionGroups[i]={ID:o,predicate:f=>f.collisionGroupID===o}}return this.collisionGroups[i]}}function cu(_,i,o,f,p){const{horizontalAlign:b,verticalAlign:B}=s.aE(_);return new s.P(-(b-.5)*i+f[0]*p,-(B-.5)*o+f[1]*p)}class el{constructor(i,o,f,p,b){this.transform=i.clone(),this.terrain=o,this.collisionIndex=new Gi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new nA(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const o=this.terrain;return o?(f,p)=>o.getElevation(i,f,p):null}getBucketParts(i,o,f,p){const b=f.getBucket(o),B=f.latestFeatureIndex;if(!b||!B||o.id!==b.layerIds[0])return;const E=f.collisionBoxArray,T=b.layers[0].layout,Y=b.layers[0].paint,Q=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),z=f.tileSize/s.Z,Z=f.tileID.toUnwrapped(),q=T.get("text-rotation-alignment")==="map",J=s.az(f,1,this.transform.zoom),me=s.aA(this.collisionIndex.transform,f,Y.get("text-translate"),Y.get("text-translate-anchor")),pe=s.aA(this.collisionIndex.transform,f,Y.get("icon-translate"),Y.get("icon-translate-anchor")),_e=At(q,this.transform,J);this.retainedQueryData[b.bucketInstanceId]=new iA(b.bucketInstanceId,B,b.sourceLayerIndex,b.index,f.tileID);const xe={bucket:b,layout:T,translationText:me,translationIcon:pe,unwrappedTileID:Z,pitchedLabelPlaneMatrix:_e,scale:Q,textPixelRatio:z,holdingForFade:f.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:s.ak(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(p)for(const Me of b.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:Ee,symbolInstanceEnd:Le}=Me;i.push({sortKey:Re,symbolInstanceStart:Ee,symbolInstanceEnd:Le,parameters:xe})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(i,o,f,p,b,B,E,T,Y,Q,z,Z,q,J,me,pe,_e,xe,Me,Re){const Ee=s.aB[i.textAnchor],Le=[i.textOffset0,i.textOffset1],Ne=cu(Ee,f,p,Le,b),Ke=this.collisionIndex.placeCollisionBox(o,Z,T,Y,Q,E,B,pe,z.predicate,Me,Ne,Re);if((!xe||this.collisionIndex.placeCollisionBox(xe,Z,T,Y,Q,E,B,_e,z.predicate,Me,Ne,Re).placeable)&&Ke.placeable){let We;if(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(We=this.prevPlacement.variableOffsets[q.crossTileID].anchor),q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[q.crossTileID]={textOffset:Le,width:f,height:p,anchor:Ee,textBoxScale:b,prevAnchor:We},this.markUsedJustification(J,Ee,q,me),J.allowVerticalPlacement&&(this.markUsedOrientation(J,me,q),this.placedOrientations[q.crossTileID]=me),{shift:Ne,placedGlyphBoxes:Ke}}}placeLayerBucketPart(i,o,f){const{bucket:p,layout:b,translationText:B,translationIcon:E,unwrappedTileID:T,pitchedLabelPlaneMatrix:Y,textPixelRatio:Q,holdingForFade:z,collisionBoxArray:Z,partiallyEvaluatedTextSize:q,collisionGroup:J}=i.parameters,me=b.get("text-optional"),pe=b.get("icon-optional"),_e=s.aC(b,"text-overlap","text-allow-overlap"),xe=_e==="always",Me=s.aC(b,"icon-overlap","icon-allow-overlap"),Re=Me==="always",Ee=b.get("text-rotation-alignment")==="map",Le=b.get("text-pitch-alignment")==="map",Ne=b.get("icon-text-fit")!=="none",Ke=b.get("symbol-z-order")==="viewport-y",We=xe&&(Re||!p.hasIconData()||pe),ot=Re&&(xe||!p.hasTextData()||me);!p.collisionArrays&&Z&&p.deserializeCollisionBoxes(Z);const ct=this.retainedQueryData[p.bucketInstanceId].tileID,st=this._getTerrainElevationFunc(ct),Nt=this.transform.getFastPathSimpleProjectionMatrix(ct),Rt=(bt,Wt,Cr)=>{var pr,wi;if(o[bt.crossTileID])return;if(z)return void(this.placements[bt.crossTileID]=new Ti(!1,!1,!1));let ri=!1,Bi=!1,pi=!0,ii=null,ei={box:null,placeable:!1,offscreen:null,occluded:!1},on={placeable:!1},Wi=null,yn=null,Tn=null,rs=0,ro=0,ws=0;Wt.textFeatureIndex?rs=Wt.textFeatureIndex:bt.useRuntimeCollisionCircles&&(rs=bt.featureIndex),Wt.verticalTextFeatureIndex&&(ro=Wt.verticalTextFeatureIndex);const Bs=Wt.textBox;if(Bs){const la=Ii=>{let mi=s.al.horizontal;if(p.allowVerticalPlacement&&!Ii&&this.prevPlacement){const Di=this.prevPlacement.placedOrientations[bt.crossTileID];Di&&(this.placedOrientations[bt.crossTileID]=Di,mi=Di,this.markUsedOrientation(p,mi,bt))}return mi},io=(Ii,mi)=>{if(p.allowVerticalPlacement&&bt.numVerticalGlyphVertices>0&&Wt.verticalTextBox){for(const Di of p.writingModes)if(Di===s.al.vertical?(ei=mi(),on=ei):ei=Ii(),ei&&ei.placeable)break}else ei=Ii()},Cs=bt.textAnchorOffsetStartIndex,Ms=bt.textAnchorOffsetEndIndex;if(Ms===Cs){const Ii=(mi,Di)=>{const Ci=this.collisionIndex.placeCollisionBox(mi,_e,Q,ct,T,Le,Ee,B,J.predicate,st,void 0,Nt);return Ci&&Ci.placeable&&(this.markUsedOrientation(p,Di,bt),this.placedOrientations[bt.crossTileID]=Di),Ci};io(()=>Ii(Bs,s.al.horizontal),()=>{const mi=Wt.verticalTextBox;return p.allowVerticalPlacement&&bt.numVerticalGlyphVertices>0&&mi?Ii(mi,s.al.vertical):{box:null,offscreen:null}}),la(ei&&ei.placeable)}else{let Ii=s.aB[(wi=(pr=this.prevPlacement)===null||pr===void 0?void 0:pr.variableOffsets[bt.crossTileID])===null||wi===void 0?void 0:wi.anchor];const mi=(Ci,Kf,Yo)=>{const x2=Ci.x2-Ci.x1,$f=Ci.y2-Ci.y1,ld=bt.textBoxScale,qf=Ne&&Me==="never"?Kf:null;let Aa=null,no=_e==="never"?1:2,Ad="never";Ii&&no++;for(let Wf=0;Wf<no;Wf++){for(let SA=Cs;SA<Ms;SA++){const cd=p.textAnchorOffsets.get(SA);if(Ii&&cd.textAnchor!==Ii)continue;const hd=this.attemptAnchorPlacement(cd,Ci,x2,$f,ld,Ee,Le,Q,ct,T,J,Ad,bt,p,Yo,B,E,qf,st);if(hd&&(Aa=hd.placedGlyphBoxes,Aa&&Aa.placeable))return ri=!0,ii=hd.shift,Aa}Ii?Ii=null:Ad=_e}return f&&!Aa&&(Aa={box:this.collisionIndex.placeCollisionBox(Bs,"always",Q,ct,T,Le,Ee,B,J.predicate,st,void 0,Nt).box,offscreen:!1,placeable:!1,occluded:!1}),Aa};io(()=>mi(Bs,Wt.iconBox,s.al.horizontal),()=>{const Ci=Wt.verticalTextBox;return p.allowVerticalPlacement&&(!ei||!ei.placeable)&&bt.numVerticalGlyphVertices>0&&Ci?mi(Ci,Wt.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),ei&&(ri=ei.placeable,pi=ei.offscreen);const Di=la(ei&&ei.placeable);if(!ri&&this.prevPlacement){const Ci=this.prevPlacement.variableOffsets[bt.crossTileID];Ci&&(this.variableOffsets[bt.crossTileID]=Ci,this.markUsedJustification(p,Ci.anchor,bt,Di))}}}if(Wi=ei,ri=Wi&&Wi.placeable,pi=Wi&&Wi.offscreen,bt.useRuntimeCollisionCircles){const la=p.text.placedSymbolArray.get(bt.centerJustifiedTextSymbolIndex),io=s.am(p.textSizeData,q,la),Cs=b.get("text-padding");yn=this.collisionIndex.placeCollisionCircles(_e,la,p.lineVertexArray,p.glyphOffsetArray,io,T,Y,f,Le,J.predicate,bt.collisionCircleDiameter,Cs,B,st),yn.circles.length&&yn.collisionDetected&&!f&&s.w("Collisions detected, but collision boxes are not shown"),ri=xe||yn.circles.length>0&&!yn.collisionDetected,pi=pi&&yn.offscreen}if(Wt.iconFeatureIndex&&(ws=Wt.iconFeatureIndex),Wt.iconBox){const la=io=>this.collisionIndex.placeCollisionBox(io,Me,Q,ct,T,Le,Ee,E,J.predicate,st,Ne&&ii?ii:void 0,Nt);on&&on.placeable&&Wt.verticalIconBox?(Tn=la(Wt.verticalIconBox),Bi=Tn.placeable):(Tn=la(Wt.iconBox),Bi=Tn.placeable),pi=pi&&Tn.offscreen}const is=me||bt.numHorizontalGlyphVertices===0&&bt.numVerticalGlyphVertices===0,So=pe||bt.numIconVertices===0;is||So?So?is||(Bi=Bi&&ri):ri=Bi&&ri:Bi=ri=Bi&&ri;const No=Bi&&Tn.placeable;if(ri&&Wi.placeable&&this.collisionIndex.insertCollisionBox(Wi.box,_e,b.get("text-ignore-placement"),p.bucketInstanceId,on&&on.placeable&&ro?ro:rs,J.ID),No&&this.collisionIndex.insertCollisionBox(Tn.box,Me,b.get("icon-ignore-placement"),p.bucketInstanceId,ws,J.ID),yn&&ri&&this.collisionIndex.insertCollisionCircles(yn.circles,_e,b.get("text-ignore-placement"),p.bucketInstanceId,rs,J.ID),f&&this.storeCollisionData(p.bucketInstanceId,Cr,Wt,Wi,Tn,yn),bt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[bt.crossTileID]=new Ti((ri||We)&&!(Wi!=null&&Wi.occluded),(Bi||ot)&&!(Tn!=null&&Tn.occluded),pi||p.justReloaded),o[bt.crossTileID]=!0};if(Ke){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const bt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Wt=bt.length-1;Wt>=0;--Wt){const Cr=bt[Wt];Rt(p.symbolInstances.get(Cr),p.collisionArrays[Cr],Cr)}}else for(let bt=i.symbolInstanceStart;bt<i.symbolInstanceEnd;bt++)Rt(p.symbolInstances.get(bt),p.collisionArrays[bt],bt);p.justReloaded=!1}storeCollisionData(i,o,f,p,b,B){if(f.textBox||f.iconBox){let E,T;this.collisionBoxArrays.has(i)?E=this.collisionBoxArrays.get(i):(E=new Map,this.collisionBoxArrays.set(i,E)),E.has(o)?T=E.get(o):(T={text:null,icon:null},E.set(o,T)),f.textBox&&(T.text=p.box),f.iconBox&&(T.icon=b.box)}if(B){let E=this.collisionCircleArrays[i];E===void 0&&(E=this.collisionCircleArrays[i]=[]);for(let T=0;T<B.circles.length;T+=4)E.push(B.circles[T+0]-zr),E.push(B.circles[T+1]-zr),E.push(B.circles[T+2]),E.push(B.collisionDetected?1:0)}}markUsedJustification(i,o,f,p){let b;b=p===s.al.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[s.aD(o)];const B=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const E of B)E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=b>=0&&E!==b?0:f.crossTileID)}markUsedOrientation(i,o,f){const p=o===s.al.horizontal||o===s.al.horizontalOnly?o:0,b=o===s.al.vertical?o:0,B=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const E of B)i.text.placedSymbolArray.get(E).placedOrientation=p;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let f=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const p=o?o.symbolFadeChange(i):1,b=o?o.opacities:{},B=o?o.variableOffsets:{},E=o?o.placedOrientations:{};for(const T in this.placements){const Y=this.placements[T],Q=b[T];Q?(this.opacities[T]=new _n(Q,p,Y.text,Y.icon),f=f||Y.text!==Q.text.placed||Y.icon!==Q.icon.placed):(this.opacities[T]=new _n(null,p,Y.text,Y.icon,Y.skipFade),f=f||Y.text||Y.icon)}for(const T in b){const Y=b[T];if(!this.opacities[T]){const Q=new _n(Y,p,!1,!1);Q.isHidden()||(this.opacities[T]=Q,f=f||Y.text.placed||Y.icon.placed)}}for(const T in B)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=B[T]);for(const T in E)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=E[T]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:i)}updateLayerOpacities(i,o){const f={};for(const p of o){const b=p.getBucket(i);b&&p.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,p.tileID,f,p.collisionBoxArray)}}updateBucketOpacities(i,o,f,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const b=i.layers[0],B=b.layout,E=new _n(null,0,!1,!1,!0),T=B.get("text-allow-overlap"),Y=B.get("icon-allow-overlap"),Q=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=B.get("text-rotation-alignment")==="map",Z=B.get("text-pitch-alignment")==="map",q=B.get("icon-text-fit")!=="none",J=new _n(null,0,T&&(Y||!i.hasIconData()||B.get("icon-optional")),Y&&(T||!i.hasTextData()||B.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const me=(_e,xe,Me)=>{for(let Re=0;Re<xe/4;Re++)_e.opacityVertexArray.emplaceBack(Me);_e.hasVisibleVertices=_e.hasVisibleVertices||Me!==xo},pe=this.collisionBoxArrays.get(i.bucketInstanceId);for(let _e=0;_e<i.symbolInstances.length;_e++){const xe=i.symbolInstances.get(_e),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:Re,crossTileID:Ee}=xe;let Le=this.opacities[Ee];f[Ee]?Le=E:Le||(Le=J,this.opacities[Ee]=Le),f[Ee]=!0;const Ne=xe.numIconVertices>0,Ke=this.placedOrientations[xe.crossTileID],We=Ke===s.al.vertical,ot=Ke===s.al.horizontal||Ke===s.al.horizontalOnly;if(Me>0||Re>0){const st=fu(Le.text);me(i.text,Me,We?xo:st),me(i.text,Re,ot?xo:st);const Nt=Le.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(Wt=>{Wt>=0&&(i.text.placedSymbolArray.get(Wt).hidden=Nt||We?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Nt||ot?1:0);const Rt=this.variableOffsets[xe.crossTileID];Rt&&this.markUsedJustification(i,Rt.anchor,xe,Ke);const bt=this.placedOrientations[xe.crossTileID];bt&&(this.markUsedJustification(i,"left",xe,bt),this.markUsedOrientation(i,bt,xe))}if(Ne){const st=fu(Le.icon),Nt=!(q&&xe.verticalPlacedIconSymbolIndex&&We);xe.placedIconSymbolIndex>=0&&(me(i.icon,xe.numIconVertices,Nt?st:xo),i.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Le.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(me(i.icon,xe.numVerticalIconVertices,Nt?xo:st),i.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Le.icon.isHidden())}const ct=pe&&pe.has(_e)?pe.get(_e):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const st=i.collisionArrays[_e];if(st){let Nt=new s.P(0,0);if(st.textBox||st.verticalTextBox){let Rt=!0;if(Q){const bt=this.variableOffsets[Ee];bt?(Nt=cu(bt.anchor,bt.width,bt.height,bt.textOffset,bt.textBoxScale),z&&Nt._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Rt=!1}if(st.textBox||st.verticalTextBox){let bt;st.textBox&&(bt=We),st.verticalTextBox&&(bt=ot),hu(i.textCollisionBox.collisionVertexArray,Le.text.placed,!Rt||bt,ct.text,Nt.x,Nt.y)}}if(st.iconBox||st.verticalIconBox){const Rt=!!(!ot&&st.verticalIconBox);let bt;st.iconBox&&(bt=Rt),st.verticalIconBox&&(bt=!Rt),hu(i.iconCollisionBox.collisionVertexArray,Le.icon.placed,bt,ct.icon,q?Nt.x:0,q?Nt.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,o){const f=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function hu(_,i,o,f,p,b){f&&f.length!==0||(f=[0,0,0,0]);const B=f[0]-zr,E=f[1]-zr,T=f[2]-zr,Y=f[3]-zr;_.emplaceBack(i?1:0,o?1:0,p||0,b||0,B,E),_.emplaceBack(i?1:0,o?1:0,p||0,b||0,T,E),_.emplaceBack(i?1:0,o?1:0,p||0,b||0,T,Y),_.emplaceBack(i?1:0,o?1:0,p||0,b||0,B,Y)}const e2=Math.pow(2,25),t2=Math.pow(2,24),r2=Math.pow(2,17),sf=Math.pow(2,16),of=Math.pow(2,9),uu=Math.pow(2,8),du=Math.pow(2,1);function fu(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const i=_.placed?1:0,o=Math.floor(127*_.opacity);return o*e2+i*t2+o*r2+i*sf+o*of+i*uu+o*du+i}const xo=0;class gu{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,o,f,p,b){const B=this._bucketParts;for(;this._currentTileIndex<i.length;)if(o.getBucketParts(B,p,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort((E,T)=>E.sortKey-T.sortKey));this._currentPartIndex<B.length;)if(o.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,b())return!0;return!1}}class uc{constructor(i,o,f,p,b,B,E,T){this.placement=new el(i,o,B,E,T),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(i,o,f){const p=U.now(),b=()=>!this._forceFullPlacement&&U.now()-p>2;for(;this._currentPlacementIndex>=0;){const B=o[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=E)&&(!B.maxzoom||B.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new gu(B)),this._inProgressLayer.continuePlacement(f[B.source],this.placement,this._showCollisionBoxes,B,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const tl=512/s.Z/2;class rl{constructor(i,o,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const p=new Map;for(let b=0;b<o.length;b++){const B=o.get(b),E=B.key,T=p.get(E);T?T.push(B):p.set(E,[B])}for(const[b,B]of p){const E={positions:B.map(T=>({x:Math.floor(T.anchorX*tl),y:Math.floor(T.anchorY*tl)})),crossTileIDs:B.map(T=>T.crossTileID)};if(E.positions.length>128){const T=new s.aF(E.positions.length,16,Uint16Array);for(const{x:Y,y:Q}of E.positions)T.add(Y,Q);T.finish(),delete E.positions,E.index=T}this._symbolsByKey[b]=E}}getScaledCoordinates(i,o){const{x:f,y:p,z:b}=this.tileID.canonical,{x:B,y:E,z:T}=o.canonical,Y=tl/Math.pow(2,T-b),Q=(E*s.Z+i.anchorY)*Y,z=p*s.Z*tl;return{x:Math.floor((B*s.Z+i.anchorX)*Y-f*s.Z*tl),y:Math.floor(Q-z)}}findMatches(i,o,f){const p=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let b=0;b<i.length;b++){const B=i.get(b);if(B.crossTileID)continue;const E=this._symbolsByKey[B.key];if(!E)continue;const T=this.getScaledCoordinates(B,o);if(E.index){const Y=E.index.range(T.x-p,T.y-p,T.x+p,T.y+p).sort();for(const Q of Y){const z=E.crossTileIDs[Q];if(!f[z]){f[z]=!0,B.crossTileID=z;break}}}else if(E.positions)for(let Y=0;Y<E.positions.length;Y++){const Q=E.positions[Y],z=E.crossTileIDs[Y];if(Math.abs(Q.x-T.x)<=p&&Math.abs(Q.y-T.y)<=p&&!f[z]){f[z]=!0,B.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class lf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class i2{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const o=Math.round((i-this.lng)/360);if(o!==0)for(const f in this.indexes){const p=this.indexes[f],b={};for(const B in p){const E=p[B];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+o),b[E.tileID.key]=E}this.indexes[f]=b}this.lng=i}addBucket(i,o,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<o.symbolInstances.length;b++)o.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const p=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const B=this.indexes[b];if(Number(b)>i.overscaledZ)for(const E in B){const T=B[E];T.tileID.isChildOf(i)&&T.findMatches(o.symbolInstances,i,p)}else{const E=B[i.scaledTo(Number(b)).key];E&&E.findMatches(o.symbolInstances,i,p)}}for(let b=0;b<o.symbolInstances.length;b++){const B=o.symbolInstances.get(b);B.crossTileID||(B.crossTileID=f.generate(),p[B.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new rl(i,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(i,o){for(const f of o.getCrossTileIDsLists())for(const p of f)delete this.usedCrossTileIDs[i][p]}removeStaleBuckets(i){let o=!1;for(const f in this.indexes){const p=this.indexes[f];for(const b in p)i[p[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,p[b]),delete p[b],o=!0)}return o}}class _s{constructor(){this.layerIndexes={},this.crossTileIDs=new lf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,o,f){let p=this.layerIndexes[i.id];p===void 0&&(p=this.layerIndexes[i.id]=new i2);let b=!1;const B={};p.handleWrapJump(f);for(const E of o){const T=E.getBucket(i);T&&i.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(E.tileID,T,this.crossTileIDs)&&(b=!0),B[T.bucketInstanceId]=!0)}return p.removeStaleBuckets(B)&&(b=!0),b}pruneUnusedLayers(i){const o={};i.forEach(f=>{o[f]=!0});for(const f in this.layerIndexes)o[f]||delete this.layerIndexes[f]}}var il="void main() {fragColor=vec4(1.0);}";const Er={prelude:Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Lr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Lr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lr(il,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Lr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Lr(il,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Lr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Lr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Lr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Lr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Lr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Lr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Lr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Lr(_,i){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/in ([\w]+) ([\w]+)/g),p=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=b?b.concat(p):p,E={};return{fragmentSource:_=_.replace(o,(T,Y,Q,z,Z)=>(E[Z]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${Q} ${z} ${Z};
#else
uniform ${Q} ${z} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${Q} ${z} ${Z} = u_${Z};
#endif
`)),vertexSource:i=i.replace(o,(T,Y,Q,z,Z)=>{const q=z==="float"?"vec2":"vec4",J=Z.match(/color/)?"color":q;return E[Z]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${Q} ${q} a_${Z};
out ${Q} ${z} ${Z};
#else
uniform ${Q} ${z} u_${Z};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${J}(a_${Z}, u_${Z}_t);
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`:Y==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${Q} ${q} a_${Z};
#else
uniform ${Q} ${z} u_${Z};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Q} ${z} ${Z} = a_${Z};
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Q} ${z} ${Z} = unpack_mix_${J}(a_${Z}, u_${Z}_t);
#else
    ${Q} ${z} ${Z} = u_${Z};
#endif
`}),staticAttributes:f,staticUniforms:B}}class nl{constructor(i,o,f){this.vertexBuffer=i,this.indexBuffer=o,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ka=s.aG([{name:"a_pos",type:"Int16",components:2}]);const Wn="#define PROJECTION_MERCATOR",En="mercator";class Si{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return En}get shaderDefine(){return Wn}get shaderPreludeCode(){return Er.projectionMercator}get vertexShaderPreludeCode(){return Er.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,o,f,p,b){if(this._cachedMesh)return this._cachedMesh;const B=new s.aI;B.emplaceBack(0,0),B.emplaceBack(s.Z,0),B.emplaceBack(0,s.Z),B.emplaceBack(s.Z,s.Z);const E=i.createVertexBuffer(B,Ka.members),T=s.aJ.simpleSegment(0,0,4,2),Y=new s.aK;Y.emplaceBack(1,0,2),Y.emplaceBack(1,2,3);const Q=i.createIndexBuffer(Y);return this._cachedMesh=new nl(E,Q,T),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class aA{constructor(i=0,o=0,f=0,p=0){if(isNaN(i)||i<0||isNaN(o)||o<0||isNaN(f)||f<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=o,this.left=f,this.right=p}interpolate(i,o,f){return o.top!=null&&i.top!=null&&(this.top=s.B.number(i.top,o.top,f)),o.bottom!=null&&i.bottom!=null&&(this.bottom=s.B.number(i.bottom,o.bottom,f)),o.left!=null&&i.left!=null&&(this.left=s.B.number(i.left,o.left,f)),o.right!=null&&i.right!=null&&(this.right=s.B.number(i.right,o.right,f)),this}getCenter(i,o){const f=s.ae((this.left+i-this.right)/2,0,i),p=s.ae((this.top+o-this.bottom)/2,0,o);return new s.P(f,p)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new aA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function bn(_,i){if(!_.renderWorldCopies||_.lngRange)return;const o=i.lng-_.center.lng;i.lng+=o>180?-360:o<-180?360:0}function oa(_){return Math.max(0,Math.floor(_))}class Zn{constructor(i,o,f,p,b,B){this._callbacks=i,this._tileSize=512,this._renderWorldCopies=B===void 0||!!B,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=p??0,this._maxPitch=b??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=oa(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new aA,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,o,f){this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=oa(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new aA(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!f&&i.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){const o=s.aL(i,-180,180)*Math.PI/180;var f,p,b,B,E,T,Y,Q,z;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=x(),f=this._rotationMatrix,b=-this._bearingInRadians,B=(p=this._rotationMatrix)[0],E=p[1],T=p[2],Y=p[3],Q=Math.sin(b),z=Math.cos(b),f[0]=B*z+T*Q,f[1]=E*z+Y*Q,f[2]=B*-Q+T*z,f[3]=E*-Q+Y*z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){const o=s.ae(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){const o=i/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(i){i=s.ae(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=s.ab(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){const o=this.getConstrained(this._center,i).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=s.ac(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,o){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,o,f){this._unmodified=!1,this._edgeInsets.interpolate(i,o,f),this._constrain(),this._calcMatrices()}resize(i,o,f=!0){this._width=i,this._height=o,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new St([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(i,o){return this._callbacks.getConstrained(i,o)}getCameraQueryGeometry(i,o){if(o.length===1)return[o[0],i];{let f=i.x,p=i.y,b=i.x,B=i.y;for(const E of o)f=Math.min(f,E.x),p=Math.min(p,E.y),b=Math.max(b,E.x),B=Math.max(B,E.y);return[new s.P(f,p),new s.P(b,p),new s.P(b,B),new s.P(f,B),new s.P(f,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:o,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(f),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=s.ad(new Float64Array(16));s.M(i,i,[this._width/2,-this._height/2,1]),s.L(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=s.ad(new Float64Array(16)),s.M(i,i,[1,-1,1]),s.L(i,i,[-1,-1,0]),s.M(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,o,f,p){const b=f!==void 0?f:this.bearing,B=p=p!==void 0?p:this.pitch,E=s.$.fromLngLat(i,o),T=-Math.cos(s.ab(B)),Y=Math.sin(s.ab(B)),Q=Y*Math.sin(s.ab(b)),z=-Y*Math.cos(s.ab(b));let Z=this.elevation;const q=o-Z;let J;T*q>=0||Math.abs(T)<.1?(J=1e4,Z=o+J*T):J=-q/T;let me,pe,_e=s.aN(1,E.y),xe=0;do{if(xe+=1,xe>10)break;pe=J/_e,me=new s.$(E.x+Q*pe,E.y+z*pe),_e=1/me.meterInMercatorCoordinateUnits()}while(Math.abs(J-pe*_e)>1e-12);return{center:me.toLngLat(),elevation:Z,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;const o=s.ag(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/o,p=s.$.fromLngLat(this.center,this.elevation),b=ie(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=i;const B=this.calculateCenterFromCameraLngLatAlt(b.toLngLat(),s.aN(b.z,p.y),this.bearing,this.pitch);this._elevation=B.elevation,this._center=B.center,this.setZoom(B.zoom)}getCameraPoint(){const i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const i=s.ag(1,this.center.lat)*this.worldSize;return ie(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];const o=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/o,i.canonical.y/o,1/o/s.Z,1/o/s.Z]}}class $s{constructor(i,o){this.min=i,this.max=o,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(i){const o=[i%2==0,i<2],f=s.aQ(this.min),p=s.aQ(this.max);for(let b=0;b<o.length;b++)f[b]=o[b]?this.min[b]:this.center[b],p[b]=o[b]?this.center[b]:this.max[b];return p[2]=this.max[2],new $s(f,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let o=!0;for(let f=0;f<i.planes.length;f++){const p=this.intersectsPlane(i.planes[f]);if(p===0)return 0;p===1&&(o=!1)}return o?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let o=i[3],f=i[3];for(let p=0;p<3;p++)i[p]>0?(o+=i[p]*this.min[p],f+=i[p]*this.max[p]):(f+=i[p]*this.min[p],o+=i[p]*this.max[p]);return o>=0?2:f<0?0:1}}class sA{distanceToTile2d(i,o,f,p){const b=p.distanceX([i,o]),B=p.distanceY([i,o]);return Math.hypot(b,B)}getWrap(i,o,f){return f}getTileAABB(i,o,f,p){var b,B;let E=f,T=f;if(p.terrain){const Q=new s.Y(i.z,o,i.z,i.x,i.y),z=p.terrain.getMinMaxElevation(Q);E=(b=z.minElevation)!==null&&b!==void 0?b:f,T=(B=z.maxElevation)!==null&&B!==void 0?B:f}const Y=1<<i.z;return new $s([o+i.x/Y,i.y/Y,E],[o+(i.x+1)/Y,(i.y+1)/Y,T])}allowVariableZoom(i,o){const f=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,p=s.ae(78.5-f/2,0,60);return!!o.terrain||i.pitch>p}allowWorldCopies(){return!0}recalculateCache(){}}class Ni{constructor(i,o,f){this.points=i,this.planes=o,this.aabb=f}static fromInvProjectionMatrix(i,o=1,f=0){const p=Math.pow(2,f),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Y=>{const Q=1/(Y=s.at([],Y,i))[3]/o*p;return s.aR(Y,Y,[Q,Q,1/Y[3],Q])}),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Y=>{const Q=s.aS([],b[Y[0]],b[Y[1]]),z=s.aS([],b[Y[2]],b[Y[1]]),Z=s.aT([],s.aU([],Q,z)),q=-s.aV(Z,b[Y[1]]);return Z.concat(q)}),E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],T=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Y of b)for(let Q=0;Q<3;Q++)E[Q]=Math.min(E[Q],Y[Q]),T[Q]=Math.max(T[Q],Y[Q]);return new Ni(b,B,new $s(E,T))}}class $a{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,o,f){return this._helper.interpolatePadding(i,o,f)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,o,f=!0){this._helper.resize(i,o,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,o){this._helper.overrideNearFarZ(i,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,o){}constructor(i,o,f,p,b){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Zn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(B,E)=>this.getConstrained(B,E)},i,o,f,p,b),this._coveringTilesDetailsProvider=new sA}clone(){const i=new $a;return i.apply(this),i}apply(i,o,f){this._helper.apply(i,o,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){const o=[new s.aW(0,i)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new s.P(0,0)),p=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),B=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),E=Math.floor(Math.min(f.x,p.x,b.x,B.x)),T=Math.floor(Math.max(f.x,p.x,b.x,B.x)),Y=1;for(let Q=E-Y;Q<=T+Y;Q++)Q!==0&&o.push(new s.aW(Q,i))}return o}getCameraFrustum(){return Ni.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){const o=this.screenPointToLocation(this.centerPoint,i),f=i?i.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(i,o){const f=s.ag(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(o,f),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),B=s.$.fromLngLat(i),E=new s.$(B.x-(p.x-b.x),B.y-(p.y-b.y));this.setCenter(E==null?void 0:E.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,o){return o?this.coordinatePoint(s.$.fromLngLat(i),o.getElevationForLngLatZoom(i,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(i))}screenPointToLocation(i,o){var f;return(f=this.screenPointToMercatorCoordinate(i,o))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(i,o){if(o){const f=o.pointCoordinate(i);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,o){const f=o||0,p=[i.x,i.y,0,1],b=[i.x,i.y,1,1];s.at(p,p,this._pixelMatrixInverse),s.at(b,b,this._pixelMatrixInverse);const B=p[3],E=b[3],T=p[1]/B,Y=b[1]/E,Q=p[2]/B,z=b[2]/E,Z=Q===z?0:(f-Q)/(z-Q);return new s.$(s.B.number(p[0]/B,b[0]/E,Z)/this.worldSize,s.B.number(T,Y,Z)/this.worldSize,f)}coordinatePoint(i,o=0,f=this._pixelMatrix){const p=[i.x*this.worldSize,i.y*this.worldSize,o,1];return s.at(p,p,f),new s.P(p[0]/p[3],p[1]/p[3])}getBounds(){const i=Math.max(0,this._helper._height/2-ze(this));return new St().extend(this.screenPointToLocation(new s.P(0,i))).extend(this.screenPointToLocation(new s.P(this._helper._width,i))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(i,o){return o?o.pointCoordinate(i)!=null:i.y>this.height/2-ze(this)}calculatePosMatrix(i,o=!1,f){var p;const b=(p=i.key)!==null&&p!==void 0?p:s.aX(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),B=o?this._alignedPosMatrixCache:this._posMatrixCache;if(B.has(b)){const Y=B.get(b);return f?Y.f32:Y.f64}const E=te(i,this.worldSize);s.N(E,o?this._alignedProjMatrix:this._viewProjMatrix,E);const T={f64:E,f32:new Float32Array(E)};return B.set(b,T),f?T.f32:T.f64}calculateFogMatrix(i){const o=i.key,f=this._fogMatrixCacheF32;if(f.has(o))return f.get(o);const p=te(i,this.worldSize);return s.N(p,this._fogMatrix,p),f.set(o,new Float32Array(p)),f.get(o)}getConstrained(i,o){o=s.ae(+o,this.minZoom,this.maxZoom);const f={center:new s.Q(i.lng,i.lat),zoom:o};let p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);const b=this.tileSize*s.ac(f.zoom);let B=0,E=b,T=0,Y=b,Q=0,z=0;const{x:Z,y:q}=this.size;if(this._helper._latRange){const Me=this._helper._latRange;B=s.S(Me[1])*b,E=s.S(Me[0])*b,E-B<q&&(Q=q/(E-B))}p&&(T=s.aL(s.U(p[0])*b,0,b),Y=s.aL(s.U(p[1])*b,0,b),Y<T&&(Y+=b),Y-T<Z&&(z=Z/(Y-T)));const{x:J,y:me}=ni(b,i);let pe,_e;const xe=Math.max(z||0,Q||0);if(xe){const Me=new s.P(z?(Y+T)/2:J,Q?(E+B)/2:me);return f.center=xi(b,Me).wrap(),f.zoom+=s.ah(xe),f}if(this._helper._latRange){const Me=q/2;me-Me<B&&(_e=B+Me),me+Me>E&&(_e=E-Me)}if(p){const Me=(T+Y)/2;let Re=J;this._helper._renderWorldCopies&&(Re=s.aL(J,Me-b/2,Me+b/2));const Ee=Z/2;Re-Ee<T&&(pe=T+Ee),Re+Ee>Y&&(pe=Y-Ee)}if(pe!==void 0||_e!==void 0){const Me=new s.P(pe??J,_e??me);f.center=xi(b,Me).wrap()}return f}calculateCenterFromCameraLngLatAlt(i,o,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,o,f,p)}_calculateNearFarZIfNeeded(i,o,f){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=i-p*this._helper._pixelPerMeter/Math.cos(o),B=p<0?b:i,E=Math.PI/2+this.pitchInRadians,T=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+f.y/this.height),Y=Math.sin(T)*B/Math.sin(s.ae(Math.PI-E-T,.01,Math.PI-.01)),Q=ze(this),z=Math.atan(Q/this._helper.cameraToCenterDistance),Z=s.ab(.75),q=z>Z?2*z*(.5+f.y/(2*Q)):Z,J=Math.sin(q)*B/Math.sin(s.ae(Math.PI-E-q,.01,Math.PI-.01)),me=Math.min(Y,J);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*me+B),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const i=this.centerOffset,o=ni(this.worldSize,this.center),f=o.x,p=o.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;const b=s.ab(Math.min(this.pitch,si)),B=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let E;this._calculateNearFarZIfNeeded(B,b,i),E=new Float64Array(16),s.aY(E,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,E),E[8]=2*-i.x/this._helper._width,E[9]=2*i.y/this._helper._height,this._projectionMatrix=s.aZ(E),s.M(E,E,[1,-1,1]),s.L(E,E,[0,0,-this._helper.cameraToCenterDistance]),s.a_(E,E,-this.rollInRadians),s.a$(E,E,this.pitchInRadians),s.a_(E,E,-this.bearingInRadians),s.L(E,E,[-f,-p,0]),this._mercatorMatrix=s.M([],E,[this.worldSize,this.worldSize,this.worldSize]),s.M(E,E,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E),s.L(E,E,[0,0,-this.elevation]),this._viewProjMatrix=E,this._invViewProjMatrix=s.an([],E);const T=[0,0,-1,1];s.at(T,T,this._invViewProjMatrix),this._cameraPosition=[T[0]/T[3],T[1]/T[3],T[2]/T[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,B,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-f,-p,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E);const Y=this._helper._width%2/2,Q=this._helper._height%2/2,z=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),q=f-Math.round(f)+z*Y+Z*Q,J=p-Math.round(p)+z*Q+Z*Y,me=new Float64Array(E);if(s.L(me,me,[q>.5?q-1:q,J>.5?J-1:J,0]),this._alignedProjMatrix=me,E=s.an(new Float64Array(16),this._pixelMatrix),!E)throw new Error("failed to invert matrix");this._pixelMatrixInverse=E,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const i=this.screenPointToMercatorCoordinate(new s.P(0,0)),o=[i.x*this.worldSize,i.y*this.worldSize,0,1];return s.at(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const i=s.ag(1,this.center.lat)*this.worldSize;return ie(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,o){const f=s.$.fromLngLat(i),p=[f.x*this.worldSize,f.y*this.worldSize,o,1];return s.at(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(i){const{overscaledTileID:o,aligned:f,applyTerrainMatrix:p}=i,b=this._helper.getMercatorTileCoordinates(o),B=o?this.calculatePosMatrix(o,f,!0):null;let E;return E=o&&o.terrainRttPosMatrix32f&&p?o.terrainRttPosMatrix32f:B||s.b0(),{mainMatrix:E,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:E}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,o,f){return 1}transformLightDirection(i){return s.aQ(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,o,f,p){const b=this.calculatePosMatrix(f);let B;p?(B=[i,o,p(i,o),1],s.at(B,B,b)):(B=[i,o,0,1],Ur(B,B,b));const E=B[3];return{point:new s.P(B[0]/E,B[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}populateCache(i){for(const o of i)this.calculatePosMatrix(o)}getMatrixForModel(i,o){const f=s.$.fromLngLat(i,o),p=f.meterInMercatorCoordinateUnits(),b=s.b1();return s.L(b,b,[f.x,f.y,f.z]),s.a_(b,b,Math.PI),s.a$(b,b,Math.PI/2),s.M(b,b,[-p,p,p]),b}getProjectionDataForCustomLayer(i=!0){const o=new s.Y(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:i}),p=te(o,this.worldSize);s.N(p,this._viewProjMatrix,p),f.tileMercatorCoords=[0,0,1,1];const b=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],B=s.b2();return s.M(B,p,b),f.fallbackMatrix=B,f.mainMatrix=B,f}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function qs(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function oA(_){if(_.useSlerp)if(_.k<1){const i=s.b3(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),o=s.b3(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),f=new Float64Array(4);s.b4(f,i,o,_.k);const p=s.b5(f);_.tr.setRoll(p.roll),_.tr.setPitch(p.pitch),_.tr.setBearing(p.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(s.B.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(s.B.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(s.B.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function ya(_,i,o,f,p){const b=p.padding,B=ni(p.worldSize,o.getNorthWest()),E=ni(p.worldSize,o.getNorthEast()),T=ni(p.worldSize,o.getSouthEast()),Y=ni(p.worldSize,o.getSouthWest()),Q=s.ab(-f),z=B.rotate(Q),Z=E.rotate(Q),q=T.rotate(Q),J=Y.rotate(Q),me=new s.P(Math.max(z.x,Z.x,J.x,q.x),Math.max(z.y,Z.y,J.y,q.y)),pe=new s.P(Math.min(z.x,Z.x,J.x,q.x),Math.min(z.y,Z.y,J.y,q.y)),_e=me.sub(pe),xe=(p.width-(b.left+b.right+i.left+i.right))/_e.x,Me=(p.height-(b.top+b.bottom+i.top+i.bottom))/_e.y;if(Me<0||xe<0)return void qs();const Re=Math.min(s.ah(p.scale*Math.min(xe,Me)),_.maxZoom),Ee=s.P.convert(_.offset),Le=new s.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(s.ab(f)),Ne=Ee.add(Le).mult(p.scale/s.ac(Re));return{center:xi(p.worldSize,B.add(T).div(2).sub(Ne)),zoom:Re,bearing:f}}class lA{get useGlobeControls(){return!1}handlePanInertia(i,o){return{easingOffset:i,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(i,o){i.bearingDelta&&o.setBearing(o.bearing+i.bearingDelta),i.pitchDelta&&o.setPitch(o.pitch+i.pitchDelta),i.rollDelta&&o.setRoll(o.roll+i.rollDelta),i.zoomDelta&&o.setZoom(o.zoom+i.zoomDelta)}handleMapControlsPan(i,o,f){i.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(f,i.around)}cameraForBoxAndBearing(i,o,f,p,b){return ya(i,o,f,p,b)}handleJumpToCenterZoom(i,o){i.zoom!==(o.zoom!==void 0?+o.zoom:i.zoom)&&i.setZoom(+o.zoom),o.center!==void 0&&i.setCenter(s.Q.convert(o.center))}handleEaseTo(i,o){const f=i.zoom,p=i.padding,b={roll:i.roll,pitch:i.pitch,bearing:i.bearing},B={roll:o.roll===void 0?i.roll:o.roll,pitch:o.pitch===void 0?i.pitch:o.pitch,bearing:o.bearing===void 0?i.bearing:o.bearing},E=o.zoom!==void 0,T=!i.isPaddingEqual(o.padding);let Y=!1;const Q=E?+o.zoom:i.zoom;let z=i.centerPoint.add(o.offsetAsPoint);const Z=i.screenPointToLocation(z),{center:q,zoom:J}=i.getConstrained(s.Q.convert(o.center||Z),Q??f);bn(i,q);const me=ni(i.worldSize,Z),pe=ni(i.worldSize,q).sub(me),_e=s.ac(J-f);return Y=J!==f,{easeFunc:xe=>{if(Y&&i.setZoom(s.B.number(f,J,xe)),s.b6(b,B)||oA({startEulerAngles:b,endEulerAngles:B,tr:i,k:xe,useSlerp:b.roll!=B.roll}),T&&(i.interpolatePadding(p,o.padding,xe),z=i.centerPoint.add(o.offsetAsPoint)),o.around)i.setLocationAtPoint(o.around,o.aroundPoint);else{const Me=s.ac(i.zoom-f),Re=J>f?Math.min(2,_e):Math.max(.5,_e),Ee=Math.pow(Re,1-xe),Le=xi(i.worldSize,me.add(pe.mult(xe*Ee)).mult(Me));i.setLocationAtPoint(i.renderWorldCopies?Le.wrap():Le,z)}},isZooming:Y,elevationCenter:q}}handleFlyTo(i,o){const f=o.zoom!==void 0,p=i.zoom,b=i.getConstrained(s.Q.convert(o.center||o.locationAtOffset),f?+o.zoom:p),B=b.center,E=b.zoom;bn(i,B);const T=ni(i.worldSize,o.locationAtOffset),Y=ni(i.worldSize,B).sub(T),Q=Y.mag(),z=s.ac(E-p);let Z;if(o.minZoom!==void 0){const q=Math.min(+o.minZoom,p,E),J=i.getConstrained(B,q).zoom;Z=s.ac(J-p)}return{easeFunc:(q,J,me,pe)=>{i.setZoom(q===1?E:p+s.ah(J));const _e=q===1?B:xi(i.worldSize,T.add(Y.mult(me)).mult(J));i.setLocationAtPoint(i.renderWorldCopies?_e.wrap():_e,pe)},scaleOfZoom:z,targetCenter:B,scaleOfMinZoom:Z,pixelPathLength:Q}}}class Jr{constructor(i,o,f){this.blendFunction=i,this.blendColor=o,this.mask=f}}Jr.Replace=[1,0],Jr.disabled=new Jr(Jr.Replace,s.b7.transparent,[!1,!1,!1,!1]),Jr.unblended=new Jr(Jr.Replace,s.b7.transparent,[!0,!0,!0,!0]),Jr.alphaBlended=new Jr([1,771],s.b7.transparent,[!0,!0,!0,!0]);const pu=2305;class Hr{constructor(i,o,f){this.enable=i,this.mode=o,this.frontFace=f}}Hr.disabled=new Hr(!1,1029,pu),Hr.backCCW=new Hr(!0,1029,pu),Hr.frontCCW=new Hr(!0,1028,pu);class wr{constructor(i,o,f){this.func=i,this.mask=o,this.range=f}}wr.ReadOnly=!1,wr.ReadWrite=!0,wr.disabled=new wr(519,wr.ReadOnly,[0,1]);const al=7680;class Qr{constructor(i,o,f,p,b,B){this.test=i,this.ref=o,this.mask=f,this.fail=p,this.depthFail=b,this.pass=B}}Qr.disabled=new Qr({func:519,mask:0},0,0,al,al,al);const AA=new WeakMap;function Ua(_){var i;if(AA.has(_))return AA.get(_);{const o=(i=_.getParameter(_.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return AA.set(_,o),o}}class sl{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;const o=i.context,f=o.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const p=new s.aI;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const b=new s.aK;b.emplaceBack(0,1,2),this._fullscreenTriangle=new nl(o.createVertexBuffer(p,Ka.members),o.createIndexBuffer(b),s.aJ.simpleSegment(0,0,p.length,b.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(f.TEXTURE1);const B=f.createTexture();f.bindTexture(f.TEXTURE_2D,B),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(B),Ua(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,o){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const i=this._cachedRenderContext.context,o=i.gl;i.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,o){const f=this._cachedRenderContext.context,p=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,p.TRIANGLES,wr.disabled,Qr.disabled,Jr.unblended,Hr.disabled,((b,B)=>({u_input:b,u_output_expected:B}))(i,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ua(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const b=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ua(i)){const o=i.clientWaitSync(this._readbackQueue.sync,0,0);if(o===i.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=sl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let o=0;return o+=i[0]/256,o+=i[1]/65536,o+=i[2]/16777216,i[3]<127&&(o=-o),o/128}}const dc=s.Z/128;function fc(_,i){const o=_.granularity!==void 0?Math.max(_.granularity,1):1,f=o+(_.generateBorders?2:0),p=o+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=f+1,B=p+1,E=_.generateBorders?-1:0,T=_.generateBorders||_.extendToNorthPole?-1:0,Y=o+(_.generateBorders?1:0),Q=o+(_.generateBorders||_.extendToSouthPole?1:0),z=b*B,Z=f*p*6,q=b*B>65536;if(q&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const J=q||i==="32bit",me=new Int16Array(2*z);let pe=0;for(let Me=T;Me<=Q;Me++)for(let Re=E;Re<=Y;Re++){let Ee=Re/o*s.Z;Re===-1&&(Ee=-64),Re===o+1&&(Ee=s.Z+dc);let Le=Me/o*s.Z;Me===-1&&(Le=_.extendToNorthPole?s.b9:-64),Me===o+1&&(Le=_.extendToSouthPole?s.ba:s.Z+dc),me[pe++]=Ee,me[pe++]=Le}const _e=J?new Uint32Array(Z):new Uint16Array(Z);let xe=0;for(let Me=0;Me<p;Me++)for(let Re=0;Re<f;Re++){const Ee=Re+1+Me*b,Le=Re+(Me+1)*b,Ne=Re+1+(Me+1)*b;_e[xe++]=Re+Me*b,_e[xe++]=Le,_e[xe++]=Ee,_e[xe++]=Ee,_e[xe++]=Le,_e[xe++]=Ne}return{vertices:me.buffer.slice(0),indices:_e.buffer.slice(0),uses32bitIndices:J}}const ol=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class cA{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Er.projectionGlobe}get vertexShaderPreludeCode(){return Er.projectionMercator.vertexSource}get subdivisionGranularity(){return ol}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new sl(i));const o=s.S(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(o,f),b=U.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=b);const B=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(B))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,o,f,p,b){const B=(b==="stencil"?ol.stencil:ol.tile).getGranularityForZoomLevel(o.z);return this._getMesh(i,{granularity:B,generateBorders:f,extendToNorthPole:o.y===0&&p,extendToSouthPole:o.y===(1<<o.z)-1&&p})}_getMesh(i,o){const f=this._getMeshKey(o);if(f in this._tileMeshCache)return this._tileMeshCache[f];const p=function(b,B){const E=fc(B,"16bit"),T=s.aI.deserialize({arrayBuffer:E.vertices,length:E.vertices.byteLength/2/2}),Y=s.aK.deserialize({arrayBuffer:E.indices,length:E.indices.byteLength/2/3});return new nl(b.createVertexBuffer(T,Ka.members),b.createIndexBuffer(Y),s.aJ.simpleSegment(0,0,T.length,Y.length))}(i,o);return this._tileMeshCache[f]=p,p}recalculate(i){}hasTransition(){const i=U.now();let o=!1;return o=o||(i-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}const hA=new s.r({type:new s.D(s.v.projection.type)});class Af extends s.E{constructor(i){super(),this._transitionable=new s.T(hA),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new Si,this._verticalPerspectiveProjection=new cA}get transitionState(){const i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof s.be){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,o,f,p,b){return this.currentProjection.getMeshFromTileID(i,o,f,p,b)}setProjection(i){this._transitionable.setValue("type",(i==null?void 0:i.type)||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function gc(_){const i=pc(_.worldSize,_.center.lat);return 2*Math.PI*i}function ll(_,i,o,f,p){const b=1/(1<<p),B=i/s.Z*b+f*b,E=s.bg((_/s.Z*b+o*b)*Math.PI*2+Math.PI,2*Math.PI),T=2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI,Y=Math.cos(T),Q=new Float64Array(3);return Q[0]=Math.sin(E)*Y,Q[1]=Math.sin(T),Q[2]=Math.cos(E)*Y,Q}function Fn(_){return function(i,o){const f=Math.cos(o),p=new Float64Array(3);return p[0]=Math.sin(i)*f,p[1]=Math.sin(o),p[2]=Math.cos(i)*f,p}(_.lng*Math.PI/180,_.lat*Math.PI/180)}function pc(_,i){return _/(2*Math.PI)/Math.cos(i*Math.PI/180)}function Jn(_){const i=Math.asin(_[1])/Math.PI*180,o=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(o>1e-6){const f=_[0]/o,p=Math.acos(_[2]/o),b=(f>0?p:-p)/Math.PI*180;return new s.Q(s.aL(b,-180,180),i)}return new s.Q(0,i)}function Al(_){return Math.cos(_*Math.PI/180)}function di(_,i){const o=Al(_),f=Al(i);return s.ah(f/o)}function uA(_,i){const o=_.rotate(i.bearingInRadians),f=i.zoom+di(i.center.lat,0),p=s.bc(1/Al(i.center.lat),1/Al(Math.min(Math.abs(i.center.lat),60)),s.bf(f,7,3,0,1)),b=360/gc({worldSize:i.worldSize,center:{lat:i.center.lat}});return new s.Q(i.center.lng-o.x*b*p,s.ae(i.center.lat+o.y*b,-85.051129,s.af))}function mc(_){const i=.5*_,o=Math.sin(i),f=Math.cos(i);return Math.log(o+f)-Math.log(f-o)}function mu(_,i,o,f){const p=_.lat+o*f;if(Math.abs(o)>1){const b=(Math.sign(_.lat+o)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,B=Math.abs(_.lat+o)*Math.PI/180,E=mc(b+f*(B-b)),T=mc(b),Y=mc(B);return new s.Q(_.lng+i*((E-T)/(Y-T)),p)}return new s.Q(_.lng+i*f,p)}class cl{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=i}recalculateCache(){if(!this._hadAnyChanges)return;const i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(i,o,f,p){const b=`${i.z}_${i.x}_${i.y}`,B=this._cache.get(b);if(B)return B;const E=this._cachePrevious.get(b);if(E)return this._cache.set(b,E),E;const T=this._aabbFactory(i,o,f,p);return this._cache.set(b,T),this._hadAnyChanges=!0,T}}function _c(_,i,o){const f=_-i;return f<0?-f:Math.max(0,f-o)}function _u(_,i,o,f,p){const b=_-o;let B;return B=b<0?Math.min(-b,1+b-p):b>1?Math.min(Math.max(b-p,0),1-b):0,Math.max(B,_c(i,f,p))}class n2{constructor(){this._aabbCache=new cl(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(i,o,f,p){const b=1<<f.z,B=1/b,E=f.x/b,T=f.y/b;let Y=2;return Y=Math.min(Y,_u(i,o,E,T,B)),Y=Math.min(Y,_u(i,o,E+.5,-T-B,B)),Y=Math.min(Y,_u(i,o,E+.5,2-T-B,B)),Y}getWrap(i,o,f){const p=1<<o.z,b=1/p,B=o.x/p,E=_c(i.x,B,b),T=_c(i.x,B-1,b),Y=_c(i.x,B+1,b),Q=Math.min(E,T,Y);return Q===Y?1:Q===T?-1:0}allowVariableZoom(i,o){return Ge(i,o)>4}allowWorldCopies(){return!1}getTileAABB(i,o,f,p){return this._aabbCache.getTileAABB(i,o,f,p)}_computeTileAABB(i,o,f,p){if(i.z<=0)return new $s([-1,-1,-1],[1,1,1]);if(i.z===1)return new $s([i.x===0?-1:0,i.y===0?0:-1,-1],[i.x===0?0:1,i.y===0?1:0,1]);{const b=[ll(0,0,i.x,i.y,i.z),ll(s.Z,0,i.x,i.y,i.z),ll(s.Z,s.Z,i.x,i.y,i.z),ll(0,s.Z,i.x,i.y,i.z)],B=[1,1,1],E=[-1,-1,-1];for(const T of b)for(let Y=0;Y<3;Y++)B[Y]=Math.min(B[Y],T[Y]),E[Y]=Math.max(E[Y],T[Y]);if(i.y===0||i.y===(1<<i.z)-1){const T=[0,i.y===0?1:-1,0];for(let Y=0;Y<3;Y++)B[Y]=Math.min(B[Y],T[Y]),E[Y]=Math.max(E[Y],T[Y])}return new $s(B,E)}}}class bc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,o,f){return this._helper.interpolatePadding(i,o,f)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,o){this._helper.resize(i,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,o){this._helper.overrideNearFarZ(i,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Zn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,o)=>this.getConstrained(i,o)}),this._coveringTilesDetailsProvider=new n2}clone(){const i=new bc;return i.apply(this),i}apply(i,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(i)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const i=s.bh();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){const{overscaledTileID:o,applyGlobeMatrix:f}=i,p=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){const o=this.pitchInRadians,f=this.cameraToCenterDistance/i,p=Math.sin(o)*f,b=Math.cos(o)*f+1,B=1/Math.sqrt(p*p+b*b)*1;let E=-p,T=b;const Y=Math.sqrt(E*E+T*T);E/=Y,T/=Y;const Q=[0,E,T];s.bl(Q,Q,[0,0,0],-this.bearingInRadians),s.bm(Q,Q,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(Q,Q,[0,0,0],this.center.lng*Math.PI/180);const z=1/s.bo(Q);return s.aO(Q,Q,z),[...Q,-B*z]}isLocationOccluded(i){return!this.isSurfacePointVisible(Fn(i))}transformLightDirection(i){const o=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,p=Math.cos(f),b=[Math.sin(o)*p,Math.sin(f),Math.cos(o)*p],B=[b[2],0,-b[0]],E=[0,0,0];s.aU(E,B,b),s.aT(B,B),s.aT(E,E);const T=[0,0,0];return s.aT(T,[B[0]*i[0]+E[0]*i[1]+b[0]*i[2],B[1]*i[0]+E[1]*i[1]+b[1]*i[2],B[2]*i[0]+E[2]*i[1]+b[2]*i[2]]),T}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,o,f){const p=function(E,T,Y){const Q=1/(1<<Y.z);return new s.$(E/s.Z*Q+Y.x*Q,T/s.Z*Q+Y.y*Q)}(i,o,f.canonical),b=(B=p.y,[s.bg(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-B*Math.PI*2))-.5*Math.PI]);var B;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(i,o,f,p){const b=f.canonical,B=ll(i,o,b.x,b.y,b.z),E=1+(p?p(i,o):0)/s.bu,T=[B[0]*E,B[1]*E,B[2]*E,1];s.at(T,T,this._globeViewProjMatrixNoCorrection);const Y=this._cachedClippingPlane,Q=Y[0]*B[0]+Y[1]*B[1]+Y[2]*B[2]+Y[3]<0;return{point:new s.P(T[0]/T[3],T[1]/T[3]),signedDistanceFromCamera:T[3],isOccluded:Q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const i=pc(this.worldSize,this.center.lat),o=s.b2(),f=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),s.aY(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;o[8]=2*-p.x/this._helper._width,o[9]=2*p.y/this._helper._height,this._projectionMatrix=s.aZ(o),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,o),s.L(o,o,[0,0,-this.cameraToCenterDistance]),s.a_(o,o,this.rollInRadians),s.a$(o,o,-this.pitchInRadians),s.a_(o,o,this.bearingInRadians),s.L(o,o,[0,0,-i]);const b=s.bh();b[0]=i,b[1]=i,b[2]=i,s.a$(f,o,this.center.lat*Math.PI/180),s.bp(f,f,-this.center.lng*Math.PI/180),s.M(f,f,b),this._globeViewProjMatrixNoCorrection=f,s.a$(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(o,o,-this.center.lng*Math.PI/180),s.M(o,o,b),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,f);const B=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/i,s.bl(this._cameraPosition,this._cameraPosition,B,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,B,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,B,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,B,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,B,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);const E=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(E,E,[1,1,-1]),this._cachedFrustum=Ni.fromInvProjectionMatrix(E)}calculateFogMatrix(i){s.w("calculateFogMatrix is not supported on globe projection.");const o=s.b2();return s.ad(o),o}getVisibleUnwrappedCoordinates(i){return[new s.aW(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Fn(i);s.aO(f,f,1+o/s.bu);const p=s.bk();return s.at(p,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(i){}getBounds(){const i=.5*this.width,o=.5*this.height,f=[new s.P(0,0),new s.P(i,0),new s.P(this.width,0),new s.P(this.width,o),new s.P(this.width,this.height),new s.P(i,this.height),new s.P(0,this.height),new s.P(0,o)],p=[];for(const z of f)p.push(this.unprojectScreenPoint(z));let b=0,B=0,E=0,T=0;const Y=this.center;for(const z of p){const Z=s.bq(Y.lng,z.lng),q=s.bq(Y.lat,z.lat);Z<B&&(B=Z),Z>b&&(b=Z),q<T&&(T=q),q>E&&(E=q)}const Q=[Y.lng+B,Y.lat+T,Y.lng+b,Y.lat+E];return this.isSurfacePointOnScreen([0,1,0])&&(Q[3]=90,Q[0]=-180,Q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Q[1]=-90,Q[0]=-180,Q[2]=180),new St(Q)}getConstrained(i,o){const f=s.ae(i.lat,-85.051129,s.af),p=s.ae(+o,this.minZoom+di(0,f),this.maxZoom);return{center:new s.Q(i.lng,f),zoom:p}}calculateCenterFromCameraLngLatAlt(i,o,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,o,f,p)}setLocationAtPoint(i,o){const f=Fn(this.unprojectScreenPoint(o)),p=Fn(i),b=s.bh();s.br(b);const B=s.bh();s.bn(B,f,b,-this.center.lng*Math.PI/180),s.bm(B,B,b,this.center.lat*Math.PI/180);const E=p[0]*p[0]+p[2]*p[2],T=B[0]*B[0];if(E<T)return;const Y=Math.sqrt(E-T),Q=-Y,z=s.bs(p[0],p[2],B[0],Y),Z=s.bs(p[0],p[2],B[0],Q),q=s.bh();s.bn(q,p,b,-z);const J=s.bs(q[1],q[2],B[1],B[2]),me=s.bh();s.bn(me,p,b,-Z);const pe=s.bs(me[1],me[2],B[1],B[2]),_e=.5*Math.PI,xe=J>=-_e&&J<=_e,Me=pe>=-_e&&pe<=_e;let Re,Ee;if(xe&&Me){const We=this.center.lng*Math.PI/180,ot=this.center.lat*Math.PI/180;s.bv(z,We)+s.bv(J,ot)<s.bv(Z,We)+s.bv(pe,ot)?(Re=z,Ee=J):(Re=Z,Ee=pe)}else if(xe)Re=z,Ee=J;else{if(!Me)return;Re=Z,Ee=pe}const Le=Re/Math.PI*180,Ne=Ee/Math.PI*180,Ke=this.center.lat;this.setCenter(new s.Q(Le,s.ae(Ne,-90,90))),this.setZoom(this.zoom+di(Ke,this.center.lat))}locationToScreenPoint(i,o){const f=Fn(i);if(o){const p=o.getElevationForLngLatZoom(i,this._helper._tileZoom);s.aO(f,f,1+p/s.bu)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(i){const o=s.bk();return s.at(o,[...i,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new s.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,o){if(o){const f=o.pointCoordinate(i);if(f)return f}return s.$.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,o){var f;return(f=this.screenPointToMercatorCoordinate(i,o))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(i,o){const f=this._cameraPosition,p=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(f,p)}getRayDirectionFromPixel(i){const o=s.bk();o[0]=i.x/this.width*2-1,o[1]=-1*(i.y/this.height*2-1),o[2]=1,o[3]=1,s.at(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const f=s.bh();f[0]=o[0]-this._cameraPosition[0],f[1]=o[1]-this._cameraPosition[1],f[2]=o[2]-this._cameraPosition[2];const p=s.bh();return s.aT(p,f),p}isSurfacePointVisible(i){const o=this._cachedClippingPlane;return o[0]*i[0]+o[1]*i[1]+o[2]*i[2]+o[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;const o=s.bk();return s.at(o,[...i,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(i,o){const f=s.aV(i,o),p=s.bh(),b=s.bh();s.aO(b,o,f),s.aS(p,i,b);const B=1-s.aV(p,p);if(B<0)return null;const E=s.aV(i,i)-1,T=-f+(f<0?1:-1)*Math.sqrt(B),Y=E/T,Q=T;return{tMin:Math.min(Y,Q),tMax:Math.max(Y,Q)}}unprojectScreenPoint(i){const o=this._cameraPosition,f=this.getRayDirectionFromPixel(i),p=this.rayPlanetIntersection(o,f);if(p){const Q=s.bh();s.aP(Q,o,[f[0]*p.tMin,f[1]*p.tMin,f[2]*p.tMin]);const z=s.bh();return s.aT(z,Q),Jn(z)}const b=this._cachedClippingPlane,B=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],E=-s.bt(b,o)/B,T=s.bh();if(E>0)s.aP(T,o,[f[0]*E,f[1]*E,f[2]*E]);else{const Q=s.bh();s.aP(Q,o,[2*f[0],2*f[1],2*f[2]]);const z=s.bt(this._cachedClippingPlane,Q);s.aS(T,Q,[this._cachedClippingPlane[0]*z,this._cachedClippingPlane[1]*z,this._cachedClippingPlane[2]*z])}const Y=function(Q){const z=s.bh();return z[0]=Q[0]*-Q[3],z[1]=Q[1]*-Q[3],z[2]=Q[2]*-Q[3],{center:z,radius:Math.sqrt(1-Q[3]*Q[3])}}(b);return Jn(function(Q,z,Z){const q=s.bh();s.aS(q,Z,Q);const J=s.bh();return s.bi(J,Q,q,z/s.bj(q)),J}(Y.center,Y.radius,T))}getMatrixForModel(i,o){const f=s.Q.convert(i),p=1/s.bu,b=s.b1();return s.bp(b,b,f.lng/180*Math.PI),s.a$(b,b,-f.lat/180*Math.PI),s.L(b,b,[0,0,1+o/s.bu]),s.a$(b,b,.5*Math.PI),s.M(b,b,[p,p,p]),b}getProjectionDataForCustomLayer(i=!0){const o=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:i});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(i){}}class yc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,o,f){return this._helper.interpolatePadding(i,o,f)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,o,f=!0){this._helper.resize(i,o,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,o){this._helper.overrideNearFarZ(i,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,o){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Zn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,o)=>this.getConstrained(i,o)}),this._globeness=1,this._mercatorTransform=new $a,this._verticalPerspectiveTransform=new bc}clone(){const i=new yc;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this),i}apply(i){this._helper.apply(i),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){const o=this._mercatorTransform.getProjectionData(i),f=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:o.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,o,f){const p=this._mercatorTransform.getPitchedTextCorrection(i,o,f),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,o,f);return s.bc(p,b,this._globeness)}projectTileCoordinates(i,o,f,p){return this.currentTransform.projectTileCoordinates(i,o,f,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,o){return this.currentTransform.lngLatToCameraDepth(i,o)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}getConstrained(i,o){return this.currentTransform.getConstrained(i,o)}calculateCenterFromCameraLngLatAlt(i,o,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(i,o,f,p)}setLocationAtPoint(i,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(i,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(i,o){return this.currentTransform.locationToScreenPoint(i,o)}screenPointToMercatorCoordinate(i,o){return this.currentTransform.screenPointToMercatorCoordinate(i,o)}screenPointToLocation(i,o){return this.currentTransform.screenPointToLocation(i,o)}isPointOnMapSurface(i,o){return this.currentTransform.isPointOnMapSurface(i,o)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,o){return this.currentTransform.getMatrixForModel(i,o)}getProjectionDataForCustomLayer(i=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return o;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return f.fallbackMatrix=o.mainMatrix,f}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class Ea{get useGlobeControls(){return!0}handlePanInertia(i,o){const f=uA(i,o);return Math.abs(f.lng-o.center.lng)>180&&(f.lng=o.center.lng+179.5*Math.sign(f.lng-o.center.lng)),{easingCenter:f,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,o){const f=i.around,p=o.screenPointToLocation(f);i.bearingDelta&&o.setBearing(o.bearing+i.bearingDelta),i.pitchDelta&&o.setPitch(o.pitch+i.pitchDelta),i.rollDelta&&o.setRoll(o.roll+i.rollDelta);const b=o.zoom;i.zoomDelta&&o.setZoom(o.zoom+i.zoomDelta);const B=o.zoom-b;if(B===0)return;const E=s.bq(o.center.lng,p.lng),T=E/(Math.abs(E/180)+1),Y=s.bq(o.center.lat,p.lat),Q=o.getRayDirectionFromPixel(f),z=o.cameraPosition,Z=-1*s.aV(z,Q),q=s.bh();s.aP(q,z,[Q[0]*Z,Q[1]*Z,Q[2]*Z]);const J=s.bo(q)-1,me=Math.exp(.5*-Math.max(J-.3,0)),pe=pc(o.worldSize,o.center.lat)/Math.min(o.width,o.height),_e=s.bf(pe,.9,.5,1,.25),xe=(1-s.ac(-B))*Math.min(me,_e),Me=o.center.lat,Re=o.zoom,Ee=new s.Q(o.center.lng+T*xe,s.ae(o.center.lat+Y*xe,-85.051129,s.af));o.setLocationAtPoint(p,f);const Le=o.center,Ne=s.bf(Math.abs(E),45,85,0,1),Ke=s.bf(pe,.75,.35,0,1),We=Math.pow(Math.max(Ne,Ke),.25),ot=s.bq(Le.lng,Ee.lng),ct=s.bq(Le.lat,Ee.lat);o.setCenter(new s.Q(Le.lng+ot*We,Le.lat+ct*We).wrap()),o.setZoom(Re+di(Me,o.center.lat))}handleMapControlsPan(i,o,f){if(!i.panDelta)return;const p=o.center.lat,b=o.zoom;o.setCenter(uA(i.panDelta,o).wrap()),o.setZoom(b+di(p,o.center.lat))}cameraForBoxAndBearing(i,o,f,p,b){const B=ya(i,o,f,p,b),E=o.left/b.width*2-1,T=(b.width-o.right)/b.width*2-1,Y=o.top/b.height*-2+1,Q=(b.height-o.bottom)/b.height*-2+1,z=s.bq(f.getWest(),f.getEast())<0,Z=z?f.getEast():f.getWest(),q=z?f.getWest():f.getEast(),J=Math.max(f.getNorth(),f.getSouth()),me=Math.min(f.getNorth(),f.getSouth()),pe=Z+.5*s.bq(Z,q),_e=J+.5*s.bq(J,me),xe=b.clone();xe.setCenter(B.center),xe.setBearing(B.bearing),xe.setPitch(0),xe.setRoll(0),xe.setZoom(B.zoom);const Me=xe.modelViewProjectionMatrix,Re=[Fn(f.getNorthWest()),Fn(f.getNorthEast()),Fn(f.getSouthWest()),Fn(f.getSouthEast()),Fn(new s.Q(q,_e)),Fn(new s.Q(Z,_e)),Fn(new s.Q(pe,J)),Fn(new s.Q(pe,me))],Ee=Fn(B.center);let Le=Number.POSITIVE_INFINITY;for(const Ne of Re)E<0&&(Le=Ea.getLesserNonNegativeNonNull(Le,Ea.solveVectorScale(Ne,Ee,Me,"x",E))),T>0&&(Le=Ea.getLesserNonNegativeNonNull(Le,Ea.solveVectorScale(Ne,Ee,Me,"x",T))),Y>0&&(Le=Ea.getLesserNonNegativeNonNull(Le,Ea.solveVectorScale(Ne,Ee,Me,"y",Y))),Q<0&&(Le=Ea.getLesserNonNegativeNonNull(Le,Ea.solveVectorScale(Ne,Ee,Me,"y",Q)));if(Number.isFinite(Le)&&Le!==0)return B.zoom=xe.zoom+s.ah(Le),B;qs()}handleJumpToCenterZoom(i,o){const f=i.center.lat,p=i.getConstrained(o.center?s.Q.convert(o.center):i.center,i.zoom).center;i.setCenter(p.wrap());const b=o.zoom!==void 0?+o.zoom:i.zoom+di(f,p.lat);i.zoom!==b&&i.setZoom(b)}handleEaseTo(i,o){const f=i.zoom,p=i.center,b=i.padding,B={roll:i.roll,pitch:i.pitch,bearing:i.bearing},E={roll:o.roll===void 0?i.roll:o.roll,pitch:o.pitch===void 0?i.pitch:o.pitch,bearing:o.bearing===void 0?i.bearing:o.bearing},T=o.zoom!==void 0,Y=!i.isPaddingEqual(o.padding);let Q=!1;const z=o.center?s.Q.convert(o.center):p,Z=i.getConstrained(z,f).center;bn(i,Z);const q=i.clone();q.setCenter(Z),q.setZoom(T?+o.zoom:f+di(p.lat,z.lat)),q.setBearing(o.bearing);const J=new s.P(s.ae(i.centerPoint.x+o.offsetAsPoint.x,0,i.width),s.ae(i.centerPoint.y+o.offsetAsPoint.y,0,i.height));q.setLocationAtPoint(Z,J);const me=(o.offset&&o.offsetAsPoint.mag())>0?q.center:Z,pe=T?+o.zoom:f+di(p.lat,me.lat),_e=f+di(p.lat,0),xe=pe+di(me.lat,0),Me=s.bq(p.lng,me.lng),Re=s.bq(p.lat,me.lat),Ee=s.ac(xe-_e);return Q=pe!==f,{easeFunc:Le=>{if(s.b6(B,E)||oA({startEulerAngles:B,endEulerAngles:E,tr:i,k:Le,useSlerp:B.roll!=E.roll}),Y&&i.interpolatePadding(b,o.padding,Le),o.around)s.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(o.around,o.aroundPoint);else{const Ne=xe>_e?Math.min(2,Ee):Math.max(.5,Ee),Ke=Math.pow(Ne,1-Le),We=mu(p,Me,Re,Le*Ke);i.setCenter(We.wrap())}if(Q){const Ne=s.B.number(_e,xe,Le)+di(0,i.center.lat);i.setZoom(Ne)}},isZooming:Q,elevationCenter:me}}handleFlyTo(i,o){const f=o.zoom!==void 0,p=i.center,b=i.zoom,B=i.padding,E=!i.isPaddingEqual(o.padding),T=i.getConstrained(s.Q.convert(o.center||o.locationAtOffset),b).center,Y=f?+o.zoom:i.zoom+di(i.center.lat,T.lat),Q=i.clone();Q.setCenter(T),Q.setZoom(Y),Q.setBearing(o.bearing);const z=new s.P(s.ae(i.centerPoint.x+o.offsetAsPoint.x,0,i.width),s.ae(i.centerPoint.y+o.offsetAsPoint.y,0,i.height));Q.setLocationAtPoint(T,z);const Z=Q.center;bn(i,Z);const q=function(Re,Ee,Le){const Ne=Fn(Ee),Ke=Fn(Le),We=s.aV(Ne,Ke),ot=Math.acos(We),ct=gc(Re);return ot/(2*Math.PI)*ct}(i,p,Z),J=b+di(p.lat,0),me=Y+di(Z.lat,0),pe=s.ac(me-J);let _e;if(typeof o.minZoom=="number"){const Re=+o.minZoom+di(Z.lat,0),Ee=Math.min(Re,J,me)+di(0,Z.lat),Le=i.getConstrained(Z,Ee).zoom+di(Z.lat,0);_e=s.ac(Le-J)}const xe=s.bq(p.lng,Z.lng),Me=s.bq(p.lat,Z.lat);return{easeFunc:(Re,Ee,Le,Ne)=>{const Ke=mu(p,xe,Me,Le);E&&i.interpolatePadding(B,o.padding,Re);const We=Re===1?Z:Ke;i.setCenter(We.wrap());const ot=J+s.ah(Ee);i.setZoom(Re===1?Y:ot+di(0,We.lat))},scaleOfZoom:pe,targetCenter:Z,scaleOfMinZoom:_e,pixelPathLength:q}}static solveVectorScale(i,o,f,p,b){const B=p==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],E=[f[3],f[7],f[11],f[15]],T=i[0]*B[0]+i[1]*B[1]+i[2]*B[2],Y=i[0]*E[0]+i[1]*E[1]+i[2]*E[2],Q=o[0]*B[0]+o[1]*B[1]+o[2]*B[2],z=o[0]*E[0]+o[1]*E[1]+o[2]*E[2];return Q+b*Y===T+b*z||E[3]*(T-Q)+B[3]*(z-Y)+T*z==Q*Y?null:(Q+B[3]-b*z-b*E[3])/(Q-T-b*z+b*Y)}static getLesserNonNegativeNonNull(i,o){return o!==null&&o>=0&&o<i?o:i}}class dA{constructor(i){this._globe=i,this._mercatorCameraHelper=new lA,this._verticalPerspectiveCameraHelper=new Ea}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,o){return this.currentHelper.handlePanInertia(i,o)}handleMapControlsRollPitchBearingZoom(i,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,o)}handleMapControlsPan(i,o,f){this.currentHelper.handleMapControlsPan(i,o,f)}cameraForBoxAndBearing(i,o,f,p,b){return this.currentHelper.cameraForBoxAndBearing(i,o,f,p,b)}handleJumpToCenterZoom(i,o){this.currentHelper.handleJumpToCenterZoom(i,o)}handleEaseTo(i,o){return this.currentHelper.handleEaseTo(i,o)}handleFlyTo(i,o){return this.currentHelper.handleFlyTo(i,o)}}const hl=(_,i)=>s.x(_,i&&i.filter(o=>o.identifier!=="source.canvas")),vc=s.bw();class fA extends s.E{constructor(i,o={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const p=this.sourceCaches[f].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[f].reload()}},this.map=i,this.dispatcher=new Ct(wt(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,p)=>this.getGlyphs(f,p)),this.dispatcher.registerMessageHandler("GI",(f,p)=>this.getImages(f,p)),this.imageManager=new oe,this.imageManager.setEventedParent(this),this.glyphManager=new Ve(i._requestManager,o.localIdeographFontFamily),this.lineAtlas=new gt(256,512),this.crossTileSymbolIndex=new _s,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),ui().on(hi,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const p=this.sourceCaches[f.sourceId];if(!p)return;const b=p.getSource();if(b&&b.vectorLayerIds)for(const B in this._layers){const E=this._layers[B];E.source===b.id&&this._validateLayer(E)}})}loadURL(i,o={},f){this.fire(new s.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const p=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;s.j(p,this._loadStyleRequest).then(B=>{this._loadStyleRequest=null,this._load(B.data,o,f)}).catch(B=>{this._loadStyleRequest=null,B&&!b.signal.aborted&&this.fire(new s.k(B))})}loadJSON(i,o={},f){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,U.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(i,o,f)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(vc,{validate:!1})}_load(i,o,f){var p,b;const B=o.transformStyle?o.transformStyle(f,i):i;if(!o.validate||!hl(this,s.y(B))){this._loaded=!0,this.stylesheet=B;for(const E in B.sources)this.addSource(E,B.sources[E],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new rt(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new _t(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const i=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of i){const f=s.bA(o);f.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=f}}_loadSprite(i,o=!1,f=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,B,E,T){return s._(this,void 0,void 0,function*(){const Y=he(b),Q=E>1?"@2x":"",z={},Z={};for(const{id:q,url:J}of Y){const me=B.transformRequest(ae(J,Q,".json"),"SpriteJSON");z[q]=s.j(me,T);const pe=B.transformRequest(ae(J,Q,".png"),"SpriteImage");Z[q]=de.getImage(pe,T)}return yield Promise.all([...Object.values(z),...Object.values(Z)]),function(q,J){return s._(this,void 0,void 0,function*(){const me={};for(const pe in q){me[pe]={};const _e=U.getImageCanvasContext((yield J[pe]).data),xe=(yield q[pe]).data;for(const Me in xe){const{width:Re,height:Ee,x:Le,y:Ne,sdf:Ke,pixelRatio:We,stretchX:ot,stretchY:ct,content:st,textFitWidth:Nt,textFitHeight:Rt}=xe[Me];me[pe][Me]={data:null,pixelRatio:We,sdf:Ke,stretchX:ot,stretchY:ct,content:st,textFitWidth:Nt,textFitHeight:Rt,spriteData:{width:Re,height:Ee,x:Le,y:Ne,context:_e}}}}return me})}(z,Z)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(const B in b){this._spritesImagesIds[B]=[];const E=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter(T=>!(T in b)):[];for(const T of E)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(const T in b[B]){const Y=B==="default"?T:`${B}:${T}`;this._spritesImagesIds[B].push(Y),Y in this.imageManager.images?this.imageManager.updateImage(Y,b[B][T],!1):this.imageManager.addImage(Y,b[B][T]),o&&(this._changedImages[Y]=!0)}}}).catch(b=>{this._spriteRequest=null,p=b,this.fire(new s.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),f&&f(p)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(i){const o=this.sourceCaches[i.source];if(!o)return;const f=i.sourceLayer;if(!f)return;const p=o.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(f)===-1)&&this.fire(new s.k(new Error(`Source layer "${f}" does not exist on source "${p.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,o=!1){const f=this._serializedAllLayers();if(!i||i.length===0)return Object.values(o?s.bB(f):f);const p=[];for(const b of i)if(f[b]){const B=o?s.bB(f[b]):f[b];p.push(B)}return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const o=Object.keys(this._layers);for(const f of o){const p=this._layers[f];p.type!=="custom"&&(i[f]=p.serialize())}return i}hasTransitions(){var i,o,f;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const o=this._changed;if(o){const p=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(p.length||b.length)&&this._updateWorkerLayers(p,b);for(const B in this._updatedSources){const E=this._updatedSources[B];if(E==="reload")this._reloadSource(B);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const f={};for(const p in this.sourceCaches){const b=this.sourceCaches[p];f[p]=b.used,b.used=!1}for(const p of this._order){const b=this._layers[p];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const p in f){const b=this.sourceCaches[p];!!f[p]!=!!b.used&&b.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,o&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,o={}){var f;this._checkLoaded();const p=this.serialize();if(i=o.transformStyle?o.transformStyle(p,i):i,((f=o.validate)===null||f===void 0||f)&&hl(this,s.y(i)))return!1;(i=s.bB(i)).layers=s.bz(i.layers);const b=s.bC(p,i),B=this._getOperationsToPerform(b);if(B.unimplemented.length>0)throw new Error(`Unimplemented: ${B.unimplemented.join(", ")}.`);if(B.operations.length===0)return!1;for(const E of B.operations)E();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const o=[],f=[];for(const p of i)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":o.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":o.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":o.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setTransition":o.push(()=>{});break;default:f.push(p.command)}return{operations:o,unimplemented:f}}addImage(i,o){if(this.getImage(i))return this.fire(new s.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,o),this._afterImageUpdated(i)}updateImage(i,o){this.imageManager.updateImage(i,o)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,o,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(s.y.source,`sources.${i}`,o,null,f))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const p=this.sourceCaches[i]=new et(i,o,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:i})),p.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new s.k(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const o=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],o.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,o){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(o),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,o,f={}){this._checkLoaded();const p=i.id;if(this.getLayer(p))return void this.fire(new s.k(new Error(`Layer "${p}" already exists on this map.`)));let b;if(i.type==="custom"){if(hl(this,s.bD(i)))return;b=s.bA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(p,i.source),i=s.bB(i),i=s.e(i,{source:p})),this._validate(s.y.layer,`layers.${p}`,i,{arrayIndex:-1},f))return;b=s.bA(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:p}})}const B=o?this._order.indexOf(o):this._order.length;if(o&&B===-1)this.fire(new s.k(new Error(`Cannot add layer "${p}" before non-existing layer "${o}".`)));else{if(this._order.splice(B,0,p),this._layerOrderChanged=!0,this._layers[p]=b,this._removedLayers[p]&&b.source&&b.type!=="custom"){const E=this._removedLayers[p];delete this._removedLayers[p],E.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,o){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===o)return;const f=this._order.indexOf(i);this._order.splice(f,1);const p=o?this._order.indexOf(o):this._order.length;o&&p===-1?this.fire(new s.k(new Error(`Cannot move layer "${i}" before non-existing layer "${o}".`))):(this._order.splice(p,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const o=this._layers[i];if(!o)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${i}".`)));o.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=o,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],o.onRemove&&o.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,o,f){this._checkLoaded();const p=this.getLayer(i);p?p.minzoom===o&&p.maxzoom===f||(o!=null&&(p.minzoom=o),f!=null&&(p.maxzoom=f),this._updateLayer(p)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,o,f={}){this._checkLoaded();const p=this.getLayer(i);if(p){if(!s.bE(p.filter,o))return o==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(s.y.filter,`layers.${p.id}.filter`,o,null,f)||(p.filter=s.bB(o),this._updateLayer(p)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return s.bB(this.getLayer(i).filter)}setLayoutProperty(i,o,f,p={}){this._checkLoaded();const b=this.getLayer(i);b?s.bE(b.getLayoutProperty(o),f)||(b.setLayoutProperty(o,f,p),this._updateLayer(b)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,o){const f=this.getLayer(i);if(f)return f.getLayoutProperty(o);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,o,f,p={}){this._checkLoaded();const b=this.getLayer(i);b?s.bE(b.getPaintProperty(o),f)||(b.setPaintProperty(o,f,p)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,o){return this.getLayer(i).getPaintProperty(o)}setFeatureState(i,o){this._checkLoaded();const f=i.source,p=i.sourceLayer,b=this.sourceCaches[f];if(b===void 0)return void this.fire(new s.k(new Error(`The source '${f}' does not exist in the map's style.`)));const B=b.getSource().type;B==="geojson"&&p?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||p?(i.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(p,i.id,o)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,o){this._checkLoaded();const f=i.source,p=this.sourceCaches[f];if(p===void 0)return void this.fire(new s.k(new Error(`The source '${f}' does not exist in the map's style.`)));const b=p.getSource().type,B=b==="vector"?i.sourceLayer:void 0;b!=="vector"||B?o&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(B,i.id,o):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const o=i.source,f=i.sourceLayer,p=this.sourceCaches[o];if(p!==void 0)return p.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(f,i.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=s.bF(this.sourceCaches,b=>b.serialize()),o=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,p=this.stylesheet;return s.bG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:i,layers:o,terrain:f},b=>b!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const o=B=>this._layers[B].type==="fill-extrusion",f={},p=[];for(let B=this._order.length-1;B>=0;B--){const E=this._order[B];if(o(E)){f[E]=B;for(const T of i){const Y=T[E];if(Y)for(const Q of Y)p.push(Q)}}}p.sort((B,E)=>E.intersectionZ-B.intersectionZ);const b=[];for(let B=this._order.length-1;B>=0;B--){const E=this._order[B];if(o(E))for(let T=p.length-1;T>=0;T--){const Y=p[T].feature;if(f[Y.layer.id]<B)break;b.push(Y),p.pop()}else for(const T of i){const Y=T[E];if(Y)for(const Q of Y)b.push(Q.feature)}}return b}queryRenderedFeatures(i,o,f){o&&o.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",o.filter,null,o);const p={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Y of o.layers){const Q=this._layers[Y];if(!Q)return this.fire(new s.k(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];p[Q.source]=!0}}const b=[];o.availableImages=this._availableImages;const B=this._serializedAllLayers(),E=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,T=Object.assign(Object.assign({},o),{layers:E});for(const Y in this.sourceCaches)o.layers&&!p[Y]||b.push(ar(this.sourceCaches[Y],this._layers,B,i,T,f,this.map.terrain?(Q,z,Z)=>this.map.terrain.getElevation(Q,z,Z):void 0));return this.placement&&b.push(function(Y,Q,z,Z,q,J,me){const pe={},_e=J.queryRenderedSymbols(Z),xe=[];for(const Me of Object.keys(_e).map(Number))xe.push(me[Me]);xe.sort(Lt);for(const Me of xe){const Re=Me.featureIndex.lookupSymbolFeatures(_e[Me.bucketInstanceId],Q,Me.bucketIndex,Me.sourceLayerIndex,q.filter,q.layers,q.availableImages,Y);for(const Ee in Re){const Le=pe[Ee]=pe[Ee]||[],Ne=Re[Ee];Ne.sort((Ke,We)=>{const ot=Me.featureSortOrder;if(ot){const ct=ot.indexOf(Ke.featureIndex);return ot.indexOf(We.featureIndex)-ct}return We.featureIndex-Ke.featureIndex});for(const Ke of Ne)Le.push(Ke)}}return function(Me,Re,Ee){for(const Le in Me)for(const Ne of Me[Le])Ot(Ne,Ee[Re[Le].source]);return Me}(pe,Y,z)}(this._layers,B,this.sourceCaches,i,T,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,o){o&&o.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",o.filter,null,o);const f=this.sourceCaches[i];return f?function(p,b){const B=p.getRenderableIds().map(Y=>p.getTileByID(Y)),E=[],T={};for(let Y=0;Y<B.length;Y++){const Q=B[Y],z=Q.tileID.canonical.key;T[z]||(T[z]=!0,Q.querySourceFeatures(E,b))}return E}(f,o):[]}getLight(){return this.light.getLight()}setLight(i,o={}){this._checkLoaded();const f=this.light.getLight();let p=!1;for(const B in i)if(!s.bE(i[B],f[B])){p=!0;break}if(!p)return;const b={now:U.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,o),this.light.updateTransitions(b)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,o={}){this._checkLoaded();const f=this.getSky();let p=!1;if(!i&&!f)return;if(i&&!f)p=!0;else if(!i&&f)p=!0;else for(const B in i)if(!s.bE(i[B],f[B])){p=!0;break}if(!p)return;const b={now:U.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,o),this.sky.updateTransitions(b)}_setProjectionInternal(i){const o=function(f){if(Array.isArray(f)){const p=new Af({type:f});return{projection:p,transform:new yc,cameraHelper:new dA(p)}}switch(f){case"mercator":return{projection:new Si,transform:new $a,cameraHelper:new lA};case"globe":{const p=new Af({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new yc,cameraHelper:new dA(p)}}case"vertical-perspective":return{projection:new cA,transform:new bc,cameraHelper:new Ea};default:return s.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new Si,transform:new $a,cameraHelper:new lA}}}(i);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(i,o,f,p,b={}){return(!b||b.validate!==!1)&&hl(this,i.call(s.y,s.e({key:o,style:this.serialize(),value:f,styleSpec:s.v},p)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ui().off(hi,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const f=this.sourceCaches[o];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const o in this.sourceCaches)this.sourceCaches[o].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,o,f,p,b=!1){let B=!1,E=!1;const T={};for(const Y of this._order){const Q=this._layers[Y];if(Q.type!=="symbol")continue;if(!T[Q.source]){const Z=this.sourceCaches[Q.source];T[Q.source]=Z.getRenderableIds(!0).map(q=>Z.getTileByID(q)).sort((q,J)=>J.tileID.overscaledZ-q.tileID.overscaledZ||(q.tileID.isLessThan(J.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(Q,T[Q.source],i.center.lng);B=B||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U.now(),i.zoom))&&(this.pauseablePlacement=new uc(i,this.map.terrain,this._order,b,o,f,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U.now()),E=!0),B&&this.pauseablePlacement.placement.setStale()),E||B)for(const Y of this._order){const Q=this._layers[Y];Q.type==="symbol"&&this.placement.updateLayerOpacities(Q,T[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,o){return s._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,o.icons),f})}getGlyphs(i,o){return s._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(o.stacks),p=this.sourceCaches[o.source];return p&&p.setDependencies(o.tileID.key,o.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,o={}){this._checkLoaded(),i&&this._validate(s.y.glyphs,"glyphs",i,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,o,f={},p){this._checkLoaded();const b=[{id:i,url:o}],B=[...he(this.stylesheet.sprite),...b];this._validate(s.y.sprite,"sprite",B,null,f)||(this.stylesheet.sprite=B,this._loadSprite(b,!0,p))}removeSprite(i){this._checkLoaded();const o=he(this.stylesheet.sprite);if(o.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;o.splice(o.findIndex(f=>f.id===i),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return he(this.stylesheet.sprite)}setSprite(i,o={},f){this._checkLoaded(),i&&this._validate(s.y.sprite,"sprite",i,null,o)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}var bu=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class qa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,o,f,p,b,B,E,T,Y){this.context=i;let Q=this.boundPaintVertexBuffers.length!==p.length;for(let z=0;!Q&&z<p.length;z++)this.boundPaintVertexBuffers[z]!==p[z]&&(Q=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==f||Q||this.boundIndexBuffer!==b||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==Y?this.freshBind(o,f,p,b,B,E,T,Y):(i.bindVertexArray.set(this.vao),E&&E.bind(),b&&b.dynamicDraw&&b.bind(),T&&T.bind(),Y&&Y.bind())}freshBind(i,o,f,p,b,B,E,T){const Y=i.numAttributes,Q=this.context,z=Q.gl;this.vao&&this.destroy(),this.vao=Q.createVertexArray(),Q.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=p,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=T,o.enableAttributes(z,i);for(const Z of f)Z.enableAttributes(z,i);B&&B.enableAttributes(z,i),E&&E.enableAttributes(z,i),T&&T.enableAttributes(z,i),o.bind(),o.setVertexAttribPointers(z,i,b);for(const Z of f)Z.bind(),Z.setVertexAttribPointers(z,i,b);B&&(B.bind(),B.setVertexAttribPointers(z,i,b)),p&&p.bind(),E&&(E.bind(),E.setVertexAttribPointers(z,i,b)),T&&(T.bind(),T.setVertexAttribPointers(z,i,b)),Q.currentNumAttributes=Y}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const a2=(_,i,o,f,p)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:i,u_fog_color:o?o.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:o?o.calculateFogBlendOpacity(f):0,u_horizon_color:o?o.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),yu={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ws(_){const i=[];for(let o=0;o<_.length;o++){if(_[o]===null)continue;const f=_[o].split(" ");i.push(f.pop())}return i}class gA{constructor(i,o,f,p,b,B,E,T){const Y=i.gl;this.program=Y.createProgram();const Q=Ws(o.staticAttributes),z=f?f.getBinderAttributes():[],Z=Q.concat(z),q=Er.prelude.staticUniforms?Ws(Er.prelude.staticUniforms):[],J=E.staticUniforms?Ws(E.staticUniforms):[],me=o.staticUniforms?Ws(o.staticUniforms):[],pe=f?f.getBinderUniforms():[],_e=q.concat(J).concat(me).concat(pe),xe=[];for(const We of _e)xe.indexOf(We)<0&&xe.push(We);const Me=f?f.defines():[];Ua(Y)&&Me.unshift("#version 300 es"),b&&Me.push("#define OVERDRAW_INSPECTOR;"),B&&Me.push("#define TERRAIN3D;"),T&&Me.push(T);let Re=Me.concat(Er.prelude.fragmentSource,E.fragmentSource,o.fragmentSource).join(`
`),Ee=Me.concat(Er.prelude.vertexSource,E.vertexSource,o.vertexSource).join(`
`);Ua(Y)||(Re=function(We){return We.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Re),Ee=function(We){return We.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ee));const Le=Y.createShader(Y.FRAGMENT_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(Le,Re),Y.compileShader(Le),!Y.getShaderParameter(Le,Y.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${Y.getShaderInfoLog(Le)}`);Y.attachShader(this.program,Le);const Ne=Y.createShader(Y.VERTEX_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(Ne,Ee),Y.compileShader(Ne),!Y.getShaderParameter(Ne,Y.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${Y.getShaderInfoLog(Ne)}`);Y.attachShader(this.program,Ne),this.attributes={};const Ke={};this.numAttributes=Z.length;for(let We=0;We<this.numAttributes;We++)Z[We]&&(Y.bindAttribLocation(this.program,We,Z[We]),this.attributes[Z[We]]=We);if(Y.linkProgram(this.program),!Y.getProgramParameter(this.program,Y.LINK_STATUS))throw new Error(`Program failed to link: ${Y.getProgramInfoLog(this.program)}`);Y.deleteShader(Ne),Y.deleteShader(Le);for(let We=0;We<xe.length;We++){const ot=xe[We];if(ot&&!Ke[ot]){const ct=Y.getUniformLocation(this.program,ot);ct&&(Ke[ot]=ct)}}this.fixedUniforms=p(i,Ke),this.terrainUniforms=((We,ot)=>({u_depth:new s.bH(We,ot.u_depth),u_terrain:new s.bH(We,ot.u_terrain),u_terrain_dim:new s.b8(We,ot.u_terrain_dim),u_terrain_matrix:new s.bJ(We,ot.u_terrain_matrix),u_terrain_unpack:new s.bK(We,ot.u_terrain_unpack),u_terrain_exaggeration:new s.b8(We,ot.u_terrain_exaggeration)}))(i,Ke),this.projectionUniforms=((We,ot)=>({u_projection_matrix:new s.bJ(We,ot.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(We,ot.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(We,ot.u_projection_clipping_plane),u_projection_transition:new s.b8(We,ot.u_projection_transition),u_projection_fallback_matrix:new s.bJ(We,ot.u_projection_fallback_matrix)}))(i,Ke),this.binderUniforms=f?f.getUniforms(i,Ke):[]}draw(i,o,f,p,b,B,E,T,Y,Q,z,Z,q,J,me,pe,_e,xe,Me){const Re=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(p),i.setColorMode(b),i.setCullFace(B),T){i.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,T.depthTexture),i.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,T.texture);for(const Le in this.terrainUniforms)this.terrainUniforms[Le].set(T[Le])}if(Y)for(const Le in Y)this.projectionUniforms[yu[Le]].set(Y[Le]);if(E)for(const Le in this.fixedUniforms)this.fixedUniforms[Le].set(E[Le]);pe&&pe.setUniforms(i,this.binderUniforms,J,{zoom:me});let Ee=0;switch(o){case Re.LINES:Ee=2;break;case Re.TRIANGLES:Ee=3;break;case Re.LINE_STRIP:Ee=1}for(const Le of q.get()){const Ne=Le.vaos||(Le.vaos={});(Ne[Q]||(Ne[Q]=new qa)).bind(i,this,z,pe?pe.getPaintVertexBuffers():[],Z,Le.vertexOffset,_e,xe,Me),Re.drawElements(o,Le.primitiveLength*Ee,Re.UNSIGNED_SHORT,Le.primitiveOffset*Ee*2)}}}function cf(_,i,o){const f=1/s.az(o,1,i.transform.tileZoom),p=Math.pow(2,o.tileID.overscaledZ),b=o.tileSize*Math.pow(2,i.transform.tileZoom)/p,B=b*(o.tileID.canonical.x+o.tileID.wrap*p),E=b*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[f,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[B>>16,E>>16],u_pixel_coord_lower:[65535&B,65535&E]}}const pA=(_,i,o,f)=>{const p=_.style.light,b=p.properties.get("position"),B=[b.x,b.y,b.z],E=s.bN();p.properties.get("anchor")==="viewport"&&s.bO(E,_.transform.bearingInRadians),s.bP(B,B,E);const T=_.transform.transformLightDirection(B),Y=p.properties.get("color");return{u_lightpos:B,u_lightpos_globe:T,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+i,u_opacity:o,u_fill_translate:f}},s2=(_,i,o,f,p,b,B)=>s.e(pA(_,i,o,f),cf(b,_,B),{u_height_factor:-Math.pow(2,p.overscaledZ)/B.tileSize/8}),wo=(_,i,o,f)=>s.e(cf(i,_,o),{u_fill_translate:f}),o2=(_,i)=>({u_world:_,u_fill_translate:i}),hf=(_,i,o,f,p)=>s.e(wo(_,i,o,p),{u_world:f}),l2=(_,i,o,f,p)=>{const b=_.transform;let B,E,T=0;if(o.paint.get("circle-pitch-alignment")==="map"){const Y=s.az(i,1,b.zoom);B=!0,E=[Y,Y],T=Y/(s.Z*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*p}else B=!1,E=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+B,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:E,u_globe_extrude_scale:T,u_translate:f}},uf=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),vu=_=>({u_viewport_size:[_.width,_.height]}),xu=(_,i=1)=>({u_color:_,u_overlay:0,u_overlay_scale:i}),wu=(_,i,o,f)=>{const p=s.az(_,1,i)/(s.Z*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:s.az(_,1,i),u_intensity:o,u_globe_extrude_scale:p}},Bu=(_,i,o,f)=>{const p=s.K();s.bQ(p,0,_.width,_.height,0,0,1);const b=_.context.gl;return{u_matrix:p,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:o,u_color_ramp:f,u_opacity:i.paint.get("heatmap-opacity")}},df=(_,i,o)=>{const f=o.paint.get("hillshade-shadow-color"),p=o.paint.get("hillshade-highlight-color"),b=o.paint.get("hillshade-accent-color");let B=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);return o.paint.get("hillshade-illumination-anchor")==="viewport"&&(B+=_.transform.bearingInRadians),{u_image:0,u_latrange:ff(0,i.tileID),u_light:[o.paint.get("hillshade-exaggeration"),B],u_shadow:f,u_highlight:p,u_accent:b}},Bo=(_,i)=>{const o=i.stride,f=s.K();return s.bQ(f,0,s.Z,-8192,0,0,1),s.L(f,f,[0,-8192,0]),{u_matrix:f,u_image:1,u_dimension:[o,o],u_zoom:_.overscaledZ,u_unpack:i.getUnpackVector()}};function ff(_,i){const o=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new s.$(0,f/o).toLngLat().lat,new s.$(0,(f+1)/o).toLngLat().lat]}const xc=(_,i,o,f)=>{const p=_.transform;return{u_translation:pf(_,i,o),u_ratio:f/s.az(i,1,p.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},mA=(_,i,o,f,p)=>s.e(xc(_,i,o,f),{u_image:0,u_image_height:p}),A2=(_,i,o,f,p)=>{const b=_.transform,B=gf(i,b);return{u_translation:pf(_,i,o),u_texsize:i.imageAtlasTexture.size,u_ratio:f/s.az(i,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[B,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},wc=(_,i,o,f,p,b)=>{const B=_.lineAtlas,E=gf(i,_.transform),T=o.layout.get("line-cap")==="round",Y=B.getDash(p.from,T),Q=B.getDash(p.to,T),z=Y.width*b.fromScale,Z=Q.width*b.toScale;return s.e(xc(_,i,o,f),{u_patternscale_a:[E/z,-Y.height/2],u_patternscale_b:[E/Z,-Q.height/2],u_sdfgamma:B.width/(256*Math.min(z,Z)*_.pixelRatio)/2,u_image:0,u_tex_y_a:Y.y,u_tex_y_b:Q.y,u_mix:b.t})};function gf(_,i){return 1/s.az(_,1,i.tileZoom)}function pf(_,i,o){return s.aA(_.transform,i,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const mf=(_,i,o,f,p)=>{return{u_tl_parent:_,u_scale_parent:i,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(B=f.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(b=f.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:_f(f.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var b,B};function _f(_){_*=Math.PI/180;const i=Math.sin(_),o=Math.cos(_);return[(2*o+1)/3,(-Math.sqrt(3)*i-o+1)/3,(Math.sqrt(3)*i-o+1)/3]}const Cu=(_,i,o,f,p,b,B,E,T,Y,Q,z,Z)=>{const q=B.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:q.cameraToCenterDistance,u_pitch:q.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:q.width/q.height,u_fade_change:B.options.fadeDuration?B.symbolFadeChange:1,u_label_plane_matrix:E,u_coord_matrix:T,u_is_text:+Q,u_pitch_with_map:+f,u_is_along_line:p,u_is_variable_anchor:b,u_texsize:z,u_texture:0,u_translation:Y,u_pitched_scale:Z}},Bc=(_,i,o,f,p,b,B,E,T,Y,Q,z,Z,q)=>{const J=B.transform;return s.e(Cu(_,i,o,f,p,b,B,E,T,Y,Q,z,q),{u_gamma_scale:f?Math.cos(J.pitch*Math.PI/180)*J.cameraToCenterDistance:1,u_device_pixel_ratio:B.pixelRatio,u_is_halo:1})},bf=(_,i,o,f,p,b,B,E,T,Y,Q,z,Z)=>s.e(Bc(_,i,o,f,p,b,B,E,T,Y,!0,Q,0,Z),{u_texsize_icon:z,u_texture_icon:1}),Cc=(_,i)=>({u_opacity:_,u_color:i}),bs=(_,i,o,f,p)=>s.e(function(b,B,E,T){const Y=E.imageManager.getPattern(b.from.toString()),Q=E.imageManager.getPattern(b.to.toString()),{width:z,height:Z}=E.imageManager.getPixelSize(),q=Math.pow(2,T.tileID.overscaledZ),J=T.tileSize*Math.pow(2,E.transform.tileZoom)/q,me=J*(T.tileID.canonical.x+T.tileID.wrap*q),pe=J*T.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[z,Z],u_mix:B.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/s.az(T,1,E.transform.tileZoom),u_pixel_coord_upper:[me>>16,pe>>16],u_pixel_coord_lower:[65535&me,65535&pe]}}(o,p,i,f),{u_opacity:_}),Mc=(_,i)=>{},Mu={fillExtrusion:(_,i)=>({u_lightpos:new s.bL(_,i.u_lightpos),u_lightpos_globe:new s.bL(_,i.u_lightpos_globe),u_lightintensity:new s.b8(_,i.u_lightintensity),u_lightcolor:new s.bL(_,i.u_lightcolor),u_vertical_gradient:new s.b8(_,i.u_vertical_gradient),u_opacity:new s.b8(_,i.u_opacity),u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillExtrusionPattern:(_,i)=>({u_lightpos:new s.bL(_,i.u_lightpos),u_lightpos_globe:new s.bL(_,i.u_lightpos_globe),u_lightintensity:new s.b8(_,i.u_lightintensity),u_lightcolor:new s.bL(_,i.u_lightcolor),u_vertical_gradient:new s.b8(_,i.u_vertical_gradient),u_height_factor:new s.b8(_,i.u_height_factor),u_opacity:new s.b8(_,i.u_opacity),u_fill_translate:new s.bM(_,i.u_fill_translate),u_image:new s.bH(_,i.u_image),u_texsize:new s.bM(_,i.u_texsize),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade)}),fill:(_,i)=>({u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillPattern:(_,i)=>({u_image:new s.bH(_,i.u_image),u_texsize:new s.bM(_,i.u_texsize),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade),u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillOutline:(_,i)=>({u_world:new s.bM(_,i.u_world),u_fill_translate:new s.bM(_,i.u_fill_translate)}),fillOutlinePattern:(_,i)=>({u_world:new s.bM(_,i.u_world),u_image:new s.bH(_,i.u_image),u_texsize:new s.bM(_,i.u_texsize),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade),u_fill_translate:new s.bM(_,i.u_fill_translate)}),circle:(_,i)=>({u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_scale_with_map:new s.bH(_,i.u_scale_with_map),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_extrude_scale:new s.bM(_,i.u_extrude_scale),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(_,i.u_globe_extrude_scale),u_translate:new s.bM(_,i.u_translate)}),collisionBox:(_,i)=>({u_pixel_extrude_scale:new s.bM(_,i.u_pixel_extrude_scale)}),collisionCircle:(_,i)=>({u_viewport_size:new s.bM(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new s.bI(_,i.u_color),u_overlay:new s.bH(_,i.u_overlay),u_overlay_scale:new s.b8(_,i.u_overlay_scale)}),depth:Mc,clippingMask:Mc,heatmap:(_,i)=>({u_extrude_scale:new s.b8(_,i.u_extrude_scale),u_intensity:new s.b8(_,i.u_intensity),u_globe_extrude_scale:new s.b8(_,i.u_globe_extrude_scale)}),heatmapTexture:(_,i)=>({u_matrix:new s.bJ(_,i.u_matrix),u_world:new s.bM(_,i.u_world),u_image:new s.bH(_,i.u_image),u_color_ramp:new s.bH(_,i.u_color_ramp),u_opacity:new s.b8(_,i.u_opacity)}),hillshade:(_,i)=>({u_image:new s.bH(_,i.u_image),u_latrange:new s.bM(_,i.u_latrange),u_light:new s.bM(_,i.u_light),u_shadow:new s.bI(_,i.u_shadow),u_highlight:new s.bI(_,i.u_highlight),u_accent:new s.bI(_,i.u_accent)}),hillshadePrepare:(_,i)=>({u_matrix:new s.bJ(_,i.u_matrix),u_image:new s.bH(_,i.u_image),u_dimension:new s.bM(_,i.u_dimension),u_zoom:new s.b8(_,i.u_zoom),u_unpack:new s.bK(_,i.u_unpack)}),line:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels),u_image:new s.bH(_,i.u_image),u_image_height:new s.b8(_,i.u_image_height)}),linePattern:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_texsize:new s.bM(_,i.u_texsize),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_image:new s.bH(_,i.u_image),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels),u_scale:new s.bL(_,i.u_scale),u_fade:new s.b8(_,i.u_fade)}),lineSDF:(_,i)=>({u_translation:new s.bM(_,i.u_translation),u_ratio:new s.b8(_,i.u_ratio),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_units_to_pixels:new s.bM(_,i.u_units_to_pixels),u_patternscale_a:new s.bM(_,i.u_patternscale_a),u_patternscale_b:new s.bM(_,i.u_patternscale_b),u_sdfgamma:new s.b8(_,i.u_sdfgamma),u_image:new s.bH(_,i.u_image),u_tex_y_a:new s.b8(_,i.u_tex_y_a),u_tex_y_b:new s.b8(_,i.u_tex_y_b),u_mix:new s.b8(_,i.u_mix)}),raster:(_,i)=>({u_tl_parent:new s.bM(_,i.u_tl_parent),u_scale_parent:new s.b8(_,i.u_scale_parent),u_buffer_scale:new s.b8(_,i.u_buffer_scale),u_fade_t:new s.b8(_,i.u_fade_t),u_opacity:new s.b8(_,i.u_opacity),u_image0:new s.bH(_,i.u_image0),u_image1:new s.bH(_,i.u_image1),u_brightness_low:new s.b8(_,i.u_brightness_low),u_brightness_high:new s.b8(_,i.u_brightness_high),u_saturation_factor:new s.b8(_,i.u_saturation_factor),u_contrast_factor:new s.b8(_,i.u_contrast_factor),u_spin_weights:new s.bL(_,i.u_spin_weights),u_coords_top:new s.bK(_,i.u_coords_top),u_coords_bottom:new s.bK(_,i.u_coords_bottom)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new s.bH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(_,i.u_is_size_feature_constant),u_size_t:new s.b8(_,i.u_size_t),u_size:new s.b8(_,i.u_size),u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_pitch:new s.b8(_,i.u_pitch),u_rotate_symbol:new s.bH(_,i.u_rotate_symbol),u_aspect_ratio:new s.b8(_,i.u_aspect_ratio),u_fade_change:new s.b8(_,i.u_fade_change),u_label_plane_matrix:new s.bJ(_,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(_,i.u_coord_matrix),u_is_text:new s.bH(_,i.u_is_text),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_is_along_line:new s.bH(_,i.u_is_along_line),u_is_variable_anchor:new s.bH(_,i.u_is_variable_anchor),u_texsize:new s.bM(_,i.u_texsize),u_texture:new s.bH(_,i.u_texture),u_translation:new s.bM(_,i.u_translation),u_pitched_scale:new s.b8(_,i.u_pitched_scale)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new s.bH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(_,i.u_is_size_feature_constant),u_size_t:new s.b8(_,i.u_size_t),u_size:new s.b8(_,i.u_size),u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_pitch:new s.b8(_,i.u_pitch),u_rotate_symbol:new s.bH(_,i.u_rotate_symbol),u_aspect_ratio:new s.b8(_,i.u_aspect_ratio),u_fade_change:new s.b8(_,i.u_fade_change),u_label_plane_matrix:new s.bJ(_,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(_,i.u_coord_matrix),u_is_text:new s.bH(_,i.u_is_text),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_is_along_line:new s.bH(_,i.u_is_along_line),u_is_variable_anchor:new s.bH(_,i.u_is_variable_anchor),u_texsize:new s.bM(_,i.u_texsize),u_texture:new s.bH(_,i.u_texture),u_gamma_scale:new s.b8(_,i.u_gamma_scale),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_is_halo:new s.bH(_,i.u_is_halo),u_translation:new s.bM(_,i.u_translation),u_pitched_scale:new s.b8(_,i.u_pitched_scale)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new s.bH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(_,i.u_is_size_feature_constant),u_size_t:new s.b8(_,i.u_size_t),u_size:new s.b8(_,i.u_size),u_camera_to_center_distance:new s.b8(_,i.u_camera_to_center_distance),u_pitch:new s.b8(_,i.u_pitch),u_rotate_symbol:new s.bH(_,i.u_rotate_symbol),u_aspect_ratio:new s.b8(_,i.u_aspect_ratio),u_fade_change:new s.b8(_,i.u_fade_change),u_label_plane_matrix:new s.bJ(_,i.u_label_plane_matrix),u_coord_matrix:new s.bJ(_,i.u_coord_matrix),u_is_text:new s.bH(_,i.u_is_text),u_pitch_with_map:new s.bH(_,i.u_pitch_with_map),u_is_along_line:new s.bH(_,i.u_is_along_line),u_is_variable_anchor:new s.bH(_,i.u_is_variable_anchor),u_texsize:new s.bM(_,i.u_texsize),u_texsize_icon:new s.bM(_,i.u_texsize_icon),u_texture:new s.bH(_,i.u_texture),u_texture_icon:new s.bH(_,i.u_texture_icon),u_gamma_scale:new s.b8(_,i.u_gamma_scale),u_device_pixel_ratio:new s.b8(_,i.u_device_pixel_ratio),u_is_halo:new s.bH(_,i.u_is_halo),u_translation:new s.bM(_,i.u_translation),u_pitched_scale:new s.b8(_,i.u_pitched_scale)}),background:(_,i)=>({u_opacity:new s.b8(_,i.u_opacity),u_color:new s.bI(_,i.u_color)}),backgroundPattern:(_,i)=>({u_opacity:new s.b8(_,i.u_opacity),u_image:new s.bH(_,i.u_image),u_pattern_tl_a:new s.bM(_,i.u_pattern_tl_a),u_pattern_br_a:new s.bM(_,i.u_pattern_br_a),u_pattern_tl_b:new s.bM(_,i.u_pattern_tl_b),u_pattern_br_b:new s.bM(_,i.u_pattern_br_b),u_texsize:new s.bM(_,i.u_texsize),u_mix:new s.b8(_,i.u_mix),u_pattern_size_a:new s.bM(_,i.u_pattern_size_a),u_pattern_size_b:new s.bM(_,i.u_pattern_size_b),u_scale_a:new s.b8(_,i.u_scale_a),u_scale_b:new s.b8(_,i.u_scale_b),u_pixel_coord_upper:new s.bM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(_,i.u_tile_units_to_pixels)}),terrain:(_,i)=>({u_texture:new s.bH(_,i.u_texture),u_ele_delta:new s.b8(_,i.u_ele_delta),u_fog_matrix:new s.bJ(_,i.u_fog_matrix),u_fog_color:new s.bI(_,i.u_fog_color),u_fog_ground_blend:new s.b8(_,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(_,i.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(_,i.u_horizon_color),u_horizon_fog_blend:new s.b8(_,i.u_horizon_fog_blend),u_is_globe_mode:new s.b8(_,i.u_is_globe_mode)}),terrainDepth:(_,i)=>({u_ele_delta:new s.b8(_,i.u_ele_delta)}),terrainCoords:(_,i)=>({u_texture:new s.bH(_,i.u_texture),u_terrain_coords_id:new s.b8(_,i.u_terrain_coords_id),u_ele_delta:new s.b8(_,i.u_ele_delta)}),projectionErrorMeasurement:(_,i)=>({u_input:new s.b8(_,i.u_input),u_output_expected:new s.b8(_,i.u_output_expected)}),atmosphere:(_,i)=>({u_sun_pos:new s.bL(_,i.u_sun_pos),u_atmosphere_blend:new s.b8(_,i.u_atmosphere_blend),u_globe_position:new s.bL(_,i.u_globe_position),u_globe_radius:new s.b8(_,i.u_globe_radius),u_inv_proj_matrix:new s.bJ(_,i.u_inv_proj_matrix)}),sky:(_,i)=>({u_sky_color:new s.bI(_,i.u_sky_color),u_horizon_color:new s.bI(_,i.u_horizon_color),u_horizon:new s.bM(_,i.u_horizon),u_horizon_normal:new s.bM(_,i.u_horizon_normal),u_sky_horizon_blend:new s.b8(_,i.u_sky_horizon_blend),u_sky_blend:new s.b8(_,i.u_sky_blend)})};class Ru{constructor(i,o,f){this.context=i;const p=i.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Iu{constructor(i,o,f,p){this.length=o.length,this.attributes=f,this.itemSize=o.bytesPerElement,this.dynamicDraw=p,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,o){for(let f=0;f<this.attributes.length;f++){const p=o.attributes[this.attributes[f].name];p!==void 0&&i.enableVertexAttribArray(p)}}setVertexAttribPointers(i,o,f){for(let p=0;p<this.attributes.length;p++){const b=this.attributes[p],B=o.attributes[b.name];B!==void 0&&i.vertexAttribPointer(B,b.components,i[yf[b.type]],!1,this.itemSize,b.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Uu extends Pr{getDefault(){return s.b7.transparent}set(i){const o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class c2 extends Pr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class h2 extends Pr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class u2 extends Pr{getDefault(){return[!0,!0,!0,!0]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class d2 extends Pr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class vf extends Pr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class f2 extends Pr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const o=this.current;(i.func!==o.func||i.ref!==o.ref||i.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class xf extends Pr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Rc extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ic extends Pr{getDefault(){return[0,1]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Uc extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=i,this.dirty=!1}}class Eu extends Pr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Co extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.BLEND):o.disable(o.BLEND),this.current=i,this.dirty=!1}}class ul extends Pr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class va extends Pr{getDefault(){return s.b7.transparent}set(i){const o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class wf extends Pr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Bf extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;i?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=i,this.dirty=!1}}class Fu extends Pr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Mo extends Pr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ec extends Pr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Fc extends Pr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class _A extends Pr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Tc extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Cf extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class dl extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class fl extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Mf extends Pr{getDefault(){return null}set(i){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Tu extends Pr{getDefault(){return null}set(i){var o;if(i===this.current&&!this.dirty)return;const f=this.gl;Ua(f)?f.bindVertexArray(i):(o=f.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Or extends Pr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Sc extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class g2 extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Nc extends Pr{constructor(i,o){super(i),this.context=i,this.parent=o}getDefault(){return null}}class bA extends Nc{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class p2 extends Nc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class m2 extends Nc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,i),this.current=i,this.dirty=!1}}const Su="Framebuffer is not complete";class _2{constructor(i,o,f,p,b){this.context=i,this.width=o,this.height=f;const B=i.gl,E=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new bA(i,E),p)this.depthAttachment=b?new m2(i,E):new p2(i,E);else if(b)throw new Error("Stencil cannot be set without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error(Su)}destroy(){const i=this.context.gl,o=this.colorAttachment.get();if(o&&i.deleteTexture(o),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Nu{constructor(i){var o,f;if(this.gl=i,this.clearColor=new Uu(this),this.clearDepth=new c2(this),this.clearStencil=new h2(this),this.colorMask=new u2(this),this.depthMask=new d2(this),this.stencilMask=new vf(this),this.stencilFunc=new f2(this),this.stencilOp=new xf(this),this.stencilTest=new Rc(this),this.depthRange=new Ic(this),this.depthTest=new Uc(this),this.depthFunc=new Eu(this),this.blend=new Co(this),this.blendFunc=new ul(this),this.blendColor=new va(this),this.blendEquation=new wf(this),this.cullFace=new Bf(this),this.cullFaceSide=new Fu(this),this.frontFace=new Mo(this),this.program=new Ec(this),this.activeTexture=new Fc(this),this.viewport=new _A(this),this.bindFramebuffer=new Tc(this),this.bindRenderbuffer=new Cf(this),this.bindTexture=new dl(this),this.bindVertexBuffer=new fl(this),this.bindElementBuffer=new Mf(this),this.bindVertexArray=new Tu(this),this.pixelStoreUnpack=new Or(this),this.pixelStoreUnpackPremultiplyAlpha=new Sc(this),this.pixelStoreUnpackFlipY=new g2(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Ua(i)){this.HALF_FLOAT=i.HALF_FLOAT;const p=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=i.RGBA16F)!==null&&o!==void 0?o:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:p==null?void 0:p.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const p=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,o){return new Ru(this,i,o)}createVertexBuffer(i,o,f){return new Iu(this,i,o,f)}createRenderbuffer(i,o,f){const p=this.gl,b=p.createRenderbuffer();return this.bindRenderbuffer.set(b),p.renderbufferStorage(p.RENDERBUFFER,i,o,f),this.bindRenderbuffer.set(null),b}createFramebuffer(i,o,f,p){return new _2(this,i,o,f,p)}clear({color:i,depth:o,stencil:f}){const p=this.gl;let b=0;i&&(b|=p.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(b|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),f!==void 0&&(b|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),p.clear(b)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){s.bE(i.blendFunction,Jr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Ua(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var o;return Ua(this.gl)?this.gl.deleteVertexArray(i):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let Ro;function yA(_,i,o,f,p){const b=_.context,B=_.transform,E=b.gl,T=_.useProgram("collisionBox"),Y=[];let Q=0,z=0;for(let _e=0;_e<f.length;_e++){const xe=f[_e],Me=i.getTile(xe).getBucket(o);if(!Me)continue;const Re=p?Me.textCollisionBox:Me.iconCollisionBox,Ee=Me.collisionCircleArray;Ee.length>0&&(Y.push({circleArray:Ee,circleOffset:z,coord:xe}),Q+=Ee.length/4,z=Q),Re&&T.draw(b,E.LINES,wr.disabled,Qr.disabled,_.colorModeForRenderPass(),Hr.disabled,uf(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),B.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,_.transform.zoom,null,null,Re.collisionVertexBuffer)}if(!p||!Y.length)return;const Z=_.useProgram("collisionCircle"),q=new s.bR;q.resize(4*Q),q._trim();let J=0;for(const _e of Y)for(let xe=0;xe<_e.circleArray.length/4;xe++){const Me=4*xe,Re=_e.circleArray[Me+0],Ee=_e.circleArray[Me+1],Le=_e.circleArray[Me+2],Ne=_e.circleArray[Me+3];q.emplace(J++,Re,Ee,Le,Ne,0),q.emplace(J++,Re,Ee,Le,Ne,1),q.emplace(J++,Re,Ee,Le,Ne,2),q.emplace(J++,Re,Ee,Le,Ne,3)}(!Ro||Ro.length<2*Q)&&(Ro=function(_e){const xe=2*_e,Me=new s.bT;Me.resize(xe),Me._trim();for(let Re=0;Re<xe;Re++){const Ee=6*Re;Me.uint16[Ee+0]=4*Re+0,Me.uint16[Ee+1]=4*Re+1,Me.uint16[Ee+2]=4*Re+2,Me.uint16[Ee+3]=4*Re+2,Me.uint16[Ee+4]=4*Re+3,Me.uint16[Ee+5]=4*Re+0}return Me}(Q));const me=b.createIndexBuffer(Ro,!0),pe=b.createVertexBuffer(q,s.bS.members,!0);for(const _e of Y){const xe=vu(_.transform);Z.draw(b,E.TRIANGLES,wr.disabled,Qr.disabled,_.colorModeForRenderPass(),Hr.disabled,xe,_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e.coord),null,o.id,pe,me,s.aJ.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,_.transform.zoom,null,null,null)}pe.destroy(),me.destroy()}const Yu=s.ad(new Float32Array(16));function Pu(_,i,o,f,p,b){const{horizontalAlign:B,verticalAlign:E}=s.aE(_);return new s.P((-(B-.5)*i/p+f[0])*b,(-(E-.5)*o/p+f[1])*b)}function Rf(_,i,o,f,p,b){const B=i.tileAnchorPoint.add(new s.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let E=f.mult(b);o||(E=E.rotate(-p));const T=B.add(E);return mt(T.x,T.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(o){const E=yr(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(_),T=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return _.add(f.rotate(T))}return _.add(f)}function Yc(_,i,o,f,p,b,B,E,T,Y,Q,z){const Z=_.text.placedSymbolArray,q=_.text.dynamicLayoutVertexArray,J=_.icon.dynamicLayoutVertexArray,me={};q.clear();for(let pe=0;pe<Z.length;pe++){const _e=Z.get(pe),xe=_e.hidden||!_e.crossTileID||_.allowVerticalPlacement&&!_e.placedOrientation?null:f[_e.crossTileID];if(xe){const Me=new s.P(_e.anchorX,_e.anchorY),Re={getElevation:z,width:p.width,height:p.height,pitchedLabelPlaneMatrix:b,pitchWithMap:o,transform:p,tileAnchorPoint:Me,translation:Y,unwrappedTileID:Q},Ee=o?Ia(Me.x,Me.y,Re):yr(Me.x,Me.y,Re),Le=Kt(p.cameraToCenterDistance,Ee.signedDistanceFromCamera);let Ne=s.am(_.textSizeData,E,_e)*Le/s.ay;o&&(Ne*=_.tilePixelRatio/B);const{width:Ke,height:We,anchor:ot,textOffset:ct,textBoxScale:st}=xe,Nt=Pu(ot,Ke,We,ct,st,Ne),Rt=p.getPitchedTextCorrection(Me.x+Y[0],Me.y+Y[1],Q),bt=Rf(Ee.point,Re,i,Nt,-p.bearingInRadians,Rt),Wt=_.allowVerticalPlacement&&_e.placedOrientation===s.al.vertical?Math.PI/2:0;for(let Cr=0;Cr<_e.numGlyphs;Cr++)s.as(q,bt,Wt);T&&_e.associatedIconIndex>=0&&(me[_e.associatedIconIndex]={shiftedAnchor:bt,angle:Wt})}else Ir(_e.numGlyphs,q)}if(T){J.clear();const pe=_.icon.placedSymbolArray;for(let _e=0;_e<pe.length;_e++){const xe=pe.get(_e);if(xe.hidden)Ir(xe.numGlyphs,J);else{const Me=me[_e];if(Me)for(let Re=0;Re<xe.numGlyphs;Re++)s.as(J,Me.shiftedAnchor,Me.angle);else Ir(xe.numGlyphs,J)}}_.icon.dynamicLayoutVertexBuffer.updateData(J)}_.text.dynamicLayoutVertexBuffer.updateData(q)}function Pc(_,i,o){return o.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Lc(_,i,o,f,p,b,B,E,T,Y,Q,z,Z){const q=_.context,J=q.gl,me=_.transform,pe=E==="map",_e=T==="map",xe=E!=="viewport"&&o.layout.get("symbol-placement")!=="point",Me=pe&&!_e&&!xe,Re=!o.layout.get("symbol-sort-key").isConstant();let Ee=!1;const Le=_.getDepthModeForSublayer(0,wr.ReadOnly),Ne=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ke=[],We=me.getCircleRadiusCorrection();for(const ot of f){const ct=i.getTile(ot),st=ct.getBucket(o);if(!st)continue;const Nt=p?st.text:st.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const Rt=Nt.programConfigurations.get(o.id),bt=p||st.sdfIcons,Wt=p?st.textSizeData:st.iconSizeData,Cr=_e||me.pitch!==0,pr=_.useProgram(Pc(bt,p,st),Rt),wi=s.ak(Wt,me.zoom),ri=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ot);let Bi,pi,ii,ei,on=[0,0],Wi=null;if(p)pi=ct.glyphAtlasTexture,ii=J.LINEAR,Bi=ct.glyphAtlasTexture.size,st.iconsInText&&(on=ct.imageAtlasTexture.size,Wi=ct.imageAtlasTexture,ei=Cr||_.options.rotating||_.options.zooming||Wt.kind==="composite"||Wt.kind==="camera"?J.LINEAR:J.NEAREST);else{const Ii=o.layout.get("icon-size").constantOr(0)!==1||st.iconsNeedLinear;pi=ct.imageAtlasTexture,ii=bt||_.options.rotating||_.options.zooming||Ii||Cr?J.LINEAR:J.NEAREST,Bi=ct.imageAtlasTexture.size}const yn=s.az(ct,1,_.transform.zoom),Tn=At(pe,_.transform,yn),rs=s.K();s.an(rs,Tn);const ro=xt(_e,pe,_.transform,yn),ws=s.aA(me,ct,b,B),Bs=me.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),is=Ne&&st.hasTextData(),So=o.layout.get("icon-text-fit")!=="none"&&is&&st.hasIconData();if(xe){const Ii=_.style.map.terrain?(Di,Ci)=>_.style.map.terrain.getElevation(ot,Di,Ci):null,mi=o.layout.get("text-rotation-alignment")==="map";tr(st,_,p,Tn,rs,_e,Y,mi,ot.toUnwrapped(),me.width,me.height,ws,Ii)}const No=p&&Ne||So,la=xe||No?Yu:_e?Tn:_.transform.clipSpaceToPixelsMatrix,io=bt&&o.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Cs;Cs=bt?st.iconsInText?bf(Wt.kind,wi,Me,_e,xe,No,_,la,ro,ws,Bi,on,We):Bc(Wt.kind,wi,Me,_e,xe,No,_,la,ro,ws,p,Bi,0,We):Cu(Wt.kind,wi,Me,_e,xe,No,_,la,ro,ws,p,Bi,We);const Ms={program:pr,buffers:Nt,uniformValues:Cs,projectionData:Bs,atlasTexture:pi,atlasTextureIcon:Wi,atlasInterpolation:ii,atlasInterpolationIcon:ei,isSDF:bt,hasHalo:io};if(Re&&st.canOverlap){Ee=!0;const Ii=Nt.segments.get();for(const mi of Ii)Ke.push({segments:new s.aJ([mi]),sortKey:mi.sortKey,state:Ms,terrainData:ri})}else Ke.push({segments:Nt.segments,sortKey:0,state:Ms,terrainData:ri})}Ee&&Ke.sort((ot,ct)=>ot.sortKey-ct.sortKey);for(const ot of Ke){const ct=ot.state;if(q.activeTexture.set(J.TEXTURE0),ct.atlasTexture.bind(ct.atlasInterpolation,J.CLAMP_TO_EDGE),ct.atlasTextureIcon&&(q.activeTexture.set(J.TEXTURE1),ct.atlasTextureIcon&&ct.atlasTextureIcon.bind(ct.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),ct.isSDF){const st=ct.uniformValues;ct.hasHalo&&(st.u_is_halo=1,If(ct.buffers,ot.segments,o,_,ct.program,Le,Q,z,st,ct.projectionData,ot.terrainData)),st.u_is_halo=0}If(ct.buffers,ot.segments,o,_,ct.program,Le,Q,z,ct.uniformValues,ct.projectionData,ot.terrainData)}}function If(_,i,o,f,p,b,B,E,T,Y,Q){const z=f.context;p.draw(z,z.gl.TRIANGLES,b,B,E,Hr.backCCW,T,Q,Y,o.id,_.layoutVertexBuffer,_.indexBuffer,i,o.paint,f.transform.zoom,_.programConfigurations.get(o.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Lu(_,i,o,f,p){const b=_.context,B=b.gl,E=Qr.disabled,T=new Jr([B.ONE,B.ONE],s.b7.transparent,[!0,!0,!0,!0]),Y=i.getBucket(o);if(!Y)return;const Q=f.key;let z=o.heatmapFbos.get(Q);z||(z=Qu(b,i.tileSize,i.tileSize),o.heatmapFbos.set(Q,z)),b.bindFramebuffer.set(z.framebuffer),b.viewport.set([0,0,i.tileSize,i.tileSize]),b.clear({color:s.b7.transparent});const Z=Y.programConfigurations.get(o.id),q=_.useProgram("heatmap",Z,!p),J=_.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),me=_.style.map.terrain.getTerrainData(f);q.draw(b,B.TRIANGLES,wr.disabled,E,T,Hr.disabled,wu(i,_.transform.zoom,o.paint.get("heatmap-intensity"),1),me,J,o.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,o.paint,_.transform.zoom,Z)}function b2(_,i,o,f,p){const b=_.context,B=b.gl,E=_.transform;b.setColorMode(_.colorModeForRenderPass());const T=vA(b,i),Y=o.key,Q=i.heatmapFbos.get(Y);if(!Q)return;b.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,Q.colorAttachment.get()),b.activeTexture.set(B.TEXTURE1),T.bind(B.LINEAR,B.CLAMP_TO_EDGE);const z=E.getProjectionData({overscaledTileID:o,applyTerrainMatrix:p,applyGlobeMatrix:!f});_.useProgram("heatmapTexture").draw(b,B.TRIANGLES,wr.disabled,Qr.disabled,_.colorModeForRenderPass(),Hr.disabled,Bu(_,i,0,1),null,z,i.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,i.paint,E.zoom),Q.destroy(),i.heatmapFbos.delete(Y)}function Qu(_,i,o){var f,p;const b=_.gl,B=b.createTexture();b.bindTexture(b.TEXTURE_2D,B),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const E=(f=_.HALF_FLOAT)!==null&&f!==void 0?f:b.UNSIGNED_BYTE,T=(p=_.RGBA16F)!==null&&p!==void 0?p:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,T,i,o,0,b.RGBA,E,null);const Y=_.createFramebuffer(i,o,!1,!1);return Y.colorAttachment.set(B),Y}function vA(_,i){return i.colorRampTexture||(i.colorRampTexture=new V(_,i.colorRamp,_.gl.RGBA)),i.colorRampTexture}function Qc(_,i,o,f,p){if(!o||!f||!f.imageAtlas)return;const b=f.imageAtlas.patternPositions;let B=b[o.to.toString()],E=b[o.from.toString()];if(!B&&E&&(B=E),!E&&B&&(E=B),!B||!E){const T=p.getPaintProperty(i);B=b[T],E=b[T]}B&&E&&_.setConstantPatternPositions(B,E)}function ku(_,i,o,f,p,b,B,E){const T=_.context.gl,Y="fill-pattern",Q=o.paint.get(Y),z=Q&&Q.constantOr(1),Z=o.getCrossfadeParameters();let q,J,me,pe,_e;const xe=_.transform,Me=o.paint.get("fill-translate"),Re=o.paint.get("fill-translate-anchor");B?(J=z&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=T.LINES):(J=z?"fillPattern":"fill",q=T.TRIANGLES);const Ee=Q.constantOr(null);for(const Le of f){const Ne=i.getTile(Le);if(z&&!Ne.patternsLoaded())continue;const Ke=Ne.getBucket(o);if(!Ke)continue;const We=Ke.programConfigurations.get(o.id),ot=_.useProgram(J,We),ct=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Le);z&&(_.context.activeTexture.set(T.TEXTURE0),Ne.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),We.updatePaintBuffers(Z)),Qc(We,Y,Ee,Ne,o);const st=xe.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!E,applyTerrainMatrix:!0}),Nt=s.aA(xe,Ne,Me,Re);if(B){pe=Ke.indexBuffer2,_e=Ke.segments2;const bt=[T.drawingBufferWidth,T.drawingBufferHeight];me=J==="fillOutlinePattern"&&z?hf(_,Z,Ne,bt,Nt):o2(bt,Nt)}else pe=Ke.indexBuffer,_e=Ke.segments,me=z?wo(_,Z,Ne,Nt):{u_fill_translate:Nt};let Rt;if(_.renderPass==="translucent"&&E){const[bt]=_.getStencilConfigForOverlapAndUpdateStencilID(f);Rt=bt[Le.overscaledZ]}else Rt=_.stencilModeForClipping(Le);ot.draw(_.context,q,p,Rt,b,Hr.backCCW,me,ct,st,o.id,Ke.layoutVertexBuffer,pe,_e,o.paint,_.transform.zoom,We)}}function kc(_,i,o,f,p,b,B,E){const T=_.context,Y=T.gl,Q="fill-extrusion-pattern",z=o.paint.get(Q),Z=z.constantOr(1),q=o.getCrossfadeParameters(),J=o.paint.get("fill-extrusion-opacity"),me=z.constantOr(null),pe=_.transform;for(const _e of f){const xe=i.getTile(_e),Me=xe.getBucket(o);if(!Me)continue;const Re=_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e),Ee=Me.programConfigurations.get(o.id),Le=_.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Ee);Z&&(_.context.activeTexture.set(Y.TEXTURE0),xe.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Ee.updatePaintBuffers(q));const Ne=pe.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!E,applyTerrainMatrix:!0});Qc(Ee,Q,me,xe,o);const Ke=s.aA(pe,xe,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),We=o.paint.get("fill-extrusion-vertical-gradient"),ot=Z?s2(_,We,J,Ke,_e,q,xe):pA(_,We,J,Ke);Le.draw(T,T.gl.TRIANGLES,p,b,B,Hr.backCCW,ot,Re,Ne,o.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,o.paint,_.transform.zoom,Ee,_.style.map.terrain&&Me.centroidVertexBuffer)}}function gl(_,i,o,f,p,b,B,E,T){var Y;const Q=_.style.projection,z=_.context,Z=_.transform,q=z.gl,J=_.useProgram("hillshade"),me=!_.options.moving;for(const pe of f){const _e=i.getTile(pe),xe=_e.fbo;if(!xe)continue;const Me=Q.getMeshFromTileID(z,pe.canonical,E,!0,"raster"),Re=(Y=_.style.map.terrain)===null||Y===void 0?void 0:Y.getTerrainData(pe);z.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,xe.colorAttachment.get());const Ee=Z.getProjectionData({overscaledTileID:pe,aligned:me,applyGlobeMatrix:!T,applyTerrainMatrix:!0});J.draw(z,q.TRIANGLES,b,p[pe.overscaledZ],B,Hr.backCCW,df(_,_e,o),Re,Ee,o.id,Me.vertexBuffer,Me.indexBuffer,Me.segments)}}const xA=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function Dc(_,i,o,f,p,b,B,E,T=!1,Y=!1){const Q=f[f.length-1].overscaledZ,z=_.context,Z=z.gl,q=_.useProgram("raster"),J=_.transform,me=_.style.projection,pe=_.colorModeForRenderPass(),_e=!_.options.moving;for(const xe of f){const Me=_.getDepthModeForSublayer(xe.overscaledZ-Q,o.paint.get("raster-opacity")===1?wr.ReadWrite:wr.ReadOnly,Z.LESS),Re=i.getTile(xe);Re.registerFadeDuration(o.paint.get("raster-fade-duration"));const Ee=i.findLoadedParent(xe,0),Le=i.findLoadedSibling(xe),Ne=Uf(Re,Ee||Le||null,i,o,_.transform,_.style.map.terrain);let Ke,We;const ot=o.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;z.activeTexture.set(Z.TEXTURE0),Re.texture.bind(ot,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(Z.TEXTURE1),Ee?(Ee.texture.bind(ot,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Ke=Math.pow(2,Ee.tileID.overscaledZ-Re.tileID.overscaledZ),We=[Re.tileID.canonical.x*Ke%1,Re.tileID.canonical.y*Ke%1]):Re.texture.bind(ot,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Re.texture.useMipmap&&z.extTextureFilterAnisotropic&&_.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const ct=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),st=J.getProjectionData({overscaledTileID:xe,aligned:_e,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Nt=mf(We||[0,0],Ke||1,Ne,o,E),Rt=me.getMeshFromTileID(z,xe.canonical,b,B,"raster");q.draw(z,Z.TRIANGLES,Me,p?p[xe.overscaledZ]:Qr.disabled,pe,T?Hr.frontCCW:Hr.backCCW,Nt,ct,st,o.id,Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}}function Uf(_,i,o,f,p,b){const B=f.paint.get("raster-fade-duration");if(!b&&B>0){const E=U.now(),T=(E-_.timeAdded)/B,Y=i?(E-i.timeAdded)/B:-1,Q=o.getSource(),z=Ge(p,{tileSize:Q.tileSize,roundZoom:Q.roundZoom}),Z=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(_.tileID.overscaledZ-z),q=Z&&_.refreshedUponExpiration?1:s.ae(Z?T:1-Y,0,1);return _.refreshedUponExpiration&&T>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}const ki=new s.b7(1,0,0,1),Io=new s.b7(0,1,0,1),xa=new s.b7(0,0,1,1),Du=new s.b7(1,0,1,1),zu=new s.b7(0,1,1,1);function Zu(_,i,o,f){Js(_,0,i+o/2,_.transform.width,o,f)}function Uo(_,i,o,f){Js(_,i-o/2,0,o,_.transform.height,f)}function Js(_,i,o,f,p,b){const B=_.context,E=B.gl;E.enable(E.SCISSOR_TEST),E.scissor(i*_.pixelRatio,o*_.pixelRatio,f*_.pixelRatio,p*_.pixelRatio),B.clear({color:b}),E.disable(E.SCISSOR_TEST)}function Hu(_,i,o){const f=_.context,p=f.gl,b=_.useProgram("debug"),B=wr.disabled,E=Qr.disabled,T=_.colorModeForRenderPass(),Y="$debug",Q=_.style.map.terrain&&_.style.map.terrain.getTerrainData(o);f.activeTexture.set(p.TEXTURE0);const z=i.getTileByID(o.key).latestRawTileData,Z=Math.floor((z&&z.byteLength||0)/1024),q=i.getTile(o).tileSize,J=512/Math.min(q,512)*(o.overscaledZ/_.transform.zoom)*.5;let me=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(me+=` => ${o.overscaledZ}`),function(_e,xe){_e.initDebugOverlayCanvas();const Me=_e.debugOverlayCanvas,Re=_e.context.gl,Ee=_e.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,Me.width,Me.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(xe,5,5),Ee.strokeText(xe,5,5),_e.debugOverlayTexture.update(Me),_e.debugOverlayTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE)}(_,`${me} ${Z}kB`);const pe=_.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(f,p.TRIANGLES,B,E,Jr.alphaBlended,Hr.disabled,xu(s.b7.transparent,J),null,pe,Y,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(f,p.LINE_STRIP,B,E,T,Hr.disabled,xu(s.b7.red),Q,pe,Y,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Ou(_,i,o,f){const{isRenderingGlobe:p}=f,b=_.context,B=b.gl,E=_.transform,T=_.colorModeForRenderPass(),Y=_.getDepthModeFor3D(),Q=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(const z of o){const Z=i.getTerrainMesh(z.tileID),q=_.renderToTexture.getTexture(z),J=i.getTerrainData(z.tileID);b.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,q.texture);const me=i.getMeshFrameDelta(E.zoom),pe=E.calculateFogMatrix(z.tileID.toUnwrapped()),_e=a2(me,pe,_.style.sky,E.pitch,p),xe=E.getProjectionData({overscaledTileID:z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Q.draw(b,B.TRIANGLES,Y,Qr.disabled,T,Hr.backCCW,_e,J,xe,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function Xu(_,i){if(!i.mesh){const o=new s.aI;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const f=new s.aK;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),i.mesh=new nl(_.createVertexBuffer(o,Ka.members),_.createIndexBuffer(f),s.aJ.simpleSegment(0,0,o.length,f.length))}return i.mesh}class Ef{constructor(i,o){this.context=new Nu(i),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=et.maxUnderzooming+et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _s}resize(i,o,f){if(this.width=Math.floor(i*f),this.height=Math.floor(o*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const i=this.context,o=new s.aI;o.emplaceBack(0,0),o.emplaceBack(s.Z,0),o.emplaceBack(0,s.Z),o.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=i.createVertexBuffer(o,Ka.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);const f=new s.aI;f.emplaceBack(0,0),f.emplaceBack(s.Z,0),f.emplaceBack(0,s.Z),f.emplaceBack(s.Z,s.Z),this.debugBuffer=i.createVertexBuffer(f,Ka.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);const p=new s.bY;p.emplaceBack(0,0,0,0),p.emplaceBack(s.Z,0,s.Z,0),p.emplaceBack(0,s.Z,0,s.Z),p.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=i.createVertexBuffer(p,bu.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);const b=new s.aI;b.emplaceBack(0,0),b.emplaceBack(s.Z,0),b.emplaceBack(0,s.Z),b.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(b,Ka.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);const B=new s.aI;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(B,Ka.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);const E=new s.bZ;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(E);const T=new s.aK;T.emplaceBack(1,0,2),T.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const Y=this.context.gl;this.stencilClearMode=new Qr({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO),this.tileExtentMesh=new nl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const i=this.context,o=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=s.K();s.bQ(f,0,this.width,this.height,0,0,1),s.M(f,f,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const p={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(i,o.TRIANGLES,wr.disabled,this.stencilClearMode,Jr.disabled,Hr.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,o,f){if(this.currentStencilSource===i.source||!i.isTileClipped()||!o||!o.length)return;this.currentStencilSource=i.source,this.nextStencilID+o.length>256&&this.clearStencil();const p=this.context;p.setColorMode(Jr.disabled),p.setDepthMode(wr.disabled);const b={};for(const B of o)b[B.key]=this.nextStencilID++;this._renderTileMasks(b,o,f,!0),this._renderTileMasks(b,o,f,!1),this._tileClippingMaskIDs=b}_renderTileMasks(i,o,f,p){const b=this.context,B=b.gl,E=this.style.projection,T=this.transform,Y=this.useProgram("clippingMask");for(const Q of o){const z=i[Q.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Q),q=E.getMeshFromTileID(this.context,Q.canonical,p,!0,"stencil"),J=T.getProjectionData({overscaledTileID:Q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});Y.draw(b,B.TRIANGLES,wr.disabled,new Qr({func:B.ALWAYS,mask:0},z,255,B.KEEP,B.KEEP,B.REPLACE),Jr.disabled,f?Hr.disabled:Hr.backCCW,null,Z,J,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}_renderTilesDepthBuffer(){const i=this.context,o=i.gl,f=this.style.projection,p=this.transform,b=this.useProgram("depth"),B=this.getDepthModeFor3D(),E=Ie(p,{tileSize:p.tileSize});for(const T of E){const Y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T),Q=f.getMeshFromTileID(this.context,T.canonical,!0,!0,"raster"),z=p.getProjectionData({overscaledTileID:T,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(i,o.TRIANGLES,B,Qr.disabled,Jr.disabled,Hr.backCCW,null,Y,z,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,o=this.context.gl;return new Qr({func:o.NOTEQUAL,mask:255},i,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(i){const o=this.context.gl;return new Qr({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){const o=this.context.gl,f=i.sort((B,E)=>E.overscaledZ-B.overscaledZ),p=f[f.length-1].overscaledZ,b=f[0].overscaledZ-p+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const B={};for(let E=0;E<b;E++)B[E+p]=new Qr({func:o.GEQUAL,mask:255},E+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=b,[B,f]}return[{[p]:Qr.disabled},f]}stencilConfigForOverlapTwoPass(i){const o=this.context.gl,f=i.sort((B,E)=>E.overscaledZ-B.overscaledZ),p=f[f.length-1].overscaledZ,b=f[0].overscaledZ-p+1;if(this.clearStencil(),b>1){const B={},E={};for(let T=0;T<b;T++)B[T+p]=new Qr({func:o.GREATER,mask:255},b+1+T,255,o.KEEP,o.KEEP,o.REPLACE),E[T+p]=new Qr({func:o.GREATER,mask:255},1+T,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*b+1,[B,E,f]}return this.nextStencilID=3,[{[p]:new Qr({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[p]:new Qr({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Jr([i.CONSTANT_COLOR,i.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jr.unblended:Jr.alphaBlended}getDepthModeForSublayer(i,o,f){if(!this.opaquePassEnabledForLayer())return wr.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new wr(f||this.context.gl.LEQUAL,o,[p,p])}getDepthModeFor3D(){return new wr(this.context.gl.LEQUAL,wr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,o){var f,p;this.style=i,this.options=o,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(U.now()),this.imageManager.beginFrame();const b=this.style._order,B=this.style.sourceCaches,E={},T={},Y={},Q={isRenderingToTexture:!1,isRenderingGlobe:((f=i.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const Z in B){const q=B[Z];q.used&&q.prepare(this.context),E[Z]=q.getVisibleCoordinates(!1),T[Z]=E[Z].slice().reverse(),Y[Z]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<b.length;Z++)if(this.style._layers[b[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of b){const q=this.style._layers[Z];if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const J=T[q.source];(q.type==="custom"||J.length)&&this.renderLayer(this,B[q.source],q,J,Q)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,q){const J=Z.context,me=J.gl,pe=((Le,Ne,Ke)=>{const We=Math.cos(Ne.rollInRadians),ot=Math.sin(Ne.rollInRadians),ct=ze(Ne),st=Ne.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Le.properties.get("sky-color"),u_horizon_color:Le.properties.get("horizon-color"),u_horizon:[(Ne.width/2-ct*ot)*Ke,(Ne.height/2+ct*We)*Ke],u_horizon_normal:[-ot,We],u_sky_horizon_blend:Le.properties.get("sky-horizon-blend")*Ne.height/2*Ke,u_sky_blend:st}})(q,Z.style.map.transform,Z.pixelRatio),_e=new wr(me.LEQUAL,wr.ReadWrite,[0,1]),xe=Qr.disabled,Me=Z.colorModeForRenderPass(),Re=Z.useProgram("sky"),Ee=Xu(J,q);Re.draw(J,me.TRIANGLES,_e,xe,Me,Hr.disabled,pe,null,void 0,"sky",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[b[this.currentLayer]],q=B[Z.source],J=E[Z.source];this._renderTileClippingMasks(Z,J,!1),this.renderLayer(this,q,Z,J,Q)}this.renderPass="translucent";let z=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Z=this.style._layers[b[this.currentLayer]],q=B[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,Q))continue;this.opaquePassEnabledForLayer()||z||(z=!0,Q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const J=(Z.type==="symbol"?Y:T)[Z.source];this._renderTileClippingMasks(Z,E[Z.source],!1),this.renderLayer(this,q,Z,J,Q)}if(Q.isRenderingGlobe&&function(Z,q,J){const me=Z.context,pe=me.gl,_e=Z.useProgram("atmosphere"),xe=new wr(pe.LEQUAL,wr.ReadOnly,[0,1]),Me=Z.transform,Re=function(st,Nt){const Rt=st.properties.get("position"),bt=[-Rt.x,-Rt.y,-Rt.z],Wt=s.ad(new Float64Array(16));return st.properties.get("anchor")==="map"&&(s.a_(Wt,Wt,Nt.rollInRadians),s.a$(Wt,Wt,-Nt.pitchInRadians),s.a_(Wt,Wt,Nt.bearingInRadians),s.a$(Wt,Wt,Nt.center.lat*Math.PI/180),s.bp(Wt,Wt,-Nt.center.lng*Math.PI/180)),s.bX(bt,bt,Wt),bt}(J,Z.transform),Ee=Me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Le=q.properties.get("atmosphere-blend")*Ee.projectionTransition;if(Le===0)return;const Ne=pc(Me.worldSize,Me.center.lat),Ke=Me.inverseProjectionMatrix,We=new Float64Array(4);We[3]=1,s.at(We,We,Me.modelViewProjectionMatrix),We[0]/=We[3],We[1]/=We[3],We[2]/=We[3],We[3]=1,s.at(We,We,Ke),We[0]/=We[3],We[1]/=We[3],We[2]/=We[3],We[3]=1;const ot=((st,Nt,Rt,bt,Wt)=>({u_sun_pos:st,u_atmosphere_blend:Nt,u_globe_position:Rt,u_globe_radius:bt,u_inv_proj_matrix:Wt}))(Re,Le,[We[0],We[1],We[2]],Ne,Ke),ct=Xu(me,q);_e.draw(me,pe.TRIANGLES,xe,Qr.disabled,Jr.alphaBlended,Hr.disabled,ot,null,null,"atmosphere",ct.vertexBuffer,ct.indexBuffer,ct.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(q,J){let me=null;const pe=Object.values(q._layers).flatMap(Re=>Re.source&&!Re.isHidden(J)?[q.sourceCaches[Re.source]]:[]),_e=pe.filter(Re=>Re.getSource().type==="vector"),xe=pe.filter(Re=>Re.getSource().type!=="vector"),Me=Re=>{(!me||me.getSource().maxzoom<Re.getSource().maxzoom)&&(me=Re)};return _e.forEach(Re=>Me(Re)),me||xe.forEach(Re=>Me(Re)),me}(this.style,this.transform.zoom);Z&&function(q,J,me){for(let pe=0;pe<me.length;pe++)Hu(q,J,me[pe])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const q=Z.transform.padding;Zu(Z,Z.transform.height-(q.top||0),3,ki),Zu(Z,q.bottom||0,3,Io),Uo(Z,q.left||0,3,xa),Uo(Z,Z.transform.width-(q.right||0),3,Du);const J=Z.transform.centerPoint;(function(me,pe,_e,xe){Js(me,pe-1,_e-10,2,20,xe),Js(me,pe-10,_e-1,20,2,xe)})(Z,J.x,Z.transform.height-J.y,zu)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=i?!s.b_(o,f):!s.b$(o,f)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(s.c0(o,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,B){const E=b.context,T=E.gl,Y=b.transform,Q=Jr.unblended,z=new wr(T.LEQUAL,wr.ReadWrite,[0,1]),Z=B.sourceCache.getRenderableTiles(),q=b.useProgram("terrainDepth");E.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),E.clear({color:s.b7.transparent,depth:1});for(const J of Z){const me=B.getTerrainMesh(J.tileID),pe=B.getTerrainData(J.tileID),_e=Y.getProjectionData({overscaledTileID:J.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),xe={u_ele_delta:B.getMeshFrameDelta(Y.zoom)};q.draw(E,T.TRIANGLES,z,Qr.disabled,Q,Hr.backCCW,xe,pe,_e,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,B){const E=b.context,T=E.gl,Y=b.transform,Q=Jr.unblended,z=new wr(T.LEQUAL,wr.ReadWrite,[0,1]),Z=B.getCoordsTexture(),q=B.sourceCache.getRenderableTiles(),J=b.useProgram("terrainCoords");E.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),E.clear({color:s.b7.transparent,depth:1}),B.coordsIndex=[];for(const me of q){const pe=B.getTerrainMesh(me.tileID),_e=B.getTerrainData(me.tileID);E.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,Z.texture);const xe={u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(Y.zoom)},Me=Y.getProjectionData({overscaledTileID:me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});J.draw(E,T.TRIANGLES,z,Qr.disabled,Q,Hr.backCCW,xe,_e,Me,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),B.coordsIndex.push(me.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(i,o,f,p,b){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(p||[]).length)&&(this.id=f.id,s.c1(f)?function(B,E,T,Y,Q,z){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=z,q=Qr.disabled,J=B.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(me,pe,_e,xe,Me,Re,Ee,Le,Ne){const Ke=pe.transform,We=pe.style.map.terrain,ot=Me==="map",ct=Re==="map";for(const st of me){const Nt=xe.getTile(st),Rt=Nt.getBucket(_e);if(!Rt||!Rt.text||!Rt.text.segments.get().length)continue;const bt=s.ak(Rt.textSizeData,Ke.zoom),Wt=s.az(Nt,1,pe.transform.zoom),Cr=At(ot,pe.transform,Wt),pr=_e.layout.get("icon-text-fit")!=="none"&&Rt.hasIconData();if(bt){const wi=Math.pow(2,Ke.zoom-Nt.tileID.overscaledZ),ri=We?(Bi,pi)=>We.getElevation(st,Bi,pi):null;Yc(Rt,ot,ct,Ne,Ke,Cr,wi,bt,pr,s.aA(Ke,Nt,Ee,Le),st.toUnwrapped(),ri)}}}(Y,B,T,E,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),Q),T.paint.get("icon-opacity").constantOr(1)!==0&&Lc(B,E,T,Y,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),q,J,Z),T.paint.get("text-opacity").constantOr(1)!==0&&Lc(B,E,T,Y,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),q,J,Z),E.map.showCollisionBoxes&&(yA(B,E,T,Y,!0),yA(B,E,T,Y,!1))}(i,o,f,p,this.style.placement.variableOffsets,b):s.c2(f)?function(B,E,T,Y,Q){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:z}=Q,Z=T.paint.get("circle-opacity"),q=T.paint.get("circle-stroke-width"),J=T.paint.get("circle-stroke-opacity"),me=!T.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(q.constantOr(1)===0||J.constantOr(1)===0))return;const pe=B.context,_e=pe.gl,xe=B.transform,Me=B.getDepthModeForSublayer(0,wr.ReadOnly),Re=Qr.disabled,Ee=B.colorModeForRenderPass(),Le=[],Ne=xe.getCircleRadiusCorrection();for(let Ke=0;Ke<Y.length;Ke++){const We=Y[Ke],ot=E.getTile(We),ct=ot.getBucket(T);if(!ct)continue;const st=T.paint.get("circle-translate"),Nt=T.paint.get("circle-translate-anchor"),Rt=s.aA(xe,ot,st,Nt),bt=ct.programConfigurations.get(T.id),Wt=B.useProgram("circle",bt),Cr=ct.layoutVertexBuffer,pr=ct.indexBuffer,wi=B.style.map.terrain&&B.style.map.terrain.getTerrainData(We),ri={programConfiguration:bt,program:Wt,layoutVertexBuffer:Cr,indexBuffer:pr,uniformValues:l2(B,ot,T,Rt,Ne),terrainData:wi,projectionData:xe.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!z,applyTerrainMatrix:!0})};if(me){const Bi=ct.segments.get();for(const pi of Bi)Le.push({segments:new s.aJ([pi]),sortKey:pi.sortKey,state:ri})}else Le.push({segments:ct.segments,sortKey:0,state:ri})}me&&Le.sort((Ke,We)=>Ke.sortKey-We.sortKey);for(const Ke of Le){const{programConfiguration:We,program:ot,layoutVertexBuffer:ct,indexBuffer:st,uniformValues:Nt,terrainData:Rt,projectionData:bt}=Ke.state;ot.draw(pe,_e.TRIANGLES,Me,Re,Ee,Hr.backCCW,Nt,Rt,bt,T.id,ct,st,Ke.segments,T.paint,B.transform.zoom,We)}}(i,o,f,p,b):s.c3(f)?function(B,E,T,Y,Q){if(T.paint.get("heatmap-opacity")===0)return;const z=B.context,{isRenderingToTexture:Z,isRenderingGlobe:q}=Q;if(B.style.map.terrain){for(const J of Y){const me=E.getTile(J);E.hasRenderableParent(J)||(B.renderPass==="offscreen"?Lu(B,me,T,J,q):B.renderPass==="translucent"&&b2(B,T,J,Z,q))}z.viewport.set([0,0,B.width,B.height])}else B.renderPass==="offscreen"?function(J,me,pe,_e){const xe=J.context,Me=xe.gl,Re=J.transform,Ee=Qr.disabled,Le=new Jr([Me.ONE,Me.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(Ne,Ke,We){const ot=Ne.gl;Ne.activeTexture.set(ot.TEXTURE1),Ne.viewport.set([0,0,Ke.width/4,Ke.height/4]);let ct=We.heatmapFbos.get(s.bU);ct?(ot.bindTexture(ot.TEXTURE_2D,ct.colorAttachment.get()),Ne.bindFramebuffer.set(ct.framebuffer)):(ct=Qu(Ne,Ke.width/4,Ke.height/4),We.heatmapFbos.set(s.bU,ct))})(xe,J,pe),xe.clear({color:s.b7.transparent});for(let Ne=0;Ne<_e.length;Ne++){const Ke=_e[Ne];if(me.hasRenderableParent(Ke))continue;const We=me.getTile(Ke),ot=We.getBucket(pe);if(!ot)continue;const ct=ot.programConfigurations.get(pe.id),st=J.useProgram("heatmap",ct),Nt=Re.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Rt=Re.getCircleRadiusCorrection();st.draw(xe,Me.TRIANGLES,wr.disabled,Ee,Le,Hr.backCCW,wu(We,Re.zoom,pe.paint.get("heatmap-intensity"),Rt),null,Nt,pe.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,pe.paint,Re.zoom,ct)}xe.viewport.set([0,0,J.width,J.height])}(B,E,T,Y):B.renderPass==="translucent"&&function(J,me){const pe=J.context,_e=pe.gl;pe.setColorMode(J.colorModeForRenderPass());const xe=me.heatmapFbos.get(s.bU);xe&&(pe.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,xe.colorAttachment.get()),pe.activeTexture.set(_e.TEXTURE1),vA(pe,me).bind(_e.LINEAR,_e.CLAMP_TO_EDGE),J.useProgram("heatmapTexture").draw(pe,_e.TRIANGLES,wr.disabled,Qr.disabled,J.colorModeForRenderPass(),Hr.disabled,Bu(J,me,0,1),null,null,me.id,J.viewportBuffer,J.quadTriangleIndexBuffer,J.viewportSegments,me.paint,J.transform.zoom))}(B,T)}(i,o,f,p,b):s.c4(f)?function(B,E,T,Y,Q){if(B.renderPass!=="translucent")return;const{isRenderingToTexture:z}=Q,Z=T.paint.get("line-opacity"),q=T.paint.get("line-width");if(Z.constantOr(1)===0||q.constantOr(1)===0)return;const J=B.getDepthModeForSublayer(0,wr.ReadOnly),me=B.colorModeForRenderPass(),pe=T.paint.get("line-dasharray"),_e=T.paint.get("line-pattern"),xe=_e.constantOr(1),Me=T.paint.get("line-gradient"),Re=T.getCrossfadeParameters(),Ee=xe?"linePattern":pe?"lineSDF":Me?"lineGradient":"line",Le=B.context,Ne=Le.gl,Ke=B.transform;let We=!0;for(const ot of Y){const ct=E.getTile(ot);if(xe&&!ct.patternsLoaded())continue;const st=ct.getBucket(T);if(!st)continue;const Nt=st.programConfigurations.get(T.id),Rt=B.context.program.get(),bt=B.useProgram(Ee,Nt),Wt=We||bt.program!==Rt,Cr=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ot),pr=_e.constantOr(null);if(pr&&ct.imageAtlas){const ii=ct.imageAtlas,ei=ii.patternPositions[pr.to.toString()],on=ii.patternPositions[pr.from.toString()];ei&&on&&Nt.setConstantPatternPositions(ei,on)}const wi=Ke.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),ri=Ke.getPixelScale(),Bi=xe?A2(B,ct,T,ri,Re):pe?wc(B,ct,T,ri,pe,Re):Me?mA(B,ct,T,ri,st.lineClipsArray.length):xc(B,ct,T,ri);if(xe)Le.activeTexture.set(Ne.TEXTURE0),ct.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Nt.updatePaintBuffers(Re);else if(pe&&(Wt||B.lineAtlas.dirty))Le.activeTexture.set(Ne.TEXTURE0),B.lineAtlas.bind(Le);else if(Me){const ii=st.gradients[T.id];let ei=ii.texture;if(T.gradientVersion!==ii.version){let on=256;if(T.stepInterpolant){const Wi=E.getSource().maxzoom,yn=ot.canonical.z===Wi?Math.ceil(1<<B.transform.maxZoom-ot.canonical.z):1;on=s.ae(s.bV(st.maxLineLength/s.Z*1024*yn),256,Le.maxTextureSize)}ii.gradient=s.bW({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:on,image:ii.gradient||void 0,clips:st.lineClipsArray}),ii.texture?ii.texture.update(ii.gradient):ii.texture=new V(Le,ii.gradient,Ne.RGBA),ii.version=T.gradientVersion,ei=ii.texture}Le.activeTexture.set(Ne.TEXTURE0),ei.bind(T.stepInterpolant?Ne.NEAREST:Ne.LINEAR,Ne.CLAMP_TO_EDGE)}let pi;if(z){const[ii]=B.getStencilConfigForOverlapAndUpdateStencilID(Y);pi=ii[ot.overscaledZ]}else pi=B.stencilModeForClipping(ot);bt.draw(Le,Ne.TRIANGLES,J,pi,me,Hr.disabled,Bi,Cr,wi,T.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,T.paint,B.transform.zoom,Nt,st.layoutVertexBuffer2),We=!1}}(i,o,f,p,b):s.c5(f)?function(B,E,T,Y,Q){const z=T.paint.get("fill-color"),Z=T.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:q}=Q,J=B.colorModeForRenderPass(),me=T.paint.get("fill-pattern"),pe=B.opaquePassEnabledForLayer()&&!me.constantOr(1)&&z.constantOr(s.b7.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===pe){const _e=B.getDepthModeForSublayer(1,B.renderPass==="opaque"?wr.ReadWrite:wr.ReadOnly);ku(B,E,T,Y,_e,J,!1,q)}if(B.renderPass==="translucent"&&T.paint.get("fill-antialias")){const _e=B.getDepthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,wr.ReadOnly);ku(B,E,T,Y,_e,J,!0,q)}}(i,o,f,p,b):s.c6(f)?function(B,E,T,Y,Q){const z=T.paint.get("fill-extrusion-opacity");if(z===0)return;const{isRenderingToTexture:Z}=Q;if(B.renderPass==="translucent"){const q=new wr(B.context.gl.LEQUAL,wr.ReadWrite,B.depthRangeFor3D);if(z!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))kc(B,E,T,Y,q,Qr.disabled,Jr.disabled,Z),kc(B,E,T,Y,q,B.stencilModeFor3D(),B.colorModeForRenderPass(),Z);else{const J=B.colorModeForRenderPass();kc(B,E,T,Y,q,Qr.disabled,J,Z)}}}(i,o,f,p,b):s.c7(f)?function(B,E,T,Y,Q){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const{isRenderingToTexture:z}=Q,Z=B.context,q=B.style.projection.useSubdivision,J=B.getDepthModeForSublayer(0,wr.ReadOnly),me=B.colorModeForRenderPass();if(B.renderPass==="offscreen")(function(pe,_e,xe,Me,Re,Ee,Le){const Ne=pe.context,Ke=Ne.gl;for(const We of xe){const ot=_e.getTile(We),ct=ot.dem;if(!ct||!ct.data||!ot.needsHillshadePrepare)continue;const st=ct.dim,Nt=ct.stride,Rt=ct.getPixels();if(Ne.activeTexture.set(Ke.TEXTURE1),Ne.pixelStoreUnpackPremultiplyAlpha.set(!1),ot.demTexture=ot.demTexture||pe.getTileTexture(Nt),ot.demTexture){const Wt=ot.demTexture;Wt.update(Rt,{premultiply:!1}),Wt.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE)}else ot.demTexture=new V(Ne,Rt,Ke.RGBA,{premultiply:!1}),ot.demTexture.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE);Ne.activeTexture.set(Ke.TEXTURE0);let bt=ot.fbo;if(!bt){const Wt=new V(Ne,{width:st,height:st,data:null},Ke.RGBA);Wt.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),bt=ot.fbo=Ne.createFramebuffer(st,st,!0,!1),bt.colorAttachment.set(Wt.texture)}Ne.bindFramebuffer.set(bt.framebuffer),Ne.viewport.set([0,0,st,st]),pe.useProgram("hillshadePrepare").draw(Ne,Ke.TRIANGLES,Re,Ee,Le,Hr.disabled,Bo(ot.tileID,ct),null,null,Me.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),ot.needsHillshadePrepare=!1}})(B,E,Y,T,J,Qr.disabled,me),Z.viewport.set([0,0,B.width,B.height]);else if(B.renderPass==="translucent")if(q){const[pe,_e,xe]=B.stencilConfigForOverlapTwoPass(Y);gl(B,E,T,xe,pe,J,me,!1,z),gl(B,E,T,xe,_e,J,me,!0,z)}else{const[pe,_e]=B.getStencilConfigForOverlapAndUpdateStencilID(Y);gl(B,E,T,_e,pe,J,me,!1,z)}}(i,o,f,p,b):s.c8(f)?function(B,E,T,Y,Q){if(B.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!Y.length)return;const{isRenderingToTexture:z}=Q,Z=E.getSource(),q=B.style.projection.useSubdivision;if(Z instanceof Dr)Dc(B,E,T,Y,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,z);else if(q){const[J,me,pe]=B.stencilConfigForOverlapTwoPass(Y);Dc(B,E,T,pe,J,!1,!0,xA,!1,z),Dc(B,E,T,pe,me,!0,!0,xA,!1,z)}else{const[J,me]=B.getStencilConfigForOverlapAndUpdateStencilID(Y);Dc(B,E,T,me,J,!1,!0,xA,!1,z)}}(i,o,f,p,b):s.c9(f)?function(B,E,T,Y,Q){const z=T.paint.get("background-color"),Z=T.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:q}=Q,J=B.context,me=J.gl,pe=B.style.projection,_e=B.transform,xe=_e.tileSize,Me=T.paint.get("background-pattern");if(B.isPatternMissing(Me))return;const Re=!Me&&z.a===1&&Z===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Re)return;const Ee=Qr.disabled,Le=B.getDepthModeForSublayer(0,Re==="opaque"?wr.ReadWrite:wr.ReadOnly),Ne=B.colorModeForRenderPass(),Ke=B.useProgram(Me?"backgroundPattern":"background"),We=Y||Ie(_e,{tileSize:xe,terrain:B.style.map.terrain});Me&&(J.activeTexture.set(me.TEXTURE0),B.imageManager.bind(B.context));const ot=T.getCrossfadeParameters();for(const ct of We){const st=_e.getProjectionData({overscaledTileID:ct,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),Nt=Me?bs(Z,B,Me,{tileID:ct,tileSize:xe},ot):Cc(Z,z),Rt=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ct),bt=pe.getMeshFromTileID(J,ct.canonical,!1,!0,"raster");Ke.draw(J,me.TRIANGLES,Le,Ee,Ne,Hr.backCCW,Nt,Rt,st,T.id,bt.vertexBuffer,bt.indexBuffer,bt.segments)}}(i,0,f,p,b):s.ca(f)&&function(B,E,T,Y){const{isRenderingGlobe:Q}=Y,z=B.context,Z=T.implementation,q=B.style.projection,J=B.transform,me=J.getProjectionDataForCustomLayer(Q),pe={farZ:J.farZ,nearZ:J.nearZ,fov:J.fov*Math.PI/180,modelViewProjectionMatrix:J.modelViewProjectionMatrix,projectionMatrix:J.projectionMatrix,shaderData:{variantName:q.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${q.shaderPreludeCode.vertexSource}`,define:q.shaderDefine},defaultProjectionData:me},_e=Z.renderingMode?Z.renderingMode:"2d";if(B.renderPass==="offscreen"){const xe=Z.prerender;xe&&(B.setCustomLayerDefaults(),z.setColorMode(B.colorModeForRenderPass()),xe.call(Z,z.gl,pe),z.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),z.setColorMode(B.colorModeForRenderPass()),z.setStencilMode(Qr.disabled);const xe=_e==="3d"?B.getDepthModeFor3D():B.getDepthModeForSublayer(0,wr.ReadOnly);z.setDepthMode(xe),Z.render(z.gl,pe),z.setDirty(),B.setBaseState(),z.bindFramebuffer.set(null)}}(i,0,f,b))}saveTileTexture(i){const o=this._tileTextures[i.size[0]];o?o.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const o=this._tileTextures[i];return o&&o.length>0?o.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const o=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!o||!f}useProgram(i,o,f=!1){this.cache=this.cache||{};const p=!!this.style.map.terrain,b=this.style.projection,B=i+(o?o.cacheKey:"")+`/${f?En:b.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(p?"/terrain":"");return this.cache[B]||(this.cache[B]=new gA(this.context,Er[i],o,Mu[i],this._showOverdrawInspector,p,f?Er.projectionMercator:b.shaderPreludeCode,f?Wn:b.shaderDefine)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new V(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:o}=this.context.gl;return this.width!==i||this.height!==o}}function Vu(_,i){let o,f=!1,p=null,b=null;const B=()=>{p=null,f&&(_.apply(b,o),p=setTimeout(B,i),f=!1)};return(...E)=>(f=!0,b=this,o=E,p||B(),p)}class Gu{constructor(i){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let f;return o.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(f=p)}),(f&&f[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:f,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const f=o.join("/");let p=f;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${f}`);let b=window.location.hash.replace(p,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let B=window.location.href.replace(/(#.+)?$/,b);B=B.replace("&&","&"),window.history.replaceState(window.history.state,null,B)},this._updateHash=Vu(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const o=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,p=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,p),B=Math.round(o.lng*b)/b,E=Math.round(o.lat*b)/b,T=this._map.getBearing(),Y=this._map.getPitch();let Q="";if(Q+=i?`/${B}/${E}/${f}`:`${f}/${E}/${B}`,(T||Y)&&(Q+="/"+Math.round(10*T)/10),Y&&(Q+=`/${Math.round(Y)}`),this._hashName){const z=this._hashName;let Z=!1;const q=window.location.hash.slice(1).split("&").map(J=>{const me=J.split("=")[0];return me===z?(Z=!0,`${me}=${Q}`):J}).filter(J=>J);return Z||q.push(`${z}=${Q}`),`#${q.join("&")}`}return`#${Q}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new s.Q(+i[2],+i[1])}catch{return!1}const o=+i[0],f=+(i[3]||0),p=+(i[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&f>=-180&&f<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const Fa={linearity:.3,easing:s.cb(0,0,.3,1)},Ff=s.e({deceleration:2500,maxSpeed:1400},Fa),Tf=s.e({deceleration:20,maxSpeed:1400},Fa),Sf=s.e({deceleration:1e3,maxSpeed:360},Fa),Nf=s.e({deceleration:1e3,maxSpeed:90},Fa),Yf=s.e({deceleration:1e3,maxSpeed:360},Fa);class Pf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,o=U.now();for(;i.length>0&&o-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)o.zoom+=b.zoomDelta||0,o.bearing+=b.bearingDelta||0,o.pitch+=b.pitchDelta||0,o.roll+=b.rollDelta||0,b.panDelta&&o.pan._add(b.panDelta),b.around&&(o.around=b.around),b.pinchAround&&(o.pinchAround=b.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(o.pan.mag()){const b=eo(o.pan.mag(),f,s.e({},Ff,i||{})),B=o.pan.mult(b.amount/o.pan.mag()),E=this._map.cameraHelper.handlePanInertia(B,this._map.transform);p.center=E.easingCenter,p.offset=E.easingOffset,pl(p,b)}if(o.zoom){const b=eo(o.zoom,f,Tf);p.zoom=this._map.transform.zoom+b.amount,pl(p,b)}if(o.bearing){const b=eo(o.bearing,f,Sf);p.bearing=this._map.transform.bearing+s.ae(b.amount,-179,179),pl(p,b)}if(o.pitch){const b=eo(o.pitch,f,Nf);p.pitch=this._map.transform.pitch+b.amount,pl(p,b)}if(o.roll){const b=eo(o.roll,f,Yf);p.roll=this._map.transform.roll+s.ae(b.amount,-179,179),pl(p,b)}if(p.zoom||p.bearing){const b=o.pinchAround===void 0?o.around:o.pinchAround;p.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),s.e(p,{noMoveStart:!0})}}function pl(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function eo(_,i,o){const{maxSpeed:f,linearity:p,deceleration:b}=o,B=s.ae(_*p/(i/1e3),-f,f),E=Math.abs(B)/(b*p);return{easing:o.easing,duration:1e3*E,amount:B*(E/2)}}class ea extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,o,f,p={}){f=f instanceof MouseEvent?f:new MouseEvent(i,f);const b=R.mousePos(o.getCanvas(),f),B=o.unproject(b);super(i,s.e({point:b,lngLat:B,originalEvent:f},p)),this._defaultPrevented=!1,this.target=o}}class Hn extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,o,f){const p=i==="touchend"?f.changedTouches:f.touches,b=R.touchPos(o.getCanvasContainer(),p),B=b.map(T=>o.unproject(T)),E=b.reduce((T,Y,Q,z)=>T.add(Y.div(z.length)),new s.P(0,0));super(i,{points:b,point:E,lngLats:B,lngLat:o.unproject(E),originalEvent:f}),this._defaultPrevented=!1}}class Ta extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,o,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class Lf{constructor(i,o){this._map=i,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Ta(i.type,this._map,i))}mousedown(i,o){return this._mousedownPos=o,this._firePreventable(new ea(i.type,this._map,i))}mouseup(i){this._map.fire(new ea(i.type,this._map,i))}click(i,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new ea(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ea(i.type,this._map,i))}mouseover(i){this._map.fire(new ea(i.type,this._map,i))}mouseout(i){this._map.fire(new ea(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Hn(i.type,this._map,i))}touchmove(i){this._map.fire(new Hn(i.type,this._map,i))}touchend(i){this._map.fire(new Hn(i.type,this._map,i))}touchcancel(i){this._map.fire(new Hn(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wa{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ea(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ea("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ea(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ja{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(s.P.convert(i),this._map.terrain)}}class Qf{constructor(i,o){this._map=i,this._tr=new Ja(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,o){this.isEnabled()&&i.shiftKey&&i.button===0&&(R.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(i,o){if(!this._active)return;const f=o;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=f,this._box||(this._box=R.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(p.x,f.x),B=Math.max(p.x,f.x),E=Math.min(p.y,f.y),T=Math.max(p.y,f.y);R.setTransform(this._box,`translate(${b}px,${E}px)`),this._box.style.width=B-b+"px",this._box.style.height=T-E+"px"}mouseupWindow(i,o){if(!this._active||i.button!==0)return;const f=this._startPos,p=o;if(this.reset(),R.suppressClick(),f.x!==p.x||f.y!==p.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(f,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,o){return this._map.fire(new s.l(i,{originalEvent:o}))}}function ju(_,i){if(_.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${i.length}`);const o={};for(let f=0;f<_.length;f++)o[_[f].identifier]=i[f];return o}class y2{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,o,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(p){const b=new s.P(0,0);for(const B of p)b._add(B);return b.div(p.length)}(o),this.touches=ju(f,o)))}touchmove(i,o,f){if(this.aborted||!this.centroid)return;const p=ju(f,o);for(const b in this.touches){const B=p[b];(!B||B.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,o,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Ku{constructor(i){this.singleTap=new y2(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,o,f){this.singleTap.touchstart(i,o,f)}touchmove(i,o,f){this.singleTap.touchmove(i,o,f)}touchend(i,o,f){const p=this.singleTap.touchend(i,o,f);if(p){const b=i.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(p)<30;if(b&&B||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class kf{constructor(i){this._tr=new Ja(i),this._zoomIn=new Ku({numTouches:1,numTaps:2}),this._zoomOut=new Ku({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,o,f){this._zoomIn.touchstart(i,o,f),this._zoomOut.touchstart(i,o,f)}touchmove(i,o,f){this._zoomIn.touchmove(i,o,f),this._zoomOut.touchmove(i,o,f)}touchend(i,o,f){const p=this._zoomIn.touchend(i,o,f),b=this._zoomOut.touchend(i,o,f),B=this._tr;return p?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(p)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ys{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const o=this._moveFunction(...i);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(i,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,o){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const p=Array.isArray(o)?o[0]:o;return!this._moved&&p.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(f,p))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&R.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const vs={0:1,2:2};class kt{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const o=R.mouseButton(i);this._eventButton=o}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(o,f){const p=vs[f];return o.buttons===void 0||(o.buttons&p)!==p}(i,this._eventButton)}isValidEndEvent(i){return R.mouseButton(i)===this._eventButton}}class Df{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class $u{constructor(i=new kt({checkCorrectEvent:()=>!0}),o=new Df){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(i,o,f){return i instanceof MouseEvent?o(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?f(i):void 0}startMove(i){this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(i){this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(i){return this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(i){return this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(i){return this._executeRelevantHandler(i,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}const wA=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=i=>{i.preventDefault()}};class BA{constructor(i,o){this._clickTolerance=i.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,o,f){return this._calculateTransform(i,o,f)}touchmove(i,o,f){if(this._active){if(!this._shouldBePrevented(f.length))return i.preventDefault(),this._calculateTransform(i,o,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,o,f){this._calculateTransform(i,o,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,o,f){f.length>0&&(this._active=!0);const p=ju(f,o),b=new s.P(0,0),B=new s.P(0,0);let E=0;for(const Y in p){const Q=p[Y],z=this._touches[Y];z&&(b._add(Q),B._add(Q.sub(z)),E++,p[Y]=Q)}if(this._touches=p,this._shouldBePrevented(E)||!B.mag())return;const T=B.div(E);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(E),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,o,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([o[0],o[1]]))}touchmove(i,o,f){if(!this._firstTwoTouches)return;i.preventDefault();const[p,b]=this._firstTwoTouches,B=CA(f,o,p),E=CA(f,o,b);if(!B||!E)return;const T=this._aroundCenter?null:B.add(E).div(2);return this._move([B,E],T,i)}touchend(i,o,f){if(!this._firstTwoTouches)return;const[p,b]=this._firstTwoTouches,B=CA(f,o,p),E=CA(f,o,b);B&&E||(this._active&&R.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function CA(_,i,o){for(let f=0;f<_.length;f++)if(_[f].identifier===o)return i[f]}function Sr(_,i){return Math.log(_/i)/Math.LN2}class zc extends Eo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,o){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Sr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sr(this._distance,f),pinchAround:o}}}function zf(_,i){return 180*_.angleWith(i)/Math.PI}class Zc extends Eo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,o,f){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zf(this._vector,p),pinchAround:o}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const o=25/(Math.PI*this._minDiameter)*360,f=zf(i,this._startVector);return Math.abs(f)<o}}function qu(_){return Math.abs(_.y)>Math.abs(_.x)}class Zf extends Eo{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,o,f){super.touchstart(i,o,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,qu(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,o,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,b,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(p.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(i,o,f){if(this._valid!==void 0)return this._valid;const p=i.mag()>=2,b=o.mag()>=2;if(!p&&!b)return;if(!p||!b)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const B=i.y>0==o.y>0;return qu(i)&&qu(o)&&B}}const Hf={panStep:100,bearingStep:15,pitchStep:10};class Hc{constructor(i){this._tr=new Ja(i);const o=Hf;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let o=0,f=0,p=0,b=0,B=0;switch(i.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?p=1:(i.preventDefault(),B=-1);break;case 40:i.shiftKey?p=-1:(i.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(f=0,p=0),{cameraAnimation:E=>{const T=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:Of,zoom:o?Math.round(T.zoom)+o*(i.shiftKey?2:1):T.zoom,bearing:T.bearing+f*this._bearingStep,pitch:T.pitch+p*this._pitchStep,offset:[-b*this._panStep,-B*this._panStep],center:T.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Of(_){return _*(2-_)}const Xf=4.000244140625;class Wu{constructor(i,o){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new Ja(i),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let o=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=U.now(),p=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,o!==0&&o%Xf==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(p*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),i.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=i,this._delta-=o,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=R.mousePos(this._map.getCanvas(),i),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(s.Q.convert(f.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const E=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=E),typeof this._targetZoom=="number"&&(this._targetZoom+=E)}if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Xf?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&T!==0&&(T=1/T);const Y=typeof this._targetZoom!="number"?i.scale:s.ac(this._targetZoom);this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,s.ah(Y*T))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,f=this._startZoom,p=this._easing;let b,B=!1;if(this._type==="wheel"&&f&&p){const E=U.now()-this._lastWheelEventTime,T=Math.min((E+5)/200,1),Y=p(T);b=s.B.number(f,o,Y),T<1?this._frameId||(this._frameId=!0):B=!0}else b=o,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!B,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let o=s.cd;if(this._prevEase){const f=this._prevEase,p=(U.now()-f.start)/f.duration,b=f.easing(p+.01)-f.easing(p),B=.27/Math.sqrt(b*b+1e-4)*.01,E=Math.sqrt(.0729-B*B);o=s.cb(B,E,.25,1)}return this._prevEase={start:U.now(),duration:i,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Vf{constructor(i,o){this._clickZoom=i,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class v2{constructor(i){this._tr=new Ja(i),this.reset()}reset(){this._active=!1}dblclick(i,o){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class to{constructor(){this._tap=new Ku({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,o,f){if(!this._swipePoint)if(this._tapTime){const p=o[0],b=i.timeStamp-this._tapTime<500,B=this._tapPoint.dist(p)<30;b&&B?f.length>0&&(this._swipePoint=p,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,o,f)}touchmove(i,o,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const p=o[0],b=p.y-this._swipePoint.y;return this._swipePoint=p,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,o,f)}touchend(i,o,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const p=this._tap.touchend(i,o,f);p&&(this._tapTime=i.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gi{constructor(i,o,f){this._el=i,this._mousePan=o,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class MA{constructor(i,o,f,p){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=o,this._mousePitch=f,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Oc{constructor(i,o,f,p){this._el=i,this._touchZoom=o,this._touchRotate=f,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ju{constructor(i,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=R.create("div","maplibregl-cooperative-gesture-screen",i);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=o,this._container.appendChild(p);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=f,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(R.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,o){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:i,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const RA=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class Gf extends s.l{}function ed(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class es{constructor(i,o){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,b)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=p.type==="renderFrame"?void 0:p,E={needsRenderFrame:!1},T={},Y={};for(const{handlerName:Z,handler:q,allowed:J}of this._handlers){if(!q.isEnabled())continue;let me;if(this._blockedByActive(Y,J,Z))q.reset();else if(q[b||p.type]){if(s.ce(p,b||p.type)){const pe=R.mousePos(this._map.getCanvas(),p);me=q[b||p.type](p,pe)}else if(s.cf(p,b||p.type)){const pe=this._getMapTouches(p.touches),_e=R.touchPos(this._map.getCanvas(),pe);me=q[b||p.type](p,_e,pe)}else s.cg(b||p.type)||(me=q[b||p.type](p));this.mergeHandlerResult(E,T,me,Z,B),me&&me.needsRenderFrame&&this._triggerRenderFrame()}(me||q.isActive())&&(Y[Z]=q)}const Q={};for(const Z in this._previousActiveHandlers)Y[Z]||(Q[Z]=B);this._previousActiveHandlers=Y,(Object.keys(Q).length||ed(E))&&(this._changes.push([E,T,Q]),this._triggerRenderFrame()),(Object.keys(Y).length||ed(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:z}=E;z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],z(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pf(i),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,b,B]of this._listeners)R.addEventListener(p,b,p===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[i,o,f]of this._listeners)R.removeEventListener(i,o,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const o=this._map,f=o.getCanvasContainer();this._add("mapEvent",new Lf(o,i));const p=o.boxZoom=new Qf(o,i);this._add("boxZoom",p),i.interactive&&i.boxZoom&&p.enable();const b=o.cooperativeGestures=new Ju(o,i.cooperativeGestures);this._add("cooperativeGestures",b),i.cooperativeGestures&&b.enable();const B=new kf(o),E=new v2(o);o.doubleClickZoom=new Vf(E,B),this._add("tapZoom",B),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&o.doubleClickZoom.enable();const T=new to;this._add("tapDragZoom",T);const Y=o.touchPitch=new Zf(o);this._add("touchPitch",Y),i.interactive&&i.touchPitch&&o.touchPitch.enable(i.touchPitch);const Q=()=>o.project(o.getCenter()),z=function({enable:Re,clickTolerance:Ee,aroundCenter:Le=!0,minPixelCenterThreshold:Ne=100,rotateDegreesPerPixelMoved:Ke=.8},We){const ot=new kt({checkCorrectEvent:ct=>R.mouseButton(ct)===0&&ct.ctrlKey||R.mouseButton(ct)===2&&!ct.ctrlKey});return new ys({clickTolerance:Ee,move:(ct,st)=>{const Nt=We();if(Le&&Math.abs(Nt.y-ct.y)>Ne)return{bearingDelta:s.cc(new s.P(ct.x,st.y),st,Nt)};let Rt=(st.x-ct.x)*Ke;return Le&&st.y<Nt.y&&(Rt=-Rt),{bearingDelta:Rt}},moveStateManager:ot,enable:Re,assignEvents:wA})}(i,Q),Z=function({enable:Re,clickTolerance:Ee,pitchDegreesPerPixelMoved:Le=-.5}){const Ne=new kt({checkCorrectEvent:Ke=>R.mouseButton(Ke)===0&&Ke.ctrlKey||R.mouseButton(Ke)===2});return new ys({clickTolerance:Ee,move:(Ke,We)=>({pitchDelta:(We.y-Ke.y)*Le}),moveStateManager:Ne,enable:Re,assignEvents:wA})}(i),q=function({enable:Re,clickTolerance:Ee,rollDegreesPerPixelMoved:Le=.3},Ne){const Ke=new kt({checkCorrectEvent:We=>R.mouseButton(We)===2&&We.ctrlKey});return new ys({clickTolerance:Ee,move:(We,ot)=>{const ct=Ne();let st=(ot.x-We.x)*Le;return ot.y<ct.y&&(st=-st),{rollDelta:st}},moveStateManager:Ke,enable:Re,assignEvents:wA})}(i,Q);o.dragRotate=new MA(i,z,Z,q),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",q,["mousePitch"]),i.interactive&&i.dragRotate&&o.dragRotate.enable();const J=function({enable:Re,clickTolerance:Ee}){const Le=new kt({checkCorrectEvent:Ne=>R.mouseButton(Ne)===0&&!Ne.ctrlKey});return new ys({clickTolerance:Ee,move:(Ne,Ke)=>({around:Ke,panDelta:Ke.sub(Ne)}),activateOnStart:!0,moveStateManager:Le,enable:Re,assignEvents:wA})}(i),me=new BA(i,o);o.dragPan=new gi(f,J,me),this._add("mousePan",J),this._add("touchPan",me,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&o.dragPan.enable(i.dragPan);const pe=new Zc,_e=new zc;o.touchZoomRotate=new Oc(f,_e,pe,T),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",_e,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&o.touchZoomRotate.enable(i.touchZoomRotate);const xe=o.scrollZoom=new Wu(o,()=>this._triggerRenderFrame());this._add("scrollZoom",xe,["mousePan"]),i.interactive&&i.scrollZoom&&o.scrollZoom.enable(i.scrollZoom);const Me=o.keyboard=new Hc(o);this._add("keyboard",Me),i.interactive&&i.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new Wa(o))}_add(i,o,f){this._handlers.push({handlerName:i,handler:o,allowed:f}),this._handlersById[i]=o}stop(i){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!RA(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,o,f){for(const p in i)if(p!==f&&(!o||o.indexOf(p)<0))return!0;return!1}_getMapTouches(i){const o=[];for(const f of i)this._el.contains(f.target)&&o.push(f);return o}mergeHandlerResult(i,o,f,p,b){if(!f)return;s.e(i,f);const B={handlerName:p,originalEvent:f.originalEvent||b};f.zoomDelta!==void 0&&(o.zoom=B),f.panDelta!==void 0&&(o.drag=B),f.rollDelta!==void 0&&(o.roll=B),f.pitchDelta!==void 0&&(o.pitch=B),f.bearingDelta!==void 0&&(o.rotate=B)}_applyChanges(){const i={},o={},f={};for(const[p,b,B]of this._changes)p.panDelta&&(i.panDelta=(i.panDelta||new s.P(0,0))._add(p.panDelta)),p.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(i.rollDelta=(i.rollDelta||0)+p.rollDelta),p.around!==void 0&&(i.around=p.around),p.pinchAround!==void 0&&(i.pinchAround=p.pinchAround),p.noInertia&&(i.noInertia=p.noInertia),s.e(o,b),s.e(f,B);this._updateMapTransform(i,o,f),this._changes=[]}_updateMapTransform(i,o,f){const p=this._map,b=p._getTransformForUpdate(),B=p.terrain;if(!(ed(i)||B&&this._terrainMovement))return this._fireEvents(o,f,!0);p._stop(!0);let{panDelta:E,zoomDelta:T,bearingDelta:Y,pitchDelta:Q,rollDelta:z,around:Z,pinchAround:q}=i;q!==void 0&&(Z=q),Z=Z||p.transform.centerPoint,B&&!b.isPointOnMapSurface(Z)&&(Z=b.centerPoint);const J={panDelta:E,zoomDelta:T,rollDelta:z,pitchDelta:Q,bearingDelta:Y,around:Z};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(Z)&&(Z=b.centerPoint);const me=Z.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(E?Z.sub(E):Z);B?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(J,b),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?b.setCenter(b.screenPointToLocation(b.centerPoint.sub(E))):this._map.cameraHelper.handleMapControlsPan(J,b,me):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(J,b,me))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(J,b),this._map.cameraHelper.handleMapControlsPan(J,b,me)),p._applyUpdatedTransform(b),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(o,f,!0)}_fireEvents(i,o,f){const p=RA(this._eventsInProgress),b=RA(i),B={};for(const z in i){const{originalEvent:Z}=i[z];this._eventsInProgress[z]||(B[`${z}start`]=Z),this._eventsInProgress[z]=i[z]}!p&&b&&this._fireEvent("movestart",b.originalEvent);for(const z in B)this._fireEvent(z,B[z]);b&&this._fireEvent("move",b.originalEvent);for(const z in i){const{originalEvent:Z}=i[z];this._fireEvent(z,Z)}const E={};let T;for(const z in this._eventsInProgress){const{handlerName:Z,originalEvent:q}=this._eventsInProgress[z];this._handlersById[Z].isActive()||(delete this._eventsInProgress[z],T=o[Z]||q,E[`${z}end`]=T)}for(const z in E)this._fireEvent(z,E[z]);const Y=RA(this._eventsInProgress),Q=(p||b)&&!Y;if(Q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(z)}if(f&&Q){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;!z||!z.essential&&U.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:T})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(i,o){this._map.fire(new s.l(i,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Gf("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Xc extends s.E{constructor(i,o,f){super(),this._renderFrameCallback=()=>{const p=Math.min((U.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=f.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(i,o){i.apply(this.transform),this.transform=i,this.cameraHelper=o}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(i,o){return this.jumpTo({center:i},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,o){return this.jumpTo({elevation:i},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,o,f){return i=s.P.convert(i).mult(-1),this.panTo(this.transform.center,s.e({offset:i},o),f)}panTo(i,o,f){return this.easeTo(s.e({center:i},o),f)}getZoom(){return this.transform.zoom}setZoom(i,o){return this.jumpTo({zoom:i},o),this}zoomTo(i,o,f){return this.easeTo(s.e({zoom:i},o),f)}zoomIn(i,o){return this.zoomTo(this.getZoom()+1,i,o),this}zoomOut(i,o){return this.zoomTo(this.getZoom()-1,i,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,o){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)).fire(new s.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(i,o){return this.jumpTo({bearing:i},o),this}getPadding(){return this.transform.padding}setPadding(i,o){return this.jumpTo({padding:i},o),this}rotateTo(i,o,f){return this.easeTo(s.e({bearing:i},o),f)}resetNorth(i,o){return this.rotateTo(0,s.e({duration:1e3},i),o),this}resetNorthPitch(i,o){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},i),o),this}snapToNorth(i,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,o):this}getPitch(){return this.transform.pitch}setPitch(i,o){return this.jumpTo({pitch:i},o),this}getRoll(){return this.transform.roll}setRoll(i,o){return this.jumpTo({roll:i},o),this}cameraForBounds(i,o){i=St.convert(i).adjustAntiMeridian();const f=o&&o.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,o)}_cameraForBoxAndBearing(i,o,f,p){const b={top:0,bottom:0,right:0,left:0};if(typeof(p=s.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const Y=p.padding;p.padding={top:Y,bottom:Y,right:Y,left:Y}}const B=s.e(b,p.padding);p.padding=B;const E=this.transform,T=new St(i,o);return this.cameraHelper.cameraForBoxAndBearing(p,B,T,f,E)}fitBounds(i,o,f){return this._fitInternal(this.cameraForBounds(i,o),o,f)}fitScreenCoordinates(i,o,f,p,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(i)),this.transform.screenPointToLocation(s.P.convert(o)),f,p),p,b)}_fitInternal(i,o,f){return i?(delete(o=s.e(i,o)).padding,o.linear?this.easeTo(o,f):this.flyTo(o,f)):this}jumpTo(i,o){this.stop();const f=this._getTransformForUpdate();let p=!1,b=!1,B=!1;const E=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,i);const T=f.zoom!==E;return"elevation"in i&&f.elevation!==+i.elevation&&f.setElevation(+i.elevation),"bearing"in i&&f.bearing!==+i.bearing&&(p=!0,f.setBearing(+i.bearing)),"pitch"in i&&f.pitch!==+i.pitch&&(b=!0,f.setPitch(+i.pitch)),"roll"in i&&f.roll!==+i.roll&&(B=!0,f.setRoll(+i.roll)),i.padding==null||f.isPaddingEqual(i.padding)||f.setPadding(i.padding),this._applyUpdatedTransform(f),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)),T&&this.fire(new s.l("zoomstart",o)).fire(new s.l("zoom",o)).fire(new s.l("zoomend",o)),p&&this.fire(new s.l("rotatestart",o)).fire(new s.l("rotate",o)).fire(new s.l("rotateend",o)),b&&this.fire(new s.l("pitchstart",o)).fire(new s.l("pitch",o)).fire(new s.l("pitchend",o)),B&&this.fire(new s.l("rollstart",o)).fire(new s.l("roll",o)).fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}calculateCameraOptionsFromTo(i,o,f,p=0){const b=s.$.fromLngLat(i,o),B=s.$.fromLngLat(f,p),E=B.x-b.x,T=B.y-b.y,Y=B.z-b.z,Q=Math.hypot(E,T,Y);if(Q===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(E,T),Z=s.ah(this.transform.cameraToCenterDistance/Q/this.transform.tileSize),q=180*Math.atan2(E,-T)/Math.PI;let J=180*Math.acos(z/Q)/Math.PI;return J=Y<0?90-J:90+J,{center:B.toLngLat(),elevation:p,zoom:Z,pitch:J,bearing:q}}calculateCameraOptionsFromCameraLngLatAltRotation(i,o,f,p,b){const B=this.transform.calculateCenterFromCameraLngLatAlt(i,o,f,p);return{center:B.center,elevation:B.elevation,zoom:B.zoom,bearing:f,pitch:p,roll:b}}easeTo(i,o){this._stop(!1,i.easeId),((i=s.e({offset:[0,0],duration:500,easing:s.cd},i)).animate===!1||!i.essential&&U.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),p=this.getBearing(),b=f.pitch,B=f.roll,E="bearing"in i?this._normalizeBearing(i.bearing,p):p,T="pitch"in i?+i.pitch:b,Y="roll"in i?this._normalizeBearing(i.roll,B):B,Q="padding"in i?i.padding:f.padding,z=s.P.convert(i.offset);let Z,q;i.around&&(Z=s.Q.convert(i.around),q=f.locationToScreenPoint(Z));const J={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},me=this.cameraHelper.handleEaseTo(f,{bearing:E,pitch:T,roll:Y,padding:Q,around:Z,aroundPoint:q,offsetAsPoint:z,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||p!==E,this._pitching=this._pitching||T!==b,this._rolling=this._rolling||Y!==B,this._padding=!f.isPaddingEqual(Q),this._zooming=this._zooming||me.isZooming,this._easeId=i.easeId,this._prepareEase(o,i.noMoveStart,J),this.terrain&&this._prepareElevation(me.elevationCenter),this._ease(pe=>{me.easeFunc(pe),this.terrain&&!i.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(f),this._fireMoveEvents(o)},pe=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(o,pe)},i),this}_prepareEase(i,o,f={}){this._moving=!0,o||f.moving||this.fire(new s.l("movestart",i)),this._zooming&&!f.zooming&&this.fire(new s.l("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new s.l("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new s.l("pitchstart",i)),this._rolling&&!f.rolling&&this.fire(new s.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&o!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(o-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=o}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};const o=i.getCameraLngLat(),f=i.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(o,i.zoom):0;if(f<p){const b=this.calculateCameraOptionsFromTo(o,p,i.center,i.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(i){const o=[];if(o.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&o.push(p=>this.transformCameraUpdate(p)),!o.length)return;const f=i.clone();for(const p of o){const b=f.clone(),{center:B,zoom:E,roll:T,pitch:Y,bearing:Q,elevation:z}=p(b);B&&b.setCenter(B),z!==void 0&&b.setElevation(z),E!==void 0&&b.setZoom(E),T!==void 0&&b.setRoll(T),Y!==void 0&&b.setPitch(Y),Q!==void 0&&b.setBearing(Q),f.apply(b)}this.transform.apply(f)}_fireMoveEvents(i){this.fire(new s.l("move",i)),this._zooming&&this.fire(new s.l("zoom",i)),this._rotating&&this.fire(new s.l("rotate",i)),this._pitching&&this.fire(new s.l("pitch",i)),this._rolling&&this.fire(new s.l("roll",i))}_afterEase(i,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const f=this._zooming,p=this._rotating,b=this._pitching,B=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new s.l("zoomend",i)),p&&this.fire(new s.l("rotateend",i)),b&&this.fire(new s.l("pitchend",i)),B&&this.fire(new s.l("rollend",i)),this.fire(new s.l("moveend",i))}flyTo(i,o){if(!i.essential&&U.prefersReducedMotion){const st=s.O(i,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(st,o)}this.stop(),i=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cd},i);const f=this._getTransformForUpdate(),p=f.bearing,b=f.pitch,B=f.roll,E=f.padding,T="bearing"in i?this._normalizeBearing(i.bearing,p):p,Y="pitch"in i?+i.pitch:b,Q="roll"in i?this._normalizeBearing(i.roll,B):B,z="padding"in i?i.padding:f.padding,Z=s.P.convert(i.offset);let q=f.centerPoint.add(Z);const J=f.screenPointToLocation(q),me=this.cameraHelper.handleFlyTo(f,{bearing:T,pitch:Y,roll:Q,padding:z,locationAtOffset:J,offsetAsPoint:Z,center:i.center,minZoom:i.minZoom,zoom:i.zoom});let pe=i.curve;const _e=Math.max(f.width,f.height),xe=_e/me.scaleOfZoom,Me=me.pixelPathLength;typeof me.scaleOfMinZoom=="number"&&(pe=Math.sqrt(_e/me.scaleOfMinZoom/Me*2));const Re=pe*pe;function Ee(st){const Nt=(xe*xe-_e*_e+(st?-1:1)*Re*Re*Me*Me)/(2*(st?xe:_e)*Re*Me);return Math.log(Math.sqrt(Nt*Nt+1)-Nt)}function Le(st){return(Math.exp(st)-Math.exp(-st))/2}function Ne(st){return(Math.exp(st)+Math.exp(-st))/2}const Ke=Ee(!1);let We=function(st){return Ne(Ke)/Ne(Ke+pe*st)},ot=function(st){return _e*((Ne(Ke)*(Le(Nt=Ke+pe*st)/Ne(Nt))-Le(Ke))/Re)/Me;var Nt},ct=(Ee(!0)-Ke)/pe;if(Math.abs(Me)<2e-6||!isFinite(ct)){if(Math.abs(_e-xe)<1e-6)return this.easeTo(i,o);const st=xe<_e?-1:1;ct=Math.abs(Math.log(xe/_e))/pe,ot=()=>0,We=Nt=>Math.exp(st*pe*Nt)}return i.duration="duration"in i?+i.duration:1e3*ct/("screenSpeed"in i?+i.screenSpeed/pe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=p!==T,this._pitching=Y!==b,this._rolling=Q!==B,this._padding=!f.isPaddingEqual(z),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(me.targetCenter),this._ease(st=>{const Nt=st*ct,Rt=1/We(Nt),bt=ot(Nt);this._rotating&&f.setBearing(s.B.number(p,T,st)),this._pitching&&f.setPitch(s.B.number(b,Y,st)),this._rolling&&f.setRoll(s.B.number(B,Q,st)),this._padding&&(f.interpolatePadding(E,z,st),q=f.centerPoint.add(Z)),me.easeFunc(st,Rt,bt,q),this.terrain&&!i.freezeElevation&&this._updateElevation(st),this._applyUpdatedTransform(f),this._fireMoveEvents(o)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,o){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,o)}return i||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(i,o,f){f.animate===!1||f.duration===0?(i(1),o()):(this._easeStart=U.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,o){i=s.aL(i,-180,180);const f=Math.abs(i-o);return Math.abs(i-360-o)<f&&(i-=360),Math.abs(i+360-o)<f&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(i),this.transform.tileZoom):null}}const ir={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ur{constructor(i=ir){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=R.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=R.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,o){const f=this._map._getUIString(`AttributionControl.${o}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const o=this._map.style.sourceCaches;for(const p in o){const b=o[p];if(b.used||b.usedForTerrain){const B=b.getSource();B.attribution&&i.indexOf(B.attribution)<0&&i.push(B.attribution)}}i=i.filter(p=>String(p).trim()),i.sort((p,b)=>p.length-b.length),i=i.filter((p,b)=>{for(let B=b+1;B<i.length;B++)if(i[B].indexOf(p)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=R.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class IA{constructor(i={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const f=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=R.create("div","maplibregl-ctrl");const o=R.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){R.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class td{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const o=++this._id;return this._queue.push({callback:i,id:o,cancelled:!1}),o}remove(i){const o=this._currentlyRunning,f=o?this._queue.concat(o):this._queue;for(const p of f)if(p.id===i)return void(p.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const f of o)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var rd=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class ta extends s.E{constructor(i){super(),this._lastTilesetChange=U.now(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,o){this.sourceCache.update(i,o),this._renderableTilesKeys=[];const f={};for(const p of Ie(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(p.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[p.key]=new Un(p,this.tileSize),this._lastTilesetChange=U.now());for(const p in this._tiles)f[p]||delete this._tiles[p]}freeRtt(i){for(const o in this._tiles){const f=this._tiles[o];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,o){return o?this._getTerrainCoordsForTileRanges(i,o):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){const o={};for(const f of this._renderableTilesKeys){const p=this._tiles[f].tileID,b=i.clone(),B=s.b2();if(p.canonical.equals(i.canonical))s.bQ(B,0,s.Z,s.Z,0,0,1);else if(p.canonical.isChildOf(i.canonical)){const E=p.canonical.z-i.canonical.z,T=p.canonical.x-(p.canonical.x>>E<<E),Y=p.canonical.y-(p.canonical.y>>E<<E),Q=s.Z>>E;s.bQ(B,0,Q,Q,0,0,1),s.L(B,B,[-T*Q,-Y*Q,0])}else{if(!i.canonical.isChildOf(p.canonical))continue;{const E=i.canonical.z-p.canonical.z,T=i.canonical.x-(i.canonical.x>>E<<E),Y=i.canonical.y-(i.canonical.y>>E<<E),Q=s.Z>>E;s.bQ(B,0,s.Z,s.Z,0,0,1),s.L(B,B,[T*Q,Y*Q,0]),s.M(B,B,[1/2**E,1/2**E,0])}}b.terrainRttPosMatrix32f=new Float32Array(B),o[f]=b}return o}_getTerrainCoordsForTileRanges(i,o){const f={};for(const p of this._renderableTilesKeys){const b=this._tiles[p].tileID;if(!this._isWithinTileRanges(b,o))continue;const B=i.clone(),E=s.b2();if(b.canonical.z===i.canonical.z){const T=i.canonical.x-b.canonical.x,Y=i.canonical.y-b.canonical.y;s.bQ(E,0,s.Z,s.Z,0,0,1),s.L(E,E,[T*s.Z,Y*s.Z,0])}else if(b.canonical.z>i.canonical.z){const T=b.canonical.z-i.canonical.z,Y=b.canonical.x-(b.canonical.x>>T<<T),Q=b.canonical.y-(b.canonical.y>>T<<T),z=i.canonical.x-(b.canonical.x>>T),Z=i.canonical.y-(b.canonical.y>>T),q=s.Z>>T;s.bQ(E,0,q,q,0,0,1),s.L(E,E,[-Y*q+z*s.Z,-Q*q+Z*s.Z,0])}else{const T=i.canonical.z-b.canonical.z,Y=i.canonical.x-(i.canonical.x>>T<<T),Q=i.canonical.y-(i.canonical.y>>T<<T),z=(i.canonical.x>>T)-b.canonical.x,Z=(i.canonical.y>>T)-b.canonical.y,q=s.Z<<T;s.bQ(E,0,q,q,0,0,1),s.L(E,E,[Y*s.Z+z*q,Q*s.Z+Z*q,0])}B.terrainRttPosMatrix32f=new Float32Array(E),f[p]=B}return f}getSourceTile(i,o){const f=this.sourceCache._source;let p=i.overscaledZ-this.deltaZoom;if(p>f.maxzoom&&(p=f.maxzoom),p<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(p).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!b||!b.dem)&&o)for(;p>=f.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(i.scaledTo(p--).key);return b}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,o){return o[i.canonical.z]&&i.canonical.x>=o[i.canonical.z].minTileX&&i.canonical.x<=o[i.canonical.z].maxTileX&&i.canonical.y>=o[i.canonical.z].minTileY&&i.canonical.y<=o[i.canonical.z].maxTileY}}class jf{constructor(i,o,f){this._meshCache={},this.painter=i,this.sourceCache=new ta(o),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,o,f,p=s.Z){var b;if(!(o>=0&&o<p&&f>=0&&f<p))return 0;const B=this.getTerrainData(i),E=(b=B.tile)===null||b===void 0?void 0:b.dem;if(!E)return 0;const T=s.ch([],[o/p*s.Z,f/p*s.Z],B.u_terrain_matrix),Y=[T[0]*E.dim,T[1]*E.dim],Q=Math.floor(Y[0]),z=Math.floor(Y[1]),Z=Y[0]-Q,q=Y[1]-z;return E.get(Q,z)*(1-Z)*(1-q)+E.get(Q+1,z)*Z*(1-q)+E.get(Q,z+1)*(1-Z)*q+E.get(Q+1,z+1)*Z*q}getElevationForLngLatZoom(i,o){if(!s.ci(o,i.wrap()))return 0;const{tileID:f,mercatorX:p,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(i,o);return this.getElevation(f,p%s.Z,b%s.Z,s.Z)}getElevation(i,o,f,p=s.Z){return this.getDEMElevation(i,o,f,p)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const p=this.painter.context,b=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new V(p,b,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new V(p,new s.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}const o=this.sourceCache.getSourceTile(i,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const p=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new V(p,o.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),o.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const f=o&&o+o.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const p=this.sourceCache.sourceCache._source.maxzoom;let b=i.canonical.z-o.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=p?b=i.canonical.z-p:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=i.canonical.x-(i.canonical.x>>b<<b),E=i.canonical.y-(i.canonical.y>>b<<b),T=s.cj(new Float64Array(16),[1/(s.Z<<b),1/(s.Z<<b),0]);s.L(T,T,[B*s.Z,E*s.Z,0]),this._demMatrixCache[i.key]={matrix:T,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(i){const o=this.painter,f=o.width/devicePixelRatio,p=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new V(o.context,{width:f,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new V(o.context,{width:f,height:p,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(f,p,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,f,p))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,B=0;b<this._coordsTextureSize;b++)for(let E=0;E<this._coordsTextureSize;E++,B+=4)o[B+0]=255&E,o[B+1]=255&b,o[B+2]=E>>8<<4|b>>8,o[B+3]=0;const f=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),p=new V(i,f,i.gl.RGBA,{premultiply:!1});return p.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),f=this.painter.context,p=f.gl,b=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),B=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(b,E-B-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),f.bindFramebuffer.set(null);const T=o[0]+(o[2]>>4<<8),Y=o[1]+((15&o[2])<<8),Q=this.coordsIndex[255-o[3]],z=Q&&this.sourceCache.getTileByID(Q);if(!z)return null;const Z=this._coordsTextureSize,q=(1<<z.tileID.canonical.z)*Z;return new s.$((z.tileID.canonical.x*Z+T)/q+z.tileID.wrap,(z.tileID.canonical.y*Z+Y)/q,this.getElevation(z.tileID,T,Y,Z))}depthAtPoint(i){const o=new Uint8Array(4),f=this.painter.context,p=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,o),f.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(i){var o;const f=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,p=f&&i.canonical.y===0,b=f&&i.canonical.y===(1<<i.canonical.z)-1,B=`m_${p?"n":""}_${b?"s":""}`;if(this._meshCache[B])return this._meshCache[B];const E=this.painter.context,T=new s.ck,Y=new s.aK,Q=this.meshSize,z=s.Z/Q,Z=Q*Q;for(let Ne=0;Ne<=Q;Ne++)for(let Ke=0;Ke<=Q;Ke++)T.emplaceBack(Ke*z,Ne*z,0);for(let Ne=0;Ne<Z;Ne+=Q+1)for(let Ke=0;Ke<Q;Ke++)Y.emplaceBack(Ke+Ne,Q+Ke+Ne+1,Q+Ke+Ne+2),Y.emplaceBack(Ke+Ne,Q+Ke+Ne+2,Ke+Ne+1);const q=T.length,J=q+(Q+1),me=(Q+1)*Q,pe=p?s.b9:0,_e=p?0:1,xe=b?s.ba:s.Z,Me=b?0:1;for(let Ne=0;Ne<=Q;Ne++)T.emplaceBack(Ne*z,pe,_e);for(let Ne=0;Ne<=Q;Ne++)T.emplaceBack(Ne*z,xe,Me);for(let Ne=0;Ne<Q;Ne++)Y.emplaceBack(me+Ne,J+Ne,J+Ne+1),Y.emplaceBack(me+Ne,J+Ne+1,me+Ne+1),Y.emplaceBack(0+Ne,q+Ne+1,q+Ne),Y.emplaceBack(0+Ne,0+Ne+1,q+Ne+1);const Re=T.length,Ee=Re+2*(Q+1);for(const Ne of[0,1])for(let Ke=0;Ke<=Q;Ke++)for(const We of[0,1])T.emplaceBack(Ne*s.Z,Ke*z,We);for(let Ne=0;Ne<2*Q;Ne+=2)Y.emplaceBack(Re+Ne,Re+Ne+1,Re+Ne+3),Y.emplaceBack(Re+Ne,Re+Ne+3,Re+Ne+2),Y.emplaceBack(Ee+Ne,Ee+Ne+3,Ee+Ne+1),Y.emplaceBack(Ee+Ne,Ee+Ne+2,Ee+Ne+3);const Le=new nl(E.createVertexBuffer(T,rd.members),E.createIndexBuffer(Y),s.aJ.simpleSegment(0,0,T.length,Y.length));return this._meshCache[B]=Le,Le}getMeshFrameDelta(i){return 2*Math.PI*s.bu/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,o){var f;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(i,o);return(f=this.getMinMaxElevation(p).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const o=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return o&&o.dem&&(f.minElevation=o.dem.min*this.exaggeration,f.maxElevation=o.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,o){const f=s.$.fromLngLat(i.wrap()),p=(1<<o)*s.Z,b=f.x*p,B=f.y*p,E=Math.floor(b/s.Z),T=Math.floor(B/s.Z);return{tileID:new s.Y(o,0,o,E,T),mercatorX:b,mercatorY:B}}}class ts{constructor(i,o,f){this._context=i,this._size=o,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new V(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(f.texture),{id:i,fbo:o,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>i.id!==o),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ml={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class UA{constructor(i,o){this.painter=i,this.terrain=o,this.pool=new ts(i.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(o)),this._coordsAscending={};for(const f in i.sourceCaches){this._coordsAscending[f]={};const p=i.sourceCaches[f].getVisibleCoordinates(),b=i.sourceCaches[f].getSource(),B=b instanceof Dr?b.terrainTileRanges:null;for(const E of p){const T=this.terrain.sourceCache.getTerrainCoords(E,B);for(const Y in T)this._coordsAscending[f][Y]||(this._coordsAscending[f][Y]=[]),this._coordsAscending[f][Y].push(T[Y])}}this._coordsAscendingStr={};for(const f of i._order){const p=i._layers[f],b=p.source;if(ml[p.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const B in this._coordsAscending[b])this._coordsAscendingStr[b][B]=this._coordsAscending[b][B].map(E=>E.key).sort().join()}}for(const f of this._renderableTiles)for(const p in this._coordsAscendingStr){const b=this._coordsAscendingStr[p][f.tileID.key];b&&b!==f.rttCoords[p]&&(f.rtt=[])}}renderLayer(i,o){if(i.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),p=i.type,b=this.painter,B=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ml[p]&&(this._prevType&&ml[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(i.id),!B))return!0;if(ml[this._prevType]||ml[p]&&B){this._prevType=p;const E=this._stacks.length-1,T=this._stacks[E]||[];for(const Y of this._renderableTiles){if(this.pool.isFull()&&(Ou(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Y),Y.rtt[E]){const z=this.pool.getObjectForId(Y.rtt[E].id);if(z.stamp===Y.rtt[E].stamp){this.pool.useObject(z);continue}}const Q=this.pool.getOrCreateFreeObject();this.pool.useObject(Q),this.pool.stampObject(Q),Y.rtt[E]={id:Q.id,stamp:Q.stamp},b.context.bindFramebuffer.set(Q.fbo.framebuffer),b.context.clear({color:s.b7.transparent,stencil:0}),b.currentStencilSource=void 0;for(let z=0;z<T.length;z++){const Z=b.style._layers[T[z]],q=Z.source?this._coordsAscending[Z.source][Y.tileID.key]:[Y.tileID];b.context.viewport.set([0,0,Q.fbo.width,Q.fbo.height]),b._renderTileClippingMasks(Z,q,!0),b.renderLayer(b,b.style.sourceCaches[Z.source],Z,q,f),Z.source&&(Y.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][Y.tileID.key])}}return Ou(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),ml[p]}return!1}}const Yi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Zi=y,id={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ir,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},EA={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Vc{constructor(i,o,f=!1){this.mousedown=b=>{this.startMove(b,R.mousePos(this.element,b)),R.addEventListener(window,"mousemove",this.mousemove),R.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,R.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHanlder.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),R.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const p=new $u;this._rotatePitchHanlder=new ys({clickTolerance:3,move:(b,B)=>{const E=o.getBoundingClientRect(),T=new s.P((E.bottom-E.top)/2,(E.right-E.left)/2);return{bearingDelta:s.cc(new s.P(b.x,B.y),B,T),pitchDelta:f?-.5*(B.y-b.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=i,R.addEventListener(o,"mousedown",this.mousedown),R.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(o,"touchcancel",this.reset)}startMove(i,o){this._rotatePitchHanlder.dragStart(i,o),R.disableDrag()}move(i,o){const f=this.map,{bearingDelta:p,pitchDelta:b}=this._rotatePitchHanlder.dragMove(i,o)||{};p&&f.setBearing(f.getBearing()+p),b&&f.setPitch(f.getPitch()+b)}off(){const i=this.element;R.removeEventListener(i,"mousedown",this.mousedown),R.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend),R.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){R.enableDrag(),R.removeEventListener(window,"mousemove",this.mousemove),R.removeEventListener(window,"mouseup",this.mouseup),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend)}}let xs;function Gc(_,i,o,f=!1){if(f||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return _==null?void 0:_.wrap();const p=new s.Q(_.lng,_.lat);if(_=new s.Q(_.lng,_.lat),i){const b=new s.Q(_.lng-360,_.lat),B=new s.Q(_.lng+360,_.lat),E=o.locationToScreenPoint(_).distSqr(i);o.locationToScreenPoint(b).distSqr(i)<E?_=b:o.locationToScreenPoint(B).distSqr(i)<E&&(_=B)}for(;Math.abs(_.lng-o.center.lng)>180;){const b=o.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=o.width&&b.y<=o.height)break;_.lng>o.center.lng?_.lng-=360:_.lng+=360}return _.lng!==p.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(_))?_:p}const FA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _l(_,i,o){const f=_.classList;for(const p in FA)f.remove(`maplibregl-${o}-anchor-${p}`);f.add(`maplibregl-${o}-anchor-${i}`)}class TA extends s.E{constructor(i){if(super(),this._onKeyPress=o=>{const f=o.code,p=o.charCode||o.keyCode;f!=="Space"&&f!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=o=>{const f=o.originalEvent.target,p=this._element;this._popup&&(f===p||p.contains(f))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=Gc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,`${FA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${p}`),U.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=s.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div");const o=R.createNS("http://www.w3.org/2000/svg","svg"),f=41,p=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${f}px`),o.setAttributeNS(null,"width",`${p}px`),o.setAttributeNS(null,"viewBox",`0 0 ${p} ${f}`);const b=R.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const B=R.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const E=R.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _e of T){const xe=R.createNS("http://www.w3.org/2000/svg","ellipse");xe.setAttributeNS(null,"opacity","0.04"),xe.setAttributeNS(null,"cx","10.5"),xe.setAttributeNS(null,"cy","5.80029008"),xe.setAttributeNS(null,"rx",_e.rx),xe.setAttributeNS(null,"ry",_e.ry),E.appendChild(xe)}const Y=R.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);const Q=R.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(Q);const z=R.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const Z=R.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(Z);const q=R.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),q.setAttributeNS(null,"fill","#FFFFFF");const J=R.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=R.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const pe=R.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),J.appendChild(me),J.appendChild(pe),B.appendChild(E),B.appendChild(Y),B.appendChild(z),B.appendChild(q),B.appendChild(J),o.appendChild(B),o.setAttributeNS(null,"height",f*this._scale+"px"),o.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(o),this._offset=s.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),_l(this._element,this._anchor,"marker"),i&&i.className)for(const o of i.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.Q.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const p=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var o,f;if(!(!((o=this._map)===null||o===void 0)&&o.terrain)){const z=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==z&&(this._element.style.opacity=z))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const p=this._map,b=p.terrain.depthAtPoint(this._pos),B=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,B)-b<.006)return void(this._element.style.opacity=this._opacity);const E=-this._offset.y/p.transform.pixelsPerMeter,T=Math.sin(p.getPitch()*Math.PI/180)*E,Y=p.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),Q=p.transform.lngLatToCameraDepth(this._lngLat,B+T)-Y>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&Q&&this._popup.remove(),this._element.style.opacity=Q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=s.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,o){return(this._opacity===void 0||i===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const nd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let bl=0,Fo=!1;const ad={maxWidth:100,unit:"metric"};function jc(_,i,o){const f=o&&o.maxWidth||100,p=_._container.clientHeight/2,b=_._container.clientWidth/2,B=_.unproject([b-f/2,p]),E=_.unproject([b+f/2,p]),T=Math.round(_.project(E).x-_.project(B).x),Y=Math.min(f,T,_._container.clientWidth),Q=B.distanceTo(E);if(o&&o.unit==="imperial"){const z=3.2808*Q;z>5280?To(i,Y,z/5280,_._getUIString("ScaleControl.Miles")):To(i,Y,z,_._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?To(i,Y,Q/1852,_._getUIString("ScaleControl.NauticalMiles")):Q>=1e3?To(i,Y,Q/1e3,_._getUIString("ScaleControl.Kilometers")):To(i,Y,Q,_._getUIString("ScaleControl.Meters"))}function To(_,i,o,f){const p=function(b){const B=Math.pow(10,`${Math.floor(b)}`.length-1);let E=b/B;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(T){const Y=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*Y)/Y}(E),B*E}(o);_.style.width=i*(p/o)+"px",_.innerHTML=`${p}&nbsp;${f}`}const sd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Kc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $c(_){if(_){if(typeof _=="number"){const i=Math.round(Math.abs(_)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,_),"top-left":new s.P(i,i),"top-right":new s.P(-i,i),bottom:new s.P(0,-_),"bottom-left":new s.P(i,-i),"bottom-right":new s.P(-i,-i),left:new s.P(_,0),right:new s.P(-_,0)}}if(_ instanceof s.P||Array.isArray(_)){const i=s.P.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:s.P.convert(_.center||[0,0]),top:s.P.convert(_.top||[0,0]),"top-left":s.P.convert(_["top-left"]||[0,0]),"top-right":s.P.convert(_["top-right"]||[0,0]),bottom:s.P.convert(_.bottom||[0,0]),"bottom-left":s.P.convert(_["bottom-left"]||[0,0]),"bottom-right":s.P.convert(_["bottom-right"]||[0,0]),left:s.P.convert(_.left||[0,0]),right:s.P.convert(_.right||[0,0])}}return $c(new s.P(0,0))}const od=y;h.AJAXError=s.co,h.Event=s.l,h.Evented=s.E,h.LngLat=s.Q,h.MercatorCoordinate=s.$,h.Point=s.P,h.addProtocol=s.cp,h.config=s.a,h.removeProtocol=s.cq,h.AttributionControl=ur,h.BoxZoomHandler=Qf,h.CanvasSource=Gr,h.CooperativeGesturesHandler=Ju,h.DoubleClickZoomHandler=Vf,h.DragPanHandler=gi,h.DragRotateHandler=MA,h.EdgeInsets=aA,h.FullscreenControl=class extends s.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var i;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=o==null?void 0:o.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){R.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=R.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);R.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=Br,h.GeolocateControl=class extends s.E{constructor(_){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{const o=new s.Q(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,p=this._map.getBearing(),b=s.e({bearing:p},this.options.fitBoundsOptions),B=St.fromLngLat(o,f);this._map.fitBounds(B,b,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const o=new s.Q(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Fo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=R.create("button","maplibregl-ctrl-geolocate",this._container),R.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new TA({element:this._dotElement}),this._circleElement=R.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new TA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},nd,_)}onAdd(_){return this._map=_,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(i=!1){if(xs!==void 0&&!i)return xs;if(window.navigator.permissions===void 0)return xs=!!window.navigator.geolocation,xs;try{xs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{xs=!!window.navigator.geolocation}return xs})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,bl=0,Fo=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),o=_.coords;return i&&(o.longitude<i.getWest()||o.longitude>i.getEast()||o.latitude<i.getSouth()||o.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),i=_.getSouthEast(),o=_.getNorthEast(),f=i.distanceTo(o),p=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":bl--,Fo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),bl++,bl>1?(_={maximumAge:6e5,timeout:0},Fo=!0):(_=this.options.positionOptions,Fo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const i=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=R.create("button","maplibregl-ctrl-globe",this._container),R.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},h.Hash=Gu,h.ImageSource=Dr,h.KeyboardHandler=Hc,h.LngLatBounds=St,h.LogoControl=IA,h.Map=class extends Xc{constructor(_){var i,o;s.cl.mark(s.cm.create);const f=Object.assign(Object.assign(Object.assign({},id),_),{canvasContextAttributes:Object.assign(Object.assign({},id.canvasContextAttributes),_.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new $a,b=new lA;if(f.minZoom!==void 0&&p.setMinZoom(f.minZoom),f.maxZoom!==void 0&&p.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&p.setMinPitch(f.minPitch),f.maxPitch!==void 0&&p.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&p.setRenderWorldCopies(f.renderWorldCopies),super(p,b,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new td,this._controls=[],this._mapId=s.a4(),this._contextLost=E=>{E.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:E}))},this._contextRestored=E=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:E}))},this._onMapScroll=E=>{if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Yi),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=de.addThrottleControl(()=>this.isMoving()),this._requestManager=new le(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let E=!1;const T=Vu(Y=>{this._trackResize&&!this._removed&&(this.resize(Y),this.redraw())},50);this._resizeObserver=new ResizeObserver(Y=>{E?T(Y):E=!0}),this._resizeObserver.observe(this._container)}this.handlers=new es(this,f),this._hash=f.hash&&new Gu(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,s.e({},f.fitBoundsOptions,{duration:0}))));const B=typeof f.style=="string"||((o=(i=f.style)===null||i===void 0?void 0:i.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,B),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new ur(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new IA,f.logoPosition),this.on("style.load",()=>{if(B||this._resizeTransform(),this.transform.unmodified){const E=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(E)}}),this.on("data",E=>{this._update(E.dataType==="style"),this.fire(new s.l(`${E.dataType}data`,E))}),this.on("dataloading",E=>{this.fire(new s.l(`${E.dataType}dataloading`,E))}),this.on("dataabort",E=>{this.fire(new s.l("sourcedataabort",E))})}_getMapId(){return this._mapId}addControl(_,i){if(i===void 0&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=_.onAdd(this);this._controls.push(_);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,i,o,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,i,o,f)}resize(_,i=!0){const[o,f]=this._containerDimensions(),p=this._getClampedPixelRatio(o,f);if(this._resizeCanvas(o,f,p),this.painter.resize(o,f,p),this.painter.overLimit()){const B=this.painter.context.gl;this._maxCanvasSize=[B.drawingBufferWidth,B.drawingBufferHeight];const E=this._getClampedPixelRatio(o,f);this._resizeCanvas(o,f,E),this.painter.resize(o,f,E)}this._resizeTransform(i);const b=!this._moving;return b&&(this.stop(),this.fire(new s.l("movestart",_)).fire(new s.l("move",_))),this.fire(new s.l("resize",_)),b&&this.fire(new s.l("moveend",_)),this}_resizeTransform(_=!0){var i;const[o,f]=this._containerDimensions();this.transform.resize(o,f,_),(i=this._requestedCameraState)===null||i===void 0||i.resize(o,f,_)}_getClampedPixelRatio(_,i){const{0:o,1:f}=this._maxCanvasSize,p=this.getPixelRatio(),b=_*p,B=i*p;return Math.min(b>o?o/b:1,B>f?f/B:1)*p}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(St.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(s.Q.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(s.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,i,o){if(_==="mouseenter"||_==="mouseover"){let f=!1;return{layers:i,listener:o,delegates:{mousemove:b=>{const B=i.filter(T=>this.getLayer(T)),E=B.length!==0?this.queryRenderedFeatures(b.point,{layers:B}):[];E.length?f||(f=!0,o.call(this,new ea(_,this,b.originalEvent,{features:E}))):f=!1},mouseout:()=>{f=!1}}}}if(_==="mouseleave"||_==="mouseout"){let f=!1;return{layers:i,listener:o,delegates:{mousemove:B=>{const E=i.filter(T=>this.getLayer(T));(E.length!==0?this.queryRenderedFeatures(B.point,{layers:E}):[]).length?f=!0:f&&(f=!1,o.call(this,new ea(_,this,B.originalEvent)))},mouseout:B=>{f&&(f=!1,o.call(this,new ea(_,this,B.originalEvent)))}}}}{const f=p=>{const b=i.filter(E=>this.getLayer(E)),B=b.length!==0?this.queryRenderedFeatures(p.point,{layers:b}):[];B.length&&(p.features=B,o.call(this,p),delete p.features)};return{layers:i,listener:o,delegates:{[_]:f}}}}_saveDelegatedListener(_,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(i)}_removeDelegatedListener(_,i,o){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const f=this._delegatedListeners[_];for(let p=0;p<f.length;p++){const b=f[p];if(b.listener===o&&b.layers.length===i.length&&b.layers.every(B=>i.includes(B))){for(const B in b.delegates)this.off(B,b.delegates[B]);return void f.splice(p,1)}}}on(_,i,o){if(o===void 0)return super.on(_,i);const f=typeof i=="string"?[i]:i,p=this._createDelegatedListener(_,f,o);this._saveDelegatedListener(_,p);for(const b in p.delegates)this.on(b,p.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,f,o)}}}once(_,i,o){if(o===void 0)return super.once(_,i);const f=typeof i=="string"?[i]:i,p=this._createDelegatedListener(_,f,o);for(const b in p.delegates){const B=p.delegates[b];p.delegates[b]=(...E)=>{this._removeDelegatedListener(_,f,o),B(...E)}}this._saveDelegatedListener(_,p);for(const b in p.delegates)this.once(b,p.delegates[b]);return this}off(_,i,o){return o===void 0?super.off(_,i):(this._removeDelegatedListener(_,typeof i=="string"?[i]:i,o),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let o;const f=_ instanceof s.P||Array.isArray(_),p=f?_:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:_)||{},p instanceof s.P||typeof p[0]=="number")o=[s.P.convert(p)];else{const b=s.P.convert(p[0]),B=s.P.convert(p[1]);o=[b,new s.P(B.x,b.y),B,new s.P(b.x,B.y),b]}return this.style.queryRenderedFeatures(o,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return(i=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(i==null)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){var o,f;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,i));const p=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new fA(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,i,p):this.style.loadJSON(_,i,p),this):((f=(o=this.style)===null||o===void 0?void 0:o.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fA(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if(typeof _=="string"){const o=this._requestManager.transformRequest(_,"Style");s.j(o,new AbortController).then(f=>{this._updateDiff(f.data,i)}).catch(f=>{f&&this.fire(new s.k(f))})}else typeof _=="object"&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_,i)&&this._update(!0)}catch(o){s.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(i!==void 0)return i.loaded();this.fire(new s.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const i=this.style.sourceCaches[_.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&i.reload();for(const o in this.style._layers){const f=this.style._layers[o];f.type==="hillshade"&&f.source===_.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new jf(this.painter,i,_),this.painter.renderToTexture=new UA(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var f;o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=o.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:_})),this}getTerrain(){var _,i;return(i=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const o=_[i]._tiles;for(const f in o){const p=o[f];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,i,o){if(o){const f=this.getSource(o);if(!f)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);f.calculateTileZoom=Ae(Math.max(1,_),Math.max(1,i))}else for(const f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=Ae(Math.max(1,_),Math.max(1,i));return this._update(!0),this}addImage(_,i,o={}){const{pixelRatio:f=1,sdf:p=!1,stretchX:b,stretchY:B,content:E,textFitWidth:T,textFitHeight:Y}=o;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||s.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Q,height:z,data:Z}=i,q=i;return this.style.addImage(_,{data:new s.R({width:Q,height:z},new Uint8Array(Z)),pixelRatio:f,stretchX:b,stretchY:B,content:E,textFitWidth:T,textFitHeight:Y,sdf:p,version:0,userImage:q}),q.onAdd&&q.onAdd(this,_),this}}{const{width:Q,height:z,data:Z}=U.getImageData(i);this.style.addImage(_,{data:new s.R({width:Q,height:z},Z),pixelRatio:f,stretchX:b,stretchY:B,content:E,textFitWidth:T,textFitHeight:Y,sdf:p,version:0})}}updateImage(_,i){const o=this.style.getImage(_);if(!o)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||s.b(i)?U.getImageData(i):i,{width:p,height:b,data:B}=f;if(p===void 0||b===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==o.data.width||b!==o.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(i instanceof HTMLImageElement||s.b(i));return o.data.replace(B,E),this.style.updateImage(_,o),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return de.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,i,o){return this.style.setLayerZoomRange(_,i,o),this._update(!0)}setFilter(_,i,o={}){return this.style.setFilter(_,i,o),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,o,f={}){return this.style.setPaintProperty(_,i,o,f),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,o,f={}){return this.style.setLayoutProperty(_,i,o,f),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setGlyphs(_,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,i,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,i,o,f=>{f||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,i,o=>{o||this._update(!0)}),this}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const i=this._canvasContainer=R.create("div","maplibregl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=R.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),f=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],f);const p=this._controlContainer=R.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{b[B]=R.create("div",`maplibregl-ctrl-${B} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,i,o){this._canvas.width=Math.floor(o*_),this._canvas.height=Math.floor(o*i),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:_},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!o){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new Ef(o,this.transform),N.testSupport(o)}migrateProjection(_,i){super.migrateProjection(_,i),this.painter.transform=_,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var i,o,f,p,b;const B=this._idleTriggered?this._fadeDuration:0,E=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let T=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,Z=U.now();this.style.zoomHistory.update(z,Z);const q=new s.C(z,{now:Z,fadeDuration:B,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=q.crossFadingFactor();J===1&&J===this._crossFadingFactor||(T=!0,this._crossFadingFactor=J),this.style.update(q)}const Y=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==E;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Y)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,B,this._crossSourceCollisions,Y),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:B,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cl.mark(s.cm.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Q=this._sourcesDirty||this._styleDirty||this._placementDirty;return Q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||Q||(this._fullyLoaded=!0,s.cl.mark(s.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),R.remove(this._canvasContainer),R.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cl.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,U.frame(this._frameRequest,_=>{s.cl.frame(_),this._frameRequest=null;try{this._render(_)}catch(i){if(!s.cn(i)&&!function(o){return o.message===Su}(i))throw i}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Zi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},h.MapMouseEvent=ea,h.MapTouchEvent=Hn,h.MapWheelEvent=Ta,h.Marker=TA,h.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const i=this._map.getZoom(),o=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,o)=>{const f=this._map._getUIString(`NavigationControl.${o}`);i.title=f,i.setAttribute("aria-label",f)},this.options=s.e({},EA,_),this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),R.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),R.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=R.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const o=R.create("button",_,this._container);return o.type="button",o.addEventListener("click",i),o}},h.Popup=class extends s.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=R.create("div","maplibregl-popup",this._map.getContainer()),this._tip=R.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const B of this.options.className.split(" "))this._container.classList.add(B);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Gc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;const o=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const p=$c(this.options.offset);if(!f){const B=this._container.offsetWidth,E=this._container.offsetHeight;let T;T=o.y+p.bottom.y<E?["top"]:o.y>this._map.transform.height-E?["bottom"]:[],o.x<B/2?T.push("left"):o.x>this._map.transform.width-B/2&&T.push("right"),f=T.length===0?"bottom":T.join("-")}let b=o.add(p[f]);this.options.subpixelPositioning||(b=b.round()),R.setTransform(this._container,`${FA[f]} translate(${b.x}px,${b.y}px)`),_l(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(sd),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=s.Q.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),o=document.createElement("body");let f;for(o.innerHTML=_;f=o.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=R.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Kc);_&&_.focus()}},h.RasterDEMTileSource=rr,h.RasterTileSource=dr,h.ScaleControl=class{constructor(_){this._onMove=()=>{jc(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,jc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ad),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=Wu,h.Style=fA,h.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=R.create("button","maplibregl-ctrl-terrain",this._container),R.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){R.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=Zf,h.TwoFingersTouchRotateHandler=Zc,h.TwoFingersTouchZoomHandler=zc,h.TwoFingersTouchZoomRotateHandler=Oc,h.VectorTileSource=lr,h.VideoSource=vi,h.addSourceType=(_,i)=>s._(void 0,void 0,void 0,function*(){if(Kr(_))throw new Error(`A source type called "${_}" already exists.`);((o,f)=>{Fi[o]=f})(_,i)}),h.clearPrewarmedResources=function(){const _=pt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Je),pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.createTileMesh=fc,h.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return ui().getRTLTextPluginStatus()},h.getVersion=function(){return od},h.getWorkerCount=function(){return je.workerCount},h.getWorkerUrl=function(){return s.a.WORKER_URL},h.importScriptInWorkers=function(_){return Mt().broadcast("IS",_)},h.prewarm=function(){wt().acquire(Je)},h.setMaxParallelImageRequests=function(_){s.a.MAX_PARALLEL_IMAGE_REQUESTS=_},h.setRTLTextPlugin=function(_,i){return ui().setRTLTextPlugin(_,i)},h.setWorkerCount=function(_){je.workerCount=_},h.setWorkerUrl=function(_){s.a.WORKER_URL=_}});var u=r;return u})})(d8);var Fp=d8.exports;const Vs=Z4(Fp),g8=/^[a-z0-9]+(-[a-z0-9]+)*$/,Tp=(t,e,r,a="")=>{const l=t.split(":");if(t.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;a=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const s=l.pop(),y=l.pop(),x={provider:l.length>0?l[0]:a,prefix:y,name:s};return e&&!pg(x)?null:x}const u=l[0],h=u.split("-");if(h.length>1){const s={provider:a,prefix:h.shift(),name:h.join("-")};return e&&!pg(s)?null:s}if(r&&a===""){const s={provider:a,prefix:"",name:u};return e&&!pg(s,r)?null:s}return null},pg=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,p8=Object.freeze({left:0,top:0,width:16,height:16}),Zg=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Sp=Object.freeze({...p8,...Zg}),Um=Object.freeze({...Sp,body:"",hidden:!1});function oM(t,e){const r={};!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0);const a=((t.rotate||0)+(e.rotate||0))%4;return a&&(r.rotate=a),r}function Oy(t,e){const r=oM(t,e);for(const a in Um)a in Zg?a in t&&!(a in r)&&(r[a]=Zg[a]):a in e?r[a]=e[a]:a in t&&(r[a]=t[a]);return r}function lM(t,e){const r=t.icons,a=t.aliases||Object.create(null),l=Object.create(null);function u(h){if(r[h])return l[h]=[];if(!(h in l)){l[h]=null;const s=a[h]&&a[h].parent,y=s&&u(s);y&&(l[h]=[s].concat(y))}return l[h]}return Object.keys(r).concat(Object.keys(a)).forEach(u),l}function AM(t,e,r){const a=t.icons,l=t.aliases||Object.create(null);let u={};function h(s){u=Oy(a[s]||l[s],u)}return h(e),r.forEach(h),Oy(t,u)}function m8(t,e){const r=[];if(typeof t!="object"||typeof t.icons!="object")return r;t.not_found instanceof Array&&t.not_found.forEach(l=>{e(l,null),r.push(l)});const a=lM(t);for(const l in a){const u=a[l];u&&(e(l,AM(t,l,u)),r.push(l))}return r}const cM={provider:"",aliases:{},not_found:{},...p8};function b3(t,e){for(const r in e)if(r in t&&typeof t[r]!=typeof e[r])return!1;return!0}function _8(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!b3(t,cM))return null;const r=e.icons;for(const l in r){const u=r[l];if(!l||typeof u.body!="string"||!b3(u,Um))return null}const a=e.aliases||Object.create(null);for(const l in a){const u=a[l],h=u.parent;if(!l||typeof h!="string"||!r[h]&&!a[h]||!b3(u,Um))return null}return e}const Xy=Object.create(null);function hM(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Oh(t,e){const r=Xy[t]||(Xy[t]=Object.create(null));return r[e]||(r[e]=hM(t,e))}function b8(t,e){return _8(e)?m8(e,(r,a)=>{a?t.icons[r]=a:t.missing.add(r)}):[]}function uM(t,e,r){try{if(typeof r.body=="string")return t.icons[e]={...r},!0}catch{}return!1}let U0=!1;function y8(t){return typeof t=="boolean"&&(U0=t),U0}function dM(t){const e=typeof t=="string"?Tp(t,!0,U0):t;if(e){const r=Oh(e.provider,e.prefix),a=e.name;return r.icons[a]||(r.missing.has(a)?null:void 0)}}function fM(t,e){const r=Tp(t,!0,U0);if(!r)return!1;const a=Oh(r.provider,r.prefix);return e?uM(a,r.name,e):(a.missing.add(r.name),!0)}function gM(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),U0&&!e&&!t.prefix){let l=!1;return _8(t)&&(t.prefix="",m8(t,(u,h)=>{fM(u,h)&&(l=!0)})),l}const r=t.prefix;if(!pg({prefix:r,name:"a"}))return!1;const a=Oh(e,r);return!!b8(a,t)}const v8=Object.freeze({width:null,height:null}),x8=Object.freeze({...v8,...Zg}),pM=/(-?[0-9.]*[0-9]+[0-9.]*)/g,mM=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Vy(t,e,r){if(e===1)return t;if(r=r||100,typeof t=="number")return Math.ceil(t*e*r)/r;if(typeof t!="string")return t;const a=t.split(pM);if(a===null||!a.length)return t;const l=[];let u=a.shift(),h=mM.test(u);for(;;){if(h){const s=parseFloat(u);isNaN(s)?l.push(u):l.push(Math.ceil(s*e*r)/r)}else l.push(u);if(u=a.shift(),u===void 0)return l.join("");h=!h}}function _M(t,e="defs"){let r="";const a=t.indexOf("<"+e);for(;a>=0;){const l=t.indexOf(">",a),u=t.indexOf("</"+e);if(l===-1||u===-1)break;const h=t.indexOf(">",u);if(h===-1)break;r+=t.slice(l+1,u).trim(),t=t.slice(0,a).trim()+t.slice(h+1)}return{defs:r,content:t}}function bM(t,e){return t?"<defs>"+t+"</defs>"+e:e}function yM(t,e,r){const a=_M(t);return bM(a.defs,e+a.content+r)}const vM=t=>t==="unset"||t==="undefined"||t==="none";function xM(t,e){const r={...Sp,...t},a={...x8,...e},l={left:r.left,top:r.top,width:r.width,height:r.height};let u=r.body;[r,a].forEach(D=>{const O=[],H=D.hFlip,W=D.vFlip;let se=D.rotate;H?W?se+=2:(O.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),O.push("scale(-1 1)"),l.top=l.left=0):W&&(O.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),O.push("scale(1 -1)"),l.top=l.left=0);let de;switch(se<0&&(se-=Math.floor(se/4)*4),se=se%4,se){case 1:de=l.height/2+l.top,O.unshift("rotate(90 "+de.toString()+" "+de.toString()+")");break;case 2:O.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:de=l.width/2+l.left,O.unshift("rotate(-90 "+de.toString()+" "+de.toString()+")");break}se%2===1&&(l.left!==l.top&&(de=l.left,l.left=l.top,l.top=de),l.width!==l.height&&(de=l.width,l.width=l.height,l.height=de)),O.length&&(u=yM(u,'<g transform="'+O.join(" ")+'">',"</g>"))});const h=a.width,s=a.height,y=l.width,x=l.height;let C,I;h===null?(I=s===null?"1em":s==="auto"?x:s,C=Vy(I,y/x)):(C=h==="auto"?y:h,I=s===null?Vy(C,x/y):s==="auto"?x:s);const U={},R=(D,O)=>{vM(O)||(U[D]=O.toString())};R("width",C),R("height",I);const N=[l.left,l.top,y,x];return U.viewBox=N.join(" "),{attributes:U,viewBox:N,body:u}}const wM=/\sid="(\S+)"/g,BM="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let CM=0;function MM(t,e=BM){const r=[];let a;for(;a=wM.exec(t);)r.push(a[1]);if(!r.length)return t;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(u=>{const h=typeof e=="function"?e(u):e+(CM++).toString(),s=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),t=t.replace(new RegExp(l,"g"),""),t}const Em=Object.create(null);function RM(t,e){Em[t]=e}function Fm(t){return Em[t]||Em[""]}function O4(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const X4=Object.create(null),Fd=["https://api.simplesvg.com","https://api.unisvg.com"],mg=[];for(;Fd.length>0;)Fd.length===1||Math.random()>.5?mg.push(Fd.shift()):mg.push(Fd.pop());X4[""]=O4({resources:["https://api.iconify.design"].concat(mg)});function IM(t,e){const r=O4(e);return r===null?!1:(X4[t]=r,!0)}function V4(t){return X4[t]}const UM=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Gy=UM();function EM(t,e){const r=V4(t);if(!r)return 0;let a;if(!r.maxURL)a=0;else{let l=0;r.resources.forEach(h=>{l=Math.max(l,h.length)});const u=e+".json?icons=";a=r.maxURL-l-r.path.length-u.length}return a}function FM(t){return t===404}const TM=(t,e,r)=>{const a=[],l=EM(t,e),u="icons";let h={type:u,provider:t,prefix:e,icons:[]},s=0;return r.forEach((y,x)=>{s+=y.length+1,s>=l&&x>0&&(a.push(h),h={type:u,provider:t,prefix:e,icons:[]},s=y.length),h.icons.push(y)}),a.push(h),a};function SM(t){if(typeof t=="string"){const e=V4(t);if(e)return e.path}return"/"}const NM=(t,e,r)=>{if(!Gy){r("abort",424);return}let a=SM(e.provider);switch(e.type){case"icons":{const u=e.prefix,s=e.icons.join(","),y=new URLSearchParams({icons:s});a+=u+".json?"+y.toString();break}case"custom":{const u=e.uri;a+=u.slice(0,1)==="/"?u.slice(1):u;break}default:r("abort",400);return}let l=503;Gy(t+a).then(u=>{const h=u.status;if(h!==200){setTimeout(()=>{r(FM(h)?"abort":"next",h)});return}return l=501,u.json()}).then(u=>{if(typeof u!="object"||u===null){setTimeout(()=>{u===404?r("abort",u):r("next",l)});return}setTimeout(()=>{r("success",u)})}).catch(()=>{r("next",l)})},YM={prepare:TM,send:NM};function PM(t){const e={loaded:[],missing:[],pending:[]},r=Object.create(null);t.sort((l,u)=>l.provider!==u.provider?l.provider.localeCompare(u.provider):l.prefix!==u.prefix?l.prefix.localeCompare(u.prefix):l.name.localeCompare(u.name));let a={provider:"",prefix:"",name:""};return t.forEach(l=>{if(a.name===l.name&&a.prefix===l.prefix&&a.provider===l.provider)return;a=l;const u=l.provider,h=l.prefix,s=l.name,y=r[u]||(r[u]=Object.create(null)),x=y[h]||(y[h]=Oh(u,h));let C;s in x.icons?C=e.loaded:h===""||x.missing.has(s)?C=e.missing:C=e.pending;const I={provider:u,prefix:h,name:s};C.push(I)}),e}function w8(t,e){t.forEach(r=>{const a=r.loaderCallbacks;a&&(r.loaderCallbacks=a.filter(l=>l.id!==e))})}function LM(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let r=!1;const a=t.provider,l=t.prefix;e.forEach(u=>{const h=u.icons,s=h.pending.length;h.pending=h.pending.filter(y=>{if(y.prefix!==l)return!0;const x=y.name;if(t.icons[x])h.loaded.push({provider:a,prefix:l,name:x});else if(t.missing.has(x))h.missing.push({provider:a,prefix:l,name:x});else return r=!0,!0;return!1}),h.pending.length!==s&&(r||w8([t],u.id),u.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),u.abort))})}))}let QM=0;function kM(t,e,r){const a=QM++,l=w8.bind(null,r,a);if(!e.pending.length)return l;const u={id:a,icons:e,callback:t,abort:l};return r.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(u)}),l}function DM(t,e=!0,r=!1){const a=[];return t.forEach(l=>{const u=typeof l=="string"?Tp(l,e,r):l;u&&a.push(u)}),a}var zM={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function ZM(t,e,r,a){const l=t.resources.length,u=t.random?Math.floor(Math.random()*l):t.index;let h;if(t.random){let he=t.resources.slice(0);for(h=[];he.length>1;){const ae=Math.floor(Math.random()*he.length);h.push(he[ae]),he=he.slice(0,ae).concat(he.slice(ae+1))}h=h.concat(he)}else h=t.resources.slice(u).concat(t.resources.slice(0,u));const s=Date.now();let y="pending",x=0,C,I=null,U=[],R=[];typeof a=="function"&&R.push(a);function N(){I&&(clearTimeout(I),I=null)}function D(){y==="pending"&&(y="aborted"),N(),U.forEach(he=>{he.status==="pending"&&(he.status="aborted")}),U=[]}function O(he,ae){ae&&(R=[]),typeof he=="function"&&R.push(he)}function H(){return{startTime:s,payload:e,status:y,queriesSent:x,queriesPending:U.length,subscribe:O,abort:D}}function W(){y="failed",R.forEach(he=>{he(void 0,C)})}function se(){U.forEach(he=>{he.status==="pending"&&(he.status="aborted")}),U=[]}function de(he,ae,V){const K=ae!=="success";switch(U=U.filter(oe=>oe!==he),y){case"pending":break;case"failed":if(K||!t.dataAfterTimeout)return;break;default:return}if(ae==="abort"){C=V,W();return}if(K){C=V,U.length||(h.length?le():W());return}if(N(),se(),!t.random){const oe=t.resources.indexOf(he.resource);oe!==-1&&oe!==t.index&&(t.index=oe)}y="completed",R.forEach(oe=>{oe(V)})}function le(){if(y!=="pending")return;N();const he=h.shift();if(he===void 0){if(U.length){I=setTimeout(()=>{N(),y==="pending"&&(se(),W())},t.timeout);return}W();return}const ae={status:"pending",resource:he,callback:(V,K)=>{de(ae,V,K)}};U.push(ae),x++,I=setTimeout(le,t.rotate),r(he,e,ae.callback)}return setTimeout(le),H}function B8(t){const e={...zM,...t};let r=[];function a(){r=r.filter(s=>s().status==="pending")}function l(s,y,x){const C=ZM(e,s,y,(I,U)=>{a(),x&&x(I,U)});return r.push(C),C}function u(s){return r.find(y=>s(y))||null}return{query:l,find:u,setIndex:s=>{e.index=s},getIndex:()=>e.index,cleanup:a}}function jy(){}const y3=Object.create(null);function HM(t){if(!y3[t]){const e=V4(t);if(!e)return;const r=B8(e),a={config:e,redundancy:r};y3[t]=a}return y3[t]}function OM(t,e,r){let a,l;if(typeof t=="string"){const u=Fm(t);if(!u)return r(void 0,424),jy;l=u.send;const h=HM(t);h&&(a=h.redundancy)}else{const u=O4(t);if(u){a=B8(u);const h=t.resources?t.resources[0]:"",s=Fm(h);s&&(l=s.send)}}return!a||!l?(r(void 0,424),jy):a.query(e,l,r)().abort}function Ky(){}function XM(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,LM(t)}))}function VM(t){const e=[],r=[];return t.forEach(a=>{(a.match(g8)?e:r).push(a)}),{valid:e,invalid:r}}function Td(t,e,r){function a(){const l=t.pendingIcons;e.forEach(u=>{l&&l.delete(u),t.icons[u]||t.missing.add(u)})}if(r&&typeof r=="object")try{if(!b8(t,r).length){a();return}}catch(l){console.error(l)}a(),XM(t)}function $y(t,e){t instanceof Promise?t.then(r=>{e(r)}).catch(()=>{e(null)}):e(t)}function GM(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:r,prefix:a}=t,l=t.iconsToLoad;if(delete t.iconsToLoad,!l||!l.length)return;const u=t.loadIcon;if(t.loadIcons&&(l.length>1||!u)){$y(t.loadIcons(l,a,r),C=>{Td(t,l,C)});return}if(u){l.forEach(C=>{const I=u(C,a,r);$y(I,U=>{const R=U?{prefix:a,icons:{[C]:U}}:null;Td(t,[C],R)})});return}const{valid:h,invalid:s}=VM(l);if(s.length&&Td(t,s,null),!h.length)return;const y=a.match(g8)?Fm(r):null;if(!y){Td(t,h,null);return}y.prepare(r,a,h).forEach(C=>{OM(r,C,I=>{Td(t,C.icons,I)})})}))}const jM=(t,e)=>{const r=DM(t,!0,y8()),a=PM(r);if(!a.pending.length){let y=!0;return e&&setTimeout(()=>{y&&e(a.loaded,a.missing,a.pending,Ky)}),()=>{y=!1}}const l=Object.create(null),u=[];let h,s;return a.pending.forEach(y=>{const{provider:x,prefix:C}=y;if(C===s&&x===h)return;h=x,s=C,u.push(Oh(x,C));const I=l[x]||(l[x]=Object.create(null));I[C]||(I[C]=[])}),a.pending.forEach(y=>{const{provider:x,prefix:C,name:I}=y,U=Oh(x,C),R=U.pendingIcons||(U.pendingIcons=new Set);R.has(I)||(R.add(I),l[x][C].push(I))}),u.forEach(y=>{const x=l[y.provider][y.prefix];x.length&&GM(y,x)}),e?kM(e,a,u):Ky};function KM(t,e){const r={...t};for(const a in e){const l=e[a],u=typeof l;a in v8?(l===null||l&&(u==="string"||u==="number"))&&(r[a]=l):u===typeof r[a]&&(r[a]=a==="rotate"?l%4:l)}return r}const $M=/[\s,]+/;function qM(t,e){e.split($M).forEach(r=>{switch(r.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function WM(t,e=0){const r=t.replace(/^-?[0-9.]*/,"");function a(l){for(;l<0;)l+=4;return l%4}if(r===""){const l=parseInt(t);return isNaN(l)?0:a(l)}else if(r!==t){let l=0;switch(r){case"%":l=25;break;case"deg":l=90}if(l){let u=parseFloat(t.slice(0,t.length-r.length));return isNaN(u)?0:(u=u/l,u%1===0?a(u):0)}}return e}function JM(t,e){let r=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const a in e)r+=" "+a+'="'+e[a]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}function eR(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function tR(t){return"data:image/svg+xml,"+eR(t)}function rR(t){return'url("'+tR(t)+'")'}const qy={...x8,inline:!1},iR={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},nR={display:"inline-block"},Tm={"background-color":"currentColor"},C8={"background-color":"transparent"},Wy={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Jy={"-webkit-mask":Tm,mask:Tm,background:C8};for(const t in Jy){const e=Jy[t];for(const r in Wy)e[t+"-"+r]=Wy[r]}function aR(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}function sR(t,e){const r=KM(qy,e),a=e.mode||"svg",l=a==="svg"?{...iR}:{};t.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let u=typeof e.style=="string"?e.style:"";for(let H in e){const W=e[H];if(W!==void 0)switch(H){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":r[H]=W===!0||W==="true"||W===1;break;case"flip":typeof W=="string"&&qM(r,W);break;case"color":u=u+(u.length>0&&u.trim().slice(-1)!==";"?";":"")+"color: "+W+"; ";break;case"rotate":typeof W=="string"?r[H]=WM(W):typeof W=="number"&&(r[H]=W);break;case"ariaHidden":case"aria-hidden":W!==!0&&W!=="true"&&delete l["aria-hidden"];break;default:if(H.slice(0,3)==="on:")break;qy[H]===void 0&&(l[H]=W)}}const h=xM(t,r),s=h.attributes;if(r.inline&&(u="vertical-align: -0.125em; "+u),a==="svg"){Object.assign(l,s),u!==""&&(l.style=u);let H=0,W=e.id;return typeof W=="string"&&(W=W.replace(/-/g,"_")),{svg:!0,attributes:l,body:MM(h.body,W?()=>W+"ID"+H++:"iconifySvelte")}}const{body:y,width:x,height:C}=t,I=a==="mask"||(a==="bg"?!1:y.indexOf("currentColor")!==-1),U=JM(y,{...s,width:x+"",height:C+""}),N={"--svg":rR(U)},D=H=>{const W=s[H];W&&(N[H]=aR(W))};D("width"),D("height"),Object.assign(N,nR,I?Tm:C8);let O="";for(const H in N)O+=H+": "+N[H]+";";return l.style=O+u,{svg:!1,attributes:l}}y8(!0);RM("",YM);if(typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,r="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(a=>{try{(typeof a!="object"||a===null||a instanceof Array||typeof a.icons!="object"||typeof a.prefix!="string"||!gM(a))&&console.error(r)}catch{console.error(r)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let r in e){const a="IconifyProviders["+r+"] is invalid.";try{const l=e[r];if(typeof l!="object"||!l||l.resources===void 0)continue;IM(r,l)||console.error(a)}catch{console.error(a)}}}}function oR(t,e,r,a,l){function u(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof t=="object"&&t!==null&&typeof t.body=="string")return e.name="",u(),{data:{...Sp,...t}};let h;if(typeof t!="string"||(h=Tp(t,!1,!0))===null)return u(),null;const s=dM(h);if(!s)return r&&(!e.loading||e.loading.name!==t)&&(u(),e.name="",e.loading={name:t,abort:jM([h],a)}),null;u(),e.name!==t&&(e.name=t,l&&!e.destroyed&&l(t));const y=["iconify"];return h.prefix!==""&&y.push("iconify--"+h.prefix),h.provider!==""&&y.push("iconify--"+h.provider),{data:s,classes:y}}function ev(t,e){return t?sR({...Sp,...t},e):null}var lR=EB("<svg><!></svg>"),AR=dt("<span></span>");function br(t,e){const r=dC(e,["children","$$slots","$$events","$$legacy"]);fr(e,!1);const a=co({name:"",loading:null,destroyed:!1});let l=co(!1),u=co(0),h=co();const s=U=>{typeof r.onLoad=="function"&&r.onLoad(U),lC()("load",{icon:U})};function y(){AC(u)}In(()=>{ht(l,!0)}),tu(()=>{d3(a,re(a).destroyed=!0),re(a).loading&&(re(a).loading.abort(),d3(a,re(a).loading=null))}),aC(()=>(re(u),oC(r),re(l),re(a),re(h),ev),()=>{re(u);const U=!!r.ssr||re(l),R=oR(r.icon,re(a),U,y,s);ht(h,R?ev(R.data,r):null),re(h)&&R.classes&&d3(h,re(h).attributes.class=(typeof r.class=="string"?r.class+" ":"")+R.classes.join(" "))}),sC(),Wl();var x=Mr(),C=Dt(x);{var I=U=>{var R=Mr(),N=Dt(R);{var D=H=>{var W=lR();let se;var de=Pe(W);r8(de,()=>re(h).body,!0,!1),Fe(W),hr(()=>se=Uy(W,se,{...re(h).attributes})),Xe(H,W)},O=H=>{var W=AR();let se;hr(()=>se=Uy(W,se,{...re(h).attributes})),Xe(H,W)};Ut(N,H=>{re(h).svg?H(D):H(O,!1)})}Xe(U,R)};Ut(C,U=>{re(h)&&U(I)})}Xe(t,x),gr()}const cR=t=>t;function M8(t){const e=t-1;return e*e*e+1}function tv(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function fs(t,{delay:e=0,duration:r=400,easing:a=cR}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:a,css:u=>`opacity: ${u*l}`}}function js(t,{delay:e=0,duration:r=400,easing:a=M8,x:l=0,y:u=0,opacity:h=0}={}){const s=getComputedStyle(t),y=+s.opacity,x=s.transform==="none"?"":s.transform,C=y*(1-h),[I,U]=tv(l),[R,N]=tv(u);return{delay:e,duration:r,easing:a,css:(D,O)=>`
			transform: ${x} translate(${(1-D)*I}${U}, ${(1-D)*R}${N});
			opacity: ${y-C*O}`}}function Hg(t,{delay:e=0,duration:r=400,easing:a=M8,axis:l="y"}={}){const u=getComputedStyle(t),h=+u.opacity,s=l==="y"?"height":"width",y=parseFloat(u[s]),x=l==="y"?["top","bottom"]:["left","right"],C=x.map(H=>`${H[0].toUpperCase()}${H.slice(1)}`),I=parseFloat(u[`padding${C[0]}`]),U=parseFloat(u[`padding${C[1]}`]),R=parseFloat(u[`margin${C[0]}`]),N=parseFloat(u[`margin${C[1]}`]),D=parseFloat(u[`border${C[0]}Width`]),O=parseFloat(u[`border${C[1]}Width`]);return{delay:e,duration:r,easing:a,css:H=>`overflow: hidden;opacity: ${Math.min(H*20,1)*h};${s}: ${H*y}px;padding-${x[0]}: ${H*I}px;padding-${x[1]}: ${H*U}px;margin-${x[0]}: ${H*R}px;margin-${x[1]}: ${H*N}px;border-${x[0]}-width: ${H*D}px;border-${x[1]}-width: ${H*O}px;min-${s}: 0`}}var Xa=Uint8Array,Rh=Uint16Array,hR=Int32Array,R8=new Xa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),I8=new Xa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uR=new Xa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U8=function(t,e){for(var r=new Rh(31),a=0;a<31;++a)r[a]=e+=1<<t[a-1];for(var l=new hR(r[30]),a=1;a<30;++a)for(var u=r[a];u<r[a+1];++u)l[u]=u-r[a]<<5|a;return{b:r,r:l}},E8=U8(R8,2),F8=E8.b,dR=E8.r;F8[28]=258,dR[258]=28;var fR=U8(I8,0),gR=fR.b,Sm=new Rh(32768);for(var Li=0;Li<32768;++Li){var Cl=(Li&43690)>>1|(Li&21845)<<1;Cl=(Cl&52428)>>2|(Cl&13107)<<2,Cl=(Cl&61680)>>4|(Cl&3855)<<4,Sm[Li]=((Cl&65280)>>8|(Cl&255)<<8)>>1}var c0=function(t,e,r){for(var a=t.length,l=0,u=new Rh(e);l<a;++l)t[l]&&++u[t[l]-1];var h=new Rh(e);for(l=1;l<e;++l)h[l]=h[l-1]+u[l-1]<<1;var s;if(r){s=new Rh(1<<e);var y=15-e;for(l=0;l<a;++l)if(t[l])for(var x=l<<4|t[l],C=e-t[l],I=h[t[l]-1]++<<C,U=I|(1<<C)-1;I<=U;++I)s[Sm[I]>>y]=x}else for(s=new Rh(a),l=0;l<a;++l)t[l]&&(s[l]=Sm[h[t[l]-1]++]>>15-t[l]);return s},G0=new Xa(288);for(var Li=0;Li<144;++Li)G0[Li]=8;for(var Li=144;Li<256;++Li)G0[Li]=9;for(var Li=256;Li<280;++Li)G0[Li]=7;for(var Li=280;Li<288;++Li)G0[Li]=8;var T8=new Xa(32);for(var Li=0;Li<32;++Li)T8[Li]=5;var pR=c0(G0,9,1),mR=c0(T8,5,1),v3=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Fs=function(t,e,r){var a=e/8|0;return(t[a]|t[a+1]<<8)>>(e&7)&r},x3=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},_R=function(t){return(t+7)/8|0},bR=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Xa(t.subarray(e,r))},yR=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Za=function(t,e,r){var a=new Error(e||yR[t]);if(a.code=t,Error.captureStackTrace&&Error.captureStackTrace(a,Za),!r)throw a;return a},G4=function(t,e,r,a){var l=t.length,u=0;if(!l||e.f&&!e.l)return r||new Xa(0);var h=!r,s=h||e.i!=2,y=e.i;h&&(r=new Xa(l*3));var x=function(Lt){var Ot=r.length;if(Lt>Ot){var Qt=new Xa(Math.max(Ot*2,Lt));Qt.set(r),r=Qt}},C=e.f||0,I=e.p||0,U=e.b||0,R=e.l,N=e.d,D=e.m,O=e.n,H=l*8;do{if(!R){C=Fs(t,I,1);var W=Fs(t,I+1,3);if(I+=3,W)if(W==1)R=pR,N=mR,D=9,O=5;else if(W==2){var he=Fs(t,I,31)+257,ae=Fs(t,I+10,15)+4,V=he+Fs(t,I+5,31)+1;I+=14;for(var K=new Xa(V),oe=new Xa(19),ce=0;ce<ae;++ce)oe[uR[ce]]=Fs(t,I+ce*3,7);I+=ae*3;for(var ye=v3(oe),we=(1<<ye)-1,Ve=c0(oe,ye,1),ce=0;ce<V;){var ut=Ve[Fs(t,I,we)];I+=ut&15;var se=ut>>4;if(se<16)K[ce++]=se;else{var nt=0,rt=0;for(se==16?(rt=3+Fs(t,I,3),I+=2,nt=K[ce-1]):se==17?(rt=3+Fs(t,I,7),I+=3):se==18&&(rt=11+Fs(t,I,127),I+=7);rt--;)K[ce++]=nt}}var ft=K.subarray(0,he),_t=K.subarray(he);D=v3(ft),O=v3(_t),R=c0(ft,D,1),N=c0(_t,O,1)}else Za(1);else{var se=_R(I)+4,de=t[se-4]|t[se-3]<<8,le=se+de;if(le>l){y&&Za(0);break}s&&x(U+de),r.set(t.subarray(se,le),U),e.b=U+=de,e.p=I=le*8,e.f=C;continue}if(I>H){y&&Za(0);break}}s&&x(U+131072);for(var gt=(1<<D)-1,Je=(1<<O)-1,je=I;;je=I){var nt=R[x3(t,I)&gt],Qe=nt>>4;if(I+=nt&15,I>H){y&&Za(0);break}if(nt||Za(2),Qe<256)r[U++]=Qe;else if(Qe==256){je=I,R=null;break}else{var pt=Qe-254;if(Qe>264){var ce=Qe-257,$e=R8[ce];pt=Fs(t,I,(1<<$e)-1)+F8[ce],I+=$e}var wt=N[x3(t,I)&Je],Ct=wt>>4;wt||Za(3),I+=wt&15;var _t=gR[Ct];if(Ct>3){var $e=I8[Ct];_t+=x3(t,I)&(1<<$e)-1,I+=$e}if(I>H){y&&Za(0);break}s&&x(U+131072);var Mt=U+pt;if(U<_t){var Pt=u-_t,ar=Math.min(_t,Mt);for(Pt+U<0&&Za(3);U<ar;++U)r[U]=a[Pt+U]}for(;U<Mt;++U)r[U]=r[U-_t]}}e.l=R,e.p=je,e.b=U,e.f=C,R&&(C=1,e.m=D,e.d=N,e.n=O)}while(!C);return U!=r.length&&h?bR(r,0,U):r.subarray(0,U)},vR=new Xa(0),xR=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Za(6,"invalid gzip data");var e=t[3],r=10;e&4&&(r+=(t[10]|t[11]<<8)+2);for(var a=(e>>3&1)+(e>>4&1);a>0;a-=!t[r++]);return r+(e&2)},wR=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},BR=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Za(6,"invalid zlib data"),(t[1]>>5&1)==1&&Za(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function CR(t,e){return G4(t,{i:2},e,e)}function MR(t,e){var r=xR(t);return r+8>t.length&&Za(6,"invalid gzip data"),G4(t.subarray(r,-8),{i:2},new Xa(wR(t)),e)}function RR(t,e){return G4(t.subarray(BR(t),-4),{i:2},e,e)}function IR(t,e){return t[0]==31&&t[1]==139&&t[2]==8?MR(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?CR(t,e):RR(t,e)}var UR=typeof TextDecoder<"u"&&new TextDecoder,ER=0;try{UR.decode(vR,{stream:!0}),ER=1}catch{}var FR=Object.defineProperty,h0=Math.pow,yi=(t,e)=>FR(t,"name",{value:e,configurable:!0}),Qn=(t,e,r)=>new Promise((a,l)=>{var u=y=>{try{s(r.next(y))}catch(x){l(x)}},h=y=>{try{s(r.throw(y))}catch(x){l(x)}},s=y=>y.done?a(y.value):Promise.resolve(y.value).then(u,h);s((r=r.apply(t,e)).next())});yi((t,e)=>{let r=!1,a="",l=L.GridLayer.extend({createTile:yi((u,h)=>{let s=document.createElement("img"),y=new AbortController,x=y.signal;return s.cancel=()=>{y.abort()},r||(t.getHeader().then(C=>{C.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):C.tileType===2?a="image/png":C.tileType===3?a="image/jpeg":C.tileType===4?a="image/webp":C.tileType===5&&(a="image/avif")}),r=!0),t.getZxy(u.z,u.x,u.y,x).then(C=>{if(C){let I=new Blob([C.data],{type:a}),U=window.URL.createObjectURL(I);s.src=U,s.cancel=void 0,h(void 0,s)}}).catch(C=>{if(C.name!=="AbortError")throw C}),s},"createTile"),_removeTile:yi(function(u){let h=this._tiles[u];h&&(h.el.cancel&&h.el.cancel(),h.el.width=0,h.el.height=0,h.el.deleted=!0,L.DomUtil.remove(h.el),delete this._tiles[u],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(u)}))},"_removeTile")});return new l(e)},"leafletRasterLayer");var TR=yi(t=>(e,r)=>{if(r instanceof AbortController)return t(e,r);let a=new AbortController;return t(e,a).then(l=>r(void 0,l.data,l.cacheControl||"",l.expires||""),l=>r(l)).catch(l=>r(l)),{cancel:yi(()=>a.abort(),"cancel")}},"v3compat"),S8=class{constructor(e){this.tilev4=yi((r,a)=>Qn(this,null,function*(){if(r.type==="json"){let R=r.url.substr(10),N=this.tiles.get(R);if(N||(N=new Og(R),this.tiles.set(R,N)),this.metadata)return{data:yield N.getTileJson(r.url)};let D=yield N.getHeader();return(D.minLon>=D.maxLon||D.minLat>=D.maxLat)&&console.error(`Bounds of PMTiles archive ${D.minLon},${D.minLat},${D.maxLon},${D.maxLat} are not valid.`),{data:{tiles:[`${r.url}/{z}/{x}/{y}`],minzoom:D.minZoom,maxzoom:D.maxZoom,bounds:[D.minLon,D.minLat,D.maxLon,D.maxLat]}}}let l=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),u=r.url.match(l);if(!u)throw new Error("Invalid PMTiles protocol URL");let h=u[1],s=this.tiles.get(h);s||(s=new Og(h),this.tiles.set(h,s));let y=u[2],x=u[3],C=u[4],I=yield s.getHeader(),U=yield s==null?void 0:s.getZxy(+y,+x,+C,a.signal);if(U)return{data:new Uint8Array(U.data),cacheControl:U.cacheControl,expires:U.expires};if(I.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=TR(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};yi(S8,"Protocol");var SR=S8;function N8(t,e){return(e>>>0)*4294967296+(t>>>0)}yi(N8,"toNum");function Y8(t,e){let r=e.buf,a=r[e.pos++],l=(a&112)>>4;if(a<128||(a=r[e.pos++],l|=(a&127)<<3,a<128)||(a=r[e.pos++],l|=(a&127)<<10,a<128)||(a=r[e.pos++],l|=(a&127)<<17,a<128)||(a=r[e.pos++],l|=(a&127)<<24,a<128)||(a=r[e.pos++],l|=(a&1)<<31,a<128))return N8(t,l);throw new Error("Expected varint not more than 10 bytes")}yi(Y8,"readVarintRemainder");function wh(t){let e=t.buf,r=e[t.pos++],a=r&127;return r<128||(r=e[t.pos++],a|=(r&127)<<7,r<128)||(r=e[t.pos++],a|=(r&127)<<14,r<128)||(r=e[t.pos++],a|=(r&127)<<21,r<128)?a:(r=e[t.pos],a|=(r&15)<<28,Y8(a,t))}yi(wh,"readVarint");function j4(t,e,r,a){if(a===0){r===1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);let l=e[0];e[0]=e[1],e[1]=l}}yi(j4,"rotate");function P8(t,e){let r=h0(2,t),a=e,l=e,u=e,h=[0,0],s=1;for(;s<r;)a=1&u/2,l=1&(u^a),j4(s,h,a,l),h[0]+=s*a,h[1]+=s*l,u=u/4,s*=2;return[t,h[0],h[1]]}yi(P8,"idOnLevel");var NR=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function L8(t,e,r){if(t>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>h0(2,t)-1||r>h0(2,t)-1)throw new Error("tile x/y outside zoom level bounds");let a=NR[t],l=h0(2,t),u=0,h=0,s=0,y=[e,r],x=l/2;for(;x>0;)u=(y[0]&x)>0?1:0,h=(y[1]&x)>0?1:0,s+=x*x*(3*u^h),j4(x,y,u,h),x=x/2;return a+s}yi(L8,"zxyToTileId");function YR(t){let e=0;for(let r=0;r<27;r++){let a=(1<<r)*(1<<r);if(e+a>t)return P8(r,t-e);e+=a}throw new Error("Tile zoom level exceeds max safe number limit (26)")}yi(YR,"tileIdToZxy");var PR=(t=>(t[t.Unknown=0]="Unknown",t[t.None=1]="None",t[t.Gzip=2]="Gzip",t[t.Brotli=3]="Brotli",t[t.Zstd=4]="Zstd",t))(PR||{});function Np(t,e){return Qn(this,null,function*(){if(e===1||e===0)return t;if(e===2){if(typeof globalThis.DecompressionStream>"u")return IR(new Uint8Array(t));let r=new Response(t).body;if(!r)throw new Error("Failed to read response stream");let a=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw new Error("Compression method not supported")})}yi(Np,"defaultDecompress");var LR=(t=>(t[t.Unknown=0]="Unknown",t[t.Mvt=1]="Mvt",t[t.Png=2]="Png",t[t.Jpeg=3]="Jpeg",t[t.Webp=4]="Webp",t[t.Avif=5]="Avif",t))(LR||{});function Q8(t){return t===1?".mvt":t===2?".png":t===3?".jpg":t===4?".webp":t===5?".avif":""}yi(Q8,"tileTypeExt");var QR=127;function k8(t,e){let r=0,a=t.length-1;for(;r<=a;){let l=a+r>>1,u=e-t[l].tileId;if(u>0)r=l+1;else if(u<0)a=l-1;else return t[l]}return a>=0&&(t[a].runLength===0||e-t[a].tileId<t[a].runLength)?t[a]:null}yi(k8,"findTile");var kR=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,r){return Qn(this,null,function*(){return{data:yield this.file.slice(e,e+r).arrayBuffer()}})}};yi(kR,"FileSource");var D8=class{constructor(e,r=new Headers){this.url=e,this.customHeaders=r,this.mustReload=!1;let a="";"navigator"in globalThis&&(a=globalThis.navigator.userAgent||"");let l=a.indexOf("Windows")>-1,u=/Chrome|Chromium|Edg|OPR|Brave/.test(a);this.chromeWindowsNoCache=!1,l&&u&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,r,a,l){return Qn(this,null,function*(){let u,h;a?h=a:(u=new AbortController,h=u.signal);let s=new Headers(this.customHeaders);s.set("range",`bytes=${e}-${e+r-1}`);let y;this.mustReload?y="reload":this.chromeWindowsNoCache&&(y="no-store");let x=yield fetch(this.url,{signal:h,cache:y,headers:s});if(e===0&&x.status===416){let U=x.headers.get("Content-Range");if(!U||!U.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let R=+U.substr(8);x=yield fetch(this.url,{signal:h,cache:"reload",headers:{range:`bytes=0-${R-1}`}})}let C=x.headers.get("Etag");if(C!=null&&C.startsWith("W/")&&(C=null),x.status===416||l&&C&&C!==l)throw this.mustReload=!0,new Nm(`Server returned non-matching ETag ${l} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(x.status>=300)throw new Error(`Bad response code: ${x.status}`);let I=x.headers.get("Content-Length");if(x.status===200&&(!I||+I>r))throw u&&u.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield x.arrayBuffer(),etag:C||void 0,cacheControl:x.headers.get("Cache-Control")||void 0,expires:x.headers.get("Expires")||void 0}})}};yi(D8,"FetchSource");var DR=D8;function ss(t,e){let r=t.getUint32(e+4,!0),a=t.getUint32(e+0,!0);return r*h0(2,32)+a}yi(ss,"getUint64");function z8(t,e){let r=new DataView(t),a=r.getUint8(7);if(a>3)throw new Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:ss(r,8),rootDirectoryLength:ss(r,16),jsonMetadataOffset:ss(r,24),jsonMetadataLength:ss(r,32),leafDirectoryOffset:ss(r,40),leafDirectoryLength:ss(r,48),tileDataOffset:ss(r,56),tileDataLength:ss(r,64),numAddressedTiles:ss(r,72),numTileEntries:ss(r,80),numTileContents:ss(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:e}}yi(z8,"bytesToHeader");function K4(t){let e={buf:new Uint8Array(t),pos:0},r=wh(e),a=[],l=0;for(let u=0;u<r;u++){let h=wh(e);a.push({tileId:l+h,offset:0,length:0,runLength:1}),l+=h}for(let u=0;u<r;u++)a[u].runLength=wh(e);for(let u=0;u<r;u++)a[u].length=wh(e);for(let u=0;u<r;u++){let h=wh(e);h===0&&u>0?a[u].offset=a[u-1].offset+a[u-1].length:a[u].offset=h-1}return a}yi(K4,"deserializeIndex");var Z8=class extends Error{};yi(Z8,"EtagMismatch");var Nm=Z8;function $4(t,e){return Qn(this,null,function*(){let r=yield t.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let a=r.data.slice(0,QR),l=z8(a,r.etag),u=r.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),h=`${t.getKey()}|${l.etag||""}|${l.rootDirectoryOffset}|${l.rootDirectoryLength}`,s=K4(yield e(u,l.internalCompression));return[l,[h,s.length,s]]})}yi($4,"getHeaderAndRoot");function q4(t,e,r,a,l){return Qn(this,null,function*(){let u=yield t.getBytes(r,a,void 0,l.etag),h=yield e(u.data,l.internalCompression),s=K4(h);if(s.length===0)throw new Error("Empty directory is invalid");return s})}yi(q4,"getDirectory");var zR=class{constructor(e=100,r=!0,a=Np){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=a}getHeader(e){return Qn(this,null,function*(){let r=e.getKey(),a=this.cache.get(r);if(a)return a.lastUsed=this.counter++,a.data;let l=yield $4(e,this.decompress);return l[1]&&this.cache.set(l[1][0],{lastUsed:this.counter++,data:l[1][2]}),this.cache.set(r,{lastUsed:this.counter++,data:l[0]}),this.prune(),l[0]})}getDirectory(e,r,a,l){return Qn(this,null,function*(){let u=`${e.getKey()}|${l.etag||""}|${r}|${a}`,h=this.cache.get(u);if(h)return h.lastUsed=this.counter++,h.data;let s=yield q4(e,this.decompress,r,a,l);return this.cache.set(u,{lastUsed:this.counter++,data:s}),this.prune(),s})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,r;this.cache.forEach((a,l)=>{a.lastUsed<e&&(e=a.lastUsed,r=l)}),r&&this.cache.delete(r)}}invalidate(e){return Qn(this,null,function*(){this.cache.delete(e.getKey())})}};yi(zR,"ResolvedValueCache");var H8=class{constructor(e=100,r=!0,a=Np){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=a}getHeader(e){return Qn(this,null,function*(){let r=e.getKey(),a=this.cache.get(r);if(a)return a.lastUsed=this.counter++,yield a.data;let l=new Promise((u,h)=>{$4(e,this.decompress).then(s=>{s[1]&&this.cache.set(s[1][0],{lastUsed:this.counter++,data:Promise.resolve(s[1][2])}),u(s[0]),this.prune()}).catch(s=>{h(s)})});return this.cache.set(r,{lastUsed:this.counter++,data:l}),l})}getDirectory(e,r,a,l){return Qn(this,null,function*(){let u=`${e.getKey()}|${l.etag||""}|${r}|${a}`,h=this.cache.get(u);if(h)return h.lastUsed=this.counter++,yield h.data;let s=new Promise((y,x)=>{q4(e,this.decompress,r,a,l).then(C=>{y(C),this.prune()}).catch(C=>{x(C)})});return this.cache.set(u,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,r;this.cache.forEach((a,l)=>{a.lastUsed<e&&(e=a.lastUsed,r=l)}),r&&this.cache.delete(r)}}invalidate(e){return Qn(this,null,function*(){let r=e.getKey();if(this.invalidations.get(r))return yield this.invalidations.get(r);this.cache.delete(e.getKey());let a=new Promise((l,u)=>{this.getHeader(e).then(h=>{l(),this.invalidations.delete(r)}).catch(h=>{u(h)})});this.invalidations.set(r,a)})}};yi(H8,"SharedPromiseCache");var ZR=H8,O8=class{constructor(e,r,a){typeof e=="string"?this.source=new DR(e):this.source=e,a?this.decompress=a:this.decompress=Np,r?this.cache=r:this.cache=new ZR}getHeader(){return Qn(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,r,a,l){return Qn(this,null,function*(){let u=L8(e,r,a),h=yield this.cache.getHeader(this.source);if(e<h.minZoom||e>h.maxZoom)return;let s=h.rootDirectoryOffset,y=h.rootDirectoryLength;for(let x=0;x<=3;x++){let C=yield this.cache.getDirectory(this.source,s,y,h),I=k8(C,u);if(I){if(I.runLength>0){let U=yield this.source.getBytes(h.tileDataOffset+I.offset,I.length,l,h.etag);return{data:yield this.decompress(U.data,h.tileCompression),cacheControl:U.cacheControl,expires:U.expires}}s=h.leafDirectoryOffset+I.offset,y=I.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,r,a,l){return Qn(this,null,function*(){try{return yield this.getZxyAttempt(e,r,a,l)}catch(u){if(u instanceof Nm)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,r,a,l);throw u}})}getMetadataAttempt(){return Qn(this,null,function*(){let e=yield this.cache.getHeader(this.source),r=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),a=yield this.decompress(r.data,e.internalCompression),l=new TextDecoder("utf-8");return JSON.parse(l.decode(a))})}getMetadata(){return Qn(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Nm)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Qn(this,null,function*(){let r=yield this.getHeader(),a=yield this.getMetadata(),l=Q8(r.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${l}`],vector_layers:a.vector_layers,attribution:a.attribution,description:a.description,name:a.name,version:a.version,bounds:[r.minLon,r.minLat,r.maxLon,r.maxLat],center:[r.centerLon,r.centerLat,r.centerZoom],minzoom:r.minZoom,maxzoom:r.maxZoom}})}};yi(O8,"PMTiles");var Og=O8;const HR=180/Math.PI;function rv(t,e){return t/Math.pow(2,e)*360-180}function iv(t,e){const r=Math.PI-2*Math.PI*t/Math.pow(2,e);return HR*Math.atan(.5*(Math.exp(r)-Math.exp(-r)))}function nv(t){const e=rv(t[0]+1,t[2]),r=rv(t[0],t[2]),a=iv(t[1]+1,t[2]),l=iv(t[1],t[2]);return[r,a,e,l]}function OR(t){return[[t[0]*2,t[1]*2,t[2]+1],[t[0]*2+1,t[1]*2,t[2]+1],[t[0]*2+1,t[1]*2+1,t[2]+1],[t[0]*2,t[1]*2+1,t[2]+1]]}function XR(t){return[t[0]>>1,t[1]>>1,t[2]-1]}function VR(t){return OR(XR(t))}const{min:GR,max:jR}=Math,JA=(t,e=0,r=1)=>GR(jR(e,t),r),W4=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=JA(t[e],0,255)):e===3&&(t[e]=JA(t[e],0,1));return t},X8={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])X8[`[object ${t}]`]=t.toLowerCase();function Zr(t){return X8[Object.prototype.toString.call(t)]||"object"}const Nr=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):Zr(t[0])=="object"&&e?e.split("").filter(r=>t[0][r]!==void 0).map(r=>t[0][r]):t[0].slice(0),iu=t=>{if(t.length<2)return null;const e=t.length-1;return Zr(t[e])=="string"?t[e].toLowerCase():null},{PI:Yp,min:V8,max:G8}=Math,gs=t=>Math.round(t*100)/100,Ym=t=>Math.round(t*100)/100,zo=Yp*2,w3=Yp/3,KR=Yp/180,$R=180/Yp;function j8(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const Tr={format:{},autodetect:[]};let Yt=class{constructor(...e){const r=this;if(Zr(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let a=iu(e),l=!1;if(!a){l=!0,Tr.sorted||(Tr.autodetect=Tr.autodetect.sort((u,h)=>h.p-u.p),Tr.sorted=!0);for(let u of Tr.autodetect)if(a=u.test(...e),a)break}if(Tr.format[a]){const u=Tr.format[a].apply(null,l?e:e.slice(0,-1));r._rgb=W4(u)}else throw new Error("unknown format: "+e);r._rgb.length===3&&r._rgb.push(1)}toString(){return Zr(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}};const qR="3.1.2",Wr=(...t)=>new Yt(...t);Wr.version=qR;const Xh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},WR=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,JR=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,K8=t=>{if(t.match(WR)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),r=e>>16,a=e>>8&255,l=e&255;return[r,a,l,1]}if(t.match(JR)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),r=e>>24&255,a=e>>16&255,l=e>>8&255,u=Math.round((e&255)/255*100)/100;return[r,a,l,u]}throw new Error(`unknown hex color: ${t}`)},{round:y1}=Math,$8=(...t)=>{let[e,r,a,l]=Nr(t,"rgba"),u=iu(t)||"auto";l===void 0&&(l=1),u==="auto"&&(u=l<1?"rgba":"rgb"),e=y1(e),r=y1(r),a=y1(a);let s="000000"+(e<<16|r<<8|a).toString(16);s=s.substr(s.length-6);let y="0"+y1(l*255).toString(16);switch(y=y.substr(y.length-2),u.toLowerCase()){case"rgba":return`#${s}${y}`;case"argb":return`#${y}${s}`;default:return`#${s}`}};Yt.prototype.name=function(){const t=$8(this._rgb,"rgb");for(let e of Object.keys(Xh))if(Xh[e]===t)return e.toLowerCase();return t};Tr.format.named=t=>{if(t=t.toLowerCase(),Xh[t])return K8(Xh[t]);throw new Error("unknown color name: "+t)};Tr.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Zr(t)==="string"&&Xh[t.toLowerCase()])return"named"}});Yt.prototype.alpha=function(t,e=!1){return t!==void 0&&Zr(t)==="number"?e?(this._rgb[3]=t,this):new Yt([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};Yt.prototype.clipped=function(){return this._rgb._clipped||!1};const fo={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},eI=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Xo(t){const e=eI.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);fo.labWhitePoint=t,fo.Xn=e[0],fo.Zn=e[1]}function E0(){return fo.labWhitePoint}const J4=(...t)=>{t=Nr(t,"lab");const[e,r,a]=t,[l,u,h]=tI(e,r,a),[s,y,x]=q8(l,u,h);return[s,y,x,t.length>3?t[3]:1]},tI=(t,e,r)=>{const{kE:a,kK:l,kKE:u,Xn:h,Yn:s,Zn:y}=fo,x=(t+16)/116,C=.002*e+x,I=x-.005*r,U=C*C*C,R=I*I*I,N=U>a?U:(116*C-16)/l,D=t>u?Math.pow((t+16)/116,3):t/l,O=R>a?R:(116*I-16)/l,H=N*h,W=D*s,se=O*y;return[H,W,se]},B3=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},q8=(t,e,r)=>{const{MtxAdaptMa:a,MtxAdaptMaI:l,MtxXYZ2RGB:u,RefWhiteRGB:h,Xn:s,Yn:y,Zn:x}=fo,C=s*a.m00+y*a.m10+x*a.m20,I=s*a.m01+y*a.m11+x*a.m21,U=s*a.m02+y*a.m12+x*a.m22,R=h.X*a.m00+h.Y*a.m10+h.Z*a.m20,N=h.X*a.m01+h.Y*a.m11+h.Z*a.m21,D=h.X*a.m02+h.Y*a.m12+h.Z*a.m22,O=(t*a.m00+e*a.m10+r*a.m20)*(R/C),H=(t*a.m01+e*a.m11+r*a.m21)*(N/I),W=(t*a.m02+e*a.m12+r*a.m22)*(D/U),se=O*l.m00+H*l.m10+W*l.m20,de=O*l.m01+H*l.m11+W*l.m21,le=O*l.m02+H*l.m12+W*l.m22,he=B3(se*u.m00+de*u.m10+le*u.m20),ae=B3(se*u.m01+de*u.m11+le*u.m21),V=B3(se*u.m02+de*u.m12+le*u.m22);return[he*255,ae*255,V*255]},e_=(...t)=>{const[e,r,a,...l]=Nr(t,"rgb"),[u,h,s]=W8(e,r,a),[y,x,C]=rI(u,h,s);return[y,x,C,...l.length>0&&l[0]<1?[l[0]]:[]]};function rI(t,e,r){const{Xn:a,Yn:l,Zn:u,kE:h,kK:s}=fo,y=t/a,x=e/l,C=r/u,I=y>h?Math.pow(y,1/3):(s*y+16)/116,U=x>h?Math.pow(x,1/3):(s*x+16)/116,R=C>h?Math.pow(C,1/3):(s*C+16)/116;return[116*U-16,500*(I-U),200*(U-R)]}function C3(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const W8=(t,e,r)=>{t=C3(t/255),e=C3(e/255),r=C3(r/255);const{MtxRGB2XYZ:a,MtxAdaptMa:l,MtxAdaptMaI:u,Xn:h,Yn:s,Zn:y,As:x,Bs:C,Cs:I}=fo;let U=t*a.m00+e*a.m10+r*a.m20,R=t*a.m01+e*a.m11+r*a.m21,N=t*a.m02+e*a.m12+r*a.m22;const D=h*l.m00+s*l.m10+y*l.m20,O=h*l.m01+s*l.m11+y*l.m21,H=h*l.m02+s*l.m12+y*l.m22;let W=U*l.m00+R*l.m10+N*l.m20,se=U*l.m01+R*l.m11+N*l.m21,de=U*l.m02+R*l.m12+N*l.m22;return W*=D/x,se*=O/C,de*=H/I,U=W*u.m00+se*u.m10+de*u.m20,R=W*u.m01+se*u.m11+de*u.m21,N=W*u.m02+se*u.m12+de*u.m22,[U,R,N]};Yt.prototype.lab=function(){return e_(this._rgb)};const iI=(...t)=>new Yt(...t,"lab");Object.assign(Wr,{lab:iI,getLabWhitePoint:E0,setLabWhitePoint:Xo});Tr.format.lab=J4;Tr.autodetect.push({p:2,test:(...t)=>{if(t=Nr(t,"lab"),Zr(t)==="array"&&t.length===3)return"lab"}});Yt.prototype.darken=function(t=1){const e=this,r=e.lab();return r[0]-=fo.Kn*t,new Yt(r,"lab").alpha(e.alpha(),!0)};Yt.prototype.brighten=function(t=1){return this.darken(-t)};Yt.prototype.darker=Yt.prototype.darken;Yt.prototype.brighter=Yt.prototype.brighten;Yt.prototype.get=function(t){const[e,r]=t.split("."),a=this[e]();if(r){const l=e.indexOf(r)-(e.substr(0,2)==="ok"?2:0);if(l>-1)return a[l];throw new Error(`unknown channel ${r} in mode ${e}`)}else return a};const{pow:nI}=Math,aI=1e-7,sI=20;Yt.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&Zr(t)==="number"){if(t===0)return new Yt([0,0,0,this._rgb[3]],"rgb");if(t===1)return new Yt([255,255,255,this._rgb[3]],"rgb");let r=this.luminance(),a=sI;const l=(h,s)=>{const y=h.interpolate(s,.5,e),x=y.luminance();return Math.abs(t-x)<aI||!a--?y:x>t?l(h,y):l(y,s)},u=(r>t?l(new Yt([0,0,0]),this):l(this,new Yt([255,255,255]))).rgb();return new Yt([...u,this._rgb[3]])}return oI(...this._rgb.slice(0,3))};const oI=(t,e,r)=>(t=M3(t),e=M3(e),r=M3(r),.2126*t+.7152*e+.0722*r),M3=t=>(t/=255,t<=.03928?t/12.92:nI((t+.055)/1.055,2.4)),sa={},Vh=(t,e,r=.5,...a)=>{let l=a[0]||"lrgb";if(!sa[l]&&!a.length&&(l=Object.keys(sa)[0]),!sa[l])throw new Error(`interpolation mode ${l} is not defined`);return Zr(t)!=="object"&&(t=new Yt(t)),Zr(e)!=="object"&&(e=new Yt(e)),sa[l](t,e,r).alpha(t.alpha()+r*(e.alpha()-t.alpha()))};Yt.prototype.mix=Yt.prototype.interpolate=function(t,e=.5,...r){return Vh(this,t,e,...r)};Yt.prototype.premultiply=function(t=!1){const e=this._rgb,r=e[3];return t?(this._rgb=[e[0]*r,e[1]*r,e[2]*r,r],this):new Yt([e[0]*r,e[1]*r,e[2]*r,r],"rgb")};const{sin:lI,cos:AI}=Math,J8=(...t)=>{let[e,r,a]=Nr(t,"lch");return isNaN(a)&&(a=0),a=a*KR,[e,AI(a)*r,lI(a)*r]},t_=(...t)=>{t=Nr(t,"lch");const[e,r,a]=t,[l,u,h]=J8(e,r,a),[s,y,x]=J4(l,u,h);return[s,y,x,t.length>3?t[3]:1]},cI=(...t)=>{const e=j8(Nr(t,"hcl"));return t_(...e)},{sqrt:hI,atan2:uI,round:dI}=Math,ex=(...t)=>{const[e,r,a]=Nr(t,"lab"),l=hI(r*r+a*a);let u=(uI(a,r)*$R+360)%360;return dI(l*1e4)===0&&(u=Number.NaN),[e,l,u]},r_=(...t)=>{const[e,r,a,...l]=Nr(t,"rgb"),[u,h,s]=e_(e,r,a),[y,x,C]=ex(u,h,s);return[y,x,C,...l.length>0&&l[0]<1?[l[0]]:[]]};Yt.prototype.lch=function(){return r_(this._rgb)};Yt.prototype.hcl=function(){return j8(r_(this._rgb))};const fI=(...t)=>new Yt(...t,"lch"),gI=(...t)=>new Yt(...t,"hcl");Object.assign(Wr,{lch:fI,hcl:gI});Tr.format.lch=t_;Tr.format.hcl=cI;["lch","hcl"].forEach(t=>Tr.autodetect.push({p:2,test:(...e)=>{if(e=Nr(e,t),Zr(e)==="array"&&e.length===3)return t}}));Yt.prototype.saturate=function(t=1){const e=this,r=e.lch();return r[1]+=fo.Kn*t,r[1]<0&&(r[1]=0),new Yt(r,"lch").alpha(e.alpha(),!0)};Yt.prototype.desaturate=function(t=1){return this.saturate(-t)};Yt.prototype.set=function(t,e,r=!1){const[a,l]=t.split("."),u=this[a]();if(l){const h=a.indexOf(l)-(a.substr(0,2)==="ok"?2:0);if(h>-1){if(Zr(e)=="string")switch(e.charAt(0)){case"+":u[h]+=+e;break;case"-":u[h]+=+e;break;case"*":u[h]*=+e.substr(1);break;case"/":u[h]/=+e.substr(1);break;default:u[h]=+e}else if(Zr(e)==="number")u[h]=e;else throw new Error("unsupported value for Color.set");const s=new Yt(u,a);return r?(this._rgb=s._rgb,this):s}throw new Error(`unknown channel ${l} in mode ${a}`)}else return u};Yt.prototype.tint=function(t=.5,...e){return Vh(this,"white",t,...e)};Yt.prototype.shade=function(t=.5,...e){return Vh(this,"black",t,...e)};const pI=(t,e,r)=>{const a=t._rgb,l=e._rgb;return new Yt(a[0]+r*(l[0]-a[0]),a[1]+r*(l[1]-a[1]),a[2]+r*(l[2]-a[2]),"rgb")};sa.rgb=pI;const{sqrt:R3,pow:Ah}=Math,mI=(t,e,r)=>{const[a,l,u]=t._rgb,[h,s,y]=e._rgb;return new Yt(R3(Ah(a,2)*(1-r)+Ah(h,2)*r),R3(Ah(l,2)*(1-r)+Ah(s,2)*r),R3(Ah(u,2)*(1-r)+Ah(y,2)*r),"rgb")};sa.lrgb=mI;const _I=(t,e,r)=>{const a=t.lab(),l=e.lab();return new Yt(a[0]+r*(l[0]-a[0]),a[1]+r*(l[1]-a[1]),a[2]+r*(l[2]-a[2]),"lab")};sa.lab=_I;const nu=(t,e,r,a)=>{let l,u;a==="hsl"?(l=t.hsl(),u=e.hsl()):a==="hsv"?(l=t.hsv(),u=e.hsv()):a==="hcg"?(l=t.hcg(),u=e.hcg()):a==="hsi"?(l=t.hsi(),u=e.hsi()):a==="lch"||a==="hcl"?(a="hcl",l=t.hcl(),u=e.hcl()):a==="oklch"&&(l=t.oklch().reverse(),u=e.oklch().reverse());let h,s,y,x,C,I;(a.substr(0,1)==="h"||a==="oklch")&&([h,y,C]=l,[s,x,I]=u);let U,R,N,D;return!isNaN(h)&&!isNaN(s)?(s>h&&s-h>180?D=s-(h+360):s<h&&h-s>180?D=s+360-h:D=s-h,R=h+r*D):isNaN(h)?isNaN(s)?R=Number.NaN:(R=s,(C==1||C==0)&&a!="hsv"&&(U=x)):(R=h,(I==1||I==0)&&a!="hsv"&&(U=y)),U===void 0&&(U=y+r*(x-y)),N=C+r*(I-C),a==="oklch"?new Yt([N,U,R],a):new Yt([R,U,N],a)},tx=(t,e,r)=>nu(t,e,r,"lch");sa.lch=tx;sa.hcl=tx;const bI=t=>{if(Zr(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,r=t>>8&255,a=t&255;return[e,r,a,1]}throw new Error("unknown num color: "+t)},yI=(...t)=>{const[e,r,a]=Nr(t,"rgb");return(e<<16)+(r<<8)+a};Yt.prototype.num=function(){return yI(this._rgb)};const vI=(...t)=>new Yt(...t,"num");Object.assign(Wr,{num:vI});Tr.format.num=bI;Tr.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&Zr(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const xI=(t,e,r)=>{const a=t.num(),l=e.num();return new Yt(a+r*(l-a),"num")};sa.num=xI;const{floor:wI}=Math,BI=(...t)=>{t=Nr(t,"hcg");let[e,r,a]=t,l,u,h;a=a*255;const s=r*255;if(r===0)l=u=h=a;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const y=wI(e),x=e-y,C=a*(1-r),I=C+s*(1-x),U=C+s*x,R=C+s;switch(y){case 0:[l,u,h]=[R,U,C];break;case 1:[l,u,h]=[I,R,C];break;case 2:[l,u,h]=[C,R,U];break;case 3:[l,u,h]=[C,I,R];break;case 4:[l,u,h]=[U,C,R];break;case 5:[l,u,h]=[R,C,I];break}}return[l,u,h,t.length>3?t[3]:1]},CI=(...t)=>{const[e,r,a]=Nr(t,"rgb"),l=V8(e,r,a),u=G8(e,r,a),h=u-l,s=h*100/255,y=l/(255-h)*100;let x;return h===0?x=Number.NaN:(e===u&&(x=(r-a)/h),r===u&&(x=2+(a-e)/h),a===u&&(x=4+(e-r)/h),x*=60,x<0&&(x+=360)),[x,s,y]};Yt.prototype.hcg=function(){return CI(this._rgb)};const MI=(...t)=>new Yt(...t,"hcg");Wr.hcg=MI;Tr.format.hcg=BI;Tr.autodetect.push({p:1,test:(...t)=>{if(t=Nr(t,"hcg"),Zr(t)==="array"&&t.length===3)return"hcg"}});const RI=(t,e,r)=>nu(t,e,r,"hcg");sa.hcg=RI;const{cos:ch}=Math,II=(...t)=>{t=Nr(t,"hsi");let[e,r,a]=t,l,u,h;return isNaN(e)&&(e=0),isNaN(r)&&(r=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(h=(1-r)/3,l=(1+r*ch(zo*e)/ch(w3-zo*e))/3,u=1-(h+l)):e<2/3?(e-=1/3,l=(1-r)/3,u=(1+r*ch(zo*e)/ch(w3-zo*e))/3,h=1-(l+u)):(e-=2/3,u=(1-r)/3,h=(1+r*ch(zo*e)/ch(w3-zo*e))/3,l=1-(u+h)),l=JA(a*l*3),u=JA(a*u*3),h=JA(a*h*3),[l*255,u*255,h*255,t.length>3?t[3]:1]},{min:UI,sqrt:EI,acos:FI}=Math,TI=(...t)=>{let[e,r,a]=Nr(t,"rgb");e/=255,r/=255,a/=255;let l;const u=UI(e,r,a),h=(e+r+a)/3,s=h>0?1-u/h:0;return s===0?l=NaN:(l=(e-r+(e-a))/2,l/=EI((e-r)*(e-r)+(e-a)*(r-a)),l=FI(l),a>r&&(l=zo-l),l/=zo),[l*360,s,h]};Yt.prototype.hsi=function(){return TI(this._rgb)};const SI=(...t)=>new Yt(...t,"hsi");Wr.hsi=SI;Tr.format.hsi=II;Tr.autodetect.push({p:2,test:(...t)=>{if(t=Nr(t,"hsi"),Zr(t)==="array"&&t.length===3)return"hsi"}});const NI=(t,e,r)=>nu(t,e,r,"hsi");sa.hsi=NI;const Pm=(...t)=>{t=Nr(t,"hsl");const[e,r,a]=t;let l,u,h;if(r===0)l=u=h=a*255;else{const s=[0,0,0],y=[0,0,0],x=a<.5?a*(1+r):a+r-a*r,C=2*a-x,I=e/360;s[0]=I+1/3,s[1]=I,s[2]=I-1/3;for(let U=0;U<3;U++)s[U]<0&&(s[U]+=1),s[U]>1&&(s[U]-=1),6*s[U]<1?y[U]=C+(x-C)*6*s[U]:2*s[U]<1?y[U]=x:3*s[U]<2?y[U]=C+(x-C)*(2/3-s[U])*6:y[U]=C;[l,u,h]=[y[0]*255,y[1]*255,y[2]*255]}return t.length>3?[l,u,h,t[3]]:[l,u,h,1]},rx=(...t)=>{t=Nr(t,"rgba");let[e,r,a]=t;e/=255,r/=255,a/=255;const l=V8(e,r,a),u=G8(e,r,a),h=(u+l)/2;let s,y;return u===l?(s=0,y=Number.NaN):s=h<.5?(u-l)/(u+l):(u-l)/(2-u-l),e==u?y=(r-a)/(u-l):r==u?y=2+(a-e)/(u-l):a==u&&(y=4+(e-r)/(u-l)),y*=60,y<0&&(y+=360),t.length>3&&t[3]!==void 0?[y,s,h,t[3]]:[y,s,h]};Yt.prototype.hsl=function(){return rx(this._rgb)};const YI=(...t)=>new Yt(...t,"hsl");Wr.hsl=YI;Tr.format.hsl=Pm;Tr.autodetect.push({p:2,test:(...t)=>{if(t=Nr(t,"hsl"),Zr(t)==="array"&&t.length===3)return"hsl"}});const PI=(t,e,r)=>nu(t,e,r,"hsl");sa.hsl=PI;const{floor:LI}=Math,QI=(...t)=>{t=Nr(t,"hsv");let[e,r,a]=t,l,u,h;if(a*=255,r===0)l=u=h=a;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const s=LI(e),y=e-s,x=a*(1-r),C=a*(1-r*y),I=a*(1-r*(1-y));switch(s){case 0:[l,u,h]=[a,I,x];break;case 1:[l,u,h]=[C,a,x];break;case 2:[l,u,h]=[x,a,I];break;case 3:[l,u,h]=[x,C,a];break;case 4:[l,u,h]=[I,x,a];break;case 5:[l,u,h]=[a,x,C];break}}return[l,u,h,t.length>3?t[3]:1]},{min:kI,max:DI}=Math,zI=(...t)=>{t=Nr(t,"rgb");let[e,r,a]=t;const l=kI(e,r,a),u=DI(e,r,a),h=u-l;let s,y,x;return x=u/255,u===0?(s=Number.NaN,y=0):(y=h/u,e===u&&(s=(r-a)/h),r===u&&(s=2+(a-e)/h),a===u&&(s=4+(e-r)/h),s*=60,s<0&&(s+=360)),[s,y,x]};Yt.prototype.hsv=function(){return zI(this._rgb)};const ZI=(...t)=>new Yt(...t,"hsv");Wr.hsv=ZI;Tr.format.hsv=QI;Tr.autodetect.push({p:2,test:(...t)=>{if(t=Nr(t,"hsv"),Zr(t)==="array"&&t.length===3)return"hsv"}});const HI=(t,e,r)=>nu(t,e,r,"hsv");sa.hsv=HI;function Xg(t,e){let r=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(h=>[h]));let a=e[0].length,l=e[0].map((h,s)=>e.map(y=>y[s])),u=t.map(h=>l.map(s=>Array.isArray(h)?h.reduce((y,x,C)=>y+x*(s[C]||0),0):s.reduce((y,x)=>y+x*h,0)));return r===1&&(u=u[0]),a===1?u.map(h=>h[0]):u}const i_=(...t)=>{t=Nr(t,"lab");const[e,r,a,...l]=t,[u,h,s]=OI([e,r,a]),[y,x,C]=q8(u,h,s);return[y,x,C,...l.length>0&&l[0]<1?[l[0]]:[]]};function OI(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],r=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],a=Xg(r,t);return Xg(e,a.map(l=>l**3))}const n_=(...t)=>{const[e,r,a,...l]=Nr(t,"rgb"),u=W8(e,r,a);return[...XI(u),...l.length>0&&l[0]<1?[l[0]]:[]]};function XI(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],r=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],a=Xg(e,t);return Xg(r,a.map(l=>Math.cbrt(l)))}Yt.prototype.oklab=function(){return n_(this._rgb)};const VI=(...t)=>new Yt(...t,"oklab");Object.assign(Wr,{oklab:VI});Tr.format.oklab=i_;Tr.autodetect.push({p:2,test:(...t)=>{if(t=Nr(t,"oklab"),Zr(t)==="array"&&t.length===3)return"oklab"}});const GI=(t,e,r)=>{const a=t.oklab(),l=e.oklab();return new Yt(a[0]+r*(l[0]-a[0]),a[1]+r*(l[1]-a[1]),a[2]+r*(l[2]-a[2]),"oklab")};sa.oklab=GI;const jI=(t,e,r)=>nu(t,e,r,"oklch");sa.oklch=jI;const{pow:I3,sqrt:U3,PI:E3,cos:av,sin:sv,atan2:KI}=Math,$I=(t,e="lrgb",r=null)=>{const a=t.length;r||(r=Array.from(new Array(a)).map(()=>1));const l=a/r.reduce(function(I,U){return I+U});if(r.forEach((I,U)=>{r[U]*=l}),t=t.map(I=>new Yt(I)),e==="lrgb")return qI(t,r);const u=t.shift(),h=u.get(e),s=[];let y=0,x=0;for(let I=0;I<h.length;I++)if(h[I]=(h[I]||0)*r[0],s.push(isNaN(h[I])?0:r[0]),e.charAt(I)==="h"&&!isNaN(h[I])){const U=h[I]/180*E3;y+=av(U)*r[0],x+=sv(U)*r[0]}let C=u.alpha()*r[0];t.forEach((I,U)=>{const R=I.get(e);C+=I.alpha()*r[U+1];for(let N=0;N<h.length;N++)if(!isNaN(R[N]))if(s[N]+=r[U+1],e.charAt(N)==="h"){const D=R[N]/180*E3;y+=av(D)*r[U+1],x+=sv(D)*r[U+1]}else h[N]+=R[N]*r[U+1]});for(let I=0;I<h.length;I++)if(e.charAt(I)==="h"){let U=KI(x/s[I],y/s[I])/E3*180;for(;U<0;)U+=360;for(;U>=360;)U-=360;h[I]=U}else h[I]=h[I]/s[I];return C/=a,new Yt(h,e).alpha(C>.99999?1:C,!0)},qI=(t,e)=>{const r=t.length,a=[0,0,0,0];for(let l=0;l<t.length;l++){const u=t[l],h=e[l]/r,s=u._rgb;a[0]+=I3(s[0],2)*h,a[1]+=I3(s[1],2)*h,a[2]+=I3(s[2],2)*h,a[3]+=s[3]*h}return a[0]=U3(a[0]),a[1]=U3(a[1]),a[2]=U3(a[2]),a[3]>.9999999&&(a[3]=1),new Yt(W4(a))},{pow:WI}=Math;function Vg(t){let e="rgb",r=Wr("#ccc"),a=0,l=[0,1],u=[],h=[0,0],s=!1,y=[],x=!1,C=0,I=1,U=!1,R={},N=!0,D=1;const O=function(ae){if(ae=ae||["#fff","#000"],ae&&Zr(ae)==="string"&&Wr.brewer&&Wr.brewer[ae.toLowerCase()]&&(ae=Wr.brewer[ae.toLowerCase()]),Zr(ae)==="array"){ae.length===1&&(ae=[ae[0],ae[0]]),ae=ae.slice(0);for(let V=0;V<ae.length;V++)ae[V]=Wr(ae[V]);u.length=0;for(let V=0;V<ae.length;V++)u.push(V/(ae.length-1))}return le(),y=ae},H=function(ae){if(s!=null){const V=s.length-1;let K=0;for(;K<V&&ae>=s[K];)K++;return K-1}return 0};let W=ae=>ae,se=ae=>ae;const de=function(ae,V){let K,oe;if(V==null&&(V=!1),isNaN(ae)||ae===null)return r;V?oe=ae:s&&s.length>2?oe=H(ae)/(s.length-2):I!==C?oe=(ae-C)/(I-C):oe=1,oe=se(oe),V||(oe=W(oe)),D!==1&&(oe=WI(oe,D)),oe=h[0]+oe*(1-h[0]-h[1]),oe=JA(oe,0,1);const ce=Math.floor(oe*1e4);if(N&&R[ce])K=R[ce];else{if(Zr(y)==="array")for(let ye=0;ye<u.length;ye++){const we=u[ye];if(oe<=we){K=y[ye];break}if(oe>=we&&ye===u.length-1){K=y[ye];break}if(oe>we&&oe<u[ye+1]){oe=(oe-we)/(u[ye+1]-we),K=Wr.interpolate(y[ye],y[ye+1],oe,e);break}}else Zr(y)==="function"&&(K=y(oe));N&&(R[ce]=K)}return K};var le=()=>R={};O(t);const he=function(ae){const V=Wr(de(ae));return x&&V[x]?V[x]():V};return he.classes=function(ae){if(ae!=null){if(Zr(ae)==="array")s=ae,l=[ae[0],ae[ae.length-1]];else{const V=Wr.analyze(l);ae===0?s=[V.min,V.max]:s=Wr.limits(V,"e",ae)}return he}return s},he.domain=function(ae){if(!arguments.length)return l;C=ae[0],I=ae[ae.length-1],u=[];const V=y.length;if(ae.length===V&&C!==I)for(let K of Array.from(ae))u.push((K-C)/(I-C));else{for(let K=0;K<V;K++)u.push(K/(V-1));if(ae.length>2){const K=ae.map((ce,ye)=>ye/(ae.length-1)),oe=ae.map(ce=>(ce-C)/(I-C));oe.every((ce,ye)=>K[ye]===ce)||(se=ce=>{if(ce<=0||ce>=1)return ce;let ye=0;for(;ce>=oe[ye+1];)ye++;const we=(ce-oe[ye])/(oe[ye+1]-oe[ye]);return K[ye]+we*(K[ye+1]-K[ye])})}}return l=[C,I],he},he.mode=function(ae){return arguments.length?(e=ae,le(),he):e},he.range=function(ae,V){return O(ae),he},he.out=function(ae){return x=ae,he},he.spread=function(ae){return arguments.length?(a=ae,he):a},he.correctLightness=function(ae){return ae==null&&(ae=!0),U=ae,le(),U?W=function(V){const K=de(0,!0).lab()[0],oe=de(1,!0).lab()[0],ce=K>oe;let ye=de(V,!0).lab()[0];const we=K+(oe-K)*V;let Ve=ye-we,ut=0,nt=1,rt=20;for(;Math.abs(Ve)>.01&&rt-- >0;)(function(){return ce&&(Ve*=-1),Ve<0?(ut=V,V+=(nt-V)*.5):(nt=V,V+=(ut-V)*.5),ye=de(V,!0).lab()[0],Ve=ye-we})();return V}:W=V=>V,he},he.padding=function(ae){return ae!=null?(Zr(ae)==="number"&&(ae=[ae,ae]),h=ae,he):h},he.colors=function(ae,V){arguments.length<2&&(V="hex");let K=[];if(arguments.length===0)K=y.slice(0);else if(ae===1)K=[he(.5)];else if(ae>1){const oe=l[0],ce=l[1]-oe;K=JI(0,ae).map(ye=>he(oe+ye/(ae-1)*ce))}else{t=[];let oe=[];if(s&&s.length>2)for(let ce=1,ye=s.length,we=1<=ye;we?ce<ye:ce>ye;we?ce++:ce--)oe.push((s[ce-1]+s[ce])*.5);else oe=l;K=oe.map(ce=>he(ce))}return Wr[V]&&(K=K.map(oe=>oe[V]())),K},he.cache=function(ae){return ae!=null?(N=ae,he):N},he.gamma=function(ae){return ae!=null?(D=ae,he):D},he.nodata=function(ae){return ae!=null?(r=Wr(ae),he):r},he}function JI(t,e,r){let a=[],l=t<e,u=e;for(let h=t;l?h<u:h>u;l?h++:h--)a.push(h);return a}const eU=function(t){let e=[1,1];for(let r=1;r<t;r++){let a=[1];for(let l=1;l<=e.length;l++)a[l]=(e[l]||0)+e[l-1];e=a}return e},tU=function(t){let e,r,a,l;if(t=t.map(u=>new Yt(u)),t.length===2)[r,a]=t.map(u=>u.lab()),e=function(u){const h=[0,1,2].map(s=>r[s]+u*(a[s]-r[s]));return new Yt(h,"lab")};else if(t.length===3)[r,a,l]=t.map(u=>u.lab()),e=function(u){const h=[0,1,2].map(s=>(1-u)*(1-u)*r[s]+2*(1-u)*u*a[s]+u*u*l[s]);return new Yt(h,"lab")};else if(t.length===4){let u;[r,a,l,u]=t.map(h=>h.lab()),e=function(h){const s=[0,1,2].map(y=>(1-h)*(1-h)*(1-h)*r[y]+3*(1-h)*(1-h)*h*a[y]+3*(1-h)*h*h*l[y]+h*h*h*u[y]);return new Yt(s,"lab")}}else if(t.length>=5){let u,h,s;u=t.map(y=>y.lab()),s=t.length-1,h=eU(s),e=function(y){const x=1-y,C=[0,1,2].map(I=>u.reduce((U,R,N)=>U+h[N]*x**(s-N)*y**N*R[I],0));return new Yt(C,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},rU=t=>{const e=tU(t);return e.scale=()=>Vg(e),e},{round:ix}=Math;Yt.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ix)};Yt.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,r)=>r<3?t===!1?e:ix(e):e)};const iU=(...t)=>new Yt(...t,"rgb");Object.assign(Wr,{rgb:iU});Tr.format.rgb=(...t)=>{const e=Nr(t,"rgba");return e[3]===void 0&&(e[3]=1),e};Tr.autodetect.push({p:3,test:(...t)=>{if(t=Nr(t,"rgba"),Zr(t)==="array"&&(t.length===3||t.length===4&&Zr(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const Gs=(t,e,r)=>{if(!Gs[r])throw new Error("unknown blend mode "+r);return Gs[r](t,e)},Jl=t=>(e,r)=>{const a=Wr(r).rgb(),l=Wr(e).rgb();return Wr.rgb(t(a,l))},eA=t=>(e,r)=>{const a=[];return a[0]=t(e[0],r[0]),a[1]=t(e[1],r[1]),a[2]=t(e[2],r[2]),a},nU=t=>t,aU=(t,e)=>t*e/255,sU=(t,e)=>t>e?e:t,oU=(t,e)=>t>e?t:e,lU=(t,e)=>255*(1-(1-t/255)*(1-e/255)),AU=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),cU=(t,e)=>255*(1-(1-e/255)/(t/255)),hU=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);Gs.normal=Jl(eA(nU));Gs.multiply=Jl(eA(aU));Gs.screen=Jl(eA(lU));Gs.overlay=Jl(eA(AU));Gs.darken=Jl(eA(sU));Gs.lighten=Jl(eA(oU));Gs.dodge=Jl(eA(hU));Gs.burn=Jl(eA(cU));const{pow:uU,sin:dU,cos:fU}=Math;function gU(t=300,e=-1.5,r=1,a=1,l=[0,1]){let u=0,h;Zr(l)==="array"?h=l[1]-l[0]:(h=0,l=[l,l]);const s=function(y){const x=zo*((t+120)/360+e*y),C=uU(l[0]+h*y,a),U=(u!==0?r[0]+y*u:r)*C*(1-C)/2,R=fU(x),N=dU(x),D=C+U*(-.14861*R+1.78277*N),O=C+U*(-.29227*R-.90649*N),H=C+U*(1.97294*R);return Wr(W4([D*255,O*255,H*255,1]))};return s.start=function(y){return y==null?t:(t=y,s)},s.rotations=function(y){return y==null?e:(e=y,s)},s.gamma=function(y){return y==null?a:(a=y,s)},s.hue=function(y){return y==null?r:(r=y,Zr(r)==="array"?(u=r[1]-r[0],u===0&&(r=r[1])):u=0,s)},s.lightness=function(y){return y==null?l:(Zr(y)==="array"?(l=y,h=y[1]-y[0]):(l=[y,y],h=0),s)},s.scale=()=>Wr.scale(s),s.hue(r),s}const pU="0123456789abcdef",{floor:mU,random:_U}=Math,bU=()=>{let t="#";for(let e=0;e<6;e++)t+=pU.charAt(mU(_U()*16));return new Yt(t,"hex")},{log:ov,pow:yU,floor:vU,abs:xU}=Math;function nx(t,e=null){const r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Zr(t)==="object"&&(t=Object.values(t)),t.forEach(a=>{e&&Zr(a)==="object"&&(a=a[e]),a!=null&&!isNaN(a)&&(r.values.push(a),r.sum+=a,a<r.min&&(r.min=a),a>r.max&&(r.max=a),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(a,l)=>ax(r,a,l),r}function ax(t,e="equal",r=7){Zr(t)=="array"&&(t=nx(t));const{min:a,max:l}=t,u=t.values.sort((s,y)=>s-y);if(r===1)return[a,l];const h=[];if(e.substr(0,1)==="c"&&(h.push(a),h.push(l)),e.substr(0,1)==="e"){h.push(a);for(let s=1;s<r;s++)h.push(a+s/r*(l-a));h.push(l)}else if(e.substr(0,1)==="l"){if(a<=0)throw new Error("Logarithmic scales are only possible for values > 0");const s=Math.LOG10E*ov(a),y=Math.LOG10E*ov(l);h.push(a);for(let x=1;x<r;x++)h.push(yU(10,s+x/r*(y-s)));h.push(l)}else if(e.substr(0,1)==="q"){h.push(a);for(let s=1;s<r;s++){const y=(u.length-1)*s/r,x=vU(y);if(x===y)h.push(u[x]);else{const C=y-x;h.push(u[x]*(1-C)+u[x+1]*C)}}h.push(l)}else if(e.substr(0,1)==="k"){let s;const y=u.length,x=new Array(y),C=new Array(r);let I=!0,U=0,R=null;R=[],R.push(a);for(let O=1;O<r;O++)R.push(a+O/r*(l-a));for(R.push(l);I;){for(let H=0;H<r;H++)C[H]=0;for(let H=0;H<y;H++){const W=u[H];let se=Number.MAX_VALUE,de;for(let le=0;le<r;le++){const he=xU(R[le]-W);he<se&&(se=he,de=le),C[de]++,x[H]=de}}const O=new Array(r);for(let H=0;H<r;H++)O[H]=null;for(let H=0;H<y;H++)s=x[H],O[s]===null?O[s]=u[H]:O[s]+=u[H];for(let H=0;H<r;H++)O[H]*=1/C[H];I=!1;for(let H=0;H<r;H++)if(O[H]!==R[H]){I=!0;break}R=O,U++,U>200&&(I=!1)}const N={};for(let O=0;O<r;O++)N[O]=[];for(let O=0;O<y;O++)s=x[O],N[s].push(u[O]);let D=[];for(let O=0;O<r;O++)D.push(N[O][0]),D.push(N[O][N[O].length-1]);D=D.sort((O,H)=>O-H),h.push(D[0]);for(let O=1;O<D.length;O+=2){const H=D[O];!isNaN(H)&&h.indexOf(H)===-1&&h.push(H)}}return h}const wU=(t,e)=>{t=new Yt(t),e=new Yt(e);const r=t.luminance(),a=e.luminance();return r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const lv=.027,BU=5e-4,CU=.1,Av=1.14,v1=.022,cv=1.414,MU=(t,e)=>{t=new Yt(t),e=new Yt(e),t.alpha()<1&&(t=Vh(e,t,t.alpha(),"rgb"));const r=hv(...t.rgb()),a=hv(...e.rgb()),l=r>=v1?r:r+Math.pow(v1-r,cv),u=a>=v1?a:a+Math.pow(v1-a,cv),h=Math.pow(u,.56)-Math.pow(l,.57),s=Math.pow(u,.65)-Math.pow(l,.62),y=Math.abs(u-l)<BU?0:l<u?h*Av:s*Av;return(Math.abs(y)<CU?0:y>0?y-lv:y+lv)*100};function hv(t,e,r){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(r/255,2.4)}const{sqrt:Lo,pow:un,min:RU,max:IU,atan2:uv,abs:dv,cos:x1,sin:fv,exp:UU,PI:gv}=Math;function EU(t,e,r=1,a=1,l=1){var u=function(Qe){return 360*Qe/(2*gv)},h=function(Qe){return 2*gv*Qe/360};t=new Yt(t),e=new Yt(e);const[s,y,x]=Array.from(t.lab()),[C,I,U]=Array.from(e.lab()),R=(s+C)/2,N=Lo(un(y,2)+un(x,2)),D=Lo(un(I,2)+un(U,2)),O=(N+D)/2,H=.5*(1-Lo(un(O,7)/(un(O,7)+un(25,7)))),W=y*(1+H),se=I*(1+H),de=Lo(un(W,2)+un(x,2)),le=Lo(un(se,2)+un(U,2)),he=(de+le)/2,ae=u(uv(x,W)),V=u(uv(U,se)),K=ae>=0?ae:ae+360,oe=V>=0?V:V+360,ce=dv(K-oe)>180?(K+oe+360)/2:(K+oe)/2,ye=1-.17*x1(h(ce-30))+.24*x1(h(2*ce))+.32*x1(h(3*ce+6))-.2*x1(h(4*ce-63));let we=oe-K;we=dv(we)<=180?we:oe<=K?we+360:we-360,we=2*Lo(de*le)*fv(h(we)/2);const Ve=C-s,ut=le-de,nt=1+.015*un(R-50,2)/Lo(20+un(R-50,2)),rt=1+.045*he,ft=1+.015*he*ye,_t=30*UU(-un((ce-275)/25,2)),Je=-(2*Lo(un(he,7)/(un(he,7)+un(25,7))))*fv(2*h(_t)),je=Lo(un(Ve/(r*nt),2)+un(ut/(a*rt),2)+un(we/(l*ft),2)+Je*(ut/(a*rt))*(we/(l*ft)));return IU(0,RU(100,je))}function FU(t,e,r="lab"){t=new Yt(t),e=new Yt(e);const a=t.get(r),l=e.get(r);let u=0;for(let h in a){const s=(a[h]||0)-(l[h]||0);u+=s*s}return Math.sqrt(u)}const TU=(...t)=>{try{return new Yt(...t),!0}catch{return!1}},SU={cool(){return Vg([Wr.hsl(180,1,.9),Wr.hsl(250,.7,.4)])},hot(){return Vg(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Lm={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},sx=Object.keys(Lm),pv=new Map(sx.map(t=>[t.toLowerCase(),t])),NU=typeof Proxy=="function"?new Proxy(Lm,{get(t,e){const r=e.toLowerCase();if(pv.has(r))return t[pv.get(r)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(sx)}}):Lm,YU=(...t)=>{t=Nr(t,"cmyk");const[e,r,a,l]=t,u=t.length>4?t[4]:1;return l===1?[0,0,0,u]:[e>=1?0:255*(1-e)*(1-l),r>=1?0:255*(1-r)*(1-l),a>=1?0:255*(1-a)*(1-l),u]},{max:mv}=Math,PU=(...t)=>{let[e,r,a]=Nr(t,"rgb");e=e/255,r=r/255,a=a/255;const l=1-mv(e,mv(r,a)),u=l<1?1/(1-l):0,h=(1-e-l)*u,s=(1-r-l)*u,y=(1-a-l)*u;return[h,s,y,l]};Yt.prototype.cmyk=function(){return PU(this._rgb)};const LU=(...t)=>new Yt(...t,"cmyk");Object.assign(Wr,{cmyk:LU});Tr.format.cmyk=YU;Tr.autodetect.push({p:2,test:(...t)=>{if(t=Nr(t,"cmyk"),Zr(t)==="array"&&t.length===4)return"cmyk"}});const QU=(...t)=>{const e=Nr(t,"hsla");let r=iu(t)||"lsa";return e[0]=gs(e[0]||0)+"deg",e[1]=gs(e[1]*100)+"%",e[2]=gs(e[2]*100)+"%",r==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),r="hsla"):e.length=3,`${r.substr(0,3)}(${e.join(" ")})`},kU=(...t)=>{const e=Nr(t,"lab");let r=iu(t)||"lab";return e[0]=gs(e[0])+"%",e[1]=gs(e[1]),e[2]=gs(e[2]),r==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},DU=(...t)=>{const e=Nr(t,"lch");let r=iu(t)||"lab";return e[0]=gs(e[0])+"%",e[1]=gs(e[1]),e[2]=isNaN(e[2])?"none":gs(e[2])+"deg",r==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},zU=(...t)=>{const e=Nr(t,"lab");return e[0]=gs(e[0]*100)+"%",e[1]=Ym(e[1]),e[2]=Ym(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},ox=(...t)=>{const[e,r,a,...l]=Nr(t,"rgb"),[u,h,s]=n_(e,r,a),[y,x,C]=ex(u,h,s);return[y,x,C,...l.length>0&&l[0]<1?[l[0]]:[]]},ZU=(...t)=>{const e=Nr(t,"lch");return e[0]=gs(e[0]*100)+"%",e[1]=Ym(e[1]),e[2]=isNaN(e[2])?"none":gs(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:F3}=Math,HU=(...t)=>{const e=Nr(t,"rgba");let r=iu(t)||"rgb";if(r.substr(0,3)==="hsl")return QU(rx(e),r);if(r.substr(0,3)==="lab"){const a=E0();Xo("d50");const l=kU(e_(e),r);return Xo(a),l}if(r.substr(0,3)==="lch"){const a=E0();Xo("d50");const l=DU(r_(e),r);return Xo(a),l}return r.substr(0,5)==="oklab"?zU(n_(e)):r.substr(0,5)==="oklch"?ZU(ox(e)):(e[0]=F3(e[0]),e[1]=F3(e[1]),e[2]=F3(e[2]),(r==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),r="rgba"),`${r.substr(0,3)}(${e.slice(0,r==="rgb"?3:4).join(" ")})`)},lx=(...t)=>{t=Nr(t,"lch");const[e,r,a,...l]=t,[u,h,s]=J8(e,r,a),[y,x,C]=i_(u,h,s);return[y,x,C,...l.length>0&&l[0]<1?[l[0]]:[]]},Ko=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Hs=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Gg=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,ps=/\s*/.source,au=/\s+/.source,a_=/\s*,\s*/.source,Pp=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,su=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Ax=new RegExp("^rgba?\\("+ps+[Ko,Ko,Ko].join(au)+su+"\\)$"),cx=new RegExp("^rgb\\("+ps+[Ko,Ko,Ko].join(a_)+ps+"\\)$"),hx=new RegExp("^rgba\\("+ps+[Ko,Ko,Ko,Hs].join(a_)+ps+"\\)$"),ux=new RegExp("^hsla?\\("+ps+[Pp,Gg,Gg].join(au)+su+"\\)$"),dx=new RegExp("^hsl?\\("+ps+[Pp,Gg,Gg].join(a_)+ps+"\\)$"),fx=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,gx=new RegExp("^lab\\("+ps+[Hs,Hs,Hs].join(au)+su+"\\)$"),px=new RegExp("^lch\\("+ps+[Hs,Hs,Pp].join(au)+su+"\\)$"),mx=new RegExp("^oklab\\("+ps+[Hs,Hs,Hs].join(au)+su+"\\)$"),_x=new RegExp("^oklch\\("+ps+[Hs,Hs,Pp].join(au)+su+"\\)$"),{round:bx}=Math,hh=t=>t.map((e,r)=>r<=2?JA(bx(e),0,255):e),dn=(t,e=0,r=100,a=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,a?t=e+(t+1)*.5*(r-e):t=e+t*(r-e)),+t),da=(t,e)=>t==="none"?e:t,s_=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(Tr.format.named)try{return Tr.format.named(t)}catch{}if((e=t.match(Ax))||(e=t.match(cx))){let r=e.slice(1,4);for(let l=0;l<3;l++)r[l]=+dn(da(r[l],0),0,255);r=hh(r);const a=e[4]!==void 0?+dn(e[4],0,1):1;return r[3]=a,r}if(e=t.match(hx)){const r=e.slice(1,5);for(let a=0;a<4;a++)r[a]=+dn(r[a],0,255);return r}if((e=t.match(ux))||(e=t.match(dx))){const r=e.slice(1,4);r[0]=+da(r[0].replace("deg",""),0),r[1]=+dn(da(r[1],0),0,100)*.01,r[2]=+dn(da(r[2],0),0,100)*.01;const a=hh(Pm(r)),l=e[4]!==void 0?+dn(e[4],0,1):1;return a[3]=l,a}if(e=t.match(fx)){const r=e.slice(1,4);r[1]*=.01,r[2]*=.01;const a=Pm(r);for(let l=0;l<3;l++)a[l]=bx(a[l]);return a[3]=+e[4],a}if(e=t.match(gx)){const r=e.slice(1,4);r[0]=dn(da(r[0],0),0,100),r[1]=dn(da(r[1],0),-125,125,!0),r[2]=dn(da(r[2],0),-125,125,!0);const a=E0();Xo("d50");const l=hh(J4(r));Xo(a);const u=e[4]!==void 0?+dn(e[4],0,1):1;return l[3]=u,l}if(e=t.match(px)){const r=e.slice(1,4);r[0]=dn(r[0],0,100),r[1]=dn(da(r[1],0),0,150,!1),r[2]=+da(r[2].replace("deg",""),0);const a=E0();Xo("d50");const l=hh(t_(r));Xo(a);const u=e[4]!==void 0?+dn(e[4],0,1):1;return l[3]=u,l}if(e=t.match(mx)){const r=e.slice(1,4);r[0]=dn(da(r[0],0),0,1),r[1]=dn(da(r[1],0),-.4,.4,!0),r[2]=dn(da(r[2],0),-.4,.4,!0);const a=hh(i_(r)),l=e[4]!==void 0?+dn(e[4],0,1):1;return a[3]=l,a}if(e=t.match(_x)){const r=e.slice(1,4);r[0]=dn(da(r[0],0),0,1),r[1]=dn(da(r[1],0),0,.4,!1),r[2]=+da(r[2].replace("deg",""),0);const a=hh(lx(r)),l=e[4]!==void 0?+dn(e[4],0,1):1;return a[3]=l,a}};s_.test=t=>Ax.test(t)||ux.test(t)||gx.test(t)||px.test(t)||mx.test(t)||_x.test(t)||cx.test(t)||hx.test(t)||dx.test(t)||fx.test(t)||t==="transparent";Yt.prototype.css=function(t){return HU(this._rgb,t)};const OU=(...t)=>new Yt(...t,"css");Wr.css=OU;Tr.format.css=s_;Tr.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&Zr(t)==="string"&&s_.test(t))return"css"}});Tr.format.gl=(...t)=>{const e=Nr(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const XU=(...t)=>new Yt(...t,"gl");Wr.gl=XU;Yt.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};Yt.prototype.hex=function(t){return $8(this._rgb,t)};const VU=(...t)=>new Yt(...t,"hex");Wr.hex=VU;Tr.format.hex=K8;Tr.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&Zr(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:w1}=Math,yx=t=>{const e=t/100;let r,a,l;return e<66?(r=255,a=e<6?0:-155.25485562709179-.44596950469579133*(a=e-2)+104.49216199393888*w1(a),l=e<20?0:-254.76935184120902+.8274096064007395*(l=e-10)+115.67994401066147*w1(l)):(r=351.97690566805693+.114206453784165*(r=e-55)-40.25366309332127*w1(r),a=325.4494125711974+.07943456536662342*(a=e-50)-28.0852963507957*w1(a),l=255),[r,a,l,1]},{round:GU}=Math,jU=(...t)=>{const e=Nr(t,"rgb"),r=e[0],a=e[2];let l=1e3,u=4e4;const h=.4;let s;for(;u-l>h;){s=(u+l)*.5;const y=yx(s);y[2]/y[0]>=a/r?u=s:l=s}return GU(s)};Yt.prototype.temp=Yt.prototype.kelvin=Yt.prototype.temperature=function(){return jU(this._rgb)};const T3=(...t)=>new Yt(...t,"temp");Object.assign(Wr,{temp:T3,kelvin:T3,temperature:T3});Tr.format.temp=Tr.format.kelvin=Tr.format.temperature=yx;Yt.prototype.oklch=function(){return ox(this._rgb)};const KU=(...t)=>new Yt(...t,"oklch");Object.assign(Wr,{oklch:KU});Tr.format.oklch=lx;Tr.autodetect.push({p:2,test:(...t)=>{if(t=Nr(t,"oklch"),Zr(t)==="array"&&t.length===3)return"oklch"}});Object.assign(Wr,{analyze:nx,average:$I,bezier:rU,blend:Gs,brewer:NU,Color:Yt,colors:Xh,contrast:wU,contrastAPCA:MU,cubehelix:gU,deltaE:EU,distance:FU,input:Tr,interpolate:Vh,limits:ax,mix:Vh,random:bU,scale:Vg,scales:SU,valid:TU});const vx=async(t,e)=>{const a=await new Og(t).getZxy(e.z,e.x,e.y);if(!a||!a.data)throw new Error("Tile data not found");const l=new Blob([a.data],{type:"image/png"});return new Promise((u,h)=>{const s=new FileReader;s.onloadend=()=>{s.result?u(s.result.toString()):h(new Error("Failed to convert blob to Base64"))},s.onerror=y=>h(y),s.readAsDataURL(l)})};var $U=dt('<img class="pointer-events-none absolute block h-full w-full rounded-full object-cover" crossOrigin="anonymous">'),qU=dt('<img crossOrigin="anonymous" class="pointer-events-none absolute block h-full w-full rounded-full object-cover">'),WU=dt('<div class="pointer-events-none absolute"><!></div>');function o_(t,e){fr(e,!0);const r=async x=>{if(x.type!=="raster")return Promise.resolve(void 0);const C=x.metaData.xyzImageTile?x.metaData.xyzImageTile:Yg;return Promise.resolve(x.format.url.replace("{z}",C.z.toString()).replace("{x}",C.x.toString()).replace("{y}",C.y.toString()))},a=async x=>{try{if(x.type!=="raster"||x.format.type!=="pmtiles")return;const C=x.metaData.xyzImageTile?x.metaData.xyzImageTile:Yg;return await vx(x.format.url,C)}catch(C){console.error("Error fetching tile image:",C)}},l=(()=>{if(e.layerEntry.type==="raster"){if(e.layerEntry.format.type==="image")return r(e.layerEntry);if(e.layerEntry.format.type==="pmtiles")return a(e.layerEntry)}})();var u=Mr(),h=Dt(u);{var s=x=>{var C=Mr(),I=Dt(C);{var U=N=>{var D=Mr(),O=Dt(D);Im(O,()=>l,null,(H,W)=>{var se=$U();hr(()=>{Mn(se,"alt",e.layerEntry.metaData.name),Mn(se,"src",re(W))}),Ri(3,se,()=>fs),Xe(H,se)}),Xe(N,D)},R=(N,D)=>{{var O=H=>{var W=Mr(),se=Dt(W);Im(se,()=>l,null,(de,le)=>{var he=qU();hr(()=>{Mn(he,"alt",e.layerEntry.metaData.name),Mn(he,"src",re(le))}),Ri(3,he,()=>fs),Xe(de,he)}),Xe(H,W)};Ut(N,H=>{e.layerEntry.format.type==="pmtiles"&&H(O)},D)}};Ut(I,N=>{e.layerEntry.format.type==="image"?N(U):N(R,!1)})}Xe(x,C)},y=(x,C)=>{{var I=U=>{var R=WU(),N=Pe(R);{var D=H=>{br(H,{icon:"ic:baseline-mode-standby",class:"pointer-events-none",width:30})},O=(H,W)=>{{var se=le=>{br(le,{icon:"ic:baseline-polymer",class:"pointer-events-none",width:30})},de=(le,he)=>{{var ae=K=>{br(K,{icon:"ic:baseline-pentagon",class:"pointer-events-none",width:30})},V=(K,oe)=>{{var ce=ye=>{br(ye,{icon:"mynaui:label-solid",class:"pointer-events-none",width:30})};Ut(K,ye=>{e.layerEntry.format.geometryType==="Label"&&ye(ce)},oe)}};Ut(le,K=>{e.layerEntry.format.geometryType==="Polygon"?K(ae):K(V,!1)},he)}};Ut(H,le=>{e.layerEntry.format.geometryType==="LineString"?le(se):le(de,!1)},W)}};Ut(N,H=>{e.layerEntry.format.geometryType==="Point"?H(D):H(O,!1)})}Fe(R),Ri(3,R,()=>fs,()=>({duration:100})),Xe(U,R)};Ut(x,U=>{e.layerEntry.type==="vector"&&U(I)},C)}};Ut(h,x=>{e.layerEntry.type==="raster"?x(s):x(y,!1)})}Xe(t,u),gr()}const l_=["label","point","line","polygon","raster"],Qm=Gn("idle"),JU=()=>{const t={label:[],point:["fac_ziriki_point","fac_building_point","fac_poi"],line:["ensyurin_road2","gsi_road"],polygon:["ensyurin_rinhan"],raster:["gsi_rinya_m","gsi_seamlessphoto"]},{subscribe:e,update:r,set:a}=Gn({...t});return{subscribe:e,add:(l,u)=>r(h=>(h[u].includes(l)||(h[u]=[l,...h[u]]),{...h})),remove:l=>r(u=>{for(const h of l_)u[h]=u[h].filter(s=>s!==l);return{...u}}),reorderWithinTypeById:(l,u,h)=>r(s=>{const y=[...s[l]],x=y.indexOf(u),C=y.indexOf(h);if(x===-1||C===-1||x===C)return Qm.set("invalid"),{...s};const I=y.splice(x,1)[0];return y.splice(C,0,I),s[l]=y,Qm.set("success"),{...s}}),reset:()=>a({...t})}},sc=JU(),F0=D4(sc,t=>l_.flatMap(e=>t[e])),eE=D4(sc,t=>{const e={};let r=0;for(const a of l_){const l=t[a];l.length>0&&(e[r]=a,r+=l.length)}return e}),T0=Gn(!0);var tE=(t,e,r)=>e(r.dataEntry),rE=dt('<img class="css-no-drag-icon h-full w-full rounded-md object-cover transition-transform duration-150 hover:scale-110" alt="">'),iE=(t,e,r)=>e(r.dataEntry.id),nE=dt('<button class="c-btn-cancel flex items-center gap-2 px-4"><!> <div></div></button>'),aE=(t,e,r)=>e(r.dataEntry.id),sE=dt('<button class="c-btn-confirm flex shrink-0 grow items-center gap-2 px-4"><!> <div></div></button>'),oE=dt('<div class="relative mb-4 flex shrink-0 grow flex-col items-center justify-center overflow-hidden rounded-lg bg-gray-300 p-2"><button class="relative flex aspect-video w-full shrink-0 overflow-hidden"><!></button> <div class="flex w-full items-center justify-start gap-2 py-2"><label class="relative grid h-[50px] w-[50px] shrink-0 cursor-pointer place-items-center overflow-hidden rounded-full bg-white"><!></label> <span> </span></div> <div class=" shrink-0"><!></div></div>');function lE(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(F0,"$orderedLayerIds",r);let u=xr(e,"showDataEntry",15),h=er($n(l())),s=bi(()=>{if(e.dataEntry){if(e.dataEntry.type==="raster")return"raster";if(e.dataEntry.type==="vector"){if(e.dataEntry.format.geometryType==="Label")return"label";if(e.dataEntry.format.geometryType==="Point")return"point";if(e.dataEntry.format.geometryType==="LineString")return"line";if(e.dataEntry.format.geometryType==="Polygon")return"polygon"}}});F0.subscribe(K=>{ht(h,K,!0)});const y=async K=>{if(K.type!=="raster")return Promise.resolve(void 0);const oe=K.metaData.xyzImageTile?K.metaData.xyzImageTile:Yg;return Promise.resolve(K.format.url.replace("{z}",oe.z.toString()).replace("{x}",oe.x.toString()).replace("{y}",oe.y.toString()))},x=async K=>{try{if(K.type!=="raster"||K.format.type!=="pmtiles")return;const oe=K.metaData.xyzImageTile?K.metaData.xyzImageTile:Yg;return await vx(K.format.url,oe)}catch(oe){console.error("Error fetching tile image:",oe)}},C=async K=>{if(K.type==="raster"){if(K.format.type==="image")return y(K);if(K.format.type==="pmtiles")return x(K)}else if(K.type==="vector")return K.metaData.coverImage??fC},I=K=>{re(s)&&sc.add(K,re(s))},U=K=>{sc.remove(K)};var R=oE(),N=Pe(R);N.__click=[tE,u,e];var D=Pe(N);Im(D,()=>C(e.dataEntry),null,(K,oe)=>{var ce=rE();hr(()=>Mn(ce,"src",re(oe))),Xe(K,ce)}),Fe(N);var O=Ze(N,2),H=Pe(O),W=Pe(H);o_(W,{get layerEntry(){return e.dataEntry}}),Fe(H);var se=Ze(H,2),de=Pe(se,!0);Fe(se),Fe(O);var le=Ze(O,2),he=Pe(le);{var ae=K=>{var oe=nE();oe.__click=[iE,U,e];var ce=Pe(oe);br(ce,{icon:"material-symbols:check",class:" h-8 w-8"}),Ki(2),Fe(oe),Xe(K,oe)},V=K=>{var oe=sE();oe.__click=[aE,I,e];var ce=Pe(oe);br(ce,{icon:"material-symbols:add",class:" h-8 w-8"}),Ki(2),Fe(oe),Xe(K,oe)};Ut(he,K=>{re(h).includes(e.dataEntry.id)?K(ae):K(V,!1)})}Fe(le),Fe(R),hr(()=>_r(de,e.dataEntry.metaData.name)),Xe(t,R),gr(),a()}qi(["click"]);function AE(t,e={}){if(t.bbox!=null&&e.recompute!==!0)return t.bbox;const r=[1/0,1/0,-1/0,-1/0];return h8(t,a=>{r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}var jg=AE;/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:xx,setPrototypeOf:_v,isFrozen:cE,getPrototypeOf:hE,getOwnPropertyDescriptor:uE}=Object;let{freeze:_a,seal:ms,create:wx}=Object,{apply:km,construct:Dm}=typeof Reflect<"u"&&Reflect;_a||(_a=function(e){return e});ms||(ms=function(e){return e});km||(km=function(e,r,a){return e.apply(r,a)});Dm||(Dm=function(e,r){return new e(...r)});const B1=ba(Array.prototype.forEach),dE=ba(Array.prototype.lastIndexOf),bv=ba(Array.prototype.pop),Sd=ba(Array.prototype.push),fE=ba(Array.prototype.splice),_g=ba(String.prototype.toLowerCase),S3=ba(String.prototype.toString),yv=ba(String.prototype.match),Nd=ba(String.prototype.replace),gE=ba(String.prototype.indexOf),pE=ba(String.prototype.trim),Ns=ba(Object.prototype.hasOwnProperty),fa=ba(RegExp.prototype.test),Yd=mE(TypeError);function ba(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return km(t,e,a)}}function mE(t){return function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return Dm(t,r)}}function Xr(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_g;_v&&_v(t,null);let a=e.length;for(;a--;){let l=e[a];if(typeof l=="string"){const u=r(l);u!==l&&(cE(e)||(e[a]=u),l=u)}t[l]=!0}return t}function _E(t){for(let e=0;e<t.length;e++)Ns(t,e)||(t[e]=null);return t}function HA(t){const e=wx(null);for(const[r,a]of xx(t))Ns(t,r)&&(Array.isArray(a)?e[r]=_E(a):a&&typeof a=="object"&&a.constructor===Object?e[r]=HA(a):e[r]=a);return e}function Pd(t,e){for(;t!==null;){const a=uE(t,e);if(a){if(a.get)return ba(a.get);if(typeof a.value=="function")return ba(a.value)}t=hE(t)}function r(){return null}return r}const vv=_a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),N3=_a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Y3=_a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bE=_a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),P3=_a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yE=_a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xv=_a(["#text"]),wv=_a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),L3=_a(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bv=_a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),C1=_a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vE=ms(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xE=ms(/<%[\w\W]*|[\w\W]*%>/gm),wE=ms(/\$\{[\w\W]*/gm),BE=ms(/^data-[\-\w.\u00B7-\uFFFF]+$/),CE=ms(/^aria-[\-\w]+$/),Bx=ms(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ME=ms(/^(?:\w+script|data):/i),RE=ms(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cx=ms(/^html$/i),IE=ms(/^[a-z][.\w]*(-[.\w]+)+$/i);var Cv=Object.freeze({__proto__:null,ARIA_ATTR:CE,ATTR_WHITESPACE:RE,CUSTOM_ELEMENT:IE,DATA_ATTR:BE,DOCTYPE_NAME:Cx,ERB_EXPR:xE,IS_ALLOWED_URI:Bx,IS_SCRIPT_OR_DATA:ME,MUSTACHE_EXPR:vE,TMPLIT_EXPR:wE});const Ld={element:1,text:3,progressingInstruction:7,comment:8,document:9},UE=function(){return typeof window>"u"?null:window},EE=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let a=null;const l="data-tt-policy-suffix";r&&r.hasAttribute(l)&&(a=r.getAttribute(l));const u="dompurify"+(a?"#"+a:"");try{return e.createPolicy(u,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},Mv=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Mx(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:UE();const e=Ht=>Mx(Ht);if(e.version="3.2.5",e.removed=[],!t||!t.document||t.document.nodeType!==Ld.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const a=r,l=a.currentScript,{DocumentFragment:u,HTMLTemplateElement:h,Node:s,Element:y,NodeFilter:x,NamedNodeMap:C=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:I,DOMParser:U,trustedTypes:R}=t,N=y.prototype,D=Pd(N,"cloneNode"),O=Pd(N,"remove"),H=Pd(N,"nextSibling"),W=Pd(N,"childNodes"),se=Pd(N,"parentNode");if(typeof h=="function"){const Ht=r.createElement("template");Ht.content&&Ht.content.ownerDocument&&(r=Ht.content.ownerDocument)}let de,le="";const{implementation:he,createNodeIterator:ae,createDocumentFragment:V,getElementsByTagName:K}=r,{importNode:oe}=a;let ce=Mv();e.isSupported=typeof xx=="function"&&typeof se=="function"&&he&&he.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ye,ERB_EXPR:we,TMPLIT_EXPR:Ve,DATA_ATTR:ut,ARIA_ATTR:nt,IS_SCRIPT_OR_DATA:rt,ATTR_WHITESPACE:ft,CUSTOM_ELEMENT:_t}=Cv;let{IS_ALLOWED_URI:gt}=Cv,Je=null;const je=Xr({},[...vv,...N3,...Y3,...P3,...xv]);let Qe=null;const pt=Xr({},[...wv,...L3,...Bv,...C1]);let $e=Object.seal(wx(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),wt=null,Ct=null,Mt=!0,Pt=!0,ar=!1,Lt=!0,Ot=!1,Qt=!0,St=!1,Zt=!1,lr=!1,dr=!1,rr=!1,Br=!1,Dr=!0,vi=!1;const Gr="user-content-";let Fi=!0,Kr=!1,hi={},Rr=null;const $r=Xr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ui=null;const Un=Xr({},["audio","video","img","source","image","track"]);let Xi=null;const Vi=Xr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),si="http://www.w3.org/1998/Math/MathML",ni="http://www.w3.org/2000/svg",xi="http://www.w3.org/1999/xhtml";let ze=xi,te=!1,ie=null;const ge=Xr({},[si,ni,xi],S3);let ve=Xr({},["mi","mo","mn","ms","mtext"]),Ae=Xr({},["annotation-xml"]);const ke=Xr({},["title","style","font","a","script"]);let Ge=null;const Ie=["application/xhtml+xml","text/html"],et="text/html";let Te=null,ne=null;const Se=r.createElement("form"),Ue=function(De){return De instanceof RegExp||De instanceof Function},He=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ne&&ne===De)){if((!De||typeof De!="object")&&(De={}),De=HA(De),Ge=Ie.indexOf(De.PARSER_MEDIA_TYPE)===-1?et:De.PARSER_MEDIA_TYPE,Te=Ge==="application/xhtml+xml"?S3:_g,Je=Ns(De,"ALLOWED_TAGS")?Xr({},De.ALLOWED_TAGS,Te):je,Qe=Ns(De,"ALLOWED_ATTR")?Xr({},De.ALLOWED_ATTR,Te):pt,ie=Ns(De,"ALLOWED_NAMESPACES")?Xr({},De.ALLOWED_NAMESPACES,S3):ge,Xi=Ns(De,"ADD_URI_SAFE_ATTR")?Xr(HA(Vi),De.ADD_URI_SAFE_ATTR,Te):Vi,ui=Ns(De,"ADD_DATA_URI_TAGS")?Xr(HA(Un),De.ADD_DATA_URI_TAGS,Te):Un,Rr=Ns(De,"FORBID_CONTENTS")?Xr({},De.FORBID_CONTENTS,Te):$r,wt=Ns(De,"FORBID_TAGS")?Xr({},De.FORBID_TAGS,Te):{},Ct=Ns(De,"FORBID_ATTR")?Xr({},De.FORBID_ATTR,Te):{},hi=Ns(De,"USE_PROFILES")?De.USE_PROFILES:!1,Mt=De.ALLOW_ARIA_ATTR!==!1,Pt=De.ALLOW_DATA_ATTR!==!1,ar=De.ALLOW_UNKNOWN_PROTOCOLS||!1,Lt=De.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ot=De.SAFE_FOR_TEMPLATES||!1,Qt=De.SAFE_FOR_XML!==!1,St=De.WHOLE_DOCUMENT||!1,dr=De.RETURN_DOM||!1,rr=De.RETURN_DOM_FRAGMENT||!1,Br=De.RETURN_TRUSTED_TYPE||!1,lr=De.FORCE_BODY||!1,Dr=De.SANITIZE_DOM!==!1,vi=De.SANITIZE_NAMED_PROPS||!1,Fi=De.KEEP_CONTENT!==!1,Kr=De.IN_PLACE||!1,gt=De.ALLOWED_URI_REGEXP||Bx,ze=De.NAMESPACE||xi,ve=De.MATHML_TEXT_INTEGRATION_POINTS||ve,Ae=De.HTML_INTEGRATION_POINTS||Ae,$e=De.CUSTOM_ELEMENT_HANDLING||{},De.CUSTOM_ELEMENT_HANDLING&&Ue(De.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($e.tagNameCheck=De.CUSTOM_ELEMENT_HANDLING.tagNameCheck),De.CUSTOM_ELEMENT_HANDLING&&Ue(De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($e.attributeNameCheck=De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),De.CUSTOM_ELEMENT_HANDLING&&typeof De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($e.allowCustomizedBuiltInElements=De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ot&&(Pt=!1),rr&&(dr=!0),hi&&(Je=Xr({},xv),Qe=[],hi.html===!0&&(Xr(Je,vv),Xr(Qe,wv)),hi.svg===!0&&(Xr(Je,N3),Xr(Qe,L3),Xr(Qe,C1)),hi.svgFilters===!0&&(Xr(Je,Y3),Xr(Qe,L3),Xr(Qe,C1)),hi.mathMl===!0&&(Xr(Je,P3),Xr(Qe,Bv),Xr(Qe,C1))),De.ADD_TAGS&&(Je===je&&(Je=HA(Je)),Xr(Je,De.ADD_TAGS,Te)),De.ADD_ATTR&&(Qe===pt&&(Qe=HA(Qe)),Xr(Qe,De.ADD_ATTR,Te)),De.ADD_URI_SAFE_ATTR&&Xr(Xi,De.ADD_URI_SAFE_ATTR,Te),De.FORBID_CONTENTS&&(Rr===$r&&(Rr=HA(Rr)),Xr(Rr,De.FORBID_CONTENTS,Te)),Fi&&(Je["#text"]=!0),St&&Xr(Je,["html","head","body"]),Je.table&&(Xr(Je,["tbody"]),delete wt.tbody),De.TRUSTED_TYPES_POLICY){if(typeof De.TRUSTED_TYPES_POLICY.createHTML!="function")throw Yd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof De.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Yd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');de=De.TRUSTED_TYPES_POLICY,le=de.createHTML("")}else de===void 0&&(de=EE(R,l)),de!==null&&typeof le=="string"&&(le=de.createHTML(""));_a&&_a(De),ne=De}},At=Xr({},[...N3,...Y3,...bE]),xt=Xr({},[...P3,...yE]),Oe=function(De){let Et=se(De);(!Et||!Et.tagName)&&(Et={namespaceURI:ze,tagName:"template"});const nr=_g(De.tagName),Ir=_g(Et.tagName);return ie[De.namespaceURI]?De.namespaceURI===ni?Et.namespaceURI===xi?nr==="svg":Et.namespaceURI===si?nr==="svg"&&(Ir==="annotation-xml"||ve[Ir]):!!At[nr]:De.namespaceURI===si?Et.namespaceURI===xi?nr==="math":Et.namespaceURI===ni?nr==="math"&&Ae[Ir]:!!xt[nr]:De.namespaceURI===xi?Et.namespaceURI===ni&&!Ae[Ir]||Et.namespaceURI===si&&!ve[Ir]?!1:!xt[nr]&&(ke[nr]||!At[nr]):!!(Ge==="application/xhtml+xml"&&ie[De.namespaceURI]):!1},mt=function(De){Sd(e.removed,{element:De});try{se(De).removeChild(De)}catch{O(De)}},Kt=function(De,Et){try{Sd(e.removed,{attribute:Et.getAttributeNode(De),from:Et})}catch{Sd(e.removed,{attribute:null,from:Et})}if(Et.removeAttribute(De),De==="is")if(dr||rr)try{mt(Et)}catch{}else try{Et.setAttribute(De,"")}catch{}},qt=function(De){let Et=null,nr=null;if(lr)De="<remove></remove>"+De;else{const zr=yv(De,/^[\r\n\t ]+/);nr=zr&&zr[0]}Ge==="application/xhtml+xml"&&ze===xi&&(De='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+De+"</body></html>");const Ir=de?de.createHTML(De):De;if(ze===xi)try{Et=new U().parseFromString(Ir,Ge)}catch{}if(!Et||!Et.documentElement){Et=he.createDocument(ze,"template",null);try{Et.documentElement.innerHTML=te?le:Ir}catch{}}const Ur=Et.body||Et.documentElement;return De&&nr&&Ur.insertBefore(r.createTextNode(nr),Ur.childNodes[0]||null),ze===xi?K.call(Et,St?"html":"body")[0]:St?Et.documentElement:Ur},tr=function(De){return ae.call(De.ownerDocument||De,De,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},tt=function(De){return De instanceof I&&(typeof De.nodeName!="string"||typeof De.textContent!="string"||typeof De.removeChild!="function"||!(De.attributes instanceof C)||typeof De.removeAttribute!="function"||typeof De.setAttribute!="function"||typeof De.namespaceURI!="string"||typeof De.insertBefore!="function"||typeof De.hasChildNodes!="function")},Ft=function(De){return typeof s=="function"&&De instanceof s};function zt(Ht,De,Et){B1(Ht,nr=>{nr.call(e,De,Et,ne)})}const ti=function(De){let Et=null;if(zt(ce.beforeSanitizeElements,De,null),tt(De))return mt(De),!0;const nr=Te(De.nodeName);if(zt(ce.uponSanitizeElement,De,{tagName:nr,allowedTags:Je}),De.hasChildNodes()&&!Ft(De.firstElementChild)&&fa(/<[/\w!]/g,De.innerHTML)&&fa(/<[/\w!]/g,De.textContent)||De.nodeType===Ld.progressingInstruction||Qt&&De.nodeType===Ld.comment&&fa(/<[/\w]/g,De.data))return mt(De),!0;if(!Je[nr]||wt[nr]){if(!wt[nr]&&yr(nr)&&($e.tagNameCheck instanceof RegExp&&fa($e.tagNameCheck,nr)||$e.tagNameCheck instanceof Function&&$e.tagNameCheck(nr)))return!1;if(Fi&&!Rr[nr]){const Ir=se(De)||De.parentNode,Ur=W(De)||De.childNodes;if(Ur&&Ir){const zr=Ur.length;for(let Gi=zr-1;Gi>=0;--Gi){const zn=D(Ur[Gi],!0);zn.__removalCount=(De.__removalCount||0)+1,Ir.insertBefore(zn,H(De))}}}return mt(De),!0}return De instanceof y&&!Oe(De)||(nr==="noscript"||nr==="noembed"||nr==="noframes")&&fa(/<\/no(script|embed|frames)/i,De.innerHTML)?(mt(De),!0):(Ot&&De.nodeType===Ld.text&&(Et=De.textContent,B1([ye,we,Ve],Ir=>{Et=Nd(Et,Ir," ")}),De.textContent!==Et&&(Sd(e.removed,{element:De.cloneNode()}),De.textContent=Et)),zt(ce.afterSanitizeElements,De,null),!1)},oi=function(De,Et,nr){if(Dr&&(Et==="id"||Et==="name")&&(nr in r||nr in Se))return!1;if(!(Pt&&!Ct[Et]&&fa(ut,Et))){if(!(Mt&&fa(nt,Et))){if(!Qe[Et]||Ct[Et]){if(!(yr(De)&&($e.tagNameCheck instanceof RegExp&&fa($e.tagNameCheck,De)||$e.tagNameCheck instanceof Function&&$e.tagNameCheck(De))&&($e.attributeNameCheck instanceof RegExp&&fa($e.attributeNameCheck,Et)||$e.attributeNameCheck instanceof Function&&$e.attributeNameCheck(Et))||Et==="is"&&$e.allowCustomizedBuiltInElements&&($e.tagNameCheck instanceof RegExp&&fa($e.tagNameCheck,nr)||$e.tagNameCheck instanceof Function&&$e.tagNameCheck(nr))))return!1}else if(!Xi[Et]){if(!fa(gt,Nd(nr,ft,""))){if(!((Et==="src"||Et==="xlink:href"||Et==="href")&&De!=="script"&&gE(nr,"data:")===0&&ui[De])){if(!(ar&&!fa(rt,Nd(nr,ft,"")))){if(nr)return!1}}}}}}return!0},yr=function(De){return De!=="annotation-xml"&&yv(De,_t)},Vt=function(De){zt(ce.beforeSanitizeAttributes,De,null);const{attributes:Et}=De;if(!Et||tt(De))return;const nr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Qe,forceKeepAttr:void 0};let Ir=Et.length;for(;Ir--;){const Ur=Et[Ir],{name:zr,namespaceURI:Gi,value:zn}=Ur,_n=Te(zr);let Ti=zr==="value"?zn:pE(zn);if(nr.attrName=_n,nr.attrValue=Ti,nr.keepAttr=!0,nr.forceKeepAttr=void 0,zt(ce.uponSanitizeAttribute,De,nr),Ti=nr.attrValue,vi&&(_n==="id"||_n==="name")&&(Kt(zr,De),Ti=Gr+Ti),Qt&&fa(/((--!?|])>)|<\/(style|title)/i,Ti)){Kt(zr,De);continue}if(nr.forceKeepAttr||(Kt(zr,De),!nr.keepAttr))continue;if(!Lt&&fa(/\/>/i,Ti)){Kt(zr,De);continue}Ot&&B1([ye,we,Ve],nA=>{Ti=Nd(Ti,nA," ")});const iA=Te(De.nodeName);if(oi(iA,_n,Ti)){if(de&&typeof R=="object"&&typeof R.getAttributeType=="function"&&!Gi)switch(R.getAttributeType(iA,_n)){case"TrustedHTML":{Ti=de.createHTML(Ti);break}case"TrustedScriptURL":{Ti=de.createScriptURL(Ti);break}}try{Gi?De.setAttributeNS(Gi,zr,Ti):De.setAttribute(zr,Ti),tt(De)?mt(De):bv(e.removed)}catch{}}}zt(ce.afterSanitizeAttributes,De,null)},Ia=function Ht(De){let Et=null;const nr=tr(De);for(zt(ce.beforeSanitizeShadowDOM,De,null);Et=nr.nextNode();)zt(ce.uponSanitizeShadowNode,Et,null),ti(Et),Vt(Et),Et.content instanceof u&&Ht(Et.content);zt(ce.afterSanitizeShadowDOM,De,null)};return e.sanitize=function(Ht){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et=null,nr=null,Ir=null,Ur=null;if(te=!Ht,te&&(Ht="<!-->"),typeof Ht!="string"&&!Ft(Ht))if(typeof Ht.toString=="function"){if(Ht=Ht.toString(),typeof Ht!="string")throw Yd("dirty is not a string, aborting")}else throw Yd("toString is not a function");if(!e.isSupported)return Ht;if(Zt||He(De),e.removed=[],typeof Ht=="string"&&(Kr=!1),Kr){if(Ht.nodeName){const zn=Te(Ht.nodeName);if(!Je[zn]||wt[zn])throw Yd("root node is forbidden and cannot be sanitized in-place")}}else if(Ht instanceof s)Et=qt("<!---->"),nr=Et.ownerDocument.importNode(Ht,!0),nr.nodeType===Ld.element&&nr.nodeName==="BODY"||nr.nodeName==="HTML"?Et=nr:Et.appendChild(nr);else{if(!dr&&!Ot&&!St&&Ht.indexOf("<")===-1)return de&&Br?de.createHTML(Ht):Ht;if(Et=qt(Ht),!Et)return dr?null:Br?le:""}Et&&lr&&mt(Et.firstChild);const zr=tr(Kr?Ht:Et);for(;Ir=zr.nextNode();)ti(Ir),Vt(Ir),Ir.content instanceof u&&Ia(Ir.content);if(Kr)return Ht;if(dr){if(rr)for(Ur=V.call(Et.ownerDocument);Et.firstChild;)Ur.appendChild(Et.firstChild);else Ur=Et;return(Qe.shadowroot||Qe.shadowrootmode)&&(Ur=oe.call(a,Ur,!0)),Ur}let Gi=St?Et.outerHTML:Et.innerHTML;return St&&Je["!doctype"]&&Et.ownerDocument&&Et.ownerDocument.doctype&&Et.ownerDocument.doctype.name&&fa(Cx,Et.ownerDocument.doctype.name)&&(Gi="<!DOCTYPE "+Et.ownerDocument.doctype.name+`>
`+Gi),Ot&&B1([ye,we,Ve],zn=>{Gi=Nd(Gi,zn," ")}),de&&Br?de.createHTML(Gi):Gi},e.setConfig=function(){let Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};He(Ht),Zt=!0},e.clearConfig=function(){ne=null,Zt=!1},e.isValidAttribute=function(Ht,De,Et){ne||He({});const nr=Te(Ht),Ir=Te(De);return oi(nr,Ir,Et)},e.addHook=function(Ht,De){typeof De=="function"&&Sd(ce[Ht],De)},e.removeHook=function(Ht,De){if(De!==void 0){const Et=dE(ce[Ht],De);return Et===-1?void 0:fE(ce[Ht],Et,1)[0]}return bv(ce[Ht])},e.removeHooks=function(Ht){ce[Ht]=[]},e.removeAllHooks=function(){ce=Mv()},e}var FE=Mx();const TE=[{name:"",bbox:[139.334302,41.35211,148.894833,45.556277]},{name:"",bbox:[139.860725,40.218604,141.68324,41.555998]},{name:"",bbox:[140.653166,38.747651,142.072461,40.449927]},{name:"",bbox:[140.274764,37.773252,141.675431,39.002776]},{name:"",bbox:[139.694597,38.874522,140.995425,40.511122]},{name:"",bbox:[139.539712,37.73383,140.646377,39.208476]},{name:"",bbox:[139.164746,36.791324,141.042336,37.976555]},{name:"",bbox:[139.687691,35.739138,140.851966,36.945225]},{name:"",bbox:[139.326731,36.199924,140.291983,37.155039]},{name:"",bbox:[138.397022,35.985419,139.668249,37.058627]},{name:"",bbox:[138.711401,35.753442,139.90032,36.281751]},{name:"",bbox:[139.739525,34.899595,140.870652,36.104157]},{name:"",bbox:[138.942865,24.224731,153.986895,35.898404]},{name:"",bbox:[138.915784,35.128768,139.798226,35.675618]},{name:"",bbox:[137.635121,36.736544,139.900012,38.553524]},{name:"",bbox:[136.768684,36.274308,137.763276,36.979692]},{name:"",bbox:[136.244148,36.067618,137.360649,37.855068]},{name:"",bbox:[135.449342,35.344187,136.832362,36.295361]},{name:"",bbox:[138.180108,35.168403,139.13438,35.971564]},{name:"",bbox:[137.325027,35.198461,138.739196,37.030423]},{name:"",bbox:[136.276225,35.133729,137.651936,36.465031]},{name:"",bbox:[137.474177,34.594644,139.176371,35.646621]},{name:"",bbox:[136.671033,34.578195,137.838064,35.424789]},{name:"",bbox:[135.853192,33.722879,136.987749,35.257953]},{name:"",bbox:[135.763805,34.79126,136.454846,35.70372]},{name:"",bbox:[134.853727,34.705754,136.054372,35.779277]},{name:"",bbox:[135.093449,34.271827,135.746596,35.051282]},{name:"",bbox:[134.252809,34.156129,135.468591,35.674667]},{name:"",bbox:[135.539726,33.858956,136.22982,34.781294]},{name:"",bbox:[134.999059,33.433595,136.013461,34.38446]},{name:"",bbox:[133.136116,35.057691,134.514725,35.614221]},{name:"",bbox:[131.667965,34.302497,133.385926,37.244272]},{name:"",bbox:[133.266987,34.2984,134.412698,35.352889]},{name:"",bbox:[132.036485,34.034954,133.470397,35.106602]},{name:"",bbox:[130.775059,33.712909,132.492149,34.798657]},{name:"",bbox:[133.660905,33.539632,134.820436,34.252034]},{name:"",bbox:[133.446605,34.012302,134.440441,34.564615]},{name:"",bbox:[132.017257,32.901919,133.692787,34.299619]},{name:"",bbox:[132.479888,32.702505,134.31367,33.882997]},{name:"",bbox:[130.032703,33.000004,131.190597,34.249456]},{name:"",bbox:[129.740621,32.950517,130.542127,33.618923]},{name:"",bbox:[128.34462,31.988773,130.380232,34.707891]},{name:"",bbox:[129.963357,32.094995,131.328424,33.195128]},{name:"",bbox:[130.823676,32.714503,132.085332,33.740236]},{name:"",bbox:[130.703426,31.360721,131.882746,32.837348]},{name:"",bbox:[128.395452,27.01874,131.205448,32.307013]},{name:"",bbox:[122.933755,24.045713,131.332068,27.885401]},{name:"",bbox:[139.164746,36.791324,142.072461,41.555998]},{name:"",bbox:[136.83845019821013,35.5104054980036,136.97907453990035,35.65244055693736]},{name:"",bbox:[136.91278,35.543576,136.92986,35.556704]}],SE=new Map(TE.map(t=>[t.name,t.bbox])),Rx=t=>{const e=SE.get(t);return e||(console.warn("getLocationBbox: not found",t),null)},Kg={pole_1:{image:`${sr}/pole_1.webp`,description:"",url:null},pole_2:{image:`${sr}/pole_2.webp`,description:"",url:null},pole_3:{image:`${sr}/pole_3.webp`,description:"",url:null},pole_4:{image:`${sr}/pole_4.webp`,description:"",url:null},pole_5:{image:`${sr}/pole_5.webp`,description:"",url:null},pole_6:{image:`${sr}/pole_6.webp`,description:"",url:null},pole_a:{image:`${sr}/pole_a.webp`,description:"",url:null},fac_center:{image:`${sr}/fac_center.webp`,description:`
                        `,url:"https://www.forest.ac.jp/facilities/centerzone/"},fac_cottage:{image:`${sr}/fac_cottage.webp`,description:`1530
                        `,url:"https://www.forest.ac.jp/facilities/stay/"},fac_forest_labo:{image:`${sr}/fac_forest_labo.webp`,description:`
                `,url:"https://www.forest.ac.jp/facilities/centerzone/"},fac_kakoutou:{image:`${sr}/fac_kakoutou.webp`,description:"",url:null},fac_kensyutou:{image:`${sr}/fac_kensyutou.webp`,description:"",url:null},fac_koubou:{image:`${sr}/fac_koubou.webp`,description:"",url:"https://www.forest.ac.jp/facilities/testroom/"},fac_morinos:{image:`${sr}/fac_morinos.webp`,description:"",url:"https://morinos.net/"},fac_open_labo:{image:`${sr}/fac_open_labo.webp`,description:"",url:"https://www.forest.ac.jp/facilities/testroom/"},fac_ringyoukikaitou:{image:`${sr}/fac_ringyoukikaitou.webp`,description:"",url:"https://www.forest.ac.jp/facilities/fmeb/"},fac_seizaitou:{image:`${sr}/fac_seizaitou.webp`,description:"",url:"https://www.forest.ac.jp/facilities/testroom/"},fac_syako:{image:`${sr}/fac_syako.webp`,description:"",url:null},fac_wood_labo:{image:`${sr}/fac_wood_labo.webp`,description:"",url:"https://www.forest.ac.jp/facilities/centerzone/"},fac_tech_a:{image:`${sr}/fac_tech_a.webp`,description:"",url:"https://www.forest.ac.jp/facilities/technicalzone/"},fac_tech_b:{image:`${sr}/fac_tech_b.webp`,description:"",url:"https://www.forest.ac.jp/facilities/technicalzone/"},fac_information:{image:`${sr}/fac_information.webp`,description:"",url:"https://www.forest.ac.jp/facilities/forest/"},ziriki_01:{image:`${sr}/ziriki_01.webp`,description:"(120mm)",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_02:{image:`${sr}/ziriki_02.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_03:{image:`${sr}/ziriki_03.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_04:{image:`${sr}/ziriki_04.webp`,description:"10",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_05:{image:`${sr}/ziriki_05.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_06:{image:`${sr}/ziriki_06.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_07:{image:`${sr}/ziriki_07.webp`,description:" ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_08:{image:`${sr}/ziriki_08.webp`,description:"  RCS",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_09:{image:`${sr}/ziriki_09.webp`,description:"20 ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_10:{image:`${sr}/ziriki_10.webp`,description:"2002   ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_11:{image:`${sr}/ziriki_11.webp`,description:" ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_12:{image:`${sr}/ziriki_12.webp`,description:"   ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_13:{image:`${sr}/ziriki_13.webp`,description:"  ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_14:{image:`${sr}/ziriki_14.webp`,description:"10     ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_15:{image:`${sr}/ziriki_15.webp`,description:" hut()hat()  ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_16:{image:`${sr}/ziriki_16.webp`,description:"  ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_17:{image:`${sr}/ziriki_17.webp`,description:"   ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_18:{image:`${sr}/ziriki_18.webp`,description:"2006  ",url:"https://www.forest.ac.jp/facilities/self/"},ziriki_19:{image:`${sr}/ziriki_19.webp`,description:" Cobiki   ",url:"https://www.forest.ac.jp/facilities/self/midori-archi/"},ziriki_20:{image:`${sr}/ziriki_20.webp`,description:"2008",url:"https://www.forest.ac.jp/facilities/self/midori-archi/"},ziriki_21:{image:`${sr}/ziriki_21.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/jiriki-kodachi/"},ziriki_22:{image:`${sr}/ziriki_22.webp`,description:`2007
            
            
            `,url:"https://www.forest.ac.jp/facilities/self/jiriki-decchi/"},ziriki_23:{image:`${sr}/ziriki_23.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/jiriki-hotori/"},ziriki_24:{image:`${sr}/ziriki_24.webp`,description:"",url:"https://www.forest.ac.jp/facilities/self/shiori-jiriki2024/"},sinrinken:{image:`${sr}/no_image.webp`,description:"",url:"https://www.forest.rd.pref.gifu.lg.jp/"},gate_ensyurin:{image:`${sr}/gate_ensyurin.webp`,description:"",url:null},aozyutaki:{image:`${sr}/aozyutaki.webp`,description:"",url:null},azumaya_1:{image:`${sr}/azumaya_1.webp`,description:"",url:null},azumaya_kezikabora:{image:`${sr}/azumaya_kezikabora.webp`,description:"",url:null},gate_kokuyurin:{image:`${sr}/gate_kokuyurin.webp`,description:"",url:null},hebiotaki:{image:`${sr}/hebiotaki.webp`,description:"",url:null},heihuuiwa:{image:`${sr}/heihuuiwa.webp`,description:"",url:null},hirumesiiwa:{image:`${sr}/hirumesiiwa.webp`,description:"",url:null},kezikaboraike:{image:`${sr}/kezikaboraike.webp`,description:"",url:null},miharasiiwa:{image:`${sr}/miharasiiwa.webp`,description:"",url:null},mokudou:{image:`${sr}/mokudou.webp`,description:"",url:null},morinoiriguti:{image:`${sr}/morinoiriguti.webp`,description:"",url:null},nagamenoiwa:{image:`${sr}/nagamenoiwa.webp`,description:"",url:null},oosugi:{image:`${sr}/oosugi.webp`,description:"",url:null},sumiyakigoya:{image:`${sr}/sumiyakigoya.webp`,description:"",url:null},toilet:{image:`${sr}/toilet.webp`,description:"",url:null},umanoseiwa:{image:`${sr}/umanoseiwa.webp`,description:"",url:null},yamanokami:{image:`${sr}/yamanokami.webp`,description:"1004",url:"https://www.forest.ac.jp/academy-archives/jimu0423/"},kozyo_kanritou:{image:null,description:"",url:"https://mori-gakko.net/gifu/"}},Qd=4,kd=4,j0=4,Fl=new Int32Array(2),Rv=new Float32Array(Fl.buffer),Iv=new Float64Array(Fl.buffer),M1=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var zm;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(zm||(zm={}));class qo{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new qo(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return Fl[0]=this.readInt32(e),Rv[0]}readFloat64(e){return Fl[M1?0:1]=this.readInt32(e),Fl[M1?1:0]=this.readInt32(e+4),Iv[0]}writeInt8(e,r){this.bytes_[e]=r}writeUint8(e,r){this.bytes_[e]=r}writeInt16(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8}writeUint16(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8}writeInt32(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8,this.bytes_[e+2]=r>>16,this.bytes_[e+3]=r>>24}writeUint32(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8,this.bytes_[e+2]=r>>16,this.bytes_[e+3]=r>>24}writeInt64(e,r){this.writeInt32(e,Number(BigInt.asIntN(32,r))),this.writeInt32(e+4,Number(BigInt.asIntN(32,r>>BigInt(32))))}writeUint64(e,r){this.writeUint32(e,Number(BigInt.asUintN(32,r))),this.writeUint32(e+4,Number(BigInt.asUintN(32,r>>BigInt(32))))}writeFloat32(e,r){Rv[0]=r,this.writeInt32(e,Fl[0])}writeFloat64(e,r){Iv[0]=r,this.writeInt32(e,Fl[M1?0:1]),this.writeInt32(e+4,Fl[M1?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Qd+kd)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let r=0;r<kd;r++)e+=String.fromCharCode(this.readInt8(this.position_+Qd+r));return e}__offset(e,r){const a=e-this.readInt32(e);return r<this.readInt16(a)?this.readInt16(a+r):0}__union(e,r){return e.bb_pos=r+this.readInt32(r),e.bb=this,e}__string(e,r){e+=this.readInt32(e);const a=this.readInt32(e);e+=Qd;const l=this.bytes_.subarray(e,e+a);return r===zm.UTF8_BYTES?l:this.text_decoder_.decode(l)}__union_with_string(e,r){return typeof e=="string"?this.__string(r):this.__union(e,r)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Qd}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=kd)throw new Error("FlatBuffers: file identifier must be length "+kd);for(let r=0;r<kd;r++)if(e.charCodeAt(r)!=this.readInt8(this.position()+Qd+r))return!1;return!0}createScalarList(e,r){const a=[];for(let l=0;l<r;++l){const u=e(l);u!==null&&a.push(u)}return a}createObjList(e,r){const a=[];for(let l=0;l<r;++l){const u=e(l);u!==null&&a.push(u.unpack())}return a}}const A_=new Uint8Array(0);function NE(){return this._source.cancel()}function YE(t,e){if(!t.length)return e;if(!e.length)return t;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function PE(){var t=this,e=t._array.subarray(t._index);return t._source.read().then(function(r){return t._array=A_,t._index=0,r.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:YE(e,r.value)}})}function LE(t){if((t|=0)<0)throw new Error("invalid length");var e=this,r=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var a=new Uint8Array(t);return a.set(this._array.subarray(this._index)),function l(){return e._source.read().then(function(u){return u.done?(e._array=A_,e._index=0,r>0?a.subarray(0,r):null):r+u.value.length>=t?(e._array=u.value,e._index=t-r,a.set(u.value.subarray(0,t-r),r),a):(a.set(u.value,r),r+=u.value.length,l())})}()}function QE(t){return typeof t.slice=="function"?t:new Lp(typeof t.read=="function"?t:t.getReader())}function Lp(t){this._source=t,this._array=A_,this._index=0}Lp.prototype.read=PE;Lp.prototype.slice=LE;Lp.prototype.cancel=NE;var ai,Xn=((ai={})[ai.Byte=0]="Byte",ai[ai.UByte=1]="UByte",ai[ai.Bool=2]="Bool",ai[ai.Short=3]="Short",ai[ai.UShort=4]="UShort",ai[ai.Int=5]="Int",ai[ai.UInt=6]="UInt",ai[ai.Long=7]="Long",ai[ai.ULong=8]="ULong",ai[ai.Float=9]="Float",ai[ai.Double=10]="Double",ai[ai.String=11]="String",ai[ai.Json=12]="Json",ai[ai.DateTime=13]="DateTime",ai[ai.Binary=14]="Binary",ai);class Pn{constructor(){mr(this,"bb",null);mr(this,"bb_pos",0)}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsColumn(e,r){return(r||new Pn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsColumn(e,r){return e.setPosition(e.position()+j0),(r||new Pn).__init(e.readInt32(e.position())+e.position(),e)}name(e){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,e):null}type(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Xn.Byte}title(e){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__string(this.bb_pos+r,e):null}description(e){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__string(this.bb_pos+r,e):null}width(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}precision(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}scale(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}nullable(){let e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}unique(){let e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}primaryKey(){let e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}metadata(e){let r=this.bb.__offset(this.bb_pos,24);return r?this.bb.__string(this.bb_pos+r,e):null}static startColumn(e){e.startObject(11)}static addName(e,r){e.addFieldOffset(0,r,0)}static addType(e,r){e.addFieldInt8(1,r,Xn.Byte)}static addTitle(e,r){e.addFieldOffset(2,r,0)}static addDescription(e,r){e.addFieldOffset(3,r,0)}static addWidth(e,r){e.addFieldInt32(4,r,-1)}static addPrecision(e,r){e.addFieldInt32(5,r,-1)}static addScale(e,r){e.addFieldInt32(6,r,-1)}static addNullable(e,r){e.addFieldInt8(7,+r,1)}static addUnique(e,r){e.addFieldInt8(8,+r,0)}static addPrimaryKey(e,r){e.addFieldInt8(9,+r,0)}static addMetadata(e,r){e.addFieldOffset(10,r,0)}static endColumn(e){let r=e.endObject();return e.requiredField(r,4),r}static createColumn(e,r,a,l,u,h,s,y,x,C,I,U){return Pn.startColumn(e),Pn.addName(e,r),Pn.addType(e,a),Pn.addTitle(e,l),Pn.addDescription(e,u),Pn.addWidth(e,h),Pn.addPrecision(e,s),Pn.addScale(e,y),Pn.addNullable(e,x),Pn.addUnique(e,C),Pn.addPrimaryKey(e,I),Pn.addMetadata(e,U),Pn.endColumn(e)}}class ls{constructor(){mr(this,"bb",null);mr(this,"bb_pos",0)}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsCrs(e,r){return(r||new ls).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCrs(e,r){return e.setPosition(e.position()+j0),(r||new ls).__init(e.readInt32(e.position())+e.position(),e)}org(e){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,e):null}code(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__string(this.bb_pos+r,e):null}description(e){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__string(this.bb_pos+r,e):null}wkt(e){let r=this.bb.__offset(this.bb_pos,12);return r?this.bb.__string(this.bb_pos+r,e):null}codeString(e){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb_pos+r,e):null}static startCrs(e){e.startObject(6)}static addOrg(e,r){e.addFieldOffset(0,r,0)}static addCode(e,r){e.addFieldInt32(1,r,0)}static addName(e,r){e.addFieldOffset(2,r,0)}static addDescription(e,r){e.addFieldOffset(3,r,0)}static addWkt(e,r){e.addFieldOffset(4,r,0)}static addCodeString(e,r){e.addFieldOffset(5,r,0)}static endCrs(e){return e.endObject()}static createCrs(e,r,a,l,u,h,s){return ls.startCrs(e),ls.addOrg(e,r),ls.addCode(e,a),ls.addName(e,l),ls.addDescription(e,u),ls.addWkt(e,h),ls.addCodeString(e,s),ls.endCrs(e)}}var Vr,ia=((Vr={})[Vr.Unknown=0]="Unknown",Vr[Vr.Point=1]="Point",Vr[Vr.LineString=2]="LineString",Vr[Vr.Polygon=3]="Polygon",Vr[Vr.MultiPoint=4]="MultiPoint",Vr[Vr.MultiLineString=5]="MultiLineString",Vr[Vr.MultiPolygon=6]="MultiPolygon",Vr[Vr.GeometryCollection=7]="GeometryCollection",Vr[Vr.CircularString=8]="CircularString",Vr[Vr.CompoundCurve=9]="CompoundCurve",Vr[Vr.CurvePolygon=10]="CurvePolygon",Vr[Vr.MultiCurve=11]="MultiCurve",Vr[Vr.MultiSurface=12]="MultiSurface",Vr[Vr.Curve=13]="Curve",Vr[Vr.Surface=14]="Surface",Vr[Vr.PolyhedralSurface=15]="PolyhedralSurface",Vr[Vr.TIN=16]="TIN",Vr[Vr.Triangle=17]="Triangle",Vr);class $g{constructor(){mr(this,"bb",null);mr(this,"bb_pos",0)}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsHeader(e,r){return(r||new $g).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsHeader(e,r){return e.setPosition(e.position()+j0),(r||new $g).__init(e.readInt32(e.position())+e.position(),e)}name(e){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,e):null}envelope(e){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readFloat64(this.bb.__vector(this.bb_pos+r)+8*e):0}envelopeLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}envelopeArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}geometryType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):ia.Unknown}hasZ(){let e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasM(){let e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasT(){let e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasTm(){let e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}columns(e,r){let a=this.bb.__offset(this.bb_pos,18);return a?(r||new Pn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}featuresCount(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}indexNodeSize(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}crs(e){let r=this.bb.__offset(this.bb_pos,24);return r?(e||new ls).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}title(e){let r=this.bb.__offset(this.bb_pos,26);return r?this.bb.__string(this.bb_pos+r,e):null}description(e){let r=this.bb.__offset(this.bb_pos,28);return r?this.bb.__string(this.bb_pos+r,e):null}metadata(e){let r=this.bb.__offset(this.bb_pos,30);return r?this.bb.__string(this.bb_pos+r,e):null}static startHeader(e){e.startObject(14)}static addName(e,r){e.addFieldOffset(0,r,0)}static addEnvelope(e,r){e.addFieldOffset(1,r,0)}static createEnvelopeVector(e,r){e.startVector(8,r.length,8);for(let a=r.length-1;a>=0;a--)e.addFloat64(r[a]);return e.endVector()}static startEnvelopeVector(e,r){e.startVector(8,r,8)}static addGeometryType(e,r){e.addFieldInt8(2,r,ia.Unknown)}static addHasZ(e,r){e.addFieldInt8(3,+r,0)}static addHasM(e,r){e.addFieldInt8(4,+r,0)}static addHasT(e,r){e.addFieldInt8(5,+r,0)}static addHasTm(e,r){e.addFieldInt8(6,+r,0)}static addColumns(e,r){e.addFieldOffset(7,r,0)}static createColumnsVector(e,r){e.startVector(4,r.length,4);for(let a=r.length-1;a>=0;a--)e.addOffset(r[a]);return e.endVector()}static startColumnsVector(e,r){e.startVector(4,r,4)}static addFeaturesCount(e,r){e.addFieldInt64(8,r,BigInt("0"))}static addIndexNodeSize(e,r){e.addFieldInt16(9,r,16)}static addCrs(e,r){e.addFieldOffset(10,r,0)}static addTitle(e,r){e.addFieldOffset(11,r,0)}static addDescription(e,r){e.addFieldOffset(12,r,0)}static addMetadata(e,r){e.addFieldOffset(13,r,0)}static endHeader(e){return e.endObject()}static finishHeaderBuffer(e,r){e.finish(r)}static finishSizePrefixedHeaderBuffer(e,r){e.finish(r,void 0,!0)}}class ga{constructor(){mr(this,"bb",null);mr(this,"bb_pos",0)}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsGeometry(e,r){return(r||new ga).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGeometry(e,r){return e.setPosition(e.position()+j0),(r||new ga).__init(e.readInt32(e.position())+e.position(),e)}ends(e){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readUint32(this.bb.__vector(this.bb_pos+r)+4*e):0}endsLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}endsArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}xy(e){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readFloat64(this.bb.__vector(this.bb_pos+r)+8*e):0}xyLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}xyArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}z(e){let r=this.bb.__offset(this.bb_pos,8);return r?this.bb.readFloat64(this.bb.__vector(this.bb_pos+r)+8*e):0}zLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}zArray(){let e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}m(e){let r=this.bb.__offset(this.bb_pos,10);return r?this.bb.readFloat64(this.bb.__vector(this.bb_pos+r)+8*e):0}mLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}mArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}t(e){let r=this.bb.__offset(this.bb_pos,12);return r?this.bb.readFloat64(this.bb.__vector(this.bb_pos+r)+8*e):0}tLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}tArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}tm(e){let r=this.bb.__offset(this.bb_pos,14);return r?this.bb.readUint64(this.bb.__vector(this.bb_pos+r)+8*e):BigInt(0)}tmLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):ia.Unknown}parts(e,r){let a=this.bb.__offset(this.bb_pos,18);return a?(r||new ga).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a)+4*e),this.bb):null}partsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGeometry(e){e.startObject(8)}static addEnds(e,r){e.addFieldOffset(0,r,0)}static createEndsVector(e,r){e.startVector(4,r.length,4);for(let a=r.length-1;a>=0;a--)e.addInt32(r[a]);return e.endVector()}static startEndsVector(e,r){e.startVector(4,r,4)}static addXy(e,r){e.addFieldOffset(1,r,0)}static createXyVector(e,r){e.startVector(8,r.length,8);for(let a=r.length-1;a>=0;a--)e.addFloat64(r[a]);return e.endVector()}static startXyVector(e,r){e.startVector(8,r,8)}static addZ(e,r){e.addFieldOffset(2,r,0)}static createZVector(e,r){e.startVector(8,r.length,8);for(let a=r.length-1;a>=0;a--)e.addFloat64(r[a]);return e.endVector()}static startZVector(e,r){e.startVector(8,r,8)}static addM(e,r){e.addFieldOffset(3,r,0)}static createMVector(e,r){e.startVector(8,r.length,8);for(let a=r.length-1;a>=0;a--)e.addFloat64(r[a]);return e.endVector()}static startMVector(e,r){e.startVector(8,r,8)}static addT(e,r){e.addFieldOffset(4,r,0)}static createTVector(e,r){e.startVector(8,r.length,8);for(let a=r.length-1;a>=0;a--)e.addFloat64(r[a]);return e.endVector()}static startTVector(e,r){e.startVector(8,r,8)}static addTm(e,r){e.addFieldOffset(5,r,0)}static createTmVector(e,r){e.startVector(8,r.length,8);for(let a=r.length-1;a>=0;a--)e.addInt64(r[a]);return e.endVector()}static startTmVector(e,r){e.startVector(8,r,8)}static addType(e,r){e.addFieldInt8(6,r,ia.Unknown)}static addParts(e,r){e.addFieldOffset(7,r,0)}static createPartsVector(e,r){e.startVector(4,r.length,4);for(let a=r.length-1;a>=0;a--)e.addOffset(r[a]);return e.endVector()}static startPartsVector(e,r){e.startVector(4,r,4)}static endGeometry(e){return e.endObject()}static createGeometry(e,r,a,l,u,h,s,y,x){return ga.startGeometry(e),ga.addEnds(e,r),ga.addXy(e,a),ga.addZ(e,l),ga.addM(e,u),ga.addT(e,h),ga.addTm(e,s),ga.addType(e,y),ga.addParts(e,x),ga.endGeometry(e)}}class Ls{constructor(){mr(this,"bb",null);mr(this,"bb_pos",0)}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsFeature(e,r){return(r||new Ls).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFeature(e,r){return e.setPosition(e.position()+j0),(r||new Ls).__init(e.readInt32(e.position())+e.position(),e)}geometry(e){let r=this.bb.__offset(this.bb_pos,4);return r?(e||new ga).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}properties(e){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readUint8(this.bb.__vector(this.bb_pos+r)+e):0}propertiesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}propertiesArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}columns(e,r){let a=this.bb.__offset(this.bb_pos,8);return a?(r||new Pn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+a)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFeature(e){e.startObject(3)}static addGeometry(e,r){e.addFieldOffset(0,r,0)}static addProperties(e,r){e.addFieldOffset(1,r,0)}static createPropertiesVector(e,r){e.startVector(1,r.length,1);for(let a=r.length-1;a>=0;a--)e.addInt8(r[a]);return e.endVector()}static startPropertiesVector(e,r){e.startVector(1,r,1)}static addColumns(e,r){e.addFieldOffset(2,r,0)}static createColumnsVector(e,r){e.startVector(4,r.length,4);for(let a=r.length-1;a>=0;a--)e.addOffset(r[a]);return e.endVector()}static startColumnsVector(e,r){e.startVector(4,r,4)}static endFeature(e){return e.endObject()}static finishFeatureBuffer(e,r){e.finish(r)}static finishSizePrefixedFeatureBuffer(e,r){e.finish(r,void 0,!0)}static createFeature(e,r,a,l){return Ls.startFeature(e),Ls.addGeometry(e,r),Ls.addProperties(e,a),Ls.addColumns(e,l),Ls.endFeature(e)}}function c_(t){let e=$g.getRootAsHeader(t),r=e.featuresCount(),a=e.indexNodeSize(),l=[];for(let s=0;s<e.columnsLength();s++){let y=e.columns(s);if(!y)throw Error("Column unexpectedly missing");if(!y.name())throw Error("Column name unexpectedly missing");l.push({name:y.name(),type:y.type(),title:y.title(),description:y.description(),width:y.width(),precision:y.precision(),scale:y.scale(),nullable:y.nullable(),unique:y.unique(),primary_key:y.primaryKey()})}let u=e.crs(),h=u?{org:u.org(),code:u.code(),name:u.name(),description:u.description(),wkt:u.wkt(),code_string:u.codeString()}:null;return{geometryType:e.geometryType(),columns:l,envelope:null,featuresCount:Number(r),indexNodeSize:a,crs:h,title:e.title(),description:e.description(),metadata:e.metadata()}}const KA=new Uint8Array([102,103,98,3,102,103,98,0]),Vo=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zm=function(t,e){return Zm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},Zm(t,e)};function kE(t,e){Zm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Gh(t,e,r,a){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function s(C){try{x(a.next(C))}catch(I){h(I)}}function y(C){try{x(a.throw(C))}catch(I){h(I)}}function x(C){C.done?u(C.value):l(C.value).then(s,y)}x((a=a.apply(t,[])).next())})}function Vl(t,e){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,l,u,h;return h={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function s(x){return function(C){return y([x,C])}}function y(x){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,l=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){r.label=x[1];break}if(x[0]===6&&r.label<u[1]){r.label=u[1],u=x;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(x);break}u[2]&&r.ops.pop(),r.trys.pop();continue}x=e.call(t,r)}catch(C){x=[6,C],l=0}finally{a=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}function ou(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],a=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function S0(t){return this instanceof S0?(this.v=t,this):new S0(t)}function DE(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(t,e||[]),l,u=[];return l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l;function h(U){a[U]&&(l[U]=function(R){return new Promise(function(N,D){u.push([U,R,N,D])>1||s(U,R)})})}function s(U,R){try{y(a[U](R))}catch(N){I(u[0][3],N)}}function y(U){U.value instanceof S0?Promise.resolve(U.value.v).then(x,C):I(u[0][2],U)}function x(U){s("next",U)}function C(U){s("throw",U)}function I(U,R){U(R),u.shift(),u.length&&s(u[0][0],u[0][1])}}var Ix=function(t){kE(e,t);function e(r){var a=t.call(this,r)||this;return Object.defineProperty(a,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(a,a.constructor.prototype):a.__proto__=a.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(a,a.constructor),a}return e}(Error);(function(){function t(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(t.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},t})();(function(){function t(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(t.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},t})();(function(){function t(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(t.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},t})();function Hm(t){t!=null&&typeof t.then=="function"&&t.then(Jg,Jg)}var Q3=0,Uv=1,oc=2,qg=3,Om=4,Wg=1024,Jg=function(){};function Nh(t){var e=t.err,r=Promise.resolve(t.execution).then(function(a){if(e!=null)throw e;return a});return t.err=void 0,t.execution=r.then(function(){},function(){}),t.pending===void 0?r:t.pending.then(function(){return r})}function OA(t,e){var r=t.state>=qg;return Promise.resolve(e).then(function(a){return!r&&t.state>=Om?Nh(t).then(function(l){return{value:l,done:!0}}):{value:a,done:r}})}function h_(t,e){var r,a;if(!(t.state>=oc))if(t.state=oc,t.onnext(),t.onstop(),t.err==null&&(t.err=e),t.pushes.length===0&&(typeof t.buffer>"u"||t.buffer.empty))u0(t);else try{for(var l=ou(t.pushes),u=l.next();!u.done;u=l.next()){var h=u.value;h.resolve()}}catch(s){r={error:s}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}}function u0(t){var e,r;if(!(t.state>=qg)){t.state<oc&&h_(t),t.state=qg,t.buffer=void 0;try{for(var a=ou(t.nexts),l=a.next();!l.done;l=a.next()){var u=l.value,h=t.pending===void 0?Nh(t):t.pending.then(function(){return Nh(t)});u.resolve(OA(t,h))}}catch(s){e={error:s}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function Ev(t){t.state>=Om||(t.state<qg&&u0(t),t.state=Om)}function zE(t,e){if(Hm(e),t.pushes.length>=Wg)throw new Ix("No more than "+Wg+" pending calls to push are allowed on a single repeater.");if(t.state>=oc)return Promise.resolve(void 0);var r=t.pending===void 0?Promise.resolve(e):t.pending.then(function(){return e});r=r.catch(function(y){t.state<oc&&(t.err=y),Ev(t)});var a;if(t.nexts.length){var l=t.nexts.shift();l.resolve(OA(t,r)),t.nexts.length?a=Promise.resolve(t.nexts[0].value):typeof t.buffer<"u"&&!t.buffer.full?a=Promise.resolve(void 0):a=new Promise(function(y){return t.onnext=y})}else typeof t.buffer<"u"&&!t.buffer.full?(t.buffer.add(r),a=Promise.resolve(void 0)):a=new Promise(function(y){return t.pushes.push({resolve:y,value:r})});var u=!0,h={},s=a.catch(function(y){if(u)throw y});return h.then=function(y,x){return u=!1,Promise.prototype.then.call(a,y,x)},h.catch=function(y){return u=!1,Promise.prototype.catch.call(a,y)},h.finally=a.finally.bind(a),t.pending=r.then(function(){return s}).catch(function(y){t.err=y,Ev(t)}),h}function ZE(t){var e=h_.bind(null,t),r=new Promise(function(a){return t.onstop=a});return e.then=r.then.bind(r),e.catch=r.catch.bind(r),e.finally=r.finally.bind(r),e}function HE(t){if(!(t.state>=Uv)){t.state=Uv;var e=zE.bind(null,t),r=ZE(t);t.execution=new Promise(function(a){return a(t.executor(e,r))}),t.execution.catch(function(){return h_(t)})}}var R1=new WeakMap,K0=function(){function t(e,r){R1.set(this,{executor:e,buffer:r,err:void 0,state:Q3,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Jg,onstop:Jg})}return t.prototype.next=function(e){Hm(e);var r=R1.get(this);if(r===void 0)throw new Error("WeakMap error");if(r.nexts.length>=Wg)throw new Ix("No more than "+Wg+" pending calls to next are allowed on a single repeater.");if(r.state<=Q3&&HE(r),r.onnext(e),typeof r.buffer<"u"&&!r.buffer.empty){var a=OA(r,r.buffer.remove());if(r.pushes.length){var l=r.pushes.shift();r.buffer.add(l.value),r.onnext=l.resolve}return a}else if(r.pushes.length){var u=r.pushes.shift();return r.onnext=u.resolve,OA(r,u.value)}else if(r.state>=oc)return u0(r),OA(r,Nh(r));return new Promise(function(h){return r.nexts.push({resolve:h,value:e})})},t.prototype.return=function(e){Hm(e);var r=R1.get(this);if(r===void 0)throw new Error("WeakMap error");return u0(r),r.execution=Promise.resolve(r.execution).then(function(){return e}),OA(r,Nh(r))},t.prototype.throw=function(e){var r=R1.get(this);if(r===void 0)throw new Error("WeakMap error");return r.state<=Q3||r.state>=oc||typeof r.buffer<"u"&&!r.buffer.empty?(u0(r),r.err==null&&(r.err=e),OA(r,Nh(r))):this.next(Promise.reject(e))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=OE,t.merge=XE,t.zip=VE,t.latest=GE,t}();function Qp(t,e){var r,a,l=[],u=function(x){x!=null&&typeof x[Symbol.asyncIterator]=="function"?l.push(x[Symbol.asyncIterator]()):x!=null&&typeof x[Symbol.iterator]=="function"?l.push(x[Symbol.iterator]()):l.push(function(){return DE(this,arguments,function(){return Vl(this,function(U){switch(U.label){case 0:return e.yieldValues?[4,S0(x)]:[3,3];case 1:return[4,U.sent()];case 2:U.sent(),U.label=3;case 3:return e.returnValues?[4,S0(x)]:[3,5];case 4:return[2,U.sent()];case 5:return[2]}})})}())};try{for(var h=ou(t),s=h.next();!s.done;s=h.next()){var y=s.value;u(y)}}catch(x){r={error:x}}finally{try{s&&!s.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}return l}function OE(t){var e=this,r=Qp(t,{returnValues:!0});return new K0(function(a,l){return Gh(e,void 0,void 0,function(){var u,h,s,y,x,C;return Vl(this,function(I){switch(I.label){case 0:if(!r.length)return l(),[2];h=!1,l.then(function(){u(),h=!0}),I.label=1;case 1:I.trys.push([1,,5,7]),y=void 0,x=0,C=function(){var U,R,N,D,O,H;return Vl(this,function(W){switch(W.label){case 0:U=x;try{for(R=(O=void 0,ou(r)),N=R.next();!N.done;N=R.next())D=N.value,Promise.resolve(D.next()).then(function(se){se.done?(l(),s===void 0&&(s=se)):x===U&&(x++,u(se))},function(se){return l(se)})}catch(se){O={error:se}}finally{try{N&&!N.done&&(H=R.return)&&H.call(R)}finally{if(O)throw O.error}}return[4,new Promise(function(se){return u=se})];case 1:return y=W.sent(),y===void 0?[3,3]:[4,a(y.value)];case 2:W.sent(),W.label=3;case 3:return[2]}})},I.label=2;case 2:return h?[3,4]:[5,C()];case 3:return I.sent(),[3,2];case 4:return[2,s&&s.value];case 5:return l(),[4,Promise.race(r.map(function(U){return U.return&&U.return()}))];case 6:return I.sent(),[7];case 7:return[2]}})})})}function XE(t){var e=this,r=Qp(t,{yieldValues:!0});return new K0(function(a,l){return Gh(e,void 0,void 0,function(){var u,h,s,y=this;return Vl(this,function(x){switch(x.label){case 0:if(!r.length)return l(),[2];u=[],h=!1,l.then(function(){var C,I;h=!0;try{for(var U=ou(u),R=U.next();!R.done;R=U.next()){var N=R.value;N()}}catch(D){C={error:D}}finally{try{R&&!R.done&&(I=U.return)&&I.call(U)}finally{if(C)throw C.error}}}),x.label=1;case 1:return x.trys.push([1,,3,4]),[4,Promise.all(r.map(function(C,I){return Gh(y,void 0,void 0,function(){var U,R;return Vl(this,function(N){switch(N.label){case 0:N.trys.push([0,,6,9]),N.label=1;case 1:return h?[3,5]:(Promise.resolve(C.next()).then(function(D){return u[I](D)},function(D){return l(D)}),[4,new Promise(function(D){u[I]=D})]);case 2:return U=N.sent(),U===void 0?[3,4]:U.done?(s=U,[2]):[4,a(U.value)];case 3:N.sent(),N.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return R=C.return,R?[4,C.return()]:[3,8];case 7:R=N.sent(),N.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return x.sent(),[2,s&&s.value];case 3:return l(),[7];case 4:return[2]}})})})}function VE(t){var e=this,r=Qp(t,{returnValues:!0});return new K0(function(a,l){return Gh(e,void 0,void 0,function(){var u,h,s,y;return Vl(this,function(x){switch(x.label){case 0:if(!r.length)return l(),[2,[]];h=!1,l.then(function(){u(),h=!0}),x.label=1;case 1:x.trys.push([1,,6,8]),x.label=2;case 2:return h?[3,5]:(Promise.all(r.map(function(C){return C.next()})).then(function(C){return u(C)},function(C){return l(C)}),[4,new Promise(function(C){return u=C})]);case 3:return s=x.sent(),s===void 0?[2]:(y=s.map(function(C){return C.value}),s.some(function(C){return C.done})?[2,y]:[4,a(y)]);case 4:return x.sent(),[3,2];case 5:return[3,8];case 6:return l(),[4,Promise.all(r.map(function(C){return C.return&&C.return()}))];case 7:return x.sent(),[7];case 8:return[2]}})})})}function GE(t){var e=this,r=Qp(t,{yieldValues:!0,returnValues:!0});return new K0(function(a,l){return Gh(e,void 0,void 0,function(){var u,h,s,y,x,C=this;return Vl(this,function(I){switch(I.label){case 0:if(!r.length)return l(),[2,[]];h=[],s=!1,l.then(function(){var U,R;u();try{for(var N=ou(h),D=N.next();!D.done;D=N.next()){var O=D.value;O()}}catch(H){U={error:H}}finally{try{D&&!D.done&&(R=N.return)&&R.call(N)}finally{if(U)throw U.error}}s=!0}),I.label=1;case 1:return I.trys.push([1,,5,7]),Promise.all(r.map(function(U){return U.next()})).then(function(U){return u(U)},function(U){return l(U)}),[4,new Promise(function(U){return u=U})];case 2:return y=I.sent(),y===void 0?[2]:(x=y.map(function(U){return U.value}),y.every(function(U){return U.done})?[2,x]:[4,a(x.slice())]);case 3:return I.sent(),[4,Promise.all(r.map(function(U,R){return Gh(C,void 0,void 0,function(){var N;return Vl(this,function(D){switch(D.label){case 0:if(y[R].done)return[2,y[R].value];D.label=1;case 1:return s?[3,4]:(Promise.resolve(U.next()).then(function(O){return h[R](O)},function(O){return l(O)}),[4,new Promise(function(O){return h[R]=O})]);case 2:return N=D.sent(),N===void 0?[2,y[R].value]:N.done?[2,N.value]:(x[R]=N.value,[4,a(x.slice())]);case 3:return D.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,I.sent()];case 5:return l(),[4,Promise.all(r.map(function(U){return U.return&&U.return()}))];case 6:return I.sent(),[7];case 7:return[2]}})})})}var WA;let Ux=(WA=class{constructor(){mr(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(e){if(e<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}},mr(WA,"global",new WA),WA);const jE=40,KE=16;function u_(t,e){e=Math.min(Math.max(+e,2),65535);let r=t,a=r;do a+=r=Math.ceil(r/e);while(r!==1);return 40*a}function $E(t,e){if(e<2)throw Error("Node size must be at least 2");if(t===0)throw Error("Number of items must be greater than 0");let r=t,a=r,l=[r];do a+=r=Math.ceil(r/e),l.push(r);while(r!==1);let u=[];for(let s of(r=a,l))u.push(r-s),r-=s;let h=[];for(let s=0;s<l.length;s++)h.push([u[s],u[s]+l[s]]);return h}async function*qE(t,e,r,a){class l{constructor(R,N){mr(this,"_level");mr(this,"nodes");this._level=N,this.nodes=R}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(R){this.nodes[1]=R}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:u,minY:h,maxX:s,maxY:y}=r,x=$E(t,e),C=x[0][0],I=[new l([0,1],x.length-1)];for(;I.length!==0;){let U=I.shift(),R=U.startNodeIdx(),N=R>=C,D=(()=>{let[,W]=x[U.level()],se=Math.min(U.endNodeIdx()+e,W);return N&&se<W?se+1:se})(),O=D-R,H=new DataView(await a(40*R,40*O));for(let W=R;W<D;W++){let se=W-R,de=40*se;if(s<H.getFloat64(de+0,!0)||y<H.getFloat64(de+8,!0)||u>H.getFloat64(de+16,!0)||h>H.getFloat64(de+24,!0))continue;let le=H.getBigUint64(de+32,!0);if(N){let K=(()=>{if(W<t-1){let ce=(se+1)*40;return H.getBigUint64(ce+32,!0)-le}return null})(),oe=W-C;yield[Number(le),oe,Number(K)];continue}let he=Ux.global.extraRequestThreshold()/40,ae=I[I.length-1];if(ae!==void 0&&ae.level()===U.level()-1&&le<ae.endNodeIdx()+he){ae.extendEndNodeIdx(Number(le));continue}let V=(()=>{let K=U.level()-1;return new l([Number(le),Number(le)+1],K)})();ae!==void 0&&(ae.level(),V.level()),I.push(V)}}}class d_{constructor(e,r,a,l,u){mr(this,"headerClient");mr(this,"header");mr(this,"headerLength");mr(this,"indexLength");mr(this,"nocache");this.headerClient=e,this.header=r,this.headerLength=a,this.indexLength=l,this.nocache=u}static async open(e,r){let a,l=new Fv(e,r),u=2024+(()=>{let x,C=0;for(x=0;x<3;x++)C+=KE**x*jE;return C})();if(!new Uint8Array(await l.getRange(0,8,u,"header")).subarray(0,3).every((x,C)=>KA[C]===x))throw Error("Not a FlatGeobuf file");if((a=new DataView(await l.getRange(8,4,u,"header")).getUint32(0,!0))>10485760||a<8)throw Error("Invalid header size");let h=await l.getRange(12,a,u,"header"),s=c_(new qo(new Uint8Array(h))),y=u_(s.featuresCount,s.indexNodeSize);return new d_(l,s,a,y,r)}async*selectBbox(e){let r=this.lengthBeforeTree(),a=this.headerClient,l=async(y,x)=>a.getRange(r+y,x,0,"index"),u=[],h=[];for await(let y of qE(this.header.featuresCount,this.header.indexNodeSize,e,l)){let[x,C]=y,[,,I]=y;if(I||(I=4),h.length===0){h.push([x,I,C]);continue}let U=h[h.length-1];x-(U[0]+U[1])>Ux.global.extraRequestThreshold()&&(u.push(h),h=[]),h.push([x,I,C])}this.headerClient.logUsage("header+index"),h.length>0&&u.push(h);let s=u.flatMap(y=>this.readFeatureBatch(y,this.nocache));yield*K0.merge(s)}lengthBeforeTree(){return KA.length+Vo+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(e){return new Fv(this.headerClient.httpClient,e)}async*readFeatureBatch(e,r){let[a]=e[0],[l,u]=e[e.length-1],h=this.buildFeatureClient(r),s=l+u-a;for(let[y,,x]of e){let C=await this.readFeature(h,y,s);yield{id:x,feature:C},s=0}h.logUsage("feature")}async readFeature(e,r,a){let l,u=r+this.lengthBeforeFeatures();l=new DataView(await e.getRange(u,4,a,"feature length")).getUint32(0,!0);let h=new Uint8Array(await e.getRange(u+4,l,a,"feature data")),s=new Uint8Array(l+Vo);s.set(h,Vo);let y=new qo(s);return y.setPosition(Vo),Ls.getRootAsFeature(y)}}let Fv=class{constructor(e,r){mr(this,"httpClient");mr(this,"bytesEverUsed",0);mr(this,"bytesEverFetched",0);mr(this,"buffer",new ArrayBuffer(0));mr(this,"head",0);if(typeof e=="string")this.httpClient=new Tv(e,r);else if(e instanceof Tv)this.httpClient=e;else throw Error("Unknown source ")}async getRange(e,r,a,l){this.bytesEverUsed+=r;let u=e-this.head,h=u+r;if(u>=0&&h<=this.buffer.byteLength)return this.buffer.slice(u,h);let s=Math.max(r,a);return this.bytesEverFetched+=s,this.buffer=await this.httpClient.getRange(e,s,l),this.head=e,this.buffer.slice(0,r)}logUsage(e){e.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}};class Tv{constructor(e,r){mr(this,"url");mr(this,"nocache");mr(this,"requestsEverMade",0);mr(this,"bytesEverRequested",0);this.url=e,this.nocache=r}async getRange(e,r,a){this.requestsEverMade+=1,this.bytesEverRequested+=r;let l={Range:`bytes=${e}-${e+r-1}`};return this.nocache&&(l["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:l})).arrayBuffer()}}function k3(t,e){let r=[];for(let a=0;a<t.length;a+=2){let l=[t[a],t[a+1]];e&&l.push(e[a>>1]),r.push(l)}return r}new TextEncoder;let Sv=new TextDecoder;function WE(t,e){let r={};if(!e||e.length===0)return r;let a=t.propertiesArray();if(!a)return r;let l=new DataView(a.buffer,a.byteOffset),u=t.propertiesLength(),h=0;for(;h<u;){let s=l.getUint16(h,!0);h+=2;let y=e[s],x=y.name;switch(y.type){case Xn.Bool:r[x]=!!l.getUint8(h),h+=1;break;case Xn.Byte:r[x]=l.getInt8(h),h+=1;break;case Xn.UByte:r[x]=l.getUint8(h),h+=1;break;case Xn.Short:r[x]=l.getInt16(h,!0),h+=2;break;case Xn.UShort:r[x]=l.getUint16(h,!0),h+=2;break;case Xn.Int:r[x]=l.getInt32(h,!0),h+=4;break;case Xn.UInt:r[x]=l.getUint32(h,!0),h+=4;break;case Xn.Long:r[x]=Number(l.getBigInt64(h,!0)),h+=8;break;case Xn.ULong:r[x]=Number(l.getBigUint64(h,!0)),h+=8;break;case Xn.Float:r[x]=l.getFloat32(h,!0),h+=4;break;case Xn.Double:r[x]=l.getFloat64(h,!0),h+=8;break;case Xn.DateTime:case Xn.String:{let C=l.getUint32(h,!0);h+=4,r[x]=Sv.decode(a.subarray(h,h+C)),h+=C;break}case Xn.Json:{let C=l.getUint32(h,!0);h+=4;let I=Sv.decode(a.subarray(h,h+C));r[x]=JSON.parse(I),h+=C;break}case Xn.Binary:{let C=l.getUint32(h,!0);h+=4,r[x]=a.subarray(h,h+C),h+=C;break}default:throw Error(`Unknown type ${y.type}`)}}return r}function JE(t,e,r){if(!t.subarray(0,3).every((C,I)=>KA[I]===C))throw Error("Not a FlatGeobuf file");let a=new qo(t),l=a.readUint32(KA.length);a.setPosition(KA.length+Vo);let u=c_(a),h=KA.length+Vo+l,{indexNodeSize:s,featuresCount:y}=u;s>0&&(h+=u_(y,s));let x=[];for(;h<a.capacity();){let C=a.readUint32(h);a.setPosition(h+Vo);let I=Ls.getRootAsFeature(a);x.push(e(x.length,I,u)),h+=Vo+C}return x}async function*eF(t,e,r){let a,l=QE(t),u=async R=>await l.slice(R),h=new Uint8Array(await u(8));if(!h.subarray(0,3).every((R,N)=>KA[N]===R))throw Error("Not a FlatGeobuf file");h=new Uint8Array(await u(4));let s=new qo(h),y=s.readUint32(0);h=new Uint8Array(await u(y));let x=c_(s=new qo(h)),{indexNodeSize:C,featuresCount:I}=x;if(C>0){let R=u_(I,C);await u(R)}let U=0;for(;a=await rF(u,x,e,U++);)yield a}async function*tF(t,e,r,a,l=!1){let u=await d_.open(t,l);for await(let h of u.selectBbox(e))yield r(h.id,h.feature,u.header)}async function rF(t,e,r,a){let l=new Uint8Array(await t(4,"feature length"));if(l.byteLength===0)return;let u=new qo(l),h=u.readUint32(0);l=new Uint8Array(await t(h,"feature data"));let s=new Uint8Array(h+4);return s.set(l,4),(u=new qo(s)).setPosition(Vo),r(a,Ls.getRootAsFeature(u),e)}const iF={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Ex=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||iF[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const $0=6378137,Ih=Math.PI*$0,nF=[-Ih,-Ih,Ih,Ih],aF=[-180,-85,180,85],I1=$0*Math.log(Math.tan(Math.PI/2));class uh extends Ex{constructor(e){super({code:e,units:"m",extent:nF,global:!0,worldExtent:aF,getPointResolution:function(r,a){return r/Math.cosh(a[1]/$0)}})}}const Nv=[new uh("EPSG:3857"),new uh("EPSG:102100"),new uh("EPSG:102113"),new uh("EPSG:900913"),new uh("http://www.opengis.net/def/crs/EPSG/0/3857"),new uh("http://www.opengis.net/gml/srs/epsg.xml#3857")];function sF(t,e,r,a){const l=t.length;r=r>1?r:2,a=a??r,e===void 0&&(r>2?e=t.slice():e=new Array(l));for(let u=0;u<l;u+=a){e[u]=Ih*t[u]/180;let h=$0*Math.log(Math.tan(Math.PI*(+t[u+1]+90)/360));h>I1?h=I1:h<-I1&&(h=-I1),e[u+1]=h}return e}function oF(t,e,r,a){const l=t.length;r=r>1?r:2,a=a??r,e===void 0&&(r>2?e=t.slice():e=new Array(l));for(let u=0;u<l;u+=a)e[u]=180*t[u]/Ih,e[u+1]=360*Math.atan(Math.exp(t[u+1]/$0))/Math.PI-90;return e}const lF=6378137,Yv=[-180,-90,180,90],AF=Math.PI*lF/180;class DA extends Ex{constructor(e,r){super({code:e,units:"degrees",extent:Yv,axisOrientation:r,global:!0,metersPerUnit:AF,worldExtent:Yv})}}const Pv=[new DA("CRS:84"),new DA("EPSG:4326","neu"),new DA("urn:ogc:def:crs:OGC:1.3:CRS84"),new DA("urn:ogc:def:crs:OGC:2:84"),new DA("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new DA("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new DA("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let D3={};function ep(t,e,r){const a=t.getCode(),l=e.getCode();a in D3||(D3[a]={}),D3[a][l]=r}function Fx(t,e){if(e!==void 0){for(let r=0,a=t.length;r<a;++r)e[r]=t[r];e=e}else e=t.slice();return e}function cF(t){t.getCode(),ep(t,t,Fx)}function hF(t){t.forEach(cF)}function Lv(t){hF(t),t.forEach(function(e){t.forEach(function(r){e!==r&&ep(e,r,Fx)})})}function uF(t,e,r,a){t.forEach(function(l){e.forEach(function(u){ep(l,u,r),ep(u,l,a)})})}function dF(){Lv(Nv),Lv(Pv),uF(Pv,Nv,sF,oF)}dF();function Xm(t,e){let r=e;if(r===ia.Unknown&&(r=t.type()),r===ia.GeometryCollection){let l=[];for(let u=0;u<t.partsLength();u++){let h=t.parts(u),s=h.type();l.push(Xm(h,s))}return{type:ia[r],geometries:l}}if(r===ia.MultiPolygon){let l=[];for(let u=0;u<t.partsLength();u++)l.push(Xm(t.parts(u),ia.Polygon));return{type:ia[r],coordinates:l.map(u=>u.coordinates)}}let a=function(l,u){let h=l.xyArray(),s=l.zArray();switch(u){case ia.Point:{let y=Array.from(h);return s&&y.push(s[0]),y}case ia.MultiPoint:case ia.LineString:return k3(h,s);case ia.MultiLineString:case ia.Polygon:return function(y,x,C){let I;if(!C||C.length===0)return[k3(y,x)];let U=0,R=Array.from(C).map(N=>y.slice(U,U=N<<1));return x&&(U=0,I=Array.from(C).map(N=>x.slice(U,U=N))),R.map((N,D)=>k3(N,I?I[D]:void 0))}(h,s,l.endsArray())}}(t,r);return{type:ia[r],coordinates:a}}function f_(t,e,r){let a=r.columns;return{type:"Feature",id:t,geometry:Xm(e.geometry(),r.geometryType),properties:WE(e,a)}}function fF(t,e){return{type:"FeatureCollection",features:JE(t,f_)}}function gF(t,e){return eF(t,f_)}function pF(t,e,r,a=!1){return tF(t,e,f_,r,a)}function Tx(t,e,r,a=!1){return t instanceof Uint8Array?fF(t):t instanceof ReadableStream?gF(t):pF(t,e,r,a)}const Vm=async(t,e)=>{try{const r=await fetch(t),a=Tx(r.body),l={type:"FeatureCollection",features:[]};for await(const u of a)l.features.push(u);return l}catch(r){throw console.error(r),new Error("Failed to fetch GeoJSON")}},mF=(t,e)=>{const{properties:r,id:a,layer:l}=t;return{point:e,properties:r,featureId:a,layerId:l.id}};class zl{static set(e,r){this.cache.set(e,r)}static get(e){return this.cache.get(e)}static remove(e){this.cache.delete(e)}static clear(){this.cache.clear()}static has(e){return this.cache.has(e)}static keys(){return this.cache.keys()}}mr(zl,"cache",new Map);F0.subscribe(t=>{for(const e of zl.keys())t.includes(e)||zl.remove(e)});const _F=async t=>{try{const e=await t.text(),r=JSON.parse(e);if(r.type!=="FeatureCollection"||!Array.isArray(r.features))throw new Error("Invalid GeoJSON structure");return r}catch(e){throw console.error("GeoJSON parsing error:",e),new Error("Failed to parse GeoJSON file")}};let d0=null;const g_=new Worker(new URL(""+new URL("../workers/worker-Re_ZkM3K.js",import.meta.url).href,import.meta.url),{type:"module"});g_.onmessage=async t=>{const{imageBitmap:e,id:r}=t.data;d0&&!d0.hasImage(r)&&d0.addImage(r,e,{pixelRatio:2})};g_.onerror=t=>{console.error("Worker error:",t)};const bF=async t=>{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch image");const r=await e.blob();return await createImageBitmap(r)},Sx=async(t,e)=>{if(!e)return;d0=e;const r=t.id;if(!d0.hasImage(r))try{const a=Kg[r].image;if(!a)return;const l=await bF(a);g_.postMessage({id:r,image:l})}catch(a){console.error(`Error processing image for id ${r}:`,a)}};class f0{static set(e,r){this.cache.set(e,r)}static get(e){return this.cache.get(e)}static remove(e){this.cache.delete(e)}static clear(){this.cache.clear()}static has(e){return this.cache.has(e)}static keys(){return this.cache.keys()}}mr(f0,"cache",new Map);const yF={v:{type:"vector",minzoom:4,maxzoom:16,tiles:["https://cyberjapandata.gsi.go.jp/xyz/optimal_bvmap-v1/{z}/{x}/{y}.pbf"],attribution:""}},vF=[{id:"25000",minzoom:11,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1221],layout:{"line-cap":"square"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[4,1,1,5],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":1.5}},{id:"25000",minzoom:11,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1212],layout:{"line-cap":"square"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[6,2,1,2,1,2],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":1.5}},{id:"25000",type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1211],layout:{"line-cap":"round"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[7,5,.1,5],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":["interpolate",["linear"],["zoom"],8,1,9,2.5]}},{id:"",maxzoom:8,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1212],layout:{"line-cap":"square"},paint:{"line-color":"rgba(68,0,128,1)","line-dasharray":[7,5,.1,5],"line-opacity":["interpolate",["linear"],["zoom"],5,0,6,1],"line-width":1}},{id:"",maxzoom:8,type:"line",source:"v","source-layer":"AdmBdry",filter:["==",["get","vt_code"],1221],layout:{"line-cap":"square"},paint:{"line-color":"rgba(34,24,21,1)","line-width":1}},{id:"point",type:"symbol",source:"v","source-layer":"WRltLine",filter:["==",["geometry-type"],"Point"],layout:{"icon-allow-overlap":!0,"icon-image":"","icon-size":1.2,"icon-rotate":["get","vt_angle"],"icon-rotation-alignment":"map"}},{id:"",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]],layout:{"icon-allow-overlap":!0,"icon-image":["match",["get","vt_code"],2901,"-20",2903,"-20",2904,"-20",7701,"-20",""],"icon-size":["let","size",["match",["get","vt_code"],7701,.7,.5],["interpolate",["linear"],["zoom"],15,["var","size"],17,["*",2,["var","size"]]]],"symbol-sort-key":["match",["get","vt_code"],2901,88,2903,50,2904,49,7701,111,0],"text-allow-overlap":!1,"text-font":["Noto Sans JP Light"],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],2901,10,7701,12,8],["interpolate",["linear"],["zoom"],15,["var","size"],17,["*",2,["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100},paint:{"text-color":["match",["get","vt_code"],7701,"rgba(0,0,0,1)","rgba(255,255,255,1)"]}},{id:"100",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["==",["get","vt_arrng"],2]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["==",["get","vt_arrng"],2]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["==",["get","vt_arrng"],2]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"",1,["","",""],2,3],1302,["match",["get","vt_text"],"",4,5],1303,["match",["get","vt_text"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,521,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["var","size"],11,["match",["get","vt_code"],[1401,1402,1403],20,422,["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["var","size"],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["vertical"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"100",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[313,353,361,413,423,522,523,533,534,611,612,613,615,671,673,681,720,860,870,882,883,884,886,887,888,890,899,7104]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"",1,["","",""],2,3],1302,["match",["get","vt_text"],"",4,5],1303,["match",["get","vt_text"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,521,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["var","size"],11,["match",["get","vt_code"],[1401,1402,1403],20,422,["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["var","size"],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["horizontal"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"LineString"],["!",["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]],16,["all",["==",["geometry-type"],"LineString"],["in",["get","vt_flag17"],["literal",[0,1]]],["!",["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]],17,["all",["==",["geometry-type"],"LineString"],["in",["get","vt_flag17"],["literal",[1,2]]],["!",["in",["get","vt_code"],["literal",[2901,2903,2904,7701]]]]]],layout:{"icon-allow-overlap":!1,"symbol-placement":"line-center","text-pitch-alignment":"viewport","text-rotation-alignment":"map","symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"",1,["","",""],2,3],1302,["match",["get","vt_text"],"",4,5],1303,["match",["get","vt_text"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,521,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["var","size"],11,["match",["get","vt_code"],[1401,1402,1403],20,[422,531],["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["var","size"],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-radial-offset":.5,"text-variable-anchor":["center"],"text-writing-mode":["horizontal","vertical"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"100",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["!=",["get","vt_text"],""],["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["==",["get","vt_arrng"],2]],16,["all",["!=",["get","vt_text"],""],["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["==",["get","vt_arrng"],2]],17,["all",["!=",["get","vt_text"],""],["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["==",["get","vt_arrng"],2]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"",1,["","",""],2,3],1302,["match",["get","vt_text"],"",4,5],1303,["match",["get","vt_text"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,521,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["match",["get","vt_code"],[343,352],["*",.9,["var","size"]],["var","size"]],11,["match",["get","vt_code"],[1401,1402,1403],20,[422,531],["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["match",["get","vt_code"],[412],["*",1.3,["var","size"]],["var","size"]],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["vertical"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}},{id:"100",type:"symbol",source:"v","source-layer":"Anno",filter:["step",["zoom"],["all",["==",["geometry-type"],"Point"],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],16,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[0,1]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]],17,["all",["==",["geometry-type"],"Point"],["in",["get","vt_flag17"],["literal",[1,2]]],["in",["get","vt_code"],["literal",[110,120,130,140,210,220,311,312,314,315,316,321,322,323,331,332,333,334,341,342,343,344,345,346,347,348,351,352,411,412,421,422,431,432,441,511,521,531,532,634,651,800,810,820,822,830,831,832,840,841,842,843,850,880,881,885,889,2943,2944]]],["any",["==",["get","vt_arrng"],1],["!",["has","vt_arrng"]]]]],layout:{"symbol-sort-key":["match",["get","vt_code"],110,17,120,31,130,19,140,8,150,176,210,37,212,182,220,72,311,11,312,20,313,148,314,15,315,21,316,30,321,23,322,22,323,52,331,50,332,51,333,10,334,42,341,28,342,41,343,49,344,12,345,48,346,38,347,47,348,14,351,9,352,["match",["get","vt_text"],"",6,40],353,147,361,175,411,32,412,86,413,145,421,33,422,74,423,146,431,64,432,84,441,63,511,85,521,76,522,130,523,108,531,95,532,80,533,106,534,115,611,100,612,131,613,101,614,183,615,104,621,36,623,184,631,69,632,70,633,71,634,93,641,185,642,186,651,94,652,187,653,127,654,188,661,128,662,129,671,118,672,189,673,137,681,119,710,190,720,155,730,191,800,35,810,29,820,24,822,78,830,55,831,57,832,77,833,192,840,44,841,43,842,58,843,59,850,39,860,117,870,116,880,98,881,99,882,123,883,134,884,125,885,68,886,121,887,132,888,138,889,97,890,158,899,160,999,193,1301,["match",["get","vt_text"],"",1,["","",""],2,3],1302,["match",["get","vt_text"],"",4,5],1303,["match",["get","vt_text"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],6,7],1401,16,1402,25,1403,26,2901,92,2902,177,2903,54,2904,53,2941,34,2942,91,2943,87,2944,88,2945,46,3200,178,3201,107,3202,102,3203,103,3204,157,3205,18,3206,27,3211,135,3212,79,3213,89,3214,90,3215,159,3216,139,3217,136,3218,133,3221,75,3231,153,3232,154,3241,96,3242,124,3243,120,3244,122,3261,126,4101,143,4102,141,4103,142,4104,149,4105,151,5801,60,6301,144,6311,161,6312,162,6313,163,6314,164,6321,165,6322,166,6323,167,6324,168,6325,169,6326,170,6327,171,6331,56,6332,150,6341,81,6342,140,6351,109,6361,67,6362,105,6367,65,6368,66,6371,62,6373,83,6375,61,6376,73,6381,82,7101,112,7102,110,7103,113,7104,172,7105,179,7106,180,7107,194,7108,195,7111,196,7121,197,7122,198,7131,199,7188,181,7201,45,7202,200,7211,201,7212,202,7221,13,7288,203,7299,204,7601,173,7621,174,7711,114,8103,152,8105,156,0],"text-allow-overlap":!1,"text-anchor":["match",["get","vt_code"],[431,532,533,720],"top-left",[2941,2942,2943,2944,2945],"left",["case",["==",["get","arrng"],2],["case",["==",["get","vt_dsppos"],"LT"],"top-right",["==",["get","vt_dsppos"],"CT"],"right",["==",["get","vt_dsppos"],"RT"],"bottom-right",["==",["get","vt_dsppos"],"LC"],"top",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"bottom",["==",["get","vt_dsppos"],"LB"],"top-left",["==",["get","vt_dsppos"],"CB"],"left",["==",["get","vt_dsppos"],"RB"],"bottom-left","center"],["case",["==",["get","vt_dsppos"],"LT"],"top-left",["==",["get","vt_dsppos"],"CT"],"top",["==",["get","vt_dsppos"],"RT"],"top-right",["==",["get","vt_dsppos"],"LC"],"left",["==",["get","vt_dsppos"],"CC"],"center",["==",["get","vt_dsppos"],"RC"],"right",["==",["get","vt_dsppos"],"LB"],"bottom-left",["==",["get","vt_dsppos"],"CB"],"bottom",["==",["get","vt_dsppos"],"RB"],"bottom-right","center"]]],"text-font":["match",["get","vt_code"],[321,322,341,342,344,345,347,820,840,841,842],["literal",["Noto Sans JP Light"]],["literal",["Noto Sans JP Light"]]],"text-justify":"auto","text-size":["let","size",["match",["get","vt_code"],[361,1403,7101,7102,7103,7201,7221],10,[334,730],11,[312,313,314,315,316,322,323,332,342,353,412,521,533,621,631,632,633,634,653,654,720,999,2941,2942,2943,2944,2945],12,[343,1402,7711],13,[311,346,347,413,422,1303],14,[210,220,321,331,352,411,421,423,431,432,441,511,522,523,531,532,534,611,612,613,615,651,661,662,671,672,673,681,1302],15,[130,1301,1401],16,[140,333,351],18,[110,120,341,344,345],20,[348,800,810,820,822,830,831,832,833,840,841,842,843,850,860,870,880,881,882,883,884,885,886,887,888,889,890,899],24,10],["interpolate",["linear"],["zoom"],4,["*",.6,["var","size"]],8,["match",["get","vt_code"],[343,352],["*",.9,["var","size"]],["var","size"]],11,["match",["get","vt_code"],[1401,1402,1403],20,[422,531],["*",.7,["var","size"]],["var","size"]],12,["var","size"],14,["match",["get","vt_code"],[412],["*",1.3,["var","size"]],["var","size"]],17,["match",["get","vt_code"],[412,422],["*",2,["var","size"]],["var","size"]]]],"text-field":["get","vt_text"],"text-max-width":100,"text-writing-mode":["horizontal"]},paint:{"text-color":["match",["get","vt_code"],521,"rgba(0,0,255,1)",348,"rgba(175,74,24,1)",[411,412,413,421,422,423,431,432,441,860,2941,2942,2943,2944,2945],"rgba(19,97,69,1)",[7372,7711],"rgba(20,90,255,1)",7352,"rgba(200, 160, 60,1)",[2901,2903,2904],"rgba(255,255,255,1)",[321,322,341,344,345,820,840,841],"rgba(60,50,181,1)",220,"rgba(80,80,80,1)",312,"rgba(81,29,10,1)",[333,346],"rgba(96,25,134,1)",[511,522,523,531,532,534,611,612,613,614,615,621,623,631,632,633,634,641,642,651,652,653,654,661,662,671,672,673,681,720,730,870,880,881,882,883,884,885,886,887,888,889,890,899,999,3201,3202,3203,3204,3205,3206,3211,3212,3213,3214,3215,3216,3217,3218,3221,3231,3232,3241,3242,3243,3244],"rgba(50,50,50,1)","rgba(0,0,0,1)"],"text-halo-color":"rgba(255,255,255,1)","text-halo-width":1}}],Nx={sources:yF,layers:vF},xF=()=>Nx.sources,wF=()=>Nx.layers.filter(t=>t.type==="symbol");function bg(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function BF(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Yx(t){let e,r,a;t.length!==2?(e=bg,r=(s,y)=>bg(t(s),y),a=(s,y)=>t(s)-y):(e=t===bg||t===BF?t:CF,r=t,a=t);function l(s,y,x=0,C=s.length){if(x<C){if(e(y,y)!==0)return C;do{const I=x+C>>>1;r(s[I],y)<0?x=I+1:C=I}while(x<C)}return x}function u(s,y,x=0,C=s.length){if(x<C){if(e(y,y)!==0)return C;do{const I=x+C>>>1;r(s[I],y)<=0?x=I+1:C=I}while(x<C)}return x}function h(s,y,x=0,C=s.length){const I=l(s,y,x,C-1);return I>x&&a(s[I-1],y)>-a(s[I],y)?I-1:I}return{left:l,center:h,right:u}}function CF(){return 0}function MF(t){return t===null?NaN:+t}const RF=Yx(bg),IF=RF.right;Yx(MF).center;const UF=Math.sqrt(50),EF=Math.sqrt(10),FF=Math.sqrt(2);function tp(t,e,r){const a=(e-t)/Math.max(0,r),l=Math.floor(Math.log10(a)),u=a/Math.pow(10,l),h=u>=UF?10:u>=EF?5:u>=FF?2:1;let s,y,x;return l<0?(x=Math.pow(10,-l)/h,s=Math.round(t*x),y=Math.round(e*x),s/x<t&&++s,y/x>e&&--y,x=-x):(x=Math.pow(10,l)*h,s=Math.round(t/x),y=Math.round(e/x),s*x<t&&++s,y*x>e&&--y),y<s&&.5<=r&&r<2?tp(t,e,r*2):[s,y,x]}function TF(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const a=e<t,[l,u,h]=a?tp(e,t,r):tp(t,e,r);if(!(u>=l))return[];const s=u-l+1,y=new Array(s);if(a)if(h<0)for(let x=0;x<s;++x)y[x]=(u-x)/-h;else for(let x=0;x<s;++x)y[x]=(u-x)*h;else if(h<0)for(let x=0;x<s;++x)y[x]=(l+x)/-h;else for(let x=0;x<s;++x)y[x]=(l+x)*h;return y}function Gm(t,e,r){return e=+e,t=+t,r=+r,tp(t,e,r)[2]}function SF(t,e,r){e=+e,t=+t,r=+r;const a=e<t,l=a?Gm(e,t,r):Gm(t,e,r);return(a?-1:1)*(l<0?1/-l:l)}function NF(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function p_(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Px(t,e){var r=Object.create(t.prototype);for(var a in e)r[a]=e[a];return r}function q0(){}var N0=.7,rp=1/N0,Yh="\\s*([+-]?\\d+)\\s*",Y0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",go="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YF=/^#([0-9a-f]{3,8})$/,PF=new RegExp(`^rgb\\(${Yh},${Yh},${Yh}\\)$`),LF=new RegExp(`^rgb\\(${go},${go},${go}\\)$`),QF=new RegExp(`^rgba\\(${Yh},${Yh},${Yh},${Y0}\\)$`),kF=new RegExp(`^rgba\\(${go},${go},${go},${Y0}\\)$`),DF=new RegExp(`^hsl\\(${Y0},${go},${go}\\)$`),zF=new RegExp(`^hsla\\(${Y0},${go},${go},${Y0}\\)$`),Qv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p_(q0,jh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kv,formatHex:kv,formatHex8:ZF,formatHsl:HF,formatRgb:Dv,toString:Dv});function kv(){return this.rgb().formatHex()}function ZF(){return this.rgb().formatHex8()}function HF(){return Lx(this).formatHsl()}function Dv(){return this.rgb().formatRgb()}function jh(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=YF.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?zv(e):r===3?new Ma(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?U1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?U1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=PF.exec(t))?new Ma(e[1],e[2],e[3],1):(e=LF.exec(t))?new Ma(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QF.exec(t))?U1(e[1],e[2],e[3],e[4]):(e=kF.exec(t))?U1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=DF.exec(t))?Ov(e[1],e[2]/100,e[3]/100,1):(e=zF.exec(t))?Ov(e[1],e[2]/100,e[3]/100,e[4]):Qv.hasOwnProperty(t)?zv(Qv[t]):t==="transparent"?new Ma(NaN,NaN,NaN,0):null}function zv(t){return new Ma(t>>16&255,t>>8&255,t&255,1)}function U1(t,e,r,a){return a<=0&&(t=e=r=NaN),new Ma(t,e,r,a)}function OF(t){return t instanceof q0||(t=jh(t)),t?(t=t.rgb(),new Ma(t.r,t.g,t.b,t.opacity)):new Ma}function jm(t,e,r,a){return arguments.length===1?OF(t):new Ma(t,e,r,a??1)}function Ma(t,e,r,a){this.r=+t,this.g=+e,this.b=+r,this.opacity=+a}p_(Ma,jm,Px(q0,{brighter(t){return t=t==null?rp:Math.pow(rp,t),new Ma(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?N0:Math.pow(N0,t),new Ma(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ma(ec(this.r),ec(this.g),ec(this.b),ip(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zv,formatHex:Zv,formatHex8:XF,formatRgb:Hv,toString:Hv}));function Zv(){return`#${$A(this.r)}${$A(this.g)}${$A(this.b)}`}function XF(){return`#${$A(this.r)}${$A(this.g)}${$A(this.b)}${$A((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hv(){const t=ip(this.opacity);return`${t===1?"rgb(":"rgba("}${ec(this.r)}, ${ec(this.g)}, ${ec(this.b)}${t===1?")":`, ${t})`}`}function ip(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ec(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $A(t){return t=ec(t),(t<16?"0":"")+t.toString(16)}function Ov(t,e,r,a){return a<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ks(t,e,r,a)}function Lx(t){if(t instanceof ks)return new ks(t.h,t.s,t.l,t.opacity);if(t instanceof q0||(t=jh(t)),!t)return new ks;if(t instanceof ks)return t;t=t.rgb();var e=t.r/255,r=t.g/255,a=t.b/255,l=Math.min(e,r,a),u=Math.max(e,r,a),h=NaN,s=u-l,y=(u+l)/2;return s?(e===u?h=(r-a)/s+(r<a)*6:r===u?h=(a-e)/s+2:h=(e-r)/s+4,s/=y<.5?u+l:2-u-l,h*=60):s=y>0&&y<1?0:h,new ks(h,s,y,t.opacity)}function VF(t,e,r,a){return arguments.length===1?Lx(t):new ks(t,e,r,a??1)}function ks(t,e,r,a){this.h=+t,this.s=+e,this.l=+r,this.opacity=+a}p_(ks,VF,Px(q0,{brighter(t){return t=t==null?rp:Math.pow(rp,t),new ks(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?N0:Math.pow(N0,t),new ks(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*e,l=2*r-a;return new Ma(z3(t>=240?t-240:t+120,l,a),z3(t,l,a),z3(t<120?t+240:t-120,l,a),this.opacity)},clamp(){return new ks(Xv(this.h),E1(this.s),E1(this.l),ip(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ip(this.opacity);return`${t===1?"hsl(":"hsla("}${Xv(this.h)}, ${E1(this.s)*100}%, ${E1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Xv(t){return t=(t||0)%360,t<0?t+360:t}function E1(t){return Math.max(0,Math.min(1,t||0))}function z3(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const m_=t=>()=>t;function GF(t,e){return function(r){return t+r*e}}function jF(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(a){return Math.pow(t+a*e,r)}}function KF(t){return(t=+t)==1?Qx:function(e,r){return r-e?jF(e,r,t):m_(isNaN(e)?r:e)}}function Qx(t,e){var r=e-t;return r?GF(t,r):m_(isNaN(t)?e:t)}const Km=function t(e){var r=KF(e);function a(l,u){var h=r((l=jm(l)).r,(u=jm(u)).r),s=r(l.g,u.g),y=r(l.b,u.b),x=Qx(l.opacity,u.opacity);return function(C){return l.r=h(C),l.g=s(C),l.b=y(C),l.opacity=x(C),l+""}}return a.gamma=t,a}(1);function $F(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,a=e.slice(),l;return function(u){for(l=0;l<r;++l)a[l]=t[l]*(1-u)+e[l]*u;return a}}function qF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function WF(t,e){var r=e?e.length:0,a=t?Math.min(r,t.length):0,l=new Array(a),u=new Array(r),h;for(h=0;h<a;++h)l[h]=__(t[h],e[h]);for(;h<r;++h)u[h]=e[h];return function(s){for(h=0;h<a;++h)u[h]=l[h](s);return u}}function JF(t,e){var r=new Date;return t=+t,e=+e,function(a){return r.setTime(t*(1-a)+e*a),r}}function np(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function eT(t,e){var r={},a={},l;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(l in e)l in t?r[l]=__(t[l],e[l]):a[l]=e[l];return function(u){for(l in r)a[l]=r[l](u);return a}}var $m=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z3=new RegExp($m.source,"g");function tT(t){return function(){return t}}function rT(t){return function(e){return t(e)+""}}function iT(t,e){var r=$m.lastIndex=Z3.lastIndex=0,a,l,u,h=-1,s=[],y=[];for(t=t+"",e=e+"";(a=$m.exec(t))&&(l=Z3.exec(e));)(u=l.index)>r&&(u=e.slice(r,u),s[h]?s[h]+=u:s[++h]=u),(a=a[0])===(l=l[0])?s[h]?s[h]+=l:s[++h]=l:(s[++h]=null,y.push({i:h,x:np(a,l)})),r=Z3.lastIndex;return r<e.length&&(u=e.slice(r),s[h]?s[h]+=u:s[++h]=u),s.length<2?y[0]?rT(y[0].x):tT(e):(e=y.length,function(x){for(var C=0,I;C<e;++C)s[(I=y[C]).i]=I.x(x);return s.join("")})}function __(t,e){var r=typeof e,a;return e==null||r==="boolean"?m_(e):(r==="number"?np:r==="string"?(a=jh(e))?(e=a,Km):iT:e instanceof jh?Km:e instanceof Date?JF:qF(e)?$F:Array.isArray(e)?WF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?eT:np)(t,e)}function nT(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function aT(t){return function(){return t}}function sT(t){return+t}var Vv=[0,1];function Uh(t){return t}function qm(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:aT(isNaN(e)?NaN:.5)}function oT(t,e){var r;return t>e&&(r=t,t=e,e=r),function(a){return Math.max(t,Math.min(e,a))}}function lT(t,e,r){var a=t[0],l=t[1],u=e[0],h=e[1];return l<a?(a=qm(l,a),u=r(h,u)):(a=qm(a,l),u=r(u,h)),function(s){return u(a(s))}}function AT(t,e,r){var a=Math.min(t.length,e.length)-1,l=new Array(a),u=new Array(a),h=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++h<a;)l[h]=qm(t[h],t[h+1]),u[h]=r(e[h],e[h+1]);return function(s){var y=IF(t,s,1,a)-1;return u[y](l[y](s))}}function cT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function hT(){var t=Vv,e=Vv,r=__,a,l,u,h=Uh,s,y,x;function C(){var U=Math.min(t.length,e.length);return h!==Uh&&(h=oT(t[0],t[U-1])),s=U>2?AT:lT,y=x=null,I}function I(U){return U==null||isNaN(U=+U)?u:(y||(y=s(t.map(a),e,r)))(a(h(U)))}return I.invert=function(U){return h(l((x||(x=s(e,t.map(a),np)))(U)))},I.domain=function(U){return arguments.length?(t=Array.from(U,sT),C()):t.slice()},I.range=function(U){return arguments.length?(e=Array.from(U),C()):e.slice()},I.rangeRound=function(U){return e=Array.from(U),r=nT,C()},I.clamp=function(U){return arguments.length?(h=U?!0:Uh,C()):h!==Uh},I.interpolate=function(U){return arguments.length?(r=U,C()):r},I.unknown=function(U){return arguments.length?(u=U,I):u},function(U,R){return a=U,l=R,C()}}function uT(){return hT()(Uh,Uh)}function dT(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ap(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,a=t.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+t.slice(r+1)]}function Kh(t){return t=ap(Math.abs(t)),t?t[1]:NaN}function fT(t,e){return function(r,a){for(var l=r.length,u=[],h=0,s=t[0],y=0;l>0&&s>0&&(y+s+1>a&&(s=Math.max(1,a-y)),u.push(r.substring(l-=s,l+s)),!((y+=s+1)>a));)s=t[h=(h+1)%t.length];return u.reverse().join(e)}}function gT(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var pT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sp(t){if(!(e=pT.exec(t)))throw new Error("invalid format: "+t);var e;return new b_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}sp.prototype=b_.prototype;function b_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}b_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mT(t){e:for(var e=t.length,r=1,a=-1,l;r<e;++r)switch(t[r]){case".":a=l=r;break;case"0":a===0&&(a=r),l=r;break;default:if(!+t[r])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(l+1):t}var kx;function _T(t,e){var r=ap(t,e);if(!r)return t+"";var a=r[0],l=r[1],u=l-(kx=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,h=a.length;return u===h?a:u>h?a+new Array(u-h+1).join("0"):u>0?a.slice(0,u)+"."+a.slice(u):"0."+new Array(1-u).join("0")+ap(t,Math.max(0,e+u-1))[0]}function Gv(t,e){var r=ap(t,e);if(!r)return t+"";var a=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const jv={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:dT,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Gv(t*100,e),r:Gv,s:_T,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Kv(t){return t}var $v=Array.prototype.map,qv=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bT(t){var e=t.grouping===void 0||t.thousands===void 0?Kv:fT($v.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",l=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?Kv:gT($v.call(t.numerals,String)),h=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",y=t.nan===void 0?"NaN":t.nan+"";function x(I){I=sp(I);var U=I.fill,R=I.align,N=I.sign,D=I.symbol,O=I.zero,H=I.width,W=I.comma,se=I.precision,de=I.trim,le=I.type;le==="n"?(W=!0,le="g"):jv[le]||(se===void 0&&(se=12),de=!0,le="g"),(O||U==="0"&&R==="=")&&(O=!0,U="0",R="=");var he=D==="$"?r:D==="#"&&/[boxX]/.test(le)?"0"+le.toLowerCase():"",ae=D==="$"?a:/[%p]/.test(le)?h:"",V=jv[le],K=/[defgprs%]/.test(le);se=se===void 0?6:/[gprs]/.test(le)?Math.max(1,Math.min(21,se)):Math.max(0,Math.min(20,se));function oe(ce){var ye=he,we=ae,Ve,ut,nt;if(le==="c")we=V(ce)+we,ce="";else{ce=+ce;var rt=ce<0||1/ce<0;if(ce=isNaN(ce)?y:V(Math.abs(ce),se),de&&(ce=mT(ce)),rt&&+ce==0&&N!=="+"&&(rt=!1),ye=(rt?N==="("?N:s:N==="-"||N==="("?"":N)+ye,we=(le==="s"?qv[8+kx/3]:"")+we+(rt&&N==="("?")":""),K){for(Ve=-1,ut=ce.length;++Ve<ut;)if(nt=ce.charCodeAt(Ve),48>nt||nt>57){we=(nt===46?l+ce.slice(Ve+1):ce.slice(Ve))+we,ce=ce.slice(0,Ve);break}}}W&&!O&&(ce=e(ce,1/0));var ft=ye.length+ce.length+we.length,_t=ft<H?new Array(H-ft+1).join(U):"";switch(W&&O&&(ce=e(_t+ce,_t.length?H-we.length:1/0),_t=""),R){case"<":ce=ye+ce+we+_t;break;case"=":ce=ye+_t+ce+we;break;case"^":ce=_t.slice(0,ft=_t.length>>1)+ye+ce+we+_t.slice(ft);break;default:ce=_t+ye+ce+we;break}return u(ce)}return oe.toString=function(){return I+""},oe}function C(I,U){var R=x((I=sp(I),I.type="f",I)),N=Math.max(-8,Math.min(8,Math.floor(Kh(U)/3)))*3,D=Math.pow(10,-N),O=qv[8+N/3];return function(H){return R(D*H)+O}}return{format:x,formatPrefix:C}}var F1,Dx,zx;yT({thousands:",",grouping:[3],currency:["$",""]});function yT(t){return F1=bT(t),Dx=F1.format,zx=F1.formatPrefix,F1}function vT(t){return Math.max(0,-Kh(Math.abs(t)))}function xT(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kh(e)/3)))*3-Kh(Math.abs(t)))}function wT(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Kh(e)-Kh(t))+1}function BT(t,e,r,a){var l=SF(t,e,r),u;switch(a=sp(a??",f"),a.type){case"s":{var h=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(u=xT(l,h))&&(a.precision=u),zx(a,h)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(u=wT(l,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=u-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(u=vT(l))&&(a.precision=u-(a.type==="%")*2);break}}return Dx(a)}function CT(t){var e=t.domain;return t.ticks=function(r){var a=e();return TF(a[0],a[a.length-1],r??10)},t.tickFormat=function(r,a){var l=e();return BT(l[0],l[l.length-1],r??10,a)},t.nice=function(r){r==null&&(r=10);var a=e(),l=0,u=a.length-1,h=a[l],s=a[u],y,x,C=10;for(s<h&&(x=h,h=s,s=x,x=l,l=u,u=x);C-- >0;){if(x=Gm(h,s,r),x===y)return a[l]=h,a[u]=s,e(a);if(x>0)h=Math.floor(h/x)*x,s=Math.ceil(s/x)*x;else if(x<0)h=Math.ceil(h*x)/x,s=Math.floor(s*x)/x;else break;y=x}return t},t}function Wm(){var t=uT();return t.copy=function(){return cT(t,Wm())},NF.apply(t,arguments),CT(t)}const kp=t=>{const{range:e,divisions:r}=t;if(r<=0)throw console.warn("divisions  0 "),new Error("divisions must be greater than 0");const a=Wm().domain(e).nice().ticks(r),l=t.values[0],u=t.values[1],h=Wm().domain([e[0],e[1]]).interpolate(Km).range([l,u]),s=a.map(y=>{const x=h(y);return jh(x).formatHex()});return{categories:a,values:s}},Zx=Ip.map(t=>t.id),MT=t=>{if(!Zx.includes(t))throw new Error(`Invalid ID: ${t}`)};gC.forEach(t=>{try{MT(t)}catch(e){e instanceof Error&&(console.warn(`id: ${t}`),console.warn("id: ",Zx.join(", ")),console.error(e.message))}});const RT={"fill-opacity":.4,"fill-color":ru,"fill-outline-color":"#ffffff"},IT={"line-color":ru,"line-opacity":1,"line-width":5},UT={"circle-color":ru,"circle-radius":10,"circle-stroke-width":5,"circle-stroke-color":"#ffffff"},ET={"text-color":ru,"text-halo-color":"#FFFFFF","text-halo-width":10,"text-opacity":1},FT=t=>{if(!t)return;const e=t.layerEntry,{format:r,style:a,metaData:l,properties:u,interaction:h,type:s}=e;if(e.type==="raster")return;const y=`@highlight_${e.id}`,x=`${e.id}_source`,C={id:y,source:x,maxzoom:24,minzoom:0};let I;if(s==="vector"){if((r.type==="mvt"||r.type==="pmtiles")&&"sourceLayer"in l&&(C["source-layer"]=l.sourceLayer),I=Ox(C,a),!I)return;switch(I.type){case"fill":I.paint=RT;break;case"line":I.paint=IT;break;case"circle":I.paint=UT;break;case"symbol":I.paint=ET;break}I.filter=["==",["id"],t.featureId]}return I},TT=t=>{const r=["match",["get",t.key]],{categories:a,values:l}=t.mapping;if(a.length!==l.length)return console.warn(""),"#ff0000";for(let u=0;u<a.length;u++)r.push(a[u],l[u]);return r.push("#00000000"),r},ST=t=>{const e=t.key,r=["step",["case",["==",["get",e],null],-9999,["!=",["to-number",["get",e],-9999],-9999],["to-number",["get",e],-9999],-9999]],{categories:a,values:l}=kp(t.mapping);return a.length!==l.length?(console.warn(""),"#ff0000"):(r.push("#00000000"),a.forEach((u,h)=>{r.push(u,l[h])}),r)},Dp=t=>{const e=t.key,r=t.expressions.find(a=>a.key===e);if(!r)return console.warn(`: ${e}`),"#ff0000";switch(r.type){case"single":return r.mapping.value;case"match":return TT(r);case"step":return ST(r);default:return console.warn(`: ${e}`),"#ff0000"}},NT=t=>{const r=["match",["get",t.key]],{categories:a,values:l}=t.mapping;if(a.length!==l.length)return console.warn(""),0;for(let u=0;u<a.length;u++)r.push(a[u],l[u]);return r.push(0),r},YT=t=>{const e=t.key,r=["step",["case",["==",["get",e],null],-9999,["!=",["to-number",["get",e],-9999],-9999],["to-number",["get",e],-9999],-9999]],{categories:a,values:l}=kp(t.mapping);return a.length!==l.length?(console.warn(""),0):(r.push(0),a.forEach((u,h)=>{r.push(u,l[h])}),r)},PT=t=>{const{key:e,mapping:r}=t,[a,l]=r.range,[u,h]=r.values;return["interpolate",["linear"],["get",e],a,u,l,h]},Hx=t=>{const e=t.key,r=t.expressions.find(a=>a.key===e);if(!r)return console.warn(`: ${e}`),0;switch(r.type){case"single":return r.mapping.value;case"match":return NT(r);case"linear":return PT(r);case"step":return YT(r);default:return console.warn(`: ${e}`),0}},y_=t=>["case",["boolean",["feature-state","selected"],!1],ru,t],LT=t=>["case",["boolean",["feature-state","selected"],!1],.8,t],QT=(t,e)=>{const r=e.default,a=Dp(e.colors),l=y_(a),u=LT(e.opacity);return{...t,type:"fill",paint:{"fill-opacity":u,"fill-outline-color":"#00000000","fill-color":e.colors.show?l:"#00000000",...r&&r.fill?r.fill.paint:{}},layout:{...r&&r.fill?r.fill.layout:{}}}},kT=(t,e)=>{const r=e.default,a=Dp(e.colors),l=y_(a),u=Hx(e.width);return{...t,type:"line",paint:{"line-opacity":e.colors.show?e.opacity:0,"line-color":e.colors.show?l:"#00000000","line-width":u,...e.lineStyle==="dashed"&&{"line-dasharray":[2,2]},...r&&r.line?r.line.paint:{}},layout:{...r&&r.line?r.line.layout:{}}}},DT=(t,e,r)=>({...t,id:`${t.id}_outline`,type:"line",paint:{"line-color":e.color,"line-width":e.width,"line-opacity":r,...e.lineStyle==="dashed"&&{"line-dasharray":[2,2]}}}),zT=(t,e)=>{const r=e.outline,a=e.default,l=Dp(e.colors),u=y_(l),h=Hx(e.radius);return{...t,type:"circle",paint:{"circle-opacity":e.colors.show?e.opacity:0,"circle-stroke-opacity":e.opacity,"circle-color":e.colors.show?u:"#00000000","circle-radius":h,"circle-stroke-color":r.show?e.outline.color:"#00000000","circle-stroke-width":r.show?e.outline.width:0,...a&&a.circle?a.circle.paint:{}},layout:{...a&&a.circle?a.circle.layout:{}}}},ZT=(t,e)=>{var h;const r=e.default,a=Dp(e.colors),l=e.labels.key;return{...t,id:`${t.id}`,type:"symbol",paint:{"text-opacity":e.opacity,"icon-opacity":e.opacity,"text-color":a,"text-halo-color":"#FFFFFF","text-halo-width":2,...r&&r.symbol?r.symbol.paint:{}},layout:{"text-field":((h=e.labels.expressions.find(s=>s.key===l))==null?void 0:h.value)??"","text-size":12,"text-max-width":12,"text-font":["Noto Sans JP Light"],...r&&r.symbol?r.symbol.layout:{}}}},HT=(t,e)=>{var x,C;const r=e.default,a=e.labels.key,l=e.labels.show,u=((x=e.labels.expressions.find(I=>I.key===a))==null?void 0:x.value)??"",h={"text-opacity":1,"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":2},s={"text-field":u,"text-size":12,"text-max-width":12,"text-font":["Noto Sans JP Light"]};return{...t,id:`${t.id}`,type:"symbol",paint:{...l?h:{},...l&&r&&r.symbol?r.symbol.paint:{},"icon-opacity":e.opacity},layout:{...l?s:{},...l&&r&&r.symbol?r.symbol.layout:{},"icon-image":["get","_prop_id"],"icon-size":((C=e.icon)==null?void 0:C.size)??.1,"icon-anchor":"bottom"}}},OT=(t,e)=>{var u;const r=e.default,a=e.labels.key;return{...t,id:`${t.id}_label`,type:"symbol",paint:{"text-opacity":1,"icon-opacity":1,"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":2,...r?r.symbol.paint:{}},layout:{"text-field":((u=e.labels.expressions.find(h=>h.key===a))==null?void 0:u.value)??"","text-size":12,"text-max-width":12,"text-font":["Noto Sans JP Light"],...r?r.symbol.layout:{}}}},Ox=(t,e)=>{var r;switch(e.type){case"fill":return QT(t,e);case"line":return kT(t,e);case"circle":switch(e.markerType){case"icon":return(r=e.icon)!=null&&r.show?HT(t,e):void 0;case"circle":return zT(t,e);default:console.warn(` style.markerType: ${e.markerType} layer.id: ${t.id}`);return}case"symbol":return ZT(t,e);default:console.warn(`style.type: ${t.id}`);return}},Xx=t=>{const e=[],r=[],a=[],l=[];f0.clear(),t.filter(h=>h.style.visible).reverse().forEach(h=>{var D;const s=`${h.id}`,y=`${h.id}_source`,{format:x,style:C,metaData:I,interaction:U,type:R}=h,N={id:s,source:y,maxzoom:24,minzoom:0,metadata:{name:I.name,location:I.location}};switch(R){case"raster":{U.clickable&&l.push(s),C.type==="basemap"?e.push({...N,type:"raster",paint:{"raster-opacity":C.opacity,"raster-hue-rotate":C.hueRotate,"raster-brightness-max":C.brightnessMax,"raster-brightness-min":C.brightnessMin,"raster-saturation":C.saturation,"raster-contrast":C.contrast,...C.raster.paint??{}},layout:{...C.raster.layout??{}}}):C.type==="categorical"?e.push({...N,type:"raster",paint:{"raster-opacity":C.opacity,...C.raster.paint??{}},layout:{...C.raster.layout??{}}}):C.type==="dem"&&e.push({...N,type:"raster",paint:{"raster-opacity":C.opacity,...C.raster.paint??{}},layout:{...C.raster.layout??{}}});break}case"vector":{U.clickable&&(a.push(s),"sourceLayer"in I?f0.set(s,{source:y,sourceLayer:I.sourceLayer}):f0.set(s,{source:y})),(x.type==="mvt"||x.type==="pmtiles")&&"sourceLayer"in I&&(N["source-layer"]=I.sourceLayer);const O=Ox(N,C);if(O&&e.push(O),C.type==="fill"&&C.outline.show){const H=DT(N,C.outline,C.opacity);e.push(H)}if(C.labels.show&&!(C.type==="circle"&&C.markerType==="icon"&&((D=C.icon)!=null&&D.show))){const H=OT(N,C);r.push(H)}break}default:console.warn(`type: ${s}`);break}}),K5.set(a),pC.set(l);const u=$o(T0)?wF():[];return[...e,...u,...r]},XT=[{key:"",name:"",url:"https://www.forest.ac.jp/"},{key:"",name:"",url:"https://maps.gsi.go.jp/development/ichiran.html"},{key:"",name:"",url:"https://www.forest.rd.pref.gifu.lg.jp/index.html"},{key:"",name:"",url:"https://map.ecoris.info/#contents"},{key:"",name:"",url:"https://gbank.gsj.jp/seamless/index.html?lang=ja&"},{key:"Q",name:"Q",url:"https://info.qchizu.xyz/qchizu/reprint/"},{key:"OSM",name:"&copy; OpenStreetMap contributors",url:"http://osm.org/copyright"},{key:"Esri",name:"Sources: Esri, HERE, Garmin, USGS, Intermap, INCREMENT P, NRCan, Esri Japan, METI, Esri China (Hong Kong), Esri Korea, Esri (Thailand), NGCC,  OpenStreetMap contributors, and the GIS User Community",url:""},{key:"",name:"",url:"https://www.owl-sys.com/"},{key:"",name:"",url:"https://www.rinya.maff.go.jp/index.html"},{key:"",name:"",url:"https://portal.data.metro.tokyo.lg.jp/"}],VT=new Map(XT.map(t=>[t.key,t])),GT=t=>t.includes("{-y}")?"tms":"xyz",Vx=async t=>{const e=await Promise.all(t.map(async(h,s)=>{const y={},x=`${h.id}_source`,{metaData:C,format:I,type:U,style:R}=h;switch(U){case"raster":{I.type==="image"?R.type==="dem"?y[x]={type:"raster",tiles:[`webgl://${I.url}?x={x}&y={y}&z={z}`],maxzoom:C.maxZoom,minzoom:C.minZoom,tileSize:C.tileSize,attribution:C.attribution,bounds:C.bounds??[-180,-85.051129,180,85.051129]}:y[x]={type:"raster",tiles:[I.url],maxzoom:C.maxZoom,minzoom:C.minZoom,scheme:GT(I.url),tileSize:C.tileSize,attribution:C.attribution,bounds:C.bounds??[-180,-85.051129,180,85.051129]}:I.type==="pmtiles"&&(y[x]={type:"raster",url:`pmtiles://${I.url}`,maxzoom:C.maxZoom,minzoom:"minZoom"in C?C.minZoom:void 0,tileSize:C.tileSize,attribution:C.attribution,bounds:C.bounds??[-180,-85.051129,180,85.051129]});break}case"vector":{if(I.type==="geojson"||I.type==="fgb"){let N="";zl.has(h.id)?N=zl.get(h.id):I.type==="fgb"?(N=await Vm(I.url),zl.set(h.id,N)):I.type==="geojson"&&(N=I.url),y[x]={type:"geojson",data:N,generateId:!0,maxzoom:C.maxZoom,attribution:C.attribution}}else I.type==="mvt"?y[x]={type:"vector",tiles:[I.url],maxzoom:C.maxZoom,minzoom:"minZoom"in C?C.minZoom:void 0,promoteId:"promoteId"in C?C.promoteId:void 0,attribution:C.attribution,bounds:C.bounds??[-180,-85.051129,180,85.051129]}:I.type==="pmtiles"&&(y[x]={type:"vector",url:`pmtiles://${I.url}`,maxzoom:C.maxZoom,minzoom:"minZoom"in C?C.minZoom:void 0,promoteId:"promoteId"in C?C.promoteId:void 0,attribution:C.attribution,bounds:C.bounds??[-180,-85.051129,180,85.051129]});break}default:console.warn(`Unknown layer: ${x}`);break}return{index:s,items:y}})),r=new Set,a=e.sort((h,s)=>h.index-s.index).map(h=>{const s=Object.keys(h.items)[0],x=h.items[s].attribution;return r.add(x),h.items}),l=Object.assign({},...a);r.size>0&&$5.set(Array.from(r));const u=$o(T0)?xF():{};return{...l,...u}},jT=(t,e,r)=>{e()&&(sc.add(e().id,re(r)),e(null))};var KT=dt("<div><!></div>"),$T=dt('<a class="hover:text-accent transition-text flex w-full items-center justify-start gap-2 p-2 duration-150" target="_blank" rel="noopener noreferrer"><!> <span></span></a>'),qT=(t,e)=>e(null),WT=dt('<div class="bg-main absolute inset-0 flex h-full w-full grow"><div class="bg-main flex w-[400px] flex-col gap-2 p-2 text-base"><div> </div> <div> </div> <!> <div> </div> <!></div> <div class="absolute h-full w-full"><div class="pointer-events-none absolute bottom-0 z-10 flex w-full items-center justify-center gap-4 p-4"><button class="c-btn-confirm pointer-events-auto px-6 text-lg"></button> <button class="c-btn-cancel pointer-events-auto px-4 text-lg"></button></div></div></div>');function JT(t,e){fr(e,!0);let r=xr(e,"showDataEntry",15),a=er(null),l=bi(()=>{if(r()){if(r().type==="raster")return"";if(r().type==="vector")return""}}),u=bi(()=>{if(r()){if(r().type==="raster")return"raster";if(r().type==="vector"){if(r().format.geometryType==="Label")return"label";if(r().format.geometryType==="Point")return"point";if(r().format.geometryType==="LineString")return"line";if(r().format.geometryType==="Polygon")return"polygon"}}});const h=async oe=>{const ce=await Vx(oe),ye=await Xx(oe);return{version:8,glyphs:W5,sources:{mierune_mono:{type:"raster",tiles:["https://tile.mierune.co.jp/mierune_mono/{z}/{x}/{y}.png"],tileSize:256,minzoom:0,maxzoom:18,attribution:'<a href="https://mierune.co.jp">MIERUNE Inc.</a> <a href="https://www.openmaptiles.org/" target="_blank">&copy; OpenMapTiles</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'},...ce},layers:[{id:"mierune_mono_layer",source:"mierune_mono",type:"raster"},{id:"@overlay_layer",type:"background",paint:{"background-color":"#000000","background-opacity":.8}},...ye]}};let s=null;In(()=>{Dn(()=>{r()&&(async()=>{if(s=new Fp.Map({container:re(a),style:await h([r()]),...q5,pitch:0,bearing:0}),s.on("styleimagemissing",oe=>Sx(oe,s)),r().format.type==="fgb")try{const oe=zl.get(r().id);if(!oe)return;const ce=jg(oe);s.fitBounds(ce,{bearing:s.getBearing(),padding:100,duration:0})}catch(oe){console.error(oe)}else if(r().metaData.bounds)s.fitBounds(r().metaData.bounds,{bearing:s.getBearing(),padding:100,duration:0});else if(r().metaData.location){const oe=Rx(r().metaData.location);oe&&s.fitBounds(oe,{bearing:s.getBearing(),padding:100,duration:0})}else console.warn("",r().id)})()})}),tu(()=>{s&&(s.remove(),s=null)});const y=oe=>{oe.key==="Escape"&&r(null)},x=oe=>{const ce=/(https?:\/\/[^\s\]>,]+)/g,we=oe.replace(ce,Ve=>`<a href="${Ve}" target="_blank" rel="noopener noreferrer">${Ve}</a>`).replace(/\n/g,"<br>");return FE.sanitize(we,{ALLOWED_TAGS:["a","br"],ALLOWED_ATTR:["href","target","rel"]})};var C=WT();Ln("keydown",cC,y);var I=Pe(C),U=Pe(I),R=Pe(U,!0);Fe(U);var N=Ze(U,2),D=Pe(N,!0);Fe(N);var O=Ze(N,2);{var H=oe=>{var ce=KT(),ye=Pe(ce);r8(ye,()=>{var we;return x((we=r())==null?void 0:we.metaData.description)},!1,!1),Fe(ce),Xe(oe,ce)};Ut(O,oe=>{r()&&oe(H)})}var W=Ze(O,2),se=Pe(W,!0);Fe(W);var de=Ze(W,2);{var le=oe=>{var ce=$T(),ye=Pe(ce);br(ye,{icon:"el:download",class:"h-8 w-8"}),Ki(2),Fe(ce),hr(()=>{var we;return Mn(ce,"href",(we=r())==null?void 0:we.metaData.downloadUrl)}),Xe(oe,ce)};Ut(de,oe=>{var ce;(ce=r())!=null&&ce.metaData.downloadUrl&&oe(le)})}Fe(I);var he=Ze(I,2),ae=Pe(he),V=Pe(ae);V.__click=[jT,r,u];var K=Ze(V,2);K.__click=[qT,r],Fe(ae),Fe(he),Ga(he,oe=>ht(a,oe),()=>re(a)),Fe(C),hr(()=>{var oe,ce;_r(R,(oe=r())==null?void 0:oe.metaData.name),_r(D,(ce=r())==null?void 0:ce.metaData.location),_r(se,re(l))}),Ri(3,C,()=>js,()=>({duration:200,y:100,opacity:0})),Xe(t,C),gr()}qi(["click"]);var eS=(t,e)=>ht(e,""),tS=dt('<div class="absolute left-1/2 top-1/2 flex h-full w-full -translate-x-1/2 -translate-y-1/2 items-center justify-center"><span class="text-gray-500"></span></div>'),rS=dt('<div><div class="bg-main relative flex h-full w-full flex-col overflow-hidden rounded-lg p-2"><div class="flex grow items-center justify-between gap-4 p-2"><span class="shrink-0 text-base text-lg"></span> <div class="bg-base flex w-full max-w-[400px] rounded-full border-[1px] px-4"><input class="c-search-form tex grid w-full text-left text-gray-500 svelte-1uyzqp7" type="text" placeholder=""> <button class="grid cursor-pointer place-items-center"><!></button></div> <button class="bg-base cursor-pointer rounded-full p-2"><!></button></div> <div class="c-scroll relative h-full w-full grow overflow-y-auto overflow-x-hidden"><div class="css-grid h-full svelte-1uyzqp7"><!> <!></div></div> <!></div></div>');function Wv(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(zs,"$showDataMenu",r);let u=$n([...Ip]),h=er($n([])),s=er(""),y=er(null);Dn(()=>{re(s)?ht(h,u.filter(oe=>oe.metaData.name.toLowerCase().includes(re(s).toLowerCase())),!0):ht(h,u,!0)});const x=()=>{zs.set(!zs)};var C=rS(),I=Pe(C),U=Pe(I),R=Ze(Pe(U),2),N=Pe(R);bo(N);var D=Ze(N,2);D.__click=[eS,s];var O=Pe(D);br(O,{icon:"material-symbols:close-rounded",class:"h-8 w-8 text-gray-400"}),Fe(D),Fe(R);var H=Ze(R,2);H.__click=x;var W=Pe(H);br(W,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Fe(H),Fe(U);var se=Ze(U,2),de=Pe(se),le=Pe(de);{var he=oe=>{var ce=tS();Xe(oe,ce)};Ut(le,oe=>{re(h).length===0&&oe(he)})}var ae=Ze(le,2);Qi(ae,17,()=>re(h),oe=>oe.id,(oe,ce)=>{lE(oe,{get dataEntry(){return re(ce)},get showDataEntry(){return re(y)},set showDataEntry(ye){ht(y,ye,!0)}})}),Fe(de),Fe(se);var V=Ze(se,2);{var K=oe=>{JT(oe,{get showDataEntry(){return re(y)},set showDataEntry(ce){ht(y,ce,!0)}})};Ut(V,oe=>{re(y)&&oe(K)})}Fe(I),Fe(C),hr(()=>{mn(C,1,`absolute bottom-0 z-20 h-dvh w-full p-8 pl-[120px] ${(l()?"":"hidden")??""}`),D.disabled=!re(s)}),Up(N,()=>re(s),oe=>ht(s,oe)),Xe(t,C),gr(),a()}qi(["click"]);var iS=dt(`<div class="absolute bottom-0 z-30 flex h-full w-full items-center justify-center bg-black/50"><div class="bg-opacity-8 bg-main flex max-h-[600px] max-w-[900px] grow flex-col rounded-md p-4 text-base"><div class="flex shrink-0 items-center justify-between pb-4"><span class="text-2xl font-bold">morivis </span> <button class="bg-base rounded-full p-2"><!></button></div> <div class="flex-flex-col c-scroll overflow-y-auto overflow-x-hidden p-2"><div class="pb-4"><div class="pb-2 text-lg font-bold"></div> <div>20WebGIS
						WebGIS<a class="text-accent" href="https://github.com/forestacdev/enshurin-viewer/issues" target="_blank" rel="noopener noreferrer">GitHub</a></div></div> <div class="pb-4"><div class="pb-2 text-lg font-bold">Contributors / </div> <div class="flex max-w-[300px] flex-col gap-2"><a class="lg:hover:bg-accent flex cursor-pointer items-center justify-start gap-2 rounded-full border-2 border-gray-300 p-2 transition-colors lg:hover:text-white" href="https://github.com/satoshi7190" target="_blank" rel="noopener noreferrer"><div class="relative grid h-[50px] w-[50px] place-items-center overflow-hidden rounded-full bg-gray-500"><img class="absolute block h-full w-full rounded-full object-cover" src="https://github.com/satoshi7190.png" alt="satoshi7190's Avatar"></div> <div class="flex flex-col"><span>Satoshi Komatsu</span><span>(@satoshi7190)</span></div></a> <a class="lg:hover:bg-accent flex cursor-pointer items-center justify-start gap-2 rounded-full border-2 border-gray-300 p-2 transition-colors lg:hover:text-white" href="https://www.forest.ac.jp/" target="_blank" rel="noopener noreferrer"><div class="relative grid h-[50px] w-[50px] cursor-pointer place-items-center overflow-hidden rounded-full bg-gray-500"><img class="pointer-events-none absolute block h-full w-full rounded-full object-cover" src="https://pbs.twimg.com/profile_images/1349232244909510656/US-2oTws_400x400.jpg" alt=""></div> <div class="flex flex-col"><span></span> <span></span></div></a></div></div></div></div></div>`);function nS(t,e){fr(e,!1);const[r,a]=sn(),l=()=>kr(Pg,"$showInfoDialog",r);Wl();var u=Mr(),h=Dt(u);{var s=y=>{var x=iS(),C=Pe(x),I=Pe(C),U=Ze(Pe(I),2);U.__click=()=>Pg.set(!1);var R=Pe(U);br(R,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Fe(U),Fe(I),Ki(2),Fe(C),Fe(x),Ri(3,x,()=>fs,()=>({duration:100})),Xe(y,x)};Ut(h,y=>{l()&&y(s)})}Xe(t,u),gr(),a()}qi(["click"]);var aS=dt(`<div class="absolute bottom-0 z-30 flex h-full w-full items-center justify-center bg-black/50"><div class="bg-opacity-8 bg-main flex max-h-[600px] max-w-[900px] grow flex-col rounded-md p-4 text-base"><div class="flex shrink-0 items-center justify-between overflow-auto pb-4"><span class="text-2xl font-bold"></span></div> <div class="c-scroll flex h-full grow flex-col overflow-y-auto overflow-x-hidden pb-4"><div class="pb-4"></div> <div class="pb-4"><div class="text-lg font-bold">  </div> </div> <div class="pb-4"><div class="text-lg font-bold"></div>   <div class="pl-2"><div>1. </div> <div>2. </div> <div>3. </div> <div>4. </div></div></div> <div class="pb-4"><div class="text-lg font-bold"></div> <div></div></div> <div class="pb-4"><div class="text-lg font-bold"></div> <div></div></div> <div class="pb-4"><div class="text-lg font-bold"></div> <div>
						</div></div> <div class="pb-4"><div class="text-lg font-bold"></div> <div></div></div> <div class="pb-4"><div class="text-lg font-bold">Google </div> <div>Google
						Google
						 Cookie
						Google
						<a class="text-accent underline" target="_blank" href="https://policies.google.com/privacy" rel="noopener noreferrer">Google </a></div></div> <div class="pb-4"><div class="text-lg font-bold"></div> <div></div></div></div> <div class="flex shrink-0 justify-center overflow-auto pt-2"><button class="c-btn-confirm px-12 py-6 text-lg"></button></div></div></div>`);function sS(t,e){fr(e,!1);const[r,a]=sn(),l=()=>kr(Lg,"$showTermsDialog",r);Wl();var u=Mr(),h=Dt(u);{var s=y=>{var x=aS(),C=Pe(x),I=Ze(Pe(C),4),U=Pe(I);U.__click=()=>{Lg.set(!1),mC("userData")},Fe(I),Fe(C),Fe(x),Ri(3,x,()=>fs,()=>({duration:100})),Xe(y,x)};Ut(h,y=>{l()&&y(s)})}Xe(t,u),gr(),a()}qi(["click"]);const yg=Gn(null),Ph=(t,e,r=!1)=>{yg.set({message:t,type:e,persistent:r})};var oS=(t,e,r)=>e(r.value),lS=(t,e)=>ht(e,!0),AS=dt('<div class="grid place-items-center"><!></div>'),cS=dt('<div class="flex flex-col items-start justify-center"><span class="text-base font-semibold"> </span> <button class="text-accent flex w-full cursor-pointer items-center justify-between rounded-md p-2 pl-4 text-left transition-colors duration-150 lg:hover:bg-gray-700"><span> </span> <!></button></div>');function hS(t,e){fr(e,!0);let r=er(!1);const a=U=>{navigator.clipboard.writeText(U),Ph(` ${U} `,"info")};var l=cS(),u=Pe(l),h=Pe(u,!0);Fe(u);var s=Ze(u,2);s.__click=[oS,a,e],s.__mouseover=[lS,r];var y=Pe(s),x=Pe(y,!0);Fe(y);var C=Ze(y,2);{var I=U=>{var R=AS(),N=Pe(R);br(N,{icon:"majesticons:clipboard-line",class:"mr-2 h-6 w-6 shrink-0 text-base"}),Fe(R),Ri(3,R,()=>fs,()=>({duration:100})),Xe(U,R)};Ut(C,U=>{re(r)&&U(I)})}Fe(s),Fe(l),hr(()=>{_r(h,e.key),_r(x,e.value)}),Ln("mouseleave",s,()=>ht(r,!1)),Ln("focus",s,()=>ht(r,!0)),Ln("blur",s,()=>ht(r,!1)),Xe(t,l),gr()}qi(["click","mouseover"]);const uS=()=>{const t=SC;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},dS={subscribe(t){return uS().page.subscribe(t)}};let T1=String.fromCharCode,Gx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",S1={};function fS(t,e){if(!S1[t]){S1[t]={};for(let r=0;r<t.length;r++)S1[t][t.charAt(r)]=r}return S1[t][e]}function gS(t){return t==null?"":mS(t,6,function(e){return Gx.charAt(e)})}function pS(t){return t==null?"":t==""?null:_S((t=t.replace(/ /g,"+")).length,32,function(e){return fS(Gx,t.charAt(e))})}function mS(t,e,r){if(t==null)return"";let a,l,u={},h={},s="",y="",x="",C=2,I=3,U=2,R=[],N=0,D=0,O;for(O=0;O<t.length;O+=1)if(s=t.charAt(O),Object.prototype.hasOwnProperty.call(u,s)||(u[s]=I++,h[s]=!0),y=x+s,Object.prototype.hasOwnProperty.call(u,y))x=y;else{if(Object.prototype.hasOwnProperty.call(h,x)){if(256>x.charCodeAt(0)){for(a=0;a<U;a++)N<<=1,D==e-1?(D=0,R.push(r(N)),N=0):D++;for(a=0,l=x.charCodeAt(0);a<8;a++)N=N<<1|1&l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l>>=1}else{for(a=0,l=1;a<U;a++)N=N<<1|l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l=0;for(a=0,l=x.charCodeAt(0);a<16;a++)N=N<<1|1&l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l>>=1}--C==0&&(C=Math.pow(2,U),U++),delete h[x]}else for(a=0,l=u[x];a<U;a++)N=N<<1|1&l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l>>=1;--C==0&&(C=Math.pow(2,U),U++),u[y]=I++,x=String(s)}if(x!==""){if(Object.prototype.hasOwnProperty.call(h,x)){if(256>x.charCodeAt(0)){for(a=0;a<U;a++)N<<=1,D==e-1?(D=0,R.push(r(N)),N=0):D++;for(a=0,l=x.charCodeAt(0);a<8;a++)N=N<<1|1&l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l>>=1}else{for(a=0,l=1;a<U;a++)N=N<<1|l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l=0;for(a=0,l=x.charCodeAt(0);a<16;a++)N=N<<1|1&l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l>>=1}--C==0&&(C=Math.pow(2,U),U++),delete h[x]}else for(a=0,l=u[x];a<U;a++)N=N<<1|1&l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l>>=1;--C==0&&(C=Math.pow(2,U),U++)}for(a=0,l=2;a<U;a++)N=N<<1|1&l,D==e-1?(D=0,R.push(r(N)),N=0):D++,l>>=1;for(;;){if(N<<=1,D==e-1){R.push(r(N));break}D++}return R.join("")}function _S(t,e,r){let a=[],l=4,u=4,h=3,s="",y=[],x,C,I,U,R,N,D,O={val:r(0),position:e,index:1};for(x=0;x<3;x+=1)a[x]=x;for(I=0,R=4,N=1;N!=R;)U=O.val&O.position,O.position>>=1,O.position==0&&(O.position=e,O.val=r(O.index++)),I|=(U>0?1:0)*N,N<<=1;switch(I){case 0:for(I=0,R=256,N=1;N!=R;)U=O.val&O.position,O.position>>=1,O.position==0&&(O.position=e,O.val=r(O.index++)),I|=(U>0?1:0)*N,N<<=1;D=T1(I);break;case 1:for(I=0,R=65536,N=1;N!=R;)U=O.val&O.position,O.position>>=1,O.position==0&&(O.position=e,O.val=r(O.index++)),I|=(U>0?1:0)*N,N<<=1;D=T1(I);break;case 2:return""}for(a[3]=D,C=D,y.push(D);;){if(O.index>t)return"";for(I=0,R=Math.pow(2,h),N=1;N!=R;)U=O.val&O.position,O.position>>=1,O.position==0&&(O.position=e,O.val=r(O.index++)),I|=(U>0?1:0)*N,N<<=1;switch(D=I){case 0:for(I=0,R=256,N=1;N!=R;)U=O.val&O.position,O.position>>=1,O.position==0&&(O.position=e,O.val=r(O.index++)),I|=(U>0?1:0)*N,N<<=1;a[u++]=T1(I),D=u-1,l--;break;case 1:for(I=0,R=65536,N=1;N!=R;)U=O.val&O.position,O.position>>=1,O.position==0&&(O.position=e,O.val=r(O.index++)),I|=(U>0?1:0)*N,N<<=1;a[u++]=T1(I),D=u-1,l--;break;case 2:return y.join("")}if(l==0&&(l=Math.pow(2,h),h++),a[D])s=a[D];else{if(D!==u)return null;s=C+C.charAt(0)}y.push(s),a[u++]=C+s.charAt(0),l--,C=s,l==0&&(l=Math.pow(2,h),h++)}}let jx;jx=dS;const bS={keepFocus:!0,noScroll:!0,replaceState:!0},yS={keepFocus:!0,noScroll:!0,replaceState:!1};function vS(t,e,r){var u;const a=Array.from(new Set(Array.from(((u=t==null?void 0:t.keys)==null?void 0:u.call(t))||[]).concat(Object.keys(r??{}))));let l=!1;return[Object.fromEntries(a.map(h=>{if(e[h]!=null)return[h,e[h]];let s=I=>I;const y=r==null?void 0:r[h];typeof y!="boolean"&&typeof(y==null?void 0:y.decode)=="function"&&(s=y.decode);const x=t==null?void 0:t.get(h);let C;return x==null&&(y==null?void 0:y.defaultValue)!=null?(C=y.defaultValue,l=!0):C=s(x),[h,C]})),l]}function xS(t,e,r=(a,l)=>JSON.stringify(a)===JSON.stringify(l)){return typeof t=="object"&&typeof e=="object"&&r(t,e)}function H3({encode:t,decode:e}){function r(a){return{encode:t,decode:e,defaultValue:a}}return r}function wS(t){return{encode:e=>JSON.stringify(e),decode:e=>{if(e===null)return null;try{return JSON.parse(e)}catch{return null}},defaultValue:t}}function BS(t){return{encode:e=>JSON.stringify(e),decode:e=>{if(e===null)return null;try{return JSON.parse(e)}catch{return null}},defaultValue:t}}function CS(t){return{encode:e=>gS(JSON.stringify(e)),decode:e=>{if(!e)return null;try{return JSON.parse(pS(e)??"")}catch{return null}},defaultValue:t}}const N1={number:H3({encode:t=>t.toString(),decode:t=>t?parseFloat(t):null}),boolean:H3({encode:t=>t+"",decode:t=>t!==null&&t!=="false"}),string:H3({encode:t=>t??"",decode:t=>t}),object:wS,array:BS,lz:CS},O3=new Set;let Jv;const e6=new Map;function $h(t,{debounceHistory:e=0,pushHistory:r=!0,sort:a=!0,showDefaults:l=!0,equalityFn:u}={}){const h=Gn({});let s,y=!0;function x(I,U){y=!1;const R=window.location.hash,N=new URLSearchParams(window.location.search),D=O=>{for(const H of Object.keys(I)){if(I[H]==null){O.delete(H);continue}let W=le=>le.toString();const se=t==null?void 0:t[H];typeof se!="boolean"&&typeof(se==null?void 0:se.encode)=="function"&&(W=se.encode);const de=W(I[H]);de==null?O.delete(H):O.set(H,de)}};O3.add(D),clearTimeout(Jv),Jv=setTimeout(async()=>{O3.forEach(O=>{O(N)}),clearTimeout(e6.get("queryParameters"));{h.set(I);async function O(){a&&N.sort(),await NC(`?${N}${R}`,r?yS:bS),h.set({})}U||e===0?O():e6.set("queryParameters",setTimeout(O,e))}O3.clear()})}const{subscribe:C}=D4([jx,h],([I,U],R)=>{var O;const[N,D]=vS((O=I==null?void 0:I.url)==null?void 0:O.searchParams,U,t);if(D&&l&&x(structuredClone(N),y),!xS(s,N,u))return s=structuredClone(N),R(structuredClone(N))});return{set(I){x(I)},subscribe:C,update:I=>{const U=$o({subscribe:C}),R=I(U);x(R)}}}const MS=t=>{const e=t.slice(1).split("&"),r={};return e.forEach(a=>{r[a.split("=")[0]]=a.split("=")[1]}),r},RS=()=>{const t=$o($h({c:N1.string(),z:N1.number(),p:N1.number(),b:N1.number()},{pushHistory:!1}));if(t.c===null||t.c===void 0||t.z===null||t.z===void 0||t.p===null||t.p===void 0||t.b===null||t.b===void 0)return q5;const e=t.c.split(",").map(Number),r=Number(t.z),a=Number(t.p),l=Number(t.b);return{center:e,zoom:r,pitch:a,bearing:l}},IS=t=>{const e=$o($h({},{pushHistory:!1})),r=t.center.map(a=>a.toFixed(6));e.c=r,e.z=t.zoom.toFixed(1),e.p=t.pitch.toFixed(0),e.b=t.bearing.toFixed(0),$h({},{pushHistory:!1}).set(e)},US=t=>{const e=$o($h({}));e.imageId=t,$h({},{pushHistory:!1}).set(e)},ES=()=>$o($h({},{pushHistory:!1})).imageId;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jm=function(t,e){return Jm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},Jm(t,e)};function Ks(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function os(t,e,r,a){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function s(C){try{x(a.next(C))}catch(I){h(I)}}function y(C){try{x(a.throw(C))}catch(I){h(I)}}function x(C){C.done?u(C.value):l(C.value).then(s,y)}x((a=a.apply(t,[])).next())})}function ka(t,e){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,l,u,h;return h={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function s(x){return function(C){return y([x,C])}}function y(x){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,l&&(u=x[0]&2?l.return:x[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,x[1])).done)return u;switch(l=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,l=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){r.label=x[1];break}if(x[0]===6&&r.label<u[1]){r.label=u[1],u=x;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(x);break}u[2]&&r.ops.pop(),r.trys.pop();continue}x=e.call(t,r)}catch(C){x=[6,C],l=0}finally{a=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}var lc=function(){function t(e,r,a,l){this.left=e,this.top=r,this.width=a,this.height=l}return t.prototype.add=function(e,r,a,l){return new t(this.left+e,this.top+r,this.width+a,this.height+l)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var a=Array.from(r).find(function(l){return l.width!==0});return a?new t(a.left+e.windowBounds.left,a.top+e.windowBounds.top,a.width,a.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),v_=function(t,e){return lc.fromClientRect(t,e.getBoundingClientRect())},zp=function(t){for(var e=[],r=0,a=t.length;r<a;){var l=t.charCodeAt(r++);if(l>=55296&&l<=56319&&r<a){var u=t.charCodeAt(r++);(u&64512)===56320?e.push(((l&1023)<<10)+(u&1023)+65536):(e.push(l),r--)}else e.push(l)}return e},an=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var a=[],l=-1,u="";++l<r;){var h=t[l];h<=65535?a.push(h):(h-=65536,a.push((h>>10)+55296,h%1024+56320)),(l+1===r||a.length>16384)&&(u+=String.fromCharCode.apply(String,a),a.length=0)}return u},t6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",FS=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Y1=0;Y1<t6.length;Y1++)FS[t6.charCodeAt(Y1)]=Y1;var r6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var P1=0;P1<r6.length;P1++)jd[r6.charCodeAt(P1)]=P1;var TS=function(t){var e=t.length*.75,r=t.length,a,l=0,u,h,s,y;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var x=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),C=Array.isArray(x)?x:new Uint8Array(x);for(a=0;a<r;a+=4)u=jd[t.charCodeAt(a)],h=jd[t.charCodeAt(a+1)],s=jd[t.charCodeAt(a+2)],y=jd[t.charCodeAt(a+3)],C[l++]=u<<2|h>>4,C[l++]=(h&15)<<4|s>>2,C[l++]=(s&3)<<6|y&63;return x},SS=function(t){for(var e=t.length,r=[],a=0;a<e;a+=2)r.push(t[a+1]<<8|t[a]);return r},NS=function(t){for(var e=t.length,r=[],a=0;a<e;a+=4)r.push(t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a]);return r},tc=5,x_=11,X3=2,YS=x_-tc,Kx=65536>>tc,PS=1<<tc,V3=PS-1,LS=1024>>tc,QS=Kx+LS,kS=QS,DS=32,zS=kS+DS,ZS=65536>>x_,HS=1<<YS,OS=HS-1,i6=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},XS=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},VS=function(t,e){var r=TS(t),a=Array.isArray(r)?NS(r):new Uint32Array(r),l=Array.isArray(r)?SS(r):new Uint16Array(r),u=24,h=i6(l,u/2,a[4]/2),s=a[5]===2?i6(l,(u+a[4])/2):XS(a,Math.ceil((u+a[4])/4));return new GS(a[0],a[1],a[2],a[3],h,s)},GS=function(){function t(e,r,a,l,u,h){this.initialValue=e,this.errorValue=r,this.highStart=a,this.highValueIndex=l,this.index=u,this.data=h}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>tc],r=(r<<X3)+(e&V3),this.data[r];if(e<=65535)return r=this.index[Kx+(e-55296>>tc)],r=(r<<X3)+(e&V3),this.data[r];if(e<this.highStart)return r=zS-ZS+(e>>x_),r=this.index[r],r+=e>>tc&OS,r=this.index[r],r=(r<<X3)+(e&V3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),n6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jS=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var L1=0;L1<n6.length;L1++)jS[n6.charCodeAt(L1)]=L1;var KS="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",a6=50,$S=1,$x=2,qx=3,qS=4,WS=5,s6=7,Wx=8,o6=9,Yl=10,e4=11,l6=12,t4=13,JS=14,Kd=15,r4=16,Q1=17,Dd=18,eN=19,A6=20,i4=21,zd=22,G3=23,dh=24,Da=25,$d=26,qd=27,fh=28,tN=29,XA=30,rN=31,k1=32,D1=33,n4=34,a4=35,s4=36,P0=37,o4=38,vg=39,xg=40,j3=41,Jx=42,iN=43,nN=[9001,65288],ew="!",jr="",z1="",l4=VS(KS),Qo=[XA,s4],A4=[$S,$x,qx,WS],tw=[Yl,Wx],c6=[qd,$d],aN=A4.concat(tw),h6=[o4,vg,xg,n4,a4],sN=[Kd,t4],oN=function(t,e){e===void 0&&(e="strict");var r=[],a=[],l=[];return t.forEach(function(u,h){var s=l4.get(u);if(s>a6?(l.push(!0),s-=a6):l.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return a.push(h),r.push(r4);if(s===qS||s===e4){if(h===0)return a.push(h),r.push(XA);var y=r[h-1];return aN.indexOf(y)===-1?(a.push(a[h-1]),r.push(y)):(a.push(h),r.push(XA))}if(a.push(h),s===rN)return r.push(e==="strict"?i4:P0);if(s===Jx||s===tN)return r.push(XA);if(s===iN)return u>=131072&&u<=196605||u>=196608&&u<=262141?r.push(P0):r.push(XA);r.push(s)}),[a,r,l]},K3=function(t,e,r,a){var l=a[r];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var u=r;u<=a.length;){u++;var h=a[u];if(h===e)return!0;if(h!==Yl)break}if(l===Yl)for(var u=r;u>0;){u--;var s=a[u];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var y=r;y<=a.length;){y++;var h=a[y];if(h===e)return!0;if(h!==Yl)break}if(s!==Yl)break}return!1},u6=function(t,e){for(var r=t;r>=0;){var a=e[r];if(a===Yl)r--;else return a}return 0},lN=function(t,e,r,a,l){if(r[a]===0)return jr;var u=a-1;if(Array.isArray(l)&&l[u]===!0)return jr;var h=u-1,s=u+1,y=e[u],x=h>=0?e[h]:0,C=e[s];if(y===$x&&C===qx)return jr;if(A4.indexOf(y)!==-1)return ew;if(A4.indexOf(C)!==-1||tw.indexOf(C)!==-1)return jr;if(u6(u,e)===Wx)return z1;if(l4.get(t[u])===e4||(y===k1||y===D1)&&l4.get(t[s])===e4||y===s6||C===s6||y===o6||[Yl,t4,Kd].indexOf(y)===-1&&C===o6||[Q1,Dd,eN,dh,fh].indexOf(C)!==-1||u6(u,e)===zd||K3(G3,zd,u,e)||K3([Q1,Dd],i4,u,e)||K3(l6,l6,u,e))return jr;if(y===Yl)return z1;if(y===G3||C===G3)return jr;if(C===r4||y===r4)return z1;if([t4,Kd,i4].indexOf(C)!==-1||y===JS||x===s4&&sN.indexOf(y)!==-1||y===fh&&C===s4||C===A6||Qo.indexOf(C)!==-1&&y===Da||Qo.indexOf(y)!==-1&&C===Da||y===qd&&[P0,k1,D1].indexOf(C)!==-1||[P0,k1,D1].indexOf(y)!==-1&&C===$d||Qo.indexOf(y)!==-1&&c6.indexOf(C)!==-1||c6.indexOf(y)!==-1&&Qo.indexOf(C)!==-1||[qd,$d].indexOf(y)!==-1&&(C===Da||[zd,Kd].indexOf(C)!==-1&&e[s+1]===Da)||[zd,Kd].indexOf(y)!==-1&&C===Da||y===Da&&[Da,fh,dh].indexOf(C)!==-1)return jr;if([Da,fh,dh,Q1,Dd].indexOf(C)!==-1)for(var I=u;I>=0;){var U=e[I];if(U===Da)return jr;if([fh,dh].indexOf(U)!==-1)I--;else break}if([qd,$d].indexOf(C)!==-1)for(var I=[Q1,Dd].indexOf(y)!==-1?h:u;I>=0;){var U=e[I];if(U===Da)return jr;if([fh,dh].indexOf(U)!==-1)I--;else break}if(o4===y&&[o4,vg,n4,a4].indexOf(C)!==-1||[vg,n4].indexOf(y)!==-1&&[vg,xg].indexOf(C)!==-1||[xg,a4].indexOf(y)!==-1&&C===xg||h6.indexOf(y)!==-1&&[A6,$d].indexOf(C)!==-1||h6.indexOf(C)!==-1&&y===qd||Qo.indexOf(y)!==-1&&Qo.indexOf(C)!==-1||y===dh&&Qo.indexOf(C)!==-1||Qo.concat(Da).indexOf(y)!==-1&&C===zd&&nN.indexOf(t[s])===-1||Qo.concat(Da).indexOf(C)!==-1&&y===Dd)return jr;if(y===j3&&C===j3){for(var R=r[u],N=1;R>0&&(R--,e[R]===j3);)N++;if(N%2!==0)return jr}return y===k1&&C===D1?jr:z1},AN=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=oN(t,e.lineBreak),a=r[0],l=r[1],u=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(l=l.map(function(s){return[Da,XA,Jx].indexOf(s)!==-1?P0:s}));var h=e.wordBreak==="keep-all"?u.map(function(s,y){return s&&t[y]>=19968&&t[y]<=40959}):void 0;return[a,l,h]},cN=function(){function t(e,r,a,l){this.codePoints=e,this.required=r===ew,this.start=a,this.end=l}return t.prototype.slice=function(){return an.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),hN=function(t,e){var r=zp(t),a=AN(r,e),l=a[0],u=a[1],h=a[2],s=r.length,y=0,x=0;return{next:function(){if(x>=s)return{done:!0,value:null};for(var C=jr;x<s&&(C=lN(r,u,l,++x,h))===jr;);if(C!==jr||x===s){var I=new cN(r,C,y,x);return y=x,{value:I,done:!1}}return{done:!0,value:null}}}},uN=1,dN=2,W0=4,d6=8,op=10,f6=47,g0=92,fN=9,gN=32,Z1=34,Zd=61,pN=35,mN=36,_N=37,H1=39,O1=40,Hd=41,bN=95,Ba=45,yN=33,vN=60,xN=62,wN=64,BN=91,CN=93,MN=61,RN=123,X1=63,IN=125,g6=124,UN=126,EN=128,p6=65533,$3=42,qA=43,FN=44,TN=58,SN=59,L0=46,NN=0,YN=8,PN=11,LN=14,QN=31,kN=127,oo=-1,rw=48,iw=97,nw=101,DN=102,zN=117,ZN=122,aw=65,sw=69,ow=70,HN=85,ON=90,aa=function(t){return t>=rw&&t<=57},XN=function(t){return t>=55296&&t<=57343},gh=function(t){return aa(t)||t>=aw&&t<=ow||t>=iw&&t<=DN},VN=function(t){return t>=iw&&t<=ZN},GN=function(t){return t>=aw&&t<=ON},jN=function(t){return VN(t)||GN(t)},KN=function(t){return t>=EN},V1=function(t){return t===op||t===fN||t===gN},lp=function(t){return jN(t)||KN(t)||t===bN},m6=function(t){return lp(t)||aa(t)||t===Ba},$N=function(t){return t>=NN&&t<=YN||t===PN||t>=LN&&t<=QN||t===kN},Tl=function(t,e){return t!==g0?!1:e!==op},G1=function(t,e,r){return t===Ba?lp(e)||Tl(e,r):lp(t)?!0:!!(t===g0&&Tl(t,e))},q3=function(t,e,r){return t===qA||t===Ba?aa(e)?!0:e===L0&&aa(r):aa(t===L0?e:t)},qN=function(t){var e=0,r=1;(t[e]===qA||t[e]===Ba)&&(t[e]===Ba&&(r=-1),e++);for(var a=[];aa(t[e]);)a.push(t[e++]);var l=a.length?parseInt(an.apply(void 0,a),10):0;t[e]===L0&&e++;for(var u=[];aa(t[e]);)u.push(t[e++]);var h=u.length,s=h?parseInt(an.apply(void 0,u),10):0;(t[e]===sw||t[e]===nw)&&e++;var y=1;(t[e]===qA||t[e]===Ba)&&(t[e]===Ba&&(y=-1),e++);for(var x=[];aa(t[e]);)x.push(t[e++]);var C=x.length?parseInt(an.apply(void 0,x),10):0;return r*(l+s*Math.pow(10,-h))*Math.pow(10,y*C)},WN={type:2},JN={type:3},eY={type:4},tY={type:13},rY={type:8},iY={type:21},nY={type:9},aY={type:10},sY={type:11},oY={type:12},lY={type:14},j1={type:23},AY={type:1},cY={type:25},hY={type:24},uY={type:26},dY={type:27},fY={type:28},gY={type:29},pY={type:31},c4={type:32},lw=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(zp(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==c4;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Z1:return this.consumeStringToken(Z1);case pN:var r=this.peekCodePoint(0),a=this.peekCodePoint(1),l=this.peekCodePoint(2);if(m6(r)||Tl(a,l)){var u=G1(r,a,l)?dN:uN,h=this.consumeName();return{type:5,value:h,flags:u}}break;case mN:if(this.peekCodePoint(0)===Zd)return this.consumeCodePoint(),tY;break;case H1:return this.consumeStringToken(H1);case O1:return WN;case Hd:return JN;case $3:if(this.peekCodePoint(0)===Zd)return this.consumeCodePoint(),lY;break;case qA:if(q3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case FN:return eY;case Ba:var s=e,y=this.peekCodePoint(0),x=this.peekCodePoint(1);if(q3(s,y,x))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(G1(s,y,x))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(y===Ba&&x===xN)return this.consumeCodePoint(),this.consumeCodePoint(),hY;break;case L0:if(q3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case f6:if(this.peekCodePoint(0)===$3)for(this.consumeCodePoint();;){var C=this.consumeCodePoint();if(C===$3&&(C=this.consumeCodePoint(),C===f6))return this.consumeToken();if(C===oo)return this.consumeToken()}break;case TN:return uY;case SN:return dY;case vN:if(this.peekCodePoint(0)===yN&&this.peekCodePoint(1)===Ba&&this.peekCodePoint(2)===Ba)return this.consumeCodePoint(),this.consumeCodePoint(),cY;break;case wN:var I=this.peekCodePoint(0),U=this.peekCodePoint(1),R=this.peekCodePoint(2);if(G1(I,U,R)){var h=this.consumeName();return{type:7,value:h}}break;case BN:return fY;case g0:if(Tl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case CN:return gY;case MN:if(this.peekCodePoint(0)===Zd)return this.consumeCodePoint(),rY;break;case RN:return sY;case IN:return oY;case zN:case HN:var N=this.peekCodePoint(0),D=this.peekCodePoint(1);return N===qA&&(gh(D)||D===X1)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case g6:if(this.peekCodePoint(0)===Zd)return this.consumeCodePoint(),nY;if(this.peekCodePoint(0)===g6)return this.consumeCodePoint(),iY;break;case UN:if(this.peekCodePoint(0)===Zd)return this.consumeCodePoint(),aY;break;case oo:return c4}return V1(e)?(this.consumeWhiteSpace(),pY):aa(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):lp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:an(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();gh(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var a=!1;r===X1&&e.length<6;)e.push(r),r=this.consumeCodePoint(),a=!0;if(a){var l=parseInt(an.apply(void 0,e.map(function(y){return y===X1?rw:y})),16),u=parseInt(an.apply(void 0,e.map(function(y){return y===X1?ow:y})),16);return{type:30,start:l,end:u}}var h=parseInt(an.apply(void 0,e),16);if(this.peekCodePoint(0)===Ba&&gh(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var s=[];gh(r)&&s.length<6;)s.push(r),r=this.consumeCodePoint();var u=parseInt(an.apply(void 0,s),16);return{type:30,start:h,end:u}}else return{type:30,start:h,end:h}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===O1?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===O1?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===oo)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===H1||r===Z1){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===oo||this.peekCodePoint(0)===Hd)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),j1)}for(;;){var l=this.consumeCodePoint();if(l===oo||l===Hd)return{type:22,value:an.apply(void 0,e)};if(V1(l))return this.consumeWhiteSpace(),this.peekCodePoint(0)===oo||this.peekCodePoint(0)===Hd?(this.consumeCodePoint(),{type:22,value:an.apply(void 0,e)}):(this.consumeBadUrlRemnants(),j1);if(l===Z1||l===H1||l===O1||$N(l))return this.consumeBadUrlRemnants(),j1;if(l===g0)if(Tl(l,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),j1;else e.push(l)}},t.prototype.consumeWhiteSpace=function(){for(;V1(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Hd||e===oo)return;Tl(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,a="";e>0;){var l=Math.min(r,e);a+=an.apply(void 0,this._value.splice(0,l)),e-=l}return this._value.shift(),a},t.prototype.consumeStringToken=function(e){var r="",a=0;do{var l=this._value[a];if(l===oo||l===void 0||l===e)return r+=this.consumeStringSlice(a),{type:0,value:r};if(l===op)return this._value.splice(0,a),AY;if(l===g0){var u=this._value[a+1];u!==oo&&u!==void 0&&(u===op?(r+=this.consumeStringSlice(a),a=-1,this._value.shift()):Tl(l,u)&&(r+=this.consumeStringSlice(a),r+=an(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=W0,a=this.peekCodePoint(0);for((a===qA||a===Ba)&&e.push(this.consumeCodePoint());aa(this.peekCodePoint(0));)e.push(this.consumeCodePoint());a=this.peekCodePoint(0);var l=this.peekCodePoint(1);if(a===L0&&aa(l))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=d6;aa(this.peekCodePoint(0));)e.push(this.consumeCodePoint());a=this.peekCodePoint(0),l=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((a===sw||a===nw)&&((l===qA||l===Ba)&&aa(u)||aa(l)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=d6;aa(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[qN(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],a=e[1],l=this.peekCodePoint(0),u=this.peekCodePoint(1),h=this.peekCodePoint(2);if(G1(l,u,h)){var s=this.consumeName();return{type:15,number:r,flags:a,unit:s}}return l===_N?(this.consumeCodePoint(),{type:16,number:r,flags:a}):{type:17,number:r,flags:a}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(gh(e)){for(var r=an(e);gh(this.peekCodePoint(0))&&r.length<6;)r+=an(this.consumeCodePoint());V1(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(r,16);return a===0||XN(a)||a>1114111?p6:a}return e===oo?p6:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(m6(r))e+=an(r);else if(Tl(r,this.peekCodePoint(0)))e+=an(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),Aw=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new lw;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},a=this.consumeToken();;){if(a.type===32||mY(a,e))return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue()),a=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?c4:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),J0=function(t){return t.type===15},Zp=function(t){return t.type===17},$i=function(t){return t.type===20},h4=function(t,e){return $i(t)&&t.value===e},Hp=function(t){return t.type!==31&&t.type!==4},yo=function(t){var e=[],r=[];return t.forEach(function(a){if(a.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}a.type!==31&&r.push(a)}),r.length&&e.push(r),e},mY=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Gl=function(t){return t.type===17||t.type===15},pn=function(t){return t.type===16||Gl(t)},cw=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},qn={type:17,number:0,flags:W0},w_={type:16,number:50,flags:W0},Pl={type:16,number:100,flags:W0},Wd=function(t,e,r){var a=t[0],l=t[1];return[Ei(a,e),Ei(typeof l<"u"?l:a,r)]},Ei=function(t,e){if(t.type===16)return t.number/100*e;if(J0(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},hw="deg",uw="grad",dw="rad",fw="turn",Op={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case hw:return Math.PI*e.number/180;case uw:return Math.PI/200*e.number;case dw:return e.number;case fw:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},gw=function(t){return t.type===15&&(t.unit===hw||t.unit===uw||t.unit===dw||t.unit===fw)},pw=function(t){var e=t.filter($i).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[qn,qn];case"to top":case"bottom":return us(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[qn,Pl];case"to right":case"left":return us(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Pl,Pl];case"to bottom":case"top":return us(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Pl,qn];case"to left":case"right":return us(270)}return 0},us=function(t){return Math.PI*t/180},Zl={name:"color",parse:function(t,e){if(e.type===18){var r=_Y[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var a=e.value.substring(0,1),l=e.value.substring(1,2),u=e.value.substring(2,3);return Ll(parseInt(a+a,16),parseInt(l+l,16),parseInt(u+u,16),1)}if(e.value.length===4){var a=e.value.substring(0,1),l=e.value.substring(1,2),u=e.value.substring(2,3),h=e.value.substring(3,4);return Ll(parseInt(a+a,16),parseInt(l+l,16),parseInt(u+u,16),parseInt(h+h,16)/255)}if(e.value.length===6){var a=e.value.substring(0,2),l=e.value.substring(2,4),u=e.value.substring(4,6);return Ll(parseInt(a,16),parseInt(l,16),parseInt(u,16),1)}if(e.value.length===8){var a=e.value.substring(0,2),l=e.value.substring(2,4),u=e.value.substring(4,6),h=e.value.substring(6,8);return Ll(parseInt(a,16),parseInt(l,16),parseInt(u,16),parseInt(h,16)/255)}}if(e.type===20){var s=Q0[e.value.toUpperCase()];if(typeof s<"u")return s}return Q0.TRANSPARENT}},Lh=function(t){return(255&t)===0},Yn=function(t){var e=255&t,r=255&t>>8,a=255&t>>16,l=255&t>>24;return e<255?"rgba("+l+","+a+","+r+","+e/255+")":"rgb("+l+","+a+","+r+")"},Ll=function(t,e,r,a){return(t<<24|e<<16|r<<8|Math.round(a*255)<<0)>>>0},_6=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},b6=function(t,e){var r=e.filter(Hp);if(r.length===3){var a=r.map(_6),l=a[0],u=a[1],h=a[2];return Ll(l,u,h,1)}if(r.length===4){var s=r.map(_6),l=s[0],u=s[1],h=s[2],y=s[3];return Ll(l,u,h,y)}return 0};function W3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var y6=function(t,e){var r=e.filter(Hp),a=r[0],l=r[1],u=r[2],h=r[3],s=(a.type===17?us(a.number):Op.parse(t,a))/(Math.PI*2),y=pn(l)?l.number/100:0,x=pn(u)?u.number/100:0,C=typeof h<"u"&&pn(h)?Ei(h,1):1;if(y===0)return Ll(x*255,x*255,x*255,1);var I=x<=.5?x*(y+1):x+y-x*y,U=x*2-I,R=W3(U,I,s+1/3),N=W3(U,I,s),D=W3(U,I,s-1/3);return Ll(R*255,N*255,D*255,C)},_Y={hsl:y6,hsla:y6,rgb:b6,rgba:b6},v6=function(t,e){return Zl.parse(t,Aw.create(e).parseComponentValue())},Q0={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},bY={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if($i(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},yY={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Xp=function(t,e){var r=Zl.parse(t,e[0]),a=e[1];return a&&pn(a)?{color:r,stop:a}:{color:r,stop:null}},x6=function(t,e){var r=t[0],a=t[t.length-1];r.stop===null&&(r.stop=qn),a.stop===null&&(a.stop=Pl);for(var l=[],u=0,h=0;h<t.length;h++){var s=t[h].stop;if(s!==null){var y=Ei(s,e);y>u?l.push(y):l.push(u),u=y}else l.push(null)}for(var x=null,h=0;h<l.length;h++){var C=l[h];if(C===null)x===null&&(x=h);else if(x!==null){for(var I=h-x,U=l[x-1],R=(C-U)/(I+1),N=1;N<=I;N++)l[x+N-1]=R*N;x=null}}return t.map(function(D,O){var H=D.color;return{color:H,stop:Math.max(Math.min(1,l[O]/e),0)}})},vY=function(t,e,r){var a=e/2,l=r/2,u=Ei(t[0],e)-a,h=l-Ei(t[1],r);return(Math.atan2(h,u)+Math.PI*2)%(Math.PI*2)},xY=function(t,e,r){var a=typeof t=="number"?t:vY(t,e,r),l=Math.abs(e*Math.sin(a))+Math.abs(r*Math.cos(a)),u=e/2,h=r/2,s=l/2,y=Math.sin(a-Math.PI/2)*s,x=Math.cos(a-Math.PI/2)*s;return[l,u-x,u+x,h-y,h+y]},Ts=function(t,e){return Math.sqrt(t*t+e*e)},w6=function(t,e,r,a,l){var u=[[0,0],[0,e],[t,0],[t,e]];return u.reduce(function(h,s){var y=s[0],x=s[1],C=Ts(r-y,a-x);return(l?C<h.optimumDistance:C>h.optimumDistance)?{optimumCorner:s,optimumDistance:C}:h},{optimumDistance:l?1/0:-1/0,optimumCorner:null}).optimumCorner},wY=function(t,e,r,a,l){var u=0,h=0;switch(t.size){case 0:t.shape===0?u=h=Math.min(Math.abs(e),Math.abs(e-a),Math.abs(r),Math.abs(r-l)):t.shape===1&&(u=Math.min(Math.abs(e),Math.abs(e-a)),h=Math.min(Math.abs(r),Math.abs(r-l)));break;case 2:if(t.shape===0)u=h=Math.min(Ts(e,r),Ts(e,r-l),Ts(e-a,r),Ts(e-a,r-l));else if(t.shape===1){var s=Math.min(Math.abs(r),Math.abs(r-l))/Math.min(Math.abs(e),Math.abs(e-a)),y=w6(a,l,e,r,!0),x=y[0],C=y[1];u=Ts(x-e,(C-r)/s),h=s*u}break;case 1:t.shape===0?u=h=Math.max(Math.abs(e),Math.abs(e-a),Math.abs(r),Math.abs(r-l)):t.shape===1&&(u=Math.max(Math.abs(e),Math.abs(e-a)),h=Math.max(Math.abs(r),Math.abs(r-l)));break;case 3:if(t.shape===0)u=h=Math.max(Ts(e,r),Ts(e,r-l),Ts(e-a,r),Ts(e-a,r-l));else if(t.shape===1){var s=Math.max(Math.abs(r),Math.abs(r-l))/Math.max(Math.abs(e),Math.abs(e-a)),I=w6(a,l,e,r,!1),x=I[0],C=I[1];u=Ts(x-e,(C-r)/s),h=s*u}break}return Array.isArray(t.size)&&(u=Ei(t.size[0],a),h=t.size.length===2?Ei(t.size[1],l):u),[u,h]},BY=function(t,e){var r=us(180),a=[];return yo(e).forEach(function(l,u){if(u===0){var h=l[0];if(h.type===20&&h.value==="to"){r=pw(l);return}else if(gw(h)){r=Op.parse(t,h);return}}var s=Xp(t,l);a.push(s)}),{angle:r,stops:a,type:1}},K1=function(t,e){var r=us(180),a=[];return yo(e).forEach(function(l,u){if(u===0){var h=l[0];if(h.type===20&&["top","left","right","bottom"].indexOf(h.value)!==-1){r=pw(l);return}else if(gw(h)){r=(Op.parse(t,h)+us(270))%us(360);return}}var s=Xp(t,l);a.push(s)}),{angle:r,stops:a,type:1}},CY=function(t,e){var r=us(180),a=[],l=1,u=0,h=3,s=[];return yo(e).forEach(function(y,x){var C=y[0];if(x===0){if($i(C)&&C.value==="linear"){l=1;return}else if($i(C)&&C.value==="radial"){l=2;return}}if(C.type===18){if(C.name==="from"){var I=Zl.parse(t,C.values[0]);a.push({stop:qn,color:I})}else if(C.name==="to"){var I=Zl.parse(t,C.values[0]);a.push({stop:Pl,color:I})}else if(C.name==="color-stop"){var U=C.values.filter(Hp);if(U.length===2){var I=Zl.parse(t,U[1]),R=U[0];Zp(R)&&a.push({stop:{type:16,number:R.number*100,flags:R.flags},color:I})}}}}),l===1?{angle:(r+us(180))%us(360),stops:a,type:l}:{size:h,shape:u,stops:a,position:s,type:l}},mw="closest-side",_w="farthest-side",bw="closest-corner",yw="farthest-corner",vw="circle",xw="ellipse",ww="cover",Bw="contain",MY=function(t,e){var r=0,a=3,l=[],u=[];return yo(e).forEach(function(h,s){var y=!0;if(s===0){var x=!1;y=h.reduce(function(I,U){if(x)if($i(U))switch(U.value){case"center":return u.push(w_),I;case"top":case"left":return u.push(qn),I;case"right":case"bottom":return u.push(Pl),I}else(pn(U)||Gl(U))&&u.push(U);else if($i(U))switch(U.value){case vw:return r=0,!1;case xw:return r=1,!1;case"at":return x=!0,!1;case mw:return a=0,!1;case ww:case _w:return a=1,!1;case Bw:case bw:return a=2,!1;case yw:return a=3,!1}else if(Gl(U)||pn(U))return Array.isArray(a)||(a=[]),a.push(U),!1;return I},y)}if(y){var C=Xp(t,h);l.push(C)}}),{size:a,shape:r,stops:l,position:u,type:2}},$1=function(t,e){var r=0,a=3,l=[],u=[];return yo(e).forEach(function(h,s){var y=!0;if(s===0?y=h.reduce(function(C,I){if($i(I))switch(I.value){case"center":return u.push(w_),!1;case"top":case"left":return u.push(qn),!1;case"right":case"bottom":return u.push(Pl),!1}else if(pn(I)||Gl(I))return u.push(I),!1;return C},y):s===1&&(y=h.reduce(function(C,I){if($i(I))switch(I.value){case vw:return r=0,!1;case xw:return r=1,!1;case Bw:case mw:return a=0,!1;case _w:return a=1,!1;case bw:return a=2,!1;case ww:case yw:return a=3,!1}else if(Gl(I)||pn(I))return Array.isArray(a)||(a=[]),a.push(I),!1;return C},y)),y){var x=Xp(t,h);l.push(x)}}),{size:a,shape:r,stops:l,position:u,type:2}},RY=function(t){return t.type===1},IY=function(t){return t.type===2},B_={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var a=Cw[e.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return a(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function UY(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Cw[t.name])}var Cw={"linear-gradient":BY,"-moz-linear-gradient":K1,"-ms-linear-gradient":K1,"-o-linear-gradient":K1,"-webkit-linear-gradient":K1,"radial-gradient":MY,"-moz-radial-gradient":$1,"-ms-radial-gradient":$1,"-o-radial-gradient":$1,"-webkit-radial-gradient":$1,"-webkit-gradient":CY},EY={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(a){return Hp(a)&&UY(a)}).map(function(a){return B_.parse(t,a)})}},FY={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if($i(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},TY={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return yo(e).map(function(r){return r.filter(pn)}).map(cw)}},SY={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return yo(e).map(function(r){return r.filter($i).map(function(a){return a.value}).join(" ")}).map(NY)}},NY=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Qh;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Qh||(Qh={}));var YY={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return yo(e).map(function(r){return r.filter(PY)})}},PY=function(t){return $i(t)||pn(t)},Vp=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},LY=Vp("top"),QY=Vp("right"),kY=Vp("bottom"),DY=Vp("left"),Gp=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return cw(r.filter(pn))}}},zY=Gp("top-left"),ZY=Gp("top-right"),HY=Gp("bottom-right"),OY=Gp("bottom-left"),jp=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},XY=jp("top"),VY=jp("right"),GY=jp("bottom"),jY=jp("left"),Kp=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return J0(r)?r.number:0}}},KY=Kp("top"),$Y=Kp("right"),qY=Kp("bottom"),WY=Kp("left"),JY={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},eP={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},tP={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter($i).reduce(function(r,a){return r|rP(a.value)},0)}},rP=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},iP={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},nP={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Ap;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Ap||(Ap={}));var aP={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Ap.STRICT;case"normal":default:return Ap.NORMAL}}},sP={name:"line-height",initialValue:"normal",prefix:!1,type:4},B6=function(t,e){return $i(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:pn(t)?Ei(t,e):e},oP={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:B_.parse(t,e)}},lP={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},AP={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},$p=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},cP=$p("top"),hP=$p("right"),uP=$p("bottom"),dP=$p("left"),fP={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter($i).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},gP={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},qp=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},pP=qp("top"),mP=qp("right"),_P=qp("bottom"),bP=qp("left"),yP={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},vP={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},xP={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&h4(e[0],"none")?[]:yo(e).map(function(r){for(var a={color:Q0.TRANSPARENT,offsetX:qn,offsetY:qn,blur:qn},l=0,u=0;u<r.length;u++){var h=r[u];Gl(h)?(l===0?a.offsetX=h:l===1?a.offsetY=h:a.blur=h,l++):a.color=Zl.parse(t,h)}return a})}},wP={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},BP={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=RP[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},CP=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},MP=function(t){var e=t.filter(function(y){return y.type===17}).map(function(y){return y.number}),r=e[0],a=e[1];e[2],e[3];var l=e[4],u=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var h=e[12],s=e[13];return e[14],e[15],e.length===16?[r,a,l,u,h,s]:null},RP={matrix:CP,matrix3d:MP},C6={type:16,number:50,flags:W0},IP=[C6,C6],UP={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(pn);return r.length!==2?IP:[r[0],r[1]]}},EP={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},p0;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(p0||(p0={}));var FP={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return p0.BREAK_ALL;case"keep-all":return p0.KEEP_ALL;case"normal":default:return p0.NORMAL}}},TP={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Zp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Mw={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},SP={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Zp(e)?e.number:1}},NP={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},YP={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter($i).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},PP={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],a=[];return e.forEach(function(l){switch(l.type){case 20:case 0:r.push(l.value);break;case 17:r.push(l.number.toString());break;case 4:a.push(r.join(" ")),r.length=0;break}}),r.length&&a.push(r.join(" ")),a.map(function(l){return l.indexOf(" ")===-1?l:"'"+l+"'"})}},LP={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},QP={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Zp(e))return e.number;if($i(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},kP={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter($i).map(function(r){return r.value})}},DP={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Cn=function(t,e){return(t&e)!==0},zP={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(J0).map(function(r){return Mw.parse(t,r)})}},ZP={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&h4(e[0],"none")?[]:yo(e).map(function(r){for(var a={color:255,offsetX:qn,offsetY:qn,blur:qn,spread:qn,inset:!1},l=0,u=0;u<r.length;u++){var h=r[u];h4(h,"inset")?a.inset=!0:Gl(h)?(l===0?a.offsetX=h:l===1?a.offsetY=h:l===2?a.blur=h:a.spread=h,l++):a.color=Zl.parse(t,h)}return a})}},HP={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],a=[];return e.filter($i).forEach(function(l){switch(l.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),r.forEach(function(l){a.indexOf(l)===-1&&a.push(l)}),a}},OP={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},XP={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return J0(e)?e.number:0}},VP=function(){function t(e,r){var a,l;this.animationDuration=or(e,zP,r.animationDuration),this.backgroundClip=or(e,bY,r.backgroundClip),this.backgroundColor=or(e,yY,r.backgroundColor),this.backgroundImage=or(e,EY,r.backgroundImage),this.backgroundOrigin=or(e,FY,r.backgroundOrigin),this.backgroundPosition=or(e,TY,r.backgroundPosition),this.backgroundRepeat=or(e,SY,r.backgroundRepeat),this.backgroundSize=or(e,YY,r.backgroundSize),this.borderTopColor=or(e,LY,r.borderTopColor),this.borderRightColor=or(e,QY,r.borderRightColor),this.borderBottomColor=or(e,kY,r.borderBottomColor),this.borderLeftColor=or(e,DY,r.borderLeftColor),this.borderTopLeftRadius=or(e,zY,r.borderTopLeftRadius),this.borderTopRightRadius=or(e,ZY,r.borderTopRightRadius),this.borderBottomRightRadius=or(e,HY,r.borderBottomRightRadius),this.borderBottomLeftRadius=or(e,OY,r.borderBottomLeftRadius),this.borderTopStyle=or(e,XY,r.borderTopStyle),this.borderRightStyle=or(e,VY,r.borderRightStyle),this.borderBottomStyle=or(e,GY,r.borderBottomStyle),this.borderLeftStyle=or(e,jY,r.borderLeftStyle),this.borderTopWidth=or(e,KY,r.borderTopWidth),this.borderRightWidth=or(e,$Y,r.borderRightWidth),this.borderBottomWidth=or(e,qY,r.borderBottomWidth),this.borderLeftWidth=or(e,WY,r.borderLeftWidth),this.boxShadow=or(e,ZP,r.boxShadow),this.color=or(e,JY,r.color),this.direction=or(e,eP,r.direction),this.display=or(e,tP,r.display),this.float=or(e,iP,r.cssFloat),this.fontFamily=or(e,PP,r.fontFamily),this.fontSize=or(e,LP,r.fontSize),this.fontStyle=or(e,DP,r.fontStyle),this.fontVariant=or(e,kP,r.fontVariant),this.fontWeight=or(e,QP,r.fontWeight),this.letterSpacing=or(e,nP,r.letterSpacing),this.lineBreak=or(e,aP,r.lineBreak),this.lineHeight=or(e,sP,r.lineHeight),this.listStyleImage=or(e,oP,r.listStyleImage),this.listStylePosition=or(e,lP,r.listStylePosition),this.listStyleType=or(e,AP,r.listStyleType),this.marginTop=or(e,cP,r.marginTop),this.marginRight=or(e,hP,r.marginRight),this.marginBottom=or(e,uP,r.marginBottom),this.marginLeft=or(e,dP,r.marginLeft),this.opacity=or(e,SP,r.opacity);var u=or(e,fP,r.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=or(e,gP,r.overflowWrap),this.paddingTop=or(e,pP,r.paddingTop),this.paddingRight=or(e,mP,r.paddingRight),this.paddingBottom=or(e,_P,r.paddingBottom),this.paddingLeft=or(e,bP,r.paddingLeft),this.paintOrder=or(e,HP,r.paintOrder),this.position=or(e,vP,r.position),this.textAlign=or(e,yP,r.textAlign),this.textDecorationColor=or(e,NP,(a=r.textDecorationColor)!==null&&a!==void 0?a:r.color),this.textDecorationLine=or(e,YP,(l=r.textDecorationLine)!==null&&l!==void 0?l:r.textDecoration),this.textShadow=or(e,xP,r.textShadow),this.textTransform=or(e,wP,r.textTransform),this.transform=or(e,BP,r.transform),this.transformOrigin=or(e,UP,r.transformOrigin),this.visibility=or(e,EP,r.visibility),this.webkitTextStrokeColor=or(e,OP,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(e,XP,r.webkitTextStrokeWidth),this.wordBreak=or(e,FP,r.wordBreak),this.zIndex=or(e,TP,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Lh(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Cn(this.display,4)||Cn(this.display,33554432)||Cn(this.display,268435456)||Cn(this.display,536870912)||Cn(this.display,67108864)||Cn(this.display,134217728)},t}(),or=function(t,e,r){var a=new lw,l=r!==null&&typeof r<"u"?r.toString():e.initialValue;a.write(l);var u=new Aw(a.read());switch(e.type){case 2:var h=u.parseComponentValue();return e.parse(t,$i(h)?h.value:e.initialValue);case 0:return e.parse(t,u.parseComponentValue());case 1:return e.parse(t,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(e.format){case"angle":return Op.parse(t,u.parseComponentValue());case"color":return Zl.parse(t,u.parseComponentValue());case"image":return B_.parse(t,u.parseComponentValue());case"length":var s=u.parseComponentValue();return Gl(s)?s:qn;case"length-percentage":var y=u.parseComponentValue();return pn(y)?y:qn;case"time":return Mw.parse(t,u.parseComponentValue())}break}},GP="data-html2canvas-debug",jP=function(t){var e=t.getAttribute(GP);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},M6=function(t,e){var r=jP(t);return r===1||e===r},vo=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,M6(r,3))debugger;this.styles=new VP(e,window.getComputedStyle(r,null)),jL(r)&&(this.styles.animationDuration.some(function(a){return a>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=v_(this.context,r),M6(r,4)&&(this.flags|=16)}return t}(),KP="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",R6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var q1=0;q1<R6.length;q1++)Jd[R6.charCodeAt(q1)]=q1;var $P=function(t){var e=t.length*.75,r=t.length,a,l=0,u,h,s,y;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var x=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),C=Array.isArray(x)?x:new Uint8Array(x);for(a=0;a<r;a+=4)u=Jd[t.charCodeAt(a)],h=Jd[t.charCodeAt(a+1)],s=Jd[t.charCodeAt(a+2)],y=Jd[t.charCodeAt(a+3)],C[l++]=u<<2|h>>4,C[l++]=(h&15)<<4|s>>2,C[l++]=(s&3)<<6|y&63;return x},qP=function(t){for(var e=t.length,r=[],a=0;a<e;a+=2)r.push(t[a+1]<<8|t[a]);return r},WP=function(t){for(var e=t.length,r=[],a=0;a<e;a+=4)r.push(t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a]);return r},rc=5,C_=11,J3=2,JP=C_-rc,Rw=65536>>rc,eL=1<<rc,em=eL-1,tL=1024>>rc,rL=Rw+tL,iL=rL,nL=32,aL=iL+nL,sL=65536>>C_,oL=1<<JP,lL=oL-1,I6=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},AL=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},cL=function(t,e){var r=$P(t),a=Array.isArray(r)?WP(r):new Uint32Array(r),l=Array.isArray(r)?qP(r):new Uint16Array(r),u=24,h=I6(l,u/2,a[4]/2),s=a[5]===2?I6(l,(u+a[4])/2):AL(a,Math.ceil((u+a[4])/4));return new hL(a[0],a[1],a[2],a[3],h,s)},hL=function(){function t(e,r,a,l,u,h){this.initialValue=e,this.errorValue=r,this.highStart=a,this.highValueIndex=l,this.index=u,this.data=h}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>rc],r=(r<<J3)+(e&em),this.data[r];if(e<=65535)return r=this.index[Rw+(e-55296>>rc)],r=(r<<J3)+(e&em),this.data[r];if(e<this.highStart)return r=aL-sL+(e>>C_),r=this.index[r],r+=e>>rc&lL,r=this.index[r],r=(r<<J3)+(e&em),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),U6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var W1=0;W1<U6.length;W1++)uL[U6.charCodeAt(W1)]=W1;var dL=1,tm=2,rm=3,E6=4,F6=5,fL=7,T6=8,im=9,nm=10,S6=11,N6=12,Y6=13,P6=14,am=15,gL=function(t){for(var e=[],r=0,a=t.length;r<a;){var l=t.charCodeAt(r++);if(l>=55296&&l<=56319&&r<a){var u=t.charCodeAt(r++);(u&64512)===56320?e.push(((l&1023)<<10)+(u&1023)+65536):(e.push(l),r--)}else e.push(l)}return e},pL=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var a=[],l=-1,u="";++l<r;){var h=t[l];h<=65535?a.push(h):(h-=65536,a.push((h>>10)+55296,h%1024+56320)),(l+1===r||a.length>16384)&&(u+=String.fromCharCode.apply(String,a),a.length=0)}return u},mL=cL(KP),cs="",sm="",_L=function(t){return mL.get(t)},bL=function(t,e,r){var a=r-2,l=e[a],u=e[r-1],h=e[r];if(u===tm&&h===rm)return cs;if(u===tm||u===rm||u===E6||h===tm||h===rm||h===E6)return sm;if(u===T6&&[T6,im,S6,N6].indexOf(h)!==-1||(u===S6||u===im)&&(h===im||h===nm)||(u===N6||u===nm)&&h===nm||h===Y6||h===F6||h===fL||u===dL)return cs;if(u===Y6&&h===P6){for(;l===F6;)l=e[--a];if(l===P6)return cs}if(u===am&&h===am){for(var s=0;l===am;)s++,l=e[--a];if(s%2===0)return cs}return sm},yL=function(t){var e=gL(t),r=e.length,a=0,l=0,u=e.map(_L);return{next:function(){if(a>=r)return{done:!0,value:null};for(var h=cs;a<r&&(h=bL(e,u,++a))===cs;);if(h!==cs||a===r){var s=pL.apply(null,e.slice(l,a));return l=a,{value:s,done:!1}}return{done:!0,value:null}}}},vL=function(t){for(var e=yL(t),r=[],a;!(a=e.next()).done;)a.value&&r.push(a.value.slice());return r},xL=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var a=t.createElement("boundtest");a.style.height=e+"px",a.style.display="block",t.body.appendChild(a),r.selectNode(a);var l=r.getBoundingClientRect(),u=Math.round(l.height);if(t.body.removeChild(a),u===e)return!0}}return!1},wL=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=e.firstChild,l=zp(a.data).map(function(y){return an(y)}),u=0,h={},s=l.every(function(y,x){r.setStart(a,u),r.setEnd(a,u+y.length);var C=r.getBoundingClientRect();u+=y.length;var I=C.x>h.x||C.y>h.y;return h=C,x===0?!0:I});return t.body.removeChild(e),s},BL=function(){return typeof new Image().crossOrigin<"u"},CL=function(){return typeof new XMLHttpRequest().responseType=="string"},ML=function(t){var e=new Image,r=t.createElement("canvas"),a=r.getContext("2d");if(!a)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},L6=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},RL=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var a=e.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,r,r);var l=new Image,u=e.toDataURL();l.src=u;var h=u4(r,r,0,0,l);return a.fillStyle="red",a.fillRect(0,0,r,r),Q6(h).then(function(s){a.drawImage(s,0,0);var y=a.getImageData(0,0,r,r).data;a.fillStyle="red",a.fillRect(0,0,r,r);var x=t.createElement("div");return x.style.backgroundImage="url("+u+")",x.style.height=r+"px",L6(y)?Q6(u4(r,r,0,0,x)):Promise.reject(!1)}).then(function(s){return a.drawImage(s,0,0),L6(a.getImageData(0,0,r,r).data)}).catch(function(){return!1})},u4=function(t,e,r,a,l){var u="http://www.w3.org/2000/svg",h=document.createElementNS(u,"svg"),s=document.createElementNS(u,"foreignObject");return h.setAttributeNS(null,"width",t.toString()),h.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",r.toString()),s.setAttributeNS(null,"y",a.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),h.appendChild(s),s.appendChild(l),h},Q6=function(t){return new Promise(function(e,r){var a=new Image;a.onload=function(){return e(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},za={get SUPPORT_RANGE_BOUNDS(){var t=xL(document);return Object.defineProperty(za,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=za.SUPPORT_RANGE_BOUNDS&&wL(document);return Object.defineProperty(za,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=ML(document);return Object.defineProperty(za,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?RL(document):Promise.resolve(!1);return Object.defineProperty(za,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=BL();return Object.defineProperty(za,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=CL();return Object.defineProperty(za,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(za,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(za,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},m0=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),IL=function(t,e,r,a){var l=FL(e,r),u=[],h=0;return l.forEach(function(s){if(r.textDecorationLine.length||s.trim().length>0)if(za.SUPPORT_RANGE_BOUNDS){var y=k6(a,h,s.length).getClientRects();if(y.length>1){var x=M_(s),C=0;x.forEach(function(U){u.push(new m0(U,lc.fromDOMRectList(t,k6(a,C+h,U.length).getClientRects()))),C+=U.length})}else u.push(new m0(s,lc.fromDOMRectList(t,y)))}else{var I=a.splitText(s.length);u.push(new m0(s,UL(t,a))),a=I}else za.SUPPORT_RANGE_BOUNDS||(a=a.splitText(s.length));h+=s.length}),u},UL=function(t,e){var r=e.ownerDocument;if(r){var a=r.createElement("html2canvaswrapper");a.appendChild(e.cloneNode(!0));var l=e.parentNode;if(l){l.replaceChild(a,e);var u=v_(t,a);return a.firstChild&&l.replaceChild(a.firstChild,a),u}}return lc.EMPTY},k6=function(t,e,r){var a=t.ownerDocument;if(!a)throw new Error("Node has no owner document");var l=a.createRange();return l.setStart(t,e),l.setEnd(t,e+r),l},M_=function(t){if(za.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return vL(t)},EL=function(t,e){if(za.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(a){return a.segment})}return SL(t,e)},FL=function(t,e){return e.letterSpacing!==0?M_(t):EL(t,e)},TL=[32,160,4961,65792,65793,4153,4241],SL=function(t,e){for(var r=hN(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),a=[],l,u=function(){if(l.value){var h=l.value.slice(),s=zp(h),y="";s.forEach(function(x){TL.indexOf(x)===-1?y+=an(x):(y.length&&a.push(y),a.push(an(x)),y="")}),y.length&&a.push(y)}};!(l=r.next()).done;)u();return a},NL=function(){function t(e,r,a){this.text=YL(r.data,a.textTransform),this.textBounds=IL(e,this.text,a,r)}return t}(),YL=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(PL,LL);case 2:return t.toUpperCase();default:return t}},PL=/(^|\s|:|-|\(|\))([a-z])/g,LL=function(t,e,r){return t.length>0?e+r.toUpperCase():t},Iw=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;return l.src=a.currentSrc||a.src,l.intrinsicWidth=a.naturalWidth,l.intrinsicHeight=a.naturalHeight,l.context.cache.addImage(l.src),l}return e}(vo),Uw=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;return l.canvas=a,l.intrinsicWidth=a.width,l.intrinsicHeight=a.height,l}return e}(vo),Ew=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this,u=new XMLSerializer,h=v_(r,a);return a.setAttribute("width",h.width+"px"),a.setAttribute("height",h.height+"px"),l.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(a)),l.intrinsicWidth=a.width.baseVal.value,l.intrinsicHeight=a.height.baseVal.value,l.context.cache.addImage(l.svg),l}return e}(vo),Fw=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;return l.value=a.value,l}return e}(vo),d4=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;return l.start=a.start,l.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,l}return e}(vo),QL=[{type:15,flags:0,unit:"px",number:3}],kL=[{type:16,flags:0,number:50}],DL=function(t){return t.width>t.height?new lc(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new lc(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},zL=function(t){var e=t.type===ZL?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},cp="checkbox",hp="radio",ZL="password",D6=707406591,R_=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;switch(l.type=a.type.toLowerCase(),l.checked=a.checked,l.value=zL(a),(l.type===cp||l.type===hp)&&(l.styles.backgroundColor=3739148031,l.styles.borderTopColor=l.styles.borderRightColor=l.styles.borderBottomColor=l.styles.borderLeftColor=2779096575,l.styles.borderTopWidth=l.styles.borderRightWidth=l.styles.borderBottomWidth=l.styles.borderLeftWidth=1,l.styles.borderTopStyle=l.styles.borderRightStyle=l.styles.borderBottomStyle=l.styles.borderLeftStyle=1,l.styles.backgroundClip=[0],l.styles.backgroundOrigin=[0],l.bounds=DL(l.bounds)),l.type){case cp:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=QL;break;case hp:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=kL;break}return l}return e}(vo),Tw=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this,u=a.options[a.selectedIndex||0];return l.value=u&&u.text||"",l}return e}(vo),Sw=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;return l.value=a.value,l}return e}(vo),Nw=function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;l.src=a.src,l.width=parseInt(a.width,10)||0,l.height=parseInt(a.height,10)||0,l.backgroundColor=l.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){l.tree=OL(r,a.contentWindow.document.documentElement);var u=a.contentWindow.document.documentElement?v6(r,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):Q0.TRANSPARENT,h=a.contentWindow.document.body?v6(r,getComputedStyle(a.contentWindow.document.body).backgroundColor):Q0.TRANSPARENT;l.backgroundColor=Lh(u)?Lh(h)?l.styles.backgroundColor:h:u}}catch{}return l}return e}(vo),HL=["OL","UL","MENU"],wg=function(t,e,r,a){for(var l=e.firstChild,u=void 0;l;l=u)if(u=l.nextSibling,GL(l)&&l.data.trim().length>0)r.textNodes.push(new NL(t,l,r.styles));else if(Pw(l))if(iQ(l)&&l.assignedNodes)l.assignedNodes().forEach(function(s){return wg(t,s,r,a)});else{var h=Yw(t,l);h.styles.isVisible()&&(XL(l,h,a)?h.flags|=4:VL(h.styles)&&(h.flags|=2),HL.indexOf(l.tagName)!==-1&&(h.flags|=8),r.elements.push(h),l.slot,l.shadowRoot?wg(t,l.shadowRoot,h,a):!Qw(l)&&!Lw(l)&&!kw(l)&&wg(t,l,h,a))}},Yw=function(t,e){return tQ(e)?new Iw(t,e):eQ(e)?new Uw(t,e):Lw(e)?new Ew(t,e):$L(e)?new Fw(t,e):qL(e)?new d4(t,e):WL(e)?new R_(t,e):kw(e)?new Tw(t,e):Qw(e)?new Sw(t,e):rQ(e)?new Nw(t,e):new vo(t,e)},OL=function(t,e){var r=Yw(t,e);return r.flags|=4,wg(t,e,r,r),r},XL=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||JL(t)&&r.styles.isTransparent()},VL=function(t){return t.isPositioned()||t.isFloating()},GL=function(t){return t.nodeType===Node.TEXT_NODE},Pw=function(t){return t.nodeType===Node.ELEMENT_NODE},jL=function(t){return Pw(t)&&typeof t.style<"u"&&!KL(t)},KL=function(t){return typeof t.className=="object"},$L=function(t){return t.tagName==="LI"},qL=function(t){return t.tagName==="OL"},WL=function(t){return t.tagName==="INPUT"},Lw=function(t){return t.tagName==="svg"},JL=function(t){return t.tagName==="BODY"},eQ=function(t){return t.tagName==="CANVAS"},tQ=function(t){return t.tagName==="IMG"},rQ=function(t){return t.tagName==="IFRAME"},Qw=function(t){return t.tagName==="TEXTAREA"},kw=function(t){return t.tagName==="SELECT"},iQ=function(t){return t.tagName==="SLOT"},z6={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Z6={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},nQ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aQ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ph=function(t,e,r,a,l,u){return t<e||t>r?I_(t,l,u.length>0):a.integers.reduce(function(h,s,y){for(;t>=s;)t-=s,h+=a.values[y];return h},"")+u},Dw=function(t,e,r,a){var l="";do r||t--,l=a(t)+l,t/=e;while(t*e>=e);return l},rn=function(t,e,r,a,l){var u=r-e+1;return(t<0?"-":"")+(Dw(Math.abs(t),u,a,function(h){return an(Math.floor(h%u)+e)})+l)},zA=function(t,e,r){r===void 0&&(r=". ");var a=e.length;return Dw(Math.abs(t),a,!1,function(l){return e[Math.floor(l%a)]})+r},Bh=1,Il=2,Ul=4,e0=8,ko=function(t,e,r,a,l,u){if(t<-9999||t>9999)return I_(t,4,l.length>0);var h=Math.abs(t),s=l;if(h===0)return e[0]+s;for(var y=0;h>0&&y<=4;y++){var x=h%10;x===0&&Cn(u,Bh)&&s!==""?s=e[x]+s:x>1||x===1&&y===0||x===1&&y===1&&Cn(u,Il)||x===1&&y===1&&Cn(u,Ul)&&t>100||x===1&&y>1&&Cn(u,e0)?s=e[x]+(y>0?r[y-1]:"")+s:x===1&&y>0&&(s=r[y-1]+s),h=Math.floor(h/10)}return(t<0?a:"")+s},H6="",O6="",X6="",om="",I_=function(t,e,r){var a=r?". ":"",l=r?"":"",u=r?", ":"",h=r?" ":"";switch(e){case 0:return""+h;case 1:return""+h;case 2:return""+h;case 5:var s=rn(t,48,57,!0,a);return s.length<4?"0"+s:s;case 4:return zA(t,"",l);case 6:return ph(t,1,3999,z6,3,a).toLowerCase();case 7:return ph(t,1,3999,z6,3,a);case 8:return rn(t,945,969,!1,a);case 9:return rn(t,97,122,!1,a);case 10:return rn(t,65,90,!1,a);case 11:return rn(t,1632,1641,!0,a);case 12:case 49:return ph(t,1,9999,Z6,3,a);case 35:return ph(t,1,9999,Z6,3,a).toLowerCase();case 13:return rn(t,2534,2543,!0,a);case 14:case 30:return rn(t,6112,6121,!0,a);case 15:return zA(t,"",l);case 16:return zA(t,"",l);case 17:case 48:return ko(t,"",H6,"",l,Il|Ul|e0);case 47:return ko(t,"",O6,"",l,Bh|Il|Ul|e0);case 42:return ko(t,"",H6,"",l,Il|Ul|e0);case 41:return ko(t,"",O6,"",l,Bh|Il|Ul|e0);case 26:return ko(t,"","",X6,l,0);case 25:return ko(t,"","",X6,l,Bh|Il|Ul);case 31:return ko(t,"","",om,u,Bh|Il|Ul);case 33:return ko(t,"","",om,u,0);case 32:return ko(t,"","",om,u,Bh|Il|Ul);case 18:return rn(t,2406,2415,!0,a);case 20:return ph(t,1,19999,aQ,3,a);case 21:return rn(t,2790,2799,!0,a);case 22:return rn(t,2662,2671,!0,a);case 22:return ph(t,1,10999,nQ,3,a);case 23:return zA(t,"");case 24:return zA(t,"");case 27:return rn(t,3302,3311,!0,a);case 28:return zA(t,"",l);case 29:return zA(t,"",l);case 34:return rn(t,3792,3801,!0,a);case 37:return rn(t,6160,6169,!0,a);case 38:return rn(t,4160,4169,!0,a);case 39:return rn(t,2918,2927,!0,a);case 40:return rn(t,1776,1785,!0,a);case 43:return rn(t,3046,3055,!0,a);case 44:return rn(t,3174,3183,!0,a);case 45:return rn(t,3664,3673,!0,a);case 46:return rn(t,3872,3881,!0,a);case 3:default:return rn(t,48,57,!0,a)}},V6;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(V6||(V6={}));var sQ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),$t=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),mh=function(t,e,r){return new $t(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},J1=function(){function t(e,r,a,l){this.type=1,this.start=e,this.startControl=r,this.endControl=a,this.end=l}return t.prototype.subdivide=function(e,r){var a=mh(this.start,this.startControl,e),l=mh(this.startControl,this.endControl,e),u=mh(this.endControl,this.end,e),h=mh(a,l,e),s=mh(l,u,e),y=mh(h,s,e);return r?new t(this.start,a,h,y):new t(y,s,u,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),hs=function(t){return t.type===1},oQ=function(){function t(e){var r=e.styles,a=e.bounds,l=Wd(r.borderTopLeftRadius,a.width,a.height),u=l[0],h=l[1],s=Wd(r.borderTopRightRadius,a.width,a.height),y=s[0],x=s[1],C=Wd(r.borderBottomRightRadius,a.width,a.height),I=C[0],U=C[1],R=Wd(r.borderBottomLeftRadius,a.width,a.height),N=R[0],D=R[1],O=[];O.push((u+y)/a.width),O.push((N+I)/a.width),O.push((h+D)/a.height),O.push((x+U)/a.height);var H=Math.max.apply(Math,O);H>1&&(u/=H,h/=H,y/=H,x/=H,I/=H,U/=H,N/=H,D/=H);var W=a.width-y,se=a.height-U,de=a.width-I,le=a.height-D,he=r.borderTopWidth,ae=r.borderRightWidth,V=r.borderBottomWidth,K=r.borderLeftWidth,oe=Ei(r.paddingTop,e.bounds.width),ce=Ei(r.paddingRight,e.bounds.width),ye=Ei(r.paddingBottom,e.bounds.width),we=Ei(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||h>0?zi(a.left+K/3,a.top+he/3,u-K/3,h-he/3,li.TOP_LEFT):new $t(a.left+K/3,a.top+he/3),this.topRightBorderDoubleOuterBox=u>0||h>0?zi(a.left+W,a.top+he/3,y-ae/3,x-he/3,li.TOP_RIGHT):new $t(a.left+a.width-ae/3,a.top+he/3),this.bottomRightBorderDoubleOuterBox=I>0||U>0?zi(a.left+de,a.top+se,I-ae/3,U-V/3,li.BOTTOM_RIGHT):new $t(a.left+a.width-ae/3,a.top+a.height-V/3),this.bottomLeftBorderDoubleOuterBox=N>0||D>0?zi(a.left+K/3,a.top+le,N-K/3,D-V/3,li.BOTTOM_LEFT):new $t(a.left+K/3,a.top+a.height-V/3),this.topLeftBorderDoubleInnerBox=u>0||h>0?zi(a.left+K*2/3,a.top+he*2/3,u-K*2/3,h-he*2/3,li.TOP_LEFT):new $t(a.left+K*2/3,a.top+he*2/3),this.topRightBorderDoubleInnerBox=u>0||h>0?zi(a.left+W,a.top+he*2/3,y-ae*2/3,x-he*2/3,li.TOP_RIGHT):new $t(a.left+a.width-ae*2/3,a.top+he*2/3),this.bottomRightBorderDoubleInnerBox=I>0||U>0?zi(a.left+de,a.top+se,I-ae*2/3,U-V*2/3,li.BOTTOM_RIGHT):new $t(a.left+a.width-ae*2/3,a.top+a.height-V*2/3),this.bottomLeftBorderDoubleInnerBox=N>0||D>0?zi(a.left+K*2/3,a.top+le,N-K*2/3,D-V*2/3,li.BOTTOM_LEFT):new $t(a.left+K*2/3,a.top+a.height-V*2/3),this.topLeftBorderStroke=u>0||h>0?zi(a.left+K/2,a.top+he/2,u-K/2,h-he/2,li.TOP_LEFT):new $t(a.left+K/2,a.top+he/2),this.topRightBorderStroke=u>0||h>0?zi(a.left+W,a.top+he/2,y-ae/2,x-he/2,li.TOP_RIGHT):new $t(a.left+a.width-ae/2,a.top+he/2),this.bottomRightBorderStroke=I>0||U>0?zi(a.left+de,a.top+se,I-ae/2,U-V/2,li.BOTTOM_RIGHT):new $t(a.left+a.width-ae/2,a.top+a.height-V/2),this.bottomLeftBorderStroke=N>0||D>0?zi(a.left+K/2,a.top+le,N-K/2,D-V/2,li.BOTTOM_LEFT):new $t(a.left+K/2,a.top+a.height-V/2),this.topLeftBorderBox=u>0||h>0?zi(a.left,a.top,u,h,li.TOP_LEFT):new $t(a.left,a.top),this.topRightBorderBox=y>0||x>0?zi(a.left+W,a.top,y,x,li.TOP_RIGHT):new $t(a.left+a.width,a.top),this.bottomRightBorderBox=I>0||U>0?zi(a.left+de,a.top+se,I,U,li.BOTTOM_RIGHT):new $t(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=N>0||D>0?zi(a.left,a.top+le,N,D,li.BOTTOM_LEFT):new $t(a.left,a.top+a.height),this.topLeftPaddingBox=u>0||h>0?zi(a.left+K,a.top+he,Math.max(0,u-K),Math.max(0,h-he),li.TOP_LEFT):new $t(a.left+K,a.top+he),this.topRightPaddingBox=y>0||x>0?zi(a.left+Math.min(W,a.width-ae),a.top+he,W>a.width+ae?0:Math.max(0,y-ae),Math.max(0,x-he),li.TOP_RIGHT):new $t(a.left+a.width-ae,a.top+he),this.bottomRightPaddingBox=I>0||U>0?zi(a.left+Math.min(de,a.width-K),a.top+Math.min(se,a.height-V),Math.max(0,I-ae),Math.max(0,U-V),li.BOTTOM_RIGHT):new $t(a.left+a.width-ae,a.top+a.height-V),this.bottomLeftPaddingBox=N>0||D>0?zi(a.left+K,a.top+Math.min(le,a.height-V),Math.max(0,N-K),Math.max(0,D-V),li.BOTTOM_LEFT):new $t(a.left+K,a.top+a.height-V),this.topLeftContentBox=u>0||h>0?zi(a.left+K+we,a.top+he+oe,Math.max(0,u-(K+we)),Math.max(0,h-(he+oe)),li.TOP_LEFT):new $t(a.left+K+we,a.top+he+oe),this.topRightContentBox=y>0||x>0?zi(a.left+Math.min(W,a.width+K+we),a.top+he+oe,W>a.width+K+we?0:y-K+we,x-(he+oe),li.TOP_RIGHT):new $t(a.left+a.width-(ae+ce),a.top+he+oe),this.bottomRightContentBox=I>0||U>0?zi(a.left+Math.min(de,a.width-(K+we)),a.top+Math.min(se,a.height+he+oe),Math.max(0,I-(ae+ce)),U-(V+ye),li.BOTTOM_RIGHT):new $t(a.left+a.width-(ae+ce),a.top+a.height-(V+ye)),this.bottomLeftContentBox=N>0||D>0?zi(a.left+K+we,a.top+le,Math.max(0,N-(K+we)),D-(V+ye),li.BOTTOM_LEFT):new $t(a.left+K+we,a.top+a.height-(V+ye))}return t}(),li;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(li||(li={}));var zi=function(t,e,r,a,l){var u=4*((Math.sqrt(2)-1)/3),h=r*u,s=a*u,y=t+r,x=e+a;switch(l){case li.TOP_LEFT:return new J1(new $t(t,x),new $t(t,x-s),new $t(y-h,e),new $t(y,e));case li.TOP_RIGHT:return new J1(new $t(t,e),new $t(t+h,e),new $t(y,x-s),new $t(y,x));case li.BOTTOM_RIGHT:return new J1(new $t(y,e),new $t(y,e+s),new $t(t+h,x),new $t(t,x));case li.BOTTOM_LEFT:default:return new J1(new $t(y,x),new $t(y-h,x),new $t(t,e+s),new $t(t,e))}},up=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},lQ=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},dp=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},AQ=function(){function t(e,r,a){this.offsetX=e,this.offsetY=r,this.matrix=a,this.type=0,this.target=6}return t}(),eg=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),cQ=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),hQ=function(t){return t.type===0},zw=function(t){return t.type===1},uQ=function(t){return t.type===2},G6=function(t,e){return t.length===e.length?t.some(function(r,a){return r===e[a]}):!1},dQ=function(t,e,r,a,l){return t.map(function(u,h){switch(h){case 0:return u.add(e,r);case 1:return u.add(e+a,r);case 2:return u.add(e+a,r+l);case 3:return u.add(e,r+l)}return u})},Zw=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Hw=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new oQ(this.container),this.container.styles.opacity<1&&this.effects.push(new cQ(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,l=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new AQ(a,l,u))}if(this.container.styles.overflowX!==0){var h=up(this.curves),s=dp(this.curves);G6(h,s)?this.effects.push(new eg(h,6)):(this.effects.push(new eg(h,2)),this.effects.push(new eg(s,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,l=this.effects.slice(0);a;){var u=a.effects.filter(function(y){return!zw(y)});if(r||a.container.styles.position!==0||!a.parent){if(l.unshift.apply(l,u),r=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var h=up(a.curves),s=dp(a.curves);G6(h,s)||l.unshift(new eg(s,6))}}else l.unshift.apply(l,u);a=a.parent}return l.filter(function(y){return Cn(y.target,e)})},t}(),f4=function(t,e,r,a){t.container.elements.forEach(function(l){var u=Cn(l.flags,4),h=Cn(l.flags,2),s=new Hw(l,t);Cn(l.styles.display,2048)&&a.push(s);var y=Cn(l.flags,8)?[]:a;if(u||h){var x=u||l.styles.isPositioned()?r:e,C=new Zw(s);if(l.styles.isPositioned()||l.styles.opacity<1||l.styles.isTransformed()){var I=l.styles.zIndex.order;if(I<0){var U=0;x.negativeZIndex.some(function(N,D){return I>N.element.container.styles.zIndex.order?(U=D,!1):U>0}),x.negativeZIndex.splice(U,0,C)}else if(I>0){var R=0;x.positiveZIndex.some(function(N,D){return I>=N.element.container.styles.zIndex.order?(R=D+1,!1):R>0}),x.positiveZIndex.splice(R,0,C)}else x.zeroOrAutoZIndexOrTransformedOrOpacity.push(C)}else l.styles.isFloating()?x.nonPositionedFloats.push(C):x.nonPositionedInlineLevel.push(C);f4(s,C,u?C:r,y)}else l.styles.isInlineLevel()?e.inlineLevel.push(s):e.nonInlineLevel.push(s),f4(s,e,r,y);Cn(l.flags,8)&&Ow(l,y)})},Ow=function(t,e){for(var r=t instanceof d4?t.start:1,a=t instanceof d4?t.reversed:!1,l=0;l<e.length;l++){var u=e[l];u.container instanceof Fw&&typeof u.container.value=="number"&&u.container.value!==0&&(r=u.container.value),u.listValue=I_(r,u.container.styles.listStyleType,!0),r+=a?-1:1}},fQ=function(t){var e=new Hw(t,null),r=new Zw(e),a=[];return f4(e,r,r,a),Ow(e.container,a),r},j6=function(t,e){switch(e){case 0:return ds(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ds(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ds(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ds(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},gQ=function(t,e){switch(e){case 0:return ds(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ds(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ds(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ds(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},pQ=function(t,e){switch(e){case 0:return ds(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ds(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ds(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ds(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},mQ=function(t,e){switch(e){case 0:return tg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return tg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return tg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return tg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},tg=function(t,e){var r=[];return hs(t)?r.push(t.subdivide(.5,!1)):r.push(t),hs(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},ds=function(t,e,r,a){var l=[];return hs(t)?l.push(t.subdivide(.5,!1)):l.push(t),hs(r)?l.push(r.subdivide(.5,!0)):l.push(r),hs(a)?l.push(a.subdivide(.5,!0).reverse()):l.push(a),hs(e)?l.push(e.subdivide(.5,!1).reverse()):l.push(e),l},Xw=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},fp=function(t){var e=t.styles,r=t.bounds,a=Ei(e.paddingLeft,r.width),l=Ei(e.paddingRight,r.width),u=Ei(e.paddingTop,r.width),h=Ei(e.paddingBottom,r.width);return r.add(a+e.borderLeftWidth,u+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+a+l),-(e.borderTopWidth+e.borderBottomWidth+u+h))},_Q=function(t,e){return t===0?e.bounds:t===2?fp(e):Xw(e)},bQ=function(t,e){return t===0?e.bounds:t===2?fp(e):Xw(e)},lm=function(t,e,r){var a=_Q(Ch(t.styles.backgroundOrigin,e),t),l=bQ(Ch(t.styles.backgroundClip,e),t),u=yQ(Ch(t.styles.backgroundSize,e),r,a),h=u[0],s=u[1],y=Wd(Ch(t.styles.backgroundPosition,e),a.width-h,a.height-s),x=vQ(Ch(t.styles.backgroundRepeat,e),y,u,a,l),C=Math.round(a.left+y[0]),I=Math.round(a.top+y[1]);return[x,C,I,h,s]},_h=function(t){return $i(t)&&t.value===Qh.AUTO},rg=function(t){return typeof t=="number"},yQ=function(t,e,r){var a=e[0],l=e[1],u=e[2],h=t[0],s=t[1];if(!h)return[0,0];if(pn(h)&&s&&pn(s))return[Ei(h,r.width),Ei(s,r.height)];var y=rg(u);if($i(h)&&(h.value===Qh.CONTAIN||h.value===Qh.COVER)){if(rg(u)){var x=r.width/r.height;return x<u!=(h.value===Qh.COVER)?[r.width,r.width/u]:[r.height*u,r.height]}return[r.width,r.height]}var C=rg(a),I=rg(l),U=C||I;if(_h(h)&&(!s||_h(s))){if(C&&I)return[a,l];if(!y&&!U)return[r.width,r.height];if(U&&y){var R=C?a:l*u,N=I?l:a/u;return[R,N]}var D=C?a:r.width,O=I?l:r.height;return[D,O]}if(y){var H=0,W=0;return pn(h)?H=Ei(h,r.width):pn(s)&&(W=Ei(s,r.height)),_h(h)?H=W*u:(!s||_h(s))&&(W=H/u),[H,W]}var se=null,de=null;if(pn(h)?se=Ei(h,r.width):s&&pn(s)&&(de=Ei(s,r.height)),se!==null&&(!s||_h(s))&&(de=C&&I?se/a*l:r.height),de!==null&&_h(h)&&(se=C&&I?de/l*a:r.width),se!==null&&de!==null)return[se,de];throw new Error("Unable to calculate background-size for element")},Ch=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},vQ=function(t,e,r,a,l){var u=e[0],h=e[1],s=r[0],y=r[1];switch(t){case 2:return[new $t(Math.round(a.left),Math.round(a.top+h)),new $t(Math.round(a.left+a.width),Math.round(a.top+h)),new $t(Math.round(a.left+a.width),Math.round(y+a.top+h)),new $t(Math.round(a.left),Math.round(y+a.top+h))];case 3:return[new $t(Math.round(a.left+u),Math.round(a.top)),new $t(Math.round(a.left+u+s),Math.round(a.top)),new $t(Math.round(a.left+u+s),Math.round(a.height+a.top)),new $t(Math.round(a.left+u),Math.round(a.height+a.top))];case 1:return[new $t(Math.round(a.left+u),Math.round(a.top+h)),new $t(Math.round(a.left+u+s),Math.round(a.top+h)),new $t(Math.round(a.left+u+s),Math.round(a.top+h+y)),new $t(Math.round(a.left+u),Math.round(a.top+h+y))];default:return[new $t(Math.round(l.left),Math.round(l.top)),new $t(Math.round(l.left+l.width),Math.round(l.top)),new $t(Math.round(l.left+l.width),Math.round(l.height+l.top)),new $t(Math.round(l.left),Math.round(l.height+l.top))]}},xQ="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",K6="Hidden Text",wQ=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var a=this._document.createElement("div"),l=this._document.createElement("img"),u=this._document.createElement("span"),h=this._document.body;a.style.visibility="hidden",a.style.fontFamily=e,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",h.appendChild(a),l.src=xQ,l.width=1,l.height=1,l.style.margin="0",l.style.padding="0",l.style.verticalAlign="baseline",u.style.fontFamily=e,u.style.fontSize=r,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode(K6)),a.appendChild(u),a.appendChild(l);var s=l.offsetTop-u.offsetTop+2;a.removeChild(u),a.appendChild(this._document.createTextNode(K6)),a.style.lineHeight="normal",l.style.verticalAlign="super";var y=l.offsetTop-a.offsetTop+2;return h.removeChild(a),{baseline:s,middle:y}},t.prototype.getMetrics=function(e,r){var a=e+" "+r;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(e,r)),this._data[a]},t}(),Vw=function(){function t(e,r){this.context=e,this.options=r}return t}(),BQ=1e4;(function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;return l._activeEffects=[],l.canvas=a.canvas?a.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),a.canvas||(l.canvas.width=Math.floor(a.width*a.scale),l.canvas.height=Math.floor(a.height*a.scale),l.canvas.style.width=a.width+"px",l.canvas.style.height=a.height+"px"),l.fontMetrics=new wQ(document),l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-a.x,-a.y),l.ctx.textBaseline="bottom",l._activeEffects=[],l.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),l}return e.prototype.applyEffects=function(r){for(var a=this;this._activeEffects.length;)this.popEffect();r.forEach(function(l){return a.applyEffect(l)})},e.prototype.applyEffect=function(r){this.ctx.save(),uQ(r)&&(this.ctx.globalAlpha=r.opacity),hQ(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),zw(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return os(this,void 0,void 0,function(){var a;return ka(this,function(l){switch(l.label){case 0:return a=r.element.container.styles,a.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return os(this,void 0,void 0,function(){return ka(this,function(a){switch(a.label){case 0:if(Cn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,a,l){var u=this;if(a===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+l);else{var h=M_(r.text);h.reduce(function(s,y){return u.ctx.fillText(y,s,r.bounds.top+l),s+u.ctx.measureText(y).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var a=r.fontVariant.filter(function(h){return h==="normal"||h==="small-caps"}).join(""),l=UQ(r.fontFamily).join(", "),u=J0(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,a,r.fontWeight,u,l].join(" "),l,u]},e.prototype.renderTextNode=function(r,a){return os(this,void 0,void 0,function(){var l,u,h,s,y,x,C,I,U=this;return ka(this,function(R){return l=this.createFontStyle(a),u=l[0],h=l[1],s=l[2],this.ctx.font=u,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",y=this.fontMetrics.getMetrics(h,s),x=y.baseline,C=y.middle,I=a.paintOrder,r.textBounds.forEach(function(N){I.forEach(function(D){switch(D){case 0:U.ctx.fillStyle=Yn(a.color),U.renderTextWithLetterSpacing(N,a.letterSpacing,x);var O=a.textShadow;O.length&&N.text.trim().length&&(O.slice(0).reverse().forEach(function(H){U.ctx.shadowColor=Yn(H.color),U.ctx.shadowOffsetX=H.offsetX.number*U.options.scale,U.ctx.shadowOffsetY=H.offsetY.number*U.options.scale,U.ctx.shadowBlur=H.blur.number,U.renderTextWithLetterSpacing(N,a.letterSpacing,x)}),U.ctx.shadowColor="",U.ctx.shadowOffsetX=0,U.ctx.shadowOffsetY=0,U.ctx.shadowBlur=0),a.textDecorationLine.length&&(U.ctx.fillStyle=Yn(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(H){switch(H){case 1:U.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top+x),N.bounds.width,1);break;case 2:U.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top),N.bounds.width,1);break;case 3:U.ctx.fillRect(N.bounds.left,Math.ceil(N.bounds.top+C),N.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&N.text.trim().length&&(U.ctx.strokeStyle=Yn(a.webkitTextStrokeColor),U.ctx.lineWidth=a.webkitTextStrokeWidth,U.ctx.lineJoin=window.chrome?"miter":"round",U.ctx.strokeText(N.text,N.bounds.left,N.bounds.top+x)),U.ctx.strokeStyle="",U.ctx.lineWidth=0,U.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,a,l){if(l&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var u=fp(r),h=dp(a);this.path(h),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(l,0,0,r.intrinsicWidth,r.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return os(this,void 0,void 0,function(){var a,l,u,h,s,y,W,W,x,C,I,U,de,R,N,le,D,O,H,W,se,de,le;return ka(this,function(he){switch(he.label){case 0:this.applyEffects(r.getEffects(4)),a=r.container,l=r.curves,u=a.styles,h=0,s=a.textNodes,he.label=1;case 1:return h<s.length?(y=s[h],[4,this.renderTextNode(y,u)]):[3,4];case 2:he.sent(),he.label=3;case 3:return h++,[3,1];case 4:if(!(a instanceof Iw))return[3,8];he.label=5;case 5:return he.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return W=he.sent(),this.renderReplacedElement(a,l,W),[3,8];case 7:return he.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof Uw&&this.renderReplacedElement(a,l,a.canvas),!(a instanceof Ew))return[3,12];he.label=9;case 9:return he.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return W=he.sent(),this.renderReplacedElement(a,l,W),[3,12];case 11:return he.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof Nw&&a.tree?(x=new e(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,x.render(a.tree)]):[3,14];case 13:C=he.sent(),a.width&&a.height&&this.ctx.drawImage(C,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),he.label=14;case 14:if(a instanceof R_&&(I=Math.min(a.bounds.width,a.bounds.height),a.type===cp?a.checked&&(this.ctx.save(),this.path([new $t(a.bounds.left+I*.39363,a.bounds.top+I*.79),new $t(a.bounds.left+I*.16,a.bounds.top+I*.5549),new $t(a.bounds.left+I*.27347,a.bounds.top+I*.44071),new $t(a.bounds.left+I*.39694,a.bounds.top+I*.5649),new $t(a.bounds.left+I*.72983,a.bounds.top+I*.23),new $t(a.bounds.left+I*.84,a.bounds.top+I*.34085),new $t(a.bounds.left+I*.39363,a.bounds.top+I*.79)]),this.ctx.fillStyle=Yn(D6),this.ctx.fill(),this.ctx.restore()):a.type===hp&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+I/2,a.bounds.top+I/2,I/4,0,Math.PI*2,!0),this.ctx.fillStyle=Yn(D6),this.ctx.fill(),this.ctx.restore())),CQ(a)&&a.value.length){switch(U=this.createFontStyle(u),de=U[0],R=U[1],N=this.fontMetrics.getMetrics(de,R).baseline,this.ctx.font=de,this.ctx.fillStyle=Yn(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=RQ(a.styles.textAlign),le=fp(a),D=0,a.styles.textAlign){case 1:D+=le.width/2;break;case 2:D+=le.width;break}O=le.add(D,0,0,-le.height/2+1),this.ctx.save(),this.path([new $t(le.left,le.top),new $t(le.left+le.width,le.top),new $t(le.left+le.width,le.top+le.height),new $t(le.left,le.top+le.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new m0(a.value,O),u.letterSpacing,N),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Cn(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(H=a.styles.listStyleImage,H.type!==0)return[3,18];W=void 0,se=H.url,he.label=15;case 15:return he.trys.push([15,17,,18]),[4,this.context.cache.match(se)];case 16:return W=he.sent(),this.ctx.drawImage(W,a.bounds.left-(W.width+10),a.bounds.top),[3,18];case 17:return he.sent(),this.context.logger.error("Error loading list-style-image "+se),[3,18];case 18:return[3,20];case 19:r.listValue&&a.styles.listStyleType!==-1&&(de=this.createFontStyle(u)[0],this.ctx.font=de,this.ctx.fillStyle=Yn(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",le=new lc(a.bounds.left,a.bounds.top+Ei(a.styles.paddingTop,a.bounds.width),a.bounds.width,B6(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new m0(r.listValue,le),u.letterSpacing,B6(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),he.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return os(this,void 0,void 0,function(){var a,l,H,u,h,H,s,y,H,x,C,H,I,U,H,R,N,H,D,O,H;return ka(this,function(W){switch(W.label){case 0:if(Cn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:W.sent(),a=0,l=r.negativeZIndex,W.label=2;case 2:return a<l.length?(H=l[a],[4,this.renderStack(H)]):[3,5];case 3:W.sent(),W.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:W.sent(),u=0,h=r.nonInlineLevel,W.label=7;case 7:return u<h.length?(H=h[u],[4,this.renderNode(H)]):[3,10];case 8:W.sent(),W.label=9;case 9:return u++,[3,7];case 10:s=0,y=r.nonPositionedFloats,W.label=11;case 11:return s<y.length?(H=y[s],[4,this.renderStack(H)]):[3,14];case 12:W.sent(),W.label=13;case 13:return s++,[3,11];case 14:x=0,C=r.nonPositionedInlineLevel,W.label=15;case 15:return x<C.length?(H=C[x],[4,this.renderStack(H)]):[3,18];case 16:W.sent(),W.label=17;case 17:return x++,[3,15];case 18:I=0,U=r.inlineLevel,W.label=19;case 19:return I<U.length?(H=U[I],[4,this.renderNode(H)]):[3,22];case 20:W.sent(),W.label=21;case 21:return I++,[3,19];case 22:R=0,N=r.zeroOrAutoZIndexOrTransformedOrOpacity,W.label=23;case 23:return R<N.length?(H=N[R],[4,this.renderStack(H)]):[3,26];case 24:W.sent(),W.label=25;case 25:return R++,[3,23];case 26:D=0,O=r.positiveZIndex,W.label=27;case 27:return D<O.length?(H=O[D],[4,this.renderStack(H)]):[3,30];case 28:W.sent(),W.label=29;case 29:return D++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var a=this;r.forEach(function(l,u){var h=hs(l)?l.start:l;u===0?a.ctx.moveTo(h.x,h.y):a.ctx.lineTo(h.x,h.y),hs(l)&&a.ctx.bezierCurveTo(l.startControl.x,l.startControl.y,l.endControl.x,l.endControl.y,l.end.x,l.end.y)})},e.prototype.renderRepeat=function(r,a,l,u){this.path(r),this.ctx.fillStyle=a,this.ctx.translate(l,u),this.ctx.fill(),this.ctx.translate(-l,-u)},e.prototype.resizeImage=function(r,a,l){var u;if(r.width===a&&r.height===l)return r;var h=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,s=h.createElement("canvas");s.width=Math.max(1,a),s.height=Math.max(1,l);var y=s.getContext("2d");return y.drawImage(r,0,0,r.width,r.height,0,0,a,l),s},e.prototype.renderBackgroundImage=function(r){return os(this,void 0,void 0,function(){var a,l,u,h,s,y;return ka(this,function(x){switch(x.label){case 0:a=r.styles.backgroundImage.length-1,l=function(C){var I,U,R,oe,nt,rt,we,Ve,V,N,oe,nt,rt,we,Ve,D,O,H,W,se,de,le,he,ae,V,K,oe,ce,ye,we,Ve,ut,nt,rt,ft,_t,gt,Je,je,Qe,pt,$e;return ka(this,function(wt){switch(wt.label){case 0:if(C.type!==0)return[3,5];I=void 0,U=C.url,wt.label=1;case 1:return wt.trys.push([1,3,,4]),[4,u.context.cache.match(U)];case 2:return I=wt.sent(),[3,4];case 3:return wt.sent(),u.context.logger.error("Error loading background-image "+U),[3,4];case 4:return I&&(R=lm(r,a,[I.width,I.height,I.width/I.height]),oe=R[0],nt=R[1],rt=R[2],we=R[3],Ve=R[4],V=u.ctx.createPattern(u.resizeImage(I,we,Ve),"repeat"),u.renderRepeat(oe,V,nt,rt)),[3,6];case 5:RY(C)?(N=lm(r,a,[null,null,null]),oe=N[0],nt=N[1],rt=N[2],we=N[3],Ve=N[4],D=xY(C.angle,we,Ve),O=D[0],H=D[1],W=D[2],se=D[3],de=D[4],le=document.createElement("canvas"),le.width=we,le.height=Ve,he=le.getContext("2d"),ae=he.createLinearGradient(H,se,W,de),x6(C.stops,O).forEach(function(Ct){return ae.addColorStop(Ct.stop,Yn(Ct.color))}),he.fillStyle=ae,he.fillRect(0,0,we,Ve),we>0&&Ve>0&&(V=u.ctx.createPattern(le,"repeat"),u.renderRepeat(oe,V,nt,rt))):IY(C)&&(K=lm(r,a,[null,null,null]),oe=K[0],ce=K[1],ye=K[2],we=K[3],Ve=K[4],ut=C.position.length===0?[w_]:C.position,nt=Ei(ut[0],we),rt=Ei(ut[ut.length-1],Ve),ft=wY(C,nt,rt,we,Ve),_t=ft[0],gt=ft[1],_t>0&&gt>0&&(Je=u.ctx.createRadialGradient(ce+nt,ye+rt,0,ce+nt,ye+rt,_t),x6(C.stops,_t*2).forEach(function(Ct){return Je.addColorStop(Ct.stop,Yn(Ct.color))}),u.path(oe),u.ctx.fillStyle=Je,_t!==gt?(je=r.bounds.left+.5*r.bounds.width,Qe=r.bounds.top+.5*r.bounds.height,pt=gt/_t,$e=1/pt,u.ctx.save(),u.ctx.translate(je,Qe),u.ctx.transform(1,0,0,pt,0,0),u.ctx.translate(-je,-Qe),u.ctx.fillRect(ce,$e*(ye-Qe)+Qe,we,Ve*$e),u.ctx.restore()):u.ctx.fill())),wt.label=6;case 6:return a--,[2]}})},u=this,h=0,s=r.styles.backgroundImage.slice(0).reverse(),x.label=1;case 1:return h<s.length?(y=s[h],[5,l(y)]):[3,4];case 2:x.sent(),x.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,a,l){return os(this,void 0,void 0,function(){return ka(this,function(u){return this.path(j6(l,a)),this.ctx.fillStyle=Yn(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,a,l,u){return os(this,void 0,void 0,function(){var h,s;return ka(this,function(y){switch(y.label){case 0:return a<3?[4,this.renderSolidBorder(r,l,u)]:[3,2];case 1:return y.sent(),[2];case 2:return h=gQ(u,l),this.path(h),this.ctx.fillStyle=Yn(r),this.ctx.fill(),s=pQ(u,l),this.path(s),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return os(this,void 0,void 0,function(){var a,l,u,h,s,y,x,C,I=this;return ka(this,function(U){switch(U.label){case 0:return this.applyEffects(r.getEffects(2)),a=r.container.styles,l=!Lh(a.backgroundColor)||a.backgroundImage.length,u=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],h=MQ(Ch(a.backgroundClip,0),r.curves),l||a.boxShadow.length?(this.ctx.save(),this.path(h),this.ctx.clip(),Lh(a.backgroundColor)||(this.ctx.fillStyle=Yn(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:U.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(R){I.ctx.save();var N=up(r.curves),D=R.inset?0:BQ,O=dQ(N,-D+(R.inset?1:-1)*R.spread.number,(R.inset?1:-1)*R.spread.number,R.spread.number*(R.inset?-2:2),R.spread.number*(R.inset?-2:2));R.inset?(I.path(N),I.ctx.clip(),I.mask(O)):(I.mask(N),I.ctx.clip(),I.path(O)),I.ctx.shadowOffsetX=R.offsetX.number+D,I.ctx.shadowOffsetY=R.offsetY.number,I.ctx.shadowColor=Yn(R.color),I.ctx.shadowBlur=R.blur.number,I.ctx.fillStyle=R.inset?Yn(R.color):"rgba(0,0,0,1)",I.ctx.fill(),I.ctx.restore()}),U.label=2;case 2:s=0,y=0,x=u,U.label=3;case 3:return y<x.length?(C=x[y],C.style!==0&&!Lh(C.color)&&C.width>0?C.style!==2?[3,5]:[4,this.renderDashedDottedBorder(C.color,C.width,s,r.curves,2)]:[3,11]):[3,13];case 4:return U.sent(),[3,11];case 5:return C.style!==3?[3,7]:[4,this.renderDashedDottedBorder(C.color,C.width,s,r.curves,3)];case 6:return U.sent(),[3,11];case 7:return C.style!==4?[3,9]:[4,this.renderDoubleBorder(C.color,C.width,s,r.curves)];case 8:return U.sent(),[3,11];case 9:return[4,this.renderSolidBorder(C.color,s,r.curves)];case 10:U.sent(),U.label=11;case 11:s++,U.label=12;case 12:return y++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,a,l,u,h){return os(this,void 0,void 0,function(){var s,y,x,C,I,U,R,N,D,O,H,W,se,de,le,he,le,he;return ka(this,function(ae){return this.ctx.save(),s=mQ(u,l),y=j6(u,l),h===2&&(this.path(y),this.ctx.clip()),hs(y[0])?(x=y[0].start.x,C=y[0].start.y):(x=y[0].x,C=y[0].y),hs(y[1])?(I=y[1].end.x,U=y[1].end.y):(I=y[1].x,U=y[1].y),l===0||l===2?R=Math.abs(x-I):R=Math.abs(C-U),this.ctx.beginPath(),h===3?this.formatPath(s):this.formatPath(y.slice(0,2)),N=a<3?a*3:a*2,D=a<3?a*2:a,h===3&&(N=a,D=a),O=!0,R<=N*2?O=!1:R<=N*2+D?(H=R/(2*N+D),N*=H,D*=H):(W=Math.floor((R+D)/(N+D)),se=(R-W*N)/(W-1),de=(R-(W+1)*N)/W,D=de<=0||Math.abs(D-se)<Math.abs(D-de)?se:de),O&&(h===3?this.ctx.setLineDash([0,N+D]):this.ctx.setLineDash([N,D])),h===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=Yn(r),this.ctx.stroke(),this.ctx.setLineDash([]),h===2&&(hs(y[0])&&(le=y[3],he=y[0],this.ctx.beginPath(),this.formatPath([new $t(le.end.x,le.end.y),new $t(he.start.x,he.start.y)]),this.ctx.stroke()),hs(y[1])&&(le=y[1],he=y[2],this.ctx.beginPath(),this.formatPath([new $t(le.end.x,le.end.y),new $t(he.start.x,he.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return os(this,void 0,void 0,function(){var a;return ka(this,function(l){switch(l.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Yn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=fQ(r),[4,this.renderStack(a)];case 1:return l.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(Vw);var CQ=function(t){return t instanceof Sw||t instanceof Tw?!0:t instanceof R_&&t.type!==hp&&t.type!==cp},MQ=function(t,e){switch(t){case 0:return up(e);case 2:return lQ(e);case 1:default:return dp(e)}},RQ=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},IQ=["-apple-system","system-ui"],UQ=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return IQ.indexOf(e)===-1}):t};(function(t){Ks(e,t);function e(r,a){var l=t.call(this,r,a)||this;return l.canvas=a.canvas?a.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),l.options=a,l.canvas.width=Math.floor(a.width*a.scale),l.canvas.height=Math.floor(a.height*a.scale),l.canvas.style.width=a.width+"px",l.canvas.style.height=a.height+"px",l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-a.x,-a.y),l.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),l}return e.prototype.render=function(r){return os(this,void 0,void 0,function(){var a,l;return ka(this,function(u){switch(u.label){case 0:return a=u4(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,EQ(a)];case 1:return l=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Yn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(l,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(Vw);var EQ=function(t){return new Promise(function(e,r){var a=new Image;a.onload=function(){e(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&sQ.setContext(window);const FQ=(t,e)=>{const[r,a,l,u]=e,h=t.lng,s=t.lat;return h>=r&&h<=l&&s>=a&&s<=u},TQ=(t,e)=>{const[r,a,l,u]=t,[h,s,y,x]=e;return r<y&&l>h&&a<x&&u>s};var SQ={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]};function NQ(t,e,r){return t*(1-r)+e*r}var YQ=NQ,$6=SQ,ig=YQ,PQ=LQ;function LQ(t){var e,r,a,l,u,h,s,y,U,x,C;if(t||(t={}),y=(t.nshades||72)-1,s=t.format||"hex",h=t.colormap,h||(h="jet"),typeof h=="string"){if(h=h.toLowerCase(),!$6[h])throw Error(h+" not a supported colorscale");u=$6[h]}else if(Array.isArray(h))u=h.slice();else throw Error("unsupported colormap option",h);if(u.length>y+1)throw new Error(h+" map requires nshades to be at least size "+u.length);Array.isArray(t.alpha)?t.alpha.length!==2?x=[1,1]:x=t.alpha.slice():typeof t.alpha=="number"?x=[t.alpha,t.alpha]:x=[1,1],e=u.map(function(D){return Math.round(D.index*y)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var I=u.map(function(D,O){var H=u[O].index,W=u[O].rgb.slice();return W.length===4&&W[3]>=0&&W[3]<=1||(W[3]=x[0]+(x[1]-x[0])*H),W}),U=[];for(C=0;C<e.length-1;++C){l=e[C+1]-e[C],r=I[C],a=I[C+1];for(var R=0;R<l;R++){var N=R/l;U.push([Math.round(ig(r[0],a[0],N)),Math.round(ig(r[1],a[1],N)),Math.round(ig(r[2],a[2],N)),ig(r[3],a[3],N)])}}return U.push(u[u.length-1].rgb.concat(x[1])),s==="hex"?U=U.map(kQ):s==="rgbaString"?U=U.map(DQ):s==="float"&&(U=U.map(QQ)),U}function QQ(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function kQ(t){for(var e,r="#",a=0;a<3;++a)e=t[a],e=e.toString(16),r+=("00"+e).substr(e.length);return r}function DQ(t){return"rgba("+t.join(",")+")"}const zQ=Z4(PQ),jA=class jA{constructor(e=500){mr(this,"cache");mr(this,"cacheSizeLimit");mr(this,"cacheOrder");this.cache=new Map,this.cacheSizeLimit=e,this.cacheOrder=[]}static getInstance(e=500){return jA.instance||(jA.instance=new jA(e)),jA.instance}async loadImage(e,r){try{const a=await fetch(e,{signal:r});if(!a.ok)throw new Error("Failed to fetch image");return await createImageBitmap(await a.blob())}catch(a){if(a instanceof Error&&a.name==="AbortError")throw a;return await createImageBitmap(new ImageData(1,1))}}async getAdjacentTilesWithImages(e,r,a,l,u){const h=[{position:"center",dx:0,dy:0},{position:"left",dx:-1,dy:0},{position:"right",dx:1,dy:0},{position:"top",dx:0,dy:-1},{position:"bottom",dx:0,dy:1}],s={};return await Promise.all(h.map(async({position:y,dx:x,dy:C})=>{const I=e+x,U=r+C,R=l.replace("{x}",I.toString()).replace("{y}",U.toString()).replace("{z}",a.toString()),N=this.cache.has(R)?this.cache.get(R):await this.loadImage(R,u.signal);N&&(this.add(R,N),s[y]={tileId:R,image:N})})),s}add(e,r){if(this.cacheOrder.length>=this.cacheSizeLimit){const l=this.cacheOrder.shift();l&&this.cache.delete(l)}this.cache.set(e,r);const a=this.cacheOrder.indexOf(e);a>-1&&this.cacheOrder.splice(a,1),this.cacheOrder.push(e)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}clear(){this.cache.clear(),this.cacheOrder=[]}};mr(jA,"instance");let gp=jA;class ZQ{constructor(){mr(this,"cache");this.cache=new Map}createColorArray(e){const r=`${e}`;if(this.has(r))return this.get(r);const a=256,l=new Uint8Array(a*3);let h=zQ({colormap:e,nshades:a,format:"rgb",alpha:1}),s=0;for(let y=0;y<a;y++){const x=h[y];l[s++]=x[0],l[s++]=x[1],l[s++]=x[2]}return this.cache.set(r,l),l}add(e,r){this.cache.set(e,r)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}}const HQ={elevation:{opacity:1,maxHeight:3776,minHeight:0},shadow:{opacity:.8,shadowColor:"#000000",highlightColor:"#00ff9d",ambient:.3,azimuth:0,altitude:30},edge:{opacity:.9,edgeIntensity:.4,edgeColor:"#ffffff"}};let OQ=class{constructor(e){mr(this,"worker");mr(this,"pendingRequests");mr(this,"tileCache");mr(this,"colorMapCache");mr(this,"handleMessage",e=>{const{id:r,buffer:a,error:l}=e.data,u=this.pendingRequests.get(r);l?(console.error(`Error processing tile ${r}:`,l),u&&(u.reject(new Error(l)),this.pendingRequests.delete(r))):u&&(u.resolve({data:a}),this.pendingRequests.delete(r))});this.worker=e,this.pendingRequests=new Map,this.tileCache=gp.getInstance(),this.colorMapCache=new ZQ,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,r){const a=parseInt(e.searchParams.get("x")||"0",10),l=parseInt(e.searchParams.get("y")||"0",10),u=parseInt(e.searchParams.get("z")||"0",10),s=await this.tileCache.getAdjacentTilesWithImages(a,l,u,"https://cyberjapandata.gsi.go.jp/xyz/dem5a_png/{z}/{x}/{y}.png",r);return new Promise((y,x)=>{const C=s.center,I=C.tileId,U=s.left,R=s.right,N=s.top,D=s.bottom;this.pendingRequests.set(I,{resolve:y,reject:x,controller:r});const O=this.colorMapCache.createColorArray("cool");this.worker.postMessage({tileId:I,center:C.image,left:U.image,right:R.image,top:N.image,bottom:D.image,z:u,uniformsData:HQ,elevationColorArray:O})})}handleError(e){console.error("Worker error:",e),this.pendingRequests.forEach(r=>{r.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()}cancelAllRequests(){this.pendingRequests.size>0&&this.pendingRequests.forEach(({reject:e,controller:r})=>{r.abort(),e(new Error("Request cancelled"))}),console.info("All requests have been cancelled."),this.pendingRequests.clear()}clearCache(){this.tileCache.clear()}};class XQ{constructor(e){mr(this,"workers",[]);mr(this,"workerIndex",0);mr(this,"poolSize");this.poolSize=e;for(let r=0;r<e;r++){const a=new Worker(new URL(""+new URL("../workers/worker-TVW-fspo.js",import.meta.url).href,import.meta.url),{type:"module"});this.workers.push(new OQ(a))}}getNextWorker(){const e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.poolSize,e}async request(e,r){return this.getNextWorker().request(e,r)}cancelAllRequests(){this.workers.forEach(e=>e.cancelAllRequests())}clearCache(){this.workers.forEach(e=>e.clearCache())}}const Am=new XQ(2),VQ=t=>({protocolName:t,request:(e,r)=>{const a=e.url.replace(`${t}://`,""),l=new URL(a);return Am.request(l,r)},cancelAllRequests:()=>Am.cancelAllRequests(),clearCache:()=>Am.clearCache()});function GQ(t,e={}){const r=Number(t[0]),a=Number(t[1]),l=Number(t[2]),u=Number(t[3]);if(t.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const h=[r,a];return XC([[h,[l,a],[l,u],[r,u],h]],e.properties,{bbox:t,id:e.id})}var q6=GQ;let jQ=class{constructor(e){mr(this,"worker");mr(this,"pendingRequests");mr(this,"handleMessage",e=>{const{id:r,buffer:a,error:l}=e.data;if(l){const u=this.pendingRequests.get(r);u&&(u.resolve({data:new Uint8Array}),this.pendingRequests.delete(r))}else{const u=this.pendingRequests.get(r);u&&(u.resolve({data:a}),this.pendingRequests.delete(r))}});mr(this,"handleError",e=>{console.error("Worker error:",e),this.pendingRequests.forEach(r=>{r.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()});this.worker=e,this.pendingRequests=new Map,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,r){try{const a=parseInt(e.searchParams.get("x")||"0",10),l=parseInt(e.searchParams.get("y")||"0",10),u=parseInt(e.searchParams.get("z")||"0",10),h=nv([a,l,u]),s=q6(h),x={type:"FeatureCollection",features:VR([a,l,u]).map(U=>{const[R,N,D]=U,O=nv([R,N,D]);return{...q6(O),properties:{x:a,y:l,z:u,index:`${D}/${R}/${N}`}}})};console.log(x);const{signal:C}=r,I=`${u}/${a}/${l}_tile_index`;return new Promise((U,R)=>{this.pendingRequests.set(I,{resolve:U,reject:R}),C.addEventListener("abort",()=>{this.pendingRequests.delete(I),R(new Error("Request aborted"))}),this.worker.postMessage({id:I,z:u,x:a,y:l,geojson:x})})}catch(a){return Promise.reject(a)}}};const KQ=new Worker(new URL(""+new URL("../workers/worker-DfC3PjOV.js",import.meta.url).href,import.meta.url),{type:"module"}),$Q=new jQ(KQ),qQ=t=>({protocolName:t,request:(e,r)=>{const a=e.url.replace(`${t}://`,"");console.log("urlWithoutProtocol",a);const l=new URL(a);return $Q.request(l,r)}}),WQ={mapbox:0,gsi:1,terrarium:2},Ao=[{id:"dem_10b",name:" DEM10B",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:14,attribution:"",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"dem_5a",name:" DEM5A",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem5a_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:15,attribution:"",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"dem_5b",name:" DEM5B",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem5b_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:15,attribution:"",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"dem_5c",name:" DEM5C",tiles:["https://cyberjapandata.gsi.go.jp/xyz/dem5c_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:15,attribution:"",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"tochigi_dem",name:" (DEM)0.5m",tiles:["https://rinya-tochigi.geospatial.jp/2023/rinya/tile/terrainRGB/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[139.326731,36.199924,140.291983,37.155039],attribution:"",demType:"mapbox"},{id:"kochi_dem",name:" (DEM)0.5m",tiles:["https://rinya-kochi.geospatial.jp/2023/rinya/tile/terrainRGB/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[132.479888,32.702505,134.31367,33.882997],attribution:"",demType:"mapbox"},{id:"hyougo_dem",name:" DEM 1m",tiles:["https://tiles.gsj.jp/tiles/elev/hyogodem/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:17,bbox:[134.252809,34.156129,135.468591,35.674667],attribution:"",demType:"gsi"},{id:"hyougo_dsm",name:" DSM 1m",tiles:["https://tiles.gsj.jp/tiles/elev/hyogodsm/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:17,bbox:[134.252809,34.156129,135.468591,35.674667],attribution:"",demType:"gsi"},{id:"tokyo",name:"",tiles:["https://tiles.gsj.jp/tiles/elev/tokyo/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:19,bbox:[138.942922,32.440258,139.861054,35.898368],attribution:"",demType:"gsi"},{id:"kanagawa",name:"",tiles:["https://tiles.gsj.jp/tiles/elev/kanagawa/{z}/{y}/{x}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[138.9401382,35.1277755,139.7471238,35.6730819],attribution:"",demType:"gsi"},{id:"rinya_toyama_dem",name:" DEM",tiles:["https://forestgeo.info/opendata/16_toyama/dem_terrainRGB_2021/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[136.75028275928693,36.24106589467564,137.80860073361887,37.01815476882866],attribution:"",demType:"mapbox"},{id:"rinya_toyama_dchm",name:" dchm",tiles:["https://forestgeo.info/opendata/16_toyama/dchm_terrainRGB_2021/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[136.75028275928693,36.24106589467564,137.80860073361887,37.01815476882866],attribution:"",demType:"mapbox"},{id:"rinya_nagaoka_dem",name:" DEM 0.5m2024",tiles:["https://cf192141.cloudfree.jp/nagaoka/dem_terrainRGB_15_2024/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[138.4714917,37.145854,139.2533006,37.744387],attribution:"",demType:"mapbox"},{id:"rinya_nagaoka_dsm",name:" DCHM 0.5m2024",tiles:["https://cf192141.cloudfree.jp/nagaoka/dchm_terrainRGB_15_2024/{z}/{x}/{y}.png"],tileSize:256,minzoom:2,maxzoom:18,bbox:[138.4714917,37.145854,139.2533006,37.744387],attribution:"",demType:"mapbox"},{id:"astergdemv3",name:"ASTER3",tiles:["https://tiles.gsj.jp/tiles/elev/astergdemv3/{z}/{y}/{x}.png"],tileSize:256,minzoom:1,maxzoom:12,attribution:"",bbox:[-180,-85.051129,180,85.051129],demType:"gsi"},{id:"gebco",name:"GEBCO Grid",tiles:["https://tiles.gsj.jp/tiles/elev/gebco/{z}/{y}/{x}.png"],tileSize:256,minzoom:0,maxzoom:9,attribution:"",bbox:[-180,-85.051129,180,85.051129],demType:"gsi"},{id:"tilezen",name:"Tilezen Joerd",tiles:["https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png"],tileSize:256,minzoom:0,maxzoom:15,attribution:'<a href="https://github.com/tilezen/joerd/blob/master/docs/attribution.md">Tilezen Joerd: Attribution</a>',bbox:[-180,-85.051129,180,85.051129],demType:"terrarium"},{id:"lakedepth",name:"",tiles:["https://cyberjapandata.gsi.go.jp/xyz/lakedepth/{z}/{x}/{y}.png"],tileSize:256,minzoom:1,maxzoom:14,attribution:"",bbox:[122.935,20.425,153.986,45.551],demType:"gsi"},{id:"gsigeoid",name:"2011",tiles:["https://tiles.gsj.jp/tiles/elev/gsigeoid/{z}/{y}/{x}.png"],tileSize:256,minzoom:0,maxzoom:8,attribution:"",bbox:[120,20,150,50],demType:"gsi"}],gn={name:Ao[0].name,demType:Ao[0].demType,url:Ao[0].tiles[0],sourceMaxZoom:Ao[0].maxzoom,sourceMinZoom:Ao[0].minzoom,attribution:Ao[0].attribution,bbox:Ao[0].bbox};class JQ{constructor(e){mr(this,"worker");mr(this,"pendingRequests");mr(this,"tileCache");mr(this,"handleMessage",e=>{const{id:r,buffer:a,error:l}=e.data,u=this.pendingRequests.get(r);l?(console.error(`Error processing tile ${r}:`,l),u&&(u.reject(new Error(l)),this.pendingRequests.delete(r))):u?(u.resolve({data:a}),this.pendingRequests.delete(r)):console.warn(`No pending request found for tile ${r}`)});mr(this,"handleError",e=>{console.error("Worker error:",e),this.pendingRequests.forEach(r=>{r.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()});mr(this,"cancelAllRequests",()=>{this.pendingRequests.size>0&&this.pendingRequests.forEach(({reject:e,controller:r})=>{r.abort(),e(new Error("Request cancelled"))}),this.pendingRequests.clear()});this.worker=e,this.pendingRequests=new Map,this.tileCache=gp.getInstance(),this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,r){try{const a=gn.demType;let l;return this.tileCache.has(e)?l=this.tileCache.get(e):(l=await this.tileCache.loadImage(e,r.signal),this.tileCache.add(e,l)),new Promise((u,h)=>{const s=WQ[a];this.pendingRequests.set(e,{resolve:u,reject:h,controller:r}),this.worker.postMessage({image:l,demTypeNumber:s,id:e}),r.signal.addEventListener("abort",()=>{this.pendingRequests.delete(e),h(new Error("Request aborted"))})})}catch(a){return Promise.reject(a)}}clearCache(){this.tileCache.clear()}}const ek=new Worker(new URL(""+new URL("../workers/worker-qG8lXCev.js",import.meta.url).href,import.meta.url),{type:"module"}),cm=new JQ(ek),tk=t=>({protocolName:t,request:(e,r)=>{const a=e.url.replace(`${t}://`,"");return cm.request(a,r)},cancelAllRequests:()=>cm.cancelAllRequests(),clearCache:()=>cm.clearCache()}),U_=document.createElement("canvas");U_.width=512;U_.height=512;const rk=U_.getContext("webgl");rk||console.error("WebGL not supported");const ik=new SR;Vs.addProtocol("pmtiles",ik.tile);const W6=VQ("webgl");Vs.addProtocol(W6.protocolName,W6.request);const pp=tk("terrain");Vs.addProtocol(pp.protocolName,pp.request);const J6=qQ("tile_index");Vs.addProtocol(J6.protocolName,J6.request);const nk=()=>{let t=null,e=null;const{subscribe:r,set:a}=Gn(null),l=Gn(null),u=Gn(null),h=Gn(null),s=Gn(null),y=Gn(null),x=Gn(null),C=Gn(!0),I=Gn(null),U=Gn(null),R=(ye,we)=>{const Ve=MS(location.search);Ve&&Ve.debug&&Ve.debug==="1"&&Qg.set(!0);const ut=RS();e=new Vs.Map({...ut,container:ye,style:we,fadeDuration:50,attributionControl:!1,localIdeographFontFamily:!1,maxPitch:85}),$o(Qg)&&(e.showTileBoundaries=!0),x.set(we),e&&(e.on("click",nt=>{l.set(nt)}),e.on("data",function(nt){C.set(!0)}),e.on("idle",function(nt){C.set(!1)}),e.on("rotate",nt=>{if(!e)return;const rt=e.getBearing();s.set(rt)}),e.on("mousedown",nt=>{}),e.on("mouseup",nt=>{}),e.on("mouseover",nt=>{u.set(nt)}),e.on("mouseout",nt=>{h.set(nt)}),e.on("moveend",nt=>{if(!e)return;const rt=e.getCenter();IS({center:[rt.lng,rt.lat],zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()}),I.set(nt)}),e.on("zoom",nt=>{if(!e)return;const rt=e.getZoom();y.set(rt)}),e.on("styleimagemissing",nt=>Sx(nt,e)),U.set(e))},N=ye=>{e&&(x.set(ye),e.setStyle(ye))},D=(ye,we)=>{e&&(t=new Vs.Marker({element:ye}).setLngLat(we).addTo(e))},O=async()=>{if(!e)return;const ye=e.getCanvasContainer(),we=ye.clientWidth,Ve=ye.clientHeight;return{canvas:ye,witdh:we,height:Ve}},H=()=>{!e||!t||t.remove()},W=()=>{!e||!e.getTerrain()||setTimeout(()=>{e&&e.terrain.sourceCache.sourceCache.reload()},200)},se=(ye,we)=>e==null?void 0:e.queryRenderedFeatures(ye,we),de=(ye,we)=>{e&&e.panTo(ye,we)},le=ye=>{e&&e.easeTo(ye)},he=async ye=>{if(e)if(ye.format.type==="fgb")try{const we=zl.get(ye.id);if(!we)return;const Ve=jg(we);e.fitBounds(Ve,{bearing:e.getBearing(),padding:100,duration:500})}catch(we){console.error(we)}else if(ye.metaData.bounds)e.fitBounds(ye.metaData.bounds,{bearing:e.getBearing(),padding:100,duration:500});else if(ye.metaData.location){const we=Rx(ye.metaData.location);we&&e.fitBounds(we,{bearing:e.getBearing(),padding:100,duration:500})}else console.warn("",ye.id)},ae=async ye=>{if(!e)return;const we=jg(ye.geometry);e.fitBounds(we)},V=ye=>{if(!e)return;const we="search_source",Ve={};Ve[we]={type:"geojson",data:{type:"FeatureCollection",features:[ye]}},e.getSource(we)&&e.removeSource(we),e.addSource(we,Ve[we]);const ut="search_layer",nt=[],rt={id:ut,source:we};switch(ye.geometry.type){case"Point":nt.push({...rt,type:"circle",paint:{"circle-radius":10,"circle-color":"#ff0000"}});break;case"LineString":case"MultiLineString":nt.push({...rt,type:"line",paint:{"line-width":5,"line-color":"#ff0000"}});break;case"Polygon":case"MultiPolygon":nt.push({...rt,type:"fill",paint:{"fill-color":"#ff0000","fill-opacity":.5}});break}e.addLayer(nt[0])},K=()=>{if(!e)return;const{_sw:ye,_ne:we}=e.getBounds();return{minX:ye.lng,minY:ye.lat,maxX:we.lng,maxY:we.lat}},oe=()=>{if(!e){console.warn("Map is not ready yet.");return}const ye=e.getStyle(),we={...ye.sources},Ve=[...ye.layers];for(const ut of Ve)e.getLayer(ut.id)&&e.removeLayer(ut.id);for(const ut in we)e.getSource(ut)&&e.removeSource(ut);for(const[ut,nt]of Object.entries(we))e.addSource(ut,nt);for(const ut of Ve)e.addLayer(ut);$o(Dl)&&e.setTerrain({source:"terrain",exaggeration:1})},ce=()=>{if(!e)return;e.setTerrain(null),e.removeSource("terrain"),pp.cancelAllRequests(),e.addSource("terrain",{type:"raster-dem",tiles:[`${pp.protocolName}://${gn.url}?demType=${gn.demType}`],tileSize:256,minzoom:gn.sourceMinZoom,maxzoom:gn.sourceMaxZoom,attribution:gn.attribution,bounds:gn.bbox}),e.setTerrain({source:"terrain",exaggeration:1});const ye=gn.bbox;if(!ye)return;const we=e.getBounds().toArray();e.getZoom(),TQ(gn.bbox,[...we[0],...we[1]])||e.fitBounds(ye,{padding:100,duration:300,bearing:e.getBearing()}),oe(),W()};return{subscribe:r,init:R,setStyle:N,addLockonMarker:D,removeLockonMarker:H,getLockonMarker:()=>t,getMap:()=>e,queryRenderedFeatures:se,getZoom:()=>e==null?void 0:e.getZoom(),getCenter:()=>e==null?void 0:e.getCenter(),getPitch:()=>e==null?void 0:e.getPitch(),getBearing:()=>e==null?void 0:e.getBearing(),setBearing:ye=>e==null?void 0:e.setBearing(ye),panTo:de,easeTo:ye=>le(ye),addSearchFeature:V,focusLayer:he,focusFeature:ae,onSetStyle:x.subscribe,getTerrain:()=>e==null?void 0:e.getTerrain(),getBounds:K,onClick:l.subscribe,onMouseover:u.subscribe,onMouseout:h.subscribe,onRotate:s.subscribe,onZoom:y.subscribe,onMooveEnd:I.subscribe,onLoading:C.subscribe,onInitialized:U.subscribe,terrainReload:W,resetDem:ce,resetAllSourcesAndLayers:oe,getMapContainer:O}},fi=nk(),ak=(t,e)=>{var a;const r=(a=e.find(({conditions:l})=>l.every(u=>t[u]!==void 0)))==null?void 0:a.template;return r?r.replace(/\{([^}]+)\}/g,(l,u)=>t[u]!==void 0?t[u]:`{${u}}`):""};var sk=(t,e)=>e(null),ok=dt('<div class="relative aspect-video w-full shrink-0 overflow-hidden rounded-md"><img class="block h-full w-full object-cover" crossOrigin="anonymous" alt=""></div>'),lk=dt('<a class="flex w-full items-center justify-start gap-2" target="_blank" rel="noopener noreferrer"><!> <span class="text-accent"> </span></a>'),Ak=dt('<span class="my-2 text-base"> </span> <div class="w-hull bg-base h-[1px] rounded-full"></div>',1),ck=dt('<div class="bg-main absolute left-0 top-0 z-20 flex h-full w-[400px] flex-col gap-2 overflow-hidden px-2 pt-4"><div class="flex w-full cursor-pointer justify-between pb-2"><button class="bg-base ml-auto cursor-pointer rounded-full p-2"><!></button></div> <!> <div class="flex h-full flex-col gap-2 overflow-auto"><div class="flex shrink-0 grow flex-col gap-1 text-base"><span class="text-[22px] font-bold"> </span> <span class="text-[14px] text-gray-300"> </span></div>  <div class="c-scroll flex h-full w-full grow flex-col overflow-y-auto"><div class="flex h-full w-full flex-col gap-2"><div class="flex w-full items-center justify-start gap-2"><!> <span class="text-accent"> </span></div> <!> <div class="w-hull bg-base h-[1px] rounded-full"></div> <!></div> <div class="flex h-full w-full flex-col gap-2"><div class="my-4 text-base text-lg"></div> <!></div></div></div></div>');function hk(t,e){fr(e,!0);let r=xr(e,"featureMenuData",15),a=er("metadata"),l=bi(()=>r()?e.layerEntries.find(I=>r()&&I.id===r().layerId):null),u=bi(()=>r()&&r().properties?Kg[r().properties._prop_id]:null),h=bi(()=>{if(r()){const C=e.layerEntries.find(I=>r()&&I.id===r().layerId);if(C&&C.type==="vector"&&re(u)&&re(u).image)return re(u).image}return null});Dn(()=>{if(r()){const C=fi.getMap();if(!C)return;const I=C.getLayer(r().layerId);if(!I)return;I.type==="raster"||!r().properties||!r().properties._prop_id?ht(a,"metadata"):ht(a,"attributes")}}),Dn(()=>{r()&&r().properties&&r().properties._prop_id?ht(a,"metadata"):ht(a,"attributes")});var s=Mr(),y=Dt(s);{var x=C=>{var I=ck(),U=Pe(I),R=Pe(U);R.__click=[sk,r];var N=Pe(R);br(N,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Fe(R),Fe(U);var D=Ze(U,2);{var O=gt=>{var Je=ok(),je=Pe(Je);Fe(Je),hr(()=>Mn(je,"src",re(h))),Ri(3,je,()=>fs),Xe(gt,Je)};Ut(D,gt=>{re(h)&&gt(O)})}var H=Ze(D,2),W=Pe(H),se=Pe(W),de=Pe(se,!0);Fe(se);var le=Ze(se,2),he=Pe(le,!0);Fe(le),Fe(W);var ae=Ze(W,2),V=Pe(ae),K=Pe(V),oe=Pe(K);br(oe,{icon:"lucide:map-pin",class:"h-6 w-6 text-base"});var ce=Ze(oe,2),ye=Pe(ce);Fe(ce),Fe(K);var we=Ze(K,2);{var Ve=gt=>{var Je=Mr(),je=Dt(Je);{var Qe=pt=>{var $e=lk(),wt=Pe($e);br(wt,{icon:"mdi:web",class:"h-6 w-6 text-base"});var Ct=Ze(wt,2),Mt=Pe(Ct,!0);Fe(Ct),Fe($e),hr(()=>{Mn($e,"href",re(u).url),_r(Mt,re(u).url)}),Xe(pt,$e)};Ut(je,pt=>{re(u).url&&pt(Qe)})}Xe(gt,Je)};Ut(we,gt=>{re(u)&&gt(Ve)})}var ut=Ze(we,4);{var nt=gt=>{var Je=Mr(),je=Dt(Je);{var Qe=pt=>{var $e=Ak(),wt=Dt($e),Ct=Pe(wt,!0);Fe(wt),Ki(2),hr(()=>_r(Ct,re(u).description)),Xe(pt,$e)};Ut(je,pt=>{re(u).description&&pt(Qe)})}Xe(gt,Je)};Ut(ut,gt=>{re(u)&&gt(nt)})}Fe(V);var rt=Ze(V,2),ft=Ze(Pe(rt),2);{var _t=gt=>{var Je=Mr(),je=Dt(Je);Qi(je,17,()=>Object.entries(r().properties),Rn,(Qe,pt)=>{let $e=()=>re(pt)[0],wt=()=>re(pt)[1];var Ct=Mr(),Mt=Dt(Ct);{var Pt=ar=>{hS(ar,{get key(){return $e()},get value(){return wt()}})};Ut(Mt,ar=>{$e()!=="_prop_id"&&wt()&&ar(Pt)})}Xe(Qe,Ct)}),Xe(gt,Je)};Ut(ft,gt=>{r().properties&&gt(_t)})}Fe(rt),Fe(ae),Fe(H),Fe(I),hr((gt,Je,je)=>{_r(de,gt),_r(he,re(l)&&re(l).metaData.name?re(l).metaData.name:""),_r(ye,`${Je??""}, ${je??""}`)},[()=>re(l)&&re(l).type==="vector"&&re(l).properties.titles?ak(r().properties,re(l).properties.titles):"",()=>r().point[0].toFixed(6),()=>r().point[1].toFixed(6)]),Ri(3,I,()=>js,()=>({duration:300,x:-100,opacity:0})),Xe(C,I)};Ut(y,C=>{r()&&C(x)})}Xe(t,s),gr()}qi(["click"]);var uk=dt('<a class="bg-main pointer-events-auto grid grow cursor-pointer select-none place-items-center rounded-full px-2 text-xs svelte-1vk0djk" target="_blank" rel="noopener noreferrer"><span> </span></a>'),dk=dt('<div class="pointer-events-none absolute bottom-0 right-0 z-10 flex h-full w-full shrink-0 justify-end gap-2 text-nowrap p-2 text-white"><span class="bg-main grid place-items-center rounded-full"><!></span> <div class="flex gap-2"></div></div>');function fk(t,e){fr(e,!0);let r=er($n([]));$5.subscribe(h=>{const s=h.map(y=>{const x=VT.get(y);if(x)return x}).filter(y=>y!==void 0);s.length>0&&ht(r,s,!0)});var a=Mr(),l=Dt(a);{var u=h=>{var s=dk(),y=Pe(s),x=Pe(y);br(x,{icon:"lets-icons:info-alt-fill",class:"h-6 w-6"}),Fe(y);var C=Ze(y,2);Qi(C,21,()=>re(r),Rn,(I,U)=>{var R=uk(),N=Pe(R),D=Pe(N,!0);Fe(N),Fe(R),hr(()=>{Mn(R,"href",re(U).url),_r(D,re(U).name)}),Xe(I,R)}),Fe(C),Fe(s),Xe(h,s)};Ut(l,h=>{re(r)&&h(u)})}Xe(t,a),gr()}var gk=dt('<div class="pointer-events-none absolute bottom-0 left-0 z-20 flex h-[40px] w-full grow items-center justify-start gap-2"><!></div>'),pk=dt('<div class="bottom-0 left-0 flex h-[70px] w-full grow items-center justify-start gap-2"></div>');function e5(t,e){fr(e,!0);var r=Mr(),a=Dt(r);{var l=h=>{var s=gk(),y=Pe(s);fk(y,{}),Fe(s),Xe(h,s)},u=h=>{var s=pk();Xe(h,s)};Ut(a,h=>{z4()?h(l):h(u,!1)})}Xe(t,r),gr()}function mk(t){const e=t-1;return e*e*e+1}function Gw(t,{from:e,to:r},a={}){var{delay:l=0,duration:u=he=>Math.sqrt(he)*120,easing:h=mk}=a,s=getComputedStyle(t),y=s.transform==="none"?"":s.transform,[x,C]=s.transformOrigin.split(" ").map(parseFloat);x/=t.clientWidth,C/=t.clientHeight;var I=_k(t),U=t.clientWidth/r.width/I,R=t.clientHeight/r.height/I,N=e.left+e.width*x,D=e.top+e.height*C,O=r.left+r.width*x,H=r.top+r.height*C,W=(N-O)*U,se=(D-H)*R,de=e.width/r.width,le=e.height/r.height;return{delay:l,duration:typeof u=="function"?u(Math.sqrt(W*W+se*se)):u,easing:h,css:(he,ae)=>{var V=ae*W,K=ae*se,oe=he+ae*de,ce=he+ae*le;return`transform: ${y} translate(${V}px, ${K}px) scale(${oe}, ${ce});`}}}function _k(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,r=1;e!==null;)r*=+getComputedStyle(e).zoom,e=e.parentElement;return r}var bk=dt('<label class="hover:text-accent flex grow cursor-pointer items-start justify-between gap-2 py-2 transition-colors duration-100"><span class="select-none text-base font-bold"> </span> <input type="checkbox" class="hidden"> <div><div></div></div></label>');function jl(t,e){fr(e,!0);let r=xr(e,"value",15);var a=bk(),l=Pe(a),u=Pe(l,!0);Fe(l);var h=Ze(l,2);bo(h);var s=Ze(h,2),y=Pe(s);Fe(s),Fe(a),hr(()=>{_r(u,e.label),mn(s,1,`relative flex h-[30px] w-[60px] items-center rounded-full ${(r()?"bg-accent":"bg-gray-400")??""}`),mn(y,1,`ml-[5px] h-[22px] w-[22px] rounded-full bg-white transition-transform duration-200 ${(r()?"translate-x-[28px]":"")??""}`)}),a8(h,r),Xe(t,a),gr()}var yk=dt('<div class="flex flex-col gap-2 pb-4 text-base"><span class="select-none"> </span> <input class="css-range svelte-vulzog" type="range"></div>');function kn(t,e){fr(e,!0);let r=xr(e,"value",15),a=xr(e,"min",3,0),l=xr(e,"max",3,1),u=xr(e,"step",3,.01);var h=yk(),s=Pe(h),y=Pe(s);Fe(s);var x=Ze(s,2);bo(x),Fe(h),hr(C=>{_r(y,`${(e.label?`${e.label}: `:"")??""}${C??""}`),Mn(x,"min",a()),Mn(x,"max",l()),Mn(x,"step",u())},[()=>r().toFixed(2)]),Up(x,r),Xe(t,h),gr()}var vk=dt("<!> <!> <!> <!> <!>",1),xk=dt('<li style="display: flex; align-items: center; margin-bottom: 5px;"><span></span> <span> </span></li>'),wk=dt("<h2> </h2> <ul></ul>",1),Bk=dt("<span> </span>"),Ck=dt('<h2> </h2> <div class="flex h-[200px] gap-2"><div class="h-full py-[10px]"><div class="h-full w-[30px]"></div></div> <div class="flex flex-col justify-between"></div></div>',1),Mk=dt("<h1></h1> <!>",1),Rk=dt("<!> <!>",1);function Ik(t,e){fr(e,!0);let r=bi(()=>e.layerEntry.style);In(()=>{});var a=Mr(),l=Dt(a);{var u=h=>{var s=Rk(),y=Dt(s);kn(y,{label:"",min:0,max:1,step:.01,get value(){return re(r).opacity},set value(U){re(r).opacity=U}});var x=Ze(y,2);{var C=U=>{var R=vk(),N=Dt(R);kn(N,{label:"-",min:0,max:1,step:.01,get value(){return re(r).brightnessMin},set value(se){re(r).brightnessMin=se}});var D=Ze(N,2);kn(D,{label:"-",min:0,max:1,step:.01,get value(){return re(r).brightnessMax},set value(se){re(r).brightnessMax=se}});var O=Ze(D,2);kn(O,{label:"",min:-1,max:1,step:.01,get value(){return re(r).contrast},set value(se){re(r).contrast=se}});var H=Ze(O,2);kn(H,{label:"",min:-360,max:360,step:.1,get value(){return re(r).hueRotate},set value(se){re(r).hueRotate=se}});var W=Ze(H,2);kn(W,{label:"",min:-1,max:1,step:.01,get value(){return re(r).saturation},set value(se){re(r).saturation=se}}),Xe(U,R)},I=(U,R)=>{{var N=D=>{var O=Mk(),H=Ze(Dt(O),2);{var W=de=>{var le=wk(),he=Dt(le),ae=Pe(he,!0);Fe(he);var V=Ze(he,2);Qi(V,21,()=>re(r).legend.colors,Rn,(K,oe,ce)=>{var ye=xk(),we=Pe(ye),Ve=Ze(we,2),ut=Pe(Ve,!0);Fe(Ve),Fe(ye),hr(()=>{Oa(we,`width: 20px; height: 20px; background-color: ${re(oe)??""}; margin-right: 10px; display: inline-block;`),_r(ut,re(r).legend.labels[ce])}),Xe(K,ye)}),Fe(V),hr(()=>_r(ae,re(r).legend.name)),Xe(de,le)},se=(de,le)=>{{var he=ae=>{var V=Ck(),K=Dt(V),oe=Pe(K,!0);Fe(K);var ce=Ze(K,2),ye=Pe(ce),we=Pe(ye);Fe(ye);var Ve=Ze(ye,2);Qi(Ve,21,()=>re(r).legend.range.slice().reverse(),Rn,(ut,nt)=>{var rt=Bk(),ft=Pe(rt);Fe(rt),hr(()=>_r(ft,`${re(nt)??""} ${re(r).legend.unit??""}`)),Xe(ut,rt)}),Fe(Ve),Fe(ce),hr(()=>{_r(oe,re(r).legend.name),Oa(we,`background: linear-gradient(0deg, ${re(r).legend.colors[0]??""} 0%, ${re(r).legend.colors[1]??""} 100%);`)}),Xe(ae,V)};Ut(de,ae=>{re(r).legend.type==="gradient"&&ae(he)},le)}};Ut(H,de=>{re(r).legend.type==="category"?de(W):de(se,!1)})}Xe(D,O)};Ut(U,D=>{re(r).type==="categorical"&&D(N)},R)}};Ut(x,U=>{re(r).type==="basemap"?U(C):U(I,!1)})}Xe(h,s)};Ut(l,h=>{e.layerEntry&&e.layerEntry.type==="raster"&&re(r)&&h(u)})}Xe(t,a),gr()}var Uk=dt("<div><!></div>"),Ek=dt('<label class="hover:text-accent flex grow cursor-pointer items-center justify-start gap-2 pb-2 pt-4 transition-colors duration-100"><!> <span class="select-none text-base font-bold"> </span> <input type="checkbox" class="hidden"></label> <!> <div class="mt-2 h-[1px] w-full bg-gray-500"></div>',1);function Kl(t,e){fr(e,!0);let r=xr(e,"value",15);var a=Ek(),l=Dt(a),u=Pe(l);const h=bi(()=>r()?"rotate-90":"rotate-0");br(u,{icon:"weui:arrow-filled",get class(){return`h-6 w-6 text-base transition-transform duration-150 ${re(h)??""}`}});var s=Ze(u,2),y=Pe(s,!0);Fe(s);var x=Ze(s,2);bo(x),Fe(l);var C=Ze(l,2);{var I=U=>{var R=Uk(),N=Pe(R);_C(N,()=>e.children),Fe(R),Ri(3,R,()=>Hg,()=>({duration:250})),Xe(U,R)};Ut(C,U=>{r()&&U(I)})}Ki(2),hr(()=>_r(y,e.label)),a8(x,r),Xe(t,a),gr()}var Fk=dt('<span class="select-none text-base"> </span>'),Tk=dt('<label class="hover:text-accent flex cursor-pointer items-center justify-between transition-colors duration-100"><!> <div class="grid h-[30px] w-[30px] place-items-center rounded-full"><input type="color" class="custom-color invisible"></div></label>');function _0(t,e){let r=xr(e,"label",8,null),a=xr(e,"value",12);var l=Tk(),u=Pe(l);{var h=x=>{var C=Fk(),I=Pe(C,!0);Fe(C),hr(()=>_r(I,r())),Xe(x,C)};Ut(u,x=>{r()&&x(h)})}var s=Ze(u,2),y=Pe(s);bo(y),Fe(s),Fe(l),hr(()=>Oa(s,`background-color: ${a()??""}`)),Up(y,a),Xe(t,l)}var Sk=(t,e)=>ht(e,!re(e)),Nk=(t,e)=>ht(e,!1),Yk=dt('<label><input type="radio" class="hidden"> <div class="flex items-center gap-2"><!> <span class="select-none"> </span></div></label>'),Pk=dt('<div class="absolute left-0 top-[60px] z-10 w-full divide-y divide-gray-300 overflow-hidden rounded-lg bg-white shadow-md"></div>'),Lk=dt('<div class="relative py-2"><button class="c-select flex w-full justify-between"><div class="flex items-center gap-2"><!> <span> </span></div> <!></button> <!></div>');function jw(t,e){fr(e,!0);const r=[];let a=xr(e,"labels",15),l=er(!1),u=bi(()=>{const C=a().expressions.find(I=>I.key===a().key);if(C)return C}),h=bi(()=>a().expressions);var s=Mr(),y=Dt(s);{var x=C=>{var I=Lk(),U=Pe(I);U.__click=[Sk,l];var R=Pe(U),N=Pe(R);br(N,{icon:"ci:font",width:20});var D=Ze(N,2),O=Pe(D,!0);Fe(D),Fe(R);var H=Ze(R,2);br(H,{icon:"bi:chevron-down",class:"h-6 w-6"}),Fe(U);var W=Ze(U,2);{var se=de=>{var le=Pk();Qi(le,21,()=>re(h),he=>he.key,(he,ae)=>{var V=Yk(),K=Pe(V);bo(K);var oe;K.__change=[Nk,l];var ce=Ze(K,2),ye=Pe(ce);br(ye,{icon:"ci:font",width:20});var we=Ze(ye,2),Ve=Pe(we,!0);Fe(we),Fe(ce),Fe(V),hr(()=>{mn(V,1,`hover:text-accent bg-sub z-20 flex w-full cursor-pointer items-center justify-between gap-2 p-2 text-white transition-colors duration-100 ${(re(ae).key===a().key?"bg-accent":"")??""}`),oe!==(oe=re(ae).key)&&(K.value=(K.__value=re(ae).key)==null?"":re(ae).key),_r(Ve,re(ae).name)}),Ep(r,[],K,()=>(re(ae).key,a().key),ut=>a(a().key=ut,!0)),Xe(he,V)}),Fe(le),Ri(3,le,()=>js,()=>({duration:200,y:-20})),Xe(de,le)};Ut(W,de=>{re(l)&&de(se)})}Fe(I),hr(de=>_r(O,de),[()=>{var de;return(de=re(h).find(le=>le.key===re(u).key))==null?void 0:de.name}]),Xe(C,I)};Ut(y,C=>{re(u)&&C(x)})}Xe(t,s),gr()}qi(["click","change"]);var Qk=dt("<span></span> <!>",1),kk=dt('<div class="flex-between flex w-full select-none gap-2"><div class="w-full"> </div> <div class="p-2"></div></div>'),Dk=dt('<div class="flex-between flex w-full gap-2"></div> <!> <!>',1);function zk(t,e){fr(e,!0);let r=xr(e,"setExpression",15),a=bi(()=>{if(r()&&r().type==="step")return kp(r().mapping)});var l=Mr(),u=Dt(l);{var h=y=>{_0(y,{label:"",get value(){return r().mapping.value},set value(x){r(r().mapping.value=x,!0)}})},s=(y,x)=>{{var C=U=>{var R=Mr(),N=Dt(R);Qi(N,17,()=>r().mapping.categories,Rn,(D,O,H)=>{_0(D,{get label(){return r().mapping.categories[H]},get value(){return r().mapping.values[H]},set value(W){r(r().mapping.values[H]=W,!0)}})}),Xe(U,R)},I=(U,R)=>{{var N=D=>{var O=Dk(),H=Dt(O);Qi(H,21,()=>r().mapping.values,Rn,(le,he,ae)=>{var V=Qk(),K=Dt(V);K.textContent=ae===0?"":"";var oe=Ze(K,2);_0(oe,{get value(){return r().mapping.values[ae]},set value(ce){r(r().mapping.values[ae]=ce,!0)}}),Xe(le,V)}),Fe(H);var W=Ze(H,2);kn(W,{label:"",min:2,max:10,step:1,get value(){return r().mapping.divisions},set value(le){r(r().mapping.divisions=le,!0)}});var se=Ze(W,2);{var de=le=>{var he=Mr(),ae=Dt(he);Qi(ae,17,()=>re(a).categories,Rn,(V,K,oe)=>{var ce=kk(),ye=Pe(ce),we=Pe(ye,!0);Fe(ye);var Ve=Ze(ye,2);Fe(ce),hr(()=>{_r(we,re(a).categories[oe]),Oa(Ve,`background-color: ${re(a).values[oe]??""};`)}),Xe(V,ce)}),Xe(le,he)};Ut(se,le=>{re(a)&&le(de)})}Xe(D,O)};Ut(U,D=>{r().type==="step"&&D(N)},R)}};Ut(y,U=>{r().type==="match"?U(C):U(I,!1)},x)}};Ut(u,y=>{r().type==="single"?y(h):y(s,!1)})}Xe(t,l),gr()}const Zk=t=>{const{range:e,divisions:r,values:a}=t;if(console.log(e,r,a),r<=0)throw new Error("divisions must be greater than 0");const[l,u]=e,h=(u-l)/r;return{categories:Array.from({length:r},(y,x)=>l+h*x),values:a}};var Hk=dt('<div class="flex w-full select-none flex-col gap-2"><div><span> </span></div> <!></div>'),Ok=dt("<span></span> <!>",1),Xk=dt('<div class="flex-between flex w-full select-none gap-2"><div class="w-full"> </div> <div class="p-2"> </div></div>'),Vk=dt('<div class="flex-between flex w-full gap-2"></div> <!> <!> ',1),Gk=dt("<!> <!> <!> <!>",1);function jk(t,e){fr(e,!0);let r=xr(e,"setExpression",15),a=bi(()=>{if(r()&&r().type==="step")return Zk(r().mapping)});var l=Mr(),u=Dt(l);{var h=s=>{var y=Gk(),x=Dt(y);{var C=H=>{kn(H,{label:"",min:1,max:30,step:.01,get value(){return r().mapping.value},set value(W){r(r().mapping.value=W,!0)}})};Ut(x,H=>{r().type==="single"&&H(C)})}var I=Ze(x,2);{var U=H=>{var W=Mr(),se=Dt(W);Qi(se,17,()=>r().mapping.categories,Rn,(de,le,he)=>{kn(de,{label:"",min:2,max:10,step:1,get value(){return r().mapping.values[he]},set value(ae){r(r().mapping.values[he]=ae,!0)}})}),Xe(H,W)};Ut(I,H=>{r().type==="match"&&H(U)})}var R=Ze(I,2);{var N=H=>{var W=Mr(),se=Dt(W);Qi(se,17,()=>r().mapping.range,Rn,(de,le,he)=>{var ae=Hk(),V=Pe(ae),K=Pe(V),oe=Pe(K);Fe(K),Fe(V);var ce=Ze(V,2);kn(ce,{label:"",min:0,max:30,step:.01,get value(){return r().mapping.values[he]},set value(ye){r(r().mapping.values[he]=ye,!0)}}),Fe(ae),hr(()=>_r(oe,`${(he===0?"":"")??""}: ${r().mapping.range[he]??""}`)),Xe(de,ae)}),Xe(H,W)};Ut(R,H=>{r().type==="linear"&&H(N)})}var D=Ze(R,2);{var O=H=>{var W=Vk(),se=Dt(W);Qi(se,21,()=>r().mapping.values,Rn,(V,K,oe)=>{var ce=Ok(),ye=Dt(ce);ye.textContent=oe===0?"":"";var we=Ze(ye,2);kn(we,{label:"",min:0,max:30,step:.01,get value(){return r().mapping.values[oe]},set value(Ve){r(r().mapping.values[oe]=Ve,!0)}}),Xe(V,ce)}),Fe(se);var de=Ze(se,2);kn(de,{label:"",min:2,max:10,step:1,get value(){return r().mapping.divisions},set value(V){r(r().mapping.divisions=V,!0)}});var le=Ze(de,2);{var he=V=>{var K=Mr(),oe=Dt(K);Qi(oe,17,()=>re(a).categories,Rn,(ce,ye,we)=>{var Ve=Xk(),ut=Pe(Ve),nt=Pe(ut,!0);Fe(ut);var rt=Ze(ut,2),ft=Pe(rt,!0);Fe(rt),Fe(Ve),hr(()=>{_r(nt,re(a).categories[we]),_r(ft,re(a).values[we])}),Xe(ce,Ve)}),Xe(V,K)};Ut(le,V=>{re(a)&&V(he)})}var ae=Ze(le);hr(V=>_r(ae,` ${V??""}`),[()=>JSON.stringify(re(a))]),Xe(H,W)};Ut(D,H=>{r().type==="step"&&H(O)})}Xe(s,y)};Ut(u,s=>{r()&&s(h)})}Xe(t,l),gr()}var Kk=(t,e)=>ht(e,!re(e)),$k=(t,e)=>ht(e,!1),qk=dt('<label><input type="radio" class="hidden"> <div class="flex items-center gap-2"><!> <span class="select-none"> </span></div></label>'),Wk=dt('<div class="absolute left-0 top-[60px] z-10 w-full divide-y divide-gray-300 overflow-hidden rounded-lg bg-white shadow-md"></div>'),Jk=dt('<div class="relative py-2"><button class="c-select flex w-full justify-between"><div class="flex items-center gap-2"><!> <span> </span></div> <!></button> <!></div> <div class="flex grow flex-col gap-2 overflow-y-auto overflow-x-hidden pt-2"><!> <!></div>',1);function Kw(t,e){fr(e,!0);const r=[];let a=xr(e,"style",15),l=er(!1),u=bi(()=>{const C=a().expressions.find(I=>I.key===a().key);if(C)return C}),h=bi(()=>a().expressions);var s=Mr(),y=Dt(s);{var x=C=>{var I=Jk(),U=Dt(I),R=Pe(U);R.__click=[Kk,l];var N=Pe(R),D=Pe(N);const O=bi(()=>Ey(re(u).type,e.expressionType));br(D,{get icon(){return re(O)},width:20});var H=Ze(D,2),W=Pe(H,!0);Fe(H),Fe(N);var se=Ze(N,2);br(se,{icon:"bi:chevron-down",class:"h-6 w-6"}),Fe(R);var de=Ze(R,2);{var le=ce=>{var ye=Wk();Qi(ye,21,()=>re(h),we=>we.key,(we,Ve)=>{var ut=qk(),nt=Pe(ut);bo(nt);var rt;nt.__change=[$k,l];var ft=Ze(nt,2),_t=Pe(ft);const gt=bi(()=>Ey(re(Ve).type,e.expressionType));br(_t,{get icon(){return re(gt)},width:20});var Je=Ze(_t,2),je=Pe(Je,!0);Fe(Je),Fe(ft),Fe(ut),hr(()=>{mn(ut,1,`hover:text-accent bg-sub z-20 flex w-full cursor-pointer items-center justify-between gap-2 p-2 text-white transition-colors duration-100 ${(re(Ve).key===a().key?"bg-accent":"")??""}`),rt!==(rt=re(Ve).key)&&(nt.value=(nt.__value=re(Ve).key)==null?"":re(Ve).key),_r(je,re(Ve).name)}),Ep(r,[],nt,()=>(re(Ve).key,a().key),Qe=>a(a().key=Qe,!0)),Xe(we,ut)}),Fe(ye),Ri(3,ye,()=>js,()=>({duration:200,y:-20})),Xe(ce,ye)};Ut(de,ce=>{re(l)&&ce(le)})}Fe(U);var he=Ze(U,2),ae=Pe(he);{var V=ce=>{zk(ce,{get setExpression(){return re(u)}})};Ut(ae,ce=>{e.expressionType==="color"&&ce(V)})}var K=Ze(ae,2);{var oe=ce=>{jk(ce,{get setExpression(){return re(u)}})};Ut(K,ce=>{e.expressionType==="number"&&ce(oe)})}Fe(he),hr(ce=>_r(W,ce),[()=>{var ce;return(ce=re(h).find(ye=>ye.key===a().key))==null?void 0:ce.name}]),Xe(C,I)};Ut(y,C=>{re(u)&&C(x)})}Xe(t,s),gr()}qi(["click","change"]);var eD=dt("<!> <!>",1);function E_(t,e){fr(e,!0);let r=xr(e,"colorStyle",15),a=er(!1);Kl(t,{label:"",get value(){return re(a)},set value(l){ht(a,l,!0)},children:(l,u)=>{var h=eD(),s=Dt(h);jl(s,{label:"",get value(){return r().show},set value(x){r(r().show=x,!0)}});var y=Ze(s,2);Kw(y,{expressionType:"color",get style(){return r()},set style(x){r(x)}}),Xe(l,h)},$$slots:{default:!0}}),gr()}var tD=dt("<!> <!>",1);function rD(t,e){fr(e,!0);let r=xr(e,"layerEntry",15),a=er(!1);Kl(t,{label:"",get value(){return re(a)},set value(l){ht(a,l,!0)},children:(l,u)=>{var h=tD(),s=Dt(h);jl(s,{label:"",get value(){return r().style.labels.show},set value(x){r(r().style.labels.show=x,!0)}});var y=Ze(s,2);jw(y,{get labels(){return r().style.labels},set labels(x){r(r().style.labels=x,!0)}}),Xe(l,h)},$$slots:{default:!0}}),gr()}var iD=dt('<label><input type="radio" class="hidden"> <span class="select-none"> </span></label>'),nD=dt('<div class="flex flex-col gap-2"><div class="flex select-none items-center gap-2 text-base"><span> </span></div> <div class="flex w-full overflow-hidden rounded-full"></div></div>');function F_(t,e){fr(e,!0);const r=[];let a=xr(e,"group",15);var l=nD(),u=Pe(l),h=Pe(u),s=Pe(h,!0);Fe(h),Fe(u);var y=Ze(u,2);Qi(y,21,()=>e.options,x=>x.key,(x,C)=>{var I=iD(),U=Pe(I);bo(U);var R,N=Ze(U,2),D=Pe(N,!0);Fe(N),Fe(I),hr(()=>{Mn(I,"for",re(C).key),mn(I,1,`z-20 flex w-full cursor-pointer items-center justify-center p-2 text-white ${(re(C).key===a()?"bg-green-600 ":"bg-gray-400")??""}`),Mn(U,"id",re(C).key),R!==(R=re(C).key)&&(U.value=(U.__value=re(C).key)==null?"":re(C).key),_r(D,re(C).name)}),Ep(r,[],U,()=>(re(C).key,a()),a),Xe(x,I)}),Fe(y),Fe(l),hr(()=>_r(s,e.label)),Xe(t,l),gr()}function $w(t,e){fr(e,!0);let r=xr(e,"numberStyle",15),a=er(!1);Kl(t,{get label(){return e.label},get value(){return re(a)},set value(l){ht(a,l,!0)},children:(l,u)=>{Kw(l,{expressionType:"number",get style(){return r()},set style(h){r(h)}})},$$slots:{default:!0}}),gr()}var aD=dt("<!> <!> <!> <!>",1);function sD(t,e){fr(e,!0);let r=xr(e,"layerEntry",15),a=er(!1);var l=aD(),u=Dt(l);kn(u,{label:"",min:0,max:1,step:.01,get value(){return r().style.opacity},set value(x){r(r().style.opacity=x,!0)}});var h=Ze(u,2);E_(h,{get colorStyle(){return r().style.colors},set colorStyle(x){r(r().style.colors=x,!0)}});var s=Ze(h,2);$w(s,{label:"",get numberStyle(){return r().style.width},set numberStyle(x){r(r().style.width=x,!0)}});var y=Ze(s,2);Kl(y,{label:"",get value(){return re(a)},set value(x){ht(a,x,!0)},children:(x,C)=>{F_(x,{label:"",options:[{name:"",key:"solid"},{name:"",key:"dashed"}],get group(){return r().style.lineStyle},set group(I){r(r().style.lineStyle=I,!0)}})},$$slots:{default:!0}}),Xe(t,l),gr()}var oD=dt("<!> <!>",1);function qw(t,e){fr(e,!0);let r=xr(e,"labels",15),a=er(!1);Kl(t,{label:"",get value(){return re(a)},set value(l){ht(a,l,!0)},children:(l,u)=>{var h=oD(),s=Dt(h);jl(s,{label:"",get value(){return r().show},set value(x){r(r().show=x,!0)}});var y=Ze(s,2);jw(y,{get labels(){return r()},set labels(x){r(x)}}),Xe(l,h)},$$slots:{default:!0}}),gr()}var lD=dt('<!> <!> <div class="flex flex-col gap-2 pb-2"><!></div>',1),AD=dt("<!> <!> <!>",1),cD=dt("<!> <!>",1),hD=dt("<!> <!> <!> <!> <!>",1);function uD(t,e){fr(e,!0);let r=xr(e,"layerEntry",15),a=er(!1),l=er(!1);var u=hD(),h=Dt(u);kn(h,{label:"",min:0,max:1,step:.01,get value(){return r().style.opacity},set value(N){r(r().style.opacity=N,!0)}});var s=Ze(h,2);{var y=N=>{F_(N,{label:"",options:[{name:"",key:"circle"},{name:"",key:"icon"}],get group(){return r().style.markerType},set group(D){r(r().style.markerType=D,!0)}})};Ut(s,N=>{r().style.icon&&N(y)})}var x=Ze(s,2);{var C=N=>{var D=AD(),O=Dt(D);E_(O,{get colorStyle(){return r().style.colors},set colorStyle(se){r(r().style.colors=se,!0)}});var H=Ze(O,2);$w(H,{label:"",get numberStyle(){return r().style.radius},set numberStyle(se){r(r().style.radius=se,!0)}});var W=Ze(H,2);Kl(W,{label:"",get value(){return re(a)},set value(se){ht(a,se,!0)},children:(se,de)=>{var le=lD(),he=Dt(le);jl(he,{label:"",get value(){return r().style.outline.show},set value(oe){r(r().style.outline.show=oe,!0)}});var ae=Ze(he,2);kn(ae,{label:"",min:0,max:10,step:.01,get value(){return r().style.outline.width},set value(oe){r(r().style.outline.width=oe,!0)}});var V=Ze(ae,2),K=Pe(V);_0(K,{label:"",get value(){return r().style.outline.color},set value(oe){r(r().style.outline.color=oe,!0)}}),Fe(V),Xe(se,le)},$$slots:{default:!0}}),Xe(N,D)};Ut(x,N=>{r().style.markerType==="circle"&&N(C)})}var I=Ze(x,2);{var U=N=>{Kl(N,{label:"",get value(){return re(l)},set value(D){ht(l,D,!0)},children:(D,O)=>{var H=cD(),W=Dt(H);jl(W,{label:"",get value(){return r().style.icon.show},set value(de){r(r().style.icon.show=de,!0)}});var se=Ze(W,2);kn(se,{label:"",min:0,max:.5,step:.01,get value(){return r().style.icon.size},set value(de){r(r().style.icon.size=de,!0)}}),Xe(D,H)},$$slots:{default:!0}})};Ut(I,N=>{r().style.markerType==="icon"&&r().style.icon&&N(U)})}var R=Ze(I,2);qw(R,{get labels(){return r().style.labels},set labels(N){r(r().style.labels=N,!0)}}),Xe(t,u),gr()}var dD=dt('<!> <!> <div class="flex flex-col gap-2 pb-2"><!></div> <!>',1),fD=dt('<div class="py-2"><!> <!> <!> <!></div>');function gD(t,e){fr(e,!0);let r=xr(e,"layerEntry",15),a=er(!1);var l=fD(),u=Pe(l);kn(u,{label:"",min:0,max:1,step:.01,get value(){return r().style.opacity},set value(x){r(r().style.opacity=x,!0)}});var h=Ze(u,2);E_(h,{get colorStyle(){return r().style.colors},set colorStyle(x){r(r().style.colors=x,!0)}});var s=Ze(h,2);Kl(s,{label:"",get value(){return re(a)},set value(x){ht(a,x,!0)},children:(x,C)=>{var I=dD(),U=Dt(I);jl(U,{label:"",get value(){return r().style.outline.show},set value(H){r(r().style.outline.show=H,!0)}});var R=Ze(U,2);kn(R,{label:"",min:0,max:10,step:.01,get value(){return r().style.outline.width},set value(H){r(r().style.outline.width=H,!0)}});var N=Ze(R,2),D=Pe(N);_0(D,{label:"",get value(){return r().style.outline.color},set value(H){r(r().style.outline.color=H,!0)}}),Fe(N);var O=Ze(N,2);F_(O,{label:"",options:[{name:"",key:"solid"},{name:"",key:"dashed"}],get group(){return r().style.outline.lineStyle},set group(H){r(r().style.outline.lineStyle=H,!0)}}),Xe(x,I)},$$slots:{default:!0}});var y=Ze(s,2);qw(y,{get labels(){return r().style.labels},set labels(x){r(r().style.labels=x,!0)}}),Fe(l),Xe(t,l),gr()}var pD=dt("<!> <!> <!> <!>",1);function mD(t,e){fr(e,!0);let r=xr(e,"layerEntry",15);var a=Mr(),l=Dt(a);{var u=h=>{var s=pD(),y=Dt(s);{var x=O=>{uD(O,{get layerEntry(){return r()},set layerEntry(H){r(H)}})};Ut(y,O=>{r().format.geometryType==="Point"&&O(x)})}var C=Ze(y,2);{var I=O=>{sD(O,{get layerEntry(){return r()},set layerEntry(H){r(H)}})};Ut(C,O=>{r().format.geometryType==="LineString"&&O(I)})}var U=Ze(C,2);{var R=O=>{gD(O,{get layerEntry(){return r()},set layerEntry(H){r(H)}})};Ut(U,O=>{r().format.geometryType==="Polygon"&&O(R)})}var N=Ze(U,2);{var D=O=>{rD(O,{get layerEntry(){return r()},set layerEntry(H){r(H)}})};Ut(N,O=>{r().format.geometryType==="Label"&&O(D)})}Xe(h,s)};Ut(l,h=>{r()&&r().type==="vector"&&h(u)})}Xe(t,a),gr()}var _D=dt('<li style="display: flex; align-items: center; margin-bottom: 5px;"><span></span> <span> </span></li>'),bD=dt('<h2 class="text-gray-100"> </h2> <ul class="text-gray-100"></ul>',1),yD=dt("<span> </span>"),vD=dt('<h2 class="text-gray-100"> </h2> <div class="flex w-full flex-col gap-2 text-gray-100"><div class="w-full"><div class="h-[25px] w-full rounded-md"></div></div> <div class="flex w-full justify-between"></div></div>',1),xD=dt("<!> <!>",1),wD=dt('<div class="flex-between flex w-full select-none gap-2"><div class="w-full rounded-full p-2"></div></div>'),BD=dt('<div class="flex-between flex w-full select-none gap-2 text-gray-100"><div class="h-[20px] w-[20px] flex-none rounded-full"></div> <div class="w-full"> </div></div>'),CD=dt('<div class="flex w-full select-none items-center justify-center gap-2 text-gray-100"><div class="h-[20px] w-[20px] flex-none rounded-full"></div> <div class="w-full"> </div></div>'),MD=dt("<!> <!>",1);function RD(t,e){fr(e,!0);let r=bi(()=>e.layerEntry.style),a=bi(()=>e.layerEntry.type),l=bi(()=>{if(!(!e.layerEntry||e.layerEntry.type!=="vector"))return e.layerEntry.style.colors.expressions.find(I=>I.key===e.layerEntry.style.colors.key)}),u=bi(()=>{if(re(l)&&re(l).type==="step")return kp(re(l).mapping)});var h=MD(),s=Dt(h);{var y=I=>{var U=xD(),R=Dt(U);{var N=H=>{var W=bD(),se=Dt(W),de=Pe(se,!0);Fe(se);var le=Ze(se,2);Qi(le,21,()=>re(r).legend.colors,Rn,(he,ae,V)=>{var K=_D(),oe=Pe(K),ce=Ze(oe,2),ye=Pe(ce,!0);Fe(ce),Fe(K),hr(()=>{Oa(oe,`width: 20px; height: 20px; background-color: ${re(ae)??""}; margin-right: 10px; display: inline-block;`),_r(ye,re(r).legend.labels[V])}),Xe(he,K)}),Fe(le),hr(()=>_r(de,re(r).legend.name)),Xe(H,W)};Ut(R,H=>{re(r).legend.type==="category"&&H(N)})}var D=Ze(R,2);{var O=H=>{var W=vD(),se=Dt(W),de=Pe(se,!0);Fe(se);var le=Ze(se,2),he=Pe(le),ae=Pe(he);Fe(he);var V=Ze(he,2);Qi(V,21,()=>re(r).legend.range.slice(),Rn,(K,oe)=>{var ce=yD(),ye=Pe(ce);Fe(ce),hr(()=>_r(ye,`${re(oe)??""} ${re(r).legend.unit??""}`)),Xe(K,ce)}),Fe(V),Fe(le),hr(()=>{_r(de,re(r).legend.name),Oa(ae,`background: linear-gradient(90deg, ${re(r).legend.colors[0]??""} 0%, ${re(r).legend.colors[1]??""} 100%);`)}),Xe(H,W)};Ut(D,H=>{re(r).legend.type==="gradient"&&H(O)})}Xe(I,U)};Ut(s,I=>{re(a)==="raster"&&re(r).type==="categorical"&&I(y)})}var x=Ze(s,2);{var C=I=>{var U=Mr(),R=Dt(U);{var N=D=>{var O=Mr(),H=Dt(O);{var W=de=>{var le=wD(),he=Pe(le);Fe(le),hr(()=>Oa(he,`background-color: ${re(l).mapping.value??""};`)),Xe(de,le)},se=(de,le)=>{{var he=V=>{var K=Mr(),oe=Dt(K);Qi(oe,17,()=>re(l).mapping.categories,Rn,(ce,ye,we)=>{var Ve=BD(),ut=Pe(Ve),nt=Ze(ut,2),rt=Pe(nt,!0);Fe(nt),Fe(Ve),hr(()=>{Oa(ut,`background-color: ${re(l).mapping.values[we]??""};`),_r(rt,re(l).mapping.categories[we])}),Xe(ce,Ve)}),Xe(V,K)},ae=(V,K)=>{{var oe=ce=>{var ye=Mr(),we=Dt(ye);{var Ve=ut=>{var nt=Mr(),rt=Dt(nt);Qi(rt,17,()=>re(u).categories,Rn,(ft,_t,gt)=>{var Je=CD(),je=Pe(Je),Qe=Ze(je,2),pt=Pe(Qe,!0);Fe(Qe),Fe(Je),hr(()=>{Oa(je,`background-color: ${re(u).values[gt]??""};`),_r(pt,re(u).categories[gt])}),Xe(ft,Je)}),Xe(ut,nt)};Ut(we,ut=>{re(u)&&ut(Ve)})}Xe(ce,ye)};Ut(V,ce=>{re(l).type==="step"&&ce(oe)},K)}};Ut(de,V=>{re(l).type==="match"?V(he):V(ae,!1)},le)}};Ut(H,de=>{re(l).type==="single"?de(W):de(se,!1)})}Xe(D,O)};Ut(R,D=>{re(a)==="vector"&&D(N)})}Xe(I,U)};Ut(x,I=>{re(l)&&I(C)})}Xe(t,h),gr()}const ID=(t,e)=>{e()&&fi.focusLayer(e())},UD=(t,e,r)=>{e()&&Ol(ac,!r())};var ED=(t,e,r)=>e(t,r().id),FD=(t,e,r,a)=>{e()||r(a().id)},TD=dt('<div class="pointer-events-none absolute grid h-full w-full place-items-center bg-black bg-opacity-50"></div> <div><!></div>',1),SD=(t,e)=>e(e().style.visible=!e().style.visible,!0),ND=dt('<button class="cursor-pointer"><!></button>'),YD=dt('<div class="flex pl-[33px]"><div class="w-[2px] items-stretch bg-gray-500"></div> <div class="flex w-full flex-col gap-4 px-2 pt-2"><div class="flex gap-4 text-gray-100"><button class="cursor-pointer"><!></button> <!> <button class="cursor-pointer"><!></button> <button class="cursor-pointer"><!></button></div> <!></div></div>'),PD=dt('<div role="button" tabindex="0" aria-label=""><button><div class="flex items-center justify-start gap-2"><label class="relative grid h-[50px] w-[50px] shrink-0 cursor-pointer place-items-center overflow-hidden rounded-full bg-gray-600 text-base"><input type="checkbox" class="hidden"> <!> <!></label> <div><div class="flex flex-col items-start gap-[2px] overflow-hidden"><span> </span> <span class="text-nowrap text-xs text-gray-400"> </span></div></div></div></button> <!></div>');function Ww(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(ac,"$isEdit",r),u=()=>kr(Ps,"$selectedLayerId",r),h=()=>kr(zs,"$showDataMenu",r);let s=xr(e,"layerEntry",15),y=xr(e,"enableFlip",15),x=xr(e,"dragEnterType",15),C=er(!1),I=er(!1),U=er(!1),R=bi(()=>{if(s()){if(s().type==="raster")return"raster";if(s().type==="vector"){if(s().format.geometryType==="Label")return"label";if(s().format.geometryType==="Point")return"point";if(s().format.geometryType==="LineString")return"line";if(s().format.geometryType==="Polygon")return"polygon"}}});const N=()=>{re(U)||l()||(u()===s().id?Ps.set(""):Ps.set(s().id))},D=$e=>{ht(C,!re(C)),re(C)&&Ps.set($e)};zs.subscribe($e=>{$e&&Ol(Ps,"")});const O=()=>{Ol(ac,!1),s()&&(sc.remove(s().id),Ps.set(""))};let H=0,W=0;const se=($e,wt)=>{const Ct=document.getElementById(wt);if(!Ct)return;const Mt=Ct.getBoundingClientRect();H=$e.clientX-Mt.left,W=$e.clientY-Mt.top},de=($e,wt)=>{if(!$e.dataTransfer)return;$e.dataTransfer.effectAllowed="move";const Ct=document.getElementById(wt);$e.dataTransfer.setDragImage(Ct,H,W),ht(I,!0),y(!1),ht(C,!1),x(re(R)),Ps.set(wt)},le=$e=>{$e&&u()!==$e&&sc.reorderWithinTypeById(re(R),u(),$e)},he=()=>{ht(I,!1),y(!0),x(null),Qm.set("idle")};var ae=PD();Mn(ae,"draggable",!0),ae.__mousedown=[ED,se,s];var V=Pe(ae);V.__click=N;let K;var oe=Pe(V),ce=Pe(oe),ye=Pe(ce);ye.__input=[FD,h,D,s];var we=Ze(ye,2);{var Ve=$e=>{o_($e,{get layerEntry(){return s()}})};Ut(we,$e=>{s().style.visible&&$e(Ve)})}var ut=Ze(we,2);{var nt=$e=>{var wt=TD(),Ct=Dt(wt),Mt=Ze(Ct,2),Pt=Pe(Mt);br(Pt,{icon:"ic:round-power-settings-new",width:30}),Fe(Mt),hr(()=>mn(Mt,1,`pointer-events-none absolute ${(s().style.visible?"text-red-500":"text-neutral-200")??""}`)),Ri(3,Ct,()=>fs,()=>({duration:100})),Ri(3,Mt,()=>fs,()=>({duration:100})),Xe($e,wt)};Ut(ut,$e=>{(re(U)||!s().style.visible)&&$e(nt)})}Fe(ce);var rt=Ze(ce,2),ft=Pe(rt),_t=Pe(ft),gt=Pe(_t,!0);Fe(_t);var Je=Ze(_t,2),je=Pe(Je,!0);Fe(Je),Fe(ft),Fe(rt),Fe(oe),Fe(V);var Qe=Ze(V,2);{var pt=$e=>{var wt=YD(),Ct=Ze(Pe(wt),2),Mt=Pe(Ct),Pt=Pe(Mt);Pt.__click=[SD,s];var ar=Pe(Pt);const Lt=bi(()=>s().style.visible?"akar-icons:eye":"akar-icons:eye-slashed");br(ar,{get icon(){return re(Lt)},class:"h-8 w-8"}),Fe(Pt);var Ot=Ze(Pt,2);{var Qt=Br=>{var Dr=ND();Dr.__click=[ID,s];var vi=Pe(Dr);br(vi,{icon:"hugeicons:target-03",class:"h-8 w-8"}),Fe(Dr),Xe(Br,Dr)};Ut(Ot,Br=>{s().metaData.location!==""&&s().metaData.location!==""&&Br(Qt)})}var St=Ze(Ot,2);St.__click=[UD,s,l];var Zt=Pe(St);br(Zt,{icon:"mdi:mixer-settings",class:"ml-4 h-8 w-8"}),Fe(St);var lr=Ze(St,2);lr.__click=O;var dr=Pe(lr);br(dr,{icon:"bx:trash",class:"h-8 w-8"}),Fe(lr),Fe(Mt);var rr=Ze(Mt,2);RD(rr,{get layerEntry(){return s()}}),Fe(Ct),Fe(wt),Ri(3,wt,()=>Hg,()=>({duration:200})),Xe($e,wt)};Ut(Qe,$e=>{re(C)&&$e(pt)})}Fe(ae),hr(()=>{mn(ae,1,`relative flex flex-col transition-opacity ${(x()!==null&&x()!==re(R)?"opacity-50":"")??""} ${(re(I)?"c-dragging-style":"")??""}`),Mn(V,"id",s().id),mn(V,1,`bg-main c-dragging-style c-rounded relative z-10 cursor-move select-none flex-col overflow-clip text-clip text-nowrap border-2 border-gray-500 p-2 text-left transition-colors duration-100 ${(u()===s().id?"css-gradient":" hover:border-accent")??""}`,"svelte-cwcrkw"),K=Oa(V,"",K,{width:h()?"70px":"100%",transition:"width 0.3s ease"}),mn(_t,1,`text-nowrap text-base ${u()===s().id,""}`),_r(gt,s().metaData.name),_r(je,s().metaData.location??"---")}),Ln("dragstart",ae,$e=>de($e,s().id)),Ln("dragenter",ae,()=>le(s().id)),Ln("dragover",ae,$e=>$e.preventDefault()),Ln("dragend",ae,he),Ln("mouseenter",ce,()=>ht(U,!0)),Ln("mouseleave",ce,()=>ht(U,!1)),Xe(t,ae),gr(),a()}qi(["mousedown","click","input"]);var LD=dt('<div class="bg-main absolute top-0 z-30 flex h-full w-full flex-col p-2"><div class="flex shrink-0 items-center justify-start gap-2 pb-2"><button class="bg-base grid items-center rounded-full p-2"><!></button> <span class="text-lg text-base"></span></div> <!> <div class="c-scroll h-full grow overflow-x-hidden"><!> <!></div></div>');function QD(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Ps,"$selectedLayerId",r),u=()=>kr(ac,"$isEdit",r);let h=xr(e,"layerEntry",15),s=xr(e,"tempLayerEntries",15);In(()=>{});var y=Mr(),x=Dt(y);{var C=I=>{var U=LD(),R=Pe(U),N=Pe(R);N.__click=()=>ac.set(!1);var D=Pe(N);br(D,{icon:"ep:back",class:"text-main h-4 w-4"}),Fe(N),Ki(2),Fe(R);var O=Ze(R,2);Ww(O,{get layerEntry(){return h()},set layerEntry(he){h(he)},get tempLayerEntries(){return s()},set tempLayerEntries(he){s(he)}});var H=Ze(O,2),W=Pe(H);{var se=he=>{mD(he,{get layerEntry(){return h()},set layerEntry(ae){h(ae)}})};Ut(W,he=>{h().type==="vector"&&he(se)})}var de=Ze(W,2);{var le=he=>{Ik(he,{get layerEntry(){return h()},set layerEntry(ae){h(ae)}})};Ut(de,he=>{h().type==="raster"&&he(le)})}Fe(H),Fe(U),Ri(3,U,()=>js,()=>({duration:300,x:-50,opacity:0})),Xe(I,U)};Ut(x,I=>{l()&&u()&&h()&&I(C)})}Xe(t,y),gr(),a()}qi(["click"]);var kD=dt("<div></div>"),DD=dt('<div class="flex items-center justify-between p-2"><span class="p-2 text-base text-lg"></span> <button class="bg-base cursor-pointer rounded-full p-2"><!></button></div>'),zD=dt('<div class="mb-1 border-t p-2 text-base font-bold"></div> <!>',1),ZD=dt("<div> </div>"),HD=dt("<div><!> <!></div>"),OD=dt('<button class="c-btn-confirm pointer-events-auto flex shrink items-center justify-center gap-2"><!><span></span></button>'),XD=dt('<div class="c-fog pointer-events-none absolute bottom-0 z-10 flex h-[100px] w-full items-end justify-center pb-4 svelte-acdvpo"><!></div>'),VD=dt('<div><!> <div class="c-scroll-hidden flex grow flex-col gap-2 overflow-y-auto overflow-x-hidden px-2 pb-4"><!> <!> <div class="h-[200px] w-full shrink-0"></div></div> <!> <!></div>'),GD=dt("<!> <!>",1);function t5(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Zs,"$mapMode",r),u=()=>kr(zs,"$showDataMenu",r),h=()=>kr(T0,"$showLabelLayer",r),s=()=>kr(eE,"$typeBreakIndices",r),y=()=>kr(ac,"$isEdit",r);let x=xr(e,"layerEntries",15),C=xr(e,"tempLayerEntries",15),I=er(void 0),U=er(!0),R=er(null);const N={label:"",point:"",line:"",polygon:"",raster:""};Ps.subscribe(de=>{if(de)ht(I,x().find(le=>le.id===de),!0);else{ht(I,void 0);return}}),In(()=>{});var D=GD(),O=Dt(D);{var H=de=>{var le=kD();hr(()=>mn(le,1,`flex h-full shrink-0 flex-col ${(u()?"w-[90px]":"w-[400px]")??""}`)),Ri(1,le,()=>Hg,()=>({duration:1,delay:200,axis:"x"})),Xe(de,le)};Ut(O,de=>{(l()==="edit"||u())&&de(H)})}var W=Ze(O,2);{var se=de=>{var le=VD();Oa(le,"",{},{transition:"width 0.3s ease"});var he=Pe(le);{var ae=ut=>{var nt=DD(),rt=Ze(Pe(nt),2);rt.__click=()=>{Zs.set("view"),ac.set(!1),Ps.set("")};var ft=Pe(rt);br(ft,{icon:"material-symbols:close-rounded",class:"text-main w-4] h-4"}),Fe(rt),Fe(nt),Ri(3,nt,()=>Hg,()=>({duration:250})),Xe(ut,nt)};Ut(he,ut=>{u()||ut(ae)})}var V=Ze(he,2),K=Pe(V);{var oe=ut=>{var nt=zD(),rt=Ze(Dt(nt),2);jl(rt,{label:"",get value(){return j5(),h()},set value(ft){Ol(T0,ft)}}),Xe(ut,nt)};Ut(K,ut=>{u()||ut(oe)})}var ce=Ze(K,2);Qi(ce,27,x,ut=>ut.id,(ut,nt,rt,ft)=>{var _t=HD(),gt=Pe(_t);{var Je=Qe=>{var pt=ZD(),$e=Pe(pt,!0);Fe(pt),hr(()=>{mn(pt,1,`mb-1 mt-4 border-t p-2 text-base font-bold ${(u()?"text-sm":"")??""}`),_r($e,N[s()[re(rt)]])}),Xe(Qe,pt)};Ut(gt,Qe=>{s()[re(rt)]&&Qe(Je)})}var je=Ze(gt,2);Ww(je,{get layerEntry(){return x()[re(rt)]},set layerEntry(Qe){x(x()[re(rt)]=Qe,!0)},get tempLayerEntries(){return C()},set tempLayerEntries(Qe){C(Qe)},get enableFlip(){return re(U)},set enableFlip(Qe){ht(U,Qe,!0)},get dragEnterType(){return re(R)},set dragEnterType(Qe){ht(R,Qe,!0)}}),Fe(_t),n8(_t,()=>Gw,()=>({duration:re(U)?200:0})),Xe(ut,_t)}),Ki(2),Fe(V);var ye=Ze(V,2);QD(ye,{get layerEntry(){return re(I)},set layerEntry(ut){ht(I,ut,!0)},get tempLayerEntries(){return C()},set tempLayerEntries(ut){C(ut)}});var we=Ze(ye,2);{var Ve=ut=>{var nt=XD(),rt=Pe(nt);{var ft=_t=>{var gt=OD();gt.__click=()=>zs.set(!0);var Je=Pe(gt);br(Je,{icon:"material-symbols:data-saver-on-rounded",class:"h-8 w-8"}),Ki(),Fe(gt),Xe(_t,gt)};Ut(rt,_t=>{re(R)||_t(ft)})}Fe(nt),Xe(ut,nt)};Ut(we,ut=>{!y()&&!u()&&ut(Ve)})}Fe(le),hr(()=>mn(le,1,`bg-main absolute z-30 flex h-full flex-col gap-2 ${(u()?"w-[90px]":"w-[400px]")??""}`)),Ri(3,le,()=>js,()=>({duration:300,x:-100,opacity:0})),Xe(de,le)};Ut(W,de=>{(l()==="edit"||u())&&de(se)})}Xe(t,D),gr(),a()}qi(["click"]);const jD=Gn(!1);var KD=dt('<div class="absolute bottom-0 z-30 flex h-full w-full items-center justify-center bg-black/50 pointer-events-none"><div class="c-circle svelte-18jkeg5"><div class="c-circle-child"></div></div></div>');function $D(t){const[e,r]=sn(),a=()=>kr(jD,"$showLockOnScreen",e);var l=Mr(),u=Dt(l);{var h=s=>{var y=KD();Ri(3,y,()=>fs,()=>({duration:100})),Xe(s,y)};Ut(u,s=>{a()&&s(h)})}Xe(t,l),r()}var Jw={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,a)=>{t.exports=a()})(J5,function r(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},l,u=!a.document&&!!a.postMessage,h=a.IS_PAPA_WORKER||!1,s={},y=0,x={};function C(V){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(K){var oe=le(K);oe.chunkSize=parseInt(oe.chunkSize),K.step||K.chunk||(oe.chunkSize=null),this._handle=new D(oe),(this._handle.streamer=this)._config=oe}).call(this,V),this.parseChunk=function(K,oe){var ce=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ce){let we=this._config.newline;we||(ye=this._config.quoteChar||'"',we=this._handle.guessLineEndings(K,ye)),K=[...K.split(we).slice(ce)].join(we)}this.isFirstChunk&&ae(this._config.beforeFirstChunk)&&(ye=this._config.beforeFirstChunk(K))!==void 0&&(K=ye),this.isFirstChunk=!1,this._halted=!1;var ce=this._partialLine+K,ye=(this._partialLine="",this._handle.parse(ce,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(K=ye.meta.cursor,ce=(this._finished||(this._partialLine=ce.substring(K-this._baseIndex),this._baseIndex=K),ye&&ye.data&&(this._rowCount+=ye.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)a.postMessage({results:ye,workerId:x.WORKER_ID,finished:ce});else if(ae(this._config.chunk)&&!oe){if(this._config.chunk(ye,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=ye=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ye.data),this._completeResults.errors=this._completeResults.errors.concat(ye.errors),this._completeResults.meta=ye.meta),this._completed||!ce||!ae(this._config.complete)||ye&&ye.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ce||ye&&ye.meta.paused||this._nextChunk(),ye}this._halted=!0},this._sendError=function(K){ae(this._config.error)?this._config.error(K):h&&this._config.error&&a.postMessage({workerId:x.WORKER_ID,error:K,finished:!1})}}function I(V){var K;(V=V||{}).chunkSize||(V.chunkSize=x.RemoteChunkSize),C.call(this,V),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(oe){this._input=oe,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(K=new XMLHttpRequest,this._config.withCredentials&&(K.withCredentials=this._config.withCredentials),u||(K.onload=he(this._chunkLoaded,this),K.onerror=he(this._chunkError,this)),K.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var oe,ce=this._config.downloadRequestHeaders;for(oe in ce)K.setRequestHeader(oe,ce[oe])}var ye;this._config.chunkSize&&(ye=this._start+this._config.chunkSize-1,K.setRequestHeader("Range","bytes="+this._start+"-"+ye));try{K.send(this._config.downloadRequestBody)}catch(we){this._chunkError(we.message)}u&&K.status===0&&this._chunkError()}},this._chunkLoaded=function(){K.readyState===4&&(K.status<200||400<=K.status?this._chunkError():(this._start+=this._config.chunkSize||K.responseText.length,this._finished=!this._config.chunkSize||this._start>=(oe=>(oe=oe.getResponseHeader("Content-Range"))!==null?parseInt(oe.substring(oe.lastIndexOf("/")+1)):-1)(K),this.parseChunk(K.responseText)))},this._chunkError=function(oe){oe=K.statusText||oe,this._sendError(new Error(oe))}}function U(V){(V=V||{}).chunkSize||(V.chunkSize=x.LocalChunkSize),C.call(this,V);var K,oe,ce=typeof FileReader<"u";this.stream=function(ye){this._input=ye,oe=ye.slice||ye.webkitSlice||ye.mozSlice,ce?((K=new FileReader).onload=he(this._chunkLoaded,this),K.onerror=he(this._chunkError,this)):K=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ye=this._input,we=(this._config.chunkSize&&(we=Math.min(this._start+this._config.chunkSize,this._input.size),ye=oe.call(ye,this._start,we)),K.readAsText(ye,this._config.encoding));ce||this._chunkLoaded({target:{result:we}})},this._chunkLoaded=function(ye){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ye.target.result)},this._chunkError=function(){this._sendError(K.error)}}function R(V){var K;C.call(this,V=V||{}),this.stream=function(oe){return K=oe,this._nextChunk()},this._nextChunk=function(){var oe,ce;if(!this._finished)return oe=this._config.chunkSize,K=oe?(ce=K.substring(0,oe),K.substring(oe)):(ce=K,""),this._finished=!K,this.parseChunk(ce)}}function N(V){C.call(this,V=V||{});var K=[],oe=!0,ce=!1;this.pause=function(){C.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){C.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ye){this._input=ye,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ce&&K.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),K.length?this.parseChunk(K.shift()):oe=!0},this._streamData=he(function(ye){try{K.push(typeof ye=="string"?ye:ye.toString(this._config.encoding)),oe&&(oe=!1,this._checkIsFinished(),this.parseChunk(K.shift()))}catch(we){this._streamError(we)}},this),this._streamError=he(function(ye){this._streamCleanUp(),this._sendError(ye)},this),this._streamEnd=he(function(){this._streamCleanUp(),ce=!0,this._streamData("")},this),this._streamCleanUp=he(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function D(V){var K,oe,ce,ye,we=Math.pow(2,53),Ve=-we,ut=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,nt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,rt=this,ft=0,_t=0,gt=!1,Je=!1,je=[],Qe={data:[],errors:[],meta:{}};function pt(Mt){return V.skipEmptyLines==="greedy"?Mt.join("").trim()==="":Mt.length===1&&Mt[0].length===0}function $e(){if(Qe&&ce&&(Ct("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),ce=!1),V.skipEmptyLines&&(Qe.data=Qe.data.filter(function(Lt){return!pt(Lt)})),wt()){let Lt=function(Ot,Qt){ae(V.transformHeader)&&(Ot=V.transformHeader(Ot,Qt)),je.push(Ot)};if(Qe)if(Array.isArray(Qe.data[0])){for(var Mt=0;wt()&&Mt<Qe.data.length;Mt++)Qe.data[Mt].forEach(Lt);Qe.data.splice(0,1)}else Qe.data.forEach(Lt)}function Pt(Lt,Ot){for(var Qt=V.header?{}:[],St=0;St<Lt.length;St++){var Zt=St,lr=Lt[St],lr=((dr,rr)=>(Br=>(V.dynamicTypingFunction&&V.dynamicTyping[Br]===void 0&&(V.dynamicTyping[Br]=V.dynamicTypingFunction(Br)),(V.dynamicTyping[Br]||V.dynamicTyping)===!0))(dr)?rr==="true"||rr==="TRUE"||rr!=="false"&&rr!=="FALSE"&&((Br=>{if(ut.test(Br)&&(Br=parseFloat(Br),Ve<Br&&Br<we))return 1})(rr)?parseFloat(rr):nt.test(rr)?new Date(rr):rr===""?null:rr):rr)(Zt=V.header?St>=je.length?"__parsed_extra":je[St]:Zt,lr=V.transform?V.transform(lr,Zt):lr);Zt==="__parsed_extra"?(Qt[Zt]=Qt[Zt]||[],Qt[Zt].push(lr)):Qt[Zt]=lr}return V.header&&(St>je.length?Ct("FieldMismatch","TooManyFields","Too many fields: expected "+je.length+" fields but parsed "+St,_t+Ot):St<je.length&&Ct("FieldMismatch","TooFewFields","Too few fields: expected "+je.length+" fields but parsed "+St,_t+Ot)),Qt}var ar;Qe&&(V.header||V.dynamicTyping||V.transform)&&(ar=1,!Qe.data.length||Array.isArray(Qe.data[0])?(Qe.data=Qe.data.map(Pt),ar=Qe.data.length):Qe.data=Pt(Qe.data,0),V.header&&Qe.meta&&(Qe.meta.fields=je),_t+=ar)}function wt(){return V.header&&je.length===0}function Ct(Mt,Pt,ar,Lt){Mt={type:Mt,code:Pt,message:ar},Lt!==void 0&&(Mt.row=Lt),Qe.errors.push(Mt)}ae(V.step)&&(ye=V.step,V.step=function(Mt){Qe=Mt,wt()?$e():($e(),Qe.data.length!==0&&(ft+=Mt.data.length,V.preview&&ft>V.preview?oe.abort():(Qe.data=Qe.data[0],ye(Qe,rt))))}),this.parse=function(Mt,Pt,ar){var Lt=V.quoteChar||'"',Lt=(V.newline||(V.newline=this.guessLineEndings(Mt,Lt)),ce=!1,V.delimiter?ae(V.delimiter)&&(V.delimiter=V.delimiter(Mt),Qe.meta.delimiter=V.delimiter):((Lt=((Ot,Qt,St,Zt,lr)=>{var dr,rr,Br,Dr;lr=lr||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var vi=0;vi<lr.length;vi++){for(var Gr,Fi=lr[vi],Kr=0,hi=0,Rr=0,$r=(Br=void 0,new H({comments:Zt,delimiter:Fi,newline:Qt,preview:10}).parse(Ot)),ui=0;ui<$r.data.length;ui++)St&&pt($r.data[ui])?Rr++:(Gr=$r.data[ui].length,hi+=Gr,Br===void 0?Br=Gr:0<Gr&&(Kr+=Math.abs(Gr-Br),Br=Gr));0<$r.data.length&&(hi/=$r.data.length-Rr),(rr===void 0||Kr<=rr)&&(Dr===void 0||Dr<hi)&&1.99<hi&&(rr=Kr,dr=Fi,Dr=hi)}return{successful:!!(V.delimiter=dr),bestDelimiter:dr}})(Mt,V.newline,V.skipEmptyLines,V.comments,V.delimitersToGuess)).successful?V.delimiter=Lt.bestDelimiter:(ce=!0,V.delimiter=x.DefaultDelimiter),Qe.meta.delimiter=V.delimiter),le(V));return V.preview&&V.header&&Lt.preview++,K=Mt,oe=new H(Lt),Qe=oe.parse(K,Pt,ar),$e(),gt?{meta:{paused:!0}}:Qe||{meta:{paused:!1}}},this.paused=function(){return gt},this.pause=function(){gt=!0,oe.abort(),K=ae(V.chunk)?"":K.substring(oe.getCharIndex())},this.resume=function(){rt.streamer._halted?(gt=!1,rt.streamer.parseChunk(K,!0)):setTimeout(rt.resume,3)},this.aborted=function(){return Je},this.abort=function(){Je=!0,oe.abort(),Qe.meta.aborted=!0,ae(V.complete)&&V.complete(Qe),K=""},this.guessLineEndings=function(Ot,Lt){Ot=Ot.substring(0,1048576);var Lt=new RegExp(O(Lt)+"([^]*?)"+O(Lt),"gm"),ar=(Ot=Ot.replace(Lt,"")).split("\r"),Lt=Ot.split(`
`),Ot=1<Lt.length&&Lt[0].length<ar[0].length;if(ar.length===1||Ot)return`
`;for(var Qt=0,St=0;St<ar.length;St++)ar[St][0]===`
`&&Qt++;return Qt>=ar.length/2?`\r
`:"\r"}}function O(V){return V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(V){var K=(V=V||{}).delimiter,oe=V.newline,ce=V.comments,ye=V.step,we=V.preview,Ve=V.fastMode,ut=null,nt=!1,rt=V.quoteChar==null?'"':V.quoteChar,ft=rt;if(V.escapeChar!==void 0&&(ft=V.escapeChar),(typeof K!="string"||-1<x.BAD_DELIMITERS.indexOf(K))&&(K=","),ce===K)throw new Error("Comment character same as delimiter");ce===!0?ce="#":(typeof ce!="string"||-1<x.BAD_DELIMITERS.indexOf(ce))&&(ce=!1),oe!==`
`&&oe!=="\r"&&oe!==`\r
`&&(oe=`
`);var _t=0,gt=!1;this.parse=function(Je,je,Qe){if(typeof Je!="string")throw new Error("Input must be a string");var pt=Je.length,$e=K.length,wt=oe.length,Ct=ce.length,Mt=ae(ye),Pt=[],ar=[],Lt=[],Ot=_t=0;if(!Je)return Kr();if(Ve||Ve!==!1&&Je.indexOf(rt)===-1){for(var Qt=Je.split(oe),St=0;St<Qt.length;St++){if(Lt=Qt[St],_t+=Lt.length,St!==Qt.length-1)_t+=oe.length;else if(Qe)return Kr();if(!ce||Lt.substring(0,Ct)!==ce){if(Mt){if(Pt=[],Dr(Lt.split(K)),hi(),gt)return Kr()}else Dr(Lt.split(K));if(we&&we<=St)return Pt=Pt.slice(0,we),Kr(!0)}}return Kr()}for(var Zt=Je.indexOf(K,_t),lr=Je.indexOf(oe,_t),dr=new RegExp(O(ft)+O(rt),"g"),rr=Je.indexOf(rt,_t);;)if(Je[_t]===rt)for(rr=_t,_t++;;){if((rr=Je.indexOf(rt,rr+1))===-1)return Qe||ar.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Pt.length,index:_t}),Gr();if(rr===pt-1)return Gr(Je.substring(_t,rr).replace(dr,rt));if(rt===ft&&Je[rr+1]===ft)rr++;else if(rt===ft||rr===0||Je[rr-1]!==ft){Zt!==-1&&Zt<rr+1&&(Zt=Je.indexOf(K,rr+1));var Br=vi((lr=lr!==-1&&lr<rr+1?Je.indexOf(oe,rr+1):lr)===-1?Zt:Math.min(Zt,lr));if(Je.substr(rr+1+Br,$e)===K){Lt.push(Je.substring(_t,rr).replace(dr,rt)),Je[_t=rr+1+Br+$e]!==rt&&(rr=Je.indexOf(rt,_t)),Zt=Je.indexOf(K,_t),lr=Je.indexOf(oe,_t);break}if(Br=vi(lr),Je.substring(rr+1+Br,rr+1+Br+wt)===oe){if(Lt.push(Je.substring(_t,rr).replace(dr,rt)),Fi(rr+1+Br+wt),Zt=Je.indexOf(K,_t),rr=Je.indexOf(rt,_t),Mt&&(hi(),gt))return Kr();if(we&&Pt.length>=we)return Kr(!0);break}ar.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Pt.length,index:_t}),rr++}}else if(ce&&Lt.length===0&&Je.substring(_t,_t+Ct)===ce){if(lr===-1)return Kr();_t=lr+wt,lr=Je.indexOf(oe,_t),Zt=Je.indexOf(K,_t)}else if(Zt!==-1&&(Zt<lr||lr===-1))Lt.push(Je.substring(_t,Zt)),_t=Zt+$e,Zt=Je.indexOf(K,_t);else{if(lr===-1)break;if(Lt.push(Je.substring(_t,lr)),Fi(lr+wt),Mt&&(hi(),gt))return Kr();if(we&&Pt.length>=we)return Kr(!0)}return Gr();function Dr(Rr){Pt.push(Rr),Ot=_t}function vi(Rr){var $r=0;return $r=Rr!==-1&&(Rr=Je.substring(rr+1,Rr))&&Rr.trim()===""?Rr.length:$r}function Gr(Rr){return Qe||(Rr===void 0&&(Rr=Je.substring(_t)),Lt.push(Rr),_t=pt,Dr(Lt),Mt&&hi()),Kr()}function Fi(Rr){_t=Rr,Dr(Lt),Lt=[],lr=Je.indexOf(oe,_t)}function Kr(Rr){if(V.header&&!je&&Pt.length&&!nt){var $r=Pt[0],ui={},Un=new Set($r);let Xi=!1;for(let Vi=0;Vi<$r.length;Vi++){let si=$r[Vi];if(ui[si=ae(V.transformHeader)?V.transformHeader(si,Vi):si]){let ni,xi=ui[si];for(;ni=si+"_"+xi,xi++,Un.has(ni););Un.add(ni),$r[Vi]=ni,ui[si]++,Xi=!0,(ut=ut===null?{}:ut)[ni]=si}else ui[si]=1,$r[Vi]=si;Un.add(si)}Xi&&console.warn("Duplicate headers found and renamed."),nt=!0}return{data:Pt,errors:ar,meta:{delimiter:K,linebreak:oe,aborted:gt,truncated:!!Rr,cursor:Ot+(je||0),renamedHeaders:ut}}}function hi(){ye(Kr()),Pt=[],ar=[]}},this.abort=function(){gt=!0},this.getCharIndex=function(){return _t}}function W(V){var K=V.data,oe=s[K.workerId],ce=!1;if(K.error)oe.userError(K.error,K.file);else if(K.results&&K.results.data){var ye={abort:function(){ce=!0,se(K.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:de,resume:de};if(ae(oe.userStep)){for(var we=0;we<K.results.data.length&&(oe.userStep({data:K.results.data[we],errors:K.results.errors,meta:K.results.meta},ye),!ce);we++);delete K.results}else ae(oe.userChunk)&&(oe.userChunk(K.results,ye,K.file),delete K.results)}K.finished&&!ce&&se(K.workerId,K.results)}function se(V,K){var oe=s[V];ae(oe.userComplete)&&oe.userComplete(K),oe.terminate(),delete s[V]}function de(){throw new Error("Not implemented.")}function le(V){if(typeof V!="object"||V===null)return V;var K,oe=Array.isArray(V)?[]:{};for(K in V)oe[K]=le(V[K]);return oe}function he(V,K){return function(){V.apply(K,arguments)}}function ae(V){return typeof V=="function"}return x.parse=function(V,K){var oe=(K=K||{}).dynamicTyping||!1;if(ae(oe)&&(K.dynamicTypingFunction=oe,oe={}),K.dynamicTyping=oe,K.transform=!!ae(K.transform)&&K.transform,!K.worker||!x.WORKERS_SUPPORTED)return oe=null,x.NODE_STREAM_INPUT,typeof V=="string"?(V=(ce=>ce.charCodeAt(0)!==65279?ce:ce.slice(1))(V),oe=new(K.download?I:R)(K)):V.readable===!0&&ae(V.read)&&ae(V.on)?oe=new N(K):(a.File&&V instanceof File||V instanceof Object)&&(oe=new U(K)),oe.stream(V);(oe=(()=>{var ce;return!!x.WORKERS_SUPPORTED&&(ce=(()=>{var ye=a.URL||a.webkitURL||null,we=r.toString();return x.BLOB_URL||(x.BLOB_URL=ye.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",we,")();"],{type:"text/javascript"})))})(),(ce=new a.Worker(ce)).onmessage=W,ce.id=y++,s[ce.id]=ce)})()).userStep=K.step,oe.userChunk=K.chunk,oe.userComplete=K.complete,oe.userError=K.error,K.step=ae(K.step),K.chunk=ae(K.chunk),K.complete=ae(K.complete),K.error=ae(K.error),delete K.worker,oe.postMessage({input:V,config:K,workerId:oe.id})},x.unparse=function(V,K){var oe=!1,ce=!0,ye=",",we=`\r
`,Ve='"',ut=Ve+Ve,nt=!1,rt=null,ft=!1,_t=((()=>{if(typeof K=="object"){if(typeof K.delimiter!="string"||x.BAD_DELIMITERS.filter(function(je){return K.delimiter.indexOf(je)!==-1}).length||(ye=K.delimiter),typeof K.quotes!="boolean"&&typeof K.quotes!="function"&&!Array.isArray(K.quotes)||(oe=K.quotes),typeof K.skipEmptyLines!="boolean"&&typeof K.skipEmptyLines!="string"||(nt=K.skipEmptyLines),typeof K.newline=="string"&&(we=K.newline),typeof K.quoteChar=="string"&&(Ve=K.quoteChar),typeof K.header=="boolean"&&(ce=K.header),Array.isArray(K.columns)){if(K.columns.length===0)throw new Error("Option columns is empty");rt=K.columns}K.escapeChar!==void 0&&(ut=K.escapeChar+Ve),K.escapeFormulae instanceof RegExp?ft=K.escapeFormulae:typeof K.escapeFormulae=="boolean"&&K.escapeFormulae&&(ft=/^[=+\-@\t\r].*$/)}})(),new RegExp(O(Ve),"g"));if(typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(V)){if(!V.length||Array.isArray(V[0]))return gt(null,V,nt);if(typeof V[0]=="object")return gt(rt||Object.keys(V[0]),V,nt)}else if(typeof V=="object")return typeof V.data=="string"&&(V.data=JSON.parse(V.data)),Array.isArray(V.data)&&(V.fields||(V.fields=V.meta&&V.meta.fields||rt),V.fields||(V.fields=Array.isArray(V.data[0])?V.fields:typeof V.data[0]=="object"?Object.keys(V.data[0]):[]),Array.isArray(V.data[0])||typeof V.data[0]=="object"||(V.data=[V.data])),gt(V.fields||[],V.data||[],nt);throw new Error("Unable to serialize unrecognized input");function gt(je,Qe,pt){var $e="",wt=(typeof je=="string"&&(je=JSON.parse(je)),typeof Qe=="string"&&(Qe=JSON.parse(Qe)),Array.isArray(je)&&0<je.length),Ct=!Array.isArray(Qe[0]);if(wt&&ce){for(var Mt=0;Mt<je.length;Mt++)0<Mt&&($e+=ye),$e+=Je(je[Mt],Mt);0<Qe.length&&($e+=we)}for(var Pt=0;Pt<Qe.length;Pt++){var ar=(wt?je:Qe[Pt]).length,Lt=!1,Ot=wt?Object.keys(Qe[Pt]).length===0:Qe[Pt].length===0;if(pt&&!wt&&(Lt=pt==="greedy"?Qe[Pt].join("").trim()==="":Qe[Pt].length===1&&Qe[Pt][0].length===0),pt==="greedy"&&wt){for(var Qt=[],St=0;St<ar;St++){var Zt=Ct?je[St]:St;Qt.push(Qe[Pt][Zt])}Lt=Qt.join("").trim()===""}if(!Lt){for(var lr=0;lr<ar;lr++){0<lr&&!Ot&&($e+=ye);var dr=wt&&Ct?je[lr]:lr;$e+=Je(Qe[Pt][dr],lr)}Pt<Qe.length-1&&(!pt||0<ar&&!Ot)&&($e+=we)}}return $e}function Je(je,Qe){var pt,$e;return je==null?"":je.constructor===Date?JSON.stringify(je).slice(1,25):($e=!1,ft&&typeof je=="string"&&ft.test(je)&&(je="'"+je,$e=!0),pt=je.toString().replace(_t,ut),($e=$e||oe===!0||typeof oe=="function"&&oe(je,Qe)||Array.isArray(oe)&&oe[Qe]||((wt,Ct)=>{for(var Mt=0;Mt<Ct.length;Mt++)if(-1<wt.indexOf(Ct[Mt]))return!0;return!1})(pt,x.BAD_DELIMITERS)||-1<pt.indexOf(ye)||pt.charAt(0)===" "||pt.charAt(pt.length-1)===" ")?Ve+pt+Ve:pt)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!u&&!!a.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=H,x.ParserHandle=D,x.NetworkStreamer=I,x.FileStreamer=U,x.StringStreamer=R,x.ReadableStreamStreamer=N,a.jQuery&&((l=a.jQuery).fn.parse=function(V){var K=V.config||{},oe=[];return this.each(function(we){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var Ve=0;Ve<this.files.length;Ve++)oe.push({file:this.files[Ve],inputElem:this,instanceConfig:l.extend({},K)})}),ce(),this;function ce(){if(oe.length===0)ae(V.complete)&&V.complete();else{var we,Ve,ut,nt,rt=oe[0];if(ae(V.before)){var ft=V.before(rt.file,rt.inputElem);if(typeof ft=="object"){if(ft.action==="abort")return we="AbortError",Ve=rt.file,ut=rt.inputElem,nt=ft.reason,void(ae(V.error)&&V.error({name:we},Ve,ut,nt));if(ft.action==="skip")return void ye();typeof ft.config=="object"&&(rt.instanceConfig=l.extend(rt.instanceConfig,ft.config))}else if(ft==="skip")return void ye()}var _t=rt.instanceConfig.complete;rt.instanceConfig.complete=function(gt){ae(_t)&&_t(gt,rt.file,rt.inputElem),ye()},x.parse(rt.file,rt.instanceConfig)}}function ye(){oe.splice(0,1),ce()}}),h&&(a.onmessage=function(V){V=V.data,x.WORKER_ID===void 0&&V&&(x.WORKER_ID=V.workerId),typeof V.input=="string"?a.postMessage({workerId:x.WORKER_ID,results:x.parse(V.input,V.config),finished:!0}):(a.File&&V.input instanceof File||V.input instanceof Object)&&(V=x.parse(V.input,V.config))&&a.postMessage({workerId:x.WORKER_ID,results:V,finished:!0})}),(I.prototype=Object.create(C.prototype)).constructor=I,(U.prototype=Object.create(C.prototype)).constructor=U,(R.prototype=Object.create(R.prototype)).constructor=R,(N.prototype=Object.create(C.prototype)).constructor=N,x})})(Jw);var qD=Jw.exports;const WD=Z4(qD),JD=t=>new Promise((e,r)=>{WD.parse(t,{complete:a=>{const l=a.data.filter(h=>h.lat!=null&&h.lon!=null);if(l.length===0){Ph("CSV","error"),r(new Error("Latitude and longitude data are missing"));return}if(l.length>1e5){Ph("10","error"),r(new Error("Data of more than 100,000 entries cannot be displayed."));return}const u={type:"FeatureCollection",name:t.name,features:l.map(h=>({type:"Feature",properties:h,geometry:{type:"Point",coordinates:[h.lon,h.lat]}}))};e(u)},header:!0})}),ez=async(t,e)=>{try{const r=await t.arrayBuffer(),a=new Response(r).body;if(!a)throw new Error("ReadableStream");const l=Tx(a),u={type:"FeatureCollection",features:[]};if(e===void 0)for await(const h of l)u.features.push(h);return u}catch(r){throw console.error(r),new Error("Failed to parse FGB file")}};var tz=dt('<div class="pointer-events-none absolute h-full w-full bg-slate-500 opacity-50"></div>');function rz(t,e){fr(e,!0);const r=["csv","geojson","fgb"],a=async s=>{var I,U;let y;const x=(I=s.name.split(".").pop())==null?void 0:I.toLowerCase();if(!x||!r.includes(x)){Ph("","error");return}switch((U=s.name.split(".").pop())==null?void 0:U.toLowerCase()){case"csv":y=await JD(s);break;case"geojson":y=await _F(s);break;case"fgb":y=await ez(s);break;default:Ph("","error")}Ph("","success");const C=jg(y);console.warn("bounds",C)};Dn(()=>{e.dropFile&&a(e.dropFile)});var l=Mr(),u=Dt(l);{var h=s=>{var y=tz();Xe(s,y)};Ut(u,s=>{e.isDragover&&s(h)})}Xe(t,l),gr()}var iz=dt('<div class="absolute bottom-2 left-2"></div>');function nz(t,e){fr(e,!1);let r=co();In(()=>{fi.onInitialized(l=>{if(l){const u=new Fp.ScaleControl({maxWidth:100,unit:"metric"});re(r).appendChild(u.onAdd(l))}})}),Wl();var a=iz();Ga(a,l=>ht(r,l),()=>re(r)),Xe(t,a),gr()}var az=dt('<button class="bg-main grid h-[50px] w-[50px] cursor-pointer place-items-center rounded-full p-2"><!></button>');function sz(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Mm,"$showStreetViewLayer",r),u=()=>{Mm.set(!l())};let h=er(null);In(()=>{re(h)});var s=az();s.__click=u;var y=Pe(s);const x=bi(()=>l()?"text-accent":"text-base");br(y,{icon:"fluent:video-360-20-regular",get class(){return`h-8 w-8 ${re(x)??""}`}}),Fe(s),Ga(s,C=>ht(h,C),()=>re(h)),Xe(t,s),gr(),a()}qi(["click"]);function oz(t){nz(t,{})}/*!
 * matrix 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Go,ic,T_,Wp,t0,Bg,mp,b0,Ds="transform",g4=Ds+"Origin",e9,t9=function(e){var r=e.ownerDocument||e;for(!(Ds in e.style)&&("msTransform"in e.style)&&(Ds="msTransform",g4=Ds+"Origin");r.parentNode&&(r=r.parentNode););if(ic=window,mp=new Ac,r){Go=r,T_=r.documentElement,Wp=r.body,b0=Go.createElementNS("http://www.w3.org/2000/svg","g"),b0.style.transform="none";var a=r.createElement("div"),l=r.createElement("div"),u=r&&(r.body||r.firstElementChild);u&&u.appendChild&&(u.appendChild(a),a.appendChild(l),a.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),e9=l.offsetParent!==a,u.removeChild(a))}return r},lz=function(e){for(var r,a;e&&e!==Wp;)a=e._gsap,a&&a.uncache&&a.get(e,"x"),a&&!a.scaleX&&!a.scaleY&&a.renderTransform&&(a.scaleX=a.scaleY=1e-4,a.renderTransform(1,a),r?r.push(a):r=[a]),e=e.parentNode;return r},r9=[],i9=[],Az=function(){return ic.pageYOffset||Go.scrollTop||T_.scrollTop||Wp.scrollTop||0},cz=function(){return ic.pageXOffset||Go.scrollLeft||T_.scrollLeft||Wp.scrollLeft||0},S_=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},hz=function t(e){if(ic.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return t(e)},hm=function t(e,r){if(e.parentNode&&(Go||t9(e))){var a=S_(e),l=a?a.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",u=a?r?"rect":"g":"div",h=r!==2?0:100,s=r===3?100:0,y="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",x=Go.createElementNS?Go.createElementNS(l.replace(/^https/,"http"),u):Go.createElement(u);return r&&(a?(Bg||(Bg=t(e)),x.setAttribute("width",.01),x.setAttribute("height",.01),x.setAttribute("transform","translate("+h+","+s+")"),Bg.appendChild(x)):(t0||(t0=t(e),t0.style.cssText=y),x.style.cssText=y+"width:0.1px;height:0.1px;top:"+s+"px;left:"+h+"px",t0.appendChild(x))),x}throw"Need document and parent."},uz=function(e){for(var r=new Ac,a=0;a<e.numberOfItems;a++)r.multiply(e.getItem(a).matrix);return r},dz=function(e){var r=e.getCTM(),a;return r||(a=e.style[Ds],e.style[Ds]="none",e.appendChild(b0),r=b0.getCTM(),e.removeChild(b0),a?e.style[Ds]=a:e.style.removeProperty(Ds.replace(/([A-Z])/g,"-$1").toLowerCase())),r||mp.clone()},fz=function(e,r){var a=S_(e),l=e===a,u=a?r9:i9,h=e.parentNode,s,y,x,C,I,U;if(e===ic)return e;if(u.length||u.push(hm(e,1),hm(e,2),hm(e,3)),s=a?Bg:t0,a)l?(x=dz(e),C=-x.e/x.a,I=-x.f/x.d,y=mp):e.getBBox?(x=e.getBBox(),y=e.transform?e.transform.baseVal:{},y=y.numberOfItems?y.numberOfItems>1?uz(y):y.getItem(0).matrix:mp,C=y.a*x.x+y.c*x.y,I=y.b*x.x+y.d*x.y):(y=new Ac,C=I=0),(l?a:h).appendChild(s),s.setAttribute("transform","matrix("+y.a+","+y.b+","+y.c+","+y.d+","+(y.e+C)+","+(y.f+I)+")");else{if(C=I=0,e9)for(y=e.offsetParent,x=e;x&&(x=x.parentNode)&&x!==y&&x.parentNode;)(ic.getComputedStyle(x)[Ds]+"").length>4&&(C=x.offsetLeft,I=x.offsetTop,x=0);if(U=ic.getComputedStyle(e),U.position!=="absolute"&&U.position!=="fixed")for(y=e.offsetParent;h&&h!==y;)C+=h.scrollLeft||0,I+=h.scrollTop||0,h=h.parentNode;x=s.style,x.top=e.offsetTop-I+"px",x.left=e.offsetLeft-C+"px",x[Ds]=U[Ds],x[g4]=U[g4],x.position=U.position==="fixed"?"fixed":"absolute",e.parentNode.appendChild(s)}return s},um=function(e,r,a,l,u,h,s){return e.a=r,e.b=a,e.c=l,e.d=u,e.e=h,e.f=s,e},Ac=function(){function t(r,a,l,u,h,s){r===void 0&&(r=1),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=1),h===void 0&&(h=0),s===void 0&&(s=0),um(this,r,a,l,u,h,s)}var e=t.prototype;return e.inverse=function(){var a=this.a,l=this.b,u=this.c,h=this.d,s=this.e,y=this.f,x=a*h-l*u||1e-10;return um(this,h/x,-l/x,-u/x,a/x,(u*y-h*s)/x,-(a*y-l*s)/x)},e.multiply=function(a){var l=this.a,u=this.b,h=this.c,s=this.d,y=this.e,x=this.f,C=a.a,I=a.c,U=a.b,R=a.d,N=a.e,D=a.f;return um(this,C*l+U*h,C*u+U*s,I*l+R*h,I*u+R*s,y+N*l+D*h,x+N*u+D*s)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(a){var l=this.a,u=this.b,h=this.c,s=this.d,y=this.e,x=this.f;return l===a.a&&u===a.b&&h===a.c&&s===a.d&&y===a.e&&x===a.f},e.apply=function(a,l){l===void 0&&(l={});var u=a.x,h=a.y,s=this.a,y=this.b,x=this.c,C=this.d,I=this.e,U=this.f;return l.x=u*s+h*x+I||0,l.y=u*y+h*C+U||0,l},t}();function VA(t,e,r,a){if(!t||!t.parentNode||(Go||t9(t)).documentElement===t)return new Ac;var l=lz(t),u=S_(t),h=u?r9:i9,s=fz(t),y=h[0].getBoundingClientRect(),x=h[1].getBoundingClientRect(),C=h[2].getBoundingClientRect(),I=s.parentNode,U=hz(t),R=new Ac((x.left-y.left)/100,(x.top-y.top)/100,(C.left-y.left)/100,(C.top-y.top)/100,y.left+(U?0:cz()),y.top+(U?0:Az()));if(I.removeChild(s),l)for(y=l.length;y--;)x=l[y],x.scaleX=x.scaleY=0,x.renderTransform(1,x);return e?R.inverse():R}function r5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gz(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var qr,Mi,Va,Os,jo,dm,Zo,p4,r0,Ql,n9,m4,k0,N_,i0,Ss,n0,Cg,a9,_4,_p=0,s9=function(){return typeof window<"u"},o9=function(){return qr||s9()&&(qr=window.gsap)&&qr.registerPlugin&&qr},Sl=function(e){return typeof e=="function"},y0=function(e){return typeof e=="object"},Qs=function(e){return typeof e>"u"},Mg=function(){return!1},v0="transform",b4="transformOrigin",Ml=function(e){return Math.round(e*1e4)/1e4},Od=Array.isArray,ng=function(e,r){var a=Va.createElementNS?Va.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),e):Va.createElement(e);return a.style?a:Va.createElement(e)},i5=180/Math.PI,bh=1e20,pz=new Ac,Rl=Date.now||function(){return new Date().getTime()},nc=[],kh={},mz=0,_z=/^(?:a|input|textarea|button|select)$/i,n5=0,yh={},Do={},l9=function(e,r){var a={},l;for(l in e)a[l]=r?e[l]*r:e[l];return a},bz=function(e,r){for(var a in r)a in e||(e[a]=r[a]);return e},a5=function t(e,r){for(var a=e.length,l;a--;)r?e[a].style.touchAction=r:e[a].style.removeProperty("touch-action"),l=e[a].children,l&&l.length&&t(l,r)},A9=function(){return nc.forEach(function(e){return e()})},yz=function(e){nc.push(e),nc.length===1&&qr.ticker.add(A9)},s5=function(){return!nc.length&&qr.ticker.remove(A9)},o5=function(e){for(var r=nc.length;r--;)nc[r]===e&&nc.splice(r,1);qr.to(s5,{overwrite:!0,delay:15,duration:0,onComplete:s5,data:"_draggable"})},vz=function(e,r){for(var a in r)a in e||(e[a]=r[a]);return e},Bn=function(e,r,a,l){if(e.addEventListener){var u=k0[r];l=l||(n9?{passive:!1}:null),e.addEventListener(u||r,a,l),u&&r!==u&&e.addEventListener(r,a,l)}},fn=function(e,r,a,l){if(e.removeEventListener){var u=k0[r];e.removeEventListener(u||r,a,l),u&&r!==u&&e.removeEventListener(r,a,l)}},ns=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},xz=function(e,r){for(var a=e.length;a--;)if(e[a].identifier===r)return!0},wz=function t(e){N_=e.touches&&_p<e.touches.length,fn(e.target,"touchend",t)},l5=function(e){N_=e.touches&&_p<e.touches.length,Bn(e.target,"touchend",wz)},Dh=function(e){return Mi.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},zh=function(e){return Mi.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},A5=function t(e,r){Bn(e,"scroll",r),qh(e.parentNode)||t(e.parentNode,r)},c5=function t(e,r){fn(e,"scroll",r),qh(e.parentNode)||t(e.parentNode,r)},qh=function(e){return!e||e===Os||e.nodeType===9||e===Va.body||e===Mi||!e.nodeType||!e.parentNode},h5=function(e,r){var a=r==="x"?"Width":"Height",l="scroll"+a,u="client"+a;return Math.max(0,qh(e)?Math.max(Os[l],jo[l])-(Mi["inner"+a]||Os[u]||jo[u]):e[l]-e[u])},fm=function t(e,r){var a=h5(e,"x"),l=h5(e,"y");qh(e)?e=Do:t(e.parentNode,r),e._gsMaxScrollX=a,e._gsMaxScrollY=l,r||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},gm=function(e,r,a){var l=e.style;l&&(Qs(l[r])&&(r=r0(r,e)||r),a==null?l.removeProperty&&l.removeProperty(r.replace(/([A-Z])/g,"-$1").toLowerCase()):l[r]=a)},D0=function(e){return Mi.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},ZA={},vh=function(e){if(e===Mi)return ZA.left=ZA.top=0,ZA.width=ZA.right=Os.clientWidth||e.innerWidth||jo.clientWidth||0,ZA.height=ZA.bottom=(e.innerHeight||0)-20<Os.clientHeight?Os.clientHeight:e.innerHeight||jo.clientHeight||0,ZA;var r=e.ownerDocument||Va,a=Qs(e.pageX)?!e.nodeType&&!Qs(e.left)&&!Qs(e.top)?e:Ql(e)[0].getBoundingClientRect():{left:e.pageX-zh(r),top:e.pageY-Dh(r),right:e.pageX-zh(r)+1,bottom:e.pageY-Dh(r)+1};return Qs(a.right)&&!Qs(a.width)?(a.right=a.left+a.width,a.bottom=a.top+a.height):Qs(a.width)&&(a={width:a.right-a.left,height:a.bottom-a.top,right:a.right,left:a.left,bottom:a.bottom,top:a.top}),a},nn=function(e,r,a){var l=e.vars,u=l[a],h=e._listeners[r],s;return Sl(u)&&(s=u.apply(l.callbackScope||e,l[a+"Params"]||[e.pointerEvent])),h&&e.dispatchEvent(r)===!1&&(s=!1),s},u5=function(e,r){var a=Ql(e)[0],l,u,h;return!a.nodeType&&a!==Mi?Qs(e.left)?(u=e.min||e.minX||e.minRotation||0,l=e.min||e.minY||0,{left:u,top:l,width:(e.max||e.maxX||e.maxRotation||0)-u,height:(e.max||e.maxY||0)-l}):(h={x:0,y:0},{left:e.left-h.x,top:e.top-h.y,width:e.width,height:e.height}):Bz(a,r)},as={},Bz=function(e,r){r=Ql(r)[0];var a=e.getBBox&&e.ownerSVGElement,l=e.ownerDocument||Va,u,h,s,y,x,C,I,U,R,N,D,O,H;if(e===Mi)s=Dh(l),u=zh(l),h=u+(l.documentElement.clientWidth||e.innerWidth||l.body.clientWidth||0),y=s+((e.innerHeight||0)-20<l.documentElement.clientHeight?l.documentElement.clientHeight:e.innerHeight||l.body.clientHeight||0);else{if(r===Mi||Qs(r))return e.getBoundingClientRect();u=s=0,a?(N=e.getBBox(),D=N.width,O=N.height):(e.viewBox&&(N=e.viewBox.baseVal)&&(u=N.x||0,s=N.y||0,D=N.width,O=N.height),D||(H=D0(e),N=H.boxSizing==="border-box",D=(parseFloat(H.width)||e.clientWidth||0)+(N?0:parseFloat(H.borderLeftWidth)+parseFloat(H.borderRightWidth)),O=(parseFloat(H.height)||e.clientHeight||0)+(N?0:parseFloat(H.borderTopWidth)+parseFloat(H.borderBottomWidth)))),h=D,y=O}return e===r?{left:u,top:s,width:h-u,height:y-s}:(x=VA(r,!0).multiply(VA(e)),C=x.apply({x:u,y:s}),I=x.apply({x:h,y:s}),U=x.apply({x:h,y}),R=x.apply({x:u,y}),u=Math.min(C.x,I.x,U.x,R.x),s=Math.min(C.y,I.y,U.y,R.y),{left:u,top:s,width:Math.max(C.x,I.x,U.x,R.x)-u,height:Math.max(C.y,I.y,U.y,R.y)-s})},pm=function(e,r,a,l,u,h){var s={},y,x,C;if(r)if(u!==1&&r instanceof Array){if(s.end=y=[],C=r.length,y0(r[0]))for(x=0;x<C;x++)y[x]=l9(r[x],u);else for(x=0;x<C;x++)y[x]=r[x]*u;a+=1.1,l-=1.1}else Sl(r)?s.end=function(I){var U=r.call(e,I),R,N;if(u!==1)if(y0(U)){R={};for(N in U)R[N]=U[N]*u;U=R}else U*=u;return U}:s.end=r;return(a||a===0)&&(s.max=a),(l||l===0)&&(s.min=l),h&&(s.velocity=0),s},Cz=function t(e){var r;return!e||!e.getAttribute||e===jo?!1:(r=e.getAttribute("data-clickable"))==="true"||r!=="false"&&(_z.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:t(e.parentNode)},ag=function(e,r){for(var a=e.length,l;a--;)l=e[a],l.ondragstart=l.onselectstart=r?null:Mg,qr.set(l,{lazy:!0,userSelect:r?"text":"none"})},Mz=function t(e){if(D0(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return t(e)},c9,y4,Rz=function(e,r){e=qr.utils.toArray(e)[0],r=r||{};var a=document.createElement("div"),l=a.style,u=e.firstChild,h=0,s=0,y=e.scrollTop,x=e.scrollLeft,C=e.scrollWidth,I=e.scrollHeight,U=0,R=0,N=0,D,O,H,W,se,de;c9&&r.force3D!==!1?(se="translate3d(",de="px,0px)"):v0&&(se="translate(",de="px)"),this.scrollTop=function(le,he){if(!arguments.length)return-this.top();this.top(-le,he)},this.scrollLeft=function(le,he){if(!arguments.length)return-this.left();this.left(-le,he)},this.left=function(le,he){if(!arguments.length)return-(e.scrollLeft+s);var ae=e.scrollLeft-x,V=s;if((ae>2||ae<-2)&&!he){x=e.scrollLeft,qr.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-x),r.onKill&&r.onKill();return}le=-le,le<0?(s=le-.5|0,le=0):le>R?(s=le-R|0,le=R):s=0,(s||V)&&(this._skip||(l[v0]=se+-s+"px,"+-h+de),s+U>=0&&(l.paddingRight=s+U+"px")),e.scrollLeft=le|0,x=e.scrollLeft},this.top=function(le,he){if(!arguments.length)return-(e.scrollTop+h);var ae=e.scrollTop-y,V=h;if((ae>2||ae<-2)&&!he){y=e.scrollTop,qr.killTweensOf(this,{top:1,scrollTop:1}),this.top(-y),r.onKill&&r.onKill();return}le=-le,le<0?(h=le-.5|0,le=0):le>N?(h=le-N|0,le=N):h=0,(h||V)&&(this._skip||(l[v0]=se+-s+"px,"+-h+de)),e.scrollTop=le|0,y=e.scrollTop},this.maxScrollTop=function(){return N},this.maxScrollLeft=function(){return R},this.disable=function(){for(u=a.firstChild;u;)W=u.nextSibling,e.appendChild(u),u=W;e===a.parentNode&&e.removeChild(a)},this.enable=function(){if(u=e.firstChild,u!==a){for(;u;)W=u.nextSibling,a.appendChild(u),u=W;e.appendChild(a),this.calibrate()}},this.calibrate=function(le){var he=e.clientWidth===D,ae,V,K;y=e.scrollTop,x=e.scrollLeft,!(he&&e.clientHeight===O&&a.offsetHeight===H&&C===e.scrollWidth&&I===e.scrollHeight&&!le)&&((h||s)&&(V=this.left(),K=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),ae=D0(e),(!he||le)&&(l.display="block",l.width="auto",l.paddingRight="0px",U=Math.max(0,e.scrollWidth-e.clientWidth),U&&(U+=parseFloat(ae.paddingLeft)+(y4?parseFloat(ae.paddingRight):0))),l.display="inline-block",l.position="relative",l.overflow="visible",l.verticalAlign="top",l.boxSizing="content-box",l.width="100%",l.paddingRight=U+"px",y4&&(l.paddingBottom=ae.paddingBottom),D=e.clientWidth,O=e.clientHeight,C=e.scrollWidth,I=e.scrollHeight,R=e.scrollWidth-D,N=e.scrollHeight-O,H=a.offsetHeight,l.display="block",(V||K)&&(this.left(V),this.top(K)))},this.content=a,this.element=e,this._skip=!1,this.enable()},mm=function(e){if(s9()&&document.body){var r=window&&window.navigator;Mi=window,Va=document,Os=Va.documentElement,jo=Va.body,dm=ng("div"),Cg=!!window.PointerEvent,Zo=ng("div"),Zo.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",n0=Zo.style.cursor==="grab"?"grab":"move",i0=r&&r.userAgent.toLowerCase().indexOf("android")!==-1,m4="ontouchstart"in Os&&"orientation"in Mi||r&&(r.MaxTouchPoints>0||r.msMaxTouchPoints>0),y4=function(){var a=ng("div"),l=ng("div"),u=l.style,h=jo,s;return u.display="inline-block",u.position="relative",a.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",a.appendChild(l),h.appendChild(a),s=l.offsetHeight+18>a.scrollHeight,h.removeChild(a),s}(),k0=function(a){for(var l=a.split(","),u=("onpointerdown"in dm?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in dm?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":a).split(","),h={},s=4;--s>-1;)h[l[s]]=u[s],h[u[s]]=l[s];try{Os.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){n9=1}}))}catch{}return h}("touchstart,touchmove,touchend,touchcancel"),Bn(Va,"touchcancel",Mg),Bn(Mi,"touchmove",Mg),jo&&jo.addEventListener("touchstart",Mg),Bn(Va,"contextmenu",function(){for(var a in kh)kh[a].isPressed&&kh[a].endDrag()}),qr=p4=o9()}qr?(Ss=qr.plugins.inertia,a9=qr.core.context||function(){},r0=qr.utils.checkPrefix,v0=r0(v0),b4=r0(b4),Ql=qr.utils.toArray,_4=qr.core.getStyleSaver,c9=!!r0("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},Iz=function(){function t(r){this._listeners={},this.target=r||this}var e=t.prototype;return e.addEventListener=function(a,l){var u=this._listeners[a]||(this._listeners[a]=[]);~u.indexOf(l)||u.push(l)},e.removeEventListener=function(a,l){var u=this._listeners[a],h=u&&u.indexOf(l);h>=0&&u.splice(h,1)},e.dispatchEvent=function(a){var l=this,u;return(this._listeners[a]||[]).forEach(function(h){return h.call(l,{type:a,target:l.target})===!1&&(u=!1)}),u},t}(),Wh=function(t){gz(e,t);function e(r,a){var l;l=t.call(this)||this,p4||mm(1),r=Ql(r)[0],l.styles=_4&&_4(r,"transform,left,top"),Ss||(Ss=qr.plugins.inertia),l.vars=a=l9(a||{}),l.target=r,l.x=l.y=l.rotation=0,l.dragResistance=parseFloat(a.dragResistance)||0,l.edgeResistance=isNaN(a.edgeResistance)?1:parseFloat(a.edgeResistance)||0,l.lockAxis=a.lockAxis,l.autoScroll=a.autoScroll||0,l.lockedAxis=null,l.allowEventDefault=!!a.allowEventDefault,qr.getProperty(r,"x");var u=(a.type||"x,y").toLowerCase(),h=~u.indexOf("x")||~u.indexOf("y"),s=u.indexOf("rotation")!==-1,y=s?"rotation":h?"x":"left",x=h?"y":"top",C=!!(~u.indexOf("x")||~u.indexOf("left")||u==="scroll"),I=!!(~u.indexOf("y")||~u.indexOf("top")||u==="scroll"),U=a.minimumMovement||2,R=r5(l),N=Ql(a.trigger||a.handle||r),D={},O=0,H=!1,W=a.autoScrollMarginTop||40,se=a.autoScrollMarginRight||40,de=a.autoScrollMarginBottom||40,le=a.autoScrollMarginLeft||40,he=a.clickableTest||Cz,ae=0,V=r._gsap||qr.core.getCache(r),K=Mz(r),oe=function(ne,Se){return parseFloat(V.get(r,ne,Se))},ce=r.ownerDocument||Va,ye,we,Ve,ut,nt,rt,ft,_t,gt,Je,je,Qe,pt,$e,wt,Ct,Mt,Pt,ar,Lt,Ot,Qt,St,Zt,lr,dr,rr,Br,Dr,vi,Gr,Fi,Kr,hi=function(ne){return ns(ne),ne.stopImmediatePropagation&&ne.stopImmediatePropagation(),!1},Rr=function Te(ne){if(R.autoScroll&&R.isDragging&&(H||Mt)){var Se=r,Ue=R.autoScroll*15,He,At,xt,Oe,mt,Kt,qt,tr;for(H=!1,Do.scrollTop=Mi.pageYOffset!=null?Mi.pageYOffset:ce.documentElement.scrollTop!=null?ce.documentElement.scrollTop:ce.body.scrollTop,Do.scrollLeft=Mi.pageXOffset!=null?Mi.pageXOffset:ce.documentElement.scrollLeft!=null?ce.documentElement.scrollLeft:ce.body.scrollLeft,Oe=R.pointerX-Do.scrollLeft,mt=R.pointerY-Do.scrollTop;Se&&!At;)At=qh(Se.parentNode),He=At?Do:Se.parentNode,xt=At?{bottom:Math.max(Os.clientHeight,Mi.innerHeight||0),right:Math.max(Os.clientWidth,Mi.innerWidth||0),left:0,top:0}:He.getBoundingClientRect(),Kt=qt=0,I&&(tr=He._gsMaxScrollY-He.scrollTop,tr<0?qt=tr:mt>xt.bottom-de&&tr?(H=!0,qt=Math.min(tr,Ue*(1-Math.max(0,xt.bottom-mt)/de)|0)):mt<xt.top+W&&He.scrollTop&&(H=!0,qt=-Math.min(He.scrollTop,Ue*(1-Math.max(0,mt-xt.top)/W)|0)),qt&&(He.scrollTop+=qt)),C&&(tr=He._gsMaxScrollX-He.scrollLeft,tr<0?Kt=tr:Oe>xt.right-se&&tr?(H=!0,Kt=Math.min(tr,Ue*(1-Math.max(0,xt.right-Oe)/se)|0)):Oe<xt.left+le&&He.scrollLeft&&(H=!0,Kt=-Math.min(He.scrollLeft,Ue*(1-Math.max(0,Oe-xt.left)/le)|0)),Kt&&(He.scrollLeft+=Kt)),At&&(Kt||qt)&&(Mi.scrollTo(He.scrollLeft,He.scrollTop),Ae(R.pointerX+Kt,R.pointerY+qt)),Se=He}if(Mt){var tt=R.x,Ft=R.y;s?(R.deltaX=tt-parseFloat(V.rotation),R.rotation=tt,V.rotation=tt+"deg",V.renderTransform(1,V)):we?(I&&(R.deltaY=Ft-we.top(),we.top(Ft)),C&&(R.deltaX=tt-we.left(),we.left(tt))):h?(I&&(R.deltaY=Ft-parseFloat(V.y),V.y=Ft+"px"),C&&(R.deltaX=tt-parseFloat(V.x),V.x=tt+"px"),V.renderTransform(1,V)):(I&&(R.deltaY=Ft-parseFloat(r.style.top||0),r.style.top=Ft+"px"),C&&(R.deltaX=tt-parseFloat(r.style.left||0),r.style.left=tt+"px")),_t&&!ne&&!Br&&(Br=!0,nn(R,"drag","onDrag")===!1&&(C&&(R.x-=R.deltaX),I&&(R.y-=R.deltaY),Te(!0)),Br=!1)}Mt=!1},$r=function(ne,Se){var Ue=R.x,He=R.y,At,xt;r._gsap||(V=qr.core.getCache(r)),V.uncache&&qr.getProperty(r,"x"),h?(R.x=parseFloat(V.x),R.y=parseFloat(V.y)):s?R.x=R.rotation=parseFloat(V.rotation):we?(R.y=we.top(),R.x=we.left()):(R.y=parseFloat(r.style.top||(xt=D0(r))&&xt.top)||0,R.x=parseFloat(r.style.left||(xt||{}).left)||0),(ar||Lt||Ot)&&!Se&&(R.isDragging||R.isThrowing)&&(Ot&&(yh.x=R.x,yh.y=R.y,At=Ot(yh),At.x!==R.x&&(R.x=At.x,Mt=!0),At.y!==R.y&&(R.y=At.y,Mt=!0)),ar&&(At=ar(R.x),At!==R.x&&(R.x=At,s&&(R.rotation=At),Mt=!0)),Lt&&(At=Lt(R.y),At!==R.y&&(R.y=At),Mt=!0)),Mt&&Rr(!0),ne||(R.deltaX=R.x-Ue,R.deltaY=R.y-He,nn(R,"throwupdate","onThrowUpdate"))},ui=function(ne,Se,Ue,He){return Se==null&&(Se=-1e20),Ue==null&&(Ue=bh),Sl(ne)?function(At){var xt=R.isPressed?1-R.edgeResistance:1;return ne.call(R,(At>Ue?Ue+(At-Ue)*xt:At<Se?Se+(At-Se)*xt:At)*He)*He}:Od(ne)?function(At){for(var xt=ne.length,Oe=0,mt=bh,Kt,qt;--xt>-1;)Kt=ne[xt],qt=Kt-At,qt<0&&(qt=-qt),qt<mt&&Kt>=Se&&Kt<=Ue&&(Oe=xt,mt=qt);return ne[Oe]}:isNaN(ne)?function(At){return At}:function(){return ne*He}},Un=function(ne,Se,Ue,He,At,xt,Oe){return xt=xt&&xt<bh?xt*xt:bh,Sl(ne)?function(mt){var Kt=R.isPressed?1-R.edgeResistance:1,qt=mt.x,tr=mt.y,tt,Ft,zt;return mt.x=qt=qt>Ue?Ue+(qt-Ue)*Kt:qt<Se?Se+(qt-Se)*Kt:qt,mt.y=tr=tr>At?At+(tr-At)*Kt:tr<He?He+(tr-He)*Kt:tr,tt=ne.call(R,mt),tt!==mt&&(mt.x=tt.x,mt.y=tt.y),Oe!==1&&(mt.x*=Oe,mt.y*=Oe),xt<bh&&(Ft=mt.x-qt,zt=mt.y-tr,Ft*Ft+zt*zt>xt&&(mt.x=qt,mt.y=tr)),mt}:Od(ne)?function(mt){for(var Kt=ne.length,qt=0,tr=bh,tt,Ft,zt,ti;--Kt>-1;)zt=ne[Kt],tt=zt.x-mt.x,Ft=zt.y-mt.y,ti=tt*tt+Ft*Ft,ti<tr&&(qt=Kt,tr=ti);return tr<=xt?ne[qt]:mt}:function(mt){return mt}},Xi=function(){var ne,Se,Ue,He;ft=!1,we?(we.calibrate(),R.minX=je=-we.maxScrollLeft(),R.minY=pt=-we.maxScrollTop(),R.maxX=Je=R.maxY=Qe=0,ft=!0):a.bounds&&(ne=u5(a.bounds,r.parentNode),s?(R.minX=je=ne.left,R.maxX=Je=ne.left+ne.width,R.minY=pt=R.maxY=Qe=0):!Qs(a.bounds.maxX)||!Qs(a.bounds.maxY)?(ne=a.bounds,R.minX=je=ne.minX,R.minY=pt=ne.minY,R.maxX=Je=ne.maxX,R.maxY=Qe=ne.maxY):(Se=u5(r,r.parentNode),R.minX=je=Math.round(oe(y,"px")+ne.left-Se.left),R.minY=pt=Math.round(oe(x,"px")+ne.top-Se.top),R.maxX=Je=Math.round(je+(ne.width-Se.width)),R.maxY=Qe=Math.round(pt+(ne.height-Se.height))),je>Je&&(R.minX=Je,R.maxX=Je=je,je=R.minX),pt>Qe&&(R.minY=Qe,R.maxY=Qe=pt,pt=R.minY),s&&(R.minRotation=je,R.maxRotation=Je),ft=!0),a.liveSnap&&(Ue=a.liveSnap===!0?a.snap||{}:a.liveSnap,He=Od(Ue)||Sl(Ue),s?(ar=ui(He?Ue:Ue.rotation,je,Je,1),Lt=null):Ue.points?Ot=Un(He?Ue:Ue.points,je,Je,pt,Qe,Ue.radius,we?-1:1):(C&&(ar=ui(He?Ue:Ue.x||Ue.left||Ue.scrollLeft,je,Je,we?-1:1)),I&&(Lt=ui(He?Ue:Ue.y||Ue.top||Ue.scrollTop,pt,Qe,we?-1:1))))},Vi=function(){R.isThrowing=!1,nn(R,"throwcomplete","onThrowComplete")},si=function(){R.isThrowing=!1},ni=function(ne,Se){var Ue,He,At,xt;ne&&Ss?(ne===!0&&(Ue=a.snap||a.liveSnap||{},He=Od(Ue)||Sl(Ue),ne={resistance:(a.throwResistance||a.resistance||1e3)/(s?10:1)},s?ne.rotation=pm(R,He?Ue:Ue.rotation,Je,je,1,Se):(C&&(ne[y]=pm(R,He?Ue:Ue.points||Ue.x||Ue.left,Je,je,we?-1:1,Se||R.lockedAxis==="x")),I&&(ne[x]=pm(R,He?Ue:Ue.points||Ue.y||Ue.top,Qe,pt,we?-1:1,Se||R.lockedAxis==="y")),(Ue.points||Od(Ue)&&y0(Ue[0]))&&(ne.linkedProps=y+","+x,ne.radius=Ue.radius))),R.isThrowing=!0,xt=isNaN(a.overshootTolerance)?a.edgeResistance===1?0:1-R.edgeResistance+.2:a.overshootTolerance,ne.duration||(ne.duration={max:Math.max(a.minDuration||0,"maxDuration"in a?a.maxDuration:2),min:isNaN(a.minDuration)?xt===0||y0(ne)&&ne.resistance>1e3?0:.5:a.minDuration,overshoot:xt}),R.tween=At=qr.to(we||r,{inertia:ne,data:"_draggable",inherit:!1,onComplete:Vi,onInterrupt:si,onUpdate:a.fastMode?nn:$r,onUpdateParams:a.fastMode?[R,"onthrowupdate","onThrowUpdate"]:Ue&&Ue.radius?[!1,!0]:[]}),a.fastMode||(we&&(we._skip=!0),At.render(1e9,!0,!0),$r(!0,!0),R.endX=R.x,R.endY=R.y,s&&(R.endRotation=R.x),At.play(0),$r(!0,!0),we&&(we._skip=!1))):ft&&R.applyBounds()},xi=function(ne){var Se=Zt,Ue;Zt=VA(r.parentNode,!0),ne&&R.isPressed&&!Zt.equals(Se||new Ac)&&(Ue=Se.inverse().apply({x:Ve,y:ut}),Zt.apply(Ue,Ue),Ve=Ue.x,ut=Ue.y),Zt.equals(pz)&&(Zt=null)},ze=function(){var ne=1-R.edgeResistance,Se=K?zh(ce):0,Ue=K?Dh(ce):0,He,At,xt;h&&(V.x=oe(y,"px")+"px",V.y=oe(x,"px")+"px",V.renderTransform()),xi(!1),as.x=R.pointerX-Se,as.y=R.pointerY-Ue,Zt&&Zt.apply(as,as),Ve=as.x,ut=as.y,Mt&&(Ae(R.pointerX,R.pointerY),Rr(!0)),Fi=VA(r),we?(Xi(),rt=we.top(),nt=we.left()):(te()?($r(!0,!0),Xi()):R.applyBounds(),s?(He=r.ownerSVGElement?[V.xOrigin-r.getBBox().x,V.yOrigin-r.getBBox().y]:(D0(r)[b4]||"0 0").split(" "),Ct=R.rotationOrigin=VA(r).apply({x:parseFloat(He[0])||0,y:parseFloat(He[1])||0}),$r(!0,!0),At=R.pointerX-Ct.x-Se,xt=Ct.y-R.pointerY+Ue,nt=R.x,rt=R.y=Math.atan2(xt,At)*i5):(rt=oe(x,"px"),nt=oe(y,"px"))),ft&&ne&&(nt>Je?nt=Je+(nt-Je)/ne:nt<je&&(nt=je-(je-nt)/ne),s||(rt>Qe?rt=Qe+(rt-Qe)/ne:rt<pt&&(rt=pt-(pt-rt)/ne))),R.startX=nt=Ml(nt),R.startY=rt=Ml(rt)},te=function(){return R.tween&&R.tween.isActive()},ie=function(){Zo.parentNode&&!te()&&!R.isDragging&&Zo.parentNode.removeChild(Zo)},ge=function(ne,Se){var Ue;if(!ye||R.isPressed||!ne||(ne.type==="mousedown"||ne.type==="pointerdown")&&!Se&&Rl()-ae<30&&k0[R.pointerEvent.type]){Gr&&ne&&ye&&ns(ne);return}if(lr=te(),Kr=!1,R.pointerEvent=ne,k0[ne.type]?(St=~ne.type.indexOf("touch")?ne.currentTarget||ne.target:ce,Bn(St,"touchend",ke),Bn(St,"touchmove",ve),Bn(St,"touchcancel",ke),Bn(ce,"touchstart",l5)):(St=null,Bn(ce,"mousemove",ve)),rr=null,(!Cg||!St)&&(Bn(ce,"mouseup",ke),ne&&ne.target&&Bn(ne.target,"mouseup",ke)),Qt=he.call(R,ne.target)&&a.dragClickables===!1&&!Se,Qt){Bn(ne.target,"change",ke),nn(R,"pressInit","onPressInit"),nn(R,"press","onPress"),ag(N,!0),Gr=!1;return}if(dr=!St||C===I||R.vars.allowNativeTouchScrolling===!1||R.vars.allowContextMenu&&ne&&(ne.ctrlKey||ne.which>2)?!1:C?"y":"x",Gr=!dr&&!R.allowEventDefault,Gr&&(ns(ne),Bn(Mi,"touchforcechange",ns)),ne.changedTouches?(ne=$e=ne.changedTouches[0],wt=ne.identifier):ne.pointerId?wt=ne.pointerId:$e=wt=null,_p++,yz(Rr),ut=R.pointerY=ne.pageY,Ve=R.pointerX=ne.pageX,nn(R,"pressInit","onPressInit"),(dr||R.autoScroll)&&fm(r.parentNode),r.parentNode&&R.autoScroll&&!we&&!s&&r.parentNode._gsMaxScrollX&&!Zo.parentNode&&!r.getBBox&&(Zo.style.width=r.parentNode.scrollWidth+"px",r.parentNode.appendChild(Zo)),ze(),R.tween&&R.tween.kill(),R.isThrowing=!1,qr.killTweensOf(we||r,D,!0),we&&qr.killTweensOf(r,{scrollTo:1},!0),R.tween=R.lockedAxis=null,(a.zIndexBoost||!s&&!we&&a.zIndexBoost!==!1)&&(r.style.zIndex=e.zIndex++),R.isPressed=!0,_t=!!(a.onDrag||R._listeners.drag),gt=!!(a.onMove||R._listeners.move),a.cursor!==!1||a.activeCursor)for(Ue=N.length;--Ue>-1;)qr.set(N[Ue],{cursor:a.activeCursor||a.cursor||(n0==="grab"?"grabbing":n0)});nn(R,"press","onPress")},ve=function(ne){var Se=ne,Ue,He,At,xt,Oe,mt;if(!ye||N_||!R.isPressed||!ne){Gr&&ne&&ye&&ns(ne);return}if(R.pointerEvent=ne,Ue=ne.changedTouches,Ue){if(ne=Ue[0],ne!==$e&&ne.identifier!==wt){for(xt=Ue.length;--xt>-1&&(ne=Ue[xt]).identifier!==wt&&ne.target!==r;);if(xt<0)return}}else if(ne.pointerId&&wt&&ne.pointerId!==wt)return;if(St&&dr&&!rr&&(as.x=ne.pageX-(K?zh(ce):0),as.y=ne.pageY-(K?Dh(ce):0),Zt&&Zt.apply(as,as),He=as.x,At=as.y,Oe=Math.abs(He-Ve),mt=Math.abs(At-ut),(Oe!==mt&&(Oe>U||mt>U)||i0&&dr===rr)&&(rr=Oe>mt&&C?"x":"y",dr&&rr!==dr&&Bn(Mi,"touchforcechange",ns),R.vars.lockAxisOnTouchScroll!==!1&&C&&I&&(R.lockedAxis=rr==="x"?"y":"x",Sl(R.vars.onLockAxis)&&R.vars.onLockAxis.call(R,Se)),i0&&dr===rr))){ke(Se);return}!R.allowEventDefault&&(!dr||rr&&dr!==rr)&&Se.cancelable!==!1?(ns(Se),Gr=!0):Gr&&(Gr=!1),R.autoScroll&&(H=!0),Ae(ne.pageX,ne.pageY,gt)},Ae=function(ne,Se,Ue){var He=1-R.dragResistance,At=1-R.edgeResistance,xt=R.pointerX,Oe=R.pointerY,mt=rt,Kt=R.x,qt=R.y,tr=R.endX,tt=R.endY,Ft=R.endRotation,zt=Mt,ti,oi,yr,Vt,Ia,Ht;R.pointerX=ne,R.pointerY=Se,K&&(ne-=zh(ce),Se-=Dh(ce)),s?(Vt=Math.atan2(Ct.y-Se,ne-Ct.x)*i5,Ia=R.y-Vt,Ia>180?(rt-=360,R.y=Vt):Ia<-180&&(rt+=360,R.y=Vt),R.x!==nt||Math.max(Math.abs(Ve-ne),Math.abs(ut-Se))>U?(R.y=Vt,yr=nt+(rt-Vt)*He):yr=nt):(Zt&&(Ht=ne*Zt.a+Se*Zt.c+Zt.e,Se=ne*Zt.b+Se*Zt.d+Zt.f,ne=Ht),oi=Se-ut,ti=ne-Ve,oi<U&&oi>-U&&(oi=0),ti<U&&ti>-U&&(ti=0),(R.lockAxis||R.lockedAxis)&&(ti||oi)&&(Ht=R.lockedAxis,Ht||(R.lockedAxis=Ht=C&&Math.abs(ti)>Math.abs(oi)?"y":I?"x":null,Ht&&Sl(R.vars.onLockAxis)&&R.vars.onLockAxis.call(R,R.pointerEvent)),Ht==="y"?oi=0:Ht==="x"&&(ti=0)),yr=Ml(nt+ti*He),Vt=Ml(rt+oi*He)),(ar||Lt||Ot)&&(R.x!==yr||R.y!==Vt&&!s)&&(Ot&&(yh.x=yr,yh.y=Vt,Ht=Ot(yh),yr=Ml(Ht.x),Vt=Ml(Ht.y)),ar&&(yr=Ml(ar(yr))),Lt&&(Vt=Ml(Lt(Vt)))),ft&&(yr>Je?yr=Je+Math.round((yr-Je)*At):yr<je&&(yr=je+Math.round((yr-je)*At)),s||(Vt>Qe?Vt=Math.round(Qe+(Vt-Qe)*At):Vt<pt&&(Vt=Math.round(pt+(Vt-pt)*At)))),(R.x!==yr||R.y!==Vt&&!s)&&(s?(R.endRotation=R.x=R.endX=yr,Mt=!0):(I&&(R.y=R.endY=Vt,Mt=!0),C&&(R.x=R.endX=yr,Mt=!0)),!Ue||nn(R,"move","onMove")!==!1?!R.isDragging&&R.isPressed&&(R.isDragging=Kr=!0,nn(R,"dragstart","onDragStart")):(R.pointerX=xt,R.pointerY=Oe,rt=mt,R.x=Kt,R.y=qt,R.endX=tr,R.endY=tt,R.endRotation=Ft,Mt=zt))},ke=function Te(ne,Se){if(!ye||!R.isPressed||ne&&wt!=null&&!Se&&(ne.pointerId&&ne.pointerId!==wt&&ne.target!==r||ne.changedTouches&&!xz(ne.changedTouches,wt))){Gr&&ne&&ye&&ns(ne);return}R.isPressed=!1;var Ue=ne,He=R.isDragging,At=R.vars.allowContextMenu&&ne&&(ne.ctrlKey||ne.which>2),xt=qr.delayedCall(.001,ie),Oe,mt,Kt,qt,tr;if(St?(fn(St,"touchend",Te),fn(St,"touchmove",ve),fn(St,"touchcancel",Te),fn(ce,"touchstart",l5)):fn(ce,"mousemove",ve),fn(Mi,"touchforcechange",ns),(!Cg||!St)&&(fn(ce,"mouseup",Te),ne&&ne.target&&fn(ne.target,"mouseup",Te)),Mt=!1,He&&(O=n5=Rl(),R.isDragging=!1),o5(Rr),Qt&&!At){ne&&(fn(ne.target,"change",Te),R.pointerEvent=Ue),ag(N,!1),nn(R,"release","onRelease"),nn(R,"click","onClick"),Qt=!1;return}for(mt=N.length;--mt>-1;)gm(N[mt],"cursor",a.cursor||(a.cursor!==!1?n0:null));if(_p--,ne){if(Oe=ne.changedTouches,Oe&&(ne=Oe[0],ne!==$e&&ne.identifier!==wt)){for(mt=Oe.length;--mt>-1&&(ne=Oe[mt]).identifier!==wt&&ne.target!==r;);if(mt<0&&!Se)return}R.pointerEvent=Ue,R.pointerX=ne.pageX,R.pointerY=ne.pageY}return At&&Ue?(ns(Ue),Gr=!0,nn(R,"release","onRelease")):Ue&&!He?(Gr=!1,lr&&(a.snap||a.bounds)&&ni(a.inertia||a.throwProps),nn(R,"release","onRelease"),(!i0||Ue.type!=="touchmove")&&Ue.type.indexOf("cancel")===-1&&(nn(R,"click","onClick"),Rl()-ae<300&&nn(R,"doubleclick","onDoubleClick"),qt=Ue.target||r,ae=Rl(),tr=function(){ae!==Dr&&R.enabled()&&!R.isPressed&&!Ue.defaultPrevented&&(qt.click?qt.click():ce.createEvent&&(Kt=ce.createEvent("MouseEvents"),Kt.initMouseEvent("click",!0,!0,Mi,1,R.pointerEvent.screenX,R.pointerEvent.screenY,R.pointerX,R.pointerY,!1,!1,!1,!1,0,null),qt.dispatchEvent(Kt)))},!i0&&!Ue.defaultPrevented&&qr.delayedCall(.05,tr))):(ni(a.inertia||a.throwProps),!R.allowEventDefault&&Ue&&(a.dragClickables!==!1||!he.call(R,Ue.target))&&He&&(!dr||rr&&dr===rr)&&Ue.cancelable!==!1?(Gr=!0,ns(Ue)):Gr=!1,nn(R,"release","onRelease")),te()&&xt.duration(R.tween.duration()),He&&nn(R,"dragend","onDragEnd"),!0},Ge=function(ne){if(ne&&R.isDragging&&!we){var Se=ne.target||r.parentNode,Ue=Se.scrollLeft-Se._gsScrollX,He=Se.scrollTop-Se._gsScrollY;(Ue||He)&&(Zt?(Ve-=Ue*Zt.a+He*Zt.c,ut-=He*Zt.d+Ue*Zt.b):(Ve-=Ue,ut-=He),Se._gsScrollX+=Ue,Se._gsScrollY+=He,Ae(R.pointerX,R.pointerY))}},Ie=function(ne){var Se=Rl(),Ue=Se-ae<100,He=Se-O<50,At=Ue&&Dr===ae,xt=R.pointerEvent&&R.pointerEvent.defaultPrevented,Oe=Ue&&vi===ae,mt=ne.isTrusted||ne.isTrusted==null&&Ue&&At;if((At||He&&R.vars.suppressClickOnDrag!==!1)&&ne.stopImmediatePropagation&&ne.stopImmediatePropagation(),Ue&&!(R.pointerEvent&&R.pointerEvent.defaultPrevented)&&(!At||mt&&!Oe)){mt&&At&&(vi=ae),Dr=ae;return}(R.isPressed||He||Ue)&&(!mt||!ne.detail||!Ue||xt)&&ns(ne),!Ue&&!He&&!Kr&&(ne&&ne.target&&(R.pointerEvent=ne),nn(R,"click","onClick"))},et=function(ne){return Zt?{x:ne.x*Zt.a+ne.y*Zt.c+Zt.e,y:ne.x*Zt.b+ne.y*Zt.d+Zt.f}:{x:ne.x,y:ne.y}};return Pt=e.get(r),Pt&&Pt.kill(),l.startDrag=function(Te,ne){var Se,Ue,He,At;ge(Te||R.pointerEvent,!0),ne&&!R.hitTest(Te||R.pointerEvent)&&(Se=vh(Te||R.pointerEvent),Ue=vh(r),He=et({x:Se.left+Se.width/2,y:Se.top+Se.height/2}),At=et({x:Ue.left+Ue.width/2,y:Ue.top+Ue.height/2}),Ve-=He.x-At.x,ut-=He.y-At.y),R.isDragging||(R.isDragging=Kr=!0,nn(R,"dragstart","onDragStart"))},l.drag=ve,l.endDrag=function(Te){return ke(Te||R.pointerEvent,!0)},l.timeSinceDrag=function(){return R.isDragging?0:(Rl()-O)/1e3},l.timeSinceClick=function(){return(Rl()-ae)/1e3},l.hitTest=function(Te,ne){return e.hitTest(R.target,Te,ne)},l.getDirection=function(Te,ne){var Se=Te==="velocity"&&Ss?Te:y0(Te)&&!s?"element":"start",Ue,He,At,xt,Oe,mt;return Se==="element"&&(Oe=vh(R.target),mt=vh(Te)),Ue=Se==="start"?R.x-nt:Se==="velocity"?Ss.getVelocity(r,y):Oe.left+Oe.width/2-(mt.left+mt.width/2),s?Ue<0?"counter-clockwise":"clockwise":(ne=ne||2,He=Se==="start"?R.y-rt:Se==="velocity"?Ss.getVelocity(r,x):Oe.top+Oe.height/2-(mt.top+mt.height/2),At=Math.abs(Ue/He),xt=At<1/ne?"":Ue<0?"left":"right",At<ne&&(xt!==""&&(xt+="-"),xt+=He<0?"up":"down"),xt)},l.applyBounds=function(Te,ne){var Se,Ue,He,At,xt,Oe;if(Te&&a.bounds!==Te)return a.bounds=Te,R.update(!0,ne);if($r(!0),Xi(),ft&&!te()){if(Se=R.x,Ue=R.y,Se>Je?Se=Je:Se<je&&(Se=je),Ue>Qe?Ue=Qe:Ue<pt&&(Ue=pt),(R.x!==Se||R.y!==Ue)&&(He=!0,R.x=R.endX=Se,s?R.endRotation=Se:R.y=R.endY=Ue,Mt=!0,Rr(!0),R.autoScroll&&!R.isDragging))for(fm(r.parentNode),At=r,Do.scrollTop=Mi.pageYOffset!=null?Mi.pageYOffset:ce.documentElement.scrollTop!=null?ce.documentElement.scrollTop:ce.body.scrollTop,Do.scrollLeft=Mi.pageXOffset!=null?Mi.pageXOffset:ce.documentElement.scrollLeft!=null?ce.documentElement.scrollLeft:ce.body.scrollLeft;At&&!Oe;)Oe=qh(At.parentNode),xt=Oe?Do:At.parentNode,I&&xt.scrollTop>xt._gsMaxScrollY&&(xt.scrollTop=xt._gsMaxScrollY),C&&xt.scrollLeft>xt._gsMaxScrollX&&(xt.scrollLeft=xt._gsMaxScrollX),At=xt;R.isThrowing&&(He||R.endX>Je||R.endX<je||R.endY>Qe||R.endY<pt)&&ni(a.inertia||a.throwProps,He)}return R},l.update=function(Te,ne,Se){if(ne&&R.isPressed){var Ue=VA(r),He=Fi.apply({x:R.x-nt,y:R.y-rt}),At=VA(r.parentNode,!0);At.apply({x:Ue.e-He.x,y:Ue.f-He.y},He),R.x-=He.x-At.e,R.y-=He.y-At.f,Rr(!0),ze()}var xt=R.x,Oe=R.y;return xi(!ne),Te?R.applyBounds():(Mt&&Se&&Rr(!0),$r(!0)),ne&&(Ae(R.pointerX,R.pointerY),Mt&&Rr(!0)),R.isPressed&&!ne&&(C&&Math.abs(xt-R.x)>.01||I&&Math.abs(Oe-R.y)>.01&&!s)&&ze(),R.autoScroll&&(fm(r.parentNode,R.isDragging),H=R.isDragging,Rr(!0),c5(r,Ge),A5(r,Ge)),R},l.enable=function(Te){var ne={lazy:!0},Se,Ue,He;if(a.cursor!==!1&&(ne.cursor=a.cursor||n0),qr.utils.checkPrefix("touchCallout")&&(ne.touchCallout="none"),Te!=="soft"){for(a5(N,C===I?"none":a.allowNativeTouchScrolling&&r.scrollHeight===r.clientHeight==(r.scrollWidth===r.clientHeight)||a.allowEventDefault?"manipulation":C?"pan-y":"pan-x"),Ue=N.length;--Ue>-1;)He=N[Ue],Cg||Bn(He,"mousedown",ge),Bn(He,"touchstart",ge),Bn(He,"click",Ie,!0),qr.set(He,ne),He.getBBox&&He.ownerSVGElement&&C!==I&&qr.set(He.ownerSVGElement,{touchAction:a.allowNativeTouchScrolling||a.allowEventDefault?"manipulation":C?"pan-y":"pan-x"}),a.allowContextMenu||Bn(He,"contextmenu",hi);ag(N,!1)}return A5(r,Ge),ye=!0,Ss&&Te!=="soft"&&Ss.track(we||r,h?"x,y":s?"rotation":"top,left"),r._gsDragID=Se=r._gsDragID||"d"+mz++,kh[Se]=R,we&&(we.enable(),we.element._gsDragID=Se),(a.bounds||s)&&ze(),a.bounds&&R.applyBounds(),R},l.disable=function(Te){for(var ne=R.isDragging,Se=N.length,Ue;--Se>-1;)gm(N[Se],"cursor",null);if(Te!=="soft"){for(a5(N,null),Se=N.length;--Se>-1;)Ue=N[Se],gm(Ue,"touchCallout",null),fn(Ue,"mousedown",ge),fn(Ue,"touchstart",ge),fn(Ue,"click",Ie,!0),fn(Ue,"contextmenu",hi);ag(N,!0),St&&(fn(St,"touchcancel",ke),fn(St,"touchend",ke),fn(St,"touchmove",ve)),fn(ce,"mouseup",ke),fn(ce,"mousemove",ve)}return c5(r,Ge),ye=!1,Ss&&Te!=="soft"&&(Ss.untrack(we||r,h?"x,y":s?"rotation":"top,left"),R.tween&&R.tween.kill()),we&&we.disable(),o5(Rr),R.isDragging=R.isPressed=Qt=!1,ne&&nn(R,"dragend","onDragEnd"),R},l.enabled=function(Te,ne){return arguments.length?Te?R.enable(ne):R.disable(ne):ye},l.kill=function(){return R.isThrowing=!1,R.tween&&R.tween.kill(),R.disable(),qr.set(N,{clearProps:"userSelect"}),delete kh[r._gsDragID],R},l.revert=function(){this.kill(),this.styles&&this.styles.revert()},~u.indexOf("scroll")&&(we=l.scrollProxy=new Rz(r,bz({onKill:function(){R.isPressed&&ke(null)}},a)),r.style.overflowY=I&&!m4?"auto":"hidden",r.style.overflowX=C&&!m4?"auto":"hidden",r=we.content),s?D.rotation=1:(C&&(D[y]=1),I&&(D[x]=1)),V.force3D="force3D"in a?a.force3D:!0,a9(r5(l)),l.enable(),l}return e.register=function(a){qr=a,mm()},e.create=function(a,l){return p4||mm(!0),Ql(a).map(function(u){return new e(u,l)})},e.get=function(a){return kh[(Ql(a)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(Rl()-n5)/1e3},e.hitTest=function(a,l,u){if(a===l)return!1;var h=vh(a),s=vh(l),y=h.top,x=h.left,C=h.right,I=h.bottom,U=h.width,R=h.height,N=s.left>C||s.right<x||s.top>I||s.bottom<y,D,O,H;return N||!u?!N:(H=(u+"").indexOf("%")!==-1,u=parseFloat(u)||0,D={left:Math.max(x,s.left),top:Math.max(y,s.top)},D.width=Math.min(C,s.right)-D.left,D.height=Math.min(I,s.bottom)-D.top,D.width<0||D.height<0?!1:H?(u*=.01,O=D.width*D.height,O>=U*R*u||O>=s.width*s.height*u):D.width>u&&D.height>u)},e}(Iz);vz(Wh.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Wh.zIndex=1e3;Wh.version="3.12.7";o9()&&qr.registerPlugin(Wh);var Uz=dt('<div class="grid h-[50px] w-[50px] shrink-0 cursor-grab place-items-center overflow-hidden rounded-full border-2"><svg class="h-full w-full scale-50" xmlns="http://www.w3.org/2000/svg" width="132" height="132" viewBox="0 0 132 132"><g transform="translate(47,0)"><path fill="000" d="m19 0 16.455 66H2.545L19 0Z"></path><path fill="#D9D9D9" d="M19 132 2.546 66h32.909L19 132Z"></path></g></svg></div>'),Ez=dt('<div class="pointer-events-none absolute bottom-0 flex w-full items-center justify-center"><div class="bg-main pointer-events-auto grid h-[100px] w-[100px] place-items-center overflow-hidden rounded-full"><svg class="h-full w-full scale-50" xmlns="http://www.w3.org/2000/svg" width="132" height="132" viewBox="0 0 132 132"><g transform="translate(47,0)"><path fill="#000" d="m19 0 16.455 66H2.545L19 0Z"></path><path fill="#D9D9D9" d="M19 132 2.546 66h32.909L19 132Z"></path></g></svg></div></div>');function Fz(t,e){fr(e,!0),Rm.registerPlugin(Wh);let r=er(null);const a=y=>(y+180)%360-180;fi.onRotate(y=>{!re(r)||y==null||re(r)&&Rm.set(re(r),{rotation:y*-1})}),In(()=>{re(r)&&Wh.create(re(r),{type:"rotation",inertia:!0,dragResistance:.5,onDrag(){const y=a(this.rotation);fi.setBearing(y*-1)},onClick(){fi.easeTo({bearing:0}),re(r)&&(re(r).style.transform="rotate(0deg)"),this.rotation=0,this.update()},onDragEnd(){const y=fi.getBearing();y&&y>=-7&&y<=7&&fi.easeTo({bearing:0})}})});var l=Mr(),u=Dt(l);{var h=y=>{var x=Uz();Ga(x,C=>ht(r,C),()=>re(r)),Xe(y,x)},s=y=>{var x=Ez(),C=Pe(x);Ga(C,I=>ht(r,I),()=>re(r)),Fe(x),Xe(y,x)};Ut(u,y=>{z4()?y(h):y(s,!1)})}Xe(t,l),gr()}var Tz=dt('<div class="bg-main pointer-events-auto relative grid h-[50px] w-[50px] place-items-center overflow-hidden rounded-full"><!></div>');function Sz(t,e){fr(e,!1);let r=co(),a,l=co("");const u=x=>{const C=x[0];if(C.attributeName==="class"){const I=C.target;if(I.classList.contains("maplibregl-ctrl-geolocate-waiting")){ht(l,"waiting");return}else if(I.classList.contains("maplibregl-ctrl-geolocate-active")||I.classList.contains("maplibregl-ctrl-geolocate-background")){ht(l,"active");return}else if(I.classList.contains("maplibregl-ctrl-geolocate-error")||I.classList.contains("maplibregl-ctrl-geolocate-background-error")){ht(l,"error");return}else ht(l,"")}};In(()=>{fi.onInitialized(x=>{if(x){const C=new Fp.GeolocateControl({positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{maxZoom:12},trackUserLocation:!0,showUserLocation:!0});re(r).appendChild(C.onAdd(x)),re(r)&&(a=new MutationObserver(u),a.observe(C._container.children[0],{attributes:!0,attributeFilter:["class"]})),C.on("geolocate",I=>{console.log("geolocate",I.coords)})}})}),Wl();var h=Tz(),s=Pe(h);const y=H5(()=>re(l)==="waiting"?"css-rotate text-accent":re(l)==="active"?"text-accent":re(l)==="error"?"text-red-500":"text-base");br(s,{icon:"streamline:location-target-1-solid",get class(){return`absolute h-6 w-6 ${re(y)??""}`}}),Fe(h),Ga(h,x=>ht(r,x),()=>re(r)),Xe(t,h),gr()}var Nz=dt('<button class="bg-main grid h-[50px] w-[50px] cursor-pointer place-items-center rounded-full p-2"><!></button>');function Yz(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Dl,"$isTerrain3d",r),u=C=>{Dl.set(!l())};Dl.subscribe(C=>{const I=fi.getMap();I&&(C?(I.setTerrain({source:"terrain",exaggeration:1}),I.easeTo({pitch:60})):(I.setTerrain(null),I.easeTo({pitch:0})))});let h=er(null);In(()=>{re(h)});var s=Nz();s.__click=u;var y=Pe(s);const x=bi(()=>l()?"mdi:video-2d":"mdi:video-3d");br(y,{get icon(){return re(x)},class:"h-8 w-8 text-base"}),Fe(s),Ga(s,C=>ht(h,C),()=>re(h)),Xe(t,s),gr(),a()}qi(["click"]);qi(["click"]);var Pz=dt('<div class="absolute bottom-32 right-2 z-10 flex flex-col gap-2 p-2"><!> <!> <!></div> <div role="button" tabindex="0"><!> <div class="flex flex-col gap-2"><div class="text-base font-bold"> </div></div></div>',1);function Lz(t,e){fr(e,!0);let r=er(0),a=er(!1);fi.onZoom(N=>{N&&ht(r,N,!0)}),fi.onInitialized(N=>{N&&ht(r,N.getZoom(),!0)});var l=Pz(),u=Dt(l),h=Pe(u);sz(h,{});var s=Ze(h,2);Yz(s,{});var y=Ze(s,2);Sz(y,{}),Fe(u);var x=Ze(u,2),C=Pe(x);Fz(C,{get isHover(){return re(a)},set isHover(N){ht(a,N,!0)}});var I=Ze(C,2),U=Pe(I),R=Pe(U,!0);Fe(U),Fe(I),Fe(x),hr(N=>{mn(x,1,`bg-main absolute bottom-12 right-0 z-20 flex h-auto w-[150px] gap-2 rounded-l-full p-2 text-sm text-white transition-opacity duration-200 ${(re(a)?"opacity-100":"opacity-80")??""}`),_r(R,N)},[()=>re(r).toFixed(1)]),Ln("mouseenter",x,()=>ht(a,!0)),Ln("mouseleave",x,()=>ht(a,!1)),Xe(t,l),gr()}const Qz={street_view_sources:{type:"vector",url:`pmtiles://${ug}/THETA360.pmtiles`}},kz={id:"@street_view_line_layer",type:"line",source:"street_view_sources","source-layer":"THETA360_line",paint:{"line-color":"#08fa00","line-width":10,"line-opacity":.5,"line-blur":.5},layout:{visibility:"none","line-cap":"round","line-join":"round"}},Dz={id:"@street_view_circle_layer",type:"circle",source:"street_view_sources","source-layer":"THETA360",minzoom:15,layout:{visibility:"none"},paint:{"circle-color":["case",["boolean",["feature-state","hover"],!1],"#00fad0","#08fa00"],"circle-radius":["case",["boolean",["feature-state","hover"],!1],20,12],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.6],"circle-stroke-width":2,"circle-stroke-color":"#ffffff","circle-stroke-opacity":.5,"circle-blur":.3}};var zz=dt("<div></div>");function Zz(t,e){fr(e,!0),fi.onInitialized(h=>{});let r=null;const a=h=>{!h.features||h.features.length===0||(r!==null&&e.map.setFeatureState({source:"street_view_sources",sourceLayer:"THETA360",id:r},{hover:!1}),r=h.features[0].id,e.map.setFeatureState({source:"street_view_sources",sourceLayer:"THETA360",id:r},{hover:!0}),e.map.getCanvas().style.cursor="pointer")},l=()=>{r!==null&&(e.map.setFeatureState({source:"street_view_sources",sourceLayer:"THETA360",id:r},{hover:!1}),r=null),e.map.getCanvas().style.cursor=""};Mm.subscribe(h=>{!e.map.getLayer("@street_view_line_layer")||!e.map.getLayer("@street_view_circle_layer")||(h?(e.map.setLayoutProperty("@street_view_line_layer","visibility","visible"),e.map.setLayoutProperty("@street_view_circle_layer","visibility","visible"),e.map.on("mousemove","@street_view_circle_layer",a),e.map.on("mouseleave","@street_view_circle_layer",l)):(e.map.setLayoutProperty("@street_view_line_layer","visibility","none"),e.map.setLayoutProperty("@street_view_circle_layer","visibility","none"),e.map.off("mousemove","@street_view_circle_layer",a),e.map.off("mouseleave","@street_view_circle_layer",l)))}),tu(()=>{fi.getMap()});var u=zz();Xe(t,u),gr()}var Hz=dt('<div class="pointer-events-none relative z-50 grid h-[100px] w-[100px] place-items-center svelte-17wdhqb"><div class="css-ripple-effect svelte-17wdhqb"></div> <div class="border-main absolute h-[12px] w-[12px] rounded-full border-[2px] bg-white svelte-17wdhqb"></div> <div class="border-main absolute h-[24px] w-[24px] rounded-full border-2 svelte-17wdhqb"></div> <div class="border-base absolute h-[20px] w-[20px] rounded-full border-2 svelte-17wdhqb"></div></div>');function Oz(t,e){fr(e,!0);let r=er(null),a=er(null);In(()=>{re(r)&&e.show&&ht(a,new Vs.Marker({element:re(r),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map))}),Dn(()=>{e.show?re(a)?re(a).setLngLat(e.lngLat):ht(a,new Vs.Marker({element:re(r),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map)):re(a)&&(re(a).remove(),ht(a,null))}),tu(()=>{var s;(s=re(a))==null||s.remove()});var l=Mr(),u=Dt(l);{var h=s=>{var y=Hz();Ga(y,x=>ht(r,x),()=>re(r)),Xe(s,y)};Ut(u,s=>{e.show&&s(h)})}Xe(t,l),gr()}var Xz=dt("<div></div>");function Vz(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(K5,"$clickableVectorIds",r),u=()=>kr(Zs,"$mapMode",r),h=()=>kr(Qg,"$DEBUG_MODE",r);let s=xr(e,"markerLngLat",15),y=xr(e,"featureMenuData",15),x=xr(e,"showMarker",15),C=xr(e,"clickedLayerIds",15),I=null,U=null;e.map.on("click",N=>{const D=["@street_view_circle_layer",...l()],O=e.map.queryRenderedFeatures(N.point,{layers:D});if(!O.length){I!==null&&U!==null&&(e.map.setFeatureState({...U,id:I},{selected:!1}),I=null),y(null),C([]),s()?(s(null),x(!1)):(x(!0),s(N.lngLat));return}if(u()==="edit"){const ae=O[0].layer.id,V=e.layerEntries.find(K=>K.id===ae);V&&Ps.set(V.id);return}const H=O.map(ae=>ae.layer.id),W=e.layerEntries.filter(ae=>{if(ae.type==="raster"&&ae.interaction.clickable&&ae.style.visible){if(ae.metaData.location==="")return!0;if(ae.metaData.bounds&&FQ(N.lngLat,ae.metaData.bounds))return!0}}).map(ae=>ae.id);if(H.includes("@street_view_circle_layer")){Xl.set(!0);return}const se=[...H,...W];if(C(se.length>0?se:[]),O.length>0){const ae=O[0],V=ae.geometry.type==="Point"?ae.geometry.coordinates:[N.lngLat.lng,N.lngLat.lat],K=mF(ae,V);y(K)}h()&&console.warn(O);const de=O[0],le=de.id,he=f0.get(de.layer.id);s(N.lngLat),x(!0),U&&I!==null&&e.map.setFeatureState({...U,id:I},{selected:!1}),he&&(I=le,U=he,e.map.setFeatureState({...U,id:le},{selected:!0}))}),e.map.on("mousemove",N=>{const D=[...l()],O=e.map.queryRenderedFeatures(N.point,{layers:D});O.length>0?(e.map.getCanvas().style.cursor="pointer",e.toggleTooltip(N,O[0])):(e.map.getCanvas().style.cursor="default",e.toggleTooltip())}),Dn(()=>{y()||I!==null&&U!==null&&(e.map.setFeatureState({...U,id:I},{selected:!1}),I=null)}),tu(()=>{fi.getMap()});var R=Xz();Xe(t,R),gr(),a()}const g={};g.MUNI_ARRAY={};g.MUNI_ARRAY[1100]="1,,1100,";g.MUNI_ARRAY[1101]="1,,1101,";g.MUNI_ARRAY[1102]="1,,1102,";g.MUNI_ARRAY[1103]="1,,1103,";g.MUNI_ARRAY[1104]="1,,1104,";g.MUNI_ARRAY[1105]="1,,1105,";g.MUNI_ARRAY[1106]="1,,1106,";g.MUNI_ARRAY[1107]="1,,1107,";g.MUNI_ARRAY[1108]="1,,1108,";g.MUNI_ARRAY[1109]="1,,1109,";g.MUNI_ARRAY[1110]="1,,1110,";g.MUNI_ARRAY[1202]="1,,1202,";g.MUNI_ARRAY[1203]="1,,1203,";g.MUNI_ARRAY[1204]="1,,1204,";g.MUNI_ARRAY[1205]="1,,1205,";g.MUNI_ARRAY[1206]="1,,1206,";g.MUNI_ARRAY[1207]="1,,1207,";g.MUNI_ARRAY[1208]="1,,1208,";g.MUNI_ARRAY[1209]="1,,1209,";g.MUNI_ARRAY[1210]="1,,1210,";g.MUNI_ARRAY[1211]="1,,1211,";g.MUNI_ARRAY[1212]="1,,1212,";g.MUNI_ARRAY[1213]="1,,1213,";g.MUNI_ARRAY[1214]="1,,1214,";g.MUNI_ARRAY[1215]="1,,1215,";g.MUNI_ARRAY[1216]="1,,1216,";g.MUNI_ARRAY[1217]="1,,1217,";g.MUNI_ARRAY[1218]="1,,1218,";g.MUNI_ARRAY[1219]="1,,1219,";g.MUNI_ARRAY[1220]="1,,1220,";g.MUNI_ARRAY[1221]="1,,1221,";g.MUNI_ARRAY[1222]="1,,1222,";g.MUNI_ARRAY[1223]="1,,1223,";g.MUNI_ARRAY[1224]="1,,1224,";g.MUNI_ARRAY[1225]="1,,1225,";g.MUNI_ARRAY[1226]="1,,1226,";g.MUNI_ARRAY[1227]="1,,1227,";g.MUNI_ARRAY[1228]="1,,1228,";g.MUNI_ARRAY[1229]="1,,1229,";g.MUNI_ARRAY[1230]="1,,1230,";g.MUNI_ARRAY[1231]="1,,1231,";g.MUNI_ARRAY[1233]="1,,1233,";g.MUNI_ARRAY[1234]="1,,1234,";g.MUNI_ARRAY[1235]="1,,1235,";g.MUNI_ARRAY[1236]="1,,1236,";g.MUNI_ARRAY[1303]="1,,1303,";g.MUNI_ARRAY[1304]="1,,1304,";g.MUNI_ARRAY[1331]="1,,1331,";g.MUNI_ARRAY[1332]="1,,1332,";g.MUNI_ARRAY[1333]="1,,1333,";g.MUNI_ARRAY[1334]="1,,1334,";g.MUNI_ARRAY[1337]="1,,1337,";g.MUNI_ARRAY[1343]="1,,1343,";g.MUNI_ARRAY[1345]="1,,1345,";g.MUNI_ARRAY[1346]="1,,1346,";g.MUNI_ARRAY[1347]="1,,1347,";g.MUNI_ARRAY[1361]="1,,1361,";g.MUNI_ARRAY[1362]="1,,1362,";g.MUNI_ARRAY[1363]="1,,1363,";g.MUNI_ARRAY[1364]="1,,1364,";g.MUNI_ARRAY[1367]="1,,1367,";g.MUNI_ARRAY[1370]="1,,1370,";g.MUNI_ARRAY[1371]="1,,1371,";g.MUNI_ARRAY[1391]="1,,1391,";g.MUNI_ARRAY[1392]="1,,1392,";g.MUNI_ARRAY[1393]="1,,1393,";g.MUNI_ARRAY[1394]="1,,1394,";g.MUNI_ARRAY[1395]="1,,1395,";g.MUNI_ARRAY[1396]="1,,1396,";g.MUNI_ARRAY[1397]="1,,1397,";g.MUNI_ARRAY[1398]="1,,1398,";g.MUNI_ARRAY[1399]="1,,1399,";g.MUNI_ARRAY[1400]="1,,1400,";g.MUNI_ARRAY[1401]="1,,1401,";g.MUNI_ARRAY[1402]="1,,1402,";g.MUNI_ARRAY[1403]="1,,1403,";g.MUNI_ARRAY[1404]="1,,1404,";g.MUNI_ARRAY[1405]="1,,1405,";g.MUNI_ARRAY[1406]="1,,1406,";g.MUNI_ARRAY[1407]="1,,1407,";g.MUNI_ARRAY[1408]="1,,1408,";g.MUNI_ARRAY[1409]="1,,1409,";g.MUNI_ARRAY[1423]="1,,1423,";g.MUNI_ARRAY[1424]="1,,1424,";g.MUNI_ARRAY[1425]="1,,1425,";g.MUNI_ARRAY[1427]="1,,1427,";g.MUNI_ARRAY[1428]="1,,1428,";g.MUNI_ARRAY[1429]="1,,1429,";g.MUNI_ARRAY[1430]="1,,1430,";g.MUNI_ARRAY[1431]="1,,1431,";g.MUNI_ARRAY[1432]="1,,1432,";g.MUNI_ARRAY[1433]="1,,1433,";g.MUNI_ARRAY[1434]="1,,1434,";g.MUNI_ARRAY[1436]="1,,1436,";g.MUNI_ARRAY[1437]="1,,1437,";g.MUNI_ARRAY[1438]="1,,1438,";g.MUNI_ARRAY[1452]="1,,1452,";g.MUNI_ARRAY[1453]="1,,1453,";g.MUNI_ARRAY[1454]="1,,1454,";g.MUNI_ARRAY[1455]="1,,1455,";g.MUNI_ARRAY[1456]="1,,1456,";g.MUNI_ARRAY[1457]="1,,1457,";g.MUNI_ARRAY[1458]="1,,1458,";g.MUNI_ARRAY[1459]="1,,1459,";g.MUNI_ARRAY[1460]="1,,1460,";g.MUNI_ARRAY[1461]="1,,1461,";g.MUNI_ARRAY[1462]="1,,1462,";g.MUNI_ARRAY[1463]="1,,1463,";g.MUNI_ARRAY[1464]="1,,1464,";g.MUNI_ARRAY[1465]="1,,1465,";g.MUNI_ARRAY[1468]="1,,1468,";g.MUNI_ARRAY[1469]="1,,1469,";g.MUNI_ARRAY[1470]="1,,1470,";g.MUNI_ARRAY[1471]="1,,1471,";g.MUNI_ARRAY[1472]="1,,1472,";g.MUNI_ARRAY[1481]="1,,1481,";g.MUNI_ARRAY[1482]="1,,1482,";g.MUNI_ARRAY[1483]="1,,1483,";g.MUNI_ARRAY[1484]="1,,1484,";g.MUNI_ARRAY[1485]="1,,1485,";g.MUNI_ARRAY[1486]="1,,1486,";g.MUNI_ARRAY[1487]="1,,1487,";g.MUNI_ARRAY[1511]="1,,1511,";g.MUNI_ARRAY[1512]="1,,1512,";g.MUNI_ARRAY[1513]="1,,1513,";g.MUNI_ARRAY[1514]="1,,1514,";g.MUNI_ARRAY[1516]="1,,1516,";g.MUNI_ARRAY[1517]="1,,1517,";g.MUNI_ARRAY[1518]="1,,1518,";g.MUNI_ARRAY[1519]="1,,1519,";g.MUNI_ARRAY[1520]="1,,1520,";g.MUNI_ARRAY[1543]="1,,1543,";g.MUNI_ARRAY[1544]="1,,1544,";g.MUNI_ARRAY[1545]="1,,1545,";g.MUNI_ARRAY[1546]="1,,1546,";g.MUNI_ARRAY[1547]="1,,1547,";g.MUNI_ARRAY[1549]="1,,1549,";g.MUNI_ARRAY[1550]="1,,1550,";g.MUNI_ARRAY[1552]="1,,1552,";g.MUNI_ARRAY[1555]="1,,1555,";g.MUNI_ARRAY[1559]="1,,1559,";g.MUNI_ARRAY[1560]="1,,1560,";g.MUNI_ARRAY[1561]="1,,1561,";g.MUNI_ARRAY[1562]="1,,1562,";g.MUNI_ARRAY[1563]="1,,1563,";g.MUNI_ARRAY[1564]="1,,1564,";g.MUNI_ARRAY[1571]="1,,1571,";g.MUNI_ARRAY[1575]="1,,1575,";g.MUNI_ARRAY[1578]="1,,1578,";g.MUNI_ARRAY[1581]="1,,1581,";g.MUNI_ARRAY[1584]="1,,1584,";g.MUNI_ARRAY[1585]="1,,1585,";g.MUNI_ARRAY[1586]="1,,1586,";g.MUNI_ARRAY[1601]="1,,1601,";g.MUNI_ARRAY[1602]="1,,1602,";g.MUNI_ARRAY[1604]="1,,1604,";g.MUNI_ARRAY[1607]="1,,1607,";g.MUNI_ARRAY[1608]="1,,1608,";g.MUNI_ARRAY[1609]="1,,1609,";g.MUNI_ARRAY[1610]="1,,1610,";g.MUNI_ARRAY[1631]="1,,1631,";g.MUNI_ARRAY[1632]="1,,1632,";g.MUNI_ARRAY[1633]="1,,1633,";g.MUNI_ARRAY[1634]="1,,1634,";g.MUNI_ARRAY[1635]="1,,1635,";g.MUNI_ARRAY[1636]="1,,1636,";g.MUNI_ARRAY[1637]="1,,1637,";g.MUNI_ARRAY[1638]="1,,1638,";g.MUNI_ARRAY[1639]="1,,1639,";g.MUNI_ARRAY[1641]="1,,1641,";g.MUNI_ARRAY[1642]="1,,1642,";g.MUNI_ARRAY[1643]="1,,1643,";g.MUNI_ARRAY[1644]="1,,1644,";g.MUNI_ARRAY[1645]="1,,1645,";g.MUNI_ARRAY[1646]="1,,1646,";g.MUNI_ARRAY[1647]="1,,1647,";g.MUNI_ARRAY[1648]="1,,1648,";g.MUNI_ARRAY[1649]="1,,1649,";g.MUNI_ARRAY[1661]="1,,1661,";g.MUNI_ARRAY[1662]="1,,1662,";g.MUNI_ARRAY[1663]="1,,1663,";g.MUNI_ARRAY[1664]="1,,1664,";g.MUNI_ARRAY[1665]="1,,1665,";g.MUNI_ARRAY[1667]="1,,1667,";g.MUNI_ARRAY[1668]="1,,1668,";g.MUNI_ARRAY[1691]="1,,1691,";g.MUNI_ARRAY[1692]="1,,1692,";g.MUNI_ARRAY[1693]="1,,1693,";g.MUNI_ARRAY[1694]="1,,1694,";g.MUNI_ARRAY[1695]="1,,1695,";g.MUNI_ARRAY[1696]="1,,1696,";g.MUNI_ARRAY[1697]="1,,1697,";g.MUNI_ARRAY[1698]="1,,1698,";g.MUNI_ARRAY[1699]="1,,1699,";g.MUNI_ARRAY[1700]="1,,1700,";g.MUNI_ARRAY[2201]="2,,2201,";g.MUNI_ARRAY[2202]="2,,2202,";g.MUNI_ARRAY[2203]="2,,2203,";g.MUNI_ARRAY[2204]="2,,2204,";g.MUNI_ARRAY[2205]="2,,2205,";g.MUNI_ARRAY[2206]="2,,2206,";g.MUNI_ARRAY[2207]="2,,2207,";g.MUNI_ARRAY[2208]="2,,2208,";g.MUNI_ARRAY[2209]="2,,2209,";g.MUNI_ARRAY[2210]="2,,2210,";g.MUNI_ARRAY[2301]="2,,2301,";g.MUNI_ARRAY[2303]="2,,2303,";g.MUNI_ARRAY[2304]="2,,2304,";g.MUNI_ARRAY[2307]="2,,2307,";g.MUNI_ARRAY[2321]="2,,2321,";g.MUNI_ARRAY[2323]="2,,2323,";g.MUNI_ARRAY[2343]="2,,2343,";g.MUNI_ARRAY[2361]="2,,2361,";g.MUNI_ARRAY[2362]="2,,2362,";g.MUNI_ARRAY[2367]="2,,2367,";g.MUNI_ARRAY[2381]="2,,2381,";g.MUNI_ARRAY[2384]="2,,2384,";g.MUNI_ARRAY[2387]="2,,2387,";g.MUNI_ARRAY[2401]="2,,2401,";g.MUNI_ARRAY[2402]="2,,2402,";g.MUNI_ARRAY[2405]="2,,2405,";g.MUNI_ARRAY[2406]="2,,2406,";g.MUNI_ARRAY[2408]="2,,2408,";g.MUNI_ARRAY[2411]="2,,2411,";g.MUNI_ARRAY[2412]="2,,2412,";g.MUNI_ARRAY[2423]="2,,2423,";g.MUNI_ARRAY[2424]="2,,2424,";g.MUNI_ARRAY[2425]="2,,2425,";g.MUNI_ARRAY[2426]="2,,2426,";g.MUNI_ARRAY[2441]="2,,2441,";g.MUNI_ARRAY[2442]="2,,2442,";g.MUNI_ARRAY[2443]="2,,2443,";g.MUNI_ARRAY[2445]="2,,2445,";g.MUNI_ARRAY[2446]="2,,2446,";g.MUNI_ARRAY[2450]="2,,2450,";g.MUNI_ARRAY[3201]="3,,3201,";g.MUNI_ARRAY[3202]="3,,3202,";g.MUNI_ARRAY[3203]="3,,3203,";g.MUNI_ARRAY[3205]="3,,3205,";g.MUNI_ARRAY[3206]="3,,3206,";g.MUNI_ARRAY[3207]="3,,3207,";g.MUNI_ARRAY[3208]="3,,3208,";g.MUNI_ARRAY[3209]="3,,3209,";g.MUNI_ARRAY[3210]="3,,3210,";g.MUNI_ARRAY[3211]="3,,3211,";g.MUNI_ARRAY[3213]="3,,3213,";g.MUNI_ARRAY[3214]="3,,3214,";g.MUNI_ARRAY[3215]="3,,3215,";g.MUNI_ARRAY[3216]="3,,3216,";g.MUNI_ARRAY[3301]="3,,3301,";g.MUNI_ARRAY[3302]="3,,3302,";g.MUNI_ARRAY[3303]="3,,3303,";g.MUNI_ARRAY[3321]="3,,3321,";g.MUNI_ARRAY[3322]="3,,3322,";g.MUNI_ARRAY[3366]="3,,3366,";g.MUNI_ARRAY[3381]="3,,3381,";g.MUNI_ARRAY[3402]="3,,3402,";g.MUNI_ARRAY[3441]="3,,3441,";g.MUNI_ARRAY[3461]="3,,3461,";g.MUNI_ARRAY[3482]="3,,3482,";g.MUNI_ARRAY[3483]="3,,3483,";g.MUNI_ARRAY[3484]="3,,3484,";g.MUNI_ARRAY[3485]="3,,3485,";g.MUNI_ARRAY[3501]="3,,3501,";g.MUNI_ARRAY[3503]="3,,3503,";g.MUNI_ARRAY[3506]="3,,3506,";g.MUNI_ARRAY[3507]="3,,3507,";g.MUNI_ARRAY[3524]="3,,3524,";g.MUNI_ARRAY[4100]="4,,4100,";g.MUNI_ARRAY[4101]="4,,4101,";g.MUNI_ARRAY[4102]="4,,4102,";g.MUNI_ARRAY[4103]="4,,4103,";g.MUNI_ARRAY[4104]="4,,4104,";g.MUNI_ARRAY[4105]="4,,4105,";g.MUNI_ARRAY[4202]="4,,4202,";g.MUNI_ARRAY[4203]="4,,4203,";g.MUNI_ARRAY[4205]="4,,4205,";g.MUNI_ARRAY[4206]="4,,4206,";g.MUNI_ARRAY[4207]="4,,4207,";g.MUNI_ARRAY[4208]="4,,4208,";g.MUNI_ARRAY[4209]="4,,4209,";g.MUNI_ARRAY[4211]="4,,4211,";g.MUNI_ARRAY[4212]="4,,4212,";g.MUNI_ARRAY[4213]="4,,4213,";g.MUNI_ARRAY[4214]="4,,4214,";g.MUNI_ARRAY[4215]="4,,4215,";g.MUNI_ARRAY[4216]="4,,4216,";g.MUNI_ARRAY[4301]="4,,4301,";g.MUNI_ARRAY[4302]="4,,4302,";g.MUNI_ARRAY[4321]="4,,4321,";g.MUNI_ARRAY[4322]="4,,4322,";g.MUNI_ARRAY[4323]="4,,4323,";g.MUNI_ARRAY[4324]="4,,4324,";g.MUNI_ARRAY[4341]="4,,4341,";g.MUNI_ARRAY[4361]="4,,4361,";g.MUNI_ARRAY[4362]="4,,4362,";g.MUNI_ARRAY[4401]="4,,4401,";g.MUNI_ARRAY[4404]="4,,4404,";g.MUNI_ARRAY[4406]="4,,4406,";g.MUNI_ARRAY[4421]="4,,4421,";g.MUNI_ARRAY[4422]="4,,4422,";g.MUNI_ARRAY[4423]="4,,4423,";g.MUNI_ARRAY[4424]="4,,4424,";g.MUNI_ARRAY[4444]="4,,4444,";g.MUNI_ARRAY[4445]="4,,4445,";g.MUNI_ARRAY[4501]="4,,4501,";g.MUNI_ARRAY[4505]="4,,4505,";g.MUNI_ARRAY[4581]="4,,4581,";g.MUNI_ARRAY[4606]="4,,4606,";g.MUNI_ARRAY[5201]="5,,5201,";g.MUNI_ARRAY[5202]="5,,5202,";g.MUNI_ARRAY[5203]="5,,5203,";g.MUNI_ARRAY[5204]="5,,5204,";g.MUNI_ARRAY[5206]="5,,5206,";g.MUNI_ARRAY[5207]="5,,5207,";g.MUNI_ARRAY[5209]="5,,5209,";g.MUNI_ARRAY[5210]="5,,5210,";g.MUNI_ARRAY[5211]="5,,5211,";g.MUNI_ARRAY[5212]="5,,5212,";g.MUNI_ARRAY[5213]="5,,5213,";g.MUNI_ARRAY[5214]="5,,5214,";g.MUNI_ARRAY[5215]="5,,5215,";g.MUNI_ARRAY[5303]="5,,5303,";g.MUNI_ARRAY[5327]="5,,5327,";g.MUNI_ARRAY[5346]="5,,5346,";g.MUNI_ARRAY[5348]="5,,5348,";g.MUNI_ARRAY[5349]="5,,5349,";g.MUNI_ARRAY[5361]="5,,5361,";g.MUNI_ARRAY[5363]="5,,5363,";g.MUNI_ARRAY[5366]="5,,5366,";g.MUNI_ARRAY[5368]="5,,5368,";g.MUNI_ARRAY[5434]="5,,5434,";g.MUNI_ARRAY[5463]="5,,5463,";g.MUNI_ARRAY[5464]="5,,5464,";g.MUNI_ARRAY[6201]="6,,6201,";g.MUNI_ARRAY[6202]="6,,6202,";g.MUNI_ARRAY[6203]="6,,6203,";g.MUNI_ARRAY[6204]="6,,6204,";g.MUNI_ARRAY[6205]="6,,6205,";g.MUNI_ARRAY[6206]="6,,6206,";g.MUNI_ARRAY[6207]="6,,6207,";g.MUNI_ARRAY[6208]="6,,6208,";g.MUNI_ARRAY[6209]="6,,6209,";g.MUNI_ARRAY[6210]="6,,6210,";g.MUNI_ARRAY[6211]="6,,6211,";g.MUNI_ARRAY[6212]="6,,6212,";g.MUNI_ARRAY[6213]="6,,6213,";g.MUNI_ARRAY[6301]="6,,6301,";g.MUNI_ARRAY[6302]="6,,6302,";g.MUNI_ARRAY[6321]="6,,6321,";g.MUNI_ARRAY[6322]="6,,6322,";g.MUNI_ARRAY[6323]="6,,6323,";g.MUNI_ARRAY[6324]="6,,6324,";g.MUNI_ARRAY[6341]="6,,6341,";g.MUNI_ARRAY[6361]="6,,6361,";g.MUNI_ARRAY[6362]="6,,6362,";g.MUNI_ARRAY[6363]="6,,6363,";g.MUNI_ARRAY[6364]="6,,6364,";g.MUNI_ARRAY[6365]="6,,6365,";g.MUNI_ARRAY[6366]="6,,6366,";g.MUNI_ARRAY[6367]="6,,6367,";g.MUNI_ARRAY[6381]="6,,6381,";g.MUNI_ARRAY[6382]="6,,6382,";g.MUNI_ARRAY[6401]="6,,6401,";g.MUNI_ARRAY[6402]="6,,6402,";g.MUNI_ARRAY[6403]="6,,6403,";g.MUNI_ARRAY[6426]="6,,6426,";g.MUNI_ARRAY[6428]="6,,6428,";g.MUNI_ARRAY[6461]="6,,6461,";g.MUNI_ARRAY[7201]="7,,7201,";g.MUNI_ARRAY[7202]="7,,7202,";g.MUNI_ARRAY[7203]="7,,7203,";g.MUNI_ARRAY[7204]="7,,7204,";g.MUNI_ARRAY[7205]="7,,7205,";g.MUNI_ARRAY[7207]="7,,7207,";g.MUNI_ARRAY[7208]="7,,7208,";g.MUNI_ARRAY[7209]="7,,7209,";g.MUNI_ARRAY[7210]="7,,7210,";g.MUNI_ARRAY[7211]="7,,7211,";g.MUNI_ARRAY[7212]="7,,7212,";g.MUNI_ARRAY[7213]="7,,7213,";g.MUNI_ARRAY[7214]="7,,7214,";g.MUNI_ARRAY[7301]="7,,7301,";g.MUNI_ARRAY[7303]="7,,7303,";g.MUNI_ARRAY[7308]="7,,7308,";g.MUNI_ARRAY[7322]="7,,7322,";g.MUNI_ARRAY[7342]="7,,7342,";g.MUNI_ARRAY[7344]="7,,7344,";g.MUNI_ARRAY[7362]="7,,7362,";g.MUNI_ARRAY[7364]="7,,7364,";g.MUNI_ARRAY[7367]="7,,7367,";g.MUNI_ARRAY[7368]="7,,7368,";g.MUNI_ARRAY[7402]="7,,7402,";g.MUNI_ARRAY[7405]="7,,7405,";g.MUNI_ARRAY[7407]="7,,7407,";g.MUNI_ARRAY[7408]="7,,7408,";g.MUNI_ARRAY[7421]="7,,7421,";g.MUNI_ARRAY[7422]="7,,7422,";g.MUNI_ARRAY[7423]="7,,7423,";g.MUNI_ARRAY[7444]="7,,7444,";g.MUNI_ARRAY[7445]="7,,7445,";g.MUNI_ARRAY[7446]="7,,7446,";g.MUNI_ARRAY[7447]="7,,7447,";g.MUNI_ARRAY[7461]="7,,7461,";g.MUNI_ARRAY[7464]="7,,7464,";g.MUNI_ARRAY[7465]="7,,7465,";g.MUNI_ARRAY[7466]="7,,7466,";g.MUNI_ARRAY[7481]="7,,7481,";g.MUNI_ARRAY[7482]="7,,7482,";g.MUNI_ARRAY[7483]="7,,7483,";g.MUNI_ARRAY[7484]="7,,7484,";g.MUNI_ARRAY[7501]="7,,7501,";g.MUNI_ARRAY[7502]="7,,7502,";g.MUNI_ARRAY[7503]="7,,7503,";g.MUNI_ARRAY[7504]="7,,7504,";g.MUNI_ARRAY[7505]="7,,7505,";g.MUNI_ARRAY[7521]="7,,7521,";g.MUNI_ARRAY[7522]="7,,7522,";g.MUNI_ARRAY[7541]="7,,7541,";g.MUNI_ARRAY[7542]="7,,7542,";g.MUNI_ARRAY[7543]="7,,7543,";g.MUNI_ARRAY[7544]="7,,7544,";g.MUNI_ARRAY[7545]="7,,7545,";g.MUNI_ARRAY[7546]="7,,7546,";g.MUNI_ARRAY[7547]="7,,7547,";g.MUNI_ARRAY[7548]="7,,7548,";g.MUNI_ARRAY[7561]="7,,7561,";g.MUNI_ARRAY[7564]="7,,7564,";g.MUNI_ARRAY[8201]="8,,8201,";g.MUNI_ARRAY[8202]="8,,8202,";g.MUNI_ARRAY[8203]="8,,8203,";g.MUNI_ARRAY[8204]="8,,8204,";g.MUNI_ARRAY[8205]="8,,8205,";g.MUNI_ARRAY[8207]="8,,8207,";g.MUNI_ARRAY[8208]="8,,8208,";g.MUNI_ARRAY[8210]="8,,8210,";g.MUNI_ARRAY[8211]="8,,8211,";g.MUNI_ARRAY[8212]="8,,8212,";g.MUNI_ARRAY[8214]="8,,8214,";g.MUNI_ARRAY[8215]="8,,8215,";g.MUNI_ARRAY[8216]="8,,8216,";g.MUNI_ARRAY[8217]="8,,8217,";g.MUNI_ARRAY[8219]="8,,8219,";g.MUNI_ARRAY[8220]="8,,8220,";g.MUNI_ARRAY[8221]="8,,8221,";g.MUNI_ARRAY[8222]="8,,8222,";g.MUNI_ARRAY[8223]="8,,8223,";g.MUNI_ARRAY[8224]="8,,8224,";g.MUNI_ARRAY[8225]="8,,8225,";g.MUNI_ARRAY[8226]="8,,8226,";g.MUNI_ARRAY[8227]="8,,8227,";g.MUNI_ARRAY[8228]="8,,8228,";g.MUNI_ARRAY[8229]="8,,8229,";g.MUNI_ARRAY[8230]="8,,8230,";g.MUNI_ARRAY[8231]="8,,8231,";g.MUNI_ARRAY[8232]="8,,8232,";g.MUNI_ARRAY[8233]="8,,8233,";g.MUNI_ARRAY[8234]="8,,8234,";g.MUNI_ARRAY[8235]="8,,8235,";g.MUNI_ARRAY[8236]="8,,8236,";g.MUNI_ARRAY[8302]="8,,8302,";g.MUNI_ARRAY[8309]="8,,8309,";g.MUNI_ARRAY[8310]="8,,8310,";g.MUNI_ARRAY[8341]="8,,8341,";g.MUNI_ARRAY[8364]="8,,8364,";g.MUNI_ARRAY[8442]="8,,8442,";g.MUNI_ARRAY[8443]="8,,8443,";g.MUNI_ARRAY[8447]="8,,8447,";g.MUNI_ARRAY[8521]="8,,8521,";g.MUNI_ARRAY[8542]="8,,8542,";g.MUNI_ARRAY[8546]="8,,8546,";g.MUNI_ARRAY[8564]="8,,8564,";g.MUNI_ARRAY[9201]="9,,9201,";g.MUNI_ARRAY[9202]="9,,9202,";g.MUNI_ARRAY[9203]="9,,9203,";g.MUNI_ARRAY[9204]="9,,9204,";g.MUNI_ARRAY[9205]="9,,9205,";g.MUNI_ARRAY[9206]="9,,9206,";g.MUNI_ARRAY[9208]="9,,9208,";g.MUNI_ARRAY[9209]="9,,9209,";g.MUNI_ARRAY[9210]="9,,9210,";g.MUNI_ARRAY[9211]="9,,9211,";g.MUNI_ARRAY[9213]="9,,9213,";g.MUNI_ARRAY[9214]="9,,9214,";g.MUNI_ARRAY[9215]="9,,9215,";g.MUNI_ARRAY[9216]="9,,9216,";g.MUNI_ARRAY[9301]="9,,9301,";g.MUNI_ARRAY[9342]="9,,9342,";g.MUNI_ARRAY[9343]="9,,9343,";g.MUNI_ARRAY[9344]="9,,9344,";g.MUNI_ARRAY[9345]="9,,9345,";g.MUNI_ARRAY[9361]="9,,9361,";g.MUNI_ARRAY[9364]="9,,9364,";g.MUNI_ARRAY[9384]="9,,9384,";g.MUNI_ARRAY[9386]="9,,9386,";g.MUNI_ARRAY[9407]="9,,9407,";g.MUNI_ARRAY[9411]="9,,9411,";g.MUNI_ARRAY[10201]="10,,10201,";g.MUNI_ARRAY[10202]="10,,10202,";g.MUNI_ARRAY[10203]="10,,10203,";g.MUNI_ARRAY[10204]="10,,10204,";g.MUNI_ARRAY[10205]="10,,10205,";g.MUNI_ARRAY[10206]="10,,10206,";g.MUNI_ARRAY[10207]="10,,10207,";g.MUNI_ARRAY[10208]="10,,10208,";g.MUNI_ARRAY[10209]="10,,10209,";g.MUNI_ARRAY[10210]="10,,10210,";g.MUNI_ARRAY[10211]="10,,10211,";g.MUNI_ARRAY[10212]="10,,10212,";g.MUNI_ARRAY[10344]="10,,10344,";g.MUNI_ARRAY[10345]="10,,10345,";g.MUNI_ARRAY[10366]="10,,10366,";g.MUNI_ARRAY[10367]="10,,10367,";g.MUNI_ARRAY[10382]="10,,10382,";g.MUNI_ARRAY[10383]="10,,10383,";g.MUNI_ARRAY[10384]="10,,10384,";g.MUNI_ARRAY[10421]="10,,10421,";g.MUNI_ARRAY[10424]="10,,10424,";g.MUNI_ARRAY[10425]="10,,10425,";g.MUNI_ARRAY[10426]="10,,10426,";g.MUNI_ARRAY[10428]="10,,10428,";g.MUNI_ARRAY[10429]="10,,10429,";g.MUNI_ARRAY[10443]="10,,10443,";g.MUNI_ARRAY[10444]="10,,10444,";g.MUNI_ARRAY[10448]="10,,10448,";g.MUNI_ARRAY[10449]="10,,10449,";g.MUNI_ARRAY[10464]="10,,10464,";g.MUNI_ARRAY[10521]="10,,10521,";g.MUNI_ARRAY[10522]="10,,10522,";g.MUNI_ARRAY[10523]="10,,10523,";g.MUNI_ARRAY[10524]="10,,10524,";g.MUNI_ARRAY[10525]="10,,10525,";g.MUNI_ARRAY[11100]="11,,11100,";g.MUNI_ARRAY[11101]="11,,11101,";g.MUNI_ARRAY[11102]="11,,11102,";g.MUNI_ARRAY[11103]="11,,11103,";g.MUNI_ARRAY[11104]="11,,11104,";g.MUNI_ARRAY[11105]="11,,11105,";g.MUNI_ARRAY[11106]="11,,11106,";g.MUNI_ARRAY[11107]="11,,11107,";g.MUNI_ARRAY[11108]="11,,11108,";g.MUNI_ARRAY[11109]="11,,11109,";g.MUNI_ARRAY[11110]="11,,11110,";g.MUNI_ARRAY[11201]="11,,11201,";g.MUNI_ARRAY[11202]="11,,11202,";g.MUNI_ARRAY[11203]="11,,11203,";g.MUNI_ARRAY[11206]="11,,11206,";g.MUNI_ARRAY[11207]="11,,11207,";g.MUNI_ARRAY[11208]="11,,11208,";g.MUNI_ARRAY[11209]="11,,11209,";g.MUNI_ARRAY[11210]="11,,11210,";g.MUNI_ARRAY[11211]="11,,11211,";g.MUNI_ARRAY[11212]="11,,11212,";g.MUNI_ARRAY[11214]="11,,11214,";g.MUNI_ARRAY[11215]="11,,11215,";g.MUNI_ARRAY[11216]="11,,11216,";g.MUNI_ARRAY[11217]="11,,11217,";g.MUNI_ARRAY[11218]="11,,11218,";g.MUNI_ARRAY[11219]="11,,11219,";g.MUNI_ARRAY[11221]="11,,11221,";g.MUNI_ARRAY[11222]="11,,11222,";g.MUNI_ARRAY[11223]="11,,11223,";g.MUNI_ARRAY[11224]="11,,11224,";g.MUNI_ARRAY[11225]="11,,11225,";g.MUNI_ARRAY[11227]="11,,11227,";g.MUNI_ARRAY[11228]="11,,11228,";g.MUNI_ARRAY[11229]="11,,11229,";g.MUNI_ARRAY[11230]="11,,11230,";g.MUNI_ARRAY[11231]="11,,11231,";g.MUNI_ARRAY[11232]="11,,11232,";g.MUNI_ARRAY[11233]="11,,11233,";g.MUNI_ARRAY[11234]="11,,11234,";g.MUNI_ARRAY[11235]="11,,11235,";g.MUNI_ARRAY[11237]="11,,11237,";g.MUNI_ARRAY[11238]="11,,11238,";g.MUNI_ARRAY[11239]="11,,11239,";g.MUNI_ARRAY[11240]="11,,11240,";g.MUNI_ARRAY[11241]="11,,11241,";g.MUNI_ARRAY[11242]="11,,11242,";g.MUNI_ARRAY[11243]="11,,11243,";g.MUNI_ARRAY[11245]="11,,11245,";g.MUNI_ARRAY[11301]="11,,11301,";g.MUNI_ARRAY[11324]="11,,11324,";g.MUNI_ARRAY[11326]="11,,11326,";g.MUNI_ARRAY[11327]="11,,11327,";g.MUNI_ARRAY[11341]="11,,11341,";g.MUNI_ARRAY[11342]="11,,11342,";g.MUNI_ARRAY[11343]="11,,11343,";g.MUNI_ARRAY[11346]="11,,11346,";g.MUNI_ARRAY[11347]="11,,11347,";g.MUNI_ARRAY[11348]="11,,11348,";g.MUNI_ARRAY[11349]="11,,11349,";g.MUNI_ARRAY[11361]="11,,11361,";g.MUNI_ARRAY[11362]="11,,11362,";g.MUNI_ARRAY[11363]="11,,11363,";g.MUNI_ARRAY[11365]="11,,11365,";g.MUNI_ARRAY[11369]="11,,11369,";g.MUNI_ARRAY[11381]="11,,11381,";g.MUNI_ARRAY[11383]="11,,11383,";g.MUNI_ARRAY[11385]="11,,11385,";g.MUNI_ARRAY[11408]="11,,11408,";g.MUNI_ARRAY[11442]="11,,11442,";g.MUNI_ARRAY[11246]="11,,11246,";g.MUNI_ARRAY[11464]="11,,11464,";g.MUNI_ARRAY[11465]="11,,11465,";g.MUNI_ARRAY[12100]="12,,12100,";g.MUNI_ARRAY[12101]="12,,12101,";g.MUNI_ARRAY[12102]="12,,12102,";g.MUNI_ARRAY[12103]="12,,12103,";g.MUNI_ARRAY[12104]="12,,12104,";g.MUNI_ARRAY[12105]="12,,12105,";g.MUNI_ARRAY[12106]="12,,12106,";g.MUNI_ARRAY[12202]="12,,12202,";g.MUNI_ARRAY[12203]="12,,12203,";g.MUNI_ARRAY[12204]="12,,12204,";g.MUNI_ARRAY[12205]="12,,12205,";g.MUNI_ARRAY[12206]="12,,12206,";g.MUNI_ARRAY[12207]="12,,12207,";g.MUNI_ARRAY[12208]="12,,12208,";g.MUNI_ARRAY[12210]="12,,12210,";g.MUNI_ARRAY[12211]="12,,12211,";g.MUNI_ARRAY[12212]="12,,12212,";g.MUNI_ARRAY[12213]="12,,12213,";g.MUNI_ARRAY[12215]="12,,12215,";g.MUNI_ARRAY[12216]="12,,12216,";g.MUNI_ARRAY[12217]="12,,12217,";g.MUNI_ARRAY[12218]="12,,12218,";g.MUNI_ARRAY[12219]="12,,12219,";g.MUNI_ARRAY[12220]="12,,12220,";g.MUNI_ARRAY[12221]="12,,12221,";g.MUNI_ARRAY[12222]="12,,12222,";g.MUNI_ARRAY[12223]="12,,12223,";g.MUNI_ARRAY[12224]="12,,12224,";g.MUNI_ARRAY[12225]="12,,12225,";g.MUNI_ARRAY[12226]="12,,12226,";g.MUNI_ARRAY[12227]="12,,12227,";g.MUNI_ARRAY[12228]="12,,12228,";g.MUNI_ARRAY[12229]="12,,12229,";g.MUNI_ARRAY[12230]="12,,12230,";g.MUNI_ARRAY[12231]="12,,12231,";g.MUNI_ARRAY[12232]="12,,12232,";g.MUNI_ARRAY[12233]="12,,12233,";g.MUNI_ARRAY[12234]="12,,12234,";g.MUNI_ARRAY[12235]="12,,12235,";g.MUNI_ARRAY[12236]="12,,12236,";g.MUNI_ARRAY[12237]="12,,12237,";g.MUNI_ARRAY[12238]="12,,12238,";g.MUNI_ARRAY[12322]="12,,12322,";g.MUNI_ARRAY[12329]="12,,12329,";g.MUNI_ARRAY[12342]="12,,12342,";g.MUNI_ARRAY[12347]="12,,12347,";g.MUNI_ARRAY[12349]="12,,12349,";g.MUNI_ARRAY[12239]="12,,12239,";g.MUNI_ARRAY[12403]="12,,12403,";g.MUNI_ARRAY[12409]="12,,12409,";g.MUNI_ARRAY[12410]="12,,12410,";g.MUNI_ARRAY[12421]="12,,12421,";g.MUNI_ARRAY[12422]="12,,12422,";g.MUNI_ARRAY[12423]="12,,12423,";g.MUNI_ARRAY[12424]="12,,12424,";g.MUNI_ARRAY[12426]="12,,12426,";g.MUNI_ARRAY[12427]="12,,12427,";g.MUNI_ARRAY[12441]="12,,12441,";g.MUNI_ARRAY[12443]="12,,12443,";g.MUNI_ARRAY[12463]="12,,12463,";g.MUNI_ARRAY[13101]="13,,13101,";g.MUNI_ARRAY[13102]="13,,13102,";g.MUNI_ARRAY[13103]="13,,13103,";g.MUNI_ARRAY[13104]="13,,13104,";g.MUNI_ARRAY[13105]="13,,13105,";g.MUNI_ARRAY[13106]="13,,13106,";g.MUNI_ARRAY[13107]="13,,13107,";g.MUNI_ARRAY[13108]="13,,13108,";g.MUNI_ARRAY[13109]="13,,13109,";g.MUNI_ARRAY[13110]="13,,13110,";g.MUNI_ARRAY[13111]="13,,13111,";g.MUNI_ARRAY[13112]="13,,13112,";g.MUNI_ARRAY[13113]="13,,13113,";g.MUNI_ARRAY[13114]="13,,13114,";g.MUNI_ARRAY[13115]="13,,13115,";g.MUNI_ARRAY[13116]="13,,13116,";g.MUNI_ARRAY[13117]="13,,13117,";g.MUNI_ARRAY[13118]="13,,13118,";g.MUNI_ARRAY[13119]="13,,13119,";g.MUNI_ARRAY[13120]="13,,13120,";g.MUNI_ARRAY[13121]="13,,13121,";g.MUNI_ARRAY[13122]="13,,13122,";g.MUNI_ARRAY[13123]="13,,13123,";g.MUNI_ARRAY[13201]="13,,13201,";g.MUNI_ARRAY[13202]="13,,13202,";g.MUNI_ARRAY[13203]="13,,13203,";g.MUNI_ARRAY[13204]="13,,13204,";g.MUNI_ARRAY[13205]="13,,13205,";g.MUNI_ARRAY[13206]="13,,13206,";g.MUNI_ARRAY[13207]="13,,13207,";g.MUNI_ARRAY[13208]="13,,13208,";g.MUNI_ARRAY[13209]="13,,13209,";g.MUNI_ARRAY[13210]="13,,13210,";g.MUNI_ARRAY[13211]="13,,13211,";g.MUNI_ARRAY[13212]="13,,13212,";g.MUNI_ARRAY[13213]="13,,13213,";g.MUNI_ARRAY[13214]="13,,13214,";g.MUNI_ARRAY[13215]="13,,13215,";g.MUNI_ARRAY[13218]="13,,13218,";g.MUNI_ARRAY[13219]="13,,13219,";g.MUNI_ARRAY[13220]="13,,13220,";g.MUNI_ARRAY[13221]="13,,13221,";g.MUNI_ARRAY[13222]="13,,13222,";g.MUNI_ARRAY[13223]="13,,13223,";g.MUNI_ARRAY[13224]="13,,13224,";g.MUNI_ARRAY[13225]="13,,13225,";g.MUNI_ARRAY[13227]="13,,13227,";g.MUNI_ARRAY[13228]="13,,13228,";g.MUNI_ARRAY[13229]="13,,13229,";g.MUNI_ARRAY[13303]="13,,13303,";g.MUNI_ARRAY[13305]="13,,13305,";g.MUNI_ARRAY[13307]="13,,13307,";g.MUNI_ARRAY[13308]="13,,13308,";g.MUNI_ARRAY[13361]="13,,13361,";g.MUNI_ARRAY[13362]="13,,13362,";g.MUNI_ARRAY[13363]="13,,13363,";g.MUNI_ARRAY[13364]="13,,13364,";g.MUNI_ARRAY[13381]="13,,13381,";g.MUNI_ARRAY[13382]="13,,13382,";g.MUNI_ARRAY[13401]="13,,13401,";g.MUNI_ARRAY[13402]="13,,13402,";g.MUNI_ARRAY[13421]="13,,13421,";g.MUNI_ARRAY[14100]="14,,14100,";g.MUNI_ARRAY[14101]="14,,14101,";g.MUNI_ARRAY[14102]="14,,14102,";g.MUNI_ARRAY[14103]="14,,14103,";g.MUNI_ARRAY[14104]="14,,14104,";g.MUNI_ARRAY[14105]="14,,14105,";g.MUNI_ARRAY[14106]="14,,14106,";g.MUNI_ARRAY[14107]="14,,14107,";g.MUNI_ARRAY[14108]="14,,14108,";g.MUNI_ARRAY[14109]="14,,14109,";g.MUNI_ARRAY[14110]="14,,14110,";g.MUNI_ARRAY[14111]="14,,14111,";g.MUNI_ARRAY[14112]="14,,14112,";g.MUNI_ARRAY[14113]="14,,14113,";g.MUNI_ARRAY[14114]="14,,14114,";g.MUNI_ARRAY[14115]="14,,14115,";g.MUNI_ARRAY[14116]="14,,14116,";g.MUNI_ARRAY[14117]="14,,14117,";g.MUNI_ARRAY[14118]="14,,14118,";g.MUNI_ARRAY[14130]="14,,14130,";g.MUNI_ARRAY[14131]="14,,14131,";g.MUNI_ARRAY[14132]="14,,14132,";g.MUNI_ARRAY[14133]="14,,14133,";g.MUNI_ARRAY[14134]="14,,14134,";g.MUNI_ARRAY[14135]="14,,14135,";g.MUNI_ARRAY[14136]="14,,14136,";g.MUNI_ARRAY[14137]="14,,14137,";g.MUNI_ARRAY[14150]="14,,14150,";g.MUNI_ARRAY[14151]="14,,14151,";g.MUNI_ARRAY[14152]="14,,14152,";g.MUNI_ARRAY[14153]="14,,14153,";g.MUNI_ARRAY[14201]="14,,14201,";g.MUNI_ARRAY[14203]="14,,14203,";g.MUNI_ARRAY[14204]="14,,14204,";g.MUNI_ARRAY[14205]="14,,14205,";g.MUNI_ARRAY[14206]="14,,14206,";g.MUNI_ARRAY[14207]="14,,14207,";g.MUNI_ARRAY[14208]="14,,14208,";g.MUNI_ARRAY[14210]="14,,14210,";g.MUNI_ARRAY[14211]="14,,14211,";g.MUNI_ARRAY[14212]="14,,14212,";g.MUNI_ARRAY[14213]="14,,14213,";g.MUNI_ARRAY[14214]="14,,14214,";g.MUNI_ARRAY[14215]="14,,14215,";g.MUNI_ARRAY[14216]="14,,14216,";g.MUNI_ARRAY[14217]="14,,14217,";g.MUNI_ARRAY[14218]="14,,14218,";g.MUNI_ARRAY[14301]="14,,14301,";g.MUNI_ARRAY[14321]="14,,14321,";g.MUNI_ARRAY[14341]="14,,14341,";g.MUNI_ARRAY[14342]="14,,14342,";g.MUNI_ARRAY[14361]="14,,14361,";g.MUNI_ARRAY[14362]="14,,14362,";g.MUNI_ARRAY[14363]="14,,14363,";g.MUNI_ARRAY[14364]="14,,14364,";g.MUNI_ARRAY[14366]="14,,14366,";g.MUNI_ARRAY[14382]="14,,14382,";g.MUNI_ARRAY[14383]="14,,14383,";g.MUNI_ARRAY[14384]="14,,14384,";g.MUNI_ARRAY[14401]="14,,14401,";g.MUNI_ARRAY[14402]="14,,14402,";g.MUNI_ARRAY[15100]="15,,15100,";g.MUNI_ARRAY[15101]="15,,15101,";g.MUNI_ARRAY[15102]="15,,15102,";g.MUNI_ARRAY[15103]="15,,15103,";g.MUNI_ARRAY[15104]="15,,15104,";g.MUNI_ARRAY[15105]="15,,15105,";g.MUNI_ARRAY[15106]="15,,15106,";g.MUNI_ARRAY[15107]="15,,15107,";g.MUNI_ARRAY[15108]="15,,15108,";g.MUNI_ARRAY[15202]="15,,15202,";g.MUNI_ARRAY[15204]="15,,15204,";g.MUNI_ARRAY[15205]="15,,15205,";g.MUNI_ARRAY[15206]="15,,15206,";g.MUNI_ARRAY[15208]="15,,15208,";g.MUNI_ARRAY[15209]="15,,15209,";g.MUNI_ARRAY[15210]="15,,15210,";g.MUNI_ARRAY[15211]="15,,15211,";g.MUNI_ARRAY[15212]="15,,15212,";g.MUNI_ARRAY[15213]="15,,15213,";g.MUNI_ARRAY[15216]="15,,15216,";g.MUNI_ARRAY[15217]="15,,15217,";g.MUNI_ARRAY[15218]="15,,15218,";g.MUNI_ARRAY[15222]="15,,15222,";g.MUNI_ARRAY[15223]="15,,15223,";g.MUNI_ARRAY[15224]="15,,15224,";g.MUNI_ARRAY[15225]="15,,15225,";g.MUNI_ARRAY[15226]="15,,15226,";g.MUNI_ARRAY[15227]="15,,15227,";g.MUNI_ARRAY[15307]="15,,15307,";g.MUNI_ARRAY[15342]="15,,15342,";g.MUNI_ARRAY[15361]="15,,15361,";g.MUNI_ARRAY[15385]="15,,15385,";g.MUNI_ARRAY[15405]="15,,15405,";g.MUNI_ARRAY[15461]="15,,15461,";g.MUNI_ARRAY[15482]="15,,15482,";g.MUNI_ARRAY[15504]="15,,15504,";g.MUNI_ARRAY[15581]="15,,15581,";g.MUNI_ARRAY[15586]="15,,15586,";g.MUNI_ARRAY[16201]="16,,16201,";g.MUNI_ARRAY[16202]="16,,16202,";g.MUNI_ARRAY[16204]="16,,16204,";g.MUNI_ARRAY[16205]="16,,16205,";g.MUNI_ARRAY[16206]="16,,16206,";g.MUNI_ARRAY[16207]="16,,16207,";g.MUNI_ARRAY[16208]="16,,16208,";g.MUNI_ARRAY[16209]="16,,16209,";g.MUNI_ARRAY[16210]="16,,16210,";g.MUNI_ARRAY[16211]="16,,16211,";g.MUNI_ARRAY[16321]="16,,16321,";g.MUNI_ARRAY[16322]="16,,16322,";g.MUNI_ARRAY[16323]="16,,16323,";g.MUNI_ARRAY[16342]="16,,16342,";g.MUNI_ARRAY[16343]="16,,16343,";g.MUNI_ARRAY[17201]="17,,17201,";g.MUNI_ARRAY[17202]="17,,17202,";g.MUNI_ARRAY[17203]="17,,17203,";g.MUNI_ARRAY[17204]="17,,17204,";g.MUNI_ARRAY[17205]="17,,17205,";g.MUNI_ARRAY[17206]="17,,17206,";g.MUNI_ARRAY[17207]="17,,17207,";g.MUNI_ARRAY[17209]="17,,17209,";g.MUNI_ARRAY[17210]="17,,17210,";g.MUNI_ARRAY[17211]="17,,17211,";g.MUNI_ARRAY[17212]="17,,17212,";g.MUNI_ARRAY[17324]="17,,17324,";g.MUNI_ARRAY[17361]="17,,17361,";g.MUNI_ARRAY[17365]="17,,17365,";g.MUNI_ARRAY[17384]="17,,17384,";g.MUNI_ARRAY[17386]="17,,17386,";g.MUNI_ARRAY[17407]="17,,17407,";g.MUNI_ARRAY[17461]="17,,17461,";g.MUNI_ARRAY[17463]="17,,17463,";g.MUNI_ARRAY[18201]="18,,18201,";g.MUNI_ARRAY[18202]="18,,18202,";g.MUNI_ARRAY[18204]="18,,18204,";g.MUNI_ARRAY[18205]="18,,18205,";g.MUNI_ARRAY[18206]="18,,18206,";g.MUNI_ARRAY[18207]="18,,18207,";g.MUNI_ARRAY[18208]="18,,18208,";g.MUNI_ARRAY[18209]="18,,18209,";g.MUNI_ARRAY[18210]="18,,18210,";g.MUNI_ARRAY[18322]="18,,18322,";g.MUNI_ARRAY[18382]="18,,18382,";g.MUNI_ARRAY[18404]="18,,18404,";g.MUNI_ARRAY[18423]="18,,18423,";g.MUNI_ARRAY[18442]="18,,18442,";g.MUNI_ARRAY[18481]="18,,18481,";g.MUNI_ARRAY[18483]="18,,18483,";g.MUNI_ARRAY[18501]="18,,18501,";g.MUNI_ARRAY[19201]="19,,19201,";g.MUNI_ARRAY[19202]="19,,19202,";g.MUNI_ARRAY[19204]="19,,19204,";g.MUNI_ARRAY[19205]="19,,19205,";g.MUNI_ARRAY[19206]="19,,19206,";g.MUNI_ARRAY[19207]="19,,19207,";g.MUNI_ARRAY[19208]="19,,19208,";g.MUNI_ARRAY[19209]="19,,19209,";g.MUNI_ARRAY[19210]="19,,19210,";g.MUNI_ARRAY[19211]="19,,19211,";g.MUNI_ARRAY[19212]="19,,19212,";g.MUNI_ARRAY[19213]="19,,19213,";g.MUNI_ARRAY[19214]="19,,19214,";g.MUNI_ARRAY[19346]="19,,19346,";g.MUNI_ARRAY[19364]="19,,19364,";g.MUNI_ARRAY[19365]="19,,19365,";g.MUNI_ARRAY[19366]="19,,19366,";g.MUNI_ARRAY[19368]="19,,19368,";g.MUNI_ARRAY[19384]="19,,19384,";g.MUNI_ARRAY[19422]="19,,19422,";g.MUNI_ARRAY[19423]="19,,19423,";g.MUNI_ARRAY[19424]="19,,19424,";g.MUNI_ARRAY[19425]="19,,19425,";g.MUNI_ARRAY[19429]="19,,19429,";g.MUNI_ARRAY[19430]="19,,19430,";g.MUNI_ARRAY[19442]="19,,19442,";g.MUNI_ARRAY[19443]="19,,19443,";g.MUNI_ARRAY[20201]="20,,20201,";g.MUNI_ARRAY[20202]="20,,20202,";g.MUNI_ARRAY[20203]="20,,20203,";g.MUNI_ARRAY[20204]="20,,20204,";g.MUNI_ARRAY[20205]="20,,20205,";g.MUNI_ARRAY[20206]="20,,20206,";g.MUNI_ARRAY[20207]="20,,20207,";g.MUNI_ARRAY[20208]="20,,20208,";g.MUNI_ARRAY[20209]="20,,20209,";g.MUNI_ARRAY[20210]="20,,20210,";g.MUNI_ARRAY[20211]="20,,20211,";g.MUNI_ARRAY[20212]="20,,20212,";g.MUNI_ARRAY[20213]="20,,20213,";g.MUNI_ARRAY[20214]="20,,20214,";g.MUNI_ARRAY[20215]="20,,20215,";g.MUNI_ARRAY[20217]="20,,20217,";g.MUNI_ARRAY[20218]="20,,20218,";g.MUNI_ARRAY[20219]="20,,20219,";g.MUNI_ARRAY[20220]="20,,20220,";g.MUNI_ARRAY[20303]="20,,20303,";g.MUNI_ARRAY[20304]="20,,20304,";g.MUNI_ARRAY[20305]="20,,20305,";g.MUNI_ARRAY[20306]="20,,20306,";g.MUNI_ARRAY[20307]="20,,20307,";g.MUNI_ARRAY[20309]="20,,20309,";g.MUNI_ARRAY[20321]="20,,20321,";g.MUNI_ARRAY[20323]="20,,20323,";g.MUNI_ARRAY[20324]="20,,20324,";g.MUNI_ARRAY[20349]="20,,20349,";g.MUNI_ARRAY[20350]="20,,20350,";g.MUNI_ARRAY[20361]="20,,20361,";g.MUNI_ARRAY[20362]="20,,20362,";g.MUNI_ARRAY[20363]="20,,20363,";g.MUNI_ARRAY[20382]="20,,20382,";g.MUNI_ARRAY[20383]="20,,20383,";g.MUNI_ARRAY[20384]="20,,20384,";g.MUNI_ARRAY[20385]="20,,20385,";g.MUNI_ARRAY[20386]="20,,20386,";g.MUNI_ARRAY[20388]="20,,20388,";g.MUNI_ARRAY[20402]="20,,20402,";g.MUNI_ARRAY[20403]="20,,20403,";g.MUNI_ARRAY[20404]="20,,20404,";g.MUNI_ARRAY[20407]="20,,20407,";g.MUNI_ARRAY[20409]="20,,20409,";g.MUNI_ARRAY[20410]="20,,20410,";g.MUNI_ARRAY[20411]="20,,20411,";g.MUNI_ARRAY[20412]="20,,20412,";g.MUNI_ARRAY[20413]="20,,20413,";g.MUNI_ARRAY[20414]="20,,20414,";g.MUNI_ARRAY[20415]="20,,20415,";g.MUNI_ARRAY[20416]="20,,20416,";g.MUNI_ARRAY[20417]="20,,20417,";g.MUNI_ARRAY[20422]="20,,20422,";g.MUNI_ARRAY[20423]="20,,20423,";g.MUNI_ARRAY[20425]="20,,20425,";g.MUNI_ARRAY[20429]="20,,20429,";g.MUNI_ARRAY[20430]="20,,20430,";g.MUNI_ARRAY[20432]="20,,20432,";g.MUNI_ARRAY[20446]="20,,20446,";g.MUNI_ARRAY[20448]="20,,20448,";g.MUNI_ARRAY[20450]="20,,20450,";g.MUNI_ARRAY[20451]="20,,20451,";g.MUNI_ARRAY[20452]="20,,20452,";g.MUNI_ARRAY[20481]="20,,20481,";g.MUNI_ARRAY[20482]="20,,20482,";g.MUNI_ARRAY[20485]="20,,20485,";g.MUNI_ARRAY[20486]="20,,20486,";g.MUNI_ARRAY[20521]="20,,20521,";g.MUNI_ARRAY[20541]="20,,20541,";g.MUNI_ARRAY[20543]="20,,20543,";g.MUNI_ARRAY[20561]="20,,20561,";g.MUNI_ARRAY[20562]="20,,20562,";g.MUNI_ARRAY[20563]="20,,20563,";g.MUNI_ARRAY[20583]="20,,20583,";g.MUNI_ARRAY[20588]="20,,20588,";g.MUNI_ARRAY[20590]="20,,20590,";g.MUNI_ARRAY[20602]="20,,20602,";g.MUNI_ARRAY[21201]="21,,21201,";g.MUNI_ARRAY[21202]="21,,21202,";g.MUNI_ARRAY[21203]="21,,21203,";g.MUNI_ARRAY[21204]="21,,21204,";g.MUNI_ARRAY[21205]="21,,21205,";g.MUNI_ARRAY[21206]="21,,21206,";g.MUNI_ARRAY[21207]="21,,21207,";g.MUNI_ARRAY[21208]="21,,21208,";g.MUNI_ARRAY[21209]="21,,21209,";g.MUNI_ARRAY[21210]="21,,21210,";g.MUNI_ARRAY[21211]="21,,21211,";g.MUNI_ARRAY[21212]="21,,21212,";g.MUNI_ARRAY[21213]="21,,21213,";g.MUNI_ARRAY[21214]="21,,21214,";g.MUNI_ARRAY[21215]="21,,21215,";g.MUNI_ARRAY[21216]="21,,21216,";g.MUNI_ARRAY[21217]="21,,21217,";g.MUNI_ARRAY[21218]="21,,21218,";g.MUNI_ARRAY[21219]="21,,21219,";g.MUNI_ARRAY[21220]="21,,21220,";g.MUNI_ARRAY[21221]="21,,21221,";g.MUNI_ARRAY[21302]="21,,21302,";g.MUNI_ARRAY[21303]="21,,21303,";g.MUNI_ARRAY[21341]="21,,21341,";g.MUNI_ARRAY[21361]="21,,21361,";g.MUNI_ARRAY[21362]="21,,21362,";g.MUNI_ARRAY[21381]="21,,21381,";g.MUNI_ARRAY[21382]="21,,21382,";g.MUNI_ARRAY[21383]="21,,21383,";g.MUNI_ARRAY[21401]="21,,21401,";g.MUNI_ARRAY[21403]="21,,21403,";g.MUNI_ARRAY[21404]="21,,21404,";g.MUNI_ARRAY[21421]="21,,21421,";g.MUNI_ARRAY[21501]="21,,21501,";g.MUNI_ARRAY[21502]="21,,21502,";g.MUNI_ARRAY[21503]="21,,21503,";g.MUNI_ARRAY[21504]="21,,21504,";g.MUNI_ARRAY[21505]="21,,21505,";g.MUNI_ARRAY[21506]="21,,21506,";g.MUNI_ARRAY[21507]="21,,21507,";g.MUNI_ARRAY[21521]="21,,21521,";g.MUNI_ARRAY[21604]="21,,21604,";g.MUNI_ARRAY[22100]="22,,22100,";g.MUNI_ARRAY[22101]="22,,22101,";g.MUNI_ARRAY[22102]="22,,22102,";g.MUNI_ARRAY[22103]="22,,22103,";g.MUNI_ARRAY[22130]="22,,22130,";g.MUNI_ARRAY[22138]="22,,22138,";g.MUNI_ARRAY[22139]="22,,22139,";g.MUNI_ARRAY[22140]="22,,22140,";g.MUNI_ARRAY[22203]="22,,22203,";g.MUNI_ARRAY[22205]="22,,22205,";g.MUNI_ARRAY[22206]="22,,22206,";g.MUNI_ARRAY[22207]="22,,22207,";g.MUNI_ARRAY[22208]="22,,22208,";g.MUNI_ARRAY[22209]="22,,22209,";g.MUNI_ARRAY[22210]="22,,22210,";g.MUNI_ARRAY[22211]="22,,22211,";g.MUNI_ARRAY[22212]="22,,22212,";g.MUNI_ARRAY[22213]="22,,22213,";g.MUNI_ARRAY[22214]="22,,22214,";g.MUNI_ARRAY[22215]="22,,22215,";g.MUNI_ARRAY[22216]="22,,22216,";g.MUNI_ARRAY[22219]="22,,22219,";g.MUNI_ARRAY[22220]="22,,22220,";g.MUNI_ARRAY[22221]="22,,22221,";g.MUNI_ARRAY[22222]="22,,22222,";g.MUNI_ARRAY[22223]="22,,22223,";g.MUNI_ARRAY[22224]="22,,22224,";g.MUNI_ARRAY[22225]="22,,22225,";g.MUNI_ARRAY[22226]="22,,22226,";g.MUNI_ARRAY[22301]="22,,22301,";g.MUNI_ARRAY[22302]="22,,22302,";g.MUNI_ARRAY[22304]="22,,22304,";g.MUNI_ARRAY[22305]="22,,22305,";g.MUNI_ARRAY[22306]="22,,22306,";g.MUNI_ARRAY[22325]="22,,22325,";g.MUNI_ARRAY[22341]="22,,22341,";g.MUNI_ARRAY[22342]="22,,22342,";g.MUNI_ARRAY[22344]="22,,22344,";g.MUNI_ARRAY[22424]="22,,22424,";g.MUNI_ARRAY[22429]="22,,22429,";g.MUNI_ARRAY[22461]="22,,22461,";g.MUNI_ARRAY[23100]="23,,23100,";g.MUNI_ARRAY[23101]="23,,23101,";g.MUNI_ARRAY[23102]="23,,23102,";g.MUNI_ARRAY[23103]="23,,23103,";g.MUNI_ARRAY[23104]="23,,23104,";g.MUNI_ARRAY[23105]="23,,23105,";g.MUNI_ARRAY[23106]="23,,23106,";g.MUNI_ARRAY[23107]="23,,23107,";g.MUNI_ARRAY[23108]="23,,23108,";g.MUNI_ARRAY[23109]="23,,23109,";g.MUNI_ARRAY[23110]="23,,23110,";g.MUNI_ARRAY[23111]="23,,23111,";g.MUNI_ARRAY[23112]="23,,23112,";g.MUNI_ARRAY[23113]="23,,23113,";g.MUNI_ARRAY[23114]="23,,23114,";g.MUNI_ARRAY[23115]="23,,23115,";g.MUNI_ARRAY[23116]="23,,23116,";g.MUNI_ARRAY[23201]="23,,23201,";g.MUNI_ARRAY[23202]="23,,23202,";g.MUNI_ARRAY[23203]="23,,23203,";g.MUNI_ARRAY[23204]="23,,23204,";g.MUNI_ARRAY[23205]="23,,23205,";g.MUNI_ARRAY[23206]="23,,23206,";g.MUNI_ARRAY[23207]="23,,23207,";g.MUNI_ARRAY[23208]="23,,23208,";g.MUNI_ARRAY[23209]="23,,23209,";g.MUNI_ARRAY[23210]="23,,23210,";g.MUNI_ARRAY[23211]="23,,23211,";g.MUNI_ARRAY[23212]="23,,23212,";g.MUNI_ARRAY[23213]="23,,23213,";g.MUNI_ARRAY[23214]="23,,23214,";g.MUNI_ARRAY[23215]="23,,23215,";g.MUNI_ARRAY[23216]="23,,23216,";g.MUNI_ARRAY[23217]="23,,23217,";g.MUNI_ARRAY[23219]="23,,23219,";g.MUNI_ARRAY[23220]="23,,23220,";g.MUNI_ARRAY[23221]="23,,23221,";g.MUNI_ARRAY[23222]="23,,23222,";g.MUNI_ARRAY[23223]="23,,23223,";g.MUNI_ARRAY[23224]="23,,23224,";g.MUNI_ARRAY[23225]="23,,23225,";g.MUNI_ARRAY[23226]="23,,23226,";g.MUNI_ARRAY[23227]="23,,23227,";g.MUNI_ARRAY[23228]="23,,23228,";g.MUNI_ARRAY[23229]="23,,23229,";g.MUNI_ARRAY[23230]="23,,23230,";g.MUNI_ARRAY[23231]="23,,23231,";g.MUNI_ARRAY[23232]="23,,23232,";g.MUNI_ARRAY[23233]="23,,23233,";g.MUNI_ARRAY[23234]="23,,23234,";g.MUNI_ARRAY[23235]="23,,23235,";g.MUNI_ARRAY[23236]="23,,23236,";g.MUNI_ARRAY[23237]="23,,23237,";g.MUNI_ARRAY[23238]="23,,23238,";g.MUNI_ARRAY[23302]="23,,23302,";g.MUNI_ARRAY[23342]="23,,23342,";g.MUNI_ARRAY[23361]="23,,23361,";g.MUNI_ARRAY[23362]="23,,23362,";g.MUNI_ARRAY[23424]="23,,23424,";g.MUNI_ARRAY[23425]="23,,23425,";g.MUNI_ARRAY[23427]="23,,23427,";g.MUNI_ARRAY[23441]="23,,23441,";g.MUNI_ARRAY[23442]="23,,23442,";g.MUNI_ARRAY[23445]="23,,23445,";g.MUNI_ARRAY[23446]="23,,23446,";g.MUNI_ARRAY[23447]="23,,23447,";g.MUNI_ARRAY[23501]="23,,23501,";g.MUNI_ARRAY[23561]="23,,23561,";g.MUNI_ARRAY[23562]="23,,23562,";g.MUNI_ARRAY[23563]="23,,23563,";g.MUNI_ARRAY[24201]="24,,24201,";g.MUNI_ARRAY[24202]="24,,24202,";g.MUNI_ARRAY[24203]="24,,24203,";g.MUNI_ARRAY[24204]="24,,24204,";g.MUNI_ARRAY[24205]="24,,24205,";g.MUNI_ARRAY[24207]="24,,24207,";g.MUNI_ARRAY[24208]="24,,24208,";g.MUNI_ARRAY[24209]="24,,24209,";g.MUNI_ARRAY[24210]="24,,24210,";g.MUNI_ARRAY[24211]="24,,24211,";g.MUNI_ARRAY[24212]="24,,24212,";g.MUNI_ARRAY[24214]="24,,24214,";g.MUNI_ARRAY[24215]="24,,24215,";g.MUNI_ARRAY[24216]="24,,24216,";g.MUNI_ARRAY[24303]="24,,24303,";g.MUNI_ARRAY[24324]="24,,24324,";g.MUNI_ARRAY[24341]="24,,24341,";g.MUNI_ARRAY[24343]="24,,24343,";g.MUNI_ARRAY[24344]="24,,24344,";g.MUNI_ARRAY[24441]="24,,24441,";g.MUNI_ARRAY[24442]="24,,24442,";g.MUNI_ARRAY[24443]="24,,24443,";g.MUNI_ARRAY[24461]="24,,24461,";g.MUNI_ARRAY[24470]="24,,24470,";g.MUNI_ARRAY[24471]="24,,24471,";g.MUNI_ARRAY[24472]="24,,24472,";g.MUNI_ARRAY[24543]="24,,24543,";g.MUNI_ARRAY[24561]="24,,24561,";g.MUNI_ARRAY[24562]="24,,24562,";g.MUNI_ARRAY[25201]="25,,25201,";g.MUNI_ARRAY[25202]="25,,25202,";g.MUNI_ARRAY[25203]="25,,25203,";g.MUNI_ARRAY[25204]="25,,25204,";g.MUNI_ARRAY[25206]="25,,25206,";g.MUNI_ARRAY[25207]="25,,25207,";g.MUNI_ARRAY[25208]="25,,25208,";g.MUNI_ARRAY[25209]="25,,25209,";g.MUNI_ARRAY[25210]="25,,25210,";g.MUNI_ARRAY[25211]="25,,25211,";g.MUNI_ARRAY[25212]="25,,25212,";g.MUNI_ARRAY[25213]="25,,25213,";g.MUNI_ARRAY[25214]="25,,25214,";g.MUNI_ARRAY[25383]="25,,25383,";g.MUNI_ARRAY[25384]="25,,25384,";g.MUNI_ARRAY[25425]="25,,25425,";g.MUNI_ARRAY[25441]="25,,25441,";g.MUNI_ARRAY[25442]="25,,25442,";g.MUNI_ARRAY[25443]="25,,25443,";g.MUNI_ARRAY[26100]="26,,26100,";g.MUNI_ARRAY[26101]="26,,26101,";g.MUNI_ARRAY[26102]="26,,26102,";g.MUNI_ARRAY[26103]="26,,26103,";g.MUNI_ARRAY[26104]="26,,26104,";g.MUNI_ARRAY[26105]="26,,26105,";g.MUNI_ARRAY[26106]="26,,26106,";g.MUNI_ARRAY[26107]="26,,26107,";g.MUNI_ARRAY[26108]="26,,26108,";g.MUNI_ARRAY[26109]="26,,26109,";g.MUNI_ARRAY[26110]="26,,26110,";g.MUNI_ARRAY[26111]="26,,26111,";g.MUNI_ARRAY[26201]="26,,26201,";g.MUNI_ARRAY[26202]="26,,26202,";g.MUNI_ARRAY[26203]="26,,26203,";g.MUNI_ARRAY[26204]="26,,26204,";g.MUNI_ARRAY[26205]="26,,26205,";g.MUNI_ARRAY[26206]="26,,26206,";g.MUNI_ARRAY[26207]="26,,26207,";g.MUNI_ARRAY[26208]="26,,26208,";g.MUNI_ARRAY[26209]="26,,26209,";g.MUNI_ARRAY[26210]="26,,26210,";g.MUNI_ARRAY[26211]="26,,26211,";g.MUNI_ARRAY[26212]="26,,26212,";g.MUNI_ARRAY[26213]="26,,26213,";g.MUNI_ARRAY[26214]="26,,26214,";g.MUNI_ARRAY[26303]="26,,26303,";g.MUNI_ARRAY[26322]="26,,26322,";g.MUNI_ARRAY[26343]="26,,26343,";g.MUNI_ARRAY[26344]="26,,26344,";g.MUNI_ARRAY[26364]="26,,26364,";g.MUNI_ARRAY[26365]="26,,26365,";g.MUNI_ARRAY[26366]="26,,26366,";g.MUNI_ARRAY[26367]="26,,26367,";g.MUNI_ARRAY[26407]="26,,26407,";g.MUNI_ARRAY[26463]="26,,26463,";g.MUNI_ARRAY[26465]="26,,26465,";g.MUNI_ARRAY[27100]="27,,27100,";g.MUNI_ARRAY[27102]="27,,27102,";g.MUNI_ARRAY[27103]="27,,27103,";g.MUNI_ARRAY[27104]="27,,27104,";g.MUNI_ARRAY[27106]="27,,27106,";g.MUNI_ARRAY[27107]="27,,27107,";g.MUNI_ARRAY[27108]="27,,27108,";g.MUNI_ARRAY[27109]="27,,27109,";g.MUNI_ARRAY[27111]="27,,27111,";g.MUNI_ARRAY[27113]="27,,27113,";g.MUNI_ARRAY[27114]="27,,27114,";g.MUNI_ARRAY[27115]="27,,27115,";g.MUNI_ARRAY[27116]="27,,27116,";g.MUNI_ARRAY[27117]="27,,27117,";g.MUNI_ARRAY[27118]="27,,27118,";g.MUNI_ARRAY[27119]="27,,27119,";g.MUNI_ARRAY[27120]="27,,27120,";g.MUNI_ARRAY[27121]="27,,27121,";g.MUNI_ARRAY[27122]="27,,27122,";g.MUNI_ARRAY[27123]="27,,27123,";g.MUNI_ARRAY[27124]="27,,27124,";g.MUNI_ARRAY[27125]="27,,27125,";g.MUNI_ARRAY[27126]="27,,27126,";g.MUNI_ARRAY[27127]="27,,27127,";g.MUNI_ARRAY[27128]="27,,27128,";g.MUNI_ARRAY[27140]="27,,27140,";g.MUNI_ARRAY[27141]="27,,27141,";g.MUNI_ARRAY[27142]="27,,27142,";g.MUNI_ARRAY[27143]="27,,27143,";g.MUNI_ARRAY[27144]="27,,27144,";g.MUNI_ARRAY[27145]="27,,27145,";g.MUNI_ARRAY[27146]="27,,27146,";g.MUNI_ARRAY[27147]="27,,27147,";g.MUNI_ARRAY[27202]="27,,27202,";g.MUNI_ARRAY[27203]="27,,27203,";g.MUNI_ARRAY[27204]="27,,27204,";g.MUNI_ARRAY[27205]="27,,27205,";g.MUNI_ARRAY[27206]="27,,27206,";g.MUNI_ARRAY[27207]="27,,27207,";g.MUNI_ARRAY[27208]="27,,27208,";g.MUNI_ARRAY[27209]="27,,27209,";g.MUNI_ARRAY[27210]="27,,27210,";g.MUNI_ARRAY[27211]="27,,27211,";g.MUNI_ARRAY[27212]="27,,27212,";g.MUNI_ARRAY[27213]="27,,27213,";g.MUNI_ARRAY[27214]="27,,27214,";g.MUNI_ARRAY[27215]="27,,27215,";g.MUNI_ARRAY[27216]="27,,27216,";g.MUNI_ARRAY[27217]="27,,27217,";g.MUNI_ARRAY[27218]="27,,27218,";g.MUNI_ARRAY[27219]="27,,27219,";g.MUNI_ARRAY[27220]="27,,27220,";g.MUNI_ARRAY[27221]="27,,27221,";g.MUNI_ARRAY[27222]="27,,27222,";g.MUNI_ARRAY[27223]="27,,27223,";g.MUNI_ARRAY[27224]="27,,27224,";g.MUNI_ARRAY[27225]="27,,27225,";g.MUNI_ARRAY[27226]="27,,27226,";g.MUNI_ARRAY[27227]="27,,27227,";g.MUNI_ARRAY[27228]="27,,27228,";g.MUNI_ARRAY[27229]="27,,27229,";g.MUNI_ARRAY[27230]="27,,27230,";g.MUNI_ARRAY[27231]="27,,27231,";g.MUNI_ARRAY[27232]="27,,27232,";g.MUNI_ARRAY[27301]="27,,27301,";g.MUNI_ARRAY[27321]="27,,27321,";g.MUNI_ARRAY[27322]="27,,27322,";g.MUNI_ARRAY[27341]="27,,27341,";g.MUNI_ARRAY[27361]="27,,27361,";g.MUNI_ARRAY[27362]="27,,27362,";g.MUNI_ARRAY[27366]="27,,27366,";g.MUNI_ARRAY[27381]="27,,27381,";g.MUNI_ARRAY[27382]="27,,27382,";g.MUNI_ARRAY[27383]="27,,27383,";g.MUNI_ARRAY[28100]="28,,28100,";g.MUNI_ARRAY[28101]="28,,28101,";g.MUNI_ARRAY[28102]="28,,28102,";g.MUNI_ARRAY[28105]="28,,28105,";g.MUNI_ARRAY[28106]="28,,28106,";g.MUNI_ARRAY[28107]="28,,28107,";g.MUNI_ARRAY[28108]="28,,28108,";g.MUNI_ARRAY[28109]="28,,28109,";g.MUNI_ARRAY[28110]="28,,28110,";g.MUNI_ARRAY[28111]="28,,28111,";g.MUNI_ARRAY[28201]="28,,28201,";g.MUNI_ARRAY[28202]="28,,28202,";g.MUNI_ARRAY[28203]="28,,28203,";g.MUNI_ARRAY[28204]="28,,28204,";g.MUNI_ARRAY[28205]="28,,28205,";g.MUNI_ARRAY[28206]="28,,28206,";g.MUNI_ARRAY[28207]="28,,28207,";g.MUNI_ARRAY[28208]="28,,28208,";g.MUNI_ARRAY[28209]="28,,28209,";g.MUNI_ARRAY[28210]="28,,28210,";g.MUNI_ARRAY[28212]="28,,28212,";g.MUNI_ARRAY[28213]="28,,28213,";g.MUNI_ARRAY[28214]="28,,28214,";g.MUNI_ARRAY[28215]="28,,28215,";g.MUNI_ARRAY[28216]="28,,28216,";g.MUNI_ARRAY[28217]="28,,28217,";g.MUNI_ARRAY[28218]="28,,28218,";g.MUNI_ARRAY[28219]="28,,28219,";g.MUNI_ARRAY[28220]="28,,28220,";g.MUNI_ARRAY[28221]="28,,28221,";g.MUNI_ARRAY[28222]="28,,28222,";g.MUNI_ARRAY[28223]="28,,28223,";g.MUNI_ARRAY[28224]="28,,28224,";g.MUNI_ARRAY[28225]="28,,28225,";g.MUNI_ARRAY[28226]="28,,28226,";g.MUNI_ARRAY[28227]="28,,28227,";g.MUNI_ARRAY[28228]="28,,28228,";g.MUNI_ARRAY[28229]="28,,28229,";g.MUNI_ARRAY[28301]="28,,28301,";g.MUNI_ARRAY[28365]="28,,28365,";g.MUNI_ARRAY[28381]="28,,28381,";g.MUNI_ARRAY[28382]="28,,28382,";g.MUNI_ARRAY[28442]="28,,28442,";g.MUNI_ARRAY[28443]="28,,28443,";g.MUNI_ARRAY[28446]="28,,28446,";g.MUNI_ARRAY[28464]="28,,28464,";g.MUNI_ARRAY[28481]="28,,28481,";g.MUNI_ARRAY[28501]="28,,28501,";g.MUNI_ARRAY[28585]="28,,28585,";g.MUNI_ARRAY[28586]="28,,28586,";g.MUNI_ARRAY[29201]="29,,29201,";g.MUNI_ARRAY[29202]="29,,29202,";g.MUNI_ARRAY[29203]="29,,29203,";g.MUNI_ARRAY[29204]="29,,29204,";g.MUNI_ARRAY[29205]="29,,29205,";g.MUNI_ARRAY[29206]="29,,29206,";g.MUNI_ARRAY[29207]="29,,29207,";g.MUNI_ARRAY[29208]="29,,29208,";g.MUNI_ARRAY[29209]="29,,29209,";g.MUNI_ARRAY[29210]="29,,29210,";g.MUNI_ARRAY[29211]="29,,29211,";g.MUNI_ARRAY[29212]="29,,29212,";g.MUNI_ARRAY[29322]="29,,29322,";g.MUNI_ARRAY[29342]="29,,29342,";g.MUNI_ARRAY[29343]="29,,29343,";g.MUNI_ARRAY[29344]="29,,29344,";g.MUNI_ARRAY[29345]="29,,29345,";g.MUNI_ARRAY[29361]="29,,29361,";g.MUNI_ARRAY[29362]="29,,29362,";g.MUNI_ARRAY[29363]="29,,29363,";g.MUNI_ARRAY[29385]="29,,29385,";g.MUNI_ARRAY[29386]="29,,29386,";g.MUNI_ARRAY[29401]="29,,29401,";g.MUNI_ARRAY[29402]="29,,29402,";g.MUNI_ARRAY[29424]="29,,29424,";g.MUNI_ARRAY[29425]="29,,29425,";g.MUNI_ARRAY[29426]="29,,29426,";g.MUNI_ARRAY[29427]="29,,29427,";g.MUNI_ARRAY[29441]="29,,29441,";g.MUNI_ARRAY[29442]="29,,29442,";g.MUNI_ARRAY[29443]="29,,29443,";g.MUNI_ARRAY[29444]="29,,29444,";g.MUNI_ARRAY[29446]="29,,29446,";g.MUNI_ARRAY[29447]="29,,29447,";g.MUNI_ARRAY[29449]="29,,29449,";g.MUNI_ARRAY[29450]="29,,29450,";g.MUNI_ARRAY[29451]="29,,29451,";g.MUNI_ARRAY[29452]="29,,29452,";g.MUNI_ARRAY[29453]="29,,29453,";g.MUNI_ARRAY[30201]="30,,30201,";g.MUNI_ARRAY[30202]="30,,30202,";g.MUNI_ARRAY[30203]="30,,30203,";g.MUNI_ARRAY[30204]="30,,30204,";g.MUNI_ARRAY[30205]="30,,30205,";g.MUNI_ARRAY[30206]="30,,30206,";g.MUNI_ARRAY[30207]="30,,30207,";g.MUNI_ARRAY[30208]="30,,30208,";g.MUNI_ARRAY[30209]="30,,30209,";g.MUNI_ARRAY[30304]="30,,30304,";g.MUNI_ARRAY[30341]="30,,30341,";g.MUNI_ARRAY[30343]="30,,30343,";g.MUNI_ARRAY[30344]="30,,30344,";g.MUNI_ARRAY[30361]="30,,30361,";g.MUNI_ARRAY[30362]="30,,30362,";g.MUNI_ARRAY[30366]="30,,30366,";g.MUNI_ARRAY[30381]="30,,30381,";g.MUNI_ARRAY[30382]="30,,30382,";g.MUNI_ARRAY[30383]="30,,30383,";g.MUNI_ARRAY[30390]="30,,30390,";g.MUNI_ARRAY[30391]="30,,30391,";g.MUNI_ARRAY[30392]="30,,30392,";g.MUNI_ARRAY[30401]="30,,30401,";g.MUNI_ARRAY[30404]="30,,30404,";g.MUNI_ARRAY[30406]="30,,30406,";g.MUNI_ARRAY[30421]="30,,30421,";g.MUNI_ARRAY[30422]="30,,30422,";g.MUNI_ARRAY[30424]="30,,30424,";g.MUNI_ARRAY[30427]="30,,30427,";g.MUNI_ARRAY[30428]="30,,30428,";g.MUNI_ARRAY[31201]="31,,31201,";g.MUNI_ARRAY[31202]="31,,31202,";g.MUNI_ARRAY[31203]="31,,31203,";g.MUNI_ARRAY[31204]="31,,31204,";g.MUNI_ARRAY[31302]="31,,31302,";g.MUNI_ARRAY[31325]="31,,31325,";g.MUNI_ARRAY[31328]="31,,31328,";g.MUNI_ARRAY[31329]="31,,31329,";g.MUNI_ARRAY[31364]="31,,31364,";g.MUNI_ARRAY[31370]="31,,31370,";g.MUNI_ARRAY[31371]="31,,31371,";g.MUNI_ARRAY[31372]="31,,31372,";g.MUNI_ARRAY[31384]="31,,31384,";g.MUNI_ARRAY[31386]="31,,31386,";g.MUNI_ARRAY[31389]="31,,31389,";g.MUNI_ARRAY[31390]="31,,31390,";g.MUNI_ARRAY[31401]="31,,31401,";g.MUNI_ARRAY[31402]="31,,31402,";g.MUNI_ARRAY[31403]="31,,31403,";g.MUNI_ARRAY[32201]="32,,32201,";g.MUNI_ARRAY[32202]="32,,32202,";g.MUNI_ARRAY[32203]="32,,32203,";g.MUNI_ARRAY[32204]="32,,32204,";g.MUNI_ARRAY[32205]="32,,32205,";g.MUNI_ARRAY[32206]="32,,32206,";g.MUNI_ARRAY[32207]="32,,32207,";g.MUNI_ARRAY[32209]="32,,32209,";g.MUNI_ARRAY[32343]="32,,32343,";g.MUNI_ARRAY[32386]="32,,32386,";g.MUNI_ARRAY[32441]="32,,32441,";g.MUNI_ARRAY[32448]="32,,32448,";g.MUNI_ARRAY[32449]="32,,32449,";g.MUNI_ARRAY[32501]="32,,32501,";g.MUNI_ARRAY[32505]="32,,32505,";g.MUNI_ARRAY[32525]="32,,32525,";g.MUNI_ARRAY[32526]="32,,32526,";g.MUNI_ARRAY[32527]="32,,32527,";g.MUNI_ARRAY[32528]="32,,32528,";g.MUNI_ARRAY[33100]="33,,33100,";g.MUNI_ARRAY[33101]="33,,33101,";g.MUNI_ARRAY[33102]="33,,33102,";g.MUNI_ARRAY[33103]="33,,33103,";g.MUNI_ARRAY[33104]="33,,33104,";g.MUNI_ARRAY[33202]="33,,33202,";g.MUNI_ARRAY[33203]="33,,33203,";g.MUNI_ARRAY[33204]="33,,33204,";g.MUNI_ARRAY[33205]="33,,33205,";g.MUNI_ARRAY[33207]="33,,33207,";g.MUNI_ARRAY[33208]="33,,33208,";g.MUNI_ARRAY[33209]="33,,33209,";g.MUNI_ARRAY[33210]="33,,33210,";g.MUNI_ARRAY[33211]="33,,33211,";g.MUNI_ARRAY[33212]="33,,33212,";g.MUNI_ARRAY[33213]="33,,33213,";g.MUNI_ARRAY[33214]="33,,33214,";g.MUNI_ARRAY[33215]="33,,33215,";g.MUNI_ARRAY[33216]="33,,33216,";g.MUNI_ARRAY[33346]="33,,33346,";g.MUNI_ARRAY[33423]="33,,33423,";g.MUNI_ARRAY[33445]="33,,33445,";g.MUNI_ARRAY[33461]="33,,33461,";g.MUNI_ARRAY[33586]="33,,33586,";g.MUNI_ARRAY[33606]="33,,33606,";g.MUNI_ARRAY[33622]="33,,33622,";g.MUNI_ARRAY[33623]="33,,33623,";g.MUNI_ARRAY[33643]="33,,33643,";g.MUNI_ARRAY[33663]="33,,33663,";g.MUNI_ARRAY[33666]="33,,33666,";g.MUNI_ARRAY[33681]="33,,33681,";g.MUNI_ARRAY[34100]="34,,34100,";g.MUNI_ARRAY[34101]="34,,34101,";g.MUNI_ARRAY[34102]="34,,34102,";g.MUNI_ARRAY[34103]="34,,34103,";g.MUNI_ARRAY[34104]="34,,34104,";g.MUNI_ARRAY[34105]="34,,34105,";g.MUNI_ARRAY[34106]="34,,34106,";g.MUNI_ARRAY[34107]="34,,34107,";g.MUNI_ARRAY[34108]="34,,34108,";g.MUNI_ARRAY[34202]="34,,34202,";g.MUNI_ARRAY[34203]="34,,34203,";g.MUNI_ARRAY[34204]="34,,34204,";g.MUNI_ARRAY[34205]="34,,34205,";g.MUNI_ARRAY[34207]="34,,34207,";g.MUNI_ARRAY[34208]="34,,34208,";g.MUNI_ARRAY[34209]="34,,34209,";g.MUNI_ARRAY[34210]="34,,34210,";g.MUNI_ARRAY[34211]="34,,34211,";g.MUNI_ARRAY[34212]="34,,34212,";g.MUNI_ARRAY[34213]="34,,34213,";g.MUNI_ARRAY[34214]="34,,34214,";g.MUNI_ARRAY[34215]="34,,34215,";g.MUNI_ARRAY[34302]="34,,34302,";g.MUNI_ARRAY[34304]="34,,34304,";g.MUNI_ARRAY[34307]="34,,34307,";g.MUNI_ARRAY[34309]="34,,34309,";g.MUNI_ARRAY[34368]="34,,34368,";g.MUNI_ARRAY[34369]="34,,34369,";g.MUNI_ARRAY[34431]="34,,34431,";g.MUNI_ARRAY[34462]="34,,34462,";g.MUNI_ARRAY[34545]="34,,34545,";g.MUNI_ARRAY[35201]="35,,35201,";g.MUNI_ARRAY[35202]="35,,35202,";g.MUNI_ARRAY[35203]="35,,35203,";g.MUNI_ARRAY[35204]="35,,35204,";g.MUNI_ARRAY[35206]="35,,35206,";g.MUNI_ARRAY[35207]="35,,35207,";g.MUNI_ARRAY[35208]="35,,35208,";g.MUNI_ARRAY[35210]="35,,35210,";g.MUNI_ARRAY[35211]="35,,35211,";g.MUNI_ARRAY[35212]="35,,35212,";g.MUNI_ARRAY[35213]="35,,35213,";g.MUNI_ARRAY[35215]="35,,35215,";g.MUNI_ARRAY[35216]="35,,35216,";g.MUNI_ARRAY[35305]="35,,35305,";g.MUNI_ARRAY[35321]="35,,35321,";g.MUNI_ARRAY[35341]="35,,35341,";g.MUNI_ARRAY[35343]="35,,35343,";g.MUNI_ARRAY[35344]="35,,35344,";g.MUNI_ARRAY[35502]="35,,35502,";g.MUNI_ARRAY[36201]="36,,36201,";g.MUNI_ARRAY[36202]="36,,36202,";g.MUNI_ARRAY[36203]="36,,36203,";g.MUNI_ARRAY[36204]="36,,36204,";g.MUNI_ARRAY[36205]="36,,36205,";g.MUNI_ARRAY[36206]="36,,36206,";g.MUNI_ARRAY[36207]="36,,36207,";g.MUNI_ARRAY[36208]="36,,36208,";g.MUNI_ARRAY[36301]="36,,36301,";g.MUNI_ARRAY[36302]="36,,36302,";g.MUNI_ARRAY[36321]="36,,36321,";g.MUNI_ARRAY[36341]="36,,36341,";g.MUNI_ARRAY[36342]="36,,36342,";g.MUNI_ARRAY[36368]="36,,36368,";g.MUNI_ARRAY[36383]="36,,36383,";g.MUNI_ARRAY[36387]="36,,36387,";g.MUNI_ARRAY[36388]="36,,36388,";g.MUNI_ARRAY[36401]="36,,36401,";g.MUNI_ARRAY[36402]="36,,36402,";g.MUNI_ARRAY[36403]="36,,36403,";g.MUNI_ARRAY[36404]="36,,36404,";g.MUNI_ARRAY[36405]="36,,36405,";g.MUNI_ARRAY[36468]="36,,36468,";g.MUNI_ARRAY[36489]="36,,36489,";g.MUNI_ARRAY[37201]="37,,37201,";g.MUNI_ARRAY[37202]="37,,37202,";g.MUNI_ARRAY[37203]="37,,37203,";g.MUNI_ARRAY[37204]="37,,37204,";g.MUNI_ARRAY[37205]="37,,37205,";g.MUNI_ARRAY[37206]="37,,37206,";g.MUNI_ARRAY[37207]="37,,37207,";g.MUNI_ARRAY[37208]="37,,37208,";g.MUNI_ARRAY[37322]="37,,37322,";g.MUNI_ARRAY[37324]="37,,37324,";g.MUNI_ARRAY[37341]="37,,37341,";g.MUNI_ARRAY[37364]="37,,37364,";g.MUNI_ARRAY[37386]="37,,37386,";g.MUNI_ARRAY[37387]="37,,37387,";g.MUNI_ARRAY[37403]="37,,37403,";g.MUNI_ARRAY[37404]="37,,37404,";g.MUNI_ARRAY[37406]="37,,37406,";g.MUNI_ARRAY[38201]="38,,38201,";g.MUNI_ARRAY[38202]="38,,38202,";g.MUNI_ARRAY[38203]="38,,38203,";g.MUNI_ARRAY[38204]="38,,38204,";g.MUNI_ARRAY[38205]="38,,38205,";g.MUNI_ARRAY[38206]="38,,38206,";g.MUNI_ARRAY[38207]="38,,38207,";g.MUNI_ARRAY[38210]="38,,38210,";g.MUNI_ARRAY[38213]="38,,38213,";g.MUNI_ARRAY[38214]="38,,38214,";g.MUNI_ARRAY[38215]="38,,38215,";g.MUNI_ARRAY[38356]="38,,38356,";g.MUNI_ARRAY[38386]="38,,38386,";g.MUNI_ARRAY[38401]="38,,38401,";g.MUNI_ARRAY[38402]="38,,38402,";g.MUNI_ARRAY[38422]="38,,38422,";g.MUNI_ARRAY[38442]="38,,38442,";g.MUNI_ARRAY[38484]="38,,38484,";g.MUNI_ARRAY[38488]="38,,38488,";g.MUNI_ARRAY[38506]="38,,38506,";g.MUNI_ARRAY[39201]="39,,39201,";g.MUNI_ARRAY[39202]="39,,39202,";g.MUNI_ARRAY[39203]="39,,39203,";g.MUNI_ARRAY[39204]="39,,39204,";g.MUNI_ARRAY[39205]="39,,39205,";g.MUNI_ARRAY[39206]="39,,39206,";g.MUNI_ARRAY[39208]="39,,39208,";g.MUNI_ARRAY[39209]="39,,39209,";g.MUNI_ARRAY[39210]="39,,39210,";g.MUNI_ARRAY[39211]="39,,39211,";g.MUNI_ARRAY[39212]="39,,39212,";g.MUNI_ARRAY[39301]="39,,39301,";g.MUNI_ARRAY[39302]="39,,39302,";g.MUNI_ARRAY[39303]="39,,39303,";g.MUNI_ARRAY[39304]="39,,39304,";g.MUNI_ARRAY[39305]="39,,39305,";g.MUNI_ARRAY[39306]="39,,39306,";g.MUNI_ARRAY[39307]="39,,39307,";g.MUNI_ARRAY[39341]="39,,39341,";g.MUNI_ARRAY[39344]="39,,39344,";g.MUNI_ARRAY[39363]="39,,39363,";g.MUNI_ARRAY[39364]="39,,39364,";g.MUNI_ARRAY[39386]="39,,39386,";g.MUNI_ARRAY[39387]="39,,39387,";g.MUNI_ARRAY[39401]="39,,39401,";g.MUNI_ARRAY[39402]="39,,39402,";g.MUNI_ARRAY[39403]="39,,39403,";g.MUNI_ARRAY[39405]="39,,39405,";g.MUNI_ARRAY[39410]="39,,39410,";g.MUNI_ARRAY[39411]="39,,39411,";g.MUNI_ARRAY[39412]="39,,39412,";g.MUNI_ARRAY[39424]="39,,39424,";g.MUNI_ARRAY[39427]="39,,39427,";g.MUNI_ARRAY[39428]="39,,39428,";g.MUNI_ARRAY[40100]="40,,40100,";g.MUNI_ARRAY[40101]="40,,40101,";g.MUNI_ARRAY[40103]="40,,40103,";g.MUNI_ARRAY[40105]="40,,40105,";g.MUNI_ARRAY[40106]="40,,40106,";g.MUNI_ARRAY[40107]="40,,40107,";g.MUNI_ARRAY[40108]="40,,40108,";g.MUNI_ARRAY[40109]="40,,40109,";g.MUNI_ARRAY[40130]="40,,40130,";g.MUNI_ARRAY[40131]="40,,40131,";g.MUNI_ARRAY[40132]="40,,40132,";g.MUNI_ARRAY[40133]="40,,40133,";g.MUNI_ARRAY[40134]="40,,40134,";g.MUNI_ARRAY[40135]="40,,40135,";g.MUNI_ARRAY[40136]="40,,40136,";g.MUNI_ARRAY[40137]="40,,40137,";g.MUNI_ARRAY[40202]="40,,40202,";g.MUNI_ARRAY[40203]="40,,40203,";g.MUNI_ARRAY[40204]="40,,40204,";g.MUNI_ARRAY[40205]="40,,40205,";g.MUNI_ARRAY[40206]="40,,40206,";g.MUNI_ARRAY[40207]="40,,40207,";g.MUNI_ARRAY[40210]="40,,40210,";g.MUNI_ARRAY[40211]="40,,40211,";g.MUNI_ARRAY[40212]="40,,40212,";g.MUNI_ARRAY[40213]="40,,40213,";g.MUNI_ARRAY[40214]="40,,40214,";g.MUNI_ARRAY[40215]="40,,40215,";g.MUNI_ARRAY[40216]="40,,40216,";g.MUNI_ARRAY[40217]="40,,40217,";g.MUNI_ARRAY[40218]="40,,40218,";g.MUNI_ARRAY[40219]="40,,40219,";g.MUNI_ARRAY[40220]="40,,40220,";g.MUNI_ARRAY[40221]="40,,40221,";g.MUNI_ARRAY[40223]="40,,40223,";g.MUNI_ARRAY[40224]="40,,40224,";g.MUNI_ARRAY[40225]="40,,40225,";g.MUNI_ARRAY[40226]="40,,40226,";g.MUNI_ARRAY[40227]="40,,40227,";g.MUNI_ARRAY[40228]="40,,40228,";g.MUNI_ARRAY[40229]="40,,40229,";g.MUNI_ARRAY[40230]="40,,40230,";g.MUNI_ARRAY[40231]="40,,40231,";g.MUNI_ARRAY[40341]="40,,40341,";g.MUNI_ARRAY[40342]="40,,40342,";g.MUNI_ARRAY[40343]="40,,40343,";g.MUNI_ARRAY[40344]="40,,40344,";g.MUNI_ARRAY[40345]="40,,40345,";g.MUNI_ARRAY[40348]="40,,40348,";g.MUNI_ARRAY[40349]="40,,40349,";g.MUNI_ARRAY[40381]="40,,40381,";g.MUNI_ARRAY[40382]="40,,40382,";g.MUNI_ARRAY[40383]="40,,40383,";g.MUNI_ARRAY[40384]="40,,40384,";g.MUNI_ARRAY[40401]="40,,40401,";g.MUNI_ARRAY[40402]="40,,40402,";g.MUNI_ARRAY[40421]="40,,40421,";g.MUNI_ARRAY[40447]="40,,40447,";g.MUNI_ARRAY[40448]="40,,40448,";g.MUNI_ARRAY[40503]="40,,40503,";g.MUNI_ARRAY[40522]="40,,40522,";g.MUNI_ARRAY[40544]="40,,40544,";g.MUNI_ARRAY[40601]="40,,40601,";g.MUNI_ARRAY[40602]="40,,40602,";g.MUNI_ARRAY[40604]="40,,40604,";g.MUNI_ARRAY[40605]="40,,40605,";g.MUNI_ARRAY[40608]="40,,40608,";g.MUNI_ARRAY[40609]="40,,40609,";g.MUNI_ARRAY[40610]="40,,40610,";g.MUNI_ARRAY[40621]="40,,40621,";g.MUNI_ARRAY[40625]="40,,40625,";g.MUNI_ARRAY[40642]="40,,40642,";g.MUNI_ARRAY[40646]="40,,40646,";g.MUNI_ARRAY[40647]="40,,40647,";g.MUNI_ARRAY[41201]="41,,41201,";g.MUNI_ARRAY[41202]="41,,41202,";g.MUNI_ARRAY[41203]="41,,41203,";g.MUNI_ARRAY[41204]="41,,41204,";g.MUNI_ARRAY[41205]="41,,41205,";g.MUNI_ARRAY[41206]="41,,41206,";g.MUNI_ARRAY[41207]="41,,41207,";g.MUNI_ARRAY[41208]="41,,41208,";g.MUNI_ARRAY[41209]="41,,41209,";g.MUNI_ARRAY[41210]="41,,41210,";g.MUNI_ARRAY[41327]="41,,41327,";g.MUNI_ARRAY[41341]="41,,41341,";g.MUNI_ARRAY[41345]="41,,41345,";g.MUNI_ARRAY[41346]="41,,41346,";g.MUNI_ARRAY[41387]="41,,41387,";g.MUNI_ARRAY[41401]="41,,41401,";g.MUNI_ARRAY[41423]="41,,41423,";g.MUNI_ARRAY[41424]="41,,41424,";g.MUNI_ARRAY[41425]="41,,41425,";g.MUNI_ARRAY[41441]="41,,41441,";g.MUNI_ARRAY[42201]="42,,42201,";g.MUNI_ARRAY[42202]="42,,42202,";g.MUNI_ARRAY[42203]="42,,42203,";g.MUNI_ARRAY[42204]="42,,42204,";g.MUNI_ARRAY[42205]="42,,42205,";g.MUNI_ARRAY[42207]="42,,42207,";g.MUNI_ARRAY[42208]="42,,42208,";g.MUNI_ARRAY[42209]="42,,42209,";g.MUNI_ARRAY[42210]="42,,42210,";g.MUNI_ARRAY[42211]="42,,42211,";g.MUNI_ARRAY[42212]="42,,42212,";g.MUNI_ARRAY[42213]="42,,42213,";g.MUNI_ARRAY[42214]="42,,42214,";g.MUNI_ARRAY[42307]="42,,42307,";g.MUNI_ARRAY[42308]="42,,42308,";g.MUNI_ARRAY[42321]="42,,42321,";g.MUNI_ARRAY[42322]="42,,42322,";g.MUNI_ARRAY[42323]="42,,42323,";g.MUNI_ARRAY[42383]="42,,42383,";g.MUNI_ARRAY[42391]="42,,42391,";g.MUNI_ARRAY[42411]="42,,42411,";g.MUNI_ARRAY[43100]="43,,43100,";g.MUNI_ARRAY[43101]="43,,43101,";g.MUNI_ARRAY[43102]="43,,43102,";g.MUNI_ARRAY[43103]="43,,43103,";g.MUNI_ARRAY[43104]="43,,43104,";g.MUNI_ARRAY[43105]="43,,43105,";g.MUNI_ARRAY[43202]="43,,43202,";g.MUNI_ARRAY[43203]="43,,43203,";g.MUNI_ARRAY[43204]="43,,43204,";g.MUNI_ARRAY[43205]="43,,43205,";g.MUNI_ARRAY[43206]="43,,43206,";g.MUNI_ARRAY[43208]="43,,43208,";g.MUNI_ARRAY[43210]="43,,43210,";g.MUNI_ARRAY[43211]="43,,43211,";g.MUNI_ARRAY[43212]="43,,43212,";g.MUNI_ARRAY[43213]="43,,43213,";g.MUNI_ARRAY[43214]="43,,43214,";g.MUNI_ARRAY[43215]="43,,43215,";g.MUNI_ARRAY[43216]="43,,43216,";g.MUNI_ARRAY[43348]="43,,43348,";g.MUNI_ARRAY[43364]="43,,43364,";g.MUNI_ARRAY[43367]="43,,43367,";g.MUNI_ARRAY[43368]="43,,43368,";g.MUNI_ARRAY[43369]="43,,43369,";g.MUNI_ARRAY[43403]="43,,43403,";g.MUNI_ARRAY[43404]="43,,43404,";g.MUNI_ARRAY[43423]="43,,43423,";g.MUNI_ARRAY[43424]="43,,43424,";g.MUNI_ARRAY[43425]="43,,43425,";g.MUNI_ARRAY[43428]="43,,43428,";g.MUNI_ARRAY[43432]="43,,43432,";g.MUNI_ARRAY[43433]="43,,43433,";g.MUNI_ARRAY[43441]="43,,43441,";g.MUNI_ARRAY[43442]="43,,43442,";g.MUNI_ARRAY[43443]="43,,43443,";g.MUNI_ARRAY[43444]="43,,43444,";g.MUNI_ARRAY[43447]="43,,43447,";g.MUNI_ARRAY[43468]="43,,43468,";g.MUNI_ARRAY[43482]="43,,43482,";g.MUNI_ARRAY[43484]="43,,43484,";g.MUNI_ARRAY[43501]="43,,43501,";g.MUNI_ARRAY[43505]="43,,43505,";g.MUNI_ARRAY[43506]="43,,43506,";g.MUNI_ARRAY[43507]="43,,43507,";g.MUNI_ARRAY[43510]="43,,43510,";g.MUNI_ARRAY[43511]="43,,43511,";g.MUNI_ARRAY[43512]="43,,43512,";g.MUNI_ARRAY[43513]="43,,43513,";g.MUNI_ARRAY[43514]="43,,43514,";g.MUNI_ARRAY[43531]="43,,43531,";g.MUNI_ARRAY[44201]="44,,44201,";g.MUNI_ARRAY[44202]="44,,44202,";g.MUNI_ARRAY[44203]="44,,44203,";g.MUNI_ARRAY[44204]="44,,44204,";g.MUNI_ARRAY[44205]="44,,44205,";g.MUNI_ARRAY[44206]="44,,44206,";g.MUNI_ARRAY[44207]="44,,44207,";g.MUNI_ARRAY[44208]="44,,44208,";g.MUNI_ARRAY[44209]="44,,44209,";g.MUNI_ARRAY[44210]="44,,44210,";g.MUNI_ARRAY[44211]="44,,44211,";g.MUNI_ARRAY[44212]="44,,44212,";g.MUNI_ARRAY[44213]="44,,44213,";g.MUNI_ARRAY[44214]="44,,44214,";g.MUNI_ARRAY[44322]="44,,44322,";g.MUNI_ARRAY[44341]="44,,44341,";g.MUNI_ARRAY[44461]="44,,44461,";g.MUNI_ARRAY[44462]="44,,44462,";g.MUNI_ARRAY[45201]="45,,45201,";g.MUNI_ARRAY[45202]="45,,45202,";g.MUNI_ARRAY[45203]="45,,45203,";g.MUNI_ARRAY[45204]="45,,45204,";g.MUNI_ARRAY[45205]="45,,45205,";g.MUNI_ARRAY[45206]="45,,45206,";g.MUNI_ARRAY[45207]="45,,45207,";g.MUNI_ARRAY[45208]="45,,45208,";g.MUNI_ARRAY[45209]="45,,45209,";g.MUNI_ARRAY[45341]="45,,45341,";g.MUNI_ARRAY[45361]="45,,45361,";g.MUNI_ARRAY[45382]="45,,45382,";g.MUNI_ARRAY[45383]="45,,45383,";g.MUNI_ARRAY[45401]="45,,45401,";g.MUNI_ARRAY[45402]="45,,45402,";g.MUNI_ARRAY[45403]="45,,45403,";g.MUNI_ARRAY[45404]="45,,45404,";g.MUNI_ARRAY[45405]="45,,45405,";g.MUNI_ARRAY[45406]="45,,45406,";g.MUNI_ARRAY[45421]="45,,45421,";g.MUNI_ARRAY[45429]="45,,45429,";g.MUNI_ARRAY[45430]="45,,45430,";g.MUNI_ARRAY[45431]="45,,45431,";g.MUNI_ARRAY[45441]="45,,45441,";g.MUNI_ARRAY[45442]="45,,45442,";g.MUNI_ARRAY[45443]="45,,45443,";g.MUNI_ARRAY[46201]="46,,46201,";g.MUNI_ARRAY[46203]="46,,46203,";g.MUNI_ARRAY[46204]="46,,46204,";g.MUNI_ARRAY[46206]="46,,46206,";g.MUNI_ARRAY[46208]="46,,46208,";g.MUNI_ARRAY[46210]="46,,46210,";g.MUNI_ARRAY[46213]="46,,46213,";g.MUNI_ARRAY[46214]="46,,46214,";g.MUNI_ARRAY[46215]="46,,46215,";g.MUNI_ARRAY[46216]="46,,46216,";g.MUNI_ARRAY[46217]="46,,46217,";g.MUNI_ARRAY[46218]="46,,46218,";g.MUNI_ARRAY[46219]="46,,46219,";g.MUNI_ARRAY[46220]="46,,46220,";g.MUNI_ARRAY[46221]="46,,46221,";g.MUNI_ARRAY[46222]="46,,46222,";g.MUNI_ARRAY[46223]="46,,46223,";g.MUNI_ARRAY[46224]="46,,46224,";g.MUNI_ARRAY[46225]="46,,46225,";g.MUNI_ARRAY[46303]="46,,46303,";g.MUNI_ARRAY[46304]="46,,46304,";g.MUNI_ARRAY[46392]="46,,46392,";g.MUNI_ARRAY[46404]="46,,46404,";g.MUNI_ARRAY[46452]="46,,46452,";g.MUNI_ARRAY[46468]="46,,46468,";g.MUNI_ARRAY[46482]="46,,46482,";g.MUNI_ARRAY[46490]="46,,46490,";g.MUNI_ARRAY[46491]="46,,46491,";g.MUNI_ARRAY[46492]="46,,46492,";g.MUNI_ARRAY[46501]="46,,46501,";g.MUNI_ARRAY[46502]="46,,46502,";g.MUNI_ARRAY[46505]="46,,46505,";g.MUNI_ARRAY[46523]="46,,46523,";g.MUNI_ARRAY[46524]="46,,46524,";g.MUNI_ARRAY[46525]="46,,46525,";g.MUNI_ARRAY[46527]="46,,46527,";g.MUNI_ARRAY[46529]="46,,46529,";g.MUNI_ARRAY[46530]="46,,46530,";g.MUNI_ARRAY[46531]="46,,46531,";g.MUNI_ARRAY[46532]="46,,46532,";g.MUNI_ARRAY[46533]="46,,46533,";g.MUNI_ARRAY[46534]="46,,46534,";g.MUNI_ARRAY[46535]="46,,46535,";g.MUNI_ARRAY[47201]="47,,47201,";g.MUNI_ARRAY[47205]="47,,47205,";g.MUNI_ARRAY[47207]="47,,47207,";g.MUNI_ARRAY[47208]="47,,47208,";g.MUNI_ARRAY[47209]="47,,47209,";g.MUNI_ARRAY[47210]="47,,47210,";g.MUNI_ARRAY[47211]="47,,47211,";g.MUNI_ARRAY[47212]="47,,47212,";g.MUNI_ARRAY[47213]="47,,47213,";g.MUNI_ARRAY[47214]="47,,47214,";g.MUNI_ARRAY[47215]="47,,47215,";g.MUNI_ARRAY[47301]="47,,47301,";g.MUNI_ARRAY[47302]="47,,47302,";g.MUNI_ARRAY[47303]="47,,47303,";g.MUNI_ARRAY[47306]="47,,47306,";g.MUNI_ARRAY[47308]="47,,47308,";g.MUNI_ARRAY[47311]="47,,47311,";g.MUNI_ARRAY[47313]="47,,47313,";g.MUNI_ARRAY[47314]="47,,47314,";g.MUNI_ARRAY[47315]="47,,47315,";g.MUNI_ARRAY[47324]="47,,47324,";g.MUNI_ARRAY[47325]="47,,47325,";g.MUNI_ARRAY[47326]="47,,47326,";g.MUNI_ARRAY[47327]="47,,47327,";g.MUNI_ARRAY[47328]="47,,47328,";g.MUNI_ARRAY[47329]="47,,47329,";g.MUNI_ARRAY[47348]="47,,47348,";g.MUNI_ARRAY[47350]="47,,47350,";g.MUNI_ARRAY[47353]="47,,47353,";g.MUNI_ARRAY[47354]="47,,47354,";g.MUNI_ARRAY[47355]="47,,47355,";g.MUNI_ARRAY[47356]="47,,47356,";g.MUNI_ARRAY[47357]="47,,47357,";g.MUNI_ARRAY[47358]="47,,47358,";g.MUNI_ARRAY[47359]="47,,47359,";g.MUNI_ARRAY[47360]="47,,47360,";g.MUNI_ARRAY[47361]="47,,47361,";g.MUNI_ARRAY[47362]="47,,47362,";g.MUNI_ARRAY[47375]="47,,47375,";g.MUNI_ARRAY[47381]="47,,47381,";g.MUNI_ARRAY[47382]="47,,47382,";const h9=t=>{const e=g.MUNI_ARRAY[t];if(!e)return"";const r=e.split(",");return`${r[1]}${r[3]}`},Gz=async(t,e)=>{const r=`https://mreversegeocoder.gsi.go.jp/reverse-geocoder/LonLatToAddress?lat=${e}&lon=${t}`;try{const a=await fetch(r);if(a.ok){const l=await a.json();return`${h9(l.results.muniCd)}${l.results.lv01Nm===""?"":l.results.lv01Nm}`}else throw new Error("Failed to fetch")}catch(a){throw a instanceof Error?new Error(a.message):new Error("Unknown error occurred")}},jz=async t=>{const e=`https://msearch.gsi.go.jp/address-search/AddressSearch?q=${t}`;try{const r=await fetch(e,{method:"GET"});if(r.ok)return r.json()}catch(r){throw r instanceof Error?new Error(r.message):new Error("Unknown error occurred")}};var Kz=(t,e,r)=>{e(null),r([])},$z=(t,e,r)=>e(re(r).id),qz=(t,e,r)=>ht(e,{layerId:re(r).id,bool:!0},!0),Wz=dt('<button class="duration-scale-100 relative grid h-[50px] w-[50px] shrink-0 cursor-pointer place-items-center overflow-hidden rounded-full bg-gray-500 transition-all hover:scale-110"><!></button>'),Jz=dt('<div class="pointer-events-none absolute bottom-2 grid w-full place-items-center rounded-md"><div class="pointer-events-auto relative flex max-w-[calc(100vw-2rem)] gap-2 rounded-md bg-white p-4 px-6 transition-all duration-100"><button class="absolute right-0 top-0 rounded-full p-2"><!></button> <div class="flex grow flex-col gap-2"><div class="flex gap-2"></div> <div class="flex w-full flex-col items-center justify-center"><span class="text-accent text-xs"> </span> <span class="text-xs"> </span></div></div></div></div>');function eZ(t,e){fr(e,!0);let r=xr(e,"clickedLayerIds",15),a=xr(e,"clickedLayerFeaturesData",15),l=er(void 0),u=er(void 0),h=bi(()=>r()?e.layerEntries.filter(U=>r().includes(U.id)):[]);Dn(()=>{(async()=>e.clickedLngLat&&(ht(l,await void 0,!0),ht(u,await void 0,!0),ht(l,await Gz(e.clickedLngLat.lng,e.clickedLngLat.lat),!0)))()});let s=er($n({layerId:"",bool:!1}));const y=U=>{var N;!a()||!((N=a().find(D=>D.layerEntry.id===U))!=null&&N.feature)||(a(null),r([]))};Dn(()=>{if(re(s).layerId&&r().length>0){const U=fi.getMap();if(!U)return;const R=U.getLayer(re(s).layerId);if(!R)return;let N=R.type;N==="symbol"&&(N="text"),U.setPaintProperty(`@highlight_${re(s).layerId}`,`${N}-color`,re(s).bool?"#00d5ff":ru),U.moveLayer(`@highlight_${re(s).layerId}`)}});var x=Mr(),C=Dt(x);{var I=U=>{var R=Jz(),N=Pe(R),D=Pe(N);D.__click=[Kz,a,r];var O=Pe(D);br(O,{icon:"material-symbols:close-rounded",class:"h-4 w-4 text-black"}),Fe(D);var H=Ze(D,2),W=Pe(H);Qi(W,29,()=>re(h),V=>V.id,(V,K)=>{var oe=Wz();oe.__click=[$z,y,K],oe.__mousemove=[qz,s,K];var ce=Pe(oe);o_(ce,{get layerEntry(){return re(K)}}),Fe(oe),Ln("mouseleave",oe,()=>ht(s,{layerId:re(K).id,bool:!1},!0)),n8(oe,()=>Gw,()=>({duration:200})),Xe(V,oe)}),Fe(W);var se=Ze(W,2),de=Pe(se),le=Pe(de);Fe(de);var he=Ze(de,2),ae=Pe(he,!0);Fe(he),Fe(se),Fe(H),Fe(N),Fe(R),hr((V,K)=>{_r(le,`${V??""}, ${K??""}`),_r(ae,re(l)??"-----")},[()=>e.clickedLngLat.lng.toFixed(6),()=>e.clickedLngLat.lat.toFixed(6)]),Ri(3,R,()=>js,()=>({duration:200,y:100,opacity:0})),Xe(U,R)};Ut(C,U=>{r().length>1&&e.clickedLngLat&&U(I)})}Xe(t,x),gr()}qi(["click","mousemove"]);var tZ=dt('<div class="pointer-events-none relative z-50 grid h-[100px] w-[100px] place-items-center svelte-1jmlcwl"><div class="absolute translate-y-10 text-base font-bold svelte-1jmlcwl"> </div> <div class="css-rotate-effect absolute h-[30px] w-[30px] rotate-45 border-2 border-white svelte-1jmlcwl"></div></div>');function rZ(t,e){fr(e,!0);let r=er(null),a=er(null);In(()=>{re(r)&&e.show&&e.lngLat&&ht(a,new Vs.Marker({element:re(r),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map))}),Dn(()=>{e.show?re(a)?re(a).setLngLat(e.lngLat):ht(a,new Vs.Marker({element:re(r),anchor:"center",offset:[0,0]}).setLngLat(e.lngLat).addTo(e.map)):re(a)&&(re(a).remove(),ht(a,null))}),tu(()=>{re(r)&&Rm.to(re(r),{scale:0,duration:.15,onComplete:()=>{var s;(s=re(a))==null||s.remove()}})});var l=Mr(),u=Dt(l);{var h=s=>{var y=tZ(),x=Pe(y),C=Pe(x,!0);Fe(x),Ki(2),Fe(y),Ga(y,I=>ht(r,I),()=>re(r)),hr(()=>_r(C,e.feature.layer.metadata.name)),Xe(s,y)};Ut(u,s=>{e.show&&s(h)})}Xe(t,l),gr()}var iZ=dt("<!> <!> <!> <!> <!>",1),nZ=dt('<div role="region" class="relative h-full w-full"><div></div> <!> <!> <!> <!></div> <!>',1);function d5(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Dl,"$isTerrain3d",r),u=()=>kr(Zs,"$mapMode",r),h=()=>kr(Xl,"$isStreetView",r);let s=xr(e,"layerEntries",15),y=xr(e,"featureMenuData",15),x=xr(e,"showSelectionMarker",15),C=xr(e,"selectionMarkerLngLat",15),I=er(null),U=er(null),R=er($n([])),N=null,D=er(!1),O=er(null),H=er(null),W=er(!1),se=er(null),de=er($n([]));const le=[136.91278,35.543576,136.92986,35.556704];$n({type:"canvas",canvas:"canvas-layer",coordinates:[[le[0],le[3]],[le[2],le[3]],[le[2],le[1]],[le[0],le[1]]]});const he=async je=>{const Qe=await Vx(je);let pt=await Xx(je);const $e={source:"terrain",exaggeration:1};return{version:8,glyphs:W5,sprite:"https://gsi-cyberjapan.github.io/optimal_bvmap/sprite/std",sources:{terrain:{type:"raster-dem",tiles:[`terrain://${gn.url}?x={x}&y={y}&z={z}`],tileSize:256,minzoom:gn.sourceMinZoom,maxzoom:gn.sourceMaxZoom,attribution:gn.attribution,bounds:gn.bbox},...Qz,...Qe,tile_index:{type:"vector",maxzoom:22,tiles:["tile_index://http://{z}/{x}/{y}.png?x={x}&y={y}&z={z}"]}},layers:[...pt,{id:"@overlay_layer",type:"background",paint:{"background-color":"#000000","background-opacity":0}},kz,Dz],sky:{"sky-color":"#2baeff","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#2222ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]},terrain:l()?$e:void 0}};F0.subscribe(je=>{const Qe=[...s(),...e.tempLayerEntries].filter(pt=>je.includes(pt.id));s(Qe.sort((pt,$e)=>je.indexOf(pt.id)-je.indexOf($e.id)))}),In(async()=>{if(!s())return;const je=await he(s());!je||!re(I)||fi.init(re(I),je)});const ae=u8(async je=>{const Qe=await he(je);fi.setStyle(Qe),fi.terrainReload()},100);Dn(()=>{const je=e8(s());ae(je)}),T0.subscribe(()=>{ae(s())});const V=(je,Qe)=>{if(re(U)){if(!je||!Qe){ht(D,!1);return}je&&(ht(O,je.lngLat,!0),ht(H,Qe,!0),ht(D,!0))}};Dn(()=>{y()||x(!1)});const K=()=>{const je=fi.getMap();if(!je)return;je.getLayersOrder().forEach(pt=>{pt.startsWith("@highlight_")&&je.removeLayer(pt)})};Dn(()=>{if(re(de)){const je=fi.getMap();if(!je)return;re(de).forEach(({layerEntry:Qe,feature:pt,featureId:$e})=>{const wt=FT({layerEntry:Qe,featureId:$e});wt&&je.addLayer(wt)})}else K()}),fi.onInitialized(je=>{ht(U,je,!0)});const oe=je=>{je.preventDefault(),ht(W,!0)},ce=je=>{je.preventDefault(),ht(W,!1)},ye=async je=>{je.preventDefault(),ht(W,!1);const Qe=je.dataTransfer;if(!Qe)return;const pt=Qe.files;if(!pt||pt.length===0)return;const $e=pt[0];ht(se,$e,!0)};var we=nZ(),Ve=Dt(we),ut=Pe(Ve);Ga(ut,je=>ht(I,je),()=>re(I));var nt=Ze(ut,2);oz(nt);var rt=Ze(nt,2);Lz(rt,{});var ft=Ze(rt,2);eZ(ft,{get layerEntries(){return s()},get clickedLngLat(){return N},get clickedLayerIds(){return re(R)},set clickedLayerIds(je){ht(R,je,!0)},get featureMenuData(){return y()},set featureMenuData(je){y(je)},get clickedLayerFeaturesData(){return re(de)},set clickedLayerFeaturesData(je){ht(de,je,!0)}});var _t=Ze(ft,2);$D(_t),Fe(Ve);var gt=Ze(Ve,2);{var Je=je=>{var Qe=iZ(),pt=Dt(Qe);rz(pt,{get map(){return re(U)},get isDragover(){return re(W)},set isDragover(Pt){ht(W,Pt,!0)},get dropFile(){return re(se)},set dropFile(Pt){ht(se,Pt,!0)}});var $e=Ze(pt,2);Zz($e,{get map(){return re(U)}});var wt=Ze($e,2);Vz(wt,{get map(){return re(U)},get layerEntries(){return s()},toggleTooltip:V,get markerLngLat(){return C()},set markerLngLat(Pt){C(Pt)},get featureMenuData(){return y()},set featureMenuData(Pt){y(Pt)},get showMarker(){return x()},set showMarker(Pt){x(Pt)},get clickedLayerIds(){return re(R)},set clickedLayerIds(Pt){ht(R,Pt,!0)}});var Ct=Ze(wt,2);Yy(Ct,C,Pt=>{Oz(Pt,{get map(){return re(U)},get show(){return x()},set show(ar){x(ar)},get lngLat(){return C()},set lngLat(ar){C(ar)}})});var Mt=Ze(Ct,2);Yy(Mt,()=>re(D),Pt=>{rZ(Pt,{get map(){return re(U)},get feature(){return re(H)},get show(){return re(D)},set show(ar){ht(D,ar,!0)},get lngLat(){return re(O)},set lngLat(ar){ht(O,ar,!0)}})}),Xe(je,Qe)};Ut(gt,je=>{re(U)&&je(Je)})}hr(()=>mn(ut,1,`c-map-satellite absolute grow bg-black transition-opacity duration-500 ${(!e.showMapCanvas&&u()==="view"?"pointer-events-none bottom-0 left-0 h-full w-full opacity-0":h()&&u()==="small"?"bottom-2 left-2 z-20 h-[200px] w-[300px] overflow-hidden rounded-md border-4 border-white bg-white":"bottom-0 left-0 h-full w-full opacity-100")??""}`,"svelte-1rq0kpq")),Ln("drop",Ve,ye),Ln("dragover",Ve,oe),Ln("dragleave",Ve,ce),Xe(t,we),gr(),a()}var aZ=dt("<div> </div>");function sZ(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(yg,"$notificationMessage",r);let u,h=er("");yg.subscribe(C=>{C&&!C.persistent&&(clearTimeout(u),u=setTimeout(()=>{yg.set(null)},3e3)),ht(h,(C==null?void 0:C.type)==="error"?"bg-red-500 text-base":(C==null?void 0:C.type)==="success"?"bg-accent text-base":(C==null?void 0:C.type)==="info"?"bg-main text-base":"",!0)}),In(()=>()=>{clearTimeout(u)});var s=Mr(),y=Dt(s);{var x=C=>{var I=aZ(),U=Pe(I,!0);Fe(I),hr(()=>{mn(I,1,`pointer-events-none absolute left-1/2 z-30 grid -translate-x-1/2 place-items-center rounded-lg p-2 shadow-md max-lg:top-2 max-lg:w-[calc(100%_-_10px)] lg:top-5 ${re(h)??""}`),_r(U,l().message)}),Ri(3,I,()=>js,()=>({duration:300,y:-200})),Xe(C,I)};Ut(y,C=>{l()&&C(x)})}Xe(t,s),gr(),a()}function Wo(t){return Array.isArray?Array.isArray(t):f9(t)==="[object Array]"}function oZ(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function lZ(t){return t==null?"":oZ(t)}function ho(t){return typeof t=="string"}function u9(t){return typeof t=="number"}function AZ(t){return t===!0||t===!1||cZ(t)&&f9(t)=="[object Boolean]"}function d9(t){return typeof t=="object"}function cZ(t){return d9(t)&&t!==null}function Ha(t){return t!=null}function _m(t){return!t.trim().length}function f9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const hZ="Incorrect 'index' type",uZ=t=>`Invalid value for key ${t}`,dZ=t=>`Pattern length exceeds max of ${t}.`,fZ=t=>`Missing ${t} property in key`,gZ=t=>`Property 'weight' in key '${t}' must be a positive integer`,f5=Object.prototype.hasOwnProperty;class pZ{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(a=>{let l=g9(a);this._keys.push(l),this._keyMap[l.id]=l,r+=l.weight}),this._keys.forEach(a=>{a.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function g9(t){let e=null,r=null,a=null,l=1,u=null;if(ho(t)||Wo(t))a=t,e=g5(t),r=v4(t);else{if(!f5.call(t,"name"))throw new Error(fZ("name"));const h=t.name;if(a=h,f5.call(t,"weight")&&(l=t.weight,l<=0))throw new Error(gZ(h));e=g5(h),r=v4(h),u=t.getFn}return{path:e,id:r,weight:l,src:a,getFn:u}}function g5(t){return Wo(t)?t:t.split(".")}function v4(t){return Wo(t)?t.join("."):t}function mZ(t,e){let r=[],a=!1;const l=(u,h,s)=>{if(Ha(u))if(!h[s])r.push(u);else{let y=h[s];const x=u[y];if(!Ha(x))return;if(s===h.length-1&&(ho(x)||u9(x)||AZ(x)))r.push(lZ(x));else if(Wo(x)){a=!0;for(let C=0,I=x.length;C<I;C+=1)l(x[C],h,s+1)}else h.length&&l(x,h,s+1)}};return l(t,ho(e)?e.split("."):e,0),a?r:r[0]}const _Z={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},bZ={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},yZ={location:0,threshold:.6,distance:100},vZ={useExtendedSearch:!1,getFn:mZ,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var vr={...bZ,..._Z,...yZ,...vZ};const xZ=/[^ ]+/g;function wZ(t=1,e=3){const r=new Map,a=Math.pow(10,e);return{get(l){const u=l.match(xZ).length;if(r.has(u))return r.get(u);const h=1/Math.pow(u,.5*t),s=parseFloat(Math.round(h*a)/a);return r.set(u,s),s},clear(){r.clear()}}}class Y_{constructor({getFn:e=vr.getFn,fieldNormWeight:r=vr.fieldNormWeight}={}){this.norm=wZ(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,a)=>{this._keysMap[r.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ho(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();ho(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,a=this.size();r<a;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!Ha(e)||_m(e))return;let a={v:e,i:r,n:this.norm.get(e)};this.records.push(a)}_addObject(e,r){let a={i:r,$:{}};this.keys.forEach((l,u)=>{let h=l.getFn?l.getFn(e):this.getFn(e,l.path);if(Ha(h)){if(Wo(h)){let s=[];const y=[{nestedArrIndex:-1,value:h}];for(;y.length;){const{nestedArrIndex:x,value:C}=y.pop();if(Ha(C))if(ho(C)&&!_m(C)){let I={v:C,i:x,n:this.norm.get(C)};s.push(I)}else Wo(C)&&C.forEach((I,U)=>{y.push({nestedArrIndex:U,value:I})})}a.$[u]=s}else if(ho(h)&&!_m(h)){let s={v:h,n:this.norm.get(h)};a.$[u]=s}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function p9(t,e,{getFn:r=vr.getFn,fieldNormWeight:a=vr.fieldNormWeight}={}){const l=new Y_({getFn:r,fieldNormWeight:a});return l.setKeys(t.map(g9)),l.setSources(e),l.create(),l}function BZ(t,{getFn:e=vr.getFn,fieldNormWeight:r=vr.fieldNormWeight}={}){const{keys:a,records:l}=t,u=new Y_({getFn:e,fieldNormWeight:r});return u.setKeys(a),u.setIndexRecords(l),u}function sg(t,{errors:e=0,currentLocation:r=0,expectedLocation:a=0,distance:l=vr.distance,ignoreLocation:u=vr.ignoreLocation}={}){const h=e/t.length;if(u)return h;const s=Math.abs(a-r);return l?h+s/l:s?1:h}function CZ(t=[],e=vr.minMatchCharLength){let r=[],a=-1,l=-1,u=0;for(let h=t.length;u<h;u+=1){let s=t[u];s&&a===-1?a=u:!s&&a!==-1&&(l=u-1,l-a+1>=e&&r.push([a,l]),a=-1)}return t[u-1]&&u-a>=e&&r.push([a,u-1]),r}const GA=32;function MZ(t,e,r,{location:a=vr.location,distance:l=vr.distance,threshold:u=vr.threshold,findAllMatches:h=vr.findAllMatches,minMatchCharLength:s=vr.minMatchCharLength,includeMatches:y=vr.includeMatches,ignoreLocation:x=vr.ignoreLocation}={}){if(e.length>GA)throw new Error(dZ(GA));const C=e.length,I=t.length,U=Math.max(0,Math.min(a,I));let R=u,N=U;const D=s>1||y,O=D?Array(I):[];let H;for(;(H=t.indexOf(e,N))>-1;){let ae=sg(e,{currentLocation:H,expectedLocation:U,distance:l,ignoreLocation:x});if(R=Math.min(ae,R),N=H+C,D){let V=0;for(;V<C;)O[H+V]=1,V+=1}}N=-1;let W=[],se=1,de=C+I;const le=1<<C-1;for(let ae=0;ae<C;ae+=1){let V=0,K=de;for(;V<K;)sg(e,{errors:ae,currentLocation:U+K,expectedLocation:U,distance:l,ignoreLocation:x})<=R?V=K:de=K,K=Math.floor((de-V)/2+V);de=K;let oe=Math.max(1,U-K+1),ce=h?I:Math.min(U+K,I)+C,ye=Array(ce+2);ye[ce+1]=(1<<ae)-1;for(let Ve=ce;Ve>=oe;Ve-=1){let ut=Ve-1,nt=r[t.charAt(ut)];if(D&&(O[ut]=+!!nt),ye[Ve]=(ye[Ve+1]<<1|1)&nt,ae&&(ye[Ve]|=(W[Ve+1]|W[Ve])<<1|1|W[Ve+1]),ye[Ve]&le&&(se=sg(e,{errors:ae,currentLocation:ut,expectedLocation:U,distance:l,ignoreLocation:x}),se<=R)){if(R=se,N=ut,N<=U)break;oe=Math.max(1,2*U-N)}}if(sg(e,{errors:ae+1,currentLocation:U,expectedLocation:U,distance:l,ignoreLocation:x})>R)break;W=ye}const he={isMatch:N>=0,score:Math.max(.001,se)};if(D){const ae=CZ(O,s);ae.length?y&&(he.indices=ae):he.isMatch=!1}return he}function RZ(t){let e={};for(let r=0,a=t.length;r<a;r+=1){const l=t.charAt(r);e[l]=(e[l]||0)|1<<a-r-1}return e}const bp=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class m9{constructor(e,{location:r=vr.location,threshold:a=vr.threshold,distance:l=vr.distance,includeMatches:u=vr.includeMatches,findAllMatches:h=vr.findAllMatches,minMatchCharLength:s=vr.minMatchCharLength,isCaseSensitive:y=vr.isCaseSensitive,ignoreDiacritics:x=vr.ignoreDiacritics,ignoreLocation:C=vr.ignoreLocation}={}){if(this.options={location:r,threshold:a,distance:l,includeMatches:u,findAllMatches:h,minMatchCharLength:s,isCaseSensitive:y,ignoreDiacritics:x,ignoreLocation:C},e=y?e:e.toLowerCase(),e=x?bp(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const I=(R,N)=>{this.chunks.push({pattern:R,alphabet:RZ(R),startIndex:N})},U=this.pattern.length;if(U>GA){let R=0;const N=U%GA,D=U-N;for(;R<D;)I(this.pattern.substr(R,GA),R),R+=GA;if(N){const O=U-GA;I(this.pattern.substr(O),O)}}else I(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:a,includeMatches:l}=this.options;if(e=r?e:e.toLowerCase(),e=a?bp(e):e,this.pattern===e){let D={isMatch:!0,score:0};return l&&(D.indices=[[0,e.length-1]]),D}const{location:u,distance:h,threshold:s,findAllMatches:y,minMatchCharLength:x,ignoreLocation:C}=this.options;let I=[],U=0,R=!1;this.chunks.forEach(({pattern:D,alphabet:O,startIndex:H})=>{const{isMatch:W,score:se,indices:de}=MZ(e,D,O,{location:u+H,distance:h,threshold:s,findAllMatches:y,minMatchCharLength:x,includeMatches:l,ignoreLocation:C});W&&(R=!0),U+=se,W&&de&&(I=[...I,...de])});let N={isMatch:R,score:R?U/this.chunks.length:1};return R&&l&&(N.indices=I),N}}class tA{constructor(e){this.pattern=e}static isMultiMatch(e){return p5(e,this.multiRegex)}static isSingleMatch(e){return p5(e,this.singleRegex)}search(){}}function p5(t,e){const r=t.match(e);return r?r[1]:null}class IZ extends tA{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class UZ extends tA{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class EZ extends tA{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class FZ extends tA{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class TZ extends tA{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class SZ extends tA{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class _9 extends tA{constructor(e,{location:r=vr.location,threshold:a=vr.threshold,distance:l=vr.distance,includeMatches:u=vr.includeMatches,findAllMatches:h=vr.findAllMatches,minMatchCharLength:s=vr.minMatchCharLength,isCaseSensitive:y=vr.isCaseSensitive,ignoreDiacritics:x=vr.ignoreDiacritics,ignoreLocation:C=vr.ignoreLocation}={}){super(e),this._bitapSearch=new m9(e,{location:r,threshold:a,distance:l,includeMatches:u,findAllMatches:h,minMatchCharLength:s,isCaseSensitive:y,ignoreDiacritics:x,ignoreLocation:C})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class b9 extends tA{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,a;const l=[],u=this.pattern.length;for(;(a=e.indexOf(this.pattern,r))>-1;)r=a+u,l.push([a,r-1]);const h=!!l.length;return{isMatch:h,score:h?0:1,indices:l}}}const x4=[IZ,b9,EZ,FZ,SZ,TZ,UZ,_9],m5=x4.length,NZ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,YZ="|";function PZ(t,e={}){return t.split(YZ).map(r=>{let a=r.trim().split(NZ).filter(u=>u&&!!u.trim()),l=[];for(let u=0,h=a.length;u<h;u+=1){const s=a[u];let y=!1,x=-1;for(;!y&&++x<m5;){const C=x4[x];let I=C.isMultiMatch(s);I&&(l.push(new C(I,e)),y=!0)}if(!y)for(x=-1;++x<m5;){const C=x4[x];let I=C.isSingleMatch(s);if(I){l.push(new C(I,e));break}}}return l})}const LZ=new Set([_9.type,b9.type]);class QZ{constructor(e,{isCaseSensitive:r=vr.isCaseSensitive,ignoreDiacritics:a=vr.ignoreDiacritics,includeMatches:l=vr.includeMatches,minMatchCharLength:u=vr.minMatchCharLength,ignoreLocation:h=vr.ignoreLocation,findAllMatches:s=vr.findAllMatches,location:y=vr.location,threshold:x=vr.threshold,distance:C=vr.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:a,includeMatches:l,minMatchCharLength:u,findAllMatches:s,ignoreLocation:h,location:y,threshold:x,distance:C},e=r?e:e.toLowerCase(),e=a?bp(e):e,this.pattern=e,this.query=PZ(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:l,ignoreDiacritics:u}=this.options;e=l?e:e.toLowerCase(),e=u?bp(e):e;let h=0,s=[],y=0;for(let x=0,C=r.length;x<C;x+=1){const I=r[x];s.length=0,h=0;for(let U=0,R=I.length;U<R;U+=1){const N=I[U],{isMatch:D,indices:O,score:H}=N.search(e);if(D){if(h+=1,y+=H,a){const W=N.constructor.type;LZ.has(W)?s=[...s,...O]:s.push(O)}}else{y=0,h=0,s.length=0;break}}if(h){let U={isMatch:!0,score:y/h};return a&&(U.indices=s),U}}return{isMatch:!1,score:1}}}const w4=[];function kZ(...t){w4.push(...t)}function B4(t,e){for(let r=0,a=w4.length;r<a;r+=1){let l=w4[r];if(l.condition(t,e))return new l(t,e)}return new m9(t,e)}const yp={AND:"$and",OR:"$or"},C4={PATH:"$path",PATTERN:"$val"},M4=t=>!!(t[yp.AND]||t[yp.OR]),DZ=t=>!!t[C4.PATH],zZ=t=>!Wo(t)&&d9(t)&&!M4(t),_5=t=>({[yp.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function y9(t,e,{auto:r=!0}={}){const a=l=>{let u=Object.keys(l);const h=DZ(l);if(!h&&u.length>1&&!M4(l))return a(_5(l));if(zZ(l)){const y=h?l[C4.PATH]:u[0],x=h?l[C4.PATTERN]:l[y];if(!ho(x))throw new Error(uZ(y));const C={keyId:v4(y),pattern:x};return r&&(C.searcher=B4(x,e)),C}let s={children:[],operator:u[0]};return u.forEach(y=>{const x=l[y];Wo(x)&&x.forEach(C=>{s.children.push(a(C))})}),s};return M4(t)||(t=_5(t)),a(t)}function ZZ(t,{ignoreFieldNorm:e=vr.ignoreFieldNorm}){t.forEach(r=>{let a=1;r.matches.forEach(({key:l,norm:u,score:h})=>{const s=l?l.weight:null;a*=Math.pow(h===0&&s?Number.EPSILON:h,(s||1)*(e?1:u))}),r.score=a})}function HZ(t,e){const r=t.matches;e.matches=[],Ha(r)&&r.forEach(a=>{if(!Ha(a.indices)||!a.indices.length)return;const{indices:l,value:u}=a;let h={indices:l,value:u};a.key&&(h.key=a.key.src),a.idx>-1&&(h.refIndex=a.idx),e.matches.push(h)})}function OZ(t,e){e.score=t.score}function XZ(t,e,{includeMatches:r=vr.includeMatches,includeScore:a=vr.includeScore}={}){const l=[];return r&&l.push(HZ),a&&l.push(OZ),t.map(u=>{const{idx:h}=u,s={item:e[h],refIndex:h};return l.length&&l.forEach(y=>{y(u,s)}),s})}class lu{constructor(e,r={},a){this.options={...vr,...r},this.options.useExtendedSearch,this._keyStore=new pZ(this.options.keys),this.setCollection(e,a)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof Y_))throw new Error(hZ);this._myIndex=r||p9(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ha(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let a=0,l=this._docs.length;a<l;a+=1){const u=this._docs[a];e(u,a)&&(this.removeAt(a),a-=1,l-=1,r.push(u))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:a,includeScore:l,shouldSort:u,sortFn:h,ignoreFieldNorm:s}=this.options;let y=ho(e)?ho(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ZZ(y,{ignoreFieldNorm:s}),u&&y.sort(h),u9(r)&&r>-1&&(y=y.slice(0,r)),XZ(y,this._docs,{includeMatches:a,includeScore:l})}_searchStringList(e){const r=B4(e,this.options),{records:a}=this._myIndex,l=[];return a.forEach(({v:u,i:h,n:s})=>{if(!Ha(u))return;const{isMatch:y,score:x,indices:C}=r.searchIn(u);y&&l.push({item:u,idx:h,matches:[{score:x,value:u,norm:s,indices:C}]})}),l}_searchLogical(e){const r=y9(e,this.options),a=(s,y,x)=>{if(!s.children){const{keyId:I,searcher:U}=s,R=this._findMatches({key:this._keyStore.get(I),value:this._myIndex.getValueForItemAtKeyId(y,I),searcher:U});return R&&R.length?[{idx:x,item:y,matches:R}]:[]}const C=[];for(let I=0,U=s.children.length;I<U;I+=1){const R=s.children[I],N=a(R,y,x);if(N.length)C.push(...N);else if(s.operator===yp.AND)return[]}return C},l=this._myIndex.records,u={},h=[];return l.forEach(({$:s,i:y})=>{if(Ha(s)){let x=a(r,s,y);x.length&&(u[y]||(u[y]={idx:y,item:s,matches:[]},h.push(u[y])),x.forEach(({matches:C})=>{u[y].matches.push(...C)}))}}),h}_searchObjectList(e){const r=B4(e,this.options),{keys:a,records:l}=this._myIndex,u=[];return l.forEach(({$:h,i:s})=>{if(!Ha(h))return;let y=[];a.forEach((x,C)=>{y.push(...this._findMatches({key:x,value:h[C],searcher:r}))}),y.length&&u.push({idx:s,item:h,matches:y})}),u}_findMatches({key:e,value:r,searcher:a}){if(!Ha(r))return[];let l=[];if(Wo(r))r.forEach(({v:u,i:h,n:s})=>{if(!Ha(u))return;const{isMatch:y,score:x,indices:C}=a.searchIn(u);y&&l.push({score:x,key:e,value:u,idx:h,norm:s,indices:C})});else{const{v:u,n:h}=r,{isMatch:s,score:y,indices:x}=a.searchIn(u);s&&l.push({score:y,key:e,value:u,norm:h,indices:x})}return l}}lu.version="7.1.0";lu.createIndex=p9;lu.parseIndex=BZ;lu.config=vr;lu.parseQuery=y9;kZ(QZ);var VZ=(t,e,r,a)=>{t.key==="Enter"&&!re(e)&&r(a())},GZ=dt('<div class="h-6 w-6 animate-spin cursor-pointer rounded-full border-2 border-gray-400 border-t-transparent"></div>'),jZ=(t,e,r)=>e(r()),KZ=dt("<button><!></button>"),$Z=dt('<div class="duration-15 pointer-events-auto relative flex overflow-hidden rounded-full transition-all"><input type="text" class="bg-base focus:outline-hidden w-[280px] rounded-md px-4 py-2" placeholder="/"> <div class="absolute right-1 top-2 grid place-self-center pr-2"><!></div></div>');function qZ(t,e){fr(e,!0);let r=xr(e,"results",15),a=xr(e,"inputSearchWord",15),l=er(!1),u=er(!1);const h=async R=>{if(!(!R||R.length<2)){R=R.trim(),ht(l,!0);try{await e.searchFeature(R)}catch(N){console.error(N)}finally{ht(l,!1)}}};Dn(()=>{a()||r(null)});var s=$Z(),y=Pe(s);bo(y),y.__keydown=[VZ,u,h,a];var x=Ze(y,2),C=Pe(x);{var I=R=>{var N=GZ();Xe(R,N)},U=R=>{var N=KZ();N.__click=[jZ,h,a];var D=Pe(N);const O=bi(()=>a().trim().length>1?" text-accent":"text-gray-400");br(D,{icon:"stash:search-solid",get class(){return`h-6 w-6 ${re(O)??""}`}}),Fe(N),hr((H,W)=>{N.disabled=H,mn(N,1,W)},[()=>a().trim().length<2,()=>bC(a().trim().length>1?"pointer-events-auto cursor-pointer":"pointer-events-none")]),Xe(R,N)};Ut(C,R=>{re(l)?R(I):R(U,!1)})}Fe(x),Fe(s),Ln("compositionstart",y,()=>ht(u,!0)),Ln("compositionend",y,()=>ht(u,!1)),Up(y,a),Xe(t,s),gr()}qi(["keydown","click"]);const R4=65536*65536,b5=1/R4,WZ=12,y5=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),bm=0,og=1,Xd=2,lg=5;class JZ{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,r,a=this.length){for(;this.pos<a;){const l=this.readVarint(),u=l>>3,h=this.pos;this.type=l&7,e(u,r,this),this.pos===h&&this.skip(l)}return r}readMessage(e,r){return this.readFields(e,r,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*R4;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*R4;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const r=this.buf;let a,l;return l=r[this.pos++],a=l&127,l<128||(l=r[this.pos++],a|=(l&127)<<7,l<128)||(l=r[this.pos++],a|=(l&127)<<14,l<128)||(l=r[this.pos++],a|=(l&127)<<21,l<128)?a:(l=r[this.pos],a|=(l&15)<<28,eH(a,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=WZ&&y5?y5.decode(this.buf.subarray(r,e)):dH(this.buf,r,e)}readBytes(){const e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r}readPackedVarint(e=[],r){const a=this.readPackedEnd();for(;this.pos<a;)e.push(this.readVarint(r));return e}readPackedSVarint(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Xd?this.readVarint()+this.pos:this.pos+1}skip(e){const r=e&7;if(r===bm)for(;this.buf[this.pos++]>127;);else if(r===Xd)this.pos=this.readVarint()+this.pos;else if(r===lg)this.pos+=4;else if(r===og)this.pos+=8;else throw new Error(`Unimplemented type: ${r}`)}writeTag(e,r){this.writeVarint(e<<3|r)}realloc(e){let r=this.length||16;for(;r<this.pos+e;)r*=2;if(r!==this.length){const a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.dataView=new DataView(a.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*b5),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*b5),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){tH(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const r=this.pos;this.pos=fH(this.buf,e,this.pos);const a=this.pos-r;a>=128&&v5(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const r=e.length;this.writeVarint(r),this.realloc(r);for(let a=0;a<r;a++)this.buf[this.pos++]=e[a]}writeRawMessage(e,r){this.pos++;const a=this.pos;e(r,this);const l=this.pos-a;l>=128&&v5(a,l,this),this.pos=a-1,this.writeVarint(l),this.pos+=l}writeMessage(e,r,a){this.writeTag(e,Xd),this.writeRawMessage(r,a)}writePackedVarint(e,r){r.length&&this.writeMessage(e,nH,r)}writePackedSVarint(e,r){r.length&&this.writeMessage(e,aH,r)}writePackedBoolean(e,r){r.length&&this.writeMessage(e,lH,r)}writePackedFloat(e,r){r.length&&this.writeMessage(e,sH,r)}writePackedDouble(e,r){r.length&&this.writeMessage(e,oH,r)}writePackedFixed32(e,r){r.length&&this.writeMessage(e,AH,r)}writePackedSFixed32(e,r){r.length&&this.writeMessage(e,cH,r)}writePackedFixed64(e,r){r.length&&this.writeMessage(e,hH,r)}writePackedSFixed64(e,r){r.length&&this.writeMessage(e,uH,r)}writeBytesField(e,r){this.writeTag(e,Xd),this.writeBytes(r)}writeFixed32Field(e,r){this.writeTag(e,lg),this.writeFixed32(r)}writeSFixed32Field(e,r){this.writeTag(e,lg),this.writeSFixed32(r)}writeFixed64Field(e,r){this.writeTag(e,og),this.writeFixed64(r)}writeSFixed64Field(e,r){this.writeTag(e,og),this.writeSFixed64(r)}writeVarintField(e,r){this.writeTag(e,bm),this.writeVarint(r)}writeSVarintField(e,r){this.writeTag(e,bm),this.writeSVarint(r)}writeStringField(e,r){this.writeTag(e,Xd),this.writeString(r)}writeFloatField(e,r){this.writeTag(e,lg),this.writeFloat(r)}writeDoubleField(e,r){this.writeTag(e,og),this.writeDouble(r)}writeBooleanField(e,r){this.writeVarintField(e,+r)}}function eH(t,e,r){const a=r.buf;let l,u;if(u=a[r.pos++],l=(u&112)>>4,u<128||(u=a[r.pos++],l|=(u&127)<<3,u<128)||(u=a[r.pos++],l|=(u&127)<<10,u<128)||(u=a[r.pos++],l|=(u&127)<<17,u<128)||(u=a[r.pos++],l|=(u&127)<<24,u<128)||(u=a[r.pos++],l|=(u&1)<<31,u<128))return xh(t,l,e);throw new Error("Expected varint not more than 10 bytes")}function xh(t,e,r){return r?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function tH(t,e){let r,a;if(t>=0?(r=t%4294967296|0,a=t/4294967296|0):(r=~(-t%4294967296),a=~(-t/4294967296),r^4294967295?r=r+1|0:(r=0,a=a+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),rH(r,a,e),iH(a,e)}function rH(t,e,r){r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos]=t&127}function iH(t,e){const r=(t&7)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function v5(t,e,r){const a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));r.realloc(a);for(let l=r.pos-1;l>=t;l--)r.buf[l+a]=r.buf[l]}function nH(t,e){for(let r=0;r<t.length;r++)e.writeVarint(t[r])}function aH(t,e){for(let r=0;r<t.length;r++)e.writeSVarint(t[r])}function sH(t,e){for(let r=0;r<t.length;r++)e.writeFloat(t[r])}function oH(t,e){for(let r=0;r<t.length;r++)e.writeDouble(t[r])}function lH(t,e){for(let r=0;r<t.length;r++)e.writeBoolean(t[r])}function AH(t,e){for(let r=0;r<t.length;r++)e.writeFixed32(t[r])}function cH(t,e){for(let r=0;r<t.length;r++)e.writeSFixed32(t[r])}function hH(t,e){for(let r=0;r<t.length;r++)e.writeFixed64(t[r])}function uH(t,e){for(let r=0;r<t.length;r++)e.writeSFixed64(t[r])}function dH(t,e,r){let a="",l=e;for(;l<r;){const u=t[l];let h=null,s=u>239?4:u>223?3:u>191?2:1;if(l+s>r)break;let y,x,C;s===1?u<128&&(h=u):s===2?(y=t[l+1],(y&192)===128&&(h=(u&31)<<6|y&63,h<=127&&(h=null))):s===3?(y=t[l+1],x=t[l+2],(y&192)===128&&(x&192)===128&&(h=(u&15)<<12|(y&63)<<6|x&63,(h<=2047||h>=55296&&h<=57343)&&(h=null))):s===4&&(y=t[l+1],x=t[l+2],C=t[l+3],(y&192)===128&&(x&192)===128&&(C&192)===128&&(h=(u&15)<<18|(y&63)<<12|(x&63)<<6|C&63,(h<=65535||h>=1114112)&&(h=null))),h===null?(h=65533,s=1):h>65535&&(h-=65536,a+=String.fromCharCode(h>>>10&1023|55296),h=56320|h&1023),a+=String.fromCharCode(h),l+=s}return a}function fH(t,e,r){for(let a=0,l,u;a<e.length;a++){if(l=e.charCodeAt(a),l>55295&&l<57344)if(u)if(l<56320){t[r++]=239,t[r++]=191,t[r++]=189,u=l;continue}else l=u-55296<<10|l-56320|65536,u=null;else{l>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):u=l;continue}else u&&(t[r++]=239,t[r++]=191,t[r++]=189,u=null);l<128?t[r++]=l:(l<2048?t[r++]=l>>6|192:(l<65536?t[r++]=l>>12|224:(t[r++]=l>>18|240,t[r++]=l>>12&63|128),t[r++]=l>>6&63|128),t[r++]=l&63|128)}return r}function kl(t,e){this.x=t,this.y=e}kl.prototype={clone(){return new kl(this.x,this.y)},add(t){return this.clone()._add(t)},sub(t){return this.clone()._sub(t)},multByPoint(t){return this.clone()._multByPoint(t)},divByPoint(t){return this.clone()._divByPoint(t)},mult(t){return this.clone()._mult(t)},div(t){return this.clone()._div(t)},rotate(t){return this.clone()._rotate(t)},rotateAround(t,e){return this.clone()._rotateAround(t,e)},matMult(t){return this.clone()._matMult(t)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(t){return this.x===t.x&&this.y===t.y},dist(t){return Math.sqrt(this.distSqr(t))},distSqr(t){const e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith(t){return this.angleWithSep(t.x,t.y)},angleWithSep(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult(t){const e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add(t){return this.x+=t.x,this.y+=t.y,this},_sub(t){return this.x-=t.x,this.y-=t.y,this},_mult(t){return this.x*=t,this.y*=t,this},_div(t){return this.x/=t,this.y/=t,this},_multByPoint(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint(t){return this.x/=t.x,this.y/=t.y,this},_unit(){return this._div(this.mag()),this},_perp(){const t=this.y;return this.y=this.x,this.x=-t,this},_rotate(t){const e=Math.cos(t),r=Math.sin(t),a=e*this.x-r*this.y,l=r*this.x+e*this.y;return this.x=a,this.y=l,this},_rotateAround(t,e){const r=Math.cos(t),a=Math.sin(t),l=e.x+r*(this.x-e.x)-a*(this.y-e.y),u=e.y+a*(this.x-e.x)+r*(this.y-e.y);return this.x=l,this.y=u,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:kl};kl.convert=function(t){if(t instanceof kl)return t;if(Array.isArray(t))return new kl(+t[0],+t[1]);if(t.x!==void 0&&t.y!==void 0)return new kl(+t.x,+t.y);throw new Error("Expected [x, y] or {x, y} point format")};class v9{constructor(e,r,a,l,u){this.properties={},this.extent=a,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=u,e.readFields(gH,this,r)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos,a=[];let l,u=1,h=0,s=0,y=0;for(;e.pos<r;){if(h<=0){const x=e.readVarint();u=x&7,h=x>>3}if(h--,u===1||u===2)s+=e.readSVarint(),y+=e.readSVarint(),u===1&&(l&&a.push(l),l=[]),l&&l.push(new kl(s,y));else if(u===7)l&&l.push(l[0].clone());else throw new Error(`unknown command ${u}`)}return l&&a.push(l),a}bbox(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos;let a=1,l=0,u=0,h=0,s=1/0,y=-1/0,x=1/0,C=-1/0;for(;e.pos<r;){if(l<=0){const I=e.readVarint();a=I&7,l=I>>3}if(l--,a===1||a===2)u+=e.readSVarint(),h+=e.readSVarint(),u<s&&(s=u),u>y&&(y=u),h<x&&(x=h),h>C&&(C=h);else if(a!==7)throw new Error(`unknown command ${a}`)}return[s,x,y,C]}toGeoJSON(e,r,a){const l=this.extent*Math.pow(2,a),u=this.extent*e,h=this.extent*r,s=this.loadGeometry();function y(U){return[(U.x+u)*360/l-180,360/Math.PI*Math.atan(Math.exp((1-(U.y+h)*2/l)*Math.PI))-90]}function x(U){return U.map(y)}let C;if(this.type===1){const U=[];for(const N of s)U.push(N[0]);const R=x(U);C=U.length===1?{type:"Point",coordinates:R[0]}:{type:"MultiPoint",coordinates:R}}else if(this.type===2){const U=s.map(x);C=U.length===1?{type:"LineString",coordinates:U[0]}:{type:"MultiLineString",coordinates:U}}else if(this.type===3){const U=mH(s),R=[];for(const N of U)R.push(N.map(x));C=R.length===1?{type:"Polygon",coordinates:R[0]}:{type:"MultiPolygon",coordinates:R}}else throw new Error("unknown feature type");const I={type:"Feature",geometry:C,properties:this.properties};return this.id!=null&&(I.id=this.id),I}}v9.types=["Unknown","Point","LineString","Polygon"];function gH(t,e,r){t===1?e.id=r.readVarint():t===2?pH(r,e):t===3?e.type=r.readVarint():t===4&&(e._geometry=r.pos)}function pH(t,e){const r=t.readVarint()+t.pos;for(;t.pos<r;){const a=e._keys[t.readVarint()],l=e._values[t.readVarint()];e.properties[a]=l}}function mH(t){const e=t.length;if(e<=1)return[t];const r=[];let a,l;for(let u=0;u<e;u++){const h=_H(t[u]);h!==0&&(l===void 0&&(l=h<0),l===h<0?(a&&r.push(a),a=[t[u]]):a&&a.push(t[u]))}return a&&r.push(a),r}function _H(t){let e=0;for(let r=0,a=t.length,l=a-1,u,h;r<a;l=r++)u=t[r],h=t[l],e+=(h.x-u.x)*(u.y+h.y);return e}class bH{constructor(e,r){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(yH,this,r),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const r=this._pbf.readVarint()+this._pbf.pos;return new v9(this._pbf,r,this.extent,this._keys,this._values)}}function yH(t,e,r){t===15?e.version=r.readVarint():t===1?e.name=r.readString():t===5?e.extent=r.readVarint():t===2?e._features.push(r.pos):t===3?e._keys.push(r.readString()):t===4&&e._values.push(vH(r))}function vH(t){let e=null;const r=t.readVarint()+t.pos;for(;t.pos<r;){const a=t.readVarint()>>3;e=a===1?t.readString():a===2?t.readFloat():a===3?t.readDouble():a===4?t.readVarint64():a===5?t.readVarint():a===6?t.readSVarint():a===7?t.readBoolean():null}return e}class xH{constructor(e,r){this.layers=e.readFields(wH,{},r)}}function wH(t,e,r){if(t===3){const a=new bH(r,r.readVarint()+r.pos);a.length&&(e[a.name]=a)}}const BH=async(t,{z:e,x:r,y:a},l,u)=>{const s=await new Og(t).getZxy(e,r,a);if(!s||!s.data)throw new Error("");const x=new xH(new JZ(s.data)).layers[l];if(!x)throw new Error("");for(let C=0;C<x.length;C++){const I=x.feature(C);if(I.id===u)return I.properties}return console.warn("  feature_id "),null};var CH=(t,e,r,a)=>{e(re(r)),a(e())},MH=dt('<button class="bg-base flex w-full cursor-pointer items-center justify-center gap-2 rounded-full p-2 text-left"> </button>'),RH=dt('<div class="c-scroll-hidden flex grow flex-col gap-4 divide-y-2 overflow-y-auto overflow-x-hidden px-2 pb-4"><!> <div class="h-[200px] w-full shrink-0"></div></div>'),IH=(t,e,r)=>e(re(r)),UH=dt('<img alt="Icon" class="h-8 w-8 rounded-full object-cover">'),EH=dt('<button class="flex w-full cursor-pointer items-center justify-center gap-2 p-2 text-left text-base"><div class="grid shrink-0 place-items-center"><!></div> <div class="flex w-full flex-col justify-center gap-[1px]"><span> </span> <span class="text-xs"> </span></div></button>'),FH=dt('<div class="c-scroll-hidden flex grow flex-col divide-y-2 divide-gray-600 overflow-y-auto overflow-x-hidden px-2 pb-4"><!> <div class="h-[200px] w-full shrink-0"></div></div>'),TH=dt('<div class="bg-main absolute z-10 flex h-full w-[400px] flex-col gap-2"><div class="flex items-center justify-between p-2"><!> <button class="bg-base cursor-pointer rounded-full p-2"><!></button></div> <!> <!> <div class="c-fog pointer-events-none absolute bottom-0 z-10 flex h-[100px] w-full items-end justify-center pb-4 svelte-acdvpo"></div></div>');function SH(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(kg,"$showSearchMenu",r);let u=xr(e,"featureMenuData",15),h=xr(e,"inputSearchWord",15),s=xr(e,"showSelectionMarker",15),y=xr(e,"selectionMarkerLngLat",15),x=null;const C=100,I={};In(async()=>{x=await fetch(`${yC}/search_data.json`).then(se=>se.json()).then(se=>se).catch(se=>{console.error("Error fetching search data:",se)}),x.forEach(se=>{const de=se.layer_id,le=Ip.find(ae=>ae.id===de),he=le?le.metaData.location:null;he&&(I[de]=he)})});let U=er($n([]));const R=async se=>{if(se.propId){const de=await BH(`${vC}/fac_search.pmtiles`,se.tile,se.layerId,se.featureId),le={layerId:se.layerId,properties:de,point:se.point,featureId:se.featureId};u(le)}fi.easeTo({center:se.point,zoom:17}),y(se.point),s(!0)},N=async se=>{if(!x){console.error("Search data is not loaded yet.");return}const le=new lu(x,{keys:["search_values"],threshold:.1}).search(se,{limit:C}),he=le.map(K=>{const oe=K.item;return{name:oe.name,location:I[oe.layer_id]||null,tile:oe.tile_coords,point:oe.point,layerId:oe.layer_id,featureId:oe.feature_id,propId:oe.prop_id}}),V=(await jz(se)).slice(0,C-le.length).map(({geometry:{coordinates:K},properties:oe})=>{const ce=oe.addressCode?h9(oe.addressCode):null;return{point:K,name:oe.title,location:ce}});ht(U,[...he,...V],!0)},D=["","",""];var O=Mr(),H=Dt(O);{var W=se=>{var de=TH(),le=Pe(de),he=Pe(le);qZ(he,{get layerEntries(){return e.layerEntries},searchFeature:we=>N(we),get results(){return re(U)},set results(we){ht(U,we,!0)},get inputSearchWord(){return h()},set inputSearchWord(we){h(we)}});var ae=Ze(he,2);ae.__click=()=>{kg.set(!1)};var V=Pe(ae);br(V,{icon:"material-symbols:close-rounded",class:"text-main w-4] h-4"}),Fe(ae),Fe(le);var K=Ze(le,2);{var oe=we=>{var Ve=RH(),ut=Pe(Ve);Qi(ut,17,()=>D,Rn,(nt,rt)=>{var ft=MH();ft.__click=[CH,h,rt,N];var _t=Pe(ft,!0);Fe(ft),hr(()=>_r(_t,re(rt))),Xe(nt,ft)}),Ki(2),Fe(Ve),Xe(we,Ve)};Ut(K,we=>{re(U)||we(oe)})}var ce=Ze(K,2);{var ye=we=>{var Ve=FH(),ut=Pe(Ve);Qi(ut,17,()=>re(U),Rn,(nt,rt)=>{var ft=EH();ft.__click=[IH,R,rt];var _t=Pe(ft),gt=Pe(_t);{var Je=Ct=>{var Mt=UH();hr(()=>Mn(Mt,"src",Kg[re(rt).propId].image)),Xe(Ct,Mt)};Ut(gt,Ct=>{re(rt).propId&&Kg[re(rt).propId]&&Ct(Je)})}Fe(_t);var je=Ze(_t,2),Qe=Pe(je),pt=Pe(Qe,!0);Fe(Qe);var $e=Ze(Qe,2),wt=Pe($e,!0);Fe($e),Fe(je),Fe(ft),hr(()=>{_r(pt,re(rt).name),_r(wt,re(rt).location??"---")}),Xe(nt,ft)}),Ki(2),Fe(Ve),Xe(we,Ve)};Ut(ce,we=>{re(U)&&we(ye)})}Ki(2),Fe(de),Ri(3,de,()=>js,()=>({duration:300,x:-100,opacity:0})),Xe(se,de)};Ut(H,se=>{l()&&se(W)})}Xe(t,O),gr(),a()}qi(["click"]);var NH=dt('<div class="css-svg-container svelte-cbomfq"><svg width="271" height="60" viewBox="0 0 271 40" id="forestlogotitle" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-cbomfq"><path d="M115.45 8.13H114.394V13.815H115.45V8.13Z" fill="white" class="svelte-cbomfq"></path><path d="M112.444 11.054V12.847C111.58 12.933 110.591 12.49 110.591 10.972C110.591 9.84498 111.256 9.091 112.224 9.091C113.017 9.091 113.365 9.291 113.5 9.427V8.40201C113.5 8.40201 113.051 8.13101 112.227 8.13101C110.994 8.13101 109.534 8.88499 109.534 10.994C109.534 13.089 110.995 13.815 112.144 13.815C112.707 13.815 113.104 13.815 113.501 13.642V11.054H112.444Z" fill="white" class="svelte-cbomfq"></path><path d="M119.327 9.091V8.13H116.321V13.814H117.378V11.206H119.327V10.246H117.378V9.091H119.327Z" fill="white" class="svelte-cbomfq"></path><path d="M167.536 9.073V8.112H164.53V13.796H165.587V11.188H167.536V10.228H165.587V9.073H167.536Z" fill="white" class="svelte-cbomfq"></path><path d="M121.96 13.814C123.009 13.814 123.859 13.141 123.859 12.083V8.13H122.802V12.083C122.802 12.515 122.44 12.854 121.959 12.854C121.479 12.854 121.116 12.514 121.116 12.083V8.13H120.06V12.083C120.062 13.142 120.912 13.814 121.96 13.814Z" fill="white" class="svelte-cbomfq"></path><path d="M134.163 8.349C134.046 8.261 133.669 8.129 133.158 8.129C131.903 8.129 130.765 8.99901 130.765 10.971C130.765 12.91 131.898 13.814 133.157 13.814C133.655 13.814 133.897 13.72 134.136 13.564V12.664C133.85 12.813 133.655 12.853 133.157 12.853C132.323 12.853 131.821 12.019 131.821 10.971C131.821 9.89001 132.323 9.09201 133.157 9.09201C133.655 9.09201 133.851 9.13801 134.163 9.26901V8.349Z" fill="white" class="svelte-cbomfq"></path><path d="M140.901 8.129C140.437 8.129 139.357 8.129 139.357 8.129V13.815H140.899C142.68 13.815 143.371 12.411 143.371 10.918C143.372 9.362 142.668 8.129 140.901 8.129ZM140.9 12.853C140.692 12.853 140.414 12.853 140.414 12.853V9.09201H140.9C141.881 9.09201 142.315 9.94498 142.315 10.972C142.314 11.963 141.881 12.853 140.9 12.853Z" fill="white" class="svelte-cbomfq"></path><path d="M150.948 8.134L149.895 9.60901L148.839 8.13199H147.775V13.813H148.831V10.104L149.897 11.521L150.948 10.12V13.813H152.005V8.134H150.948Z" fill="white" class="svelte-cbomfq"></path><path d="M147.083 9.09V8.129H144.035V13.817H147.083V12.856H145.091V11.332H147.041V10.372H145.091V9.09H147.083Z" fill="white" class="svelte-cbomfq"></path><path d="M156.749 8.11401H155.569L154.583 10.166L153.596 8.11401H152.417L154.059 11.536V13.798H155.116V11.536L156.749 8.11401Z" fill="white" class="svelte-cbomfq"></path><path d="M161.473 8.112C162.72 8.112 163.787 8.85201 163.787 10.954C163.787 12.506 163.2 13.796 161.473 13.796C159.951 13.796 159.16 12.575 159.16 10.954C159.159 9.00501 160.242 8.112 161.473 8.112ZM160.216 10.958C160.216 11.759 160.547 12.874 161.473 12.874C162.161 12.874 162.73 12.2 162.73 10.954C162.73 9.85401 162.156 9.07199 161.473 9.07199C160.596 9.07199 160.216 10.081 160.216 10.958Z" fill="white" class="svelte-cbomfq"></path><path d="M129.73 13.813H130.832L129.207 8.12799H127.955L126.33 13.813H127.432L127.907 12.151H129.254L129.73 13.813ZM128.183 11.19L128.582 9.79401L128.981 11.19H128.183Z" fill="white" class="svelte-cbomfq"></path><path d="M137.802 13.813H138.904L137.279 8.12799H136.027L134.402 13.813H135.504L135.979 12.151H137.327L137.802 13.813ZM136.254 11.19L136.653 9.79401L137.052 11.19H136.254Z" fill="white" class="svelte-cbomfq"></path><path d="M252.396 12.782V8.06H251.339V13.743H254.572V12.782H252.396Z" fill="white" class="svelte-cbomfq"></path><path d="M248.668 13.743C249.718 13.743 250.567 13.069 250.567 12.012V8.06H249.51V12.012C249.51 12.444 249.148 12.783 248.667 12.783C248.188 12.783 247.824 12.444 247.824 12.012V8.06H246.767V12.012C246.769 13.069 247.619 13.743 248.668 13.743Z" fill="white" class="svelte-cbomfq"></path><path d="M260.204 13.743C261.253 13.743 262.102 13.069 262.102 12.012V8.06H261.045V12.012C261.045 12.444 260.683 12.783 260.203 12.783C259.723 12.783 259.359 12.444 259.359 12.012V8.06H258.302V12.012C258.304 13.069 259.154 13.743 260.204 13.743Z" fill="white" class="svelte-cbomfq"></path><path d="M237.241 8.05801C236.776 8.05801 235.696 8.05801 235.696 8.05801V13.744H237.239C239.02 13.744 239.71 12.34 239.71 10.848C239.71 9.28999 239.007 8.05801 237.241 8.05801ZM237.239 12.781C237.03 12.781 236.753 12.781 236.753 12.781V9.01999H237.239C238.219 9.01999 238.653 9.873 238.653 10.901C238.653 11.892 238.22 12.781 237.239 12.781Z" fill="white" class="svelte-cbomfq"></path><path d="M270.235 9.01801V8.05701H267.188V13.745H270.235V12.784H268.243V11.261H270.193V10.3H268.243V9.01801H270.235Z" fill="white" class="svelte-cbomfq"></path><path d="M229.713 13.743H230.816L229.191 8.05701H227.939L226.314 13.743H227.416L227.892 12.081H229.24L229.713 13.743ZM228.165 11.12L228.564 9.724L228.963 11.12H228.165Z" fill="white" class="svelte-cbomfq"></path><path d="M233.966 8.06V11.3L232.303 8.06H231.246V13.743H232.303V10.508L233.966 13.743H235.022V8.06H233.966Z" fill="white" class="svelte-cbomfq"></path><path d="M265.946 11.921C265.77 11.362 265.563 11.148 265.436 11.065C265.829 10.796 266.137 10.308 266.137 9.67099C266.137 8.79399 265.469 8.06 264.739 8.06H262.864V13.744H263.921V11.26H264.238C264.539 11.26 264.743 11.561 264.827 11.86C264.864 11.994 265.438 13.745 265.438 13.745H266.754C266.451 13.175 266.165 12.621 265.946 11.921ZM263.886 9.01999H264.517C264.903 9.01999 265.046 9.46799 265.046 9.67099C265.046 9.91099 264.902 10.299 264.517 10.299H263.886V9.01999Z" fill="white" class="svelte-cbomfq"></path><path d="M257.713 8.06H254.165V9.01901H255.411V13.743H256.467V9.01901H257.713V8.06Z" fill="white" class="svelte-cbomfq"></path><path d="M246.019 8.27802C245.902 8.19002 245.526 8.05899 245.014 8.05899C243.759 8.05899 242.621 8.928 242.621 10.901C242.621 12.84 243.755 13.743 245.013 13.743C245.511 13.743 245.753 13.649 245.993 13.493V12.594C245.707 12.743 245.511 12.782 245.013 12.782C244.18 12.782 243.677 11.949 243.677 10.901C243.677 9.819 244.18 9.022 245.013 9.022C245.511 9.022 245.707 9.067 246.019 9.198V8.27802Z" fill="white" class="svelte-cbomfq"></path><path d="M214.083 8.112V11.353L212.421 8.112H211.364V13.796H212.421V10.562L214.083 13.796H215.14V8.112H214.083Z" fill="white" class="svelte-cbomfq"></path><path d="M182.747 11.974C182.572 11.415 182.364 11.201 182.238 11.119C182.63 10.849 182.939 10.361 182.939 9.724C182.939 8.847 182.271 8.11301 181.54 8.11301H179.665V13.797H180.722V11.313H181.04C181.341 11.313 181.544 11.614 181.628 11.913C181.666 12.047 182.24 13.798 182.24 13.798H183.555C183.253 13.228 182.967 12.674 182.747 11.974ZM180.687 9.073H181.318C181.705 9.073 181.848 9.51999 181.848 9.72299C181.848 9.96299 181.704 10.352 181.318 10.352H180.687V9.073Z" fill="white" class="svelte-cbomfq"></path><path d="M194.741 8.112H191.193V9.07101H192.438V13.796H193.495V9.07101H194.741V8.112Z" fill="white" class="svelte-cbomfq"></path><path d="M187.678 13.438C187.949 13.638 188.435 13.796 188.902 13.796C189.807 13.796 190.956 13.505 190.956 12.044C190.956 11.376 190.713 10.791 189.707 10.304C189.175 10.046 188.77 9.93101 188.77 9.53601C188.77 9.14901 189.064 9.01001 189.55 9.01001C189.923 9.01001 190.434 9.29901 190.489 9.36801V8.409C190.489 8.409 189.945 8.112 189.36 8.112C188.678 8.112 187.713 8.48101 187.713 9.53601C187.713 10.482 188.556 10.879 188.985 11.034C189.465 11.207 189.891 11.556 189.891 12.044C189.891 12.507 189.528 12.835 188.901 12.835C188.463 12.835 187.858 12.614 187.677 12.478V13.438H187.678Z" fill="white" class="svelte-cbomfq"></path><path d="M197.911 13.438C198.182 13.638 198.669 13.796 199.136 13.796C200.04 13.796 201.189 13.505 201.189 12.044C201.189 11.376 200.947 10.791 199.941 10.304C199.408 10.046 199.003 9.93101 199.003 9.53601C199.003 9.14901 199.297 9.01001 199.784 9.01001C200.156 9.01001 200.667 9.29901 200.723 9.36801V8.409C200.723 8.409 200.178 8.112 199.594 8.112C198.912 8.112 197.946 8.48101 197.946 9.53601C197.946 10.482 198.789 10.879 199.219 11.034C199.699 11.207 200.125 11.556 200.125 12.044C200.125 12.507 199.761 12.835 199.135 12.835C198.697 12.835 198.092 12.614 197.91 12.478V13.438H197.911Z" fill="white" class="svelte-cbomfq"></path><path d="M206.816 8.078H205.759V13.763H206.816V8.078Z" fill="white" class="svelte-cbomfq"></path><path d="M187.073 9.073V8.112H184.026V13.8H187.073V12.84H185.083V11.315H187.032V10.354H185.083V9.073H187.073Z" fill="white" class="svelte-cbomfq"></path><path d="M210.637 9.073V8.112H207.589V13.8H210.637V12.84H208.646V11.315H210.595V10.354H208.646V9.073H210.637Z" fill="white" class="svelte-cbomfq"></path><path d="M222.885 9.073V8.112H219.837V13.8H222.885V12.84H220.894V11.315H222.843V10.354H220.894V9.073H222.885Z" fill="white" class="svelte-cbomfq"></path><path d="M176.739 8.112C177.987 8.112 179.053 8.85201 179.053 10.954C179.053 12.506 178.467 13.796 176.739 13.796C175.218 13.796 174.426 12.575 174.426 10.954C174.426 9.00501 175.509 8.112 176.739 8.112ZM175.483 10.958C175.483 11.759 175.813 12.874 176.739 12.874C177.428 12.874 177.996 12.2 177.996 10.954C177.996 9.85401 177.422 9.07199 176.739 9.07199C175.862 9.07199 175.483 10.081 175.483 10.958Z" fill="white" class="svelte-cbomfq"></path><path d="M205.095 8.33099C204.978 8.24399 204.601 8.112 204.089 8.112C202.834 8.112 201.696 8.98101 201.696 10.954C201.696 12.893 202.829 13.796 204.088 13.796C204.587 13.796 204.827 13.703 205.067 13.546V12.647C204.782 12.796 204.587 12.835 204.088 12.835C203.255 12.835 202.753 12.003 202.753 10.954C202.753 9.87201 203.255 9.07501 204.088 9.07501C204.587 9.07501 204.782 9.12101 205.095 9.25201V8.33099Z" fill="white" class="svelte-cbomfq"></path><path d="M219.234 8.33099C219.117 8.24399 218.74 8.112 218.229 8.112C216.973 8.112 215.836 8.98101 215.836 10.954C215.836 12.893 216.969 13.796 218.227 13.796C218.726 13.796 218.967 13.703 219.207 13.546V12.647C218.921 12.796 218.726 12.835 218.227 12.835C217.394 12.835 216.892 12.003 216.892 10.954C216.892 9.87201 217.394 9.07501 218.227 9.07501C218.726 9.07501 218.921 9.12101 219.234 9.25201V8.33099Z" fill="white" class="svelte-cbomfq"></path><path d="M45.19 32.12C47.463 29.464 48.708 26.324 48.942 24.245L48.976 23.224H45.072V20.756H50.041V19.735L45.072 19.733V17.424H44.051V19.732L38.036 19.729V33.054H36.15V17.424H35.129V33.054H33.241V19.764H32.22V36.473H33.241V34.075H39.057V20.757H44.051V23.225H40.14L40.178 24.246C40.391 26.307 41.618 29.449 43.877 32.119C42.466 33.625 40.801 34.816 39.054 35.384V36.405C41.246 35.656 43.07 34.362 44.532 32.846C46.005 34.39 47.849 35.712 50.074 36.472V35.451C48.303 34.874 46.614 33.657 45.19 32.12ZM41.214 24.245H47.908C47.57 26.616 46.306 29.231 44.536 31.37C42.781 29.224 41.534 26.608 41.214 24.245Z" fill="white" class="svelte-cbomfq"></path><path d="M69.11 32.951H60.693V30.69H67.787V25.919H53.625V23.94H67.788V19.21H60.689V17.425H59.668V19.21H52.605V30.69H59.674V32.951H51.257V33.972H59.674V36.48H60.695V33.972H69.112V32.951H69.11ZM53.625 20.231H66.767V22.92H53.625V20.231ZM53.625 26.94H66.768V29.67H53.625V26.94Z" fill="white" class="svelte-cbomfq"></path><path d="M71.312 29.308V17.425H70.292V30.328H78.708V36.479H79.729V30.328H88.146V29.308H71.312Z" fill="white" class="svelte-cbomfq"></path><path d="M70.417 35.458V36.479C72.783 36.135 75.464 33.856 75.733 30.985H74.712C74.414 33.218 72.146 35.161 70.417 35.458Z" fill="white" class="svelte-cbomfq"></path><path d="M87.944 35.458V36.479C85.578 36.135 82.897 33.856 82.629 30.985H83.65C83.947 33.218 86.216 35.161 87.944 35.458Z" fill="white" class="svelte-cbomfq"></path><path d="M85.875 27.835H86.896V17.425H73.353V27.833L85.875 27.835ZM74.374 26.813V24.542H85.876V26.813H74.374ZM74.374 23.522V21.481H85.876V23.522H74.374ZM85.875 18.444V20.46H74.374V18.444H85.875Z" fill="white" class="svelte-cbomfq"></path><path d="M107.181 20.485V19.465H98.764V17.424H97.743V19.465H89.326V20.485H93.277V35.458H89.326V36.479H107.18V35.458H103.224V20.485H107.181ZM102.205 35.458H94.299V20.485H102.205V35.458Z" fill="white" class="svelte-cbomfq"></path><path d="M127.759 19.158H119.542V17.612H118.113V19.158H109.9V20.587H115.874C114.86 22.971 111.606 24.739 109.9 24.856V26.285C112.247 26.055 116.44 23.957 117.411 20.588H118.113V26.788H119.542V20.588H120.244C121.216 23.957 125.408 26.055 127.755 26.285V24.856C126.049 24.74 122.795 22.971 121.781 20.587H127.76V19.158H127.759Z" fill="white" class="svelte-cbomfq"></path><path d="M117.213 29.17H118.632V27.741H115.692V26.216H114.263V27.741H109.908V29.17H112.779C112.381 32.037 110.963 33.603 109.56 34.347V36.031C111.658 35.154 113.802 32.938 114.226 29.171H114.264V36.748H115.693V29.171H115.742C116.118 30.736 117.171 32.205 118.892 32.844V31.159C117.876 30.623 117.442 30.049 117.213 29.17Z" fill="white" class="svelte-cbomfq"></path><path d="M124.954 29.17H127.76V27.741H123.391V26.208H121.962V27.741H118.969V29.17H120.41C120.012 32.037 118.594 33.603 117.191 34.347V36.031C119.289 35.154 121.433 32.938 121.857 29.171H121.962V36.748H123.391V29.171H123.507C123.931 32.939 126.075 35.154 128.173 36.031V34.347C126.77 33.603 125.352 32.037 124.954 29.17Z" fill="white" class="svelte-cbomfq"></path><path d="M173.946 17.618H172.516C172.346 21.136 170.096 25.097 166.563 27.489V29.173C168.09 28.36 169.44 27.242 170.557 25.935V36.748H171.986V23.693C173.071 21.891 173.765 19.628 173.946 17.618Z" fill="white" class="svelte-cbomfq"></path><path d="M138.237 21.517H136.539C136.829 24.367 137.575 25.259 138.492 26.484V28.422C137.062 27.183 135.596 25.13 135.191 21.517H135.181V36.747H133.752V21.517H133.704C133.491 27.401 131.853 31.244 128.813 33.343V31.659C131.666 28.786 132.107 25.583 132.357 21.516H129.469V20.086H133.752V17.611H135.181V20.086H138.238V21.517H138.237Z" fill="white" class="svelte-cbomfq"></path><path d="M138.528 21.517H140.21C139.929 25.527 139.34 28.595 136.676 31.603V33.287C139.706 31.194 141.342 27.369 141.564 21.517H141.616V36.747H143.045V21.517H143.112C143.326 27.401 144.964 31.244 148.004 33.343V31.659C145.183 28.653 144.716 25.557 144.462 21.516H147.329V20.086H143.046V17.611H141.617V20.086H138.529V21.517H138.528Z" fill="white" class="svelte-cbomfq"></path><path d="M166.641 21.511V20.082H158.401V17.612H156.972V20.082H148.782V21.511H151.863C152.643 24.902 154.418 28.214 156.705 30.882C154.436 33.242 151.686 34.98 148.782 35.316V36.744C151.873 36.524 155.057 34.685 157.709 31.979C160.361 34.685 163.546 36.524 166.636 36.744V35.316C163.733 34.98 160.982 33.243 158.713 30.882C161.001 28.214 162.775 24.902 163.556 21.511H166.641ZM157.709 29.761C155.618 27.256 154.052 24.256 153.328 21.511H162.09C161.366 24.256 159.8 27.256 157.709 29.761Z" fill="white" class="svelte-cbomfq"></path><path d="M231.128 17.692H220.547V19.121H231.128V17.692Z" fill="white" class="svelte-cbomfq"></path><path d="M270.198 25.397H255.146V26.825H270.198V25.397Z" fill="white" class="svelte-cbomfq"></path><path d="M201.714 17.692H185.897V19.121H200.228C199.828 23.985 197.343 26.192 194.061 26.442V20.938H192.632V27.868C192.632 31.243 189.767 35.318 185.897 35.318V36.747C190.38 36.747 194.057 32.508 194.061 27.876C197.789 27.644 201.214 25.346 201.665 19.121H201.715V17.692H201.714Z" fill="white" class="svelte-cbomfq"></path><path d="M210.825 20.167V17.692H209.395V20.167H203.094V21.596H209.395V24.649C209.395 30.5 206.413 33.736 203.094 35.319V36.748C206.938 35.687 210.824 31.129 210.824 24.662V21.597H217.482C217.482 24.854 217.482 33.143 217.482 33.448C217.482 34.528 216.781 35.323 215.791 35.323C215.449 35.323 213.016 35.323 213.016 35.323V36.752C213.016 36.752 215.236 36.752 215.702 36.752C217.412 36.752 218.912 35.538 218.912 33.539C218.912 33.048 218.912 20.245 218.912 20.245V20.169H210.825V20.167Z" fill="white" class="svelte-cbomfq"></path><path d="M236.364 22.718H220.547V24.148H228.124V28.814C228.124 32.683 224.912 35.322 220.547 35.322V36.751C225.032 36.751 229.553 34.125 229.553 28.814V24.148H236.365V22.718H236.364Z" fill="white" class="svelte-cbomfq"></path><path d="M236.365 17.692H234.937V19.215H236.365V17.692Z" fill="white" class="svelte-cbomfq"></path><path d="M233.742 17.692H232.389V19.215H233.742V17.692Z" fill="white" class="svelte-cbomfq"></path><path d="M184.418 22.456V20.772C182.231 22.418 179.548 23.842 177.043 24.252C177.043 20.762 177.043 17.611 177.043 17.611H175.614C175.614 17.611 175.614 32.912 175.614 33.529C175.614 35.734 177.114 36.742 178.825 36.742C179.29 36.742 184.415 36.742 184.415 36.742V35.314C184.415 35.314 179.076 35.314 178.735 35.314C177.745 35.314 177.043 34.519 177.043 33.439C177.043 33.252 177.043 29.483 177.043 25.669C179.828 25.187 182.833 23.603 184.418 22.456Z" fill="white" class="svelte-cbomfq"></path><path d="M253.829 17.61H238.087V19.039H253.829V17.61Z" fill="white" class="svelte-cbomfq"></path><path d="M253.829 22.739H238.087V24.169H253.829V22.739Z" fill="white" class="svelte-cbomfq"></path><path d="M253.829 35.235C253.829 35.235 244.28 35.235 243.897 35.235C240.807 35.235 239.516 33.286 239.516 31.86C239.516 31.519 239.516 30.004 239.516 30.004H238.086C238.086 30.004 238.086 31.245 238.086 31.711C238.086 34.187 239.757 36.665 243.807 36.665C244.425 36.665 253.828 36.665 253.828 36.665V35.235H253.829Z" fill="white" class="svelte-cbomfq"></path><path d="M173.979 9.073V8.10599H170.957V13.748H172.02V9.073H173.979Z" fill="white" class="svelte-cbomfq"></path><path d="M174.136 10.325C174.115 10.745 172.991 11.847 172.152 11.227C171.983 10.294 173.706 9.95802 174.136 10.325Z" fill="white" class="svelte-cbomfq"></path><path d="M3.077 30.092C3.077 29.092 2.578 24.436 10.745 21.269C18.911 18.102 27.328 13.936 27.328 5.85199C27.328 4.99699 27.328 1.522 27.328 1.397C27.328 1.147 27.394 1.069 27.749 1.069C27.749 1.069 31.546 1.069 32.255 1.069V0.429993C32.255 0.429993 21.999 0.429993 21.745 0.429993C7.245 0.429993 2.953 12.414 2.953 19.644C2.953 23.477 2.929 30.092 2.929 30.092" fill="white" class="svelte-cbomfq"></path><path d="M3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 36.185 5.997 36.348 5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.665 39.023 6.011 37.679 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C6.011 36.185 5.997 36.348 5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.665 39.023 6.011 37.679 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M5.972 36.507C5.946 36.665 5.908 36.82 5.858 36.969C5.808 37.118 5.748 37.262 5.675 37.4C5.604 37.539 5.522 37.67 5.431 37.795C5.34 37.919 5.24 38.036 5.13 38.145C5.028 38.239 4.889 38.36 4.78 38.446C4.656 38.537 4.524 38.619 4.386 38.69C4.248 38.761 4.104 38.823 3.954 38.872C3.805 38.922 3.65 38.961 3.492 38.986C3.333 39.012 3.171 39.025 3.005 39.025C4.664 39.025 6.01 37.68 6.01 36.02C6.011 36.185 5.997 36.348 5.972 36.507Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 1.312 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 1.312 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 1.312 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.375 36.019 0.976 36.019C1.601 36.155 1.899 36.092 2.244 36.019C2.471 36.019 2.709 36.019 2.954 36.019C4.613 36.019 5.982 36.019 6.012 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.25 36.019 0.667 36.019C1.512 36.394 2.344 36.084 2.502 36.019C2.649 36.019 2.8 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.179 36.019 0.487 36.019C0.848 36.287 1.531 36.503 2.725 36.019C2.8 36.019 2.876 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.128 36.019 0.353 36.019C0.994 36.746 2.361 36.332 2.923 36.019C2.933 36.019 2.943 36.019 2.953 36.019C4.612 36.019 5.981 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.089 36.019 0.248 36.019C0.534 36.383 0.728 36.462 1.248 36.544C1.354 36.544 1.466 36.544 1.582 36.544C2.061 36.476 2.377 36.431 3.118 36.019C4.702 36.019 5.982 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.06 36.019 0.168 36.019C0.699 36.992 2.216 36.776 3.317 36.019C4.808 36.019 5.983 36.019 6.01 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.036 36.019 0.104 36.019C0.572 37.053 2.039 37.053 3.515 36.019C4.911 36.019 5.984 36.019 6.01 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0 36.019 0.02 36.019 0.057 36.019C0.464 37.341 2.392 37.1 3.718 36.019C5.014 36.019 5.986 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0.007 36.019 0.017 36.019 0.023 36.019C0.327 37.407 2.255 37.407 3.918 36.019C5.112 36.019 5.987 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.014 36.348 0 36.185 0 36.019C0.001 36.019 0.003 36.019 0.004 36.019C0.189 37.578 2.461 37.578 4.125 36.019C5.212 36.019 5.988 36.019 6.011 36.019C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.103 36.818 0.064 36.663 0.039 36.505C0.017 36.369 0.004 36.232 0 36.091C0.144 37.779 2.611 37.737 4.329 36.017C5.308 36.017 5.989 36.017 6.01 36.017C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.988999 38.252 0.879999 38.143C0.770999 38.034 0.670999 37.917 0.578999 37.793C0.487999 37.668 0.405999 37.537 0.334999 37.398C0.263999 37.26 0.201999 37.117 0.151999 36.967C0.102999 36.818 0.0639988 36.663 0.0389988 36.505C0.0289988 36.446 0.0209988 36.387 0.0159988 36.327C0.290999 37.994 2.921 37.813 4.555 36.016C5.411 36.016 5.991 36.016 6.01 36.016C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989 38.252 0.88 38.143C0.771 38.034 0.671 37.917 0.579 37.793C0.488 37.668 0.406 37.537 0.335 37.398C0.264 37.26 0.202 37.117 0.152 36.967C0.113 36.849 0.0809998 36.728 0.0559998 36.605C0.494 38.26 3.193 37.925 4.792 36.017C5.516 36.017 5.991 36.017 6.009 36.017C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M3.006 39.023C2.84 39.023 2.677 39.01 2.519 38.984C2.36 38.959 2.206 38.92 2.056 38.87C1.925 38.821 1.752 38.748 1.625 38.688C1.487 38.617 1.355 38.535 1.23 38.444C1.106 38.352 0.989004 38.252 0.880004 38.143C0.771004 38.034 0.671004 37.917 0.579004 37.793C0.488004 37.668 0.406004 37.537 0.335004 37.398C0.264004 37.26 0.202004 37.117 0.152004 36.967C0.151004 36.962 0.148004 36.955 0.146004 36.949C0.730004 38.427 3.426 38.188 5.076 36.016C5.639 36.016 5.994 36.016 6.01 36.016C6.011 37.679 4.665 39.023 3.006 39.023Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C1.312 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C1.312 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C1.311 36.019 0 36.019 0 36.019C0 33.019 3.006 31.644 3.006 29.519C3.001 30.452 2.5 31.152 1.684 32.216C1.049 33.044 0.091 34.294 0.472 35.284C0.75 36.009 2.16 36.381 2.949 35.506C3.126 35.31 3.595 34.789 3.605 33.733C3.619 32.298 3.004 30.953 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C2.997 30.455 2.495 31.154 1.677 32.216C-0.421 34.944 0.337 35.769 0.976 36.019C0.375 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C2.708 36.019 2.47 36.019 2.243 36.019C2.266 36.015 2.299 36.009 2.323 36.005C3.318 35.533 3.601 34.731 3.663 34.14C3.831 32.544 3.004 31.091 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 33.019 3.006 31.644 3.006 29.519C2.987 30.421 2.586 31.034 1.675 32.216C1.132 32.922 -0.523 35.07 0.667 36.019C0.25 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C2.8 36.019 2.649 36.019 2.502 36.019C2.572 35.987 2.666 35.945 2.736 35.913C3.215 35.434 3.757 34.892 3.805 33.733C3.833 33.052 3.678 32.579 3.481 31.979C3.086 30.779 3.004 30.53 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.995 29.741C2.935 30.345 2.659 30.802 2.437 31.169C2.773 30.643 3.005 30.109 3.005 29.519C3.004 29.586 3.002 29.675 2.995 29.741Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 34.975 0.364 34.127 0.84 33.376H0.839C0.535 33.887 -0.178 35.081 0.487 36.019C0.179 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C2.877 36.019 2.801 36.019 2.725 36.019C3.095 35.698 3.866 35.03 3.921 33.733C3.948 33.1 3.72 32.478 3.537 31.979C3.096 30.778 3.004 30.527 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.004 29.599C2.983 30.132 2.805 30.492 2.649 30.809C2.867 30.398 3.006 29.976 3.006 29.519C3.005 29.543 3.005 29.575 3.004 29.599Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.193 0.229 34.489 0.56 33.86C0.247 34.506 -0.028 35.205 0.353 36.019C0.128 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.982 36.019 4.613 36.019 2.953 36.019C3.011 35.96 3.087 35.882 3.144 35.824C4.5 34.222 3.998 32.978 3.593 31.979C3.118 30.805 3.006 30.527 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.993 29.757C2.954 30.121 2.843 30.386 2.776 30.544C2.92 30.216 3.005 29.878 3.005 29.519C3.003 29.59 3.001 29.686 2.993 29.757Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.355 0.147 34.771 0.377 34.241C0.242 34.59 -0.036 35.316 0.248 36.019C0.089 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.983 36.019 4.702 36.019 3.118 36.019C3.133 36.005 3.153 35.988 3.168 35.974C4.322 34.554 4.421 33.733 3.648 31.979C3.157 30.865 3.008 30.529 3.005 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.004 29.604C2.994 29.824 2.967 30.014 2.858 30.336C2.952 30.073 3.005 29.803 3.005 29.519C3.005 29.544 3.005 29.578 3.004 29.604Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.494 0.093 35.017 0.245 34.579C0.131 34.965 0.001 35.402 0.168 36.019C0.06 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.984 36.019 4.809 36.019 3.318 36.019C3.378 35.945 3.457 35.846 3.515 35.772C4.764 34.197 4.176 32.967 3.703 31.979C3.186 30.897 3.012 30.532 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.989 29.794C2.971 29.936 2.93 30.101 2.918 30.148C2.975 29.945 3.006 29.736 3.006 29.519C3.003 29.602 2.999 29.712 2.989 29.794Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.61 0.057 35.231 0.152 34.876C0.105 35.068 -0.005 35.518 0.104 36.019C0.036 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.985 36.019 4.911 36.019 3.516 36.019C3.537 35.993 3.565 35.956 3.585 35.93C4.811 34.178 4.449 33.304 3.584 31.647C3.093 30.707 3.006 30.211 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.003 29.627C2.994 29.782 2.983 29.844 2.961 29.966C2.99 29.82 3.006 29.671 3.006 29.519C3.005 29.551 3.005 29.595 3.003 29.627Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.721 0.03 35.44 0.083 35.171C0.035 35.504 0.011 35.671 0.057 36.019C0.02 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.986 36.019 5.014 36.019 3.718 36.019C4.741 34.497 4.76 33.704 3.811 31.979C3.259 30.976 3.007 30.518 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M2.989 29.786C3 29.698 3.006 29.609 3.006 29.518C3.002 29.599 2.998 29.706 2.989 29.786Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.831 0.012 35.65 0.034 35.475C0.011 35.674 0.013 35.74 0.023 36.019C0.008 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.988 36.019 5.113 36.019 3.918 36.019C3.938 35.99 3.964 35.951 3.983 35.92C5.054 34.146 4.661 33.328 3.669 31.648C3.11 30.703 3.007 30.189 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.004 29.596C3.005 29.571 3.006 29.544 3.006 29.519L3.004 29.596Z" fill="white" class="svelte-cbomfq"></path><path d="M0 36.019C0 35.943 0.002 35.868 0.006 35.793L0.004 36.019C0.002 36.019 0 36.019 0 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.989 36.019 5.212 36.019 4.125 36.019C4.174 35.934 4.238 35.822 4.286 35.737C5.214 34.048 4.648 33.145 3.711 31.65C3.061 30.612 3.007 30.071 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.99 36.019 5.309 36.019 4.33 36.019C5.277 34.327 4.929 33.449 3.968 31.979C3.369 31.063 3.008 30.509 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.991 36.019 5.412 36.019 4.556 36.019C4.598 35.931 4.654 35.814 4.697 35.726C5.451 34.046 4.863 33.196 3.797 31.651C3.082 30.616 3.017 30.093 3.007 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.993 36.019 5.518 36.019 4.794 36.019C4.832 35.928 4.882 35.808 4.92 35.717C5.55 34.022 5.014 33.279 3.838 31.653C3.079 30.603 3.012 30.045 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M6.011 36.019C5.995 36.019 5.64 36.019 5.077 36.019C5.673 34.397 5.393 33.663 4.124 31.98C3.36 30.967 3.023 30.428 3.006 29.519C3.006 31.644 6.011 33.019 6.011 36.019Z" fill="white" class="svelte-cbomfq"></path><path d="M3.429 32.615C3.909 35.739 2.083 36.326 0.929001 35.604C-0.297999 34.838 1.116 32.978 1.874 31.978C2.628 30.986 2.989 30.372 3.005 29.564C3.005 29.816 3.003 30.285 3.072 30.785C3.157 31.402 3.335 32.001 3.429 32.615Z" fill="white" class="svelte-cbomfq"></path><path d="M3.345 32.615C3.581 34.542 3.391 34.763 2.759 35.498C2.117 36.245 1.135 35.555 0.944996 35.409C-0.0930036 34.614 1.052 33.091 1.888 31.978C2.632 30.988 2.99 30.376 3.005 29.582C3.004 29.832 3.004 29.832 3.345 32.615Z" fill="white" class="svelte-cbomfq"></path><path d="M3.267 32.615C3.41 33.924 3.468 34.466 3.107 35.023C2.762 35.554 2.183 36.071 1.383 35.519C0.322001 34.788 0.256001 34.204 1.904 31.978C2.61 31.025 2.974 30.403 3.004 29.65C3.006 30.224 3.006 30.224 3.267 32.615Z" fill="white" class="svelte-cbomfq"></path><path d="M3.322 34.14C3.295 34.51 2.649 36.781 1.001 35.024C0.275999 34.252 1.115 33.096 1.927 31.979C2.636 31.002 2.979 30.406 3.004 29.658C3 30.638 3.209 32.835 3.264 33.288C3.297 33.567 3.339 33.917 3.322 34.14Z" fill="white" class="svelte-cbomfq"></path><path d="M3.27 34.14C3.193 35.192 2.23 36.148 1.418 35.238C0.678997 34.408 0.428997 34.129 1.953 31.979C2.653 30.992 2.971 30.428 3.003 29.695C3.003 30.022 3.003 30.022 3.011 30.242C3.043 31.127 3.087 32.209 3.087 32.218C3.114 32.86 3.316 33.488 3.27 34.14Z" fill="white" class="svelte-cbomfq"></path><path d="M3.152 34.467C2.953 35.81 1.677 35.714 1.341 35.024C0.811002 33.936 0.742002 33.796 1.988 31.979C2.86 30.706 2.97 30.298 3.001 29.732C3.004 30.464 3.034 31.196 3.022 31.928C3.009 32.777 3.279 33.611 3.152 34.467Z" fill="white" class="svelte-cbomfq"></path><path d="M3.147 34.218C2.863 36.115 1.62 35.426 1.422 35.024C1.382 34.942 1.371 34.816 1.351 34.727C1.349 34.715 1.346 34.701 1.344 34.689C1.271 34.371 1.055 34.085 1.125 33.733C1.233 33.195 1.604 32.631 2.031 31.979C2.832 30.761 2.963 30.395 3 29.769C3.018 31.411 3.018 31.411 2.975 31.871C2.959 32.041 2.93 32.487 3.006 32.975C3.173 34.047 3.173 34.047 3.147 34.218Z" fill="white" class="svelte-cbomfq"></path><path d="M3.079 34.569C2.807 35.564 1.869 35.707 1.507 35.023C1.441 34.899 1.401 34.709 1.39 34.569C1.386 34.529 1.398 34.475 1.398 34.435C1.397 34.363 1.352 34.273 1.333 34.204C1.332 34.201 1.238 33.811 1.375 33.345C1.639 32.441 2.292 31.749 2.703 30.925C2.84 30.652 2.956 30.379 3 29.805C3.006 30.066 3.013 30.326 3.017 30.587C3.029 31.247 2.884 31.899 2.892 32.559C2.897 33.234 3.271 33.875 3.079 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M3.048 34.569C2.816 35.372 2.009 35.749 1.592 35.023C1.323 34.555 1.486 33.693 1.568 33.344C1.673 32.898 1.77 32.724 2.399 31.592C2.698 31.054 2.934 30.629 2.998 29.841C3.004 29.939 3.014 30.58 3.014 30.586C3.022 31.249 2.787 31.886 2.798 32.55C2.809 33.232 3.254 33.86 3.048 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M3.017 34.569C2.789 35.316 2.031 35.683 1.652 35.023C1.34 34.48 1.553 33.805 2.086 32.672C2.094 32.654 2.899 30.932 2.996 29.886C3.006 30.109 3.011 30.582 3.011 30.586C3.015 31.257 2.706 31.878 2.695 32.547C2.692 32.688 2.786 32.971 2.787 32.973C2.843 33.068 3.188 34.01 3.017 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.985 34.569C2.809 35.127 2.34 35.306 2.337 35.307C2.228 35.346 2.058 35.32 1.952 35.273C1.854 35.23 1.754 35.115 1.701 35.023C1.698 35.019 1.464 34.581 1.596 34.139C1.88 33.19 2.398 32.685 2.402 32.684C2.463 32.66 2.569 32.674 2.618 32.718C2.676 32.772 2.656 32.899 2.683 32.973C2.704 33.034 2.756 33.104 2.791 33.159C2.862 33.27 2.978 33.728 2.978 33.732C3.069 34.191 3.021 34.453 2.985 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.998 30.925C2.956 31.441 2.794 31.701 2.792 31.702C2.762 31.732 2.691 31.773 2.657 31.748C2.647 31.741 2.652 31.533 2.7 31.271C2.759 30.953 2.863 30.646 2.931 30.33C2.961 30.188 2.957 30.041 2.995 29.9C3.011 30.776 3.011 30.776 2.998 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.954 34.569C2.815 35.005 2.427 35.235 2.338 35.268C2.23 35.309 2.062 35.269 1.955 35.225C1.876 35.192 1.794 35.097 1.751 35.023L1.616 34.569C1.628 34.208 1.628 34.208 1.789 33.805C1.816 33.737 1.971 33.377 2.319 33.002L2.577 32.958C2.585 32.963 3.183 33.847 2.954 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.922 34.569C2.806 34.936 2.449 35.184 2.34 35.229C2.233 35.272 2.067 35.218 1.958 35.177C1.896 35.154 1.835 35.079 1.802 35.023C1.691 34.837 1.644 34.334 1.72 34.139C1.85 33.805 1.928 33.603 2.132 33.344C2.176 33.289 2.22 33.199 2.279 33.162C2.353 33.115 2.477 33.043 2.558 33.075C2.606 33.095 2.862 33.577 2.899 33.731C2.936 33.885 3.024 34.247 2.922 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.991 30.925C2.949 31.361 2.823 31.52 2.822 31.521C2.794 31.533 2.743 31.511 2.725 31.485C2.688 31.428 2.723 31.327 2.735 31.26C2.749 31.183 2.766 31.08 2.781 31.004C2.825 30.777 2.89 30.556 2.935 30.329C2.962 30.193 2.967 30.054 2.997 29.918C2.995 30.254 3.022 30.59 2.991 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.891 34.569C2.8 34.853 2.432 35.168 2.341 35.19C2.23 35.217 2.071 35.167 1.962 35.129C1.919 35.114 1.886 35.055 1.853 35.023C1.751 34.922 1.748 34.707 1.709 34.569C1.699 34.532 1.753 34.055 1.937 33.732L2.242 33.325C2.316 33.259 2.448 33.158 2.543 33.187C2.595 33.204 2.606 33.297 2.634 33.344C2.667 33.401 2.727 33.466 2.769 33.516C2.815 33.57 2.844 33.663 2.862 33.732C2.919 33.964 2.991 34.252 2.891 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.983 30.925C2.967 31.08 2.967 31.08 2.84 31.407C2.761 31.32 2.761 31.32 2.768 31.26C2.779 31.159 2.791 31.025 2.809 30.925L2.996 29.944C2.991 30.855 2.991 30.855 2.983 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.859 34.569C2.78 34.816 2.39 35.14 2.342 35.151C2.23 35.177 2.047 35.163 1.965 35.083C1.881 35.002 1.806 34.829 1.74 34.569C1.739 34.566 1.734 34.155 1.985 33.732C2.045 33.633 2.128 33.498 2.217 33.425L2.523 33.299C2.525 33.3 2.808 33.688 2.82 33.732C2.898 34.024 2.96 34.256 2.859 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.977 30.925C2.967 31.01 2.967 31.01 2.859 31.294C2.839 31.264 2.8 31.249 2.793 31.21C2.783 31.156 2.803 31.082 2.808 31.027C2.828 30.845 2.995 29.976 2.996 29.968C2.99 30.8 2.99 30.8 2.977 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.828 34.569C2.772 34.744 2.378 35.106 2.345 35.113C2.233 35.137 2.053 35.115 1.97 35.036C1.931 35 1.775 34.572 1.774 34.569C1.773 34.566 1.732 34.23 2.038 33.732C2.08 33.664 2.135 33.566 2.199 33.518C2.282 33.457 2.415 33.356 2.513 33.384C2.515 33.384 2.788 33.745 2.793 33.764C2.876 34.076 2.926 34.264 2.828 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.969 30.925C2.963 30.98 2.919 31.091 2.869 31.22C2.807 31.135 2.807 31.135 2.826 30.949C2.831 30.903 2.993 30.001 2.994 29.994C2.989 30.75 2.989 30.75 2.969 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.797 34.569C2.764 34.673 2.388 35.066 2.347 35.075C2.304 35.084 2.005 35.004 1.975 34.975C1.879 34.883 1.822 34.7 1.806 34.569C1.79 34.439 1.831 34.262 1.874 34.139C1.875 34.136 2.046 33.756 2.179 33.612C2.252 33.532 2.398 33.424 2.503 33.45C2.509 33.451 3.007 33.915 2.797 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.972 30.848C2.966 30.899 2.952 30.969 2.877 31.166C2.825 31.059 2.825 31.059 2.839 30.925C2.844 30.872 2.991 30.026 2.993 30.019C2.989 30.718 2.989 30.718 2.972 30.848Z" fill="white" class="svelte-cbomfq"></path><path d="M2.766 34.569C2.755 34.604 2.352 35.036 2.349 35.036C2.329 35.041 1.999 34.928 1.981 34.91C1.978 34.908 1.726 34.635 1.909 34.139C1.91 34.136 2.135 33.734 2.16 33.707C2.239 33.622 2.382 33.491 2.495 33.516C2.5 33.518 2.969 33.941 2.766 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.977 30.759C2.956 30.923 2.934 30.982 2.885 31.111C2.835 30.965 2.822 30.924 2.991 30.045C2.989 30.652 2.989 30.652 2.977 30.759Z" fill="white" class="svelte-cbomfq"></path><path d="M2.771 34.248C2.758 34.345 2.775 34.484 2.727 34.569C2.643 34.716 2.515 34.952 2.35 34.991C2.236 35.018 2.07 34.928 1.986 34.845C1.768 34.629 1.94 34.144 1.942 34.139C1.986 34.029 2.058 33.881 2.141 33.795C2.168 33.767 2.471 33.579 2.485 33.582C2.526 33.59 2.654 33.82 2.777 34.105C2.794 34.146 2.777 34.206 2.771 34.248Z" fill="white" class="svelte-cbomfq"></path><path d="M2.98 30.669C2.958 30.859 2.949 30.885 2.892 31.055C2.854 30.909 2.837 30.849 2.99 30.07C2.99 30.349 2.989 30.59 2.98 30.669Z" fill="white" class="svelte-cbomfq"></path><path d="M2.688 34.569C2.625 34.705 2.501 34.91 2.354 34.942C2.239 34.967 2.084 34.857 1.994 34.782C1.941 34.737 1.92 34.636 1.905 34.569C1.904 34.565 1.906 34.125 2.126 33.882C2.16 33.843 2.459 33.646 2.478 33.65C2.5 33.655 2.731 34.076 2.746 34.139C2.773 34.267 2.741 34.451 2.688 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.925 30.925C2.919 30.947 2.907 30.978 2.901 30.999C2.869 30.867 2.851 30.795 2.99 30.094C2.989 30.594 2.989 30.684 2.925 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.647 34.569C2.593 34.688 2.485 34.868 2.356 34.893C2.24 34.916 2.094 34.791 2 34.718C1.962 34.688 1.95 34.615 1.937 34.569C1.936 34.566 1.948 34.147 2.109 33.969C2.118 33.959 2.463 33.716 2.467 33.717C2.471 33.718 2.697 34.128 2.699 34.139C2.727 34.267 2.701 34.451 2.647 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.914 30.925C2.912 30.931 2.909 30.939 2.907 30.945C2.881 30.838 2.86 30.754 2.987 30.12C2.988 30.551 2.989 30.653 2.914 30.925Z" fill="white" class="svelte-cbomfq"></path><path d="M2.607 34.569C2.562 34.671 2.469 34.826 2.359 34.845C2.241 34.866 2.105 34.725 2.006 34.655C1.984 34.639 1.979 34.595 1.97 34.569C1.969 34.566 2.003 34.16 2.093 34.058C2.184 33.954 2.324 33.752 2.458 33.782C2.578 33.808 2.633 34.019 2.655 34.139C2.68 34.268 2.66 34.451 2.607 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.914 30.893C2.893 30.708 2.885 30.64 2.986 30.145C2.986 30.575 2.986 30.583 2.914 30.893Z" fill="white" class="svelte-cbomfq"></path><path d="M2.568 34.569C2.531 34.653 2.454 34.782 2.362 34.798C2.36 34.798 2.032 34.636 2.005 34.569C1.954 34.448 2.016 34.251 2.086 34.139C2.161 34.021 2.314 33.818 2.451 33.846C2.55 33.866 2.597 34.04 2.612 34.139C2.633 34.268 2.62 34.45 2.568 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.92 30.843C2.904 30.648 2.899 30.581 2.984 30.169C2.984 30.566 2.976 30.604 2.92 30.843Z" fill="white" class="svelte-cbomfq"></path><path d="M2.528 34.569C2.5 34.635 2.438 34.739 2.366 34.75C2.262 34.766 2.107 34.666 2.066 34.569C2.014 34.448 2.092 34.254 2.158 34.139C2.213 34.044 2.337 33.889 2.444 33.91C2.52 33.926 2.558 34.061 2.568 34.139C2.585 34.269 2.58 34.45 2.528 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.927 30.793C2.923 30.731 2.913 30.648 2.919 30.587C2.919 30.585 2.974 30.233 2.982 30.194C2.982 30.55 2.967 30.616 2.927 30.793Z" fill="white" class="svelte-cbomfq"></path><path d="M2.489 34.569C2.468 34.618 2.423 34.694 2.369 34.702C2.292 34.714 2.178 34.64 2.146 34.569C2.093 34.449 2.174 34.257 2.232 34.139C2.266 34.069 2.359 33.96 2.436 33.975C2.601 34.009 2.492 34.563 2.489 34.569Z" fill="white" class="svelte-cbomfq"></path><path d="M2.933 30.744C2.93 30.696 2.922 30.634 2.927 30.587C2.927 30.584 2.977 30.238 2.982 30.219C2.98 30.491 2.968 30.561 2.933 30.744Z" fill="white" class="svelte-cbomfq"></path><path d="M2.373 34.655C2.322 34.663 2.248 34.615 2.227 34.569C2.172 34.45 2.259 34.261 2.306 34.139C2.323 34.095 2.382 34.032 2.428 34.04C2.497 34.055 2.493 34.093 2.45 34.568C2.447 34.604 2.407 34.65 2.373 34.655Z" fill="white" class="svelte-cbomfq"></path><path d="M2.938 30.694C2.937 30.662 2.931 30.619 2.934 30.587C2.943 30.486 2.968 30.355 2.979 30.255C2.958 30.587 2.958 30.587 2.938 30.694Z" fill="white" class="svelte-cbomfq"></path><path d="M2.376 34.608C2.354 34.612 2.319 34.589 2.31 34.569C2.254 34.451 2.351 34.266 2.382 34.139C2.386 34.124 2.407 34.104 2.422 34.107C2.438 34.11 2.453 34.114 2.412 34.569C2.41 34.585 2.392 34.606 2.376 34.608Z" fill="white" class="svelte-cbomfq"></path><path d="M2.943 30.645C2.94 30.574 2.956 30.48 2.965 30.411C2.961 30.48 2.956 30.575 2.943 30.645Z" fill="white" class="svelte-cbomfq"></path><path d="M2.948 30.594C2.948 30.585 2.95 30.573 2.951 30.564C2.951 30.573 2.95 30.585 2.948 30.594Z" fill="white" class="svelte-cbomfq"></path><path d="M3.328 25.519C3.953 18.581 8.646 10.35 15.516 6.95599C20.704 4.39299 22.516 4.14299 25.954 0.955994" stroke="white" stroke-width="0.3118" stroke-linecap="round" class="svelte-cbomfq"></path></svg></div>');function YH(t){var e=NH();Xe(t,e)}const PH=()=>{const{subscribe:t,set:e,update:r}=Gn({text:"",x:0,y:0,visible:!1});return{subscribe:t,show(a,l){e({text:l,x:a.clientX,y:a.clientY,visible:!0})},hide(){r(a=>({...a,visible:!1}))}}},LH=PH();var QH=()=>Ys.set(!0),kH=()=>Zs.set("edit"),DH=dt('<div class="bg-main absolute left-2 top-2 z-10 flex flex-col gap-2 rounded-full p-2 text-base"><ui><button class="hover:text-accent bg-main pointer-events-auto cursor-pointer rounded-full p-2 text-left text-base duration-150"><!></button></ui> <div class="w-hull bg-base h-[1px] rounded-full"></div> <ui><button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!></button></ui></div>');function zH(t,e){fr(e,!1);const[r,a]=sn(),l=()=>kr(zs,"$showDataMenu",r),u=()=>kr(kg,"$showSearchMenu",r),h=()=>{Ys.set(!1),zs.set(!l())};Zs.subscribe(se=>{Ys.set(!1)});const s=()=>{kg.set(!u())};Wl();var y=DH(),x=Pe(y),C=Pe(x);C.__click=[QH];var I=Pe(C);br(I,{icon:"ic:round-menu",class:"h-8 w-8"}),Fe(C),Fe(x);var U=Ze(x,4),R=Pe(U);R.__click=s;var N=Pe(R);br(N,{icon:"stash:search-solid",class:"h-8 w-8"}),Fe(R);var D=Ze(R,2);D.__click=[kH];var O=Pe(D);br(O,{icon:"ic:round-layers",class:"h-8 w-8"}),Fe(D);var H=Ze(D,2);H.__click=h;var W=Pe(H);br(W,{icon:"material-symbols:data-saver-on-rounded",class:"h-8 w-8"}),Fe(H),Fe(U),Fe(y),Xe(t,y),gr(),a()}qi(["click"]);var ZH=()=>Zs.set("edit"),HH=dt('<div class="absolute left-0 top-0 z-30 h-full w-full bg-black/50" role="button" tabindex="0"></div> <div class="bg-main absolute left-0 top-0 z-30 flex h-full w-[400px] flex-col gap-2 p-2 text-base"><div class="flex items-center justify-between"><!> <button class="bg-base cursor-pointer rounded-full p-2"><!></button></div> <ui><button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none"></span></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none"></span></button></ui> <div class="w-hull bg-base h-[1px] rounded-full"></div> <ui><button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none"></span></button> <button class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150"><!> <span class="select-none"></span></button> <a class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150" href="https://github.com/forestacdev/enshurin-viewer" target="_blank" rel="noopener noreferrer"><!> <span>GitHub</span></a> <a class="hover:text-accent transition-text flex w-full cursor-pointer items-center justify-start gap-2 p-2 duration-150" href="https://www.forest.ac.jp/" target="_blank" rel="noopener noreferrer"><!> <span>HP</span></a></ui> <ui class="mt-auto">Ver. 0.1.0 beta</ui></div>',1);function OH(t,e){fr(e,!1);const[r,a]=sn(),l=()=>kr(zs,"$showDataMenu",r),u=()=>kr(Pg,"$showInfoDialog",r),h=()=>kr(Lg,"$showTermsDialog",r),s=()=>kr(Ys,"$showSideMenu",r),y=()=>{Ys.set(!1),zs.set(!l())},x=()=>{Ys.set(!1),Pg.set(!u())},C=()=>{Ys.set(!1),Lg.set(!h())};Zs.subscribe(N=>{Ys.set(!1)}),Wl();var I=Mr(),U=Dt(I);{var R=N=>{var D=HH(),O=Dt(D);O.__click=()=>Ys.set(!1),O.__keydown=gt=>{(gt.key==="Enter"||gt.key===" ")&&Ys.set(!1)};var H=Ze(O,2),W=Pe(H),se=Pe(W);YH(se);var de=Ze(se,2);de.__click=()=>Ys.set(!1);var le=Pe(de);br(le,{icon:"material-symbols:close-rounded",class:"text-main h-4 w-4"}),Fe(de),Fe(W);var he=Ze(W,2),ae=Pe(he);ae.__click=[ZH];var V=Pe(ae);br(V,{icon:"ic:round-layers",class:"h-8 w-8"}),Ki(2),Fe(ae);var K=Ze(ae,2);K.__click=y;var oe=Pe(K);br(oe,{icon:"material-symbols:data-saver-on-rounded",class:"h-8 w-8"}),Ki(2),Fe(K),Fe(he);var ce=Ze(he,4),ye=Pe(ce);ye.__click=C;var we=Pe(ye);br(we,{icon:"majesticons:note-text",class:"h-8 w-8"}),Ki(2),Fe(ye);var Ve=Ze(ye,2);Ve.__click=x;var ut=Pe(Ve);br(ut,{icon:"akar-icons:info-fill",class:"h-8 w-8"}),Ki(2),Fe(Ve);var nt=Ze(Ve,2),rt=Pe(nt);br(rt,{icon:"mdi:github",class:"h-8 w-8"}),Ki(2),Fe(nt);var ft=Ze(nt,2),_t=Pe(ft);br(_t,{icon:"mdi:web",class:"h-8 w-8"}),Ki(2),Fe(ft),Fe(ce),Ki(2),Fe(H),Ri(3,O,()=>fs,()=>({duration:200})),Ri(3,H,()=>js,()=>({duration:200,x:-100,opacity:0})),Xe(N,D)};Ut(U,N=>{s()&&N(R)})}Xe(t,I),gr(),a()}qi(["click","keydown"]);var XH=dt('<div class="c-player-marker z-50 grid scale-75 place-items-center svelte-8jzl6m"><svg xmlns="http://www.w3.org/2000/svg" width="73" height="73" fill="none" class="svelte-8jzl6m"><path fill="#333" d="M36.5 2 59 64 36.5 50.5 14 64 36.5 2Z" class="svelte-8jzl6m"></path><path stroke="#333" d="M36.5 2 59 64 36.5 50.5 14 64 36.5 2Z" class="svelte-8jzl6m"></path></svg></div>');function VH(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Xl,"$isStreetView",r);In(()=>{});var u=Mr(),h=Dt(u);{var s=y=>{var x=XH();Xe(y,x)};Ut(h,y=>{l()&&y(s)})}Xe(t,u),gr(),a()}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.20.0
 * @author George Michael Brower
 * @license MIT
 */class po{constructor(e,r,a,l,u="div"){this.parent=e,this.object=r,this.property=a,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(u),this.domElement.classList.add("controller"),this.domElement.classList.add(l),this.$name=document.createElement("div"),this.$name.classList.add("name"),po.nextNameID=po.nextNameID||0,this.$name.id=`lil-gui-name-${++po.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",h=>h.stopPropagation()),this.domElement.addEventListener("keyup",h=>h.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(a)}name(e){return this._name=e,this.$name.textContent=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const r=this.parent.add(this.object,this.property,e);return r.name(this._name),this.destroy(),r}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.getValue()!==e&&(this.object[this.property]=e,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class GH extends po{constructor(e,r,a){super(e,r,a,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function I4(t){let e,r;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?r=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?r=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(r=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),r?"#"+r:!1}const jH={isPrimitive:!0,match:t=>typeof t=="string",fromHexString:I4,toHexString:I4},z0={isPrimitive:!0,match:t=>typeof t=="number",fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},KH={isPrimitive:!1,match:t=>Array.isArray(t),fromHexString(t,e,r=1){const a=z0.fromHexString(t);e[0]=(a>>16&255)/255*r,e[1]=(a>>8&255)/255*r,e[2]=(a&255)/255*r},toHexString([t,e,r],a=1){a=255/a;const l=t*a<<16^e*a<<8^r*a<<0;return z0.toHexString(l)}},$H={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,r=1){const a=z0.fromHexString(t);e.r=(a>>16&255)/255*r,e.g=(a>>8&255)/255*r,e.b=(a&255)/255*r},toHexString({r:t,g:e,b:r},a=1){a=255/a;const l=t*a<<16^e*a<<8^r*a<<0;return z0.toHexString(l)}},qH=[jH,z0,KH,$H];function WH(t){return qH.find(e=>e.match(t))}class JH extends po{constructor(e,r,a,l){super(e,r,a,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=WH(this.initialValue),this._rgbScale=l,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const u=I4(this.$text.value);u&&this._setValueFromHexString(u)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const r=this._format.fromHexString(e);this.setValue(r)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class ym extends po{constructor(e,r,a){super(e,r,a,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",l=>{l.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class eO extends po{constructor(e,r,a,l,u,h){super(e,r,a,"number"),this._initInput(),this.min(l),this.max(u);const s=h!==void 0;this.step(s?h:this._getImplicitStep(),s),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,r=!0){return this._step=e,this._stepExplicit=r,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let r=(e-this._min)/(this._max-this._min);r=Math.max(0,Math.min(r,1)),this.$fill.style.width=r*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const r=()=>{let W=parseFloat(this.$input.value);isNaN(W)||(this._stepExplicit&&(W=this._snap(W)),this.setValue(this._clamp(W)))},a=W=>{const se=parseFloat(this.$input.value);isNaN(se)||(this._snapClampSetValue(se+W),this.$input.value=this.getValue())},l=W=>{W.key==="Enter"&&this.$input.blur(),W.code==="ArrowUp"&&(W.preventDefault(),a(this._step*this._arrowKeyMultiplier(W))),W.code==="ArrowDown"&&(W.preventDefault(),a(this._step*this._arrowKeyMultiplier(W)*-1))},u=W=>{this._inputFocused&&(W.preventDefault(),a(this._step*this._normalizeMouseWheel(W)))};let h=!1,s,y,x,C,I;const U=5,R=W=>{s=W.clientX,y=x=W.clientY,h=!0,C=this.getValue(),I=0,window.addEventListener("mousemove",N),window.addEventListener("mouseup",D)},N=W=>{if(h){const se=W.clientX-s,de=W.clientY-y;Math.abs(de)>U?(W.preventDefault(),this.$input.blur(),h=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(se)>U&&D()}if(!h){const se=W.clientY-x;I-=se*this._step*this._arrowKeyMultiplier(W),C+I>this._max?I=this._max-C:C+I<this._min&&(I=this._min-C),this._snapClampSetValue(C+I)}x=W.clientY},D=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",D)},O=()=>{this._inputFocused=!0},H=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",r),this.$input.addEventListener("keydown",l),this.$input.addEventListener("wheel",u,{passive:!1}),this.$input.addEventListener("mousedown",R),this.$input.addEventListener("focus",O),this.$input.addEventListener("blur",H)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(H,W,se,de,le)=>(H-W)/(se-W)*(le-de)+de,r=H=>{const W=this.$slider.getBoundingClientRect();let se=e(H,W.left,W.right,this._min,this._max);this._snapClampSetValue(se)},a=H=>{this._setDraggingStyle(!0),r(H.clientX),window.addEventListener("mousemove",l),window.addEventListener("mouseup",u)},l=H=>{r(H.clientX)},u=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u)};let h=!1,s,y;const x=H=>{H.preventDefault(),this._setDraggingStyle(!0),r(H.touches[0].clientX),h=!1},C=H=>{H.touches.length>1||(this._hasScrollBar?(s=H.touches[0].clientX,y=H.touches[0].clientY,h=!0):x(H),window.addEventListener("touchmove",I,{passive:!1}),window.addEventListener("touchend",U))},I=H=>{if(h){const W=H.touches[0].clientX-s,se=H.touches[0].clientY-y;Math.abs(W)>Math.abs(se)?x(H):(window.removeEventListener("touchmove",I),window.removeEventListener("touchend",U))}else H.preventDefault(),r(H.touches[0].clientX)},U=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",U)},R=this._callOnFinishChange.bind(this),N=400;let D;const O=H=>{if(Math.abs(H.deltaX)<Math.abs(H.deltaY)&&this._hasScrollBar)return;H.preventDefault();const se=this._normalizeMouseWheel(H)*this._step;this._snapClampSetValue(this.getValue()+se),this.$input.value=this.getValue(),clearTimeout(D),D=setTimeout(R,N)};this.$slider.addEventListener("mousedown",a),this.$slider.addEventListener("touchstart",C,{passive:!1}),this.$slider.addEventListener("wheel",O,{passive:!1})}_setDraggingStyle(e,r="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${r}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:r,deltaY:a}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(r=0,a=-e.wheelDelta/120,a*=this._stepExplicit?1:10),r+-a}_arrowKeyMultiplier(e){let r=this._stepExplicit?1:10;return e.shiftKey?r*=10:e.altKey&&(r/=10),r}_snap(e){let r=0;return this._hasMin?r=this._min:this._hasMax&&(r=this._max),e-=r,e=Math.round(e/this._step)*this._step,e+=r,e=parseFloat(e.toPrecision(15)),e}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class tO extends po{constructor(e,r,a,l){super(e,r,a,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(l)}options(e){return this._values=Array.isArray(e)?e:Object.values(e),this._names=Array.isArray(e)?e:Object.keys(e),this.$select.replaceChildren(),this._names.forEach(r=>{const a=document.createElement("option");a.textContent=r,this.$select.appendChild(a)}),this.updateDisplay(),this}updateDisplay(){const e=this.getValue(),r=this._values.indexOf(e);return this.$select.selectedIndex=r,this.$display.textContent=r===-1?e:this._names[r],this}}class rO extends po{constructor(e,r,a){super(e,r,a,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",l=>{l.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}var iO=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  font-weight: 600;
  padding: 0 var(--padding);
  width: 100%;
  text-align: left;
  background: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  border: none;
}
.lil-gui .controller button {
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
}
@media (hover: hover) {
  .lil-gui .controller button:hover {
    background: var(--hover-color);
  }
  .lil-gui .controller button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui .controller button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function nO(t){const e=document.createElement("style");e.innerHTML=t;const r=document.querySelector("head link[rel=stylesheet], head style");r?document.head.insertBefore(e,r):document.head.appendChild(e)}let x5=!1;class P_{constructor({parent:e,autoPlace:r=e===void 0,container:a,width:l,title:u="Controls",closeFolders:h=!1,injectStyles:s=!0,touchStyles:y=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("button"),this.$title.classList.add("title"),this.$title.setAttribute("aria-expanded",!0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(u),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),y&&this.domElement.classList.add("allow-touch-styles"),!x5&&s&&(nO(iO),x5=!0),a?a.appendChild(this.domElement):r&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),l&&this.domElement.style.setProperty("--width",l+"px"),this._closeFolders=h}add(e,r,a,l,u){if(Object(a)===a)return new tO(this,e,r,a);const h=e[r];switch(typeof h){case"number":return new eO(this,e,r,a,l,u);case"boolean":return new GH(this,e,r);case"string":return new rO(this,e,r);case"function":return new ym(this,e,r)}console.error(`gui.add failed
	property:`,r,`
	object:`,e,`
	value:`,h)}addColor(e,r,a=1){return new JH(this,e,r,a)}addFolder(e){const r=new P_({parent:this,title:e});return this.root._closeFolders&&r.close(),r}load(e,r=!0){return e.controllers&&this.controllers.forEach(a=>{a instanceof ym||a._name in e.controllers&&a.load(e.controllers[a._name])}),r&&e.folders&&this.folders.forEach(a=>{a._title in e.folders&&a.load(e.folders[a._title])}),this}save(e=!0){const r={controllers:{},folders:{}};return this.controllers.forEach(a=>{if(!(a instanceof ym)){if(a._name in r.controllers)throw new Error(`Cannot save GUI with duplicate property "${a._name}"`);r.controllers[a._name]=a.save()}}),e&&this.folders.forEach(a=>{if(a._title in r.folders)throw new Error(`Cannot save GUI with duplicate folder "${a._title}"`);r.folders[a._title]=a.save()}),r}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const r=this.$children.clientHeight;this.$children.style.height=r+"px",this.domElement.classList.add("transition");const a=u=>{u.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",a))};this.$children.addEventListener("transitionend",a);const l=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=l+"px"})}),this}title(e){return this._title=e,this.$title.textContent=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(a=>a.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(r=>{e=e.concat(r.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(r=>{e=e.concat(r.foldersRecursive())}),e}}const aO=[{id:"2d095ab2-c2c6-477e-ba12-daed8b8585be",angleX:345.6,angleY:33.12,angleZ:0},{id:"806d8a3d-5293-453e-9582-80004d2d06c6",angleX:0,angleY:180,angleZ:0},{id:"a4548c3b-a0b7-4ede-a138-c5dc6b875933",angleX:0,angleY:169.92,angleZ:0},{id:"7f74c57d-c9ef-42fc-9fb7-a27d06be2f84",angleX:0,angleY:195.48,angleZ:0},{id:"63fef656-419e-4d3a-9e54-bd3a7a87c682",angleX:0,angleY:22.68,angleZ:0},{id:"f0c9820f-5b58-48ee-99e5-7955e6158884",angleX:0,angleY:185.04,angleZ:0},{id:"bc9bbd19-91ef-4851-8182-3db226e0368d",angleX:0,angleY:190.08,angleZ:0},{id:"dcddcc93-94eb-4ef4-86b9-c02c3cf50bd9",angleX:0,angleY:331.56,angleZ:0},{id:"d3f205e4-2f37-44e5-a2df-04d5d312ed4d",angleX:0,angleY:0,angleZ:0},{id:"18720b37-aea0-46b7-a26e-3f517fab2963",angleX:0,angleY:178.92,angleZ:0},{id:"8eab0199-39e9-43f0-a6ff-b209c86c1190",angleX:6.48,angleY:174.24,angleZ:352.44},{id:"54bbbad1-16d6-41d3-9e02-a69b18a68818",angleX:0,angleY:169.56,angleZ:0},{id:"195b0c47-9ab8-4ef0-92ec-6dae7c45bf4d",angleX:0,angleY:121.32,angleZ:0},{id:"4e9ae76e-1cd1-40d8-842d-c73ea77d31c3",angleX:0,angleY:0,angleZ:0},{id:"5fbb39cc-da39-4993-aac1-da8fffa277b7",angleX:0,angleY:105.12,angleZ:345.96},{id:"c07bdcc3-4f9f-44b0-b3e8-3062d76c1755",angleX:10.44,angleY:149.76,angleZ:343.44},{id:"e48ce9ff-a7af-4303-82e4-907b63ae1f15",angleX:0,angleY:312.12,angleZ:0},{id:"fe8ce83a-1deb-4746-ad57-d065869542db",angleX:0,angleY:0,angleZ:0},{id:"92edfca3-f2cf-4712-947a-fd9ce9bd2443",angleX:351,angleY:24.84,angleZ:0},{id:"fb9da0b1-94b7-4d70-8311-a1b3815a6bf8",angleX:0,angleY:242.64,angleZ:0},{id:"784ffbf9-d075-4590-9f4d-88da92332743",angleX:0,angleY:160.92,angleZ:0},{id:"7d6c4174-0c20-43bf-bc33-1d1f8de0c67c",angleX:0,angleY:63.36,angleZ:0},{id:"f46fa0c6-29bf-4515-b3a8-625f3caf8915",angleX:0,angleY:210.24,angleZ:0},{id:"c4143759-f84c-4d16-b348-2db5c4586ef8",angleX:0,angleY:236.52,angleZ:0},{id:"68669c1b-3c4b-4648-af9b-2b06bbadb69e",angleX:0,angleY:339.12,angleZ:0},{id:"f0446006-4b3c-484d-a60f-89c1a35d440b",angleX:349.2,angleY:340.92,angleZ:357.12},{id:"ccb8bd2f-23d5-4110-8ccb-7896d1192715",angleX:0,angleY:202.32,angleZ:0},{id:"c5d29148-d5f9-4335-98cc-7ace506b0822",angleX:0,angleY:60.12,angleZ:0},{id:"5ceb5e76-be1a-4646-9169-c2621e61d1e1",angleX:0,angleY:309.24,angleZ:0},{id:"ebe9aeea-f131-459d-87e2-04d8567d642f",angleX:0,angleY:0,angleZ:0},{id:"72f6af4d-d44e-420c-b329-05ede39a7c04",angleX:0,angleY:338.04,angleZ:0},{id:"6cc0ab91-1a88-4215-9871-17ab4561a8c0",angleX:0,angleY:157.68,angleZ:0},{id:"820923e2-c0ca-43fd-b328-23c5524169ce",angleX:0,angleY:206.28,angleZ:0},{id:"954c4373-7a88-4b4b-89d4-22aa8ed866c1",angleX:12.6,angleY:243.36,angleZ:0},{id:"e6bdea15-6779-4521-b45e-63045ed19114",angleX:0,angleY:77.04,angleZ:0},{id:"5fd6f5be-c0b1-4bf7-9614-45b124600bad",angleX:0,angleY:159.84,angleZ:0},{id:"fafb18e7-fe8a-4dd8-9f29-7cb74f61803f",angleX:0,angleY:271.44,angleZ:0},{id:"6b1ccdb8-789d-4ae5-9115-d205b029913b",angleX:0,angleY:284.76,angleZ:14.76},{id:"99df69ad-ffe5-4b50-98f5-a8c8e904b322",angleX:0,angleY:22.68,angleZ:0},{id:"52f84182-eeb8-48ea-ab9e-59cc0c7b8f09",angleX:0,angleY:45.72,angleZ:0},{id:"d2c14319-9692-4c9a-bc20-cc115228ddc1",angleX:0,angleY:0,angleZ:0},{id:"24cb17a8-1535-41d6-b8c8-afe22460a5ce",angleX:0,angleY:54.72,angleZ:0},{id:"b993ed6d-ff21-4ed6-9e45-b3d43f918951",angleX:0,angleY:324.72,angleZ:0},{id:"3a1f6bbd-11ba-4350-a16d-7618f0ed6de1",angleX:0,angleY:0,angleZ:0},{id:"a27b8577-698c-4239-88db-f9f026c91fbb",angleX:0,angleY:329.04,angleZ:0},{id:"2f1d27bb-2011-4988-8def-272f2fc27a42",angleX:0,angleY:324.72,angleZ:0},{id:"eb3a85b9-38b7-4d54-aa0d-c478cb98f901",angleX:337.68,angleY:0,angleZ:0},{id:"642d6c4d-4733-4422-bfe8-2960f12caef7",angleX:0,angleY:32.4,angleZ:0},{id:"cf19f20d-94b7-4ae8-91c3-744f8dfa5aba",angleX:0,angleY:76.68,angleZ:0},{id:"2b3776ff-7665-4024-907b-72af43004e60",angleX:0,angleY:231.84,angleZ:0},{id:"81dd6481-87d4-46a7-9759-2cdbe8c32dbf",angleX:0,angleY:338.04,angleZ:0},{id:"644a68f5-b574-4cf6-818e-95b7c18e2c02",angleX:0,angleY:54.36,angleZ:0},{id:"bb6cab72-30a0-45cf-a8c2-ca1761381d4e",angleX:0,angleY:72.72,angleZ:0},{id:"266eed65-5752-44fc-95d8-0107a4124bc0",angleX:0,angleY:165.96,angleZ:0},{id:"00cff6a2-caeb-43c3-a967-b5c8cc2f386b",angleX:0,angleY:182.16,angleZ:0},{id:"18ef3957-8def-4643-9762-d56ac06ee276",angleX:8.28,angleY:235.08,angleZ:0},{id:"33494c1f-9292-4f10-ae1f-4598ba176230",angleX:0,angleY:0,angleZ:0},{id:"8e8da934-5ef1-4c9e-a4dc-742e0b0c68f3",angleX:0,angleY:0,angleZ:0},{id:"ff70f739-ecc3-4c95-8560-2cd9f0a7238e",angleX:0,angleY:226.08,angleZ:0},{id:"24d7e470-d984-476d-9cf3-e5531b7b413b",angleX:0,angleY:309.24,angleZ:0},{id:"16c58973-2bd5-4965-96e2-e0a98b807a9c",angleX:0,angleY:62.28,angleZ:0},{id:"82d238e7-2645-4664-b8ad-8011e91be5a5",angleX:10.08,angleY:180,angleZ:341.64},{id:"dca135b2-149d-426c-ac4e-1ca528788d14",angleX:0,angleY:347.76,angleZ:360},{id:"5581ce61-2ab5-4501-9b82-c8e7b7bcecc7",angleX:0,angleY:238.68,angleZ:0},{id:"9bb88468-a55e-4fb5-8a95-1d4a6b80de39",angleX:0,angleY:81.36,angleZ:0},{id:"b49e3c58-807e-4459-845a-6acec3e01c54",angleX:0,angleY:101.16,angleZ:0},{id:"81d26a76-c4a4-4a41-a4ac-40bae55cd83a",angleX:0,angleY:326.52,angleZ:0},{id:"e05a4426-a94c-4675-895d-837440e3f12e",angleX:18.36,angleY:306,angleZ:7.92},{id:"4966444b-f798-4492-88e7-59c9794d3a74",angleX:0,angleY:195.48,angleZ:0},{id:"785a861c-f536-471b-90db-9fb3fdd5414d",angleX:0,angleY:155.52,angleZ:0},{id:"4169e804-e082-46d5-8286-f170c4c6a6b6",angleX:0,angleY:40.32,angleZ:0},{id:"1068e5d1-c464-4506-89eb-153a71fa0dc0",angleX:0,angleY:351,angleZ:0},{id:"b25c999a-4d12-48ea-bdb7-00c6b9eb7e1e",angleX:0,angleY:271.08,angleZ:0},{id:"f8399f26-4b05-40db-b0d2-27564bdcd5eb",angleX:0,angleY:307.8,angleZ:0},{id:"e79d2113-b714-4743-98fa-db97f9efd9d8",angleX:0,angleY:313.56,angleZ:0},{id:"cde292ce-d6c5-42bb-88d4-2055c3498818",angleX:345.96,angleY:86.76,angleZ:345.96},{id:"51fc8a9c-4884-484c-ade7-aaf400f4b672",angleX:0,angleY:95.4,angleZ:0},{id:"75d09c4a-01a4-4ecc-8540-7856a9a87a64",angleX:0,angleY:169.56,angleZ:0},{id:"443b5e4a-cdd0-416f-ae3e-72b4807146eb",angleX:0,angleY:14.04,angleZ:0},{id:"c1a0e780-39fb-4b53-86d8-5c7027275f13",angleX:0,angleY:201.96,angleZ:0},{id:"7a0b51c3-20d1-4f83-9ccc-828db3e54b00",angleX:0,angleY:191.52,angleZ:0},{id:"31ae9696-1480-428e-8a95-1e5e39f02d94",angleX:0,angleY:323.64,angleZ:0},{id:"c175fcf3-baf9-4b8a-a5a6-f2cae26a2d70",angleX:0,angleY:202.32,angleZ:0},{id:"9ebe4076-473a-4896-9bb7-6ed2441b7637",angleX:0,angleY:180.36,angleZ:0},{id:"65236f73-de4a-4b11-9d79-1d99fe3bc60e",angleX:351.72,angleY:74.88,angleZ:0},{id:"494f8ad9-f560-4df8-b684-5eb2a993aaed",angleX:0,angleY:262.8,angleZ:0},{id:"f692e86a-2276-4ea7-bc91-87cd6ef3f93a",angleX:357.84,angleY:60.12,angleZ:0},{id:"e27f0531-fb28-4e32-b389-bf9beda7b936",angleX:0,angleY:157.68,angleZ:0},{id:"e9fa81f3-8e30-4c98-bbee-c43da9bee234",angleX:0,angleY:29.16,angleZ:0},{id:"089db877-2e33-4f84-b33d-b50fd80be429",angleX:0,angleY:0,angleZ:0},{id:"97e48621-d378-4a21-8705-cb76ca6a5dc8",angleX:0,angleY:230.04,angleZ:0},{id:"b8ad9125-4f3b-47cf-91d1-018dda7e3345",angleX:351.72,angleY:85.32,angleZ:0},{id:"9facc575-a168-4054-8259-14c7b17eb50e",angleX:0,angleY:162.36,angleZ:0},{id:"a2ca91d8-7d5c-4b43-ac8f-bd85c3f35f4b",angleX:345.6,angleY:106.2,angleZ:0},{id:"6b491c73-0a6b-4ab1-a70f-03aeeb0ab151",angleX:0,angleY:7.92,angleZ:0},{id:"00c21f02-7750-4f0c-928e-88ca235e9b67",angleX:0,angleY:244.8,angleZ:0},{id:"464fdb88-ae7c-40e2-a833-7a8aa93eb938",angleX:0,angleY:114.48,angleZ:0},{id:"c68adabc-1bbc-47ba-b17f-a92c9314fdee",angleX:0,angleY:137.52,angleZ:0},{id:"fdbfaac8-9ada-4d5e-ad8f-f19f94de7945",angleX:0,angleY:7.92,angleZ:0},{id:"2f877e3c-02d6-4cb0-b432-35a2db82a33b",angleX:0,angleY:156.6,angleZ:0},{id:"b98098a0-a39e-47e2-9ca6-ce2c918a80f1",angleX:0,angleY:186.12,angleZ:0},{id:"70603dac-68ec-451c-aa7d-4f7ae3ea60eb",angleX:0,angleY:335.16,angleZ:0},{id:"54f1a5ef-52f4-47fc-9143-6f5f47261e1e",angleX:0,angleY:122.76,angleZ:0},{id:"cbec785b-641f-4eb2-ade1-79e57b224973",angleX:0,angleY:151.92,angleZ:0},{id:"827c817d-0923-4613-a769-76d952e396ca",angleX:6.12,angleY:319.68,angleZ:6.12},{id:"266dc671-314c-4a04-b997-333cf4896954",angleX:0,angleY:345.96,angleZ:0},{id:"e6c26e1f-f9a3-4f3f-9d99-0e846e280a94",angleX:0,angleY:135.36,angleZ:0},{id:"b8f6bf36-930c-4825-91ef-c448ae0e39dc",angleX:0,angleY:10.44,angleZ:0},{id:"07e8d184-9438-42cb-a60f-2bbad92682bf",angleX:0,angleY:327.6,angleZ:0},{id:"57a943b7-7c43-435a-9986-855e58befdd0",angleX:347.76,angleY:119.16,angleZ:0},{id:"2f6d9aeb-0e31-4d9b-9cd9-d296be901ff3",angleX:0,angleY:198,angleZ:0},{id:"c3e1acad-e60c-4466-8969-ab3bcd17c88b",angleX:0,angleY:303.48,angleZ:0},{id:"1fa63746-5020-4965-bb7e-76f65702efca",angleX:0,angleY:349.92,angleZ:0},{id:"eea6f2b6-b4f0-4988-ba59-252f4128d6c2",angleX:0,angleY:311.4,angleZ:0},{id:"fbe68c4c-71d7-4a49-ad69-964cb9776db4",angleX:0,angleY:333.36,angleZ:10.44},{id:"3c1d1946-f830-40fb-92a4-c07ba33529aa",angleX:0,angleY:204.12,angleZ:0},{id:"127321ca-f0bf-4d7c-aae3-5daf4f2f8b9a",angleX:0,angleY:29.16,angleZ:0},{id:"c086e123-d912-4012-9fb9-843be0944551",angleX:0,angleY:74.88,angleZ:0},{id:"23345942-6797-4005-8427-440be93a2dcf",angleX:0,angleY:192.24,angleZ:0},{id:"521b00fd-916b-4b8f-a201-3494f4e24bc8",angleX:0,angleY:0,angleZ:0},{id:"0af2b4ad-9a68-4c25-accb-722d369ddbeb",angleX:0,angleY:159.84,angleZ:0},{id:"706fe51b-2ee6-4918-ab11-4311894ff7b8",angleX:0,angleY:203.4,angleZ:0},{id:"0640ba69-2e08-46fa-aba7-28434bd39191",angleX:0,angleY:0,angleZ:0},{id:"26e1f54b-a336-49e4-b1bc-9858a750edca",angleX:0,angleY:141.48,angleZ:0},{id:"13314772-fe08-4088-b84f-9c15282ae495",angleX:0,angleY:213.84,angleZ:0},{id:"b0397178-5992-4daf-8f35-2d052b0aa5cf",angleX:0,angleY:107.28,angleZ:0},{id:"1241a9d6-d02d-43ab-8ef7-db2659bb36b5",angleX:7.56,angleY:244.8,angleZ:357.12},{id:"a058fb1d-afae-4725-984e-7934b778356a",angleX:351.36,angleY:156.96,angleZ:0},{id:"de03328d-71af-4365-8764-84d8cc5089f3",angleX:0,angleY:249.48,angleZ:0},{id:"f9b52d3b-d30e-4182-8c5a-15abbc8ddaed",angleX:0,angleY:10.44,angleZ:0},{id:"568ad1ef-0e4c-4f03-b004-622f7bf8e006",angleX:0,angleY:329.04,angleZ:0},{id:"0262703d-7834-4cb1-9cfc-8be6243342f4",angleX:0,angleY:60.48,angleZ:0},{id:"c814cf7a-f863-4ac2-b526-9c38f91e08bf",angleX:0,angleY:23.76,angleZ:0},{id:"427e1816-3562-4b7c-8eca-cb70131701ef",angleX:0,angleY:262.8,angleZ:0},{id:"5c22abfd-3644-4edd-a1b9-7c32b259fd8e",angleX:0,angleY:54.72,angleZ:0},{id:"7f3d289a-1f2c-429e-bef4-c57f730585ef",angleX:0,angleY:19.44,angleZ:0},{id:"0afc7f0a-0f3e-4888-9ef0-d300085cfade",angleX:0,angleY:0,angleZ:0},{id:"4cd83911-d237-4c24-9ed1-006092ab130b",angleX:0,angleY:329.04,angleZ:0},{id:"16db3bc9-6993-4792-ba52-5b39c93be075",angleX:0,angleY:222.84,angleZ:0},{id:"8a56337d-cd4d-44ab-b528-796f8ea7696e",angleX:0,angleY:92.88,angleZ:0},{id:"79daf39d-f056-4789-a9de-0a307d0d807e",angleX:0,angleY:60.12,angleZ:0},{id:"eec3ff06-c48d-4f4b-83a4-4a860b9038f4",angleX:5.4,angleY:231.84,angleZ:0},{id:"05e29ea3-f816-4d65-9bf4-09d743346025",angleX:0,angleY:153.72,angleZ:0},{id:"8cfb95c6-ffa3-415c-961a-01d2186b5f3d",angleX:0,angleY:227.16,angleZ:0},{id:"055e5fdd-41d7-4a6a-b6e4-68651a9cef61",angleX:0,angleY:236.52,angleZ:0},{id:"b326084b-7beb-4a0e-abf6-cbf4ff93d7b5",angleX:0,angleY:0,angleZ:0},{id:"f4374c5c-1d71-44ba-a3d0-806b09f987a2",angleX:0,angleY:180,angleZ:0},{id:"1c7a4117-5cb8-45d6-95cb-ff3743f11e1b",angleX:0,angleY:159.84,angleZ:0},{id:"139b3d14-371a-41f1-bf72-13005c34146a",angleX:0,angleY:0,angleZ:0},{id:"eff8984a-a037-44a9-a6d3-b67271dca211",angleX:0,angleY:186.12,angleZ:0},{id:"7466df8e-abf4-4f95-9a7e-2687c83cc113",angleX:0,angleY:37.44,angleZ:0},{id:"64576b90-1086-48bf-b906-ec2c3e1bda83",angleX:0,angleY:208.44,angleZ:0},{id:"f8c23b76-cc99-4bc8-92de-e0b9c9375a63",angleX:0,angleY:284.76,angleZ:7.56},{id:"ff9bdda5-96a0-4e9b-b9df-d0c128331fc8",angleX:0,angleY:220.32,angleZ:0},{id:"1bb2789c-badb-4268-b009-2ea4e5b8faf9",angleX:0,angleY:309.6,angleZ:0},{id:"b5cc45cd-42b1-4a9c-b19d-37b2abb7d0f0",angleX:0,angleY:216.36,angleZ:0},{id:"cd12638a-9cca-482d-98ae-391beb963efa",angleX:0,angleY:0,angleZ:0},{id:"ef0c8a1d-58e0-48f8-9d3d-e7b6e67ee0b7",angleX:0,angleY:242.64,angleZ:0},{id:"81226ed7-6310-4831-bd7b-636532f7613c",angleX:0,angleY:28.08,angleZ:0},{id:"13da355c-334e-4d93-8345-87353b9afea0",angleX:352.44,angleY:0,angleZ:8.64},{id:"fb367185-f72c-4db1-94b5-64ae54218cff",angleX:0,angleY:291.24,angleZ:0},{id:"8a2df9a4-1d55-4822-a592-5d8c9321ff01",angleX:0,angleY:190.08,angleZ:0},{id:"2deaba17-ae58-40a8-ae7d-4860ffdbe26a",angleX:0,angleY:20.16,angleZ:0},{id:"6df1449f-fdcd-4b1b-9ad7-1cf143a3d7ed",angleX:0,angleY:360,angleZ:0},{id:"ccf7dfcc-20d0-445f-bfb4-decb932ddf1d",angleX:0,angleY:307.44,angleZ:0},{id:"6424ca53-dde9-42ba-97b1-ad1dd30dbac7",angleX:0,angleY:165.24,angleZ:0},{id:"5aee96c3-4935-4640-9fe8-5e98f4bbc5b5",angleX:341.28,angleY:64.44,angleZ:0},{id:"94af7119-caa8-4ce5-af26-b9957589fb4b",angleX:0,angleY:186.12,angleZ:0},{id:"01fe1f15-5bdd-4bad-bdad-60c5de5eda07",angleX:0,angleY:138.6,angleZ:0},{id:"3fbbb9ba-1375-401b-835e-37387f97edca",angleX:0,angleY:28.44,angleZ:0},{id:"adf966f7-68fc-46fd-ba46-7535aba56e22",angleX:0,angleY:163.8,angleZ:0},{id:"67efccb5-8f40-497b-9b79-044fddda80dc",angleX:0,angleY:323.64,angleZ:0},{id:"b4a9a9e2-de86-4d41-a537-3e58489a7191",angleX:0,angleY:224.64,angleZ:0},{id:"e4efc3ac-f20b-409f-8cf6-dab3aeca894d",angleX:345.6,angleY:116.64,angleZ:0},{id:"e97b4a79-0978-4964-84e5-d0ca6ce7c3ad",angleX:0,angleY:197.64,angleZ:0},{id:"461c6238-9b6e-4d2c-9f31-42bcd78603de",angleX:0,angleY:3.96,angleZ:0},{id:"6ce11aeb-6745-49bc-a714-3f7b0a1559f9",angleX:0,angleY:132.84,angleZ:0},{id:"7bb2a421-711c-47a1-b7e8-5c8c1c6b4bfe",angleX:339.12,angleY:97.56,angleZ:0},{id:"135c0d0c-c1bd-4cfa-8d2d-1d616bfed880",angleX:0,angleY:0,angleZ:0},{id:"58b858ee-0a42-4010-9209-f526403d093a",angleX:0,angleY:226.44,angleZ:0},{id:"45e39230-5f77-4846-bfed-c6f4a362ab1f",angleX:0,angleY:351.72,angleZ:0},{id:"1303c9e1-2989-4ee5-9299-26b696279400",angleX:0,angleY:172.8,angleZ:0},{id:"fe465e59-3a83-4d25-a01a-f532bd65a5c3",angleX:0,angleY:187.2,angleZ:0},{id:"616dd84d-0025-48cc-b52d-cac7a4a709f8",angleX:0,angleY:0,angleZ:0},{id:"a30042b7-0ccc-4250-bed1-3d4e1ec4623c",angleX:0,angleY:60.48,angleZ:0},{id:"f9b7e69e-7157-4363-8a6a-8a2559e63743",angleX:355.32,angleY:159.12,angleZ:345.24},{id:"f9d0c404-369b-4f24-beec-0aa0d485b123",angleX:349.56,angleY:70.56,angleZ:0},{id:"496180f0-b156-4aa9-ad0c-d27bbe140d43",angleX:0,angleY:72.72,angleZ:360},{id:"b69e4150-06e5-4d1e-a7e2-254f33f957bb",angleX:0,angleY:303.48,angleZ:0},{id:"ec9ebeb3-11d9-41d6-aa02-2baa52053d3f",angleX:0,angleY:109.8,angleZ:0},{id:"81ebd549-40bc-4c04-b74e-08cface71827",angleX:11.88,angleY:206.64,angleZ:0},{id:"2f762319-22bc-4b89-9bba-97449334362a",angleX:0,angleY:86.76,angleZ:0},{id:"71f48cf3-ac2d-4d82-b28e-e4cda20d7270",angleX:0,angleY:321.48,angleZ:0},{id:"bff7692f-d52a-4b7e-8c24-2b2d1ed6e507",angleX:0,angleY:7.92,angleZ:0},{id:"3388376e-f176-4b35-8b15-4f8540f6da3f",angleX:0,angleY:312.12,angleZ:0},{id:"bba56b57-83fa-4d64-8167-93c34d6d8c9e",angleX:0,angleY:326.88,angleZ:0},{id:"f79249c3-1aab-45f9-b9dd-47073e325e53",angleX:8.28,angleY:247.68,angleZ:0},{id:"57fa2dba-7969-499e-a643-bf842e0eb588",angleX:0,angleY:335.16,angleZ:0},{id:"b7d87fb6-f438-48fa-bc65-b147ac220a1a",angleX:0,angleY:299.16,angleZ:0},{id:"c905e285-74b5-4082-bea4-33dd5745d2fe",angleX:2.16,angleY:309.96,angleZ:0},{id:"e0fe4510-f608-4c2e-b0d7-3e03f4770db2",angleX:0,angleY:351,angleZ:0},{id:"59b13f27-ab1f-45b1-85b3-0b8319be1784",angleX:0,angleY:267.12,angleZ:0},{id:"24cfb458-cc7c-4e07-82d0-983b70a1d232",angleX:0,angleY:309.24,angleZ:0},{id:"b4535254-6c77-4314-b1d9-305ee4759c3e",angleX:0,angleY:314.28,angleZ:16.56},{id:"8df86ef1-3146-4b3a-bdb3-df139e1e8f8c",angleX:0,angleY:327.6,angleZ:0},{id:"932aa6cc-7d93-4d41-be02-62d3c1c1439d",angleX:6.12,angleY:212.4,angleZ:0},{id:"88dcee97-eab5-4a11-911f-c179a23ec6c5",angleX:0,angleY:111.24,angleZ:0},{id:"f05ddc85-486e-4202-aaa3-506cc0abd09c",angleX:0,angleY:285.12,angleZ:0},{id:"9194fe8f-b0d3-41e9-8973-323ddfa38bd3",angleX:0,angleY:70.56,angleZ:0},{id:"21c11e67-1420-4604-b83d-acbef8c086c6",angleX:0,angleY:0,angleZ:0},{id:"931205df-5fdb-43e3-92e4-2abd37476508",angleX:0,angleY:50.4,angleZ:0},{id:"fe110639-84f5-4e7c-959d-449dcdebe987",angleX:0,angleY:68.76,angleZ:0},{id:"80273d5e-62f3-470b-bea4-3f62172a8b54",angleX:0,angleY:72.72,angleZ:0},{id:"f476affe-ba2d-437d-8a86-30924d2799c5",angleX:0,angleY:147.6,angleZ:0},{id:"17c380bf-b136-4633-b553-ff814b6ad735",angleX:0,angleY:131.4,angleZ:0},{id:"8568780f-01a4-4fac-9849-cafc08adb69e",angleX:0,angleY:293.4,angleZ:0},{id:"fdd56e3b-43f5-4a42-a47b-28856757a6e3",angleX:6.12,angleY:262.08,angleZ:0},{id:"b8ebf798-5d71-4af8-9522-0a36affc9d4a",angleX:0,angleY:10.44,angleZ:0},{id:"30a2a136-ef7c-4eaa-83ee-9a7c1d868c1a",angleX:0,angleY:208.44,angleZ:0},{id:"472756ff-c3c8-42e0-b66c-ece0b95c3690",angleX:0,angleY:351,angleZ:0},{id:"8dc89cf0-1c20-446d-855b-c4bd26f9958e",angleX:0,angleY:23.76,angleZ:0},{id:"d194c8cc-563c-40f9-a26c-1c5647fab509",angleX:0,angleY:28.08,angleZ:0},{id:"dbc39770-ca89-4fe2-8244-45dae960414b",angleX:0,angleY:56.52,angleZ:0},{id:"d6912bbe-9517-461f-b8a4-1a38d8f0f7a9",angleX:0,angleY:284.4,angleZ:0},{id:"e92928ec-3225-4c37-97ff-9f7e55f574ce",angleX:0,angleY:27.72,angleZ:0},{id:"a10afb7e-3035-42c8-983c-d67e79b1dc2d",angleX:0,angleY:23.76,angleZ:0},{id:"82573989-b50c-4134-bf31-236b260ff200",angleX:0,angleY:50.4,angleZ:0},{id:"7667102b-b839-43bc-8c57-631ba3dead76",angleX:0,angleY:329.04,angleZ:0},{id:"cf8f6370-0d97-4f2f-9847-bd046105406e",angleX:0,angleY:50.4,angleZ:0},{id:"0a8f8d58-0a78-474a-bb2b-bb2b30063173",angleX:0,angleY:0,angleZ:0},{id:"694193c7-c04c-42cc-a808-a2518360477f",angleX:0,angleY:202.32,angleZ:0},{id:"a564eea2-6a66-45ed-862c-16ea7f4f7cae",angleX:0,angleY:0,angleZ:0},{id:"0bd7732c-d114-4d2a-b03a-577c3c9fef2d",angleX:0,angleY:186.12,angleZ:0},{id:"8b7ffc70-25d4-47d8-9603-92d7726da83b",angleX:353.88,angleY:0,angleZ:8.28},{id:"d8ebc819-f558-4bac-b7b6-0aac66a99889",angleX:0,angleY:89.28,angleZ:0},{id:"42e3e904-cf13-4f4c-8b2d-3c814d6e1800",angleX:0,angleY:114.12,angleZ:0},{id:"23f0d37b-ba5b-48ce-889f-2dcfc5040879",angleX:0,angleY:0,angleZ:0},{id:"ee517e53-1a1b-4f2b-b31d-6c95d2b377b7",angleX:0,angleY:30.96,angleZ:0},{id:"5c321f14-8758-4964-aa42-f9e7c99fd751",angleX:0,angleY:307.44,angleZ:0},{id:"e2ba912e-a4f6-474f-bfb2-1e766ca84d22",angleX:0,angleY:0,angleZ:0},{id:"4f82ab87-e97c-4dfc-aa78-4857ae45608b",angleX:0,angleY:222.48,angleZ:0},{id:"7d5560a2-3ac1-489e-a40c-c2a6039e2f2a",angleX:339.12,angleY:68.76,angleZ:0},{id:"5ee52673-2a57-489b-91f3-466389349890",angleX:0,angleY:307.44,angleZ:0},{id:"a5212668-5d65-4e52-8159-d63a3db3732f",angleX:0,angleY:224.64,angleZ:0},{id:"c57141a6-65a6-4af2-af39-a0b970410f43",angleX:0,angleY:307.44,angleZ:24.12},{id:"3a675c17-b2c2-401a-b539-b2086206f5ab",angleX:0,angleY:331.56,angleZ:0},{id:"da658994-fcef-4dbe-9a2b-a5381114945d",angleX:0,angleY:0,angleZ:0},{id:"b5841a24-ac4f-4919-b4af-9e4146fa1e92",angleX:0,angleY:275.76,angleZ:0},{id:"89705ef8-9552-4efa-9fb2-14353ef1bf2b",angleX:9.72,angleY:266.76,angleZ:10.44},{id:"05e35ec3-1de6-4a2b-8e88-7a063eedd6b4",angleX:0,angleY:295.2,angleZ:0},{id:"327657c4-eeec-4340-af76-31601379ea5f",angleX:0,angleY:6.12,angleZ:0},{id:"0adbba9c-1bc2-4724-af47-4b7d7817797f",angleX:6.12,angleY:270.36,angleZ:0},{id:"8db18b71-fb3f-434d-8274-9018ae63b1a6",angleX:0,angleY:253.8,angleZ:347.4},{id:"20f1cb19-cacc-458d-9a09-0f054f7bb572",angleX:0,angleY:297.72,angleZ:0},{id:"6ca30412-a8b3-4063-9253-bc070e799b65",angleX:0,angleY:292.68,angleZ:0},{id:"9c01f6dd-330e-4790-8def-2aa1a8f98e32",angleX:0,angleY:6.12,angleZ:0},{id:"5c1c2d16-043d-4426-b8ae-6ed7abe6a5f0",angleX:0,angleY:307.8,angleZ:0},{id:"365fc2ab-6d94-4e3a-b3cc-3682f655f723",angleX:0,angleY:0,angleZ:0},{id:"3fb80330-df57-4136-bde0-e58c52694b0d",angleX:7.56,angleY:122.76,angleZ:0},{id:"53dfc28b-360c-4bd8-9475-c75463fb72c7",angleX:13.32,angleY:209.52,angleZ:0},{id:"ba8a41c5-10f2-4d02-8e6a-3c41dfb76c6c",angleX:0,angleY:78.84,angleZ:0},{id:"2c14f116-9e57-48b8-877e-a0e6afa1af3d",angleX:0,angleY:32.4,angleZ:0},{id:"94635419-73c1-41a4-b538-41404ec0f8de",angleX:0,angleY:182.16,angleZ:0},{id:"f9d647ac-b302-4d4d-bba5-09ae63072e09",angleX:15.84,angleY:194.4,angleZ:0},{id:"2707d75f-a817-432c-ad2f-1898254b96d1",angleX:0,angleY:30.96,angleZ:0},{id:"074a24a3-1dc3-4665-a60b-16844dcb631d",angleX:0,angleY:0,angleZ:0},{id:"03fc32c8-ce1d-4baf-b9f7-a0bf75368f7f",angleX:0,angleY:214.2,angleZ:0},{id:"5fad5b80-2430-46e4-855d-3a6f8cf52a60",angleX:0,angleY:37.08,angleZ:0},{id:"22b39111-10bc-4225-b921-900c49ff0227",angleX:0,angleY:347.76,angleZ:0},{id:"10a31dda-7c52-471e-a3ff-7cb98549e323",angleX:0,angleY:202.32,angleZ:0},{id:"706ca097-5443-44ac-982a-38e62c94b9b4",angleX:0,angleY:14.04,angleZ:0},{id:"a92b4801-e484-4b07-9239-5f273a1de51e",angleX:0,angleY:178.92,angleZ:0},{id:"35481545-a12f-4266-b478-098ced1aa55d",angleX:0,angleY:199.8,angleZ:0},{id:"1793a433-4548-4c75-9f82-f471e93b00f2",angleX:0,angleY:325.44,angleZ:0},{id:"5c9ec8a7-8ed4-4a08-b275-9df589605138",angleX:0,angleY:3.96,angleZ:0},{id:"b69cf6a6-2f48-40bd-b4ad-0bcd12dbc4dd",angleX:0,angleY:200.16,angleZ:0},{id:"317dfec8-7d0d-401c-b89a-17c0f5cf1aab",angleX:0,angleY:202.32,angleZ:0},{id:"c1276f28-9463-43ba-977c-482990cdc03c",angleX:0,angleY:32.4,angleZ:0},{id:"cb883bc2-4ac9-4789-9bc1-a6b3c2defec1",angleX:0,angleY:0,angleZ:0},{id:"33e62202-dc05-4bb0-9c44-67fcc9d7a0ce",angleX:0,angleY:186.12,angleZ:0},{id:"2083b59c-46fd-44f7-bafe-3fb758d17dfd",angleX:0,angleY:78.84,angleZ:0},{id:"8c73d5a3-1327-4d66-85e6-29409ee23e87",angleX:0,angleY:89.28,angleZ:0},{id:"9f73ea95-33d8-4fde-89ba-a4733d147f52",angleX:0,angleY:47.88,angleZ:0},{id:"94c1cb2a-d7ff-4857-a8bc-4c6a5b5b535d",angleX:0,angleY:296.64,angleZ:0},{id:"446ef0fc-d1d0-45d7-b060-24ab6f01c50c",angleX:0,angleY:115.2,angleZ:0},{id:"ba20286d-17d3-474a-a228-2a5b3d58dfc9",angleX:4.32,angleY:307.8,angleZ:0},{id:"bd67aec1-68e1-4378-b343-934c8fd9d710",angleX:0,angleY:325.44,angleZ:0},{id:"7bbbf293-b395-4b87-b724-fec4408714db",angleX:0,angleY:333,angleZ:0},{id:"bdab5079-224d-48d7-bde6-e4d10164f5a2",angleX:20.88,angleY:155.88,angleZ:341.28},{id:"0d114500-bdb8-4663-ab70-6fe98b2732bb",angleX:0,angleY:204.12,angleZ:0},{id:"efc34cd3-9c24-4197-a58c-50c918aff8f4",angleX:0,angleY:275.76,angleZ:7.56},{id:"b7b3d4cf-c4ff-4978-bafe-7aecfa03b179",angleX:0,angleY:337.68,angleZ:0},{id:"c4ef8c64-8224-4997-b1d8-b6fdf4a0b1c8",angleX:20.16,angleY:226.44,angleZ:0},{id:"fb2cbc26-deb9-4b01-9cf2-34b3f52e6e5b",angleX:0,angleY:195.12,angleZ:0},{id:"f426ccfc-48b5-4a73-8454-6a5fa46542a5",angleX:0,angleY:0,angleZ:0},{id:"19ff8574-e1c3-4d3e-a16d-cac9bd29aded",angleX:10.08,angleY:238.68,angleZ:0},{id:"6f828589-123f-4d59-8154-69d8e8668d5d",angleX:351,angleY:333.36,angleZ:7.56},{id:"dbb7545a-b2ec-4c6e-bcd2-4b8988b25c10",angleX:0,angleY:186.12,angleZ:0},{id:"caf3c783-bb45-4c34-b3f8-32c00ca344a6",angleX:0,angleY:161.64,angleZ:0},{id:"f5c61239-6413-4819-8494-fea41c08e7a1",angleX:10.44,angleY:160.92,angleZ:0},{id:"92bc69d3-2d62-43b0-9572-650ff3bc80b3",angleX:0,angleY:88.92,angleZ:0},{id:"087aae56-999d-4a30-9d65-cd819e082cea",angleX:0,angleY:0,angleZ:0},{id:"4fd677ea-2f7d-4169-9354-033f54fa586c",angleX:0,angleY:271.44,angleZ:0},{id:"6df4c0b2-9db1-4a70-a532-485b4f65bc7d",angleX:0,angleY:208.44,angleZ:0},{id:"a242d955-9749-463b-8648-50ce9cb0ccad",angleX:0,angleY:0,angleZ:0},{id:"a1975f69-1e2f-4af8-8378-8f579b709f5e",angleX:0,angleY:347.76,angleZ:0},{id:"2da9a6d7-b6c7-4d16-820b-8b19c469824a",angleX:0,angleY:338.04,angleZ:0},{id:"ca799b01-f12e-427b-811b-621e202bff57",angleX:0,angleY:133.56,angleZ:0},{id:"25a95402-c89a-4a93-96c8-e437bab489e1",angleX:0,angleY:66.6,angleZ:0},{id:"9e1ef4f9-d7b5-4c71-808e-31c0fa3c7f00",angleX:0,angleY:28.08,angleZ:0},{id:"669166d1-1074-496d-8fb3-480f9891d533",angleX:0,angleY:0,angleZ:0},{id:"0d74dc48-0d79-4ed3-886e-4fbcc110069a",angleX:349.56,angleY:62.28,angleZ:0},{id:"cfa203fb-30d0-403e-8c15-5193730b497b",angleX:0,angleY:23.76,angleZ:0},{id:"b72fe2a1-f7f1-43da-9ed4-757410bdb6c2",angleX:349.56,angleY:81,angleZ:0},{id:"917fb0bf-bc0f-4f3d-b1ca-198ee49d9b5b",angleX:0,angleY:329.04,angleZ:0},{id:"3c232da5-3ffe-424b-9d19-4a4cedd6cfb3",angleX:0,angleY:37.08,angleZ:0},{id:"cb07ca41-65a8-4be9-b18f-e4bbe07572a7",angleX:0,angleY:74.88,angleZ:0},{id:"de9611da-d3df-42c8-84d9-a6c7980e3110",angleX:0,angleY:19.44,angleZ:0},{id:"1c4237a9-4e4d-4e91-ad89-99c6dd00871b",angleX:0,angleY:333.36,angleZ:0},{id:"fc09be2e-7c0e-497f-8ea0-ea1cb409fe86",angleX:351.72,angleY:0,angleZ:8.28},{id:"29744b53-07c0-4421-beb6-5dec80f3472f",angleX:0,angleY:125.28,angleZ:0},{id:"07b28994-daeb-43f2-98fc-f247f8910096",angleX:0,angleY:207.36,angleZ:0},{id:"3be778aa-0a96-4ec6-af1b-e8a485bbd219",angleX:0,angleY:224.28,angleZ:0},{id:"17aabe00-ae1a-45b2-a097-3bcaffe79727",angleX:0,angleY:320.04,angleZ:0},{id:"2eeef48d-7544-4e68-9318-d322fe459550",angleX:6.12,angleY:165.24,angleZ:0},{id:"8ded9c6e-e798-4d4f-aa09-99f79c5ed896",angleX:0,angleY:147.24,angleZ:0},{id:"7174be35-d269-4cc2-9916-3d590a8d6bf6",angleX:0,angleY:99.72,angleZ:0},{id:"10b2d859-7381-452d-8bbe-cd2eb18008f9",angleX:0,angleY:202.32,angleZ:0},{id:"03c3716f-ea72-4c03-8dc3-a110c5e7f434",angleX:0,angleY:311.4,angleZ:5.4},{id:"4268001f-1b49-4991-ac65-38f83131274b",angleX:0,angleY:40.32,angleZ:0},{id:"894193c6-1dfc-4b55-b90f-c6cae1de7740",angleX:0,angleY:234.72,angleZ:0},{id:"679337fd-22a1-4ba2-97d8-1329ebd8a2a2",angleX:0,angleY:226.44,angleZ:0},{id:"cc7f68db-6d56-43f1-9cae-32346925edc9",angleX:0,angleY:181.8,angleZ:0},{id:"1dc40771-453a-4f6e-827a-5148c6ce0709",angleX:0,angleY:48.6,angleZ:0},{id:"d74d78e4-8441-43f4-bea7-e4aa8d0254fe",angleX:0,angleY:258.12,angleZ:10.44},{id:"8c227b3d-b649-4d09-8a65-350bdd6eef62",angleX:0,angleY:232.56,angleZ:0},{id:"a8d7c849-6b45-457c-83d5-98fcaa376017",angleX:0,angleY:295.56,angleZ:0},{id:"d825c44d-7702-4803-8956-4637f36224d5",angleX:12.6,angleY:212.04,angleZ:351.72},{id:"a4d1e36b-896a-4ac0-8297-444a87db9a2a",angleX:0,angleY:311.4,angleZ:3.96},{id:"b7671365-2de5-4bac-8108-d6d20033e99d",angleX:0,angleY:299.16,angleZ:0},{id:"8eec979c-341e-45d5-ade7-d01f8a562d8a",angleX:0,angleY:94.68,angleZ:0},{id:"1962c76b-fff7-4cfa-9ceb-e45ed3b9bec0",angleX:0,angleY:304.56,angleZ:0},{id:"a121230b-121e-4c8f-8891-862bf463409d",angleX:0,angleY:41.4,angleZ:0},{id:"458b7055-3f1f-4990-b5d1-97a61ada9dac",angleX:0,angleY:267.12,angleZ:0},{id:"dc2cfdc3-dd1c-4884-81e5-79a497b900d1",angleX:0,angleY:343.8,angleZ:0},{id:"f34bf230-05fe-406c-8f73-ca1cbb31ef1d",angleX:0,angleY:54.72,angleZ:0},{id:"a5c6a3ee-5c9e-421e-a0c7-09595539adcf",angleX:345.6,angleY:41.4,angleZ:0},{id:"6a427e73-4f4b-4c62-a90e-42df3cb7ab77",angleX:0,angleY:157.68,angleZ:0},{id:"60e496aa-83ab-4b33-95d8-40ed966a067f",angleX:0,angleY:266.76,angleZ:0},{id:"23c336f1-547e-4545-90a0-879afeb8e6b4",angleX:0,angleY:34.2,angleZ:0},{id:"7b9a7c8e-99d2-48b3-98dc-cb085991380f",angleX:0,angleY:0,angleZ:0},{id:"855d2309-65d9-4450-96c7-a9678b97e5ad",angleX:0,angleY:203.76,angleZ:0},{id:"6a768950-e8b9-4010-99c2-4d3fec970c8b",angleX:358.56,angleY:116.64,angleZ:354.24},{id:"b8432c5e-9d98-4020-a648-dffce4c22506",angleX:0,angleY:14.04,angleZ:0},{id:"ea25a2c5-2a9a-4996-93f7-9b3678f48e0b",angleX:0,angleY:239.76,angleZ:0},{id:"27f210e9-d92c-41a7-8457-8db8e31f2aec",angleX:0,angleY:228.6,angleZ:0},{id:"df250a25-08e1-4387-b8d9-3374c5ca420b",angleX:0,angleY:226.8,angleZ:0},{id:"78182aab-0630-4fce-8984-248dd02fa580",angleX:0,angleY:12.24,angleZ:0},{id:"5ba44018-fffb-4100-8388-05958f6ae071",angleX:0,angleY:0,angleZ:0},{id:"1d7595fa-cfda-4e44-8ce0-0cff4d474577",angleX:13.32,angleY:185.4,angleZ:343.08},{id:"d96bff50-43e0-452a-b9e7-27bd2fce7bb1",angleX:0,angleY:22.68,angleZ:0},{id:"37239315-a051-40f4-af02-3c3c5817c5e4",angleX:348.48,angleY:95.4,angleZ:350.64},{id:"efe0f634-4911-4e5e-ae64-991185ef85a0",angleX:0,angleY:0,angleZ:0},{id:"3f274290-615a-41ee-a79f-4dbbe0c3211c",angleX:0,angleY:66.6,angleZ:0},{id:"a97b6488-d714-402e-a187-22a364703662",angleX:0,angleY:271.08,angleZ:0},{id:"dd154e89-a94f-410c-b7c4-59d150cb5000",angleX:0,angleY:0,angleZ:0},{id:"320e12c8-bf94-4618-9336-d0d2cd44404a",angleX:0,angleY:149.76,angleZ:0},{id:"4fc8744d-f079-4684-899c-cacb4e968f31",angleX:0,angleY:324.72,angleZ:0},{id:"a5e166dd-8ffe-481d-ad2c-08a89ab31b37",angleX:10.44,angleY:213.84,angleZ:342.36},{id:"39587c55-516c-4083-8289-14324d155078",angleX:0,angleY:41.4,angleZ:0},{id:"670f9e5e-6bad-4a71-90a0-7721ee0070f6",angleX:0,angleY:45.72,angleZ:0},{id:"ce356f46-e4d4-4e27-8cbc-dd8a486bacc3",angleX:0,angleY:0,angleZ:0},{id:"193f9f44-1c38-403b-ac33-b3e1bf985fd8",angleX:0,angleY:151.92,angleZ:0},{id:"82303ce9-c44f-485c-8a47-f2ee89602ff3",angleX:0,angleY:209.52,angleZ:0},{id:"8f379d46-1c3c-454e-a35f-0ba2a4d574c0",angleX:0,angleY:289.08,angleZ:0},{id:"236e48d9-35f6-4301-90a9-6622a0eea679",angleX:0,angleY:200.88,angleZ:0},{id:"60c76fda-3f94-4486-a4b9-3b336bc43387",angleX:0,angleY:103.32,angleZ:0},{id:"5085a435-966c-4be8-97cf-4ae1528e5814",angleX:0,angleY:19.44,angleZ:0},{id:"d06f0b4c-b988-4052-a5e0-1c39b5c2184a",angleX:0,angleY:0,angleZ:0},{id:"364dab4c-2e29-45b4-89a6-5045aebfdb65",angleX:5.4,angleY:258.12,angleZ:0},{id:"df6e9628-82de-4780-bd64-f43588856c64",angleX:18.36,angleY:256.68,angleZ:0},{id:"644f3ee8-9d12-4ea2-99e2-b25dfb10550d",angleX:0,angleY:24.84,angleZ:0},{id:"67b194b8-8d7a-4b47-a79c-7733997d9352",angleX:0,angleY:352.08,angleZ:0},{id:"44d5228f-c1f9-4219-996e-09a30657fcac",angleX:349.92,angleY:143.64,angleZ:0},{id:"ea3fa92d-44d2-441e-8f7a-cd86cba77edc",angleX:189.36,angleY:209.52,angleZ:171.36},{id:"a5513b66-9f5a-4ad3-a5f3-23ff7bd06837",angleX:0,angleY:46.44,angleZ:0},{id:"f677ec46-73e3-4b5a-8c26-9e93226637db",angleX:0,angleY:315.72,angleZ:0},{id:"9d1bc9b3-928b-42e0-9b60-fa966dd2c0dd",angleX:0,angleY:72.36,angleZ:0},{id:"f2336eb2-47a1-4a19-a0f3-b0630e46abe0",angleX:0,angleY:50.4,angleZ:0},{id:"7638d688-4c60-46dd-82b5-5d7239d43587",angleX:0,angleY:258.12,angleZ:0},{id:"517b05ee-1499-4591-b526-bcc34708f2ad",angleX:0,angleY:57.96,angleZ:0},{id:"4cf4ce3d-f946-4b29-90bd-4cff2ec7d38c",angleX:0,angleY:37.08,angleZ:0},{id:"95f8d47e-6b40-4de2-95f3-131cb66e054d",angleX:0,angleY:168.48,angleZ:0},{id:"b3e00b58-88db-46f2-bb5c-8abeb7fb013d",angleX:0,angleY:49.68,angleZ:0},{id:"56f35585-53b4-4bd0-bdb4-1951dddd6490",angleX:0,angleY:232.2,angleZ:0},{id:"2d241ebb-253b-491f-85af-c83e93c40c91",angleX:0,angleY:262.8,angleZ:0},{id:"d033d1c5-ffe3-4c47-a480-e8ac931458f3",angleX:0,angleY:232.56,angleZ:0},{id:"e1ba8326-93ef-49c8-83a9-219c066e01ca",angleX:0,angleY:309.24,angleZ:0},{id:"c77ad40e-ef62-4207-93d7-6dd2d239e8a0",angleX:0,angleY:76.68,angleZ:0},{id:"945ec9a9-13c9-48c2-8cdd-3bdd2705f776",angleX:0,angleY:62.64,angleZ:0},{id:"d51e0367-40fc-435c-8362-b7df137b4976",angleX:0,angleY:0,angleZ:0},{id:"e490d365-e5a6-434b-8321-810725115636",angleX:0,angleY:0,angleZ:0},{id:"02478e04-7660-482e-a4e7-6d2c97abdf83",angleX:0,angleY:0,angleZ:0},{id:"de722777-f747-4a24-a937-eadeac7360ae",angleX:0,angleY:266.76,angleZ:0},{id:"65eef926-db50-4964-a534-37c8241aa1be",angleX:0,angleY:20.16,angleZ:0},{id:"e15dba5b-eaa6-404b-9998-b8a234843c67",angleX:0,angleY:35.28,angleZ:0},{id:"8e1d21ba-a66c-42f3-8d96-b5064ad6a542",angleX:0,angleY:227.16,angleZ:0},{id:"8dc76222-a100-495c-a918-bbfe44981859",angleX:0,angleY:169.92,angleZ:0},{id:"21c62e27-ffb1-4230-9923-0d107f3325f9",angleX:0,angleY:34.2,angleZ:0},{id:"1ed62d31-bbdd-4001-967b-f90068148aef",angleX:0,angleY:50.4,angleZ:0},{id:"5e9d584a-38b0-470a-95c5-e065a1ee2c7e",angleX:0,angleY:172.8,angleZ:0},{id:"719e1ae5-59d3-4bf7-a4af-c859d6715fd5",angleX:0,angleY:37.08,angleZ:0},{id:"ac9a1dd3-29fe-4a58-b2bd-6097888e52ee",angleX:0,angleY:45.72,angleZ:0},{id:"ad497a45-7c06-45ed-b185-da9aad0c137b",angleX:0,angleY:19.44,angleZ:0},{id:"6a8bdc52-a134-485a-8b53-7fd06e47b2e1",angleX:0,angleY:43.56,angleZ:0},{id:"b087ba6e-86b3-45d0-b2c4-bb0bf7f6ffb4",angleX:0,angleY:280.44,angleZ:0},{id:"e64067a6-d27d-4fe9-98bc-c9eb439f179f",angleX:195.48,angleY:195.48,angleZ:173.16},{id:"71c4a3b6-1510-4f11-894a-a6e36ef7a514",angleX:0,angleY:0,angleZ:0},{id:"941a122f-3e22-4347-8fc0-c89fa468e3ca",angleX:18.36,angleY:218.52,angleZ:0},{id:"0c8e39b1-9554-4e66-93a2-3e5cfd972fc9",angleX:10.08,angleY:272.88,angleZ:0},{id:"a1761792-8f3f-4168-a266-5567b511757c",angleX:360,angleY:289.08,angleZ:11.52},{id:"de89e664-d968-4831-9b49-612c18c3fa98",angleX:0,angleY:360,angleZ:0},{id:"2f51b59b-a244-4be2-a47b-fee97eb656ac",angleX:0,angleY:0,angleZ:0},{id:"8ec6de53-fb02-405a-a416-8c182336bb03",angleX:355.32,angleY:32.4,angleZ:351.36},{id:"9b9343c2-b578-4891-9c13-0b00fd4ad4d4",angleX:0,angleY:129.96,angleZ:0},{id:"a97f9be5-c46c-441c-9771-e86abe742e6b",angleX:0,angleY:196.2,angleZ:0},{id:"0d798a6d-9274-4798-9c2f-4f4d4ec0dab7",angleX:0,angleY:207.36,angleZ:0},{id:"e9674cfb-dede-43e4-b01b-1bacd0437dc6",angleX:0,angleY:303.84,angleZ:0},{id:"6465d252-a339-4796-bd58-a844e63624c5",angleX:0,angleY:63.36,angleZ:0},{id:"26df64a9-0e67-4dfa-a278-6f4575b710ee",angleX:0,angleY:120.96,angleZ:0},{id:"26d2a316-286a-4c8e-b427-63d802cc1645",angleX:0,angleY:28.08,angleZ:0},{id:"f2c53bf0-6e5c-47e9-92d6-6c365a97df34",angleX:8.28,angleY:213.84,angleZ:345.6},{id:"4beaf9ec-b02d-4966-9e4c-a561946da0d7",angleX:0,angleY:37.08,angleZ:0},{id:"9866463a-57f2-47bf-b11f-2e5065f6f1a2",angleX:0,angleY:141.48,angleZ:0},{id:"727a4b43-9b11-4fa2-9b31-037d1ad91401",angleX:0,angleY:178.56,angleZ:0},{id:"b53f3879-6aaa-46f4-9dfb-66db3e2aeb9a",angleX:0,angleY:277.2,angleZ:0},{id:"0ba9a2dc-ff82-4706-afce-6d26e0c63412",angleX:0,angleY:0,angleZ:0},{id:"b217d1ab-256c-4568-b932-6bbfd78ff9b4",angleX:0,angleY:159.84,angleZ:0},{id:"e933fbf0-eb98-4003-b310-8b7d24d30e64",angleX:0,angleY:0,angleZ:0},{id:"4039a946-26d4-4548-b807-2c9ac30b634f",angleX:0,angleY:293.4,angleZ:0},{id:"3149a51f-6247-423f-9f80-a2a936cf9c6c",angleX:0,angleY:200.16,angleZ:0},{id:"9b19d4ea-15cf-4aa4-9498-33effa7566fc",angleX:7.56,angleY:193.32,angleZ:351.36},{id:"463b95cf-6228-4328-91fa-ae73a41fd7c9",angleX:0,angleY:16.56,angleZ:0},{id:"749b900e-6d84-4b39-9c7a-4c1ed8b03ade",angleX:0,angleY:72.72,angleZ:0},{id:"094e7771-463c-43ee-8041-27c10784117f",angleX:0,angleY:0,angleZ:0},{id:"519c8fa6-b59c-476e-bd0c-f3505df0db2a",angleX:0,angleY:68.76,angleZ:0},{id:"d1a4fbe7-3892-4a3c-93d7-69b634c31059",angleX:9.36,angleY:183.24,angleZ:340.92},{id:"0ee40bb3-c511-4921-93b1-6f8116e30a80",angleX:0,angleY:159.84,angleZ:343.08},{id:"18ba8de7-559b-448b-afbc-43b1f772a032",angleX:0,angleY:33.12,angleZ:0},{id:"08a0bdf0-92b7-404e-824b-4c095014d3d4",angleX:0,angleY:245.52,angleZ:0},{id:"85be33d8-dce9-4908-ae28-9664e356d90f",angleX:0,angleY:208.08,angleZ:0},{id:"6e67ba20-70e5-4bc9-b945-defd3d533e02",angleX:0,angleY:230.76,angleZ:0},{id:"134960b8-d860-4a6e-97d8-d44ab3ead114",angleX:0,angleY:178.56,angleZ:0},{id:"66facd05-aa77-40a0-81d4-56a3cf98bc3e",angleX:11.88,angleY:233.64,angleZ:0},{id:"d28ca4ff-9069-49ef-9f82-35c5c36a1645",angleX:0,angleY:74.88,angleZ:0},{id:"a1b1dc46-32c7-4d59-8507-d574aad93da7",angleX:0,angleY:0,angleZ:0},{id:"58f64df6-2619-4e54-9c75-3c28928a9ade",angleX:0,angleY:190.08,angleZ:0},{id:"b51031d9-070c-43dd-a18c-86bea63f3294",angleX:0,angleY:0,angleZ:0},{id:"cc16a40a-9cf4-4002-8e40-be3c24291b51",angleX:0,angleY:63.36,angleZ:0},{id:"8b0a9e1f-56fd-419b-832e-f870a15f2d09",angleX:0,angleY:312.84,angleZ:0},{id:"f3bf3352-baaf-4d6d-abf1-6112283e6c5d",angleX:0,angleY:147.6,angleZ:0},{id:"509ec8eb-af3e-4eea-9ad9-63c09520e0ca",angleX:10.44,angleY:195.48,angleZ:347.4},{id:"cea5569e-3e28-4617-8501-31d0a084c429",angleX:0,angleY:191.52,angleZ:335.16},{id:"c0e51d0b-0bda-473c-ad2c-e93545f12e99",angleX:0,angleY:182.88,angleZ:0},{id:"b8151278-cb6b-4cb9-98d7-a89d2736f6ac",angleX:0,angleY:209.52,angleZ:0},{id:"a91ac185-db81-46b7-bb73-82b32d160f8f",angleX:0,angleY:14.76,angleZ:0},{id:"f6999525-e1f5-404a-af19-f240cbbf3b0a",angleX:357.12,angleY:76.68,angleZ:0},{id:"ccd28872-8d1b-4cc0-9ef3-64b605433537",angleX:20.88,angleY:221.76,angleZ:0},{id:"1e62896d-26a7-441e-92e0-188507bbf6fa",angleX:0,angleY:324.72,angleZ:0},{id:"a93a22e6-2e1b-48ae-a101-de9b2d1dccdc",angleX:0,angleY:43.56,angleZ:0},{id:"d210c5e1-a262-4b91-93d4-6aab83cfbd32",angleX:16.2,angleY:242.64,angleZ:0},{id:"b2acda1c-1847-481e-825a-e0faaa5d1e54",angleX:0,angleY:329.04,angleZ:0},{id:"45375db3-cef9-4eb9-bedc-0c58e45b7401",angleX:181.44,angleY:262.08,angleZ:175.32},{id:"4a957cdd-aa62-4329-8df1-7bcfb303a4ce",angleX:0,angleY:183.96,angleZ:347.76},{id:"e5b4b2c2-85c9-4d81-8b3b-c28ffd720584",angleX:0,angleY:104.04,angleZ:351.72},{id:"15b77360-4bc1-4629-b1b4-faa2d98aa503",angleX:0,angleY:32.4,angleZ:0},{id:"88c082ad-1a8d-4c43-9d9f-0d47b1dafdfe",angleX:0,angleY:15.48,angleZ:0},{id:"e8da5890-0124-4611-bc7e-82a4f4acdb7c",angleX:0,angleY:320.04,angleZ:0},{id:"8e415b6d-4bb4-4483-b82d-4fceaa8d4d3d",angleX:0,angleY:244.8,angleZ:0},{id:"bf88a7d0-8d76-49ae-9fad-f1b94a76f586",angleX:343.8,angleY:54.72,angleZ:347.76},{id:"1d8d5060-0d6d-4236-af28-04508a87f241",angleX:0,angleY:35.28,angleZ:0},{id:"b95bca6e-e48b-4a74-ae3b-cd2d25930421",angleX:0,angleY:201.96,angleZ:0},{id:"3417255c-3fc0-407c-8c60-090b5ceae742",angleX:0,angleY:173.16,angleZ:0},{id:"e8851ee9-3850-4060-b471-e2c5d3d88450",angleX:0,angleY:24.12,angleZ:0},{id:"1fdceb48-0ea2-4a2e-9420-186cce851c6c",angleX:0,angleY:0,angleZ:0},{id:"424d4c7a-6ffb-406c-a684-e1c8a7c6996f",angleX:0,angleY:52.56,angleZ:0},{id:"84ec1edc-7833-4b58-9650-7526bd28480d",angleX:0,angleY:58.68,angleZ:0},{id:"3ac92678-2fd6-4d96-84e9-f54014077120",angleX:0,angleY:141.12,angleZ:0},{id:"fba8f184-81cc-44b7-b15e-ba35e10ebd77",angleX:0,angleY:178.92,angleZ:0},{id:"81ab1448-5193-4915-872a-d1ed701e46f7",angleX:0,angleY:38.52,angleZ:0},{id:"ca7fcfbb-24c4-4d89-8e59-58b92bb0d8ac",angleX:0,angleY:258.12,angleZ:347.04},{id:"12920ffc-cc51-42d9-a557-db6e40fb88fc",angleX:0,angleY:59.04,angleZ:0},{id:"a5c37d0f-c02e-42b1-a929-212ed237f22a",angleX:0,angleY:284.76,angleZ:0},{id:"ddacbaca-efd6-4d88-8d57-57be12b1020b",angleX:0,angleY:178.56,angleZ:0},{id:"9ff704c0-4583-45a0-bc66-6c8da9fc8d1e",angleX:0,angleY:39.6,angleZ:0},{id:"476085c8-ed40-48eb-8d40-47a054736110",angleX:0,angleY:22.32,angleZ:0},{id:"5f79e85e-2470-49c2-813b-6485bc3399c3",angleX:0,angleY:307.08,angleZ:0},{id:"b87fa39b-f6a8-4c34-b731-d9b790c43473",angleX:0,angleY:353.88,angleZ:0},{id:"fa1212a6-9370-4bd6-a982-0fd6fd0b1006",angleX:18.36,angleY:208.44,angleZ:0},{id:"78a4ffdc-9007-4c4c-800b-7bbabc0999ca",angleX:0,angleY:59.04,angleZ:355.32},{id:"3a341dec-229c-4afe-94ef-cf3f3b4b3a5a",angleX:0,angleY:320.04,angleZ:0},{id:"9349c037-143e-4240-9b2f-c4ef747fe8ef",angleX:356.4,angleY:99,angleZ:350.28},{id:"dbcbbebe-6d03-4a55-ad19-9ca7cf47417c",angleX:0,angleY:29.16,angleZ:0},{id:"19ae547c-4e29-44da-8868-b4fc838e4839",angleX:12.24,angleY:262.8,angleZ:0},{id:"9fa9957f-d302-4d81-bb82-db15dce6e2ff",angleX:20.16,angleY:224.28,angleZ:0},{id:"6ca2b11b-2e53-4c54-9204-a99e961a3929",angleX:0,angleY:297.72,angleZ:0},{id:"4cbdc906-c0a4-44f7-ab00-4785d777b5ff",angleX:351.36,angleY:28.08,angleZ:0},{id:"a71f4e63-9e0f-46b2-8426-1f69920d6326",angleX:0,angleY:19.44,angleZ:0},{id:"d7d33f9e-e9fa-440c-a8e1-b785c421877f",angleX:0,angleY:209.52,angleZ:0},{id:"3e967e87-673e-4f24-a454-89cedb3e333c",angleX:0,angleY:196.2,angleZ:0},{id:"3c89657d-27f5-4a9b-a9bf-638d4e09dc71",angleX:0,angleY:168.48,angleZ:0},{id:"b6ee4aff-0ccd-4765-b758-d170bc8ba161",angleX:0,angleY:165.24,angleZ:0},{id:"f11c10a4-adff-4521-8e87-319c60b0643d",angleX:8.28,angleY:214.2,angleZ:341.28},{id:"32981b18-835f-42ef-b964-5cdcf87b4532",angleX:0,angleY:0,angleZ:0},{id:"8149051c-97f8-44e4-a2d2-aae5a3f9c710",angleX:0,angleY:50.4,angleZ:0},{id:"e350ed05-21d1-47d0-8b72-168b96204748",angleX:0,angleY:0,angleZ:0},{id:"a021e503-b7b0-4750-8898-98157960490d",angleX:0,angleY:281.16,angleZ:0},{id:"5c845efc-a7e6-42cb-a94e-e5a0f9dba7b1",angleX:0,angleY:134.28,angleZ:0},{id:"1ac0608c-a91f-40de-aac4-3512f2b784a1",angleX:0,angleY:52.56,angleZ:0},{id:"9b9f6b0c-1479-409a-8980-d01aa8a339da",angleX:13.32,angleY:197.64,angleZ:347.04},{id:"0f16ce6c-6669-4c64-a19b-ab45653d42e9",angleX:0,angleY:81,angleZ:0},{id:"adb94e3c-8d9d-4886-b4e7-697d0790837d",angleX:0,angleY:230.76,angleZ:0},{id:"d39b8810-8ad8-49e4-b9c5-af7e730d3f95",angleX:0,angleY:287.28,angleZ:0},{id:"691efdc4-f708-4236-9c98-cfb01c23b585",angleX:345.24,angleY:78.12,angleZ:0},{id:"1fa9aab0-a50b-4c33-9c26-ef0b2b1338b1",angleX:0,angleY:101.88,angleZ:0},{id:"801d501e-e8b0-4a11-b7d6-c3a0313d7025",angleX:0,angleY:35.28,angleZ:0},{id:"ea66ea9b-15de-4bf4-acba-47f20931776b",angleX:353.16,angleY:183.24,angleZ:343.08},{id:"4968807f-2e15-4e4e-b467-2f1251c6e18e",angleX:0,angleY:0,angleZ:0},{id:"2a653b44-f364-48c3-9973-b859600e5fab",angleX:0,angleY:214.2,angleZ:0},{id:"ab50241e-9a34-49fc-89e5-195981460155",angleX:0,angleY:86.76,angleZ:0},{id:"bb37637e-63cb-4110-b17d-eaefc19b44f2",angleX:0,angleY:190.08,angleZ:353.88},{id:"c948ab91-a332-49db-a19b-069a442261e0",angleX:0,angleY:172.8,angleZ:0},{id:"dcabcb1b-6e32-4f2e-b912-2cb65cc71bd6",angleX:0,angleY:40.32,angleZ:0},{id:"95179f3c-f494-4b41-b06f-382e0f1f392c",angleX:0,angleY:0,angleZ:0},{id:"1c1760ca-4b99-43f4-8863-b54e0406c7c5",angleX:347.04,angleY:90.36,angleZ:0},{id:"448f5f27-4a71-4403-9cb3-020bc600e841",angleX:0,angleY:99,angleZ:0},{id:"b10ea466-d8a4-4963-91fa-91b775287eef",angleX:0,angleY:14.76,angleZ:0},{id:"300bdcfb-34e5-4138-89c4-2a35826ccb95",angleX:0,angleY:313.2,angleZ:0},{id:"65fced3c-43c5-4c48-b21c-1bfbfcf274b0",angleX:16.2,angleY:236.52,angleZ:0},{id:"d5551e25-17b0-41d4-8448-90b6a018f27e",angleX:0,angleY:311.4,angleZ:0},{id:"def021e9-dd7b-4135-9807-9f87014862bd",angleX:0,angleY:213.84,angleZ:0},{id:"ad54b9bd-ed72-484c-a412-06ecd74b9b8b",angleX:10.44,angleY:178.92,angleZ:336.96},{id:"64da752b-3aa5-4ac6-9661-381ecd331958",angleX:0,angleY:99,angleZ:0},{id:"c194f42e-7172-4a51-bf7c-3d6f7038e66b",angleX:0,angleY:72.36,angleZ:0},{id:"5e9ba957-4a3f-4e39-b998-d12ad75b80df",angleX:0,angleY:26.28,angleZ:0},{id:"5846bcba-ae9e-4d72-a07b-880da64ed856",angleX:0,angleY:342.36,angleZ:0},{id:"aaa1bb1f-0b12-40dd-8ac3-02e808a124fa",angleX:0,angleY:54.72,angleZ:0},{id:"98c848c4-a820-410f-857d-ed32a2f0cbbe",angleX:0,angleY:307.08,angleZ:0},{id:"4e89f410-240e-4c52-bd25-6e2cde156904",angleX:0,angleY:103.32,angleZ:0},{id:"f89db03c-45ad-4487-aa0a-077d332fbc3c",angleX:0,angleY:320.04,angleZ:0},{id:"4ecd8357-b544-47b6-ba5d-02778164f7c1",angleX:0,angleY:14.76,angleZ:11.52},{id:"8fd5ac3a-f31d-4ee0-becf-0c45fba523c0",angleX:0,angleY:329.04,angleZ:0},{id:"d9ccb49e-b01b-4203-ab6f-5212680d5c1f",angleX:0,angleY:32.4,angleZ:0},{id:"80f6ddd2-ebf1-4a81-afc0-440bd72b3ea6",angleX:0,angleY:133.56,angleZ:0},{id:"2835f9e9-14ba-45c4-87d4-2c8e8ce8a2cb",angleX:10.08,angleY:204.12,angleZ:0},{id:"30f72353-a57a-44b1-9855-f7f71c3e5946",angleX:0,angleY:314.28,angleZ:0},{id:"51950dc5-d1a6-48a4-aab9-ee6f31bede24",angleX:0,angleY:341.64,angleZ:0},{id:"47ad1f1c-3d30-409b-bf10-dca85548627c",angleX:0,angleY:58.68,angleZ:0},{id:"b8642a6c-c45a-48cd-a939-b6506d325bbd",angleX:0,angleY:227.88,angleZ:0},{id:"ce1da565-79e2-4fe2-9655-797defb45c07",angleX:0,angleY:167.76,angleZ:0},{id:"39d50ab3-2272-4278-a43e-e6b06424cfc4",angleX:0,angleY:10.08,angleZ:0},{id:"3cf00d95-8fdb-4be0-a23d-e8b6e3a5a996",angleX:0,angleY:45,angleZ:0},{id:"3ca4e5d5-0f35-4450-a913-d51f17be5dbf",angleX:0,angleY:37.08,angleZ:0},{id:"06722496-3521-4674-bb52-fc37324c2657",angleX:0,angleY:224.64,angleZ:0},{id:"cb10b8d3-63a4-49da-abaf-44ffe4a55006",angleX:0,angleY:27,angleZ:0},{id:"ff47fef4-a73f-4c97-b591-58341087c8ce",angleX:0,angleY:68.04,angleZ:0},{id:"f12f1612-cb80-4fb8-a126-3e74d3d75edb",angleX:0,angleY:147.6,angleZ:0},{id:"c7e6ce9e-b969-424c-9897-e69d4e53cb69",angleX:0,angleY:18,angleZ:0},{id:"3ea20ec5-ac62-46a3-95c7-fec11787dd3e",angleX:0,angleY:39.24,angleZ:0},{id:"9ee3649f-d170-4d77-8e35-b90ce6b96316",angleX:0,angleY:76.68,angleZ:0},{id:"fe926695-3085-49ff-be8a-ccb844a4856b",angleX:0,angleY:22.32,angleZ:0},{id:"49581320-ee5e-499a-97a2-484f44126322",angleX:0,angleY:41.4,angleZ:0},{id:"53684558-cf1a-4f49-96ba-43b463ae4d03",angleX:0,angleY:14.4,angleZ:0},{id:"9b20efd0-10be-4a6a-b3f4-ab938ea97103",angleX:0,angleY:59.04,angleZ:0},{id:"72cd96f6-7272-4b7f-bc9a-ffa96dd4b863",angleX:0,angleY:45.72,angleZ:0},{id:"8fcd5bfa-413f-4ba0-9f22-a7f7d60795ac",angleX:0,angleY:168.12,angleZ:0},{id:"c6c81ae5-d2c2-4ad7-9612-bb67161e5a07",angleX:0,angleY:22.32,angleZ:0},{id:"60d96844-6883-407a-9ad9-36921374ce73",angleX:0,angleY:222.84,angleZ:0},{id:"2d7faa3f-1cef-4cd3-8fa7-7d9d62800885",angleX:0,angleY:58.68,angleZ:0},{id:"b8fda886-166d-4709-93e3-80b4c3dbef1e",angleX:0,angleY:157.68,angleZ:0},{id:"54a89291-95d3-4d2a-94f0-7fbd5c2e45eb",angleX:0,angleY:244.8,angleZ:0},{id:"040c4c38-3793-447e-8925-4565b866d6b0",angleX:0,angleY:343.8,angleZ:0},{id:"b6ff807a-b8bc-46bc-b954-c53b9504090a",angleX:216.36,angleY:135.36,angleZ:208.44},{id:"1cd7f488-6785-4466-8225-bc1cc50a670a",angleX:0,angleY:326.52,angleZ:0},{id:"2393e56c-1bde-40b4-9a8e-d065f217cc39",angleX:0,angleY:30.24,angleZ:0},{id:"e71f4590-b5c1-4008-9c48-d504d4bb6cde",angleX:0,angleY:153.72,angleZ:349.92},{id:"42a3f7cd-4dbc-4145-8888-59f06a65e0e8",angleX:0,angleY:63.36,angleZ:0},{id:"967cfaa6-638b-45dc-89f6-f611ba2831c9",angleX:353.16,angleY:32.4,angleZ:3.24},{id:"a9b0e099-d983-4b54-82ec-17bc99adaec8",angleX:0,angleY:333.36,angleZ:0},{id:"3e2e9999-9dd2-454a-ad82-f95ccaf7b3ae",angleX:353.16,angleY:28.08,angleZ:0},{id:"220c4ff2-0036-434b-b44e-21831a61b087",angleX:355.32,angleY:23.76,angleZ:0},{id:"5434a8df-7f6f-4781-abb2-a221b37f3ef3",angleX:0,angleY:45.72,angleZ:0},{id:"033502e7-8d0a-4664-8840-ea65d8ee0d5b",angleX:0,angleY:329.04,angleZ:0},{id:"766c867b-515d-4857-bdca-7a4c1e919109",angleX:0,angleY:10.08,angleZ:0},{id:"41b095c3-2aaf-4981-b17e-4a8af9986a54",angleX:0,angleY:96.48,angleZ:0},{id:"259ba94e-229f-4840-926a-7f61a6a0e80d",angleX:8.28,angleY:199.8,angleZ:0},{id:"e695e7ac-f7ce-4561-b6b5-e39d9be2ca06",angleX:0,angleY:236.16,angleZ:0},{id:"47f2a7ef-d8d2-4016-a87a-488c0d6a19e9",angleX:0,angleY:0,angleZ:0},{id:"910aea77-e369-42e4-b9f6-1bf364c1c2b2",angleX:0,angleY:351,angleZ:0},{id:"bafecf6a-1ef9-4b9e-b863-a33b299e4ca3",angleX:16.2,angleY:236.52,angleZ:0},{id:"bef71fad-ae91-497d-9969-95597424551a",angleX:0,angleY:123.48,angleZ:0},{id:"7deca03d-bf24-4dcd-a916-d0adefc4f8ab",angleX:0,angleY:10.44,angleZ:0},{id:"e8e111a4-26e4-4708-bc1c-9a8e2d5ca334",angleX:0,angleY:68.76,angleZ:0},{id:"a522db07-460e-4fe5-a8a8-46be19ad25f3",angleX:349.2,angleY:88.2,angleZ:0},{id:"74445a2b-1ec2-4ee1-85e8-f7e796a436ab",angleX:0,angleY:0,angleZ:0},{id:"eb35b15d-df5b-4b47-86c5-7928794d280d",angleX:0,angleY:183.24,angleZ:349.2},{id:"6522c347-9ddf-43c1-8a0c-e803531dc626",angleX:0,angleY:29.16,angleZ:0},{id:"d0f4478e-72eb-4038-ab2b-7e4c11d194d6",angleX:0,angleY:87.12,angleZ:0},{id:"e8bdc348-f894-4be1-b369-041fdf782e19",angleX:0,angleY:68.76,angleZ:0},{id:"e479e06c-2008-484a-b4a7-e26ee3ce170c",angleX:0,angleY:224.64,angleZ:0},{id:"85e5f0c6-b4c1-4880-a338-167f31a62dd2",angleX:0,angleY:81,angleZ:0},{id:"0169db12-7b9f-4837-be47-92a4b1ca022c",angleX:0,angleY:0,angleZ:0},{id:"d134b448-477c-486e-a37a-7e3568d89a9e",angleX:0,angleY:333.72,angleZ:0},{id:"d595e049-58ca-40db-ac05-2ca68410b58b",angleX:345.24,angleY:90.36,angleZ:0},{id:"d135211f-6225-485d-b07b-02d43e4f92ce",angleX:0,angleY:336.96,angleZ:0},{id:"a79214de-8015-4a88-9687-6067b44d0454",angleX:0,angleY:170.64,angleZ:0},{id:"7e39156b-8340-4ccc-ac8f-db79f431167a",angleX:351.36,angleY:114.48,angleZ:349.2},{id:"b9def3bb-babb-47a4-8a21-23b1c6671928",angleX:0,angleY:302.4,angleZ:0},{id:"e35abee1-5e40-42ce-bb44-ba62aeb9aab3",angleX:0,angleY:293.4,angleZ:0},{id:"e687ee38-5263-47dc-91e8-50fdb9ec6ccd",angleX:0,angleY:37.08,angleZ:0},{id:"2836193e-7ee1-42ff-87df-78a938821d98",angleX:0,angleY:117.36,angleZ:0},{id:"223b753b-72ed-423b-a4c2-b69b6c7f2552",angleX:0,angleY:244.8,angleZ:0},{id:"ac782da0-e31e-475d-8045-1ca5b3d99eb3",angleX:0,angleY:120.96,angleZ:0},{id:"7a722d03-9277-4ab3-a9f0-96cb416e61a6",angleX:0,angleY:205.2,angleZ:0},{id:"326d0d41-9848-4628-9dab-5ea2b7823f1b",angleX:0,angleY:7.92,angleZ:0},{id:"a0ce5f4e-f0e2-4461-a0e9-29833bb65f5c",angleX:0,angleY:54.72,angleZ:0},{id:"4d73daff-75bb-42b8-be1a-e081561719d4",angleX:4.68,angleY:191.88,angleZ:0},{id:"a1cc3942-f584-419c-a2e9-d55496c370df",angleX:0,angleY:46.44,angleZ:0},{id:"1d09b7bd-e3d3-43f9-b8ef-fe0f26287879",angleX:0,angleY:342.36,angleZ:0},{id:"4c705ddb-cde8-4453-b066-9d078feb6365",angleX:0,angleY:311.4,angleZ:5.4},{id:"78a98b0e-c44d-4cba-ac8b-7427287f1565",angleX:0,angleY:0,angleZ:0},{id:"3a9ddf7f-73b4-48d1-bc0b-ac3eab562da2",angleX:351.36,angleY:14.76,angleZ:3.24},{id:"85d9257e-07c3-43a5-9b3e-0488404e1815",angleX:0,angleY:50.4,angleZ:0},{id:"31222481-5997-4f1e-9120-b417336352a0",angleX:0,angleY:19.44,angleZ:0},{id:"fe8a04b3-c467-4d28-8166-42de1b8ba3a9",angleX:0,angleY:315.36,angleZ:0},{id:"edc8e738-9733-42d5-9213-5fb93e913ff7",angleX:0,angleY:333.36,angleZ:0},{id:"d2382ee0-2975-4bf9-8820-bd742c1d9d99",angleX:0,angleY:346.68,angleZ:0},{id:"0689098e-f506-4966-8956-30534c424335",angleX:0,angleY:22.68,angleZ:0},{id:"594595a0-cec9-4d15-9411-e5f122e51f4f",angleX:0,angleY:226.44,angleZ:0},{id:"31512da1-7d0d-4bda-8a96-a5ca2aa240cd",angleX:0,angleY:147.6,angleZ:0},{id:"8cb91acf-fc4c-44c0-89c6-99929170135c",angleX:0,angleY:11.88,angleZ:0},{id:"ce3a25b4-2707-442f-a4ab-00cf788c06a7",angleX:0,angleY:247.68,angleZ:0},{id:"ea8f2bae-2a4a-4c40-8984-a19874608a13",angleX:0,angleY:7.92,angleZ:0},{id:"6e06943c-dde7-4cd0-bb91-9d999a394dac",angleX:0,angleY:90,angleZ:0},{id:"1136a825-2a6b-4ad8-820f-322ca7ee15fc",angleX:0,angleY:0,angleZ:0},{id:"b20c67e1-db2e-471b-bbcc-e30aeaa6ccdc",angleX:0,angleY:171.72,angleZ:0},{id:"da8976f0-526f-4628-b1e2-a3fcc869ec47",angleX:0,angleY:50.4,angleZ:0},{id:"7fa12fa9-8ea7-4a5e-bd59-e2429cb8ffc9",angleX:0,angleY:44.28,angleZ:0},{id:"f9144b1d-7b78-461e-a060-c468a55d88cf",angleX:0,angleY:94.68,angleZ:0},{id:"53b0f7da-5877-4411-9ff1-15dd78b23b3a",angleX:0,angleY:28.08,angleZ:0},{id:"e5435b9d-37a0-487c-b2bd-b6d1ff3dc958",angleX:0,angleY:160.92,angleZ:0},{id:"975fcd65-7f28-42d8-80c3-98852827d13e",angleX:0,angleY:28.44,angleZ:0},{id:"e8940989-07c6-4d41-bc07-c3e4ff6ccd3f",angleX:0,angleY:50.4,angleZ:0},{id:"1475c4fb-5988-4d8e-9722-5efeb59cdbec",angleX:0,angleY:222.84,angleZ:0},{id:"f036380d-5938-4aa7-8d4e-227cafe1a46f",angleX:0,angleY:236.16,angleZ:0},{id:"1c1d76af-ab6c-4f9a-ab5f-adc54f17edb4",angleX:0,angleY:0,angleZ:0},{id:"9b46b9b2-f339-45c8-9388-cbd5c63b0634",angleX:0,angleY:20.16,angleZ:0},{id:"ed4f8a25-33f9-4fbf-b885-e2f88b9ac632",angleX:0,angleY:178.56,angleZ:0},{id:"ef2965bc-be4c-4b60-acbb-e7c8082a1c30",angleX:0,angleY:19.44,angleZ:0},{id:"683b9e01-0c7d-4c18-aead-afba5ed9be41",angleX:0,angleY:76.68,angleZ:0},{id:"31968008-d7df-4065-9c7e-7725ba971c94",angleX:0,angleY:145.44,angleZ:0},{id:"7336a149-de77-471f-b21b-2f0239022886",angleX:0,angleY:37.08,angleZ:0},{id:"5ff11ab1-4c28-43b0-b886-29a7e1548b8d",angleX:0,angleY:64.8,angleZ:0},{id:"99fd4c96-10e6-49af-95fd-6f973f72681b",angleX:0,angleY:32.4,angleZ:0},{id:"06d7caca-9189-469f-9c7f-f37f39fa8f51",angleX:0,angleY:205.92,angleZ:0},{id:"a3927682-951f-4a44-8e61-d2eab672d59d",angleX:0,angleY:28.44,angleZ:0},{id:"ace8972d-1d68-4216-a4e2-ba673f6d5587",angleX:12.24,angleY:157.68,angleZ:0},{id:"1edd1b86-95f0-45cc-91f7-f1fa2d8380d0",angleX:0,angleY:346.68,angleZ:0},{id:"01271345-58bd-473f-b23b-be9d27c43932",angleX:0,angleY:14.04,angleZ:0},{id:"a087c253-319c-42a9-8e23-70383a0d3bf8",angleX:0,angleY:0,angleZ:0},{id:"67b25f87-61fd-40ee-a613-980ce7fb78f0",angleX:16.2,angleY:224.28,angleZ:0},{id:"ac8c9f39-29d1-4a1a-8ee5-b698fb61fbac",angleX:0,angleY:333.36,angleZ:0},{id:"24b39b48-0725-4048-b5bb-1911800c5865",angleX:0,angleY:0,angleZ:0},{id:"e4dc65a2-3b81-46bc-8dd2-9ec7797a3895",angleX:0,angleY:0,angleZ:0},{id:"63e5a4a1-0e19-4312-b449-c2706e65315b",angleX:341.64,angleY:19.44,angleZ:349.92},{id:"dc16d298-7da1-4357-95de-64c68178d65b",angleX:0,angleY:50.4,angleZ:0},{id:"d7acd25b-4b46-4fad-9863-41c70f62c9cc",angleX:353.16,angleY:28.08,angleZ:0},{id:"61ac4a60-ffc2-458a-9641-c4bee7dffbcb",angleX:0,angleY:0,angleZ:0},{id:"12ed5b78-44b8-4021-9beb-6f6b6beb4bc3",angleX:0,angleY:315.72,angleZ:0},{id:"da2803b7-828e-4302-9ed0-e0e235c28f0f",angleX:0,angleY:54.72,angleZ:0},{id:"856ef524-c08b-4fae-969e-e39528bd133a",angleX:0,angleY:0,angleZ:0},{id:"51f6faa5-800f-44e0-ad4b-61888aa3c122",angleX:0,angleY:58.68,angleZ:0},{id:"622a48cf-a1c2-4b09-94e5-ef1e14ca558f",angleX:0,angleY:196.2,angleZ:0},{id:"1a73bf99-9eb2-4b6d-a5c3-228e618239e2",angleX:0,angleY:324.72,angleZ:0},{id:"8a668232-6c14-4d7b-90b1-0c834b1629b3",angleX:0,angleY:99,angleZ:0},{id:"91cfba49-43e4-4c49-b859-a84b4c283cd2",angleX:0,angleY:206.28,angleZ:0},{id:"e51ef9f0-b844-4795-8376-bab6e57b477a",angleX:0,angleY:0,angleZ:0},{id:"12c3feed-d255-4aa9-bd9b-b305ed4248e1",angleX:0,angleY:32.4,angleZ:0},{id:"231e4f7d-1aae-47f2-9d82-7e8a873a3df4",angleX:0,angleY:41.4,angleZ:0},{id:"44a67a24-a31d-43b4-b5a0-c9d98f291965",angleX:0,angleY:279,angleZ:0},{id:"c4bd0c8a-6e96-4e37-9db8-b1fe65b51d2c",angleX:0,angleY:208.08,angleZ:0},{id:"b36f09c7-5648-42ec-86a5-a62de7bea673",angleX:349.2,angleY:114.48,angleZ:345.24},{id:"715dba68-9788-4f8c-8a9f-bdeb56c96bb1",angleX:349.2,angleY:98.28,angleZ:0},{id:"bda6aa3f-c55a-4fab-8b01-90a3fa497fb5",angleX:0,angleY:0,angleZ:0},{id:"64a8ca70-c167-453b-bb42-43774422538b",angleX:0,angleY:303.48,angleZ:0},{id:"f1a0215a-ddca-4bc0-af7c-77cc7fc3a9b8",angleX:0,angleY:0,angleZ:0},{id:"78471a59-4c3b-4a24-add0-dd2207e43952",angleX:0,angleY:74.88,angleZ:0},{id:"fa7bcc77-090c-4ac6-9044-c704f45d3fc4",angleX:0,angleY:0,angleZ:0},{id:"583798e3-aed0-4591-9696-7019284c3789",angleX:0,angleY:228.6,angleZ:0},{id:"cbfa771c-efc0-4dac-bd95-dd44645da9a6",angleX:0,angleY:0,angleZ:0},{id:"a0fa708b-29d6-408b-b05d-d2cc836eb01d",angleX:0,angleY:0,angleZ:0},{id:"9ac9a748-ea80-438e-8519-cfd395cf451d",angleX:0,angleY:222.48,angleZ:0},{id:"9ee50019-6791-419d-95a2-8bcdd99e8d3d",angleX:0,angleY:0,angleZ:0},{id:"71eed1ac-15b7-4ec2-95de-e7ad1e454bfd",angleX:349.2,angleY:78.12,angleZ:0},{id:"d88ec09a-fc64-4397-9c1f-1ceb9550c6f8",angleX:360,angleY:144.72,angleZ:345.24},{id:"faa6dfa7-0ece-4627-9cef-28bbae6b2a4f",angleX:18.36,angleY:244.8,angleZ:0},{id:"01361d02-745c-4e9a-a047-8730dc82a5be",angleX:0,angleY:36.36,angleZ:0},{id:"2050c1d9-7ba2-4e28-9aef-482a71e44f42",angleX:0,angleY:32.4,angleZ:0},{id:"3d3799f0-c7b9-4c26-9352-7cd92136f4eb",angleX:0,angleY:151.92,angleZ:0},{id:"c70b3407-8d39-4b04-b82d-517819cfd6e0",angleX:0,angleY:194.04,angleZ:0},{id:"c4b6997e-2e51-430c-8d3b-c3d0f21b3235",angleX:0,angleY:216.36,angleZ:0},{id:"fc829010-9584-4ae6-974c-82504709cccd",angleX:0,angleY:0,angleZ:0},{id:"41bcdc24-11f5-43a3-ba4a-0a8284e06376",angleX:0,angleY:0,angleZ:0},{id:"588f0755-6068-40d2-b895-39f3aae93a88",angleX:6.12,angleY:176.04,angleZ:343.8},{id:"70a6a957-bc0c-4c11-9819-4425fadb9791",angleX:0,angleY:81.36,angleZ:0},{id:"8ca98519-82b3-4ed1-87f2-4f10ca551a16",angleX:0,angleY:129.96,angleZ:0},{id:"c5c5fcaf-59a9-4ff6-bffb-7065ebca3148",angleX:0,angleY:0,angleZ:0},{id:"97586e39-037f-4fc8-ab00-77c0162c6ccb",angleX:173.88,angleY:121.32,angleZ:186.12},{id:"195f040b-77f0-439e-8048-f6f0cdf39036",angleX:0,angleY:90,angleZ:0},{id:"d0a13f8d-4abc-449f-b531-f1b65d7ed240",angleX:0,angleY:32.4,angleZ:0},{id:"fac1230b-390a-43fa-893b-780b07b79ed5",angleX:0,angleY:50.4,angleZ:0},{id:"c6f0f40f-d8a9-466d-a4c3-9c961debf457",angleX:0,angleY:338.04,angleZ:0},{id:"fb12c993-7ccb-403d-b688-265253e0b36a",angleX:0,angleY:28.08,angleZ:11.52},{id:"62deb07b-42d0-419a-8789-00136ea65f9c",angleX:0,angleY:240.48,angleZ:0},{id:"b4f1d2b9-b789-4681-8277-e56e1ced0a8f",angleX:0,angleY:0,angleZ:0},{id:"1942ca48-022f-4dc2-8387-3ce45c6ab5e9",angleX:12.24,angleY:236.52,angleZ:0},{id:"c3baa3f8-b39c-49de-a7b3-e140796477e7",angleX:353.16,angleY:45.72,angleZ:349.2},{id:"1f8b12b6-4345-4a9d-b9ff-7220aecfeea3",angleX:0,angleY:328.68,angleZ:0},{id:"b68270a6-0838-4452-b80c-df9571b999af",angleX:347.04,angleY:45.72,angleZ:353.16},{id:"a1298a00-f0a9-499f-a3f3-5fc7b7eb81da",angleX:0,angleY:302.4,angleZ:0},{id:"b3850a2b-81bd-412e-a0ca-7d0c5f46472e",angleX:0,angleY:3.96,angleZ:0},{id:"a9f5b418-ac6b-4991-bf30-aa9199844b97",angleX:0,angleY:351,angleZ:0},{id:"1ae51f92-3bbc-4633-944a-ba0b0a92fda3",angleX:355.68,angleY:28.08,angleZ:14.76},{id:"b4254232-91b6-475b-a62b-ec4826beefca",angleX:0,angleY:50.4,angleZ:0},{id:"f2e782ef-1e48-4869-9ca5-84c9ef90a83f",angleX:0,angleY:18.72,angleZ:0},{id:"e89486c7-2b5c-4818-ba19-8c6e1f440e16",angleX:0,angleY:226.44,angleZ:0},{id:"d09f0e9a-e4f8-4b94-b52e-36315da41f61",angleX:0,angleY:151.92,angleZ:0},{id:"fc0c6d77-2e00-416d-b0ae-b0fc5bdeb152",angleX:0,angleY:30.24,angleZ:0},{id:"068f7e8f-5f93-492f-b56a-3df3f34699b6",angleX:0,angleY:147.6,angleZ:0},{id:"962bc41e-8c73-4e48-bcb2-ef9017989360",angleX:349.2,angleY:25.56,angleZ:0},{id:"c82c4026-97bd-4d8a-8046-e12b6105ee01",angleX:0,angleY:324.72,angleZ:0},{id:"7d5dd334-7289-4558-b6d9-a06000266ca9",angleX:0,angleY:70.2,angleZ:0},{id:"d0c36669-654f-47c0-8328-1ba59e355ddc",angleX:0,angleY:288.36,angleZ:0},{id:"51d0b70f-c129-49f5-af5b-235a8361e485",angleX:0,angleY:165.24,angleZ:0},{id:"63f7ddea-2d54-4f29-85c5-559e5f666271",angleX:0,angleY:34.2,angleZ:0},{id:"43b155b2-c61d-45bc-9bc3-ea4abcbf02a6",angleX:0,angleY:174.24,angleZ:0},{id:"5dfc44b6-151e-495b-bf7b-9f4a9e46c3e4",angleX:0,angleY:202.32,angleZ:0},{id:"563cef06-c793-4536-8ec6-2e115b47fca1",angleX:0,angleY:20.88,angleZ:0},{id:"9529b440-0715-41fb-bb72-3c4bdd515447",angleX:0,angleY:54.72,angleZ:0},{id:"712bef4b-4914-4865-9c00-ae0694e51a0c",angleX:0,angleY:76.68,angleZ:0},{id:"0dd45b56-d274-45b6-9645-7ef09649d82d",angleX:0,angleY:338.04,angleZ:0},{id:"a0a2b1ad-79e6-4f48-853d-a7d238f8910e",angleX:0,angleY:32.4,angleZ:0},{id:"f411cb6d-0047-4947-bfc7-ccc9b67b40a0",angleX:0,angleY:14.04,angleZ:0},{id:"8f996a2a-bfce-4890-8319-98d0f575e181",angleX:0,angleY:338.04,angleZ:0},{id:"a380b961-ada7-446a-9ac3-4a6c50575f37",angleX:0,angleY:299.52,angleZ:0},{id:"032d41c6-b547-4e36-9be5-ebe73afd6c08",angleX:0,angleY:59.04,angleZ:0},{id:"3fee900b-4aed-49b8-aabb-a2c7bbc1a682",angleX:0,angleY:249.48,angleZ:0},{id:"ce82837f-c800-417b-a9d3-0a7dc8a54a58",angleX:0,angleY:341.64,angleZ:0},{id:"db5b590b-610e-4cee-ad40-30c237c69162",angleX:10.08,angleY:246.6,angleZ:0},{id:"99379a26-5e4f-4aa8-9091-e4b9bb2321bf",angleX:342.36,angleY:45.72,angleZ:0},{id:"c6aff4d5-cb14-4972-a278-51148ac01b3c",angleX:0,angleY:333.36,angleZ:0},{id:"f4ee80ef-1e60-4d9b-8ffb-8132bab84f60",angleX:0,angleY:335.16,angleZ:0},{id:"1eff1d82-5293-4d7f-bf64-b92c9190c214",angleX:0,angleY:32.4,angleZ:0},{id:"0aaa6e9f-d526-441f-8c84-d782c21ef7b5",angleX:0,angleY:0,angleZ:0},{id:"69f80a6e-a01e-49e8-b876-337ebef78b4d",angleX:0,angleY:35.64,angleZ:0},{id:"c445d9ef-460b-4a15-b519-d1480e76e5fd",angleX:0,angleY:138.6,angleZ:0},{id:"e4cce027-b9d5-4715-9455-c583fadb2c63",angleX:0,angleY:32.4,angleZ:0},{id:"d4329668-d86e-4bac-9d8e-413bc20c2b37",angleX:0,angleY:22.68,angleZ:0},{id:"34f20d32-b315-421c-88dc-3072b836dfe3",angleX:0,angleY:94.68,angleZ:0},{id:"0c9b4b83-8a1c-4938-91d3-23c94cdb9487",angleX:10.44,angleY:197.64,angleZ:341.28},{id:"06e4e24c-60d0-417e-b2ff-7f703836d0ac",angleX:0,angleY:238.68,angleZ:0},{id:"8b28fd1d-ac25-485a-b570-e1273dd451d8",angleX:0,angleY:0,angleZ:0},{id:"c03314ec-8e70-4b44-a459-17a9fff7d5ee",angleX:0,angleY:214.2,angleZ:0},{id:"973446b0-b2ee-46d7-9619-75f8c3d8b87e",angleX:0,angleY:120.96,angleZ:0},{id:"db6310f4-be11-4b24-a72a-5d0519a8b4bd",angleX:353.88,angleY:57.96,angleZ:0},{id:"85918fec-a579-4f06-9847-9f18a7db7775",angleX:18.36,angleY:234.72,angleZ:0},{id:"cbbd571b-a81d-4989-a5ed-54580847d302",angleX:0,angleY:50.4,angleZ:0},{id:"405c9f14-1ae5-415f-936b-ff063c47b518",angleX:351.36,angleY:130.68,angleZ:347.04},{id:"7b0105c4-0009-4037-9616-55e933c66a7b",angleX:353.16,angleY:88.2,angleZ:0},{id:"db5b5cdb-b71b-4a1a-8b44-8ce1869516dd",angleX:0,angleY:0,angleZ:0},{id:"76232003-917d-4ca0-9f22-a11a7a90121e",angleX:0,angleY:0,angleZ:0},{id:"294fa545-49bb-41ff-b26f-d30717588771",angleX:0,angleY:213.12,angleZ:0},{id:"e726ff05-2df8-48e7-8ceb-e24ab2d053ab",angleX:0,angleY:181.08,angleZ:0},{id:"356378ec-da9b-41ab-bd5f-cf64a07265d0",angleX:0,angleY:0,angleZ:0},{id:"55a34cc2-3172-4d25-8dbe-85b9c0886d96",angleX:0,angleY:238.68,angleZ:0},{id:"93e8a299-8d20-4309-ae8a-08de47d82225",angleX:0,angleY:84.96,angleZ:0},{id:"6ddc822d-13d1-4d2c-81ef-7d40c692a96e",angleX:0,angleY:0,angleZ:0},{id:"10362f0a-24ef-445d-85df-89dd4bbef96b",angleX:0,angleY:0,angleZ:0},{id:"0cff9dd4-2732-4a5c-ab8f-d73239959f21",angleX:0,angleY:119.16,angleZ:0},{id:"d392268c-9dfa-4bad-bd1c-dc5fd7dc66bf",angleX:0,angleY:0,angleZ:0},{id:"1f9567ed-cf5f-45d6-8436-ddb6d4df01fe",angleX:0,angleY:190.08,angleZ:0},{id:"b41b2e99-c591-42a0-a6fe-8d5a1a3997c5",angleX:14.04,angleY:252.72,angleZ:0},{id:"8a133f62-f50c-491e-a4f2-8236e1b843d3",angleX:353.16,angleY:128.88,angleZ:345.24},{id:"727d3d36-bfe2-4e06-9ce9-c10cea33ab67",angleX:0,angleY:198,angleZ:0},{id:"cf138767-03b4-4850-a59c-48b79fdc1e9e",angleX:0,angleY:151.92,angleZ:0},{id:"09598874-1f95-45a7-b5cb-58b4a4a2e977",angleX:6.12,angleY:186.12,angleZ:343.8},{id:"2f248dc8-ef52-4b1a-bccf-60c6fd2c2d56",angleX:0,angleY:326.52,angleZ:0},{id:"df54d410-c813-40a9-a92b-0f648c889502",angleX:0,angleY:319.68,angleZ:0},{id:"ebf45388-b5ea-42db-8a97-e066f113fa64",angleX:0,angleY:189.36,angleZ:0},{id:"0aa24c92-ac2e-4c93-9654-9f04152ca2d1",angleX:0,angleY:20.16,angleZ:0},{id:"598a3219-5b81-4de7-8966-6717ea360883",angleX:0,angleY:346.68,angleZ:0},{id:"01f39cd6-73ed-4682-b897-95ef88ca6fe1",angleX:0,angleY:116.64,angleZ:0},{id:"92540fda-4a4b-4a2d-aefa-833a5003975c",angleX:0,angleY:23.76,angleZ:0},{id:"2b374b5f-db9e-4c62-a814-e8c3bf802a0b",angleX:0,angleY:54.72,angleZ:0},{id:"da8766c4-9ba2-4802-8a01-4ae9ce8cd2d3",angleX:0,angleY:28.08,angleZ:0},{id:"e5c249ba-eb05-47b1-ab82-2618c3be256c",angleX:18.36,angleY:234.72,angleZ:0},{id:"24efbcaf-8c1f-41e4-865a-6c28f33a01d3",angleX:0,angleY:325.44,angleZ:0},{id:"871c4279-3526-4344-8a61-404ac2555490",angleX:0,angleY:279,angleZ:0},{id:"488af31c-5114-485c-94c8-5ea98eca3b82",angleX:346.68,angleY:23.76,angleZ:7.56},{id:"4a8299a5-6aab-43a4-b5bc-94cf225128aa",angleX:0,angleY:72.36,angleZ:0},{id:"d3ec7a23-6aa1-4156-b430-7bfa0de3648d",angleX:16.2,angleY:226.44,angleZ:0},{id:"f4607ee2-3261-4205-bad0-1a25887c0b71",angleX:0,angleY:297.36,angleZ:0},{id:"f99e35d3-48f7-4cfe-b322-2a91dbe8b0f3",angleX:0,angleY:353.88,angleZ:0},{id:"2aecb14b-f79a-4db0-9e68-9e414cd2470a",angleX:0,angleY:178.56,angleZ:0},{id:"f3a5ad8b-bc49-496a-9568-459423936e6e",angleX:0,angleY:32.4,angleZ:0},{id:"404deb90-80e9-41ce-856c-0555abad1956",angleX:0,angleY:35.28,angleZ:0},{id:"9deb4cf3-26fa-4f4d-9386-3d06a7a11c8a",angleX:349.2,angleY:244.8,angleZ:355.32},{id:"b6392cb0-f41e-413e-9e31-8db26983c6c2",angleX:0,angleY:112.32,angleZ:0},{id:"7b7e482f-b2db-4019-971e-092a6cb81068",angleX:353.88,angleY:62.28,angleZ:4.32},{id:"f8dd09a1-64c2-4188-b94c-32371da0a415",angleX:0,angleY:39.6,angleZ:0},{id:"6131c81d-91ff-412b-baec-8db09d924095",angleX:0,angleY:151.92,angleZ:0},{id:"19957077-2d7b-4547-a16c-26ec6860b2bb",angleX:0,angleY:125.64,angleZ:0},{id:"f08cacef-a65d-440a-aa9d-5f9ca7ec382f",angleX:0,angleY:315.36,angleZ:0},{id:"28e34c1a-a0c3-462a-adb9-31fc629eb43b",angleX:0,angleY:342.36,angleZ:0},{id:"a697322e-0504-4fd7-960c-2a62c9912ace",angleX:0,angleY:249.48,angleZ:0},{id:"79905f23-17a7-4014-a9c2-2b2891c9f539",angleX:0,angleY:290.52,angleZ:0},{id:"8ecef742-ad5b-41dd-a3a0-22b72e92640d",angleX:0,angleY:143.28,angleZ:0},{id:"bdcc3a3b-8810-48f9-b474-697ff2a4f840",angleX:0,angleY:182.88,angleZ:0},{id:"15449e18-6813-4d5c-b3c5-f891d460f2da",angleX:0,angleY:39.6,angleZ:0},{id:"7015f3db-75e6-497f-8207-41e0e314bdb3",angleX:0,angleY:156.6,angleZ:0},{id:"5ab40743-c5fc-4d21-b884-dcc9d5fbd1ed",angleX:0,angleY:78.84,angleZ:0},{id:"1ba02941-19ae-4a27-b5e1-ebdb53118d63",angleX:0,angleY:102.96,angleZ:0},{id:"e9aefd75-d134-43aa-a9be-b0e45c9500fa",angleX:0,angleY:23.76,angleZ:0},{id:"eb2eaba6-87b7-46bb-9b91-de7dd61f42a3",angleX:0,angleY:37.08,angleZ:0},{id:"490d89b8-88f8-4c79-94c2-b65f64e38be0",angleX:0,angleY:59.04,angleZ:0},{id:"ae69474f-f078-4316-8dae-088668b5b58d",angleX:0,angleY:187.56,angleZ:0},{id:"cc8d2f40-3316-40e0-ab18-a0ece7b31635",angleX:0,angleY:341.64,angleZ:0},{id:"790a4448-bc92-4bf4-8924-cfd8cd6fd59a",angleX:0,angleY:297.36,angleZ:0},{id:"9646e4cd-b143-442f-8448-8b61b093d2d3",angleX:16.2,angleY:176.04,angleZ:0},{id:"8ee31e23-5e40-4a77-a63c-fcf8431f092e",angleX:5.4,angleY:249.48,angleZ:355.32},{id:"a9ef9d47-9616-4982-9fc2-65520c2cf31b",angleX:0,angleY:63.36,angleZ:0},{id:"8045a611-dbb0-4d9d-af87-57eeb3e18e00",angleX:0,angleY:314.28,angleZ:0},{id:"985daecb-9aba-4375-8171-1de7324cbf3f",angleX:0,angleY:0,angleZ:0},{id:"2c770943-a210-4562-83df-0970055c2191",angleX:12.6,angleY:242.64,angleZ:0},{id:"40e284e9-ad5b-4fd4-9946-5976f9e8d28b",angleX:0,angleY:337.68,angleZ:0},{id:"160b0e27-fdd1-4634-84a6-d8f0d4d85db8",angleX:0,angleY:0,angleZ:0},{id:"454524a9-a7ca-487f-90ea-b843398ddbba",angleX:0,angleY:68.04,angleZ:0},{id:"c442cfc6-efce-4d2d-bf61-33ea041e0131",angleX:351.36,angleY:35.64,angleZ:0},{id:"f70e4db3-d3e7-4fc2-9803-bab72bf227ec",angleX:0,angleY:143.28,angleZ:0},{id:"3eda3dfe-cd97-4999-9d32-8a95b6800f3b",angleX:0,angleY:336.96,angleZ:0},{id:"6ecad57f-6553-4d86-9397-899b66334ce3",angleX:0,angleY:48.6,angleZ:0},{id:"2af5a053-3c57-4f09-b7f6-fc821685b83d",angleX:0,angleY:335.88,angleZ:0},{id:"02ec175d-e0d2-466c-8966-62f639dfceb2",angleX:0,angleY:108,angleZ:0},{id:"95e79626-e8c9-4926-80b6-5278d6d99b55",angleX:18.36,angleY:194.04,angleZ:356.04},{id:"3eb6481b-4b12-4fb1-a1ad-5e8c51535636",angleX:0,angleY:18.72,angleZ:0},{id:"b3cfe487-e614-4780-8aaa-60315e29a8da",angleX:10.44,angleY:72.36,angleZ:0},{id:"064e98b6-d554-45cc-ae93-55161a2c4ec9",angleX:0,angleY:194.04,angleZ:0},{id:"2c270ffa-0b58-474e-923b-7fc9454e85bd",angleX:353.16,angleY:118.44,angleZ:351.36},{id:"eaade75f-5546-4bdc-a9a6-b6d045629b6f",angleX:10.08,angleY:222.48,angleZ:0},{id:"03a875aa-66bb-4662-843b-ca4c1e0d56f1",angleX:0,angleY:193.32,angleZ:0},{id:"570572c3-6ce8-43ae-9c21-7b3a8a50d09e",angleX:0,angleY:94.68,angleZ:0},{id:"abfd0b5e-7755-40a1-be63-9999d4bf9902",angleX:0,angleY:0,angleZ:0},{id:"e19ed42a-285a-4b21-8f69-ce8c726878a0",angleX:0,angleY:119.16,angleZ:0},{id:"d2702623-c013-4fcc-8422-f93acf9b03dd",angleX:0,angleY:237.24,angleZ:0},{id:"086daa65-ce28-4d21-9229-561d5ee1f209",angleX:0,angleY:0,angleZ:0},{id:"250067b0-8ba7-40ad-848c-97116efe1611",angleX:0,angleY:86.76,angleZ:0},{id:"96148705-da01-4cd7-8f74-b0f758104a9e",angleX:0,angleY:76.68,angleZ:0},{id:"add4c811-60b6-4efc-b518-dea10d230419",angleX:0,angleY:64.44,angleZ:0},{id:"479137ed-bac4-4d0e-ad5c-5b4dee9add7d",angleX:0,angleY:0,angleZ:0},{id:"01ae8d6d-815c-4b47-92f5-2a59606008f4",angleX:0,angleY:208.8,angleZ:0},{id:"16fef51d-6254-4a9a-ac89-6129240bbd8d",angleX:0,angleY:186.12,angleZ:0},{id:"c8ffb6ca-4939-4a92-8332-827d859f3218",angleX:0,angleY:0,angleZ:0},{id:"e7cdba12-1f38-4cf7-adb7-04c0869ccd10",angleX:0,angleY:165.24,angleZ:0},{id:"90bea81b-96ec-46cf-a2c3-5f17b2080d11",angleX:0,angleY:7.92,angleZ:0},{id:"25384263-ba3d-449b-99eb-bf1267721af1",angleX:14.4,angleY:244.8,angleZ:0},{id:"4ceac926-7c78-44af-841c-b5eeb300a10c",angleX:19.44,angleY:264.24,angleZ:360},{id:"079e080a-b68b-4091-8d42-d547a4831123",angleX:0,angleY:103.32,angleZ:0},{id:"d9d07f77-b496-4332-8ea7-8f46e86cc60e",angleX:0,angleY:0,angleZ:0},{id:"eea058b4-250e-45ef-987c-2f5c52a9b27c",angleX:0,angleY:94.68,angleZ:0},{id:"97d910bb-d8a9-4069-b672-01efda751675",angleX:0,angleY:0,angleZ:0},{id:"ea70e8fd-d0ea-4540-ba5b-4a6914ed48e7",angleX:0,angleY:127.44,angleZ:0},{id:"900bfa65-5a78-4a72-acbe-972d52265c88",angleX:0,angleY:196.2,angleZ:0},{id:"b65c35b0-1c4d-45eb-af69-7f8dd532addb",angleX:0,angleY:333.36,angleZ:0},{id:"89cf4c5b-5def-4519-af5c-0edc8f0dc718",angleX:0,angleY:45.72,angleZ:0},{id:"0957ddd1-c390-46c4-9c62-700a0f0a2594",angleX:355.68,angleY:28.08,angleZ:0},{id:"581f103b-d48a-44fa-bc20-c2ca56edfad2",angleX:0,angleY:0,angleZ:0},{id:"19f651ba-f22c-4b23-985f-fd3a613d0f45",angleX:353.16,angleY:50.4,angleZ:347.04},{id:"75d13f51-2991-4073-8be1-1984b8ff8ffa",angleX:12.24,angleY:244.8,angleZ:0},{id:"46538cfb-2674-49a6-a7ef-d19e75bbce68",angleX:1.44,angleY:253.8,angleZ:10.44},{id:"0936f9d4-44a5-4023-bfd2-baabef3058b4",angleX:0,angleY:261,angleZ:0},{id:"cb769bd5-4972-45bb-97c1-989bedd259f3",angleX:10.08,angleY:258.84,angleZ:0},{id:"e564e77f-e329-4442-8ad0-f9551df4327a",angleX:6.12,angleY:242.64,angleZ:4.32},{id:"9d58b5be-8cf8-4169-8192-fc69ed4b111a",angleX:0,angleY:309.6,angleZ:0},{id:"ba44a2c4-7d17-4dac-bd4b-616e836cbf38",angleX:0,angleY:301.68,angleZ:0},{id:"f357a9ef-1bb4-4a28-a8df-50f59933f049",angleX:0,angleY:268.92,angleZ:0},{id:"5d8c8566-a9ee-4023-9e0c-cb5ecf0f6955",angleX:0,angleY:216.36,angleZ:0},{id:"1678d4a3-4f2c-45ba-88e7-bdc2243a0c73",angleX:0,angleY:68.04,angleZ:0},{id:"e7898d33-7209-4faf-9798-3bc4f056e648",angleX:0,angleY:30.24,angleZ:0},{id:"1d4de285-7442-42c7-bfaa-75fa448490b2",angleX:346.68,angleY:37.08,angleZ:10.44},{id:"ea7d9e53-a78d-40d0-a9b2-cef68498ca83",angleX:0,angleY:164.52,angleZ:0},{id:"52b33d61-e205-4adf-9378-6ed1371ca164",angleX:0,angleY:95.4,angleZ:0},{id:"64d00d9a-1c24-45f0-8a93-40bd14a3a111",angleX:0,angleY:213.84,angleZ:0},{id:"fc3c4cd9-c4db-4943-beea-4e6e76e7b1b7",angleX:0,angleY:329.04,angleZ:0},{id:"0d7601b4-0854-41a9-97fe-415c507c8895",angleX:0,angleY:10.44,angleZ:12.24},{id:"0dcc47f3-00ca-4ef0-9288-624aa91655cd",angleX:0,angleY:319.68,angleZ:0},{id:"13084852-6d40-44db-a7f2-d5a664b0499a",angleX:0,angleY:0,angleZ:0},{id:"7f76b592-4b04-45b3-a948-75ff5c5684ff",angleX:0,angleY:134.28,angleZ:0},{id:"d6bfca4d-6a23-42c1-b870-76e36788ac17",angleX:0,angleY:85.68,angleZ:0},{id:"0caae85e-22d3-4855-9ee4-a7843d1ad3a8",angleX:0,angleY:94.68,angleZ:0},{id:"b3c97ccc-1d3c-410d-8e9f-3a2c1861e5c6",angleX:0,angleY:120.96,angleZ:0},{id:"d849782a-52b5-4790-b764-e2da3bf1d1db",angleX:0,angleY:26.28,angleZ:0},{id:"c24891f1-1a4a-4f69-8497-4a61e1dde0dd",angleX:0,angleY:311.4,angleZ:0},{id:"37e33026-02f2-4291-9471-0be244492b30",angleX:0,angleY:10.44,angleZ:0},{id:"28d2c83f-9aba-41c8-85e4-5abe6c55a17d",angleX:0,angleY:28.08,angleZ:0},{id:"3fd52295-9e73-474b-a00d-562e2185be65",angleX:0,angleY:143.64,angleZ:0},{id:"de57865b-6555-4767-a507-59d0be717da6",angleX:0,angleY:28.08,angleZ:0},{id:"440d1594-91d6-4bd4-8ff0-0f9131b3b689",angleX:0,angleY:200.88,angleZ:0},{id:"e250192d-4adf-4cf0-92a7-0c4f74554058",angleX:0,angleY:41.4,angleZ:0},{id:"d9842ef8-5215-4383-9f0d-a41cc4c901c2",angleX:0,angleY:0,angleZ:0},{id:"73039ff0-0b29-4935-958b-ab24f8f15575",angleX:0,angleY:30.24,angleZ:0},{id:"1b04f135-abe6-4ca4-b1ba-747d01375428",angleX:0,angleY:189.36,angleZ:0},{id:"fd2f949a-e2b9-4aae-9178-ae7ef971710c",angleX:0,angleY:279,angleZ:0},{id:"59d88a82-0325-48fe-8866-35110448d632",angleX:0,angleY:301.68,angleZ:0},{id:"09d099c6-5a2b-4be2-a11e-81e95f427811",angleX:10.08,angleY:267.48,angleZ:356.04},{id:"326d8ce8-8235-4058-b61d-5a34b3cd6ddb",angleX:0,angleY:7.92,angleZ:0},{id:"d3e7e2b7-a928-4db8-bdab-fcaee3d6f11c",angleX:0,angleY:0,angleZ:0},{id:"a632d569-06e4-4fc1-8b5d-030e6a078090",angleX:10.08,angleY:242.64,angleZ:0},{id:"7ac02166-ba9a-4db5-b6fd-0ca3658ab68e",angleX:6.12,angleY:227.16,angleZ:14.76},{id:"91f325d3-8f3c-4944-8c71-a6c03e1172b9",angleX:14.4,angleY:255.24,angleZ:0},{id:"5bdb47c1-8ee0-4929-b3e4-82ef8761c0e0",angleX:0,angleY:346.68,angleZ:0},{id:"1fafdf37-dcfa-4a83-a4a3-5b36cbde5950",angleX:0,angleY:41.4,angleZ:0},{id:"e3e39c8a-0dd9-4c78-904b-c500ec33e66e",angleX:349.2,angleY:19.44,angleZ:0},{id:"3e5c37e4-1475-4235-bea9-73c51f70fdfd",angleX:0,angleY:14.76,angleZ:0},{id:"9b17acd8-c770-41c2-968c-8f14614683bb",angleX:0,angleY:212.4,angleZ:0},{id:"e3fd14ea-b1af-4b98-89ce-303adacd9297",angleX:0,angleY:315.72,angleZ:0},{id:"ac6970eb-3c1c-4622-8268-b51786696700",angleX:0,angleY:322.56,angleZ:0},{id:"0fffc947-5b57-4166-8b50-0640cee93698",angleX:32.4,angleY:190.08,angleZ:0},{id:"31c3415f-f53f-400a-9a4f-c09f3be88838",angleX:0,angleY:116.64,angleZ:0},{id:"fdc0a9e6-c5b4-47f2-995e-49c4bf097e65",angleX:0,angleY:0,angleZ:0},{id:"95b29f80-cad2-4bcc-a2c9-40091e2154c5",angleX:0,angleY:103.32,angleZ:0},{id:"6492acb3-b9b9-41bb-bee4-a027ef89acdf",angleX:355.32,angleY:163.08,angleZ:340.92},{id:"ec36de4e-c36e-4a8d-8a0b-01fa1de04e15",angleX:9.72,angleY:196.2,angleZ:352.08},{id:"8718c06a-c2b8-48a2-b4bc-078f5c8a7adb",angleX:0,angleY:30.24,angleZ:0},{id:"7c0d3cb7-4b9b-45e4-8889-6a6d92ec46db",angleX:0,angleY:178.56,angleZ:0},{id:"1eed5111-9456-4508-8c8f-d58613a851c3",angleX:0,angleY:187.92,angleZ:0},{id:"1c3d4fb2-00fe-4b44-9a44-11de47fbd620",angleX:0,angleY:0,angleZ:0},{id:"3c1d3e71-1b1b-4210-a37a-11ce6770a32b",angleX:0,angleY:0,angleZ:0},{id:"6d041cdb-7116-49d0-94cd-86af6eb3551c",angleX:0,angleY:204.12,angleZ:0},{id:"0da0c6d3-b8b3-45bf-8995-ff81e60584ba",angleX:0,angleY:68.04,angleZ:0},{id:"62d9361d-5a31-4400-9f7a-dba0e3d96999",angleX:0,angleY:0,angleZ:0},{id:"2ac67b62-4e68-4518-afa9-43db5759575f",angleX:355.32,angleY:130.68,angleZ:351.36},{id:"ec92c206-e93f-4d46-a6fa-433b814a46e3",angleX:0,angleY:85.68,angleZ:0},{id:"beaacaf9-5b07-431c-855b-35b6750e8a7b",angleX:0,angleY:0,angleZ:0},{id:"ce635c73-de94-4cc5-819c-a2309b99d979",angleX:0,angleY:234.72,angleZ:0},{id:"9e14059d-6e21-46a4-9b5c-fb8a519695d9",angleX:0,angleY:230.76,angleZ:0},{id:"c1821505-60da-4729-a48b-f2d57e9184c8",angleX:0,angleY:0,angleZ:0},{id:"e05a0215-0025-4c34-9576-7fd1add32e78",angleX:0,angleY:40.32,angleZ:0},{id:"66ad565f-3706-43fc-a992-f0c3c4afe8e2",angleX:0,angleY:191.88,angleZ:0},{id:"e13e652b-74e7-49f7-83b4-6529bf209e0c",angleX:13.32,angleY:270.36,angleZ:0},{id:"17dcb546-a93e-4d1b-abfe-d3d3dab1898a",angleX:0,angleY:74.88,angleZ:0},{id:"cbedb471-5d14-4efb-881b-57e839913302",angleX:0,angleY:182.88,angleZ:0},{id:"36119856-baba-42a1-a6e7-9421bb12fe7d",angleX:0,angleY:317.52,angleZ:0},{id:"4d710085-c3e9-4fc8-a3a5-a33b814dc342",angleX:0,angleY:81.36,angleZ:0},{id:"248f4eb5-0b95-4a62-91d2-651aae0507c0",angleX:0,angleY:147.6,angleZ:0},{id:"552910d4-2ac8-401b-b75f-2d2226a23281",angleX:0,angleY:90,angleZ:0},{id:"6c02d004-3b86-4ab8-807f-528b4cad2966",angleX:0,angleY:0,angleZ:0},{id:"27961c34-d642-4568-9637-b7d28cc2fdc4",angleX:16.2,angleY:218.52,angleZ:0},{id:"2a4a6362-daae-4ccf-ad2c-6c10ab96c749",angleX:0,angleY:169.56,angleZ:0},{id:"d344be2c-1ab9-4c32-9495-e89f92253b6b",angleX:352.08,angleY:165.96,angleZ:339.84},{id:"3c9ca04c-3102-4849-a2ac-817675643440",angleX:0,angleY:0,angleZ:0},{id:"409c928d-5dc2-44f2-b6ce-6813f443852a",angleX:0,angleY:6.12,angleZ:0},{id:"f0d9a181-dd63-46a0-9efb-709d1f540727",angleX:0,angleY:10.44,angleZ:0},{id:"c47ea933-7680-4f85-8881-09e2e6c935b6",angleX:0,angleY:307.44,angleZ:0},{id:"aa88708a-7623-4bb2-9807-bb2667dd4838",angleX:0,angleY:262.8,angleZ:6.12},{id:"d95d7167-97ed-42e1-bd17-265697a85cf4",angleX:360,angleY:72.36,angleZ:351.36},{id:"5475123a-4688-4516-9a72-1f8cf0cd6d90",angleX:0,angleY:327.6,angleZ:0},{id:"c6392bf8-be5d-4cd8-b77c-94cd23934a7e",angleX:0,angleY:0,angleZ:0},{id:"0da8e4ee-1147-4142-b3af-d4f6ff8884ae",angleX:349.2,angleY:37.08,angleZ:345.24},{id:"a2a22118-c554-46b5-b12b-6e02c6ec60c7",angleX:10.08,angleY:206.28,angleZ:0},{id:"88a4ccdd-ec23-4b79-81cf-621acdbd3ad2",angleX:0,angleY:216.36,angleZ:0},{id:"aa2bbf5a-2485-4912-a053-af9aedda62df",angleX:0,angleY:272.88,angleZ:0},{id:"f21606f7-0079-4656-a32b-89a91b0d9b94",angleX:0,angleY:257.4,angleZ:0},{id:"ea7c5f14-b812-4a92-bcbb-a38c54194c1a",angleX:0,angleY:30.24,angleZ:0},{id:"dd102186-5c5c-4a83-8ddf-00620baa4c9b",angleX:0,angleY:19.44,angleZ:0},{id:"77dbcf3a-01e9-4c27-adf5-085759ff211f",angleX:0,angleY:14.76,angleZ:0},{id:"98136e5b-bd0a-4646-a637-e3b6f713b2e6",angleX:0,angleY:125.64,angleZ:0},{id:"e367a09f-02ef-4313-a581-73cf61671e27",angleX:0,angleY:191.88,angleZ:0},{id:"1114ce7d-edf3-486e-b8c0-e1f5bc53f83d",angleX:0,angleY:0,angleZ:0},{id:"dcafa112-7cfd-4c88-bc74-9702042131cd",angleX:0,angleY:12.24,angleZ:0},{id:"32003666-c74a-4055-b80a-89ae01551511",angleX:0,angleY:125.64,angleZ:0},{id:"1bf23852-c1e4-49c8-a452-a7f892dce048",angleX:0,angleY:76.68,angleZ:0},{id:"4ad84cd1-0d99-4f77-84ff-4d866fbbf995",angleX:0,angleY:62.64,angleZ:0},{id:"db112114-e2b9-440a-a052-df6c3957c8e9",angleX:0,angleY:68.76,angleZ:0},{id:"58fe7c62-a785-4d02-87a7-517cda89ae6b",angleX:0,angleY:103.32,angleZ:0},{id:"7a6bfaf2-4cb3-4122-ba5c-555d1c55d109",angleX:0,angleY:129.96,angleZ:0},{id:"8dfcf3eb-f10f-44c6-be20-ecb2267b9e2a",angleX:0,angleY:275.04,angleZ:0},{id:"9c7a29f0-3d6f-403e-98d3-2cbf14a9aeb5",angleX:0,angleY:22.32,angleZ:0},{id:"6864ad80-dbfd-4e20-b5c8-0ee0b5ecdd6a",angleX:0,angleY:200.88,angleZ:0},{id:"d186d50e-e703-4473-924c-89165e8fa613",angleX:0,angleY:23.76,angleZ:0},{id:"36865d32-6f56-422b-8950-1663a396f6ef",angleX:0,angleY:0,angleZ:0},{id:"772fed6e-5fec-4ed9-b2d9-2e08132db144",angleX:0,angleY:0,angleZ:0},{id:"edcfb9a5-5d21-4d93-883a-d4214cb4b5f3",angleX:0,angleY:174.6,angleZ:0},{id:"e233f6c9-bcdb-4794-915d-2ed83b54ab89",angleX:0,angleY:26.28,angleZ:0},{id:"d37894a2-2891-44f2-8316-dd2780e1c963",angleX:0,angleY:257.4,angleZ:0},{id:"22095270-fe96-4e39-ba9a-93419c7158a7",angleX:0,angleY:317.52,angleZ:0},{id:"05a79888-459a-42cb-ab52-062611670bbe",angleX:14.04,angleY:228.6,angleZ:357.84},{id:"b13c6e6c-a24d-40c1-9ebd-cfb15c489a18",angleX:357.84,angleY:50.4,angleZ:349.2},{id:"9e6559ae-eae4-4970-81ae-f6cb875b6152",angleX:0,angleY:287.28,angleZ:0},{id:"ffbc46a4-c9a6-4bad-b507-a093e64c70f9",angleX:0,angleY:291.24,angleZ:0},{id:"312239f5-2dcc-47e1-b179-cab8e8de49a6",angleX:355.68,angleY:289.08,angleZ:0},{id:"0a3d4cee-1403-4294-bbb3-1c0e308b9ef6",angleX:355.32,angleY:50.4,angleZ:355.32},{id:"80d47a3d-bfb8-4485-afb2-d43ec208324e",angleX:0,angleY:291.24,angleZ:0},{id:"e827e651-ca3a-43b7-b96d-78ed947ce2a5",angleX:0,angleY:271.44,angleZ:0},{id:"9c00ac00-79ea-4fe0-9600-3b3db5e5beb3",angleX:0,angleY:50.4,angleZ:0},{id:"21c392c4-703e-484d-b7d5-6c3f9a100df6",angleX:0,angleY:28.08,angleZ:0},{id:"cf79be0b-79ae-4dba-bdfa-f64df3660b1c",angleX:14.04,angleY:169.92,angleZ:345.96},{id:"3a4c6d82-ef56-48ee-9617-41b013ce4156",angleX:0,angleY:345.6,angleZ:0},{id:"9c54b945-8869-4263-96aa-3496f0efa2a5",angleX:0,angleY:0,angleZ:0},{id:"574aadc2-cedf-4459-8c02-40ed033d2d9b",angleX:0,angleY:187.56,angleZ:0},{id:"bf2875fd-7f89-4649-9233-d045eced8c74",angleX:0,angleY:212.4,angleZ:0},{id:"36710822-b529-4bd0-b484-a74c779a21a7",angleX:0,angleY:151.92,angleZ:0},{id:"b829673b-655e-4904-a292-8671195ad0e9",angleX:0,angleY:63.36,angleZ:0},{id:"985e23d4-6714-4e32-a87f-ffc51c6ad20e",angleX:0,angleY:94.68,angleZ:0},{id:"f3750530-cc75-4ccf-ab52-02927e7ae23a",angleX:0,angleY:311.4,angleZ:0},{id:"3b817fc0-68b2-4d4e-9672-a742ab59634d",angleX:0,angleY:81,angleZ:0},{id:"9186108b-2ae9-48e5-b6ca-33be70f86b6e",angleX:19.44,angleY:252,angleZ:0},{id:"7876dc42-fc9a-487d-a422-455fd9a06395",angleX:0,angleY:174.24,angleZ:0},{id:"5416d3a3-48c2-44be-b3ea-34f23c466bea",angleX:0,angleY:182.88,angleZ:0},{id:"b5de7082-e92f-4da4-ad87-d96696b6201d",angleX:0,angleY:22.32,angleZ:0},{id:"dfd89ab7-2149-4943-ac5f-006865c0a70c",angleX:0,angleY:226.44,angleZ:0},{id:"b99fd132-ea80-4022-a78e-c8fba46e02de",angleX:0,angleY:0,angleZ:0},{id:"0a5e6996-755e-4ba9-8f29-07dc74c9e8e0",angleX:0,angleY:0,angleZ:0},{id:"ff62cd40-dec9-46f4-97b7-1addf333d5e9",angleX:0,angleY:167.76,angleZ:0},{id:"0ea00b0e-cc23-4929-8fa2-ae8b3b382f98",angleX:0,angleY:236.16,angleZ:0},{id:"3ace23b2-0302-413a-a3df-93bb6d241f06",angleX:360,angleY:153,angleZ:347.04},{id:"8fc553b0-3615-41db-a66a-7c43e60f37bd",angleX:7.92,angleY:96.84,angleZ:345.96},{id:"6be2f0d7-ce2d-456f-adf6-efb5f07b79e7",angleX:0,angleY:213.12,angleZ:0},{id:"bc2ca797-c824-4e56-8c0d-970e5157c91f",angleX:0,angleY:291.24,angleZ:0},{id:"3a6afc01-e883-46fb-848a-7d5d6dfa8f2e",angleX:0,angleY:0,angleZ:0},{id:"a2359f57-2380-48ab-a42f-224ad3d3f342",angleX:0,angleY:172.8,angleZ:0},{id:"cd62f21b-12ca-4327-a055-c152fb94f6cf",angleX:0,angleY:131.4,angleZ:345.6},{id:"1e8d9247-d495-457c-847f-9dcec39bb48f",angleX:0,angleY:173.16,angleZ:0},{id:"09122e6d-9667-4ba1-a9b7-2af5329b31c6",angleX:0,angleY:142.92,angleZ:349.2},{id:"3ae83907-2493-44da-8d4b-4f6759215c7a",angleX:0,angleY:251.64,angleZ:0},{id:"9887ef09-fbb7-4e00-a6c6-ef4bfd5d95d4",angleX:13.32,angleY:189.36,angleZ:0},{id:"be7556b7-ffd9-4d48-bcac-815ce309e087",angleX:0,angleY:0,angleZ:0},{id:"76963b5b-e9fd-4b97-ac2a-5d3a73ab141b",angleX:0,angleY:135.36,angleZ:0},{id:"412a3ee7-4923-4c09-8401-aa4af7384d63",angleX:0,angleY:262.8,angleZ:0},{id:"7f6fd20d-700d-4e59-ba88-3028f324e570",angleX:0,angleY:314.28,angleZ:0},{id:"8e5f6dc9-240c-4716-9a01-52f08337990d",angleX:0,angleY:115.2,angleZ:0},{id:"6319af2a-058b-46eb-a80c-fa63be0817f4",angleX:0,angleY:24.12,angleZ:0},{id:"312e87cd-36f0-4355-8f00-4e0f07d99381",angleX:0,angleY:314.28,angleZ:0},{id:"ff9cce5d-7330-40f2-8987-3b3937f9c5c6",angleX:0,angleY:342.36,angleZ:0},{id:"4be51075-7b71-446e-8507-b0f2f779b24e",angleX:27,angleY:208.08,angleZ:0},{id:"7108245b-9cba-4eab-a248-95014d0ec3f4",angleX:0,angleY:342.36,angleZ:0},{id:"bbec76b7-d04c-4f21-80f8-d08ef1a34e16",angleX:0,angleY:198,angleZ:0},{id:"dc44b3c8-f3e5-47e0-900b-f2ea4b4bf6e2",angleX:0,angleY:245.52,angleZ:0},{id:"da62b7ba-d3e0-4ba1-9070-357ff449a1e0",angleX:0,angleY:280.44,angleZ:0},{id:"ee4b6fae-1782-48ae-8452-f786392a6dbd",angleX:350.64,angleY:66.6,angleZ:0},{id:"8c129a4e-aa45-4f55-a5b3-15965306e8d8",angleX:0,angleY:333.36,angleZ:9.36},{id:"2b227179-667b-4cdc-88a1-33e62f95d861",angleX:0,angleY:173.88,angleZ:0},{id:"ae0e309e-2681-4547-9a8b-af877fbca3a4",angleX:0,angleY:307.44,angleZ:0},{id:"afac4c9a-dc69-42f6-884b-c9ec09474a3a",angleX:0,angleY:256.68,angleZ:0},{id:"315fcfdb-621a-4080-804b-3b162b32a846",angleX:355.68,angleY:324.72,angleZ:0},{id:"6377cfaf-a318-4a03-8290-50698407294c",angleX:352.08,angleY:1.8,angleZ:2.16},{id:"8449a526-efee-4ff3-8469-aeb9d29385e9",angleX:351,angleY:351,angleZ:0},{id:"6466187f-9f85-44ff-9af2-6c16f80d821d",angleX:0,angleY:0,angleZ:0},{id:"130419eb-ece7-43f3-9cd5-2b27c6dff44e",angleX:351.36,angleY:50.4,angleZ:0},{id:"1ead2685-c45e-4f68-b778-b3e12ec9de67",angleX:0,angleY:160.2,angleZ:0},{id:"c065dd74-53a9-4d38-9663-eea0014b5279",angleX:0,angleY:165.24,angleZ:0},{id:"7c7270be-4dc4-44cf-a1ab-b968be9690cb",angleX:10.44,angleY:178.56,angleZ:0},{id:"ca790cc3-7933-43cd-b1ce-d35543113afe",angleX:11.52,angleY:249.48,angleZ:0},{id:"085dd680-2e33-43c5-88fb-630e5d1d114c",angleX:0,angleY:50.4,angleZ:0},{id:"7f98e697-cd4b-4560-bce3-f749528741c4",angleX:0,angleY:23.76,angleZ:0},{id:"f3bc2075-a2d2-4156-b7a7-fc1e70723453",angleX:0,angleY:14.76,angleZ:0},{id:"6e48b15d-e4a6-4e94-a0ac-1ab7568dcc07",angleX:0,angleY:194.04,angleZ:0},{id:"8048e6d5-7db7-44b3-8629-536d3135f982",angleX:0,angleY:0,angleZ:0},{id:"58f7a229-ca31-4b78-898f-91d200bdb2f0",angleX:347.76,angleY:0,angleZ:0},{id:"2156d5ba-e23b-4b6f-989e-0bea69a5e8bf",angleX:0,angleY:289.08,angleZ:0},{id:"c07658b2-d564-4518-9440-ca7abf59f9b3",angleX:0,angleY:258.12,angleZ:0},{id:"b2ac6351-8eb0-4889-8c50-3b596f0e7d5a",angleX:0,angleY:0,angleZ:0},{id:"bdf48149-5364-4ae6-ba34-d6c5fe4546f5",angleX:0,angleY:0,angleZ:0},{id:"aadf9e11-9d16-427b-984a-b913762913fd",angleX:0,angleY:63.36,angleZ:0},{id:"730e925a-a009-42cd-9616-cadea21bc9e0",angleX:0,angleY:12.24,angleZ:0},{id:"f7405dac-3ae2-4753-b24b-04847f9916c6",angleX:0,angleY:20.16,angleZ:7.92},{id:"d39c18aa-df98-42ac-b525-f5682bcac076",angleX:0,angleY:190.08,angleZ:0},{id:"e03f1069-e1d6-4aa9-b719-1e7bf8b167d1",angleX:0,angleY:10.44,angleZ:0},{id:"031844db-aba2-4d45-8335-5d2198cfb63d",angleX:0,angleY:342.36,angleZ:0},{id:"ee336479-6d71-49e2-afbe-7294a79eba8b",angleX:0,angleY:68.04,angleZ:0},{id:"888951c8-de04-47b2-ba28-d35a69a560e6",angleX:0,angleY:0,angleZ:0},{id:"96ef3591-6146-46b1-a856-021320c1ba0a",angleX:10.44,angleY:178.56,angleZ:0},{id:"bc5d00b1-c8db-4351-ae7c-d9feeb6809e3",angleX:5.4,angleY:289.08,angleZ:0},{id:"3ed00d2b-dfbf-4fc3-a8cb-190ace6b6ab5",angleX:0,angleY:30.96,angleZ:0},{id:"7e524fee-a436-4391-9661-81af7cc4ed80",angleX:173.52,angleY:36.72,angleZ:175.68},{id:"65313b3e-e484-4ad4-98bb-cc78f0a47d99",angleX:0,angleY:165.24,angleZ:0},{id:"424fd014-1be7-4199-89b7-2020ed0e3fc6",angleX:0,angleY:0,angleZ:0},{id:"623ce13c-e497-4729-bb13-aa3a1ae676d3",angleX:351.36,angleY:338.04,angleZ:3.24},{id:"96155043-5669-4d00-aff7-2f3936853123",angleX:343.44,angleY:52.56,angleZ:0},{id:"728e9459-896b-4024-b261-738632bd795c",angleX:355.32,angleY:339.12,angleZ:0},{id:"39ca4fab-3670-4b56-9bf9-e625d13c65d8",angleX:12.24,angleY:267.12,angleZ:0},{id:"ea1875e8-2725-4857-8889-07034bb7ba36",angleX:0,angleY:299.16,angleZ:0},{id:"7aff8d49-8dd4-4ea3-a5ea-269d9b1dab46",angleX:0,angleY:333.36,angleZ:17.64},{id:"ea250fe7-499e-45cb-88ce-4ea2ea113d5c",angleX:0,angleY:187.92,angleZ:0},{id:"c1329cdc-0206-41fa-a33d-cb68b7c5acfc",angleX:0,angleY:271.44,angleZ:0},{id:"f8e83ff4-aad9-4cb4-8705-29588b331dce",angleX:2.16,angleY:107.64,angleZ:350.64},{id:"22bbc751-547c-4d67-ba57-a73c47255a54",angleX:0,angleY:235.08,angleZ:0},{id:"e2c81025-ce17-416d-bc6b-a6deb462fe0b",angleX:0,angleY:222.48,angleZ:0},{id:"a0d45386-200b-49bc-a7f8-61d6162ae671",angleX:0,angleY:333.36,angleZ:0},{id:"45d88fd5-117a-4da2-aa3a-c29fb8a87245",angleX:8.28,angleY:274.68,angleZ:0},{id:"e0d7b0c0-b21c-4809-af9e-2bcf161bd0e6",angleX:0,angleY:329.04,angleZ:0},{id:"ac8ce9c2-fac2-49c7-a22a-e414464cce4f",angleX:0,angleY:3.96,angleZ:0},{id:"026e4fa7-037c-4706-aef3-9154dd24116f",angleX:0,angleY:320.4,angleZ:0},{id:"57843219-294b-4b07-999b-04efd218c60a",angleX:0,angleY:311.4,angleZ:0},{id:"ca43997d-83ee-4ebf-aaa7-b9d90d9da820",angleX:0,angleY:113.04,angleZ:0},{id:"986ccf7d-3633-4260-a505-c5952024d833",angleX:0,angleY:0,angleZ:0},{id:"549a1928-7d28-4cc1-a733-bda34ed3f12f",angleX:0,angleY:131.4,angleZ:0},{id:"0dd20d70-c15a-4d44-b2a4-02dc60715c73",angleX:0,angleY:223.92,angleZ:0},{id:"396c43f0-6483-434a-9c85-0c18b7c86936",angleX:13.32,angleY:195.48,angleZ:0},{id:"afdac192-efe0-46b2-b132-d536428590f9",angleX:0,angleY:170.64,angleZ:0},{id:"6fd3623e-d278-4813-916d-d972f573976d",angleX:0,angleY:169.92,angleZ:0},{id:"1fb8b935-f66d-4567-8727-3b898657991e",angleX:15.84,angleY:183.96,angleZ:0},{id:"65277fbc-d690-4c78-9b32-7bb34a2aaf2a",angleX:0,angleY:20.52,angleZ:0},{id:"2d7a2457-887f-4912-83cd-17091bde93a2",angleX:0,angleY:343.8,angleZ:0},{id:"b57acf57-1e47-4f22-87bb-30cb180b5fcb",angleX:0,angleY:162.36,angleZ:0},{id:"db1a36c5-7f72-4eea-a13a-6bbc441e5f40",angleX:0,angleY:174.6,angleZ:0},{id:"ed714c7f-2f30-4467-b5c6-e39bc34149d6",angleX:0,angleY:26.28,angleZ:18.36},{id:"c2f09a85-d670-4e56-aafe-712d2c9cc22d",angleX:0,angleY:226.44,angleZ:0},{id:"ed8c88e6-d6b8-470e-920d-f585d8103f88",angleX:8.28,angleY:181.08,angleZ:345.6},{id:"427903f5-cdec-44d8-8377-a8079d60c3a8",angleX:0,angleY:277.2,angleZ:0},{id:"5e41f0a9-fa0b-485a-bcac-fa4b1a5e4290",angleX:0,angleY:217.44,angleZ:0},{id:"52be2af9-3eb2-460f-bdd5-13eb3f2b0536",angleX:0,angleY:3.96,angleZ:18.72},{id:"7fbea04d-4068-4899-aebc-5fcdc862256c",angleX:0,angleY:262.08,angleZ:0},{id:"d641a9c4-15f4-4ae3-a422-ccd9fad7c7ba",angleX:0,angleY:14.04,angleZ:0},{id:"b96afcb8-ce99-4412-883c-91666e6f2b26",angleX:0,angleY:202.32,angleZ:0},{id:"d3160fbf-1820-45f0-9d1f-d0c2aca53bbd",angleX:0,angleY:66.6,angleZ:0},{id:"2b4d9d07-b2e9-44dd-88bb-7bb7752a279c",angleX:0,angleY:204.48,angleZ:0},{id:"533f439c-ae42-4ff3-b115-176c7923a784",angleX:9.36,angleY:153,angleZ:351.36},{id:"f760447c-9285-421f-a9c6-92024a068025",angleX:0,angleY:258.12,angleZ:0},{id:"acbd7b3a-9acd-460c-8f1a-ad3880fc33dd",angleX:0,angleY:137.52,angleZ:0},{id:"219be8c4-23d7-4d75-82c8-3c6efc6df215",angleX:0,angleY:287.28,angleZ:0},{id:"1cf1359b-18c2-4725-b2dc-ac95dea73575",angleX:0,angleY:46.44,angleZ:0},{id:"29a0e438-0b1a-4c4f-b23e-58ce9bbc6a08",angleX:0,angleY:0,angleZ:0},{id:"3aa222a2-5532-4ee9-8cd6-98b6c23909d1",angleX:0,angleY:111.24,angleZ:0},{id:"9b86ef7f-d281-48e8-a143-1fbece8f511a",angleX:0,angleY:305.28,angleZ:0},{id:"d4c17d71-8ded-48ab-8e66-7523304076f1",angleX:0,angleY:72.36,angleZ:0},{id:"c32fd361-3eb2-45c3-93dd-42345e8b740e",angleX:0,angleY:0,angleZ:0},{id:"0b105b3a-b595-401f-a099-37d2f6a0d55b",angleX:0,angleY:279,angleZ:0},{id:"e232ad28-ede7-4303-b61e-7b6079342be1",angleX:0,angleY:216.36,angleZ:0},{id:"de61350b-5e51-454a-bb64-52f823789319",angleX:0,angleY:224.28,angleZ:0},{id:"c9c6397f-c01e-46b2-b3a0-2d8beab26db4",angleX:0,angleY:307.08,angleZ:0},{id:"5a9e20b3-7eea-4d51-9298-cd6eeae0915a",angleX:9.36,angleY:307.08,angleZ:13.32},{id:"6f17824d-a575-4355-8d47-1a92fdb98258",angleX:0,angleY:0,angleZ:0},{id:"5ba6ab59-2e7c-4a0f-8505-18466a82ac59",angleX:0,angleY:280.44,angleZ:0},{id:"8bc0bd92-a136-46bf-b96a-e966c027f242",angleX:0,angleY:195.12,angleZ:0},{id:"f3b8a9e8-acc0-4dda-a617-1a8f81672827",angleX:347.04,angleY:342.36,angleZ:1.44},{id:"f4c2ecd3-27da-4ff3-88e5-eba3aa6ceaad",angleX:0,angleY:0,angleZ:0},{id:"5c2dd7b4-9981-4d85-968c-49dcf977d1c8",angleX:0,angleY:0,angleZ:0},{id:"dcb26172-633b-4d39-8c55-ce553d678aab",angleX:339.84,angleY:0,angleZ:0},{id:"9d649fdc-12cf-4801-8956-5bd8776f9b77",angleX:0,angleY:0,angleZ:0},{id:"f713b505-1e45-4be6-a072-3d0a991219f6",angleX:0,angleY:204.12,angleZ:0},{id:"eca3fb09-df9d-4641-8cd9-619102dcd502",angleX:0,angleY:160.92,angleZ:0},{id:"32dd1e06-eb6b-4584-9865-f43175771c8e",angleX:0,angleY:160.92,angleZ:0},{id:"21ddaa75-45d4-4efb-9942-7b0249d0d5f3",angleX:173.52,angleY:20.16,angleZ:171.36},{id:"f0edd2b8-f291-40a1-bbe1-67b9fa4e8952",angleX:0,angleY:14.76,angleZ:0},{id:"21a43646-aa64-4fa2-9ff6-66b0adba7b5a",angleX:0,angleY:76.68,angleZ:0},{id:"1363508e-6c3c-45dc-9cce-c088de2507c7",angleX:0,angleY:0,angleZ:0},{id:"f50838b1-341c-4bb8-96b3-078d65716a99",angleX:0,angleY:309.6,angleZ:0},{id:"7188bf6c-88e1-4ea2-a3ee-e8a2482f03c8",angleX:0,angleY:0,angleZ:0},{id:"53fed3f0-99ea-450a-8b70-618cd708620e",angleX:0,angleY:0,angleZ:0},{id:"ff4df0ec-e461-4b29-ba62-d66bf54be88a",angleX:0,angleY:72.72,angleZ:0},{id:"1ab6040d-ee41-40ff-a272-bb3397435c11",angleX:0,angleY:37.08,angleZ:0},{id:"97b2c2ac-4cfc-493a-ac00-e44243de3f3a",angleX:353.88,angleY:35.28,angleZ:0},{id:"70c0df91-6e6b-4560-98e9-7da0293a679e",angleX:0,angleY:0,angleZ:0},{id:"99c8a287-27ed-4cf3-b0c9-55decdeb40d1",angleX:0,angleY:240.12,angleZ:0},{id:"3e98e418-445d-42c0-b430-a0ff5a188bc2",angleX:0,angleY:227.16,angleZ:0},{id:"95931023-ed0c-47b4-8f3b-680c2251688a",angleX:0,angleY:0,angleZ:0},{id:"2ce06809-7059-4af4-80d0-85967e08a5bb",angleX:0,angleY:50.4,angleZ:0},{id:"8f62b936-b075-49fe-af9f-79b828c6bee1",angleX:0,angleY:30.24,angleZ:0},{id:"90705712-862e-4dc7-92c8-61a5ddf73cd8",angleX:0,angleY:342.36,angleZ:0},{id:"0ff2a312-79ff-4082-9943-99c8913cdae4",angleX:0,angleY:345.6,angleZ:0},{id:"56ce3b39-e86c-4929-a9d6-767c8b47f8f3",angleX:0,angleY:0,angleZ:0},{id:"a0b53652-57dc-4415-9184-42728bfe6508",angleX:0,angleY:324.72,angleZ:0},{id:"80074aee-6a81-494b-9385-472bb8497e11",angleX:0,angleY:276.84,angleZ:0},{id:"328bd75d-358a-4745-aeeb-4fb693971225",angleX:0,angleY:32.4,angleZ:0},{id:"85cda45a-a1d9-4f25-abdd-6ced2099cc42",angleX:0,angleY:23.76,angleZ:0},{id:"73428c56-a67e-4f0f-9d4c-220fb78faf98",angleX:6.12,angleY:151.92,angleZ:0},{id:"70906ab0-fa5f-4d15-89c6-f73c714ac748",angleX:169.56,angleY:28.44,angleZ:173.52},{id:"0c7cbaf8-9054-443d-bcfe-741a50a81b96",angleX:0,angleY:54.72,angleZ:0},{id:"153e9b3c-b46f-4933-8714-b6bb0e641536",angleX:0,angleY:165.24,angleZ:0},{id:"18e20bef-6ade-4529-aac6-42f783b61bd1",angleX:0,angleY:180,angleZ:0},{id:"8b9367bf-9d05-4607-921c-dc95870bf801",angleX:0,angleY:0,angleZ:18.36},{id:"cb6b28cc-63b5-4763-bfac-157c75c57645",angleX:0,angleY:0,angleZ:0},{id:"91a8af96-2a7b-4100-843a-955cfea4c74c",angleX:0,angleY:323.64,angleZ:0},{id:"c1efde1f-315e-4702-87b5-1e48fb207a71",angleX:0,angleY:181.44,angleZ:0},{id:"7901450f-321f-4bca-b0e3-5cc7d4b193db",angleX:1.44,angleY:351,angleZ:0},{id:"82edeebc-6546-442e-a6a8-0411ba5da833",angleX:18.36,angleY:254.88,angleZ:0},{id:"0b036bf8-bdf7-43ac-bbc8-65d2d55f3e73",angleX:0,angleY:284.76,angleZ:0},{id:"ef17d55b-ee82-4eda-beb3-0d83a985bd11",angleX:0,angleY:202.32,angleZ:0},{id:"c227b194-0115-411b-8c3b-e1dc61d44562",angleX:0,angleY:91.08,angleZ:0},{id:"b3767913-c829-4a4f-a3cd-0e0c6f928c31",angleX:0,angleY:230.4,angleZ:0},{id:"e5ed916a-b32c-47f5-91c1-76f45fed6180",angleX:0,angleY:237.24,angleZ:0},{id:"93ddd9f9-778c-48c3-a4a4-75d172222bba",angleX:0,angleY:0,angleZ:0},{id:"37a9b608-cef0-4554-ba0f-bea8f0dc1952",angleX:0,angleY:214.2,angleZ:0},{id:"2108d930-8917-48b0-82d0-4c1e53a248b0",angleX:0,angleY:346.68,angleZ:0},{id:"cf471659-5ad9-4607-8ef4-973372b5085f",angleX:0,angleY:117.36,angleZ:0},{id:"d1b05d03-61dc-4a8e-915b-ed879d046912",angleX:0,angleY:311.4,angleZ:0},{id:"f569f6b0-6093-40a9-9e78-d7a45c862597",angleX:0,angleY:307.8,angleZ:0},{id:"891a6217-c721-4c0d-9535-46c269088859",angleX:0,angleY:41.4,angleZ:0},{id:"8ba550bf-e3fa-4f2c-bc56-d4a8a044f226",angleX:0,angleY:30.96,angleZ:0},{id:"5e4a1e5a-a2b8-451d-bfcd-4ce6d304e910",angleX:0,angleY:133.56,angleZ:0},{id:"c77d51e8-8795-4efa-be99-8111c305eeb2",angleX:0,angleY:338.04,angleZ:0},{id:"3e0f3b90-0936-4f8c-8a1e-1e63f4aef801",angleX:0,angleY:262.8,angleZ:0},{id:"9fb550b2-ce1e-42b2-89ff-1794de249e5f",angleX:11.52,angleY:138.96,angleZ:343.08},{id:"8ae3bfc8-b925-4079-9f24-e16d86608e0f",angleX:9.72,angleY:196.2,angleZ:0},{id:"37d67b73-6362-4b35-a1fc-44eade90bf1d",angleX:0,angleY:34.2,angleZ:0},{id:"57f27a9b-4e80-4b7c-9fe2-52dae29700b8",angleX:0,angleY:208.44,angleZ:0},{id:"fa605bb2-539f-4de6-8d64-0f907e828e5f",angleX:0,angleY:68.76,angleZ:0},{id:"56a8290e-d207-43c5-bff9-9d54f51138c4",angleX:0,angleY:60.12,angleZ:0},{id:"ef4688dd-14d2-48aa-8fa5-ccd1b03a0f78",angleX:0,angleY:213.12,angleZ:0},{id:"a508df73-4317-412e-ada9-7a5d2f008fa0",angleX:0,angleY:0,angleZ:16.2},{id:"ebc6b219-6504-4970-8ade-c1f5669ce2ca",angleX:0,angleY:160.2,angleZ:345.6},{id:"c308e107-102a-4684-886e-417b953e14c4",angleX:0,angleY:254.88,angleZ:0},{id:"0a3aa48b-f8e1-49e8-8d9f-b464d968c836",angleX:0,angleY:230.4,angleZ:0},{id:"f4f0fb84-39ff-467d-b1e9-576c5095af9a",angleX:0,angleY:0,angleZ:0},{id:"f89aa7e4-8b3f-432d-8949-35a25ccdc6bd",angleX:355.68,angleY:24.84,angleZ:0},{id:"fd30e166-f9a6-4ad4-933f-a801aa69c365",angleX:0,angleY:174.24,angleZ:0},{id:"8603044c-0c11-4626-a0b8-9798503d6bf3",angleX:0,angleY:135.36,angleZ:349.92},{id:"25a0fd2b-47e5-4f00-9d92-ebeb1ce428d1",angleX:349.92,angleY:48.6,angleZ:7.92},{id:"c2f25b03-462f-4768-9e3c-22d023a23fe8",angleX:0,angleY:217.44,angleZ:0},{id:"18908620-1d6c-4c56-832c-62c89cc4f08a",angleX:0,angleY:159.84,angleZ:0},{id:"0bdaa71b-bdaa-47d4-a83a-2c604be3bf97",angleX:0,angleY:135.36,angleZ:0},{id:"94ca22ee-35df-4bf3-8318-b19261b525d5",angleX:0,angleY:119.16,angleZ:0},{id:"f2bb7a38-14d9-4f7b-ab77-e6c8f98a962f",angleX:0,angleY:52.56,angleZ:0},{id:"a6f1f96d-3dca-4364-bc01-54f0bea42c53",angleX:0,angleY:126.72,angleZ:347.04},{id:"8d882d8c-a8b7-4534-8a1a-1a8df96c05b5",angleX:0,angleY:107.64,angleZ:0},{id:"6bdc4d1f-38de-45ef-af89-db77d153207b",angleX:0,angleY:319.68,angleZ:0},{id:"560f7876-dfdf-4147-ae40-e172c6ee2a5c",angleX:0,angleY:351,angleZ:0},{id:"82fa6a9f-a1df-4633-94aa-ac8434f94e53",angleX:0,angleY:0,angleZ:0},{id:"f480eada-b80e-4091-808a-ba5291f63b40",angleX:0,angleY:0,angleZ:0},{id:"31144530-ee3d-499f-b4a6-4a22cd1dfb06",angleX:0,angleY:287.28,angleZ:0},{id:"f3fdd6db-e3fe-4995-8466-1a0c255e4cf1",angleX:0,angleY:41.4,angleZ:0},{id:"9e53c1e5-259b-4f90-a70d-ebace09a0871",angleX:0,angleY:184.68,angleZ:0},{id:"c900c15b-d884-42f7-a899-6ac4f0d9b9aa",angleX:0,angleY:205.92,angleZ:0},{id:"dba84e3f-df21-4eed-8100-072e6babb05b",angleX:0,angleY:208.44,angleZ:0},{id:"b2c117aa-16cc-4cac-baca-fcf4b04300b0",angleX:0,angleY:351,angleZ:0},{id:"d5fedab7-9935-449b-b22a-592229e1810b",angleX:351.36,angleY:59.04,angleZ:349.2},{id:"faef51dc-a11f-44e1-b320-e3c16c57b8a2",angleX:349.2,angleY:345.24,angleZ:0},{id:"6491efb2-b26f-4092-8bb7-600c056b5e87",angleX:357.12,angleY:120.6,angleZ:347.04},{id:"065786e3-514d-4595-8f52-9d7b771450fc",angleX:0,angleY:320.04,angleZ:0},{id:"7095fa3a-5d82-4f97-855d-caed3323245d",angleX:0,angleY:246.6,angleZ:0},{id:"0da9703a-34c5-4070-9a9c-98833e36c175",angleX:8.28,angleY:153.36,angleZ:348.48},{id:"93c5ce67-1cfe-4e5c-a392-8a70401450f1",angleX:0,angleY:0,angleZ:0},{id:"6d0cc597-b3ba-48fb-b6e7-b351b6fb53b3",angleX:339.12,angleY:37.44,angleZ:0},{id:"49bda40e-2cb1-4979-853b-bc1a7429cafe",angleX:0,angleY:76.68,angleZ:0},{id:"570e9dab-5239-48a9-8c94-0109712348f7",angleX:0,angleY:0,angleZ:0},{id:"94d32d9d-942f-4b72-aa97-f547f095c935",angleX:0,angleY:320.04,angleZ:0},{id:"e04d1db8-ad94-4f67-8da1-0fac4420fc02",angleX:0,angleY:63.36,angleZ:0},{id:"f040638c-69b8-4b8c-acbf-36feb3c8b78e",angleX:0,angleY:19.44,angleZ:0},{id:"40fb911c-eaa2-4840-b93e-e9891b773c48",angleX:6.12,angleY:174.24,angleZ:0},{id:"3ab5824d-1091-47ba-be27-b0c6c3514c17",angleX:9.36,angleY:249.48,angleZ:0},{id:"2517fedb-b79e-465a-8753-7f692aa731d9",angleX:0,angleY:324.72,angleZ:5.4},{id:"0094c207-ce8f-4e95-b89a-594159762e34",angleX:0,angleY:109.08,angleZ:0},{id:"38ab41e1-5ff7-4c03-ae7a-999ecce87c6c",angleX:0,angleY:329.04,angleZ:0},{id:"0a8c9a37-280f-42cf-8736-78d96d4edc32",angleX:0,angleY:258.12,angleZ:0},{id:"c9602571-d542-4fcc-bdf1-5cfbfd887d40",angleX:0,angleY:244.8,angleZ:0},{id:"ffbcbfc0-2c7f-46c1-9ca7-fa10f28d810c",angleX:0,angleY:58.68,angleZ:0},{id:"cb26def4-08a0-4a01-95ed-1c417a0647cc",angleX:0,angleY:41.4,angleZ:0},{id:"8c685e65-e453-4dca-917b-9b5d9d9bbc24",angleX:0,angleY:27,angleZ:0},{id:"2b0928cb-e49f-430c-9c03-ab9a45958664",angleX:0,angleY:345.96,angleZ:0},{id:"afda7ee9-9ce5-47ec-a117-ffee0ba99450",angleX:0,angleY:66.6,angleZ:12.24},{id:"dbfcc025-9d2d-4789-b6bd-b2e25ccbbdd6",angleX:0,angleY:52.56,angleZ:0},{id:"3039f8f4-79fd-4838-9776-540cd54b9bd1",angleX:336.96,angleY:10.44,angleZ:0},{id:"44ee8f29-cea4-4909-a6ba-f9937a3aadca",angleX:0,angleY:32.4,angleZ:0},{id:"4b777e6c-10b2-4d78-ac05-1fa0c16005f2",angleX:0,angleY:258.12,angleZ:0},{id:"af0df66c-2eb3-4e99-9af8-cdb2a9a36183",angleX:0,angleY:236.16,angleZ:0},{id:"71b697ad-dc5c-4744-b45d-2f76b5ef8c84",angleX:17.64,angleY:275.76,angleZ:357.12},{id:"52e126d2-e92c-4c55-bb5d-88bb6521234d",angleX:0,angleY:6.12,angleZ:0},{id:"09bcf575-af67-42dd-a416-b1fc2cd45f05",angleX:0,angleY:44.28,angleZ:0},{id:"a6fa53ae-7db8-4ec7-8fd8-dd97614e7e86",angleX:10.44,angleY:178.56,angleZ:0},{id:"d2e9a15e-5169-49a7-a1da-1be09b39129f",angleX:7.56,angleY:253.8,angleZ:0},{id:"5021b1d7-9f31-455a-b94f-1c2daadb38bb",angleX:0,angleY:54.72,angleZ:0},{id:"c97bfd63-a4a8-4a76-a29e-3c48d6898b60",angleX:0,angleY:355.68,angleZ:0},{id:"9466d213-2ec6-4a0c-b257-264b7c5b2797",angleX:0,angleY:32.4,angleZ:0},{id:"53a62974-f116-49a2-88d3-efcfe96fc4ab",angleX:0,angleY:0,angleZ:0},{id:"87784aaf-5662-48f9-9771-a3371486e28b",angleX:0,angleY:331.56,angleZ:0},{id:"738a8817-f881-459b-a16c-47cf01a7f612",angleX:345.6,angleY:8.28,angleZ:6.12},{id:"52ff2d70-9eb4-4d1b-bd25-f3a061172e9e",angleX:341.28,angleY:39.6,angleZ:0},{id:"732a5441-b579-45d8-bb47-ce6cb9204142",angleX:0,angleY:246.6,angleZ:0},{id:"548f3fca-5f47-475d-8e17-df862c021869",angleX:173.88,angleY:360,angleZ:176.04},{id:"3c49904f-d56d-43eb-aed5-a046d04c1d72",angleX:357.12,angleY:132.84,angleZ:345.24},{id:"7e6b97e5-8f16-4bc4-a845-b81530026699",angleX:0,angleY:345.96,angleZ:0},{id:"f1bdd3a8-16fd-4069-a006-4a37968be2a0",angleX:0,angleY:304.92,angleZ:0},{id:"6c4cf0b4-5059-4592-aec7-11e860f5bf85",angleX:0,angleY:247.68,angleZ:0},{id:"46f5624e-9841-4749-86e2-85193657857e",angleX:355.68,angleY:320.04,angleZ:9.36},{id:"a1fa3281-c7dc-4453-8417-5e18c30ef06b",angleX:0,angleY:210.24,angleZ:0},{id:"06cd3fb7-8ce3-4efa-89b6-1c9d7a651978",angleX:0,angleY:201.96,angleZ:0},{id:"e4f94ef3-6d3c-45ea-b3f1-ab854e55da44",angleX:0,angleY:291.24,angleZ:0},{id:"f62ea0a7-b0d8-4c1b-bbbf-d1190a640637",angleX:0,angleY:186.48,angleZ:0},{id:"fac81733-4380-41d7-9410-61a991769f5f",angleX:0,angleY:22.68,angleZ:0},{id:"964963f0-d617-441d-8c8c-4bc9f58cc38d",angleX:0,angleY:16.2,angleZ:0},{id:"0c479c09-d52a-4eeb-bbbb-d2c39ff04bd1",angleX:0,angleY:322.56,angleZ:0},{id:"32c361b4-e67a-4a37-aa4a-b32aea31279c",angleX:0,angleY:329.04,angleZ:0},{id:"e269d548-00fd-41ac-8b4e-a38656b52262",angleX:0,angleY:112.32,angleZ:0},{id:"39e8583f-e24d-4fcd-ac90-16d5213012d2",angleX:0,angleY:321.48,angleZ:0},{id:"13b671e4-cb8c-44ac-bcb9-bc12fc2d97ba",angleX:0,angleY:108.36,angleZ:0},{id:"209e827d-b657-4a90-9196-b9f2454ee484",angleX:0,angleY:129.24,angleZ:0},{id:"b4f0d2f0-8a28-4942-b344-647a0b3d8ef0",angleX:0,angleY:137.52,angleZ:0},{id:"797b18b2-db96-4410-9ce3-f57844fba029",angleX:0,angleY:151.2,angleZ:0},{id:"8f9bdb58-6a6a-4be4-938e-29866dff2ab8",angleX:0,angleY:149.76,angleZ:0},{id:"24689de3-06d3-44e4-a64e-69b2e14377c1",angleX:341.64,angleY:70.56,angleZ:0},{id:"521aa3d7-3871-44f0-aa8e-4eb3ff143cae",angleX:0,angleY:204.12,angleZ:0},{id:"d109c653-fe9b-4313-96c9-53309d3d3fa0",angleX:0,angleY:198,angleZ:0},{id:"8689cc21-082f-4586-b70d-91d041c75348",angleX:352.08,angleY:113.04,angleZ:0},{id:"7733e3c3-c2f0-484a-ab9d-565b112b14e1",angleX:0,angleY:85.32,angleZ:0},{id:"cca83fed-9f35-40b7-9481-6c1f2d40350a",angleX:0,angleY:110.16,angleZ:0},{id:"42cf6d97-4e69-4cb1-9f54-3d4f2c4ffb48",angleX:0,angleY:200.16,angleZ:0},{id:"0e8f41bc-3670-4084-a702-c1b7a74ef8e4",angleX:0,angleY:226.8,angleZ:0},{id:"3e0cb013-d3db-45c2-a1a7-1b5088c7b2a4",angleX:0,angleY:186.12,angleZ:0},{id:"4096a3d2-e64d-4d70-b5af-1be812ec6db1",angleX:0,angleY:236.52,angleZ:0},{id:"a77c94b7-59dd-439b-b533-da692a05c496",angleX:0,angleY:222.12,angleZ:0},{id:"647f9c34-dbb8-47bc-ad92-a31ed7648688",angleX:0,angleY:10.08,angleZ:0},{id:"cae92209-9810-4c7d-a1ca-b62f2c66508d",angleX:0,angleY:199.8,angleZ:0},{id:"ca6c5a7b-249f-4486-953d-bfed218fd0df",angleX:347.4,angleY:60.12,angleZ:0},{id:"cc3a5f84-16d8-4486-b2d1-b3b11f5f3c93",angleX:0,angleY:163.8,angleZ:343.8},{id:"0886930d-5806-4c8a-8dba-a325ba79904c",angleX:0,angleY:244.8,angleZ:0},{id:"0d7cb416-cbdb-4e5d-8eb9-abf16f22c29e",angleX:0,angleY:133.56,angleZ:0},{id:"f3091844-c9bf-4018-a791-37441fdeb4dd",angleX:0,angleY:262.8,angleZ:0},{id:"9a16c3a5-7f2a-435f-b403-cdd5ed6fb094",angleX:7.56,angleY:118.44,angleZ:347.04},{id:"404ed5e0-e003-49cf-abe4-95f16ede434c",angleX:0,angleY:202.32,angleZ:0},{id:"96622d93-ea10-4d9f-8596-0960c78dea6f",angleX:0,angleY:127.44,angleZ:0},{id:"5bb02ad8-fc89-4dcb-994e-cc73939957ef",angleX:0,angleY:32.4,angleZ:0},{id:"03b6adf5-2b99-4537-b29a-05cacdecebce",angleX:0,angleY:112.32,angleZ:0},{id:"2a027938-9ad5-4ac6-8193-03c73558cdc8",angleX:0,angleY:101.88,angleZ:0},{id:"0135c15a-b396-4717-85c8-fc3335c8f8df",angleX:0,angleY:291.24,angleZ:0},{id:"e8847b7b-2831-4db7-9574-55727f5a7aa7",angleX:0,angleY:316.44,angleZ:0},{id:"485815b0-9d07-4199-9980-27e44efa470d",angleX:337.68,angleY:32.4,angleZ:0},{id:"28c3186f-5308-4ee5-ae23-708af9a54054",angleX:0,angleY:190.08,angleZ:0},{id:"16e3e9b5-63f8-43c0-9a30-414982aabcb5",angleX:0,angleY:197.64,angleZ:0},{id:"b229735b-eebc-4ca0-a05d-d03898945a06",angleX:355.68,angleY:346.68,angleZ:0},{id:"37ebed5b-2c90-4cf8-8d3c-d90d06b2eac7",angleX:0,angleY:230.4,angleZ:0},{id:"b13be940-4086-4e67-be73-ad8d9284a773",angleX:20.16,angleY:216.36,angleZ:6.12},{id:"7312de97-5ec0-4334-b344-514d8b8b4ea0",angleX:0,angleY:293.4,angleZ:0},{id:"684248d7-5f5c-4ba5-ae3e-c959aeb1b149",angleX:0,angleY:302.4,angleZ:0},{id:"613d8aec-b59b-450c-977b-c9f4a02174ad",angleX:187.92,angleY:246.6,angleZ:172.08},{id:"a331bf7f-a069-4064-853d-747fa9e8b90d",angleX:360,angleY:0,angleZ:14.04},{id:"81b0ca7b-de78-4b8e-9b20-6e27e74b0f39",angleX:0,angleY:0,angleZ:0},{id:"2590e02e-1d6a-49b5-a613-f274083a8ffe",angleX:0,angleY:186.12,angleZ:0},{id:"28c9d170-19ce-48af-95a6-0f5743c3c865",angleX:0,angleY:32.4,angleZ:0},{id:"19ec34f2-7fc6-41a3-b591-7348af18b5c5",angleX:0,angleY:163.8,angleZ:0},{id:"606c4136-f171-4635-8a3c-50af1ee236ae",angleX:0,angleY:0,angleZ:0},{id:"081d0301-7bb6-4319-8b7c-44fdd128c085",angleX:0,angleY:41.4,angleZ:0},{id:"2e08194d-077f-4a22-9e1e-447941e4aa2f",angleX:0,angleY:90,angleZ:0},{id:"5a3bf5a4-16b9-408a-84c9-57867e488296",angleX:10.44,angleY:147.6,angleZ:0},{id:"f70cf0c7-37fe-4194-835d-eb0e06c6ee7b",angleX:0,angleY:330.84,angleZ:13.32},{id:"63dc25ea-86af-4ae9-9eb7-0787aec7bf74",angleX:7.56,angleY:240.48,angleZ:0},{id:"fa637666-2dee-4e8b-bb70-6fccc316941d",angleX:0,angleY:311.4,angleZ:0},{id:"9f642f15-825c-4ad3-a6f5-4965b25e1469",angleX:10.44,angleY:165.24,angleZ:346.68},{id:"f7550f0c-3c2c-4bc1-9e8a-52719f8f076f",angleX:0,angleY:222.84,angleZ:0},{id:"3dd075e9-d1ca-4323-88dd-259738a8cae5",angleX:0,angleY:253.8,angleZ:0},{id:"0bec715c-685e-4250-90d8-ae40c987c010",angleX:0,angleY:0,angleZ:0},{id:"8a207fca-bd8d-4f56-b26a-ce0b270b4371",angleX:0,angleY:29.16,angleZ:0},{id:"e10acd49-dd03-4fb4-acef-10435b24a64e",angleX:0,angleY:30.24,angleZ:14.04},{id:"e6df18b4-5166-4c77-9d66-06316208d449",angleX:0,angleY:0,angleZ:0},{id:"233852b2-f212-40d2-ba60-9339b92902a3",angleX:0,angleY:253.8,angleZ:0},{id:"987baf1c-6b57-46e9-ba9a-d9d7f4c41ea0",angleX:0,angleY:262.8,angleZ:0},{id:"91464f1d-45dc-4751-9ed6-d5eff8912f66",angleX:0,angleY:320.04,angleZ:0},{id:"0234a5bf-1c24-40a7-883a-fc429fa08eef",angleX:5.4,angleY:231.84,angleZ:0},{id:"d457d19c-169f-48a8-a0c8-e66b8615be4f",angleX:10.44,angleY:165.24,angleZ:0},{id:"2468432f-2739-4043-9e94-6c5fef6af28e",angleX:6.12,angleY:147.6,angleZ:0},{id:"43f2dbc9-2db3-4cdc-8c3e-7ce1cb4bf010",angleX:0,angleY:209.52,angleZ:346.68},{id:"89089f0d-3d63-48e2-8e5c-77029069ccea",angleX:0,angleY:37.08,angleZ:0},{id:"2f2a9e8b-c465-43de-9cb5-a6abf447012b",angleX:0,angleY:81.36,angleZ:0},{id:"27b8300c-db8e-4e2b-bbea-f773ead10e46",angleX:0,angleY:159.84,angleZ:0},{id:"da1159fb-7014-4242-a12c-1fb8da74321f",angleX:0,angleY:0,angleZ:0},{id:"4848631b-2d8a-418a-b144-ae5c28b3305b",angleX:0,angleY:32.4,angleZ:0},{id:"edc0a62a-c02b-439e-aef2-bf0a169e4fe5",angleX:0,angleY:163.8,angleZ:0},{id:"e01930f4-2845-42a5-bc5e-b97683589e8b",angleX:345.6,angleY:29.16,angleZ:0},{id:"d8c5ffa2-e8f5-4d2d-9e87-c7dbd667a160",angleX:360,angleY:0,angleZ:20.88},{id:"5d98df17-fb2f-4be4-a236-f0a11ac9dffb",angleX:0,angleY:307.08,angleZ:0},{id:"ef90d3ac-d02d-43d7-ae76-22ef77ce984b",angleX:349.2,angleY:108.36,angleZ:351.36},{id:"d06e9149-d9ab-4134-9178-8f853234a866",angleX:18.36,angleY:198,angleZ:0},{id:"6de4190b-a079-4716-b445-da495500d147",angleX:0,angleY:220.32,angleZ:0},{id:"9af60c8c-6af8-4fd1-b2f9-05ad21d87115",angleX:0,angleY:0,angleZ:0},{id:"7fca20bb-fee8-4c98-a6ef-c5f38bf47027",angleX:0,angleY:0,angleZ:0},{id:"263f050a-2644-4e5c-ba20-0fd381ead593",angleX:0,angleY:214.2,angleZ:0},{id:"65594ba6-5a04-40f3-9432-d6124e5ffa5c",angleX:0,angleY:189.36,angleZ:0},{id:"86d310e1-28db-4afe-aaa9-7dba936cf548",angleX:0,angleY:297.72,angleZ:0},{id:"e54edefa-3fbf-4830-95b1-e094529b6914",angleX:0,angleY:0,angleZ:0},{id:"30649240-e8b2-4f08-ba7d-6de368172d76",angleX:0,angleY:74.88,angleZ:0},{id:"1a5066e4-5eaf-43cc-8892-d79d42c3bb29",angleX:0,angleY:295.2,angleZ:0},{id:"7c77deb5-726d-4089-a183-caa5cf4fd18d",angleX:0,angleY:120.96,angleZ:0},{id:"4fe64661-d64f-4367-b38c-298e20a1a90f",angleX:0,angleY:85.68,angleZ:0},{id:"655e6733-6bdf-4c79-bce0-3471608f9e89",angleX:0,angleY:127.44,angleZ:0},{id:"683152bd-96ec-4184-bb12-127e4fa7c1d5",angleX:0,angleY:192.24,angleZ:0},{id:"752c7400-0dc2-4f0d-9ce9-c2e39eea103b",angleX:0,angleY:116.64,angleZ:0},{id:"0b65ffcb-90fa-4fb6-98a4-f4b1f94c29c9",angleX:0,angleY:155.52,angleZ:0},{id:"2190cfe4-dca9-4ac8-b416-6571a1a8f232",angleX:0,angleY:143.64,angleZ:0},{id:"68e9566f-4fe8-4c5d-806f-111a39d98649",angleX:7.92,angleY:186.12,angleZ:347.76},{id:"eac96bc6-63b5-498d-89b5-a7ccb7634175",angleX:0,angleY:240.48,angleZ:0},{id:"0d7b10dc-7a69-43b2-8900-9d1cb91fc13a",angleX:0,angleY:10.08,angleZ:0},{id:"7c288b1b-5b08-436b-97c1-2c7358c3174c",angleX:0,angleY:226.44,angleZ:0},{id:"aae4245d-b43b-4e96-8985-9af33fc872fd",angleX:339.12,angleY:91.44,angleZ:0},{id:"3b4d216f-e6fc-49c2-a671-8456f091b2eb",angleX:0,angleY:205.92,angleZ:0},{id:"fbefe898-fcc9-4e3c-99b2-a4dd6a9c41d1",angleX:0,angleY:190.08,angleZ:0},{id:"2a4597a1-5d75-44a2-b82c-44c3032bd48b",angleX:0,angleY:159.84,angleZ:0},{id:"13757280-5fa3-4d28-8bd3-090995f04fa7",angleX:0,angleY:158.04,angleZ:0}],sO=`uniform samplerCube skybox;	
uniform vec3 rotationAngles;

varying vec4 coords;

// ---  ---
mat3 rotateY(float angle) {
    float s = sin(angle);
    float c = cos(angle);
    return mat3(
        c,  0, s,
        0,  1, 0,
       -s,  0, c
    );
}

mat3 rotateX(float angle) {
    float s = sin(angle);
    float c = cos(angle);
    return mat3(
        1,  0,  0,
        0,  c, -s,
        0,  s,  c
    );
}

mat3 rotateZ(float angle) {
    float s = sin(angle);
    float c = cos(angle);
    return mat3(
        c, -s,  0,
        s,  c,  0,
        0,  0,  1
    );
}

void main() {
    // X 
    vec3 correctedCoords = vec3(-coords.x, coords.y, coords.z);
    
    // Y  X  Z 
    // Y
    mat3 rotationMatrix = rotateY(-rotationAngles.y) * rotateX(-rotationAngles.x) * rotateZ(-rotationAngles.z);
    
    // 
    vec3 rotatedCoords = rotationMatrix * correctedCoords;
    
    // 
    gl_FragColor = textureCube(skybox, rotatedCoords);

    #include <tonemapping_fragment>
    #include <colorspace_fragment>
}`,oO=`varying vec4 coords;

void main()	{

	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

	coords = modelMatrix * vec4( position, 1.0 );

	gl_Position = projectionMatrix * mvPosition;

}`;function lO(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var cc=1,hc=2,Zh=3,AO=4,U4=5,w5=6378137,cO=6356752314e-3,B5=.0066943799901413165,x0=484813681109536e-20,Tt=Math.PI/2,hO=.16666666666666666,uO=.04722222222222222,dO=.022156084656084655,Gt=1e-10,Vn=.017453292519943295,uo=57.29577951308232,Ai=Math.PI/4,Z0=Math.PI*2,jn=3.14159265359,Ra={};Ra.greenwich=0;Ra.lisbon=-9.131906111111;Ra.paris=2.337229166667;Ra.bogota=-74.080916666667;Ra.madrid=-3.687938888889;Ra.rome=12.452333333333;Ra.bern=7.439583333333;Ra.jakarta=106.807719444444;Ra.ferro=-17.666666666667;Ra.brussels=4.367975;Ra.stockholm=18.058277777778;Ra.athens=23.7163375;Ra.oslo=10.722916666667;const fO={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var C5=/[\s_\-\/\(\)]/g;function $l(t,e){if(t[e])return t[e];for(var r=Object.keys(t),a=e.toLowerCase().replace(C5,""),l=-1,u,h;++l<r.length;)if(u=r[l],h=u.toLowerCase().replace(C5,""),h===a)return t[u]}function E4(t){var e={},r=t.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,y){var x=y.split("=");return x.push(!0),s[x[0].toLowerCase()]=x[1],s},{}),a,l,u,h={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*Vn},lat_1:function(s){e.lat1=s*Vn},lat_2:function(s){e.lat2=s*Vn},lat_ts:function(s){e.lat_ts=s*Vn},lon_0:function(s){e.long0=s*Vn},lon_1:function(s){e.long1=s*Vn},lon_2:function(s){e.long2=s*Vn},alpha:function(s){e.alpha=parseFloat(s)*Vn},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*Vn},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r:function(s){e.a=e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(y){return parseFloat(y)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var y=$l(fO,s);y&&(e.to_meter=y.to_meter)},from_greenwich:function(s){e.from_greenwich=s*Vn},pm:function(s){var y=$l(Ra,s);e.from_greenwich=(y||parseFloat(s))*Vn},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var y="ewnsud";s.length===3&&y.indexOf(s.substr(0,1))!==-1&&y.indexOf(s.substr(1,1))!==-1&&y.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(a in r)l=r[a],a in h?(u=h[a],typeof u=="function"?u(l):e[u]=l):e[a]=l;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var H0=1,x9=2,w9=3,vp=4,B9=5,L_=-1,gO=/\s/,pO=/[A-Za-z]/,mO=/[A-Za-z84_]/,Jp=/[,\]]/,C9=/[\d\.E\-\+]/;function Jo(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=H0}Jo.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==vp)for(;gO.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case H0:return this.neutral(t);case x9:return this.keyword(t);case vp:return this.quoted(t);case B9:return this.afterquote(t);case w9:return this.number(t);case L_:return}};Jo.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=vp;return}if(Jp.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Jo.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=H0;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=H0,this.currentObject=this.stack.pop(),this.currentObject||(this.state=L_);return}};Jo.prototype.number=function(t){if(C9.test(t)){this.word+=t;return}if(Jp.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Jo.prototype.quoted=function(t){if(t==='"'){this.state=B9;return}this.word+=t};Jo.prototype.keyword=function(t){if(mO.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=H0;return}if(Jp.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Jo.prototype.neutral=function(t){if(pO.test(t)){this.word=t,this.state=x9;return}if(t==='"'){this.word="",this.state=vp;return}if(C9.test(t)){this.word=t,this.state=w9;return}if(Jp.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Jo.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===L_)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function _O(t){var e=new Jo(t);return e.output()}function vm(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var a=e?{}:t,l=r.reduce(function(u,h){return Eh(h,u),u},a);e&&(t[e]=l)}function Eh(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},Eh(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var a;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Eh(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Eh(t[3],e[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],vm(e,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],vm(e,r,t),e[r].type=r;return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return Eh(t,e[r]);return vm(e,r,t)}}var bO=.017453292519943295,yO=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function vO(t,e){var r=e[0],a=e[1];!(r in t)&&a in t&&(t[r]=t[a],e.length===3&&(t[r]=e[2](t[r])))}function lo(t){return t*bO}function M9(t){for(var e=Object.keys(t),r=0,a=e.length;r<a;++r){var l=e[r];yO.indexOf(l)!==-1&&xO(t[l]),typeof t[l]=="object"&&M9(t[l])}}function xO(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var r="",a=0,l=t.AXIS.length;a<l;++a){var u=[t.AXIS[a][0].toLowerCase(),t.AXIS[a][1].toLowerCase()];u[0].indexOf("north")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="north"?r+="n":u[0].indexOf("south")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="south"?r+="s":u[0].indexOf("east")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="east"?r+="e":(u[0].indexOf("west")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var h=t.GEOGCS;t.type==="GEOGCS"&&(h=t),h&&(h.DATUM?t.datumCode=h.DATUM.name.toLowerCase():t.datumCode=h.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),h.DATUM&&h.DATUM.SPHEROID&&(t.ellps=h.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=h.DATUM.SPHEROID.a,t.rf=parseFloat(h.DATUM.SPHEROID.rf,10)),h.DATUM&&h.DATUM.TOWGS84&&(t.datum_params=h.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function s(C){var I=t.to_meter||1;return C*I}var y=function(C){return vO(t,C)},x=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",lo],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",lo],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",lo],["lat0","latitude_of_origin",lo],["lat0","standard_parallel_1",lo],["lat1","standard_parallel_1",lo],["lat2","standard_parallel_2",lo],["azimuth","Azimuth"],["alpha","azimuth",lo],["srsCode","name"]];x.forEach(y),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=lo(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=lo(t.lat0>0?90:-90))}function R9(t){var e=_O(t),r=e[0],a={};return Eh(e,a),M9(a),a[r]}function pa(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?pa[t]=E4(arguments[1]):pa[t]=R9(arguments[1]):pa[t]=r}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?pa.apply(e,a):pa(a)});if(typeof t=="string"){if(t in pa)return pa[t]}else"EPSG"in t?pa["EPSG:"+t.EPSG]=t:"ESRI"in t?pa["ESRI:"+t.ESRI]=t:"IAU2000"in t?pa["IAU2000:"+t.IAU2000]=t:console.log(t);return}}lO(pa);function wO(t){return typeof t=="string"}function BO(t){return t in pa}var CO=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function MO(t){return CO.some(function(e){return t.indexOf(e)>-1})}var RO=["3857","900913","3785","102113"];function IO(t){var e=$l(t,"authority");if(e){var r=$l(e,"epsg");return r&&RO.indexOf(r)>-1}}function UO(t){var e=$l(t,"extension");if(e)return $l(e,"proj4")}function EO(t){return t[0]==="+"}function FO(t){if(wO(t)){if(BO(t))return pa[t];if(MO(t)){var e=R9(t);if(IO(e))return pa["EPSG:3857"];var r=UO(e);return r?E4(r):e}if(EO(t))return E4(t)}else return t}function M5(t,e){t=t||{};var r,a;if(!e)return t;for(a in e)r=e[a],r!==void 0&&(t[a]=r);return t}function _o(t,e,r){var a=t*e;return r/Math.sqrt(1-a*a)}function ef(t){return t<0?-1:1}function jt(t){return Math.abs(t)<=jn?t:t-ef(t)*Z0}function Xs(t,e,r){var a=t*r,l=.5*t;return a=Math.pow((1-a)/(1+a),l),Math.tan(.5*(Tt-e))/a}function O0(t,e){for(var r=.5*t,a,l,u=Tt-2*Math.atan(e),h=0;h<=15;h++)if(a=t*Math.sin(u),l=Tt-2*Math.atan(e*Math.pow((1-a)/(1+a),r))-u,u+=l,Math.abs(l)<=1e-10)return u;return-9999}function TO(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=_o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function SO(t){var e=t.x,r=t.y;if(r*uo>90&&r*uo<-90&&e*uo>180&&e*uo<-180)return null;var a,l;if(Math.abs(Math.abs(r)-Tt)<=Gt)return null;if(this.sphere)a=this.x0+this.a*this.k0*jt(e-this.long0),l=this.y0+this.a*this.k0*Math.log(Math.tan(Ai+.5*r));else{var u=Math.sin(r),h=Xs(this.e,r,u);a=this.x0+this.a*this.k0*jt(e-this.long0),l=this.y0-this.a*this.k0*Math.log(h)}return t.x=a,t.y=l,t}function NO(t){var e=t.x-this.x0,r=t.y-this.y0,a,l;if(this.sphere)l=Tt-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var u=Math.exp(-r/(this.a*this.k0));if(l=O0(this.e,u),l===-9999)return null}return a=jt(this.long0+e/(this.a*this.k0)),t.x=a,t.y=l,t}var YO=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const PO={init:TO,forward:SO,inverse:NO,names:YO};function LO(){}function R5(t){return t}var QO=["longlat","identity"];const kO={init:LO,forward:R5,inverse:R5,names:QO};var DO=[PO,kO],Rg={},xp=[];function I9(t,e){var r=xp.length;return t.names?(xp[r]=t,t.names.forEach(function(a){Rg[a.toLowerCase()]=r}),this):(console.log(e),!0)}function zO(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Rg[e]<"u"&&xp[Rg[e]])return xp[Rg[e]]}function ZO(){DO.forEach(I9)}const HO={start:ZO,add:I9,get:zO};var Fr={};Fr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Fr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Fr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Fr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Fr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Fr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Fr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Fr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Fr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Fr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Fr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Fr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Fr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Fr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Fr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Fr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Fr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Fr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Fr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Fr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Fr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Fr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Fr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Fr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Fr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Fr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Fr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Fr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Fr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Fr.hough={a:6378270,rf:297,ellipseName:"Hough"};Fr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Fr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Fr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Fr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Fr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Fr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Fr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Fr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Fr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Fr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Fr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Fr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var OO=Fr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Fr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function XO(t,e,r,a){var l=t*t,u=e*e,h=(l-u)/l,s=0;a?(t*=1-h*(hO+h*(uO+h*dO)),l=t*t,h=0):s=Math.sqrt(h);var y=(l-u)/u;return{es:h,e:s,ep2:y}}function VO(t,e,r,a,l){if(!t){var u=$l(Fr,a);u||(u=OO),t=u.a,e=u.b,r=u.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<Gt)&&(l=!0,e=t),{a:t,b:e,rf:r,sphere:l}}var Ig={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var GO in Ig){var I5=Ig[GO];Ig[I5.datumName]=I5}function jO(t,e,r,a,l,u,h){var s={};return t===void 0||t==="none"?s.datum_type=U4:s.datum_type=AO,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=cc),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=hc,s.datum_params[3]*=x0,s.datum_params[4]*=x0,s.datum_params[5]*=x0,s.datum_params[6]=s.datum_params[6]/1e6+1)),h&&(s.datum_type=Zh,s.grids=h),s.a=r,s.b=a,s.es=l,s.ep2=u,s}var U9={};function KO(t,e){var r=new DataView(e),a=WO(r),l=JO(r,a),u=eX(r,l,a),h={header:l,subgrids:u};return U9[t]=h,h}function $O(t){if(t===void 0)return null;var e=t.split(",");return e.map(qO)}function qO(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:U9[t]||null,isNull:!1}}function Fh(t){return t/3600*Math.PI/180}function WO(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function JO(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:F4(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function F4(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function eX(t,e,r){for(var a=176,l=[],u=0;u<e.nSubgrids;u++){var h=rX(t,a,r),s=iX(t,a,h,r),y=Math.round(1+(h.upperLongitude-h.lowerLongitude)/h.longitudeInterval),x=Math.round(1+(h.upperLatitude-h.lowerLatitude)/h.latitudeInterval);l.push({ll:[Fh(h.lowerLongitude),Fh(h.lowerLatitude)],del:[Fh(h.longitudeInterval),Fh(h.latitudeInterval)],lim:[y,x],count:h.gridNodeCount,cvs:tX(s)}),a+=176+h.gridNodeCount*16}return l}function tX(t){return t.map(function(e){return[Fh(e.longitudeShift),Fh(e.latitudeShift)]})}function rX(t,e,r){return{name:F4(t,e+8,e+16).trim(),parent:F4(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function iX(t,e,r,a){for(var l=e+176,u=16,h=[],s=0;s<r.gridNodeCount;s++){var y={latitudeShift:t.getFloat32(l+s*u,a),longitudeShift:t.getFloat32(l+s*u+4,a),latitudeAccuracy:t.getFloat32(l+s*u+8,a),longitudeAccuracy:t.getFloat32(l+s*u+12,a)};h.push(y)}return h}function mo(t,e){if(!(this instanceof mo))return new mo(t);e=e||function(x){if(x)throw x};var r=FO(t);if(typeof r!="object"){e("Could not parse to valid json: "+t);return}var a=mo.projections.get(r.projName);if(!a){e("Could not get projection name from: "+t);return}if(r.datumCode&&r.datumCode!=="none"){var l=$l(Ig,r.datumCode);l&&(r.datum_params=r.datum_params||(l.towgs84?l.towgs84.split(","):null),r.ellps=l.ellipse,r.datumName=l.datumName?l.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var u=VO(r.a,r.b,r.rf,r.ellps,r.sphere),h=XO(u.a,u.b,u.rf,r.R_A),s=$O(r.nadgrids),y=r.datum||jO(r.datumCode,r.datum_params,u.a,u.b,h.es,h.ep2,s);M5(this,r),M5(this,a),this.a=u.a,this.b=u.b,this.rf=u.rf,this.sphere=u.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=y,this.init(),e(null,this)}mo.projections=HO;mo.projections.start();function nX(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===cc?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===hc?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function E9(t,e,r){var a=t.x,l=t.y,u=t.z?t.z:0,h,s,y,x;if(l<-Tt&&l>-1.001*Tt)l=-Tt;else if(l>Tt&&l<1.001*Tt)l=Tt;else{if(l<-Tt)return{x:-1/0,y:-1/0,z:t.z};if(l>Tt)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),s=Math.sin(l),x=Math.cos(l),y=s*s,h=r/Math.sqrt(1-e*y),{x:(h+u)*x*Math.cos(a),y:(h+u)*x*Math.sin(a),z:(h*(1-e)+u)*s}}function F9(t,e,r,a){var l=1e-12,u=l*l,h=30,s,y,x,C,I,U,R,N,D,O,H,W,se,de=t.x,le=t.y,he=t.z?t.z:0,ae,V,K;if(s=Math.sqrt(de*de+le*le),y=Math.sqrt(de*de+le*le+he*he),s/r<l){if(ae=0,y/r<l)return V=Tt,K=-a,{x:t.x,y:t.y,z:t.z}}else ae=Math.atan2(le,de);x=he/y,C=s/y,I=1/Math.sqrt(1-e*(2-e)*C*C),N=C*(1-e)*I,D=x*I,se=0;do se++,R=r/Math.sqrt(1-e*D*D),K=s*N+he*D-R*(1-e*D*D),U=e*R/(R+K),I=1/Math.sqrt(1-U*(2-U)*C*C),O=C*(1-U)*I,H=x*I,W=H*N-O*D,N=O,D=H;while(W*W>u&&se<h);return V=Math.atan(H/Math.abs(O)),{x:ae,y:V,z:K}}function aX(t,e,r){if(e===cc)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===hc){var a=r[0],l=r[1],u=r[2],h=r[3],s=r[4],y=r[5],x=r[6];return{x:x*(t.x-y*t.y+s*t.z)+a,y:x*(y*t.x+t.y-h*t.z)+l,z:x*(-s*t.x+h*t.y+t.z)+u}}}function sX(t,e,r){if(e===cc)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===hc){var a=r[0],l=r[1],u=r[2],h=r[3],s=r[4],y=r[5],x=r[6],C=(t.x-a)/x,I=(t.y-l)/x,U=(t.z-u)/x;return{x:C+y*I-s*U,y:-y*C+I+h*U,z:s*C-h*I+U}}}function Ag(t){return t===cc||t===hc}function oX(t,e,r){if(nX(t,e)||t.datum_type===U4||e.datum_type===U4)return r;var a=t.a,l=t.es;if(t.datum_type===Zh){var u=U5(t,!1,r);if(u!==0)return;a=w5,l=B5}var h=e.a,s=e.b,y=e.es;if(e.datum_type===Zh&&(h=w5,s=cO,y=B5),l===y&&a===h&&!Ag(t.datum_type)&&!Ag(e.datum_type))return r;if(r=E9(r,l,a),Ag(t.datum_type)&&(r=aX(r,t.datum_type,t.datum_params)),Ag(e.datum_type)&&(r=sX(r,e.datum_type,e.datum_params)),r=F9(r,y,h,s),e.datum_type===Zh){var x=U5(e,!0,r);if(x!==0)return}return r}function U5(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-r.x,y:r.y},l={x:Number.NaN,y:Number.NaN},u=[];e:for(var h=0;h<t.grids.length;h++){var s=t.grids[h];if(u.push(s.name),s.isNull){l=a;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}for(var y=s.grid.subgrids,x=0,C=y.length;x<C;x++){var I=y[x],U=(Math.abs(I.del[1])+Math.abs(I.del[0]))/1e4,R=I.ll[0]-U,N=I.ll[1]-U,D=I.ll[0]+(I.lim[0]-1)*I.del[0]+U,O=I.ll[1]+(I.lim[1]-1)*I.del[1]+U;if(!(N>a.y||R>a.x||O<a.y||D<a.x)&&(l=lX(a,e,I),!isNaN(l.x)))break e}}return isNaN(l.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*uo+" "+a.y*uo+" tried: '"+u+"'"),-1):(r.x=-l.x,r.y=l.y,0)}function lX(t,e,r){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var l={x:t.x,y:t.y};l.x-=r.ll[0],l.y-=r.ll[1],l.x=jt(l.x-Math.PI)+Math.PI;var u=E5(l,r);if(e){if(isNaN(u.x))return a;u.x=l.x-u.x,u.y=l.y-u.y;var h=9,s=1e-12,y,x;do{if(x=E5(u,r),isNaN(x.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}y={x:l.x-(x.x+u.x),y:l.y-(x.y+u.y)},u.x+=y.x,u.y+=y.y}while(h--&&Math.abs(y.x)>s&&Math.abs(y.y)>s);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=jt(u.x+r.ll[0]),a.y=u.y+r.ll[1]}else isNaN(u.x)||(a.x=t.x+u.x,a.y=t.y+u.y);return a}function E5(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(r.x),y:Math.floor(r.y)},l={x:r.x-1*a.x,y:r.y-1*a.y},u={x:Number.NaN,y:Number.NaN},h;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return u;h=a.y*e.lim[0]+a.x;var s={x:e.cvs[h][0],y:e.cvs[h][1]};h++;var y={x:e.cvs[h][0],y:e.cvs[h][1]};h+=e.lim[0];var x={x:e.cvs[h][0],y:e.cvs[h][1]};h--;var C={x:e.cvs[h][0],y:e.cvs[h][1]},I=l.x*l.y,U=l.x*(1-l.y),R=(1-l.x)*(1-l.y),N=(1-l.x)*l.y;return u.x=R*s.x+U*y.x+N*C.x+I*x.x,u.y=R*s.y+U*y.y+N*C.y+I*x.y,u}function F5(t,e,r){var a=r.x,l=r.y,u=r.z||0,h,s,y,x={};for(y=0;y<3;y++)if(!(e&&y===2&&r.z===void 0))switch(y===0?(h=a,"ew".indexOf(t.axis[y])!==-1?s="x":s="y"):y===1?(h=l,"ns".indexOf(t.axis[y])!==-1?s="y":s="x"):(h=u,s="z"),t.axis[y]){case"e":x[s]=h;break;case"w":x[s]=-h;break;case"n":x[s]=h;break;case"s":x[s]=-h;break;case"u":r[s]!==void 0&&(x.z=h);break;case"d":r[s]!==void 0&&(x.z=-h);break;default:return null}return x}function T9(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function AX(t){T5(t.x),T5(t.y)}function T5(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function cX(t,e){return(t.datum.datum_type===cc||t.datum.datum_type===hc||t.datum.datum_type===Zh)&&e.datumCode!=="WGS84"||(e.datum.datum_type===cc||e.datum.datum_type===hc||e.datum.datum_type===Zh)&&t.datumCode!=="WGS84"}function wp(t,e,r,a){var l;Array.isArray(r)?r=T9(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var u=r.z!==void 0;if(AX(r),t.datum&&e.datum&&cX(t,e)&&(l=new mo("WGS84"),r=wp(t,l,r,a),t=l),a&&t.axis!=="enu"&&(r=F5(t,!1,r)),t.projName==="longlat")r={x:r.x*Vn,y:r.y*Vn,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=oX(t.datum,e.datum,r),!!r)return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*uo,y:r.y*uo,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),a&&e.axis!=="enu"?F5(e,!0,r):(r&&!u&&delete r.z,r)}var S5=mo("WGS84");function xm(t,e,r,a){var l,u,h;return Array.isArray(r)?(l=wp(t,e,r,a)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof l.z=="number"?[l.x,l.y,l.z].concat(r.slice(3)):[l.x,l.y,r[2]].concat(r.slice(3)):[l.x,l.y].concat(r.slice(2)):[l.x,l.y]):(u=wp(t,e,r,a),h=Object.keys(r),h.length===2||h.forEach(function(s){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;u[s]=r[s]}),u)}function N5(t){return t instanceof mo?t:t.oProj?t.oProj:mo(t)}function ja(t,e,r){t=N5(t);var a=!1,l;return typeof e>"u"?(e=t,t=S5,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,e=t,t=S5,a=!0),e=N5(e),r?xm(t,e,r):(l={forward:function(u,h){return xm(t,e,u,h)},inverse:function(u,h){return xm(e,t,u,h)}},a&&(l.oProj=e),l)}var Y5=6,S9="AJSAJS",N9="AFAFAF",Th=65,wa=73,As=79,a0=86,s0=90;const hX={forward:Y9,inverse:uX,toPoint:P9};function Y9(t,e){return e=e||5,gX(dX({lat:t[1],lon:t[0]}),e)}function uX(t){var e=Q_(Q9(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function P9(t){var e=Q_(Q9(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function wm(t){return t*(Math.PI/180)}function P5(t){return 180*(t/Math.PI)}function dX(t){var e=t.lat,r=t.lon,a=6378137,l=.00669438,u=.9996,h,s,y,x,C,I,U,R=wm(e),N=wm(r),D,O;O=Math.floor((r+180)/6)+1,r===180&&(O=60),e>=56&&e<64&&r>=3&&r<12&&(O=32),e>=72&&e<84&&(r>=0&&r<9?O=31:r>=9&&r<21?O=33:r>=21&&r<33?O=35:r>=33&&r<42&&(O=37)),h=(O-1)*6-180+3,D=wm(h),s=l/(1-l),y=a/Math.sqrt(1-l*Math.sin(R)*Math.sin(R)),x=Math.tan(R)*Math.tan(R),C=s*Math.cos(R)*Math.cos(R),I=Math.cos(R)*(N-D),U=a*((1-l/4-3*l*l/64-5*l*l*l/256)*R-(3*l/8+3*l*l/32+45*l*l*l/1024)*Math.sin(2*R)+(15*l*l/256+45*l*l*l/1024)*Math.sin(4*R)-35*l*l*l/3072*Math.sin(6*R));var H=u*y*(I+(1-x+C)*I*I*I/6+(5-18*x+x*x+72*C-58*s)*I*I*I*I*I/120)+5e5,W=u*(U+y*Math.tan(R)*(I*I/2+(5-x+9*C+4*C*C)*I*I*I*I/24+(61-58*x+x*x+600*C-330*s)*I*I*I*I*I*I/720));return e<0&&(W+=1e7),{northing:Math.round(W),easting:Math.round(H),zoneNumber:O,zoneLetter:fX(e)}}function Q_(t){var e=t.northing,r=t.easting,a=t.zoneLetter,l=t.zoneNumber;if(l<0||l>60)return null;var u=.9996,h=6378137,s=.00669438,y,x=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),C,I,U,R,N,D,O,H,W,se=r-5e5,de=e;a<"N"&&(de-=1e7),O=(l-1)*6-180+3,y=s/(1-s),D=de/u,H=D/(h*(1-s/4-3*s*s/64-5*s*s*s/256)),W=H+(3*x/2-27*x*x*x/32)*Math.sin(2*H)+(21*x*x/16-55*x*x*x*x/32)*Math.sin(4*H)+151*x*x*x/96*Math.sin(6*H),C=h/Math.sqrt(1-s*Math.sin(W)*Math.sin(W)),I=Math.tan(W)*Math.tan(W),U=y*Math.cos(W)*Math.cos(W),R=h*(1-s)/Math.pow(1-s*Math.sin(W)*Math.sin(W),1.5),N=se/(C*u);var le=W-C*Math.tan(W)/R*(N*N/2-(5+3*I+10*U-4*U*U-9*y)*N*N*N*N/24+(61+90*I+298*U+45*I*I-252*y-3*U*U)*N*N*N*N*N*N/720);le=P5(le);var he=(N-(1+2*I+U)*N*N*N/6+(5-2*U+28*I-3*U*U+8*y+24*I*I)*N*N*N*N*N/120)/Math.cos(W);he=O+P5(he);var ae;if(t.accuracy){var V=Q_({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});ae={top:V.lat,right:V.lon,bottom:le,left:he}}else ae={lat:le,lon:he};return ae}function fX(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function gX(t,e){var r="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+pX(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+a.substr(a.length-5,e)}function pX(t,e,r){var a=L9(r),l=Math.floor(t/1e5),u=Math.floor(e/1e5)%20;return mX(l,u,a)}function L9(t){var e=t%Y5;return e===0&&(e=Y5),e}function mX(t,e,r){var a=r-1,l=S9.charCodeAt(a),u=N9.charCodeAt(a),h=l+t-1,s=u+e,y=!1;h>s0&&(h=h-s0+Th-1,y=!0),(h===wa||l<wa&&h>wa||(h>wa||l<wa)&&y)&&h++,(h===As||l<As&&h>As||(h>As||l<As)&&y)&&(h++,h===wa&&h++),h>s0&&(h=h-s0+Th-1),s>a0?(s=s-a0+Th-1,y=!0):y=!1,(s===wa||u<wa&&s>wa||(s>wa||u<wa)&&y)&&s++,(s===As||u<As&&s>As||(s>As||u<As)&&y)&&(s++,s===wa&&s++),s>a0&&(s=s-a0+Th-1);var x=String.fromCharCode(h)+String.fromCharCode(s);return x}function Q9(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,a="",l,u=0;!/[A-Z]/.test(l=t.charAt(u));){if(u>=2)throw"MGRSPoint bad conversion from: "+t;a+=l,u++}var h=parseInt(a,10);if(u===0||u+3>e)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(u++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(u,u+=2);for(var y=L9(h),x=_X(r.charAt(0),y),C=bX(r.charAt(1),y);C<yX(s);)C+=2e6;var I=e-u;if(I%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var U=I/2,R=0,N=0,D,O,H,W,se;return U>0&&(D=1e5/Math.pow(10,U),O=t.substring(u,u+U),R=parseFloat(O)*D,H=t.substring(u+U),N=parseFloat(H)*D),W=R+x,se=N+C,{easting:W,northing:se,zoneLetter:s,zoneNumber:h,accuracy:D}}function _X(t,e){for(var r=S9.charCodeAt(e-1),a=1e5,l=!1;r!==t.charCodeAt(0);){if(r++,r===wa&&r++,r===As&&r++,r>s0){if(l)throw"Bad character: "+t;r=Th,l=!0}a+=1e5}return a}function bX(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=N9.charCodeAt(e-1),a=0,l=!1;r!==t.charCodeAt(0);){if(r++,r===wa&&r++,r===As&&r++,r>a0){if(l)throw"Bad character: "+t;r=Th,l=!0}a+=1e5}return a}function yX(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Jh(t,e,r){if(!(this instanceof Jh))return new Jh(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Jh.fromMGRS=function(t){return new Jh(P9(t))};Jh.prototype.toMGRS=function(t){return Y9([this.x,this.y],t)};var vX=1,xX=.25,L5=.046875,Q5=.01953125,k5=.01068115234375,wX=.75,BX=.46875,CX=.013020833333333334,MX=.007120768229166667,RX=.3645833333333333,IX=.005696614583333333,UX=.3076171875;function k_(t){var e=[];e[0]=vX-t*(xX+t*(L5+t*(Q5+t*k5))),e[1]=t*(wX-t*(L5+t*(Q5+t*k5)));var r=t*t;return e[2]=r*(BX-t*(CX+t*MX)),r*=t,e[3]=r*(RX-t*IX),e[4]=r*t*UX,e}function Au(t,e,r,a){return r*=e,e*=e,a[0]*t-r*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var EX=20;function D_(t,e,r){for(var a=1/(1-e),l=t,u=EX;u;--u){var h=Math.sin(l),s=1-e*h*h;if(s=(Au(l,h,Math.cos(l),r)-t)*(s*Math.sqrt(s))*a,l-=s,Math.abs(s)<Gt)return l}return l}function FX(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=k_(this.es),this.ml0=Au(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function TX(t){var e=t.x,r=t.y,a=jt(e-this.long0),l,u,h,s=Math.sin(r),y=Math.cos(r);if(this.es){var C=y*a,I=Math.pow(C,2),U=this.ep2*Math.pow(y,2),R=Math.pow(U,2),N=Math.abs(y)>Gt?Math.tan(r):0,D=Math.pow(N,2),O=Math.pow(D,2);l=1-this.es*Math.pow(s,2),C=C/Math.sqrt(l);var H=Au(r,s,y,this.en);u=this.a*(this.k0*C*(1+I/6*(1-D+U+I/20*(5-18*D+O+14*U-58*D*U+I/42*(61+179*O-O*D-479*D)))))+this.x0,h=this.a*(this.k0*(H-this.ml0+s*a*C/2*(1+I/12*(5-D+9*U+4*R+I/30*(61+O-58*D+270*U-330*D*U+I/56*(1385+543*O-O*D-3111*D))))))+this.y0}else{var x=y*Math.sin(a);if(Math.abs(Math.abs(x)-1)<Gt)return 93;if(u=.5*this.a*this.k0*Math.log((1+x)/(1-x))+this.x0,h=y*Math.cos(a)/Math.sqrt(1-Math.pow(x,2)),x=Math.abs(h),x>=1){if(x-1>Gt)return 93;h=0}else h=Math.acos(h);r<0&&(h=-h),h=this.a*this.k0*(h-this.lat0)+this.y0}return t.x=u,t.y=h,t}function SX(t){var e,r,a,l,u=(t.x-this.x0)*(1/this.a),h=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+h/this.k0,r=D_(e,this.es,this.en),Math.abs(r)<Tt){var I=Math.sin(r),U=Math.cos(r),R=Math.abs(U)>Gt?Math.tan(r):0,N=this.ep2*Math.pow(U,2),D=Math.pow(N,2),O=Math.pow(R,2),H=Math.pow(O,2);e=1-this.es*Math.pow(I,2);var W=u*Math.sqrt(e)/this.k0,se=Math.pow(W,2);e=e*R,a=r-e*se/(1-this.es)*.5*(1-se/12*(5+3*O-9*N*O+N-4*D-se/30*(61+90*O-252*N*O+45*H+46*N-se/56*(1385+3633*O+4095*H+1574*H*O)))),l=jt(this.long0+W*(1-se/6*(1+2*O+N-se/20*(5+28*O+24*H+8*N*O+6*N-se/42*(61+662*O+1320*H+720*H*O))))/U)}else a=Tt*ef(h),l=0;else{var s=Math.exp(u/this.k0),y=.5*(s-1/s),x=this.lat0+h/this.k0,C=Math.cos(x);e=Math.sqrt((1-Math.pow(C,2))/(1+Math.pow(y,2))),a=Math.asin(e),h<0&&(a=-a),y===0&&C===0?l=0:l=jt(Math.atan2(y,C)+this.long0)}return t.x=l,t.y=a,t}var NX=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ug={init:FX,forward:TX,inverse:SX,names:NX};function k9(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Ca(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),a=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(a,2))}function YX(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function PX(t){var e=Math.abs(t);return e=YX(e*(1+e/(Ca(1,e)+1))),t<0?-e:e}function z_(t,e){for(var r=2*Math.cos(2*e),a=t.length-1,l=t[a],u=0,h;--a>=0;)h=-u+r*l+t[a],u=l,l=h;return e+h*Math.sin(2*e)}function LX(t,e){for(var r=2*Math.cos(e),a=t.length-1,l=t[a],u=0,h;--a>=0;)h=-u+r*l+t[a],u=l,l=h;return Math.sin(e)*h}function QX(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function D9(t,e,r){for(var a=Math.sin(e),l=Math.cos(e),u=k9(r),h=QX(r),s=2*l*h,y=-2*a*u,x=t.length-1,C=t[x],I=0,U=0,R=0,N,D;--x>=0;)N=U,D=I,U=C,I=R,C=-N+s*U-y*I+t[x],R=-D+y*U+s*I;return s=a*h,y=l*u,[s*C-y*R,s*R+y*C]}function kX(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ug.init.apply(this),this.forward=Ug.forward,this.inverse=Ug.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var a=z_(this.cbg,this.lat0);this.Zb=-this.Qn*(a+LX(this.gtu,2*a))}function DX(t){var e=jt(t.x-this.long0),r=t.y;r=z_(this.cbg,r);var a=Math.sin(r),l=Math.cos(r),u=Math.sin(e),h=Math.cos(e);r=Math.atan2(a,h*l),e=Math.atan2(u*l,Ca(a,l*h)),e=PX(Math.tan(e));var s=D9(this.gtu,2*r,2*e);r=r+s[0],e=e+s[1];var y,x;return Math.abs(e)<=2.623395162778?(y=this.a*(this.Qn*e)+this.x0,x=this.a*(this.Qn*r+this.Zb)+this.y0):(y=1/0,x=1/0),t.x=y,t.y=x,t}function zX(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var a,l;if(Math.abs(e)<=2.623395162778){var u=D9(this.utg,2*r,2*e);r=r+u[0],e=e+u[1],e=Math.atan(k9(e));var h=Math.sin(r),s=Math.cos(r),y=Math.sin(e),x=Math.cos(e);r=Math.atan2(h*x,Ca(y,x*s)),e=Math.atan2(y,x*s),a=jt(e+this.long0),l=z_(this.cgb,r)}else a=1/0,l=1/0;return t.x=a,t.y=l,t}var ZX=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Eg={init:kX,forward:DX,inverse:zX,names:ZX};function HX(t,e){if(t===void 0){if(t=Math.floor((jt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var OX="etmerc";function XX(){var t=HX(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Vn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Eg.init.apply(this),this.forward=Eg.forward,this.inverse=Eg.inverse}var VX=["Universal Transverse Mercator System","utm"];const GX={init:XX,names:VX,dependsOn:OX};function Z_(t,e){return Math.pow((1-t)/(1+t),e)}var jX=20;function KX(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ai)/(Math.pow(Math.tan(.5*this.lat0+Ai),this.C)*Z_(this.e*t,this.ratexp))}function $X(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+Ai),this.C)*Z_(this.e*Math.sin(r),this.ratexp))-Tt,t.x=this.C*e,t}function qX(t){for(var e=1e-14,r=t.x/this.C,a=t.y,l=Math.pow(Math.tan(.5*a+Ai)/this.K,1/this.C),u=jX;u>0&&(a=2*Math.atan(l*Z_(this.e*Math.sin(t.y),-.5*this.e))-Tt,!(Math.abs(a-t.y)<e));--u)t.y=a;return u?(t.x=r,t.y=a,t):null}const H_={init:KX,forward:$X,inverse:qX};function WX(){H_.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function JX(t){var e,r,a,l;return t.x=jt(t.x-this.long0),H_.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),a=Math.cos(t.x),l=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*a),t.x=l*r*Math.sin(t.x),t.y=l*(this.cosc0*e-this.sinc0*r*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function eV(t){var e,r,a,l,u;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,u=Ca(t.x,t.y)){var h=2*Math.atan2(u,this.R2);e=Math.sin(h),r=Math.cos(h),l=Math.asin(r*this.sinc0+t.y*e*this.cosc0/u),a=Math.atan2(t.x*e,u*this.cosc0*r-t.y*this.sinc0*e)}else l=this.phic0,a=0;return t.x=a,t.y=l,H_.inverse.apply(this,[t]),t.x=jt(t.x+this.long0),t}var tV=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const rV={init:WX,forward:JX,inverse:eV,names:tV};function iV(t,e,r){return e*=r,Math.tan(.5*(Tt+t))*Math.pow((1-e)/(1+e),.5*r)}function nV(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Gt&&(this.k0=.5*(1+ef(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Gt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Gt&&Math.abs(Math.cos(this.lat_ts))>Gt&&(this.k0=.5*this.cons*_o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Xs(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=_o(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Tt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function aV(t){var e=t.x,r=t.y,a=Math.sin(r),l=Math.cos(r),u,h,s,y,x,C,I=jt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Gt&&Math.abs(r+this.lat0)<=Gt?(t.x=NaN,t.y=NaN,t):this.sphere?(u=2*this.k0/(1+this.sinlat0*a+this.coslat0*l*Math.cos(I)),t.x=this.a*u*l*Math.sin(I)+this.x0,t.y=this.a*u*(this.coslat0*a-this.sinlat0*l*Math.cos(I))+this.y0,t):(h=2*Math.atan(this.ssfn_(r,a,this.e))-Tt,y=Math.cos(h),s=Math.sin(h),Math.abs(this.coslat0)<=Gt?(x=Xs(this.e,r*this.con,this.con*a),C=2*this.a*this.k0*x/this.cons,t.x=this.x0+C*Math.sin(e-this.long0),t.y=this.y0-this.con*C*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Gt?(u=2*this.a*this.k0/(1+y*Math.cos(I)),t.y=u*s):(u=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*y*Math.cos(I))),t.y=u*(this.cosX0*s-this.sinX0*y*Math.cos(I))+this.y0),t.x=u*y*Math.sin(I)+this.x0,t))}function sV(t){t.x-=this.x0,t.y-=this.y0;var e,r,a,l,u,h=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(h/(2*this.a*this.k0));return e=this.long0,r=this.lat0,h<=Gt?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/h),Math.abs(this.coslat0)<Gt?this.lat0>0?e=jt(this.long0+Math.atan2(t.x,-1*t.y)):e=jt(this.long0+Math.atan2(t.x,t.y)):e=jt(this.long0+Math.atan2(t.x*Math.sin(s),h*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=Gt){if(h<=Gt)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,a=h*this.cons/(2*this.a*this.k0),r=this.con*O0(this.e,a),e=this.con*jt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else l=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,h<=Gt?u=this.X0:(u=Math.asin(Math.cos(l)*this.sinX0+t.y*Math.sin(l)*this.cosX0/h),e=jt(this.long0+Math.atan2(t.x*Math.sin(l),h*this.cosX0*Math.cos(l)-t.y*this.sinX0*Math.sin(l)))),r=-1*O0(this.e,Math.tan(.5*(Tt+u)));return t.x=e,t.y=r,t}var oV=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const lV={init:nV,forward:aV,inverse:sV,names:oV,ssfn_:iV};function AV(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,a=this.rf,l=1/a,u=2*l-Math.pow(l,2),h=this.e=Math.sqrt(u);this.R=this.k0*r*Math.sqrt(1-u)/(1-u*Math.pow(e,2)),this.alpha=Math.sqrt(1+u/(1-u)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),y=Math.log(Math.tan(Math.PI/4+t/2)),x=Math.log((1+h*e)/(1-h*e));this.K=s-this.alpha*y+this.alpha*h/2*x}function cV(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+r)+this.K,l=2*(Math.atan(Math.exp(a))-Math.PI/4),u=this.alpha*(t.x-this.lambda0),h=Math.atan(Math.sin(u)/(Math.sin(this.b0)*Math.tan(l)+Math.cos(this.b0)*Math.cos(u))),s=Math.asin(Math.cos(this.b0)*Math.sin(l)-Math.sin(this.b0)*Math.cos(l)*Math.cos(u));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*h+this.x0,t}function hV(t){for(var e=t.x-this.x0,r=t.y-this.y0,a=e/this.R,l=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),u=Math.asin(Math.cos(this.b0)*Math.sin(l)+Math.sin(this.b0)*Math.cos(l)*Math.cos(a)),h=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(l))),s=this.lambda0+h/this.alpha,y=0,x=u,C=-1e3,I=0;Math.abs(x-C)>1e-7;){if(++I>20)return;y=1/this.alpha*(Math.log(Math.tan(Math.PI/4+u/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(x))/2)),C=x,x=2*Math.atan(Math.exp(y))-Math.PI/2}return t.x=s,t.y=x,t}var uV=["somerc"];const dV={init:AV,forward:cV,inverse:hV,names:uV};var Mh=1e-7;function fV(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1}function gV(){var t,e,r,a,l,u,h,s,y,x,C=0,I,U=0,R=0,N=0,D=0,O=0,H=0;this.no_off=fV(this),this.no_rot="no_rot"in this;var W=!1;"alpha"in this&&(W=!0);var se=!1;if("rectified_grid_angle"in this&&(se=!0),W&&(H=this.alpha),se&&(C=this.rectified_grid_angle*Vn),W||se)U=this.longc;else if(R=this.long1,D=this.lat1,N=this.long2,O=this.lat2,Math.abs(D-O)<=Mh||(t=Math.abs(D))<=Mh||Math.abs(t-Tt)<=Mh||Math.abs(Math.abs(this.lat0)-Tt)<=Mh||Math.abs(Math.abs(O)-Tt)<=Mh)throw new Error;var de=1-this.es;e=Math.sqrt(de),Math.abs(this.lat0)>Gt?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/de),this.A=this.B*this.k0*e/t,a=this.B*e/(r*Math.sqrt(t)),l=a*a-1,l<=0?l=0:(l=Math.sqrt(l),this.lat0<0&&(l=-l)),this.E=l+=a,this.E*=Math.pow(Xs(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=l=1),W||se?(W?(I=Math.asin(Math.sin(H)/a),se||(C=H)):(I=C,H=Math.asin(a*Math.sin(I))),this.lam0=U-Math.asin(.5*(l-1/l)*Math.tan(I))/this.B):(u=Math.pow(Xs(this.e,D,Math.sin(D)),this.B),h=Math.pow(Xs(this.e,O,Math.sin(O)),this.B),l=this.E/u,y=(h-u)/(h+u),x=this.E*this.E,x=(x-h*u)/(x+h*u),t=R-N,t<-Math.pi?N-=Z0:t>Math.pi&&(N+=Z0),this.lam0=jt(.5*(R+N)-Math.atan(x*Math.tan(.5*this.B*(R-N))/y)/this.B),I=Math.atan(2*Math.sin(this.B*jt(R-this.lam0))/(l-1/l)),C=H=Math.asin(a*Math.sin(I))),this.singam=Math.sin(I),this.cosgam=Math.cos(I),this.sinrot=Math.sin(C),this.cosrot=Math.cos(C),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(H))),this.lat0<0&&(this.u_0=-this.u_0)),l=.5*I,this.v_pole_n=this.ArB*Math.log(Math.tan(Ai-l)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ai+l))}function pV(t){var e={},r,a,l,u,h,s,y,x;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Tt)>Gt){if(h=this.E/Math.pow(Xs(this.e,t.y,Math.sin(t.y)),this.B),s=1/h,r=.5*(h-s),a=.5*(h+s),u=Math.sin(this.B*t.x),l=(r*this.singam-u*this.cosgam)/a,Math.abs(Math.abs(l)-1)<Gt)throw new Error;x=.5*this.ArB*Math.log((1-l)/(1+l)),s=Math.cos(this.B*t.x),Math.abs(s)<Mh?y=this.A*t.x:y=this.ArB*Math.atan2(r*this.cosgam+u*this.singam,s)}else x=t.y>0?this.v_pole_n:this.v_pole_s,y=this.ArB*t.y;return this.no_rot?(e.x=y,e.y=x):(y-=this.u_0,e.x=x*this.cosrot+y*this.sinrot,e.y=y*this.cosrot-x*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function mV(t){var e,r,a,l,u,h,s,y={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*r),l=.5*(a-1/a),u=.5*(a+1/a),h=Math.sin(this.BrA*e),s=(h*this.cosgam+l*this.singam)/u,Math.abs(Math.abs(s)-1)<Gt)y.x=0,y.y=s<0?-Tt:Tt;else{if(y.y=this.E/Math.sqrt((1+s)/(1-s)),y.y=O0(this.e,Math.pow(y.y,1/this.B)),y.y===1/0)throw new Error;y.x=-this.rB*Math.atan2(l*this.cosgam-h*this.singam,Math.cos(this.BrA*e))}return y.x+=this.lam0,y}var _V=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const bV={init:gV,forward:pV,inverse:mV,names:_V};function yV(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Gt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),a=_o(this.e,e,r),l=Xs(this.e,this.lat1,e),u=Math.sin(this.lat2),h=Math.cos(this.lat2),s=_o(this.e,u,h),y=Xs(this.e,this.lat2,u),x=Xs(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Gt?this.ns=Math.log(a/s)/Math.log(l/y):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(l,this.ns)),this.rh=this.a*this.f0*Math.pow(x,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function vV(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=Gt&&(r=ef(r)*(Tt-2*Gt));var a=Math.abs(Math.abs(r)-Tt),l,u;if(a>Gt)l=Xs(this.e,r,Math.sin(r)),u=this.a*this.f0*Math.pow(l,this.ns);else{if(a=r*this.ns,a<=0)return null;u=0}var h=this.ns*jt(e-this.long0);return t.x=this.k0*(u*Math.sin(h))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(h))+this.y0,t}function xV(t){var e,r,a,l,u,h=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(h*h+s*s),r=1):(e=-Math.sqrt(h*h+s*s),r=-1);var y=0;if(e!==0&&(y=Math.atan2(r*h,r*s)),e!==0||this.ns>0){if(r=1/this.ns,a=Math.pow(e/(this.a*this.f0),r),l=O0(this.e,a),l===-9999)return null}else l=-Tt;return u=jt(y/this.ns+this.long0),t.x=u,t.y=l,t}var wV=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const BV={init:yV,forward:vV,inverse:xV,names:wV};function CV(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function MV(t){var e,r,a,l,u,h,s,y=t.x,x=t.y,C=jt(y-this.long0);return e=Math.pow((1+this.e*Math.sin(x))/(1-this.e*Math.sin(x)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(x/2+this.s45),this.alfa)/e)-this.s45),a=-C*this.alfa,l=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(a)),u=Math.asin(Math.cos(r)*Math.sin(a)/Math.cos(l)),h=this.n*u,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(l/2+this.s45),this.n),t.y=s*Math.cos(h)/1,t.x=s*Math.sin(h)/1,this.czech||(t.y*=-1,t.x*=-1),t}function RV(t){var e,r,a,l,u,h,s,y,x=t.x;t.x=t.y,t.y=x,this.czech||(t.y*=-1,t.x*=-1),h=Math.sqrt(t.x*t.x+t.y*t.y),u=Math.atan2(t.y,t.x),l=u/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/h,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(l)),r=Math.asin(Math.cos(a)*Math.sin(l)/Math.cos(e)),t.x=this.long0-r/this.alfa,s=e,y=0;var C=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(y=1),s=t.y,C+=1;while(y===0&&C<15);return C>=15?null:t}var IV=["Krovak","krovak"];const UV={init:CV,forward:MV,inverse:RV,names:IV};function ma(t,e,r,a,l){return t*l-e*Math.sin(2*l)+r*Math.sin(4*l)-a*Math.sin(6*l)}function tf(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function rf(t){return .375*t*(1+.25*t*(1+.46875*t))}function nf(t){return .05859375*t*t*(1+.75*t)}function af(t){return t*t*t*(35/3072)}function eu(t,e,r){var a=e*r;return t/Math.sqrt(1-a*a)}function rA(t){return Math.abs(t)<Tt?t:t-ef(t)*Math.PI}function Bp(t,e,r,a,l){var u,h;u=t/e;for(var s=0;s<15;s++)if(h=(t-(e*u-r*Math.sin(2*u)+a*Math.sin(4*u)-l*Math.sin(6*u)))/(e-2*r*Math.cos(2*u)+4*a*Math.cos(4*u)-6*l*Math.cos(6*u)),u+=h,Math.abs(h)<=1e-10)return u;return NaN}function EV(){this.sphere||(this.e0=tf(this.es),this.e1=rf(this.es),this.e2=nf(this.es),this.e3=af(this.es),this.ml0=this.a*ma(this.e0,this.e1,this.e2,this.e3,this.lat0))}function FV(t){var e,r,a=t.x,l=t.y;if(a=jt(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(l)*Math.sin(a)),r=this.a*(Math.atan2(Math.tan(l),Math.cos(a))-this.lat0);else{var u=Math.sin(l),h=Math.cos(l),s=eu(this.a,this.e,u),y=Math.tan(l)*Math.tan(l),x=a*Math.cos(l),C=x*x,I=this.es*h*h/(1-this.es),U=this.a*ma(this.e0,this.e1,this.e2,this.e3,l);e=s*x*(1-C*y*(1/6-(8-y+8*I)*C/120)),r=U-this.ml0+s*u/h*C*(.5+(5-y+6*I)*C/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function TV(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,a,l;if(this.sphere){var u=r+this.lat0;a=Math.asin(Math.sin(u)*Math.cos(e)),l=Math.atan2(Math.tan(e),Math.cos(u))}else{var h=this.ml0/this.a+r,s=Bp(h,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-Tt)<=Gt)return t.x=this.long0,t.y=Tt,r<0&&(t.y*=-1),t;var y=eu(this.a,this.e,Math.sin(s)),x=y*y*y/this.a/this.a*(1-this.es),C=Math.pow(Math.tan(s),2),I=e*this.a/y,U=I*I;a=s-y*Math.tan(s)/x*I*I*(.5-(1+3*C)*I*I/24),l=I*(1-U*(C/3+(1+3*C)*C*U/15))/Math.cos(s)}return t.x=jt(l+this.long0),t.y=rA(a),t}var SV=["Cassini","Cassini_Soldner","cass"];const NV={init:EV,forward:FV,inverse:TV,names:SV};function Hl(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var YV=1,PV=2,LV=3,QV=4;function kV(){var t=Math.abs(this.lat0);if(Math.abs(t-Tt)<Gt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Gt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Hl(this.e,1),this.mmf=.5/(1-this.es),this.apa=jV(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Hl(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function DV(t){var e,r,a,l,u,h,s,y,x,C,I=t.x,U=t.y;if(I=jt(I-this.long0),this.sphere){if(u=Math.sin(U),C=Math.cos(U),a=Math.cos(I),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+C*a:1+this.sinph0*u+this.cosph0*C*a,r<=Gt)return null;r=Math.sqrt(2/r),e=r*C*Math.sin(I),r*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*C*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(U+this.lat0)<Gt)return null;r=Ai-U*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(I),r*=a}}else{switch(s=0,y=0,x=0,a=Math.cos(I),l=Math.sin(I),u=Math.sin(U),h=Hl(this.e,u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=h/this.qp,y=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:x=1+this.sinb1*s+this.cosb1*y*a;break;case this.EQUIT:x=1+y*a;break;case this.N_POLE:x=Tt+U,h=this.qp-h;break;case this.S_POLE:x=U-Tt,h=this.qp+h;break}if(Math.abs(x)<Gt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:x=Math.sqrt(2/x),this.mode===this.OBLIQ?r=this.ymf*x*(this.cosb1*s-this.sinb1*y*a):r=(x=Math.sqrt(2/(1+y*a)))*s*this.ymf,e=this.xmf*x*y*l;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(x=Math.sqrt(h))*l,r=a*(this.mode===this.S_POLE?x:-x)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function zV(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,a,l,u,h,s,y,x;if(this.sphere){var C=0,I,U=0;if(I=Math.sqrt(e*e+r*r),l=I*.5,l>1)return null;switch(l=2*Math.asin(l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(U=Math.sin(l),C=Math.cos(l)),this.mode){case this.EQUIT:l=Math.abs(I)<=Gt?0:Math.asin(r*U/I),e*=U,r=C*I;break;case this.OBLIQ:l=Math.abs(I)<=Gt?this.lat0:Math.asin(C*this.sinph0+r*U*this.cosph0/I),e*=U*this.cosph0,r=(C-Math.sin(l)*this.sinph0)*I;break;case this.N_POLE:r=-r,l=Tt-l;break;case this.S_POLE:l-=Tt;break}a=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(x=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,y=Math.sqrt(e*e+r*r),y<Gt)return t.x=this.long0,t.y=this.lat0,t;h=2*Math.asin(.5*y/this.rq),u=Math.cos(h),e*=h=Math.sin(h),this.mode===this.OBLIQ?(x=u*this.sinb1+r*h*this.cosb1/y,s=this.qp*x,r=y*this.cosb1*u-r*this.sinb1*h):(x=r*h/y,s=this.qp*x,r=y*u)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),s=e*e+r*r,!s)return t.x=this.long0,t.y=this.lat0,t;x=1-s/this.qp,this.mode===this.S_POLE&&(x=-x)}a=Math.atan2(e,r),l=KV(Math.asin(x),this.apa)}return t.x=jt(this.long0+a),t.y=l,t}var ZV=.3333333333333333,HV=.17222222222222222,OV=.10257936507936508,XV=.06388888888888888,VV=.0664021164021164,GV=.016415012942191543;function jV(t){var e,r=[];return r[0]=t*ZV,e=t*t,r[0]+=e*HV,r[1]=e*XV,e*=t,r[0]+=e*OV,r[1]+=e*VV,r[2]=e*GV,r}function KV(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var $V=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const qV={init:kV,forward:DV,inverse:zV,names:$V,S_POLE:YV,N_POLE:PV,EQUIT:LV,OBLIQ:QV};function ql(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function WV(){Math.abs(this.lat1+this.lat2)<Gt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=_o(this.e3,this.sin_po,this.cos_po),this.qs1=Hl(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=_o(this.e3,this.sin_po,this.cos_po),this.qs2=Hl(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Hl(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Gt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function JV(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var a=Hl(this.e3,this.sin_phi),l=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,u=this.ns0*jt(e-this.long0),h=l*Math.sin(u)+this.x0,s=this.rh-l*Math.cos(u)+this.y0;return t.x=h,t.y=s,t}function eG(t){var e,r,a,l,u,h;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),l=0,e!==0&&(l=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?h=Math.asin((this.c-a*a)/(2*this.ns0)):(r=(this.c-a*a)/this.ns0,h=this.phi1z(this.e3,r)),u=jt(l/this.ns0+this.long0),t.x=u,t.y=h,t}function tG(t,e){var r,a,l,u,h,s=ql(.5*e);if(t<Gt)return s;for(var y=t*t,x=1;x<=25;x++)if(r=Math.sin(s),a=Math.cos(s),l=t*r,u=1-l*l,h=.5*u*u/a*(e/(1-y)-r/u+.5/t*Math.log((1-l)/(1+l))),s=s+h,Math.abs(h)<=1e-7)return s;return null}var rG=["Albers_Conic_Equal_Area","Albers","aea"];const iG={init:WV,forward:JV,inverse:eG,names:rG,phi1z:tG};function nG(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function aG(t){var e,r,a,l,u,h,s,y,x=t.x,C=t.y;return a=jt(x-this.long0),e=Math.sin(C),r=Math.cos(C),l=Math.cos(a),h=this.sin_p14*e+this.cos_p14*r*l,u=1,h>0||Math.abs(h)<=Gt?(s=this.x0+this.a*u*r*Math.sin(a)/h,y=this.y0+this.a*u*(this.cos_p14*e-this.sin_p14*r*l)/h):(s=this.x0+this.infinity_dist*r*Math.sin(a),y=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*l)),t.x=s,t.y=y,t}function sG(t){var e,r,a,l,u,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(l=Math.atan2(e,this.rc),r=Math.sin(l),a=Math.cos(l),h=ql(a*this.sin_p14+t.y*r*this.cos_p14/e),u=Math.atan2(t.x*r,e*this.cos_p14*a-t.y*this.sin_p14*r),u=jt(this.long0+u)):(h=this.phic0,u=0),t.x=u,t.y=h,t}var oG=["gnom"];const lG={init:nG,forward:aG,inverse:sG,names:oG};function AG(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*Tt:Tt;for(var a=Math.asin(.5*e),l,u,h,s,y=0;y<30;y++)if(u=Math.sin(a),h=Math.cos(a),s=t*u,l=Math.pow(1-s*s,2)/(2*h)*(e/(1-t*t)-u/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),a+=l,Math.abs(l)<=1e-10)return a;return NaN}function cG(){this.sphere||(this.k0=_o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function hG(t){var e=t.x,r=t.y,a,l,u=jt(e-this.long0);if(this.sphere)a=this.x0+this.a*u*Math.cos(this.lat_ts),l=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var h=Hl(this.e,Math.sin(r));a=this.x0+this.a*this.k0*u,l=this.y0+this.a*h*.5/this.k0}return t.x=a,t.y=l,t}function uG(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=jt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=AG(this.e,2*t.y*this.k0/this.a),e=jt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t}var dG=["cea"];const fG={init:cG,forward:hG,inverse:uG,names:dG};function gG(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function pG(t){var e=t.x,r=t.y,a=jt(e-this.long0),l=rA(r-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*l,t}function mG(t){var e=t.x,r=t.y;return t.x=jt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=rA(this.lat0+(r-this.y0)/this.a),t}var _G=["Equirectangular","Equidistant_Cylindrical","eqc"];const bG={init:gG,forward:pG,inverse:mG,names:_G};var D5=20;function yG(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=tf(this.es),this.e1=rf(this.es),this.e2=nf(this.es),this.e3=af(this.es),this.ml0=this.a*ma(this.e0,this.e1,this.e2,this.e3,this.lat0)}function vG(t){var e=t.x,r=t.y,a,l,u,h=jt(e-this.long0);if(u=h*Math.sin(r),this.sphere)Math.abs(r)<=Gt?(a=this.a*h,l=-1*this.a*this.lat0):(a=this.a*Math.sin(u)/Math.tan(r),l=this.a*(rA(r-this.lat0)+(1-Math.cos(u))/Math.tan(r)));else if(Math.abs(r)<=Gt)a=this.a*h,l=-1*this.ml0;else{var s=eu(this.a,this.e,Math.sin(r))/Math.tan(r);a=s*Math.sin(u),l=this.a*ma(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*(1-Math.cos(u))}return t.x=a+this.x0,t.y=l+this.y0,t}function xG(t){var e,r,a,l,u,h,s,y,x;if(a=t.x-this.x0,l=t.y-this.y0,this.sphere)if(Math.abs(l+this.a*this.lat0)<=Gt)e=jt(a/this.a+this.long0),r=0;else{h=this.lat0+l/this.a,s=a*a/this.a/this.a+h*h,y=h;var C;for(u=D5;u;--u)if(C=Math.tan(y),x=-1*(h*(y*C+1)-y-.5*(y*y+s)*C)/((y-h)/C-1),y+=x,Math.abs(x)<=Gt){r=y;break}e=jt(this.long0+Math.asin(a*Math.tan(y)/this.a)/Math.sin(r))}else if(Math.abs(l+this.ml0)<=Gt)r=0,e=jt(this.long0+a/this.a);else{h=(this.ml0+l)/this.a,s=a*a/this.a/this.a+h*h,y=h;var I,U,R,N,D;for(u=D5;u;--u)if(D=this.e*Math.sin(y),I=Math.sqrt(1-D*D)*Math.tan(y),U=this.a*ma(this.e0,this.e1,this.e2,this.e3,y),R=this.e0-2*this.e1*Math.cos(2*y)+4*this.e2*Math.cos(4*y)-6*this.e3*Math.cos(6*y),N=U/this.a,x=(h*(I*N+1)-N-.5*I*(N*N+s))/(this.es*Math.sin(2*y)*(N*N+s-2*h*N)/(4*I)+(h-N)*(I*R-2/Math.sin(2*y))-R),y-=x,Math.abs(x)<=Gt){r=y;break}I=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=jt(this.long0+Math.asin(a*I/this.a)/Math.sin(r))}return t.x=e,t.y=r,t}var wG=["Polyconic","poly"];const BG={init:yG,forward:vG,inverse:xG,names:wG};function CG(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function MG(t){var e,r=t.x,a=t.y,l=a-this.lat0,u=r-this.long0,h=l/x0*1e-5,s=u,y=1,x=0;for(e=1;e<=10;e++)y=y*h,x=x+this.A[e]*y;var C=x,I=s,U=1,R=0,N,D,O=0,H=0;for(e=1;e<=6;e++)N=U*C-R*I,D=R*C+U*I,U=N,R=D,O=O+this.B_re[e]*U-this.B_im[e]*R,H=H+this.B_im[e]*U+this.B_re[e]*R;return t.x=H*this.a+this.x0,t.y=O*this.a+this.y0,t}function RG(t){var e,r=t.x,a=t.y,l=r-this.x0,u=a-this.y0,h=u/this.a,s=l/this.a,y=1,x=0,C,I,U=0,R=0;for(e=1;e<=6;e++)C=y*h-x*s,I=x*h+y*s,y=C,x=I,U=U+this.C_re[e]*y-this.C_im[e]*x,R=R+this.C_im[e]*y+this.C_re[e]*x;for(var N=0;N<this.iterations;N++){var D=U,O=R,H,W,se=h,de=s;for(e=2;e<=6;e++)H=D*U-O*R,W=O*U+D*R,D=H,O=W,se=se+(e-1)*(this.B_re[e]*D-this.B_im[e]*O),de=de+(e-1)*(this.B_im[e]*D+this.B_re[e]*O);D=1,O=0;var le=this.B_re[1],he=this.B_im[1];for(e=2;e<=6;e++)H=D*U-O*R,W=O*U+D*R,D=H,O=W,le=le+e*(this.B_re[e]*D-this.B_im[e]*O),he=he+e*(this.B_im[e]*D+this.B_re[e]*O);var ae=le*le+he*he;U=(se*le+de*he)/ae,R=(de*le-se*he)/ae}var V=U,K=R,oe=1,ce=0;for(e=1;e<=9;e++)oe=oe*V,ce=ce+this.D[e]*oe;var ye=this.lat0+ce*x0*1e5,we=this.long0+K;return t.x=we,t.y=ye,t}var IG=["New_Zealand_Map_Grid","nzmg"];const UG={init:CG,forward:MG,inverse:RG,names:IG};function EG(){}function FG(t){var e=t.x,r=t.y,a=jt(e-this.long0),l=this.x0+this.a*a,u=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=l,t.y=u,t}function TG(t){t.x-=this.x0,t.y-=this.y0;var e=jt(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var SG=["Miller_Cylindrical","mill"];const NG={init:EG,forward:FG,inverse:TG,names:SG};var YG=20;function PG(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=k_(this.es)}function LG(t){var e,r,a=t.x,l=t.y;if(a=jt(a-this.long0),this.sphere){if(!this.m)l=this.n!==1?Math.asin(this.n*Math.sin(l)):l;else for(var u=this.n*Math.sin(l),h=YG;h;--h){var s=(this.m*l+Math.sin(l)-u)/(this.m+Math.cos(l));if(l-=s,Math.abs(s)<Gt)break}e=this.a*this.C_x*a*(this.m+Math.cos(l)),r=this.a*this.C_y*l}else{var y=Math.sin(l),x=Math.cos(l);r=this.a*Au(l,y,x,this.en),e=this.a*a*x/Math.sqrt(1-this.es*y*y)}return t.x=e,t.y=r,t}function QG(t){var e,r,a,l;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=ql((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=ql(Math.sin(e)/this.n)),a=jt(a+this.long0),e=rA(e)):(e=D_(t.y/this.a,this.es,this.en),l=Math.abs(e),l<Tt?(l=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*l*l)/(this.a*Math.cos(e)),a=jt(r)):l-Gt<Tt&&(a=this.long0)),t.x=a,t.y=e,t}var kG=["Sinusoidal","sinu"];const DG={init:PG,forward:LG,inverse:QG,names:kG};function zG(){}function ZG(t){for(var e=t.x,r=t.y,a=jt(e-this.long0),l=r,u=Math.PI*Math.sin(r);;){var h=-(l+Math.sin(l)-u)/(1+Math.cos(l));if(l+=h,Math.abs(h)<Gt)break}l/=2,Math.PI/2-Math.abs(r)<Gt&&(a=0);var s=.900316316158*this.a*a*Math.cos(l)+this.x0,y=1.4142135623731*this.a*Math.sin(l)+this.y0;return t.x=s,t.y=y,t}function HG(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var a=jt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var l=Math.asin(r);return t.x=a,t.y=l,t}var OG=["Mollweide","moll"];const XG={init:zG,forward:ZG,inverse:HG,names:OG};function VG(){Math.abs(this.lat1+this.lat2)<Gt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=tf(this.es),this.e1=rf(this.es),this.e2=nf(this.es),this.e3=af(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=_o(this.e,this.sinphi,this.cosphi),this.ml1=ma(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Gt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=_o(this.e,this.sinphi,this.cosphi),this.ml2=ma(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ma(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function GG(t){var e=t.x,r=t.y,a;if(this.sphere)a=this.a*(this.g-r);else{var l=ma(this.e0,this.e1,this.e2,this.e3,r);a=this.a*(this.g-l)}var u=this.ns*jt(e-this.long0),h=this.x0+a*Math.sin(u),s=this.y0+this.rh-a*Math.cos(u);return t.x=h,t.y=s,t}function jG(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,a,l;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var u=0;if(r!==0&&(u=Math.atan2(e*t.x,e*t.y)),this.sphere)return l=jt(this.long0+u/this.ns),a=rA(this.g-r/this.a),t.x=l,t.y=a,t;var h=this.g-r/this.a;return a=Bp(h,this.e0,this.e1,this.e2,this.e3),l=jt(this.long0+u/this.ns),t.x=l,t.y=a,t}var KG=["Equidistant_Conic","eqdc"];const $G={init:VG,forward:GG,inverse:jG,names:KG};function qG(){this.R=this.a}function WG(t){var e=t.x,r=t.y,a=jt(e-this.long0),l,u;Math.abs(r)<=Gt&&(l=this.x0+this.R*a,u=this.y0);var h=ql(2*Math.abs(r/Math.PI));(Math.abs(a)<=Gt||Math.abs(Math.abs(r)-Tt)<=Gt)&&(l=this.x0,r>=0?u=this.y0+Math.PI*this.R*Math.tan(.5*h):u=this.y0+Math.PI*this.R*-Math.tan(.5*h));var s=.5*Math.abs(Math.PI/a-a/Math.PI),y=s*s,x=Math.sin(h),C=Math.cos(h),I=C/(x+C-1),U=I*I,R=I*(2/x-1),N=R*R,D=Math.PI*this.R*(s*(I-N)+Math.sqrt(y*(I-N)*(I-N)-(N+y)*(U-N)))/(N+y);a<0&&(D=-D),l=this.x0+D;var O=y+I;return D=Math.PI*this.R*(R*O-s*Math.sqrt((N+y)*(y+1)-O*O))/(N+y),r>=0?u=this.y0+D:u=this.y0-D,t.x=l,t.y=u,t}function JG(t){var e,r,a,l,u,h,s,y,x,C,I,U,R;return t.x-=this.x0,t.y-=this.y0,I=Math.PI*this.R,a=t.x/I,l=t.y/I,u=a*a+l*l,h=-Math.abs(l)*(1+u),s=h-2*l*l+a*a,y=-2*h+1+2*l*l+u*u,R=l*l/y+(2*s*s*s/y/y/y-9*h*s/y/y)/27,x=(h-s*s/3/y)/y,C=2*Math.sqrt(-x/3),I=3*R/x/C,Math.abs(I)>1&&(I>=0?I=1:I=-1),U=Math.acos(I)/3,t.y>=0?r=(-C*Math.cos(U+Math.PI/3)-s/3/y)*Math.PI:r=-(-C*Math.cos(U+Math.PI/3)-s/3/y)*Math.PI,Math.abs(a)<Gt?e=this.long0:e=jt(this.long0+Math.PI*(u-1+Math.sqrt(1+2*(a*a-l*l)+u*u))/2/a),t.x=e,t.y=r,t}var ej=["Van_der_Grinten_I","VanDerGrinten","vandg"];const tj={init:qG,forward:WG,inverse:JG,names:ej};function rj(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function ij(t){var e=t.x,r=t.y,a=Math.sin(t.y),l=Math.cos(t.y),u=jt(e-this.long0),h,s,y,x,C,I,U,R,N,D,O,H,W,se,de,le,he,ae,V,K,oe,ce,ye;return this.sphere?Math.abs(this.sin_p12-1)<=Gt?(t.x=this.x0+this.a*(Tt-r)*Math.sin(u),t.y=this.y0-this.a*(Tt-r)*Math.cos(u),t):Math.abs(this.sin_p12+1)<=Gt?(t.x=this.x0+this.a*(Tt+r)*Math.sin(u),t.y=this.y0+this.a*(Tt+r)*Math.cos(u),t):(ae=this.sin_p12*a+this.cos_p12*l*Math.cos(u),le=Math.acos(ae),he=le?le/Math.sin(le):1,t.x=this.x0+this.a*he*l*Math.sin(u),t.y=this.y0+this.a*he*(this.cos_p12*a-this.sin_p12*l*Math.cos(u)),t):(h=tf(this.es),s=rf(this.es),y=nf(this.es),x=af(this.es),Math.abs(this.sin_p12-1)<=Gt?(C=this.a*ma(h,s,y,x,Tt),I=this.a*ma(h,s,y,x,r),t.x=this.x0+(C-I)*Math.sin(u),t.y=this.y0-(C-I)*Math.cos(u),t):Math.abs(this.sin_p12+1)<=Gt?(C=this.a*ma(h,s,y,x,Tt),I=this.a*ma(h,s,y,x,r),t.x=this.x0+(C+I)*Math.sin(u),t.y=this.y0+(C+I)*Math.cos(u),t):(U=a/l,R=eu(this.a,this.e,this.sin_p12),N=eu(this.a,this.e,a),D=Math.atan((1-this.es)*U+this.es*R*this.sin_p12/(N*l)),O=Math.atan2(Math.sin(u),this.cos_p12*Math.tan(D)-this.sin_p12*Math.cos(u)),O===0?V=Math.asin(this.cos_p12*Math.sin(D)-this.sin_p12*Math.cos(D)):Math.abs(Math.abs(O)-Math.PI)<=Gt?V=-Math.asin(this.cos_p12*Math.sin(D)-this.sin_p12*Math.cos(D)):V=Math.asin(Math.sin(u)*Math.cos(D)/Math.sin(O)),H=this.e*this.sin_p12/Math.sqrt(1-this.es),W=this.e*this.cos_p12*Math.cos(O)/Math.sqrt(1-this.es),se=H*W,de=W*W,K=V*V,oe=K*V,ce=oe*V,ye=ce*V,le=R*V*(1-K*de*(1-de)/6+oe/8*se*(1-2*de)+ce/120*(de*(4-7*de)-3*H*H*(1-7*de))-ye/48*se),t.x=this.x0+le*Math.sin(O),t.y=this.y0+le*Math.cos(O),t))}function nj(t){t.x-=this.x0,t.y-=this.y0;var e,r,a,l,u,h,s,y,x,C,I,U,R,N,D,O,H,W,se,de,le,he,ae,V;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Tt*this.a?void 0:(r=e/this.a,a=Math.sin(r),l=Math.cos(r),u=this.long0,Math.abs(e)<=Gt?h=this.lat0:(h=ql(l*this.sin_p12+t.y*a*this.cos_p12/e),s=Math.abs(this.lat0)-Tt,Math.abs(s)<=Gt?this.lat0>=0?u=jt(this.long0+Math.atan2(t.x,-t.y)):u=jt(this.long0-Math.atan2(-t.x,t.y)):u=jt(this.long0+Math.atan2(t.x*a,e*this.cos_p12*l-t.y*this.sin_p12*a))),t.x=u,t.y=h,t)):(y=tf(this.es),x=rf(this.es),C=nf(this.es),I=af(this.es),Math.abs(this.sin_p12-1)<=Gt?(U=this.a*ma(y,x,C,I,Tt),e=Math.sqrt(t.x*t.x+t.y*t.y),R=U-e,h=Bp(R/this.a,y,x,C,I),u=jt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=u,t.y=h,t):Math.abs(this.sin_p12+1)<=Gt?(U=this.a*ma(y,x,C,I,Tt),e=Math.sqrt(t.x*t.x+t.y*t.y),R=e-U,h=Bp(R/this.a,y,x,C,I),u=jt(this.long0+Math.atan2(t.x,t.y)),t.x=u,t.y=h,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),O=Math.atan2(t.x,t.y),N=eu(this.a,this.e,this.sin_p12),H=Math.cos(O),W=this.e*this.cos_p12*H,se=-W*W/(1-this.es),de=3*this.es*(1-se)*this.sin_p12*this.cos_p12*H/(1-this.es),le=e/N,he=le-se*(1+se)*Math.pow(le,3)/6-de*(1+3*se)*Math.pow(le,4)/24,ae=1-se*he*he/2-le*he*he*he/6,D=Math.asin(this.sin_p12*Math.cos(he)+this.cos_p12*Math.sin(he)*H),u=jt(this.long0+Math.asin(Math.sin(O)*Math.sin(he)/Math.cos(D))),V=Math.sin(D),h=Math.atan2((V-this.es*ae*this.sin_p12)*Math.tan(D),V*(1-this.es)),t.x=u,t.y=h,t))}var aj=["Azimuthal_Equidistant","aeqd"];const sj={init:rj,forward:ij,inverse:nj,names:aj};function oj(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function lj(t){var e,r,a,l,u,h,s,y,x=t.x,C=t.y;return a=jt(x-this.long0),e=Math.sin(C),r=Math.cos(C),l=Math.cos(a),h=this.sin_p14*e+this.cos_p14*r*l,u=1,(h>0||Math.abs(h)<=Gt)&&(s=this.a*u*r*Math.sin(a),y=this.y0+this.a*u*(this.cos_p14*e-this.sin_p14*r*l)),t.x=s,t.y=y,t}function Aj(t){var e,r,a,l,u,h,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=ql(e/this.a),a=Math.sin(r),l=Math.cos(r),h=this.long0,Math.abs(e)<=Gt?(s=this.lat0,t.x=h,t.y=s,t):(s=ql(l*this.sin_p14+t.y*a*this.cos_p14/e),u=Math.abs(this.lat0)-Tt,Math.abs(u)<=Gt?(this.lat0>=0?h=jt(this.long0+Math.atan2(t.x,-t.y)):h=jt(this.long0-Math.atan2(-t.x,t.y)),t.x=h,t.y=s,t):(h=jt(this.long0+Math.atan2(t.x*a,e*this.cos_p14*l-t.y*this.sin_p14*a)),t.x=h,t.y=s,t))}var cj=["ortho"];const hj={init:oj,forward:lj,inverse:Aj,names:cj};var Oi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ci={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function uj(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Tt-Ai/2?this.face=Oi.TOP:this.lat0<=-(Tt-Ai/2)?this.face=Oi.BOTTOM:Math.abs(this.long0)<=Ai?this.face=Oi.FRONT:Math.abs(this.long0)<=Tt+Ai?this.face=this.long0>0?Oi.RIGHT:Oi.LEFT:this.face=Oi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function dj(t){var e={x:0,y:0},r,a,l,u,h,s,y={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,a=t.x,this.face===Oi.TOP)u=Tt-r,a>=Ai&&a<=Tt+Ai?(y.value=ci.AREA_0,l=a-Tt):a>Tt+Ai||a<=-(Tt+Ai)?(y.value=ci.AREA_1,l=a>0?a-jn:a+jn):a>-(Tt+Ai)&&a<=-Ai?(y.value=ci.AREA_2,l=a+Tt):(y.value=ci.AREA_3,l=a);else if(this.face===Oi.BOTTOM)u=Tt+r,a>=Ai&&a<=Tt+Ai?(y.value=ci.AREA_0,l=-a+Tt):a<Ai&&a>=-Ai?(y.value=ci.AREA_1,l=-a):a<-Ai&&a>=-(Tt+Ai)?(y.value=ci.AREA_2,l=-a-Tt):(y.value=ci.AREA_3,l=a>0?-a+jn:-a-jn);else{var x,C,I,U,R,N,D;this.face===Oi.RIGHT?a=Hh(a,+Tt):this.face===Oi.BACK?a=Hh(a,3.14159265359):this.face===Oi.LEFT&&(a=Hh(a,-Tt)),U=Math.sin(r),R=Math.cos(r),N=Math.sin(a),D=Math.cos(a),x=R*D,C=R*N,I=U,this.face===Oi.FRONT?(u=Math.acos(x),l=cg(u,I,C,y)):this.face===Oi.RIGHT?(u=Math.acos(C),l=cg(u,I,-x,y)):this.face===Oi.BACK?(u=Math.acos(-x),l=cg(u,I,-C,y)):this.face===Oi.LEFT?(u=Math.acos(-C),l=cg(u,I,x,y)):(u=l=0,y.value=ci.AREA_0)}return s=Math.atan(12/jn*(l+Math.acos(Math.sin(l)*Math.cos(Ai))-Tt)),h=Math.sqrt((1-Math.cos(u))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(l))))),y.value===ci.AREA_1?s+=Tt:y.value===ci.AREA_2?s+=jn:y.value===ci.AREA_3&&(s+=1.5*jn),e.x=h*Math.cos(s),e.y=h*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function fj(t){var e={lam:0,phi:0},r,a,l,u,h,s,y,x,C,I={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?I.value=ci.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(I.value=ci.AREA_1,r-=Tt):t.x<0&&-t.x>=Math.abs(t.y)?(I.value=ci.AREA_2,r=r<0?r+jn:r-jn):(I.value=ci.AREA_3,r+=Tt),C=jn/12*Math.tan(r),h=Math.sin(C)/(Math.cos(C)-1/Math.sqrt(2)),s=Math.atan(h),l=Math.cos(r),u=Math.tan(a),y=1-l*l*u*u*(1-Math.cos(Math.atan(1/Math.cos(s)))),y<-1?y=-1:y>1&&(y=1),this.face===Oi.TOP)x=Math.acos(y),e.phi=Tt-x,I.value===ci.AREA_0?e.lam=s+Tt:I.value===ci.AREA_1?e.lam=s<0?s+jn:s-jn:I.value===ci.AREA_2?e.lam=s-Tt:e.lam=s;else if(this.face===Oi.BOTTOM)x=Math.acos(y),e.phi=x-Tt,I.value===ci.AREA_0?e.lam=-s+Tt:I.value===ci.AREA_1?e.lam=-s:I.value===ci.AREA_2?e.lam=-s-Tt:e.lam=s<0?-s-jn:-s+jn;else{var U,R,N;U=y,C=U*U,C>=1?N=0:N=Math.sqrt(1-C)*Math.sin(s),C+=N*N,C>=1?R=0:R=Math.sqrt(1-C),I.value===ci.AREA_1?(C=R,R=-N,N=C):I.value===ci.AREA_2?(R=-R,N=-N):I.value===ci.AREA_3&&(C=R,R=N,N=-C),this.face===Oi.RIGHT?(C=U,U=-R,R=C):this.face===Oi.BACK?(U=-U,R=-R):this.face===Oi.LEFT&&(C=U,U=R,R=-C),e.phi=Math.acos(-N)-Tt,e.lam=Math.atan2(R,U),this.face===Oi.RIGHT?e.lam=Hh(e.lam,-Tt):this.face===Oi.BACK?e.lam=Hh(e.lam,-3.14159265359):this.face===Oi.LEFT&&(e.lam=Hh(e.lam,+Tt))}if(this.es!==0){var D,O,H;D=e.phi<0?1:0,O=Math.tan(e.phi),H=this.b/Math.sqrt(O*O+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-H*H)/(this.one_minus_f*H)),D&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function cg(t,e,r,a){var l;return t<Gt?(a.value=ci.AREA_0,l=0):(l=Math.atan2(e,r),Math.abs(l)<=Ai?a.value=ci.AREA_0:l>Ai&&l<=Tt+Ai?(a.value=ci.AREA_1,l-=Tt):l>Tt+Ai||l<=-(Tt+Ai)?(a.value=ci.AREA_2,l=l>=0?l-jn:l+jn):(a.value=ci.AREA_3,l+=Tt)),l}function Hh(t,e){var r=t+e;return r<-3.14159265359?r+=Z0:r>3.14159265359&&(r-=Z0),r}var gj=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const pj={init:uj,forward:dj,inverse:fj,names:gj};var T4=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],o0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],z9=.8487,Z9=1.3523,H9=uo/5,mj=1/H9,Sh=18,Cp=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},_j=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function bj(t,e,r,a){for(var l=e;a;--a){var u=t(l);if(l-=u,Math.abs(u)<r)break}return l}function yj(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function vj(t){var e=jt(t.x-this.long0),r=Math.abs(t.y),a=Math.floor(r*H9);a<0?a=0:a>=Sh&&(a=Sh-1),r=uo*(r-mj*a);var l={x:Cp(T4[a],r)*e,y:Cp(o0[a],r)};return t.y<0&&(l.y=-l.y),l.x=l.x*this.a*z9+this.x0,l.y=l.y*this.a*Z9+this.y0,l}function xj(t){var e={x:(t.x-this.x0)/(this.a*z9),y:Math.abs(t.y-this.y0)/(this.a*Z9)};if(e.y>=1)e.x/=T4[Sh][0],e.y=t.y<0?-Tt:Tt;else{var r=Math.floor(e.y*Sh);for(r<0?r=0:r>=Sh&&(r=Sh-1);;)if(o0[r][0]>e.y)--r;else if(o0[r+1][0]<=e.y)++r;else break;var a=o0[r],l=5*(e.y-a[0])/(o0[r+1][0]-a[0]);l=bj(function(u){return(Cp(a,u)-e.y)/_j(a,u)},l,Gt,100),e.x/=Cp(T4[r],l),e.y=(5*r+l)*Vn,t.y<0&&(e.y=-e.y)}return e.x=jt(e.x+this.long0),e}var wj=["Robinson","robin"];const Bj={init:yj,forward:vj,inverse:xj,names:wj};function Cj(){this.name="geocent"}function Mj(t){var e=E9(t,this.es,this.a);return e}function Rj(t){var e=F9(t,this.es,this.a,this.b);return e}var Ij=["Geocentric","geocentric","geocent","Geocent"];const Uj={init:Cj,forward:Mj,inverse:Rj,names:Ij};var na={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Vd={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Ej(){if(Object.keys(Vd).forEach((function(r){if(typeof this[r]>"u")this[r]=Vd[r].def;else{if(Vd[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);Vd[r].num&&(this[r]=parseFloat(this[r]))}Vd[r].degrees&&(this[r]=this[r]*Vn)}).bind(this)),Math.abs(Math.abs(this.lat0)-Tt)<Gt?this.mode=this.lat0<0?na.S_POLE:na.N_POLE:Math.abs(this.lat0)<Gt?this.mode=na.EQUIT:(this.mode=na.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Fj(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),a=Math.cos(t.x),l,u;switch(this.mode){case na.OBLIQ:u=this.sinph0*e+this.cosph0*r*a;break;case na.EQUIT:u=r*a;break;case na.S_POLE:u=-e;break;case na.N_POLE:u=e;break}switch(u=this.pn1/(this.p-u),l=u*r*Math.sin(t.x),this.mode){case na.OBLIQ:u*=this.cosph0*e-this.sinph0*r*a;break;case na.EQUIT:u*=e;break;case na.N_POLE:u*=-(r*a);break;case na.S_POLE:u*=r*a;break}var h,s;return h=u*this.cg+l*this.sg,s=1/(h*this.sw*this.h1+this.cw),l=(l*this.cg-u*this.sg)*this.cw*s,u=h*s,t.x=l*this.a,t.y=u*this.a,t}function Tj(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,a,l;l=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*l,a=this.pn1*t.y*this.cw*l,t.x=r*this.cg+a*this.sg,t.y=a*this.cg-r*this.sg;var u=Ca(t.x,t.y);if(Math.abs(u)<Gt)e.x=0,e.y=t.y;else{var h,s;switch(s=1-u*u*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/u+u/this.pn1),h=Math.sqrt(1-s*s),this.mode){case na.OBLIQ:e.y=Math.asin(h*this.sinph0+t.y*s*this.cosph0/u),t.y=(h-this.sinph0*Math.sin(e.y))*u,t.x*=s*this.cosph0;break;case na.EQUIT:e.y=Math.asin(t.y*s/u),t.y=h*u,t.x*=s;break;case na.N_POLE:e.y=Math.asin(h),t.y=-t.y;break;case na.S_POLE:e.y=-Math.asin(h);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Sj=["Tilted_Perspective","tpers"];const Nj={init:Ej,forward:Fj,inverse:Tj,names:Sj};function Yj(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Pj(t){var e=t.x,r=t.y,a,l,u,h;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var s=this.radius_p/Ca(this.radius_p*Math.cos(r),Math.sin(r));if(l=s*Math.cos(e)*Math.cos(r),u=s*Math.sin(e)*Math.cos(r),h=s*Math.sin(r),(this.radius_g-l)*l-u*u-h*h*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-l,this.flip_axis?(t.x=this.radius_g_1*Math.atan(u/Ca(h,a)),t.y=this.radius_g_1*Math.atan(h/a)):(t.x=this.radius_g_1*Math.atan(u/a),t.y=this.radius_g_1*Math.atan(h/Ca(u,a)))}else this.shape==="sphere"&&(a=Math.cos(r),l=Math.cos(e)*a,u=Math.sin(e)*a,h=Math.sin(r),a=this.radius_g-l,this.flip_axis?(t.x=this.radius_g_1*Math.atan(u/Ca(h,a)),t.y=this.radius_g_1*Math.atan(h/a)):(t.x=this.radius_g_1*Math.atan(u/a),t.y=this.radius_g_1*Math.atan(h/Ca(u,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Lj(t){var e=-1,r=0,a=0,l,u,h,s;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Ca(1,a)):(r=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Ca(1,r));var y=a/this.radius_p;if(l=r*r+y*y+e*e,u=2*this.radius_g*e,h=u*u-4*l*this.C,h<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-u-Math.sqrt(h))/(2*l),e=this.radius_g+s*e,r*=s,a*=s,t.x=Math.atan2(r,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(r=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),l=r*r+a*a+e*e,u=2*this.radius_g*e,h=u*u-4*l*this.C,h<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-u-Math.sqrt(h))/(2*l),e=this.radius_g+s*e,r*=s,a*=s,t.x=Math.atan2(r,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var Qj=["Geostationary Satellite View","Geostationary_Satellite","geos"];const kj={init:Yj,forward:Pj,inverse:Lj,names:Qj};var w0=1.340264,B0=-.081106,C0=893e-6,M0=.003796,Mp=Math.sqrt(3)/2;function Dj(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function zj(t){var e=jt(t.x-this.long0),r=t.y,a=Math.asin(Mp*Math.sin(r)),l=a*a,u=l*l*l;return t.x=e*Math.cos(a)/(Mp*(w0+3*B0*l+u*(7*C0+9*M0*l))),t.y=a*(w0+B0*l+u*(C0+M0*l)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Zj(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,r=12,a=t.y,l,u,h,s,y,x;for(x=0;x<r&&(l=a*a,u=l*l*l,h=a*(w0+B0*l+u*(C0+M0*l))-t.y,s=w0+3*B0*l+u*(7*C0+9*M0*l),a-=y=h/s,!(Math.abs(y)<e));++x);return l=a*a,u=l*l*l,t.x=Mp*t.x*(w0+3*B0*l+u*(7*C0+9*M0*l))/Math.cos(a),t.y=Math.asin(Math.sin(a)/Mp),t.x=jt(t.x+this.long0),t}var Hj=["eqearth","Equal Earth","Equal_Earth"];const Oj={init:Dj,forward:zj,inverse:Zj,names:Hj};var X0=1e-10;function Xj(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<X0)throw new Error;this.es?(this.en=k_(this.es),this.m1=Au(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Gj,this.forward=Vj):(Math.abs(this.phi1)+X0>=Tt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Kj,this.forward=jj)}function Vj(t){var e=jt(t.x-(this.long0||0)),r=t.y,a,l,u;return a=this.am1+this.m1-Au(r,l=Math.sin(r),u=Math.cos(r),this.en),l=u*e/(a*Math.sqrt(1-this.es*l*l)),t.x=a*Math.sin(l),t.y=this.am1-a*Math.cos(l),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Gj(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,a,l;if(r=Ca(t.x,t.y=this.am1-t.y),l=D_(this.am1+this.m1-r,this.es,this.en),(e=Math.abs(l))<Tt)e=Math.sin(l),a=r*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(l);else if(Math.abs(e-Tt)<=X0)a=0;else throw new Error;return t.x=jt(a+(this.long0||0)),t.y=rA(l),t}function jj(t){var e=jt(t.x-(this.long0||0)),r=t.y,a,l;return l=this.cphi1+this.phi1-r,Math.abs(l)>X0?(t.x=l*Math.sin(a=e*Math.cos(r)/l),t.y=this.cphi1-l*Math.cos(a)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Kj(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,a=Ca(t.x,t.y=this.cphi1-t.y);if(r=this.cphi1+this.phi1-a,Math.abs(r)>Tt)throw new Error;return Math.abs(Math.abs(r)-Tt)<=X0?e=0:e=a*Math.atan2(t.x,t.y)/Math.cos(r),t.x=jt(e+(this.long0||0)),t.y=rA(r),t}var $j=["bonne","Bonne (Werner lat_1=90)"];const qj={init:Xj,names:$j};function Wj(t){t.Proj.projections.add(Ug),t.Proj.projections.add(Eg),t.Proj.projections.add(GX),t.Proj.projections.add(rV),t.Proj.projections.add(lV),t.Proj.projections.add(dV),t.Proj.projections.add(bV),t.Proj.projections.add(BV),t.Proj.projections.add(UV),t.Proj.projections.add(NV),t.Proj.projections.add(qV),t.Proj.projections.add(iG),t.Proj.projections.add(lG),t.Proj.projections.add(fG),t.Proj.projections.add(bG),t.Proj.projections.add(BG),t.Proj.projections.add(UG),t.Proj.projections.add(NG),t.Proj.projections.add(DG),t.Proj.projections.add(XG),t.Proj.projections.add($G),t.Proj.projections.add(tj),t.Proj.projections.add(sj),t.Proj.projections.add(hj),t.Proj.projections.add(pj),t.Proj.projections.add(Bj),t.Proj.projections.add(Uj),t.Proj.projections.add(Nj),t.Proj.projections.add(kj),t.Proj.projections.add(Oj),t.Proj.projections.add(qj)}ja.defaultDatum="WGS84";ja.Proj=mo;ja.WGS84=new ja.Proj("WGS84");ja.Point=Jh;ja.toPoint=T9;ja.defs=pa;ja.nadgrid=KO;ja.transform=wp;ja.mgrs=hX;ja.version="__VERSION__";Wj(ja);const Jj=async(t,{x:e,y:r,z:a})=>{const l=await fetch("http://127.0.0.1:8000/update_angle",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,angleX:e,angleY:r,angleZ:a})});if(!l.ok){console.error("Failed to update angles:",l.status);return}const u=await l.json();console.log("Updated data:",u)},Bm=t=>t*(Math.PI/180);ja.defs("EPSG:6677","+proj=tmerc +lat_0=36 +lon_0=139.833333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs");var eK=dt('<div class="css-loading svelte-1orjh7u"><div class="css-spinner svelte-1orjh7u"></div></div>'),tK=(t,e)=>Ol(Xl,!1),rK=dt('<div class="bg-main absolute left-4 top-[100px] z-10 flex items-center justify-center gap-2 rounded-lg p-2 text-white svelte-1orjh7u"><button class="cursor-pointer rounded-md p-2 svelte-1orjh7u"><!></button> <span class="svelte-1orjh7u"> <span class="svelte-1orjh7u"></span></span></div>'),iK=(t,e,r)=>{e(re(r).featureData)},nK=dt('<button class="css-arrow svelte-1orjh7u"><!></button>'),aK=dt('<!> <div><div class="css-control-warp svelte-1orjh7u"><div class="css-control svelte-1orjh7u"><!></div></div></div>',1),sK=dt('<div><canvas class="h-full w-full svelte-1orjh7u"></canvas> <!></div>');function z5(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Qg,"$DEBUG_MODE",r),u=()=>kr(Xl,"$isStreetView",r),h="https://raw.githubusercontent.com/forestacdev/fac-cubemap-image/main/images/",s=75;new m1(0,0,0),new m1(0,10,0);let y=xr(e,"cameraBearing",15),x=er(null),C,I,U,R,N=er(!1),D=er(null),O=er(null);const H={skybox:{value:null},rotationAngles:{value:new m1}},W=new Ty(10,16,16),se=new xC({uniforms:H,vertexShader:oO,fragmentShader:sO,side:wC,wireframe:!1});let de,le={x:0,y:0,z:0},he,ae,V;const K=new P_;he=K.add(le,"x",0,360).listen(),ae=K.add(le,"y",0,360).listen(),V=K.add(le,"z",0,360).listen();const oe={updateAngle:()=>{Jj(e.streetViewPoint.properties.ID,le)}};K.add(oe,"updateAngle").name("Update Angle");let ce=[];const ye=Qe=>{const wt=new TC({color:16711680,visible:!!l()});we(),Qe.forEach(Ct=>{const Mt=Ny.degToRad(Ct.bearing),Pt=5*Math.sin(Mt),ar=-5*Math.cos(Mt),Lt=new Ty(.3,16,16),Ot=new Sy(Lt,wt);Ot.name=Ct.featureData.properties.ID,Ot.position.set(Pt,0,ar),C.add(Ot),ce.push(Ot)})},we=()=>{ce.length>0&&(ce.forEach(Qe=>{C.remove(Qe),Qe.geometry.dispose()}),ce=[])},Ve=new Worker(new URL(""+new URL("../workers/worker-HhaZkm9-.js",import.meta.url).href,import.meta.url),{type:"module"}),ut=async Qe=>{if(!Qe)return;ht(O,Qe,!0),ht(N,!0);const pt=`${h}${Qe.properties.Name}`,$e=Qe.properties.ID,wt=aO.find(Mt=>Mt.id===$e),Ct=pt.replace(".JPG","/");pt&&(Ve.postMessage({urls:[`${Ct}face_1.jpg`,`${Ct}face_2.jpg`,`${Ct}face_3.jpg`,`${Ct}face_4.jpg`,`${Ct}face_5.jpg`,`${Ct}face_6.jpg`]}),Ve.onmessage=Mt=>{if(Mt.data.error){console.error(Mt.data.error),ht(N,!1);return}const{blobUrls:Pt}=Mt.data;new EC().load(Pt,Lt=>{Lt.colorSpace=FC,wt&&(le.x=wt.angleX,le.y=wt.angleY,le.z=wt.angleZ,l()&&(he.setValue(le.x),ae.setValue(le.y),V.setValue(le.z)),ht(N,!1),H.skybox.value=Lt,ye(e.nextPointData))},void 0,Lt=>console.error("",Lt))})},nt=()=>{if(!R)return;const Qe=window.innerWidth,pt=window.innerHeight;R.setPixelRatio(Math.min(window.devicePixelRatio,2)),R.setSize(Qe,pt),I.aspect=Qe/pt,I.updateProjectionMatrix()};In(async()=>{if(!re(x))return;const Qe={width:re(x).clientWidth,height:re(x).clientHeight};if(C=new BC,I=new CC(s,Qe.width/Qe.height,.1,1e3),I.position.set(0,0,0),I.rotation.order="YXZ",C.add(I),I.aspect=Qe.width/Qe.height,I.updateProjectionMatrix(),U=new MC(I,re(x)),U.target.set(I.position.x,I.position.y,I.position.z+.01),U.dampingFactor=.1,U.rotateSpeed*=-1,U.enableDamping=!0,U.enablePan=!1,U.enableZoom=!1,U.maxZoom=1,de=new Sy(W,se),C.add(de),l()){const $e=new RC(1e3);C.add($e);const wt=new IC(10,16,10,64);C.add(wt)}R=new UC({canvas:re(x),alpha:!0}),R.setSize(re(x).clientWidth,re(x).clientHeight),R.setPixelRatio(Math.min(window.devicePixelRatio,2)),re(x).addEventListener("resize",nt),re(x).addEventListener("wheel",$e=>{I.fov+=$e.deltaY*.05*1,I.fov=Math.max(20,Math.min(100,I.fov)),I.updateProjectionMatrix()});const pt=()=>{requestAnimationFrame(pt),U.update();let $e=Ny.radToDeg(I.rotation.y);if($e=($e+360)%360,!re(D))return;re(D).style.transform=`rotateZ(${$e}deg)`,y(($e+180)%360);let wt=new m1(Bm(le.x),Bm(le.y),Bm(le.z));H.rotationAngles.value=wt,R.render(C,I)};pt()}),Xl.subscribe(async Qe=>{nt()});const rt=Qe=>{e.setPoint(Qe)};Dn(()=>ut(e.streetViewPoint));var ft=sK(),_t=Pe(ft);Ga(_t,Qe=>ht(x,Qe),()=>re(x));var gt=Ze(_t,2);{var Je=Qe=>{var pt=eK();Xe(Qe,pt)},je=Qe=>{var pt=aK(),$e=Dt(pt);{var wt=Ot=>{var Qt=rK(),St=Pe(Qt);St.__click=[tK,u];var Zt=Pe(St);br(Zt,{icon:"ep:back",class:"h-4 w-4"}),Fe(St);var lr=Ze(St,2),dr=Pe(lr);Ki(),Fe(lr),Fe(Qt),hr(()=>_r(dr,`:${e.streetViewPoint.properties.Date??""}`)),Xe(Ot,Qt)};Ut($e,Ot=>{e.showThreeCanvas&&Ot(wt)})}var Ct=Ze($e,2),Mt=Pe(Ct),Pt=Pe(Mt),ar=Pe(Pt);{var Lt=Ot=>{var Qt=Mr(),St=Dt(Qt);Qi(St,17,()=>e.nextPointData,Rn,(Zt,lr)=>{var dr=nK();dr.__click=[iK,rt,lr];var rr=Pe(dr);const Br=bi(()=>e.showThreeCanvas?128:64),Dr=bi(()=>e.showThreeCanvas?128:64);br(rr,{icon:"ep:arrow-up-bold",get width(){return re(Br)},get height(){return re(Dr)},class:"",get style(){return`transform: rotate(${re(lr).bearing??""}deg);`}}),Fe(dr),hr(()=>Oa(dr,`--angle: ${re(lr).bearing??""}deg; --distance: ${(e.showThreeCanvas?"128":"64")??""}px;`)),Xe(Zt,dr)}),Xe(Ot,Qt)};Ut(ar,Ot=>{e.nextPointData&&Ot(Lt)})}Fe(Pt),Ga(Pt,Ot=>ht(D,Ot),()=>re(D)),Fe(Mt),Fe(Ct),hr(()=>mn(Ct,1,`css-3d pointer-events-none absolute bottom-0 grid w-full place-items-center p-0 ${(e.showThreeCanvas?" h-[400px]":" h-full")??""}`,"svelte-1orjh7u")),Xe(Qe,pt)};Ut(gt,Qe=>{re(N)?Qe(Je):Qe(je,!1)})}Fe(ft),hr(()=>mn(ft,1,`absolute z-10 flex overflow-hidden duration-500 ${(e.showThreeCanvas?"bottom-0 right-0 h-full w-full opacity-100":"pointer-events-none bottom-0 right-0 h-full w-full opacity-0")??""}`,"svelte-1orjh7u")),Xe(t,ft),gr(),a()}qi(["click"]);var oK=dt('<label> <input type="radio" class="hidden"></label>'),lK=dt('<div class="bg-main absolute z-10 flex h-full w-[400px] flex-col gap-2"><div class="flex items-center justify-between p-2"><span class="p-2 text-base text-lg"></span> <button class="bg-base rounded-full p-2"><!></button></div> <div class="c-scroll-hidden flex grow flex-col divide-y-2 overflow-y-auto overflow-x-hidden px-2 pb-4"><!> <!></div> <div class="c-fog pointer-events-none absolute bottom-0 z-10 flex h-[100px] w-full items-end justify-center pb-4 svelte-acdvpo"></div></div>');function AK(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Fy,"$showTerrainMenu",r),u=()=>kr(Dl,"$isTerrain3d",r),h=[];Dl.subscribe(I=>{const U=fi.getMap();U&&(I?(U.setTerrain({source:"terrain",exaggeration:1}),U.easeTo({pitch:60})):(U.setTerrain(null),U.easeTo({pitch:0})))});let s=er($n(Ao[0]));$n([...Ao]),Dn(()=>{gn.url=re(s).tiles[0],gn.demType=re(s).demType,gn.sourceMinZoom=re(s).minzoom,gn.sourceMaxZoom=re(s).maxzoom,gn.bbox=re(s).bbox,gn.attribution=re(s).attribution,fi.resetDem()});var y=Mr(),x=Dt(y);{var C=I=>{var U=lK(),R=Pe(U),N=Ze(Pe(R),2);N.__click=()=>{Fy.set(!1)};var D=Pe(N);br(D,{icon:"material-symbols:close-rounded",class:"text-main w-4] h-4"}),Fe(N),Fe(R);var O=Ze(R,2),H=Pe(O);jl(H,{label:"3D",get value(){return j5(),u()},set value(se){Ol(Dl,se)}});var W=Ze(H,2);Qi(W,17,()=>Ao,Rn,(se,de)=>{var le=oK(),he=Pe(le),ae=Ze(he);bo(ae);var V;Fe(le),hr(()=>{mn(le,1,`flex cursor-pointer items-center justify-between gap-2 p-2 text-left text-base ${(re(de).id===re(s).id?"bg-accent text-main":"")??""}`),_r(he,`${re(de).name??""} `),Mn(ae,"id",re(de).id),V!==(V=re(de))&&(ae.value=(ae.__value=re(de))==null?"":re(de))}),Ep(h,[],ae,()=>(re(de),re(s)),K=>ht(s,K)),Xe(se,le)}),Fe(O),Ki(2),Fe(U),Ri(3,U,()=>js,()=>({duration:300,x:-100,opacity:0})),Xe(I,U)};Ut(x,I=>{l()&&I(C)})}Xe(t,y),gr(),a()}qi(["click"]);var cK=dt('<div class="bg-base absolute z-50"> </div>');function hK(t,e){fr(e,!1);const[r,a]=sn(),l=()=>kr(LH,"$tooltip",r);Wl();var u=Mr(),h=Dt(u);{var s=y=>{var x=cK(),C=Pe(x,!0);Fe(x),hr(()=>{Oa(x,`top: ${l().y+10}px;left: ${l().x+10}px;`),_r(C,l().text)}),Xe(y,x)};Ut(h,y=>{l().visible&&y(s)})}Xe(t,u),gr(),a()}const uK=""+new URL("../assets/2001.CwL8XJaL.svg",import.meta.url).href;var dK=dt('<div class="c-loading svelte-1wdd9k2"><div class="spinner svelte-1wdd9k2"></div> <img alt="Logo" class="absolute left-0 top-0 h-full w-full" width="800" height="1052"></div>');function fK(t,e){fr(e,!0);let r=er(!1),a=er(null);In(async()=>{await gg(1500),fi.onInitialized(s=>{s?s.on("load",()=>{s.resize(),ht(r,!1)}):(s.resize(),ht(r,!1))})});var l=Mr(),u=Dt(l);{var h=s=>{var y=dK(),x=Ze(Pe(y),2);Mn(x,"src",uK),Fe(y),Ga(y,C=>ht(a,C),()=>re(a)),Ri(3,y,()=>fs,()=>({duration:300})),Xe(s,y)};Ut(u,s=>{re(r)&&s(h)})}Xe(t,l),gr()}var gK=dt('<div class="relative flex h-full w-full grow"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1),pK=dt('<div class="relative flex h-full w-full grow flex-col"><!> <!> <!> <!> <!></div>'),mK=dt("<!> <!> <!> <!> <!> <!>",1);function zK(t,e){fr(e,!0);const[r,a]=sn(),l=()=>kr(Xl,"$isStreetView",r),u=()=>kr(Zs,"$mapMode",r);let h=$n([...Ip]),s=er($n([])),y=er($n([])),x=er(""),C=er(null),I=er($n({})),U=er(null),R=er(null),N=er($n({type:"FeatureCollection",features:[]})),D=er($n({type:"FeatureCollection",features:[]})),O=er(0),H=er(!0),W=er(!1),se=er(null),de=er(!1),le=er(null);const he=document.createElement("div");document.body.appendChild(he),In(async()=>{uC(VH,{target:he,props:{cameraBearing:re(O),angleMarker:re(U)}}),ht(N,await Vm(`${ug}/nodes.fgb`),!0),ht(D,await Vm(`${ug}/links.fgb`),!0),ht(I,await fetch(`${ug}/node_connections.json`).then(gt=>gt.json()),!0),ES()});const ae=async gt=>{var pt;if(!gt)return;const Je=gt.properties.ID;US(Je);const je=(re(I)[Je]||[]).map($e=>re(N).features.find(wt=>wt.properties.ID===$e)).filter($e=>$e!==void 0).map($e=>({featureData:$e,bearing:KC(gt,$e)})),Qe=fi.getMap();Qe&&(l()&&(V(Qe,gt.geometry.coordinates),Qe.panTo(gt.geometry.coordinates,{duration:1e3,animate:!0})),re(U)&&re(U).remove(),ht(U,new Vs.Marker({element:he,pitchAlignment:"map",rotationAlignment:"map",draggable:!0,rotation:-re(O)+180}).setLngLat(gt.geometry.coordinates).addTo(Qe),!0),re(U).togglePopup(),ht(C,je,!0),ht(R,gt,!0),(pt=re(U))==null||pt.on("dragend",()=>{var Ct;const $e=(Ct=re(U))==null?void 0:Ct.getLngLat();if(!$e)return;const wt=Hy([$e.lng,$e.lat],re(N));ae(wt)}))};Dn(()=>{re(O)&&re(U)&&re(U).setRotation(-re(O)+180)}),fi.onClick(gt=>{if(!(!gt||u()==="edit")&&re(N).features.length>0){const Je=Hy([gt.lngLat.lng,gt.lngLat.lat],re(N));$C(Je,[gt.lngLat.lng,gt.lngLat.lat],{units:"meters"})<100&&ae(Je)}});const V=(gt,Je)=>{const je=gt.queryTerrainElevation(Je);gt.setCenterClampedToGround(!1),gt.setCenterElevation(je??0),console.warn("elevation",je),gt._elevationStart=gt._elevationTarget},K=gt=>{gt.setCenterClampedToGround(!0),gt.setCenterElevation(0),gt._elevationStart=gt._elevationTarget};Xl.subscribe(async gt=>{const Je=fi.getMap();Je&&(gt?(V(Je,re(R).geometry.coordinates),Je.easeTo({center:re(R).geometry.coordinates,zoom:20,duration:750,bearing:-re(O)+180,pitch:65}),await gg(750),ht(H,!1),ht(W,!0),await gg(500),Je.setBearing(0),Je.setPitch(0),Ol(Zs,"small")):(Je.easeTo({center:re(R).geometry.coordinates,zoom:20,duration:0,bearing:-re(O)+180,pitch:65}),Ol(Zs,"view"),ht(H,!0),ht(W,!1),K(Je),await gg(300),Je.easeTo({zoom:17,bearing:0,pitch:0,duration:750})))}),F0.subscribe(gt=>{ht(y,h.filter(Je=>gt.includes(Je.id)),!0)});const oe=u8(gt=>{gt.forEach(Je=>{const je=h.findIndex(Qe=>Qe.id===Je.id);je!==-1&&(h[je]={...Je})})},100);Dn(()=>{const gt=e8(re(y));oe(gt)});var ce=mK(),ye=Dt(ce);{var we=gt=>{var Je=gK(),je=Dt(Je),Qe=Pe(je);t5(Qe,{get layerEntries(){return re(y)},set layerEntries(Qt){ht(y,Qt,!0)},get tempLayerEntries(){return re(s)},set tempLayerEntries(Qt){ht(s,Qt,!0)}});var pt=Ze(Qe,2);d5(pt,{get streetViewLineData(){return re(D)},get streetViewPointData(){return re(N)},get angleMarker(){return re(U)},get streetViewPoint(){return re(R)},get showMapCanvas(){return re(H)},get layerEntries(){return re(y)},set layerEntries(Qt){ht(y,Qt,!0)},get tempLayerEntries(){return re(s)},set tempLayerEntries(Qt){ht(s,Qt,!0)},get featureMenuData(){return re(se)},set featureMenuData(Qt){ht(se,Qt,!0)},get showSelectionMarker(){return re(de)},set showSelectionMarker(Qt){ht(de,Qt,!0)},get selectionMarkerLngLat(){return re(le)},set selectionMarkerLngLat(Qt){ht(le,Qt,!0)}});var $e=Ze(pt,2);zH($e,{});var wt=Ze($e,2);e5(wt,{get layerEntries(){return re(y)}});var Ct=Ze(wt,2);hk(Ct,{get layerEntries(){return re(y)},get featureMenuData(){return re(se)},set featureMenuData(Qt){ht(se,Qt,!0)}});var Mt=Ze(Ct,2);SH(Mt,{get layerEntries(){return re(y)},get featureMenuData(){return re(se)},set featureMenuData(Qt){ht(se,Qt,!0)},get inputSearchWord(){return re(x)},set inputSearchWord(Qt){ht(x,Qt,!0)},get showSelectionMarker(){return re(de)},set showSelectionMarker(Qt){ht(de,Qt,!0)},get selectionMarkerLngLat(){return re(le)},set selectionMarkerLngLat(Qt){ht(le,Qt,!0)}});var Pt=Ze(Mt,2);AK(Pt,{});var ar=Ze(Pt,2);Wv(ar,{});var Lt=Ze(ar,2);z5(Lt,{get streetViewPoint(){return re(R)},get nextPointData(){return re(C)},get showThreeCanvas(){return re(W)},setPoint:ae,get cameraBearing(){return re(O)},set cameraBearing(Qt){ht(O,Qt,!0)}}),Fe(je);var Ot=Ze(je,2);hK(Ot,{}),Xe(gt,Je)},Ve=gt=>{var Je=pK(),je=Pe(Je);t5(je,{get layerEntries(){return re(y)},set layerEntries(Ct){ht(y,Ct,!0)},get tempLayerEntries(){return re(s)},set tempLayerEntries(Ct){ht(s,Ct,!0)}});var Qe=Ze(je,2);d5(Qe,{get streetViewLineData(){return re(D)},get streetViewPointData(){return re(N)},get angleMarker(){return re(U)},get streetViewPoint(){return re(R)},get showMapCanvas(){return re(H)},get layerEntries(){return re(y)},set layerEntries(Ct){ht(y,Ct,!0)},get tempLayerEntries(){return re(s)},set tempLayerEntries(Ct){ht(s,Ct,!0)},get featureMenuData(){return re(se)},set featureMenuData(Ct){ht(se,Ct,!0)}});var pt=Ze(Qe,2);e5(pt,{get layerEntries(){return re(y)}});var $e=Ze(pt,2);Wv($e,{});var wt=Ze($e,2);z5(wt,{get streetViewPoint(){return re(R)},get nextPointData(){return re(C)},get showThreeCanvas(){return re(W)},setPoint:ae,get cameraBearing(){return re(O)},set cameraBearing(Ct){ht(O,Ct,!0)}}),Fe(Je),Xe(gt,Je)};Ut(ye,gt=>{z4()?gt(we):gt(Ve,!1)})}var ut=Ze(ye,2);OH(ut,{});var nt=Ze(ut,2);sZ(nt,{});var rt=Ze(nt,2);nS(rt,{});var ft=Ze(rt,2);sS(ft,{});var _t=Ze(ft,2);fK(_t,{}),Xe(t,ce),gr(),a()}export{zK as component};
