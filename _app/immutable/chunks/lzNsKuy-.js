var jr=Object.defineProperty;var Ur=(r,e,t)=>e in r?jr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var k=(r,e,t)=>Ur(r,typeof e!="symbol"?e+"":e,t);import{b as zr,E as $r,f as Rr,F as Lr,at as Cr,h as q,g as Dr,au as Br,av as Vr,aw as Zr,ax as Gr,ay as qr,d as jt,az as dr,aA as E}from"./uVeY05RF.js";import{j as Hr,k as Kr,i as Wr,l as Yr}from"./a5flVsui.js";import{a as Xr,n as Jr,b as Qr}from"./NV4QSsm6.js";function bs(r,e,...t){var n=r,i=Lr,o;zr(()=>{i!==(i=e())&&(o&&(Cr(o),o=null),o=Rr(()=>i(n,...t)))},$r),q&&(n=Dr)}function hr(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=hr(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function en(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=hr(r))&&(n&&(n+=" "),n+=e);return n}function tn(r){return typeof r=="object"?en(r):r??""}const Ut=[...` 	
\r\f \v\uFEFF`];function rn(r,e,t){var n=r==null?"":""+r;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var o=i.length,s=0;(s=n.indexOf(i,s))>=0;){var l=s+o;(s===0||Ut.includes(n[s-1]))&&(l===n.length||Ut.includes(n[l]))?n=(s===0?"":n.substring(0,s))+n.substring(l+1):s=l}}return n===""?null:n}function zt(r,e=!1){var t=e?" !important;":";",n="";for(var i in r){var o=r[i];o!=null&&o!==""&&(n+=" "+i+": "+o+t)}return n}function nt(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function nn(r,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,l=!1,c=[];n&&c.push(...Object.keys(n).map(nt)),i&&c.push(...Object.keys(i).map(nt));var a=0,u=-1;const y=r.length;for(var d=0;d<y;d++){var f=r[d];if(l?f==="/"&&r[d-1]==="*"&&(l=!1):o?o===f&&(o=!1):f==="/"&&r[d+1]==="*"?l=!0:f==='"'||f==="'"?o=f:f==="("?s++:f===")"&&s--,!l&&o===!1&&s===0){if(f===":"&&u===-1)u=d;else if(f===";"||d===y-1){if(u!==-1){var h=nt(r.substring(a,u).trim());if(!c.includes(h)){f!==";"&&d++;var b=r.substring(a,d).trim();t+=" "+b+";"}}a=d+1,u=-1}}}}return n&&(t+=zt(n)),i&&(t+=zt(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function on(r,e,t,n,i,o){var s=r.__className;if(q||s!==t||s===void 0){var l=rn(t,n,o);(!q||l!==r.getAttribute("class"))&&(l==null?r.removeAttribute("class"):e?r.className=l:r.setAttribute("class",l)),r.__className=t}else if(o&&i!==o)for(var c in o){var a=!!o[c];(i==null||a!==!!i[c])&&r.classList.toggle(c,a)}return o}function it(r,e={},t,n){for(var i in t){var o=t[i];e[i]!==o&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,o,n))}}function sn(r,e,t,n){var i=r.__style;if(q||i!==e){var o=nn(e,n);(!q||o!==r.getAttribute("style"))&&(o==null?r.removeAttribute("style"):r.style.cssText=o),r.__style=e}else n&&(Array.isArray(n)?(it(r,t==null?void 0:t[0],n[0]),it(r,t==null?void 0:t[1],n[1],"important")):it(r,t,n));return n}const ye=Symbol("class"),ge=Symbol("style"),br=Symbol("is custom element"),pr=Symbol("is html");function ps(r){if(q){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var n=r.value;Le(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var i=r.checked;Le(r,"checked",null),r.checked=i}}};r.__on_r=t,Gr(t),Hr()}}function an(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Le(r,e,t,n){var i=yr(r);q&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(r[qr]=t),t==null?r.removeAttribute(e):typeof t!="string"&&gr(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function ys(r,e,t,n,i=!1){var o=yr(r),s=o[br],l=!o[pr];let c=q&&s;c&&jt(!1);var a=e||{},u=r.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class?t.class=tn(t.class):t[ye]&&(t.class=null),t[ge]&&(t.style??(t.style=null));var f=gr(r);for(const p in t){let _=t[p];if(u&&p==="value"&&_==null){r.value=r.__value="",a[p]=_;continue}if(p==="class"){var h=r.namespaceURI==="http://www.w3.org/1999/xhtml";on(r,h,_,n,e==null?void 0:e[ye],t[ye]),a[p]=_,a[ye]=t[ye];continue}if(p==="style"){sn(r,_,e==null?void 0:e[ge],t[ge]),a[p]=_,a[ge]=t[ge];continue}var b=a[p];if(_!==b){a[p]=_;var y=p[0]+p[1];if(y!=="$$")if(y==="on"){const g={},$="$$"+p;let T=p.slice(2);var S=Qr(T);if(Xr(T)&&(T=T.slice(0,-7),g.capture=!0),!S&&b){if(_!=null)continue;r.removeEventListener(T,a[$],g),a[$]=null}if(_!=null)if(S)r[`__${T}`]=_,Wr([T]);else{let W=function(Y){a[p].call(this,Y)};a[$]=Kr(T,r,W,g)}else S&&(r[`__${T}`]=void 0)}else if(p==="style")Le(r,p,_);else if(p==="autofocus")Yr(r,!!_);else if(!s&&(p==="__value"||p==="value"&&_!=null))r.value=r.__value=_;else if(p==="selected"&&u)an(r,_);else{var m=p;l||(m=Jr(m));var P=m==="defaultValue"||m==="defaultChecked";if(_==null&&!s&&!P)if(o[p]=null,m==="value"||m==="checked"){let g=r;const $=e===void 0;if(m==="value"){let T=g.defaultValue;g.removeAttribute(m),g.defaultValue=T,g.value=g.__value=$?T:null}else{let T=g.defaultChecked;g.removeAttribute(m),g.defaultChecked=T,g.checked=$?T:!1}}else r.removeAttribute(p);else P||f.includes(m)&&(s||typeof _!="string")?r[m]=_:typeof _!="function"&&Le(r,m,_)}}}return c&&jt(!0),a}function yr(r){return r.__attributes??(r.__attributes={[br]:r.nodeName.includes("-"),[pr]:r.namespaceURI===Br})}var $t=new Map;function gr(r){var e=$t.get(r.nodeName);if(e)return e;$t.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=Zr(n);for(var o in t)t[o].set&&e.push(o);n=Vr(n)}return e}const ln="https://raw.githubusercontent.com/forestacdev/morivis-data/main",be=ln+"/data",vt=be+"/entries",et=vt+"/fgb",cn=vt+"/pmtiles/raster",K=vt+"/pmtiles/vector",B=be+"/images/cover",mr=be+"/images/feature",gs=be+"/street-view",un=be+"/font",ms=un+"/{fontstack}/{range}.pbf",_s=be+"/images/cover/no_image.webp",ws="#00d4fe",fn=1024,vs={center:[136.923004009,35.5509525769706],zoom:16,pitch:0,bearing:0,bounds:[136.91278,35.543576,136.92986,35.556704]},xs={x:28846,y:12917,z:15},ks=["ensyurin_road2","gsi_road","ensyurin_rinhan","gsi_rinya_m","gsi_seamlessphoto"],V={type:"basemap",opacity:1,visible:!0,hueRotate:0,brightnessMin:0,brightnessMax:1,saturation:0,contrast:0},Z={clickable:!1},Ce={type:"circle",opacity:.8,visible:!0,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#ff00ea"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},_r={type:"line",opacity:.5,visible:!0,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#cf42cc"}}]},width:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}}]},lineStyle:"solid",labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},wr={type:"fill",opacity:.5,visible:!0,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},dn=r=>{const e=r.map(t=>({key:t,name:t,value:`{${t}}`}));return{key:r[0],show:!1,expressions:e}},hn={id:"ecoris_vege_5",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/vege/{z}/{x}/{y}.png"},metaData:{name:"第5回 植生図",description:"第5回 自然環境保全基礎調査 植生調査結果GISデータ(環境省生物多様性センター)を使用し、株式会社エコリスが着色し加工したもの",attribution:"エコリス地図タイル",downloadUrl:"https://map.ecoris.info/#contents",location:"全国",minZoom:5,maxZoom:15,tileSize:256,xyzImageTile:{x:7211,y:3229,z:13}},interaction:{...Z},style:{...V}},bn=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),pn={id:"ecoris_vege_6",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/vege67/{z}/{x}/{y}.png"},metaData:{name:"第6～7回 植生図",description:"第6～7回 自然環境保全基礎調査 植生調査結果GISデータ(環境省生物多様性センター)を使用し、株式会社エコリスが着色し加工したもの",attribution:"エコリス地図タイル",downloadUrl:"https://map.ecoris.info/#contents",location:"全国",minZoom:5,maxZoom:15,tileSize:256,xyzImageTile:{x:7211,y:3229,z:13}},interaction:{...Z},style:{...V}},yn=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),gn={id:"gbank_seamless",type:"raster",format:{type:"image",url:"https://gbank.gsj.jp/seamless/v2/api/1.3.1/tiles/{z}/{y}/{x}.png"},metaData:{name:"20万分の1日本シームレス地質図V2",description:"",downloadUrl:"https://gbank.gsj.jp/seamless/v2/api/1.3.1/#tiles",attribution:"産総研地質調査総合センター",location:"全国",minZoom:0,maxZoom:13,tileSize:256,xyzImageTile:{x:1827,y:777,z:11}},interaction:{...Z},style:{...V}},mn=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),_n={id:"gifu_cs_map",type:"raster",format:{type:"image",url:"https://forestgeo.info/opendata/21_gifu/csmap_2023/{z}/{x}/{y}.webp"},metaData:{name:"CS立体図",description:"CS立体図",attribution:"岐阜県森林研究所",downloadUrl:"https://www.geospatial.jp/ckan/dataset/rinya-gifu-maptiles",location:"岐阜県",minZoom:8,maxZoom:18,tileSize:256,bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{...Z},style:{...V}},wn=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),vn={id:"gsi_rinya",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/rinya/{z}/{x}/{y}.png"},metaData:{name:"森林（国有林）の空中写真（林野庁）",description:"",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#trinya",attribution:"国土地理院",location:"全国",minZoom:14,maxZoom:18,tileSize:256,xyzImageTile:{x:14515,y:6390,z:14}},interaction:{...Z},style:{...V}},xn=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),kn={id:"gsi_rinya_m",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/rinya_m/{z}/{x}/{y}.png"},metaData:{name:"森林（民有林）の空中写真",description:"",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#trinya",attribution:"国土地理院",location:"全国",minZoom:14,maxZoom:18,tileSize:256},interaction:{...Z},style:{...V}},Sn=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),Pn={id:"gsi_seamlessphoto",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg"},metaData:{name:"全国最新写真",description:"",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#seamlessphoto",attribution:"国土地理院",location:"全国",minZoom:1,maxZoom:18,tileSize:256},interaction:{...Z},style:{...V}},Tn=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),En={id:"gsi_std",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png"},metaData:{name:"地理院標準地図",description:"国土地理院の電子国土基本図",attribution:"国土地理院",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#std",location:"全国",minZoom:1,maxZoom:18,tileSize:256},interaction:{...Z},style:{...V}},In=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"})),Fn={id:"ecoris_sugihinoki",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/sugihinoki/{z}/{x}/{y}.png"},metaData:{name:"スギ・ヒノキ・サワラ植林",description:"第5回 自然環境保全基礎調査 植生調査結果GISデータ(環境省生物多様性センター)からスギ・ヒノキ・サワラ植林を抽出し、株式会社エコリスが着色し加工したもの",attribution:"エコリス地図タイル",downloadUrl:"https://map.ecoris.info/#contents",location:"全国",minZoom:5,maxZoom:15,tileSize:256,xyzImageTile:{x:450,y:201,z:9}},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"category",name:"植林",colors:["#FD4202"],labels:["スギ・ヒノキ・サワラ"]}}},Mn=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),On={id:"gifu_slope_map",type:"raster",format:{type:"image",url:"https://tiles.arcgis.com/tiles/jJQWqgqiNhLLjkin/arcgis/rest/services/Gifu_2021Slpoe_2022_07_25_15_54/MapServer/tile/{z}/{y}/{x}"},metaData:{name:"傾斜区分図",description:"岐阜県の傾斜区分図",downloadUrl:"https://www.forest.rd.pref.gifu.lg.jp/shiyou/sinrinwebmap.html",attribution:"岐阜県森林研究所",location:"岐阜県",minZoom:1,maxZoom:18,tileSize:256,bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"category",name:"傾斜",colors:["#FFFFFF","#A2E0CB","#268F1E","#95E537","#E7E539","#E35CC2","#CC000D","#8F086A"],labels:["0 - 10度","10.1 - 15度","15.1 - 20度","20.1 - 25度","25.1 - 30度","30.1 - 35度","35.1 - 40度","40.1度以上"]}}},An=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"})),Nn={id:"gsi_slopemap",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png"},metaData:{name:"傾斜量図",description:"",attribution:"国土地理院",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#slopemap",location:"全国",minZoom:3,maxZoom:15,tileSize:256},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"gradient",name:"傾斜",colors:["#FFFFFF","#000000"],range:[0,90],unit:"度"}}},jn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})),Un={id:"gifu_sugi_kansetugai",type:"raster",format:{type:"pmtiles",url:`${cn}/gifu_sugi_kansetugai.pmtiles`},metaData:{name:"スギ人工林冠雪害危険度",description:"岐阜県スギ人工林冠雪害危険度マップ",downloadUrl:"https://www.forest.rd.pref.gifu.lg.jp/shiyou/kansetsugaimap.html",attribution:"岐阜県森林研究所",location:"岐阜県",minZoom:6,maxZoom:10,tileSize:512,xyzImageTile:{x:901,y:403,z:10},bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"category",name:"20冬期中の危険日判定数",colors:["#FFFFFF","#FEFEA5","#FDCDFD","#FFBE31","#FC0013","#6F359C","#003796"],labels:["0日","1~2日","3~5日","6~10日","11〜15日","16~20日","21日以上"]}}},zn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"})),$n={id:"ensyurin_kikenboku_h25",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${et}/ensyurin_kikenboku_h25.fgb`},metaData:{name:"演習林危険木調査 H25",description:"",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/ensyurin_kikenboku_h25.webp`},properties:{keys:["樹種","状態"],titles:[{conditions:[],template:"{樹種} {状態}"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#ff0000"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}}},Rn=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"})),Ln={id:"ensyurin_owl",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${et}/ensyurin_owl.fgb`},metaData:{name:"OWL利用研修立木計測データ",description:"林業専攻-OWL利用研修立木計測データ",attribution:"株式会社アドイン研究所",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/owl.webp`},properties:{keys:["樹種"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"OWL利用研修立木計測データ"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"樹高m",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#e70000"}},{type:"step",key:"樹高m",name:"樹高の範囲による色分け",mapping:{range:[4,20],divisions:6,values:["#dcd69c","#e20000"]}}]},radius:{key:"胸高直径cm",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}},{type:"linear",key:"胸高直径cm",name:"胸高直径",mapping:{range:[7,42.5],values:[5,10]}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"胸高直径cm",show:!1,expressions:[{key:"胸高直径cm",name:"胸高直径cm",value:"{胸高直径cm}"}]},default:{circle:{paint:{},layout:{}}}}},Cn=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"})),Dn={id:"fac_phenology_2020",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${et}/fac_phenology_2020.fgb`},metaData:{name:"フェノロジー調査_2020",description:"森林環境教育専攻のフェノロジー調査のデータ",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/phenology_2020.webp`},properties:{keys:["種名"],titles:[{conditions:["種名"],template:"{種名}"},{conditions:[],template:"フェノロジー調査_2020のポイント"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#33ec00"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"種名",show:!1,expressions:[{key:"種名",name:"種名",value:"{種名}"}]},default:{circle:{paint:{},layout:{}},symbol:{paint:{},layout:{}},heatmap:{paint:{},layout:{}}}}},Bn=Object.freeze(Object.defineProperty({__proto__:null,default:Dn},Symbol.toStringTag,{value:"Module"})),Vn={id:"fac_sisetuannaitou",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${et}/fac_sisetuannaitou.fgb`},metaData:{name:"施設案内棟",description:"施設案内棟",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/fac_sisetuannaitou.webp`},properties:{keys:[],titles:[{conditions:[],template:"施設案内棟"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#834f00"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}}},Zn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),Gn={id:"gsi_road",type:"vector",format:{type:"mvt",geometryType:"LineString",url:"https://cyberjapandata.gsi.go.jp/xyz/optimal_bvmap-v1/{z}/{x}/{y}.pbf"},metaData:{name:"道路",description:"国土地理院の道路データ",attribution:"国土地理院",location:"全国",maxZoom:16,minZoom:4,sourceLayer:"RdCL",downloadUrl:"https://github.com/gsi-cyberjapan/optimal_bvmap"},properties:{keys:["種類"],titles:null},interaction:{clickable:!1},style:{type:"line",opacity:.5,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#dedede"}}]},width:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}}]},lineStyle:"solid",labels:{key:"vt_rdctg",show:!1,expressions:[{key:"vt_rdctg",name:"vt_rdctg",value:"{vt_rdctg}"}]},default:{symbol:{paint:{},layout:{"text-size":10,"symbol-placement":"line","symbol-spacing":100}}}}},qn=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"})),Hn={id:"fr_mesh20m_hyogo",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-hyogo.geospatial.jp/2023/rinya/tile/fr_mesh20m/{z}/{x}/{y}.pbf"},metaData:{name:"森林資源量集計メッシュ",description:"出典「兵庫県森林資源データ」",attribution:"林野庁",downloadUrl:"https://www.geospatial.jp/ckan/dataset/fr_mesh20m_hyogo",location:"兵庫県",minZoom:13,maxZoom:16,sourceLayer:"fr_mesh20m_hyogo",bounds:[134.252809,34.156129,135.468591,35.674667]},properties:{keys:[],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"兵庫県の森林資源メッシュ"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}}}}},Kn=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"})),Wn={id:"fr_mesh20m_kochi",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-kochi.geospatial.jp/2023/rinya/tile/fr_mesh20m/{z}/{x}/{y}.pbf"},metaData:{name:"森林資源量集計メッシュ",description:"出典「高知県森林資源データ」",attribution:"林野庁",downloadUrl:"https://www.geospatial.jp/ckan/dataset/fr_mesh20m_kochi",location:"高知県",minZoom:13,maxZoom:16,sourceLayer:"fr_mesh20m_kochi",bounds:[132.479888,32.702505,134.31367,33.882997]},properties:{keys:[],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"高知県の森林資源メッシュ"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}}}}},Yn=Object.freeze(Object.defineProperty({__proto__:null,default:Wn},Symbol.toStringTag,{value:"Module"})),Xn={id:"tree_species_tochigi",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-tochigi.geospatial.jp/2023/rinya/tile/tree_species/{z}/{x}/{y}.pbf"},metaData:{name:"樹種ポリゴン",description:"出典：栃木県森林資源データ",attribution:"林野庁",downloadUrl:"https://www.geospatial.jp/ckan/dataset/tree_species_tochigi",location:"栃木県",minZoom:8,maxZoom:18,sourceLayer:"tree_species_tochigi",bounds:[139.326731,36.199924,140.291983,37.155039]},properties:{keys:[],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"栃木県の樹種ポリゴン"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"解析樹種ID",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}},{type:"match",key:"解析樹種ID",name:"樹種ごとの色分け",mapping:{categories:["01","02","03","04","05","06","07","08","09","10","11","12","96","97","98","99"],values:["#00cc66","#99ff66","#cc0000","#ff9966","#ffcc99","#cc6600","#cc00cc","#ffff99","#ff9933","#cc9900","#ffff00","#8000ff","#8db3e2","#ccff99","#ff80ff","#bfbfbf"]}}]},outline:{show:!1,color:"#000000",width:2,lineStyle:"dashed"},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}}}}},Jn=Object.freeze(Object.defineProperty({__proto__:null,default:Xn},Symbol.toStringTag,{value:"Module"})),Qn={id:"ensyurin_road2",type:"vector",format:{type:"pmtiles",geometryType:"LineString",url:`${K}/ensyurin.pmtiles`},metaData:{name:"演習林歩道",description:"演習林林道",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_road2",bounds:[136.919181,35.546981,136.92684,35.555131],coverImage:`${B}/ensyurin_road.webp`},properties:{keys:[],titles:[]},interaction:{clickable:!1},style:{type:"line",opacity:.8,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#cacaca"}}]},width:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}}]},lineStyle:"solid",labels:{key:"種類",show:!1,expressions:[{key:"種類",name:"道の種類",value:"{種類}"}]},default:{symbol:{paint:{},layout:{"text-size":10,"symbol-placement":"line","symbol-spacing":100}}}}},ei=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"})),ti={id:"ensyurin_pole",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${K}/ensyurin.pmtiles`},metaData:{name:"サインポール",description:"演習林内のサインポール",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_pole",bounds:[136.919359,35.549761,136.926759,35.557836],coverImage:`${mr}/pole_3.webp`},properties:{keys:["name"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"サインポール"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#e70000"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"ポールの名前",value:"{name}"}]}}},ri=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"})),ni={id:"fac_building_point",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${K}/fac_search.pmtiles`},metaData:{name:"アカデミー施設",description:"森林文化アカデミーの施設",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"fac_building_point",bounds:[136.91764622017772,35.553369893337134,136.9198923648159,35.55575869336596],coverImage:`${mr}/fac_center.webp`},properties:{keys:["name","建物名称","構造規模"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"施設"}]},interaction:{clickable:!0},style:{type:"circle",opacity:1,markerType:"icon",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#000000"}}]},outline:{show:!0,color:"#ffffff",width:2},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},icon:{show:!0,size:.2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"建物名称",value:"{name}"}]},default:{symbol:{layout:{"text-field":["to-string",["get","name"]],"text-size":14,"text-variable-anchor":["bottom-left","bottom-right"],"text-radial-offset":2.1,"text-justify":"auto"},paint:{"text-halo-color":"#ffffff","text-halo-width":2}}}}},ii=Object.freeze(Object.defineProperty({__proto__:null,default:ni},Symbol.toStringTag,{value:"Module"})),oi={id:"fac_poi",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${K}/fac_search.pmtiles`},metaData:{name:"その他施設・林内ランドマーク",description:"その他施設・林内ランドマーク",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"fac_poi",bounds:[136.9190129344606,35.548385,136.925213,35.555474],coverImage:`${B}/fac_poi.webp`},properties:{keys:["name"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"その他施設・林内ランドマーク"}]},interaction:{clickable:!0},style:{type:"circle",opacity:1,markerType:"icon",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#c00a0a"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},icon:{show:!0,size:.2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"建物名称",value:"{name}"}]},default:{circle:{paint:{},layout:{}},symbol:{layout:{"text-field":["to-string",["get","name"]],"text-size":14,"text-variable-anchor":["bottom-left","bottom-right"],"text-radial-offset":2,"text-justify":"auto","icon-image":["get","_prop_id"],"icon-size":.1,"icon-anchor":"bottom"},paint:{"text-halo-color":"#ffffff","text-halo-width":2}}}}},si=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"})),ai={id:"fac_ziriki_point",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${K}/fac_search.pmtiles`},metaData:{name:"自力建設",description:"自力建設",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"fac_ziriki_point",bounds:[136.91669416774363,35.552165704819075,136.9232546722223,35.55613247338581],coverImage:`${B}/ziriki.webp`},properties:{keys:["name","年度"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"自力建設"}]},interaction:{clickable:!0},style:{type:"circle",opacity:1,markerType:"icon",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#a03d00"}}]},outline:{show:!0,color:"#ffffff",width:2},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},icon:{show:!0,size:.2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"建物名称",value:"{name}"}]},default:{symbol:{layout:{"text-field":["to-string",["get","name"]],"text-size":14,"text-variable-anchor":["bottom-left","bottom-right"],"text-radial-offset":2,"text-justify":"auto"},paint:{"text-halo-color":"#ffffff","text-halo-width":2}}}}},li=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"})),ci={id:"ensyurin_rinhan",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${K}/ensyurin.pmtiles`},metaData:{name:"演習林林班",description:"森林文化アカデミー演習林の林班。",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_rinhan",bounds:[136.91917,35.54692,136.926817,35.555122],coverImage:`${B}/ensyurin.webp`},properties:{keys:["小林班ID","樹種","林齢","面積","林班"],titles:[{conditions:["樹種","林齢"],template:"{樹種}林 {林齢}年生"},{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"演習林林班"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"樹種",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#00ff00"}},{type:"match",key:"樹種",name:"樹種ごとの色分け",mapping:{categories:["スギ","ヒノキ","アカマツ","スラッシュマツ","広葉樹","草地","その他岩石"],values:["#399210","#4ADDA5","#DD2B2B","#B720BF","#EBBC22","#2351E5","#D98F34"]}},{type:"match",key:"林班",name:"林班ごとの色分け",mapping:{categories:[1,2,3],values:["#ff0000","#059854","#9d00ff"]}},{type:"step",key:"林齢",name:"林齢の範囲による色分け",mapping:{range:[0,100],divisions:5,values:["#ffffff","#059854"]}},{type:"step",key:"面積",name:"面積の範囲による色分け",mapping:{range:[0,1],divisions:5,values:["#ffffff","#ff0000"]}}]},outline:{show:!0,color:"#ffffff",width:2,lineStyle:"dashed"},labels:{key:"樹種",show:!0,expressions:[{key:"小林班ID",name:"小林班IDのラベル",value:"{小林班ID}"},{key:"林齢",name:"林齢のラベル",value:"{林齢}年生"},{key:"樹種",name:"樹種のラベル",value:"{樹種}林"}]}}},ui=Object.freeze(Object.defineProperty({__proto__:null,default:ci},Symbol.toStringTag,{value:"Module"})),fi={id:"ensyurin_siken",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${K}/ensyurin.pmtiles`},metaData:{name:"演習林試験地",description:"森林文化アカデミー演習林の試験地。",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_siken",bounds:[136.920084,35.549852,136.925498,35.554401],coverImage:`${B}/ensyurin_siken.webp`},properties:{keys:["活用内容","活用期間","番号"],titles:[{conditions:["活用内容","活用期間"],template:"{活用内容} {活用期間}"},{conditions:["活用内容"],template:"{活用内容}"},{conditions:[],template:"演習林林班"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#001aff"}}]},outline:{show:!1,color:"#000000",width:2,lineStyle:"solid"},labels:{key:"活用内容",show:!0,expressions:[{key:"活用内容",name:"活用内容",value:"{活用内容}"},{key:"活用期間",name:"活用期間",value:"{活用期間}"}]}}},di=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"})),hi={id:"mino_geology",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${K}/mino_geology.pmtiles`},metaData:{name:"美濃市地質図",description:"美濃市地質図。",attribution:"産総研地質調査総合センター",location:"美濃市",minZoom:0,maxZoom:14,sourceLayer:"geo_A",bounds:[136.74706,35.503199,137.014386,35.669838]},properties:{keys:[],titles:[{conditions:["Symbol"],template:"{Symbol}"},{conditions:[],template:"美濃市の地質"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"Symbol",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#9f1c1c"}},{type:"match",key:"Symbol",name:"地質ごとの色分け",mapping:{categories:["a","ts","tl","th","A","Ha","Q","D","Kgr","Au","Al","Kz","Ktu","Ktl","Kou","Kol","Ta","Ya","Nmx","Nmm","Nbf","Ncs","Nss","Nal","Nms","Nsi","Ncl","Nch","Nto","Nls","Nbs","Fmx","Fss","Fch","Flc","Fls","Fbs","Kmx","Ksx","Kss","Kms","Ksi","Kch","Kto","Kls","Kbs","KAcgl","KAss","KAsi","KAch","KAto","KAls","KAbs","Water"],values:["#ffffff","#bad0ee","#d7e2f4","#e7eee5","#6f4d61","#a0b24f","#ea6645","#cd6380","#ec6572","#f99ea5","#6f6a79","#d1a284","#d58985","#f9a09c","#d1a284","#ffcba4","#b3a7b9","#ffcba4","#c8ae9b","#ddd0aa","#cee0df","#ffea89","#ded481","#b5c783","#b8d0f1","#cecbe5","#374a87","#f6974a","#375e87","#3a69ba","#355b46","#c8ae9b","#ded481","#f6974a","#374a87","#3a69ba","#355b46","#c8ae9b","#b0a196","#ded481","#b8d0f1","#cecbe5","#f6974a","#375e87","#3a69ba","#355b46","#b9833f","#dbd178","#cecbe5","#f6974a","#375e87","#3a69ba","#355b46","#d6ffff"]}}]},outline:{show:!0,color:"#000000",width:2,lineStyle:"solid"},labels:{key:"Symbol",show:!0,expressions:[{key:"Symbol",name:"Symbolのラベル",value:"{Symbol}"}]},default:{fill:{paint:{},layout:{}},line:{paint:{},layout:{}},circle:{paint:{},layout:{}},symbol:{paint:{},layout:{}}}}},bi=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"}));function vr(r,e,t){if(r!==null)for(var n,i,o,s,l,c,a,u=0,d=0,f,h=r.type,b=h==="FeatureCollection",y=h==="Feature",S=b?r.features.length:1,m=0;m<S;m++){a=b?r.features[m].geometry:y?r.geometry:r,f=a?a.type==="GeometryCollection":!1,l=f?a.geometries.length:1;for(var P=0;P<l;P++){var p=0,_=0;if(s=f?a.geometries[P]:a,s!==null){c=s.coordinates;var g=s.type;switch(u=0,g){case null:break;case"Point":if(e(c,d,m,p,_)===!1)return!1;d++,p++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(e(c[n],d,m,p,_)===!1)return!1;d++,g==="MultiPoint"&&p++}g==="LineString"&&p++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-u;i++){if(e(c[n][i],d,m,p,_)===!1)return!1;d++}g==="MultiLineString"&&p++,g==="Polygon"&&_++}g==="Polygon"&&p++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(_=0,i=0;i<c[n].length;i++){for(o=0;o<c[n][i].length-u;o++){if(e(c[n][i][o],d,m,p,_)===!1)return!1;d++}_++}p++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(vr(s.geometries[n],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ss(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function pi(r,e={}){if(r.bbox!=null&&e.recompute!==!0)return r.bbox;const t=[1/0,1/0,-1/0,-1/0];return vr(r,n=>{t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}var yi=pi;const Ps=(r,e)=>{var n;const t=(n=e.find(({conditions:i})=>i.every(o=>r[o]!==void 0)))==null?void 0:n.template;return t?t.replace(/\{([^}]+)\}/g,(i,o)=>r[o]!==void 0?r[o]:`{${o}}`):""},gi=r=>{const e=new Set;return r.features.forEach(t=>{t.properties&&Object.keys(t.properties).forEach(n=>{e.add(n)})}),Array.from(e)},me=4,_e=4,Se=4,G=new Int32Array(2),Rt=new Float32Array(G.buffer),Lt=new Float64Array(G.buffer),Ae=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var ut;(function(r){r[r.UTF8_BYTES=1]="UTF8_BYTES",r[r.UTF16_STRING=2]="UTF16_STRING"})(ut||(ut={}));class D{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new D(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return G[0]=this.readInt32(e),Rt[0]}readFloat64(e){return G[Ae?0:1]=this.readInt32(e),G[Ae?1:0]=this.readInt32(e+4),Lt[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){Rt[0]=t,this.writeInt32(e,G[0])}writeFloat64(e,t){Lt[0]=t,this.writeInt32(e,G[Ae?0:1]),this.writeInt32(e+4,G[Ae?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+me+_e)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<_e;t++)e+=String.fromCharCode(this.readInt8(this.position_+me+t));return e}__offset(e,t){const n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const n=this.readInt32(e);e+=me;const i=this.bytes_.subarray(e,e+n);return t===ut.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+me}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=_e)throw new Error("FlatBuffers: file identifier must be length "+_e);for(let t=0;t<_e;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+me+t))return!1;return!0}createScalarList(e,t){const n=[];for(let i=0;i<t;++i){const o=e(i);o!==null&&n.push(o)}return n}createObjList(e,t){const n=[];for(let i=0;i<t;++i){const o=e(i);o!==null&&n.push(o.unpack())}return n}}const xt=new Uint8Array(0);function mi(){return this._source.cancel()}function _i(r,e){if(!r.length)return e;if(!e.length)return r;var t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function wi(){var r=this,e=r._array.subarray(r._index);return r._source.read().then(function(t){return r._array=xt,r._index=0,t.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:_i(e,t.value)}})}function vi(r){if((r|=0)<0)throw new Error("invalid length");var e=this,t=this._array.length-this._index;if(this._index+r<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=r));var n=new Uint8Array(r);return n.set(this._array.subarray(this._index)),function i(){return e._source.read().then(function(o){return o.done?(e._array=xt,e._index=0,t>0?n.subarray(0,t):null):t+o.value.length>=r?(e._array=o.value,e._index=r-t,n.set(o.value.subarray(0,r-t),t),n):(n.set(o.value,t),t+=o.value.length,i())})}()}function xi(r){return typeof r.slice=="function"?r:new tt(typeof r.read=="function"?r:r.getReader())}function tt(r){this._source=r,this._array=xt,this._index=0}tt.prototype.read=wi;tt.prototype.slice=vi;tt.prototype.cancel=mi;var x,F=((x={})[x.Byte=0]="Byte",x[x.UByte=1]="UByte",x[x.Bool=2]="Bool",x[x.Short=3]="Short",x[x.UShort=4]="UShort",x[x.Int=5]="Int",x[x.UInt=6]="UInt",x[x.Long=7]="Long",x[x.ULong=8]="ULong",x[x.Float=9]="Float",x[x.Double=10]="Double",x[x.String=11]="String",x[x.Json=12]="Json",x[x.DateTime=13]="DateTime",x[x.Binary=14]="Binary",x);class I{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsColumn(e,t){return(t||new I).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsColumn(e,t){return e.setPosition(e.position()+Se),(t||new I).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}type(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):F.Byte}title(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}width(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}precision(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}scale(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}nullable(){let e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}unique(){let e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}primaryKey(){let e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}metadata(e){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}static startColumn(e){e.startObject(11)}static addName(e,t){e.addFieldOffset(0,t,0)}static addType(e,t){e.addFieldInt8(1,t,F.Byte)}static addTitle(e,t){e.addFieldOffset(2,t,0)}static addDescription(e,t){e.addFieldOffset(3,t,0)}static addWidth(e,t){e.addFieldInt32(4,t,-1)}static addPrecision(e,t){e.addFieldInt32(5,t,-1)}static addScale(e,t){e.addFieldInt32(6,t,-1)}static addNullable(e,t){e.addFieldInt8(7,+t,1)}static addUnique(e,t){e.addFieldInt8(8,+t,0)}static addPrimaryKey(e,t){e.addFieldInt8(9,+t,0)}static addMetadata(e,t){e.addFieldOffset(10,t,0)}static endColumn(e){let t=e.endObject();return e.requiredField(t,4),t}static createColumn(e,t,n,i,o,s,l,c,a,u,d,f){return I.startColumn(e),I.addName(e,t),I.addType(e,n),I.addTitle(e,i),I.addDescription(e,o),I.addWidth(e,s),I.addPrecision(e,l),I.addScale(e,c),I.addNullable(e,a),I.addUnique(e,u),I.addPrimaryKey(e,d),I.addMetadata(e,f),I.endColumn(e)}}class j{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsCrs(e,t){return(t||new j).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCrs(e,t){return e.setPosition(e.position()+Se),(t||new j).__init(e.readInt32(e.position())+e.position(),e)}org(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}code(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}wkt(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}codeString(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}static startCrs(e){e.startObject(6)}static addOrg(e,t){e.addFieldOffset(0,t,0)}static addCode(e,t){e.addFieldInt32(1,t,0)}static addName(e,t){e.addFieldOffset(2,t,0)}static addDescription(e,t){e.addFieldOffset(3,t,0)}static addWkt(e,t){e.addFieldOffset(4,t,0)}static addCodeString(e,t){e.addFieldOffset(5,t,0)}static endCrs(e){return e.endObject()}static createCrs(e,t,n,i,o,s,l){return j.startCrs(e),j.addOrg(e,t),j.addCode(e,n),j.addName(e,i),j.addDescription(e,o),j.addWkt(e,s),j.addCodeString(e,l),j.endCrs(e)}}var w,M=((w={})[w.Unknown=0]="Unknown",w[w.Point=1]="Point",w[w.LineString=2]="LineString",w[w.Polygon=3]="Polygon",w[w.MultiPoint=4]="MultiPoint",w[w.MultiLineString=5]="MultiLineString",w[w.MultiPolygon=6]="MultiPolygon",w[w.GeometryCollection=7]="GeometryCollection",w[w.CircularString=8]="CircularString",w[w.CompoundCurve=9]="CompoundCurve",w[w.CurvePolygon=10]="CurvePolygon",w[w.MultiCurve=11]="MultiCurve",w[w.MultiSurface=12]="MultiSurface",w[w.Curve=13]="Curve",w[w.Surface=14]="Surface",w[w.PolyhedralSurface=15]="PolyhedralSurface",w[w.TIN=16]="TIN",w[w.Triangle=17]="Triangle",w);class De{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsHeader(e,t){return(t||new De).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsHeader(e,t){return e.setPosition(e.position()+Se),(t||new De).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}envelope(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}envelopeLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}envelopeArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}geometryType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):M.Unknown}hasZ(){let e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasM(){let e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasT(){let e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasTm(){let e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}columns(e,t){let n=this.bb.__offset(this.bb_pos,18);return n?(t||new I).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}featuresCount(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}indexNodeSize(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}crs(e){let t=this.bb.__offset(this.bb_pos,24);return t?(e||new j).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}title(e){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}metadata(e){let t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}static startHeader(e){e.startObject(14)}static addName(e,t){e.addFieldOffset(0,t,0)}static addEnvelope(e,t){e.addFieldOffset(1,t,0)}static createEnvelopeVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startEnvelopeVector(e,t){e.startVector(8,t,8)}static addGeometryType(e,t){e.addFieldInt8(2,t,M.Unknown)}static addHasZ(e,t){e.addFieldInt8(3,+t,0)}static addHasM(e,t){e.addFieldInt8(4,+t,0)}static addHasT(e,t){e.addFieldInt8(5,+t,0)}static addHasTm(e,t){e.addFieldInt8(6,+t,0)}static addColumns(e,t){e.addFieldOffset(7,t,0)}static createColumnsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startColumnsVector(e,t){e.startVector(4,t,4)}static addFeaturesCount(e,t){e.addFieldInt64(8,t,BigInt("0"))}static addIndexNodeSize(e,t){e.addFieldInt16(9,t,16)}static addCrs(e,t){e.addFieldOffset(10,t,0)}static addTitle(e,t){e.addFieldOffset(11,t,0)}static addDescription(e,t){e.addFieldOffset(12,t,0)}static addMetadata(e,t){e.addFieldOffset(13,t,0)}static endHeader(e){return e.endObject()}static finishHeaderBuffer(e,t){e.finish(t)}static finishSizePrefixedHeaderBuffer(e,t){e.finish(t,void 0,!0)}}class O{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsGeometry(e,t){return(t||new O).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGeometry(e,t){return e.setPosition(e.position()+Se),(t||new O).__init(e.readInt32(e.position())+e.position(),e)}ends(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}endsLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}endsArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}xy(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}xyLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}xyArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}z(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}zLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}zArray(){let e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}m(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}mLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}mArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}t(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}tLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}tArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}tm(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}tmLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):M.Unknown}parts(e,t){let n=this.bb.__offset(this.bb_pos,18);return n?(t||new O).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}partsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGeometry(e){e.startObject(8)}static addEnds(e,t){e.addFieldOffset(0,t,0)}static createEndsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()}static startEndsVector(e,t){e.startVector(4,t,4)}static addXy(e,t){e.addFieldOffset(1,t,0)}static createXyVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startXyVector(e,t){e.startVector(8,t,8)}static addZ(e,t){e.addFieldOffset(2,t,0)}static createZVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startZVector(e,t){e.startVector(8,t,8)}static addM(e,t){e.addFieldOffset(3,t,0)}static createMVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startMVector(e,t){e.startVector(8,t,8)}static addT(e,t){e.addFieldOffset(4,t,0)}static createTVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startTVector(e,t){e.startVector(8,t,8)}static addTm(e,t){e.addFieldOffset(5,t,0)}static createTmVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()}static startTmVector(e,t){e.startVector(8,t,8)}static addType(e,t){e.addFieldInt8(6,t,M.Unknown)}static addParts(e,t){e.addFieldOffset(7,t,0)}static createPartsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startPartsVector(e,t){e.startVector(4,t,4)}static endGeometry(e){return e.endObject()}static createGeometry(e,t,n,i,o,s,l,c,a){return O.startGeometry(e),O.addEnds(e,t),O.addXy(e,n),O.addZ(e,i),O.addM(e,o),O.addT(e,s),O.addTm(e,l),O.addType(e,c),O.addParts(e,a),O.endGeometry(e)}}class U{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFeature(e,t){return(t||new U).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFeature(e,t){return e.setPosition(e.position()+Se),(t||new U).__init(e.readInt32(e.position())+e.position(),e)}geometry(e){let t=this.bb.__offset(this.bb_pos,4);return t?(e||new O).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}properties(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}propertiesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}propertiesArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}columns(e,t){let n=this.bb.__offset(this.bb_pos,8);return n?(t||new I).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFeature(e){e.startObject(3)}static addGeometry(e,t){e.addFieldOffset(0,t,0)}static addProperties(e,t){e.addFieldOffset(1,t,0)}static createPropertiesVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startPropertiesVector(e,t){e.startVector(1,t,1)}static addColumns(e,t){e.addFieldOffset(2,t,0)}static createColumnsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startColumnsVector(e,t){e.startVector(4,t,4)}static endFeature(e){return e.endObject()}static finishFeatureBuffer(e,t){e.finish(t)}static finishSizePrefixedFeatureBuffer(e,t){e.finish(t,void 0,!0)}static createFeature(e,t,n,i){return U.startFeature(e),U.addGeometry(e,t),U.addProperties(e,n),U.addColumns(e,i),U.endFeature(e)}}function kt(r){let e=De.getRootAsHeader(r),t=e.featuresCount(),n=e.indexNodeSize(),i=[];for(let l=0;l<e.columnsLength();l++){let c=e.columns(l);if(!c)throw Error("Column unexpectedly missing");if(!c.name())throw Error("Column name unexpectedly missing");i.push({name:c.name(),type:c.type(),title:c.title(),description:c.description(),width:c.width(),precision:c.precision(),scale:c.scale(),nullable:c.nullable(),unique:c.unique(),primary_key:c.primaryKey()})}let o=e.crs(),s=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null;return{geometryType:e.geometryType(),columns:i,envelope:null,featuresCount:Number(t),indexNodeSize:n,crs:s,title:e.title(),description:e.description(),metadata:e.metadata()}}const ee=new Uint8Array([102,103,98,3,102,103,98,0]),C=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ft=function(r,e){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},ft(r,e)};function ki(r,e){ft(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ue(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(u){try{a(n.next(u))}catch(d){s(d)}}function c(u){try{a(n.throw(u))}catch(d){s(d)}}function a(u){u.done?o(u.value):i(u.value).then(l,c)}a((n=n.apply(r,[])).next())})}function H(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(a){return function(u){return c([a,u])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){t.label=a[1];break}if(a[0]===6&&t.label<o[1]){t.label=o[1],o=a;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(a);break}o[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(u){a=[6,u],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function pe(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(r){return this instanceof ve?(this.v=r,this):new ve(r)}function Si(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){n[f]&&(i[f]=function(h){return new Promise(function(b,y){o.push([f,h,b,y])>1||l(f,h)})})}function l(f,h){try{c(n[f](h))}catch(b){d(o[0][3],b)}}function c(f){f.value instanceof ve?Promise.resolve(f.value.v).then(a,u):d(o[0][2],f)}function a(f){l("next",f)}function u(f){l("throw",f)}function d(f,h){f(h),o.shift(),o.length&&l(o[0][0],o[0][1])}}var xr=function(r){ki(e,r);function e(t){var n=r.call(this,t)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(n,n.constructor),n}return e}(Error);(function(){function r(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(r.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),r.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},r.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},r})();(function(){function r(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(r.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},r.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},r})();(function(){function r(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(r.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},r.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},r})();function dt(r){r!=null&&typeof r.then=="function"&&r.then(Ze,Ze)}var ot=0,Ct=1,ne=2,Be=3,ht=4,Ve=1024,Ze=function(){};function le(r){var e=r.err,t=Promise.resolve(r.execution).then(function(n){if(e!=null)throw e;return n});return r.err=void 0,r.execution=t.then(function(){},function(){}),r.pending===void 0?t:r.pending.then(function(){return t})}function Q(r,e){var t=r.state>=Be;return Promise.resolve(e).then(function(n){return!t&&r.state>=ht?le(r).then(function(i){return{value:i,done:!0}}):{value:n,done:t}})}function St(r,e){var t,n;if(!(r.state>=ne))if(r.state=ne,r.onnext(),r.onstop(),r.err==null&&(r.err=e),r.pushes.length===0&&(typeof r.buffer>"u"||r.buffer.empty))we(r);else try{for(var i=pe(r.pushes),o=i.next();!o.done;o=i.next()){var s=o.value;s.resolve()}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}function we(r){var e,t;if(!(r.state>=Be)){r.state<ne&&St(r),r.state=Be,r.buffer=void 0;try{for(var n=pe(r.nexts),i=n.next();!i.done;i=n.next()){var o=i.value,s=r.pending===void 0?le(r):r.pending.then(function(){return le(r)});o.resolve(Q(r,s))}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}r.pushes=[],r.nexts=[]}}function Dt(r){r.state>=ht||(r.state<Be&&we(r),r.state=ht)}function Pi(r,e){if(dt(e),r.pushes.length>=Ve)throw new xr("No more than "+Ve+" pending calls to push are allowed on a single repeater.");if(r.state>=ne)return Promise.resolve(void 0);var t=r.pending===void 0?Promise.resolve(e):r.pending.then(function(){return e});t=t.catch(function(c){r.state<ne&&(r.err=c),Dt(r)});var n;if(r.nexts.length){var i=r.nexts.shift();i.resolve(Q(r,t)),r.nexts.length?n=Promise.resolve(r.nexts[0].value):typeof r.buffer<"u"&&!r.buffer.full?n=Promise.resolve(void 0):n=new Promise(function(c){return r.onnext=c})}else typeof r.buffer<"u"&&!r.buffer.full?(r.buffer.add(t),n=Promise.resolve(void 0)):n=new Promise(function(c){return r.pushes.push({resolve:c,value:t})});var o=!0,s={},l=n.catch(function(c){if(o)throw c});return s.then=function(c,a){return o=!1,Promise.prototype.then.call(n,c,a)},s.catch=function(c){return o=!1,Promise.prototype.catch.call(n,c)},s.finally=n.finally.bind(n),r.pending=t.then(function(){return l}).catch(function(c){r.err=c,Dt(r)}),s}function Ti(r){var e=St.bind(null,r),t=new Promise(function(n){return r.onstop=n});return e.then=t.then.bind(t),e.catch=t.catch.bind(t),e.finally=t.finally.bind(t),e}function Ei(r){if(!(r.state>=Ct)){r.state=Ct;var e=Pi.bind(null,r),t=Ti(r);r.execution=new Promise(function(n){return n(r.executor(e,t))}),r.execution.catch(function(){return St(r)})}}var Ne=new WeakMap,Pe=function(){function r(e,t){Ne.set(this,{executor:e,buffer:t,err:void 0,state:ot,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Ze,onstop:Ze})}return r.prototype.next=function(e){dt(e);var t=Ne.get(this);if(t===void 0)throw new Error("WeakMap error");if(t.nexts.length>=Ve)throw new xr("No more than "+Ve+" pending calls to next are allowed on a single repeater.");if(t.state<=ot&&Ei(t),t.onnext(e),typeof t.buffer<"u"&&!t.buffer.empty){var n=Q(t,t.buffer.remove());if(t.pushes.length){var i=t.pushes.shift();t.buffer.add(i.value),t.onnext=i.resolve}return n}else if(t.pushes.length){var o=t.pushes.shift();return t.onnext=o.resolve,Q(t,o.value)}else if(t.state>=ne)return we(t),Q(t,le(t));return new Promise(function(s){return t.nexts.push({resolve:s,value:e})})},r.prototype.return=function(e){dt(e);var t=Ne.get(this);if(t===void 0)throw new Error("WeakMap error");return we(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),Q(t,le(t))},r.prototype.throw=function(e){var t=Ne.get(this);if(t===void 0)throw new Error("WeakMap error");return t.state<=ot||t.state>=ne||typeof t.buffer<"u"&&!t.buffer.empty?(we(t),t.err==null&&(t.err=e),Q(t,le(t))):this.next(Promise.reject(e))},r.prototype[Symbol.asyncIterator]=function(){return this},r.race=Ii,r.merge=Fi,r.zip=Mi,r.latest=Oi,r}();function rt(r,e){var t,n,i=[],o=function(a){a!=null&&typeof a[Symbol.asyncIterator]=="function"?i.push(a[Symbol.asyncIterator]()):a!=null&&typeof a[Symbol.iterator]=="function"?i.push(a[Symbol.iterator]()):i.push(function(){return Si(this,arguments,function(){return H(this,function(f){switch(f.label){case 0:return e.yieldValues?[4,ve(a)]:[3,3];case 1:return[4,f.sent()];case 2:f.sent(),f.label=3;case 3:return e.returnValues?[4,ve(a)]:[3,5];case 4:return[2,f.sent()];case 5:return[2]}})})}())};try{for(var s=pe(r),l=s.next();!l.done;l=s.next()){var c=l.value;o(c)}}catch(a){t={error:a}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i}function Ii(r){var e=this,t=rt(r,{returnValues:!0});return new Pe(function(n,i){return ue(e,void 0,void 0,function(){var o,s,l,c,a,u;return H(this,function(d){switch(d.label){case 0:if(!t.length)return i(),[2];s=!1,i.then(function(){o(),s=!0}),d.label=1;case 1:d.trys.push([1,,5,7]),c=void 0,a=0,u=function(){var f,h,b,y,S,m;return H(this,function(P){switch(P.label){case 0:f=a;try{for(h=(S=void 0,pe(t)),b=h.next();!b.done;b=h.next())y=b.value,Promise.resolve(y.next()).then(function(p){p.done?(i(),l===void 0&&(l=p)):a===f&&(a++,o(p))},function(p){return i(p)})}catch(p){S={error:p}}finally{try{b&&!b.done&&(m=h.return)&&m.call(h)}finally{if(S)throw S.error}}return[4,new Promise(function(p){return o=p})];case 1:return c=P.sent(),c===void 0?[3,3]:[4,n(c.value)];case 2:P.sent(),P.label=3;case 3:return[2]}})},d.label=2;case 2:return s?[3,4]:[5,u()];case 3:return d.sent(),[3,2];case 4:return[2,l&&l.value];case 5:return i(),[4,Promise.race(t.map(function(f){return f.return&&f.return()}))];case 6:return d.sent(),[7];case 7:return[2]}})})})}function Fi(r){var e=this,t=rt(r,{yieldValues:!0});return new Pe(function(n,i){return ue(e,void 0,void 0,function(){var o,s,l,c=this;return H(this,function(a){switch(a.label){case 0:if(!t.length)return i(),[2];o=[],s=!1,i.then(function(){var u,d;s=!0;try{for(var f=pe(o),h=f.next();!h.done;h=f.next()){var b=h.value;b()}}catch(y){u={error:y}}finally{try{h&&!h.done&&(d=f.return)&&d.call(f)}finally{if(u)throw u.error}}}),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.all(t.map(function(u,d){return ue(c,void 0,void 0,function(){var f,h;return H(this,function(b){switch(b.label){case 0:b.trys.push([0,,6,9]),b.label=1;case 1:return s?[3,5]:(Promise.resolve(u.next()).then(function(y){return o[d](y)},function(y){return i(y)}),[4,new Promise(function(y){o[d]=y})]);case 2:return f=b.sent(),f===void 0?[3,4]:f.done?(l=f,[2]):[4,n(f.value)];case 3:b.sent(),b.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return h=u.return,h?[4,u.return()]:[3,8];case 7:h=b.sent(),b.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return a.sent(),[2,l&&l.value];case 3:return i(),[7];case 4:return[2]}})})})}function Mi(r){var e=this,t=rt(r,{returnValues:!0});return new Pe(function(n,i){return ue(e,void 0,void 0,function(){var o,s,l,c;return H(this,function(a){switch(a.label){case 0:if(!t.length)return i(),[2,[]];s=!1,i.then(function(){o(),s=!0}),a.label=1;case 1:a.trys.push([1,,6,8]),a.label=2;case 2:return s?[3,5]:(Promise.all(t.map(function(u){return u.next()})).then(function(u){return o(u)},function(u){return i(u)}),[4,new Promise(function(u){return o=u})]);case 3:return l=a.sent(),l===void 0?[2]:(c=l.map(function(u){return u.value}),l.some(function(u){return u.done})?[2,c]:[4,n(c)]);case 4:return a.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(t.map(function(u){return u.return&&u.return()}))];case 7:return a.sent(),[7];case 8:return[2]}})})})}function Oi(r){var e=this,t=rt(r,{yieldValues:!0,returnValues:!0});return new Pe(function(n,i){return ue(e,void 0,void 0,function(){var o,s,l,c,a,u=this;return H(this,function(d){switch(d.label){case 0:if(!t.length)return i(),[2,[]];s=[],l=!1,i.then(function(){var f,h;o();try{for(var b=pe(s),y=b.next();!y.done;y=b.next()){var S=y.value;S()}}catch(m){f={error:m}}finally{try{y&&!y.done&&(h=b.return)&&h.call(b)}finally{if(f)throw f.error}}l=!0}),d.label=1;case 1:return d.trys.push([1,,5,7]),Promise.all(t.map(function(f){return f.next()})).then(function(f){return o(f)},function(f){return i(f)}),[4,new Promise(function(f){return o=f})];case 2:return c=d.sent(),c===void 0?[2]:(a=c.map(function(f){return f.value}),c.every(function(f){return f.done})?[2,a]:[4,n(a.slice())]);case 3:return d.sent(),[4,Promise.all(t.map(function(f,h){return ue(u,void 0,void 0,function(){var b;return H(this,function(y){switch(y.label){case 0:if(c[h].done)return[2,c[h].value];y.label=1;case 1:return l?[3,4]:(Promise.resolve(f.next()).then(function(S){return s[h](S)},function(S){return i(S)}),[4,new Promise(function(S){return s[h]=S})]);case 2:return b=y.sent(),b===void 0?[2,c[h].value]:b.done?[2,b.value]:(a[h]=b.value,[4,n(a.slice())]);case 3:return y.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,d.sent()];case 5:return i(),[4,Promise.all(t.map(function(f){return f.return&&f.return()}))];case 6:return d.sent(),[7];case 7:return[2]}})})})}const Qe=class Qe{constructor(){k(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(e){if(e<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}};k(Qe,"global",new Qe);let Ge=Qe;const Ai=40,Ni=16;function Pt(r,e){e=Math.min(Math.max(+e,2),65535);let t=r,n=t;do n+=t=Math.ceil(t/e);while(t!==1);return 40*n}function ji(r,e){if(e<2)throw Error("Node size must be at least 2");if(r===0)throw Error("Number of items must be greater than 0");let t=r,n=t,i=[t];do n+=t=Math.ceil(t/e),i.push(t);while(t!==1);let o=[];for(let l of(t=n,i))o.push(t-l),t-=l;let s=[];for(let l=0;l<i.length;l++)s.push([o[l],o[l]+i[l]]);return s}async function*Ui(r,e,t,n){class i{constructor(h,b){k(this,"_level");k(this,"nodes");this._level=b,this.nodes=h}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(h){this.nodes[1]=h}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:o,minY:s,maxX:l,maxY:c}=t,a=ji(r,e),u=a[0][0],d=[new i([0,1],a.length-1)];for(;d.length!==0;){let f=d.shift(),h=f.startNodeIdx(),b=h>=u,y=(()=>{let[,P]=a[f.level()],p=Math.min(f.endNodeIdx()+e,P);return b&&p<P?p+1:p})(),S=y-h,m=new DataView(await n(40*h,40*S));for(let P=h;P<y;P++){let p=P-h,_=40*p;if(l<m.getFloat64(_+0,!0)||c<m.getFloat64(_+8,!0)||o>m.getFloat64(_+16,!0)||s>m.getFloat64(_+24,!0))continue;let g=m.getBigUint64(_+32,!0);if(b){let Y=(()=>{if(P<r-1){let v=(p+1)*40;return m.getBigUint64(v+32,!0)-g}return null})(),Ie=P-u;yield[Number(g),Ie,Number(Y)];continue}let $=Ge.global.extraRequestThreshold()/40,T=d[d.length-1];if(T!==void 0&&T.level()===f.level()-1&&g<T.endNodeIdx()+$){T.extendEndNodeIdx(Number(g));continue}let W=(()=>{let Y=f.level()-1;return new i([Number(g),Number(g)+1],Y)})();T!==void 0&&(T.level(),W.level()),d.push(W)}}}class Tt{constructor(e,t,n,i,o){k(this,"headerClient");k(this,"header");k(this,"headerLength");k(this,"indexLength");k(this,"nocache");this.headerClient=e,this.header=t,this.headerLength=n,this.indexLength=i,this.nocache=o}static async open(e,t){let n,i=new Bt(e,t),o=2024+(()=>{let a,u=0;for(a=0;a<3;a++)u+=Ni**a*Ai;return u})();if(!new Uint8Array(await i.getRange(0,8,o,"header")).subarray(0,3).every((a,u)=>ee[u]===a))throw Error("Not a FlatGeobuf file");if((n=new DataView(await i.getRange(8,4,o,"header")).getUint32(0,!0))>10485760||n<8)throw Error("Invalid header size");let s=await i.getRange(12,n,o,"header"),l=kt(new D(new Uint8Array(s))),c=Pt(l.featuresCount,l.indexNodeSize);return new Tt(i,l,n,c,t)}async*selectBbox(e){let t=this.lengthBeforeTree(),n=this.headerClient,i=async(c,a)=>n.getRange(t+c,a,0,"index"),o=[],s=[];for await(let c of Ui(this.header.featuresCount,this.header.indexNodeSize,e,i)){let[a,u]=c,[,,d]=c;if(d||(d=4),s.length===0){s.push([a,d,u]);continue}let f=s[s.length-1];a-(f[0]+f[1])>Ge.global.extraRequestThreshold()&&(o.push(s),s=[]),s.push([a,d,u])}this.headerClient.logUsage("header+index"),s.length>0&&o.push(s);let l=o.flatMap(c=>this.readFeatureBatch(c,this.nocache));yield*Pe.merge(l)}lengthBeforeTree(){return ee.length+C+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(e){return new Bt(this.headerClient.httpClient,e)}async*readFeatureBatch(e,t){let[n]=e[0],[i,o]=e[e.length-1],s=this.buildFeatureClient(t),l=i+o-n;for(let[c,,a]of e){let u=await this.readFeature(s,c,l);yield{id:a,feature:u},l=0}s.logUsage("feature")}async readFeature(e,t,n){let i,o=t+this.lengthBeforeFeatures();i=new DataView(await e.getRange(o,4,n,"feature length")).getUint32(0,!0);let s=new Uint8Array(await e.getRange(o+4,i,n,"feature data")),l=new Uint8Array(i+C);l.set(s,C);let c=new D(l);return c.setPosition(C),U.getRootAsFeature(c)}}class Bt{constructor(e,t){k(this,"httpClient");k(this,"bytesEverUsed",0);k(this,"bytesEverFetched",0);k(this,"buffer",new ArrayBuffer(0));k(this,"head",0);if(typeof e=="string")this.httpClient=new Vt(e,t);else if(e instanceof Vt)this.httpClient=e;else throw Error("Unknown source ")}async getRange(e,t,n,i){this.bytesEverUsed+=t;let o=e-this.head,s=o+t;if(o>=0&&s<=this.buffer.byteLength)return this.buffer.slice(o,s);let l=Math.max(t,n);return this.bytesEverFetched+=l,this.buffer=await this.httpClient.getRange(e,l,i),this.head=e,this.buffer.slice(0,t)}logUsage(e){e.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}}class Vt{constructor(e,t){k(this,"url");k(this,"nocache");k(this,"requestsEverMade",0);k(this,"bytesEverRequested",0);this.url=e,this.nocache=t}async getRange(e,t,n){this.requestsEverMade+=1,this.bytesEverRequested+=t;let i={Range:`bytes=${e}-${e+t-1}`};return this.nocache&&(i["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:i})).arrayBuffer()}}function st(r,e){let t=[];for(let n=0;n<r.length;n+=2){let i=[r[n],r[n+1]];e&&i.push(e[n>>1]),t.push(i)}return t}new TextEncoder;let Zt=new TextDecoder;function zi(r,e){let t={};if(!e||e.length===0)return t;let n=r.propertiesArray();if(!n)return t;let i=new DataView(n.buffer,n.byteOffset),o=r.propertiesLength(),s=0;for(;s<o;){let l=i.getUint16(s,!0);s+=2;let c=e[l],a=c.name;switch(c.type){case F.Bool:t[a]=!!i.getUint8(s),s+=1;break;case F.Byte:t[a]=i.getInt8(s),s+=1;break;case F.UByte:t[a]=i.getUint8(s),s+=1;break;case F.Short:t[a]=i.getInt16(s,!0),s+=2;break;case F.UShort:t[a]=i.getUint16(s,!0),s+=2;break;case F.Int:t[a]=i.getInt32(s,!0),s+=4;break;case F.UInt:t[a]=i.getUint32(s,!0),s+=4;break;case F.Long:t[a]=Number(i.getBigInt64(s,!0)),s+=8;break;case F.ULong:t[a]=Number(i.getBigUint64(s,!0)),s+=8;break;case F.Float:t[a]=i.getFloat32(s,!0),s+=4;break;case F.Double:t[a]=i.getFloat64(s,!0),s+=8;break;case F.DateTime:case F.String:{let u=i.getUint32(s,!0);s+=4,t[a]=Zt.decode(n.subarray(s,s+u)),s+=u;break}case F.Json:{let u=i.getUint32(s,!0);s+=4;let d=Zt.decode(n.subarray(s,s+u));t[a]=JSON.parse(d),s+=u;break}case F.Binary:{let u=i.getUint32(s,!0);s+=4,t[a]=n.subarray(s,s+u),s+=u;break}default:throw Error(`Unknown type ${c.type}`)}}return t}function $i(r,e,t){if(!r.subarray(0,3).every((u,d)=>ee[d]===u))throw Error("Not a FlatGeobuf file");let n=new D(r),i=n.readUint32(ee.length);n.setPosition(ee.length+C);let o=kt(n),s=ee.length+C+i,{indexNodeSize:l,featuresCount:c}=o;l>0&&(s+=Pt(c,l));let a=[];for(;s<n.capacity();){let u=n.readUint32(s);n.setPosition(s+C);let d=U.getRootAsFeature(n);a.push(e(a.length,d,o)),s+=C+u}return a}async function*Ri(r,e,t){let n,i=xi(r),o=async h=>await i.slice(h),s=new Uint8Array(await o(8));if(!s.subarray(0,3).every((h,b)=>ee[b]===h))throw Error("Not a FlatGeobuf file");s=new Uint8Array(await o(4));let l=new D(s),c=l.readUint32(0);s=new Uint8Array(await o(c));let a=kt(l=new D(s)),{indexNodeSize:u,featuresCount:d}=a;if(u>0){let h=Pt(d,u);await o(h)}let f=0;for(;n=await Ci(o,a,e,f++);)yield n}async function*Li(r,e,t,n,i=!1){let o=await Tt.open(r,i);for await(let s of o.selectBbox(e))yield t(s.id,s.feature,o.header)}async function Ci(r,e,t,n){let i=new Uint8Array(await r(4,"feature length"));if(i.byteLength===0)return;let o=new D(i),s=o.readUint32(0);i=new Uint8Array(await r(s,"feature data"));let l=new Uint8Array(s+4);return l.set(i,4),(o=new D(l)).setPosition(C),t(n,U.getRootAsFeature(o),e)}const Di={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class kr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Di[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Te=6378137,se=Math.PI*Te,Bi=[-se,-se,se,se],Vi=[-180,-85,180,85],je=Te*Math.log(Math.tan(Math.PI/2));class oe extends kr{constructor(e){super({code:e,units:"m",extent:Bi,global:!0,worldExtent:Vi,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Te)}})}}const Gt=[new oe("EPSG:3857"),new oe("EPSG:102100"),new oe("EPSG:102113"),new oe("EPSG:900913"),new oe("http://www.opengis.net/def/crs/EPSG/0/3857"),new oe("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Zi(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let o=0;o<i;o+=n){e[o]=se*r[o]/180;let s=Te*Math.log(Math.tan(Math.PI*(+r[o+1]+90)/360));s>je?s=je:s<-je&&(s=-je),e[o+1]=s}return e}function Gi(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let o=0;o<i;o+=n)e[o]=180*r[o]/se,e[o+1]=360*Math.atan(Math.exp(r[o+1]/Te))/Math.PI-90;return e}const qi=6378137,qt=[-180,-90,180,90],Hi=Math.PI*qi/180;class J extends kr{constructor(e,t){super({code:e,units:"degrees",extent:qt,axisOrientation:t,global:!0,metersPerUnit:Hi,worldExtent:qt})}}const Ht=[new J("CRS:84"),new J("EPSG:4326","neu"),new J("urn:ogc:def:crs:OGC:1.3:CRS84"),new J("urn:ogc:def:crs:OGC:2:84"),new J("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new J("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new J("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let at={};function qe(r,e,t){const n=r.getCode(),i=e.getCode();n in at||(at[n]={}),at[n][i]=t}function Sr(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function Ki(r){r.getCode(),qe(r,r,Sr)}function Wi(r){r.forEach(Ki)}function Kt(r){Wi(r),r.forEach(function(e){r.forEach(function(t){e!==t&&qe(e,t,Sr)})})}function Yi(r,e,t,n){r.forEach(function(i){e.forEach(function(o){qe(i,o,t),qe(o,i,n)})})}function Xi(){Kt(Gt),Kt(Ht),Yi(Ht,Gt,Zi,Gi)}Xi();function bt(r,e){let t=e;if(t===M.Unknown&&(t=r.type()),t===M.GeometryCollection){let i=[];for(let o=0;o<r.partsLength();o++){let s=r.parts(o),l=s.type();i.push(bt(s,l))}return{type:M[t],geometries:i}}if(t===M.MultiPolygon){let i=[];for(let o=0;o<r.partsLength();o++)i.push(bt(r.parts(o),M.Polygon));return{type:M[t],coordinates:i.map(o=>o.coordinates)}}let n=function(i,o){let s=i.xyArray(),l=i.zArray();switch(o){case M.Point:{let c=Array.from(s);return l&&c.push(l[0]),c}case M.MultiPoint:case M.LineString:return st(s,l);case M.MultiLineString:case M.Polygon:return function(c,a,u){let d;if(!u||u.length===0)return[st(c,a)];let f=0,h=Array.from(u).map(b=>c.slice(f,f=b<<1));return a&&(f=0,d=Array.from(u).map(b=>a.slice(f,f=b))),h.map((b,y)=>st(b,d?d[y]:void 0))}(s,l,i.endsArray())}}(r,t);return{type:M[t],coordinates:n}}function Et(r,e,t){let n=t.columns;return{type:"Feature",id:r,geometry:bt(e.geometry(),t.geometryType),properties:zi(e,n)}}function Ji(r,e){return{type:"FeatureCollection",features:$i(r,Et)}}function Qi(r,e){return Ri(r,Et)}function eo(r,e,t,n=!1){return Li(r,e,Et,t,n)}function to(r,e,t,n=!1){return r instanceof Uint8Array?Ji(r):r instanceof ReadableStream?Qi(r):eo(r,e,t,n)}const It=["label","point","line","polygon","raster"],Wt=E("idle"),ro=()=>{const r={label:[],point:["fac_ziriki_point","fac_building_point","fac_poi"],line:["ensyurin_road2","gsi_road"],polygon:["ensyurin_rinhan"],raster:["gsi_rinya_m","gsi_seamlessphoto"]},{subscribe:e,update:t,set:n}=E({...r});return{subscribe:e,add:(i,o)=>t(s=>(s[o].includes(i)||(s[o]=[i,...s[o]]),{...s})),remove:i=>t(o=>{for(const s of It)o[s]=o[s].filter(l=>l!==i);return fe.has(i)&&fe.remove(i),{...o}}),reorderWithinTypeById:(i,o,s)=>t(l=>{const c=[...l[i]],a=c.indexOf(o),u=c.indexOf(s);if(a===-1||u===-1||a===u)return Wt.set("invalid"),{...l};const d=c.splice(a,1)[0];return c.splice(u,0,d),l[i]=c,Wt.set("success"),{...l}}),reset:()=>n({...r})}},Pr=ro(),no=dr(Pr,r=>It.flatMap(e=>r[e])),Ts=dr(Pr,r=>{const e={};let t=0;for(const n of It){const i=r[n];i.length>0&&(e[t]=n,t+=i.length)}return e}),Es=E(!0),Is=r=>{if(r.type==="raster")return"raster";if(r.type==="vector"){if(r.format.geometryType==="Label")return"label";if(r.format.geometryType==="Point")return"point";if(r.format.geometryType==="LineString")return"line";if(r.format.geometryType==="Polygon")return"polygon"}else throw new Error(`Unknown layer type: ${r.id}`)},Fs=async r=>{try{return(await fetch(r)).json()}catch(e){throw console.error(e),new Error("Failed to fetch GeoJSON")}},Ms=async(r,e)=>{try{const t=await fetch(r),n=to(t.body),i={type:"FeatureCollection",features:[]};for await(const o of n)i.features.push(o);return i}catch(t){throw console.error(t),new Error("Failed to fetch GeoJSON")}},Os=(r,e)=>{const{properties:t,id:n,layer:i}=r;return{point:e,properties:t,featureId:n,layerId:i.id}};class fe{static set(e,t){this.cache.set(e,t)}static get(e){return this.cache.get(e)}static remove(e){this.cache.delete(e)}static clear(){this.cache.clear()}static has(e){return this.cache.has(e)}static keys(){return this.cache.keys()}}k(fe,"cache",new Map);no.subscribe(r=>{for(const e of fe.keys())r.includes(e)||fe.remove(e)});const As=async r=>{try{const e=await r.text(),t=JSON.parse(e);if(t.type!=="FeatureCollection"||!Array.isArray(t.features))throw new Error("Invalid GeoJSON structure");return t}catch(e){throw console.error("GeoJSON parsing error:",e),new Error("Failed to parse GeoJSON file")}};function Re(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function io(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function Tr(r){let e,t,n;r.length!==2?(e=Re,t=(l,c)=>Re(r(l),c),n=(l,c)=>r(l)-c):(e=r===Re||r===io?r:oo,t=r,n=r);function i(l,c,a=0,u=l.length){if(a<u){if(e(c,c)!==0)return u;do{const d=a+u>>>1;t(l[d],c)<0?a=d+1:u=d}while(a<u)}return a}function o(l,c,a=0,u=l.length){if(a<u){if(e(c,c)!==0)return u;do{const d=a+u>>>1;t(l[d],c)<=0?a=d+1:u=d}while(a<u)}return a}function s(l,c,a=0,u=l.length){const d=i(l,c,a,u-1);return d>a&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:i,center:s,right:o}}function oo(){return 0}function so(r){return r===null?NaN:+r}const ao=Tr(Re),lo=ao.right;Tr(so).center;const co=Math.sqrt(50),uo=Math.sqrt(10),fo=Math.sqrt(2);function He(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),s=o>=co?10:o>=uo?5:o>=fo?2:1;let l,c,a;return i<0?(a=Math.pow(10,-i)/s,l=Math.round(r*a),c=Math.round(e*a),l/a<r&&++l,c/a>e&&--c,a=-a):(a=Math.pow(10,i)*s,l=Math.round(r/a),c=Math.round(e/a),l*a<r&&++l,c*a>e&&--c),c<l&&.5<=t&&t<2?He(r,e,t*2):[l,c,a]}function ho(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,o,s]=n?He(e,r,t):He(r,e,t);if(!(o>=i))return[];const l=o-i+1,c=new Array(l);if(n)if(s<0)for(let a=0;a<l;++a)c[a]=(o-a)/-s;else for(let a=0;a<l;++a)c[a]=(o-a)*s;else if(s<0)for(let a=0;a<l;++a)c[a]=(i+a)/-s;else for(let a=0;a<l;++a)c[a]=(i+a)*s;return c}function pt(r,e,t){return e=+e,r=+r,t=+t,He(r,e,t)[2]}function bo(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?pt(e,r,t):pt(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function po(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function Ft(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function Er(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Ee(){}var xe=.7,Ke=1/xe,ce="\\s*([+-]?\\d+)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",R="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yo=/^#([0-9a-f]{3,8})$/,go=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),mo=new RegExp(`^rgb\\(${R},${R},${R}\\)$`),_o=new RegExp(`^rgba\\(${ce},${ce},${ce},${ke}\\)$`),wo=new RegExp(`^rgba\\(${R},${R},${R},${ke}\\)$`),vo=new RegExp(`^hsl\\(${ke},${R},${R}\\)$`),xo=new RegExp(`^hsla\\(${ke},${R},${R},${ke}\\)$`),Yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ft(Ee,de,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Xt,formatHex:Xt,formatHex8:ko,formatHsl:So,formatRgb:Jt,toString:Jt});function Xt(){return this.rgb().formatHex()}function ko(){return this.rgb().formatHex8()}function So(){return Ir(this).formatHsl()}function Jt(){return this.rgb().formatRgb()}function de(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=yo.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?Qt(e):t===3?new A(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ue(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ue(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=go.exec(r))?new A(e[1],e[2],e[3],1):(e=mo.exec(r))?new A(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_o.exec(r))?Ue(e[1],e[2],e[3],e[4]):(e=wo.exec(r))?Ue(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vo.exec(r))?rr(e[1],e[2]/100,e[3]/100,1):(e=xo.exec(r))?rr(e[1],e[2]/100,e[3]/100,e[4]):Yt.hasOwnProperty(r)?Qt(Yt[r]):r==="transparent"?new A(NaN,NaN,NaN,0):null}function Qt(r){return new A(r>>16&255,r>>8&255,r&255,1)}function Ue(r,e,t,n){return n<=0&&(r=e=t=NaN),new A(r,e,t,n)}function Po(r){return r instanceof Ee||(r=de(r)),r?(r=r.rgb(),new A(r.r,r.g,r.b,r.opacity)):new A}function yt(r,e,t,n){return arguments.length===1?Po(r):new A(r,e,t,n??1)}function A(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}Ft(A,yt,Er(Ee,{brighter(r){return r=r==null?Ke:Math.pow(Ke,r),new A(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?xe:Math.pow(xe,r),new A(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new A(re(this.r),re(this.g),re(this.b),We(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:er,formatHex:er,formatHex8:To,formatRgb:tr,toString:tr}));function er(){return`#${te(this.r)}${te(this.g)}${te(this.b)}`}function To(){return`#${te(this.r)}${te(this.g)}${te(this.b)}${te((isNaN(this.opacity)?1:this.opacity)*255)}`}function tr(){const r=We(this.opacity);return`${r===1?"rgb(":"rgba("}${re(this.r)}, ${re(this.g)}, ${re(this.b)}${r===1?")":`, ${r})`}`}function We(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function re(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function te(r){return r=re(r),(r<16?"0":"")+r.toString(16)}function rr(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new z(r,e,t,n)}function Ir(r){if(r instanceof z)return new z(r.h,r.s,r.l,r.opacity);if(r instanceof Ee||(r=de(r)),!r)return new z;if(r instanceof z)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),o=Math.max(e,t,n),s=NaN,l=o-i,c=(o+i)/2;return l?(e===o?s=(t-n)/l+(t<n)*6:t===o?s=(n-e)/l+2:s=(e-t)/l+4,l/=c<.5?o+i:2-o-i,s*=60):l=c>0&&c<1?0:s,new z(s,l,c,r.opacity)}function Eo(r,e,t,n){return arguments.length===1?Ir(r):new z(r,e,t,n??1)}function z(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}Ft(z,Eo,Er(Ee,{brighter(r){return r=r==null?Ke:Math.pow(Ke,r),new z(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?xe:Math.pow(xe,r),new z(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new A(lt(r>=240?r-240:r+120,i,n),lt(r,i,n),lt(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new z(nr(this.h),ze(this.s),ze(this.l),We(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=We(this.opacity);return`${r===1?"hsl(":"hsla("}${nr(this.h)}, ${ze(this.s)*100}%, ${ze(this.l)*100}%${r===1?")":`, ${r})`}`}}));function nr(r){return r=(r||0)%360,r<0?r+360:r}function ze(r){return Math.max(0,Math.min(1,r||0))}function lt(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const Mt=r=>()=>r;function Io(r,e){return function(t){return r+t*e}}function Fo(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function Mo(r){return(r=+r)==1?Fr:function(e,t){return t-e?Fo(e,t,r):Mt(isNaN(e)?t:e)}}function Fr(r,e){var t=e-r;return t?Io(r,t):Mt(isNaN(r)?e:r)}const gt=function r(e){var t=Mo(e);function n(i,o){var s=t((i=yt(i)).r,(o=yt(o)).r),l=t(i.g,o.g),c=t(i.b,o.b),a=Fr(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=l(u),i.b=c(u),i.opacity=a(u),i+""}}return n.gamma=r,n}(1);function Oo(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(o){for(i=0;i<t;++i)n[i]=r[i]*(1-o)+e[i]*o;return n}}function Ao(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function No(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),o=new Array(t),s;for(s=0;s<n;++s)i[s]=Ot(r[s],e[s]);for(;s<t;++s)o[s]=e[s];return function(l){for(s=0;s<n;++s)o[s]=i[s](l);return o}}function jo(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function Ye(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function Uo(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=Ot(r[i],e[i]):n[i]=e[i];return function(o){for(i in t)n[i]=t[i](o);return n}}var mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ct=new RegExp(mt.source,"g");function zo(r){return function(){return r}}function $o(r){return function(e){return r(e)+""}}function Ro(r,e){var t=mt.lastIndex=ct.lastIndex=0,n,i,o,s=-1,l=[],c=[];for(r=r+"",e=e+"";(n=mt.exec(r))&&(i=ct.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),l[s]?l[s]+=o:l[++s]=o),(n=n[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:Ye(n,i)})),t=ct.lastIndex;return t<e.length&&(o=e.slice(t),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?$o(c[0].x):zo(e):(e=c.length,function(a){for(var u=0,d;u<e;++u)l[(d=c[u]).i]=d.x(a);return l.join("")})}function Ot(r,e){var t=typeof e,n;return e==null||t==="boolean"?Mt(e):(t==="number"?Ye:t==="string"?(n=de(e))?(e=n,gt):Ro:e instanceof de?gt:e instanceof Date?jo:Ao(e)?Oo:Array.isArray(e)?No:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Uo:Ye)(r,e)}function Lo(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function Co(r){return function(){return r}}function Do(r){return+r}var ir=[0,1];function ae(r){return r}function _t(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:Co(isNaN(e)?NaN:.5)}function Bo(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function Vo(r,e,t){var n=r[0],i=r[1],o=e[0],s=e[1];return i<n?(n=_t(i,n),o=t(s,o)):(n=_t(n,i),o=t(o,s)),function(l){return o(n(l))}}function Zo(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),o=new Array(n),s=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=_t(r[s],r[s+1]),o[s]=t(e[s],e[s+1]);return function(l){var c=lo(r,l,1,n)-1;return o[c](i[c](l))}}function Go(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function qo(){var r=ir,e=ir,t=Ot,n,i,o,s=ae,l,c,a;function u(){var f=Math.min(r.length,e.length);return s!==ae&&(s=Bo(r[0],r[f-1])),l=f>2?Zo:Vo,c=a=null,d}function d(f){return f==null||isNaN(f=+f)?o:(c||(c=l(r.map(n),e,t)))(n(s(f)))}return d.invert=function(f){return s(i((a||(a=l(e,r.map(n),Ye)))(f)))},d.domain=function(f){return arguments.length?(r=Array.from(f,Do),u()):r.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),t=Lo,u()},d.clamp=function(f){return arguments.length?(s=f?!0:ae,u()):s!==ae},d.interpolate=function(f){return arguments.length?(t=f,u()):t},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return n=f,i=h,u()}}function Ho(){return qo()(ae,ae)}function Ko(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Xe(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function he(r){return r=Xe(Math.abs(r)),r?r[1]:NaN}function Wo(r,e){return function(t,n){for(var i=t.length,o=[],s=0,l=r[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),o.push(t.substring(i-=l,i+l)),!((c+=l+1)>n));)l=r[s=(s+1)%r.length];return o.reverse().join(e)}}function Yo(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var Xo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Je(r){if(!(e=Xo.exec(r)))throw new Error("invalid format: "+r);var e;return new At({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Je.prototype=At.prototype;function At(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}At.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jo(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var Mr;function Qo(r,e){var t=Xe(r,e);if(!t)return r+"";var n=t[0],i=t[1],o=i-(Mr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Xe(r,Math.max(0,e+o-1))[0]}function or(r,e){var t=Xe(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const sr={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:Ko,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>or(r*100,e),r:or,s:Qo,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function ar(r){return r}var lr=Array.prototype.map,cr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function es(r){var e=r.grouping===void 0||r.thousands===void 0?ar:Wo(lr.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",o=r.numerals===void 0?ar:Yo(lr.call(r.numerals,String)),s=r.percent===void 0?"%":r.percent+"",l=r.minus===void 0?"−":r.minus+"",c=r.nan===void 0?"NaN":r.nan+"";function a(d){d=Je(d);var f=d.fill,h=d.align,b=d.sign,y=d.symbol,S=d.zero,m=d.width,P=d.comma,p=d.precision,_=d.trim,g=d.type;g==="n"?(P=!0,g="g"):sr[g]||(p===void 0&&(p=12),_=!0,g="g"),(S||f==="0"&&h==="=")&&(S=!0,f="0",h="=");var $=y==="$"?t:y==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",T=y==="$"?n:/[%p]/.test(g)?s:"",W=sr[g],Y=/[defgprs%]/.test(g);p=p===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function Ie(v){var X=$,N=T,ie,Nt,Fe;if(g==="c")N=W(v)+N,v="";else{v=+v;var Me=v<0||1/v<0;if(v=isNaN(v)?c:W(Math.abs(v),p),_&&(v=Jo(v)),Me&&+v==0&&b!=="+"&&(Me=!1),X=(Me?b==="("?b:l:b==="-"||b==="("?"":b)+X,N=(g==="s"?cr[8+Mr/3]:"")+N+(Me&&b==="("?")":""),Y){for(ie=-1,Nt=v.length;++ie<Nt;)if(Fe=v.charCodeAt(ie),48>Fe||Fe>57){N=(Fe===46?i+v.slice(ie+1):v.slice(ie))+N,v=v.slice(0,ie);break}}}P&&!S&&(v=e(v,1/0));var Oe=X.length+v.length+N.length,L=Oe<m?new Array(m-Oe+1).join(f):"";switch(P&&S&&(v=e(L+v,L.length?m-N.length:1/0),L=""),h){case"<":v=X+v+N+L;break;case"=":v=X+L+v+N;break;case"^":v=L.slice(0,Oe=L.length>>1)+X+v+N+L.slice(Oe);break;default:v=L+X+v+N;break}return o(v)}return Ie.toString=function(){return d+""},Ie}function u(d,f){var h=a((d=Je(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor(he(f)/3)))*3,y=Math.pow(10,-b),S=cr[8+b/3];return function(m){return h(y*m)+S}}return{format:a,formatPrefix:u}}var $e,Or,Ar;ts({thousands:",",grouping:[3],currency:["$",""]});function ts(r){return $e=es(r),Or=$e.format,Ar=$e.formatPrefix,$e}function rs(r){return Math.max(0,-he(Math.abs(r)))}function ns(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(he(e)/3)))*3-he(Math.abs(r)))}function is(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,he(e)-he(r))+1}function os(r,e,t,n){var i=bo(r,e,t),o;switch(n=Je(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(o=ns(i,s))&&(n.precision=o),Ar(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=is(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=rs(i))&&(n.precision=o-(n.type==="%")*2);break}}return Or(n)}function ss(r){var e=r.domain;return r.ticks=function(t){var n=e();return ho(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return os(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,o=n.length-1,s=n[i],l=n[o],c,a,u=10;for(l<s&&(a=s,s=l,l=a,a=i,i=o,o=a);u-- >0;){if(a=pt(s,l,t),a===c)return n[i]=s,n[o]=l,e(n);if(a>0)s=Math.floor(s/a)*a,l=Math.ceil(l/a)*a;else if(a<0)s=Math.ceil(s*a)/a,l=Math.floor(l*a)/a;else break;c=a}return r},r}function wt(){var r=Ho();return r.copy=function(){return Go(r,wt())},po.apply(r,arguments),ss(r)}const Ns=r=>{const{range:e,divisions:t}=r;if(t<=0)throw console.warn("divisions は 0 より大きくなければなりません。"),new Error("divisions must be greater than 0");const n=wt().domain(e).nice().ticks(t),i=r.values[0],o=r.values[1],s=wt().domain([e[0],e[1]]).interpolate(gt).range([i,o]),l=n.map(c=>{const a=s(c);return de(a).formatHex()});return{categories:n,values:l}},ur=["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#8B4513"],Nr=()=>{const r=Math.floor(Math.random()*ur.length);return ur[r]},as=r=>{try{r.forEach(e=>{e.style.visible=!0})}catch(e){console.error(e),console.warn("初期化処理に失敗しました。")}return r},ls=Object.assign({"/src/routes/data/entries/raster/imageTile/basemap/ecoris_vege_5.ts":bn,"/src/routes/data/entries/raster/imageTile/basemap/ecoris_vege_6.ts":yn,"/src/routes/data/entries/raster/imageTile/basemap/gbank_seamless.ts":mn,"/src/routes/data/entries/raster/imageTile/basemap/gifu_cs_map.ts":wn,"/src/routes/data/entries/raster/imageTile/basemap/gsi_rinya.ts":xn,"/src/routes/data/entries/raster/imageTile/basemap/gsi_rinya_m.ts":Sn,"/src/routes/data/entries/raster/imageTile/basemap/gsi_seamlessphoto.ts":Tn,"/src/routes/data/entries/raster/imageTile/basemap/gsi_std.ts":In,"/src/routes/data/entries/raster/imageTile/categorical/ecoris_sugihinoki.ts":Mn,"/src/routes/data/entries/raster/imageTile/categorical/gifu_slope_map.ts":An,"/src/routes/data/entries/raster/imageTile/categorical/gsi_slopemap.ts":jn,"/src/routes/data/entries/raster/pmtiles/categorical/gifu_sugi_kansetugai.ts":zn,"/src/routes/data/entries/vector/fgb/point/ensyurin_kikenboku_h25.ts":Rn,"/src/routes/data/entries/vector/fgb/point/ensyurin_owl.ts":Cn,"/src/routes/data/entries/vector/fgb/point/fac_phenology_2020.ts":Bn,"/src/routes/data/entries/vector/fgb/point/fac_sisetuannaitou.ts":Zn,"/src/routes/data/entries/vector/mvt/lineString/gsi_road.ts":qn,"/src/routes/data/entries/vector/mvt/polygon/fr_mesh20m_hyogo.ts":Kn,"/src/routes/data/entries/vector/mvt/polygon/fr_mesh20m_kochi.ts":Yn,"/src/routes/data/entries/vector/mvt/polygon/tree_species_tochigi.ts":Jn,"/src/routes/data/entries/vector/pmtiles/lineString/ensyurin_road2.ts":ei,"/src/routes/data/entries/vector/pmtiles/point/ensyurin_pole.ts":ri,"/src/routes/data/entries/vector/pmtiles/point/fac_building_point.ts":ii,"/src/routes/data/entries/vector/pmtiles/point/fac_poi.ts":si,"/src/routes/data/entries/vector/pmtiles/point/fac_ziriki_point.ts":li,"/src/routes/data/entries/vector/pmtiles/polygon/ensyurin_rinhan.ts":ui,"/src/routes/data/entries/vector/pmtiles/polygon/ensyurin_siken.ts":di,"/src/routes/data/entries/vector/pmtiles/polygon/mino_geology.ts":bi}),fr=Object.values(ls).map(r=>r.default).sort((r,e)=>r.metaData.name.localeCompare(e.metaData.name,"ja")),js=(()=>{const e=fr.map(t=>t.id).filter((t,n,i)=>i.indexOf(t)!==n);return e.length>0&&console.warn("idが重複してます。:",e),as(fr)})(),Us=(r,e,t,n=Nr())=>{const i=yi(r),o={name:t,description:"ユーザーがアップロードしたカスタムデータ",attribution:"カスタムデータ",location:"不明",maxZoom:22,bounds:i||void 0};let s;if(e==="Point")s=Ce;else if(e==="LineString")s=_r;else if(e==="Polygon")s=wr;else if(e==="Label"){s=Ce;return}else{console.error("不明なジオメトリタイプです。");return}if(!s){console.error("スタイルが見つかりませんでした。");return}s.colors={key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:n}}]};const l=gi(r);s.labels=dn(l);const c="geojson_"+crypto.randomUUID();return fe.set(c,r),{id:c,type:"vector",format:{type:"geojson",geometryType:e,url:""},metaData:o,interaction:{clickable:!0},properties:{keys:l,titles:[{conditions:[],template:"カスタムデータ"}]},style:s}},zs=(r,e,t,n,i=Nr())=>{const o={name:r,sourceLayer:t,description:"ユーザーがアップロードしたカスタムデータ",attribution:"カスタムデータ",location:"不明",minZoom:0,maxZoom:22};let s;if(n==="Point")s=Ce;else if(n==="LineString")s=_r;else if(n==="Polygon")s=wr;else if(n==="Label"){s=Ce;return}else{console.error("不明なジオメトリタイプです。");return}if(!s){console.error("スタイルが見つかりませんでした。");return}return s.colors={key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:i}}]},{id:"vectorTile_"+crypto.randomUUID(),type:"vector",format:{type:"mvt",geometryType:n,url:e},metaData:o,interaction:{clickable:!0},properties:{keys:[],titles:[{conditions:[],template:"カスタムデータ"}]},style:s}},$s=(r,e)=>({id:"raster_"+crypto.randomUUID(),type:"raster",format:{type:"image",url:e},metaData:{name:r,description:"ユーザーがアップロードしたカスタムデータ",attribution:"カスタムデータ",location:"不明",maxZoom:22,minZoom:0,tileSize:256},interaction:{...Z},style:{...V}}),Rs=E([]),Ls=E([]),Cs=E([]),Ds=E(!1),Bs=E("view"),Vs=E(!1),Zs=E(!1),Gs=E(!1),qs=E(!1),Hs=E(null),Ks=E(!1),Ws=E(!1),Ys=E(!1),Xs=E(!1),Js=E(!1),Qs=E(""),ea=r=>{const e={timestamp:Date.now()};localStorage.setItem(r,JSON.stringify(e))},cs=r=>{const e=localStorage.getItem(r);if(!e)return!0;const{timestamp:t}=JSON.parse(e);return Date.now()-t>=24*60*60*1e3},ta=r=>!!cs(r),ra=()=>window.innerWidth>fn,na=(r,e)=>{let t;if(e==="color"?t="bxs:color-fill":e==="number"?t="lsicon:number-filled":t="bxs:color-fill",!r)return t;switch(r){case"match":return"material-symbols:category-rounded";case"step":return"subway:step-1";case"linear":return"mdi:graph-bell-curve-cumulative";default:return t}};export{K as $,Qs as A,Wt as B,_s as C,Ds as D,qs as E,mr as F,fe as G,Es as H,xs as I,Ts as J,na as K,Js as L,vs as M,Os as N,Rs as O,ws as P,to as Q,xi as R,gs as S,As as T,Us as U,ks as V,Ls as W,Ms as X,Fs as Y,ms as Z,be as _,bs as a,Ws as a0,$s as a1,zs as a2,Xs as b,ta as c,ys as d,sn as e,Ss as f,on as g,Pr as h,ra as i,Is as j,js as k,Ks as l,Ys as m,ea as n,no as o,Vs as p,Ps as q,ps as r,Le as s,yi as t,Cs as u,Zs as v,Bs as w,Gs as x,Hs as y,Ns as z};
