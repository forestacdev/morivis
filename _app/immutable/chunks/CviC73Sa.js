var z5=Object.defineProperty;var H5=(n,e,i)=>e in n?z5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i;var Or=(n,e,i)=>H5(n,typeof e!="symbol"?e+"":e,i);import{d as j5,E as V5,e as G5,D as K5,aD as q5,h as Z5,g as $5,aV as W5,J as js,a9 as yi}from"./BSdiOwP2.js";import{M as X5,k as J5,l as _u,L as Y5,E as D0,C as bu,m as Pp,F as eB,n as Ih,o as a_,p as jg,q as tB,g as rB}from"./BIr1kwGH.js";import{s as nB,g as iB}from"./D6QcqXzb.js";import{_ as Nm}from"./C1FmrZbK.js";function QM(n,e,...i){var o=n,c=K5,d;j5(()=>{c!==(c=e())&&(d&&(q5(d),d=null),d=G5(()=>c(o,...i)))},V5),Z5&&(o=$5)}var aB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var w2={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
 */(function(n,e){(function(i,o){n.exports=o()})(aB,function(){var i={},o={};function c(f,s,v){if(o[f]=v,f==="index"){var C="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",P={};return o.shared(P),o.index(i,P),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}c("shared",["exports"],function(f){function s(l,r,A,u){return new(A||(A=Promise))(function(g,_){function b(k){try{S(u.next(k))}catch(N){_(N)}}function B(k){try{S(u.throw(k))}catch(N){_(N)}}function S(k){var N;k.done?g(k.value):(N=k.value,N instanceof A?N:new A(function(H){H(N)})).then(b,B)}S((u=u.apply(l,r||[])).next())})}function v(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var C,P;function M(){if(P)return C;function l(r,A){this.x=r,this.y=A}return P=1,C=l,l.prototype={clone:function(){return new l(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,A){return this.clone()._rotateAround(r,A)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var A=r.x-this.x,u=r.y-this.y;return A*A+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,A){return Math.atan2(this.x*A-this.y*r,this.x*r+this.y*A)},_matMult:function(r){var A=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=A,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var A=Math.cos(r),u=Math.sin(r),g=u*this.x+A*this.y;return this.x=A*this.x-u*this.y,this.y=g,this},_rotateAround:function(r,A){var u=Math.cos(r),g=Math.sin(r),_=A.y+g*(this.x-A.x)+u*(this.y-A.y);return this.x=A.x+u*(this.x-A.x)-g*(this.y-A.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(r){return r instanceof l?r:Array.isArray(r)?new l(r[0],r[1]):r},C}typeof SuppressedError=="function"&&SuppressedError;var Q,E,z=v(M()),V=function(){if(E)return Q;function l(r,A,u,g){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(g-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=A,this.p2x=u,this.p2y=g}return E=1,Q=l,l.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,A){if(A===void 0&&(A=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,g=0;g<8;g++){var _=this.sampleCurveX(u)-r;if(Math.abs(_)<A)return u;var b=this.sampleCurveDerivativeX(u);if(Math.abs(b)<1e-6)break;u-=_/b}var B=0,S=1;for(u=r,g=0;g<20&&(_=this.sampleCurveX(u),!(Math.abs(_-r)<A));g++)r>_?B=u:S=u,u=.5*(S-B)+B;return u},solve:function(r,A){return this.sampleCurveY(this.solveCurveX(r,A))}},Q}(),ee=v(V);let Z,ne;function Be(){return Z==null&&(Z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Z}function ze(){if(ne==null&&(ne=!1,Be())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let u=0;u<5*5;u++){const g=4*u;r.fillStyle=`rgb(${g},${g+1},${g+2})`,r.fillRect(u%5,Math.floor(u/5),1,1)}const A=r.getImageData(0,0,5,5).data;for(let u=0;u<5*5*4;u++)if(u%4!=3&&A[u]!==u){ne=!0;break}}}return ne||!1}var Ne=1e-6,Oe=typeof Float32Array<"u"?Float32Array:Array;function ve(){var l=new Oe(9);return Oe!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function me(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Qe(){var l=new Oe(3);return Oe!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function tt(l){return Math.hypot(l[0],l[1],l[2])}function se(l,r,A){var u=new Oe(3);return u[0]=l,u[1]=r,u[2]=A,u}Math.hypot||(Math.hypot=function(){for(var l=0,r=arguments.length;r--;)l+=arguments[r]*arguments[r];return Math.sqrt(l)});var ue,Fe=tt;function Se(l,r,A){var u=r[0],g=r[1],_=r[2],b=r[3];return l[0]=A[0]*u+A[4]*g+A[8]*_+A[12]*b,l[1]=A[1]*u+A[5]*g+A[9]*_+A[13]*b,l[2]=A[2]*u+A[6]*g+A[10]*_+A[14]*b,l[3]=A[3]*u+A[7]*g+A[11]*_+A[15]*b,l}function yt(){var l=new Oe(4);return Oe!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function lt(){var l=new Oe(2);return Oe!=Float32Array&&(l[0]=0,l[1]=0),l}function mt(l,r){var A=new Oe(2);return A[0]=l,A[1]=r,A}Qe(),ue=new Oe(4),Oe!=Float32Array&&(ue[0]=0,ue[1]=0,ue[2]=0,ue[3]=0),Qe(),se(1,0,0),se(0,1,0),yt(),yt(),ve(),lt();const Ye=8192;function gt(l,r,A){return r*(Ye/(l.tileSize*Math.pow(2,A-l.tileID.overscaledZ)))}function Ct(l,r){return(l%r+r)%r}function nr(l,r,A){return l*(1-A)+r*A}function Ae(l){if(l<=0)return 0;if(l>=1)return 1;const r=l*l,A=r*l;return 4*(l<.5?A:3*(l-r)+A-.75)}function Ie(l,r,A,u){const g=new ee(l,r,A,u);return _=>g.solve(_)}const Me=Ie(.25,.1,.25,1);function je(l,r,A){return Math.min(A,Math.max(r,l))}function nt(l,r,A){const u=A-r,g=((l-r)%u+u)%u+r;return g===r?A:g}function ut(l,...r){for(const A of r)for(const u in A)l[u]=A[u];return l}let xt=1;function Bt(l,r,A){const u={};for(const g in l)u[g]=r.call(this,l[g],g,l);return u}function tr(l,r,A){const u={};for(const g in l)r.call(this,l[g],g,l)&&(u[g]=l[g]);return u}function ot(l){return Array.isArray(l)?l.map(ot):typeof l=="object"&&l?Bt(l,ot):l}const Ut={};function Ot(l){Ut[l]||(typeof console<"u"&&console.warn(l),Ut[l]=!0)}function Xt(l,r,A){return(A.y-l.y)*(r.x-l.x)>(r.y-l.y)*(A.x-l.x)}function Ft(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let Ue=null;function sr(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const fr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function jt(l,r,A,u,g){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(l,{timestamp:0});try{const b=_==null?void 0:_.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const B=b.startsWith("BGR"),S=new Uint8ClampedArray(u*g*4);if(yield _.copyTo(S,function(k,N,H,q,W){const J=4*Math.max(1,0),oe=(Math.max(0,H)-H)*q*4+J,ye=4*q,Ce=Math.max(0,N),qe=Math.max(0,H);return{rect:{x:Ce,y:qe,width:Math.min(k.width,N+q)-Ce,height:Math.min(k.height,H+W)-qe},layout:[{offset:oe,stride:ye}]}}(l,r,A,u,g)),B)for(let k=0;k<S.length;k+=4){const N=S[k];S[k]=S[k+2],S[k+2]=N}return S}finally{_.close()}})}let er,ar;function or(l,r,A,u){return l.addEventListener(r,A,u),{unsubscribe:()=>{l.removeEventListener(r,A,u)}}}function wr(l){return l*Math.PI/180}function kr(l){return l/Math.PI*180}const Hr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Wr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},on="AbortError";function pn(){return new Error(on)}const Pr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Zr(l){return Pr.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const ur="global-dispatcher";class Dn extends Error{constructor(r,A,u,g){super(`AJAXError: ${A} (${r}): ${u}`),this.status=r,this.statusText=A,this.url=u,this.body=g}}const Vr=()=>Ft(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,bi=function(l,r){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const u=Zr(l.url);if(u)return u(l,r);if(Ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:ur},r)}if(!(/^file:/.test(A=l.url)||/^file:/.test(Vr())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(u,g){return s(this,void 0,void 0,function*(){const _=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:Vr(),signal:g.signal});let b,B;u.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{b=yield fetch(_)}catch(k){throw new Dn(0,k.message,u.url,new Blob)}if(!b.ok){const k=yield b.blob();throw new Dn(b.status,b.statusText,u.url,k)}B=u.type==="arrayBuffer"||u.type==="image"?b.arrayBuffer():u.type==="json"?b.json():b.text();const S=yield B;if(g.signal.aborted)throw pn();return{data:S,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(l,r);if(Ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:ur},r)}var A;return function(u,g){return new Promise((_,b)=>{var B;const S=new XMLHttpRequest;S.open(u.method||"GET",u.url,!0),u.type!=="arrayBuffer"&&u.type!=="image"||(S.responseType="arraybuffer");for(const k in u.headers)S.setRequestHeader(k,u.headers[k]);u.type==="json"&&(S.responseType="text",!((B=u.headers)===null||B===void 0)&&B.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=u.credentials==="include",S.onerror=()=>{b(new Error(S.statusText))},S.onload=()=>{if(!g.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let k=S.response;if(u.type==="json")try{k=JSON.parse(S.response)}catch(N){return void b(N)}_({data:k,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const k=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});b(new Dn(S.status,S.statusText,u.url,k))}},g.signal.addEventListener("abort",()=>{S.abort(),b(pn())}),S.send(u.body)})}(l,r)};function Xe(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const r=new URL(l),A=window.location;return r.protocol===A.protocol&&r.host===A.host}function ae(l,r,A){A[l]&&A[l].indexOf(r)!==-1||(A[l]=A[l]||[],A[l].push(r))}function le(l,r,A){if(A&&A[l]){const u=A[l].indexOf(r);u!==-1&&A[l].splice(u,1)}}class fe{constructor(r,A={}){ut(this,A),this.type=r}}class Le extends fe{constructor(r,A={}){super("error",ut({error:r},A))}}class He{on(r,A){return this._listeners=this._listeners||{},ae(r,A,this._listeners),{unsubscribe:()=>{this.off(r,A)}}}off(r,A){return le(r,A,this._listeners),le(r,A,this._oneTimeListeners),this}once(r,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},ae(r,A,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,A){typeof r=="string"&&(r=new fe(r,A||{}));const u=r.type;if(this.listens(u)){r.target=this;const g=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const B of g)B.call(this,r);const _=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const B of _)le(u,B,this._oneTimeListeners),B.call(this,r);const b=this._eventedParent;b&&(ut(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(r))}else r instanceof Le&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,A){return this._eventedParent=r,this._eventedParentData=A,this}}var pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ht=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ke(l,r){const A={};for(const u in l)u!=="ref"&&(A[u]=l[u]);return ht.forEach(u=>{u in r&&(A[u]=r[u])}),A}function Ze(l,r){if(Array.isArray(l)){if(!Array.isArray(r)||l.length!==r.length)return!1;for(let A=0;A<l.length;A++)if(!Ze(l[A],r[A]))return!1;return!0}if(typeof l=="object"&&l!==null&&r!==null){if(typeof r!="object"||Object.keys(l).length!==Object.keys(r).length)return!1;for(const A in l)if(!Ze(l[A],r[A]))return!1;return!0}return l===r}function at(l,r){l.push(r)}function At(l,r,A){at(A,{command:"addSource",args:[l,r[l]]})}function Lt(l,r,A){at(r,{command:"removeSource",args:[l]}),A[l]=!0}function $t(l,r,A,u){Lt(l,A,u),At(l,r,A)}function Jt(l,r,A){let u;for(u in l[A])if(Object.prototype.hasOwnProperty.call(l[A],u)&&u!=="data"&&!Ze(l[A][u],r[A][u]))return!1;for(u in r[A])if(Object.prototype.hasOwnProperty.call(r[A],u)&&u!=="data"&&!Ze(l[A][u],r[A][u]))return!1;return!0}function Vt(l,r,A,u,g,_){l=l||{},r=r||{};for(const b in l)Object.prototype.hasOwnProperty.call(l,b)&&(Ze(l[b],r[b])||A.push({command:_,args:[u,b,r[b],g]}));for(const b in r)Object.prototype.hasOwnProperty.call(r,b)&&!Object.prototype.hasOwnProperty.call(l,b)&&(Ze(l[b],r[b])||A.push({command:_,args:[u,b,r[b],g]}))}function Sr(l){return l.id}function xr(l,r){return l[r.id]=r,l}class _t{constructor(r,A,u,g){this.message=(r?`${r}: `:"")+u,g&&(this.identifier=g),A!=null&&A.__line__&&(this.line=A.__line__)}}function Nr(l,...r){for(const A of r)for(const u in A)l[u]=A[u];return l}class Fr extends Error{constructor(r,A){super(A),this.message=A,this.key=r}}class jr{constructor(r,A=[]){this.parent=r,this.bindings={};for(const[u,g]of A)this.bindings[u]=g}concat(r){return new jr(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Cr={kind:"null"},kt={kind:"number"},yr={kind:"string"},Tr={kind:"boolean"},yn={kind:"color"},vn={kind:"projectionDefinition"},Hn={kind:"object"},Ur={kind:"value"},as={kind:"collator"},Vs={kind:"formatted"},ss={kind:"padding"},Gs={kind:"colorArray"},Pa={kind:"numberArray"},Ks={kind:"resolvedImage"},ti={kind:"variableAnchorOffsetCollection"};function ba(l,r){return{kind:"array",itemType:l,N:r}}function In(l){if(l.kind==="array"){const r=In(l.itemType);return typeof l.N=="number"?`array<${r}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${r}>`}return l.kind}const Qo=[Cr,kt,yr,Tr,yn,vn,Vs,Hn,ba(Ur),ss,Pa,Gs,Ks,ti];function Do(l,r){if(r.kind==="error")return null;if(l.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Do(l.itemType,r.itemType))&&(typeof l.N!="number"||l.N===r.N))return null}else{if(l.kind===r.kind)return null;if(l.kind==="value"){for(const A of Qo)if(!Do(A,r))return null}}return`Expected ${In(l)} but found ${In(r)} instead.`}function sA(l,r){return r.some(A=>A.kind===l.kind)}function co(l,r){return r.some(A=>A==="null"?l===null:A==="array"?Array.isArray(l):A==="object"?l&&!Array.isArray(l)&&typeof l=="object":A===typeof l)}function os(l,r){return l.kind==="array"&&r.kind==="array"?l.itemType.kind===r.itemType.kind&&typeof l.N=="number":l.kind===r.kind}const rc=.96422,Ro=.82521,nc=4/29,Nn=6/29,xl=3*Nn*Nn,ic=Nn*Nn*Nn,ac=Math.PI/180,Bl=180/Math.PI;function sc(l){return(l%=360)<0&&(l+=360),l}function qa([l,r,A,u]){let g,_;const b=ia((.2225045*(l=As(l))+.7168786*(r=As(r))+.0606169*(A=As(A)))/1);l===r&&r===A?g=_=b:(g=ia((.4360747*l+.3850649*r+.1430804*A)/rc),_=ia((.0139322*l+.0971045*r+.7141733*A)/Ro));const B=116*b-16;return[B<0?0:B,500*(g-b),200*(b-_),u]}function As(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function ia(l){return l>ic?Math.pow(l,1/3):l/xl+nc}function RA([l,r,A,u]){let g=(l+16)/116,_=isNaN(r)?g:g+r/500,b=isNaN(A)?g:g-A/200;return g=1*Cl(g),_=rc*Cl(_),b=Ro*Cl(b),[qs(3.1338561*_-1.6168667*g-.4906146*b),qs(-.9787684*_+1.9161415*g+.033454*b),qs(.0719453*_-.2289914*g+1.4052427*b),u]}function qs(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Cl(l){return l>Nn?l*l*l:xl*(l-nc)}const oc=Object.hasOwn||function(l,r){return Object.prototype.hasOwnProperty.call(l,r)};function oA(l,r){return oc(l,r)?l[r]:void 0}function No(l){return parseInt(l.padEnd(2,l),16)/255}function Il(l,r){return Si(r?l/100:l,0,1)}function Si(l,r,A){return Math.min(Math.max(r,l),A)}function An(l){return!l.some(Number.isNaN)}const Oo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Vi(l,r,A){return l+A*(r-l)}function va(l,r,A){return l.map((u,g)=>Vi(u,r[g],A))}class Xr{constructor(r,A,u,g=1,_=!0){this.r=r,this.g=A,this.b=u,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[r,A,u,g]))}static parse(r){if(r instanceof Xr)return r;if(typeof r!="string")return;const A=function(u){if((u=u.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=oA(Oo,u);if(g){const[b,B,S]=g;return[b/255,B/255,S/255,1]}if(u.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(u)){const b=u.length<6?1:2;let B=1;return[No(u.slice(B,B+=b)),No(u.slice(B,B+=b)),No(u.slice(B,B+=b)),No(u.slice(B,B+b)||"ff")]}if(u.startsWith("rgb")){const b=u.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[B,S,k,N,H,q,W,J,oe,ye,Ce,qe]=b,Pe=[N||" ",W||" ",ye].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const $=[k,q,oe].join(""),de=$==="%%%"?100:$===""?255:0;if(de){const ke=[Si(+S/de,0,1),Si(+H/de,0,1),Si(+J/de,0,1),Ce?Il(+Ce,qe):1];if(An(ke))return ke}}return}}const _=u.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,B,S,k,N,H,q,W,J]=_,oe=[S||" ",N||" ",q].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){const ye=[+B,Si(+k,0,100),Si(+H,0,100),W?Il(+W,J):1];if(An(ye))return function([Ce,qe,Pe,$]){function de(ke){const dt=(ke+Ce/30)%12,Nt=qe*Math.min(Pe,1-Pe);return Pe-Nt*Math.max(-1,Math.min(dt-3,9-dt,1))}return Ce=sc(Ce),qe/=100,Pe/=100,[de(0),de(8),de(4),$]}(ye)}}}(r);return A?new Xr(...A,!1):void 0}get rgb(){const{r,g:A,b:u,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[r/_,A/_,u/_,g])}get hcl(){return this.overwriteGetter("hcl",function(r){const[A,u,g,_]=qa(r),b=Math.sqrt(u*u+g*g);return[Math.round(1e4*b)?sc(Math.atan2(g,u)*Bl):NaN,b,A,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",qa(this.rgb))}overwriteGetter(r,A){return Object.defineProperty(this,r,{value:A}),A}toString(){const[r,A,u,g]=this.rgb;return`rgba(${[r,A,u].map(_=>Math.round(255*_)).join(",")},${g})`}static interpolate(r,A,u,g="rgb"){switch(g){case"rgb":{const[_,b,B,S]=va(r.rgb,A.rgb,u);return new Xr(_,b,B,S,!1)}case"hcl":{const[_,b,B,S]=r.hcl,[k,N,H,q]=A.hcl;let W,J;if(isNaN(_)||isNaN(k))isNaN(_)?isNaN(k)?W=NaN:(W=k,B!==1&&B!==0||(J=N)):(W=_,H!==1&&H!==0||(J=b));else{let Pe=k-_;k>_&&Pe>180?Pe-=360:k<_&&_-k>180&&(Pe+=360),W=_+u*Pe}const[oe,ye,Ce,qe]=function([Pe,$,de,ke]){return Pe=isNaN(Pe)?0:Pe*ac,RA([de,Math.cos(Pe)*$,Math.sin(Pe)*$,ke])}([W,J??Vi(b,N,u),Vi(B,H,u),Vi(S,q,u)]);return new Xr(oe,ye,Ce,qe,!1)}case"lab":{const[_,b,B,S]=RA(va(r.lab,A.lab,u));return new Xr(_,b,B,S,!1)}}}}Xr.black=new Xr(0,0,0,1),Xr.white=new Xr(1,1,1,1),Xr.transparent=new Xr(0,0,0,0),Xr.red=new Xr(1,0,0,1);class Zs{constructor(r,A,u){this.sensitivity=r?A?"variant":"case":A?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,A){return this.collator.compare(r,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zo=["bottom","center","top"];class di{constructor(r,A,u,g,_,b){this.text=r,this.image=A,this.scale=u,this.fontStack=g,this.textColor=_,this.verticalAlign=b}}class aa{constructor(r){this.sections=r}static fromString(r){return new aa([new di(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof aa?r:aa.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class vi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof vi)return r;if(typeof r=="number")return new vi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const A of r)if(typeof A!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new vi(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,A,u){return new vi(va(r.values,A.values,u))}}class br{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof br)return r;if(typeof r=="number")return new br([r]);if(Array.isArray(r)){for(const A of r)if(typeof A!="number")return;return new br(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,A,u){return new br(va(r.values,A.values,u))}}class Ti{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ti)return r;if(typeof r=="string"){const u=Xr.parse(r);return u?new Ti([u]):void 0}if(!Array.isArray(r))return;const A=[];for(const u of r){if(typeof u!="string")return;const g=Xr.parse(u);if(!g)return;A.push(g)}return new Ti(A)}toString(){return JSON.stringify(this.values)}static interpolate(r,A,u,g="rgb"){const _=[];if(r.values.length!=A.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${A.values.length}), cannot interpolate.`);for(let b=0;b<r.values.length;b++)_.push(Xr.interpolate(r.values[b],A.values[b],u,g));return new Ti(_)}}class Pn extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const wa=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Qi)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let A=0;A<r.length;A+=2){const u=r[A],g=r[A+1];if(typeof u!="string"||!wa.has(u)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Qi(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,A,u){const g=r.values,_=A.values;if(g.length!==_.length)throw new Pn(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${A.toString()}`);const b=[];for(let B=0;B<g.length;B+=2){if(g[B]!==_[B])throw new Pn(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${g[B]}, to[${B}]: ${_[B]}`);b.push(g[B]);const[S,k]=g[B+1],[N,H]=_[B+1];b.push([Vi(S,N,u),Vi(k,H,u)])}return new Qi(b)}}class sa{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new sa({name:r,available:!1}):null}}class Li{constructor(r,A,u){this.from=r,this.to=A,this.transition=u}static interpolate(r,A,u){return new Li(r,A,u)}static parse(r){return r instanceof Li?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new Li(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new Li(r.from,r.to,r.transition):typeof r=="string"?new Li(r,r,1):void 0}}function uo(l,r,A,u){return typeof l=="number"&&l>=0&&l<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof A=="number"&&A>=0&&A<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[l,r,A,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[l,r,A,u]:[l,r,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xn(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Li||l instanceof Xr||l instanceof Zs||l instanceof aa||l instanceof vi||l instanceof br||l instanceof Ti||l instanceof Qi||l instanceof sa)return!0;if(Array.isArray(l)){for(const r of l)if(!xn(r))return!1;return!0}if(typeof l=="object"){for(const r in l)if(!xn(l[r]))return!1;return!0}return!1}function jn(l){if(l===null)return Cr;if(typeof l=="string")return yr;if(typeof l=="boolean")return Tr;if(typeof l=="number")return kt;if(l instanceof Xr)return yn;if(l instanceof Li)return vn;if(l instanceof Zs)return as;if(l instanceof aa)return Vs;if(l instanceof vi)return ss;if(l instanceof br)return Pa;if(l instanceof Ti)return Gs;if(l instanceof Qi)return ti;if(l instanceof sa)return Ks;if(Array.isArray(l)){const r=l.length;let A;for(const u of l){const g=jn(u);if(A){if(A===g)continue;A=Ur;break}A=g}return ba(A||Ur,r)}return Hn}function tn(l){const r=typeof l;return l===null?"":r==="string"||r==="number"||r==="boolean"?String(l):l instanceof Xr||l instanceof Li||l instanceof aa||l instanceof vi||l instanceof br||l instanceof Ti||l instanceof Qi||l instanceof sa?l.toString():JSON.stringify(l)}class Qr{constructor(r,A){this.type=r,this.value=A}static parse(r,A){if(r.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!xn(r[1]))return A.error("invalid value");const u=r[1];let g=jn(u);const _=A.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Qr(g,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ls={string:yr,number:kt,boolean:Tr,object:Hn};class Rr{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");let u,g=1;const _=r[0];if(_==="array"){let B,S;if(r.length>2){const k=r[1];if(typeof k!="string"||!(k in ls)||k==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);B=ls[k],g++}else B=Ur;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return A.error('The length argument to "array" must be a positive integer literal',2);S=r[2],g++}u=ba(B,S)}else{if(!ls[_])throw new Error(`Types doesn't contain name = ${_}`);u=ls[_]}const b=[];for(;g<r.length;g++){const B=A.parse(r[g],g,Ur);if(!B)return null;b.push(B)}return new Rr(u,b)}evaluate(r){for(let A=0;A<this.args.length;A++){const u=this.args[A].evaluate(r);if(!Do(this.type,jn(u)))return u;if(A===this.args.length-1)throw new Pn(`Expected value to be of type ${In(this.type)}, but found ${In(jn(u))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const NA={"to-boolean":Tr,"to-color":yn,"to-number":kt,"to-string":yr};class Ai{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");const u=r[0];if(!NA[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&r.length!==2)return A.error("Expected one argument.");const g=NA[u],_=[];for(let b=1;b<r.length;b++){const B=A.parse(r[b],b,Ur);if(!B)return null;_.push(B)}return new Ai(g,_)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let A,u;for(const g of this.args){if(A=g.evaluate(r),u=null,A instanceof Xr)return A;if(typeof A=="string"){const _=r.parseColor(A);if(_)return _}else if(Array.isArray(A)&&(u=A.length<3||A.length>4?`Invalid rgba value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:uo(A[0],A[1],A[2],A[3]),!u))return new Xr(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new Pn(u||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const u of this.args){A=u.evaluate(r);const g=vi.parse(A);if(g)return g}throw new Pn(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"numberArray":{let A;for(const u of this.args){A=u.evaluate(r);const g=br.parse(A);if(g)return g}throw new Pn(`Could not parse numberArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"colorArray":{let A;for(const u of this.args){A=u.evaluate(r);const g=Ti.parse(A);if(g)return g}throw new Pn(`Could not parse colorArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const u of this.args){A=u.evaluate(r);const g=Qi.parse(A);if(g)return g}throw new Pn(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const u of this.args){if(A=u.evaluate(r),A===null)return 0;const g=Number(A);if(!isNaN(g))return g}throw new Pn(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return aa.fromString(tn(this.args[0].evaluate(r)));case"resolvedImage":return sa.fromString(tn(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return tn(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const AA=["Unknown","Point","LineString","Polygon"];class Ho{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?AA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let A=this._parseColorCache.get(r);return A||(A=Xr.parse(r),this._parseColorCache.set(r,A)),A}}class jo{constructor(r,A,u=[],g,_=new jr,b=[]){this.registry=r,this.path=u,this.key=u.map(B=>`[${B}]`).join(""),this.scope=_,this.errors=b,this.expectedType=g,this._isConstant=A}parse(r,A,u,g,_={}){return A?this.concat(A,u,g)._parse(r,_):this._parse(r,_)}_parse(r,A){function u(g,_,b){return b==="assert"?new Rr(_,[g]):b==="coerce"?new Ai(_,[g]):g}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=r[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let b=_.parse(r,this);if(!b)return null;if(this.expectedType){const B=this.expectedType,S=b.type;if(B.kind!=="string"&&B.kind!=="number"&&B.kind!=="boolean"&&B.kind!=="object"&&B.kind!=="array"||S.kind!=="value"){if(B.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(B.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(B.kind)&&["value","number","array"].includes(S.kind)||B.kind==="colorArray"&&["value","string","array"].includes(S.kind)||B.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))b=u(b,B,A.typeAnnotation||"coerce");else if(this.checkSubtype(B,S))return null}else b=u(b,B,A.typeAnnotation||"assert")}if(!(b instanceof Qr)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const B=new Ho;try{b=new Qr(b.type,b.evaluate(B))}catch(S){return this.error(S.message),null}}return b}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,A,u){const g=typeof r=="number"?this.path.concat(r):this.path,_=u?this.scope.concat(u):this.scope;return new jo(this.registry,this._isConstant,g,A||null,_,this.errors)}error(r,...A){const u=`${this.key}${A.map(g=>`[${g}]`).join("")}`;this.errors.push(new Fr(u,r))}checkSubtype(r,A){const u=Do(r,A);return u&&this.error(u),u}}class ho{constructor(r,A){this.type=A.type,this.bindings=[].concat(r),this.result=A}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const A of this.bindings)r(A[1]);r(this.result)}static parse(r,A){if(r.length<4)return A.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let _=1;_<r.length-1;_+=2){const b=r[_];if(typeof b!="string")return A.error(`Expected string, but found ${typeof b} instead.`,_);if(/[^a-zA-Z0-9_]/.test(b))return A.error("Variable names must contain only alphanumeric characters or '_'.",_);const B=A.parse(r[_+1],_+1);if(!B)return null;u.push([b,B])}const g=A.parse(r[r.length-1],r.length-1,A.expectedType,u);return g?new ho(u,g):null}outputDefined(){return this.result.outputDefined()}}class Vo{constructor(r,A){this.type=A.type,this.name=r,this.boundExpression=A}static parse(r,A){if(r.length!==2||typeof r[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const u=r[1];return A.scope.has(u)?new Vo(u,A.scope.get(u)):A.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class OA{constructor(r,A,u){this.type=r,this.index=A,this.input=u}static parse(r,A){if(r.length!==3)return A.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=A.parse(r[1],1,kt),g=A.parse(r[2],2,ba(A.expectedType||Ur));return u&&g?new OA(g.type.itemType,u,g):null}evaluate(r){const A=this.index.evaluate(r),u=this.input.evaluate(r);if(A<0)throw new Pn(`Array index out of bounds: ${A} < 0.`);if(A>=u.length)throw new Pn(`Array index out of bounds: ${A} > ${u.length-1}.`);if(A!==Math.floor(A))throw new Pn(`Array index must be an integer, but found ${A} instead.`);return u[A]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Za{constructor(r,A){this.type=Tr,this.needle=r,this.haystack=A}static parse(r,A){if(r.length!==3)return A.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=A.parse(r[1],1,Ur),g=A.parse(r[2],2,Ur);return u&&g?sA(u.type,[Tr,yr,kt,Cr,Ur])?new Za(u,g):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${In(u.type)} instead`):null}evaluate(r){const A=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!u)return!1;if(!co(A,["boolean","string","number","null"]))throw new Pn(`Expected first argument to be of type boolean, string, number or null, but found ${In(jn(A))} instead.`);if(!co(u,["string","array"]))throw new Pn(`Expected second argument to be of type array or string, but found ${In(jn(u))} instead.`);return u.indexOf(A)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class $a{constructor(r,A,u){this.type=kt,this.needle=r,this.haystack=A,this.fromIndex=u}static parse(r,A){if(r.length<=2||r.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=A.parse(r[1],1,Ur),g=A.parse(r[2],2,Ur);if(!u||!g)return null;if(!sA(u.type,[Tr,yr,kt,Cr,Ur]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${In(u.type)} instead`);if(r.length===4){const _=A.parse(r[3],3,kt);return _?new $a(u,g,_):null}return new $a(u,g)}evaluate(r){const A=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!co(A,["boolean","string","number","null"]))throw new Pn(`Expected first argument to be of type boolean, string, number or null, but found ${In(jn(A))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(r)),co(u,["string"])){const _=u.indexOf(A,g);return _===-1?-1:[...u.slice(0,_)].length}if(co(u,["array"]))return u.indexOf(A,g);throw new Pn(`Expected second argument to be of type array or string, but found ${In(jn(u))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class fo{constructor(r,A,u,g,_,b){this.inputType=r,this.type=A,this.input=u,this.cases=g,this.outputs=_,this.otherwise=b}static parse(r,A){if(r.length<5)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return A.error("Expected an even number of arguments.");let u,g;A.expectedType&&A.expectedType.kind!=="value"&&(g=A.expectedType);const _={},b=[];for(let k=2;k<r.length-1;k+=2){let N=r[k];const H=r[k+1];Array.isArray(N)||(N=[N]);const q=A.concat(k);if(N.length===0)return q.error("Expected at least one branch label.");for(const J of N){if(typeof J!="number"&&typeof J!="string")return q.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return q.error("Numeric branch labels must be integer values.");if(u){if(q.checkSubtype(u,jn(J)))return null}else u=jn(J);if(_[String(J)]!==void 0)return q.error("Branch labels must be unique.");_[String(J)]=b.length}const W=A.parse(H,k,g);if(!W)return null;g=g||W.type,b.push(W)}const B=A.parse(r[1],1,Ur);if(!B)return null;const S=A.parse(r[r.length-1],r.length-1,g);return S?B.type.kind!=="value"&&A.concat(1).checkSubtype(u,B.type)?null:new fo(u,g,B,_,b,S):null}evaluate(r){const A=this.input.evaluate(r);return(jn(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Vn{constructor(r,A,u){this.type=r,this.branches=A,this.otherwise=u}static parse(r,A){if(r.length<4)return A.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return A.error("Expected an odd number of arguments.");let u;A.expectedType&&A.expectedType.kind!=="value"&&(u=A.expectedType);const g=[];for(let b=1;b<r.length-1;b+=2){const B=A.parse(r[b],b,Tr);if(!B)return null;const S=A.parse(r[b+1],b+1,u);if(!S)return null;g.push([B,S]),u=u||S.type}const _=A.parse(r[r.length-1],r.length-1,u);if(!_)return null;if(!u)throw new Error("Can't infer output type");return new Vn(u,g,_)}evaluate(r){for(const[A,u]of this.branches)if(A.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[A,u]of this.branches)r(A),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class Gi{constructor(r,A,u,g){this.type=r,this.input=A,this.beginIndex=u,this.endIndex=g}static parse(r,A){if(r.length<=2||r.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=A.parse(r[1],1,Ur),g=A.parse(r[2],2,kt);if(!u||!g)return null;if(!sA(u.type,[ba(Ur),yr,Ur]))return A.error(`Expected first argument to be of type array or string, but found ${In(u.type)} instead`);if(r.length===4){const _=A.parse(r[3],3,kt);return _?new Gi(u.type,u,g,_):null}return new Gi(u.type,u,g)}evaluate(r){const A=this.input.evaluate(r),u=this.beginIndex.evaluate(r);let g;if(this.endIndex&&(g=this.endIndex.evaluate(r)),co(A,["string"]))return[...A].slice(u,g).join("");if(co(A,["array"]))return A.slice(u,g);throw new Pn(`Expected first argument to be of type array or string, but found ${In(jn(A))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function po(l,r){const A=l.length-1;let u,g,_=0,b=A,B=0;for(;_<=b;)if(B=Math.floor((_+b)/2),u=l[B],g=l[B+1],u<=r){if(B===A||r<g)return B;_=B+1}else{if(!(u>r))throw new Pn("Input is not a number.");b=B-1}return 0}class Ma{constructor(r,A,u){this.type=r,this.input=A,this.labels=[],this.outputs=[];for(const[g,_]of u)this.labels.push(g),this.outputs.push(_)}static parse(r,A){if(r.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return A.error("Expected an even number of arguments.");const u=A.parse(r[1],1,kt);if(!u)return null;const g=[];let _=null;A.expectedType&&A.expectedType.kind!=="value"&&(_=A.expectedType);for(let b=1;b<r.length;b+=2){const B=b===1?-1/0:r[b],S=r[b+1],k=b,N=b+1;if(typeof B!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(g.length&&g[g.length-1][0]>=B)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const H=A.parse(S,N,_);if(!H)return null;_=_||H.type,g.push([B,H])}return new Ma(_,u,g)}evaluate(r){const A=this.labels,u=this.outputs;if(A.length===1)return u[0].evaluate(r);const g=this.input.evaluate(r);if(g<=A[0])return u[0].evaluate(r);const _=A.length;return g>=A[_-1]?u[_-1].evaluate(r):u[po(A,g)].evaluate(r)}eachChild(r){r(this.input);for(const A of this.outputs)r(A)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function wi(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var go,zA,HA=function(){if(zA)return go;function l(r,A,u,g){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(g-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=A,this.p2x=u,this.p2y=g}return zA=1,go=l,l.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,A){if(A===void 0&&(A=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,g=0;g<8;g++){var _=this.sampleCurveX(u)-r;if(Math.abs(_)<A)return u;var b=this.sampleCurveDerivativeX(u);if(Math.abs(b)<1e-6)break;u-=_/b}var B=0,S=1;for(u=r,g=0;g<20&&(_=this.sampleCurveX(u),!(Math.abs(_-r)<A));g++)r>_?B=u:S=u,u=.5*(S-B)+B;return u},solve:function(r,A){return this.sampleCurveY(this.solveCurveX(r,A))}},go}(),Fl=wi(HA);class Pi{constructor(r,A,u,g,_){this.type=r,this.operator=A,this.interpolation=u,this.input=g,this.labels=[],this.outputs=[];for(const[b,B]of _)this.labels.push(b),this.outputs.push(B)}static interpolationFactor(r,A,u,g){let _=0;if(r.name==="exponential")_=$s(A,r.base,u,g);else if(r.name==="linear")_=$s(A,1,u,g);else if(r.name==="cubic-bezier"){const b=r.controlPoints;_=new Fl(b[0],b[1],b[2],b[3]).solve($s(A,1,u,g))}return _}static parse(r,A){let[u,g,_,...b]=r;if(!Array.isArray(g)||g.length===0)return A.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const k=g[1];if(typeof k!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:k}}else{if(g[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const k=g.slice(1);if(k.length!==4||k.some(N=>typeof N!="number"||N<0||N>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:k}}}if(r.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(_=A.parse(_,2,kt),!_)return null;const B=[];let S=null;u!=="interpolate-hcl"&&u!=="interpolate-lab"||A.expectedType==Gs?A.expectedType&&A.expectedType.kind!=="value"&&(S=A.expectedType):S=yn;for(let k=0;k<b.length;k+=2){const N=b[k],H=b[k+1],q=k+3,W=k+4;if(typeof N!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(B.length&&B[B.length-1][0]>=N)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const J=A.parse(H,W,S);if(!J)return null;S=S||J.type,B.push([N,J])}return os(S,kt)||os(S,vn)||os(S,yn)||os(S,ss)||os(S,Pa)||os(S,Gs)||os(S,ti)||os(S,ba(kt))?new Pi(S,u,g,_,B):A.error(`Type ${In(S)} is not interpolatable.`)}evaluate(r){const A=this.labels,u=this.outputs;if(A.length===1)return u[0].evaluate(r);const g=this.input.evaluate(r);if(g<=A[0])return u[0].evaluate(r);const _=A.length;if(g>=A[_-1])return u[_-1].evaluate(r);const b=po(A,g),B=Pi.interpolationFactor(this.interpolation,g,A[b],A[b+1]),S=u[b].evaluate(r),k=u[b+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Vi(S,k,B);case"color":return Xr.interpolate(S,k,B);case"padding":return vi.interpolate(S,k,B);case"colorArray":return Ti.interpolate(S,k,B);case"numberArray":return br.interpolate(S,k,B);case"variableAnchorOffsetCollection":return Qi.interpolate(S,k,B);case"array":return va(S,k,B);case"projectionDefinition":return Li.interpolate(S,k,B)}case"interpolate-hcl":switch(this.type.kind){case"color":return Xr.interpolate(S,k,B,"hcl");case"colorArray":return Ti.interpolate(S,k,B,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Xr.interpolate(S,k,B,"lab");case"colorArray":return Ti.interpolate(S,k,B,"lab")}}}eachChild(r){r(this.input);for(const A of this.outputs)r(A)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function $s(l,r,A,u){const g=u-A,_=l-A;return g===0?0:r===1?_/g:(Math.pow(r,_)-1)/(Math.pow(r,g)-1)}const Ua={color:Xr.interpolate,number:Vi,padding:vi.interpolate,numberArray:br.interpolate,colorArray:Ti.interpolate,variableAnchorOffsetCollection:Qi.interpolate,array:va};class Is{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");let u=null;const g=A.expectedType;g&&g.kind!=="value"&&(u=g);const _=[];for(const B of r.slice(1)){const S=A.parse(B,1+_.length,u,void 0,{typeAnnotation:"omit"});if(!S)return null;u=u||S.type,_.push(S)}if(!u)throw new Error("No output type");const b=g&&_.some(B=>Do(g,B.type));return new Is(b?Ur:u,_)}evaluate(r){let A,u=null,g=0;for(const _ of this.args)if(g++,u=_.evaluate(r),u&&u instanceof sa&&!u.available&&(A||(A=u.name),u=null,g===this.args.length&&(u=A)),u!==null)break;return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Go(l,r){return l==="=="||l==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function ka(l,r,A,u){return u.compare(r,A)===0}function cs(l,r,A){const u=l!=="=="&&l!=="!=";return class x2{constructor(_,b,B){this.type=Tr,this.lhs=_,this.rhs=b,this.collator=B,this.hasUntypedArgument=_.type.kind==="value"||b.type.kind==="value"}static parse(_,b){if(_.length!==3&&_.length!==4)return b.error("Expected two or three arguments.");const B=_[0];let S=b.parse(_[1],1,Ur);if(!S)return null;if(!Go(B,S.type))return b.concat(1).error(`"${B}" comparisons are not supported for type '${In(S.type)}'.`);let k=b.parse(_[2],2,Ur);if(!k)return null;if(!Go(B,k.type))return b.concat(2).error(`"${B}" comparisons are not supported for type '${In(k.type)}'.`);if(S.type.kind!==k.type.kind&&S.type.kind!=="value"&&k.type.kind!=="value")return b.error(`Cannot compare types '${In(S.type)}' and '${In(k.type)}'.`);u&&(S.type.kind==="value"&&k.type.kind!=="value"?S=new Rr(k.type,[S]):S.type.kind!=="value"&&k.type.kind==="value"&&(k=new Rr(S.type,[k])));let N=null;if(_.length===4){if(S.type.kind!=="string"&&k.type.kind!=="string"&&S.type.kind!=="value"&&k.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(N=b.parse(_[3],3,as),!N)return null}return new x2(S,k,N)}evaluate(_){const b=this.lhs.evaluate(_),B=this.rhs.evaluate(_);if(u&&this.hasUntypedArgument){const S=jn(b),k=jn(B);if(S.kind!==k.kind||S.kind!=="string"&&S.kind!=="number")throw new Pn(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${S.kind}, ${k.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const S=jn(b),k=jn(B);if(S.kind!=="string"||k.kind!=="string")return r(_,b,B)}return this.collator?A(_,b,B,this.collator.evaluate(_)):r(_,b,B)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Ws=cs("==",function(l,r,A){return r===A},ka),El=cs("!=",function(l,r,A){return r!==A},function(l,r,A,u){return!ka(0,r,A,u)}),Xs=cs("<",function(l,r,A){return r<A},function(l,r,A,u){return u.compare(r,A)<0}),Sl=cs(">",function(l,r,A){return r>A},function(l,r,A,u){return u.compare(r,A)>0}),U=cs("<=",function(l,r,A){return r<=A},function(l,r,A,u){return u.compare(r,A)<=0}),re=cs(">=",function(l,r,A){return r>=A},function(l,r,A,u){return u.compare(r,A)>=0});class Ee{constructor(r,A,u){this.type=as,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=A}static parse(r,A){if(r.length!==2)return A.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return A.error("Collator options argument must be an object.");const g=A.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Tr);if(!g)return null;const _=A.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Tr);if(!_)return null;let b=null;return u.locale&&(b=A.parse(u.locale,1,yr),!b)?null:new Ee(g,_,b)}evaluate(r){return new Zs(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class $e{constructor(r,A,u,g,_){this.type=yr,this.number=r,this.locale=A,this.currency=u,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(r,A){if(r.length!==3)return A.error("Expected two arguments.");const u=A.parse(r[1],1,kt);if(!u)return null;const g=r[2];if(typeof g!="object"||Array.isArray(g))return A.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=A.parse(g.locale,1,yr),!_))return null;let b=null;if(g.currency&&(b=A.parse(g.currency,1,yr),!b))return null;let B=null;if(g["min-fraction-digits"]&&(B=A.parse(g["min-fraction-digits"],1,kt),!B))return null;let S=null;return g["max-fraction-digits"]&&(S=A.parse(g["max-fraction-digits"],1,kt),!S)?null:new $e(u,_,b,B,S)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class ct{constructor(r){this.type=Vs,this.sections=r}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return A.error("First argument must be an image or text section.");const g=[];let _=!1;for(let b=1;b<=r.length-1;++b){const B=r[b];if(_&&typeof B=="object"&&!Array.isArray(B)){_=!1;let S=null;if(B["font-scale"]&&(S=A.parse(B["font-scale"],1,kt),!S))return null;let k=null;if(B["text-font"]&&(k=A.parse(B["text-font"],1,ba(yr)),!k))return null;let N=null;if(B["text-color"]&&(N=A.parse(B["text-color"],1,yn),!N))return null;let H=null;if(B["vertical-align"]){if(typeof B["vertical-align"]=="string"&&!zo.includes(B["vertical-align"]))return A.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${B["vertical-align"]}' instead.`);if(H=A.parse(B["vertical-align"],1,yr),!H)return null}const q=g[g.length-1];q.scale=S,q.font=k,q.textColor=N,q.verticalAlign=H}else{const S=A.parse(r[b],1,Ur);if(!S)return null;const k=S.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ct(g)}evaluate(r){return new aa(this.sections.map(A=>{const u=A.content.evaluate(r);return jn(u)===Ks?new di("",u,null,null,null,A.verticalAlign?A.verticalAlign.evaluate(r):null):new di(tn(u),null,A.scale?A.scale.evaluate(r):null,A.font?A.font.evaluate(r).join(","):null,A.textColor?A.textColor.evaluate(r):null,A.verticalAlign?A.verticalAlign.evaluate(r):null)}))}eachChild(r){for(const A of this.sections)r(A.content),A.scale&&r(A.scale),A.font&&r(A.font),A.textColor&&r(A.textColor),A.verticalAlign&&r(A.verticalAlign)}outputDefined(){return!1}}class Mt{constructor(r){this.type=Ks,this.input=r}static parse(r,A){if(r.length!==2)return A.error("Expected two arguments.");const u=A.parse(r[1],1,yr);return u?new Mt(u):A.error("No image name provided.")}evaluate(r){const A=this.input.evaluate(r),u=sa.fromString(A);return u&&r.availableImages&&(u.available=r.availableImages.indexOf(A)>-1),u}eachChild(r){r(this.input)}outputDefined(){return!1}}class Kt{constructor(r){this.type=kt,this.input=r}static parse(r,A){if(r.length!==2)return A.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=A.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${In(u.type)} instead.`):new Kt(u):null}evaluate(r){const A=this.input.evaluate(r);if(typeof A=="string")return[...A].length;if(Array.isArray(A))return A.length;throw new Pn(`Expected value to be of type string or array, but found ${In(jn(A))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const lr=8192;function Lr(l,r){const A=(180+l[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,r.z);return[Math.round(A*g*lr),Math.round(u*g*lr)]}function Gr(l,r){const A=Math.pow(2,r.z);return[(g=(l[0]/lr+r.x)/A,360*g-180),(u=(l[1]/lr+r.y)/A,360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90)];var u,g}function zr(l,r){l[0]=Math.min(l[0],r[0]),l[1]=Math.min(l[1],r[1]),l[2]=Math.max(l[2],r[0]),l[3]=Math.max(l[3],r[1])}function ln(l,r){return!(l[0]<=r[0]||l[2]>=r[2]||l[1]<=r[1]||l[3]>=r[3])}function ri(l,r,A){const u=l[0]-r[0],g=l[1]-r[1],_=l[0]-A[0],b=l[1]-A[1];return u*b-_*g==0&&u*_<=0&&g*b<=0}function Gn(l,r,A,u){return(g=[u[0]-A[0],u[1]-A[1]])[0]*(_=[r[0]-l[0],r[1]-l[1]])[1]-g[1]*_[0]!=0&&!(!Fs(l,r,A,u)||!Fs(A,u,l,r));var g,_}function pi(l,r,A){for(const u of A)for(let g=0;g<u.length-1;++g)if(Gn(l,r,u[g],u[g+1]))return!0;return!1}function li(l,r,A=!1){let u=!1;for(const B of r)for(let S=0;S<B.length-1;S++){if(ri(l,B[S],B[S+1]))return A;(_=B[S])[1]>(g=l)[1]!=(b=B[S+1])[1]>g[1]&&g[0]<(b[0]-_[0])*(g[1]-_[1])/(b[1]-_[1])+_[0]&&(u=!u)}var g,_,b;return u}function Mi(l,r){for(const A of r)if(li(l,A))return!0;return!1}function us(l,r){for(const A of l)if(!li(A,r))return!1;for(let A=0;A<l.length-1;++A)if(pi(l[A],l[A+1],r))return!1;return!0}function Wa(l,r){for(const A of r)if(us(l,A))return!0;return!1}function Fs(l,r,A,u){const g=u[0]-A[0],_=u[1]-A[1],b=(l[0]-A[0])*_-g*(l[1]-A[1]),B=(r[0]-A[0])*_-g*(r[1]-A[1]);return b>0&&B<0||b<0&&B>0}function Ko(l,r,A){const u=[];for(let g=0;g<l.length;g++){const _=[];for(let b=0;b<l[g].length;b++){const B=Lr(l[g][b],A);zr(r,B),_.push(B)}u.push(_)}return u}function jA(l,r,A){const u=[];for(let g=0;g<l.length;g++){const _=Ko(l[g],r,A);u.push(_)}return u}function VA(l,r,A,u){if(l[0]<A[0]||l[0]>A[2]){const g=.5*u;let _=l[0]-A[0]>g?-u:A[0]-l[0]>g?u:0;_===0&&(_=l[0]-A[2]>g?-u:A[2]-l[0]>g?u:0),l[0]+=_}zr(r,l)}function lA(l,r,A,u){const g=Math.pow(2,u.z)*lr,_=[u.x*lr,u.y*lr],b=[];for(const B of l)for(const S of B){const k=[S.x+_[0],S.y+_[1]];VA(k,r,A,g),b.push(k)}return b}function cA(l,r,A,u){const g=Math.pow(2,u.z)*lr,_=[u.x*lr,u.y*lr],b=[];for(const S of l){const k=[];for(const N of S){const H=[N.x+_[0],N.y+_[1]];zr(r,H),k.push(H)}b.push(k)}if(r[2]-r[0]<=g/2){(B=r)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const S of b)for(const k of S)VA(k,r,A,g)}var B;return b}class hs{constructor(r,A){this.type=Tr,this.geojson=r,this.geometries=A}static parse(r,A){if(r.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(xn(r[1])){const u=r[1];if(u.type==="FeatureCollection"){const g=[];for(const _ of u.features){const{type:b,coordinates:B}=_.geometry;b==="Polygon"&&g.push(B),b==="MultiPolygon"&&g.push(...B)}if(g.length)return new hs(u,{type:"MultiPolygon",coordinates:g})}else if(u.type==="Feature"){const g=u.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new hs(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new hs(u,u)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(A,u){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=A.canonicalID();if(u.type==="Polygon"){const B=Ko(u.coordinates,_,b),S=lA(A.geometry(),g,_,b);if(!ln(g,_))return!1;for(const k of S)if(!li(k,B))return!1}if(u.type==="MultiPolygon"){const B=jA(u.coordinates,_,b),S=lA(A.geometry(),g,_,b);if(!ln(g,_))return!1;for(const k of S)if(!Mi(k,B))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(A,u){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=A.canonicalID();if(u.type==="Polygon"){const B=Ko(u.coordinates,_,b),S=cA(A.geometry(),g,_,b);if(!ln(g,_))return!1;for(const k of S)if(!us(k,B))return!1}if(u.type==="MultiPolygon"){const B=jA(u.coordinates,_,b),S=cA(A.geometry(),g,_,b);if(!ln(g,_))return!1;for(const k of S)if(!Wa(k,B))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let uA=class{constructor(l=[],r=(A,u)=>A<u?-1:A>u?1:0){if(this.data=l,this.length=this.data.length,this.compare=r,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:r,compare:A}=this,u=r[l];for(;l>0;){const g=l-1>>1,_=r[g];if(A(u,_)>=0)break;r[l]=_,l=g}r[l]=u}_down(l){const{data:r,compare:A}=this,u=this.length>>1,g=r[l];for(;l<u;){let _=1+(l<<1);const b=_+1;if(b<this.length&&A(r[b],r[_])<0&&(_=b),A(r[_],g)>=0)break;r[l]=r[_],l=_}r[l]=g}};function Di(l,r,A=0,u=l.length-1,g=hA){for(;u>A;){if(u-A>600){const S=u-A+1,k=r-A+1,N=Math.log(S),H=.5*Math.exp(2*N/3),q=.5*Math.sqrt(N*H*(S-H)/S)*(k-S/2<0?-1:1);Di(l,r,Math.max(A,Math.floor(r-k*H/S+q)),Math.min(u,Math.floor(r+(S-k)*H/S+q)),g)}const _=l[r];let b=A,B=u;for(Es(l,A,r),g(l[u],_)>0&&Es(l,A,u);b<B;){for(Es(l,b,B),b++,B--;g(l[b],_)<0;)b++;for(;g(l[B],_)>0;)B--}g(l[A],_)===0?Es(l,A,B):(B++,Es(l,B,u)),B<=r&&(A=B+1),r<=B&&(u=B-1)}}function Es(l,r,A){const u=l[r];l[r]=l[A],l[A]=u}function hA(l,r){return l<r?-1:l>r?1:0}function mo(l,r){if(l.length<=1)return[l];const A=[];let u,g;for(const _ of l){const b=Qa(_);b!==0&&(_.area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(u&&A.push(u),u=[_]):u.push(_))}if(u&&A.push(u),r>1)for(let _=0;_<A.length;_++)A[_].length<=r||(Di(A[_],r,1,A[_].length-1,Tl),A[_]=A[_].slice(0,r));return A}function Tl(l,r){return r.area-l.area}function Qa(l){let r=0;for(let A,u,g=0,_=l.length,b=_-1;g<_;b=g++)A=l[g],u=l[b],r+=(u.x-A.x)*(A.y+u.y);return r}const Ll=1/298.257223563,GA=Ll*(2-Ll),Pl=Math.PI/180;class Da{constructor(r){const A=6378.137*Pl*1e3,u=Math.cos(r*Pl),g=1/(1-GA*(1-u*u)),_=Math.sqrt(g);this.kx=A*_*u,this.ky=A*_*g*(1-GA)}distance(r,A){const u=this.wrap(r[0]-A[0])*this.kx,g=(r[1]-A[1])*this.ky;return Math.sqrt(u*u+g*g)}pointOnLine(r,A){let u,g,_,b,B=1/0;for(let S=0;S<r.length-1;S++){let k=r[S][0],N=r[S][1],H=this.wrap(r[S+1][0]-k)*this.kx,q=(r[S+1][1]-N)*this.ky,W=0;H===0&&q===0||(W=(this.wrap(A[0]-k)*this.kx*H+(A[1]-N)*this.ky*q)/(H*H+q*q),W>1?(k=r[S+1][0],N=r[S+1][1]):W>0&&(k+=H/this.kx*W,N+=q/this.ky*W)),H=this.wrap(A[0]-k)*this.kx,q=(A[1]-N)*this.ky;const J=H*H+q*q;J<B&&(B=J,u=k,g=N,_=S,b=W)}return{point:[u,g],index:_,t:Math.max(0,Math.min(1,b))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function fA(l,r){return r[0]-l[0]}function cn(l){return l[1]-l[0]+1}function fs(l,r){return l[1]>=l[0]&&l[1]<r}function Js(l,r){if(l[0]>l[1])return[null,null];const A=cn(l);if(r){if(A===2)return[l,null];const g=Math.floor(A/2);return[[l[0],l[0]+g],[l[0]+g,l[1]]]}if(A===1)return[l,null];const u=Math.floor(A/2)-1;return[[l[0],l[0]+u],[l[0]+u+1,l[1]]]}function yo(l,r){if(!fs(r,l.length))return[1/0,1/0,-1/0,-1/0];const A=[1/0,1/0,-1/0,-1/0];for(let u=r[0];u<=r[1];++u)zr(A,l[u]);return A}function oa(l){const r=[1/0,1/0,-1/0,-1/0];for(const A of l)for(const u of A)zr(r,u);return r}function Aa(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Ys(l,r,A){if(!Aa(l)||!Aa(r))return NaN;let u=0,g=0;return l[2]<r[0]&&(u=r[0]-l[2]),l[0]>r[2]&&(u=l[0]-r[2]),l[1]>r[3]&&(g=l[1]-r[3]),l[3]<r[1]&&(g=r[1]-l[3]),A.distance([0,0],[u,g])}function xa(l,r,A){const u=A.pointOnLine(r,l);return A.distance(l,u.point)}function Ss(l,r,A,u,g){const _=Math.min(xa(l,[A,u],g),xa(r,[A,u],g)),b=Math.min(xa(A,[l,r],g),xa(u,[l,r],g));return Math.min(_,b)}function KA(l,r,A,u,g){if(!fs(r,l.length)||!fs(u,A.length))return 1/0;let _=1/0;for(let b=r[0];b<r[1];++b){const B=l[b],S=l[b+1];for(let k=u[0];k<u[1];++k){const N=A[k],H=A[k+1];if(Gn(B,S,N,H))return 0;_=Math.min(_,Ss(B,S,N,H,g))}}return _}function _o(l,r,A,u,g){if(!fs(r,l.length)||!fs(u,A.length))return NaN;let _=1/0;for(let b=r[0];b<=r[1];++b)for(let B=u[0];B<=u[1];++B)if(_=Math.min(_,g.distance(l[b],A[B])),_===0)return _;return _}function gi(l,r,A){if(li(l,r,!0))return 0;let u=1/0;for(const g of r){const _=g[0],b=g[g.length-1];if(_!==b&&(u=Math.min(u,xa(l,[b,_],A)),u===0))return u;const B=A.pointOnLine(g,l);if(u=Math.min(u,A.distance(l,B.point)),u===0)return u}return u}function Ml(l,r,A,u){if(!fs(r,l.length))return NaN;for(let _=r[0];_<=r[1];++_)if(li(l[_],A,!0))return 0;let g=1/0;for(let _=r[0];_<r[1];++_){const b=l[_],B=l[_+1];for(const S of A)for(let k=0,N=S.length,H=N-1;k<N;H=k++){const q=S[H],W=S[k];if(Gn(b,B,q,W))return 0;g=Math.min(g,Ss(b,B,q,W,u))}}return g}function la(l,r){for(const A of l)for(const u of A)if(li(u,r,!0))return!0;return!1}function ds(l,r,A,u=1/0){const g=oa(l),_=oa(r);if(u!==1/0&&Ys(g,_,A)>=u)return u;if(ln(g,_)){if(la(l,r))return 0}else if(la(r,l))return 0;let b=1/0;for(const B of l)for(let S=0,k=B.length,N=k-1;S<k;N=S++){const H=B[N],q=B[S];for(const W of r)for(let J=0,oe=W.length,ye=oe-1;J<oe;ye=J++){const Ce=W[ye],qe=W[J];if(Gn(H,q,Ce,qe))return 0;b=Math.min(b,Ss(H,q,Ce,qe,A))}}return b}function dA(l,r,A,u,g,_){if(!_)return;const b=Ys(yo(u,_),g,A);b<r&&l.push([b,_,[0,0]])}function pA(l,r,A,u,g,_,b){if(!_||!b)return;const B=Ys(yo(u,_),yo(g,b),A);B<r&&l.push([B,_,b])}function qo(l,r,A,u,g=1/0){let _=Math.min(u.distance(l[0],A[0][0]),g);if(_===0)return _;const b=new uA([[0,[0,l.length-1],[0,0]]],fA),B=oa(A);for(;b.length>0;){const S=b.pop();if(S[0]>=_)continue;const k=S[1],N=r?50:100;if(cn(k)<=N){if(!fs(k,l.length))return NaN;if(r){const H=Ml(l,k,A,u);if(isNaN(H)||H===0)return H;_=Math.min(_,H)}else for(let H=k[0];H<=k[1];++H){const q=gi(l[H],A,u);if(_=Math.min(_,q),_===0)return 0}}else{const H=Js(k,r);dA(b,_,u,l,B,H[0]),dA(b,_,u,l,B,H[1])}}return _}function eo(l,r,A,u,g,_=1/0){let b=Math.min(_,g.distance(l[0],A[0]));if(b===0)return b;const B=new uA([[0,[0,l.length-1],[0,A.length-1]]],fA);for(;B.length>0;){const S=B.pop();if(S[0]>=b)continue;const k=S[1],N=S[2],H=r?50:100,q=u?50:100;if(cn(k)<=H&&cn(N)<=q){if(!fs(k,l.length)&&fs(N,A.length))return NaN;let W;if(r&&u)W=KA(l,k,A,N,g),b=Math.min(b,W);else if(r&&!u){const J=l.slice(k[0],k[1]+1);for(let oe=N[0];oe<=N[1];++oe)if(W=xa(A[oe],J,g),b=Math.min(b,W),b===0)return b}else if(!r&&u){const J=A.slice(N[0],N[1]+1);for(let oe=k[0];oe<=k[1];++oe)if(W=xa(l[oe],J,g),b=Math.min(b,W),b===0)return b}else W=_o(l,k,A,N,g),b=Math.min(b,W)}else{const W=Js(k,r),J=Js(N,u);pA(B,b,g,l,A,W[0],J[0]),pA(B,b,g,l,A,W[0],J[1]),pA(B,b,g,l,A,W[1],J[0]),pA(B,b,g,l,A,W[1],J[1])}}return b}function bo(l){return l.type==="MultiPolygon"?l.coordinates.map(r=>({type:"Polygon",coordinates:r})):l.type==="MultiLineString"?l.coordinates.map(r=>({type:"LineString",coordinates:r})):l.type==="MultiPoint"?l.coordinates.map(r=>({type:"Point",coordinates:r})):[l]}class Ra{constructor(r,A){this.type=kt,this.geojson=r,this.geometries=A}static parse(r,A){if(r.length!==2)return A.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(xn(r[1])){const u=r[1];if(u.type==="FeatureCollection")return new Ra(u,u.features.map(g=>bo(g.geometry)).flat());if(u.type==="Feature")return new Ra(u,bo(u.geometry));if("type"in u&&"coordinates"in u)return new Ra(u,bo(u))}return A.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(A,u){const g=A.geometry(),_=g.flat().map(S=>Gr([S.x,S.y],A.canonical));if(g.length===0)return NaN;const b=new Da(_[0][1]);let B=1/0;for(const S of u){switch(S.type){case"Point":B=Math.min(B,eo(_,!1,[S.coordinates],!1,b,B));break;case"LineString":B=Math.min(B,eo(_,!1,S.coordinates,!0,b,B));break;case"Polygon":B=Math.min(B,qo(_,!1,S.coordinates,b,B))}if(B===0)return B}return B}(r,this.geometries);if(r.geometryType()==="LineString")return function(A,u){const g=A.geometry(),_=g.flat().map(S=>Gr([S.x,S.y],A.canonical));if(g.length===0)return NaN;const b=new Da(_[0][1]);let B=1/0;for(const S of u){switch(S.type){case"Point":B=Math.min(B,eo(_,!0,[S.coordinates],!1,b,B));break;case"LineString":B=Math.min(B,eo(_,!0,S.coordinates,!0,b,B));break;case"Polygon":B=Math.min(B,qo(_,!0,S.coordinates,b,B))}if(B===0)return B}return B}(r,this.geometries);if(r.geometryType()==="Polygon")return function(A,u){const g=A.geometry();if(g.length===0||g[0].length===0)return NaN;const _=mo(g,0).map(S=>S.map(k=>k.map(N=>Gr([N.x,N.y],A.canonical)))),b=new Da(_[0][0][0][1]);let B=1/0;for(const S of u)for(const k of _){switch(S.type){case"Point":B=Math.min(B,qo([S.coordinates],!1,k,b,B));break;case"LineString":B=Math.min(B,qo(S.coordinates,!0,k,b,B));break;case"Polygon":B=Math.min(B,ds(k,S.coordinates,b,B))}if(B===0)return B}return B}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class to{constructor(r){this.type=Ur,this.key=r}static parse(r,A){if(r.length!==2)return A.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=r[1];return u==null?A.error("Global state property must be defined."):typeof u!="string"?A.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new to(u)}evaluate(r){var A;const u=(A=r.globals)===null||A===void 0?void 0:A.globalState;return u&&Object.keys(u).length!==0?oA(u,this.key):null}eachChild(){}outputDefined(){return!1}}const Ts={"==":Ws,"!=":El,">":Sl,"<":Xs,">=":re,"<=":U,array:Rr,at:OA,boolean:Rr,case:Vn,coalesce:Is,collator:Ee,format:ct,image:Mt,in:Za,"index-of":$a,interpolate:Pi,"interpolate-hcl":Pi,"interpolate-lab":Pi,length:Kt,let:ho,literal:Qr,match:fo,number:Rr,"number-format":$e,object:Rr,slice:Gi,step:Ma,string:Rr,"to-boolean":Ai,"to-color":Ai,"to-number":Ai,"to-string":Ai,var:Vo,within:hs,distance:Ra,"global-state":to};class Ri{constructor(r,A,u,g){this.name=r,this.type=A,this._evaluate=u,this.args=g}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,A){const u=r[0],g=Ri.definitions[u];if(!g)return A.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,b=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,B=b.filter(([k])=>!Array.isArray(k)||k.length===r.length-1);let S=null;for(const[k,N]of B){S=new jo(A.registry,En,A.path,null,A.scope);const H=[];let q=!1;for(let W=1;W<r.length;W++){const J=r[W],oe=Array.isArray(k)?k[W-1]:k.type,ye=S.parse(J,1+H.length,oe);if(!ye){q=!0;break}H.push(ye)}if(!q)if(Array.isArray(k)&&k.length!==H.length)S.error(`Expected ${k.length} arguments, but found ${H.length} instead.`);else{for(let W=0;W<H.length;W++){const J=Array.isArray(k)?k[W]:k.type,oe=H[W];S.concat(W+1).checkSubtype(J,oe.type)}if(S.errors.length===0)return new Ri(u,_,N,H)}}if(B.length===1)A.errors.push(...S.errors);else{const k=(B.length?B:b).map(([H])=>{return q=H,Array.isArray(q)?`(${q.map(In).join(", ")})`:`(${In(q.type)}...)`;var q}).join(" | "),N=[];for(let H=1;H<r.length;H++){const q=A.parse(r[H],1+N.length);if(!q)return null;N.push(In(q.type))}A.error(`Expected arguments of type ${k}, but found (${N.join(", ")}) instead.`)}return null}static register(r,A){Ri.definitions=A;for(const u in A)r[u]=Ri}}function vo(l,[r,A,u,g]){r=r.evaluate(l),A=A.evaluate(l),u=u.evaluate(l);const _=g?g.evaluate(l):1,b=uo(r,A,u,_);if(b)throw new Pn(b);return new Xr(r/255,A/255,u/255,_,!1)}function qA(l,r){return l in r}function Na(l,r){const A=r[l];return A===void 0?null:A}function Ni(l){return{type:l}}function En(l){if(l instanceof Vo)return En(l.boundExpression);if(l instanceof Ri&&l.name==="error"||l instanceof Ee||l instanceof hs||l instanceof Ra||l instanceof to)return!1;const r=l instanceof Ai||l instanceof Rr;let A=!0;return l.eachChild(u=>{A=r?A&&En(u):A&&u instanceof Qr}),!!A&&Sn(l)&&ci(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Sn(l){if(l instanceof Ri&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof hs||l instanceof Ra)return!1;let r=!0;return l.eachChild(A=>{r&&!Sn(A)&&(r=!1)}),r}function Kn(l){if(l instanceof Ri&&l.name==="feature-state")return!1;let r=!0;return l.eachChild(A=>{r&&!Kn(A)&&(r=!1)}),r}function ci(l,r){if(l instanceof Ri&&r.indexOf(l.name)>=0)return!1;let A=!0;return l.eachChild(u=>{A&&!ci(u,r)&&(A=!1)}),A}function ps(l){return{result:"success",value:l}}function ro(l){return{result:"error",value:l}}function Ls(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Ul(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function ZA(l){return!!l.expression&&l.expression.interpolated}function Jr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function ca(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&jn(l)===Hn}function Ba(l){return l}function $A(l,r){const A=l.stops&&typeof l.stops[0][0]=="object",u=A||!(A||l.property!==void 0),g=l.type||(ZA(r)?"exponential":"interval"),_=function(N){switch(N.type){case"color":return Xr.parse;case"padding":return vi.parse;case"numberArray":return br.parse;case"colorArray":return Ti.parse;default:return null}}(r);if(_&&((l=Nr({},l)).stops&&(l.stops=l.stops.map(N=>[N[0],_(N[1])])),l.default=_(l.default?l.default:r.default)),l.colorSpace&&(b=l.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var b;const B=function(N){switch(N){case"exponential":return kl;case"interval":return Ac;case"categorical":return xu;case"identity":return Oc;default:throw new Error(`Unknown function type "${N}"`)}}(g);let S,k;if(g==="categorical"){S=Object.create(null);for(const N of l.stops)S[N[0]]=N[1];k=typeof l.stops[0][0]}if(A){const N={},H=[];for(let J=0;J<l.stops.length;J++){const oe=l.stops[J],ye=oe[0].zoom;N[ye]===void 0&&(N[ye]={zoom:ye,type:l.type,property:l.property,default:l.default,stops:[]},H.push(ye)),N[ye].stops.push([oe[0].value,oe[1]])}const q=[];for(const J of H)q.push([N[J].zoom,$A(N[J],r)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:Pi.interpolationFactor.bind(void 0,W),zoomStops:q.map(J=>J[0]),evaluate:({zoom:J},oe)=>kl({stops:q,base:l.base},r,J).evaluate(J,oe)}}if(u){const N=g==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Pi.interpolationFactor.bind(void 0,N),zoomStops:l.stops.map(H=>H[0]),evaluate:({zoom:H})=>B(l,r,H,S,k)}}return{kind:"source",evaluate(N,H){const q=H&&H.properties?H.properties[l.property]:void 0;return q===void 0?Zo(l.default,r.default):B(l,r,q,S,k)}}}function Zo(l,r,A){return l!==void 0?l:r!==void 0?r:A!==void 0?A:void 0}function xu(l,r,A,u,g){return Zo(typeof A===g?u[A]:void 0,l.default,r.default)}function Ac(l,r,A){if(Jr(A)!=="number")return Zo(l.default,r.default);const u=l.stops.length;if(u===1||A<=l.stops[0][0])return l.stops[0][1];if(A>=l.stops[u-1][0])return l.stops[u-1][1];const g=po(l.stops.map(_=>_[0]),A);return l.stops[g][1]}function kl(l,r,A){const u=l.base!==void 0?l.base:1;if(Jr(A)!=="number")return Zo(l.default,r.default);const g=l.stops.length;if(g===1||A<=l.stops[0][0])return l.stops[0][1];if(A>=l.stops[g-1][0])return l.stops[g-1][1];const _=po(l.stops.map(N=>N[0]),A),b=function(N,H,q,W){const J=W-q,oe=N-q;return J===0?0:H===1?oe/J:(Math.pow(H,oe)-1)/(Math.pow(H,J)-1)}(A,u,l.stops[_][0],l.stops[_+1][0]),B=l.stops[_][1],S=l.stops[_+1][1],k=Ua[r.type]||Ba;return typeof B.evaluate=="function"?{evaluate(...N){const H=B.evaluate.apply(void 0,N),q=S.evaluate.apply(void 0,N);if(H!==void 0&&q!==void 0)return k(H,q,b,l.colorSpace)}}:k(B,S,b,l.colorSpace)}function Oc(l,r,A){switch(r.type){case"color":A=Xr.parse(A);break;case"formatted":A=aa.fromString(A.toString());break;case"resolvedImage":A=sa.fromString(A.toString());break;case"padding":A=vi.parse(A);break;case"colorArray":A=Ti.parse(A);break;case"numberArray":A=br.parse(A);break;default:Jr(A)===r.type||r.type==="enum"&&r.values[A]||(A=void 0)}return Zo(A,l.default,r.default)}Ri.register(Ts,{error:[{kind:"error"},[yr],(l,[r])=>{throw new Pn(r.evaluate(l))}],typeof:[yr,[Ur],(l,[r])=>In(jn(r.evaluate(l)))],"to-rgba":[ba(kt,4),[yn],(l,[r])=>{const[A,u,g,_]=r.evaluate(l).rgb;return[255*A,255*u,255*g,_]}],rgb:[yn,[kt,kt,kt],vo],rgba:[yn,[kt,kt,kt,kt],vo],has:{type:Tr,overloads:[[[yr],(l,[r])=>qA(r.evaluate(l),l.properties())],[[yr,Hn],(l,[r,A])=>qA(r.evaluate(l),A.evaluate(l))]]},get:{type:Ur,overloads:[[[yr],(l,[r])=>Na(r.evaluate(l),l.properties())],[[yr,Hn],(l,[r,A])=>Na(r.evaluate(l),A.evaluate(l))]]},"feature-state":[Ur,[yr],(l,[r])=>Na(r.evaluate(l),l.featureState||{})],properties:[Hn,[],l=>l.properties()],"geometry-type":[yr,[],l=>l.geometryType()],id:[Ur,[],l=>l.id()],zoom:[kt,[],l=>l.globals.zoom],"heatmap-density":[kt,[],l=>l.globals.heatmapDensity||0],"line-progress":[kt,[],l=>l.globals.lineProgress||0],accumulated:[Ur,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[kt,Ni(kt),(l,r)=>{let A=0;for(const u of r)A+=u.evaluate(l);return A}],"*":[kt,Ni(kt),(l,r)=>{let A=1;for(const u of r)A*=u.evaluate(l);return A}],"-":{type:kt,overloads:[[[kt,kt],(l,[r,A])=>r.evaluate(l)-A.evaluate(l)],[[kt],(l,[r])=>-r.evaluate(l)]]},"/":[kt,[kt,kt],(l,[r,A])=>r.evaluate(l)/A.evaluate(l)],"%":[kt,[kt,kt],(l,[r,A])=>r.evaluate(l)%A.evaluate(l)],ln2:[kt,[],()=>Math.LN2],pi:[kt,[],()=>Math.PI],e:[kt,[],()=>Math.E],"^":[kt,[kt,kt],(l,[r,A])=>Math.pow(r.evaluate(l),A.evaluate(l))],sqrt:[kt,[kt],(l,[r])=>Math.sqrt(r.evaluate(l))],log10:[kt,[kt],(l,[r])=>Math.log(r.evaluate(l))/Math.LN10],ln:[kt,[kt],(l,[r])=>Math.log(r.evaluate(l))],log2:[kt,[kt],(l,[r])=>Math.log(r.evaluate(l))/Math.LN2],sin:[kt,[kt],(l,[r])=>Math.sin(r.evaluate(l))],cos:[kt,[kt],(l,[r])=>Math.cos(r.evaluate(l))],tan:[kt,[kt],(l,[r])=>Math.tan(r.evaluate(l))],asin:[kt,[kt],(l,[r])=>Math.asin(r.evaluate(l))],acos:[kt,[kt],(l,[r])=>Math.acos(r.evaluate(l))],atan:[kt,[kt],(l,[r])=>Math.atan(r.evaluate(l))],min:[kt,Ni(kt),(l,r)=>Math.min(...r.map(A=>A.evaluate(l)))],max:[kt,Ni(kt),(l,r)=>Math.max(...r.map(A=>A.evaluate(l)))],abs:[kt,[kt],(l,[r])=>Math.abs(r.evaluate(l))],round:[kt,[kt],(l,[r])=>{const A=r.evaluate(l);return A<0?-Math.round(-A):Math.round(A)}],floor:[kt,[kt],(l,[r])=>Math.floor(r.evaluate(l))],ceil:[kt,[kt],(l,[r])=>Math.ceil(r.evaluate(l))],"filter-==":[Tr,[yr,Ur],(l,[r,A])=>l.properties()[r.value]===A.value],"filter-id-==":[Tr,[Ur],(l,[r])=>l.id()===r.value],"filter-type-==":[Tr,[yr],(l,[r])=>l.geometryType()===r.value],"filter-<":[Tr,[yr,Ur],(l,[r,A])=>{const u=l.properties()[r.value],g=A.value;return typeof u==typeof g&&u<g}],"filter-id-<":[Tr,[Ur],(l,[r])=>{const A=l.id(),u=r.value;return typeof A==typeof u&&A<u}],"filter->":[Tr,[yr,Ur],(l,[r,A])=>{const u=l.properties()[r.value],g=A.value;return typeof u==typeof g&&u>g}],"filter-id->":[Tr,[Ur],(l,[r])=>{const A=l.id(),u=r.value;return typeof A==typeof u&&A>u}],"filter-<=":[Tr,[yr,Ur],(l,[r,A])=>{const u=l.properties()[r.value],g=A.value;return typeof u==typeof g&&u<=g}],"filter-id-<=":[Tr,[Ur],(l,[r])=>{const A=l.id(),u=r.value;return typeof A==typeof u&&A<=u}],"filter->=":[Tr,[yr,Ur],(l,[r,A])=>{const u=l.properties()[r.value],g=A.value;return typeof u==typeof g&&u>=g}],"filter-id->=":[Tr,[Ur],(l,[r])=>{const A=l.id(),u=r.value;return typeof A==typeof u&&A>=u}],"filter-has":[Tr,[Ur],(l,[r])=>r.value in l.properties()],"filter-has-id":[Tr,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[Tr,[ba(yr)],(l,[r])=>r.value.indexOf(l.geometryType())>=0],"filter-id-in":[Tr,[ba(Ur)],(l,[r])=>r.value.indexOf(l.id())>=0],"filter-in-small":[Tr,[yr,ba(Ur)],(l,[r,A])=>A.value.indexOf(l.properties()[r.value])>=0],"filter-in-large":[Tr,[yr,ba(Ur)],(l,[r,A])=>function(u,g,_,b){for(;_<=b;){const B=_+b>>1;if(g[B]===u)return!0;g[B]>u?b=B-1:_=B+1}return!1}(l.properties()[r.value],A.value,0,A.value.length-1)],all:{type:Tr,overloads:[[[Tr,Tr],(l,[r,A])=>r.evaluate(l)&&A.evaluate(l)],[Ni(Tr),(l,r)=>{for(const A of r)if(!A.evaluate(l))return!1;return!0}]]},any:{type:Tr,overloads:[[[Tr,Tr],(l,[r,A])=>r.evaluate(l)||A.evaluate(l)],[Ni(Tr),(l,r)=>{for(const A of r)if(A.evaluate(l))return!0;return!1}]]},"!":[Tr,[Tr],(l,[r])=>!r.evaluate(l)],"is-supported-script":[Tr,[yr],(l,[r])=>{const A=l.globals&&l.globals.isSupportedScript;return!A||A(r.evaluate(l))}],upcase:[yr,[yr],(l,[r])=>r.evaluate(l).toUpperCase()],downcase:[yr,[yr],(l,[r])=>r.evaluate(l).toLowerCase()],concat:[yr,Ni(Ur),(l,r)=>r.map(A=>tn(A.evaluate(l))).join("")],"resolved-locale":[yr,[as],(l,[r])=>r.evaluate(l).resolvedLocale()]});class Ql{constructor(r,A){this.expression=r,this._warningHistory={},this._evaluator=new Ho,this._defaultValue=A?function(u){if(u.type==="color"&&ca(u.default))return new Xr(0,0,0,0);switch(u.type){case"color":return Xr.parse(u.default)||null;case"padding":return vi.parse(u.default)||null;case"numberArray":return br.parse(u.default)||null;case"colorArray":return Ti.parse(u.default)||null;case"variableAnchorOffsetCollection":return Qi.parse(u.default)||null;case"projectionDefinition":return Li.parse(u.default)||null;default:return u.default===void 0?null:u.default}}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(r,A,u,g,_,b){return this._evaluator.globals=r,this._evaluator.feature=A,this._evaluator.featureState=u,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(r,A,u,g,_,b){this._evaluator.globals=r,this._evaluator.feature=A||null,this._evaluator.featureState=u||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new Pn(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){return this._warningHistory[B.message]||(this._warningHistory[B.message]=!0,typeof console<"u"&&console.warn(B.message)),this._defaultValue}}}function gA(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Ts}function WA(l,r){const A=new jo(Ts,En,[],r?function(g){const _={color:yn,string:yr,number:kt,enum:yr,boolean:Tr,formatted:Vs,padding:ss,numberArray:Pa,colorArray:Gs,projectionDefinition:vn,resolvedImage:Ks,variableAnchorOffsetCollection:ti};return g.type==="array"?ba(_[g.value]||Ur,g.length):_[g.type]}(r):void 0),u=A.parse(l,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?ps(new Ql(u,r)):ro(A.errors)}class XA{constructor(r,A){this.kind=r,this._styleExpression=A,this.isStateDependent=r!=="constant"&&!Kn(A.expression)}evaluateWithoutErrorHandling(r,A,u,g,_,b){return this._styleExpression.evaluateWithoutErrorHandling(r,A,u,g,_,b)}evaluate(r,A,u,g,_,b){return this._styleExpression.evaluate(r,A,u,g,_,b)}}class JA{constructor(r,A,u,g){this.kind=r,this.zoomStops=u,this._styleExpression=A,this.isStateDependent=r!=="camera"&&!Kn(A.expression),this.interpolationType=g}evaluateWithoutErrorHandling(r,A,u,g,_,b){return this._styleExpression.evaluateWithoutErrorHandling(r,A,u,g,_,b)}evaluate(r,A,u,g,_,b){return this._styleExpression.evaluate(r,A,u,g,_,b)}interpolationFactor(r,A,u){return this.interpolationType?Pi.interpolationFactor(this.interpolationType,r,A,u):0}}function zc(l,r){const A=WA(l,r);if(A.result==="error")return A;const u=A.value.expression,g=Sn(u);if(!g&&!Ls(r))return ro([new Fr("","data expressions not supported")]);const _=ci(u,["zoom"]);if(!_&&!Ul(r))return ro([new Fr("","zoom expressions not supported")]);const b=YA(u);return b||_?b instanceof Fr?ro([b]):b instanceof Pi&&!ZA(r)?ro([new Fr("",'"interpolate" expressions cannot be used with this property')]):ps(b?new JA(g?"camera":"composite",A.value,b.labels,b instanceof Pi?b.interpolation:void 0):new XA(g?"constant":"source",A.value)):ro([new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dl{constructor(r,A){this._parameters=r,this._specification=A,Nr(this,$A(this._parameters,this._specification))}static deserialize(r){return new Dl(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function YA(l){let r=null;if(l instanceof ho)r=YA(l.result);else if(l instanceof Is){for(const A of l.args)if(r=YA(A),r)break}else(l instanceof Ma||l instanceof Pi)&&l.input instanceof Ri&&l.input.name==="zoom"&&(r=l);return r instanceof Fr||l.eachChild(A=>{const u=YA(A);u instanceof Fr?r=u:!r&&u?r=new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&u&&r!==u&&(r=new Fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Rl(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const r of l.slice(1))if(!Rl(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Hc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nl(l){if(l==null)return{filter:()=>!0,needGeometry:!1};Rl(l)||(l=el(l));const r=WA(l,Hc);if(r.result==="error")throw new Error(r.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,u,g)=>r.value.evaluate(A,u,{},g),needGeometry:Bu(l)}}function lc(l,r){return l<r?-1:l>r?1:0}function Bu(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let r=1;r<l.length;r++)if(Bu(l[r]))return!0;return!1}function el(l){if(!l)return!0;const r=l[0];return l.length<=1?r!=="any":r==="=="?Ol(l[1],l[2],"=="):r==="!="?cc(Ol(l[1],l[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ol(l[1],l[2],r):r==="any"?(A=l.slice(1),["any"].concat(A.map(el))):r==="all"?["all"].concat(l.slice(1).map(el)):r==="none"?["all"].concat(l.slice(1).map(el).map(cc)):r==="in"?tl(l[1],l.slice(2)):r==="!in"?cc(tl(l[1],l.slice(2))):r==="has"?Cu(l[1]):r!=="!has"||cc(Cu(l[1]));var A}function Ol(l,r,A){switch(l){case"$type":return[`filter-type-${A}`,r];case"$id":return[`filter-id-${A}`,r];default:return[`filter-${A}`,l,r]}}function tl(l,r){if(r.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(A=>typeof A!=typeof r[0])?["filter-in-large",l,["literal",r.sort(lc)]]:["filter-in-small",l,["literal",r]]}}function Cu(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function cc(l){return["!",l]}function zl(l){const r=typeof l;if(r==="number"||r==="boolean"||r==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let g="[";for(const _ of l)g+=`${zl(_)},`;return`${g}]`}const A=Object.keys(l).sort();let u="{";for(let g=0;g<A.length;g++)u+=`${JSON.stringify(A[g])}:${zl(l[A[g]])},`;return`${u}}`}function Iu(l){let r="";for(const A of ht)r+=`/${zl(l[A])}`;return r}function Hl(l){const r=l.value;return r?[new _t(l.key,r,"constants have been deprecated as of v8")]:[]}function ui(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function $o(l){if(Array.isArray(l))return l.map($o);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const r={};for(const A in l)r[A]=$o(l[A]);return r}return ui(l)}function xi(l){const r=l.key,A=l.value,u=l.valueSpec||{},g=l.objectElementValidators||{},_=l.style,b=l.styleSpec,B=l.validateSpec;let S=[];const k=Jr(A);if(k!=="object")return[new _t(r,A,`object expected, ${k} found`)];for(const N in A){const H=N.split(".")[0],q=oA(u,H)||u["*"];let W;if(oA(g,H))W=g[H];else if(oA(u,H))W=B;else if(g["*"])W=g["*"];else{if(!u["*"]){S.push(new _t(r,A[N],`unknown property "${N}"`));continue}W=B}S=S.concat(W({key:(r&&`${r}.`)+N,value:A[N],valueSpec:q,style:_,styleSpec:b,object:A,objectKey:N,validateSpec:B},A))}for(const N in u)g[N]||u[N].required&&u[N].default===void 0&&A[N]===void 0&&S.push(new _t(r,A,`missing required property "${N}"`));return S}function Xa(l){const r=l.value,A=l.valueSpec,u=l.style,g=l.styleSpec,_=l.key,b=l.arrayElementValidator||l.validateSpec;if(Jr(r)!=="array")return[new _t(_,r,`array expected, ${Jr(r)} found`)];if(A.length&&r.length!==A.length)return[new _t(_,r,`array length ${A.length} expected, length ${r.length} found`)];if(A["min-length"]&&r.length<A["min-length"])return[new _t(_,r,`array length at least ${A["min-length"]} expected, length ${r.length} found`)];let B={type:A.value,values:A.values};g.$version<7&&(B.function=A.function),Jr(A.value)==="object"&&(B=A.value);let S=[];for(let k=0;k<r.length;k++)S=S.concat(b({array:r,arrayIndex:k,value:r[k],valueSpec:B,validateSpec:l.validateSpec,style:u,styleSpec:g,key:`${_}[${k}]`}));return S}function Ja(l){const r=l.key,A=l.value,u=l.valueSpec;let g=Jr(A);return g==="number"&&A!=A&&(g="NaN"),g!=="number"?[new _t(r,A,`number expected, ${g} found`)]:"minimum"in u&&A<u.minimum?[new _t(r,A,`${A} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&A>u.maximum?[new _t(r,A,`${A} is greater than the maximum value ${u.maximum}`)]:[]}function jc(l){const r=l.valueSpec,A=ui(l.value.type);let u,g,_,b={};const B=A!=="categorical"&&l.value.property===void 0,S=!B,k=Jr(l.value.stops)==="array"&&Jr(l.value.stops[0])==="array"&&Jr(l.value.stops[0][0])==="object",N=xi({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(W){if(A==="identity")return[new _t(W.key,W.value,'identity function may not have a "stops" property')];let J=[];const oe=W.value;return J=J.concat(Xa({key:W.key,value:oe,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:H})),Jr(oe)==="array"&&oe.length===0&&J.push(new _t(W.key,oe,"array must have at least one stop")),J},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:r,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return A==="identity"&&B&&N.push(new _t(l.key,l.value,'missing required property "property"')),A==="identity"||l.value.stops||N.push(new _t(l.key,l.value,'missing required property "stops"')),A==="exponential"&&l.valueSpec.expression&&!ZA(l.valueSpec)&&N.push(new _t(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(S&&!Ls(l.valueSpec)?N.push(new _t(l.key,l.value,"property functions not supported")):B&&!Ul(l.valueSpec)&&N.push(new _t(l.key,l.value,"zoom functions not supported"))),A!=="categorical"&&!k||l.value.property!==void 0||N.push(new _t(l.key,l.value,'"property" property is required')),N;function H(W){let J=[];const oe=W.value,ye=W.key;if(Jr(oe)!=="array")return[new _t(ye,oe,`array expected, ${Jr(oe)} found`)];if(oe.length!==2)return[new _t(ye,oe,`array length 2 expected, length ${oe.length} found`)];if(k){if(Jr(oe[0])!=="object")return[new _t(ye,oe,`object expected, ${Jr(oe[0])} found`)];if(oe[0].zoom===void 0)return[new _t(ye,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new _t(ye,oe,"object stop key must have value")];if(_&&_>ui(oe[0].zoom))return[new _t(ye,oe[0].zoom,"stop zoom values must appear in ascending order")];ui(oe[0].zoom)!==_&&(_=ui(oe[0].zoom),g=void 0,b={}),J=J.concat(xi({key:`${ye}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Ja,value:q}}))}else J=J.concat(q({key:`${ye}[0]`,value:oe[0],validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},oe));return gA($o(oe[1]))?J.concat([new _t(`${ye}[1]`,oe[1],"expressions are not allowed in function stops.")]):J.concat(W.validateSpec({key:`${ye}[1]`,value:oe[1],valueSpec:r,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function q(W,J){const oe=Jr(W.value),ye=ui(W.value),Ce=W.value!==null?W.value:J;if(u){if(oe!==u)return[new _t(W.key,Ce,`${oe} stop domain type must match previous stop domain type ${u}`)]}else u=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new _t(W.key,Ce,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&A!=="categorical"){let qe=`number expected, ${oe} found`;return Ls(r)&&A===void 0&&(qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _t(W.key,Ce,qe)]}return A!=="categorical"||oe!=="number"||isFinite(ye)&&Math.floor(ye)===ye?A!=="categorical"&&oe==="number"&&g!==void 0&&ye<g?[new _t(W.key,Ce,"stop domain values must appear in ascending order")]:(g=ye,A==="categorical"&&ye in b?[new _t(W.key,Ce,"stop domain values must be unique")]:(b[ye]=!0,[])):[new _t(W.key,Ce,`integer expected, found ${ye}`)]}}function Ps(l){const r=(l.expressionContext==="property"?zc:WA)($o(l.value),l.valueSpec);if(r.result==="error")return r.value.map(u=>new _t(`${l.key}${u.key}`,l.value,u.message));const A=r.value.expression||r.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!A.outputDefined())return[new _t(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Kn(A))return[new _t(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Kn(A))return[new _t(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!ci(A,["zoom","feature-state"]))return[new _t(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Sn(A))return[new _t(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function no(l){const r=l.key,A=l.value,u=Jr(A);return u!=="string"?[new _t(r,A,`color expected, ${u} found`)]:Xr.parse(String(A))?[]:[new _t(r,A,`color expected, "${A}" found`)]}function ua(l){const r=l.key,A=l.value,u=l.valueSpec,g=[];return Array.isArray(u.values)?u.values.indexOf(ui(A))===-1&&g.push(new _t(r,A,`expected one of [${u.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(u.values).indexOf(ui(A))===-1&&g.push(new _t(r,A,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(A)} found`)),g}function Vc(l){return Rl($o(l.value))?Ps(Nr({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fu(l)}function Fu(l){const r=l.value,A=l.key;if(Jr(r)!=="array")return[new _t(A,r,`array expected, ${Jr(r)} found`)];const u=l.styleSpec;let g,_=[];if(r.length<1)return[new _t(A,r,"filter array must have at least 1 element")];switch(_=_.concat(ua({key:`${A}[0]`,value:r[0],valueSpec:u.filter_operator,style:l.style,styleSpec:l.styleSpec})),ui(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&ui(r[1])==="$type"&&_.push(new _t(A,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&_.push(new _t(A,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(g=Jr(r[1]),g!=="string"&&_.push(new _t(`${A}[1]`,r[1],`string expected, ${g} found`)));for(let b=2;b<r.length;b++)g=Jr(r[b]),ui(r[1])==="$type"?_=_.concat(ua({key:`${A}[${b}]`,value:r[b],valueSpec:u.geometry_type,style:l.style,styleSpec:l.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new _t(`${A}[${b}]`,r[b],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let b=1;b<r.length;b++)_=_.concat(Fu({key:`${A}[${b}]`,value:r[b],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":g=Jr(r[1]),r.length!==2?_.push(new _t(A,r,`filter array for "${r[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new _t(`${A}[1]`,r[1],`string expected, ${g} found`))}return _}function Gc(l,r){const A=l.key,u=l.validateSpec,g=l.style,_=l.styleSpec,b=l.value,B=l.objectKey,S=_[`${r}_${l.layerType}`];if(!S)return[];const k=B.match(/^(.*)-transition$/);if(r==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return u({key:A,value:b,valueSpec:_.transition,style:g,styleSpec:_});const N=l.valueSpec||S[B];if(!N)return[new _t(A,b,`unknown property "${B}"`)];let H;if(Jr(b)==="string"&&Ls(N)&&!N.tokens&&(H=/^{([^}]+)}$/.exec(b)))return[new _t(A,b,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const q=[];return l.layerType==="symbol"&&(B==="text-field"&&g&&!g.glyphs&&q.push(new _t(A,b,'use of "text-field" requires a style "glyphs" property')),B==="text-font"&&ca($o(b))&&ui(b.type)==="identity"&&q.push(new _t(A,b,'"text-font" does not support identity functions'))),q.concat(u({key:l.key,value:b,valueSpec:N,style:g,styleSpec:_,expressionContext:"property",propertyType:r,propertyKey:B}))}function Kc(l){return Gc(l,"paint")}function mA(l){return Gc(l,"layout")}function yA(l){let r=[];const A=l.value,u=l.key,g=l.style,_=l.styleSpec;if(Jr(A)!=="object")return[new _t(u,A,`object expected, ${Jr(A)} found`)];A.type||A.ref||r.push(new _t(u,A,'either "type" or "ref" is required'));let b=ui(A.type);const B=ui(A.ref);if(A.id){const S=ui(A.id);for(let k=0;k<l.arrayIndex;k++){const N=g.layers[k];ui(N.id)===S&&r.push(new _t(u,A.id,`duplicate layer id "${A.id}", previously used at line ${N.id.__line__}`))}}if("ref"in A){let S;["type","source","source-layer","filter","layout"].forEach(k=>{k in A&&r.push(new _t(u,A[k],`"${k}" is prohibited for ref layers`))}),g.layers.forEach(k=>{ui(k.id)===B&&(S=k)}),S?S.ref?r.push(new _t(u,A.ref,"ref cannot reference another ref layer")):b=ui(S.type):r.push(new _t(u,A.ref,`ref layer "${B}" not found`))}else if(b!=="background")if(A.source){const S=g.sources&&g.sources[A.source],k=S&&ui(S.type);S?k==="vector"&&b==="raster"?r.push(new _t(u,A.source,`layer "${A.id}" requires a raster source`)):k!=="raster-dem"&&b==="hillshade"?r.push(new _t(u,A.source,`layer "${A.id}" requires a raster-dem source`)):k==="raster"&&b!=="raster"?r.push(new _t(u,A.source,`layer "${A.id}" requires a vector source`)):k!=="vector"||A["source-layer"]?k==="raster-dem"&&b!=="hillshade"?r.push(new _t(u,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!A.paint||!A.paint["line-gradient"]||k==="geojson"&&S.lineMetrics||r.push(new _t(u,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new _t(u,A,`layer "${A.id}" must specify a "source-layer"`)):r.push(new _t(u,A.source,`source "${A.source}" not found`))}else r.push(new _t(u,A,'missing required property "source"'));return r=r.concat(xi({key:u,value:A,valueSpec:_.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${u}.type`,value:A.type,valueSpec:_.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:A,objectKey:"type"}),filter:Vc,layout:S=>xi({layer:A,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>mA(Nr({layerType:b},k))}}),paint:S=>xi({layer:A,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>Kc(Nr({layerType:b},k))}})}})),r}function Ui(l){const r=l.value,A=l.key,u=Jr(r);return u!=="string"?[new _t(A,r,`string expected, ${u} found`)]:[]}const wo={promoteId:function({key:l,value:r}){if(Jr(r)==="string")return Ui({key:l,value:r});{const A=[];for(const u in r)A.push(...Ui({key:`${l}.${u}`,value:r[u]}));return A}}};function rl(l){const r=l.value,A=l.key,u=l.styleSpec,g=l.style,_=l.validateSpec;if(!r.type)return[new _t(A,r,'"type" is required')];const b=ui(r.type);let B;switch(b){case"vector":case"raster":return B=xi({key:A,value:r,valueSpec:u[`source_${b.replace("-","_")}`],style:l.style,styleSpec:u,objectElementValidators:wo,validateSpec:_}),B;case"raster-dem":return B=function(S){var k;const N=(k=S.sourceName)!==null&&k!==void 0?k:"",H=S.value,q=S.styleSpec,W=q.source_raster_dem,J=S.style;let oe=[];const ye=Jr(H);if(H===void 0)return oe;if(ye!=="object")return oe.push(new _t("source_raster_dem",H,`object expected, ${ye} found`)),oe;const Ce=ui(H.encoding)==="custom",qe=["redFactor","greenFactor","blueFactor","baseShift"],Pe=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const $ in H)!Ce&&qe.includes($)?oe.push(new _t($,H[$],`In "${N}": "${$}" is only valid when "encoding" is set to "custom". ${Pe} encoding found`)):W[$]?oe=oe.concat(S.validateSpec({key:$,value:H[$],valueSpec:W[$],validateSpec:S.validateSpec,style:J,styleSpec:q})):oe.push(new _t($,H[$],`unknown property "${$}"`));return oe}({sourceName:A,value:r,style:l.style,styleSpec:u,validateSpec:_}),B;case"geojson":if(B=xi({key:A,value:r,valueSpec:u.source_geojson,style:g,styleSpec:u,validateSpec:_,objectElementValidators:wo}),r.cluster)for(const S in r.clusterProperties){const[k,N]=r.clusterProperties[S],H=typeof k=="string"?[k,["accumulated"],["get",S]]:k;B.push(...Ps({key:`${A}.${S}.map`,value:N,expressionContext:"cluster-map"})),B.push(...Ps({key:`${A}.${S}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return B;case"video":return xi({key:A,value:r,valueSpec:u.source_video,style:g,validateSpec:_,styleSpec:u});case"image":return xi({key:A,value:r,valueSpec:u.source_image,style:g,validateSpec:_,styleSpec:u});case"canvas":return[new _t(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ua({key:`${A}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function nl(l){const r=l.value,A=l.styleSpec,u=A.light,g=l.style;let _=[];const b=Jr(r);if(r===void 0)return _;if(b!=="object")return _=_.concat([new _t("light",r,`object expected, ${b} found`)]),_;for(const B in r){const S=B.match(/^(.*)-transition$/);_=_.concat(S&&u[S[1]]&&u[S[1]].transition?l.validateSpec({key:B,value:r[B],valueSpec:A.transition,validateSpec:l.validateSpec,style:g,styleSpec:A}):u[B]?l.validateSpec({key:B,value:r[B],valueSpec:u[B],validateSpec:l.validateSpec,style:g,styleSpec:A}):[new _t(B,r[B],`unknown property "${B}"`)])}return _}function uc(l){const r=l.value,A=l.styleSpec,u=A.sky,g=l.style,_=Jr(r);if(r===void 0)return[];if(_!=="object")return[new _t("sky",r,`object expected, ${_} found`)];let b=[];for(const B in r)b=b.concat(u[B]?l.validateSpec({key:B,value:r[B],valueSpec:u[B],style:g,styleSpec:A}):[new _t(B,r[B],`unknown property "${B}"`)]);return b}function il(l){const r=l.value,A=l.styleSpec,u=A.terrain,g=l.style;let _=[];const b=Jr(r);if(r===void 0)return _;if(b!=="object")return _=_.concat([new _t("terrain",r,`object expected, ${b} found`)]),_;for(const B in r)_=_.concat(u[B]?l.validateSpec({key:B,value:r[B],valueSpec:u[B],validateSpec:l.validateSpec,style:g,styleSpec:A}):[new _t(B,r[B],`unknown property "${B}"`)]);return _}function hc(l){let r=[];const A=l.value,u=l.key;if(Array.isArray(A)){const g=[],_=[];for(const b in A)A[b].id&&g.includes(A[b].id)&&r.push(new _t(u,A,`all the sprites' ids must be unique, but ${A[b].id} is duplicated`)),g.push(A[b].id),A[b].url&&_.includes(A[b].url)&&r.push(new _t(u,A,`all the sprites' URLs must be unique, but ${A[b].url} is duplicated`)),_.push(A[b].url),r=r.concat(xi({key:`${u}[${b}]`,value:A[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return r}return Ui({key:u,value:A})}function fc(l){return r=l.value,r&&r.constructor===Object?[]:[new _t(l.key,l.value,`object expected, ${Jr(l.value)} found`)];var r}const Eu={"*":()=>[],array:Xa,boolean:function(l){const r=l.value,A=l.key,u=Jr(r);return u!=="boolean"?[new _t(A,r,`boolean expected, ${u} found`)]:[]},number:Ja,color:no,constants:Hl,enum:ua,filter:Vc,function:jc,layer:yA,object:xi,source:rl,light:nl,sky:uc,terrain:il,projection:function(l){const r=l.value,A=l.styleSpec,u=A.projection,g=l.style,_=Jr(r);if(r===void 0)return[];if(_!=="object")return[new _t("projection",r,`object expected, ${_} found`)];let b=[];for(const B in r)b=b.concat(u[B]?l.validateSpec({key:B,value:r[B],valueSpec:u[B],style:g,styleSpec:A}):[new _t(B,r[B],`unknown property "${B}"`)]);return b},projectionDefinition:function(l){const r=l.key;let A=l.value;A=A instanceof String?A.valueOf():A;const u=Jr(A);return u!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(A)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(A)?["array","string"].includes(u)?[]:[new _t(r,A,`projection expected, invalid type "${u}" found`)]:[new _t(r,A,`projection expected, invalid array ${JSON.stringify(A)} found`)]},string:Ui,formatted:function(l){return Ui(l).length===0?[]:Ps(l)},resolvedImage:function(l){return Ui(l).length===0?[]:Ps(l)},padding:function(l){const r=l.key,A=l.value;if(Jr(A)==="array"){if(A.length<1||A.length>4)return[new _t(r,A,`padding requires 1 to 4 values; ${A.length} values found`)];const u={type:"number"};let g=[];for(let _=0;_<A.length;_++)g=g.concat(l.validateSpec({key:`${r}[${_}]`,value:A[_],validateSpec:l.validateSpec,valueSpec:u}));return g}return Ja({key:r,value:A,valueSpec:{}})},numberArray:function(l){const r=l.key,A=l.value;if(Jr(A)==="array"){const u={type:"number"};if(A.length<1)return[new _t(r,A,"array length at least 1 expected, length 0 found")];let g=[];for(let _=0;_<A.length;_++)g=g.concat(l.validateSpec({key:`${r}[${_}]`,value:A[_],validateSpec:l.validateSpec,valueSpec:u}));return g}return Ja({key:r,value:A,valueSpec:{}})},colorArray:function(l){const r=l.key,A=l.value;if(Jr(A)==="array"){if(A.length<1)return[new _t(r,A,"array length at least 1 expected, length 0 found")];let u=[];for(let g=0;g<A.length;g++)u=u.concat(no({key:`${r}[${g}]`,value:A[g]}));return u}return no({key:r,value:A})},variableAnchorOffsetCollection:function(l){const r=l.key,A=l.value,u=Jr(A),g=l.styleSpec;if(u!=="array"||A.length<1||A.length%2!=0)return[new _t(r,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let b=0;b<A.length;b+=2)_=_.concat(ua({key:`${r}[${b}]`,value:A[b],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(Xa({key:`${r}[${b+1}]`,value:A[b+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:g}));return _},sprite:hc,state:fc};function al(l){const r=l.value,A=l.valueSpec,u=l.styleSpec;return l.validateSpec=al,A.expression&&ca(ui(r))?jc(l):A.expression&&gA($o(r))?Ps(l):A.type&&Eu[A.type]?Eu[A.type](l):xi(Nr({},l,{valueSpec:A.type?u[A.type]:A}))}function Su(l){const r=l.value,A=l.key,u=Ui(l);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new _t(A,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new _t(A,r,'"glyphs" url must include a "{range}" token'))),u}function ha(l,r=pe){let A=[];return A=A.concat(al({key:"",value:l,valueSpec:r.$root,styleSpec:r,style:l,validateSpec:al,objectElementValidators:{glyphs:Su,"*":()=>[]}})),l.constants&&(A=A.concat(Hl({key:"constants",value:l.constants}))),_A(A)}function Ms(l){return function(r){return l({...r,validateSpec:al})}}function _A(l){return[].concat(l).sort((r,A)=>r.line-A.line)}function Oa(l){return function(...r){return _A(l.apply(this,r))}}ha.source=Oa(Ms(rl)),ha.sprite=Oa(Ms(hc)),ha.glyphs=Oa(Ms(Su)),ha.light=Oa(Ms(nl)),ha.sky=Oa(Ms(uc)),ha.terrain=Oa(Ms(il)),ha.state=Oa(Ms(fc)),ha.layer=Oa(Ms(yA)),ha.filter=Oa(Ms(Vc)),ha.paintProperty=Oa(Ms(Kc)),ha.layoutProperty=Oa(Ms(mA));const sl=ha,dc=sl.light,Tu=sl.sky,w=sl.paintProperty,I=sl.layoutProperty;function R(l,r){let A=!1;if(r&&r.length)for(const u of r)l.fire(new Le(new Error(u.message))),A=!0;return A}class j{constructor(r,A,u){const g=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const b=new Int32Array(this.arrayBuffer);r=b[0],this.d=(A=b[1])+2*(u=b[2]);for(let S=0;S<this.d*this.d;S++){const k=b[3+S],N=b[3+S+1];g.push(k===N?null:b.subarray(k,N))}const B=b[3+g.length+1];this.keys=b.subarray(b[3+g.length],B),this.bboxes=b.subarray(B),this.insert=this._insertReadonly}else{this.d=A+2*u;for(let b=0;b<this.d*this.d;b++)g.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=r,this.padding=u,this.scale=A/r,this.uid=0;const _=u/A*r;this.min=-_,this.max=r+_}insert(r,A,u,g,_){this._forEachCell(A,u,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(A),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,A,u,g,_,b){this.cells[_].push(b)}query(r,A,u,g,_){const b=this.min,B=this.max;if(r<=b&&A<=b&&B<=u&&B<=g&&!_)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(r,A,u,g,this._queryCell,S,{},_),S}}_queryCell(r,A,u,g,_,b,B,S){const k=this.cells[_];if(k!==null){const N=this.keys,H=this.bboxes;for(let q=0;q<k.length;q++){const W=k[q];if(B[W]===void 0){const J=4*W;(S?S(H[J+0],H[J+1],H[J+2],H[J+3]):r<=H[J+2]&&A<=H[J+3]&&u>=H[J+0]&&g>=H[J+1])?(B[W]=!0,b.push(N[W])):B[W]=!1}}}}_forEachCell(r,A,u,g,_,b,B,S){const k=this._convertToCellCoord(r),N=this._convertToCellCoord(A),H=this._convertToCellCoord(u),q=this._convertToCellCoord(g);for(let W=k;W<=H;W++)for(let J=N;J<=q;J++){const oe=this.d*J+W;if((!S||S(this._convertFromCellCoord(W),this._convertFromCellCoord(J),this._convertFromCellCoord(W+1),this._convertFromCellCoord(J+1)))&&_.call(this,r,A,u,g,oe,b,B,S))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,A=3+this.cells.length+1+1;let u=0;for(let b=0;b<this.cells.length;b++)u+=this.cells[b].length;const g=new Int32Array(A+u+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=A;for(let b=0;b<r.length;b++){const B=r[b];g[3+b]=_,g.set(B,_),_+=B.length}return g[3+r.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+r.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(r,A){const u=r.toArrayBuffer();return A&&A.push(u),{buffer:u}}static deserialize(r){return new j(r.buffer)}}const te={};function X(l,r,A={}){if(te[l])throw new Error(`${l} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:l,writeable:!1}),te[l]={klass:r,omit:A.omit||[],shallow:A.shallow||[]}}X("Object",Object),X("TransferableGridIndex",j),X("Color",Xr),X("Error",Error),X("AJAXError",Dn),X("ResolvedImage",sa),X("StylePropertyFunction",Dl),X("StyleExpression",Ql,{omit:["_evaluator"]}),X("ZoomDependentExpression",JA),X("ZoomConstantExpression",XA),X("CompoundExpression",Ri,{omit:["_evaluate"]});for(const l in Ts)Ts[l]._classRegistryKey||X(`Expression_${l}`,Ts[l]);function ce(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function he(l){return l.$name||l.constructor._classRegistryKey}function ge(l){return!function(r){if(r===null||typeof r!="object")return!1;const A=he(r);return!(!A||A==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||ce(l)||sr(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function xe(l,r){if(ge(l))return(ce(l)||sr(l))&&r&&r.push(l),ArrayBuffer.isView(l)&&r&&r.push(l.buffer),l instanceof ImageData&&r&&r.push(l.data.buffer),l;if(Array.isArray(l)){const _=[];for(const b of l)_.push(xe(b,r));return _}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const A=he(l);if(!A)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!te[A])throw new Error(`${A} is not registered.`);const{klass:u}=te[A],g=u.serialize?u.serialize(l,r):{};if(u.serialize){if(r&&g===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in l){if(!l.hasOwnProperty(_)||te[A].omit.indexOf(_)>=0)continue;const b=l[_];g[_]=te[A].shallow.indexOf(_)>=0?b:xe(b,r)}l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(g.$name=A),g}function Je(l){if(ge(l))return l;if(Array.isArray(l))return l.map(Je);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const r=he(l)||"Object";if(!te[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:A}=te[r];if(!A)throw new Error(`can't deserialize unregistered class ${r}`);if(A.deserialize)return A.deserialize(l);const u=Object.create(A.prototype);for(const g of Object.keys(l)){if(g==="$name")continue;const _=l[g];u[g]=te[r].shallow.indexOf(g)>=0?_:Je(_)}return u}class pt{constructor(){this.first=!0}update(r,A){const u=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=A),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=u,!0))}}const rt={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function st(l){for(const r of l)if(Gt(r.charCodeAt(0)))return!0;return!1}function Ht(l){for(const r of l)if(!it(r.charCodeAt(0)))return!1;return!0}function Tt(l){const r=l.map(A=>{try{return new RegExp(`\\p{sc=${A}}`,"u").source}catch{return null}}).filter(A=>A);return new RegExp(r.join("|"),"u")}const et=Tt(["Arab","Dupl","Mong","Ougr","Syrc"]);function it(l){return!et.test(String.fromCodePoint(l))}const Qt=Tt(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Gt(l){return!(l!==746&&l!==747&&(l<4352||!(rt["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||rt["CJK Compatibility"](l)||rt["CJK Strokes"](l)||!(!rt["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||rt["Enclosed CJK Letters and Months"](l)||rt["Ideographic Description Characters"](l)||rt.Kanbun(l)||rt.Katakana(l)&&l!==12540||!(!rt["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!rt["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||rt["Vertical Forms"](l)||rt["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||Qt.test(String.fromCodePoint(l)))))}function Dt(l){return!(Gt(l)||function(r){return!!(rt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||rt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||rt["Letterlike Symbols"](r)||rt["Number Forms"](r)||rt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||rt["Control Pictures"](r)&&r!==9251||rt["Optical Character Recognition"](r)||rt["Enclosed Alphanumerics"](r)||rt["Geometric Shapes"](r)||rt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||rt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||rt["CJK Symbols and Punctuation"](r)||rt.Katakana(r)||rt["Private Use Area"](r)||rt["CJK Compatibility Forms"](r)||rt["Small Form Variants"](r)||rt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(l))}const pr=Tt(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ar(l){return pr.test(String.fromCodePoint(l))}function Dr(l,r){return!(!r&&Ar(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||rt.Khmer(l))}function hr(l){for(const r of l)if(Ar(r.charCodeAt(0)))return!0;return!1}const nn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(nn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,r){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const A=l.pluginURL,u=new Promise(_=>{this.loadScriptResolve=_});r(A);const g=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([u,g]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:A};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${A}`)})}};class Mr{constructor(r,A){this.zoom=r,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pt,this.transition={})}isSupportedScript(r){return function(A,u){for(const g of A)if(!Dr(g.charCodeAt(0),u))return!1;return!0}(r,nn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,A=r-Math.floor(r),u=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*A}}}class fn{constructor(r,A){this.property=r,this.value=A,this.expression=function(u,g){if(ca(u))return new Dl(u,g);if(gA(u)){const _=zc(u,g);if(_.result==="error")throw new Error(_.value.map(b=>`${b.key}: ${b.message}`).join(", "));return _.value}{let _=u;return g.type==="color"&&typeof u=="string"?_=Xr.parse(u):g.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?g.type!=="numberArray"||typeof u!="number"&&!Array.isArray(u)?g.type!=="colorArray"||typeof u!="string"&&!Array.isArray(u)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(u)?_=Qi.parse(u):g.type==="projectionDefinition"&&typeof u=="string"&&(_=Li.parse(u)):_=Ti.parse(u):_=br.parse(u):_=vi.parse(u),{kind:"constant",evaluate:()=>_}}}(A===void 0?r.specification.default:A,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,A,u){return this.property.possiblyEvaluate(this,r,A,u)}}class un{constructor(r){this.property=r,this.value=new fn(r,void 0)}transitioned(r,A){return new Tn(this.property,this.value,A,ut({},r.transition,this.transition),r.now)}untransitioned(){return new Tn(this.property,this.value,null,{},0)}}class Mn{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return ot(this._values[r].value.value)}setValue(r,A){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new un(this._values[r].property)),this._values[r].value=new fn(this._values[r].property,A===null?void 0:ot(A))}getTransition(r){return ot(this._values[r].transition)}setTransition(r,A){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new un(this._values[r].property)),this._values[r].transition=ot(A)||void 0}serialize(){const r={};for(const A of Object.keys(this._values)){const u=this.getValue(A);u!==void 0&&(r[A]=u);const g=this.getTransition(A);g!==void 0&&(r[`${A}-transition`]=g)}return r}transitioned(r,A){const u=new Yr(this._properties);for(const g of Object.keys(this._values))u._values[g]=this._values[g].transitioned(r,A._values[g]);return u}untransitioned(){const r=new Yr(this._properties);for(const A of Object.keys(this._values))r._values[A]=this._values[A].untransitioned();return r}}class Tn{constructor(r,A,u,g,_){this.property=r,this.value=A,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,r.specification.transition&&(g.delay||g.duration)&&(this.prior=u)}possiblyEvaluate(r,A,u){const g=r.now||0,_=this.value.possiblyEvaluate(r,A,u),b=this.prior;if(b){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return b.possiblyEvaluate(r,A,u);{const B=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(r,A,u),_,Ae(B))}}return _}}class Yr{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,A,u){const g=new ni(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(r,A,u);return g}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Bi{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return ot(this._values[r].value)}setValue(r,A){this._values[r]=new fn(this._values[r].property,A===null?void 0:ot(A))}serialize(){const r={};for(const A of Object.keys(this._values)){const u=this.getValue(A);u!==void 0&&(r[A]=u)}return r}possiblyEvaluate(r,A,u){const g=new ni(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(r,A,u);return g}}class Un{constructor(r,A,u){this.property=r,this.value=A,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,A,u,g){return this.property.evaluate(this.value,this.parameters,r,A,u,g)}}class ni{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class cr{constructor(r){this.specification=r}possiblyEvaluate(r,A){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(A)}interpolate(r,A,u){const g=Ua[this.specification.type];return g?g(r,A,u):r}}class ir{constructor(r,A){this.specification=r,this.overrides=A}possiblyEvaluate(r,A,u,g){return new Un(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(A,null,{},u,g)}:r.expression,A)}interpolate(r,A,u){if(r.value.kind!=="constant"||A.value.kind!=="constant")return r;if(r.value.value===void 0||A.value.value===void 0)return new Un(this,{kind:"constant",value:void 0},r.parameters);const g=Ua[this.specification.type];if(g){const _=g(r.value.value,A.value.value,u);return new Un(this,{kind:"constant",value:_},r.parameters)}return r}evaluate(r,A,u,g,_,b){return r.kind==="constant"?r.value:r.evaluate(A,u,g,_,b)}}class Ki extends ir{possiblyEvaluate(r,A,u,g){if(r.value===void 0)return new Un(this,{kind:"constant",value:void 0},A);if(r.expression.kind==="constant"){const _=r.expression.evaluate(A,null,{},u,g),b=r.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,B=this._calculate(b,b,b,A);return new Un(this,{kind:"constant",value:B},A)}if(r.expression.kind==="camera"){const _=this._calculate(r.expression.evaluate({zoom:A.zoom-1}),r.expression.evaluate({zoom:A.zoom}),r.expression.evaluate({zoom:A.zoom+1}),A);return new Un(this,{kind:"constant",value:_},A)}return new Un(this,r.expression,A)}evaluate(r,A,u,g,_,b){if(r.kind==="source"){const B=r.evaluate(A,u,g,_,b);return this._calculate(B,B,B,A)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(A.zoom)-1},u,g),r.evaluate({zoom:Math.floor(A.zoom)},u,g),r.evaluate({zoom:Math.floor(A.zoom)+1},u,g),A):r.value}_calculate(r,A,u,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:A}:{from:u,to:A}}interpolate(r){return r}}class Ca{constructor(r){this.specification=r}possiblyEvaluate(r,A,u,g){if(r.value!==void 0){if(r.expression.kind==="constant"){const _=r.expression.evaluate(A,null,{},u,g);return this._calculate(_,_,_,A)}return this._calculate(r.expression.evaluate(new Mr(Math.floor(A.zoom-1),A)),r.expression.evaluate(new Mr(Math.floor(A.zoom),A)),r.expression.evaluate(new Mr(Math.floor(A.zoom+1),A)),A)}}_calculate(r,A,u,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:A}:{from:u,to:A}}interpolate(r){return r}}class Ci{constructor(r){this.specification=r}possiblyEvaluate(r,A,u,g){return!!r.expression.evaluate(A,null,{},u,g)}interpolate(){return!1}}class gn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in r){const u=r[A];u.specification.overridable&&this.overridableProperties.push(A);const g=this.defaultPropertyValues[A]=new fn(u,void 0),_=this.defaultTransitionablePropertyValues[A]=new un(u);this.defaultTransitioningPropertyValues[A]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=g.possiblyEvaluate({})}}}X("DataDrivenProperty",ir),X("DataConstantProperty",cr),X("CrossFadedDataDrivenProperty",Ki),X("CrossFadedProperty",Ca),X("ColorRampProperty",Ci);const qi="-transition";class ii extends He{constructor(r,A){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),A.layout&&(this._unevaluatedLayout=new Bi(A.layout)),A.paint)){this._transitionablePaint=new Mn(A.paint);for(const u in r.paint)this.setPaintProperty(u,r.paint[u],{validate:!1});for(const u in r.layout)this.setLayoutProperty(u,r.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ni(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,A,u={}){A!=null&&this._validate(I,`layers.${this.id}.layout.${r}`,r,A,u)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,A):this.visibility=A)}getPaintProperty(r){return r.endsWith(qi)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,A,u={}){if(A!=null&&this._validate(w,`layers.${this.id}.paint.${r}`,r,A,u))return!1;if(r.endsWith(qi))return this._transitionablePaint.setTransition(r.slice(0,-11),A||void 0),!1;{const g=this._transitionablePaint._values[r],_=g.property.specification["property-type"]==="cross-faded-data-driven",b=g.value.isDataDriven(),B=g.value;this._transitionablePaint.setValue(r,A),this._handleSpecialPaintPropertyUpdate(r);const S=this._transitionablePaint._values[r].value;return S.isDataDriven()||b||_||this._handleOverridablePaintPropertyUpdate(r,B,S)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,A,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,A){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,A)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),tr(r,(A,u)=>!(A===void 0||u==="layout"&&!Object.keys(A).length||u==="paint"&&!Object.keys(A).length))}_validate(r,A,u,g,_={}){return(!_||_.validate!==!1)&&R(this,r.call(sl,{key:A,layerType:this.type,objectKey:u,value:g,styleSpec:pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const A=this.paint.get(r);if(A instanceof Un&&Ls(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const Us={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $n{constructor(r,A){this._structArray=r,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Bn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,A){return r._trim(),A&&(r.isTransferred=!0,A.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const A=Object.create(this.prototype);return A.arrayBuffer=r.arrayBuffer,A.length=r.length,A.capacity=r.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Fn(l,r=1){let A=0,u=0;return{members:l.map(g=>{const _=Us[g.type].BYTES_PER_ELEMENT,b=A=ks(A,Math.max(r,_)),B=g.components||1;return u=Math.max(u,_),A+=_*B,{name:g.name,type:g.type,components:B,offset:b}}),size:ks(A,Math.max(u,r)),alignment:r}}function ks(l,r){return Math.ceil(l/r)*r}class gs extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A){const u=this.length;return this.resize(u+1),this.emplace(u,r,A)}emplace(r,A,u){const g=2*r;return this.int16[g+0]=A,this.int16[g+1]=u,r}}gs.prototype.bytesPerElement=4,X("StructArrayLayout2i4",gs);class On extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,u)}emplace(r,A,u,g){const _=3*r;return this.int16[_+0]=A,this.int16[_+1]=u,this.int16[_+2]=g,r}}On.prototype.bytesPerElement=6,X("StructArrayLayout3i6",On);class xo extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,u,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,A,u,g)}emplace(r,A,u,g,_){const b=4*r;return this.int16[b+0]=A,this.int16[b+1]=u,this.int16[b+2]=g,this.int16[b+3]=_,r}}xo.prototype.bytesPerElement=8,X("StructArrayLayout4i8",xo);class pc extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b){const B=this.length;return this.resize(B+1),this.emplace(B,r,A,u,g,_,b)}emplace(r,A,u,g,_,b,B){const S=6*r;return this.int16[S+0]=A,this.int16[S+1]=u,this.int16[S+2]=g,this.int16[S+3]=_,this.int16[S+4]=b,this.int16[S+5]=B,r}}pc.prototype.bytesPerElement=12,X("StructArrayLayout2i4i12",pc);class gc extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b){const B=this.length;return this.resize(B+1),this.emplace(B,r,A,u,g,_,b)}emplace(r,A,u,g,_,b,B){const S=4*r,k=8*r;return this.int16[S+0]=A,this.int16[S+1]=u,this.uint8[k+4]=g,this.uint8[k+5]=_,this.uint8[k+6]=b,this.uint8[k+7]=B,r}}gc.prototype.bytesPerElement=8,X("StructArrayLayout2i4ub8",gc);class Bo extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A){const u=this.length;return this.resize(u+1),this.emplace(u,r,A)}emplace(r,A,u){const g=2*r;return this.float32[g+0]=A,this.float32[g+1]=u,r}}Bo.prototype.bytesPerElement=8,X("StructArrayLayout2f8",Bo);class bA extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b,B,S,k,N){const H=this.length;return this.resize(H+1),this.emplace(H,r,A,u,g,_,b,B,S,k,N)}emplace(r,A,u,g,_,b,B,S,k,N,H){const q=10*r;return this.uint16[q+0]=A,this.uint16[q+1]=u,this.uint16[q+2]=g,this.uint16[q+3]=_,this.uint16[q+4]=b,this.uint16[q+5]=B,this.uint16[q+6]=S,this.uint16[q+7]=k,this.uint16[q+8]=N,this.uint16[q+9]=H,r}}bA.prototype.bytesPerElement=20,X("StructArrayLayout10ui20",bA);class m extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b,B,S,k,N,H,q){const W=this.length;return this.resize(W+1),this.emplace(W,r,A,u,g,_,b,B,S,k,N,H,q)}emplace(r,A,u,g,_,b,B,S,k,N,H,q,W){const J=12*r;return this.int16[J+0]=A,this.int16[J+1]=u,this.int16[J+2]=g,this.int16[J+3]=_,this.uint16[J+4]=b,this.uint16[J+5]=B,this.uint16[J+6]=S,this.uint16[J+7]=k,this.int16[J+8]=N,this.int16[J+9]=H,this.int16[J+10]=q,this.int16[J+11]=W,r}}m.prototype.bytesPerElement=24,X("StructArrayLayout4i4ui4i24",m);class t extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,u)}emplace(r,A,u,g){const _=3*r;return this.float32[_+0]=A,this.float32[_+1]=u,this.float32[_+2]=g,r}}t.prototype.bytesPerElement=12,X("StructArrayLayout3f12",t);class a extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.uint32[1*r+0]=A,r}}a.prototype.bytesPerElement=4,X("StructArrayLayout1ul4",a);class h extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b,B,S,k){const N=this.length;return this.resize(N+1),this.emplace(N,r,A,u,g,_,b,B,S,k)}emplace(r,A,u,g,_,b,B,S,k,N){const H=10*r,q=5*r;return this.int16[H+0]=A,this.int16[H+1]=u,this.int16[H+2]=g,this.int16[H+3]=_,this.int16[H+4]=b,this.int16[H+5]=B,this.uint32[q+3]=S,this.uint16[H+8]=k,this.uint16[H+9]=N,r}}h.prototype.bytesPerElement=20,X("StructArrayLayout6i1ul2ui20",h);class p extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b){const B=this.length;return this.resize(B+1),this.emplace(B,r,A,u,g,_,b)}emplace(r,A,u,g,_,b,B){const S=6*r;return this.int16[S+0]=A,this.int16[S+1]=u,this.int16[S+2]=g,this.int16[S+3]=_,this.int16[S+4]=b,this.int16[S+5]=B,r}}p.prototype.bytesPerElement=12,X("StructArrayLayout2i2i2i12",p);class y extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,r,A,u,g,_)}emplace(r,A,u,g,_,b){const B=4*r,S=8*r;return this.float32[B+0]=A,this.float32[B+1]=u,this.float32[B+2]=g,this.int16[S+6]=_,this.int16[S+7]=b,r}}y.prototype.bytesPerElement=16,X("StructArrayLayout2f1f2i16",y);class x extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b){const B=this.length;return this.resize(B+1),this.emplace(B,r,A,u,g,_,b)}emplace(r,A,u,g,_,b,B){const S=16*r,k=4*r,N=8*r;return this.uint8[S+0]=A,this.uint8[S+1]=u,this.float32[k+1]=g,this.float32[k+2]=_,this.int16[N+6]=b,this.int16[N+7]=B,r}}x.prototype.bytesPerElement=16,X("StructArrayLayout2ub2f2i16",x);class F extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,u)}emplace(r,A,u,g){const _=3*r;return this.uint16[_+0]=A,this.uint16[_+1]=u,this.uint16[_+2]=g,r}}F.prototype.bytesPerElement=6,X("StructArrayLayout3ui6",F);class T extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b,B,S,k,N,H,q,W,J,oe,ye,Ce){const qe=this.length;return this.resize(qe+1),this.emplace(qe,r,A,u,g,_,b,B,S,k,N,H,q,W,J,oe,ye,Ce)}emplace(r,A,u,g,_,b,B,S,k,N,H,q,W,J,oe,ye,Ce,qe){const Pe=24*r,$=12*r,de=48*r;return this.int16[Pe+0]=A,this.int16[Pe+1]=u,this.uint16[Pe+2]=g,this.uint16[Pe+3]=_,this.uint32[$+2]=b,this.uint32[$+3]=B,this.uint32[$+4]=S,this.uint16[Pe+10]=k,this.uint16[Pe+11]=N,this.uint16[Pe+12]=H,this.float32[$+7]=q,this.float32[$+8]=W,this.uint8[de+36]=J,this.uint8[de+37]=oe,this.uint8[de+38]=ye,this.uint32[$+10]=Ce,this.int16[Pe+22]=qe,r}}T.prototype.bytesPerElement=48,X("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class D extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,u,g,_,b,B,S,k,N,H,q,W,J,oe,ye,Ce,qe,Pe,$,de,ke,dt,Nt,vt,Et,qt,zt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,r,A,u,g,_,b,B,S,k,N,H,q,W,J,oe,ye,Ce,qe,Pe,$,de,ke,dt,Nt,vt,Et,qt,zt)}emplace(r,A,u,g,_,b,B,S,k,N,H,q,W,J,oe,ye,Ce,qe,Pe,$,de,ke,dt,Nt,vt,Et,qt,zt,Wt){const Pt=32*r,dr=16*r;return this.int16[Pt+0]=A,this.int16[Pt+1]=u,this.int16[Pt+2]=g,this.int16[Pt+3]=_,this.int16[Pt+4]=b,this.int16[Pt+5]=B,this.int16[Pt+6]=S,this.int16[Pt+7]=k,this.uint16[Pt+8]=N,this.uint16[Pt+9]=H,this.uint16[Pt+10]=q,this.uint16[Pt+11]=W,this.uint16[Pt+12]=J,this.uint16[Pt+13]=oe,this.uint16[Pt+14]=ye,this.uint16[Pt+15]=Ce,this.uint16[Pt+16]=qe,this.uint16[Pt+17]=Pe,this.uint16[Pt+18]=$,this.uint16[Pt+19]=de,this.uint16[Pt+20]=ke,this.uint16[Pt+21]=dt,this.uint16[Pt+22]=Nt,this.uint32[dr+12]=vt,this.float32[dr+13]=Et,this.float32[dr+14]=qt,this.uint16[Pt+30]=zt,this.uint16[Pt+31]=Wt,r}}D.prototype.bytesPerElement=64,X("StructArrayLayout8i15ui1ul2f2ui64",D);class O extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.float32[1*r+0]=A,r}}O.prototype.bytesPerElement=4,X("StructArrayLayout1f4",O);class K extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,u)}emplace(r,A,u,g){const _=3*r;return this.uint16[6*r+0]=A,this.float32[_+1]=u,this.float32[_+2]=g,r}}K.prototype.bytesPerElement=12,X("StructArrayLayout1ui2f12",K);class G extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,u)}emplace(r,A,u,g){const _=4*r;return this.uint32[2*r+0]=A,this.uint16[_+2]=u,this.uint16[_+3]=g,r}}G.prototype.bytesPerElement=8,X("StructArrayLayout1ul2ui8",G);class Y extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A){const u=this.length;return this.resize(u+1),this.emplace(u,r,A)}emplace(r,A,u){const g=2*r;return this.uint16[g+0]=A,this.uint16[g+1]=u,r}}Y.prototype.bytesPerElement=4,X("StructArrayLayout2ui4",Y);class ie extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.uint16[1*r+0]=A,r}}ie.prototype.bytesPerElement=2,X("StructArrayLayout1ui2",ie);class be extends Bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,u,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,A,u,g)}emplace(r,A,u,g,_){const b=4*r;return this.float32[b+0]=A,this.float32[b+1]=u,this.float32[b+2]=g,this.float32[b+3]=_,r}}be.prototype.bytesPerElement=16,X("StructArrayLayout4f16",be);class _e extends $n{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new z(this.anchorPointX,this.anchorPointY)}}_e.prototype.size=20;class we extends h{get(r){return new _e(this,r)}}X("CollisionBoxArray",we);class Te extends $n{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Te.prototype.size=48;class De extends T{get(r){return new Te(this,r)}}X("PlacedSymbolArray",De);class Re extends $n{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Re.prototype.size=64;class Ve extends D{get(r){return new Re(this,r)}}X("SymbolInstanceArray",Ve);class We extends O{getoffsetX(r){return this.float32[1*r+0]}}X("GlyphOffsetArray",We);class Ge extends On{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}X("SymbolLineVertexArray",Ge);class ft extends $n{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ft.prototype.size=12;class St extends K{get(r){return new ft(this,r)}}X("TextAnchorOffsetArray",St);class wt extends $n{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wt.prototype.size=8;class bt extends G{get(r){return new wt(this,r)}}X("FeatureIndexArray",bt);class It extends gs{}class Yt extends gs{}class Zt extends gs{}class Rt extends pc{}class gr extends gc{}class $r extends Bo{}class an extends bA{}class Ln extends m{}class kn extends t{}class qn extends a{}class Wn extends p{}class Qn extends x{}class _n extends F{}class ai extends Y{}const Ii=Fn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fi}=Ii;class en{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,A,u,g){const _=this.segments[this.segments.length-1];return r>en.MAX_VERTEX_ARRAY_LENGTH&&Ot(`Max vertices per segment is ${en.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${en.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+r>en.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g?this.createNewSegment(A,u,g):_}createNewSegment(r,A,u){const g={vertexOffset:r.length,primitiveOffset:A.length,vertexLength:0,primitiveLength:0,vaos:{}};return u!==void 0&&(g.sortKey=u),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(r,A,u){return this.prepareSegment(0,r,A,u)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const A in r.vaos)r.vaos[A].destroy()}static simpleSegment(r,A,u,g){return new en([{vertexOffset:r,primitiveOffset:A,vertexLength:u,primitiveLength:g,vaos:{},sortKey:0}])}}function Ia(l,r){return 256*(l=je(Math.floor(l),0,255))+je(Math.floor(r),0,255)}en.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,X("SegmentVector",en);const Zi=Fn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Qs,Co,ol,Wo={exports:{}},Io={exports:{}},Fa={exports:{}},Al=function(){if(ol)return Wo.exports;ol=1;var l=(Qs||(Qs=1,Io.exports=function(A,u){var g,_,b,B,S,k,N,H;for(_=A.length-(g=3&A.length),b=u,S=3432918353,k=461845907,H=0;H<_;)N=255&A.charCodeAt(H)|(255&A.charCodeAt(++H))<<8|(255&A.charCodeAt(++H))<<16|(255&A.charCodeAt(++H))<<24,++H,b=27492+(65535&(B=5*(65535&(b=(b^=N=(65535&(N=(N=(65535&N)*S+(((N>>>16)*S&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(N=0,g){case 3:N^=(255&A.charCodeAt(H+2))<<16;case 2:N^=(255&A.charCodeAt(H+1))<<8;case 1:b^=N=(65535&(N=(N=(65535&(N^=255&A.charCodeAt(H)))*S+(((N>>>16)*S&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295}return b^=A.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),Io.exports),r=(Co||(Co=1,Fa.exports=function(A,u){for(var g,_=A.length,b=u^_,B=0;_>=4;)g=1540483477*(65535&(g=255&A.charCodeAt(B)|(255&A.charCodeAt(++B))<<8|(255&A.charCodeAt(++B))<<16|(255&A.charCodeAt(++B))<<24))+((1540483477*(g>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),_-=4,++B;switch(_){case 3:b^=(255&A.charCodeAt(B+2))<<16;case 2:b^=(255&A.charCodeAt(B+1))<<8;case 1:b=1540483477*(65535&(b^=255&A.charCodeAt(B)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),Fa.exports);return Wo.exports=l,Wo.exports.murmur3=l,Wo.exports.murmur2=r,Wo.exports}(),vA=v(Al);class ll{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,A,u,g){this.ids.push(Oi(r)),this.positions.push(A,u,g)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=Oi(r);let u=0,g=this.ids.length-1;for(;u<g;){const b=u+g>>1;this.ids[b]>=A?g=b:u=b+1}const _=[];for(;this.ids[u]===A;)_.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return _}static serialize(r,A){const u=new Float64Array(r.ids),g=new Uint32Array(r.positions);return zi(u,g,0,u.length-1),A&&A.push(u.buffer,g.buffer),{ids:u,positions:g}}static deserialize(r){const A=new ll;return A.ids=r.ids,A.positions=r.positions,A.indexed=!0,A}}function Oi(l){const r=+l;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:vA(String(l))}function zi(l,r,A,u){for(;A<u;){const g=l[A+u>>1];let _=A-1,b=u+1;for(;;){do _++;while(l[_]<g);do b--;while(l[b]>g);if(_>=b)break;Ya(l,_,b),Ya(r,3*_,3*b),Ya(r,3*_+1,3*b+1),Ya(r,3*_+2,3*b+2)}b-A<u-b?(zi(l,r,A,b),A=b+1):(zi(l,r,b+1,u),u=b)}}function Ya(l,r,A){const u=l[r];l[r]=l[A],l[A]=u}X("FeaturePositionMap",ll);class Xn{constructor(r,A){this.gl=r.gl,this.location=A}}class Lu extends Xn{constructor(r,A){super(r,A),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Of extends Xn{constructor(r,A){super(r,A),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class zf extends Xn{constructor(r,A){super(r,A),this.current=Xr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Jp=new Float32Array(16);function Uh(l){return[Ia(255*l.r,255*l.g),Ia(255*l.b,255*l.a)]}class qc{constructor(r,A,u){this.value=r,this.uniformNames=A.map(g=>`u_${g}`),this.type=u}setUniform(r,A,u){r.set(u.constantOr(this.value))}getBinding(r,A,u){return this.type==="color"?new zf(r,A):new Lu(r,A)}}class io{constructor(r,A){this.uniformNames=A.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=r.tlbr}setUniform(r,A,u,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&r.set(_)}getBinding(r,A,u){return u.substr(0,9)==="u_pattern"?new Of(r,A):new Lu(r,A)}}class Xo{constructor(r,A,u,g){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=A.map(_=>({name:`a_${_}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,A,u,g,_){const b=this.paintVertexArray.length,B=this.expression.evaluate(new Mr(0),A,{},g,[],_);this.paintVertexArray.resize(r),this._setPaintValue(b,r,B)}updatePaintArray(r,A,u,g){const _=this.expression.evaluate({zoom:0},u,g);this._setPaintValue(r,A,_)}_setPaintValue(r,A,u){if(this.type==="color"){const g=Uh(u);for(let _=r;_<A;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=r;g<A;g++)this.paintVertexArray.emplace(g,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ao{constructor(r,A,u,g,_,b){this.expression=r,this.uniformNames=A.map(B=>`u_${B}_t`),this.type=u,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=A.map(B=>({name:`a_${B}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(r,A,u,g,_){const b=this.expression.evaluate(new Mr(this.zoom),A,{},g,[],_),B=this.expression.evaluate(new Mr(this.zoom+1),A,{},g,[],_),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,b,B)}updatePaintArray(r,A,u,g){const _=this.expression.evaluate({zoom:this.zoom},u,g),b=this.expression.evaluate({zoom:this.zoom+1},u,g);this._setPaintValue(r,A,_,b)}_setPaintValue(r,A,u,g){if(this.type==="color"){const _=Uh(u),b=Uh(g);for(let B=r;B<A;B++)this.paintVertexArray.emplace(B,_[0],_[1],b[0],b[1])}else{for(let _=r;_<A;_++)this.paintVertexArray.emplace(_,u,g);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,A){const u=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,g=je(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);r.set(g)}getBinding(r,A,u){return new Lu(r,A)}}class wA{constructor(r,A,u,g,_,b){this.expression=r,this.type=A,this.useIntegerZoom=u,this.zoom=g,this.layerId=b,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(r,A,u){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(g,r,A.patterns&&A.patterns[this.layerId],u)}updatePaintArray(r,A,u,g,_){this._setPaintValues(r,A,u.patterns&&u.patterns[this.layerId],_)}_setPaintValues(r,A,u,g){if(!g||!u)return;const{min:_,mid:b,max:B}=u,S=g[_],k=g[b],N=g[B];if(S&&k&&N)for(let H=r;H<A;H++)this.zoomInPaintVertexArray.emplace(H,k.tl[0],k.tl[1],k.br[0],k.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],k.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,k.tl[0],k.tl[1],k.br[0],k.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],k.pixelRatio,N.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Zi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Zi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Pu{constructor(r,A,u){this.binders={},this._buffers=[];const g=[];for(const _ in r.paint._values){if(!u(_))continue;const b=r.paint.get(_);if(!(b instanceof Un&&Ls(b.property.specification)))continue;const B=kh(_,r.type),S=b.value,k=b.property.specification.type,N=b.property.useIntegerZoom,H=b.property.specification["property-type"],q=H==="cross-faded"||H==="cross-faded-data-driven";if(S.kind==="constant")this.binders[_]=q?new io(S.value,B):new qc(S.value,B,k),g.push(`/u_${_}`);else if(S.kind==="source"||q){const W=_1(_,k,"source");this.binders[_]=q?new wA(S,k,N,A,W,r.id):new Xo(S,B,k,W),g.push(`/a_${_}`)}else{const W=_1(_,k,"composite");this.binders[_]=new ao(S,B,k,N,A,W),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(r){const A=this.binders[r];return A instanceof Xo||A instanceof ao?A.maxValue:0}populatePaintArrays(r,A,u,g,_){for(const b in this.binders){const B=this.binders[b];(B instanceof Xo||B instanceof ao||B instanceof wA)&&B.populatePaintArray(r,A,u,g,_)}}setConstantPatternPositions(r,A){for(const u in this.binders){const g=this.binders[u];g instanceof io&&g.setConstantPatternPositions(r,A)}}updatePaintArrays(r,A,u,g,_){let b=!1;for(const B in r){const S=A.getPositions(B);for(const k of S){const N=u.feature(k.index);for(const H in this.binders){const q=this.binders[H];if((q instanceof Xo||q instanceof ao||q instanceof wA)&&q.expression.isStateDependent===!0){const W=g.paint.get(H);q.expression=W.value,q.updatePaintArray(k.start,k.end,N,r[B],_),b=!0}}}}return b}defines(){const r=[];for(const A in this.binders){const u=this.binders[A];(u instanceof qc||u instanceof io)&&r.push(...u.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return r}getBinderAttributes(){const r=[];for(const A in this.binders){const u=this.binders[A];if(u instanceof Xo||u instanceof ao)for(let g=0;g<u.paintVertexAttributes.length;g++)r.push(u.paintVertexAttributes[g].name);else if(u instanceof wA)for(let g=0;g<Zi.members.length;g++)r.push(Zi.members[g].name)}return r}getBinderUniforms(){const r=[];for(const A in this.binders){const u=this.binders[A];if(u instanceof qc||u instanceof io||u instanceof ao)for(const g of u.uniformNames)r.push(g)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,A){const u=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof qc||_ instanceof io||_ instanceof ao){for(const b of _.uniformNames)if(A[b]){const B=_.getBinding(r,A[b],b);u.push({name:b,property:g,binding:B})}}}return u}setUniforms(r,A,u,g){for(const{name:_,property:b,binding:B}of A)this.binders[b].setUniform(B,g,u.get(b),_)}updatePaintBuffers(r){this._buffers=[];for(const A in this.binders){const u=this.binders[A];if(r&&u instanceof wA){const g=r.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(u instanceof Xo||u instanceof ao)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(r){for(const A in this.binders){const u=this.binders[A];(u instanceof Xo||u instanceof ao||u instanceof wA)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const A=this.binders[r];(A instanceof Xo||A instanceof ao||A instanceof wA)&&A.destroy()}}}class cl{constructor(r,A,u=()=>!0){this.programConfigurations={};for(const g of r)this.programConfigurations[g.id]=new Pu(g,A,u);this.needsUpload=!1,this._featureMap=new ll,this._bufferOffset=0}populatePaintArrays(r,A,u,g,_,b){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(r,A,g,_,b);A.id!==void 0&&this._featureMap.add(A.id,u,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,A,u,g){for(const _ of u)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,A,_,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function kh(l,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${r}-`,"").replace(/-/g,"_")]}function _1(l,r,A){const u={color:{source:Bo,composite:be},number:{source:O,composite:Bo}},g=function(_){return{"line-pattern":{source:an,composite:an},"fill-pattern":{source:an,composite:an},"fill-extrusion-pattern":{source:an,composite:an}}[_]}(l);return g&&g[A]||u[r][A]}X("ConstantBinder",qc),X("CrossFadedConstantBinder",io),X("SourceExpressionBinder",Xo),X("CrossFadedCompositeBinder",wA),X("CompositeExpressionBinder",ao),X("ProgramConfiguration",Pu,{omit:["_buffers"]}),X("ProgramConfigurationSet",cl);const Yp=Math.pow(2,14)-1,b1=-Yp-1;function Zc(l){const r=Ye/l.extent,A=l.loadGeometry();for(let u=0;u<A.length;u++){const g=A[u];for(let _=0;_<g.length;_++){const b=g[_],B=Math.round(b.x*r),S=Math.round(b.y*r);b.x=je(B,b1,Yp),b.y=je(S,b1,Yp),(B<b.x||B>b.x+1||S<b.y||S>b.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function $c(l,r){return{type:l.type,id:l.id,properties:l.properties,geometry:r?Zc(l):[]}}const v1=-32768;function nx(l,r,A,u,g){l.emplaceBack(v1+8*r+u,v1+8*A+g)}class eg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Yt,this.indexArray=new _n,this.segments=new en,this.programConfigurations=new cl(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,u){const g=this.layers[0],_=[];let b=null,B=!1,S=g.type==="heatmap";if(g.type==="circle"){const N=g;b=N.layout.get("circle-sort-key"),B=!b.isConstant(),S=S||N.paint.get("circle-pitch-alignment")==="map"}const k=S?A.subdivisionGranularity.circle:1;for(const{feature:N,id:H,index:q,sourceLayerIndex:W}of r){const J=this.layers[0]._featureFilter.needGeometry,oe=$c(N,J);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),oe,u))continue;const ye=B?b.evaluate(oe,{},u):void 0,Ce={id:H,properties:N.properties,type:N.type,sourceLayerIndex:W,index:q,geometry:J?oe.geometry:Zc(N),patterns:{},sortKey:ye};_.push(Ce)}B&&_.sort((N,H)=>N.sortKey-H.sortKey);for(const N of _){const{geometry:H,index:q,sourceLayerIndex:W}=N,J=r[q].feature;this.addFeature(N,H,q,u,k),A.featureIndex.insert(J,H,q,W,this.index)}}update(r,A,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Fi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,A,u,g,_=1){let b;switch(_){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const B=b.length;for(const S of A)for(const k of S){const N=k.x,H=k.y;if(N<0||N>=Ye||H<0||H>=Ye)continue;const q=this.segments.prepareSegment(B*B,this.layoutVertexArray,this.indexArray,r.sortKey),W=q.vertexLength;for(let J=0;J<B;J++)for(let oe=0;oe<B;oe++)nx(this.layoutVertexArray,N,H,b[oe],b[J]);for(let J=0;J<B-1;J++)for(let oe=0;oe<B-1;oe++){const ye=W+J*B+oe,Ce=W+(J+1)*B+oe;this.indexArray.emplaceBack(ye,Ce+1,ye+1),this.indexArray.emplaceBack(ye,Ce,Ce+1)}q.vertexLength+=B*B,q.primitiveLength+=(B-1)*(B-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},g)}}function w1(l,r){for(let A=0;A<l.length;A++)if(Wc(r,l[A]))return!0;for(let A=0;A<r.length;A++)if(Wc(l,r[A]))return!0;return!!tg(l,r)}function ix(l,r,A){return!!Wc(l,r)||!!rg(r,l,A)}function x1(l,r){if(l.length===1)return C1(r,l[0]);for(let A=0;A<r.length;A++){const u=r[A];for(let g=0;g<u.length;g++)if(Wc(l,u[g]))return!0}for(let A=0;A<l.length;A++)if(C1(r,l[A]))return!0;for(let A=0;A<r.length;A++)if(tg(l,r[A]))return!0;return!1}function ax(l,r,A){if(l.length>1){if(tg(l,r))return!0;for(let u=0;u<r.length;u++)if(rg(r[u],l,A))return!0}for(let u=0;u<l.length;u++)if(rg(l[u],r,A))return!0;return!1}function tg(l,r){if(l.length===0||r.length===0)return!1;for(let A=0;A<l.length-1;A++){const u=l[A],g=l[A+1];for(let _=0;_<r.length-1;_++)if(sx(u,g,r[_],r[_+1]))return!0}return!1}function sx(l,r,A,u){return Xt(l,A,u)!==Xt(r,A,u)&&Xt(l,r,A)!==Xt(l,r,u)}function rg(l,r,A){const u=A*A;if(r.length===1)return l.distSqr(r[0])<u;for(let g=1;g<r.length;g++)if(B1(l,r[g-1],r[g])<u)return!0;return!1}function B1(l,r,A){const u=r.distSqr(A);if(u===0)return l.distSqr(r);const g=((l.x-r.x)*(A.x-r.x)+(l.y-r.y)*(A.y-r.y))/u;return l.distSqr(g<0?r:g>1?A:A.sub(r)._mult(g)._add(r))}function C1(l,r){for(let A=0;A<l.length;A++)if(Wc(l[A],r))return!0;return!1}function Wc(l,r){let A=!1;for(let u=0,g=l.length-1;u<l.length;g=u++){const _=l[u],b=l[g];_.y>r.y!=b.y>r.y&&r.x<(b.x-_.x)*(r.y-_.y)/(b.y-_.y)+_.x&&(A=!A)}return A}function ox(l,r,A){const u=A[0],g=A[2];if(l.x<u.x&&r.x<u.x||l.x>g.x&&r.x>g.x||l.y<u.y&&r.y<u.y||l.y>g.y&&r.y>g.y)return!1;const _=Xt(l,r,A[0]);return _!==Xt(l,r,A[1])||_!==Xt(l,r,A[2])||_!==Xt(l,r,A[3])}function Qh(l,r,A){const u=r.paint.get(l).value;return u.kind==="constant"?u.value:A.programConfigurations.get(r.id).getMaxValue(l)}function Hf(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function jf(l,r,A,u,g){if(!r[0]&&!r[1])return l;const _=z.convert(r)._mult(g);A==="viewport"&&_._rotate(-u);const b=[];for(let B=0;B<l.length;B++)b.push(l[B].sub(_));return b}let I1,F1;X("CircleBucket",eg,{omit:["layers"]});var Ax={get paint(){return F1=F1||new gn({"circle-radius":new ir(pe.paint_circle["circle-radius"]),"circle-color":new ir(pe.paint_circle["circle-color"]),"circle-blur":new ir(pe.paint_circle["circle-blur"]),"circle-opacity":new ir(pe.paint_circle["circle-opacity"]),"circle-translate":new cr(pe.paint_circle["circle-translate"]),"circle-translate-anchor":new cr(pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cr(pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cr(pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ir(pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ir(pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ir(pe.paint_circle["circle-stroke-opacity"])})},get layout(){return I1=I1||new gn({"circle-sort-key":new ir(pe.layout_circle["circle-sort-key"])})}};class lx extends ii{constructor(r){super(r,Ax)}createBucket(r){return new eg(r)}queryRadius(r){const A=r;return Qh("circle-radius",this,A)+Qh("circle-stroke-width",this,A)+Hf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:A,featureState:u,geometry:g,transform:_,pixelsToTileUnits:b,unwrappedTileID:B,getElevation:S}){const k=jf(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,b),N=this.paint.get("circle-radius").evaluate(A,u)+this.paint.get("circle-stroke-width").evaluate(A,u),H=this.paint.get("circle-pitch-alignment")==="map",q=H?k:function(J,oe,ye,Ce){return J.map(qe=>E1(qe,oe,ye,Ce))}(k,_,B,S),W=H?N*b:N;for(const J of g)for(const oe of J){const ye=H?oe:E1(oe,_,B,S);let Ce=W;const qe=_.projectTileCoordinates(oe.x,oe.y,B,S).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ce*=qe/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ce*=_.cameraToCenterDistance/qe),ix(q,ye,Ce))return!0}return!1}}function E1(l,r,A,u){const g=r.projectTileCoordinates(l.x,l.y,A,u).point;return new z((.5*g.x+.5)*r.width,(.5*-g.y+.5)*r.height)}class S1 extends eg{}let T1;X("HeatmapBucket",S1,{omit:["layers"]});var cx={get paint(){return T1=T1||new gn({"heatmap-radius":new ir(pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ir(pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cr(pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ci(pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cr(pe.paint_heatmap["heatmap-opacity"])})}};function ng(l,{width:r,height:A},u,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==r*A*u)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${r*A*u}`)}else g=new Uint8Array(r*A*u);return l.width=r,l.height=A,l.data=g,l}function L1(l,{width:r,height:A},u){if(r===l.width&&A===l.height)return;const g=ng({},{width:r,height:A},u);ig(l,g,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,r),height:Math.min(l.height,A)},u),l.width=r,l.height=A,l.data=g.data}function ig(l,r,A,u,g,_){if(g.width===0||g.height===0)return r;if(g.width>l.width||g.height>l.height||A.x>l.width-g.width||A.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>r.width||g.height>r.height||u.x>r.width-g.width||u.y>r.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const b=l.data,B=r.data;if(b===B)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<g.height;S++){const k=((A.y+S)*l.width+A.x)*_,N=((u.y+S)*r.width+u.x)*_;for(let H=0;H<g.width*_;H++)B[N+H]=b[k+H]}return r}class Dh{constructor(r,A){ng(this,r,1,A)}resize(r){L1(this,r,1)}clone(){return new Dh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,A,u,g,_){ig(r,A,u,g,_,1)}}class Fo{constructor(r,A){ng(this,r,4,A)}resize(r){L1(this,r,4)}replace(r,A){A?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Fo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,A,u,g,_){ig(r,A,u,g,_,4)}}function P1(l){const r={},A=l.resolution||256,u=l.clips?l.clips.length:1,g=l.image||new Fo({width:A,height:u});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const _=(b,B,S)=>{r[l.evaluationKey]=S;const k=l.expression.evaluate(r);g.data[b+B+0]=Math.floor(255*k.r/k.a),g.data[b+B+1]=Math.floor(255*k.g/k.a),g.data[b+B+2]=Math.floor(255*k.b/k.a),g.data[b+B+3]=Math.floor(255*k.a)};if(l.clips)for(let b=0,B=0;b<u;++b,B+=4*A)for(let S=0,k=0;S<A;S++,k+=4){const N=S/(A-1),{start:H,end:q}=l.clips[b];_(B,k,H*(1-N)+q*N)}else for(let b=0,B=0;b<A;b++,B+=4)_(0,B,b/(A-1));return g}X("AlphaImage",Dh),X("RGBAImage",Fo);const ag="big-fb";class ux extends ii{createBucket(r){return new S1(r)}constructor(r){super(r,cx),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=P1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ag)&&this.heatmapFbos.delete(ag)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let M1;var hx={get paint(){return M1=M1||new gn({"hillshade-illumination-direction":new cr(pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new cr(pe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new cr(pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cr(pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cr(pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cr(pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cr(pe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new cr(pe.paint_hillshade["hillshade-method"])})}};class fx extends ii{constructor(r){super(r,hx),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,A=this.paint.get("hillshade-illumination-altitude").values,u=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const _=Math.max(r.length,A.length,u.length,g.length);r=r.concat(Array(_-r.length).fill(r.at(-1))),A=A.concat(Array(_-A.length).fill(A.at(-1))),u=u.concat(Array(_-u.length).fill(u.at(-1))),g=g.concat(Array(_-g.length).fill(g.at(-1)));const b=A.map(wr);return{directionRadians:r.map(wr),altitudeRadians:b,shadowColor:g,highlightColor:u}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const dx=Fn([{name:"a_pos",components:2,type:"Int16"}],4),{members:px}=dx;function sg(l,r,A){const u=A.patternDependencies;let g=!1;for(const _ of r){const b=_.paint.get(`${l}-pattern`);b.isConstant()||(g=!0);const B=b.constantOr(null);B&&(g=!0,u[B.to]=!0,u[B.from]=!0)}return g}function og(l,r,A,u,g){const _=g.patternDependencies;for(const b of r){const B=b.paint.get(`${l}-pattern`).value;if(B.kind!=="constant"){let S=B.evaluate({zoom:u-1},A,{},g.availableImages),k=B.evaluate({zoom:u},A,{},g.availableImages),N=B.evaluate({zoom:u+1},A,{},g.availableImages);S=S&&S.name?S.name:S,k=k&&k.name?k.name:k,N=N&&N.name?N.name:N,_[S]=!0,_[k]=!0,_[N]=!0,A.patterns[b.id]={min:S,mid:k,max:N}}}return A}function U1(l,r,A,u,g){let _;if(g===function(b,B,S,k){let N=0;for(let H=B,q=S-k;H<S;H+=k)N+=(b[q]-b[H])*(b[H+1]+b[q+1]),q=H;return N}(l,r,A,u)>0)for(let b=r;b<A;b+=u)_=R1(b/u|0,l[b],l[b+1],_);else for(let b=A-u;b>=r;b-=u)_=R1(b/u|0,l[b],l[b+1],_);return _&&Mu(_,_.next)&&(zh(_),_=_.next),_}function Xc(l,r){if(!l)return l;r||(r=l);let A,u=l;do if(A=!1,u.steiner||!Mu(u,u.next)&&ki(u.prev,u,u.next)!==0)u=u.next;else{if(zh(u),u=r=u.prev,u===u.next)break;A=!0}while(A||u!==r);return r}function Rh(l,r,A,u,g,_,b){if(!l)return;!b&&_&&function(S,k,N,H){let q=S;do q.z===0&&(q.z=Ag(q.x,q.y,k,N,H)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==S);q.prevZ.nextZ=null,q.prevZ=null,function(W){let J,oe=1;do{let ye,Ce=W;W=null;let qe=null;for(J=0;Ce;){J++;let Pe=Ce,$=0;for(let ke=0;ke<oe&&($++,Pe=Pe.nextZ,Pe);ke++);let de=oe;for(;$>0||de>0&&Pe;)$!==0&&(de===0||!Pe||Ce.z<=Pe.z)?(ye=Ce,Ce=Ce.nextZ,$--):(ye=Pe,Pe=Pe.nextZ,de--),qe?qe.nextZ=ye:W=ye,ye.prevZ=qe,qe=ye;Ce=Pe}qe.nextZ=null,oe*=2}while(J>1)}(q)}(l,u,g,_);let B=l;for(;l.prev!==l.next;){const S=l.prev,k=l.next;if(_?mx(l,u,g,_):gx(l))r.push(S.i,l.i,k.i),zh(l),l=k.next,B=k.next;else if((l=k)===B){b?b===1?Rh(l=yx(Xc(l),r),r,A,u,g,_,2):b===2&&_x(l,r,A,u,g,_):Rh(Xc(l),r,A,u,g,_,1);break}}}function gx(l){const r=l.prev,A=l,u=l.next;if(ki(r,A,u)>=0)return!1;const g=r.x,_=A.x,b=u.x,B=r.y,S=A.y,k=u.y,N=Math.min(g,_,b),H=Math.min(B,S,k),q=Math.max(g,_,b),W=Math.max(B,S,k);let J=u.next;for(;J!==r;){if(J.x>=N&&J.x<=q&&J.y>=H&&J.y<=W&&Nh(g,B,_,S,b,k,J.x,J.y)&&ki(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function mx(l,r,A,u){const g=l.prev,_=l,b=l.next;if(ki(g,_,b)>=0)return!1;const B=g.x,S=_.x,k=b.x,N=g.y,H=_.y,q=b.y,W=Math.min(B,S,k),J=Math.min(N,H,q),oe=Math.max(B,S,k),ye=Math.max(N,H,q),Ce=Ag(W,J,r,A,u),qe=Ag(oe,ye,r,A,u);let Pe=l.prevZ,$=l.nextZ;for(;Pe&&Pe.z>=Ce&&$&&$.z<=qe;){if(Pe.x>=W&&Pe.x<=oe&&Pe.y>=J&&Pe.y<=ye&&Pe!==g&&Pe!==b&&Nh(B,N,S,H,k,q,Pe.x,Pe.y)&&ki(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,$.x>=W&&$.x<=oe&&$.y>=J&&$.y<=ye&&$!==g&&$!==b&&Nh(B,N,S,H,k,q,$.x,$.y)&&ki($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;Pe&&Pe.z>=Ce;){if(Pe.x>=W&&Pe.x<=oe&&Pe.y>=J&&Pe.y<=ye&&Pe!==g&&Pe!==b&&Nh(B,N,S,H,k,q,Pe.x,Pe.y)&&ki(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;$&&$.z<=qe;){if($.x>=W&&$.x<=oe&&$.y>=J&&$.y<=ye&&$!==g&&$!==b&&Nh(B,N,S,H,k,q,$.x,$.y)&&ki($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function yx(l,r){let A=l;do{const u=A.prev,g=A.next.next;!Mu(u,g)&&Q1(u,A,A.next,g)&&Oh(u,g)&&Oh(g,u)&&(r.push(u.i,A.i,g.i),zh(A),zh(A.next),A=l=g),A=A.next}while(A!==l);return Xc(A)}function _x(l,r,A,u,g,_){let b=l;do{let B=b.next.next;for(;B!==b.prev;){if(b.i!==B.i&&Bx(b,B)){let S=D1(b,B);return b=Xc(b,b.next),S=Xc(S,S.next),Rh(b,r,A,u,g,_,0),void Rh(S,r,A,u,g,_,0)}B=B.next}b=b.next}while(b!==l)}function bx(l,r){let A=l.x-r.x;return A===0&&(A=l.y-r.y,A===0)&&(A=(l.next.y-l.y)/(l.next.x-l.x)-(r.next.y-r.y)/(r.next.x-r.x)),A}function vx(l,r){const A=function(g,_){let b=_;const B=g.x,S=g.y;let k,N=-1/0;if(Mu(g,b))return b;do{if(Mu(g,b.next))return b.next;if(S<=b.y&&S>=b.next.y&&b.next.y!==b.y){const oe=b.x+(S-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(oe<=B&&oe>N&&(N=oe,k=b.x<b.next.x?b:b.next,oe===B))return k}b=b.next}while(b!==_);if(!k)return null;const H=k,q=k.x,W=k.y;let J=1/0;b=k;do{if(B>=b.x&&b.x>=q&&B!==b.x&&k1(S<W?B:N,S,q,W,S<W?N:B,S,b.x,b.y)){const oe=Math.abs(S-b.y)/(B-b.x);Oh(b,g)&&(oe<J||oe===J&&(b.x>k.x||b.x===k.x&&wx(k,b)))&&(k=b,J=oe)}b=b.next}while(b!==H);return k}(l,r);if(!A)return r;const u=D1(A,l);return Xc(u,u.next),Xc(A,A.next)}function wx(l,r){return ki(l.prev,l,r.prev)<0&&ki(r.next,l,l.next)<0}function Ag(l,r,A,u,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-A)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function xx(l){let r=l,A=l;do(r.x<A.x||r.x===A.x&&r.y<A.y)&&(A=r),r=r.next;while(r!==l);return A}function k1(l,r,A,u,g,_,b,B){return(g-b)*(r-B)>=(l-b)*(_-B)&&(l-b)*(u-B)>=(A-b)*(r-B)&&(A-b)*(_-B)>=(g-b)*(u-B)}function Nh(l,r,A,u,g,_,b,B){return!(l===b&&r===B)&&k1(l,r,A,u,g,_,b,B)}function Bx(l,r){return l.next.i!==r.i&&l.prev.i!==r.i&&!function(A,u){let g=A;do{if(g.i!==A.i&&g.next.i!==A.i&&g.i!==u.i&&g.next.i!==u.i&&Q1(g,g.next,A,u))return!0;g=g.next}while(g!==A);return!1}(l,r)&&(Oh(l,r)&&Oh(r,l)&&function(A,u){let g=A,_=!1;const b=(A.x+u.x)/2,B=(A.y+u.y)/2;do g.y>B!=g.next.y>B&&g.next.y!==g.y&&b<(g.next.x-g.x)*(B-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==A);return _}(l,r)&&(ki(l.prev,l,r.prev)||ki(l,r.prev,r))||Mu(l,r)&&ki(l.prev,l,l.next)>0&&ki(r.prev,r,r.next)>0)}function ki(l,r,A){return(r.y-l.y)*(A.x-r.x)-(r.x-l.x)*(A.y-r.y)}function Mu(l,r){return l.x===r.x&&l.y===r.y}function Q1(l,r,A,u){const g=Gf(ki(l,r,A)),_=Gf(ki(l,r,u)),b=Gf(ki(A,u,l)),B=Gf(ki(A,u,r));return g!==_&&b!==B||!(g!==0||!Vf(l,A,r))||!(_!==0||!Vf(l,u,r))||!(b!==0||!Vf(A,l,u))||!(B!==0||!Vf(A,r,u))}function Vf(l,r,A){return r.x<=Math.max(l.x,A.x)&&r.x>=Math.min(l.x,A.x)&&r.y<=Math.max(l.y,A.y)&&r.y>=Math.min(l.y,A.y)}function Gf(l){return l>0?1:l<0?-1:0}function Oh(l,r){return ki(l.prev,l,l.next)<0?ki(l,r,l.next)>=0&&ki(l,l.prev,r)>=0:ki(l,r,l.prev)<0||ki(l,l.next,r)<0}function D1(l,r){const A=lg(l.i,l.x,l.y),u=lg(r.i,r.x,r.y),g=l.next,_=r.prev;return l.next=r,r.prev=l,A.next=g,g.prev=A,u.next=A,A.prev=u,_.next=u,u.prev=_,u}function R1(l,r,A,u){const g=lg(l,r,A);return u?(g.next=u.next,g.prev=u,u.next.prev=g,u.next=g):(g.prev=g,g.next=g),g}function zh(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function lg(l,r,A){return{i:l,x:r,y:A,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Uu{constructor(r,A){if(A>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=A}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class Kf{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}Kf.noSubdivision=new Kf({fill:new Uu(0,0),line:new Uu(0,0),tile:new Uu(0,0),stencil:new Uu(0,0),circle:1}),X("SubdivisionGranularityExpression",Uu),X("SubdivisionGranularitySetting",Kf);const ku=-32768,Hh=32767;class Cx{constructor(r,A){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=Ye/r,this._canonical=A}_getKey(r,A){return(r+=32768)<<16|(A+=32768)<<0}_vertexToIndex(r,A){if(r<-32768||A<-32768||r>32767||A>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const u=0|Math.round(r),g=0|Math.round(A),_=this._getKey(u,g);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,b),this._vertexBuffer.push(u,g),b}_subdivideTrianglesScanline(r){if(this._granularity<2)return function(g,_){const b=[];for(let B=0;B<_.length;B+=3){const S=_[B],k=_[B+1],N=_[B+2],H=g[2*S],q=g[2*S+1];(g[2*k]-H)*(g[2*N+1]-q)-(g[2*k+1]-q)*(g[2*N]-H)>0?(b.push(S),b.push(N),b.push(k)):(b.push(S),b.push(k),b.push(N))}return b}(this._vertexBuffer,r);const A=[],u=r.length;for(let g=0;g<u;g+=3){const _=[r[g+0],r[g+1],r[g+2]],b=[this._vertexBuffer[2*r[g+0]+0],this._vertexBuffer[2*r[g+0]+1],this._vertexBuffer[2*r[g+1]+0],this._vertexBuffer[2*r[g+1]+1],this._vertexBuffer[2*r[g+2]+0],this._vertexBuffer[2*r[g+2]+1]];let B=1/0,S=1/0,k=-1/0,N=-1/0;for(let oe=0;oe<3;oe++){const ye=b[2*oe],Ce=b[2*oe+1];B=Math.min(B,ye),k=Math.max(k,ye),S=Math.min(S,Ce),N=Math.max(N,Ce)}if(B===k||S===N)continue;const H=Math.floor(B/this._granularityCellSize),q=Math.ceil(k/this._granularityCellSize),W=Math.floor(S/this._granularityCellSize),J=Math.ceil(N/this._granularityCellSize);if(H!==q||W!==J)for(let oe=W;oe<J;oe++){const ye=this._scanlineGenerateVertexRingForCellRow(oe,b,_);Ix(this._vertexBuffer,ye,A)}else A.push(..._)}return A}_scanlineGenerateVertexRingForCellRow(r,A,u){const g=r*this._granularityCellSize,_=g+this._granularityCellSize,b=[];for(let B=0;B<3;B++){const S=A[2*B],k=A[2*B+1],N=A[2*(B+1)%6],H=A[(2*(B+1)+1)%6],q=A[2*(B+2)%6],W=A[(2*(B+2)+1)%6],J=N-S,oe=H-k,ye=J===0,Ce=oe===0,qe=(g-k)/oe,Pe=(_-k)/oe,$=Math.min(qe,Pe),de=Math.max(qe,Pe);if(!Ce&&($>=1||de<=0)||Ce&&(k<g||k>_)){H>=g&&H<=_&&b.push(u[(B+1)%3]);continue}!Ce&&$>0&&b.push(this._vertexToIndex(S+J*$,k+oe*$));const ke=S+J*Math.max($,0),dt=S+J*Math.min(de,1);ye||this._generateIntraEdgeVertices(b,S,k,N,H,ke,dt),!Ce&&de<1&&b.push(this._vertexToIndex(S+J*de,k+oe*de)),(Ce||H>=g&&H<=_)&&b.push(u[(B+1)%3]),!Ce&&(H<=g||H>=_)&&this._generateInterEdgeVertices(b,S,k,N,H,q,W,dt,g,_)}return b}_generateIntraEdgeVertices(r,A,u,g,_,b,B){const S=g-A,k=_-u,N=k===0,H=N?Math.min(A,g):Math.min(b,B),q=N?Math.max(A,g):Math.max(b,B),W=Math.floor(H/this._granularityCellSize)+1,J=Math.ceil(q/this._granularityCellSize)-1;if(N?A<g:b<B)for(let oe=W;oe<=J;oe++){const ye=oe*this._granularityCellSize;r.push(this._vertexToIndex(ye,u+k*(ye-A)/S))}else for(let oe=J;oe>=W;oe--){const ye=oe*this._granularityCellSize;r.push(this._vertexToIndex(ye,u+k*(ye-A)/S))}}_generateInterEdgeVertices(r,A,u,g,_,b,B,S,k,N){const H=_-u,q=b-g,W=B-_,J=(k-_)/W,oe=(N-_)/W,ye=Math.min(J,oe),Ce=Math.max(J,oe),qe=g+q*ye;let Pe=Math.floor(Math.min(qe,S)/this._granularityCellSize)+1,$=Math.ceil(Math.max(qe,S)/this._granularityCellSize)-1,de=S<qe;const ke=W===0;if(ke&&(B===k||B===N))return;if(ke||ye>=1||Ce<=0){const Nt=u-B,vt=b+(A-b)*Math.min((k-B)/Nt,(N-B)/Nt);Pe=Math.floor(Math.min(vt,S)/this._granularityCellSize)+1,$=Math.ceil(Math.max(vt,S)/this._granularityCellSize)-1,de=S<vt}const dt=H>0?N:k;if(de)for(let Nt=Pe;Nt<=$;Nt++)r.push(this._vertexToIndex(Nt*this._granularityCellSize,dt));else for(let Nt=$;Nt>=Pe;Nt--)r.push(this._vertexToIndex(Nt*this._granularityCellSize,dt))}_generateOutline(r){const A=[];for(const u of r){const g=Jc(u,this._granularity,!0),_=this._pointArrayToIndices(g),b=[];for(let B=1;B<_.length;B++)b.push(_[B-1]),b.push(_[B]);A.push(b)}return A}_handlePoles(r){let A=!1,u=!1;this._canonical&&(this._canonical.y===0&&(A=!0),this._canonical.y===(1<<this._canonical.z)-1&&(u=!0)),(A||u)&&this._fillPoles(r,A,u)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let A=0;A<r.length;A+=2){const u=r[A+1];u===ku&&(r[A+1]=-32767),u===Hh&&(r[A+1]=32766)}}_generatePoleQuad(r,A,u,g,_,b){g>_!=(b===ku)?(r.push(A),r.push(u),r.push(this._vertexToIndex(g,b)),r.push(u),r.push(this._vertexToIndex(_,b)),r.push(this._vertexToIndex(g,b))):(r.push(u),r.push(A),r.push(this._vertexToIndex(g,b)),r.push(this._vertexToIndex(_,b)),r.push(u),r.push(this._vertexToIndex(g,b)))}_fillPoles(r,A,u){const g=this._vertexBuffer,_=Ye,b=r.length;for(let B=2;B<b;B+=3){const S=r[B-2],k=r[B-1],N=r[B],H=g[2*S],q=g[2*S+1],W=g[2*k],J=g[2*k+1],oe=g[2*N],ye=g[2*N+1];A&&(q===0&&J===0&&this._generatePoleQuad(r,S,k,H,W,ku),J===0&&ye===0&&this._generatePoleQuad(r,k,N,W,oe,ku),ye===0&&q===0&&this._generatePoleQuad(r,N,S,oe,H,ku)),u&&(q===_&&J===_&&this._generatePoleQuad(r,S,k,H,W,Hh),J===_&&ye===_&&this._generatePoleQuad(r,k,N,W,oe,Hh),ye===_&&q===_&&this._generatePoleQuad(r,N,S,oe,H,Hh))}}_initializeVertices(r){for(let A=0;A<r.length;A+=2)this._vertexToIndex(r[A],r[A+1])}subdividePolygonInternal(r,A){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:u,holeIndices:g}=function(B){const S=[],k=[];for(const N of B)if(N.length!==0){N!==B[0]&&S.push(k.length/2);for(let H=0;H<N.length;H++)k.push(N[H].x),k.push(N[H].y)}return{flattened:k,holeIndices:S}}(r);let _;this._initializeVertices(u);try{const B=function(k,N,H=2){const q=N&&N.length,W=q?N[0]*H:k.length;let J=U1(k,0,W,H,!0);const oe=[];if(!J||J.next===J.prev)return oe;let ye,Ce,qe;if(q&&(J=function(Pe,$,de,ke){const dt=[];for(let Nt=0,vt=$.length;Nt<vt;Nt++){const Et=U1(Pe,$[Nt]*ke,Nt<vt-1?$[Nt+1]*ke:Pe.length,ke,!1);Et===Et.next&&(Et.steiner=!0),dt.push(xx(Et))}dt.sort(bx);for(let Nt=0;Nt<dt.length;Nt++)de=vx(dt[Nt],de);return de}(k,N,J,H)),k.length>80*H){ye=1/0,Ce=1/0;let Pe=-1/0,$=-1/0;for(let de=H;de<W;de+=H){const ke=k[de],dt=k[de+1];ke<ye&&(ye=ke),dt<Ce&&(Ce=dt),ke>Pe&&(Pe=ke),dt>$&&($=dt)}qe=Math.max(Pe-ye,$-Ce),qe=qe!==0?32767/qe:0}return Rh(J,oe,H,ye,Ce,qe,0),oe}(u,g),S=this._convertIndices(u,B);_=this._subdivideTrianglesScanline(S)}catch(B){console.error(B)}let b=[];return A&&(b=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:b}}_convertIndices(r,A){const u=[];for(let g=0;g<A.length;g++)u.push(this._vertexToIndex(r[2*A[g]],r[2*A[g]+1]));return u}_pointArrayToIndices(r){const A=[];for(let u=0;u<r.length;u++){const g=r[u];A.push(this._vertexToIndex(g.x,g.y))}return A}}function N1(l,r,A,u=!0){return new Cx(A,r).subdividePolygonInternal(l,u)}function Jc(l,r,A=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const u=l[0],g=l[l.length-1],_=A&&(u.x!==g.x||u.y!==g.y);if(r<2)return _?[...l,l[0]]:[...l];const b=Math.floor(Ye/r),B=[];B.push(new z(l[0].x,l[0].y));const S=l.length,k=_?S:S-1;for(let N=0;N<k;N++){const H=l[N],q=N<S-1?l[N+1]:l[0],W=H.x,J=H.y,oe=q.x,ye=q.y,Ce=W!==oe,qe=J!==ye;if(!Ce&&!qe)continue;const Pe=oe-W,$=ye-J,de=Math.abs(Pe),ke=Math.abs($);let dt=W,Nt=J;for(;;){const Et=Pe>0?(Math.floor(dt/b)+1)*b:(Math.ceil(dt/b)-1)*b,qt=$>0?(Math.floor(Nt/b)+1)*b:(Math.ceil(Nt/b)-1)*b,zt=Math.abs(dt-Et),Wt=Math.abs(Nt-qt),Pt=Math.abs(dt-oe),dr=Math.abs(Nt-ye),Er=Ce?zt/de:Number.POSITIVE_INFINITY,Ir=qe?Wt/ke:Number.POSITIVE_INFINITY;if((Pt<=zt||!Ce)&&(dr<=Wt||!qe))break;if(Er<Ir&&Ce||!qe){dt=Et,Nt+=$*Er;const _r=new z(dt,Math.round(Nt));B[B.length-1].x===_r.x&&B[B.length-1].y===_r.y||B.push(_r)}else{dt+=Pe*Ir,Nt=qt;const _r=new z(Math.round(dt),Nt);B[B.length-1].x===_r.x&&B[B.length-1].y===_r.y||B.push(_r)}}const vt=new z(oe,ye);B[B.length-1].x===vt.x&&B[B.length-1].y===vt.y||B.push(vt)}return B}function Ix(l,r,A){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let u=0,g=l[2*r[0]];for(let S=1;S<r.length;S++){const k=l[2*r[S]];k<g&&(g=k,u=S)}const _=r.length;let b=u,B=(b+1)%_;for(;;){const S=b-1>=0?b-1:_-1,k=(B+1)%_,N=l[2*r[S]],H=l[2*r[k]],q=l[2*r[b]],W=l[2*r[b]+1],J=l[2*r[B]+1];let oe=!1;if(N<H)oe=!0;else if(N>H)oe=!1;else{const ye=J-W,Ce=-(l[2*r[B]]-q),qe=W<J?1:-1;((N-q)*ye+(l[2*r[S]+1]-W)*Ce)*qe>((H-q)*ye+(l[2*r[k]+1]-W)*Ce)*qe&&(oe=!0)}if(oe){const ye=r[S],Ce=r[b],qe=r[B];ye!==Ce&&ye!==qe&&Ce!==qe&&A.push(qe,Ce,ye),b--,b<0&&(b=_-1)}else{const ye=r[k],Ce=r[b],qe=r[B];ye!==Ce&&ye!==qe&&Ce!==qe&&A.push(qe,Ce,ye),B++,B>=_&&(B=0)}if(S===k)break}}function O1(l,r,A,u,g,_,b,B,S){const k=g.length/2,N=b&&B&&S;if(k<en.MAX_VERTEX_ARRAY_LENGTH){const H=r.prepareSegment(k,A,u),q=H.vertexLength;for(let oe=0;oe<_.length;oe+=3)u.emplaceBack(q+_[oe],q+_[oe+1],q+_[oe+2]);let W,J;H.vertexLength+=k,H.primitiveLength+=_.length/3,N&&(J=b.prepareSegment(k,A,B),W=J.vertexLength,J.vertexLength+=k);for(let oe=0;oe<g.length;oe+=2)l(g[oe],g[oe+1]);if(N)for(let oe=0;oe<S.length;oe++){const ye=S[oe];for(let Ce=1;Ce<ye.length;Ce+=2)B.emplaceBack(W+ye[Ce-1],W+ye[Ce]);J.primitiveLength+=ye.length/2}}else(function(H,q,W,J,oe,ye){const Ce=[];for(let ke=0;ke<J.length/2;ke++)Ce.push(-1);const qe={count:0};let Pe=0,$=H.getOrCreateLatestSegment(q,W),de=$.vertexLength;for(let ke=2;ke<oe.length;ke+=3){const dt=oe[ke-2],Nt=oe[ke-1],vt=oe[ke];let Et=Ce[dt]<Pe,qt=Ce[Nt]<Pe,zt=Ce[vt]<Pe;$.vertexLength+((Et?1:0)+(qt?1:0)+(zt?1:0))>en.MAX_VERTEX_ARRAY_LENGTH&&($=H.createNewSegment(q,W),Pe=qe.count,Et=!0,qt=!0,zt=!0,de=0);const Wt=jh(Ce,J,ye,qe,dt,Et,$),Pt=jh(Ce,J,ye,qe,Nt,qt,$),dr=jh(Ce,J,ye,qe,vt,zt,$);W.emplaceBack(de+Wt-Pe,de+Pt-Pe,de+dr-Pe),$.primitiveLength++}})(r,A,u,g,_,l),N&&function(H,q,W,J,oe,ye){const Ce=[];for(let ke=0;ke<J.length/2;ke++)Ce.push(-1);const qe={count:0};let Pe=0,$=H.getOrCreateLatestSegment(q,W),de=$.vertexLength;for(let ke=0;ke<oe.length;ke++){const dt=oe[ke];for(let Nt=1;Nt<oe[ke].length;Nt+=2){const vt=dt[Nt-1],Et=dt[Nt];let qt=Ce[vt]<Pe,zt=Ce[Et]<Pe;$.vertexLength+((qt?1:0)+(zt?1:0))>en.MAX_VERTEX_ARRAY_LENGTH&&($=H.createNewSegment(q,W),Pe=qe.count,qt=!0,zt=!0,de=0);const Wt=jh(Ce,J,ye,qe,vt,qt,$),Pt=jh(Ce,J,ye,qe,Et,zt,$);W.emplaceBack(de+Wt-Pe,de+Pt-Pe),$.primitiveLength++}}}(b,A,B,g,S,l),r.forceNewSegmentOnNextPrepare(),b==null||b.forceNewSegmentOnNextPrepare()}function jh(l,r,A,u,g,_,b){if(_){const B=u.count;return A(r[2*g],r[2*g+1]),l[g]=u.count,u.count++,b.vertexLength++,B}return l[g]}class cg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Zt,this.indexArray=new _n,this.indexArray2=new ai,this.programConfigurations=new cl(r.layers,r.zoom),this.segments=new en,this.segments2=new en,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,u){this.hasPattern=sg("fill",this.layers,A);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),b=[];for(const{feature:B,id:S,index:k,sourceLayerIndex:N}of r){const H=this.layers[0]._featureFilter.needGeometry,q=$c(B,H);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),q,u))continue;const W=_?g.evaluate(q,{},u,A.availableImages):void 0,J={id:S,properties:B.properties,type:B.type,sourceLayerIndex:N,index:k,geometry:H?q.geometry:Zc(B),patterns:{},sortKey:W};b.push(J)}_&&b.sort((B,S)=>B.sortKey-S.sortKey);for(const B of b){const{geometry:S,index:k,sourceLayerIndex:N}=B;if(this.hasPattern){const H=og("fill",this.layers,B,this.zoom,A);this.patternFeatures.push(H)}else this.addFeature(B,S,k,u,{},A.subdivisionGranularity);A.featureIndex.insert(r[k].feature,S,k,N,this.index)}}update(r,A,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,u)}addFeatures(r,A,u){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,A,u,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,px),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,A,u,g,_,b){for(const B of mo(A,500)){const S=N1(B,g,b.fill.getGranularityForZoomLevel(g.z)),k=this.layoutVertexArray;O1((N,H)=>{k.emplaceBack(N,H)},this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,_,g)}}let z1,H1;X("FillBucket",cg,{omit:["layers","patternFeatures"]});var Fx={get paint(){return H1=H1||new gn({"fill-antialias":new cr(pe.paint_fill["fill-antialias"]),"fill-opacity":new ir(pe.paint_fill["fill-opacity"]),"fill-color":new ir(pe.paint_fill["fill-color"]),"fill-outline-color":new ir(pe.paint_fill["fill-outline-color"]),"fill-translate":new cr(pe.paint_fill["fill-translate"]),"fill-translate-anchor":new cr(pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ki(pe.paint_fill["fill-pattern"])})},get layout(){return z1=z1||new gn({"fill-sort-key":new ir(pe.layout_fill["fill-sort-key"])})}};class Ex extends ii{constructor(r){super(r,Fx)}recalculate(r,A){super.recalculate(r,A);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new cg(r)}queryRadius(){return Hf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:A,transform:u,pixelsToTileUnits:g}){return x1(jf(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-u.bearingInRadians,g),A)}isTileClipped(){return!0}}const Sx=Fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Tx=Fn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Lx}=Sx;var ug,j1,hg,V1,fg,G1,K1,qf={};function q1(){if(j1)return ug;j1=1;var l=M();function r(g,_,b,B,S){this.properties={},this.extent=b,this.type=0,this._pbf=g,this._geometry=-1,this._keys=B,this._values=S,g.readFields(A,this,_)}function A(g,_,b){g==1?_.id=b.readVarint():g==2?function(B,S){for(var k=B.readVarint()+B.pos;B.pos<k;){var N=S._keys[B.readVarint()],H=S._values[B.readVarint()];S.properties[N]=H}}(b,_):g==3?_.type=b.readVarint():g==4&&(_._geometry=b.pos)}function u(g){for(var _,b,B=0,S=0,k=g.length,N=k-1;S<k;N=S++)B+=((b=g[N]).x-(_=g[S]).x)*(_.y+b.y);return B}return ug=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var _,b=g.readVarint()+g.pos,B=1,S=0,k=0,N=0,H=[];g.pos<b;){if(S<=0){var q=g.readVarint();B=7&q,S=q>>3}if(S--,B===1||B===2)k+=g.readSVarint(),N+=g.readSVarint(),B===1&&(_&&H.push(_),_=[]),_.push(new l(k,N));else{if(B!==7)throw new Error("unknown command "+B);_&&_.push(_[0].clone())}}return _&&H.push(_),H},r.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var _=g.readVarint()+g.pos,b=1,B=0,S=0,k=0,N=1/0,H=-1/0,q=1/0,W=-1/0;g.pos<_;){if(B<=0){var J=g.readVarint();b=7&J,B=J>>3}if(B--,b===1||b===2)(S+=g.readSVarint())<N&&(N=S),S>H&&(H=S),(k+=g.readSVarint())<q&&(q=k),k>W&&(W=k);else if(b!==7)throw new Error("unknown command "+b)}return[N,q,H,W]},r.prototype.toGeoJSON=function(g,_,b){var B,S,k=this.extent*Math.pow(2,b),N=this.extent*g,H=this.extent*_,q=this.loadGeometry(),W=r.types[this.type];function J(Ce){for(var qe=0;qe<Ce.length;qe++){var Pe=Ce[qe];Ce[qe]=[360*(Pe.x+N)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+H)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(B=0;B<q.length;B++)oe[B]=q[B][0];J(q=oe);break;case 2:for(B=0;B<q.length;B++)J(q[B]);break;case 3:for(q=function(Ce){var qe=Ce.length;if(qe<=1)return[Ce];for(var Pe,$,de=[],ke=0;ke<qe;ke++){var dt=u(Ce[ke]);dt!==0&&($===void 0&&($=dt<0),$===dt<0?(Pe&&de.push(Pe),Pe=[Ce[ke]]):Pe.push(Ce[ke]))}return Pe&&de.push(Pe),de}(q),B=0;B<q.length;B++)for(S=0;S<q[B].length;S++)J(q[B][S])}q.length===1?q=q[0]:W="Multi"+W;var ye={type:"Feature",geometry:{type:W,coordinates:q},properties:this.properties};return"id"in this&&(ye.id=this.id),ye},ug}function Z1(){if(V1)return hg;V1=1;var l=q1();function r(u,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(A,this,g),this.length=this._features.length}function A(u,g,_){u===15?g.version=_.readVarint():u===1?g.name=_.readString():u===5?g.extent=_.readVarint():u===2?g._features.push(_.pos):u===3?g._keys.push(_.readString()):u===4&&g._values.push(function(b){for(var B=null,S=b.readVarint()+b.pos;b.pos<S;){var k=b.readVarint()>>3;B=k===1?b.readString():k===2?b.readFloat():k===3?b.readDouble():k===4?b.readVarint64():k===5?b.readVarint():k===6?b.readSVarint():k===7?b.readBoolean():null}return B}(_))}return hg=r,r.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var g=this._pbf.readVarint()+this._pbf.pos;return new l(this._pbf,g,this.extent,this._keys,this._values)},hg}function $1(){return K1||(K1=1,qf.VectorTile=function(){if(G1)return fg;G1=1;var l=Z1();function r(A,u,g){if(A===3){var _=new l(g,g.readVarint()+g.pos);_.length&&(u[_.name]=_)}}return fg=function(A,u){this.layers=A.readFields(r,{},u)},fg}(),qf.VectorTileFeature=q1(),qf.VectorTileLayer=Z1()),qf}var Vh=v($1());const Px=Vh.VectorTileFeature.types,dg=Math.pow(2,13);function Gh(l,r,A,u,g,_,b,B){l.emplaceBack(r,A,2*Math.floor(u*dg)+b,g*dg*2,_*dg*2,Math.round(B))}class pg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Rt,this.centroidVertexArray=new It,this.indexArray=new _n,this.programConfigurations=new cl(r.layers,r.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,u){this.features=[],this.hasPattern=sg("fill-extrusion",this.layers,A);for(const{feature:g,id:_,index:b,sourceLayerIndex:B}of r){const S=this.layers[0]._featureFilter.needGeometry,k=$c(g,S);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),k,u))continue;const N={id:_,sourceLayerIndex:B,index:b,geometry:S?k.geometry:Zc(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(og("fill-extrusion",this.layers,N,this.zoom,A)):this.addFeature(N,N.geometry,b,u,{},A.subdivisionGranularity),A.featureIndex.insert(g,N.geometry,b,B,this.index,!0)}}addFeatures(r,A,u){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,A,u,r.subdivisionGranularity)}}update(r,A,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Lx),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Tx.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,A,u,g,_,b){for(const B of mo(A,500)){const S={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(S,g,r,B,b);const N=this.layoutVertexArray.length-k,H=Math.floor(S.x/S.sampleCount),q=Math.floor(S.y/S.sampleCount);for(let W=0;W<N;W++)this.centroidVertexArray.emplaceBack(H,q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,_,g)}processPolygon(r,A,u,g,_){if(g.length<1||W1(g[0]))return;for(const H of g)H.length!==0&&Mx(r,H);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},B=_.fill.getGranularityForZoomLevel(A.z),S=Px[u.type]==="Polygon";for(const H of g){if(H.length===0||W1(H))continue;const q=Jc(H,B,S);this._generateSideFaces(q,b)}if(!S)return;const k=N1(g,A,B,!1),N=this.layoutVertexArray;O1((H,q)=>{Gh(N,H,q,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(r,A){let u=0;for(let g=1;g<r.length;g++){const _=r[g],b=r[g-1];if(Ux(_,b))continue;A.segment.vertexLength+4>en.MAX_VERTEX_ARRAY_LENGTH&&(A.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const B=_.sub(b)._perp()._unit(),S=b.dist(_);u+S>32768&&(u=0),Gh(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,0,u),Gh(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,1,u),u+=S,Gh(this.layoutVertexArray,b.x,b.y,B.x,B.y,0,0,u),Gh(this.layoutVertexArray,b.x,b.y,B.x,B.y,0,1,u);const k=A.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),A.segment.vertexLength+=4,A.segment.primitiveLength+=2}}}function Mx(l,r){for(let A=0;A<r.length;A++){const u=r[A];A===r.length-1&&r[0].x===u.x&&r[0].y===u.y||(l.x+=u.x,l.y+=u.y,l.sampleCount++)}}function Ux(l,r){return l.x===r.x&&(l.x<0||l.x>Ye)||l.y===r.y&&(l.y<0||l.y>Ye)}function W1(l){return l.every(r=>r.x<0)||l.every(r=>r.x>Ye)||l.every(r=>r.y<0)||l.every(r=>r.y>Ye)}let X1;X("FillExtrusionBucket",pg,{omit:["layers","features"]});var kx={get paint(){return X1=X1||new gn({"fill-extrusion-opacity":new cr(pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ir(pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cr(pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cr(pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ki(pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ir(pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ir(pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cr(pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Qx extends ii{constructor(r){super(r,kx)}createBucket(r){return new pg(r)}queryRadius(){return Hf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:A,featureState:u,geometry:g,transform:_,pixelsToTileUnits:b,pixelPosMatrix:B}){const S=jf(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,b),k=this.paint.get("fill-extrusion-height").evaluate(A,u),N=this.paint.get("fill-extrusion-base").evaluate(A,u),H=function(W,J,oe){const ye=[];for(const Ce of W){const qe=[Ce.x,Ce.y,0,1];Se(qe,qe,J),ye.push(new z(qe[0]/qe[3],qe[1]/qe[3]))}return ye}(S,B),q=function(W,J,oe,ye){const Ce=[],qe=[],Pe=ye[8]*J,$=ye[9]*J,de=ye[10]*J,ke=ye[11]*J,dt=ye[8]*oe,Nt=ye[9]*oe,vt=ye[10]*oe,Et=ye[11]*oe;for(const qt of W){const zt=[],Wt=[];for(const Pt of qt){const dr=Pt.x,Er=Pt.y,Ir=ye[0]*dr+ye[4]*Er+ye[12],_r=ye[1]*dr+ye[5]*Er+ye[13],dn=ye[2]*dr+ye[6]*Er+ye[14],mi=ye[3]*dr+ye[7]*Er+ye[15],Wi=dn+de,Ha=mi+ke,So=Ir+dt,Rs=_r+Nt,Ea=dn+vt,hi=mi+Et,fa=new z((Ir+Pe)/Ha,(_r+$)/Ha);fa.z=Wi/Ha,zt.push(fa);const Sa=new z(So/hi,Rs/hi);Sa.z=Ea/hi,Wt.push(Sa)}Ce.push(zt),qe.push(Wt)}return[Ce,qe]}(g,N,k,B);return function(W,J,oe){let ye=1/0;x1(oe,J)&&(ye=J1(oe,J[0]));for(let Ce=0;Ce<J.length;Ce++){const qe=J[Ce],Pe=W[Ce];for(let $=0;$<qe.length-1;$++){const de=qe[$],ke=[de,qe[$+1],Pe[$+1],Pe[$],de];w1(oe,ke)&&(ye=Math.min(ye,J1(oe,ke)))}}return ye!==1/0&&ye}(q[0],q[1],H)}}function Kh(l,r){return l.x*r.x+l.y*r.y}function J1(l,r){if(l.length===1){let A=0;const u=r[A++];let g;for(;!g||u.equals(g);)if(g=r[A++],!g)return 1/0;for(;A<r.length;A++){const _=r[A],b=l[0],B=g.sub(u),S=_.sub(u),k=b.sub(u),N=Kh(B,B),H=Kh(B,S),q=Kh(S,S),W=Kh(k,B),J=Kh(k,S),oe=N*q-H*H,ye=(q*W-H*J)/oe,Ce=(N*J-H*W)/oe,qe=u.z*(1-ye-Ce)+g.z*ye+_.z*Ce;if(isFinite(qe))return qe}return 1/0}{let A=1/0;for(const u of r)A=Math.min(A,u.z);return A}}const Dx=Fn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Rx}=Dx,Nx=Fn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ox}=Nx,zx=Vh.VectorTileFeature.types,Hx=Math.cos(Math.PI/180*37.5),Y1=Math.pow(2,14)/.5;class gg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new gr,this.layoutVertexArray2=new $r,this.indexArray=new _n,this.programConfigurations=new cl(r.layers,r.zoom),this.segments=new en,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,u){this.hasPattern=sg("line",this.layers,A);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),b=[];for(const{feature:B,id:S,index:k,sourceLayerIndex:N}of r){const H=this.layers[0]._featureFilter.needGeometry,q=$c(B,H);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),q,u))continue;const W=_?g.evaluate(q,{},u):void 0,J={id:S,properties:B.properties,type:B.type,sourceLayerIndex:N,index:k,geometry:H?q.geometry:Zc(B),patterns:{},sortKey:W};b.push(J)}_&&b.sort((B,S)=>B.sortKey-S.sortKey);for(const B of b){const{geometry:S,index:k,sourceLayerIndex:N}=B;if(this.hasPattern){const H=og("line",this.layers,B,this.zoom,A);this.patternFeatures.push(H)}else this.addFeature(B,S,k,u,{},A.subdivisionGranularity);A.featureIndex.insert(r[k].feature,S,k,N,this.index)}}update(r,A,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,u)}addFeatures(r,A,u){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,A,u,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Ox)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Rx),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,A,u,g,_,b){const B=this.layers[0].layout,S=B.get("line-join").evaluate(r,{}),k=B.get("line-cap"),N=B.get("line-miter-limit"),H=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const q of A)this.addLine(q,r,S,k,N,H,g,b);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,_,g)}addLine(r,A,u,g,_,b,B,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=Jc(r,B?S.line.getGranularityForZoomLevel(B.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<r.length-1;Pe++)this.totalDistance+=r[Pe].dist(r[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=zx[A.type]==="Polygon";let N=r.length;for(;N>=2&&r[N-1].equals(r[N-2]);)N--;let H=0;for(;H<N-1&&r[H].equals(r[H+1]);)H++;if(N<(k?3:2))return;u==="bevel"&&(_=1.05);const q=this.overscaling<=16?15*Ye/(512*this.overscaling):0,W=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let J,oe,ye,Ce,qe;this.e1=this.e2=-1,k&&(J=r[N-2],qe=r[H].sub(J)._unit()._perp());for(let Pe=H;Pe<N;Pe++){if(ye=Pe===N-1?k?r[H+1]:void 0:r[Pe+1],ye&&r[Pe].equals(ye))continue;qe&&(Ce=qe),J&&(oe=J),J=r[Pe],qe=ye?ye.sub(J)._unit()._perp():Ce,Ce=Ce||qe;let $=Ce.add(qe);$.x===0&&$.y===0||$._unit();const de=Ce.x*qe.x+Ce.y*qe.y,ke=$.x*qe.x+$.y*qe.y,dt=ke!==0?1/ke:1/0,Nt=2*Math.sqrt(2-2*ke),vt=ke<Hx&&oe&&ye,Et=Ce.x*qe.y-Ce.y*qe.x>0;if(vt&&Pe>H){const Wt=J.dist(oe);if(Wt>2*q){const Pt=J.sub(J.sub(oe)._mult(q/Wt)._round());this.updateDistance(oe,Pt),this.addCurrentVertex(Pt,Ce,0,0,W),oe=Pt}}const qt=oe&&ye;let zt=qt?u:k?"butt":g;if(qt&&zt==="round"&&(dt<b?zt="miter":dt<=2&&(zt="fakeround")),zt==="miter"&&dt>_&&(zt="bevel"),zt==="bevel"&&(dt>2&&(zt="flipbevel"),dt<_&&(zt="miter")),oe&&this.updateDistance(oe,J),zt==="miter")$._mult(dt),this.addCurrentVertex(J,$,0,0,W);else if(zt==="flipbevel"){if(dt>100)$=qe.mult(-1);else{const Wt=dt*Ce.add(qe).mag()/Ce.sub(qe).mag();$._perp()._mult(Wt*(Et?-1:1))}this.addCurrentVertex(J,$,0,0,W),this.addCurrentVertex(J,$.mult(-1),0,0,W)}else if(zt==="bevel"||zt==="fakeround"){const Wt=-Math.sqrt(dt*dt-1),Pt=Et?Wt:0,dr=Et?0:Wt;if(oe&&this.addCurrentVertex(J,Ce,Pt,dr,W),zt==="fakeround"){const Er=Math.round(180*Nt/Math.PI/20);for(let Ir=1;Ir<Er;Ir++){let _r=Ir/Er;if(_r!==.5){const mi=_r-.5;_r+=_r*mi*(_r-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*mi*mi+(.848013+de*(.215638*de-1.06021)))}const dn=qe.sub(Ce)._mult(_r)._add(Ce)._unit()._mult(Et?-1:1);this.addHalfVertex(J,dn.x,dn.y,!1,Et,0,W)}}ye&&this.addCurrentVertex(J,qe,-Pt,-dr,W)}else if(zt==="butt")this.addCurrentVertex(J,$,0,0,W);else if(zt==="square"){const Wt=oe?1:-1;this.addCurrentVertex(J,$,Wt,Wt,W)}else zt==="round"&&(oe&&(this.addCurrentVertex(J,Ce,0,0,W),this.addCurrentVertex(J,Ce,1,1,W,!0)),ye&&(this.addCurrentVertex(J,qe,-1,-1,W,!0),this.addCurrentVertex(J,qe,0,0,W)));if(vt&&Pe<N-1){const Wt=J.dist(ye);if(Wt>2*q){const Pt=J.add(ye.sub(J)._mult(q/Wt)._round());this.updateDistance(J,Pt),this.addCurrentVertex(Pt,qe,0,0,W),J=Pt}}}}addCurrentVertex(r,A,u,g,_,b=!1){const B=A.y*g-A.x,S=-A.y-A.x*g;this.addHalfVertex(r,A.x+A.y*u,A.y-A.x*u,b,!1,u,_),this.addHalfVertex(r,B,S,b,!0,-g,_),this.distance>Y1/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,A,u,g,_,b))}addHalfVertex({x:r,y:A},u,g,_,b,B,S){const k=.5*(this.lineClips?this.scaledDistance*(Y1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(_?1:0),(A<<1)+(b?1:0),Math.round(63*u)+128,Math.round(63*g)+128,1+(B===0?0:B<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),S.primitiveLength++),b?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,A){this.distance+=r.dist(A),this.updateScaledDistance()}}let ey,ty;X("LineBucket",gg,{omit:["layers","patternFeatures"]});var ry={get paint(){return ty=ty||new gn({"line-opacity":new ir(pe.paint_line["line-opacity"]),"line-color":new ir(pe.paint_line["line-color"]),"line-translate":new cr(pe.paint_line["line-translate"]),"line-translate-anchor":new cr(pe.paint_line["line-translate-anchor"]),"line-width":new ir(pe.paint_line["line-width"]),"line-gap-width":new ir(pe.paint_line["line-gap-width"]),"line-offset":new ir(pe.paint_line["line-offset"]),"line-blur":new ir(pe.paint_line["line-blur"]),"line-dasharray":new Ca(pe.paint_line["line-dasharray"]),"line-pattern":new Ki(pe.paint_line["line-pattern"]),"line-gradient":new Ci(pe.paint_line["line-gradient"])})},get layout(){return ey=ey||new gn({"line-cap":new cr(pe.layout_line["line-cap"]),"line-join":new ir(pe.layout_line["line-join"]),"line-miter-limit":new cr(pe.layout_line["line-miter-limit"]),"line-round-limit":new cr(pe.layout_line["line-round-limit"]),"line-sort-key":new ir(pe.layout_line["line-sort-key"])})}};class jx extends ir{possiblyEvaluate(r,A){return A=new Mr(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(r,A)}evaluate(r,A,u,g){return A=ut({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(r,A,u,g)}}let Zf;class Vx extends ii{constructor(r){super(r,ry),this.gradientVersion=0,Zf||(Zf=new jx(ry.paint.properties["line-width"].specification),Zf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!function(u){return u._styleExpression!==void 0}(A)&&A._styleExpression.expression instanceof Ma,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,A){super.recalculate(r,A),this.paint._values["line-floorwidth"]=Zf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new gg(r)}queryRadius(r){const A=r,u=ny(Qh("line-width",this,A),Qh("line-gap-width",this,A)),g=Qh("line-offset",this,A);return u/2+Math.abs(g)+Hf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:A,featureState:u,geometry:g,transform:_,pixelsToTileUnits:b}){const B=jf(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,b),S=b/2*ny(this.paint.get("line-width").evaluate(A,u),this.paint.get("line-gap-width").evaluate(A,u)),k=this.paint.get("line-offset").evaluate(A,u);return k&&(g=function(N,H){const q=[];for(let W=0;W<N.length;W++){const J=N[W],oe=[];for(let ye=0;ye<J.length;ye++){const Ce=J[ye-1],qe=J[ye],Pe=J[ye+1],$=ye===0?new z(0,0):qe.sub(Ce)._unit()._perp(),de=ye===J.length-1?new z(0,0):Pe.sub(qe)._unit()._perp(),ke=$._add(de)._unit(),dt=ke.x*de.x+ke.y*de.y;dt!==0&&ke._mult(1/dt),oe.push(ke._mult(H)._add(qe))}q.push(oe)}return q}(g,k*b)),function(N,H,q){for(let W=0;W<H.length;W++){const J=H[W];if(N.length>=3){for(let oe=0;oe<J.length;oe++)if(Wc(N,J[oe]))return!0}if(ax(N,J,q))return!0}return!1}(B,g,S)}isTileClipped(){return!0}}function ny(l,r){return r>0?r+2*l:l}const Gx=Fn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Kx=Fn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Fn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const qx=Fn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Fn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const iy=Fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Zx=Fn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $x(l,r,A){return l.sections.forEach(u=>{u.text=function(g,_,b){const B=_.layout.get("text-transform").evaluate(b,{});return B==="uppercase"?g=g.toLocaleUpperCase():B==="lowercase"&&(g=g.toLocaleLowerCase()),nn.applyArabicShaping&&(g=nn.applyArabicShaping(g)),g}(u.text,r,A)}),l}Fn([{name:"triangle",components:3,type:"Uint16"}]),Fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Fn([{type:"Float32",name:"offsetX"}]),Fn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Fn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const qh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ay,mg,sy,$i=24,yg={};function Wx(){return ay||(ay=1,yg.read=function(l,r,A,u,g){var _,b,B=8*g-u-1,S=(1<<B)-1,k=S>>1,N=-7,H=A?g-1:0,q=A?-1:1,W=l[r+H];for(H+=q,_=W&(1<<-N)-1,W>>=-N,N+=B;N>0;_=256*_+l[r+H],H+=q,N-=8);for(b=_&(1<<-N)-1,_>>=-N,N+=u;N>0;b=256*b+l[r+H],H+=q,N-=8);if(_===0)_=1-k;else{if(_===S)return b?NaN:1/0*(W?-1:1);b+=Math.pow(2,u),_-=k}return(W?-1:1)*b*Math.pow(2,_-u)},yg.write=function(l,r,A,u,g,_){var b,B,S,k=8*_-g-1,N=(1<<k)-1,H=N>>1,q=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=u?0:_-1,J=u?1:-1,oe=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(B=isNaN(r)?1:0,b=N):(b=Math.floor(Math.log(r)/Math.LN2),r*(S=Math.pow(2,-b))<1&&(b--,S*=2),(r+=b+H>=1?q/S:q*Math.pow(2,1-H))*S>=2&&(b++,S/=2),b+H>=N?(B=0,b=N):b+H>=1?(B=(r*S-1)*Math.pow(2,g),b+=H):(B=r*Math.pow(2,H-1)*Math.pow(2,g),b=0));g>=8;l[A+W]=255&B,W+=J,B/=256,g-=8);for(b=b<<g|B,k+=g;k>0;l[A+W]=255&b,W+=J,b/=256,k-=8);l[A+W-J]|=128*oe}),yg}function oy(){if(sy)return mg;sy=1,mg=r;var l=Wx();function r($){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView($)?$:new Uint8Array($||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var A=4294967296,u=1/A,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function _($){return $.type===r.Bytes?$.readVarint()+$.pos:$.pos+1}function b($,de,ke){return ke?4294967296*de+($>>>0):4294967296*(de>>>0)+($>>>0)}function B($,de,ke){var dt=de<=16383?1:de<=2097151?2:de<=268435455?3:Math.floor(Math.log(de)/(7*Math.LN2));ke.realloc(dt);for(var Nt=ke.pos-1;Nt>=$;Nt--)ke.buf[Nt+dt]=ke.buf[Nt]}function S($,de){for(var ke=0;ke<$.length;ke++)de.writeVarint($[ke])}function k($,de){for(var ke=0;ke<$.length;ke++)de.writeSVarint($[ke])}function N($,de){for(var ke=0;ke<$.length;ke++)de.writeFloat($[ke])}function H($,de){for(var ke=0;ke<$.length;ke++)de.writeDouble($[ke])}function q($,de){for(var ke=0;ke<$.length;ke++)de.writeBoolean($[ke])}function W($,de){for(var ke=0;ke<$.length;ke++)de.writeFixed32($[ke])}function J($,de){for(var ke=0;ke<$.length;ke++)de.writeSFixed32($[ke])}function oe($,de){for(var ke=0;ke<$.length;ke++)de.writeFixed64($[ke])}function ye($,de){for(var ke=0;ke<$.length;ke++)de.writeSFixed64($[ke])}function Ce($,de){return($[de]|$[de+1]<<8|$[de+2]<<16)+16777216*$[de+3]}function qe($,de,ke){$[ke]=de,$[ke+1]=de>>>8,$[ke+2]=de>>>16,$[ke+3]=de>>>24}function Pe($,de){return($[de]|$[de+1]<<8|$[de+2]<<16)+($[de+3]<<24)}return r.prototype={destroy:function(){this.buf=null},readFields:function($,de,ke){for(ke=ke||this.length;this.pos<ke;){var dt=this.readVarint(),Nt=dt>>3,vt=this.pos;this.type=7&dt,$(Nt,de,this),this.pos===vt&&this.skip(dt)}return de},readMessage:function($,de){return this.readFields($,de,this.readVarint()+this.pos)},readFixed32:function(){var $=Ce(this.buf,this.pos);return this.pos+=4,$},readSFixed32:function(){var $=Pe(this.buf,this.pos);return this.pos+=4,$},readFixed64:function(){var $=Ce(this.buf,this.pos)+Ce(this.buf,this.pos+4)*A;return this.pos+=8,$},readSFixed64:function(){var $=Ce(this.buf,this.pos)+Pe(this.buf,this.pos+4)*A;return this.pos+=8,$},readFloat:function(){var $=l.read(this.buf,this.pos,!0,23,4);return this.pos+=4,$},readDouble:function(){var $=l.read(this.buf,this.pos,!0,52,8);return this.pos+=8,$},readVarint:function($){var de,ke,dt=this.buf;return de=127&(ke=dt[this.pos++]),ke<128?de:(de|=(127&(ke=dt[this.pos++]))<<7,ke<128?de:(de|=(127&(ke=dt[this.pos++]))<<14,ke<128?de:(de|=(127&(ke=dt[this.pos++]))<<21,ke<128?de:function(Nt,vt,Et){var qt,zt,Wt=Et.buf;if(qt=(112&(zt=Wt[Et.pos++]))>>4,zt<128||(qt|=(127&(zt=Wt[Et.pos++]))<<3,zt<128)||(qt|=(127&(zt=Wt[Et.pos++]))<<10,zt<128)||(qt|=(127&(zt=Wt[Et.pos++]))<<17,zt<128)||(qt|=(127&(zt=Wt[Et.pos++]))<<24,zt<128)||(qt|=(1&(zt=Wt[Et.pos++]))<<31,zt<128))return b(Nt,qt,vt);throw new Error("Expected varint not more than 10 bytes")}(de|=(15&(ke=dt[this.pos]))<<28,$,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var $=this.readVarint();return $%2==1?($+1)/-2:$/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var $=this.readVarint()+this.pos,de=this.pos;return this.pos=$,$-de>=12&&g?function(ke,dt,Nt){return g.decode(ke.subarray(dt,Nt))}(this.buf,de,$):function(ke,dt,Nt){for(var vt="",Et=dt;Et<Nt;){var qt,zt,Wt,Pt=ke[Et],dr=null,Er=Pt>239?4:Pt>223?3:Pt>191?2:1;if(Et+Er>Nt)break;Er===1?Pt<128&&(dr=Pt):Er===2?(192&(qt=ke[Et+1]))==128&&(dr=(31&Pt)<<6|63&qt)<=127&&(dr=null):Er===3?(zt=ke[Et+2],(192&(qt=ke[Et+1]))==128&&(192&zt)==128&&((dr=(15&Pt)<<12|(63&qt)<<6|63&zt)<=2047||dr>=55296&&dr<=57343)&&(dr=null)):Er===4&&(zt=ke[Et+2],Wt=ke[Et+3],(192&(qt=ke[Et+1]))==128&&(192&zt)==128&&(192&Wt)==128&&((dr=(15&Pt)<<18|(63&qt)<<12|(63&zt)<<6|63&Wt)<=65535||dr>=1114112)&&(dr=null)),dr===null?(dr=65533,Er=1):dr>65535&&(dr-=65536,vt+=String.fromCharCode(dr>>>10&1023|55296),dr=56320|1023&dr),vt+=String.fromCharCode(dr),Et+=Er}return vt}(this.buf,de,$)},readBytes:function(){var $=this.readVarint()+this.pos,de=this.buf.subarray(this.pos,$);return this.pos=$,de},readPackedVarint:function($,de){if(this.type!==r.Bytes)return $.push(this.readVarint(de));var ke=_(this);for($=$||[];this.pos<ke;)$.push(this.readVarint(de));return $},readPackedSVarint:function($){if(this.type!==r.Bytes)return $.push(this.readSVarint());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readSVarint());return $},readPackedBoolean:function($){if(this.type!==r.Bytes)return $.push(this.readBoolean());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readBoolean());return $},readPackedFloat:function($){if(this.type!==r.Bytes)return $.push(this.readFloat());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readFloat());return $},readPackedDouble:function($){if(this.type!==r.Bytes)return $.push(this.readDouble());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readDouble());return $},readPackedFixed32:function($){if(this.type!==r.Bytes)return $.push(this.readFixed32());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readFixed32());return $},readPackedSFixed32:function($){if(this.type!==r.Bytes)return $.push(this.readSFixed32());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readSFixed32());return $},readPackedFixed64:function($){if(this.type!==r.Bytes)return $.push(this.readFixed64());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readFixed64());return $},readPackedSFixed64:function($){if(this.type!==r.Bytes)return $.push(this.readSFixed64());var de=_(this);for($=$||[];this.pos<de;)$.push(this.readSFixed64());return $},skip:function($){var de=7&$;if(de===r.Varint)for(;this.buf[this.pos++]>127;);else if(de===r.Bytes)this.pos=this.readVarint()+this.pos;else if(de===r.Fixed32)this.pos+=4;else{if(de!==r.Fixed64)throw new Error("Unimplemented type: "+de);this.pos+=8}},writeTag:function($,de){this.writeVarint($<<3|de)},realloc:function($){for(var de=this.length||16;de<this.pos+$;)de*=2;if(de!==this.length){var ke=new Uint8Array(de);ke.set(this.buf),this.buf=ke,this.length=de}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function($){this.realloc(4),qe(this.buf,$,this.pos),this.pos+=4},writeSFixed32:function($){this.realloc(4),qe(this.buf,$,this.pos),this.pos+=4},writeFixed64:function($){this.realloc(8),qe(this.buf,-1&$,this.pos),qe(this.buf,Math.floor($*u),this.pos+4),this.pos+=8},writeSFixed64:function($){this.realloc(8),qe(this.buf,-1&$,this.pos),qe(this.buf,Math.floor($*u),this.pos+4),this.pos+=8},writeVarint:function($){($=+$||0)>268435455||$<0?function(de,ke){var dt,Nt;if(de>=0?(dt=de%4294967296|0,Nt=de/4294967296|0):(Nt=~(-de/4294967296),4294967295^(dt=~(-de%4294967296))?dt=dt+1|0:(dt=0,Nt=Nt+1|0)),de>=18446744073709552e3||de<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ke.realloc(10),function(vt,Et,qt){qt.buf[qt.pos++]=127&vt|128,vt>>>=7,qt.buf[qt.pos++]=127&vt|128,vt>>>=7,qt.buf[qt.pos++]=127&vt|128,vt>>>=7,qt.buf[qt.pos++]=127&vt|128,qt.buf[qt.pos]=127&(vt>>>=7)}(dt,0,ke),function(vt,Et){var qt=(7&vt)<<4;Et.buf[Et.pos++]|=qt|((vt>>>=3)?128:0),vt&&(Et.buf[Et.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Et.buf[Et.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Et.buf[Et.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Et.buf[Et.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Et.buf[Et.pos++]=127&vt)))))}(Nt,ke)}($,this):(this.realloc(4),this.buf[this.pos++]=127&$|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=$>>>7&127))))},writeSVarint:function($){this.writeVarint($<0?2*-$-1:2*$)},writeBoolean:function($){this.writeVarint(!!$)},writeString:function($){$=String($),this.realloc(4*$.length),this.pos++;var de=this.pos;this.pos=function(dt,Nt,vt){for(var Et,qt,zt=0;zt<Nt.length;zt++){if((Et=Nt.charCodeAt(zt))>55295&&Et<57344){if(!qt){Et>56319||zt+1===Nt.length?(dt[vt++]=239,dt[vt++]=191,dt[vt++]=189):qt=Et;continue}if(Et<56320){dt[vt++]=239,dt[vt++]=191,dt[vt++]=189,qt=Et;continue}Et=qt-55296<<10|Et-56320|65536,qt=null}else qt&&(dt[vt++]=239,dt[vt++]=191,dt[vt++]=189,qt=null);Et<128?dt[vt++]=Et:(Et<2048?dt[vt++]=Et>>6|192:(Et<65536?dt[vt++]=Et>>12|224:(dt[vt++]=Et>>18|240,dt[vt++]=Et>>12&63|128),dt[vt++]=Et>>6&63|128),dt[vt++]=63&Et|128)}return vt}(this.buf,$,this.pos);var ke=this.pos-de;ke>=128&&B(de,ke,this),this.pos=de-1,this.writeVarint(ke),this.pos+=ke},writeFloat:function($){this.realloc(4),l.write(this.buf,$,this.pos,!0,23,4),this.pos+=4},writeDouble:function($){this.realloc(8),l.write(this.buf,$,this.pos,!0,52,8),this.pos+=8},writeBytes:function($){var de=$.length;this.writeVarint(de),this.realloc(de);for(var ke=0;ke<de;ke++)this.buf[this.pos++]=$[ke]},writeRawMessage:function($,de){this.pos++;var ke=this.pos;$(de,this);var dt=this.pos-ke;dt>=128&&B(ke,dt,this),this.pos=ke-1,this.writeVarint(dt),this.pos+=dt},writeMessage:function($,de,ke){this.writeTag($,r.Bytes),this.writeRawMessage(de,ke)},writePackedVarint:function($,de){de.length&&this.writeMessage($,S,de)},writePackedSVarint:function($,de){de.length&&this.writeMessage($,k,de)},writePackedBoolean:function($,de){de.length&&this.writeMessage($,q,de)},writePackedFloat:function($,de){de.length&&this.writeMessage($,N,de)},writePackedDouble:function($,de){de.length&&this.writeMessage($,H,de)},writePackedFixed32:function($,de){de.length&&this.writeMessage($,W,de)},writePackedSFixed32:function($,de){de.length&&this.writeMessage($,J,de)},writePackedFixed64:function($,de){de.length&&this.writeMessage($,oe,de)},writePackedSFixed64:function($,de){de.length&&this.writeMessage($,ye,de)},writeBytesField:function($,de){this.writeTag($,r.Bytes),this.writeBytes(de)},writeFixed32Field:function($,de){this.writeTag($,r.Fixed32),this.writeFixed32(de)},writeSFixed32Field:function($,de){this.writeTag($,r.Fixed32),this.writeSFixed32(de)},writeFixed64Field:function($,de){this.writeTag($,r.Fixed64),this.writeFixed64(de)},writeSFixed64Field:function($,de){this.writeTag($,r.Fixed64),this.writeSFixed64(de)},writeVarintField:function($,de){this.writeTag($,r.Varint),this.writeVarint(de)},writeSVarintField:function($,de){this.writeTag($,r.Varint),this.writeSVarint(de)},writeStringField:function($,de){this.writeTag($,r.Bytes),this.writeString(de)},writeFloatField:function($,de){this.writeTag($,r.Fixed32),this.writeFloat(de)},writeDoubleField:function($,de){this.writeTag($,r.Fixed64),this.writeDouble(de)},writeBooleanField:function($,de){this.writeVarintField($,!!de)}},mg}var _g=v(oy());const bg=3;function Xx(l,r,A){l===1&&A.readMessage(Jx,r)}function Jx(l,r,A){if(l===3){const{id:u,bitmap:g,width:_,height:b,left:B,top:S,advance:k}=A.readMessage(Yx,{});r.push({id:u,bitmap:new Dh({width:_+2*bg,height:b+2*bg},g),metrics:{width:_,height:b,left:B,top:S,advance:k}})}}function Yx(l,r,A){l===1?r.id=A.readVarint():l===2?r.bitmap=A.readBytes():l===3?r.width=A.readVarint():l===4?r.height=A.readVarint():l===5?r.left=A.readSVarint():l===6?r.top=A.readSVarint():l===7&&(r.advance=A.readVarint())}const e5=bg;function Ay(l){let r=0,A=0;for(const b of l)r+=b.w*b.h,A=Math.max(A,b.w);l.sort((b,B)=>B.h-b.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),A),h:1/0}];let g=0,_=0;for(const b of l)for(let B=u.length-1;B>=0;B--){const S=u[B];if(!(b.w>S.w||b.h>S.h)){if(b.x=S.x,b.y=S.y,_=Math.max(_,b.y+b.h),g=Math.max(g,b.x+b.w),b.w===S.w&&b.h===S.h){const k=u.pop();B<u.length&&(u[B]=k)}else b.h===S.h?(S.x+=b.w,S.w-=b.w):b.w===S.w?(S.y+=b.h,S.h-=b.h):(u.push({x:S.x+b.w,y:S.y,w:S.w-b.w,h:b.h}),S.y+=b.h,S.h-=b.h);break}}return{w:g,h:_,fill:r/(g*_)||0}}const Ds=1;class vg{constructor(r,{pixelRatio:A,version:u,stretchX:g,stretchY:_,content:b,textFitWidth:B,textFitHeight:S}){this.paddedRect=r,this.pixelRatio=A,this.stretchX=g,this.stretchY=_,this.content=b,this.version=u,this.textFitWidth=B,this.textFitHeight=S}get tl(){return[this.paddedRect.x+Ds,this.paddedRect.y+Ds]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ds,this.paddedRect.y+this.paddedRect.h-Ds]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ds)/this.pixelRatio,(this.paddedRect.h-2*Ds)/this.pixelRatio]}}class ly{constructor(r,A){const u={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(r,u,_),this.addImages(A,g,_);const{w:b,h:B}=Ay(_),S=new Fo({width:b||1,height:B||1});for(const k in r){const N=r[k],H=u[k].paddedRect;Fo.copy(N.data,S,{x:0,y:0},{x:H.x+Ds,y:H.y+Ds},N.data)}for(const k in A){const N=A[k],H=g[k].paddedRect,q=H.x+Ds,W=H.y+Ds,J=N.data.width,oe=N.data.height;Fo.copy(N.data,S,{x:0,y:0},{x:q,y:W},N.data),Fo.copy(N.data,S,{x:0,y:oe-1},{x:q,y:W-1},{width:J,height:1}),Fo.copy(N.data,S,{x:0,y:0},{x:q,y:W+oe},{width:J,height:1}),Fo.copy(N.data,S,{x:J-1,y:0},{x:q-1,y:W},{width:1,height:oe}),Fo.copy(N.data,S,{x:0,y:0},{x:q+J,y:W},{width:1,height:oe})}this.image=S,this.iconPositions=u,this.patternPositions=g}addImages(r,A,u){for(const g in r){const _=r[g],b={x:0,y:0,w:_.data.width+2*Ds,h:_.data.height+2*Ds};u.push(b),A[g]=new vg(b,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(r,A){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in r.updatedImages)this.patchUpdatedImage(this.iconPositions[u],r.getImage(u),A),this.patchUpdatedImage(this.patternPositions[u],r.getImage(u),A)}patchUpdatedImage(r,A,u){if(!r||!A||r.version===A.version)return;r.version=A.version;const[g,_]=r.tl;u.update(A.data,void 0,{x:g,y:_})}}var mc;X("ImagePosition",vg),X("ImageAtlas",ly),f.al=void 0,(mc=f.al||(f.al={}))[mc.none=0]="none",mc[mc.horizontal=1]="horizontal",mc[mc.vertical=2]="vertical",mc[mc.horizontalOnly=3]="horizontalOnly";const $f=-17;class Zh{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(r,A,u){const g=new Zh;return g.scale=r||1,g.fontStack=A,g.verticalAlign=u||"bottom",g}static forImage(r,A){const u=new Zh;return u.imageName=r,u.verticalAlign=A||"bottom",u}}class Qu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,A){const u=new Qu;for(let g=0;g<r.sections.length;g++){const _=r.sections[g];_.image?u.addImageSection(_):u.addTextSection(_,A)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let A="";for(let u=0;u<r.length;u++){const g=r.charCodeAt(u+1)||null,_=r.charCodeAt(u-1)||null;A+=g&&Dt(g)&&!qh[r[u+1]]||_&&Dt(_)&&!qh[r[u-1]]||!qh[r[u]]?r[u]:qh[r[u]]}return A}(this.text)}trim(){let r=0;for(let u=0;u<this.text.length&&Xf[this.text.charCodeAt(u)];u++)r++;let A=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&Xf[this.text.charCodeAt(u)];u--)A--;this.text=this.text.substring(r,A),this.sectionIndex=this.sectionIndex.slice(r,A)}substring(r,A){const u=new Qu;return u.text=this.text.substring(r,A),u.sectionIndex=this.sectionIndex.slice(r,A),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,A)=>Math.max(r,this.sections[A].scale),0)}getMaxImageSize(r){let A=0,u=0;for(let g=0;g<this.length();g++){const _=this.getSection(g);if(_.imageName){const b=r[_.imageName];if(!b)continue;const B=b.displaySize;A=Math.max(A,B[0]),u=Math.max(u,B[1])}}return{maxImageWidth:A,maxImageHeight:u}}addTextSection(r,A){this.text+=r.text,this.sections.push(Zh.forText(r.scale,r.fontStack||A,r.verticalAlign));const u=this.sections.length-1;for(let g=0;g<r.text.length;++g)this.sectionIndex.push(u)}addImageSection(r){const A=r.image?r.image.name:"";if(A.length===0)return void Ot("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Zh.forImage(A,r.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Wf(l,r,A,u,g,_,b,B,S,k,N,H,q,W,J){const oe=Qu.fromFeature(l,g);let ye;H===f.al.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:Ce,processStyledBidirectionalText:qe}=nn;if(Ce&&oe.sections.length===1){ye=[];const de=Ce(oe.toString(),wg(oe,k,_,r,u,W));for(const ke of de){const dt=new Qu;dt.text=ke,dt.sections=oe.sections;for(let Nt=0;Nt<ke.length;Nt++)dt.sectionIndex.push(0);ye.push(dt)}}else if(qe){ye=[];const de=qe(oe.text,oe.sectionIndex,wg(oe,k,_,r,u,W));for(const ke of de){const dt=new Qu;dt.text=ke[0],dt.sectionIndex=ke[1],dt.sections=oe.sections,ye.push(dt)}}else ye=function(de,ke){const dt=[],Nt=de.text;let vt=0;for(const Et of ke)dt.push(de.substring(vt,Et)),vt=Et;return vt<Nt.length&&dt.push(de.substring(vt,Nt.length)),dt}(oe,wg(oe,k,_,r,u,W));const Pe=[],$={positionedLines:Pe,text:oe.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(de,ke,dt,Nt,vt,Et,qt,zt,Wt,Pt,dr,Er){let Ir=0,_r=0,dn=0,mi=0;const Wi=zt==="right"?1:zt==="left"?0:.5,Ha=$i/Er;let So=0;for(const hi of vt){hi.trim();const fa=hi.getMaxScale(),Sa={positionedGlyphs:[],lineOffset:0};de.positionedLines[So]=Sa;const Ta=Sa.positionedGlyphs;let ms=0;if(!hi.length()){_r+=Et,++So;continue}const To=i5(Nt,hi,Ha);for(let Ns=0;Ns<hi.length();Ns++){const Xi=hi.getSection(Ns),pa=hi.getSectionIndex(Ns),ga=hi.getCharCode(Ns),Hi=a5(Wt,dr,ga);let Jn;if(Xi.imageName){if(de.iconsInText=!0,Xi.scale=Xi.scale*Ha,Jn=o5(Xi,Hi,fa,To,Nt),!Jn)continue;ms=Math.max(ms,Jn.imageOffset)}else if(Jn=s5(Xi,ga,Hi,To,ke,dt),!Jn)continue;const{rect:xA,metrics:Ou,baselineOffset:BA}=Jn;Ta.push({glyph:ga,imageName:Xi.imageName,x:Ir,y:_r+BA+$f,vertical:Hi,scale:Xi.scale,fontStack:Xi.fontStack,sectionIndex:pa,metrics:Ou,rect:xA}),Hi?(de.verticalizable=!0,Ir+=(Xi.imageName?Ou.advance:$i)*Xi.scale+Pt):Ir+=Ou.advance*Xi.scale+Pt}Ta.length!==0&&(dn=Math.max(Ir-Pt,dn),A5(Ta,0,Ta.length-1,Wi)),Ir=0,Sa.lineOffset=Math.max(ms,(fa-1)*$i);const da=Et*fa+ms;_r+=da,mi=Math.max(da,mi),++So}const{horizontalAlign:Rs,verticalAlign:Ea}=xg(qt);(function(hi,fa,Sa,Ta,ms,To,da,Ns,Xi){const pa=(fa-Sa)*ms;let ga=0;ga=To!==da?-Ns*Ta-$f:-Ta*Xi*da+.5*da;for(const Hi of hi)for(const Jn of Hi.positionedGlyphs)Jn.x+=pa,Jn.y+=ga})(de.positionedLines,Wi,Rs,Ea,dn,mi,Et,_r,vt.length),de.top+=-Ea*_r,de.bottom=de.top+_r,de.left+=-Rs*dn,de.right=de.left+dn}($,r,A,u,ye,b,B,S,H,k,q,J),!function(de){for(const ke of de)if(ke.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&$}const Xf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},t5={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},r5={40:!0};function cy(l,r,A,u,g,_){if(r.imageName){const b=u[r.imageName];return b?b.displaySize[0]*r.scale*$i/_+g:0}{const b=A[r.fontStack],B=b&&b[l];return B?B.metrics.advance*r.scale+g:0}}function uy(l,r,A,u){const g=Math.pow(l-r,2);return u?l<r?g/2:2*g:g+Math.abs(A)*A}function n5(l,r,A){let u=0;return l===10&&(u-=1e4),A&&(u+=150),l!==40&&l!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function hy(l,r,A,u,g,_){let b=null,B=uy(r,A,g,_);for(const S of u){const k=uy(r-S.x,A,g,_)+S.badness;k<=B&&(b=S,B=k)}return{index:l,x:r,priorBreak:b,badness:B}}function fy(l){return l?fy(l.priorBreak).concat(l.index):[]}function wg(l,r,A,u,g,_){if(!l)return[];const b=[],B=function(H,q,W,J,oe,ye){let Ce=0;for(let qe=0;qe<H.length();qe++){const Pe=H.getSection(qe);Ce+=cy(H.getCharCode(qe),Pe,J,oe,q,ye)}return Ce/Math.max(1,Math.ceil(Ce/W))}(l,r,A,u,g,_),S=l.text.indexOf("​")>=0;let k=0;for(let H=0;H<l.length();H++){const q=l.getSection(H),W=l.getCharCode(H);if(Xf[W]||(k+=cy(W,q,u,g,r,_)),H<l.length()-1){const J=!((N=W)<11904)&&(!!rt["CJK Compatibility Forms"](N)||!!rt["CJK Compatibility"](N)||!!rt["CJK Strokes"](N)||!!rt["CJK Symbols and Punctuation"](N)||!!rt["Enclosed CJK Letters and Months"](N)||!!rt["Halfwidth and Fullwidth Forms"](N)||!!rt["Ideographic Description Characters"](N)||!!rt["Vertical Forms"](N)||Qt.test(String.fromCodePoint(N)));(t5[W]||J||q.imageName||H!==l.length()-2&&r5[l.getCharCode(H+1)])&&b.push(hy(H+1,k,B,b,n5(W,l.getCharCode(H+1),J&&S),!1))}}var N;return fy(hy(l.length(),k,B,b,0,!0))}function xg(l){let r=.5,A=.5;switch(l){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:r,verticalAlign:A}}function i5(l,r,A){const u=r.getMaxScale()*$i,{maxImageWidth:g,maxImageHeight:_}=r.getMaxImageSize(l),b=Math.max(u,_*A);return{verticalLineContentWidth:Math.max(u,g*A),horizontalLineContentHeight:b}}function dy(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function a5(l,r,A){return!(l===f.al.horizontal||!r&&!Gt(A)||r&&(Xf[A]||(u=A,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(u)))));var u}function s5(l,r,A,u,g,_){const b=_[l.fontStack],B=function(k,N,H,q){if(k&&k.rect)return k;const W=N[H.fontStack],J=W&&W[q];return J?{rect:null,metrics:J.metrics}:null}(b&&b[r],g,l,r);if(B===null)return null;let S;if(A)S=u.verticalLineContentWidth-l.scale*$i;else{const k=dy(l.verticalAlign);S=(u.horizontalLineContentHeight-l.scale*$i)*k}return{rect:B.rect,metrics:B.metrics,baselineOffset:S}}function o5(l,r,A,u,g){const _=g[l.imageName];if(!_)return null;const b=_.paddedRect,B=_.displaySize,S={width:B[0],height:B[1],left:Ds,top:-3,advance:r?B[1]:B[0]};let k;if(r)k=u.verticalLineContentWidth-B[1]*l.scale;else{const N=dy(l.verticalAlign);k=(u.horizontalLineContentHeight-B[1]*l.scale)*N}return{rect:b,metrics:S,baselineOffset:k,imageOffset:(r?B[0]:B[1])*l.scale-$i*A}}function A5(l,r,A,u){if(u===0)return;const g=l[A],_=(l[A].x+g.metrics.advance*g.scale)*u;for(let b=r;b<=A;b++)l[b].x-=_}function l5(l,r,A){const{horizontalAlign:u,verticalAlign:g}=xg(A),_=r[0]-l.displaySize[0]*u,b=r[1]-l.displaySize[1]*g;return{image:l,top:b,bottom:b+l.displaySize[1],left:_,right:_+l.displaySize[0]}}function py(l){var r,A;let u=l.left,g=l.top,_=l.right-u,b=l.bottom-g;const B=(r=l.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",S=(A=l.image.textFitHeight)!==null&&A!==void 0?A:"stretchOrShrink",k=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(S==="proportional"){if(B==="stretchOnly"&&_/b<k||B==="proportional"){const N=Math.ceil(b*k);u*=N/_,_=N}}else if(B==="proportional"&&S==="stretchOnly"&&k!==0&&_/b>k){const N=Math.ceil(_/k);g*=N/b,b=N}return{x1:u,y1:g,x2:u+_,y2:g+b}}function gy(l,r,A,u,g,_){const b=l.image;let B;if(b.content){const ye=b.content,Ce=b.pixelRatio||1;B=[ye[0]/Ce,ye[1]/Ce,b.displaySize[0]-ye[2]/Ce,b.displaySize[1]-ye[3]/Ce]}const S=r.left*_,k=r.right*_;let N,H,q,W;A==="width"||A==="both"?(W=g[0]+S-u[3],H=g[0]+k+u[1]):(W=g[0]+(S+k-b.displaySize[0])/2,H=W+b.displaySize[0]);const J=r.top*_,oe=r.bottom*_;return A==="height"||A==="both"?(N=g[1]+J-u[0],q=g[1]+oe+u[2]):(N=g[1]+(J+oe-b.displaySize[1])/2,q=N+b.displaySize[1]),{image:b,top:N,right:H,bottom:q,left:W,collisionPadding:B}}const $h=255,ul=128,yc=$h*ul;function my(l,r){const{expression:A}=r;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Mr(l+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:g}=A;let _=0;for(;_<u.length&&u[_]<=l;)_++;_=Math.max(0,_-1);let b=_;for(;b<u.length&&u[b]<l+1;)b++;b=Math.min(u.length-1,b);const B=u[_],S=u[b];return A.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:S,interpolationType:g}:{kind:"camera",minZoom:B,maxZoom:S,minSize:A.evaluate(new Mr(B)),maxSize:A.evaluate(new Mr(S)),interpolationType:g}}}function Bg(l,r,A){let u="never";const g=l.get(r);return g?u=g:l.get(A)&&(u="always"),u}const c5=Vh.VectorTileFeature.types,u5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Jf(l,r,A,u,g,_,b,B,S,k,N,H,q){const W=B?Math.min(yc,Math.round(B[0])):0,J=B?Math.min(yc,Math.round(B[1])):0;l.emplaceBack(r,A,Math.round(32*u),Math.round(32*g),_,b,(W<<1)+(S?1:0),J,16*k,16*N,256*H,256*q)}function Cg(l,r,A){l.emplaceBack(r.x,r.y,A),l.emplaceBack(r.x,r.y,A),l.emplaceBack(r.x,r.y,A),l.emplaceBack(r.x,r.y,A)}function h5(l){for(const r of l.sections)if(hr(r.text))return!0;return!1}class Ig{constructor(r){this.layoutVertexArray=new Ln,this.indexArray=new _n,this.programConfigurations=r,this.segments=new en,this.dynamicLayoutVertexArray=new kn,this.opacityVertexArray=new qn,this.hasVisibleVertices=!1,this.placedSymbolArray=new De}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,A,u,g){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Gx.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Kx.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,u5,!0),this.opacityVertexBuffer.itemSize=1),(u||g)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}X("SymbolBuffers",Ig);class Fg{constructor(r,A,u){this.layoutVertexArray=new r,this.layoutAttributes=A,this.indexArray=new u,this.segments=new en,this.collisionVertexArray=new Qn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,qx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}X("CollisionBuffers",Fg);class Du{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(b=>b.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=my(this.zoom,A["text-size"]),this.iconSizeData=my(this.zoom,A["icon-size"]);const u=this.layers[0].layout,g=u.get("symbol-sort-key"),_=u.get("symbol-z-order");this.canOverlap=Bg(u,"text-overlap","text-allow-overlap")!=="never"||Bg(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(b=>f.al[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=r.sourceID}createArrays(){this.text=new Ig(new cl(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Ig(new cl(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new We,this.lineVertexArray=new Ge,this.symbolInstances=new Ve,this.textAnchorOffsets=new St}calculateGlyphDependencies(r,A,u,g,_){for(let b=0;b<r.length;b++)if(A[r.charCodeAt(b)]=!0,(u||g)&&_){const B=qh[r.charAt(b)];B&&(A[B.charCodeAt(0)]=!0)}}populate(r,A,u){const g=this.layers[0],_=g.layout,b=_.get("text-font"),B=_.get("text-field"),S=_.get("icon-image"),k=(B.value.kind!=="constant"||B.value.value instanceof aa&&!B.value.value.isEmpty()||B.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),N=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,H=_.get("symbol-sort-key");if(this.features=[],!k&&!N)return;const q=A.iconDependencies,W=A.glyphDependencies,J=A.availableImages,oe=new Mr(this.zoom);for(const{feature:ye,id:Ce,index:qe,sourceLayerIndex:Pe}of r){const $=g._featureFilter.needGeometry,de=$c(ye,$);if(!g._featureFilter.filter(oe,de,u))continue;let ke,dt;if($||(de.geometry=Zc(ye)),k){const vt=g.getValueAndResolveTokens("text-field",de,u,J),Et=aa.factory(vt),qt=this.hasRTLText=this.hasRTLText||h5(Et);(!qt||nn.getRTLTextPluginStatus()==="unavailable"||qt&&nn.isParsed())&&(ke=$x(Et,g,de))}if(N){const vt=g.getValueAndResolveTokens("icon-image",de,u,J);dt=vt instanceof sa?vt:sa.fromString(vt)}if(!ke&&!dt)continue;const Nt=this.sortFeaturesByKey?H.evaluate(de,{},u):void 0;if(this.features.push({id:Ce,text:ke,icon:dt,index:qe,sourceLayerIndex:Pe,geometry:de.geometry,properties:ye.properties,type:c5[ye.type],sortKey:Nt}),dt&&(q[dt.name]=!0),ke){const vt=b.evaluate(de,{},u).join(","),Et=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.al.vertical)>=0;for(const qt of ke.sections)if(qt.image)q[qt.image.name]=!0;else{const zt=st(ke.toString()),Wt=qt.fontStack||vt,Pt=W[Wt]=W[Wt]||{};this.calculateGlyphDependencies(qt.text,Pt,Et,this.allowVerticalPlacement,zt)}}}_.get("symbol-placement")==="line"&&(this.features=function(ye){const Ce={},qe={},Pe=[];let $=0;function de(vt){Pe.push(ye[vt]),$++}function ke(vt,Et,qt){const zt=qe[vt];return delete qe[vt],qe[Et]=zt,Pe[zt].geometry[0].pop(),Pe[zt].geometry[0]=Pe[zt].geometry[0].concat(qt[0]),zt}function dt(vt,Et,qt){const zt=Ce[Et];return delete Ce[Et],Ce[vt]=zt,Pe[zt].geometry[0].shift(),Pe[zt].geometry[0]=qt[0].concat(Pe[zt].geometry[0]),zt}function Nt(vt,Et,qt){const zt=qt?Et[0][Et[0].length-1]:Et[0][0];return`${vt}:${zt.x}:${zt.y}`}for(let vt=0;vt<ye.length;vt++){const Et=ye[vt],qt=Et.geometry,zt=Et.text?Et.text.toString():null;if(!zt){de(vt);continue}const Wt=Nt(zt,qt),Pt=Nt(zt,qt,!0);if(Wt in qe&&Pt in Ce&&qe[Wt]!==Ce[Pt]){const dr=dt(Wt,Pt,qt),Er=ke(Wt,Pt,Pe[dr].geometry);delete Ce[Wt],delete qe[Pt],qe[Nt(zt,Pe[Er].geometry,!0)]=Er,Pe[dr].geometry=null}else Wt in qe?ke(Wt,Pt,qt):Pt in Ce?dt(Wt,Pt,qt):(de(vt),Ce[Wt]=$-1,qe[Pt]=$-1)}return Pe.filter(vt=>vt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ye,Ce)=>ye.sortKey-Ce.sortKey)}update(r,A,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,A,this.layers,u),this.icon.programConfigurations.updatePaintArrays(r,A,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,A){const u=this.lineVertexArray.length;if(r.segment!==void 0){let g=r.dist(A[r.segment+1]),_=r.dist(A[r.segment]);const b={};for(let B=r.segment+1;B<A.length;B++)b[B]={x:A[B].x,y:A[B].y,tileUnitDistanceFromAnchor:g},B<A.length-1&&(g+=A[B+1].dist(A[B]));for(let B=r.segment||0;B>=0;B--)b[B]={x:A[B].x,y:A[B].y,tileUnitDistanceFromAnchor:_},B>0&&(_+=A[B-1].dist(A[B]));for(let B=0;B<A.length;B++){const S=b[B];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,A,u,g,_,b,B,S,k,N,H,q){const W=r.indexArray,J=r.layoutVertexArray,oe=r.segments.prepareSegment(4*A.length,J,W,this.canOverlap?b.sortKey:void 0),ye=this.glyphOffsetArray.length,Ce=oe.vertexLength,qe=this.allowVerticalPlacement&&B===f.al.vertical?Math.PI/2:0,Pe=b.text&&b.text.sections;for(let $=0;$<A.length;$++){const{tl:de,tr:ke,bl:dt,br:Nt,tex:vt,pixelOffsetTL:Et,pixelOffsetBR:qt,minFontScaleX:zt,minFontScaleY:Wt,glyphOffset:Pt,isSDF:dr,sectionIndex:Er}=A[$],Ir=oe.vertexLength,_r=Pt[1];Jf(J,S.x,S.y,de.x,_r+de.y,vt.x,vt.y,u,dr,Et.x,Et.y,zt,Wt),Jf(J,S.x,S.y,ke.x,_r+ke.y,vt.x+vt.w,vt.y,u,dr,qt.x,Et.y,zt,Wt),Jf(J,S.x,S.y,dt.x,_r+dt.y,vt.x,vt.y+vt.h,u,dr,Et.x,qt.y,zt,Wt),Jf(J,S.x,S.y,Nt.x,_r+Nt.y,vt.x+vt.w,vt.y+vt.h,u,dr,qt.x,qt.y,zt,Wt),Cg(r.dynamicLayoutVertexArray,S,qe),W.emplaceBack(Ir,Ir+2,Ir+1),W.emplaceBack(Ir+1,Ir+2,Ir+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),$!==A.length-1&&Er===A[$+1].sectionIndex||r.programConfigurations.populatePaintArrays(J.length,b,b.index,{},q,Pe&&Pe[Er])}r.placedSymbolArray.emplaceBack(S.x,S.y,ye,this.glyphOffsetArray.length-ye,Ce,k,N,S.segment,u?u[0]:0,u?u[1]:0,g[0],g[1],B,0,!1,0,H)}_addCollisionDebugVertex(r,A,u,g,_,b){return A.emplaceBack(0,0),r.emplaceBack(u.x,u.y,g,_,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(r,A,u,g,_,b,B){const S=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),k=S.vertexLength,N=_.layoutVertexArray,H=_.collisionVertexArray,q=B.anchorX,W=B.anchorY;this._addCollisionDebugVertex(N,H,b,q,W,new z(r,A)),this._addCollisionDebugVertex(N,H,b,q,W,new z(u,A)),this._addCollisionDebugVertex(N,H,b,q,W,new z(u,g)),this._addCollisionDebugVertex(N,H,b,q,W,new z(r,g)),S.vertexLength+=4;const J=_.indexArray;J.emplaceBack(k,k+1),J.emplaceBack(k+1,k+2),J.emplaceBack(k+2,k+3),J.emplaceBack(k+3,k),S.primitiveLength+=4}addDebugCollisionBoxes(r,A,u,g){for(let _=r;_<A;_++){const b=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,g?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fg(Wn,iy.members,ai),this.iconCollisionBox=new Fg(Wn,iy.members,ai);for(let r=0;r<this.symbolInstances.length;r++){const A=this.symbolInstances.get(r);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(r,A,u,g,_,b,B,S,k){const N={};for(let H=A;H<u;H++){const q=r.get(H);N.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.textFeatureIndex=q.featureIndex;break}for(let H=g;H<_;H++){const q=r.get(H);N.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.verticalTextFeatureIndex=q.featureIndex;break}for(let H=b;H<B;H++){const q=r.get(H);N.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.iconFeatureIndex=q.featureIndex;break}for(let H=S;H<k;H++){const q=r.get(H);N.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},N.verticalIconFeatureIndex=q.featureIndex;break}return N}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const u=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,A){const u=r.placedSymbolArray.get(A),g=u.vertexStartIndex+4*u.numGlyphs;for(let _=u.vertexStartIndex;_<g;_+=4)r.indexArray.emplaceBack(_,_+2,_+1),r.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(r),u=Math.cos(r),g=[],_=[],b=[];for(let B=0;B<this.symbolInstances.length;++B){b.push(B);const S=this.symbolInstances.get(B);g.push(0|Math.round(A*S.anchorX+u*S.anchorY)),_.push(S.featureIndex)}return b.sort((B,S)=>g[B]-g[S]||_[S]-_[B]),b}addToSortKeyRanges(r,A){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===A?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const u=this.symbolInstances.get(A);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((g,_,b)=>{g>=0&&b.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let yy,_y;X("SymbolBucket",Du,{omit:["layers","collisionBoxArray","features","compareText"]}),Du.MAX_GLYPHS=65535,Du.addDynamicAttributes=Cg;var Eg={get paint(){return _y=_y||new gn({"icon-opacity":new ir(pe.paint_symbol["icon-opacity"]),"icon-color":new ir(pe.paint_symbol["icon-color"]),"icon-halo-color":new ir(pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new ir(pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ir(pe.paint_symbol["icon-halo-blur"]),"icon-translate":new cr(pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new cr(pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new ir(pe.paint_symbol["text-opacity"]),"text-color":new ir(pe.paint_symbol["text-color"],{runtimeType:yn,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new ir(pe.paint_symbol["text-halo-color"]),"text-halo-width":new ir(pe.paint_symbol["text-halo-width"]),"text-halo-blur":new ir(pe.paint_symbol["text-halo-blur"]),"text-translate":new cr(pe.paint_symbol["text-translate"]),"text-translate-anchor":new cr(pe.paint_symbol["text-translate-anchor"])})},get layout(){return yy=yy||new gn({"symbol-placement":new cr(pe.layout_symbol["symbol-placement"]),"symbol-spacing":new cr(pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cr(pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ir(pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cr(pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cr(pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new cr(pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new cr(pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new cr(pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cr(pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new ir(pe.layout_symbol["icon-size"]),"icon-text-fit":new cr(pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cr(pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new ir(pe.layout_symbol["icon-image"]),"icon-rotate":new ir(pe.layout_symbol["icon-rotate"]),"icon-padding":new ir(pe.layout_symbol["icon-padding"]),"icon-keep-upright":new cr(pe.layout_symbol["icon-keep-upright"]),"icon-offset":new ir(pe.layout_symbol["icon-offset"]),"icon-anchor":new ir(pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cr(pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cr(pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cr(pe.layout_symbol["text-rotation-alignment"]),"text-field":new ir(pe.layout_symbol["text-field"]),"text-font":new ir(pe.layout_symbol["text-font"]),"text-size":new ir(pe.layout_symbol["text-size"]),"text-max-width":new ir(pe.layout_symbol["text-max-width"]),"text-line-height":new cr(pe.layout_symbol["text-line-height"]),"text-letter-spacing":new ir(pe.layout_symbol["text-letter-spacing"]),"text-justify":new ir(pe.layout_symbol["text-justify"]),"text-radial-offset":new ir(pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cr(pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ir(pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ir(pe.layout_symbol["text-anchor"]),"text-max-angle":new cr(pe.layout_symbol["text-max-angle"]),"text-writing-mode":new cr(pe.layout_symbol["text-writing-mode"]),"text-rotate":new ir(pe.layout_symbol["text-rotate"]),"text-padding":new cr(pe.layout_symbol["text-padding"]),"text-keep-upright":new cr(pe.layout_symbol["text-keep-upright"]),"text-transform":new ir(pe.layout_symbol["text-transform"]),"text-offset":new ir(pe.layout_symbol["text-offset"]),"text-allow-overlap":new cr(pe.layout_symbol["text-allow-overlap"]),"text-overlap":new cr(pe.layout_symbol["text-overlap"]),"text-ignore-placement":new cr(pe.layout_symbol["text-ignore-placement"]),"text-optional":new cr(pe.layout_symbol["text-optional"])})}};class by{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Cr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(r.formattedSection))return A.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}X("FormatSectionOverride",by,{omit:["defaultValue"]});class Yf extends ii{constructor(r){super(r,Eg)}recalculate(r,A){if(super.recalculate(r,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const g=[];for(const _ of u)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,A,u,g){const _=this.layout.get(r).evaluate(A,{},u,g),b=this._unevaluatedLayout._values[r];return b.isDataDriven()||gA(b.value)||!_?_:function(B,S){return S.replace(/{([^{}]+)}/g,(k,N)=>B&&N in B?String(B[N]):"")}(A.properties,_)}createBucket(r){return new Du(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Eg.paint.overridableProperties){if(!Yf.hasPaintOverride(this.layout,r))continue;const A=this.paint.get(r),u=new by(A),g=new Ql(u,A.property.specification);let _=null;_=A.value.kind==="constant"||A.value.kind==="source"?new XA("source",g):new JA("composite",g,A.value.zoomStops),this.paint._values[r]=new Un(A.property,_,A.parameters)}}_handleOverridablePaintPropertyUpdate(r,A,u){return!(!this.layout||A.isDataDriven()||u.isDataDriven())&&Yf.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,A){const u=r.get("text-field"),g=Eg.paint.properties[A];let _=!1;const b=B=>{for(const S of B)if(g.overrides&&g.overrides.hasOverride(S))return void(_=!0)};if(u.value.kind==="constant"&&u.value.value instanceof aa)b(u.value.value.sections);else if(u.value.kind==="source"){const B=k=>{_||(k instanceof Qr&&jn(k.value)===Vs?b(k.value.sections):k instanceof ct?b(k.sections):k.eachChild(B))},S=u.value;S._styleExpression&&B(S._styleExpression.expression)}return _}}let vy;var f5={get paint(){return vy=vy||new gn({"background-color":new cr(pe.paint_background["background-color"]),"background-pattern":new Ca(pe.paint_background["background-pattern"]),"background-opacity":new cr(pe.paint_background["background-opacity"])})}};class d5 extends ii{constructor(r){super(r,f5)}}let wy;var p5={get paint(){return wy=wy||new gn({"raster-opacity":new cr(pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new cr(pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cr(pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cr(pe.paint_raster["raster-brightness-max"]),"raster-saturation":new cr(pe.paint_raster["raster-saturation"]),"raster-contrast":new cr(pe.paint_raster["raster-contrast"]),"raster-resampling":new cr(pe.paint_raster["raster-resampling"]),"raster-fade-duration":new cr(pe.paint_raster["raster-fade-duration"])})}};class g5 extends ii{constructor(r){super(r,p5)}}class m5 extends ii{constructor(r){super(r,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class y5{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const _5={once:!0},Sg=63710088e-1;class _c{constructor(r,A){if(isNaN(r)||isNaN(A))throw new Error(`Invalid LngLat object: (${r}, ${A})`);if(this.lng=+r,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new _c(nt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const A=Math.PI/180,u=this.lat*A,g=r.lat*A,_=Math.sin(u)*Math.sin(g)+Math.cos(u)*Math.cos(g)*Math.cos((r.lng-this.lng)*A);return Sg*Math.acos(Math.min(_,1))}static convert(r){if(r instanceof _c)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new _c(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new _c(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xy=2*Math.PI*Sg;function By(l){return xy*Math.cos(l*Math.PI/180)}function Cy(l){return(180+l)/360}function Iy(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Fy(l,r){return l/By(r)}function Tg(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function Ey(l,r){return l*By(Tg(r))}class Wh{constructor(r,A,u=0){this.x=+r,this.y=+A,this.z=+u}static fromLngLat(r,A=0){const u=_c.convert(r);return new Wh(Cy(u.lng),Iy(u.lat),Fy(A,u.lat))}toLngLat(){return new _c(360*this.x-180,Tg(this.y))}toAltitude(){return Ey(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/xy*(r=Tg(this.y),1/Math.cos(r*Math.PI/180));var r}}function Sy(l,r,A){var u=2*Math.PI*6378137/256/Math.pow(2,A);return[l*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}class Lg{constructor(r,A,u){if(!function(g,_,b){return!(g<0||g>25||b<0||b>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(r,A,u))throw new Error(`x=${A}, y=${u}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=A,this.y=u,this.key=Ru(0,r,r,A,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,A,u){const g=(b=this.y,B=this.z,S=Sy(256*(_=this.x),256*(b=Math.pow(2,B)-b-1),B),k=Sy(256*(_+1),256*(b+1),B),S[0]+","+S[1]+","+k[0]+","+k[1]);var _,b,B,S,k;const N=function(H,q,W){let J,oe="";for(let ye=H;ye>0;ye--)J=1<<ye-1,oe+=(q&J?1:0)+(W&J?2:0);return oe}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,g)}isChildOf(r){const A=this.z-r.z;return A>0&&r.x===this.x>>A&&r.y===this.y>>A}getTilePoint(r){const A=Math.pow(2,this.z);return new z((r.x*A-this.x)*Ye,(r.y*A-this.y)*Ye)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ty{constructor(r,A){this.wrap=r,this.canonical=A,this.key=Ru(r,A.z,A.z,A.x,A.y)}}class Eo{constructor(r,A,u,g,_){if(this.terrainRttPosMatrix32f=null,r<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${u}`);this.overscaledZ=r,this.wrap=A,this.canonical=new Lg(u,+g,+_),this.key=Ru(A,r,u,g,_)}clone(){return new Eo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-r;return r>this.canonical.z?new Eo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eo(r,this.wrap,r,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(r,A){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?Ru(this.wrap*+A,r,this.canonical.z,this.canonical.x,this.canonical.y):Ru(this.wrap*+A,r,r,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const A=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>A&&r.canonical.y===this.canonical.y>>A}children(r){if(this.overscaledZ>=r)return[new Eo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,u=2*this.canonical.x,g=2*this.canonical.y;return[new Eo(A,this.wrap,A,u,g),new Eo(A,this.wrap,A,u+1,g),new Eo(A,this.wrap,A,u,g+1),new Eo(A,this.wrap,A,u+1,g+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Eo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Eo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ty(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Wh(r.x-this.wrap,r.y))}}function Ru(l,r,A,u,g){(l*=2)<0&&(l=-1*l-1);const _=1<<A;return(_*_*l+_*g+u).toString(36)+A.toString(36)+r.toString(36)}X("CanonicalTileID",Lg),X("OverscaledTileID",Eo,{omit:["terrainRttPosMatrix32f"]});class Ly{constructor(r,A,u,g=1,_=1,b=1,B=0){if(this.uid=r,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(u&&!["mapbox","terrarium","custom"].includes(u))return void Ot(`"${u}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const S=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),u){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=b,this.baseShift=B;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<S;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(S,k)]=this.data[this._idx(S-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,S)]=this.data[this._idx(k,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<S;k++)for(let N=0;N<S;N++){const H=this.get(k,N);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(r,A){const u=new Uint8Array(this.data.buffer),g=4*this._idx(r,A);return this.unpack(u[g],u[g+1],u[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,A){if(r<-1||r>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(r+1)}unpack(r,A,u){return r*this.redFactor+A*this.greenFactor+u*this.blueFactor-this.baseShift}getPixels(){return new Fo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,A,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let g=A*this.dim,_=A*this.dim+this.dim,b=u*this.dim,B=u*this.dim+this.dim;switch(A){case-1:g=_-1;break;case 1:_=g+1}switch(u){case-1:b=B-1;break;case 1:B=b+1}const S=-A*this.dim,k=-u*this.dim;for(let N=b;N<B;N++)for(let H=g;H<_;H++)this.data[this._idx(H,N)]=r.data[this._idx(H+S,N+k)]}}X("DEMData",Ly);class Py{constructor(r){this._stringToNumber={},this._numberToString=[];for(let A=0;A<r.length;A++){const u=r[A];this._stringToNumber[u]=A,this._numberToString[A]=u}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class My{constructor(r,A,u,g,_){this.type="Feature",this._vectorTileFeature=r,r._z=A,r._x=u,r._y=g,this.properties=r.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(r[A]=this[A]);return r}}class Uy{constructor(r,A){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new j(Ye,16,0),this.grid3D=new j(Ye,16,0),this.featureIndexArray=new bt,this.promoteId=A}insert(r,A,u,g,_,b){const B=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,g,_);const S=b?this.grid3D:this.grid;for(let k=0;k<A.length;k++){const N=A[k],H=[1/0,1/0,-1/0,-1/0];for(let q=0;q<N.length;q++){const W=N[q];H[0]=Math.min(H[0],W.x),H[1]=Math.min(H[1],W.y),H[2]=Math.max(H[2],W.x),H[3]=Math.max(H[3],W.y)}H[0]<Ye&&H[1]<Ye&&H[2]>=0&&H[3]>=0&&S.insert(B,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vh.VectorTile(new _g(this.rawTileData)).layers,this.sourceLayerCoder=new Py(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,A,u,g){this.loadVTLayers();const _=r.params,b=Ye/r.tileSize/r.scale,B=Nl(_.filter),S=r.queryGeometry,k=r.queryPadding*b,N=Qy(S),H=this.grid.query(N.minX-k,N.minY-k,N.maxX+k,N.maxY+k),q=Qy(r.cameraQueryGeometry),W=this.grid3D.query(q.minX-k,q.minY-k,q.maxX+k,q.maxY+k,(ye,Ce,qe,Pe)=>function($,de,ke,dt,Nt){for(const Et of $)if(de<=Et.x&&ke<=Et.y&&dt>=Et.x&&Nt>=Et.y)return!0;const vt=[new z(de,ke),new z(de,Nt),new z(dt,Nt),new z(dt,ke)];if($.length>2){for(const Et of vt)if(Wc($,Et))return!0}for(let Et=0;Et<$.length-1;Et++)if(ox($[Et],$[Et+1],vt))return!0;return!1}(r.cameraQueryGeometry,ye-k,Ce-k,qe+k,Pe+k));for(const ye of W)H.push(ye);H.sort(b5);const J={};let oe;for(let ye=0;ye<H.length;ye++){const Ce=H[ye];if(Ce===oe)continue;oe=Ce;const qe=this.featureIndexArray.get(Ce);let Pe=null;this.loadMatchingFeature(J,qe.bucketIndex,qe.sourceLayerIndex,qe.featureIndex,B,_.layers,_.availableImages,A,u,g,($,de,ke)=>(Pe||(Pe=Zc($)),de.queryIntersectsFeature({queryGeometry:S,feature:$,featureState:ke,geometry:Pe,zoom:this.z,transform:r.transform,pixelsToTileUnits:b,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation})))}return J}loadMatchingFeature(r,A,u,g,_,b,B,S,k,N,H){const q=this.bucketLayerIDs[A];if(b&&!q.some(ye=>b.has(ye)))return;const W=this.sourceLayerCoder.decode(u),J=this.vtLayers[W].feature(g);if(_.needGeometry){const ye=$c(J,!0);if(!_.filter(new Mr(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!_.filter(new Mr(this.tileID.overscaledZ),J))return;const oe=this.getId(J,W);for(let ye=0;ye<q.length;ye++){const Ce=q[ye];if(b&&!b.has(Ce))continue;const qe=S[Ce];if(!qe)continue;let Pe={};oe&&N&&(Pe=N.getState(qe.sourceLayer||"_geojsonTileLayer",oe));const $=ut({},k[Ce]);$.paint=ky($.paint,qe.paint,J,Pe,B),$.layout=ky($.layout,qe.layout,J,Pe,B);const de=!H||H(J,qe,Pe);if(!de)continue;const ke=new My(J,this.z,this.x,this.y,oe);ke.layer=$;let dt=r[Ce];dt===void 0&&(dt=r[Ce]=[]),dt.push({featureIndex:g,feature:ke,intersectionZ:de})}}lookupSymbolFeatures(r,A,u,g,_,b,B,S){const k={};this.loadVTLayers();const N=Nl(_);for(const H of r)this.loadMatchingFeature(k,u,g,H,N,b,B,S,A);return k}hasLayer(r){for(const A of this.bucketLayerIDs)for(const u of A)if(r===u)return!0;return!1}getId(r,A){var u;let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((u=r.properties)===null||u===void 0)&&u.cluster)&&this.promoteId&&(g=Number(r.properties.cluster_id))),g}}function ky(l,r,A,u,g){return Bt(l,(_,b)=>{const B=r instanceof ni?r.get(b):null;return B&&B.evaluate?B.evaluate(A,u,g):B})}function Qy(l){let r=1/0,A=1/0,u=-1/0,g=-1/0;for(const _ of l)r=Math.min(r,_.x),A=Math.min(A,_.y),u=Math.max(u,_.x),g=Math.max(g,_.y);return{minX:r,minY:A,maxX:u,maxY:g}}function b5(l,r){return r-l}function Dy(l,r,A,u,g){const _=[];for(let b=0;b<l.length;b++){const B=l[b];let S;for(let k=0;k<B.length-1;k++){let N=B[k],H=B[k+1];N.x<r&&H.x<r||(N.x<r?N=new z(r,N.y+(r-N.x)/(H.x-N.x)*(H.y-N.y))._round():H.x<r&&(H=new z(r,N.y+(r-N.x)/(H.x-N.x)*(H.y-N.y))._round()),N.y<A&&H.y<A||(N.y<A?N=new z(N.x+(A-N.y)/(H.y-N.y)*(H.x-N.x),A)._round():H.y<A&&(H=new z(N.x+(A-N.y)/(H.y-N.y)*(H.x-N.x),A)._round()),N.x>=u&&H.x>=u||(N.x>=u?N=new z(u,N.y+(u-N.x)/(H.x-N.x)*(H.y-N.y))._round():H.x>=u&&(H=new z(u,N.y+(u-N.x)/(H.x-N.x)*(H.y-N.y))._round()),N.y>=g&&H.y>=g||(N.y>=g?N=new z(N.x+(g-N.y)/(H.y-N.y)*(H.x-N.x),g)._round():H.y>=g&&(H=new z(N.x+(g-N.y)/(H.y-N.y)*(H.x-N.x),g)._round()),S&&N.equals(S[S.length-1])||(S=[N],_.push(S)),S.push(H)))))}}return _}X("FeatureIndex",Uy,{omit:["rawTileData","sourceLayerCoder"]});class bc extends z{constructor(r,A,u,g){super(r,A),this.angle=u,g!==void 0&&(this.segment=g)}clone(){return new bc(this.x,this.y,this.angle,this.segment)}}function Ry(l,r,A,u,g){if(r.segment===void 0||A===0)return!0;let _=r,b=r.segment+1,B=0;for(;B>-A/2;){if(b--,b<0)return!1;B-=l[b].dist(_),_=l[b]}B+=l[b].dist(l[b+1]),b++;const S=[];let k=0;for(;B<A/2;){const N=l[b],H=l[b+1];if(!H)return!1;let q=l[b-1].angleTo(N)-N.angleTo(H);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:B,angleDelta:q}),k+=q;B-S[0].distance>u;)k-=S.shift().angleDelta;if(k>g)return!1;b++,B+=N.dist(H)}return!0}function Ny(l){let r=0;for(let A=0;A<l.length-1;A++)r+=l[A].dist(l[A+1]);return r}function Oy(l,r,A){return l?.6*r*A:0}function zy(l,r){return Math.max(l?l.right-l.left:0,r?r.right-r.left:0)}function v5(l,r,A,u,g,_){const b=Oy(A,g,_),B=zy(A,u)*_;let S=0;const k=Ny(l)/2;for(let N=0;N<l.length-1;N++){const H=l[N],q=l[N+1],W=H.dist(q);if(S+W>k){const J=(k-S)/W,oe=Ua.number(H.x,q.x,J),ye=Ua.number(H.y,q.y,J),Ce=new bc(oe,ye,q.angleTo(H),N);return Ce._round(),!b||Ry(l,Ce,B,b,r)?Ce:void 0}S+=W}}function w5(l,r,A,u,g,_,b,B,S){const k=Oy(u,_,b),N=zy(u,g),H=N*b,q=l[0].x===0||l[0].x===S||l[0].y===0||l[0].y===S;return r-H<r/4&&(r=H+r/4),Hy(l,q?r/2*B%r:(N/2+2*_)*b*B%r,r,k,A,H,q,!1,S)}function Hy(l,r,A,u,g,_,b,B,S){const k=_/2,N=Ny(l);let H=0,q=r-A,W=[];for(let J=0;J<l.length-1;J++){const oe=l[J],ye=l[J+1],Ce=oe.dist(ye),qe=ye.angleTo(oe);for(;q+A<H+Ce;){q+=A;const Pe=(q-H)/Ce,$=Ua.number(oe.x,ye.x,Pe),de=Ua.number(oe.y,ye.y,Pe);if($>=0&&$<S&&de>=0&&de<S&&q-k>=0&&q+k<=N){const ke=new bc($,de,qe,J);ke._round(),u&&!Ry(l,ke,_,u,g)||W.push(ke)}}H+=Ce}return B||W.length||b||(W=Hy(l,H/2,A,u,g,_,b,!0,S)),W}X("Anchor",bc);const Xh=Ds;function jy(l,r,A,u){const g=[],_=l.image,b=_.pixelRatio,B=_.paddedRect.w-2*Xh,S=_.paddedRect.h-2*Xh;let k={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const N=_.stretchX||[[0,B]],H=_.stretchY||[[0,S]],q=(Pt,dr)=>Pt+dr[1]-dr[0],W=N.reduce(q,0),J=H.reduce(q,0),oe=B-W,ye=S-J;let Ce=0,qe=W,Pe=0,$=J,de=0,ke=oe,dt=0,Nt=ye;if(_.content&&u){const Pt=_.content,dr=Pt[2]-Pt[0],Er=Pt[3]-Pt[1];(_.textFitWidth||_.textFitHeight)&&(k=py(l)),Ce=ed(N,0,Pt[0]),Pe=ed(H,0,Pt[1]),qe=ed(N,Pt[0],Pt[2]),$=ed(H,Pt[1],Pt[3]),de=Pt[0]-Ce,dt=Pt[1]-Pe,ke=dr-qe,Nt=Er-$}const vt=k.x1,Et=k.y1,qt=k.x2-vt,zt=k.y2-Et,Wt=(Pt,dr,Er,Ir)=>{const _r=td(Pt.stretch-Ce,qe,qt,vt),dn=rd(Pt.fixed-de,ke,Pt.stretch,W),mi=td(dr.stretch-Pe,$,zt,Et),Wi=rd(dr.fixed-dt,Nt,dr.stretch,J),Ha=td(Er.stretch-Ce,qe,qt,vt),So=rd(Er.fixed-de,ke,Er.stretch,W),Rs=td(Ir.stretch-Pe,$,zt,Et),Ea=rd(Ir.fixed-dt,Nt,Ir.stretch,J),hi=new z(_r,mi),fa=new z(Ha,mi),Sa=new z(Ha,Rs),Ta=new z(_r,Rs),ms=new z(dn/b,Wi/b),To=new z(So/b,Ea/b),da=r*Math.PI/180;if(da){const pa=Math.sin(da),ga=Math.cos(da),Hi=[ga,-pa,pa,ga];hi._matMult(Hi),fa._matMult(Hi),Ta._matMult(Hi),Sa._matMult(Hi)}const Ns=Pt.stretch+Pt.fixed,Xi=dr.stretch+dr.fixed;return{tl:hi,tr:fa,bl:Ta,br:Sa,tex:{x:_.paddedRect.x+Xh+Ns,y:_.paddedRect.y+Xh+Xi,w:Er.stretch+Er.fixed-Ns,h:Ir.stretch+Ir.fixed-Xi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ms,pixelOffsetBR:To,minFontScaleX:ke/b/qt,minFontScaleY:Nt/b/zt,isSDF:A}};if(u&&(_.stretchX||_.stretchY)){const Pt=Vy(N,oe,W),dr=Vy(H,ye,J);for(let Er=0;Er<Pt.length-1;Er++){const Ir=Pt[Er],_r=Pt[Er+1];for(let dn=0;dn<dr.length-1;dn++)g.push(Wt(Ir,dr[dn],_r,dr[dn+1]))}}else g.push(Wt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:S+1}));return g}function ed(l,r,A){let u=0;for(const g of l)u+=Math.max(r,Math.min(A,g[1]))-Math.max(r,Math.min(A,g[0]));return u}function Vy(l,r,A){const u=[{fixed:-1,stretch:0}];for(const[g,_]of l){const b=u[u.length-1];u.push({fixed:g-b.stretch,stretch:b.stretch}),u.push({fixed:g-b.stretch,stretch:b.stretch+(_-g)})}return u.push({fixed:r+Xh,stretch:A}),u}function td(l,r,A,u){return l/r*A+u}function rd(l,r,A,u){return l-r*A/u}class nd{constructor(r,A,u,g,_,b,B,S,k,N){var H;if(this.boxStartIndex=r.length,k){let q=b.top,W=b.bottom;const J=b.collisionPadding;J&&(q-=J[1],W+=J[3]);let oe=W-q;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{const q=!((H=b.image)===null||H===void 0)&&H.content&&(b.image.textFitWidth||b.image.textFitHeight)?py(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};q.y1=q.y1*B-S[0],q.y2=q.y2*B+S[2],q.x1=q.x1*B-S[3],q.x2=q.x2*B+S[1];const W=b.collisionPadding;if(W&&(q.x1-=W[0]*B,q.y1-=W[1]*B,q.x2+=W[2]*B,q.y2+=W[3]*B),N){const J=new z(q.x1,q.y1),oe=new z(q.x2,q.y1),ye=new z(q.x1,q.y2),Ce=new z(q.x2,q.y2),qe=N*Math.PI/180;J._rotate(qe),oe._rotate(qe),ye._rotate(qe),Ce._rotate(qe),q.x1=Math.min(J.x,oe.x,ye.x,Ce.x),q.x2=Math.max(J.x,oe.x,ye.x,Ce.x),q.y1=Math.min(J.y,oe.y,ye.y,Ce.y),q.y2=Math.max(J.y,oe.y,ye.y,Ce.y)}r.emplaceBack(A.x,A.y,q.x1,q.y1,q.x2,q.y2,u,g,_)}this.boxEndIndex=r.length}}class x5{constructor(r=[],A=(u,g)=>u<g?-1:u>g?1:0){if(this.data=r,this.length=this.data.length,this.compare=A,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:A,compare:u}=this,g=A[r];for(;r>0;){const _=r-1>>1,b=A[_];if(u(g,b)>=0)break;A[r]=b,r=_}A[r]=g}_down(r){const{data:A,compare:u}=this,g=this.length>>1,_=A[r];for(;r<g;){let b=1+(r<<1);const B=b+1;if(B<this.length&&u(A[B],A[b])<0&&(b=B),u(A[b],_)>=0)break;A[r]=A[b],r=b}A[r]=_}}function B5(l,r=1,A=!1){let u=1/0,g=1/0,_=-1/0,b=-1/0;const B=l[0];for(let W=0;W<B.length;W++){const J=B[W];(!W||J.x<u)&&(u=J.x),(!W||J.y<g)&&(g=J.y),(!W||J.x>_)&&(_=J.x),(!W||J.y>b)&&(b=J.y)}const S=Math.min(_-u,b-g);let k=S/2;const N=new x5([],C5);if(S===0)return new z(u,g);for(let W=u;W<_;W+=S)for(let J=g;J<b;J+=S)N.push(new Nu(W+k,J+k,k,l));let H=function(W){let J=0,oe=0,ye=0;const Ce=W[0];for(let qe=0,Pe=Ce.length,$=Pe-1;qe<Pe;$=qe++){const de=Ce[qe],ke=Ce[$],dt=de.x*ke.y-ke.x*de.y;oe+=(de.x+ke.x)*dt,ye+=(de.y+ke.y)*dt,J+=3*dt}return new Nu(oe/J,ye/J,0,W)}(l),q=N.length;for(;N.length;){const W=N.pop();(W.d>H.d||!H.d)&&(H=W,A&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,q)),W.max-H.d<=r||(k=W.h/2,N.push(new Nu(W.p.x-k,W.p.y-k,k,l)),N.push(new Nu(W.p.x+k,W.p.y-k,k,l)),N.push(new Nu(W.p.x-k,W.p.y+k,k,l)),N.push(new Nu(W.p.x+k,W.p.y+k,k,l)),q+=4)}return A&&(console.log(`num probes: ${q}`),console.log(`best distance: ${H.d}`)),H.p}function C5(l,r){return r.max-l.max}function Nu(l,r,A,u){this.p=new z(l,r),this.h=A,this.d=function(g,_){let b=!1,B=1/0;for(let S=0;S<_.length;S++){const k=_[S];for(let N=0,H=k.length,q=H-1;N<H;q=N++){const W=k[N],J=k[q];W.y>g.y!=J.y>g.y&&g.x<(J.x-W.x)*(g.y-W.y)/(J.y-W.y)+W.x&&(b=!b),B=Math.min(B,B1(g,W,J))}}return(b?1:-1)*Math.sqrt(B)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}var za;f.aB=void 0,(za=f.aB||(f.aB={}))[za.center=1]="center",za[za.left=2]="left",za[za.right=3]="right",za[za.top=4]="top",za[za.bottom=5]="bottom",za[za["top-left"]=6]="top-left",za[za["top-right"]=7]="top-right",za[za["bottom-left"]=8]="bottom-left",za[za["bottom-right"]=9]="bottom-right";const vc=7,Pg=Number.POSITIVE_INFINITY;function Gy(l,r){return r[1]!==Pg?function(A,u,g){let _=0,b=0;switch(u=Math.abs(u),g=Math.abs(g),A){case"top-right":case"top-left":case"top":b=g-vc;break;case"bottom-right":case"bottom-left":case"bottom":b=-g+vc}switch(A){case"top-right":case"bottom-right":case"right":_=-u;break;case"top-left":case"bottom-left":case"left":_=u}return[_,b]}(l,r[0],r[1]):function(A,u){let g=0,_=0;u<0&&(u=0);const b=u/Math.SQRT2;switch(A){case"top-right":case"top-left":_=b-vc;break;case"bottom-right":case"bottom-left":_=-b+vc;break;case"bottom":_=-u+vc;break;case"top":_=u-vc}switch(A){case"top-right":case"bottom-right":g=-b;break;case"top-left":case"bottom-left":g=b;break;case"left":g=u;break;case"right":g=-u}return[g,_]}(l,r[0])}function Ky(l,r,A){var u;const g=l.layout,_=(u=g.get("text-variable-anchor-offset"))===null||u===void 0?void 0:u.evaluate(r,{},A);if(_){const B=_.values,S=[];for(let k=0;k<B.length;k+=2){const N=S[k]=B[k],H=B[k+1].map(q=>q*$i);N.startsWith("top")?H[1]-=vc:N.startsWith("bottom")&&(H[1]+=vc),S[k+1]=H}return new Qi(S)}const b=g.get("text-variable-anchor");if(b){let B;B=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(r,{},A)*$i,Pg]:g.get("text-offset").evaluate(r,{},A).map(k=>k*$i);const S=[];for(const k of b)S.push(k,Gy(k,B));return new Qi(S)}return null}function Mg(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function I5(l,r,A,u,g,_,b,B,S,k,N,H){let q=_.textMaxSize.evaluate(r,{});q===void 0&&(q=b);const W=l.layers[0].layout,J=W.get("icon-offset").evaluate(r,{},N),oe=Zy(A.horizontal),ye=b/24,Ce=l.tilePixelRatio*ye,qe=l.tilePixelRatio*q/24,Pe=l.tilePixelRatio*B,$=l.tilePixelRatio*W.get("symbol-spacing"),de=W.get("text-padding")*l.tilePixelRatio,ke=function(Er,Ir,_r,dn=1){const mi=Er.get("icon-padding").evaluate(Ir,{},_r),Wi=mi&&mi.values;return[Wi[0]*dn,Wi[1]*dn,Wi[2]*dn,Wi[3]*dn]}(W,r,N,l.tilePixelRatio),dt=W.get("text-max-angle")/180*Math.PI,Nt=W.get("text-rotation-alignment")!=="viewport"&&W.get("symbol-placement")!=="point",vt=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",Et=W.get("symbol-placement"),qt=$/2,zt=W.get("icon-text-fit");let Wt;u&&zt!=="none"&&(l.allowVerticalPlacement&&A.vertical&&(Wt=gy(u,A.vertical,zt,W.get("icon-text-fit-padding"),J,ye)),oe&&(u=gy(u,oe,zt,W.get("icon-text-fit-padding"),J,ye)));const Pt=N?H.line.getGranularityForZoomLevel(N.z):1,dr=(Er,Ir)=>{Ir.x<0||Ir.x>=Ye||Ir.y<0||Ir.y>=Ye||function(_r,dn,mi,Wi,Ha,So,Rs,Ea,hi,fa,Sa,Ta,ms,To,da,Ns,Xi,pa,ga,Hi,Jn,xA,Ou,BA,S5){const zu=_r.addToLineVertexArray(dn,mi);let Yc,Hu,ju,Vu,Jy=0,Yy=0,e_=0,t_=0,zg=-1,Hg=-1;const jl={};let r_=vA("");if(_r.allowVerticalPlacement&&Wi.vertical){const es=Ea.layout.get("text-rotate").evaluate(Jn,{},BA)+90;ju=new nd(hi,dn,fa,Sa,Ta,Wi.vertical,ms,To,da,es),Rs&&(Vu=new nd(hi,dn,fa,Sa,Ta,Rs,Xi,pa,da,es))}if(Ha){const es=Ea.layout.get("icon-rotate").evaluate(Jn,{}),Lo=Ea.layout.get("icon-text-fit")!=="none",eu=jy(Ha,es,Ou,Lo),IA=Rs?jy(Rs,es,Ou,Lo):void 0;Hu=new nd(hi,dn,fa,Sa,Ta,Ha,Xi,pa,!1,es),Jy=4*eu.length;const tu=_r.iconSizeData;let hl=null;tu.kind==="source"?(hl=[ul*Ea.layout.get("icon-size").evaluate(Jn,{})],hl[0]>yc&&Ot(`${_r.layerIds[0]}: Value for "icon-size" is >= ${$h}. Reduce your "icon-size".`)):tu.kind==="composite"&&(hl=[ul*xA.compositeIconSizes[0].evaluate(Jn,{},BA),ul*xA.compositeIconSizes[1].evaluate(Jn,{},BA)],(hl[0]>yc||hl[1]>yc)&&Ot(`${_r.layerIds[0]}: Value for "icon-size" is >= ${$h}. Reduce your "icon-size".`)),_r.addSymbols(_r.icon,eu,hl,Hi,ga,Jn,f.al.none,dn,zu.lineStartIndex,zu.lineLength,-1,BA),zg=_r.icon.placedSymbolArray.length-1,IA&&(Yy=4*IA.length,_r.addSymbols(_r.icon,IA,hl,Hi,ga,Jn,f.al.vertical,dn,zu.lineStartIndex,zu.lineLength,-1,BA),Hg=_r.icon.placedSymbolArray.length-1)}const n_=Object.keys(Wi.horizontal);for(const es of n_){const Lo=Wi.horizontal[es];if(!Yc){r_=vA(Lo.text);const IA=Ea.layout.get("text-rotate").evaluate(Jn,{},BA);Yc=new nd(hi,dn,fa,Sa,Ta,Lo,ms,To,da,IA)}const eu=Lo.positionedLines.length===1;if(e_+=qy(_r,dn,Lo,So,Ea,da,Jn,Ns,zu,Wi.vertical?f.al.horizontal:f.al.horizontalOnly,eu?n_:[es],jl,zg,xA,BA),eu)break}Wi.vertical&&(t_+=qy(_r,dn,Wi.vertical,So,Ea,da,Jn,Ns,zu,f.al.vertical,["vertical"],jl,Hg,xA,BA));const T5=Yc?Yc.boxStartIndex:_r.collisionBoxArray.length,L5=Yc?Yc.boxEndIndex:_r.collisionBoxArray.length,P5=ju?ju.boxStartIndex:_r.collisionBoxArray.length,M5=ju?ju.boxEndIndex:_r.collisionBoxArray.length,U5=Hu?Hu.boxStartIndex:_r.collisionBoxArray.length,k5=Hu?Hu.boxEndIndex:_r.collisionBoxArray.length,Q5=Vu?Vu.boxStartIndex:_r.collisionBoxArray.length,D5=Vu?Vu.boxEndIndex:_r.collisionBoxArray.length;let CA=-1;const ad=(es,Lo)=>es&&es.circleDiameter?Math.max(es.circleDiameter,Lo):Lo;CA=ad(Yc,CA),CA=ad(ju,CA),CA=ad(Hu,CA),CA=ad(Vu,CA);const i_=CA>-1?1:0;i_&&(CA*=S5/$i),_r.glyphOffsetArray.length>=Du.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&_r.addToSortKeyRanges(_r.symbolInstances.length,Jn.sortKey);const R5=Ky(Ea,Jn,BA),[N5,O5]=function(es,Lo){const eu=es.length,IA=Lo==null?void 0:Lo.values;if((IA==null?void 0:IA.length)>0)for(let tu=0;tu<IA.length;tu+=2){const hl=IA[tu+1];es.emplaceBack(f.aB[IA[tu]],hl[0],hl[1])}return[eu,es.length]}(_r.textAnchorOffsets,R5);_r.symbolInstances.emplaceBack(dn.x,dn.y,jl.right>=0?jl.right:-1,jl.center>=0?jl.center:-1,jl.left>=0?jl.left:-1,jl.vertical||-1,zg,Hg,r_,T5,L5,P5,M5,U5,k5,Q5,D5,fa,e_,t_,Jy,Yy,i_,0,ms,CA,N5,O5)}(l,Ir,Er,A,u,g,Wt,l.layers[0],l.collisionBoxArray,r.index,r.sourceLayerIndex,l.index,Ce,[de,de,de,de],Nt,S,Pe,ke,vt,J,r,_,k,N,b)};if(Et==="line")for(const Er of Dy(r.geometry,0,0,Ye,Ye)){const Ir=Jc(Er,Pt),_r=w5(Ir,$,dt,A.vertical||oe,u,24,qe,l.overscaling,Ye);for(const dn of _r)oe&&F5(l,oe.text,qt,dn)||dr(Ir,dn)}else if(Et==="line-center"){for(const Er of r.geometry)if(Er.length>1){const Ir=Jc(Er,Pt),_r=v5(Ir,dt,A.vertical||oe,u,24,qe);_r&&dr(Ir,_r)}}else if(r.type==="Polygon")for(const Er of mo(r.geometry,0)){const Ir=B5(Er,16);dr(Jc(Er[0],Pt,!0),new bc(Ir.x,Ir.y,0))}else if(r.type==="LineString")for(const Er of r.geometry){const Ir=Jc(Er,Pt);dr(Ir,new bc(Ir[0].x,Ir[0].y,0))}else if(r.type==="Point")for(const Er of r.geometry)for(const Ir of Er)dr([Ir],new bc(Ir.x,Ir.y,0))}function qy(l,r,A,u,g,_,b,B,S,k,N,H,q,W,J){const oe=function(qe,Pe,$,de,ke,dt,Nt,vt){const Et=de.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,qt=[];for(const zt of Pe.positionedLines)for(const Wt of zt.positionedGlyphs){if(!Wt.rect)continue;const Pt=Wt.rect||{};let dr=e5+1,Er=!0,Ir=1,_r=0;const dn=(ke||vt)&&Wt.vertical,mi=Wt.metrics.advance*Wt.scale/2;if(vt&&Pe.verticalizable&&(_r=zt.lineOffset/2-(Wt.imageName?-($i-Wt.metrics.width*Wt.scale)/2:(Wt.scale-1)*$i)),Wt.imageName){const pa=Nt[Wt.imageName];Er=pa.sdf,Ir=pa.pixelRatio,dr=Ds/Ir}const Wi=ke?[Wt.x+mi,Wt.y]:[0,0];let Ha=ke?[0,0]:[Wt.x+mi+$[0],Wt.y+$[1]-_r],So=[0,0];dn&&(So=Ha,Ha=[0,0]);const Rs=Wt.metrics.isDoubleResolution?2:1,Ea=(Wt.metrics.left-dr)*Wt.scale-mi+Ha[0],hi=(-Wt.metrics.top-dr)*Wt.scale+Ha[1],fa=Ea+Pt.w/Rs*Wt.scale/Ir,Sa=hi+Pt.h/Rs*Wt.scale/Ir,Ta=new z(Ea,hi),ms=new z(fa,hi),To=new z(Ea,Sa),da=new z(fa,Sa);if(dn){const pa=new z(-mi,mi-$f),ga=-Math.PI/2,Hi=$i/2-mi,Jn=new z(5-$f-Hi,-(Wt.imageName?Hi:0)),xA=new z(...So);Ta._rotateAround(ga,pa)._add(Jn)._add(xA),ms._rotateAround(ga,pa)._add(Jn)._add(xA),To._rotateAround(ga,pa)._add(Jn)._add(xA),da._rotateAround(ga,pa)._add(Jn)._add(xA)}if(Et){const pa=Math.sin(Et),ga=Math.cos(Et),Hi=[ga,-pa,pa,ga];Ta._matMult(Hi),ms._matMult(Hi),To._matMult(Hi),da._matMult(Hi)}const Ns=new z(0,0),Xi=new z(0,0);qt.push({tl:Ta,tr:ms,bl:To,br:da,tex:Pt,writingMode:Pe.writingMode,glyphOffset:Wi,sectionIndex:Wt.sectionIndex,isSDF:Er,pixelOffsetTL:Ns,pixelOffsetBR:Xi,minFontScaleX:0,minFontScaleY:0})}return qt}(0,A,B,g,_,b,u,l.allowVerticalPlacement),ye=l.textSizeData;let Ce=null;ye.kind==="source"?(Ce=[ul*g.layout.get("text-size").evaluate(b,{})],Ce[0]>yc&&Ot(`${l.layerIds[0]}: Value for "text-size" is >= ${$h}. Reduce your "text-size".`)):ye.kind==="composite"&&(Ce=[ul*W.compositeTextSizes[0].evaluate(b,{},J),ul*W.compositeTextSizes[1].evaluate(b,{},J)],(Ce[0]>yc||Ce[1]>yc)&&Ot(`${l.layerIds[0]}: Value for "text-size" is >= ${$h}. Reduce your "text-size".`)),l.addSymbols(l.text,oe,Ce,B,_,b,k,r,S.lineStartIndex,S.lineLength,q,J);for(const qe of N)H[qe]=l.text.placedSymbolArray.length-1;return 4*oe.length}function Zy(l){for(const r in l)return l[r];return null}function F5(l,r,A,u){const g=l.compareText;if(r in g){const _=g[r];for(let b=_.length-1;b>=0;b--)if(u.dist(_[b])<A)return!0}else g[r]=[];return g[r].push(u),!1}const $y=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ug{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,u]=new Uint8Array(r,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=u>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=$y[15&u];if(!_)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(r,2,1),[B]=new Uint32Array(r,4,1);return new Ug(B,b,_,r)}constructor(r,A=64,u=Float64Array,g){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const _=$y.indexOf(this.ArrayType),b=2*r*this.ArrayType.BYTES_PER_ELEMENT,B=r*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-B%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${u}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+B+S,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+b+B+S),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+B+S,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=r)}add(r,A){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=A,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return kg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,A,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:b,nodeSize:B}=this,S=[0,_.length-1,0],k=[];for(;S.length;){const N=S.pop()||0,H=S.pop()||0,q=S.pop()||0;if(H-q<=B){for(let ye=q;ye<=H;ye++){const Ce=b[2*ye],qe=b[2*ye+1];Ce>=r&&Ce<=u&&qe>=A&&qe<=g&&k.push(_[ye])}continue}const W=q+H>>1,J=b[2*W],oe=b[2*W+1];J>=r&&J<=u&&oe>=A&&oe<=g&&k.push(_[W]),(N===0?r<=J:A<=oe)&&(S.push(q),S.push(W-1),S.push(1-N)),(N===0?u>=J:g>=oe)&&(S.push(W+1),S.push(H),S.push(1-N))}return k}within(r,A,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:b}=this,B=[0,g.length-1,0],S=[],k=u*u;for(;B.length;){const N=B.pop()||0,H=B.pop()||0,q=B.pop()||0;if(H-q<=b){for(let ye=q;ye<=H;ye++)Xy(_[2*ye],_[2*ye+1],r,A)<=k&&S.push(g[ye]);continue}const W=q+H>>1,J=_[2*W],oe=_[2*W+1];Xy(J,oe,r,A)<=k&&S.push(g[W]),(N===0?r-u<=J:A-u<=oe)&&(B.push(q),B.push(W-1),B.push(1-N)),(N===0?r+u>=J:A+u>=oe)&&(B.push(W+1),B.push(H),B.push(1-N))}return S}}function kg(l,r,A,u,g,_){if(g-u<=A)return;const b=u+g>>1;Wy(l,r,b,u,g,_),kg(l,r,A,u,b-1,1-_),kg(l,r,A,b+1,g,1-_)}function Wy(l,r,A,u,g,_){for(;g>u;){if(g-u>600){const k=g-u+1,N=A-u+1,H=Math.log(k),q=.5*Math.exp(2*H/3),W=.5*Math.sqrt(H*q*(k-q)/k)*(N-k/2<0?-1:1);Wy(l,r,A,Math.max(u,Math.floor(A-N*q/k+W)),Math.min(g,Math.floor(A+(k-N)*q/k+W)),_)}const b=r[2*A+_];let B=u,S=g;for(Jh(l,r,u,A),r[2*g+_]>b&&Jh(l,r,u,g);B<S;){for(Jh(l,r,B,S),B++,S--;r[2*B+_]<b;)B++;for(;r[2*S+_]>b;)S--}r[2*u+_]===b?Jh(l,r,u,S):(S++,Jh(l,r,S,g)),S<=A&&(u=S+1),A<=S&&(g=S-1)}}function Jh(l,r,A,u){Qg(l,A,u),Qg(r,2*A,2*u),Qg(r,2*A+1,2*u+1)}function Qg(l,r,A){const u=l[r];l[r]=l[A],l[A]=u}function Xy(l,r,A,u){const g=l-A,_=r-u;return g*g+_*_}var Dg;f.co=void 0,(Dg=f.co||(f.co={})).create="create",Dg.load="load",Dg.fullLoad="fullLoad";let id=null,Yh=[];const Rg=1e3/60,Ng="loadTime",Og="fullLoadTime",E5={mark(l){performance.mark(l)},frame(l){const r=l;id!=null&&Yh.push(r-id),id=r},clearMetrics(){id=null,Yh=[],performance.clearMeasures(Ng),performance.clearMeasures(Og);for(const l in f.co)performance.clearMarks(f.co[l])},getPerformanceMetrics(){performance.measure(Ng,f.co.create,f.co.load),performance.measure(Og,f.co.create,f.co.fullLoad);const l=performance.getEntriesByName(Ng)[0].duration,r=performance.getEntriesByName(Og)[0].duration,A=Yh.length,u=1/(Yh.reduce((_,b)=>_+b,0)/A/1e3),g=Yh.filter(_=>_>Rg).reduce((_,b)=>_+(b-Rg)/Rg,0);return{loadTime:l,fullLoadTime:r,fps:u,percentDroppedFrames:g/(A+g)*100,totalFrames:A}}};f.$=Wh,f.A=Oe,f.B=Ua,f.C=Mr,f.D=cr,f.E=He,f.F=Tu,f.G=function(l){if(Ue==null){const r=l.navigator?l.navigator.userAgent:null;Ue=!!l.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ue},f.H=class{constructor(l,r){this.target=l,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new y5(()=>this.process()),this.subscription=or(this.target,"message",A=>this.receive(A),!1),this.globalScope=Ft(self)?l:window}registerMessageHandler(l,r){this.messageHandlers[l]=r}sendAsync(l,r){return new Promise((A,u)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=r?or(r.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[g];const S={id:g,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},_5):null;this.resolveRejects[g]={resolve:S=>{_==null||_.unsubscribe(),A(S)},reject:S=>{_==null||_.unsubscribe(),u(S)}};const b=[],B=Object.assign(Object.assign({},l),{id:g,sourceMapId:this.mapId,origin:location.origin,data:xe(l.data,b)});this.target.postMessage(B,{transfer:b})})}receive(l){const r=l.data,A=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[A];const u=this.abortControllers[A];return delete this.abortControllers[A],void(u&&u.abort())}if(Ft(self)||r.mustQueue)return this.tasks[A]=r,this.taskQueue.push(A),void this.invoker.trigger();this.processTask(A,r)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),r=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(l,r)}processTask(l,r){return s(this,void 0,void 0,function*(){if(r.type==="<response>"){const g=this.resolveRejects[l];return delete this.resolveRejects[l],g?void(r.error?g.reject(Je(r.error)):g.resolve(Je(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const A=Je(r.data),u=new AbortController;this.abortControllers[l]=u;try{const g=yield this.messageHandlers[r.type](r.sourceMapId,A,u);this.completeTask(l,null,g)}catch(g){this.completeTask(l,g)}})}completeTask(l,r,A){const u=[];delete this.abortControllers[l];const g={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?xe(r):null,data:xe(A,u)};this.target.postMessage(g,{transfer:u})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.I=vg,f.J=ur,f.K=function(){var l=new Oe(16);return Oe!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},f.L=function(l,r,A){var u,g,_,b,B,S,k,N,H,q,W,J,oe=A[0],ye=A[1],Ce=A[2];return r===l?(l[12]=r[0]*oe+r[4]*ye+r[8]*Ce+r[12],l[13]=r[1]*oe+r[5]*ye+r[9]*Ce+r[13],l[14]=r[2]*oe+r[6]*ye+r[10]*Ce+r[14],l[15]=r[3]*oe+r[7]*ye+r[11]*Ce+r[15]):(g=r[1],_=r[2],b=r[3],B=r[4],S=r[5],k=r[6],N=r[7],H=r[8],q=r[9],W=r[10],J=r[11],l[0]=u=r[0],l[1]=g,l[2]=_,l[3]=b,l[4]=B,l[5]=S,l[6]=k,l[7]=N,l[8]=H,l[9]=q,l[10]=W,l[11]=J,l[12]=u*oe+B*ye+H*Ce+r[12],l[13]=g*oe+S*ye+q*Ce+r[13],l[14]=_*oe+k*ye+W*Ce+r[14],l[15]=b*oe+N*ye+J*Ce+r[15]),l},f.M=function(l,r,A){var u=A[0],g=A[1],_=A[2];return l[0]=r[0]*u,l[1]=r[1]*u,l[2]=r[2]*u,l[3]=r[3]*u,l[4]=r[4]*g,l[5]=r[5]*g,l[6]=r[6]*g,l[7]=r[7]*g,l[8]=r[8]*_,l[9]=r[9]*_,l[10]=r[10]*_,l[11]=r[11]*_,l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},f.N=function(l,r,A){var u=r[0],g=r[1],_=r[2],b=r[3],B=r[4],S=r[5],k=r[6],N=r[7],H=r[8],q=r[9],W=r[10],J=r[11],oe=r[12],ye=r[13],Ce=r[14],qe=r[15],Pe=A[0],$=A[1],de=A[2],ke=A[3];return l[0]=Pe*u+$*B+de*H+ke*oe,l[1]=Pe*g+$*S+de*q+ke*ye,l[2]=Pe*_+$*k+de*W+ke*Ce,l[3]=Pe*b+$*N+de*J+ke*qe,l[4]=(Pe=A[4])*u+($=A[5])*B+(de=A[6])*H+(ke=A[7])*oe,l[5]=Pe*g+$*S+de*q+ke*ye,l[6]=Pe*_+$*k+de*W+ke*Ce,l[7]=Pe*b+$*N+de*J+ke*qe,l[8]=(Pe=A[8])*u+($=A[9])*B+(de=A[10])*H+(ke=A[11])*oe,l[9]=Pe*g+$*S+de*q+ke*ye,l[10]=Pe*_+$*k+de*W+ke*Ce,l[11]=Pe*b+$*N+de*J+ke*qe,l[12]=(Pe=A[12])*u+($=A[13])*B+(de=A[14])*H+(ke=A[15])*oe,l[13]=Pe*g+$*S+de*q+ke*ye,l[14]=Pe*_+$*k+de*W+ke*Ce,l[15]=Pe*b+$*N+de*J+ke*qe,l},f.O=function(l,r){const A={};for(let u=0;u<r.length;u++){const g=r[u];g in l&&(A[g]=l[g])}return A},f.P=z,f.Q=_c,f.R=Fo,f.S=Iy,f.T=Mn,f.U=Cy,f.V=Be,f.W=ze,f.X=jt,f.Y=Eo,f.Z=Ye,f._=s,f.a=Pr,f.a$=function(l,r,A){var u=Math.sin(A),g=Math.cos(A),_=r[4],b=r[5],B=r[6],S=r[7],k=r[8],N=r[9],H=r[10],q=r[11];return r!==l&&(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[4]=_*g+k*u,l[5]=b*g+N*u,l[6]=B*g+H*u,l[7]=S*g+q*u,l[8]=k*g-_*u,l[9]=N*g-b*u,l[10]=H*g-B*u,l[11]=q*g-S*u,l},f.a0=25,f.a1=Lg,f.a2=l=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(A=>{r.onloadstart=()=>{A(r)};for(const u of l){const g=window.document.createElement("source");Xe(u)||(r.crossOrigin="Anonymous"),g.src=u,r.appendChild(g)}})},f.a3=_t,f.a4=function(){return xt++},f.a5=we,f.a6=Du,f.a7=Nl,f.a8=$c,f.a9=My,f.aA=function(l,r,A,u,g=!1){if(!A[0]&&!A[1])return[0,0];const _=g?u==="map"?-l.bearingInRadians:0:u==="viewport"?l.bearingInRadians:0;if(_){const b=Math.sin(_),B=Math.cos(_);A=[A[0]*B-A[1]*b,A[0]*b+A[1]*B]}return[g?A[0]:gt(r,A[0],l.zoom),g?A[1]:gt(r,A[1],l.zoom)]},f.aC=Bg,f.aD=Mg,f.aE=xg,f.aF=Ug,f.aG=Fn,f.aH=Kf,f.aI=It,f.aJ=en,f.aK=_n,f.aL=nt,f.aM=kr,f.aN=Ey,f.aO=function(l,r,A){return l[0]=r[0]*A,l[1]=r[1]*A,l[2]=r[2]*A,l},f.aP=function(l,r,A){return l[0]=r[0]+A[0],l[1]=r[1]+A[1],l[2]=r[2]+A[2],l},f.aQ=function(l){var r=new Oe(3);return r[0]=l[0],r[1]=l[1],r[2]=l[2],r},f.aR=function(l,r,A){return l[0]=r[0]*A[0],l[1]=r[1]*A[1],l[2]=r[2]*A[2],l[3]=r[3]*A[3],l},f.aS=function(l,r,A){return l[0]=r[0]-A[0],l[1]=r[1]-A[1],l[2]=r[2]-A[2],l},f.aT=function(l,r){var A=r[0],u=r[1],g=r[2],_=A*A+u*u+g*g;return _>0&&(_=1/Math.sqrt(_)),l[0]=r[0]*_,l[1]=r[1]*_,l[2]=r[2]*_,l},f.aU=function(l,r,A){var u=r[0],g=r[1],_=r[2],b=A[0],B=A[1],S=A[2];return l[0]=g*S-_*B,l[1]=_*b-u*S,l[2]=u*B-g*b,l},f.aV=function(l,r){return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]},f.aW=Ty,f.aX=Ru,f.aY=function(l,r,A,u,g){var _,b=1/Math.tan(r/2);return l[0]=b/A,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=b,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,g!=null&&g!==1/0?(l[10]=(g+u)*(_=1/(u-g)),l[14]=2*g*u*_):(l[10]=-1,l[14]=-2*u),l},f.aZ=function(l){var r=new Oe(16);return r[0]=l[0],r[1]=l[1],r[2]=l[2],r[3]=l[3],r[4]=l[4],r[5]=l[5],r[6]=l[6],r[7]=l[7],r[8]=l[8],r[9]=l[9],r[10]=l[10],r[11]=l[11],r[12]=l[12],r[13]=l[13],r[14]=l[14],r[15]=l[15],r},f.a_=function(l,r,A){var u=Math.sin(A),g=Math.cos(A),_=r[0],b=r[1],B=r[2],S=r[3],k=r[4],N=r[5],H=r[6],q=r[7];return r!==l&&(l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[0]=_*g+k*u,l[1]=b*g+N*u,l[2]=B*g+H*u,l[3]=S*g+q*u,l[4]=k*g-_*u,l[5]=N*g-b*u,l[6]=H*g-B*u,l[7]=q*g-S*u,l},f.aa=function(l){const r={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,u,g,_)=>{const b=g||_;return r[u]=!b||b.toLowerCase(),""}),r["max-age"]){const A=parseInt(r["max-age"],10);isNaN(A)?delete r["max-age"]:r["max-age"]=A}return r},f.ab=wr,f.ac=function(l){return Math.pow(2,l)},f.ad=me,f.ae=je,f.af=85.051129,f.ag=Fy,f.ah=function(l){return Math.log(l)/Math.LN2},f.ai=function(l){var r=l[0],A=l[1];return r*r+A*A},f.aj=function(l,r){const A=[];for(const u in l)u in r||A.push(u);return A},f.ak=function(l,r){let A=0,u=0;if(l.kind==="constant")u=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:b}=l,B=g?je(Pi.interpolationFactor(g,r,_,b),0,1):0;l.kind==="camera"?u=Ua.number(l.minSize,l.maxSize,B):A=B}return{uSizeT:A,uSize:u}},f.am=function(l,{uSize:r,uSizeT:A},{lowerSize:u,upperSize:g}){return l.kind==="source"?u/ul:l.kind==="composite"?Ua.number(u/ul,g/ul,A):r},f.an=function(l,r){var A=r[0],u=r[1],g=r[2],_=r[3],b=r[4],B=r[5],S=r[6],k=r[7],N=r[8],H=r[9],q=r[10],W=r[11],J=r[12],oe=r[13],ye=r[14],Ce=r[15],qe=A*B-u*b,Pe=A*S-g*b,$=A*k-_*b,de=u*S-g*B,ke=u*k-_*B,dt=g*k-_*S,Nt=N*oe-H*J,vt=N*ye-q*J,Et=N*Ce-W*J,qt=H*ye-q*oe,zt=H*Ce-W*oe,Wt=q*Ce-W*ye,Pt=qe*Wt-Pe*zt+$*qt+de*Et-ke*vt+dt*Nt;return Pt?(l[0]=(B*Wt-S*zt+k*qt)*(Pt=1/Pt),l[1]=(g*zt-u*Wt-_*qt)*Pt,l[2]=(oe*dt-ye*ke+Ce*de)*Pt,l[3]=(q*ke-H*dt-W*de)*Pt,l[4]=(S*Et-b*Wt-k*vt)*Pt,l[5]=(A*Wt-g*Et+_*vt)*Pt,l[6]=(ye*$-J*dt-Ce*Pe)*Pt,l[7]=(N*dt-q*$+W*Pe)*Pt,l[8]=(b*zt-B*Et+k*Nt)*Pt,l[9]=(u*Et-A*zt-_*Nt)*Pt,l[10]=(J*ke-oe*$+Ce*qe)*Pt,l[11]=(H*$-N*ke-W*qe)*Pt,l[12]=(B*vt-b*qt-S*Nt)*Pt,l[13]=(A*qt-u*vt+g*Nt)*Pt,l[14]=(oe*Pe-J*de-ye*qe)*Pt,l[15]=(N*de-H*Pe+q*qe)*Pt,l):null},f.ao=lt,f.ap=function(l){return Math.hypot(l[0],l[1])},f.aq=function(l){return l[0]=0,l[1]=0,l},f.ar=function(l,r,A){return l[0]=r[0]*A,l[1]=r[1]*A,l},f.as=Cg,f.at=Se,f.au=function(l,r,A,u){const g=r.y-l.y,_=r.x-l.x,b=u.y-A.y,B=u.x-A.x,S=b*_-B*g;if(S===0)return null;const k=(B*(l.y-A.y)-b*(l.x-A.x))/S;return new z(l.x+k*_,l.y+k*g)},f.av=Dy,f.aw=w1,f.ax=function(l){let r=1/0,A=1/0,u=-1/0,g=-1/0;for(const _ of l)r=Math.min(r,_.x),A=Math.min(A,_.y),u=Math.max(u,_.x),g=Math.max(g,_.y);return[r,A,u,g]},f.ay=$i,f.az=gt,f.b=sr,f.b$=class extends ie{},f.b0=function(){const l=new Float32Array(16);return me(l),l},f.b1=function(){const l=new Float64Array(16);return me(l),l},f.b2=function(){return new Float64Array(16)},f.b3=function(l,r,A){const u=new Float64Array(4);return function(g,_,b,B){var S=.5*Math.PI/180;_*=S,b*=S,B*=S;var k=Math.sin(_),N=Math.cos(_),H=Math.sin(b),q=Math.cos(b),W=Math.sin(B),J=Math.cos(B);g[0]=k*q*J-N*H*W,g[1]=N*H*J+k*q*W,g[2]=N*q*W-k*H*J,g[3]=N*q*J+k*H*W}(u,l,r-90,A),u},f.b4=function(l,r,A,u){var g,_,b,B,S,k=r[0],N=r[1],H=r[2],q=r[3],W=A[0],J=A[1],oe=A[2],ye=A[3];return(_=k*W+N*J+H*oe+q*ye)<0&&(_=-_,W=-W,J=-J,oe=-oe,ye=-ye),1-_>Ne?(g=Math.acos(_),b=Math.sin(g),B=Math.sin((1-u)*g)/b,S=Math.sin(u*g)/b):(B=1-u,S=u),l[0]=B*k+S*W,l[1]=B*N+S*J,l[2]=B*H+S*oe,l[3]=B*q+S*ye,l},f.b5=function(l){const r=new Float64Array(9);var A,u,g,_,b,B,S,k,N,H,q,W,J,oe,ye,Ce,qe,Pe;H=(g=(u=l)[0])*(S=g+g),q=(_=u[1])*S,J=(b=u[2])*S,oe=b*(k=_+_),Ce=(B=u[3])*S,qe=B*k,Pe=B*(N=b+b),(A=r)[0]=1-(W=_*k)-(ye=b*N),A[3]=q-Pe,A[6]=J+qe,A[1]=q+Pe,A[4]=1-H-ye,A[7]=oe-Ce,A[2]=J-qe,A[5]=oe+Ce,A[8]=1-H-W;const $=kr(-Math.asin(je(r[2],-1,1)));let de,ke;return Math.hypot(r[5],r[8])<.001?(de=0,ke=-kr(Math.atan2(r[3],r[4]))):(de=kr(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),ke=kr(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:de,pitch:$+90,bearing:ke}},f.b6=function(l,r){return l.roll==r.roll&&l.pitch==r.pitch&&l.bearing==r.bearing},f.b7=Xr,f.b8=Lu,f.b9=ku,f.bA=function(l){if(l.type==="custom")return new m5(l);switch(l.type){case"background":return new d5(l);case"circle":return new lx(l);case"fill":return new Ex(l);case"fill-extrusion":return new Qx(l);case"heatmap":return new ux(l);case"hillshade":return new fx(l);case"line":return new Vx(l);case"raster":return new g5(l);case"symbol":return new Yf(l)}},f.bB=ot,f.bC=function(l,r){if(!l)return[{command:"setStyle",args:[r]}];let A=[];try{if(!Ze(l.version,r.version))return[{command:"setStyle",args:[r]}];Ze(l.center,r.center)||A.push({command:"setCenter",args:[r.center]}),Ze(l.state,r.state)||A.push({command:"setGlobalState",args:[r.state]}),Ze(l.centerAltitude,r.centerAltitude)||A.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Ze(l.zoom,r.zoom)||A.push({command:"setZoom",args:[r.zoom]}),Ze(l.bearing,r.bearing)||A.push({command:"setBearing",args:[r.bearing]}),Ze(l.pitch,r.pitch)||A.push({command:"setPitch",args:[r.pitch]}),Ze(l.roll,r.roll)||A.push({command:"setRoll",args:[r.roll]}),Ze(l.sprite,r.sprite)||A.push({command:"setSprite",args:[r.sprite]}),Ze(l.glyphs,r.glyphs)||A.push({command:"setGlyphs",args:[r.glyphs]}),Ze(l.transition,r.transition)||A.push({command:"setTransition",args:[r.transition]}),Ze(l.light,r.light)||A.push({command:"setLight",args:[r.light]}),Ze(l.terrain,r.terrain)||A.push({command:"setTerrain",args:[r.terrain]}),Ze(l.sky,r.sky)||A.push({command:"setSky",args:[r.sky]}),Ze(l.projection,r.projection)||A.push({command:"setProjection",args:[r.projection]});const u={},g=[];(function(b,B,S,k){let N;for(N in B=B||{},b=b||{})Object.prototype.hasOwnProperty.call(b,N)&&(Object.prototype.hasOwnProperty.call(B,N)||Lt(N,S,k));for(N in B)Object.prototype.hasOwnProperty.call(B,N)&&(Object.prototype.hasOwnProperty.call(b,N)?Ze(b[N],B[N])||(b[N].type==="geojson"&&B[N].type==="geojson"&&Jt(b,B,N)?at(S,{command:"setGeoJSONSourceData",args:[N,B[N].data]}):$t(N,B,S,k)):At(N,B,S))})(l.sources,r.sources,g,u);const _=[];l.layers&&l.layers.forEach(b=>{"source"in b&&u[b.source]?A.push({command:"removeLayer",args:[b.id]}):_.push(b)}),A=A.concat(g),function(b,B,S){B=B||[];const k=(b=b||[]).map(Sr),N=B.map(Sr),H=b.reduce(xr,{}),q=B.reduce(xr,{}),W=k.slice(),J=Object.create(null);let oe,ye,Ce,qe,Pe;for(let $=0,de=0;$<k.length;$++)oe=k[$],Object.prototype.hasOwnProperty.call(q,oe)?de++:(at(S,{command:"removeLayer",args:[oe]}),W.splice(W.indexOf(oe,de),1));for(let $=0,de=0;$<N.length;$++)oe=N[N.length-1-$],W[W.length-1-$]!==oe&&(Object.prototype.hasOwnProperty.call(H,oe)?(at(S,{command:"removeLayer",args:[oe]}),W.splice(W.lastIndexOf(oe,W.length-de),1)):de++,qe=W[W.length-$],at(S,{command:"addLayer",args:[q[oe],qe]}),W.splice(W.length-$,0,oe),J[oe]=!0);for(let $=0;$<N.length;$++)if(oe=N[$],ye=H[oe],Ce=q[oe],!J[oe]&&!Ze(ye,Ce))if(Ze(ye.source,Ce.source)&&Ze(ye["source-layer"],Ce["source-layer"])&&Ze(ye.type,Ce.type)){for(Pe in Vt(ye.layout,Ce.layout,S,oe,null,"setLayoutProperty"),Vt(ye.paint,Ce.paint,S,oe,null,"setPaintProperty"),Ze(ye.filter,Ce.filter)||at(S,{command:"setFilter",args:[oe,Ce.filter]}),Ze(ye.minzoom,Ce.minzoom)&&Ze(ye.maxzoom,Ce.maxzoom)||at(S,{command:"setLayerZoomRange",args:[oe,Ce.minzoom,Ce.maxzoom]}),ye)Object.prototype.hasOwnProperty.call(ye,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Vt(ye[Pe],Ce[Pe],S,oe,Pe.slice(6),"setPaintProperty"):Ze(ye[Pe],Ce[Pe])||at(S,{command:"setLayerProperty",args:[oe,Pe,Ce[Pe]]}));for(Pe in Ce)Object.prototype.hasOwnProperty.call(Ce,Pe)&&!Object.prototype.hasOwnProperty.call(ye,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Vt(ye[Pe],Ce[Pe],S,oe,Pe.slice(6),"setPaintProperty"):Ze(ye[Pe],Ce[Pe])||at(S,{command:"setLayerProperty",args:[oe,Pe,Ce[Pe]]}))}else at(S,{command:"removeLayer",args:[oe]}),qe=W[W.lastIndexOf(oe)+1],at(S,{command:"addLayer",args:[Ce,qe]})}(_,r.layers,A)}catch(u){console.warn("Unable to compute style diff:",u),A=[{command:"setStyle",args:[r]}]}return A},f.bD=function(l){const r=[],A=l.id;return A===void 0&&r.push({message:`layers.${A}: missing required property "id"`}),l.render===void 0&&r.push({message:`layers.${A}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&r.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),r},f.bE=function l(r,A){if(Array.isArray(r)){if(!Array.isArray(A)||r.length!==A.length)return!1;for(let u=0;u<r.length;u++)if(!l(r[u],A[u]))return!1;return!0}if(typeof r=="object"&&r!==null&&A!==null){if(typeof A!="object"||Object.keys(r).length!==Object.keys(A).length)return!1;for(const u in r)if(!l(r[u],A[u]))return!1;return!0}return r===A},f.bF=Bt,f.bG=tr,f.bH=class extends Xn{constructor(l,r){super(l,r),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},f.bI=zf,f.bJ=class extends Xn{constructor(l,r){super(l,r),this.current=Jp}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let r=1;r<16;r++)if(l[r]!==this.current[r]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},f.bK=Of,f.bL=class extends Xn{constructor(l,r){super(l,r),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},f.bM=class extends Xn{constructor(l,r){super(l,r),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},f.bN=ve,f.bO=function(l,r){var A=Math.sin(r),u=Math.cos(r);return l[0]=u,l[1]=A,l[2]=0,l[3]=-A,l[4]=u,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},f.bP=function(l,r,A){var u=r[0],g=r[1],_=r[2];return l[0]=u*A[0]+g*A[3]+_*A[6],l[1]=u*A[1]+g*A[4]+_*A[7],l[2]=u*A[2]+g*A[5]+_*A[8],l},f.bQ=function(l,r,A,u,g,_,b){var B=1/(r-A),S=1/(u-g),k=1/(_-b);return l[0]=-2*B,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*S,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*k,l[11]=0,l[12]=(r+A)*B,l[13]=(g+u)*S,l[14]=(b+_)*k,l[15]=1,l},f.bR=class extends Xn{constructor(l,r){super(l,r),this.current=new Array}set(l){if(l!=this.current){this.current=l;const r=new Float32Array(4*l.length);for(let A=0;A<l.length;A++)r[4*A]=l[A].r,r[4*A+1]=l[A].g,r[4*A+2]=l[A].b,r[4*A+3]=l[A].a;this.gl.uniform4fv(this.location,r)}}},f.bS=class extends Xn{constructor(l,r){super(l,r),this.current=new Array}set(l){if(l!=this.current){this.current=l;const r=new Float32Array(l);this.gl.uniform1fv(this.location,r)}}},f.bT=class extends y{},f.bU=Zx,f.bV=class extends F{},f.bW=ag,f.bX=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},f.bY=P1,f.bZ=function(l,r,A){var u=r[0],g=r[1],_=r[2],b=A[3]*u+A[7]*g+A[11]*_+A[15];return l[0]=(A[0]*u+A[4]*g+A[8]*_+A[12])/(b=b||1),l[1]=(A[1]*u+A[5]*g+A[9]*_+A[13])/b,l[2]=(A[2]*u+A[6]*g+A[10]*_+A[14])/b,l},f.b_=class extends xo{},f.ba=Hh,f.bb=Uu,f.bc=nr,f.bd=Ae,f.be=Li,f.bf=function(l,r,A,u,g){return nr(u,g,je((l-r)/(A-r),0,1))},f.bg=Ct,f.bh=function(){return new Float64Array(3)},f.bi=function(l,r,A,u){return l[0]=r[0]+A[0]*u,l[1]=r[1]+A[1]*u,l[2]=r[2]+A[2]*u,l},f.bj=Fe,f.bk=function(){return new Float64Array(4)},f.bl=function(l,r,A,u){var g=[],_=[];return g[0]=r[0]-A[0],g[1]=r[1]-A[1],g[2]=r[2]-A[2],_[0]=g[0]*Math.cos(u)-g[1]*Math.sin(u),_[1]=g[0]*Math.sin(u)+g[1]*Math.cos(u),_[2]=g[2],l[0]=_[0]+A[0],l[1]=_[1]+A[1],l[2]=_[2]+A[2],l},f.bm=function(l,r,A,u){var g=[],_=[];return g[0]=r[0]-A[0],g[1]=r[1]-A[1],g[2]=r[2]-A[2],_[0]=g[0],_[1]=g[1]*Math.cos(u)-g[2]*Math.sin(u),_[2]=g[1]*Math.sin(u)+g[2]*Math.cos(u),l[0]=_[0]+A[0],l[1]=_[1]+A[1],l[2]=_[2]+A[2],l},f.bn=function(l,r,A,u){var g=[],_=[];return g[0]=r[0]-A[0],g[1]=r[1]-A[1],g[2]=r[2]-A[2],_[0]=g[2]*Math.sin(u)+g[0]*Math.cos(u),_[1]=g[1],_[2]=g[2]*Math.cos(u)-g[0]*Math.sin(u),l[0]=_[0]+A[0],l[1]=_[1]+A[1],l[2]=_[2]+A[2],l},f.bo=tt,f.bp=function(l,r,A){var u=Math.sin(A),g=Math.cos(A),_=r[0],b=r[1],B=r[2],S=r[3],k=r[8],N=r[9],H=r[10],q=r[11];return r!==l&&(l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[0]=_*g-k*u,l[1]=b*g-N*u,l[2]=B*g-H*u,l[3]=S*g-q*u,l[8]=_*u+k*g,l[9]=b*u+N*g,l[10]=B*u+H*g,l[11]=S*u+q*g,l},f.bq=function(l,r){const A=Ct(l,360),u=Ct(r,360),g=u-A,_=u>A?g-360:g+360;return Math.abs(g)<Math.abs(_)?g:_},f.br=function(l){return l[0]=0,l[1]=0,l[2]=0,l},f.bs=function(l,r,A,u){const g=Math.sqrt(l*l+r*r),_=Math.sqrt(A*A+u*u);l/=g,r/=g,A/=_,u/=_;const b=Math.acos(l*A+r*u);return-r*A+l*u>0?b:-b},f.bt=function(l,r){return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]+l[3]},f.bu=Sg,f.bv=function(l,r){const A=Ct(l,2*Math.PI),u=Ct(r,2*Math.PI);return Math.min(Math.abs(A-u),Math.abs(A-u+2*Math.PI),Math.abs(A-u-2*Math.PI))},f.bw=function(){const l={},r=pe.$version;for(const A in pe.$root){const u=pe.$root[A];if(u.required){let g=null;g=A==="version"?r:u.type==="array"?[]:{},g!=null&&(l[A]=g)}}return l},f.bx=pt,f.by=Vr,f.bz=function(l){l=l.slice();const r=Object.create(null);for(let A=0;A<l.length;A++)r[l[A].id]=l[A];for(let A=0;A<l.length;A++)"ref"in l[A]&&(l[A]=Ke(l[A],r[l[A].ref]));return l},f.c=pn,f.c0=function(l,r){return l[0]===r[0]&&l[1]===r[1]&&l[2]===r[2]&&l[3]===r[3]&&l[4]===r[4]&&l[5]===r[5]&&l[6]===r[6]&&l[7]===r[7]&&l[8]===r[8]&&l[9]===r[9]&&l[10]===r[10]&&l[11]===r[11]&&l[12]===r[12]&&l[13]===r[13]&&l[14]===r[14]&&l[15]===r[15]},f.c1=function(l,r){var A=l[0],u=l[1],g=l[2],_=l[3],b=l[4],B=l[5],S=l[6],k=l[7],N=l[8],H=l[9],q=l[10],W=l[11],J=l[12],oe=l[13],ye=l[14],Ce=l[15],qe=r[0],Pe=r[1],$=r[2],de=r[3],ke=r[4],dt=r[5],Nt=r[6],vt=r[7],Et=r[8],qt=r[9],zt=r[10],Wt=r[11],Pt=r[12],dr=r[13],Er=r[14],Ir=r[15];return Math.abs(A-qe)<=Ne*Math.max(1,Math.abs(A),Math.abs(qe))&&Math.abs(u-Pe)<=Ne*Math.max(1,Math.abs(u),Math.abs(Pe))&&Math.abs(g-$)<=Ne*Math.max(1,Math.abs(g),Math.abs($))&&Math.abs(_-de)<=Ne*Math.max(1,Math.abs(_),Math.abs(de))&&Math.abs(b-ke)<=Ne*Math.max(1,Math.abs(b),Math.abs(ke))&&Math.abs(B-dt)<=Ne*Math.max(1,Math.abs(B),Math.abs(dt))&&Math.abs(S-Nt)<=Ne*Math.max(1,Math.abs(S),Math.abs(Nt))&&Math.abs(k-vt)<=Ne*Math.max(1,Math.abs(k),Math.abs(vt))&&Math.abs(N-Et)<=Ne*Math.max(1,Math.abs(N),Math.abs(Et))&&Math.abs(H-qt)<=Ne*Math.max(1,Math.abs(H),Math.abs(qt))&&Math.abs(q-zt)<=Ne*Math.max(1,Math.abs(q),Math.abs(zt))&&Math.abs(W-Wt)<=Ne*Math.max(1,Math.abs(W),Math.abs(Wt))&&Math.abs(J-Pt)<=Ne*Math.max(1,Math.abs(J),Math.abs(Pt))&&Math.abs(oe-dr)<=Ne*Math.max(1,Math.abs(oe),Math.abs(dr))&&Math.abs(ye-Er)<=Ne*Math.max(1,Math.abs(ye),Math.abs(Er))&&Math.abs(Ce-Ir)<=Ne*Math.max(1,Math.abs(Ce),Math.abs(Ir))},f.c2=function(l,r){return l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},f.c3=l=>l.type==="symbol",f.c4=l=>l.type==="circle",f.c5=l=>l.type==="heatmap",f.c6=l=>l.type==="line",f.c7=l=>l.type==="fill",f.c8=l=>l.type==="fill-extrusion",f.c9=l=>l.type==="hillshade",f.cA=cg,f.cB=pg,f.cC=Vh,f.cD=_g,f.cE=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},f.cF=function(l,r,A,u,g){return s(this,void 0,void 0,function*(){if(ze())try{return yield jt(l,r,A,u,g)}catch{}return function(_,b,B,S,k){const N=_.width,H=_.height;er&&ar||(er=new OffscreenCanvas(N,H),ar=er.getContext("2d",{willReadFrequently:!0})),er.width=N,er.height=H,ar.drawImage(_,0,0,N,H);const q=ar.getImageData(b,B,S,k);return ar.clearRect(0,0,N,H),q.data}(l,r,A,u,g)})},f.cG=Ly,f.cH=v,f.cI=M,f.cJ=$1,f.cK=oy,f.cL=WA,f.cM=nn,f.ca=l=>l.type==="raster",f.cb=l=>l.type==="background",f.cc=l=>l.type==="custom",f.cd=Ie,f.ce=function(l,r,A){const u=mt(r.x-A.x,r.y-A.y),g=mt(l.x-A.x,l.y-A.y);var _,b;return kr(Math.atan2(u[0]*g[1]-u[1]*g[0],(_=u)[0]*(b=g)[0]+_[1]*b[1]))},f.cf=Me,f.cg=function(l,r){return Wr[r]&&(l instanceof MouseEvent||l instanceof WheelEvent)},f.ch=function(l,r){return Hr[r]&&"touches"in l},f.ci=function(l){return Hr[l]||Wr[l]},f.cj=function(l,r,A){var u=r[0],g=r[1];return l[0]=A[0]*u+A[4]*g+A[12],l[1]=A[1]*u+A[5]*g+A[13],l},f.ck=function(l,r){const{x:A,y:u}=Wh.fromLngLat(r);return!(l<0||l>25||u<0||u>=1||A<0||A>=1)},f.cl=function(l,r){return l[0]=r[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=r[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=r[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},f.cm=class extends On{},f.cn=E5,f.cp=function(l){return l.message===on},f.cq=Dn,f.cr=function(l,r){Pr.REGISTERED_PROTOCOLS[l]=r},f.cs=function(l){delete Pr.REGISTERED_PROTOCOLS[l]},f.ct=function(l,r){const A={};for(let g=0;g<l.length;g++){const _=r&&r[l[g].id]||Iu(l[g]);r&&(r[l[g].id]=_);let b=A[_];b||(b=A[_]=[]),b.push(l[g])}const u=[];for(const g in A)u.push(A[g]);return u},f.cu=X,f.cv=Py,f.cw=Uy,f.cx=ly,f.cy=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Ye/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const r=l.bucket.layers[0],A=r.layout,u=r._unevaluatedLayout._values,g={layoutIconSize:u["icon-size"].possiblyEvaluate(new Mr(l.bucket.zoom+1),l.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new Mr(l.bucket.zoom+1),l.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new Mr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:N}=l.bucket.textSizeData;g.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Mr(k),l.canonical),u["text-size"].possiblyEvaluate(new Mr(N),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:N}=l.bucket.iconSizeData;g.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Mr(k),l.canonical),u["icon-size"].possiblyEvaluate(new Mr(N),l.canonical)]}const _=A.get("text-line-height")*$i,b=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",B=A.get("text-keep-upright"),S=A.get("text-size");for(const k of l.bucket.features){const N=A.get("text-font").evaluate(k,{},l.canonical).join(","),H=S.evaluate(k,{},l.canonical),q=g.layoutTextSize.evaluate(k,{},l.canonical),W=g.layoutIconSize.evaluate(k,{},l.canonical),J={horizontal:{},vertical:void 0},oe=k.text;let ye,Ce=[0,0];if(oe){const $=oe.toString(),de=A.get("text-letter-spacing").evaluate(k,{},l.canonical)*$i,ke=Ht($)?de:0,dt=A.get("text-anchor").evaluate(k,{},l.canonical),Nt=Ky(r,k,l.canonical);if(!Nt){const zt=A.get("text-radial-offset").evaluate(k,{},l.canonical);Ce=zt?Gy(dt,[zt*$i,Pg]):A.get("text-offset").evaluate(k,{},l.canonical).map(Wt=>Wt*$i)}let vt=b?"center":A.get("text-justify").evaluate(k,{},l.canonical);const Et=A.get("symbol-placement")==="point"?A.get("text-max-width").evaluate(k,{},l.canonical)*$i:1/0,qt=()=>{l.bucket.allowVerticalPlacement&&st($)&&(J.vertical=Wf(oe,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,_,dt,"left",ke,Ce,f.al.vertical,!0,q,H))};if(!b&&Nt){const zt=new Set;if(vt==="auto")for(let Pt=0;Pt<Nt.values.length;Pt+=2)zt.add(Mg(Nt.values[Pt]));else zt.add(vt);let Wt=!1;for(const Pt of zt)if(!J.horizontal[Pt])if(Wt)J.horizontal[Pt]=J.horizontal[0];else{const dr=Wf(oe,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,_,"center",Pt,ke,Ce,f.al.horizontal,!1,q,H);dr&&(J.horizontal[Pt]=dr,Wt=dr.positionedLines.length===1)}qt()}else{vt==="auto"&&(vt=Mg(dt));const zt=Wf(oe,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,_,dt,vt,ke,Ce,f.al.horizontal,!1,q,H);zt&&(J.horizontal[vt]=zt),qt(),st($)&&b&&B&&(J.vertical=Wf(oe,l.glyphMap,l.glyphPositions,l.imagePositions,N,Et,_,dt,vt,ke,Ce,f.al.vertical,!1,q,H))}}let qe=!1;if(k.icon&&k.icon.name){const $=l.imageMap[k.icon.name];$&&(ye=l5(l.imagePositions[k.icon.name],A.get("icon-offset").evaluate(k,{},l.canonical),A.get("icon-anchor").evaluate(k,{},l.canonical)),qe=!!$.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=qe:l.bucket.sdfIcons!==qe&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($.pixelRatio!==l.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const Pe=Zy(J.horizontal)||J.vertical;l.bucket.iconsInText=!!Pe&&Pe.iconsInText,(Pe||ye)&&I5(l.bucket,k,J,ye,l.imageMap,g,q,W,Ce,qe,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},f.cz=gg,f.d=Xe,f.e=ut,f.f=l=>s(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(r)}catch(A){throw new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.g=Zr,f.h=l=>new Promise((r,A)=>{const u=new Image;u.onload=()=>{r(u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=fr})},u.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(l)],{type:"image/png"});u.src=l.byteLength?URL.createObjectURL(g):fr}),f.i=Ft,f.j=(l,r)=>bi(ut(l,{type:"json"}),r),f.k=Le,f.l=fe,f.m=bi,f.n=(l,r)=>bi(ut(l,{type:"arrayBuffer"}),r),f.o=function(l){return new _g(l).readFields(Xx,[])},f.p=Ay,f.q=Dh,f.r=gn,f.s=or,f.t=dc,f.u=rt,f.v=pe,f.w=Ot,f.x=R,f.y=sl,f.z=function([l,r,A]){return r+=90,r*=Math.PI/180,A*=Math.PI/180,{x:l*Math.cos(r)*Math.sin(A),y:l*Math.sin(r)*Math.sin(A),z:l*Math.cos(A)}}}),c("worker",["./shared"],function(f){class s{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,le){for(const Le of ae){this._layerConfigs[Le.id]=Le;const He=this._layers[Le.id]=f.bA(Le);He._featureFilter=f.a7(He.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(const Le of le)delete this.keyCache[Le],delete this._layerConfigs[Le],delete this._layers[Le];this.familiesBySource={};const fe=f.ct(Object.values(this._layerConfigs),this.keyCache);for(const Le of fe){const He=Le.map(At=>this._layers[At.id]),pe=He[0];if(pe.visibility==="none")continue;const ht=pe.source||"";let Ke=this.familiesBySource[ht];Ke||(Ke=this.familiesBySource[ht]={});const Ze=pe.sourceLayer||"_geojsonTileLayer";let at=Ke[Ze];at||(at=Ke[Ze]=[]),at.push(He)}}}class v{constructor(ae){const le={},fe=[];for(const ht in ae){const Ke=ae[ht],Ze=le[ht]={};for(const at in Ke){const At=Ke[+at];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const Lt={x:0,y:0,w:At.bitmap.width+2,h:At.bitmap.height+2};fe.push(Lt),Ze[at]={rect:Lt,metrics:At.metrics}}}const{w:Le,h:He}=f.p(fe),pe=new f.q({width:Le||1,height:He||1});for(const ht in ae){const Ke=ae[ht];for(const Ze in Ke){const at=Ke[+Ze];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const At=le[ht][Ze].rect;f.q.copy(at.bitmap,pe,{x:0,y:0},{x:At.x+1,y:At.y+1},at.bitmap)}}this.image=pe,this.positions=le}}f.cu("GlyphAtlas",v);class C{constructor(ae){this.tileID=new f.Y(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,le,fe,Le,He){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new f.a5;const pe=new f.cv(Object.keys(ae.layers).sort()),ht=new f.cw(this.tileID,this.promoteId);ht.bucketLayerIDs=[];const Ke={},Ze={featureIndex:ht,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe,subdivisionGranularity:He},at=le.familiesBySource[this.source];for(const Cr in at){const kt=ae.layers[Cr];if(!kt)continue;kt.version===1&&f.w(`Vector tile source "${this.source}" layer "${Cr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const yr=pe.encode(Cr),Tr=[];for(let yn=0;yn<kt.length;yn++){const vn=kt.feature(yn),Hn=ht.getId(vn,Cr);Tr.push({feature:vn,id:Hn,index:yn,sourceLayerIndex:yr})}for(const yn of at[Cr]){const vn=yn[0];vn.source!==this.source&&f.w(`layer.source = ${vn.source} does not equal this.source = ${this.source}`),vn.minzoom&&this.zoom<Math.floor(vn.minzoom)||vn.maxzoom&&this.zoom>=vn.maxzoom||vn.visibility!=="none"&&(P(yn,this.zoom,fe),(Ke[vn.id]=vn.createBucket({index:ht.bucketLayerIDs.length,layers:yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yr,sourceID:this.source})).populate(Tr,Ze,this.tileID.canonical),ht.bucketLayerIDs.push(yn.map(Hn=>Hn.id)))}}const At=f.bF(Ze.glyphDependencies,Cr=>Object.keys(Cr).map(Number));this.inFlightDependencies.forEach(Cr=>Cr==null?void 0:Cr.abort()),this.inFlightDependencies=[];let Lt=Promise.resolve({});if(Object.keys(At).length){const Cr=new AbortController;this.inFlightDependencies.push(Cr),Lt=Le.sendAsync({type:"GG",data:{stacks:At,source:this.source,tileID:this.tileID,type:"glyphs"}},Cr)}const $t=Object.keys(Ze.iconDependencies);let Jt=Promise.resolve({});if($t.length){const Cr=new AbortController;this.inFlightDependencies.push(Cr),Jt=Le.sendAsync({type:"GI",data:{icons:$t,source:this.source,tileID:this.tileID,type:"icons"}},Cr)}const Vt=Object.keys(Ze.patternDependencies);let Sr=Promise.resolve({});if(Vt.length){const Cr=new AbortController;this.inFlightDependencies.push(Cr),Sr=Le.sendAsync({type:"GI",data:{icons:Vt,source:this.source,tileID:this.tileID,type:"patterns"}},Cr)}const[xr,_t,Nr]=yield Promise.all([Lt,Jt,Sr]),Fr=new v(xr),jr=new f.cx(_t,Nr);for(const Cr in Ke){const kt=Ke[Cr];kt instanceof f.a6?(P(kt.layers,this.zoom,fe),f.cy({bucket:kt,glyphMap:xr,glyphPositions:Fr.positions,imageMap:_t,imagePositions:jr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ze.subdivisionGranularity})):kt.hasPattern&&(kt instanceof f.cz||kt instanceof f.cA||kt instanceof f.cB)&&(P(kt.layers,this.zoom,fe),kt.addFeatures(Ze,this.tileID.canonical,jr.patternPositions))}return this.status="done",{buckets:Object.values(Ke).filter(Cr=>!Cr.isEmpty()),featureIndex:ht,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fr.image,imageAtlas:jr,glyphMap:this.returnDependencies?xr:null,iconMap:this.returnDependencies?_t:null,glyphPositions:this.returnDependencies?Fr.positions:null}})}}function P(Xe,ae,le){const fe=new f.C(ae);for(const Le of Xe)Le.recalculate(fe,le)}class M{constructor(ae,le,fe){this.actor=ae,this.layerIndex=le,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,le){return f._(this,void 0,void 0,function*(){const fe=yield f.n(ae.request,le);try{return{vectorTile:new f.cC.VectorTile(new f.cD(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(Le){const He=new Uint8Array(fe.data);let pe=`Unable to parse the tile at ${ae.request.url}, `;throw pe+=He[0]===31&&He[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Le.message}`,new Error(pe)}})}loadTile(ae){return f._(this,void 0,void 0,function*(){const le=ae.uid,fe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new f.cE(ae.request),Le=new C(ae);this.loading[le]=Le;const He=new AbortController;Le.abort=He;try{const pe=yield this.loadVectorTile(ae,He);if(delete this.loading[le],!pe)return null;const ht=pe.rawData,Ke={};pe.expires&&(Ke.expires=pe.expires),pe.cacheControl&&(Ke.cacheControl=pe.cacheControl);const Ze={};if(fe){const At=fe.finish();At&&(Ze.resourceTiming=JSON.parse(JSON.stringify(At)))}Le.vectorTile=pe.vectorTile;const at=Le.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[le]=Le,this.fetching[le]={rawTileData:ht,cacheControl:Ke,resourceTiming:Ze};try{const At=yield at;return f.e({rawTileData:ht.slice(0)},At,Ke,Ze)}finally{delete this.fetching[le]}}catch(pe){throw delete this.loading[le],Le.status="done",this.loaded[le]=Le,pe}})}reloadTile(ae){return f._(this,void 0,void 0,function*(){const le=ae.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[le];if(fe.showCollisionBoxes=ae.showCollisionBoxes,fe.status==="parsing"){const Le=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let He;if(this.fetching[le]){const{rawTileData:pe,cacheControl:ht,resourceTiming:Ke}=this.fetching[le];delete this.fetching[le],He=f.e({rawTileData:pe.slice(0)},Le,ht,Ke)}else He=Le;return He}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return f._(this,void 0,void 0,function*(){const le=this.loading,fe=ae.uid;le&&le[fe]&&le[fe].abort&&(le[fe].abort.abort(),delete le[fe])})}removeTile(ae){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class Q{constructor(){this.loaded={}}loadTile(ae){return f._(this,void 0,void 0,function*(){const{uid:le,encoding:fe,rawImageData:Le,redFactor:He,greenFactor:pe,blueFactor:ht,baseShift:Ke}=ae,Ze=Le.width+2,at=Le.height+2,At=f.b(Le)?new f.R({width:Ze,height:at},yield f.cF(Le,-1,-1,Ze,at)):Le,Lt=new f.cG(le,At,fe,He,pe,ht,Ke);return this.loaded=this.loaded||{},this.loaded[le]=Lt,Lt})}removeTile(ae){const le=this.loaded,fe=ae.uid;le&&le[fe]&&delete le[fe]}}var E,z,V=function(){if(z)return E;function Xe(le,fe){if(le.length!==0){ae(le[0],fe);for(var Le=1;Le<le.length;Le++)ae(le[Le],!fe)}}function ae(le,fe){for(var Le=0,He=0,pe=0,ht=le.length,Ke=ht-1;pe<ht;Ke=pe++){var Ze=(le[pe][0]-le[Ke][0])*(le[Ke][1]+le[pe][1]),at=Le+Ze;He+=Math.abs(Le)>=Math.abs(Ze)?Le-at+Ze:Ze-at+Le,Le=at}Le+He>=0!=!!fe&&le.reverse()}return z=1,E=function le(fe,Le){var He,pe=fe&&fe.type;if(pe==="FeatureCollection")for(He=0;He<fe.features.length;He++)le(fe.features[He],Le);else if(pe==="GeometryCollection")for(He=0;He<fe.geometries.length;He++)le(fe.geometries[He],Le);else if(pe==="Feature")le(fe.geometry,Le);else if(pe==="Polygon")Xe(fe.coordinates,Le);else if(pe==="MultiPolygon")for(He=0;He<fe.coordinates.length;He++)Xe(fe.coordinates[He],Le);return fe}}(),ee=f.cH(V);const Z=f.cC.VectorTileFeature.prototype.toGeoJSON;class ne{constructor(ae){this._feature=ae,this.extent=f.Z,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const le of this._feature.geometry)ae.push([new f.P(le[0],le[1])]);return ae}{const ae=[];for(const le of this._feature.geometry){const fe=[];for(const Le of le)fe.push(new f.P(Le[0],Le[1]));ae.push(fe)}return ae}}toGeoJSON(ae,le,fe){return Z.call(this,ae,le,fe)}}class Be{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.Z,this.length=ae.length,this._features=ae}feature(ae){return new ne(this._features[ae])}}var ze,Ne,Oe,ve={exports:{}},me=function(){if(Oe)return ve.exports;Oe=1;var Xe=f.cK(),ae=function(){if(Ne)return ze;Ne=1;var at=f.cI(),At=f.cJ().VectorTileFeature;function Lt(Jt,Vt){this.options=Vt||{},this.features=Jt,this.length=Jt.length}function $t(Jt,Vt){this.id=typeof Jt.id=="number"?Jt.id:void 0,this.type=Jt.type,this.rawGeometry=Jt.type===1?[Jt.geometry]:Jt.geometry,this.properties=Jt.tags,this.extent=Vt||4096}return ze=Lt,Lt.prototype.feature=function(Jt){return new $t(this.features[Jt],this.options.extent)},$t.prototype.loadGeometry=function(){var Jt=this.rawGeometry;this.geometry=[];for(var Vt=0;Vt<Jt.length;Vt++){for(var Sr=Jt[Vt],xr=[],_t=0;_t<Sr.length;_t++)xr.push(new at(Sr[_t][0],Sr[_t][1]));this.geometry.push(xr)}return this.geometry},$t.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Jt=this.geometry,Vt=1/0,Sr=-1/0,xr=1/0,_t=-1/0,Nr=0;Nr<Jt.length;Nr++)for(var Fr=Jt[Nr],jr=0;jr<Fr.length;jr++){var Cr=Fr[jr];Vt=Math.min(Vt,Cr.x),Sr=Math.max(Sr,Cr.x),xr=Math.min(xr,Cr.y),_t=Math.max(_t,Cr.y)}return[Vt,xr,Sr,_t]},$t.prototype.toGeoJSON=At.prototype.toGeoJSON,ze}();function le(at){var At=new Xe;return function(Lt,$t){for(var Jt in Lt.layers)$t.writeMessage(3,fe,Lt.layers[Jt])}(at,At),At.finish()}function fe(at,At){var Lt;At.writeVarintField(15,at.version||1),At.writeStringField(1,at.name||""),At.writeVarintField(5,at.extent||4096);var $t={keys:[],values:[],keycache:{},valuecache:{}};for(Lt=0;Lt<at.length;Lt++)$t.feature=at.feature(Lt),At.writeMessage(2,Le,$t);var Jt=$t.keys;for(Lt=0;Lt<Jt.length;Lt++)At.writeStringField(3,Jt[Lt]);var Vt=$t.values;for(Lt=0;Lt<Vt.length;Lt++)At.writeMessage(4,Ze,Vt[Lt])}function Le(at,At){var Lt=at.feature;Lt.id!==void 0&&At.writeVarintField(1,Lt.id),At.writeMessage(2,He,at),At.writeVarintField(3,Lt.type),At.writeMessage(4,Ke,Lt)}function He(at,At){var Lt=at.feature,$t=at.keys,Jt=at.values,Vt=at.keycache,Sr=at.valuecache;for(var xr in Lt.properties){var _t=Lt.properties[xr],Nr=Vt[xr];if(_t!==null){Nr===void 0&&($t.push(xr),Vt[xr]=Nr=$t.length-1),At.writeVarint(Nr);var Fr=typeof _t;Fr!=="string"&&Fr!=="boolean"&&Fr!=="number"&&(_t=JSON.stringify(_t));var jr=Fr+":"+_t,Cr=Sr[jr];Cr===void 0&&(Jt.push(_t),Sr[jr]=Cr=Jt.length-1),At.writeVarint(Cr)}}}function pe(at,At){return(At<<3)+(7&at)}function ht(at){return at<<1^at>>31}function Ke(at,At){for(var Lt=at.loadGeometry(),$t=at.type,Jt=0,Vt=0,Sr=Lt.length,xr=0;xr<Sr;xr++){var _t=Lt[xr],Nr=1;$t===1&&(Nr=_t.length),At.writeVarint(pe(1,Nr));for(var Fr=$t===3?_t.length-1:_t.length,jr=0;jr<Fr;jr++){jr===1&&$t!==1&&At.writeVarint(pe(2,Fr-1));var Cr=_t[jr].x-Jt,kt=_t[jr].y-Vt;At.writeVarint(ht(Cr)),At.writeVarint(ht(kt)),Jt+=Cr,Vt+=kt}$t===3&&At.writeVarint(pe(7,1))}}function Ze(at,At){var Lt=typeof at;Lt==="string"?At.writeStringField(1,at):Lt==="boolean"?At.writeBooleanField(7,at):Lt==="number"&&(at%1!=0?At.writeDoubleField(3,at):at<0?At.writeSVarintField(6,at):At.writeVarintField(5,at))}return ve.exports=le,ve.exports.fromVectorTileJs=le,ve.exports.fromGeojsonVt=function(at,At){At=At||{};var Lt={};for(var $t in at)Lt[$t]=new ae(at[$t].features,At),Lt[$t].name=$t,Lt[$t].version=At.version,Lt[$t].extent=At.extent;return le({layers:Lt})},ve.exports.GeoJSONWrapper=ae,ve.exports}(),Qe=f.cH(me);const tt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xe=>Xe},se=Math.fround||(ue=new Float32Array(1),Xe=>(ue[0]=+Xe,ue[0]));var ue;const Fe=3,Se=5,yt=6;class lt{constructor(ae){this.options=Object.assign(Object.create(tt),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:le,minZoom:fe,maxZoom:Le}=this.options;le&&console.time("total time");const He=`prepare ${ae.length} points`;le&&console.time(He),this.points=ae;const pe=[];for(let Ke=0;Ke<ae.length;Ke++){const Ze=ae[Ke];if(!Ze.geometry)continue;const[at,At]=Ze.geometry.coordinates,Lt=se(gt(at)),$t=se(Ct(At));pe.push(Lt,$t,1/0,Ke,-1,1),this.options.reduce&&pe.push(0)}let ht=this.trees[Le+1]=this._createTree(pe);le&&console.timeEnd(He);for(let Ke=Le;Ke>=fe;Ke--){const Ze=+Date.now();ht=this.trees[Ke]=this._createTree(this._cluster(ht,Ke)),le&&console.log("z%d: %d clusters in %dms",Ke,ht.numItems,+Date.now()-Ze)}return le&&console.timeEnd("total time"),this}getClusters(ae,le){let fe=((ae[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,ae[1]));let He=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)fe=-180,He=180;else if(fe>He){const At=this.getClusters([fe,Le,180,pe],le),Lt=this.getClusters([-180,Le,He,pe],le);return At.concat(Lt)}const ht=this.trees[this._limitZoom(le)],Ke=ht.range(gt(fe),Ct(pe),gt(He),Ct(Le)),Ze=ht.data,at=[];for(const At of Ke){const Lt=this.stride*At;at.push(Ze[Lt+Se]>1?mt(Ze,Lt,this.clusterProps):this.points[Ze[Lt+Fe]])}return at}getChildren(ae){const le=this._getOriginId(ae),fe=this._getOriginZoom(ae),Le="No cluster with the specified id.",He=this.trees[fe];if(!He)throw new Error(Le);const pe=He.data;if(le*this.stride>=pe.length)throw new Error(Le);const ht=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),Ke=He.within(pe[le*this.stride],pe[le*this.stride+1],ht),Ze=[];for(const at of Ke){const At=at*this.stride;pe[At+4]===ae&&Ze.push(pe[At+Se]>1?mt(pe,At,this.clusterProps):this.points[pe[At+Fe]])}if(Ze.length===0)throw new Error(Le);return Ze}getLeaves(ae,le,fe){const Le=[];return this._appendLeaves(Le,ae,le=le||10,fe=fe||0,0),Le}getTile(ae,le,fe){const Le=this.trees[this._limitZoom(ae)],He=Math.pow(2,ae),{extent:pe,radius:ht}=this.options,Ke=ht/pe,Ze=(fe-Ke)/He,at=(fe+1+Ke)/He,At={features:[]};return this._addTileFeatures(Le.range((le-Ke)/He,Ze,(le+1+Ke)/He,at),Le.data,le,fe,He,At),le===0&&this._addTileFeatures(Le.range(1-Ke/He,Ze,1,at),Le.data,He,fe,He,At),le===He-1&&this._addTileFeatures(Le.range(0,Ze,Ke/He,at),Le.data,-1,fe,He,At),At.features.length?At:null}getClusterExpansionZoom(ae){let le=this._getOriginZoom(ae)-1;for(;le<=this.options.maxZoom;){const fe=this.getChildren(ae);if(le++,fe.length!==1)break;ae=fe[0].properties.cluster_id}return le}_appendLeaves(ae,le,fe,Le,He){const pe=this.getChildren(le);for(const ht of pe){const Ke=ht.properties;if(Ke&&Ke.cluster?He+Ke.point_count<=Le?He+=Ke.point_count:He=this._appendLeaves(ae,Ke.cluster_id,fe,Le,He):He<Le?He++:ae.push(ht),ae.length===fe)break}return He}_createTree(ae){const le=new f.aF(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<ae.length;fe+=this.stride)le.add(ae[fe],ae[fe+1]);return le.finish(),le.data=ae,le}_addTileFeatures(ae,le,fe,Le,He,pe){for(const ht of ae){const Ke=ht*this.stride,Ze=le[Ke+Se]>1;let at,At,Lt;if(Ze)at=Ye(le,Ke,this.clusterProps),At=le[Ke],Lt=le[Ke+1];else{const Vt=this.points[le[Ke+Fe]];at=Vt.properties;const[Sr,xr]=Vt.geometry.coordinates;At=gt(Sr),Lt=Ct(xr)}const $t={type:1,geometry:[[Math.round(this.options.extent*(At*He-fe)),Math.round(this.options.extent*(Lt*He-Le))]],tags:at};let Jt;Jt=Ze||this.options.generateId?le[Ke+Fe]:this.points[le[Ke+Fe]].id,Jt!==void 0&&($t.id=Jt),pe.features.push($t)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,le){const{radius:fe,extent:Le,reduce:He,minPoints:pe}=this.options,ht=fe/(Le*Math.pow(2,le)),Ke=ae.data,Ze=[],at=this.stride;for(let At=0;At<Ke.length;At+=at){if(Ke[At+2]<=le)continue;Ke[At+2]=le;const Lt=Ke[At],$t=Ke[At+1],Jt=ae.within(Ke[At],Ke[At+1],ht),Vt=Ke[At+Se];let Sr=Vt;for(const xr of Jt){const _t=xr*at;Ke[_t+2]>le&&(Sr+=Ke[_t+Se])}if(Sr>Vt&&Sr>=pe){let xr,_t=Lt*Vt,Nr=$t*Vt,Fr=-1;const jr=((At/at|0)<<5)+(le+1)+this.points.length;for(const Cr of Jt){const kt=Cr*at;if(Ke[kt+2]<=le)continue;Ke[kt+2]=le;const yr=Ke[kt+Se];_t+=Ke[kt]*yr,Nr+=Ke[kt+1]*yr,Ke[kt+4]=jr,He&&(xr||(xr=this._map(Ke,At,!0),Fr=this.clusterProps.length,this.clusterProps.push(xr)),He(xr,this._map(Ke,kt)))}Ke[At+4]=jr,Ze.push(_t/Sr,Nr/Sr,1/0,jr,-1,Sr),He&&Ze.push(Fr)}else{for(let xr=0;xr<at;xr++)Ze.push(Ke[At+xr]);if(Sr>1)for(const xr of Jt){const _t=xr*at;if(!(Ke[_t+2]<=le)){Ke[_t+2]=le;for(let Nr=0;Nr<at;Nr++)Ze.push(Ke[_t+Nr])}}}}return Ze}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,le,fe){if(ae[le+Se]>1){const pe=this.clusterProps[ae[le+yt]];return fe?Object.assign({},pe):pe}const Le=this.points[ae[le+Fe]].properties,He=this.options.map(Le);return fe&&He===Le?Object.assign({},He):He}}function mt(Xe,ae,le){return{type:"Feature",id:Xe[ae+Fe],properties:Ye(Xe,ae,le),geometry:{type:"Point",coordinates:[(fe=Xe[ae],360*(fe-.5)),nr(Xe[ae+1])]}};var fe}function Ye(Xe,ae,le){const fe=Xe[ae+Se],Le=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,He=Xe[ae+yt],pe=He===-1?{}:Object.assign({},le[He]);return Object.assign(pe,{cluster:!0,cluster_id:Xe[ae+Fe],point_count:fe,point_count_abbreviated:Le})}function gt(Xe){return Xe/360+.5}function Ct(Xe){const ae=Math.sin(Xe*Math.PI/180),le=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return le<0?0:le>1?1:le}function nr(Xe){const ae=(180-360*Xe)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function Ae(Xe,ae,le,fe){let Le=fe;const He=ae+(le-ae>>1);let pe,ht=le-ae;const Ke=Xe[ae],Ze=Xe[ae+1],at=Xe[le],At=Xe[le+1];for(let Lt=ae+3;Lt<le;Lt+=3){const $t=Ie(Xe[Lt],Xe[Lt+1],Ke,Ze,at,At);if($t>Le)pe=Lt,Le=$t;else if($t===Le){const Jt=Math.abs(Lt-He);Jt<ht&&(pe=Lt,ht=Jt)}}Le>fe&&(pe-ae>3&&Ae(Xe,ae,pe,fe),Xe[pe+2]=Le,le-pe>3&&Ae(Xe,pe,le,fe))}function Ie(Xe,ae,le,fe,Le,He){let pe=Le-le,ht=He-fe;if(pe!==0||ht!==0){const Ke=((Xe-le)*pe+(ae-fe)*ht)/(pe*pe+ht*ht);Ke>1?(le=Le,fe=He):Ke>0&&(le+=pe*Ke,fe+=ht*Ke)}return pe=Xe-le,ht=ae-fe,pe*pe+ht*ht}function Me(Xe,ae,le,fe){const Le={id:Xe??null,type:ae,geometry:le,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")je(Le,le);else if(ae==="Polygon")je(Le,le[0]);else if(ae==="MultiLineString")for(const He of le)je(Le,He);else if(ae==="MultiPolygon")for(const He of le)je(Le,He[0]);return Le}function je(Xe,ae){for(let le=0;le<ae.length;le+=3)Xe.minX=Math.min(Xe.minX,ae[le]),Xe.minY=Math.min(Xe.minY,ae[le+1]),Xe.maxX=Math.max(Xe.maxX,ae[le]),Xe.maxY=Math.max(Xe.maxY,ae[le+1])}function nt(Xe,ae,le,fe){if(!ae.geometry)return;const Le=ae.geometry.coordinates;if(Le&&Le.length===0)return;const He=ae.geometry.type,pe=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let ht=[],Ke=ae.id;if(le.promoteId?Ke=ae.properties[le.promoteId]:le.generateId&&(Ke=fe||0),He==="Point")ut(Le,ht);else if(He==="MultiPoint")for(const Ze of Le)ut(Ze,ht);else if(He==="LineString")xt(Le,ht,pe,!1);else if(He==="MultiLineString"){if(le.lineMetrics){for(const Ze of Le)ht=[],xt(Ze,ht,pe,!1),Xe.push(Me(Ke,"LineString",ht,ae.properties));return}Bt(Le,ht,pe,!1)}else if(He==="Polygon")Bt(Le,ht,pe,!0);else{if(He!=="MultiPolygon"){if(He==="GeometryCollection"){for(const Ze of ae.geometry.geometries)nt(Xe,{id:Ke,geometry:Ze,properties:ae.properties},le,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ze of Le){const at=[];Bt(Ze,at,pe,!0),ht.push(at)}}Xe.push(Me(Ke,He,ht,ae.properties))}function ut(Xe,ae){ae.push(tr(Xe[0]),ot(Xe[1]),0)}function xt(Xe,ae,le,fe){let Le,He,pe=0;for(let Ke=0;Ke<Xe.length;Ke++){const Ze=tr(Xe[Ke][0]),at=ot(Xe[Ke][1]);ae.push(Ze,at,0),Ke>0&&(pe+=fe?(Le*at-Ze*He)/2:Math.sqrt(Math.pow(Ze-Le,2)+Math.pow(at-He,2))),Le=Ze,He=at}const ht=ae.length-3;ae[2]=1,Ae(ae,0,ht,le),ae[ht+2]=1,ae.size=Math.abs(pe),ae.start=0,ae.end=ae.size}function Bt(Xe,ae,le,fe){for(let Le=0;Le<Xe.length;Le++){const He=[];xt(Xe[Le],He,le,fe),ae.push(He)}}function tr(Xe){return Xe/360+.5}function ot(Xe){const ae=Math.sin(Xe*Math.PI/180),le=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return le<0?0:le>1?1:le}function Ut(Xe,ae,le,fe,Le,He,pe,ht){if(fe/=ae,He>=(le/=ae)&&pe<fe)return Xe;if(pe<le||He>=fe)return null;const Ke=[];for(const Ze of Xe){const at=Ze.geometry;let At=Ze.type;const Lt=Le===0?Ze.minX:Ze.minY,$t=Le===0?Ze.maxX:Ze.maxY;if(Lt>=le&&$t<fe){Ke.push(Ze);continue}if($t<le||Lt>=fe)continue;let Jt=[];if(At==="Point"||At==="MultiPoint")Ot(at,Jt,le,fe,Le);else if(At==="LineString")Xt(at,Jt,le,fe,Le,!1,ht.lineMetrics);else if(At==="MultiLineString")Ue(at,Jt,le,fe,Le,!1);else if(At==="Polygon")Ue(at,Jt,le,fe,Le,!0);else if(At==="MultiPolygon")for(const Vt of at){const Sr=[];Ue(Vt,Sr,le,fe,Le,!0),Sr.length&&Jt.push(Sr)}if(Jt.length){if(ht.lineMetrics&&At==="LineString"){for(const Vt of Jt)Ke.push(Me(Ze.id,At,Vt,Ze.tags));continue}At!=="LineString"&&At!=="MultiLineString"||(Jt.length===1?(At="LineString",Jt=Jt[0]):At="MultiLineString"),At!=="Point"&&At!=="MultiPoint"||(At=Jt.length===3?"Point":"MultiPoint"),Ke.push(Me(Ze.id,At,Jt,Ze.tags))}}return Ke.length?Ke:null}function Ot(Xe,ae,le,fe,Le){for(let He=0;He<Xe.length;He+=3){const pe=Xe[He+Le];pe>=le&&pe<=fe&&sr(ae,Xe[He],Xe[He+1],Xe[He+2])}}function Xt(Xe,ae,le,fe,Le,He,pe){let ht=Ft(Xe);const Ke=Le===0?fr:jt;let Ze,at,At=Xe.start;for(let Sr=0;Sr<Xe.length-3;Sr+=3){const xr=Xe[Sr],_t=Xe[Sr+1],Nr=Xe[Sr+2],Fr=Xe[Sr+3],jr=Xe[Sr+4],Cr=Le===0?xr:_t,kt=Le===0?Fr:jr;let yr=!1;pe&&(Ze=Math.sqrt(Math.pow(xr-Fr,2)+Math.pow(_t-jr,2))),Cr<le?kt>le&&(at=Ke(ht,xr,_t,Fr,jr,le),pe&&(ht.start=At+Ze*at)):Cr>fe?kt<fe&&(at=Ke(ht,xr,_t,Fr,jr,fe),pe&&(ht.start=At+Ze*at)):sr(ht,xr,_t,Nr),kt<le&&Cr>=le&&(at=Ke(ht,xr,_t,Fr,jr,le),yr=!0),kt>fe&&Cr<=fe&&(at=Ke(ht,xr,_t,Fr,jr,fe),yr=!0),!He&&yr&&(pe&&(ht.end=At+Ze*at),ae.push(ht),ht=Ft(Xe)),pe&&(At+=Ze)}let Lt=Xe.length-3;const $t=Xe[Lt],Jt=Xe[Lt+1],Vt=Le===0?$t:Jt;Vt>=le&&Vt<=fe&&sr(ht,$t,Jt,Xe[Lt+2]),Lt=ht.length-3,He&&Lt>=3&&(ht[Lt]!==ht[0]||ht[Lt+1]!==ht[1])&&sr(ht,ht[0],ht[1],ht[2]),ht.length&&ae.push(ht)}function Ft(Xe){const ae=[];return ae.size=Xe.size,ae.start=Xe.start,ae.end=Xe.end,ae}function Ue(Xe,ae,le,fe,Le,He){for(const pe of Xe)Xt(pe,ae,le,fe,Le,He,!1)}function sr(Xe,ae,le,fe){Xe.push(ae,le,fe)}function fr(Xe,ae,le,fe,Le,He){const pe=(He-ae)/(fe-ae);return sr(Xe,He,le+(Le-le)*pe,1),pe}function jt(Xe,ae,le,fe,Le,He){const pe=(He-le)/(Le-le);return sr(Xe,ae+(fe-ae)*pe,He,1),pe}function er(Xe,ae){const le=[];for(let fe=0;fe<Xe.length;fe++){const Le=Xe[fe],He=Le.type;let pe;if(He==="Point"||He==="MultiPoint"||He==="LineString")pe=ar(Le.geometry,ae);else if(He==="MultiLineString"||He==="Polygon"){pe=[];for(const ht of Le.geometry)pe.push(ar(ht,ae))}else if(He==="MultiPolygon"){pe=[];for(const ht of Le.geometry){const Ke=[];for(const Ze of ht)Ke.push(ar(Ze,ae));pe.push(Ke)}}le.push(Me(Le.id,He,pe,Le.tags))}return le}function ar(Xe,ae){const le=[];le.size=Xe.size,Xe.start!==void 0&&(le.start=Xe.start,le.end=Xe.end);for(let fe=0;fe<Xe.length;fe+=3)le.push(Xe[fe]+ae,Xe[fe+1],Xe[fe+2]);return le}function or(Xe,ae){if(Xe.transformed)return Xe;const le=1<<Xe.z,fe=Xe.x,Le=Xe.y;for(const He of Xe.features){const pe=He.geometry,ht=He.type;if(He.geometry=[],ht===1)for(let Ke=0;Ke<pe.length;Ke+=2)He.geometry.push(wr(pe[Ke],pe[Ke+1],ae,le,fe,Le));else for(let Ke=0;Ke<pe.length;Ke++){const Ze=[];for(let at=0;at<pe[Ke].length;at+=2)Ze.push(wr(pe[Ke][at],pe[Ke][at+1],ae,le,fe,Le));He.geometry.push(Ze)}}return Xe.transformed=!0,Xe}function wr(Xe,ae,le,fe,Le,He){return[Math.round(le*(Xe*fe-Le)),Math.round(le*(ae*fe-He))]}function kr(Xe,ae,le,fe,Le){const He=ae===Le.maxZoom?0:Le.tolerance/((1<<ae)*Le.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:Xe.length,source:null,x:le,y:fe,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ht of Xe)Hr(pe,ht,He,Le);return pe}function Hr(Xe,ae,le,fe){const Le=ae.geometry,He=ae.type,pe=[];if(Xe.minX=Math.min(Xe.minX,ae.minX),Xe.minY=Math.min(Xe.minY,ae.minY),Xe.maxX=Math.max(Xe.maxX,ae.maxX),Xe.maxY=Math.max(Xe.maxY,ae.maxY),He==="Point"||He==="MultiPoint")for(let ht=0;ht<Le.length;ht+=3)pe.push(Le[ht],Le[ht+1]),Xe.numPoints++,Xe.numSimplified++;else if(He==="LineString")Wr(pe,Le,Xe,le,!1,!1);else if(He==="MultiLineString"||He==="Polygon")for(let ht=0;ht<Le.length;ht++)Wr(pe,Le[ht],Xe,le,He==="Polygon",ht===0);else if(He==="MultiPolygon")for(let ht=0;ht<Le.length;ht++){const Ke=Le[ht];for(let Ze=0;Ze<Ke.length;Ze++)Wr(pe,Ke[Ze],Xe,le,!0,Ze===0)}if(pe.length){let ht=ae.tags||null;if(He==="LineString"&&fe.lineMetrics){ht={};for(const Ze in ae.tags)ht[Ze]=ae.tags[Ze];ht.mapbox_clip_start=Le.start/Le.size,ht.mapbox_clip_end=Le.end/Le.size}const Ke={geometry:pe,type:He==="Polygon"||He==="MultiPolygon"?3:He==="LineString"||He==="MultiLineString"?2:1,tags:ht};ae.id!==null&&(Ke.id=ae.id),Xe.features.push(Ke)}}function Wr(Xe,ae,le,fe,Le,He){const pe=fe*fe;if(fe>0&&ae.size<(Le?pe:fe))return void(le.numPoints+=ae.length/3);const ht=[];for(let Ke=0;Ke<ae.length;Ke+=3)(fe===0||ae[Ke+2]>pe)&&(le.numSimplified++,ht.push(ae[Ke],ae[Ke+1])),le.numPoints++;Le&&function(Ke,Ze){let at=0;for(let At=0,Lt=Ke.length,$t=Lt-2;At<Lt;$t=At,At+=2)at+=(Ke[At]-Ke[$t])*(Ke[At+1]+Ke[$t+1]);if(at>0===Ze)for(let At=0,Lt=Ke.length;At<Lt/2;At+=2){const $t=Ke[At],Jt=Ke[At+1];Ke[At]=Ke[Lt-2-At],Ke[At+1]=Ke[Lt-1-At],Ke[Lt-2-At]=$t,Ke[Lt-1-At]=Jt}}(ht,He),Xe.push(ht)}const on={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class pn{constructor(ae,le){const fe=(le=this.options=function(He,pe){for(const ht in pe)He[ht]=pe[ht];return He}(Object.create(on),le)).debug;if(fe&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let Le=function(He,pe){const ht=[];if(He.type==="FeatureCollection")for(let Ke=0;Ke<He.features.length;Ke++)nt(ht,He.features[Ke],pe,Ke);else nt(ht,He.type==="Feature"?He:{geometry:He},pe);return ht}(ae,le);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Le=function(He,pe){const ht=pe.buffer/pe.extent;let Ke=He;const Ze=Ut(He,1,-1-ht,ht,0,-1,2,pe),at=Ut(He,1,1-ht,2+ht,0,-1,2,pe);return(Ze||at)&&(Ke=Ut(He,1,-ht,1+ht,0,-1,2,pe)||[],Ze&&(Ke=er(Ze,1).concat(Ke)),at&&(Ke=Ke.concat(er(at,-1)))),Ke}(Le,le),Le.length&&this.splitTile(Le,0,0,0),fe&&(Le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,le,fe,Le,He,pe,ht){const Ke=[ae,le,fe,Le],Ze=this.options,at=Ze.debug;for(;Ke.length;){Le=Ke.pop(),fe=Ke.pop(),le=Ke.pop(),ae=Ke.pop();const At=1<<le,Lt=Pr(le,fe,Le);let $t=this.tiles[Lt];if(!$t&&(at>1&&console.time("creation"),$t=this.tiles[Lt]=kr(ae,le,fe,Le,Ze),this.tileCoords.push({z:le,x:fe,y:Le}),at)){at>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,fe,Le,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));const yr=`z${le}`;this.stats[yr]=(this.stats[yr]||0)+1,this.total++}if($t.source=ae,He==null){if(le===Ze.indexMaxZoom||$t.numPoints<=Ze.indexMaxPoints)continue}else{if(le===Ze.maxZoom||le===He)continue;if(He!=null){const yr=He-le;if(fe!==pe>>yr||Le!==ht>>yr)continue}}if($t.source=null,ae.length===0)continue;at>1&&console.time("clipping");const Jt=.5*Ze.buffer/Ze.extent,Vt=.5-Jt,Sr=.5+Jt,xr=1+Jt;let _t=null,Nr=null,Fr=null,jr=null,Cr=Ut(ae,At,fe-Jt,fe+Sr,0,$t.minX,$t.maxX,Ze),kt=Ut(ae,At,fe+Vt,fe+xr,0,$t.minX,$t.maxX,Ze);ae=null,Cr&&(_t=Ut(Cr,At,Le-Jt,Le+Sr,1,$t.minY,$t.maxY,Ze),Nr=Ut(Cr,At,Le+Vt,Le+xr,1,$t.minY,$t.maxY,Ze),Cr=null),kt&&(Fr=Ut(kt,At,Le-Jt,Le+Sr,1,$t.minY,$t.maxY,Ze),jr=Ut(kt,At,Le+Vt,Le+xr,1,$t.minY,$t.maxY,Ze),kt=null),at>1&&console.timeEnd("clipping"),Ke.push(_t||[],le+1,2*fe,2*Le),Ke.push(Nr||[],le+1,2*fe,2*Le+1),Ke.push(Fr||[],le+1,2*fe+1,2*Le),Ke.push(jr||[],le+1,2*fe+1,2*Le+1)}}getTile(ae,le,fe){ae=+ae,le=+le,fe=+fe;const Le=this.options,{extent:He,debug:pe}=Le;if(ae<0||ae>24)return null;const ht=1<<ae,Ke=Pr(ae,le=le+ht&ht-1,fe);if(this.tiles[Ke])return or(this.tiles[Ke],He);pe>1&&console.log("drilling down to z%d-%d-%d",ae,le,fe);let Ze,at=ae,At=le,Lt=fe;for(;!Ze&&at>0;)at--,At>>=1,Lt>>=1,Ze=this.tiles[Pr(at,At,Lt)];return Ze&&Ze.source?(pe>1&&(console.log("found parent tile z%d-%d-%d",at,At,Lt),console.time("drilling down")),this.splitTile(Ze.source,at,At,Lt,ae,le,fe),pe>1&&console.timeEnd("drilling down"),this.tiles[Ke]?or(this.tiles[Ke],He):null):null}}function Pr(Xe,ae,le){return 32*((1<<Xe)*le+ae)+Xe}function Zr(Xe,ae){return ae?Xe.properties[ae]:Xe.id}function ur(Xe,ae){if(Xe==null)return!0;if(Xe.type==="Feature")return Zr(Xe,ae)!=null;if(Xe.type==="FeatureCollection"){const le=new Set;for(const fe of Xe.features){const Le=Zr(fe,ae);if(Le==null||le.has(Le))return!1;le.add(Le)}return!0}return!1}function Dn(Xe,ae){const le=new Map;if(Xe!=null)if(Xe.type==="Feature")le.set(Zr(Xe,ae),Xe);else for(const fe of Xe.features)le.set(Zr(fe,ae),fe);return le}class Vr extends M{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,le){return f._(this,void 0,void 0,function*(){const fe=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Le=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!Le)return null;const He=new Be(Le.features);let pe=Qe(He);return pe.byteOffset===0&&pe.byteLength===pe.buffer.byteLength||(pe=new Uint8Array(pe)),{vectorTile:He,rawData:pe.buffer}})}loadData(ae){return f._(this,void 0,void 0,function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const fe=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new f.cE(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new lt(function({superclusterOptions:pe,clusterProperties:ht}){if(!ht||!pe)return pe;const Ke={},Ze={},at={accumulated:null,zoom:0},At={properties:null},Lt=Object.keys(ht);for(const $t of Lt){const[Jt,Vt]=ht[$t],Sr=f.cL(Vt),xr=f.cL(typeof Jt=="string"?[Jt,["accumulated"],["get",$t]]:Jt);Ke[$t]=Sr.value,Ze[$t]=xr.value}return pe.map=$t=>{At.properties=$t;const Jt={};for(const Vt of Lt)Jt[Vt]=Ke[Vt].evaluate(at,At);return Jt},pe.reduce=($t,Jt)=>{At.properties=Jt;for(const Vt of Lt)at.accumulated=$t[Vt],$t[Vt]=Ze[Vt].evaluate(at,At)},pe}(ae)).load((yield this._pendingData).features):(Le=yield this._pendingData,new pn(Le,ae.geojsonVtOptions)),this.loaded={};const He={};if(fe){const pe=fe.finish();pe&&(He.resourceTiming={},He.resourceTiming[ae.source]=JSON.parse(JSON.stringify(pe)))}return He}catch(He){if(delete this._pendingRequest,f.cp(He))return{abandoned:!0};throw He}var Le})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const le=this.loaded;return le&&le[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,le){return f._(this,void 0,void 0,function*(){let fe=yield this.loadGeoJSON(ae,le);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(ee(fe,!0),ae.filter){const Le=f.cL(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Le.result==="error")throw new Error(Le.value.map(pe=>`${pe.key}: ${pe.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(pe=>Le.value.evaluate({zoom:0},pe))}}return fe})}loadGeoJSON(ae,le){return f._(this,void 0,void 0,function*(){const{promoteId:fe}=ae;if(ae.request){const Le=yield f.j(ae.request,le);return this._dataUpdateable=ur(Le.data,fe)?Dn(Le.data,fe):void 0,Le.data}if(typeof ae.data=="string")try{const Le=JSON.parse(ae.data);return this._dataUpdateable=ur(Le,fe)?Dn(Le,fe):void 0,Le}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(Le,He,pe){var ht,Ke,Ze,at;if(He.removeAll&&Le.clear(),He.remove)for(const At of He.remove)Le.delete(At);if(He.add)for(const At of He.add){const Lt=Zr(At,pe);Lt!=null&&Le.set(Lt,At)}if(He.update)for(const At of He.update){let Lt=Le.get(At.id);if(Lt==null)continue;const $t=!At.removeAllProperties&&(((ht=At.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((Ke=At.addOrUpdateProperties)===null||Ke===void 0?void 0:Ke.length)>0);if((At.newGeometry||At.removeAllProperties||$t)&&(Lt=Object.assign({},Lt),Le.set(At.id,Lt),$t&&(Lt.properties=Object.assign({},Lt.properties))),At.newGeometry&&(Lt.geometry=At.newGeometry),At.removeAllProperties)Lt.properties={};else if(((Ze=At.removeProperties)===null||Ze===void 0?void 0:Ze.length)>0)for(const Jt of At.removeProperties)Object.prototype.hasOwnProperty.call(Lt.properties,Jt)&&delete Lt.properties[Jt];if(((at=At.addOrUpdateProperties)===null||at===void 0?void 0:at.length)>0)for(const{key:Jt,value:Vt}of At.addOrUpdateProperties)Lt.properties[Jt]=Vt}}(this._dataUpdateable,ae.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class bi{constructor(ae){this.self=ae,this.actor=new f.H(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(le,fe)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=fe},this.self.addProtocol=f.cr,this.self.removeProtocol=f.cs,this.self.registerRTLTextPlugin=le=>{f.cM.setMethods(le)},this.actor.registerMessageHandler("LDT",(le,fe)=>this._getDEMWorkerSource(le,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RDT",(le,fe)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(le,fe.source).removeTile(fe)})),this.actor.registerMessageHandler("GCEZ",(le,fe)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterExpansionZoom(fe)})),this.actor.registerMessageHandler("GCC",(le,fe)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterChildren(fe)})),this.actor.registerMessageHandler("GCL",(le,fe)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterLeaves(fe)})),this.actor.registerMessageHandler("LD",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).loadData(fe)),this.actor.registerMessageHandler("GD",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).getData()),this.actor.registerMessageHandler("LT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).reloadTile(fe)),this.actor.registerMessageHandler("AT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).abortTile(fe)),this.actor.registerMessageHandler("RMT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).removeTile(fe)),this.actor.registerMessageHandler("RS",(le,fe)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[le]||!this.workerSources[le][fe.type]||!this.workerSources[le][fe.type][fe.source])return;const Le=this.workerSources[le][fe.type][fe.source];delete this.workerSources[le][fe.type][fe.source],Le.removeSource!==void 0&&Le.removeSource(fe)})),this.actor.registerMessageHandler("RM",le=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le]})),this.actor.registerMessageHandler("SR",(le,fe)=>f._(this,void 0,void 0,function*(){this.referrer=fe})),this.actor.registerMessageHandler("SRPS",(le,fe)=>this._syncRTLPluginState(le,fe)),this.actor.registerMessageHandler("IS",(le,fe)=>f._(this,void 0,void 0,function*(){this.self.importScripts(fe)})),this.actor.registerMessageHandler("SI",(le,fe)=>this._setImages(le,fe)),this.actor.registerMessageHandler("UL",(le,fe)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(le).update(fe.layers,fe.removedIds)})),this.actor.registerMessageHandler("SL",(le,fe)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(le).replace(fe)}))}_setImages(ae,le){return f._(this,void 0,void 0,function*(){this.availableImages[ae]=le;for(const fe in this.workerSources[ae]){const Le=this.workerSources[ae][fe];for(const He in Le)Le[He].availableImages=le}})}_syncRTLPluginState(ae,le){return f._(this,void 0,void 0,function*(){return yield f.cM.syncState(le,this.self.importScripts)})}_getAvailableImages(ae){let le=this.availableImages[ae];return le||(le=[]),le}_getLayerIndex(ae){let le=this.layerIndexes[ae];return le||(le=this.layerIndexes[ae]=new s),le}_getWorkerSource(ae,le,fe){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][le]||(this.workerSources[ae][le]={}),!this.workerSources[ae][le][fe]){const Le={sendAsync:(He,pe)=>(He.targetMapId=ae,this.actor.sendAsync(He,pe))};switch(le){case"vector":this.workerSources[ae][le][fe]=new M(Le,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][le][fe]=new Vr(Le,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][le][fe]=new this.externalWorkerSourceTypes[le](Le,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][le][fe]}_getDEMWorkerSource(ae,le){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][le]||(this.demWorkerSources[ae][le]=new Q),this.demWorkerSources[ae][le]}}return f.i(self)&&(self.worker=new bi(self)),bi}),c("index",["exports","./shared"],function(f,s){var v="5.5.0";function C(){var m=new s.A(4);return s.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}let P,M;const Q={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(m,t,a){const h=requestAnimationFrame(y=>{p(),t(y)}),{unsubscribe:p}=s.s(m.signal,"abort",()=>{p(),cancelAnimationFrame(h),a(s.c())},!1)},frameAsync(m){return new Promise((t,a)=>{this.frame(m,t,a)})},getImageData(m,t=0){return this.getImageCanvasContext(m).getImageData(-t,-t,m.width+2*t,m.height+2*t)},getImageCanvasContext(m){const t=window.document.createElement("canvas"),a=t.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return t.width=m.width,t.height=m.height,a.drawImage(m,0,0,m.width,m.height),a},resolveURL:m=>(P||(P=document.createElement("a")),P.href=m,P.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class E{static testProp(t){if(!E.docStyle)return t[0];for(let a=0;a<t.length;a++)if(t[a]in E.docStyle)return t[a];return t[0]}static create(t,a,h){const p=window.document.createElement(t);return a!==void 0&&(p.className=a),h&&h.appendChild(p),p}static createNS(t,a){return window.document.createElementNS(t,a)}static disableDrag(){E.docStyle&&E.selectProp&&(E.userSelect=E.docStyle[E.selectProp],E.docStyle[E.selectProp]="none")}static enableDrag(){E.docStyle&&E.selectProp&&(E.docStyle[E.selectProp]=E.userSelect)}static setTransform(t,a){t.style[E.transformProp]=a}static addEventListener(t,a,h,p={}){t.addEventListener(a,h,"passive"in p?p:p.capture)}static removeEventListener(t,a,h,p={}){t.removeEventListener(a,h,"passive"in p?p:p.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",E.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",E.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",E.suppressClickInternal,!0)},0)}static getScale(t){const a=t.getBoundingClientRect();return{x:a.width/t.offsetWidth||1,y:a.height/t.offsetHeight||1,boundingClientRect:a}}static getPoint(t,a,h){const p=a.boundingClientRect;return new s.P((h.clientX-p.left)/a.x-t.clientLeft,(h.clientY-p.top)/a.y-t.clientTop)}static mousePos(t,a){const h=E.getScale(t);return E.getPoint(t,h,a)}static touchPos(t,a){const h=[],p=E.getScale(t);for(let y=0;y<a.length;y++)h.push(E.getPoint(t,p,a[y]));return h}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const a=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),h=a.querySelectorAll("script");for(const p of h)p.remove();return E.clean(a),a.innerHTML}static isPossiblyDangerous(t,a){const h=a.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!h.includes("javascript:")&&!h.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const a=t.children;for(const h of a)E.removeAttributes(h),E.clean(h)}static removeAttributes(t){for(const{name:a,value:h}of t.attributes)E.isPossiblyDangerous(a,h)&&t.removeAttribute(a)}}E.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,E.selectProp=E.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),E.transformProp=E.testProp(["transform","WebkitTransform"]);const z={supported:!1,testSupport:function(m){!Z&&ee&&(ne?Be(m):V=m)}};let V,ee,Z=!1,ne=!1;function Be(m){const t=m.createTexture();m.bindTexture(m.TEXTURE_2D,t);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,ee),m.isContextLost())return;z.supported=!0}catch{}m.deleteTexture(t),Z=!0}var ze;typeof document<"u"&&(ee=document.createElement("img"),ee.onload=()=>{V&&Be(V),V=null,ne=!0},ee.onerror=()=>{Z=!0,V=null},ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let t,a,h,p;m.resetRequestQueue=()=>{t=[],a=0,h=0,p={}},m.addThrottleControl=T=>{const D=h++;return p[D]=T,D},m.removeThrottleControl=T=>{delete p[T],x()},m.getImage=(T,D,O=!0)=>new Promise((K,G)=>{z.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),s.e(T,{type:"image"}),t.push({abortController:D,requestParameters:T,supportImageRefresh:O,state:"queued",onError:Y=>{G(Y)},onSuccess:Y=>{K(Y)}}),x()});const y=T=>s._(this,void 0,void 0,function*(){T.state="running";const{requestParameters:D,supportImageRefresh:O,onError:K,onSuccess:G,abortController:Y}=T,ie=O===!1&&!s.i(self)&&!s.g(D.url)&&(!D.headers||Object.keys(D.headers).reduce((we,Te)=>we&&Te==="accept",!0));a++;const be=ie?F(D,Y):s.m(D,Y);try{const we=yield be;delete T.abortController,T.state="completed",we.data instanceof HTMLImageElement||s.b(we.data)?G(we):we.data&&G({data:yield(_e=we.data,typeof createImageBitmap=="function"?s.f(_e):s.h(_e)),cacheControl:we.cacheControl,expires:we.expires})}catch(we){delete T.abortController,K(we)}finally{a--,x()}var _e}),x=()=>{const T=(()=>{for(const D of Object.keys(p))if(p[D]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let D=a;D<T&&t.length>0;D++){const O=t.shift();O.abortController.signal.aborted?D--:y(O)}},F=(T,D)=>new Promise((O,K)=>{const G=new Image,Y=T.url,ie=T.credentials;ie&&ie==="include"?G.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!s.d(Y))&&(G.crossOrigin="anonymous"),D.signal.addEventListener("abort",()=>{G.src="",K(s.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,O({data:G})},G.onerror=()=>{G.onerror=G.onload=null,D.signal.aborted||K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Y})}(ze||(ze={})),ze.resetRequestQueue();class Ne{constructor(t){this._transformRequestFn=t}transformRequest(t,a){return this._transformRequestFn&&this._transformRequestFn(t,a)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Oe(m){const t=[];if(typeof m=="string")t.push({id:"default",url:m});else if(m&&m.length>0){const a=[];for(const{id:h,url:p}of m){const y=`${h}${p}`;a.indexOf(y)===-1&&(a.push(y),t.push({id:h,url:p}))}}return t}function ve(m,t,a){try{const h=new URL(m);return h.pathname+=`${t}${a}`,h.toString()}catch{throw new Error(`Invalid sprite URL "${m}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class me{constructor(t,a,h,p){this.context=t,this.format=h,this.texture=t.gl.createTexture(),this.update(a,p)}update(t,a,h){const{width:p,height:y}=t,x=!(this.size&&this.size[0]===p&&this.size[1]===y||h),{context:F}=this,{gl:T}=F;if(this.useMipmap=!!(a&&a.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),F.pixelStoreUnpackFlipY.set(!1),F.pixelStoreUnpack.set(1),F.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!a||a.premultiply!==!1)),x)this.size=[p,y],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||s.b(t)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,t):T.texImage2D(T.TEXTURE_2D,0,this.format,p,y,0,this.format,T.UNSIGNED_BYTE,t.data);else{const{x:D,y:O}=h||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||s.b(t)?T.texSubImage2D(T.TEXTURE_2D,0,D,O,T.RGBA,T.UNSIGNED_BYTE,t):T.texSubImage2D(T.TEXTURE_2D,0,D,O,p,y,T.RGBA,T.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),F.pixelStoreUnpackFlipY.setDefault(),F.pixelStoreUnpack.setDefault(),F.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,a,h){const{context:p}=this,{gl:y}=p;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),t!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,t),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||t),this.filter=t),a!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function Qe(m){const{userImage:t}=m;return!!(t&&t.render&&t.render())&&(m.data.replace(new Uint8Array(t.data.buffer)),!0)}class tt extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:a,promiseResolve:h}of this.requestors)h(this._getImagesForIds(a));this.requestors=[]}}getImage(t){const a=this.images[t];if(a&&!a.data&&a.spriteData){const h=a.spriteData;a.data=new s.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),a.spriteData=null}return a}addImage(t,a){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,a)&&(this.images[t]=a)}_validate(t,a){let h=!0;const p=a.data||a.spriteData;return this._validateStretch(a.stretchX,p&&p.width)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "stretchX" value`))),h=!1),this._validateStretch(a.stretchY,p&&p.height)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "stretchY" value`))),h=!1),this._validateContent(a.content,a)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "content" value`))),h=!1),h}_validateStretch(t,a){if(!t)return!0;let h=0;for(const p of t){if(p[0]<h||p[1]<p[0]||a<p[1])return!1;h=p[1]}return!0}_validateContent(t,a){if(!t)return!0;if(t.length!==4)return!1;const h=a.spriteData,p=h&&h.width||a.data.width,y=h&&h.height||a.data.height;return!(t[0]<0||p<t[0]||t[1]<0||y<t[1]||t[2]<0||p<t[2]||t[3]<0||y<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,a,h=!0){const p=this.getImage(t);if(h&&(p.data.width!==a.data.width||p.data.height!==a.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=p.version+1,this.images[t]=a,this.updatedImages[t]=!0}removeImage(t){const a=this.images[t];delete this.images[t],delete this.patterns[t],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((a,h)=>{let p=!0;if(!this.isLoaded())for(const y of t)this.images[y]||(p=!1);this.isLoaded()||p?a(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:a})})}_getImagesForIds(t){const a={};for(const h of t){let p=this.getImage(h);p||(this.fire(new s.l("styleimagemissing",{id:h})),p=this.getImage(h)),p?a[h]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:s.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:t,height:a}=this.atlasImage;return{width:t,height:a}}getPattern(t){const a=this.patterns[t],h=this.getImage(t);if(!h)return null;if(a&&a.position.version===h.version)return a.position;if(a)a.position.version=h.version;else{const p={w:h.data.width+2,h:h.data.height+2,x:0,y:0},y=new s.I(p,h);this.patterns[t]={bin:p,position:y}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const a=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new me(t,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const y in this.patterns)t.push(this.patterns[y].bin);const{w:a,h}=s.p(t),p=this.atlasImage;p.resize({width:a||1,height:h||1});for(const y in this.patterns){const{bin:x}=this.patterns[y],F=x.x+1,T=x.y+1,D=this.getImage(y).data,O=D.width,K=D.height;s.R.copy(D,p,{x:0,y:0},{x:F,y:T},{width:O,height:K}),s.R.copy(D,p,{x:0,y:K-1},{x:F,y:T-1},{width:O,height:1}),s.R.copy(D,p,{x:0,y:0},{x:F,y:T+K},{width:O,height:1}),s.R.copy(D,p,{x:O-1,y:0},{x:F-1,y:T},{width:1,height:K}),s.R.copy(D,p,{x:0,y:0},{x:F+O,y:T},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const a of t){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const h=this.getImage(a);h||s.w(`Image with ID: "${a}" was not found`),Qe(h)&&this.updateImage(a,h)}}}const se=1e20;function ue(m,t,a,h,p,y,x,F,T){for(let D=t;D<t+h;D++)Fe(m,a*y+D,y,p,x,F,T);for(let D=a;D<a+p;D++)Fe(m,D*y+t,1,h,x,F,T)}function Fe(m,t,a,h,p,y,x){y[0]=0,x[0]=-1e20,x[1]=se,p[0]=m[t];for(let F=1,T=0,D=0;F<h;F++){p[F]=m[t+F*a];const O=F*F;do{const K=y[T];D=(p[F]-p[K]+O-K*K)/(F-K)/2}while(D<=x[T]&&--T>-1);T++,y[T]=F,x[T]=D,x[T+1]=se}for(let F=0,T=0;F<h;F++){for(;x[T+1]<F;)T++;const D=y[T],O=F-D;m[t+F*a]=p[D]+O*O}}class Se{constructor(t,a){this.requestManager=t,this.localIdeographFontFamily=a,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return s._(this,void 0,void 0,function*(){const a=[];for(const y in t)for(const x of t[y])a.push(this._getAndCacheGlyphsPromise(y,x));const h=yield Promise.all(a),p={};for(const{stack:y,id:x,glyph:F}of h)p[y]||(p[y]={}),p[y][x]=F&&{id:F.id,bitmap:F.bitmap.clone(),metrics:F.metrics};return p})}_getAndCacheGlyphsPromise(t,a){return s._(this,void 0,void 0,function*(){let h=this.entries[t];h||(h=this.entries[t]={glyphs:{},requests:{},ranges:{}});let p=h.glyphs[a];if(p!==void 0)return{stack:t,id:a,glyph:p};if(p=this._tinySDF(h,t,a),p)return h.glyphs[a]=p,{stack:t,id:a,glyph:p};const y=Math.floor(a/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[y])return{stack:t,id:a,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[y]){const F=Se.loadGlyphRange(t,y,this.url,this.requestManager);h.requests[y]=F}const x=yield h.requests[y];for(const F in x)this._doesCharSupportLocalGlyph(+F)||(h.glyphs[+F]=x[+F]);return h.ranges[y]=!0,{stack:t,id:a,glyph:x[a]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))||s.u["CJK Unified Ideographs"](t)||s.u["Hangul Syllables"](t)||s.u.Hiragana(t)||s.u.Katakana(t)||s.u["CJK Symbols and Punctuation"](t)||s.u["Halfwidth and Fullwidth Forms"](t))}_tinySDF(t,a,h){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let y=t.tinySDF;if(!y){let F="400";/bold/i.test(a)?F="900":/medium/i.test(a)?F="500":/light/i.test(a)&&(F="200"),y=t.tinySDF=new Se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:F})}const x=y.draw(String.fromCharCode(h));return{id:h,bitmap:new s.q({width:x.width||60,height:x.height||60},x.data),metrics:{width:x.glyphWidth/2||24,height:x.glyphHeight/2||24,left:x.glyphLeft/2+.5||0,top:x.glyphTop/2-27.5||-8,advance:x.glyphAdvance/2||24,isDoubleResolution:!0}}}}Se.loadGlyphRange=function(m,t,a,h){return s._(this,void 0,void 0,function*(){const p=256*t,y=p+255,x=h.transformRequest(a.replace("{fontstack}",m).replace("{range}",`${p}-${y}`),"Glyphs"),F=yield s.n(x,new AbortController);if(!F||!F.data)throw new Error(`Could not load glyph range. range: ${t}, ${p}-${y}`);const T={};for(const D of s.o(F.data))T[D.id]=D;return T})},Se.TinySDF=class{constructor({fontSize:m=24,buffer:t=3,radius:a=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=t,this.cutoff=h,this.radius=a;const F=this.size=m+4*t,T=this._createCanvas(F),D=this.ctx=T.getContext("2d",{willReadFrequently:!0});D.font=`${x} ${y} ${m}px ${p}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Uint16Array(F)}_createCanvas(m){const t=document.createElement("canvas");return t.width=t.height=m,t}draw(m){const{width:t,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(m),x=Math.ceil(a),F=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-p))),T=Math.min(this.size-this.buffer,x+Math.ceil(h)),D=F+2*this.buffer,O=T+2*this.buffer,K=Math.max(D*O,0),G=new Uint8ClampedArray(K),Y={data:G,width:D,height:O,glyphWidth:F,glyphHeight:T,glyphTop:x,glyphLeft:0,glyphAdvance:t};if(F===0||T===0)return Y;const{ctx:ie,buffer:be,gridInner:_e,gridOuter:we}=this;ie.clearRect(be,be,F,T),ie.fillText(m,be,be+x);const Te=ie.getImageData(be,be,F,T);we.fill(se,0,K),_e.fill(0,0,K);for(let De=0;De<T;De++)for(let Re=0;Re<F;Re++){const Ve=Te.data[4*(De*F+Re)+3]/255;if(Ve===0)continue;const We=(De+be)*D+Re+be;if(Ve===1)we[We]=0,_e[We]=se;else{const Ge=.5-Ve;we[We]=Ge>0?Ge*Ge:0,_e[We]=Ge<0?Ge*Ge:0}}ue(we,0,0,D,O,D,this.f,this.v,this.z),ue(_e,be,be,F,T,D,this.f,this.v,this.z);for(let De=0;De<K;De++){const Re=Math.sqrt(we[De])-Math.sqrt(_e[De]);G[De]=Math.round(255-255*(Re/this.radius+this.cutoff))}return Y}};class yt{constructor(){this.specification=s.v.light.position}possiblyEvaluate(t,a){return s.z(t.expression.evaluate(a))}interpolate(t,a,h){return{x:s.B.number(t.x,a.x,h),y:s.B.number(t.y,a.y,h),z:s.B.number(t.z,a.z,h)}}}let lt;class mt extends s.E{constructor(t){super(),lt=lt||new s.r({anchor:new s.D(s.v.light.anchor),position:new yt,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(lt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,a={}){if(!this._validate(s.t,t,a))for(const h in t){const p=t[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,a,h){return(!h||h.validate!==!1)&&s.x(this,t.call(s.y,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const Ye=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class gt extends s.E{constructor(t){super(),this._transitionable=new s.T(Ye),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(t,a={}){if(!this._validate(s.F,t,a)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in t){const p=t[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),p):this._transitionable.setValue(h,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,a,h={}){return(h==null?void 0:h.validate)!==!1&&s.x(this,t.call(s.y,s.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class Ct{constructor(t,a){this.width=t,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,a){const h=t.join(",")+String(a);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(t,a)),this.dashEntry[h]}getDashRanges(t,a,h){const p=[];let y=t.length%2==1?-t[t.length-1]*h:0,x=t[0]*h,F=!0;p.push({left:y,right:x,isDash:F,zeroLength:t[0]===0});let T=t[0];for(let D=1;D<t.length;D++){F=!F;const O=t[D];y=T*h,T+=O,x=T*h,p.push({left:y,right:x,isDash:F,zeroLength:O===0})}return p}addRoundDash(t,a,h){const p=a/2;for(let y=-h;y<=h;y++){const x=this.width*(this.nextRow+h+y);let F=0,T=t[F];for(let D=0;D<this.width;D++){D/T.right>1&&(T=t[++F]);const O=Math.abs(D-T.left),K=Math.abs(D-T.right),G=Math.min(O,K);let Y;const ie=y/h*(p+1);if(T.isDash){const be=p-Math.abs(ie);Y=Math.sqrt(G*G+be*be)}else Y=p-Math.sqrt(G*G+ie*ie);this.data[x+D]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(t){for(let F=t.length-1;F>=0;--F){const T=t[F],D=t[F+1];T.zeroLength?t.splice(F,1):D&&D.isDash===T.isDash&&(D.left=T.left,t.splice(F,1))}const a=t[0],h=t[t.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);const p=this.width*this.nextRow;let y=0,x=t[y];for(let F=0;F<this.width;F++){F/x.right>1&&(x=t[++y]);const T=Math.abs(F-x.left),D=Math.abs(F-x.right),O=Math.min(T,D);this.data[p+F]=Math.max(0,Math.min(255,(x.isDash?O:-O)+128))}}addDash(t,a){const h=a?7:0,p=2*h+1;if(this.nextRow+p>this.height)return s.w("LineAtlas out of space"),null;let y=0;for(let F=0;F<t.length;F++)y+=t[F];if(y!==0){const F=this.width/y,T=this.getDashRanges(t,this.width,F);a?this.addRoundDash(T,F,h):this.addRegularDash(T)}const x={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:y};return this.nextRow+=p,this.dirty=!0,x}bind(t){const a=t.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const nr="maplibre_preloaded_worker_pool";class Ae{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nr]}numActive(){return Object.keys(this.active).length}}const Ie=Math.floor(Q.hardwareConcurrency/2);let Me,je;function nt(){return Me||(Me=new Ae),Me}Ae.workerCount=s.G(globalThis)?Math.max(Math.min(Ie,3),1):1;class ut{constructor(t,a){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=a;const h=this.workerPool.acquire(a);for(let p=0;p<h.length;p++){const y=new s.H(h[p],a);y.name=`Worker ${p}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,a){const h=[];for(const p of this.actors)h.push(p.sendAsync({type:t,data:a}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,a){for(const h of this.actors)h.registerMessageHandler(t,a)}}function xt(){return je||(je=new ut(nt(),s.J),je.registerMessageHandler("GR",(m,t,a)=>s.m(t,a))),je}function Bt(m,t){const a=s.K();return s.L(a,a,[1,1,0]),s.M(a,a,[.5*m.width,.5*m.height,1]),m.calculatePosMatrix?s.N(a,a,m.calculatePosMatrix(t.toUnwrapped())):a}function tr(m,t,a,h,p,y,x){var F;const T=function(G,Y,ie){if(G)for(const be of G){const _e=Y[be];if(_e&&_e.source===ie&&_e.type==="fill-extrusion")return!0}else for(const be in Y){const _e=Y[be];if(_e.source===ie&&_e.type==="fill-extrusion")return!0}return!1}((F=p==null?void 0:p.layers)!==null&&F!==void 0?F:null,t,m.id),D=y.maxPitchScaleFactor(),O=m.tilesIn(h,D,T);O.sort(ot);const K=[];for(const G of O)K.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(t,a,m._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,p,y,D,Bt(m.transform,G.tileID),x?(Y,ie)=>x(G.tileID,Y,ie):void 0)});return function(G,Y){for(const ie in G)for(const be of G[ie])Ut(be,Y);return G}(function(G){const Y={},ie={};for(const be of G){const _e=be.queryResults,we=be.wrappedTileID,Te=ie[we]=ie[we]||{};for(const De in _e){const Re=_e[De],Ve=Te[De]=Te[De]||{},We=Y[De]=Y[De]||[];for(const Ge of Re)Ve[Ge.featureIndex]||(Ve[Ge.featureIndex]=!0,We.push(Ge))}}return Y}(K),m)}function ot(m,t){const a=m.tileID,h=t.tileID;return a.overscaledZ-h.overscaledZ||a.canonical.y-h.canonical.y||a.wrap-h.wrap||a.canonical.x-h.canonical.x}function Ut(m,t){const a=m.feature,h=t.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=h}function Ot(m,t,a){return s._(this,void 0,void 0,function*(){let h=m;if(m.url?h=(yield s.j(t.transformRequest(m.url,"Source"),a)).data:yield Q.frameAsync(a),!h)return null;const p=s.O(s.e(h,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(p.vectorLayerIds=h.vector_layers.map(y=>y.id)),p})}class Xt{constructor(t,a){t&&(a?this.setSouthWest(t).setNorthEast(a):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof s.Q?new s.Q(t.lng,t.lat):s.Q.convert(t),this}setSouthWest(t){return this._sw=t instanceof s.Q?new s.Q(t.lng,t.lat):s.Q.convert(t),this}extend(t){const a=this._sw,h=this._ne;let p,y;if(t instanceof s.Q)p=t,y=t;else{if(!(t instanceof Xt))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Xt.convert(t)):this.extend(s.Q.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(s.Q.convert(t)):this;if(p=t._sw,y=t._ne,!p||!y)return this}return a||h?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),h.lng=Math.max(y.lng,h.lng),h.lat=Math.max(y.lat,h.lat)):(this._sw=new s.Q(p.lng,p.lat),this._ne=new s.Q(y.lng,y.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:a,lat:h}=s.Q.convert(t);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(t){return t instanceof Xt?t:t&&new Xt(t)}static fromLngLat(t,a=0){const h=360*a/40075017,p=h/Math.cos(Math.PI/180*t.lat);return new Xt(new s.Q(t.lng-p,t.lat-h),new s.Q(t.lng+p,t.lat+h))}adjustAntiMeridian(){const t=new s.Q(this._sw.lng,this._sw.lat),a=new s.Q(this._ne.lng,this._ne.lat);return new Xt(t,t.lng>a.lng?new s.Q(a.lng+360,a.lat):a)}}class Ft{constructor(t,a,h){this.bounds=Xt.convert(this.validateBounds(t)),this.minzoom=a||0,this.maxzoom=h||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const a=Math.pow(2,t.z),h=Math.floor(s.U(this.bounds.getWest())*a),p=Math.floor(s.S(this.bounds.getNorth())*a),y=Math.ceil(s.U(this.bounds.getEast())*a),x=Math.ceil(s.S(this.bounds.getSouth())*a);return t.x>=h&&t.x<y&&t.y>=p&&t.y<x}}class Ue extends s.E{constructor(t,a,h,p){if(super(),this.id=t,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(a,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(s.e(this,t),t.bounds&&(this.tileBounds=new Ft(t.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new s.k(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(t){return s._(this,void 0,void 0,function*(){const a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(a,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};h.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((y,x)=>{t.reloadPromise={resolve:y,reject:x}})}else t.actor=this.dispatcher.getActor(),p="LT";t.abortController=new AbortController;try{const y=yield t.actor.sendAsync({type:p,data:h},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,y)}catch(y){if(delete t.abortController,t.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,a){if(a&&a.resourceTiming&&(t.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&t.setExpiryData(a),t.loadVectorData(a,this.map.painter),t.reloadPromise){const h=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(h.resolve).catch(h.reject)}}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class sr extends s.E{constructor(t,a,h,p){super(),this.id=t,this.dispatcher=h,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},a),s.e(this,s.O(a,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(t=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(s.e(this,a),a.bounds&&(this.tileBounds=new Ft(a.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(a){this._tileJSONRequest=null,this.fire(new s.k(a))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return s.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return s._(this,void 0,void 0,function*(){const a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const h=yield ze.getImage(this.map._requestManager.transformRequest(a,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&(h.cacheControl||h.expires)&&t.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const p=this.map.painter.context,y=p.gl,x=h.data;t.texture=this.map.painter.getTileTexture(x.width),t.texture?t.texture.update(x,{useMipmap:!0}):(t.texture=new me(p,x,y.RGBA,{useMipmap:!0}),t.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(h){if(delete t.abortController,t.aborted)t.state="unloaded";else if(h)throw t.state="errored",h}})}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class fr extends sr{constructor(t,a,h,p){super(t,a,h,p),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(t){return s._(this,void 0,void 0,function*(){const a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(a,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const p=yield ze.getImage(h,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){const y=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const x=s.b(y)&&s.V()?y:yield this.readImageNow(y),F={type:this.type,uid:t.uid,source:this.id,rawImageData:x,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const T=yield t.actor.sendAsync({type:"LDT",data:F});t.dem=T,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}})}readImageNow(t){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){const a=t.width+2,h=t.height+2;try{return new s.R({width:a,height:h},yield s.X(t,-1,-1,a,h))}catch{}}return Q.getImageData(t,1)})}_getNeighboringTiles(t){const a=t.canonical,h=Math.pow(2,a.z),p=(a.x-1+h)%h,y=a.x===0?t.wrap-1:t.wrap,x=(a.x+1+h)%h,F=a.x+1===h?t.wrap+1:t.wrap,T={};return T[new s.Y(t.overscaledZ,y,a.z,p,a.y).key]={backfilled:!1},T[new s.Y(t.overscaledZ,F,a.z,x,a.y).key]={backfilled:!1},a.y>0&&(T[new s.Y(t.overscaledZ,y,a.z,p,a.y-1).key]={backfilled:!1},T[new s.Y(t.overscaledZ,t.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},T[new s.Y(t.overscaledZ,F,a.z,x,a.y-1).key]={backfilled:!1}),a.y+1<h&&(T[new s.Y(t.overscaledZ,y,a.z,p,a.y+1).key]={backfilled:!1},T[new s.Y(t.overscaledZ,t.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},T[new s.Y(t.overscaledZ,F,a.z,x,a.y+1).key]={backfilled:!1}),T}unloadTile(t){return s._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class jt extends s.E{constructor(t,a,h,p){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(p),this._data=a.data,this._options=s.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId,a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(a.buffer!==void 0?a.buffer:128),tolerance:this._pixelsToTileUnits(a.tolerance!==void 0?a.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(a.clusterRadius||50),log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(t){return t*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return s._(this,void 0,void 0,function*(){const t=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}getCoordinatesFromGeometry(t){return t.type==="GeometryCollection"?t.geometries.map(a=>a.coordinates).flat(1/0):t.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const t=new Xt,a=yield this.getData();let h;switch(a.type){case"FeatureCollection":h=a.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":h=this.getCoordinatesFromGeometry(a.geometry);break;default:h=this.getCoordinatesFromGeometry(a)}if(h.length==0)return t;for(let p=0;p<h.length-1;p+=2)t.extend([h[p],h[p+1]]);return t})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,a,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:a,offset:h}})}_updateWorkerData(t){return s._(this,void 0,void 0,function*(){const a=s.e({type:this.type},this.workerOptions);t?a.dataDiff=t:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(Q.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let p=null;h.resourceTiming&&h.resourceTiming[this.id]&&(p=h.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&s.e(y,{resourceTiming:p}),this.fire(new s.l("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(h))}})}loaded(){return this._pendingLoads===0}loadTile(t){return s._(this,void 0,void 0,function*(){const a=t.actor?"RT":"LT";t.actor=this.actor;const h={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const p=yield this.actor.sendAsync({type:a,data:h},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(p,this.map.painter,a==="RT")})}abortTile(t){return s._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return s._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class er extends s.E{constructor(t,a,h,p){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=a}load(t){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield ze.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,t&&(this.coordinates=t),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new s.k(a))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const a=t.map(s.$.fromLngLat);var h;return this.tileID=function(p){let y=1/0,x=1/0,F=-1/0,T=-1/0;for(const G of p)y=Math.min(y,G.x),x=Math.min(x,G.y),F=Math.max(F,G.x),T=Math.max(T,G.y);const D=Math.max(F-y,T-x),O=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),K=Math.pow(2,O);return new s.a1(O,Math.floor((y+F)/2*K),Math.floor((x+T)/2*K))}(a),this.terrainTileRanges=this._getOverlappingTileRanges(a),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=a.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((h=this.tileCoords)[1].x-h[0].x)*(h[2].y-h[0].y)-(h[1].y-h[0].y)*(h[2].x-h[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,a=t.gl;this.texture||(this.texture=new me(t,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,h=!0)}h&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){let a=1/0,h=1/0,p=-1/0,y=-1/0;for(const F of t)a=Math.min(a,F.x),h=Math.min(h,F.y),p=Math.max(p,F.x),y=Math.max(y,F.y);const x={};for(let F=0;F<=s.a0;F++){const T=Math.pow(2,F),D=Math.floor(a*T),O=Math.floor(h*T),K=Math.floor(p*T),G=Math.floor(y*T);x[F]={minTileX:D,minTileY:O,maxTileX:K,maxTileY:G}}return x}}class ar extends er{constructor(t,a,h,p){super(t,a,h,p),this.roundZoom=!0,this.type="video",this.options=a}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const a of t.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield s.a2(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new s.k(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const a=this.video.seekable;t<a.start(0)||t>a.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,a=t.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new me(t,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,h=!0)}h&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class or extends er{constructor(t,a,h,p){super(t,a,h,p),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(x=>typeof x!="number"))||this.fire(new s.k(new s.a3(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${t}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${t}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,h=a.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new me(a,this.canvas,h.RGBA,{premultiply:!0});let p=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,p=!0)}p&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const wr={},kr=m=>{switch(m){case"geojson":return jt;case"image":return er;case"raster":return sr;case"raster-dem":return fr;case"vector":return Ue;case"video":return ar;case"canvas":return or}return wr[m]},Hr="RTLPluginLoaded";class Wr extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=xt()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return s._(this,arguments,void 0,function*(a,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Q.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(Hr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let on=null;function pn(){return on||(on=new Wr),on}class Pr{constructor(t,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=s.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const a=t+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,a,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(p,y){const x={};if(!y)return x;for(const F of p){const T=F.layerIds.map(D=>y.getLayer(D)).filter(Boolean);if(T.length!==0){F.layers=T,F.stateDependentLayerIds&&(F.stateDependentLayers=F.stateDependentLayerIds.map(D=>T.filter(O=>O.id===D)[0]));for(const D of T)x[D.id]=F}}return x}(t.buckets,a==null?void 0:a.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof s.a6){if(this.hasSymbolBuckets=!0,!h)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof s.a6&&y.hasRTLText){this.hasRTLText=!0,pn().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(y))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const h in this.buckets){const p=this.buckets[h];p.uploadPending()&&p.upload(t)}const a=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new me(t,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new me(t,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,a,h,p,y,x,F,T,D,O,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:y,scale:x,tileSize:this.tileSize,pixelPosMatrix:O,transform:T,params:F,queryPadding:this.queryPadding*D,getElevation:K},t,a,h):{}}querySourceFeatures(t,a){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const p=h.loadVTLayers(),y=a&&a.sourceLayer?a.sourceLayer:"",x=p._geojsonTileLayer||p[y];if(!x)return;const F=s.a7(a&&a.filter),{z:T,x:D,y:O}=this.tileID.canonical,K={z:T,x:D,y:O};for(let G=0;G<x.length;G++){const Y=x.feature(G);if(F.needGeometry){const _e=s.a8(Y,!0);if(!F.filter(new s.C(this.tileID.overscaledZ),_e,this.tileID.canonical))continue}else if(!F.filter(new s.C(this.tileID.overscaledZ),Y))continue;const ie=h.getId(Y,y),be=new s.a9(Y,T,D,O,ie);be.tile=K,t.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const a=this.expirationTime;if(t.cacheControl){const h=s.aa(t.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const h=Date.now();let p=!1;if(this.expirationTime>h)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const y=this.expirationTime-a;y?this.expirationTime=h+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!a.style.hasLayer(p))continue;const y=this.buckets[p],x=y.layers[0].sourceLayer||"_geojsonTileLayer",F=h[x],T=t[x];if(!F||!T||Object.keys(T).length===0)continue;y.update(T,F,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=a&&a.style&&a.style.getLayer(p);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=Q.now()+t}setDependencies(t,a){const h={};for(const p of a)h[p]=!0;this.dependencies[t]=h}hasDependency(t,a){for(const h of t){const p=this.dependencies[h];if(p){for(const y of a)if(p[y])return!0}}return!1}}class Zr{constructor(t,a){this.max=t,this.onRemove=a,this.reset()}reset(){for(const t in this.data)for(const a of this.data[t])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(t,a,h){const p=t.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const y={value:a,timeout:void 0};if(h!==void 0&&(y.timeout=setTimeout(()=>{this.remove(t,y)},h)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const a=this.data[t].shift();return a.timeout&&clearTimeout(a.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),a.value}getByKey(t){const a=this.data[t];return a?a[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,a){if(!this.has(t))return this;const h=t.wrapped().key,p=a===void 0?0:this.data[h].indexOf(a),y=this.data[h][p];return this.data[h].splice(p,1),y.timeout&&clearTimeout(y.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(y.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(t){const a=[];for(const h in this.data)for(const p of this.data[h])t(p.value)||a.push(p);for(const h of a)this.remove(h.value.tileID,h)}}class ur{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,a,h){const p=String(a);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][p]=this.stateChanges[t][p]||{},s.e(this.stateChanges[t][p],h),this.deletedStates[t]===null){this.deletedStates[t]={};for(const y in this.state[t])y!==p&&(this.deletedStates[t][y]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][p]===null){this.deletedStates[t][p]={};for(const y in this.state[t][p])h[y]||(this.deletedStates[t][p][y]=null)}else for(const y in h)this.deletedStates[t]&&this.deletedStates[t][p]&&this.deletedStates[t][p][y]===null&&delete this.deletedStates[t][p][y]}removeFeatureState(t,a,h){if(this.deletedStates[t]===null)return;const p=String(a);if(this.deletedStates[t]=this.deletedStates[t]||{},h&&a!==void 0)this.deletedStates[t][p]!==null&&(this.deletedStates[t][p]=this.deletedStates[t][p]||{},this.deletedStates[t][p][h]=null);else if(a!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][p])for(h in this.deletedStates[t][p]={},this.stateChanges[t][p])this.deletedStates[t][p][h]=null;else this.deletedStates[t][p]=null;else this.deletedStates[t]=null}getState(t,a){const h=String(a),p=s.e({},(this.state[t]||{})[h],(this.stateChanges[t]||{})[h]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const y=this.deletedStates[t][a];if(y===null)return{};for(const x in y)delete p[x]}return p}initializeTileState(t,a){t.setFeatureState(this.state,a)}coalesceChanges(t,a){const h={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const x in this.stateChanges[p])this.state[p][x]||(this.state[p][x]={}),s.e(this.state[p][x],this.stateChanges[p][x]),y[x]=this.state[p][x];h[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(this.deletedStates[p]===null)for(const x in this.state[p])y[x]={},this.state[p][x]={};else for(const x in this.deletedStates[p]){if(this.deletedStates[p][x]===null)this.state[p][x]={};else for(const F of Object.keys(this.deletedStates[p][x]))delete this.state[p][x][F];y[x]=this.state[p][x]}h[p]=h[p]||{},s.e(h[p],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const p in t)t[p].setFeatureState(h,a)}}const Dn=89.25;function Vr(m,t){const a=s.ae(t.lat,-85.051129,s.af);return new s.P(s.U(t.lng)*m,s.S(a)*m)}function bi(m,t){return new s.$(t.x/m,t.y/m).toLngLat()}function Xe(m){return m.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-m.pitch)),Math.tan(s.ab(Dn-m.pitch)))}function ae(m,t){const a=m.canonical,h=t/s.ac(a.z),p=a.x+Math.pow(2,a.z)*m.wrap,y=s.ad(new Float64Array(16));return s.L(y,y,[p*h,a.y*h,0]),s.M(y,y,[h/s.Z,h/s.Z,1]),y}function le(m,t,a,h,p){const y=s.$.fromLngLat(m,t),x=p*s.ag(1,m.lat),F=x*Math.cos(s.ab(a)),T=Math.sqrt(x*x-F*F),D=T*Math.sin(s.ab(-h)),O=T*Math.cos(s.ab(-h));return new s.$(y.x+D,y.y+O,y.z+F)}function fe(m,t,a){const h=t.intersectsFrustum(m);if(!a)return h;const p=t.intersectsPlane(a);return h===0||p===0?0:h===2&&p===2?2:1}function Le(m,t,a){let h=0;const p=(a-t)/10;for(let y=0;y<10;y++)h+=p*Math.pow(Math.cos(t+(y+.5)/10*(a-t)),m);return h}function He(m,t){return function(a,h,p,y,x){const F=2*((m-1)/s.ah(Math.cos(s.ab(Dn-x))/Math.cos(s.ab(Dn)))-1),T=Math.acos(p/y),D=2*Le(F-1,0,s.ab(x/2)),O=Math.min(s.ab(Dn),T+s.ab(x/2)),K=Le(F-1,Math.min(O,T-s.ab(x/2)),O),G=Math.atan(h/p),Y=Math.hypot(h,p);let ie=a;return ie+=s.ah(y/Y/Math.max(.5,Math.cos(s.ab(x/2)))),ie+=F*s.ah(Math.cos(G))/2,ie-=s.ah(Math.max(1,K/D/t))/2,ie}}const pe=He(9.314,3);function ht(m,t){const a=(t.roundZoom?Math.round:Math.floor)(m.zoom+s.ah(m.tileSize/t.tileSize));return Math.max(0,a)}function Ke(m,t){const a=m.getCameraFrustum(),h=m.getClippingPlane(),p=m.screenPointToMercatorCoordinate(m.getCameraPoint()),y=s.$.fromLngLat(m.center,m.elevation);p.z=y.z+Math.cos(m.pitchInRadians)*m.cameraToCenterDistance/m.worldSize;const x=m.getCoveringTilesDetailsProvider(),F=x.allowVariableZoom(m,t),T=ht(m,t),D=t.minzoom||0,O=t.maxzoom!==void 0?t.maxzoom:m.maxZoom,K=Math.min(Math.max(0,T),O),G=Math.pow(2,K),Y=[G*p.x,G*p.y,0],ie=[G*y.x,G*y.y,0],be=Math.hypot(y.x-p.x,y.y-p.y),_e=Math.abs(y.z-p.z),we=Math.hypot(be,_e),Te=Ve=>({zoom:0,x:0,y:0,wrap:Ve,fullyVisible:!1}),De=[],Re=[];if(m.renderWorldCopies&&x.allowWorldCopies())for(let Ve=1;Ve<=3;Ve++)De.push(Te(-Ve)),De.push(Te(Ve));for(De.push(Te(0));De.length>0;){const Ve=De.pop(),We=Ve.x,Ge=Ve.y;let ft=Ve.fullyVisible;const St={x:We,y:Ge,z:Ve.zoom},wt=x.getTileAABB(St,Ve.wrap,m.elevation,t);if(!ft){const Zt=fe(a,wt,h);if(Zt===0)continue;ft=Zt===2}const bt=x.distanceToTile2d(p.x,p.y,St,wt);let It=T;F&&(It=(t.calculateTileZoom||pe)(m.zoom+s.ah(m.tileSize/t.tileSize),bt,_e,we,m.fov)),It=(t.roundZoom?Math.round:Math.floor)(It),It=Math.max(0,It);const Yt=Math.min(It,O);if(Ve.wrap=x.getWrap(y,St,Ve.wrap),Ve.zoom>=Yt){if(Ve.zoom<D)continue;const Zt=K-Ve.zoom,Rt=Y[0]-.5-(We<<Zt),gr=Y[1]-.5-(Ge<<Zt),$r=t.reparseOverscaled?Math.max(Ve.zoom,It):Ve.zoom;Re.push({tileID:new s.Y(Ve.zoom===O?$r:Ve.zoom,Ve.wrap,Ve.zoom,We,Ge),distanceSq:s.ai([ie[0]-.5-We,ie[1]-.5-Ge]),tileDistanceToCamera:Math.sqrt(Rt*Rt+gr*gr)})}else for(let Zt=0;Zt<4;Zt++)De.push({zoom:Ve.zoom+1,x:(We<<1)+Zt%2,y:(Ge<<1)+(Zt>>1),wrap:Ve.wrap,fullyVisible:ft})}return Re.sort((Ve,We)=>Ve.distanceSq-We.distanceSq).map(Ve=>Ve.tileID)}class Ze extends s.E{constructor(t,a,h){super(),this.id=t,this.dispatcher=h,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,y,x,F)=>{const T=new(kr(y.type))(p,y,x,F);if(T.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${T.id}`);return T})(t,a,h,this),this._tiles={},this._cache=new Zr(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ur,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const a=this._tiles[t];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,a,h){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,a,h)}catch(p){t.state="errored",p.status!==404?this._source.fire(new s.k(p,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new s.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const h=this._tiles[a];h.upload(t),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(at).map(t=>t.key)}getRenderableIds(t){const a=[];for(const h in this._tiles)this._isIdRenderable(h,t)&&a.push(this._tiles[h]);return t?a.sort((h,p)=>{const y=h.tileID,x=p.tileID,F=new s.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),T=new s.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-x.overscaledZ||T.y-F.y||T.x-F.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(at).map(h=>h.key)}hasRenderableParent(t){const a=this.findLoadedParent(t,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(t,a){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(a||!this._tiles[t].holdingForFade())}reload(t){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)(t||this._tiles[a].state!=="errored")&&this._reloadTile(a,"reloading")}}_reloadTile(t,a){return s._(this,void 0,void 0,function*(){const h=this._tiles[t];h&&(h.state!=="loading"&&(h.state=a),yield this._loadTile(h,t,a))})}_tileLoaded(t,a,h){t.timeAdded=Q.now(),h==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(a,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const y=a[p];if(t.neighboringTiles&&t.neighboringTiles[y]){const x=this.getTileByID(y);h(t,x),h(x,t)}}function h(p,y){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let x=y.tileID.canonical.x-p.tileID.canonical.x;const F=y.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),D=y.tileID.key;x===0&&F===0||Math.abs(F)>1||(Math.abs(x)>1&&(Math.abs(x+T)===1?x+=T:Math.abs(x-T)===1&&(x-=T)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,x,F),p.neighboringTiles&&p.neighboringTiles[D]&&(p.neighboringTiles[D].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,a,h,p){for(const y in this._tiles){let x=this._tiles[y];if(p[y]||!x.hasData()||x.tileID.overscaledZ<=a||x.tileID.overscaledZ>h)continue;let F=x.tileID;for(;x&&x.tileID.overscaledZ>a+1;){const D=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[D.key],x&&x.hasData()&&(F=D)}let T=F;for(;T.overscaledZ>a;)if(T=T.scaledTo(T.overscaledZ-1),t[T.key]||t[T.canonical.key]){p[F.key]=F;break}}}findLoadedParent(t,a){if(t.key in this._loadedParentTiles){const h=this._loadedParentTiles[t.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=t.overscaledZ-1;h>=a;h--){const p=t.scaledTo(h),y=this._getLoadedTile(p);if(y)return y}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const a=this._tiles[t.key];return a&&a.hasData()?a:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const a=Math.ceil(t.width/this._source.tileSize)+1,h=Math.ceil(t.height/this._source.tileSize)+1,p=Math.floor(a*h*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(y)}handleWrapJump(t){const a=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,a){const h={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+a),h[y.tileID.key]=y}this._tiles=h;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(t,a,h,p,y,x){const F={},T={},D=Object.keys(t),O=Q.now();for(const K of D){const G=t[K],Y=this._tiles[K];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=O)continue;const ie=this.findLoadedParent(G,a),be=this.findLoadedSibling(G),_e=ie||be||null;_e&&(this._addTile(_e.tileID),F[_e.tileID.key]=_e.tileID),T[K]=G}this._retainLoadedChildren(T,p,h,t);for(const K in F)t[K]||(this._coveredTiles[K]=!0,t[K]=F[K]);if(x){const K={},G={};for(const Y of y)this._tiles[Y.key].hasData()?K[Y.key]=Y:G[Y.key]=Y;for(const Y in G){const ie=G[Y].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(K[ie[0].key]=t[ie[0].key]=ie[0],K[ie[1].key]=t[ie[1].key]=ie[1],K[ie[2].key]=t[ie[2].key]=ie[2],K[ie[3].key]=t[ie[3].key]=ie[3],delete G[Y])}for(const Y in G){const ie=G[Y],be=this.findLoadedParent(ie,this._source.minzoom),_e=this.findLoadedSibling(ie),we=be||_e||null;if(we){K[we.tileID.key]=t[we.tileID.key]=we.tileID;for(const Te in K)K[Te].isChildOf(we.tileID)&&delete K[Te]}}for(const Y in this._tiles)K[Y]||(this._coveredTiles[Y]=!0)}}update(t,a){if(!this._sourceLoaded||this._paused)return;let h;this.transform=t,this.terrain=a,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new s.Y(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(h=Ke(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(h=h.filter(O=>this._source.hasTile(O)))):h=[];const p=ht(t,this._source),y=Math.max(p-Ze.maxOverzooming,this._source.minzoom),x=Math.max(p+Ze.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const K of h)if(K.canonical.z>this._source.minzoom){const G=K.scaledTo(K.canonical.z-1);O[G.key]=G;const Y=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));O[Y.key]=Y}h=h.concat(Object.values(O))}const F=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,F&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=this._updateRetainedTiles(h,p);At(this._source.type)&&this._updateCoveredAndRetainedTiles(T,y,x,p,h,a);for(const O in T)this._tiles[O].clearFadeHold();const D=s.aj(this._tiles,T);for(const O of D){const K=this._tiles[O];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,a){var h;const p={},y={},x=Math.max(a-Ze.maxOverzooming,this._source.minzoom),F=Math.max(a+Ze.maxUnderzooming,this._source.minzoom),T={};for(const D of t){const O=this._addTile(D);p[D.key]=D,O.hasData()||a<this._source.maxzoom&&(T[D.key]=D)}this._retainLoadedChildren(T,a,F,p);for(const D of t){let O=this._tiles[D.key];if(O.hasData())continue;if(a+1>this._source.maxzoom){const G=D.children(this._source.maxzoom)[0],Y=this.getTile(G);if(Y&&Y.hasData()){p[G.key]=G;continue}}else{const G=D.children(this._source.maxzoom);if(p[G[0].key]&&p[G[1].key]&&p[G[2].key]&&p[G[3].key])continue}let K=O.wasRequested();for(let G=D.overscaledZ-1;G>=x;--G){const Y=D.scaledTo(G);if(y[Y.key])break;if(y[Y.key]=!0,O=this.getTile(Y),!O&&K&&(O=this._addTile(Y)),O){const ie=O.hasData();if((ie||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||K)&&(p[Y.key]=Y),K=O.wasRequested(),ie)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const a=[];let h,p=this._tiles[t].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}a.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(y),h)break;p=y}for(const y of a)this._loadedParentTiles[y]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const a=this._tiles[t].tileID,h=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=h}}_addTile(t){let a=this._tiles[t.key];if(a)return a;a=this._cache.getAndRemove(t),a&&(this._setTileReloadTimer(t.key,a),a.tileID=t,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,a)));const h=a;return a||(a=new Pr(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(a,t.key,a.state)),a.uses++,this._tiles[t.key]=a,h||this._source.fire(new s.l("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(t,a){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const h=a.getExpiryTimeout();h&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},h))}refreshTiles(t){for(const a in this._tiles)this._isIdRenderable(a)&&t.some(h=>h.equals(this._tiles[a].tileID.canonical))&&this._reloadTile(a,"expired")}_removeTile(t){const a=this._tiles[t];a&&(a.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(t){const a=t.sourceDataType;t.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&a==="content"&&(this.reload(t.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,a,h){const p=[],y=this.transform;if(!y)return p;const x=h?y.getCameraQueryGeometry(t):t,F=t.map(ie=>y.screenPointToMercatorCoordinate(ie,this.terrain)),T=x.map(ie=>y.screenPointToMercatorCoordinate(ie,this.terrain)),D=this.getIds();let O=1/0,K=1/0,G=-1/0,Y=-1/0;for(const ie of T)O=Math.min(O,ie.x),K=Math.min(K,ie.y),G=Math.max(G,ie.x),Y=Math.max(Y,ie.y);for(let ie=0;ie<D.length;ie++){const be=this._tiles[D[ie]];if(be.holdingForFade())continue;const _e=y.getCoveringTilesDetailsProvider().allowWorldCopies()?be.tileID:be.tileID.unwrapTo(0),we=Math.pow(2,y.zoom-be.tileID.overscaledZ),Te=a*be.queryPadding*s.Z/be.tileSize/we,De=[_e.getTilePoint(new s.$(O,K)),_e.getTilePoint(new s.$(G,Y))];if(De[0].x-Te<s.Z&&De[0].y-Te<s.Z&&De[1].x+Te>=0&&De[1].y+Te>=0){const Re=F.map(We=>_e.getTilePoint(We)),Ve=T.map(We=>_e.getTilePoint(We));p.push({tile:be,tileID:_e,queryGeometry:Re,cameraQueryGeometry:Ve,scale:we})}}return p}getVisibleCoordinates(t){const a=this.getRenderableIds(t).map(h=>this._tiles[h].tileID);return this.transform&&this.transform.populateCache(a),a}hasTransition(){if(this._source.hasTransition())return!0;if(At(this._source.type)){const t=Q.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=t)return!0}return!1}setFeatureState(t,a,h){this._state.updateState(t=t||"_geojsonTileLayer",a,h)}removeFeatureState(t,a,h){this._state.removeFeatureState(t=t||"_geojsonTileLayer",a,h)}getFeatureState(t,a){return this._state.getState(t=t||"_geojsonTileLayer",a)}setDependencies(t,a,h){const p=this._tiles[t];p&&p.setDependencies(a,h)}reloadTilesForDependencies(t,a){for(const h in this._tiles)this._tiles[h].hasDependency(t,a)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(t,a))}}function at(m,t){const a=Math.abs(2*m.wrap)-+(m.wrap<0),h=Math.abs(2*t.wrap)-+(t.wrap<0);return m.overscaledZ-t.overscaledZ||h-a||t.canonical.y-m.canonical.y||t.canonical.x-m.canonical.x}function At(m){return m==="raster"||m==="image"||m==="video"}Ze.maxOverzooming=10,Ze.maxUnderzooming=3;class Lt{constructor(t,a){this.reset(t,a)}reset(t,a){this.points=t||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=s.ae(t,0,1);let a=1,h=this._distances[a];const p=t*this.paddedLength+this.padding;for(;h<p&&a<this._distances.length;)h=this._distances[++a];const y=a-1,x=this._distances[y],F=h-x,T=F>0?(p-x)/F:0;return this.points[y].mult(1-T).add(this.points[a].mult(T))}}function $t(m,t){let a=!0;return m==="always"||m!=="never"&&t!=="never"||(a=!1),a}class Jt{constructor(t,a,h){const p=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(t/h),this.yCellCount=Math.ceil(a/h);for(let x=0;x<this.xCellCount*this.yCellCount;x++)p.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=a,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,a,h,p,y){this._forEachCell(a,h,p,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(y)}insertCircle(t,a,h,p){this._forEachCell(a-p,h-p,a+p,h+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(a),this.circles.push(h),this.circles.push(p)}_insertBoxCell(t,a,h,p,y,x){this.boxCells[y].push(x)}_insertCircleCell(t,a,h,p,y,x){this.circleCells[y].push(x)}_query(t,a,h,p,y,x,F){if(h<0||t>this.width||p<0||a>this.height)return[];const T=[];if(t<=0&&a<=0&&this.width<=h&&this.height<=p){if(y)return[{key:null,x1:t,y1:a,x2:h,y2:p}];for(let D=0;D<this.boxKeys.length;D++)T.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const O=this.circles[3*D],K=this.circles[3*D+1],G=this.circles[3*D+2];T.push({key:this.circleKeys[D],x1:O-G,y1:K-G,x2:O+G,y2:K+G})}}else this._forEachCell(t,a,h,p,this._queryCell,T,{hitTest:y,overlapMode:x,seenUids:{box:{},circle:{}}},F);return T}query(t,a,h,p){return this._query(t,a,h,p,!1,null)}hitTest(t,a,h,p,y,x){return this._query(t,a,h,p,!0,y,x).length>0}hitTestCircle(t,a,h,p,y){const x=t-h,F=t+h,T=a-h,D=a+h;if(F<0||x>this.width||D<0||T>this.height)return!1;const O=[];return this._forEachCell(x,T,F,D,this._queryCellCircle,O,{hitTest:!0,overlapMode:p,circle:{x:t,y:a,radius:h},seenUids:{box:{},circle:{}}},y),O.length>0}_queryCell(t,a,h,p,y,x,F,T){const{seenUids:D,hitTest:O,overlapMode:K}=F,G=this.boxCells[y];if(G!==null){const ie=this.bboxes;for(const be of G)if(!D.box[be]){D.box[be]=!0;const _e=4*be,we=this.boxKeys[be];if(t<=ie[_e+2]&&a<=ie[_e+3]&&h>=ie[_e+0]&&p>=ie[_e+1]&&(!T||T(we))&&(!O||!$t(K,we.overlapMode))&&(x.push({key:we,x1:ie[_e],y1:ie[_e+1],x2:ie[_e+2],y2:ie[_e+3]}),O))return!0}}const Y=this.circleCells[y];if(Y!==null){const ie=this.circles;for(const be of Y)if(!D.circle[be]){D.circle[be]=!0;const _e=3*be,we=this.circleKeys[be];if(this._circleAndRectCollide(ie[_e],ie[_e+1],ie[_e+2],t,a,h,p)&&(!T||T(we))&&(!O||!$t(K,we.overlapMode))){const Te=ie[_e],De=ie[_e+1],Re=ie[_e+2];if(x.push({key:we,x1:Te-Re,y1:De-Re,x2:Te+Re,y2:De+Re}),O)return!0}}}return!1}_queryCellCircle(t,a,h,p,y,x,F,T){const{circle:D,seenUids:O,overlapMode:K}=F,G=this.boxCells[y];if(G!==null){const ie=this.bboxes;for(const be of G)if(!O.box[be]){O.box[be]=!0;const _e=4*be,we=this.boxKeys[be];if(this._circleAndRectCollide(D.x,D.y,D.radius,ie[_e+0],ie[_e+1],ie[_e+2],ie[_e+3])&&(!T||T(we))&&!$t(K,we.overlapMode))return x.push(!0),!0}}const Y=this.circleCells[y];if(Y!==null){const ie=this.circles;for(const be of Y)if(!O.circle[be]){O.circle[be]=!0;const _e=3*be,we=this.circleKeys[be];if(this._circlesCollide(ie[_e],ie[_e+1],ie[_e+2],D.x,D.y,D.radius)&&(!T||T(we))&&!$t(K,we.overlapMode))return x.push(!0),!0}}}_forEachCell(t,a,h,p,y,x,F,T){const D=this._convertToXCellCoord(t),O=this._convertToYCellCoord(a),K=this._convertToXCellCoord(h),G=this._convertToYCellCoord(p);for(let Y=D;Y<=K;Y++)for(let ie=O;ie<=G;ie++)if(y.call(this,t,a,h,p,this.xCellCount*ie+Y,x,F,T))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,a,h,p,y,x){const F=p-t,T=y-a,D=h+x;return D*D>F*F+T*T}_circleAndRectCollide(t,a,h,p,y,x,F){const T=(x-p)/2,D=Math.abs(t-(p+T));if(D>T+h)return!1;const O=(F-y)/2,K=Math.abs(a-(y+O));if(K>O+h)return!1;if(D<=T||K<=O)return!0;const G=D-T,Y=K-O;return G*G+Y*Y<=h*h}}function Vt(m,t,a){const h=s.K();if(!m){const{vecSouth:K,vecEast:G}=xr(t),Y=C();Y[0]=G[0],Y[1]=G[1],Y[2]=K[0],Y[3]=K[1],p=Y,(O=(x=(y=Y)[0])*(D=y[3])-(T=y[2])*(F=y[1]))&&(p[0]=D*(O=1/O),p[1]=-F*O,p[2]=-T*O,p[3]=x*O),h[0]=Y[0],h[1]=Y[1],h[4]=Y[2],h[5]=Y[3]}var p,y,x,F,T,D,O;return s.M(h,h,[1/a,1/a,1]),h}function Sr(m,t,a,h){if(m){const p=s.K();if(!t){const{vecSouth:y,vecEast:x}=xr(a);p[0]=x[0],p[1]=x[1],p[4]=y[0],p[5]=y[1]}return s.M(p,p,[h,h,1]),p}return a.pixelsToClipSpaceMatrix}function xr(m){const t=Math.cos(m.rollInRadians),a=Math.sin(m.rollInRadians),h=Math.cos(m.pitchInRadians),p=Math.cos(m.bearingInRadians),y=Math.sin(m.bearingInRadians),x=s.ao();x[0]=-p*h*a-y*t,x[1]=-y*h*a+p*t;const F=s.ap(x);F<1e-9?s.aq(x):s.ar(x,x,1/F);const T=s.ao();T[0]=p*h*t-y*a,T[1]=y*h*t+p*a;const D=s.ap(T);return D<1e-9?s.aq(T):s.ar(T,T,1/D),{vecEast:T,vecSouth:x}}function _t(m,t,a,h){let p;h?(p=[m,t,h(m,t),1],s.at(p,p,a)):(p=[m,t,0,1],Ks(p,p,a));const y=p[3];return{point:new s.P(p[0]/y,p[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function Nr(m,t){return .5+m/t*.5}function Fr(m,t){return m.x>=-t[0]&&m.x<=t[0]&&m.y>=-t[1]&&m.y<=t[1]}function jr(m,t,a,h,p,y,x,F,T,D,O,K,G){const Y=a?m.textSizeData:m.iconSizeData,ie=s.ak(Y,t.transform.zoom),be=[256/t.width*2+1,256/t.height*2+1],_e=a?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;_e.clear();const we=m.lineVertexArray,Te=a?m.text.placedSymbolArray:m.icon.placedSymbolArray,De=t.transform.width/t.transform.height;let Re=!1;for(let Ve=0;Ve<Te.length;Ve++){const We=Te.get(Ve);if(We.hidden||We.writingMode===s.al.vertical&&!Re){Pa(We.numGlyphs,_e);continue}Re=!1;const Ge=new s.P(We.anchorX,We.anchorY),ft={getElevation:G,pitchedLabelPlaneMatrix:h,lineVertexArray:we,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:Ge,unwrappedTileID:T,width:D,height:O,translation:K},St=Ur(We.anchorX,We.anchorY,ft);if(!Fr(St.point,be)){Pa(We.numGlyphs,_e);continue}const wt=Nr(t.transform.cameraToCenterDistance,St.signedDistanceFromCamera),bt=s.am(Y,ie,We),It=y?bt*t.transform.getPitchedTextCorrection(We.anchorX,We.anchorY,T)/wt:bt*wt,Yt=yr({projectionContext:ft,pitchedLabelPlaneMatrixInverse:p,symbol:We,fontSize:It,flip:!1,keepUpright:x,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:De,rotateToLine:F});Re=Yt.useVertical,(Yt.notEnoughRoom||Re||Yt.needsFlipping&&yr({projectionContext:ft,pitchedLabelPlaneMatrixInverse:p,symbol:We,fontSize:It,flip:!0,keepUpright:x,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:De,rotateToLine:F}).notEnoughRoom)&&Pa(We.numGlyphs,_e)}a?m.text.dynamicLayoutVertexBuffer.updateData(_e):m.icon.dynamicLayoutVertexBuffer.updateData(_e)}function Cr(m,t,a,h,p,y,x,F){const T=y.glyphStartIndex+y.numGlyphs,D=y.lineStartIndex,O=y.lineStartIndex+y.lineLength,K=t.getoffsetX(y.glyphStartIndex),G=t.getoffsetX(T-1),Y=ss(m*K,a,h,p,y.segment,D,O,F,x);if(!Y)return null;const ie=ss(m*G,a,h,p,y.segment,D,O,F,x);return ie?F.projectionCache.anyProjectionOccluded?null:{first:Y,last:ie}:null}function kt(m,t,a,h){return m===s.al.horizontal&&Math.abs(a.y-t.y)>Math.abs(a.x-t.x)*h?{useVertical:!0}:(m===s.al.vertical?t.y<a.y:t.x>a.x)?{needsFlipping:!0}:null}function yr(m){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:a,symbol:h,fontSize:p,flip:y,keepUpright:x,glyphOffsetArray:F,dynamicLayoutVertexArray:T,aspectRatio:D,rotateToLine:O}=m,K=p/24,G=h.lineOffsetX*K,Y=h.lineOffsetY*K;let ie;if(h.numGlyphs>1){const be=h.glyphStartIndex+h.numGlyphs,_e=h.lineStartIndex,we=h.lineStartIndex+h.lineLength,Te=Cr(K,F,G,Y,y,h,O,t);if(!Te)return{notEnoughRoom:!0};const De=Hn(Te.first.point.x,Te.first.point.y,t,a),Re=Hn(Te.last.point.x,Te.last.point.y,t,a);if(x&&!y){const Ve=kt(h.writingMode,De,Re,D);if(Ve)return Ve}ie=[Te.first];for(let Ve=h.glyphStartIndex+1;Ve<be-1;Ve++)ie.push(ss(K*F.getoffsetX(Ve),G,Y,y,h.segment,_e,we,t,O));ie.push(Te.last)}else{if(x&&!y){const _e=vn(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,we=h.lineStartIndex+h.segment+1,Te=new s.P(t.lineVertexArray.getx(we),t.lineVertexArray.gety(we)),De=vn(Te.x,Te.y,t),Re=De.signedDistanceFromCamera>0?De.point:Tr(t.tileAnchorPoint,Te,_e,1,t),Ve=Hn(_e.x,_e.y,t,a),We=Hn(Re.x,Re.y,t,a),Ge=kt(h.writingMode,Ve,We,D);if(Ge)return Ge}const be=ss(K*F.getoffsetX(h.glyphStartIndex),G,Y,y,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,t,O);if(!be||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[be]}for(const be of ie)s.as(T,be.point,be.angle);return{}}function Tr(m,t,a,h,p){const y=m.add(m.sub(t)._unit()),x=vn(y.x,y.y,p).point,F=a.sub(x);return a.add(F._mult(h/F.mag()))}function yn(m,t,a){const h=t.projectionCache;if(h.projections[m])return h.projections[m];const p=new s.P(t.lineVertexArray.getx(m),t.lineVertexArray.gety(m)),y=vn(p.x,p.y,t);if(y.signedDistanceFromCamera>0)return h.projections[m]=y.point,h.anyProjectionOccluded=h.anyProjectionOccluded||y.isOccluded,y.point;const x=m-a.direction;return Tr(a.distanceFromAnchor===0?t.tileAnchorPoint:new s.P(t.lineVertexArray.getx(x),t.lineVertexArray.gety(x)),p,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,t)}function vn(m,t,a){const h=m+a.translation[0],p=t+a.translation[1];let y;return a.pitchWithMap?(y=_t(h,p,a.pitchedLabelPlaneMatrix,a.getElevation),y.isOccluded=!1):(y=a.transform.projectTileCoordinates(h,p,a.unwrappedTileID,a.getElevation),y.point.x=(.5*y.point.x+.5)*a.width,y.point.y=(.5*-y.point.y+.5)*a.height),y}function Hn(m,t,a,h){if(a.pitchWithMap){const p=[m,t,0,1];return s.at(p,p,h),a.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],a.unwrappedTileID,a.getElevation).point}return{x:m/a.width*2-1,y:t/a.height*2-1}}function Ur(m,t,a){return a.transform.projectTileCoordinates(m,t,a.unwrappedTileID,a.getElevation)}function as(m,t,a){return m._unit()._perp()._mult(t*a)}function Vs(m,t,a,h,p,y,x,F,T){if(F.projectionCache.offsets[m])return F.projectionCache.offsets[m];const D=a.add(t);if(m+T.direction<h||m+T.direction>=p)return F.projectionCache.offsets[m]=D,D;const O=yn(m+T.direction,F,T),K=as(O.sub(a),x,T.direction),G=a.add(K),Y=O.add(K);return F.projectionCache.offsets[m]=s.au(y,D,G,Y)||D,F.projectionCache.offsets[m]}function ss(m,t,a,h,p,y,x,F,T){const D=h?m-t:m+t;let O=D>0?1:-1,K=0;h&&(O*=-1,K=Math.PI),O<0&&(K+=Math.PI);let G,Y=O>0?y+p:y+p+1;F.projectionCache.cachedAnchorPoint?G=F.projectionCache.cachedAnchorPoint:(G=vn(F.tileAnchorPoint.x,F.tileAnchorPoint.y,F).point,F.projectionCache.cachedAnchorPoint=G);let ie,be,_e=G,we=G,Te=0,De=0;const Re=Math.abs(D),Ve=[];let We;for(;Te+De<=Re;){if(Y+=O,Y<y||Y>=x)return null;Te+=De,we=_e,be=ie;const St={absOffsetX:Re,direction:O,distanceFromAnchor:Te,previousVertex:we};if(_e=yn(Y,F,St),a===0)Ve.push(we),We=_e.sub(we);else{let wt;const bt=_e.sub(we);wt=bt.mag()===0?as(yn(Y+O,F,St).sub(_e),a,O):as(bt,a,O),be||(be=we.add(wt)),ie=Vs(Y,wt,_e,y,x,be,a,F,St),Ve.push(be),We=ie.sub(be)}De=We.mag()}const Ge=We._mult((Re-Te)/De)._add(be||we),ft=K+Math.atan2(_e.y-we.y,_e.x-we.x);return Ve.push(Ge),{point:Ge,angle:T?ft:0,path:Ve}}const Gs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pa(m,t){for(let a=0;a<m;a++){const h=t.length;t.resize(h+4),t.float32.set(Gs,3*h)}}function Ks(m,t,a){const h=t[0],p=t[1];return m[0]=a[0]*h+a[4]*p+a[12],m[1]=a[1]*h+a[5]*p+a[13],m[3]=a[3]*h+a[7]*p+a[15],m}const ti=100;class ba{constructor(t,a=new Jt(t.width+200,t.height+200,25),h=new Jt(t.width+200,t.height+200,25)){this.transform=t,this.grid=a,this.ignoredGrid=h,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ti,this.screenBottomBoundary=t.height+ti,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,a,h,p,y,x,F,T,D,O,K,G){const Y=this.projectAndGetPerspectiveRatio(t.anchorPointX+T[0],t.anchorPointY+T[1],y,O,G),ie=h*Y.perspectiveRatio;let be;if(x||F)be=this._projectCollisionBox(t,ie,p,y,x,F,T,Y,O,K,G);else{const We=Y.x+(K?K.x*ie:0),Ge=Y.y+(K?K.y*ie:0);be={allPointsOccluded:!1,box:[We+t.x1*ie,Ge+t.y1*ie,We+t.x2*ie,Ge+t.y2*ie]}}const[_e,we,Te,De]=be.box,Re=x?be.allPointsOccluded:Y.isOccluded;let Ve=Re;return Ve||(Ve=Y.perspectiveRatio<this.perspectiveRatioCutoff),Ve||(Ve=!this.isInsideGrid(_e,we,Te,De)),Ve||a!=="always"&&this.grid.hitTest(_e,we,Te,De,a,D)?{box:[_e,we,Te,De],placeable:!1,offscreen:!1,occluded:Re}:{box:[_e,we,Te,De],placeable:!0,offscreen:this.isOffscreen(_e,we,Te,De),occluded:Re}}placeCollisionCircles(t,a,h,p,y,x,F,T,D,O,K,G,Y,ie){const be=[],_e=new s.P(a.anchorX,a.anchorY),we=this.getPerspectiveRatio(_e.x,_e.y,x,ie),Te=(D?y*this.transform.getPitchedTextCorrection(a.anchorX,a.anchorY,x)/we:y*we)/s.ay,De={getElevation:ie,pitchedLabelPlaneMatrix:F,lineVertexArray:h,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:_e,unwrappedTileID:x,width:this.transform.width,height:this.transform.height,translation:Y},Re=Cr(Te,p,a.lineOffsetX*Te,a.lineOffsetY*Te,!1,a,!1,De);let Ve=!1,We=!1,Ge=!0;if(Re){const ft=.5*K*we+G,St=new s.P(-100,-100),wt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),bt=new Lt,It=Re.first,Yt=Re.last;let Zt=[];for(let $r=It.path.length-1;$r>=1;$r--)Zt.push(It.path[$r]);for(let $r=1;$r<Yt.path.length;$r++)Zt.push(Yt.path[$r]);const Rt=2.5*ft;if(D){const $r=this.projectPathToScreenSpace(Zt,De);Zt=$r.some(an=>an.signedDistanceFromCamera<=0)?[]:$r.map(an=>an.point)}let gr=[];if(Zt.length>0){const $r=Zt[0].clone(),an=Zt[0].clone();for(let Ln=1;Ln<Zt.length;Ln++)$r.x=Math.min($r.x,Zt[Ln].x),$r.y=Math.min($r.y,Zt[Ln].y),an.x=Math.max(an.x,Zt[Ln].x),an.y=Math.max(an.y,Zt[Ln].y);gr=$r.x>=St.x&&an.x<=wt.x&&$r.y>=St.y&&an.y<=wt.y?[Zt]:an.x<St.x||$r.x>wt.x||an.y<St.y||$r.y>wt.y?[]:s.av([Zt],St.x,St.y,wt.x,wt.y)}for(const $r of gr){bt.reset($r,.25*ft);let an=0;an=bt.length<=.5*ft?1:Math.ceil(bt.paddedLength/Rt)+1;for(let Ln=0;Ln<an;Ln++){const kn=Ln/Math.max(an-1,1),qn=bt.lerp(kn),Wn=qn.x+ti,Qn=qn.y+ti;be.push(Wn,Qn,ft,0);const _n=Wn-ft,ai=Qn-ft,Ii=Wn+ft,Fi=Qn+ft;if(Ge=Ge&&this.isOffscreen(_n,ai,Ii,Fi),We=We||this.isInsideGrid(_n,ai,Ii,Fi),t!=="always"&&this.grid.hitTestCircle(Wn,Qn,ft,t,O)&&(Ve=!0,!T))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!T&&Ve||!We||we<this.perspectiveRatioCutoff?[]:be,offscreen:Ge,collisionDetected:Ve}}projectPathToScreenSpace(t,a){const h=function(p,y){const x=s.K();return s.an(x,y.pitchedLabelPlaneMatrix),p.map(F=>{const T=_t(F.x,F.y,x,y.getElevation),D=y.transform.projectTileCoordinates(T.point.x,T.point.y,y.unwrappedTileID,y.getElevation);return D.point.x=(.5*D.point.x+.5)*y.width,D.point.y=(.5*-D.point.y+.5)*y.height,D})}(t,a);return function(p){let y=0,x=0,F=0,T=0;for(let D=0;D<p.length;D++)p[D].isOccluded?(F=D+1,T=0):(T++,T>x&&(x=T,y=F));return p.slice(y,y+x)}(h)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let h=1/0,p=1/0,y=-1/0,x=-1/0;for(const O of t){const K=new s.P(O.x+ti,O.y+ti);h=Math.min(h,K.x),p=Math.min(p,K.y),y=Math.max(y,K.x),x=Math.max(x,K.y),a.push(K)}const F=this.grid.query(h,p,y,x).concat(this.ignoredGrid.query(h,p,y,x)),T={},D={};for(const O of F){const K=O.key;if(T[K.bucketInstanceId]===void 0&&(T[K.bucketInstanceId]={}),T[K.bucketInstanceId][K.featureIndex])continue;const G=[new s.P(O.x1,O.y1),new s.P(O.x2,O.y1),new s.P(O.x2,O.y2),new s.P(O.x1,O.y2)];s.aw(a,G)&&(T[K.bucketInstanceId][K.featureIndex]=!0,D[K.bucketInstanceId]===void 0&&(D[K.bucketInstanceId]=[]),D[K.bucketInstanceId].push(K.featureIndex))}return D}insertCollisionBox(t,a,h,p,y,x){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:y,collisionGroupID:x,overlapMode:a},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,a,h,p,y,x){const F=h?this.ignoredGrid:this.grid,T={bucketInstanceId:p,featureIndex:y,collisionGroupID:x,overlapMode:a};for(let D=0;D<t.length;D+=4)F.insertCircle(T,t[D],t[D+1],t[D+2])}projectAndGetPerspectiveRatio(t,a,h,p,y){if(y){let x;p?(x=[t,a,p(t,a),1],s.at(x,x,y)):(x=[t,a,0,1],Ks(x,x,y));const F=x[3];return{x:(x[0]/F+1)/2*this.transform.width+ti,y:(-x[1]/F+1)/2*this.transform.height+ti,perspectiveRatio:.5+this.transform.cameraToCenterDistance/F*.5,isOccluded:!1,signedDistanceFromCamera:F}}{const x=this.transform.projectTileCoordinates(t,a,h,p);return{x:(x.point.x+1)/2*this.transform.width+ti,y:(1-x.point.y)/2*this.transform.height+ti,perspectiveRatio:.5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5,isOccluded:x.isOccluded,signedDistanceFromCamera:x.signedDistanceFromCamera}}}getPerspectiveRatio(t,a,h,p){const y=this.transform.projectTileCoordinates(t,a,h,p);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(t,a,h,p){return h<ti||t>=this.screenRightBoundary||p<ti||a>this.screenBottomBoundary}isInsideGrid(t,a,h,p){return h>=0&&t<this.gridRightBoundary&&p>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const t=s.ad([]);return s.L(t,t,[-100,-100,0]),t}_projectCollisionBox(t,a,h,p,y,x,F,T,D,O,K){let G=1,Y=0,ie=0,be=1;const _e=t.anchorPointX+F[0],we=t.anchorPointY+F[1];if(x&&!y){const Zt=this.projectAndGetPerspectiveRatio(_e+1,we,p,D,K),Rt=Zt.x-T.x,gr=Math.atan((Zt.y-T.y)/Rt)+(Rt<0?Math.PI:0),$r=Math.sin(gr),an=Math.cos(gr);G=an,Y=$r,ie=-$r,be=an}else if(!x&&y){const Zt=xr(this.transform);G=Zt.vecEast[0],Y=Zt.vecEast[1],ie=Zt.vecSouth[0],be=Zt.vecSouth[1]}let Te=T.x,De=T.y,Re=a;y&&(Te=_e,De=we,Re=Math.pow(2,-(this.transform.zoom-h.overscaledZ)),Re*=this.transform.getPitchedTextCorrection(_e,we,p),O||(Re*=s.ae(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(Te+=G*O.x*Re+ie*O.y*Re,De+=Y*O.x*Re+be*O.y*Re);const Ve=t.x1*Re,We=t.x2*Re,Ge=(Ve+We)/2,ft=t.y1*Re,St=t.y2*Re,wt=(ft+St)/2,bt=[{offsetX:Ve,offsetY:ft},{offsetX:Ge,offsetY:ft},{offsetX:We,offsetY:ft},{offsetX:We,offsetY:wt},{offsetX:We,offsetY:St},{offsetX:Ge,offsetY:St},{offsetX:Ve,offsetY:St},{offsetX:Ve,offsetY:wt}];let It=[];for(const{offsetX:Zt,offsetY:Rt}of bt)It.push(new s.P(Te+G*Zt+ie*Rt,De+Y*Zt+be*Rt));let Yt=!1;if(y){const Zt=It.map(Rt=>this.projectAndGetPerspectiveRatio(Rt.x,Rt.y,p,D,K));Yt=Zt.some(Rt=>!Rt.isOccluded),It=Zt.map(Rt=>new s.P(Rt.x,Rt.y))}else Yt=!0;return{box:s.ax(It),allPointsOccluded:!Yt}}}class In{constructor(t,a,h,p){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?a:-a))):p&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class Qo{constructor(t,a,h,p,y){this.text=new In(t?t.text:null,a,h,y),this.icon=new In(t?t.icon:null,a,p,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Do{constructor(t,a,h){this.text=t,this.icon=a,this.skipFade=h}}class sA{constructor(t,a,h,p,y){this.bucketInstanceId=t,this.featureIndex=a,this.sourceLayerIndex=h,this.bucketIndex=p,this.tileID=y}}class co{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const a=++this.maxGroupID;this.collisionGroups[t]={ID:a,predicate:h=>h.collisionGroupID===a}}return this.collisionGroups[t]}}function os(m,t,a,h,p){const{horizontalAlign:y,verticalAlign:x}=s.aE(m);return new s.P(-(y-.5)*t+h[0]*p,-(x-.5)*a+h[1]*p)}class rc{constructor(t,a,h,p,y){this.transform=t.clone(),this.terrain=a,this.collisionIndex=new ba(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new co(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const a=this.terrain;return a?(h,p)=>a.getElevation(t,h,p):null}getBucketParts(t,a,h,p){const y=h.getBucket(a),x=h.latestFeatureIndex;if(!y||!x||a.id!==y.layerIds[0])return;const F=h.collisionBoxArray,T=y.layers[0].layout,D=y.layers[0].paint,O=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),K=h.tileSize/s.Z,G=h.tileID.toUnwrapped(),Y=T.get("text-rotation-alignment")==="map",ie=s.az(h,1,this.transform.zoom),be=s.aA(this.collisionIndex.transform,h,D.get("text-translate"),D.get("text-translate-anchor")),_e=s.aA(this.collisionIndex.transform,h,D.get("icon-translate"),D.get("icon-translate-anchor")),we=Vt(Y,this.transform,ie);this.retainedQueryData[y.bucketInstanceId]=new sA(y.bucketInstanceId,x,y.sourceLayerIndex,y.index,h.tileID);const Te={bucket:y,layout:T,translationText:be,translationIcon:_e,unwrappedTileID:G,pitchedLabelPlaneMatrix:we,scale:O,textPixelRatio:K,holdingForFade:h.holdingForFade(),collisionBoxArray:F,partiallyEvaluatedTextSize:s.ak(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(p)for(const De of y.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:Ve,symbolInstanceEnd:We}=De;t.push({sortKey:Re,symbolInstanceStart:Ve,symbolInstanceEnd:We,parameters:Te})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Te})}attemptAnchorPlacement(t,a,h,p,y,x,F,T,D,O,K,G,Y,ie,be,_e,we,Te,De,Re){const Ve=s.aB[t.textAnchor],We=[t.textOffset0,t.textOffset1],Ge=os(Ve,h,p,We,y),ft=this.collisionIndex.placeCollisionBox(a,G,T,D,O,F,x,_e,K.predicate,De,Ge,Re);if((!Te||this.collisionIndex.placeCollisionBox(Te,G,T,D,O,F,x,we,K.predicate,De,Ge,Re).placeable)&&ft.placeable){let St;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(St=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:We,width:h,height:p,anchor:Ve,textBoxScale:y,prevAnchor:St},this.markUsedJustification(ie,Ve,Y,be),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,be,Y),this.placedOrientations[Y.crossTileID]=be),{shift:Ge,placedGlyphBoxes:ft}}}placeLayerBucketPart(t,a,h){const{bucket:p,layout:y,translationText:x,translationIcon:F,unwrappedTileID:T,pitchedLabelPlaneMatrix:D,textPixelRatio:O,holdingForFade:K,collisionBoxArray:G,partiallyEvaluatedTextSize:Y,collisionGroup:ie}=t.parameters,be=y.get("text-optional"),_e=y.get("icon-optional"),we=s.aC(y,"text-overlap","text-allow-overlap"),Te=we==="always",De=s.aC(y,"icon-overlap","icon-allow-overlap"),Re=De==="always",Ve=y.get("text-rotation-alignment")==="map",We=y.get("text-pitch-alignment")==="map",Ge=y.get("icon-text-fit")!=="none",ft=y.get("symbol-z-order")==="viewport-y",St=Te&&(Re||!p.hasIconData()||_e),wt=Re&&(Te||!p.hasTextData()||be);!p.collisionArrays&&G&&p.deserializeCollisionBoxes(G);const bt=this.retainedQueryData[p.bucketInstanceId].tileID,It=this._getTerrainElevationFunc(bt),Yt=this.transform.getFastPathSimpleProjectionMatrix(bt),Zt=(Rt,gr,$r)=>{var an,Ln;if(a[Rt.crossTileID])return;if(K)return void(this.placements[Rt.crossTileID]=new Do(!1,!1,!1));let kn=!1,qn=!1,Wn=!0,Qn=null,_n={box:null,placeable:!1,offscreen:null,occluded:!1},ai={placeable:!1},Ii=null,Fi=null,en=null,Ia=0,Zi=0,Qs=0;gr.textFeatureIndex?Ia=gr.textFeatureIndex:Rt.useRuntimeCollisionCircles&&(Ia=Rt.featureIndex),gr.verticalTextFeatureIndex&&(Zi=gr.verticalTextFeatureIndex);const Co=gr.textBox;if(Co){const Fa=Oi=>{let zi=s.al.horizontal;if(p.allowVerticalPlacement&&!Oi&&this.prevPlacement){const Ya=this.prevPlacement.placedOrientations[Rt.crossTileID];Ya&&(this.placedOrientations[Rt.crossTileID]=Ya,zi=Ya,this.markUsedOrientation(p,zi,Rt))}return zi},Al=(Oi,zi)=>{if(p.allowVerticalPlacement&&Rt.numVerticalGlyphVertices>0&&gr.verticalTextBox){for(const Ya of p.writingModes)if(Ya===s.al.vertical?(_n=zi(),ai=_n):_n=Oi(),_n&&_n.placeable)break}else _n=Oi()},vA=Rt.textAnchorOffsetStartIndex,ll=Rt.textAnchorOffsetEndIndex;if(ll===vA){const Oi=(zi,Ya)=>{const Xn=this.collisionIndex.placeCollisionBox(zi,we,O,bt,T,We,Ve,x,ie.predicate,It,void 0,Yt);return Xn&&Xn.placeable&&(this.markUsedOrientation(p,Ya,Rt),this.placedOrientations[Rt.crossTileID]=Ya),Xn};Al(()=>Oi(Co,s.al.horizontal),()=>{const zi=gr.verticalTextBox;return p.allowVerticalPlacement&&Rt.numVerticalGlyphVertices>0&&zi?Oi(zi,s.al.vertical):{box:null,offscreen:null}}),Fa(_n&&_n.placeable)}else{let Oi=s.aB[(Ln=(an=this.prevPlacement)===null||an===void 0?void 0:an.variableOffsets[Rt.crossTileID])===null||Ln===void 0?void 0:Ln.anchor];const zi=(Xn,Lu,Of)=>{const zf=Xn.x2-Xn.x1,Jp=Xn.y2-Xn.y1,Uh=Rt.textBoxScale,qc=Ge&&De==="never"?Lu:null;let io=null,Xo=we==="never"?1:2,ao="never";Oi&&Xo++;for(let wA=0;wA<Xo;wA++){for(let Pu=vA;Pu<ll;Pu++){const cl=p.textAnchorOffsets.get(Pu);if(Oi&&cl.textAnchor!==Oi)continue;const kh=this.attemptAnchorPlacement(cl,Xn,zf,Jp,Uh,Ve,We,O,bt,T,ie,ao,Rt,p,Of,x,F,qc,It);if(kh&&(io=kh.placedGlyphBoxes,io&&io.placeable))return kn=!0,Qn=kh.shift,io}Oi?Oi=null:ao=we}return h&&!io&&(io={box:this.collisionIndex.placeCollisionBox(Co,"always",O,bt,T,We,Ve,x,ie.predicate,It,void 0,Yt).box,offscreen:!1,placeable:!1,occluded:!1}),io};Al(()=>zi(Co,gr.iconBox,s.al.horizontal),()=>{const Xn=gr.verticalTextBox;return p.allowVerticalPlacement&&(!_n||!_n.placeable)&&Rt.numVerticalGlyphVertices>0&&Xn?zi(Xn,gr.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),_n&&(kn=_n.placeable,Wn=_n.offscreen);const Ya=Fa(_n&&_n.placeable);if(!kn&&this.prevPlacement){const Xn=this.prevPlacement.variableOffsets[Rt.crossTileID];Xn&&(this.variableOffsets[Rt.crossTileID]=Xn,this.markUsedJustification(p,Xn.anchor,Rt,Ya))}}}if(Ii=_n,kn=Ii&&Ii.placeable,Wn=Ii&&Ii.offscreen,Rt.useRuntimeCollisionCircles){const Fa=p.text.placedSymbolArray.get(Rt.centerJustifiedTextSymbolIndex),Al=s.am(p.textSizeData,Y,Fa),vA=y.get("text-padding");Fi=this.collisionIndex.placeCollisionCircles(we,Fa,p.lineVertexArray,p.glyphOffsetArray,Al,T,D,h,We,ie.predicate,Rt.collisionCircleDiameter,vA,x,It),Fi.circles.length&&Fi.collisionDetected&&!h&&s.w("Collisions detected, but collision boxes are not shown"),kn=Te||Fi.circles.length>0&&!Fi.collisionDetected,Wn=Wn&&Fi.offscreen}if(gr.iconFeatureIndex&&(Qs=gr.iconFeatureIndex),gr.iconBox){const Fa=Al=>this.collisionIndex.placeCollisionBox(Al,De,O,bt,T,We,Ve,F,ie.predicate,It,Ge&&Qn?Qn:void 0,Yt);ai&&ai.placeable&&gr.verticalIconBox?(en=Fa(gr.verticalIconBox),qn=en.placeable):(en=Fa(gr.iconBox),qn=en.placeable),Wn=Wn&&en.offscreen}const ol=be||Rt.numHorizontalGlyphVertices===0&&Rt.numVerticalGlyphVertices===0,Wo=_e||Rt.numIconVertices===0;ol||Wo?Wo?ol||(qn=qn&&kn):kn=qn&&kn:qn=kn=qn&&kn;const Io=qn&&en.placeable;if(kn&&Ii.placeable&&this.collisionIndex.insertCollisionBox(Ii.box,we,y.get("text-ignore-placement"),p.bucketInstanceId,ai&&ai.placeable&&Zi?Zi:Ia,ie.ID),Io&&this.collisionIndex.insertCollisionBox(en.box,De,y.get("icon-ignore-placement"),p.bucketInstanceId,Qs,ie.ID),Fi&&kn&&this.collisionIndex.insertCollisionCircles(Fi.circles,we,y.get("text-ignore-placement"),p.bucketInstanceId,Ia,ie.ID),h&&this.storeCollisionData(p.bucketInstanceId,$r,gr,Ii,en,Fi),Rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Rt.crossTileID]=new Do((kn||St)&&!(Ii!=null&&Ii.occluded),(qn||wt)&&!(en!=null&&en.occluded),Wn||p.justReloaded),a[Rt.crossTileID]=!0};if(ft){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Rt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let gr=Rt.length-1;gr>=0;--gr){const $r=Rt[gr];Zt(p.symbolInstances.get($r),p.collisionArrays[$r],$r)}}else for(let Rt=t.symbolInstanceStart;Rt<t.symbolInstanceEnd;Rt++)Zt(p.symbolInstances.get(Rt),p.collisionArrays[Rt],Rt);p.justReloaded=!1}storeCollisionData(t,a,h,p,y,x){if(h.textBox||h.iconBox){let F,T;this.collisionBoxArrays.has(t)?F=this.collisionBoxArrays.get(t):(F=new Map,this.collisionBoxArrays.set(t,F)),F.has(a)?T=F.get(a):(T={text:null,icon:null},F.set(a,T)),h.textBox&&(T.text=p.box),h.iconBox&&(T.icon=y.box)}if(x){let F=this.collisionCircleArrays[t];F===void 0&&(F=this.collisionCircleArrays[t]=[]);for(let T=0;T<x.circles.length;T+=4)F.push(x.circles[T+0]-ti),F.push(x.circles[T+1]-ti),F.push(x.circles[T+2]),F.push(x.collisionDetected?1:0)}}markUsedJustification(t,a,h,p){let y;y=p===s.al.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[s.aD(a)];const x=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const F of x)F>=0&&(t.text.placedSymbolArray.get(F).crossTileID=y>=0&&F!==y?0:h.crossTileID)}markUsedOrientation(t,a,h){const p=a===s.al.horizontal||a===s.al.horizontalOnly?a:0,y=a===s.al.vertical?a:0,x=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const F of x)t.text.placedSymbolArray.get(F).placedOrientation=p;h.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let h=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const p=a?a.symbolFadeChange(t):1,y=a?a.opacities:{},x=a?a.variableOffsets:{},F=a?a.placedOrientations:{};for(const T in this.placements){const D=this.placements[T],O=y[T];O?(this.opacities[T]=new Qo(O,p,D.text,D.icon),h=h||D.text!==O.text.placed||D.icon!==O.icon.placed):(this.opacities[T]=new Qo(null,p,D.text,D.icon,D.skipFade),h=h||D.text||D.icon)}for(const T in y){const D=y[T];if(!this.opacities[T]){const O=new Qo(D,p,!1,!1);O.isHidden()||(this.opacities[T]=O,h=h||D.text.placed||D.icon.placed)}}for(const T in x)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=x[T]);for(const T in F)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=F[T]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:t)}updateLayerOpacities(t,a){const h={};for(const p of a){const y=p.getBucket(t);y&&p.latestFeatureIndex&&t.id===y.layerIds[0]&&this.updateBucketOpacities(y,p.tileID,h,p.collisionBoxArray)}}updateBucketOpacities(t,a,h,p){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const y=t.layers[0],x=y.layout,F=new Qo(null,0,!1,!1,!0),T=x.get("text-allow-overlap"),D=x.get("icon-allow-overlap"),O=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),K=x.get("text-rotation-alignment")==="map",G=x.get("text-pitch-alignment")==="map",Y=x.get("icon-text-fit")!=="none",ie=new Qo(null,0,T&&(D||!t.hasIconData()||x.get("icon-optional")),D&&(T||!t.hasTextData()||x.get("text-optional")),!0);!t.collisionArrays&&p&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(p);const be=(we,Te,De)=>{for(let Re=0;Re<Te/4;Re++)we.opacityVertexArray.emplaceBack(De);we.hasVisibleVertices=we.hasVisibleVertices||De!==As},_e=this.collisionBoxArrays.get(t.bucketInstanceId);for(let we=0;we<t.symbolInstances.length;we++){const Te=t.symbolInstances.get(we),{numHorizontalGlyphVertices:De,numVerticalGlyphVertices:Re,crossTileID:Ve}=Te;let We=this.opacities[Ve];h[Ve]?We=F:We||(We=ie,this.opacities[Ve]=We),h[Ve]=!0;const Ge=Te.numIconVertices>0,ft=this.placedOrientations[Te.crossTileID],St=ft===s.al.vertical,wt=ft===s.al.horizontal||ft===s.al.horizontalOnly;if(De>0||Re>0){const It=qa(We.text);be(t.text,De,St?As:It),be(t.text,Re,wt?As:It);const Yt=We.text.isHidden();[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(gr=>{gr>=0&&(t.text.placedSymbolArray.get(gr).hidden=Yt||St?1:0)}),Te.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(Te.verticalPlacedTextSymbolIndex).hidden=Yt||wt?1:0);const Zt=this.variableOffsets[Te.crossTileID];Zt&&this.markUsedJustification(t,Zt.anchor,Te,ft);const Rt=this.placedOrientations[Te.crossTileID];Rt&&(this.markUsedJustification(t,"left",Te,Rt),this.markUsedOrientation(t,Rt,Te))}if(Ge){const It=qa(We.icon),Yt=!(Y&&Te.verticalPlacedIconSymbolIndex&&St);Te.placedIconSymbolIndex>=0&&(be(t.icon,Te.numIconVertices,Yt?It:As),t.icon.placedSymbolArray.get(Te.placedIconSymbolIndex).hidden=We.icon.isHidden()),Te.verticalPlacedIconSymbolIndex>=0&&(be(t.icon,Te.numVerticalIconVertices,Yt?As:It),t.icon.placedSymbolArray.get(Te.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}const bt=_e&&_e.has(we)?_e.get(we):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const It=t.collisionArrays[we];if(It){let Yt=new s.P(0,0);if(It.textBox||It.verticalTextBox){let Zt=!0;if(O){const Rt=this.variableOffsets[Ve];Rt?(Yt=os(Rt.anchor,Rt.width,Rt.height,Rt.textOffset,Rt.textBoxScale),K&&Yt._rotate(G?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Zt=!1}if(It.textBox||It.verticalTextBox){let Rt;It.textBox&&(Rt=St),It.verticalTextBox&&(Rt=wt),Ro(t.textCollisionBox.collisionVertexArray,We.text.placed,!Zt||Rt,bt.text,Yt.x,Yt.y)}}if(It.iconBox||It.verticalIconBox){const Zt=!!(!wt&&It.verticalIconBox);let Rt;It.iconBox&&(Rt=Zt),It.verticalIconBox&&(Rt=!Zt),Ro(t.iconCollisionBox.collisionVertexArray,We.icon.placed,Rt,bt.icon,Y?Yt.x:0,Y?Yt.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,a){const h=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*h>t}setStale(){this.stale=!0}}function Ro(m,t,a,h,p,y){h&&h.length!==0||(h=[0,0,0,0]);const x=h[0]-ti,F=h[1]-ti,T=h[2]-ti,D=h[3]-ti;m.emplaceBack(t?1:0,a?1:0,p||0,y||0,x,F),m.emplaceBack(t?1:0,a?1:0,p||0,y||0,T,F),m.emplaceBack(t?1:0,a?1:0,p||0,y||0,T,D),m.emplaceBack(t?1:0,a?1:0,p||0,y||0,x,D)}const nc=Math.pow(2,25),Nn=Math.pow(2,24),xl=Math.pow(2,17),ic=Math.pow(2,16),ac=Math.pow(2,9),Bl=Math.pow(2,8),sc=Math.pow(2,1);function qa(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const t=m.placed?1:0,a=Math.floor(127*m.opacity);return a*nc+t*Nn+a*xl+t*ic+a*ac+t*Bl+a*sc+t}const As=0;class ia{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,a,h,p,y){const x=this._bucketParts;for(;this._currentTileIndex<t.length;)if(a.getBucketParts(x,p,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,x.sort((F,T)=>F.sortKey-T.sortKey));this._currentPartIndex<x.length;)if(a.placeLayerBucketPart(x[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,y())return!0;return!1}}class RA{constructor(t,a,h,p,y,x,F,T){this.placement=new rc(t,a,x,F,T),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(t,a,h){const p=Q.now(),y=()=>!this._forceFullPlacement&&Q.now()-p>2;for(;this._currentPlacementIndex>=0;){const x=a[t[this._currentPlacementIndex]],F=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=F)&&(!x.maxzoom||x.maxzoom>F)){if(this._inProgressLayer||(this._inProgressLayer=new ia(x)),this._inProgressLayer.continuePlacement(h[x.source],this.placement,this._showCollisionBoxes,x,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const qs=512/s.Z/2;class Cl{constructor(t,a,h){this.tileID=t,this.bucketInstanceId=h,this._symbolsByKey={};const p=new Map;for(let y=0;y<a.length;y++){const x=a.get(y),F=x.key,T=p.get(F);T?T.push(x):p.set(F,[x])}for(const[y,x]of p){const F={positions:x.map(T=>({x:Math.floor(T.anchorX*qs),y:Math.floor(T.anchorY*qs)})),crossTileIDs:x.map(T=>T.crossTileID)};if(F.positions.length>128){const T=new s.aF(F.positions.length,16,Uint16Array);for(const{x:D,y:O}of F.positions)T.add(D,O);T.finish(),delete F.positions,F.index=T}this._symbolsByKey[y]=F}}getScaledCoordinates(t,a){const{x:h,y:p,z:y}=this.tileID.canonical,{x,y:F,z:T}=a.canonical,D=qs/Math.pow(2,T-y),O=(F*s.Z+t.anchorY)*D,K=p*s.Z*qs;return{x:Math.floor((x*s.Z+t.anchorX)*D-h*s.Z*qs),y:Math.floor(O-K)}}findMatches(t,a,h){const p=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let y=0;y<t.length;y++){const x=t.get(y);if(x.crossTileID)continue;const F=this._symbolsByKey[x.key];if(!F)continue;const T=this.getScaledCoordinates(x,a);if(F.index){const D=F.index.range(T.x-p,T.y-p,T.x+p,T.y+p).sort();for(const O of D){const K=F.crossTileIDs[O];if(!h[K]){h[K]=!0,x.crossTileID=K;break}}}else if(F.positions)for(let D=0;D<F.positions.length;D++){const O=F.positions[D],K=F.crossTileIDs[D];if(Math.abs(O.x-T.x)<=p&&Math.abs(O.y-T.y)<=p&&!h[K]){h[K]=!0,x.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class oc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class oA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const a=Math.round((t-this.lng)/360);if(a!==0)for(const h in this.indexes){const p=this.indexes[h],y={};for(const x in p){const F=p[x];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+a),y[F.tileID.key]=F}this.indexes[h]=y}this.lng=t}addBucket(t,a,h){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let y=0;y<a.symbolInstances.length;y++)a.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const p=this.usedCrossTileIDs[t.overscaledZ];for(const y in this.indexes){const x=this.indexes[y];if(Number(y)>t.overscaledZ)for(const F in x){const T=x[F];T.tileID.isChildOf(t)&&T.findMatches(a.symbolInstances,t,p)}else{const F=x[t.scaledTo(Number(y)).key];F&&F.findMatches(a.symbolInstances,t,p)}}for(let y=0;y<a.symbolInstances.length;y++){const x=a.symbolInstances.get(y);x.crossTileID||(x.crossTileID=h.generate(),p[x.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Cl(t,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(t,a){for(const h of a.getCrossTileIDsLists())for(const p of h)delete this.usedCrossTileIDs[t][p]}removeStaleBuckets(t){let a=!1;for(const h in this.indexes){const p=this.indexes[h];for(const y in p)t[p[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,p[y]),delete p[y],a=!0)}return a}}class No{constructor(){this.layerIndexes={},this.crossTileIDs=new oc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,a,h){let p=this.layerIndexes[t.id];p===void 0&&(p=this.layerIndexes[t.id]=new oA);let y=!1;const x={};p.handleWrapJump(h);for(const F of a){const T=F.getBucket(t);T&&t.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(F.tileID,T,this.crossTileIDs)&&(y=!0),x[T.bucketInstanceId]=!0)}return p.removeStaleBuckets(x)&&(y=!0),y}pruneUnusedLayers(t){const a={};t.forEach(h=>{a[h]=!0});for(const h in this.layerIndexes)a[h]||delete this.layerIndexes[h]}}var Il="void main() {fragColor=vec4(1.0);}";const Si={prelude:An(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:An("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:An("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:An(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:An(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:An(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:An(Il,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:An(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:An(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:An("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:An("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:An("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:An(Il,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:An(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:An(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:An(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:An(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:An(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:An(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:An(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:An(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:An(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:An(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:An(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:An(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:An(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:An(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:An(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:An(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:An("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:An("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:An("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:An("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:An(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:An("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function An(m,t){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=t.match(/in ([\w]+) ([\w]+)/g),p=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=y?y.concat(p):p,F={};return{fragmentSource:m=m.replace(a,(T,D,O,K,G)=>(F[G]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
in ${O} ${K} ${G};
#else
uniform ${O} ${K} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${O} ${K} ${G} = u_${G};
#endif
`)),vertexSource:t=t.replace(a,(T,D,O,K,G)=>{const Y=K==="float"?"vec2":"vec4",ie=G.match(/color/)?"color":Y;return F[G]?D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${O} ${Y} a_${G};
out ${O} ${K} ${G};
#else
uniform ${O} ${K} u_${G};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${O} ${K} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${ie}(a_${G}, u_${G}_t);
#else
    ${O} ${K} ${G} = u_${G};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${O} ${Y} a_${G};
#else
uniform ${O} ${K} u_${G};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${O} ${K} ${G} = a_${G};
#else
    ${O} ${K} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${O} ${K} ${G} = unpack_mix_${ie}(a_${G}, u_${G}_t);
#else
    ${O} ${K} ${G} = u_${G};
#endif
`}),staticAttributes:h,staticUniforms:x}}class Oo{constructor(t,a,h){this.vertexBuffer=t,this.indexBuffer=a,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Vi=s.aG([{name:"a_pos",type:"Int16",components:2}]);const va="#define PROJECTION_MERCATOR",Xr="mercator";class Zs{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Xr}get shaderDefine(){return va}get shaderPreludeCode(){return Si.projectionMercator}get vertexShaderPreludeCode(){return Si.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,a,h,p,y){if(this._cachedMesh)return this._cachedMesh;const x=new s.aI;x.emplaceBack(0,0),x.emplaceBack(s.Z,0),x.emplaceBack(0,s.Z),x.emplaceBack(s.Z,s.Z);const F=t.createVertexBuffer(x,Vi.members),T=s.aJ.simpleSegment(0,0,4,2),D=new s.aK;D.emplaceBack(1,0,2),D.emplaceBack(1,2,3);const O=t.createIndexBuffer(D);return this._cachedMesh=new Oo(F,O,T),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class zo{constructor(t=0,a=0,h=0,p=0){if(isNaN(t)||t<0||isNaN(a)||a<0||isNaN(h)||h<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=a,this.left=h,this.right=p}interpolate(t,a,h){return a.top!=null&&t.top!=null&&(this.top=s.B.number(t.top,a.top,h)),a.bottom!=null&&t.bottom!=null&&(this.bottom=s.B.number(t.bottom,a.bottom,h)),a.left!=null&&t.left!=null&&(this.left=s.B.number(t.left,a.left,h)),a.right!=null&&t.right!=null&&(this.right=s.B.number(t.right,a.right,h)),this}getCenter(t,a){const h=s.ae((this.left+t-this.right)/2,0,t),p=s.ae((this.top+a-this.bottom)/2,0,a);return new s.P(h,p)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new zo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function di(m,t){if(!m.renderWorldCopies||m.lngRange)return;const a=t.lng-m.center.lng;t.lng+=a>180?-360:a<-180?360:0}function aa(m){return Math.max(0,Math.floor(m))}class vi{constructor(t,a,h,p,y,x){this._callbacks=t,this._tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=a||0,this._maxZoom=h||22,this._minPitch=p??0,this._maxPitch=y??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=aa(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new zo,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,a,h){this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=aa(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new zo(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!h&&t.autoCalculateNearFarZ,a&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const a=s.aL(t,-180,180)*Math.PI/180;var h,p,y,x,F,T,D,O,K;this._bearingInRadians!==a&&(this._unmodified=!1,this._bearingInRadians=a,this._calcMatrices(),this._rotationMatrix=C(),h=this._rotationMatrix,y=-this._bearingInRadians,x=(p=this._rotationMatrix)[0],F=p[1],T=p[2],D=p[3],O=Math.sin(y),K=Math.cos(y),h[0]=x*K+T*O,h[1]=F*K+D*O,h[2]=x*-O+T*K,h[3]=F*-O+D*K)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const a=s.ae(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==a&&(this._unmodified=!1,this._pitchInRadians=a,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const a=t/180*Math.PI;this._rollInRadians!==a&&(this._unmodified=!1,this._rollInRadians=a,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(t){t=s.ae(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=s.ab(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const a=this.getConstrained(this._center,t).zoom;this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this._tileZoom=Math.max(0,Math.floor(a)),this._scale=s.ac(a),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,a){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=a,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,a,h){this._unmodified=!1,this._edgeInsets.interpolate(t,a,h),this._constrain(),this._calcMatrices()}resize(t,a,h=!0){this._width=t,this._height=a,h&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Xt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(t,a){return this._callbacks.getConstrained(t,a)}getCameraQueryGeometry(t,a){if(a.length===1)return[a[0],t];{let h=t.x,p=t.y,y=t.x,x=t.y;for(const F of a)h=Math.min(h,F.x),p=Math.min(p,F.y),y=Math.max(y,F.x),x=Math.max(x,F.y);return[new s.P(h,p),new s.P(y,p),new s.P(y,x),new s.P(h,x),new s.P(h,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:a,zoom:h}=this.getConstrained(this.center,this.zoom);this.setCenter(a),this.setZoom(h),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=s.ad(new Float64Array(16));s.M(t,t,[this._width/2,-this._height/2,1]),s.L(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=s.ad(new Float64Array(16)),s.M(t,t,[1,-1,1]),s.L(t,t,[-1,-1,0]),s.M(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,a,h,p){const y=h!==void 0?h:this.bearing,x=p=p!==void 0?p:this.pitch,F=s.$.fromLngLat(t,a),T=-Math.cos(s.ab(x)),D=Math.sin(s.ab(x)),O=D*Math.sin(s.ab(y)),K=-D*Math.cos(s.ab(y));let G=this.elevation;const Y=a-G;let ie;T*Y>=0||Math.abs(T)<.1?(ie=1e4,G=a+ie*T):ie=-Y/T;let be,_e,we=s.aN(1,F.y),Te=0;do{if(Te+=1,Te>10)break;_e=ie/we,be=new s.$(F.x+O*_e,F.y+K*_e),we=1/be.meterInMercatorCoordinateUnits()}while(Math.abs(ie-_e*we)>1e-12);return{center:be.toLngLat(),elevation:G,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/_e/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const a=s.ag(1,this.center.lat)*this.worldSize,h=this.cameraToCenterDistance/a,p=s.$.fromLngLat(this.center,this.elevation),y=le(this.center,this.elevation,this.pitch,this.bearing,h);this._elevation=t;const x=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),s.aN(y.z,p.y),this.bearing,this.pitch);this._elevation=x.elevation,this._center=x.center,this.setZoom(x.zoom)}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=s.ag(1,this.center.lat)*this.worldSize;return le(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const a=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/a,t.canonical.y/a,1/a/s.Z,1/a/s.Z]}}class br{constructor(t,a){this.min=t,this.max=a,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(t){const a=[t%2==0,t<2],h=s.aQ(this.min),p=s.aQ(this.max);for(let y=0;y<a.length;y++)h[y]=a[y]?this.min[y]:this.center[y],p[y]=a[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new br(h,p)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let a=!0;for(let h=0;h<t.planes.length;h++){const p=this.intersectsPlane(t.planes[h]);if(p===0)return 0;p===1&&(a=!1)}return a?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let a=t[3],h=t[3];for(let p=0;p<3;p++)t[p]>0?(a+=t[p]*this.min[p],h+=t[p]*this.max[p]):(h+=t[p]*this.min[p],a+=t[p]*this.max[p]);return a>=0?2:h<0?0:1}}class Ti{distanceToTile2d(t,a,h,p){const y=p.distanceX([t,a]),x=p.distanceY([t,a]);return Math.hypot(y,x)}getWrap(t,a,h){return h}getTileAABB(t,a,h,p){var y,x;let F=h,T=h;if(p.terrain){const O=new s.Y(t.z,a,t.z,t.x,t.y),K=p.terrain.getMinMaxElevation(O);F=(y=K.minElevation)!==null&&y!==void 0?y:h,T=(x=K.maxElevation)!==null&&x!==void 0?x:h}const D=1<<t.z;return new br([a+t.x/D,t.y/D,F],[a+(t.x+1)/D,(t.y+1)/D,T])}allowVariableZoom(t,a){const h=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,p=s.ae(78.5-h/2,0,60);return!!a.terrain||t.pitch>p}allowWorldCopies(){return!0}recalculateCache(){}}class Pn{constructor(t,a,h){this.points=t,this.planes=a,this.aabb=h}static fromInvProjectionMatrix(t,a=1,h=0){const p=Math.pow(2,h),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const O=1/(D=s.at([],D,t))[3]/a*p;return s.aR(D,D,[O,O,1/D[3],O])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const O=s.aS([],y[D[0]],y[D[1]]),K=s.aS([],y[D[2]],y[D[1]]),G=s.aT([],s.aU([],O,K)),Y=-s.aV(G,y[D[1]]);return G.concat(Y)}),F=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],T=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const D of y)for(let O=0;O<3;O++)F[O]=Math.min(F[O],D[O]),T[O]=Math.max(T[O],D[O]);return new Pn(y,x,new br(F,T))}}class wa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,a,h){return this._helper.interpolatePadding(t,a,h)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,a,h=!0){this._helper.resize(t,a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,a){this._helper.overrideNearFarZ(t,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,a){}constructor(t,a,h,p,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(x,F)=>this.getConstrained(x,F)},t,a,h,p,y),this._coveringTilesDetailsProvider=new Ti}clone(){const t=new wa;return t.apply(this),t}apply(t,a,h){this._helper.apply(t,a,h)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const a=[new s.aW(0,t)];if(this._helper._renderWorldCopies){const h=this.screenPointToMercatorCoordinate(new s.P(0,0)),p=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),x=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),F=Math.floor(Math.min(h.x,p.x,y.x,x.x)),T=Math.floor(Math.max(h.x,p.x,y.x,x.x)),D=1;for(let O=F-D;O<=T+D;O++)O!==0&&a.push(new s.aW(O,t))}return a}getCameraFrustum(){return Pn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const a=this.screenPointToLocation(this.centerPoint,t),h=t?t.getElevationForLngLatZoom(a,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(h)}setLocationAtPoint(t,a){const h=s.ag(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(a,h),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,h),x=s.$.fromLngLat(t),F=new s.$(x.x-(p.x-y.x),x.y-(p.y-y.y));this.setCenter(F==null?void 0:F.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,a){return a?this.coordinatePoint(s.$.fromLngLat(t),a.getElevationForLngLatZoom(t,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(t))}screenPointToLocation(t,a){var h;return(h=this.screenPointToMercatorCoordinate(t,a))===null||h===void 0?void 0:h.toLngLat()}screenPointToMercatorCoordinate(t,a){if(a){const h=a.pointCoordinate(t);if(h!=null)return h}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,a){const h=a||0,p=[t.x,t.y,0,1],y=[t.x,t.y,1,1];s.at(p,p,this._pixelMatrixInverse),s.at(y,y,this._pixelMatrixInverse);const x=p[3],F=y[3],T=p[1]/x,D=y[1]/F,O=p[2]/x,K=y[2]/F,G=O===K?0:(h-O)/(K-O);return new s.$(s.B.number(p[0]/x,y[0]/F,G)/this.worldSize,s.B.number(T,D,G)/this.worldSize,h)}coordinatePoint(t,a=0,h=this._pixelMatrix){const p=[t.x*this.worldSize,t.y*this.worldSize,a,1];return s.at(p,p,h),new s.P(p[0]/p[3],p[1]/p[3])}getBounds(){const t=Math.max(0,this._helper._height/2-Xe(this));return new Xt().extend(this.screenPointToLocation(new s.P(0,t))).extend(this.screenPointToLocation(new s.P(this._helper._width,t))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(t,a){return a?a.pointCoordinate(t)!=null:t.y>this.height/2-Xe(this)}calculatePosMatrix(t,a=!1,h){var p;const y=(p=t.key)!==null&&p!==void 0?p:s.aX(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),x=a?this._alignedPosMatrixCache:this._posMatrixCache;if(x.has(y)){const D=x.get(y);return h?D.f32:D.f64}const F=ae(t,this.worldSize);s.N(F,a?this._alignedProjMatrix:this._viewProjMatrix,F);const T={f64:F,f32:new Float32Array(F)};return x.set(y,T),h?T.f32:T.f64}calculateFogMatrix(t){const a=t.key,h=this._fogMatrixCacheF32;if(h.has(a))return h.get(a);const p=ae(t,this.worldSize);return s.N(p,this._fogMatrix,p),h.set(a,new Float32Array(p)),h.get(a)}getConstrained(t,a){a=s.ae(+a,this.minZoom,this.maxZoom);const h={center:new s.Q(t.lng,t.lat),zoom:a};let p=this._helper._lngRange;this._helper._renderWorldCopies||p!==null||(p=[-179.9999999999,180-1e-10]);const y=this.tileSize*s.ac(h.zoom);let x=0,F=y,T=0,D=y,O=0,K=0;const{x:G,y:Y}=this.size;if(this._helper._latRange){const De=this._helper._latRange;x=s.S(De[1])*y,F=s.S(De[0])*y,F-x<Y&&(O=Y/(F-x))}p&&(T=s.aL(s.U(p[0])*y,0,y),D=s.aL(s.U(p[1])*y,0,y),D<T&&(D+=y),D-T<G&&(K=G/(D-T)));const{x:ie,y:be}=Vr(y,t);let _e,we;const Te=Math.max(K||0,O||0);if(Te){const De=new s.P(K?(D+T)/2:ie,O?(F+x)/2:be);return h.center=bi(y,De).wrap(),h.zoom+=s.ah(Te),h}if(this._helper._latRange){const De=Y/2;be-De<x&&(we=x+De),be+De>F&&(we=F-De)}if(p){const De=(T+D)/2;let Re=ie;this._helper._renderWorldCopies&&(Re=s.aL(ie,De-y/2,De+y/2));const Ve=G/2;Re-Ve<T&&(_e=T+Ve),Re+Ve>D&&(_e=D-Ve)}if(_e!==void 0||we!==void 0){const De=new s.P(_e??ie,we??be);h.center=bi(y,De).wrap()}return h}calculateCenterFromCameraLngLatAlt(t,a,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,a,h,p)}_calculateNearFarZIfNeeded(t,a,h){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=t-p*this._helper._pixelPerMeter/Math.cos(a),x=p<0?y:t,F=Math.PI/2+this.pitchInRadians,T=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+h.y/this.height),D=Math.sin(T)*x/Math.sin(s.ae(Math.PI-F-T,.01,Math.PI-.01)),O=Xe(this),K=Math.atan(O/this._helper.cameraToCenterDistance),G=s.ab(.75),Y=K>G?2*K*(.5+h.y/(2*O)):G,ie=Math.sin(Y)*x/Math.sin(s.ae(Math.PI-F-Y,.01,Math.PI-.01)),be=Math.min(D,ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-a)*be+x),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,a=Vr(this.worldSize,this.center),h=a.x,p=a.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;const y=s.ab(Math.min(this.pitch,Dn)),x=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y));let F;this._calculateNearFarZIfNeeded(x,y,t),F=new Float64Array(16),s.aY(F,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,F),F[8]=2*-t.x/this._helper._width,F[9]=2*t.y/this._helper._height,this._projectionMatrix=s.aZ(F),s.M(F,F,[1,-1,1]),s.L(F,F,[0,0,-this._helper.cameraToCenterDistance]),s.a_(F,F,-this.rollInRadians),s.a$(F,F,this.pitchInRadians),s.a_(F,F,-this.bearingInRadians),s.L(F,F,[-h,-p,0]),this._mercatorMatrix=s.M([],F,[this.worldSize,this.worldSize,this.worldSize]),s.M(F,F,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,F),s.L(F,F,[0,0,-this.elevation]),this._viewProjMatrix=F,this._invViewProjMatrix=s.an([],F);const T=[0,0,-1,1];s.at(T,T,this._invViewProjMatrix),this._cameraPosition=[T[0]/T[3],T[1]/T[3],T[2]/T[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,x,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-h,-p,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,F);const D=this._helper._width%2/2,O=this._helper._height%2/2,K=Math.cos(this.bearingInRadians),G=Math.sin(-this.bearingInRadians),Y=h-Math.round(h)+K*D+G*O,ie=p-Math.round(p)+K*O+G*D,be=new Float64Array(F);if(s.L(be,be,[Y>.5?Y-1:Y,ie>.5?ie-1:ie,0]),this._alignedProjMatrix=be,F=s.an(new Float64Array(16),this._pixelMatrix),!F)throw new Error("failed to invert matrix");this._pixelMatrixInverse=F,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new s.P(0,0)),a=[t.x*this.worldSize,t.y*this.worldSize,0,1];return s.at(a,a,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=s.ag(1,this.center.lat)*this.worldSize;return le(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,a){const h=s.$.fromLngLat(t),p=[h.x*this.worldSize,h.y*this.worldSize,a,1];return s.at(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(t){const{overscaledTileID:a,aligned:h,applyTerrainMatrix:p}=t,y=this._helper.getMercatorTileCoordinates(a),x=a?this.calculatePosMatrix(a,h,!0):null;let F;return F=a&&a.terrainRttPosMatrix32f&&p?a.terrainRttPosMatrix32f:x||s.b0(),{mainMatrix:F,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:F}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,a,h){return 1}transformLightDirection(t){return s.aQ(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,a,h,p){const y=this.calculatePosMatrix(h);let x;p?(x=[t,a,p(t,a),1],s.at(x,x,y)):(x=[t,a,0,1],Ks(x,x,y));const F=x[3];return{point:new s.P(x[0]/F,x[1]/F),signedDistanceFromCamera:F,isOccluded:!1}}populateCache(t){for(const a of t)this.calculatePosMatrix(a)}getMatrixForModel(t,a){const h=s.$.fromLngLat(t,a),p=h.meterInMercatorCoordinateUnits(),y=s.b1();return s.L(y,y,[h.x,h.y,h.z]),s.a_(y,y,Math.PI),s.a$(y,y,Math.PI/2),s.M(y,y,[-p,p,p]),y}getProjectionDataForCustomLayer(t=!0){const a=new s.Y(0,0,0,0,0),h=this.getProjectionData({overscaledTileID:a,applyGlobeMatrix:t}),p=ae(a,this.worldSize);s.N(p,this._viewProjMatrix,p),h.tileMercatorCoords=[0,0,1,1];const y=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],x=s.b2();return s.M(x,p,y),h.fallbackMatrix=x,h.mainMatrix=x,h}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Qi(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function sa(m){if(m.useSlerp)if(m.k<1){const t=s.b3(m.startEulerAngles.roll,m.startEulerAngles.pitch,m.startEulerAngles.bearing),a=s.b3(m.endEulerAngles.roll,m.endEulerAngles.pitch,m.endEulerAngles.bearing),h=new Float64Array(4);s.b4(h,t,a,m.k);const p=s.b5(h);m.tr.setRoll(p.roll),m.tr.setPitch(p.pitch),m.tr.setBearing(p.bearing)}else m.tr.setRoll(m.endEulerAngles.roll),m.tr.setPitch(m.endEulerAngles.pitch),m.tr.setBearing(m.endEulerAngles.bearing);else m.tr.setRoll(s.B.number(m.startEulerAngles.roll,m.endEulerAngles.roll,m.k)),m.tr.setPitch(s.B.number(m.startEulerAngles.pitch,m.endEulerAngles.pitch,m.k)),m.tr.setBearing(s.B.number(m.startEulerAngles.bearing,m.endEulerAngles.bearing,m.k))}function Li(m,t,a,h,p){const y=p.padding,x=Vr(p.worldSize,a.getNorthWest()),F=Vr(p.worldSize,a.getNorthEast()),T=Vr(p.worldSize,a.getSouthEast()),D=Vr(p.worldSize,a.getSouthWest()),O=s.ab(-h),K=x.rotate(O),G=F.rotate(O),Y=T.rotate(O),ie=D.rotate(O),be=new s.P(Math.max(K.x,G.x,ie.x,Y.x),Math.max(K.y,G.y,ie.y,Y.y)),_e=new s.P(Math.min(K.x,G.x,ie.x,Y.x),Math.min(K.y,G.y,ie.y,Y.y)),we=be.sub(_e),Te=(p.width-(y.left+y.right+t.left+t.right))/we.x,De=(p.height-(y.top+y.bottom+t.top+t.bottom))/we.y;if(De<0||Te<0)return void Qi();const Re=Math.min(s.ah(p.scale*Math.min(Te,De)),m.maxZoom),Ve=s.P.convert(m.offset),We=new s.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(s.ab(h)),Ge=Ve.add(We).mult(p.scale/s.ac(Re));return{center:bi(p.worldSize,x.add(T).div(2).sub(Ge)),zoom:Re,bearing:h}}class uo{get useGlobeControls(){return!1}handlePanInertia(t,a){return{easingOffset:t,easingCenter:a.center}}handleMapControlsRollPitchBearingZoom(t,a){t.bearingDelta&&a.setBearing(a.bearing+t.bearingDelta),t.pitchDelta&&a.setPitch(a.pitch+t.pitchDelta),t.rollDelta&&a.setRoll(a.roll+t.rollDelta),t.zoomDelta&&a.setZoom(a.zoom+t.zoomDelta)}handleMapControlsPan(t,a,h){t.around.distSqr(a.centerPoint)<.01||a.setLocationAtPoint(h,t.around)}cameraForBoxAndBearing(t,a,h,p,y){return Li(t,a,h,p,y)}handleJumpToCenterZoom(t,a){t.zoom!==(a.zoom!==void 0?+a.zoom:t.zoom)&&t.setZoom(+a.zoom),a.center!==void 0&&t.setCenter(s.Q.convert(a.center))}handleEaseTo(t,a){const h=t.zoom,p=t.padding,y={roll:t.roll,pitch:t.pitch,bearing:t.bearing},x={roll:a.roll===void 0?t.roll:a.roll,pitch:a.pitch===void 0?t.pitch:a.pitch,bearing:a.bearing===void 0?t.bearing:a.bearing},F=a.zoom!==void 0,T=!t.isPaddingEqual(a.padding);let D=!1;const O=F?+a.zoom:t.zoom;let K=t.centerPoint.add(a.offsetAsPoint);const G=t.screenPointToLocation(K),{center:Y,zoom:ie}=t.getConstrained(s.Q.convert(a.center||G),O??h);di(t,Y);const be=Vr(t.worldSize,G),_e=Vr(t.worldSize,Y).sub(be),we=s.ac(ie-h);return D=ie!==h,{easeFunc:Te=>{if(D&&t.setZoom(s.B.number(h,ie,Te)),s.b6(y,x)||sa({startEulerAngles:y,endEulerAngles:x,tr:t,k:Te,useSlerp:y.roll!=x.roll}),T&&(t.interpolatePadding(p,a.padding,Te),K=t.centerPoint.add(a.offsetAsPoint)),a.around)t.setLocationAtPoint(a.around,a.aroundPoint);else{const De=s.ac(t.zoom-h),Re=ie>h?Math.min(2,we):Math.max(.5,we),Ve=Math.pow(Re,1-Te),We=bi(t.worldSize,be.add(_e.mult(Te*Ve)).mult(De));t.setLocationAtPoint(t.renderWorldCopies?We.wrap():We,K)}},isZooming:D,elevationCenter:Y}}handleFlyTo(t,a){const h=a.zoom!==void 0,p=t.zoom,y=t.getConstrained(s.Q.convert(a.center||a.locationAtOffset),h?+a.zoom:p),x=y.center,F=y.zoom;di(t,x);const T=Vr(t.worldSize,a.locationAtOffset),D=Vr(t.worldSize,x).sub(T),O=D.mag(),K=s.ac(F-p);let G;if(a.minZoom!==void 0){const Y=Math.min(+a.minZoom,p,F),ie=t.getConstrained(x,Y).zoom;G=s.ac(ie-p)}return{easeFunc:(Y,ie,be,_e)=>{t.setZoom(Y===1?F:p+s.ah(ie));const we=Y===1?x:bi(t.worldSize,T.add(D.mult(be)).mult(ie));t.setLocationAtPoint(t.renderWorldCopies?we.wrap():we,_e)},scaleOfZoom:K,targetCenter:x,scaleOfMinZoom:G,pixelPathLength:O}}}class xn{constructor(t,a,h){this.blendFunction=t,this.blendColor=a,this.mask=h}}xn.Replace=[1,0],xn.disabled=new xn(xn.Replace,s.b7.transparent,[!1,!1,!1,!1]),xn.unblended=new xn(xn.Replace,s.b7.transparent,[!0,!0,!0,!0]),xn.alphaBlended=new xn([1,771],s.b7.transparent,[!0,!0,!0,!0]);const jn=2305;class tn{constructor(t,a,h){this.enable=t,this.mode=a,this.frontFace=h}}tn.disabled=new tn(!1,1029,jn),tn.backCCW=new tn(!0,1029,jn),tn.frontCCW=new tn(!0,1028,jn);class Qr{constructor(t,a,h){this.func=t,this.mask=a,this.range=h}}Qr.ReadOnly=!1,Qr.ReadWrite=!0,Qr.disabled=new Qr(519,Qr.ReadOnly,[0,1]);const ls=7680;class Rr{constructor(t,a,h,p,y,x){this.test=t,this.ref=a,this.mask=h,this.fail=p,this.depthFail=y,this.pass=x}}Rr.disabled=new Rr({func:519,mask:0},0,0,ls,ls,ls);const NA=new WeakMap;function Ai(m){var t;if(NA.has(m))return NA.get(m);{const a=(t=m.getParameter(m.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return NA.set(m,a),a}}class AA{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const a=t.context,h=a.gl;this._texFormat=h.RGBA,this._texType=h.UNSIGNED_BYTE;const p=new s.aI;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const y=new s.aK;y.emplaceBack(0,1,2),this._fullscreenTriangle=new Oo(a.createVertexBuffer(p,Vi.members),a.createIndexBuffer(y),s.aJ.simpleSegment(0,0,p.length,y.length)),this._resultBuffer=new Uint8Array(4),a.activeTexture.set(h.TEXTURE1);const x=h.createTexture();h.bindTexture(h.TEXTURE_2D,x),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=a.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(x),Ai(h)&&(this._pbo=h.createBuffer(),h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.bufferData(h.PIXEL_PACK_BUFFER,4,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,a){const h=this._updateCount;return this._readbackQueue?h>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():h>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,a),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,a=t.gl;t.activeTexture.set(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,a){const h=this._cachedRenderContext.context,p=h.gl;if(this._bindFramebuffer(),h.viewport.set([0,0,this._texWidth,this._texHeight]),h.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(h,p.TRIANGLES,Qr.disabled,Rr.disabled,xn.unblended,tn.disabled,((y,x)=>({u_input:y,u_output_expected:x}))(t,a),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ai(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const y=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ai(t)){const a=t.clientWaitSync(this._readbackQueue.sync,0,0);if(a===t.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(a===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=AA._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let a=0;return a+=t[0]/256,a+=t[1]/65536,a+=t[2]/16777216,t[3]<127&&(a=-a),a/128}}const Ho=s.Z/128;function jo(m,t){const a=m.granularity!==void 0?Math.max(m.granularity,1):1,h=a+(m.generateBorders?2:0),p=a+(m.extendToNorthPole||m.generateBorders?1:0)+(m.extendToSouthPole||m.generateBorders?1:0),y=h+1,x=p+1,F=m.generateBorders?-1:0,T=m.generateBorders||m.extendToNorthPole?-1:0,D=a+(m.generateBorders?1:0),O=a+(m.generateBorders||m.extendToSouthPole?1:0),K=y*x,G=h*p*6,Y=y*x>65536;if(Y&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ie=Y||t==="32bit",be=new Int16Array(2*K);let _e=0;for(let De=T;De<=O;De++)for(let Re=F;Re<=D;Re++){let Ve=Re/a*s.Z;Re===-1&&(Ve=-64),Re===a+1&&(Ve=s.Z+Ho);let We=De/a*s.Z;De===-1&&(We=m.extendToNorthPole?s.b9:-64),De===a+1&&(We=m.extendToSouthPole?s.ba:s.Z+Ho),be[_e++]=Ve,be[_e++]=We}const we=ie?new Uint32Array(G):new Uint16Array(G);let Te=0;for(let De=0;De<p;De++)for(let Re=0;Re<h;Re++){const Ve=Re+1+De*y,We=Re+(De+1)*y,Ge=Re+1+(De+1)*y;we[Te++]=Re+De*y,we[Te++]=We,we[Te++]=Ve,we[Te++]=Ve,we[Te++]=We,we[Te++]=Ge}return{vertices:be.buffer.slice(0),indices:we.buffer.slice(0),uses32bitIndices:ie}}const ho=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class Vo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Si.projectionGlobe}get vertexShaderPreludeCode(){return Si.projectionMercator.vertexSource}get subdivisionGranularity(){return ho}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new AA(t));const a=s.S(this._errorQueryLatitudeDegrees),h=2*Math.atan(Math.exp(Math.PI-a*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(a,h),y=Q.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=y);const x=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(x))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,a,h,p,y){const x=(y==="stencil"?ho.stencil:ho.tile).getGranularityForZoomLevel(a.z);return this._getMesh(t,{granularity:x,generateBorders:h,extendToNorthPole:a.y===0&&p,extendToSouthPole:a.y===(1<<a.z)-1&&p})}_getMesh(t,a){const h=this._getMeshKey(a);if(h in this._tileMeshCache)return this._tileMeshCache[h];const p=function(y,x){const F=jo(x,"16bit"),T=s.aI.deserialize({arrayBuffer:F.vertices,length:F.vertices.byteLength/2/2}),D=s.aK.deserialize({arrayBuffer:F.indices,length:F.indices.byteLength/2/3});return new Oo(y.createVertexBuffer(T,Vi.members),y.createIndexBuffer(D),s.aJ.simpleSegment(0,0,T.length,D.length))}(t,a);return this._tileMeshCache[h]=p,p}recalculate(t){}hasTransition(){const t=Q.now();let a=!1;return a=a||(t-this._errorMeasurementLastChangeTime)/1e3<.7,a=a||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,a}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const OA=new s.r({type:new s.D(s.v.projection.type)});class Za extends s.E{constructor(t){super(),this._transitionable=new s.T(OA),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new Zs,this._verticalPerspectiveProjection=new Vo}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof s.be){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,a,h,p,y){return this.currentProjection.getMeshFromTileID(t,a,h,p,y)}setProjection(t){this._transitionable.setValue("type",(t==null?void 0:t.type)||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function $a(m){const t=Gi(m.worldSize,m.center.lat);return 2*Math.PI*t}function fo(m,t,a,h,p){const y=1/(1<<p),x=t/s.Z*y+h*y,F=s.bg((m/s.Z*y+a*y)*Math.PI*2+Math.PI,2*Math.PI),T=2*Math.atan(Math.exp(Math.PI-x*Math.PI*2))-.5*Math.PI,D=Math.cos(T),O=new Float64Array(3);return O[0]=Math.sin(F)*D,O[1]=Math.sin(T),O[2]=Math.cos(F)*D,O}function Vn(m){return function(t,a){const h=Math.cos(a),p=new Float64Array(3);return p[0]=Math.sin(t)*h,p[1]=Math.sin(a),p[2]=Math.cos(t)*h,p}(m.lng*Math.PI/180,m.lat*Math.PI/180)}function Gi(m,t){return m/(2*Math.PI)/Math.cos(t*Math.PI/180)}function po(m){const t=Math.asin(m[1])/Math.PI*180,a=Math.sqrt(m[0]*m[0]+m[2]*m[2]);if(a>1e-6){const h=m[0]/a,p=Math.acos(m[2]/a),y=(h>0?p:-p)/Math.PI*180;return new s.Q(s.aL(y,-180,180),t)}return new s.Q(0,t)}function Ma(m){return Math.cos(m*Math.PI/180)}function wi(m,t){const a=Ma(m),h=Ma(t);return s.ah(h/a)}function go(m,t){const a=m.rotate(t.bearingInRadians),h=t.zoom+wi(t.center.lat,0),p=s.bc(1/Ma(t.center.lat),1/Ma(Math.min(Math.abs(t.center.lat),60)),s.bf(h,7,3,0,1)),y=360/$a({worldSize:t.worldSize,center:{lat:t.center.lat}});return new s.Q(t.center.lng-a.x*y*p,s.ae(t.center.lat+a.y*y,-85.051129,s.af))}function zA(m){const t=.5*m,a=Math.sin(t),h=Math.cos(t);return Math.log(a+h)-Math.log(h-a)}function HA(m,t,a,h){const p=m.lat+a*h;if(Math.abs(a)>1){const y=(Math.sign(m.lat+a)!==Math.sign(m.lat)?-Math.abs(m.lat):Math.abs(m.lat))*Math.PI/180,x=Math.abs(m.lat+a)*Math.PI/180,F=zA(y+h*(x-y)),T=zA(y),D=zA(x);return new s.Q(m.lng+t*((F-T)/(D-T)),p)}return new s.Q(m.lng+t*h,p)}class Fl{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=t}recalculateCache(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(t,a,h,p){const y=`${t.z}_${t.x}_${t.y}`,x=this._cache.get(y);if(x)return x;const F=this._cachePrevious.get(y);if(F)return this._cache.set(y,F),F;const T=this._aabbFactory(t,a,h,p);return this._cache.set(y,T),this._hadAnyChanges=!0,T}}function Pi(m,t,a){const h=m-t;return h<0?-h:Math.max(0,h-a)}function $s(m,t,a,h,p){const y=m-a;let x;return x=y<0?Math.min(-y,1+y-p):y>1?Math.min(Math.max(y-p,0),1-y):0,Math.max(x,Pi(t,h,p))}class Ua{constructor(){this._aabbCache=new Fl(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(t,a,h,p){const y=1<<h.z,x=1/y,F=h.x/y,T=h.y/y;let D=2;return D=Math.min(D,$s(t,a,F,T,x)),D=Math.min(D,$s(t,a,F+.5,-T-x,x)),D=Math.min(D,$s(t,a,F+.5,2-T-x,x)),D}getWrap(t,a,h){const p=1<<a.z,y=1/p,x=a.x/p,F=Pi(t.x,x,y),T=Pi(t.x,x-1,y),D=Pi(t.x,x+1,y),O=Math.min(F,T,D);return O===D?1:O===T?-1:0}allowVariableZoom(t,a){return ht(t,a)>4}allowWorldCopies(){return!1}getTileAABB(t,a,h,p){return this._aabbCache.getTileAABB(t,a,h,p)}_computeTileAABB(t,a,h,p){if(t.z<=0)return new br([-1,-1,-1],[1,1,1]);if(t.z===1)return new br([t.x===0?-1:0,t.y===0?0:-1,-1],[t.x===0?0:1,t.y===0?1:0,1]);{const y=[fo(0,0,t.x,t.y,t.z),fo(s.Z,0,t.x,t.y,t.z),fo(s.Z,s.Z,t.x,t.y,t.z),fo(0,s.Z,t.x,t.y,t.z)],x=[1,1,1],F=[-1,-1,-1];for(const T of y)for(let D=0;D<3;D++)x[D]=Math.min(x[D],T[D]),F[D]=Math.max(F[D],T[D]);if(t.y===0||t.y===(1<<t.z)-1){const T=[0,t.y===0?1:-1,0];for(let D=0;D<3;D++)x[D]=Math.min(x[D],T[D]),F[D]=Math.max(F[D],T[D])}return new br(x,F)}}}class Is{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,a,h){return this._helper.interpolatePadding(t,a,h)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,a){this._helper.resize(t,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,a){this._helper.overrideNearFarZ(t,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,a)=>this.getConstrained(t,a)}),this._coveringTilesDetailsProvider=new Ua}clone(){const t=new Is;return t.apply(this),t}apply(t,a){this._globeLatitudeErrorCorrectionRadians=a||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=s.bh();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:a,applyGlobeMatrix:h}=t,p=this._helper.getMercatorTileCoordinates(a);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:h?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const a=this.pitchInRadians,h=this.cameraToCenterDistance/t,p=Math.sin(a)*h,y=Math.cos(a)*h+1,x=1/Math.sqrt(p*p+y*y)*1;let F=-p,T=y;const D=Math.sqrt(F*F+T*T);F/=D,T/=D;const O=[0,F,T];s.bl(O,O,[0,0,0],-this.bearingInRadians),s.bm(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(O,O,[0,0,0],this.center.lng*Math.PI/180);const K=1/s.bo(O);return s.aO(O,O,K),[...O,-x*K]}isLocationOccluded(t){return!this.isSurfacePointVisible(Vn(t))}transformLightDirection(t){const a=this._helper._center.lng*Math.PI/180,h=this._helper._center.lat*Math.PI/180,p=Math.cos(h),y=[Math.sin(a)*p,Math.sin(h),Math.cos(a)*p],x=[y[2],0,-y[0]],F=[0,0,0];s.aU(F,x,y),s.aT(x,x),s.aT(F,F);const T=[0,0,0];return s.aT(T,[x[0]*t[0]+F[0]*t[1]+y[0]*t[2],x[1]*t[0]+F[1]*t[1]+y[1]*t[2],x[2]*t[0]+F[2]*t[1]+y[2]*t[2]]),T}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,a,h){const p=function(F,T,D){const O=1/(1<<D.z);return new s.$(F/s.Z*O+D.x*O,T/s.Z*O+D.y*O)}(t,a,h.canonical),y=(x=p.y,[s.bg(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-x*Math.PI*2))-.5*Math.PI]);var x;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(t,a,h,p){const y=h.canonical,x=fo(t,a,y.x,y.y,y.z),F=1+(p?p(t,a):0)/s.bu,T=[x[0]*F,x[1]*F,x[2]*F,1];s.at(T,T,this._globeViewProjMatrixNoCorrection);const D=this._cachedClippingPlane,O=D[0]*x[0]+D[1]*x[1]+D[2]*x[2]+D[3]<0;return{point:new s.P(T[0]/T[3],T[1]/T[3]),signedDistanceFromCamera:T[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=Gi(this.worldSize,this.center.lat),a=s.b2(),h=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),s.aY(a,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;a[8]=2*-p.x/this._helper._width,a[9]=2*p.y/this._helper._height,this._projectionMatrix=s.aZ(a),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,a),s.L(a,a,[0,0,-this.cameraToCenterDistance]),s.a_(a,a,this.rollInRadians),s.a$(a,a,-this.pitchInRadians),s.a_(a,a,this.bearingInRadians),s.L(a,a,[0,0,-t]);const y=s.bh();y[0]=t,y[1]=t,y[2]=t,s.a$(h,a,this.center.lat*Math.PI/180),s.bp(h,h,-this.center.lng*Math.PI/180),s.M(h,h,y),this._globeViewProjMatrixNoCorrection=h,s.a$(a,a,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(a,a,-this.center.lng*Math.PI/180),s.M(a,a,y),this._globeViewProjMatrix32f=new Float32Array(a),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,h);const x=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/t,s.bl(this._cameraPosition,this._cameraPosition,x,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,x,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,x,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,x,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,x,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const F=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(F,F,[1,1,-1]),this._cachedFrustum=Pn.fromInvProjectionMatrix(F)}calculateFogMatrix(t){s.w("calculateFogMatrix is not supported on globe projection.");const a=s.b2();return s.ad(a),a}getVisibleUnwrappedCoordinates(t){return[new s.aW(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,a){if(!this._globeViewProjMatrixNoCorrection)return 1;const h=Vn(t);s.aO(h,h,1+a/s.bu);const p=s.bk();return s.at(p,[h[0],h[1],h[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(t){}getBounds(){const t=.5*this.width,a=.5*this.height,h=[new s.P(0,0),new s.P(t,0),new s.P(this.width,0),new s.P(this.width,a),new s.P(this.width,this.height),new s.P(t,this.height),new s.P(0,this.height),new s.P(0,a)],p=[];for(const K of h)p.push(this.unprojectScreenPoint(K));let y=0,x=0,F=0,T=0;const D=this.center;for(const K of p){const G=s.bq(D.lng,K.lng),Y=s.bq(D.lat,K.lat);G<x&&(x=G),G>y&&(y=G),Y<T&&(T=Y),Y>F&&(F=Y)}const O=[D.lng+x,D.lat+T,D.lng+y,D.lat+F];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new Xt(O)}getConstrained(t,a){const h=s.ae(t.lat,-85.051129,s.af),p=s.ae(+a,this.minZoom+wi(0,h),this.maxZoom);return{center:new s.Q(t.lng,h),zoom:p}}calculateCenterFromCameraLngLatAlt(t,a,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,a,h,p)}setLocationAtPoint(t,a){const h=Vn(this.unprojectScreenPoint(a)),p=Vn(t),y=s.bh();s.br(y);const x=s.bh();s.bn(x,h,y,-this.center.lng*Math.PI/180),s.bm(x,x,y,this.center.lat*Math.PI/180);const F=p[0]*p[0]+p[2]*p[2],T=x[0]*x[0];if(F<T)return;const D=Math.sqrt(F-T),O=-D,K=s.bs(p[0],p[2],x[0],D),G=s.bs(p[0],p[2],x[0],O),Y=s.bh();s.bn(Y,p,y,-K);const ie=s.bs(Y[1],Y[2],x[1],x[2]),be=s.bh();s.bn(be,p,y,-G);const _e=s.bs(be[1],be[2],x[1],x[2]),we=.5*Math.PI,Te=ie>=-we&&ie<=we,De=_e>=-we&&_e<=we;let Re,Ve;if(Te&&De){const St=this.center.lng*Math.PI/180,wt=this.center.lat*Math.PI/180;s.bv(K,St)+s.bv(ie,wt)<s.bv(G,St)+s.bv(_e,wt)?(Re=K,Ve=ie):(Re=G,Ve=_e)}else if(Te)Re=K,Ve=ie;else{if(!De)return;Re=G,Ve=_e}const We=Re/Math.PI*180,Ge=Ve/Math.PI*180,ft=this.center.lat;this.setCenter(new s.Q(We,s.ae(Ge,-90,90))),this.setZoom(this.zoom+wi(ft,this.center.lat))}locationToScreenPoint(t,a){const h=Vn(t);if(a){const p=a.getElevationForLngLatZoom(t,this._helper._tileZoom);s.aO(h,h,1+p/s.bu)}return this._projectSurfacePointToScreen(h)}_projectSurfacePointToScreen(t){const a=s.bk();return s.at(a,[...t,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],new s.P((.5*a[0]+.5)*this.width,(.5*-a[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,a){if(a){const h=a.pointCoordinate(t);if(h)return h}return s.$.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,a){var h;return(h=this.screenPointToMercatorCoordinate(t,a))===null||h===void 0?void 0:h.toLngLat()}isPointOnMapSurface(t,a){const h=this._cameraPosition,p=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(h,p)}getRayDirectionFromPixel(t){const a=s.bk();a[0]=t.x/this.width*2-1,a[1]=-1*(t.y/this.height*2-1),a[2]=1,a[3]=1,s.at(a,a,this._globeViewProjMatrixNoCorrectionInverted),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3];const h=s.bh();h[0]=a[0]-this._cameraPosition[0],h[1]=a[1]-this._cameraPosition[1],h[2]=a[2]-this._cameraPosition[2];const p=s.bh();return s.aT(p,h),p}isSurfacePointVisible(t){const a=this._cachedClippingPlane;return a[0]*t[0]+a[1]*t[1]+a[2]*t[2]+a[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const a=s.bk();return s.at(a,[...t,1],this._globeViewProjMatrixNoCorrection),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3],a[0]>-1&&a[0]<1&&a[1]>-1&&a[1]<1&&a[2]>-1&&a[2]<1}rayPlanetIntersection(t,a){const h=s.aV(t,a),p=s.bh(),y=s.bh();s.aO(y,a,h),s.aS(p,t,y);const x=1-s.aV(p,p);if(x<0)return null;const F=s.aV(t,t)-1,T=-h+(h<0?1:-1)*Math.sqrt(x),D=F/T,O=T;return{tMin:Math.min(D,O),tMax:Math.max(D,O)}}unprojectScreenPoint(t){const a=this._cameraPosition,h=this.getRayDirectionFromPixel(t),p=this.rayPlanetIntersection(a,h);if(p){const O=s.bh();s.aP(O,a,[h[0]*p.tMin,h[1]*p.tMin,h[2]*p.tMin]);const K=s.bh();return s.aT(K,O),po(K)}const y=this._cachedClippingPlane,x=y[0]*h[0]+y[1]*h[1]+y[2]*h[2],F=-s.bt(y,a)/x,T=s.bh();if(F>0)s.aP(T,a,[h[0]*F,h[1]*F,h[2]*F]);else{const O=s.bh();s.aP(O,a,[2*h[0],2*h[1],2*h[2]]);const K=s.bt(this._cachedClippingPlane,O);s.aS(T,O,[this._cachedClippingPlane[0]*K,this._cachedClippingPlane[1]*K,this._cachedClippingPlane[2]*K])}const D=function(O){const K=s.bh();return K[0]=O[0]*-O[3],K[1]=O[1]*-O[3],K[2]=O[2]*-O[3],{center:K,radius:Math.sqrt(1-O[3]*O[3])}}(y);return po(function(O,K,G){const Y=s.bh();s.aS(Y,G,O);const ie=s.bh();return s.bi(ie,O,Y,K/s.bj(Y)),ie}(D.center,D.radius,T))}getMatrixForModel(t,a){const h=s.Q.convert(t),p=1/s.bu,y=s.b1();return s.bp(y,y,h.lng/180*Math.PI),s.a$(y,y,-h.lat/180*Math.PI),s.L(y,y,[0,0,1+a/s.bu]),s.a$(y,y,.5*Math.PI),s.M(y,y,[p,p,p]),y}getProjectionDataForCustomLayer(t=!0){const a=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:t});return a.tileMercatorCoords=[0,0,1,1],a}getFastPathSimpleProjectionMatrix(t){}}class Go{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,a,h){return this._helper.interpolatePadding(t,a,h)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,a,h=!0){this._helper.resize(t,a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}overrideNearFarZ(t,a){this._helper.overrideNearFarZ(t,a)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,a){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=a,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(t,a)=>this.getConstrained(t,a)}),this._globeness=1,this._mercatorTransform=new wa,this._verticalPerspectiveTransform=new Is}clone(){const t=new Go;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const a=this._mercatorTransform.getProjectionData(t),h=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?h.mainMatrix:a.mainMatrix,clippingPlane:h.clippingPlane,tileMercatorCoords:h.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:a.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,a,h){const p=this._mercatorTransform.getPitchedTextCorrection(t,a,h),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,a,h);return s.bc(p,y,this._globeness)}projectTileCoordinates(t,a,h,p){return this.currentTransform.projectTileCoordinates(t,a,h,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,a){return this.currentTransform.lngLatToCameraDepth(t,a)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}getConstrained(t,a){return this.currentTransform.getConstrained(t,a)}calculateCenterFromCameraLngLatAlt(t,a,h,p){return this._helper.calculateCenterFromCameraLngLatAlt(t,a,h,p)}setLocationAtPoint(t,a){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,a),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,a),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,a){return this.currentTransform.locationToScreenPoint(t,a)}screenPointToMercatorCoordinate(t,a){return this.currentTransform.screenPointToMercatorCoordinate(t,a)}screenPointToLocation(t,a){return this.currentTransform.screenPointToLocation(t,a)}isPointOnMapSurface(t,a){return this.currentTransform.isPointOnMapSurface(t,a)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,a){return this.currentTransform.getMatrixForModel(t,a)}getProjectionDataForCustomLayer(t=!0){const a=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return a;const h=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return h.fallbackMatrix=a.mainMatrix,h}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class ka{get useGlobeControls(){return!0}handlePanInertia(t,a){const h=go(t,a);return Math.abs(h.lng-a.center.lng)>180&&(h.lng=a.center.lng+179.5*Math.sign(h.lng-a.center.lng)),{easingCenter:h,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,a){const h=t.around,p=a.screenPointToLocation(h);t.bearingDelta&&a.setBearing(a.bearing+t.bearingDelta),t.pitchDelta&&a.setPitch(a.pitch+t.pitchDelta),t.rollDelta&&a.setRoll(a.roll+t.rollDelta);const y=a.zoom;t.zoomDelta&&a.setZoom(a.zoom+t.zoomDelta);const x=a.zoom-y;if(x===0)return;const F=s.bq(a.center.lng,p.lng),T=F/(Math.abs(F/180)+1),D=s.bq(a.center.lat,p.lat),O=a.getRayDirectionFromPixel(h),K=a.cameraPosition,G=-1*s.aV(K,O),Y=s.bh();s.aP(Y,K,[O[0]*G,O[1]*G,O[2]*G]);const ie=s.bo(Y)-1,be=Math.exp(.5*-Math.max(ie-.3,0)),_e=Gi(a.worldSize,a.center.lat)/Math.min(a.width,a.height),we=s.bf(_e,.9,.5,1,.25),Te=(1-s.ac(-x))*Math.min(be,we),De=a.center.lat,Re=a.zoom,Ve=new s.Q(a.center.lng+T*Te,s.ae(a.center.lat+D*Te,-85.051129,s.af));a.setLocationAtPoint(p,h);const We=a.center,Ge=s.bf(Math.abs(F),45,85,0,1),ft=s.bf(_e,.75,.35,0,1),St=Math.pow(Math.max(Ge,ft),.25),wt=s.bq(We.lng,Ve.lng),bt=s.bq(We.lat,Ve.lat);a.setCenter(new s.Q(We.lng+wt*St,We.lat+bt*St).wrap()),a.setZoom(Re+wi(De,a.center.lat))}handleMapControlsPan(t,a,h){if(!t.panDelta)return;const p=a.center.lat,y=a.zoom;a.setCenter(go(t.panDelta,a).wrap()),a.setZoom(y+wi(p,a.center.lat))}cameraForBoxAndBearing(t,a,h,p,y){const x=Li(t,a,h,p,y),F=a.left/y.width*2-1,T=(y.width-a.right)/y.width*2-1,D=a.top/y.height*-2+1,O=(y.height-a.bottom)/y.height*-2+1,K=s.bq(h.getWest(),h.getEast())<0,G=K?h.getEast():h.getWest(),Y=K?h.getWest():h.getEast(),ie=Math.max(h.getNorth(),h.getSouth()),be=Math.min(h.getNorth(),h.getSouth()),_e=G+.5*s.bq(G,Y),we=ie+.5*s.bq(ie,be),Te=y.clone();Te.setCenter(x.center),Te.setBearing(x.bearing),Te.setPitch(0),Te.setRoll(0),Te.setZoom(x.zoom);const De=Te.modelViewProjectionMatrix,Re=[Vn(h.getNorthWest()),Vn(h.getNorthEast()),Vn(h.getSouthWest()),Vn(h.getSouthEast()),Vn(new s.Q(Y,we)),Vn(new s.Q(G,we)),Vn(new s.Q(_e,ie)),Vn(new s.Q(_e,be))],Ve=Vn(x.center);let We=Number.POSITIVE_INFINITY;for(const Ge of Re)F<0&&(We=ka.getLesserNonNegativeNonNull(We,ka.solveVectorScale(Ge,Ve,De,"x",F))),T>0&&(We=ka.getLesserNonNegativeNonNull(We,ka.solveVectorScale(Ge,Ve,De,"x",T))),D>0&&(We=ka.getLesserNonNegativeNonNull(We,ka.solveVectorScale(Ge,Ve,De,"y",D))),O<0&&(We=ka.getLesserNonNegativeNonNull(We,ka.solveVectorScale(Ge,Ve,De,"y",O)));if(Number.isFinite(We)&&We!==0)return x.zoom=Te.zoom+s.ah(We),x;Qi()}handleJumpToCenterZoom(t,a){const h=t.center.lat,p=t.getConstrained(a.center?s.Q.convert(a.center):t.center,t.zoom).center;t.setCenter(p.wrap());const y=a.zoom!==void 0?+a.zoom:t.zoom+wi(h,p.lat);t.zoom!==y&&t.setZoom(y)}handleEaseTo(t,a){const h=t.zoom,p=t.center,y=t.padding,x={roll:t.roll,pitch:t.pitch,bearing:t.bearing},F={roll:a.roll===void 0?t.roll:a.roll,pitch:a.pitch===void 0?t.pitch:a.pitch,bearing:a.bearing===void 0?t.bearing:a.bearing},T=a.zoom!==void 0,D=!t.isPaddingEqual(a.padding);let O=!1;const K=a.center?s.Q.convert(a.center):p,G=t.getConstrained(K,h).center;di(t,G);const Y=t.clone();Y.setCenter(G),Y.setZoom(T?+a.zoom:h+wi(p.lat,K.lat)),Y.setBearing(a.bearing);const ie=new s.P(s.ae(t.centerPoint.x+a.offsetAsPoint.x,0,t.width),s.ae(t.centerPoint.y+a.offsetAsPoint.y,0,t.height));Y.setLocationAtPoint(G,ie);const be=(a.offset&&a.offsetAsPoint.mag())>0?Y.center:G,_e=T?+a.zoom:h+wi(p.lat,be.lat),we=h+wi(p.lat,0),Te=_e+wi(be.lat,0),De=s.bq(p.lng,be.lng),Re=s.bq(p.lat,be.lat),Ve=s.ac(Te-we);return O=_e!==h,{easeFunc:We=>{if(s.b6(x,F)||sa({startEulerAngles:x,endEulerAngles:F,tr:t,k:We,useSlerp:x.roll!=F.roll}),D&&t.interpolatePadding(y,a.padding,We),a.around)s.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(a.around,a.aroundPoint);else{const Ge=Te>we?Math.min(2,Ve):Math.max(.5,Ve),ft=Math.pow(Ge,1-We),St=HA(p,De,Re,We*ft);t.setCenter(St.wrap())}if(O){const Ge=s.B.number(we,Te,We)+wi(0,t.center.lat);t.setZoom(Ge)}},isZooming:O,elevationCenter:be}}handleFlyTo(t,a){const h=a.zoom!==void 0,p=t.center,y=t.zoom,x=t.padding,F=!t.isPaddingEqual(a.padding),T=t.getConstrained(s.Q.convert(a.center||a.locationAtOffset),y).center,D=h?+a.zoom:t.zoom+wi(t.center.lat,T.lat),O=t.clone();O.setCenter(T),O.setZoom(D),O.setBearing(a.bearing);const K=new s.P(s.ae(t.centerPoint.x+a.offsetAsPoint.x,0,t.width),s.ae(t.centerPoint.y+a.offsetAsPoint.y,0,t.height));O.setLocationAtPoint(T,K);const G=O.center;di(t,G);const Y=function(Re,Ve,We){const Ge=Vn(Ve),ft=Vn(We),St=s.aV(Ge,ft),wt=Math.acos(St),bt=$a(Re);return wt/(2*Math.PI)*bt}(t,p,G),ie=y+wi(p.lat,0),be=D+wi(G.lat,0),_e=s.ac(be-ie);let we;if(typeof a.minZoom=="number"){const Re=+a.minZoom+wi(G.lat,0),Ve=Math.min(Re,ie,be)+wi(0,G.lat),We=t.getConstrained(G,Ve).zoom+wi(G.lat,0);we=s.ac(We-ie)}const Te=s.bq(p.lng,G.lng),De=s.bq(p.lat,G.lat);return{easeFunc:(Re,Ve,We,Ge)=>{const ft=HA(p,Te,De,We);F&&t.interpolatePadding(x,a.padding,Re);const St=Re===1?G:ft;t.setCenter(St.wrap());const wt=ie+s.ah(Ve);t.setZoom(Re===1?D:wt+wi(0,St.lat))},scaleOfZoom:_e,targetCenter:G,scaleOfMinZoom:we,pixelPathLength:Y}}static solveVectorScale(t,a,h,p,y){const x=p==="x"?[h[0],h[4],h[8],h[12]]:[h[1],h[5],h[9],h[13]],F=[h[3],h[7],h[11],h[15]],T=t[0]*x[0]+t[1]*x[1]+t[2]*x[2],D=t[0]*F[0]+t[1]*F[1]+t[2]*F[2],O=a[0]*x[0]+a[1]*x[1]+a[2]*x[2],K=a[0]*F[0]+a[1]*F[1]+a[2]*F[2];return O+y*D===T+y*K||F[3]*(T-O)+x[3]*(K-D)+T*K==O*D?null:(O+x[3]-y*K-y*F[3])/(O-T-y*K+y*D)}static getLesserNonNegativeNonNull(t,a){return a!==null&&a>=0&&a<t?a:t}}class cs{constructor(t){this._globe=t,this._mercatorCameraHelper=new uo,this._verticalPerspectiveCameraHelper=new ka}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,a){return this.currentHelper.handlePanInertia(t,a)}handleMapControlsRollPitchBearingZoom(t,a){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,a)}handleMapControlsPan(t,a,h){this.currentHelper.handleMapControlsPan(t,a,h)}cameraForBoxAndBearing(t,a,h,p,y){return this.currentHelper.cameraForBoxAndBearing(t,a,h,p,y)}handleJumpToCenterZoom(t,a){this.currentHelper.handleJumpToCenterZoom(t,a)}handleEaseTo(t,a){return this.currentHelper.handleEaseTo(t,a)}handleFlyTo(t,a){return this.currentHelper.handleFlyTo(t,a)}}const Ws=(m,t)=>s.x(m,t&&t.filter(a=>a.identifier!=="source.canvas")),El=s.bw();class Xs extends s.E{constructor(t,a={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const p=this.sourceCaches[h].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[h].reload()}},this.map=t,this.dispatcher=new ut(nt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,p)=>this.getGlyphs(h,p)),this.dispatcher.registerMessageHandler("GI",(h,p)=>this.getImages(h,p)),this.imageManager=new tt,this.imageManager.setEventedParent(this),this.glyphManager=new Se(t._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new No,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),pn().on(Hr,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const p=this.sourceCaches[h.sourceId];if(!p)return;const y=p.getSource();if(y&&y.vectorLayerIds)for(const x in this._layers){const F=this._layers[x];F.source===y.id&&this._validateLayer(F)}})}loadURL(t,a={},h){this.fire(new s.l("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const p=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;s.j(p,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,a,h)}).catch(x=>{this._loadStyleRequest=null,x&&!y.signal.aborted&&this.fire(new s.k(x))})}loadJSON(t,a={},h){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,Q.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(t,a,h)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(El,{validate:!1})}_load(t,a,h){var p,y;const x=a.transformStyle?a.transformStyle(h,t):t;if(!a.validate||!Ws(this,s.y(x))){this._loaded=!0,this.stylesheet=x;for(const F in x.sources)this.addSource(F,x.sources[F],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new mt(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new gt(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const t=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of t){const h=s.bA(a);h.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=h}}_loadSprite(t,a=!1,h=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,x,F,T){return s._(this,void 0,void 0,function*(){const D=Oe(y),O=F>1?"@2x":"",K={},G={};for(const{id:Y,url:ie}of D){const be=x.transformRequest(ve(ie,O,".json"),"SpriteJSON");K[Y]=s.j(be,T);const _e=x.transformRequest(ve(ie,O,".png"),"SpriteImage");G[Y]=ze.getImage(_e,T)}return yield Promise.all([...Object.values(K),...Object.values(G)]),function(Y,ie){return s._(this,void 0,void 0,function*(){const be={};for(const _e in Y){be[_e]={};const we=Q.getImageCanvasContext((yield ie[_e]).data),Te=(yield Y[_e]).data;for(const De in Te){const{width:Re,height:Ve,x:We,y:Ge,sdf:ft,pixelRatio:St,stretchX:wt,stretchY:bt,content:It,textFitWidth:Yt,textFitHeight:Zt}=Te[De];be[_e][De]={data:null,pixelRatio:St,sdf:ft,stretchX:wt,stretchY:bt,content:It,textFitWidth:Yt,textFitHeight:Zt,spriteData:{width:Re,height:Ve,x:We,y:Ge,context:we}}}}return be})}(K,G)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const x in y){this._spritesImagesIds[x]=[];const F=this._spritesImagesIds[x]?this._spritesImagesIds[x].filter(T=>!(T in y)):[];for(const T of F)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(const T in y[x]){const D=x==="default"?T:`${x}:${T}`;this._spritesImagesIds[x].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,y[x][T],!1):this.imageManager.addImage(D,y[x][T]),a&&(this._changedImages[D]=!0)}}}).catch(y=>{this._spriteRequest=null,p=y,this.fire(new s.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),h&&h(p)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(t){const a=this.sourceCaches[t.source];if(!a)return;const h=t.sourceLayer;if(!h)return;const p=a.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(h)===-1)&&this.fire(new s.k(new Error(`Source layer "${h}" does not exist on source "${p.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,a=!1){const h=this._serializedAllLayers();if(!t||t.length===0)return Object.values(a?s.bB(h):h);const p=[];for(const y of t)if(h[y]){const x=a?s.bB(h[y]):h[y];p.push(x)}return p}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const a=Object.keys(this._layers);for(const h of a){const p=this._layers[h];p.type!=="custom"&&(t[h]=p.serialize())}return t}hasTransitions(){var t,a,h;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((a=this.sky)===null||a===void 0)&&a.hasTransition()||!((h=this.projection)===null||h===void 0)&&h.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const a=this._changed;if(a){const p=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(p.length||y.length)&&this._updateWorkerLayers(p,y);for(const x in this._updatedSources){const F=this._updatedSources[x];if(F==="reload")this._reloadSource(x);else{if(F!=="clear")throw new Error(`Invalid action ${F}`);this._clearSource(x)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const x in this._updatedPaintProps)this._layers[x].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const h={};for(const p in this.sourceCaches){const y=this.sourceCaches[p];h[p]=y.used,y.used=!1}for(const p of this._order){const y=this._layers[p];y.recalculate(t,this._availableImages),!y.isHidden(t.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const p in h){const y=this.sourceCaches[p];!!h[p]!=!!y.used&&y.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,a&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,a={}){var h;this._checkLoaded();const p=this.serialize();if(t=a.transformStyle?a.transformStyle(p,t):t,((h=a.validate)===null||h===void 0||h)&&Ws(this,s.y(t)))return!1;(t=s.bB(t)).layers=s.bz(t.layers);const y=s.bC(p,t),x=this._getOperationsToPerform(y);if(x.unimplemented.length>0)throw new Error(`Unimplemented: ${x.unimplemented.join(", ")}.`);if(x.operations.length===0)return!1;for(const F of x.operations)F();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const a=[],h=[];for(const p of t)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":a.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":a.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":a.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setTransition":a.push(()=>{});break;default:h.push(p.command)}return{operations:a,unimplemented:h}}addImage(t,a){if(this.getImage(t))return this.fire(new s.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,a),this._afterImageUpdated(t)}updateImage(t,a){this.imageManager.updateImage(t,a)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new s.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,a,h={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(s.y.source,`sources.${t}`,a,null,h))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const p=this.sourceCaches[t]=new Ze(t,a,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:t})),p.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===t)return this.fire(new s.k(new Error(`Source "${t}" cannot be removed while layer "${h}" is using it.`)));const a=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],a.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,a){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const h=this.sourceCaches[t].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(a),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,a,h={}){this._checkLoaded();const p=t.id;if(this.getLayer(p))return void this.fire(new s.k(new Error(`Layer "${p}" already exists on this map.`)));let y;if(t.type==="custom"){if(Ws(this,s.bD(t)))return;y=s.bA(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(p,t.source),t=s.bB(t),t=s.e(t,{source:p})),this._validate(s.y.layer,`layers.${p}`,t,{arrayIndex:-1},h))return;y=s.bA(t),this._validateLayer(y),y.setEventedParent(this,{layer:{id:p}})}const x=a?this._order.indexOf(a):this._order.length;if(a&&x===-1)this.fire(new s.k(new Error(`Cannot add layer "${p}" before non-existing layer "${a}".`)));else{if(this._order.splice(x,0,p),this._layerOrderChanged=!0,this._layers[p]=y,this._removedLayers[p]&&y.source&&y.type!=="custom"){const F=this._removedLayers[p];delete this._removedLayers[p],F.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(t,a){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new s.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===a)return;const h=this._order.indexOf(t);this._order.splice(h,1);const p=a?this._order.indexOf(a):this._order.length;a&&p===-1?this.fire(new s.k(new Error(`Cannot move layer "${t}" before non-existing layer "${a}".`))):(this._order.splice(p,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const a=this._layers[t];if(!a)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${t}".`)));a.setEventedParent(null);const h=this._order.indexOf(t);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=a,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],a.onRemove&&a.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,a,h){this._checkLoaded();const p=this.getLayer(t);p?p.minzoom===a&&p.maxzoom===h||(a!=null&&(p.minzoom=a),h!=null&&(p.maxzoom=h),this._updateLayer(p)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,a,h={}){this._checkLoaded();const p=this.getLayer(t);if(p){if(!s.bE(p.filter,a))return a==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(s.y.filter,`layers.${p.id}.filter`,a,null,h)||(p.filter=s.bB(a),this._updateLayer(p)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return s.bB(this.getLayer(t).filter)}setLayoutProperty(t,a,h,p={}){this._checkLoaded();const y=this.getLayer(t);y?s.bE(y.getLayoutProperty(a),h)||(y.setLayoutProperty(a,h,p),this._updateLayer(y)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,a){const h=this.getLayer(t);if(h)return h.getLayoutProperty(a);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,a,h,p={}){this._checkLoaded();const y=this.getLayer(t);y?s.bE(y.getPaintProperty(a),h)||(y.setPaintProperty(a,h,p)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,a){return this.getLayer(t).getPaintProperty(a)}setFeatureState(t,a){this._checkLoaded();const h=t.source,p=t.sourceLayer,y=this.sourceCaches[h];if(y===void 0)return void this.fire(new s.k(new Error(`The source '${h}' does not exist in the map's style.`)));const x=y.getSource().type;x==="geojson"&&p?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):x!=="vector"||p?(t.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(p,t.id,a)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,a){this._checkLoaded();const h=t.source,p=this.sourceCaches[h];if(p===void 0)return void this.fire(new s.k(new Error(`The source '${h}' does not exist in the map's style.`)));const y=p.getSource().type,x=y==="vector"?t.sourceLayer:void 0;y!=="vector"||x?a&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(x,t.id,a):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const a=t.source,h=t.sourceLayer,p=this.sourceCaches[a];if(p!==void 0)return p.getSource().type!=="vector"||h?(t.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(h,t.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=s.bF(this.sourceCaches,y=>y.serialize()),a=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,p=this.stylesheet;return s.bG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:t,layers:a,terrain:h},y=>y!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const a=x=>this._layers[x].type==="fill-extrusion",h={},p=[];for(let x=this._order.length-1;x>=0;x--){const F=this._order[x];if(a(F)){h[F]=x;for(const T of t){const D=T[F];if(D)for(const O of D)p.push(O)}}}p.sort((x,F)=>F.intersectionZ-x.intersectionZ);const y=[];for(let x=this._order.length-1;x>=0;x--){const F=this._order[x];if(a(F))for(let T=p.length-1;T>=0;T--){const D=p[T].feature;if(h[D.layer.id]<x)break;y.push(D),p.pop()}else for(const T of t){const D=T[F];if(D)for(const O of D)y.push(O.feature)}}return y}queryRenderedFeatures(t,a,h){a&&a.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",a.filter,null,a);const p={};if(a&&a.layers){if(!(Array.isArray(a.layers)||a.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const D of a.layers){const O=this._layers[D];if(!O)return this.fire(new s.k(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];p[O.source]=!0}}const y=[];a.availableImages=this._availableImages;const x=this._serializedAllLayers(),F=a.layers instanceof Set?a.layers:Array.isArray(a.layers)?new Set(a.layers):null,T=Object.assign(Object.assign({},a),{layers:F});for(const D in this.sourceCaches)a.layers&&!p[D]||y.push(tr(this.sourceCaches[D],this._layers,x,t,T,h,this.map.terrain?(O,K,G)=>this.map.terrain.getElevation(O,K,G):void 0));return this.placement&&y.push(function(D,O,K,G,Y,ie,be){const _e={},we=ie.queryRenderedSymbols(G),Te=[];for(const De of Object.keys(we).map(Number))Te.push(be[De]);Te.sort(ot);for(const De of Te){const Re=De.featureIndex.lookupSymbolFeatures(we[De.bucketInstanceId],O,De.bucketIndex,De.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,D);for(const Ve in Re){const We=_e[Ve]=_e[Ve]||[],Ge=Re[Ve];Ge.sort((ft,St)=>{const wt=De.featureSortOrder;if(wt){const bt=wt.indexOf(ft.featureIndex);return wt.indexOf(St.featureIndex)-bt}return St.featureIndex-ft.featureIndex});for(const ft of Ge)We.push(ft)}}return function(De,Re,Ve){for(const We in De)for(const Ge of De[We])Ut(Ge,Ve[Re[We].source]);return De}(_e,D,K)}(this._layers,x,this.sourceCaches,t,T,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(t,a){a&&a.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",a.filter,null,a);const h=this.sourceCaches[t];return h?function(p,y){const x=p.getRenderableIds().map(D=>p.getTileByID(D)),F=[],T={};for(let D=0;D<x.length;D++){const O=x[D],K=O.tileID.canonical.key;T[K]||(T[K]=!0,O.querySourceFeatures(F,y))}return F}(h,a):[]}getLight(){return this.light.getLight()}setLight(t,a={}){this._checkLoaded();const h=this.light.getLight();let p=!1;for(const x in t)if(!s.bE(t[x],h[x])){p=!0;break}if(!p)return;const y={now:Q.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,a),this.light.updateTransitions(y)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,a={}){this._checkLoaded();const h=this.getSky();let p=!1;if(!t&&!h)return;if(t&&!h)p=!0;else if(!t&&h)p=!0;else for(const x in t)if(!s.bE(t[x],h[x])){p=!0;break}if(!p)return;const y={now:Q.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,a),this.sky.updateTransitions(y)}_setProjectionInternal(t){const a=function(h){if(Array.isArray(h)){const p=new Za({type:h});return{projection:p,transform:new Go,cameraHelper:new cs(p)}}switch(h){case"mercator":return{projection:new Zs,transform:new wa,cameraHelper:new uo};case"globe":{const p=new Za({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new Go,cameraHelper:new cs(p)}}case"vertical-perspective":return{projection:new Vo,transform:new Is,cameraHelper:new ka};default:return s.w(`Unknown projection name: ${h}. Falling back to mercator projection.`),{projection:new Zs,transform:new wa,cameraHelper:new uo}}}(t);this.projection=a.projection,this.map.migrateProjection(a.transform,a.cameraHelper);for(const h in this.sourceCaches)this.sourceCaches[h].reload()}_validate(t,a,h,p,y={}){return(!y||y.validate!==!1)&&Ws(this,t.call(s.y,s.e({key:a,style:this.serialize(),value:h,styleSpec:s.v},p)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),pn().off(Hr,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const h=this.sourceCaches[a];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const a in this.sourceCaches)this.sourceCaches[a].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,a,h,p,y=!1){let x=!1,F=!1;const T={};for(const D of this._order){const O=this._layers[D];if(O.type!=="symbol")continue;if(!T[O.source]){const G=this.sourceCaches[O.source];T[O.source]=G.getRenderableIds(!0).map(Y=>G.getTileByID(Y)).sort((Y,ie)=>ie.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(ie.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(O,T[O.source],t.center.lng);x=x||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Q.now(),t.zoom))&&(this.pauseablePlacement=new RA(t,this.map.terrain,this._order,y,a,h,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Q.now()),F=!0),x&&this.pauseablePlacement.placement.setStale()),F||x)for(const D of this._order){const O=this._layers[D];O.type==="symbol"&&this.placement.updateLayerOpacities(O,T[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Q.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,a){return s._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,a.icons),h})}getGlyphs(t,a){return s._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(a.stacks),p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,a={}){this._checkLoaded(),t&&this._validate(s.y.glyphs,"glyphs",t,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,a,h={},p){this._checkLoaded();const y=[{id:t,url:a}],x=[...Oe(this.stylesheet.sprite),...y];this._validate(s.y.sprite,"sprite",x,null,h)||(this.stylesheet.sprite=x,this._loadSprite(y,!0,p))}removeSprite(t){this._checkLoaded();const a=Oe(this.stylesheet.sprite);if(a.find(h=>h.id===t)){if(this._spritesImagesIds[t])for(const h of this._spritesImagesIds[t])this.imageManager.removeImage(h),this._changedImages[h]=!0;a.splice(a.findIndex(h=>h.id===t),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Oe(this.stylesheet.sprite)}setSprite(t,a={},h){this._checkLoaded(),t&&this._validate(s.y.sprite,"sprite",t,null,a)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,h):(this._unloadSprite(),h&&h(null)))}}var Sl=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class U{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,a,h,p,y,x,F,T,D){this.context=t;let O=this.boundPaintVertexBuffers.length!==p.length;for(let K=0;!O&&K<p.length;K++)this.boundPaintVertexBuffers[K]!==p[K]&&(O=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==h||O||this.boundIndexBuffer!==y||this.boundVertexOffset!==x||this.boundDynamicVertexBuffer!==F||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==D?this.freshBind(a,h,p,y,x,F,T,D):(t.bindVertexArray.set(this.vao),F&&F.bind(),y&&y.dynamicDraw&&y.bind(),T&&T.bind(),D&&D.bind())}freshBind(t,a,h,p,y,x,F,T){const D=t.numAttributes,O=this.context,K=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=p,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=x,this.boundDynamicVertexBuffer2=F,this.boundDynamicVertexBuffer3=T,a.enableAttributes(K,t);for(const G of h)G.enableAttributes(K,t);x&&x.enableAttributes(K,t),F&&F.enableAttributes(K,t),T&&T.enableAttributes(K,t),a.bind(),a.setVertexAttribPointers(K,t,y);for(const G of h)G.bind(),G.setVertexAttribPointers(K,t,y);x&&(x.bind(),x.setVertexAttribPointers(K,t,y)),p&&p.bind(),F&&(F.bind(),F.setVertexAttribPointers(K,t,y)),T&&(T.bind(),T.setVertexAttribPointers(K,t,y)),O.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const re=(m,t,a,h,p)=>({u_texture:0,u_ele_delta:m,u_fog_matrix:t,u_fog_color:a?a.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:a?a.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:a?a.calculateFogBlendOpacity(h):0,u_horizon_color:a?a.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:a?a.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),Ee={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function $e(m){const t=[];for(let a=0;a<m.length;a++){if(m[a]===null)continue;const h=m[a].split(" ");t.push(h.pop())}return t}class ct{constructor(t,a,h,p,y,x,F,T,D=[]){const O=t.gl;this.program=O.createProgram();const K=$e(a.staticAttributes),G=h?h.getBinderAttributes():[],Y=K.concat(G),ie=Si.prelude.staticUniforms?$e(Si.prelude.staticUniforms):[],be=F.staticUniforms?$e(F.staticUniforms):[],_e=a.staticUniforms?$e(a.staticUniforms):[],we=h?h.getBinderUniforms():[],Te=ie.concat(be).concat(_e).concat(we),De=[];for(const wt of Te)De.indexOf(wt)<0&&De.push(wt);const Re=h?h.defines():[];Ai(O)&&Re.unshift("#version 300 es"),y&&Re.push("#define OVERDRAW_INSPECTOR;"),x&&Re.push("#define TERRAIN3D;"),T&&Re.push(T),D&&Re.push(...D);let Ve=Re.concat(Si.prelude.fragmentSource,F.fragmentSource,a.fragmentSource).join(`
`),We=Re.concat(Si.prelude.vertexSource,F.vertexSource,a.vertexSource).join(`
`);Ai(O)||(Ve=function(wt){return wt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ve),We=function(wt){return wt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(We));const Ge=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Ge,Ve),O.compileShader(Ge),!O.getShaderParameter(Ge,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(Ge)}`);O.attachShader(this.program,Ge);const ft=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(ft,We),O.compileShader(ft),!O.getShaderParameter(ft,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(ft)}`);O.attachShader(this.program,ft),this.attributes={};const St={};this.numAttributes=Y.length;for(let wt=0;wt<this.numAttributes;wt++)Y[wt]&&(O.bindAttribLocation(this.program,wt,Y[wt]),this.attributes[Y[wt]]=wt);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(ft),O.deleteShader(Ge);for(let wt=0;wt<De.length;wt++){const bt=De[wt];if(bt&&!St[bt]){const It=O.getUniformLocation(this.program,bt);It&&(St[bt]=It)}}this.fixedUniforms=p(t,St),this.terrainUniforms=((wt,bt)=>({u_depth:new s.bH(wt,bt.u_depth),u_terrain:new s.bH(wt,bt.u_terrain),u_terrain_dim:new s.b8(wt,bt.u_terrain_dim),u_terrain_matrix:new s.bJ(wt,bt.u_terrain_matrix),u_terrain_unpack:new s.bK(wt,bt.u_terrain_unpack),u_terrain_exaggeration:new s.b8(wt,bt.u_terrain_exaggeration)}))(t,St),this.projectionUniforms=((wt,bt)=>({u_projection_matrix:new s.bJ(wt,bt.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(wt,bt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(wt,bt.u_projection_clipping_plane),u_projection_transition:new s.b8(wt,bt.u_projection_transition),u_projection_fallback_matrix:new s.bJ(wt,bt.u_projection_fallback_matrix)}))(t,St),this.binderUniforms=h?h.getUniforms(t,St):[]}draw(t,a,h,p,y,x,F,T,D,O,K,G,Y,ie,be,_e,we,Te,De){const Re=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(h),t.setStencilMode(p),t.setColorMode(y),t.setCullFace(x),T){t.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,T.depthTexture),t.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,T.texture);for(const We in this.terrainUniforms)this.terrainUniforms[We].set(T[We])}if(D)for(const We in D)this.projectionUniforms[Ee[We]].set(D[We]);if(F)for(const We in this.fixedUniforms)this.fixedUniforms[We].set(F[We]);_e&&_e.setUniforms(t,this.binderUniforms,ie,{zoom:be});let Ve=0;switch(a){case Re.LINES:Ve=2;break;case Re.TRIANGLES:Ve=3;break;case Re.LINE_STRIP:Ve=1}for(const We of Y.get()){const Ge=We.vaos||(We.vaos={});(Ge[O]||(Ge[O]=new U)).bind(t,this,K,_e?_e.getPaintVertexBuffers():[],G,We.vertexOffset,we,Te,De),Re.drawElements(a,We.primitiveLength*Ve,Re.UNSIGNED_SHORT,We.primitiveOffset*Ve*2)}}}function Mt(m,t,a){const h=1/s.az(a,1,t.transform.tileZoom),p=Math.pow(2,a.tileID.overscaledZ),y=a.tileSize*Math.pow(2,t.transform.tileZoom)/p,x=y*(a.tileID.canonical.x+a.tileID.wrap*p),F=y*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[h,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[x>>16,F>>16],u_pixel_coord_lower:[65535&x,65535&F]}}const Kt=(m,t,a,h)=>{const p=m.style.light,y=p.properties.get("position"),x=[y.x,y.y,y.z],F=s.bN();p.properties.get("anchor")==="viewport"&&s.bO(F,m.transform.bearingInRadians),s.bP(x,x,F);const T=m.transform.transformLightDirection(x),D=p.properties.get("color");return{u_lightpos:x,u_lightpos_globe:T,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+t,u_opacity:a,u_fill_translate:h}},lr=(m,t,a,h,p,y,x)=>s.e(Kt(m,t,a,h),Mt(y,m,x),{u_height_factor:-Math.pow(2,p.overscaledZ)/x.tileSize/8}),Lr=(m,t,a,h)=>s.e(Mt(t,m,a),{u_fill_translate:h}),Gr=(m,t)=>({u_world:m,u_fill_translate:t}),zr=(m,t,a,h,p)=>s.e(Lr(m,t,a,p),{u_world:h}),ln=(m,t,a,h,p)=>{const y=m.transform;let x,F,T=0;if(a.paint.get("circle-pitch-alignment")==="map"){const D=s.az(t,1,y.zoom);x=!0,F=[D,D],T=D/(s.Z*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*p}else x=!1,F=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(a.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+x,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:F,u_globe_extrude_scale:T,u_translate:h}},ri=m=>({u_pixel_extrude_scale:[1/m.width,1/m.height]}),Gn=m=>({u_viewport_size:[m.width,m.height]}),pi=(m,t=1)=>({u_color:m,u_overlay:0,u_overlay_scale:t}),li=(m,t,a,h)=>{const p=s.az(m,1,t)/(s.Z*Math.pow(2,m.tileID.overscaledZ))*2*Math.PI*h;return{u_extrude_scale:s.az(m,1,t),u_intensity:a,u_globe_extrude_scale:p}},Mi=(m,t,a,h)=>{const p=s.K();s.bQ(p,0,m.width,m.height,0,0,1);const y=m.context.gl;return{u_matrix:p,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:a,u_color_ramp:h,u_opacity:t.paint.get("heatmap-opacity")}},us=(m,t,a)=>{const h=a.paint.get("hillshade-accent-color");let p;switch(a.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const y=a.getIlluminationProperties();for(let x=0;x<y.directionRadians.length;x++)a.paint.get("hillshade-illumination-anchor")==="viewport"&&(y.directionRadians[x]+=m.transform.bearingInRadians);return{u_image:0,u_latrange:Fs(0,t.tileID),u_exaggeration:a.paint.get("hillshade-exaggeration"),u_altitudes:y.altitudeRadians,u_azimuths:y.directionRadians,u_accent:h,u_method:p,u_highlights:y.highlightColor,u_shadows:y.shadowColor}},Wa=(m,t)=>{const a=t.stride,h=s.K();return s.bQ(h,0,s.Z,-8192,0,0,1),s.L(h,h,[0,-8192,0]),{u_matrix:h,u_image:1,u_dimension:[a,a],u_zoom:m.overscaledZ,u_unpack:t.getUnpackVector()}};function Fs(m,t){const a=Math.pow(2,t.canonical.z),h=t.canonical.y;return[new s.$(0,h/a).toLngLat().lat,new s.$(0,(h+1)/a).toLngLat().lat]}const Ko=(m,t,a,h)=>{const p=m.transform;return{u_translation:hs(m,t,a),u_ratio:h/s.az(t,1,p.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},jA=(m,t,a,h,p)=>s.e(Ko(m,t,a,h),{u_image:0,u_image_height:p}),VA=(m,t,a,h,p)=>{const y=m.transform,x=cA(t,y);return{u_translation:hs(m,t,a),u_texsize:t.imageAtlasTexture.size,u_ratio:h/s.az(t,1,y.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[x,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},lA=(m,t,a,h,p,y)=>{const x=m.lineAtlas,F=cA(t,m.transform),T=a.layout.get("line-cap")==="round",D=x.getDash(p.from,T),O=x.getDash(p.to,T),K=D.width*y.fromScale,G=O.width*y.toScale;return s.e(Ko(m,t,a,h),{u_patternscale_a:[F/K,-D.height/2],u_patternscale_b:[F/G,-O.height/2],u_sdfgamma:x.width/(256*Math.min(K,G)*m.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:O.y,u_mix:y.t})};function cA(m,t){return 1/s.az(m,1,t.tileZoom)}function hs(m,t,a){return s.aA(m.transform,t,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const uA=(m,t,a,h,p)=>{return{u_tl_parent:m,u_scale_parent:t,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(x=h.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(y=h.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Di(h.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var y,x};function Di(m){m*=Math.PI/180;const t=Math.sin(m),a=Math.cos(m);return[(2*a+1)/3,(-Math.sqrt(3)*t-a+1)/3,(Math.sqrt(3)*t-a+1)/3]}const Es=(m,t,a,h,p,y,x,F,T,D,O,K,G)=>{const Y=x.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:Y.width/Y.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_label_plane_matrix:F,u_coord_matrix:T,u_is_text:+O,u_pitch_with_map:+h,u_is_along_line:p,u_is_variable_anchor:y,u_texsize:K,u_texture:0,u_translation:D,u_pitched_scale:G}},hA=(m,t,a,h,p,y,x,F,T,D,O,K,G,Y)=>{const ie=x.transform;return s.e(Es(m,t,a,h,p,y,x,F,T,D,O,K,Y),{u_gamma_scale:h?Math.cos(ie.pitch*Math.PI/180)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:x.pixelRatio,u_is_halo:1})},mo=(m,t,a,h,p,y,x,F,T,D,O,K,G)=>s.e(hA(m,t,a,h,p,y,x,F,T,D,!0,O,0,G),{u_texsize_icon:K,u_texture_icon:1}),Tl=(m,t)=>({u_opacity:m,u_color:t}),Qa=(m,t,a,h,p)=>s.e(function(y,x,F,T){const D=F.imageManager.getPattern(y.from.toString()),O=F.imageManager.getPattern(y.to.toString()),{width:K,height:G}=F.imageManager.getPixelSize(),Y=Math.pow(2,T.tileID.overscaledZ),ie=T.tileSize*Math.pow(2,F.transform.tileZoom)/Y,be=ie*(T.tileID.canonical.x+T.tileID.wrap*Y),_e=ie*T.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[K,G],u_mix:x.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:x.fromScale,u_scale_b:x.toScale,u_tile_units_to_pixels:1/s.az(T,1,F.transform.tileZoom),u_pixel_coord_upper:[be>>16,_e>>16],u_pixel_coord_lower:[65535&be,65535&_e]}}(a,p,t,h),{u_opacity:m}),Ll=(m,t)=>{},GA={fillExtrusion:(m,t)=>({u_lightpos:new s.bL(m,t.u_lightpos),u_lightpos_globe:new s.bL(m,t.u_lightpos_globe),u_lightintensity:new s.b8(m,t.u_lightintensity),u_lightcolor:new s.bL(m,t.u_lightcolor),u_vertical_gradient:new s.b8(m,t.u_vertical_gradient),u_opacity:new s.b8(m,t.u_opacity),u_fill_translate:new s.bM(m,t.u_fill_translate)}),fillExtrusionPattern:(m,t)=>({u_lightpos:new s.bL(m,t.u_lightpos),u_lightpos_globe:new s.bL(m,t.u_lightpos_globe),u_lightintensity:new s.b8(m,t.u_lightintensity),u_lightcolor:new s.bL(m,t.u_lightcolor),u_vertical_gradient:new s.b8(m,t.u_vertical_gradient),u_height_factor:new s.b8(m,t.u_height_factor),u_opacity:new s.b8(m,t.u_opacity),u_fill_translate:new s.bM(m,t.u_fill_translate),u_image:new s.bH(m,t.u_image),u_texsize:new s.bM(m,t.u_texsize),u_pixel_coord_upper:new s.bM(m,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,t.u_pixel_coord_lower),u_scale:new s.bL(m,t.u_scale),u_fade:new s.b8(m,t.u_fade)}),fill:(m,t)=>({u_fill_translate:new s.bM(m,t.u_fill_translate)}),fillPattern:(m,t)=>({u_image:new s.bH(m,t.u_image),u_texsize:new s.bM(m,t.u_texsize),u_pixel_coord_upper:new s.bM(m,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,t.u_pixel_coord_lower),u_scale:new s.bL(m,t.u_scale),u_fade:new s.b8(m,t.u_fade),u_fill_translate:new s.bM(m,t.u_fill_translate)}),fillOutline:(m,t)=>({u_world:new s.bM(m,t.u_world),u_fill_translate:new s.bM(m,t.u_fill_translate)}),fillOutlinePattern:(m,t)=>({u_world:new s.bM(m,t.u_world),u_image:new s.bH(m,t.u_image),u_texsize:new s.bM(m,t.u_texsize),u_pixel_coord_upper:new s.bM(m,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,t.u_pixel_coord_lower),u_scale:new s.bL(m,t.u_scale),u_fade:new s.b8(m,t.u_fade),u_fill_translate:new s.bM(m,t.u_fill_translate)}),circle:(m,t)=>({u_camera_to_center_distance:new s.b8(m,t.u_camera_to_center_distance),u_scale_with_map:new s.bH(m,t.u_scale_with_map),u_pitch_with_map:new s.bH(m,t.u_pitch_with_map),u_extrude_scale:new s.bM(m,t.u_extrude_scale),u_device_pixel_ratio:new s.b8(m,t.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(m,t.u_globe_extrude_scale),u_translate:new s.bM(m,t.u_translate)}),collisionBox:(m,t)=>({u_pixel_extrude_scale:new s.bM(m,t.u_pixel_extrude_scale)}),collisionCircle:(m,t)=>({u_viewport_size:new s.bM(m,t.u_viewport_size)}),debug:(m,t)=>({u_color:new s.bI(m,t.u_color),u_overlay:new s.bH(m,t.u_overlay),u_overlay_scale:new s.b8(m,t.u_overlay_scale)}),depth:Ll,clippingMask:Ll,heatmap:(m,t)=>({u_extrude_scale:new s.b8(m,t.u_extrude_scale),u_intensity:new s.b8(m,t.u_intensity),u_globe_extrude_scale:new s.b8(m,t.u_globe_extrude_scale)}),heatmapTexture:(m,t)=>({u_matrix:new s.bJ(m,t.u_matrix),u_world:new s.bM(m,t.u_world),u_image:new s.bH(m,t.u_image),u_color_ramp:new s.bH(m,t.u_color_ramp),u_opacity:new s.b8(m,t.u_opacity)}),hillshade:(m,t)=>({u_image:new s.bH(m,t.u_image),u_latrange:new s.bM(m,t.u_latrange),u_exaggeration:new s.b8(m,t.u_exaggeration),u_altitudes:new s.bS(m,t.u_altitudes),u_azimuths:new s.bS(m,t.u_azimuths),u_accent:new s.bI(m,t.u_accent),u_method:new s.bH(m,t.u_method),u_shadows:new s.bR(m,t.u_shadows),u_highlights:new s.bR(m,t.u_highlights)}),hillshadePrepare:(m,t)=>({u_matrix:new s.bJ(m,t.u_matrix),u_image:new s.bH(m,t.u_image),u_dimension:new s.bM(m,t.u_dimension),u_zoom:new s.b8(m,t.u_zoom),u_unpack:new s.bK(m,t.u_unpack)}),line:(m,t)=>({u_translation:new s.bM(m,t.u_translation),u_ratio:new s.b8(m,t.u_ratio),u_device_pixel_ratio:new s.b8(m,t.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,t.u_units_to_pixels)}),lineGradient:(m,t)=>({u_translation:new s.bM(m,t.u_translation),u_ratio:new s.b8(m,t.u_ratio),u_device_pixel_ratio:new s.b8(m,t.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,t.u_units_to_pixels),u_image:new s.bH(m,t.u_image),u_image_height:new s.b8(m,t.u_image_height)}),linePattern:(m,t)=>({u_translation:new s.bM(m,t.u_translation),u_texsize:new s.bM(m,t.u_texsize),u_ratio:new s.b8(m,t.u_ratio),u_device_pixel_ratio:new s.b8(m,t.u_device_pixel_ratio),u_image:new s.bH(m,t.u_image),u_units_to_pixels:new s.bM(m,t.u_units_to_pixels),u_scale:new s.bL(m,t.u_scale),u_fade:new s.b8(m,t.u_fade)}),lineSDF:(m,t)=>({u_translation:new s.bM(m,t.u_translation),u_ratio:new s.b8(m,t.u_ratio),u_device_pixel_ratio:new s.b8(m,t.u_device_pixel_ratio),u_units_to_pixels:new s.bM(m,t.u_units_to_pixels),u_patternscale_a:new s.bM(m,t.u_patternscale_a),u_patternscale_b:new s.bM(m,t.u_patternscale_b),u_sdfgamma:new s.b8(m,t.u_sdfgamma),u_image:new s.bH(m,t.u_image),u_tex_y_a:new s.b8(m,t.u_tex_y_a),u_tex_y_b:new s.b8(m,t.u_tex_y_b),u_mix:new s.b8(m,t.u_mix)}),raster:(m,t)=>({u_tl_parent:new s.bM(m,t.u_tl_parent),u_scale_parent:new s.b8(m,t.u_scale_parent),u_buffer_scale:new s.b8(m,t.u_buffer_scale),u_fade_t:new s.b8(m,t.u_fade_t),u_opacity:new s.b8(m,t.u_opacity),u_image0:new s.bH(m,t.u_image0),u_image1:new s.bH(m,t.u_image1),u_brightness_low:new s.b8(m,t.u_brightness_low),u_brightness_high:new s.b8(m,t.u_brightness_high),u_saturation_factor:new s.b8(m,t.u_saturation_factor),u_contrast_factor:new s.b8(m,t.u_contrast_factor),u_spin_weights:new s.bL(m,t.u_spin_weights),u_coords_top:new s.bK(m,t.u_coords_top),u_coords_bottom:new s.bK(m,t.u_coords_bottom)}),symbolIcon:(m,t)=>({u_is_size_zoom_constant:new s.bH(m,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,t.u_is_size_feature_constant),u_size_t:new s.b8(m,t.u_size_t),u_size:new s.b8(m,t.u_size),u_camera_to_center_distance:new s.b8(m,t.u_camera_to_center_distance),u_pitch:new s.b8(m,t.u_pitch),u_rotate_symbol:new s.bH(m,t.u_rotate_symbol),u_aspect_ratio:new s.b8(m,t.u_aspect_ratio),u_fade_change:new s.b8(m,t.u_fade_change),u_label_plane_matrix:new s.bJ(m,t.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,t.u_coord_matrix),u_is_text:new s.bH(m,t.u_is_text),u_pitch_with_map:new s.bH(m,t.u_pitch_with_map),u_is_along_line:new s.bH(m,t.u_is_along_line),u_is_variable_anchor:new s.bH(m,t.u_is_variable_anchor),u_texsize:new s.bM(m,t.u_texsize),u_texture:new s.bH(m,t.u_texture),u_translation:new s.bM(m,t.u_translation),u_pitched_scale:new s.b8(m,t.u_pitched_scale)}),symbolSDF:(m,t)=>({u_is_size_zoom_constant:new s.bH(m,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,t.u_is_size_feature_constant),u_size_t:new s.b8(m,t.u_size_t),u_size:new s.b8(m,t.u_size),u_camera_to_center_distance:new s.b8(m,t.u_camera_to_center_distance),u_pitch:new s.b8(m,t.u_pitch),u_rotate_symbol:new s.bH(m,t.u_rotate_symbol),u_aspect_ratio:new s.b8(m,t.u_aspect_ratio),u_fade_change:new s.b8(m,t.u_fade_change),u_label_plane_matrix:new s.bJ(m,t.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,t.u_coord_matrix),u_is_text:new s.bH(m,t.u_is_text),u_pitch_with_map:new s.bH(m,t.u_pitch_with_map),u_is_along_line:new s.bH(m,t.u_is_along_line),u_is_variable_anchor:new s.bH(m,t.u_is_variable_anchor),u_texsize:new s.bM(m,t.u_texsize),u_texture:new s.bH(m,t.u_texture),u_gamma_scale:new s.b8(m,t.u_gamma_scale),u_device_pixel_ratio:new s.b8(m,t.u_device_pixel_ratio),u_is_halo:new s.bH(m,t.u_is_halo),u_translation:new s.bM(m,t.u_translation),u_pitched_scale:new s.b8(m,t.u_pitched_scale)}),symbolTextAndIcon:(m,t)=>({u_is_size_zoom_constant:new s.bH(m,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(m,t.u_is_size_feature_constant),u_size_t:new s.b8(m,t.u_size_t),u_size:new s.b8(m,t.u_size),u_camera_to_center_distance:new s.b8(m,t.u_camera_to_center_distance),u_pitch:new s.b8(m,t.u_pitch),u_rotate_symbol:new s.bH(m,t.u_rotate_symbol),u_aspect_ratio:new s.b8(m,t.u_aspect_ratio),u_fade_change:new s.b8(m,t.u_fade_change),u_label_plane_matrix:new s.bJ(m,t.u_label_plane_matrix),u_coord_matrix:new s.bJ(m,t.u_coord_matrix),u_is_text:new s.bH(m,t.u_is_text),u_pitch_with_map:new s.bH(m,t.u_pitch_with_map),u_is_along_line:new s.bH(m,t.u_is_along_line),u_is_variable_anchor:new s.bH(m,t.u_is_variable_anchor),u_texsize:new s.bM(m,t.u_texsize),u_texsize_icon:new s.bM(m,t.u_texsize_icon),u_texture:new s.bH(m,t.u_texture),u_texture_icon:new s.bH(m,t.u_texture_icon),u_gamma_scale:new s.b8(m,t.u_gamma_scale),u_device_pixel_ratio:new s.b8(m,t.u_device_pixel_ratio),u_is_halo:new s.bH(m,t.u_is_halo),u_translation:new s.bM(m,t.u_translation),u_pitched_scale:new s.b8(m,t.u_pitched_scale)}),background:(m,t)=>({u_opacity:new s.b8(m,t.u_opacity),u_color:new s.bI(m,t.u_color)}),backgroundPattern:(m,t)=>({u_opacity:new s.b8(m,t.u_opacity),u_image:new s.bH(m,t.u_image),u_pattern_tl_a:new s.bM(m,t.u_pattern_tl_a),u_pattern_br_a:new s.bM(m,t.u_pattern_br_a),u_pattern_tl_b:new s.bM(m,t.u_pattern_tl_b),u_pattern_br_b:new s.bM(m,t.u_pattern_br_b),u_texsize:new s.bM(m,t.u_texsize),u_mix:new s.b8(m,t.u_mix),u_pattern_size_a:new s.bM(m,t.u_pattern_size_a),u_pattern_size_b:new s.bM(m,t.u_pattern_size_b),u_scale_a:new s.b8(m,t.u_scale_a),u_scale_b:new s.b8(m,t.u_scale_b),u_pixel_coord_upper:new s.bM(m,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(m,t.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(m,t.u_tile_units_to_pixels)}),terrain:(m,t)=>({u_texture:new s.bH(m,t.u_texture),u_ele_delta:new s.b8(m,t.u_ele_delta),u_fog_matrix:new s.bJ(m,t.u_fog_matrix),u_fog_color:new s.bI(m,t.u_fog_color),u_fog_ground_blend:new s.b8(m,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(m,t.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(m,t.u_horizon_color),u_horizon_fog_blend:new s.b8(m,t.u_horizon_fog_blend),u_is_globe_mode:new s.b8(m,t.u_is_globe_mode)}),terrainDepth:(m,t)=>({u_ele_delta:new s.b8(m,t.u_ele_delta)}),terrainCoords:(m,t)=>({u_texture:new s.bH(m,t.u_texture),u_terrain_coords_id:new s.b8(m,t.u_terrain_coords_id),u_ele_delta:new s.b8(m,t.u_ele_delta)}),projectionErrorMeasurement:(m,t)=>({u_input:new s.b8(m,t.u_input),u_output_expected:new s.b8(m,t.u_output_expected)}),atmosphere:(m,t)=>({u_sun_pos:new s.bL(m,t.u_sun_pos),u_atmosphere_blend:new s.b8(m,t.u_atmosphere_blend),u_globe_position:new s.bL(m,t.u_globe_position),u_globe_radius:new s.b8(m,t.u_globe_radius),u_inv_proj_matrix:new s.bJ(m,t.u_inv_proj_matrix)}),sky:(m,t)=>({u_sky_color:new s.bI(m,t.u_sky_color),u_horizon_color:new s.bI(m,t.u_horizon_color),u_horizon:new s.bM(m,t.u_horizon),u_horizon_normal:new s.bM(m,t.u_horizon_normal),u_sky_horizon_blend:new s.b8(m,t.u_sky_horizon_blend),u_sky_blend:new s.b8(m,t.u_sky_blend)})};class Pl{constructor(t,a,h){this.context=t;const p=t.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Da={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class fA{constructor(t,a,h,p){this.length=a.length,this.attributes=h,this.itemSize=a.bytesPerElement,this.dynamicDraw=p,this.context=t;const y=t.gl;this.buffer=y.createBuffer(),t.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,a){for(let h=0;h<this.attributes.length;h++){const p=a.attributes[this.attributes[h].name];p!==void 0&&t.enableVertexAttribArray(p)}}setVertexAttribPointers(t,a,h){for(let p=0;p<this.attributes.length;p++){const y=this.attributes[p],x=a.attributes[y.name];x!==void 0&&t.vertexAttribPointer(x,y.components,t[Da[y.type]],!1,this.itemSize,y.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class cn{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fs extends cn{getDefault(){return s.b7.transparent}set(t){const a=this.current;(t.r!==a.r||t.g!==a.g||t.b!==a.b||t.a!==a.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Js extends cn{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class yo extends cn{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class oa extends cn{getDefault(){return[!0,!0,!0,!0]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||t[3]!==a[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Aa extends cn{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ys extends cn{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class xa extends cn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const a=this.current;(t.func!==a.func||t.ref!==a.ref||t.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Ss extends cn{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class KA extends cn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=t,this.dirty=!1}}class _o extends cn{getDefault(){return[0,1]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class gi extends cn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ml extends cn{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class la extends cn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.BLEND):a.disable(a.BLEND),this.current=t,this.dirty=!1}}class ds extends cn{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class dA extends cn{getDefault(){return s.b7.transparent}set(t){const a=this.current;(t.r!==a.r||t.g!==a.g||t.b!==a.b||t.a!==a.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class pA extends cn{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class qo extends cn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=t,this.dirty=!1}}class eo extends cn{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class bo extends cn{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Ra extends cn{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class to extends cn{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Ts extends cn{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||t[3]!==a[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Ri extends cn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class vo extends cn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class qA extends cn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Na extends cn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ni extends cn{getDefault(){return null}set(t){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class En extends cn{getDefault(){return null}set(t){var a;if(t===this.current&&!this.dirty)return;const h=this.gl;Ai(h)?h.bindVertexArray(t):(a=h.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Sn extends cn{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Kn extends cn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class ci extends cn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class ps extends cn{constructor(t,a){super(t),this.context=t,this.parent=a}getDefault(){return null}}class ro extends ps{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Ls extends ps{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ul extends ps{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const ZA="Framebuffer is not complete";class Jr{constructor(t,a,h,p,y){this.context=t,this.width=a,this.height=h;const x=t.gl,F=this.framebuffer=x.createFramebuffer();if(this.colorAttachment=new ro(t,F),p)this.depthAttachment=y?new Ul(t,F):new Ls(t,F);else if(y)throw new Error("Stencil cannot be set without depth");if(x.checkFramebufferStatus(x.FRAMEBUFFER)!==x.FRAMEBUFFER_COMPLETE)throw new Error(ZA)}destroy(){const t=this.context.gl,a=this.colorAttachment.get();if(a&&t.deleteTexture(a),this.depthAttachment){const h=this.depthAttachment.get();h&&t.deleteRenderbuffer(h)}t.deleteFramebuffer(this.framebuffer)}}class ca{constructor(t){var a,h;if(this.gl=t,this.clearColor=new fs(this),this.clearDepth=new Js(this),this.clearStencil=new yo(this),this.colorMask=new oa(this),this.depthMask=new Aa(this),this.stencilMask=new Ys(this),this.stencilFunc=new xa(this),this.stencilOp=new Ss(this),this.stencilTest=new KA(this),this.depthRange=new _o(this),this.depthTest=new gi(this),this.depthFunc=new Ml(this),this.blend=new la(this),this.blendFunc=new ds(this),this.blendColor=new dA(this),this.blendEquation=new pA(this),this.cullFace=new qo(this),this.cullFaceSide=new eo(this),this.frontFace=new bo(this),this.program=new Ra(this),this.activeTexture=new to(this),this.viewport=new Ts(this),this.bindFramebuffer=new Ri(this),this.bindRenderbuffer=new vo(this),this.bindTexture=new qA(this),this.bindVertexBuffer=new Na(this),this.bindElementBuffer=new Ni(this),this.bindVertexArray=new En(this),this.pixelStoreUnpack=new Sn(this),this.pixelStoreUnpackPremultiplyAlpha=new Kn(this),this.pixelStoreUnpackFlipY=new ci(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Ai(t)){this.HALF_FLOAT=t.HALF_FLOAT;const p=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=t.RGBA16F)!==null&&a!==void 0?a:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(h=t.RGB16F)!==null&&h!==void 0?h:p==null?void 0:p.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const p=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,a){return new Pl(this,t,a)}createVertexBuffer(t,a,h){return new fA(this,t,a,h)}createRenderbuffer(t,a,h){const p=this.gl,y=p.createRenderbuffer();return this.bindRenderbuffer.set(y),p.renderbufferStorage(p.RENDERBUFFER,t,a,h),this.bindRenderbuffer.set(null),y}createFramebuffer(t,a,h,p){return new Jr(this,t,a,h,p)}clear({color:t,depth:a,stencil:h}){const p=this.gl;let y=0;t&&(y|=p.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(y|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),h!==void 0&&(y|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),p.clear(y)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){s.bE(t.blendFunction,xn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Ai(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var a;return Ai(this.gl)?this.gl.deleteVertexArray(t):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let Ba;function $A(m,t,a,h,p){const y=m.context,x=m.transform,F=y.gl,T=m.useProgram("collisionBox"),D=[];let O=0,K=0;for(let we=0;we<h.length;we++){const Te=h[we],De=t.getTile(Te).getBucket(a);if(!De)continue;const Re=p?De.textCollisionBox:De.iconCollisionBox,Ve=De.collisionCircleArray;Ve.length>0&&(D.push({circleArray:Ve,circleOffset:K,coord:Te}),O+=Ve.length/4,K=O),Re&&T.draw(y,F.LINES,Qr.disabled,Rr.disabled,m.colorModeForRenderPass(),tn.disabled,ri(m.transform),m.style.map.terrain&&m.style.map.terrain.getTerrainData(Te),x.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),a.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,m.transform.zoom,null,null,Re.collisionVertexBuffer)}if(!p||!D.length)return;const G=m.useProgram("collisionCircle"),Y=new s.bT;Y.resize(4*O),Y._trim();let ie=0;for(const we of D)for(let Te=0;Te<we.circleArray.length/4;Te++){const De=4*Te,Re=we.circleArray[De+0],Ve=we.circleArray[De+1],We=we.circleArray[De+2],Ge=we.circleArray[De+3];Y.emplace(ie++,Re,Ve,We,Ge,0),Y.emplace(ie++,Re,Ve,We,Ge,1),Y.emplace(ie++,Re,Ve,We,Ge,2),Y.emplace(ie++,Re,Ve,We,Ge,3)}(!Ba||Ba.length<2*O)&&(Ba=function(we){const Te=2*we,De=new s.bV;De.resize(Te),De._trim();for(let Re=0;Re<Te;Re++){const Ve=6*Re;De.uint16[Ve+0]=4*Re+0,De.uint16[Ve+1]=4*Re+1,De.uint16[Ve+2]=4*Re+2,De.uint16[Ve+3]=4*Re+2,De.uint16[Ve+4]=4*Re+3,De.uint16[Ve+5]=4*Re+0}return De}(O));const be=y.createIndexBuffer(Ba,!0),_e=y.createVertexBuffer(Y,s.bU.members,!0);for(const we of D){const Te=Gn(m.transform);G.draw(y,F.TRIANGLES,Qr.disabled,Rr.disabled,m.colorModeForRenderPass(),tn.disabled,Te,m.style.map.terrain&&m.style.map.terrain.getTerrainData(we.coord),null,a.id,_e,be,s.aJ.simpleSegment(0,2*we.circleOffset,we.circleArray.length,we.circleArray.length/2),null,m.transform.zoom,null,null,null)}_e.destroy(),be.destroy()}const Zo=s.ad(new Float32Array(16));function xu(m,t,a,h,p,y){const{horizontalAlign:x,verticalAlign:F}=s.aE(m);return new s.P((-(x-.5)*t/p+h[0])*y,(-(F-.5)*a/p+h[1])*y)}function Ac(m,t,a,h,p,y){const x=t.tileAnchorPoint.add(new s.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let F=h.mult(y);a||(F=F.rotate(-p));const T=x.add(F);return _t(T.x,T.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(a){const F=vn(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(m),T=Math.atan(F.y/F.x)+(F.x<0?Math.PI:0);return m.add(h.rotate(T))}return m.add(h)}function kl(m,t,a,h,p,y,x,F,T,D,O,K){const G=m.text.placedSymbolArray,Y=m.text.dynamicLayoutVertexArray,ie=m.icon.dynamicLayoutVertexArray,be={};Y.clear();for(let _e=0;_e<G.length;_e++){const we=G.get(_e),Te=we.hidden||!we.crossTileID||m.allowVerticalPlacement&&!we.placedOrientation?null:h[we.crossTileID];if(Te){const De=new s.P(we.anchorX,we.anchorY),Re={getElevation:K,width:p.width,height:p.height,pitchedLabelPlaneMatrix:y,pitchWithMap:a,transform:p,tileAnchorPoint:De,translation:D,unwrappedTileID:O},Ve=a?Ur(De.x,De.y,Re):vn(De.x,De.y,Re),We=Nr(p.cameraToCenterDistance,Ve.signedDistanceFromCamera);let Ge=s.am(m.textSizeData,F,we)*We/s.ay;a&&(Ge*=m.tilePixelRatio/x);const{width:ft,height:St,anchor:wt,textOffset:bt,textBoxScale:It}=Te,Yt=xu(wt,ft,St,bt,It,Ge),Zt=p.getPitchedTextCorrection(De.x+D[0],De.y+D[1],O),Rt=Ac(Ve.point,Re,t,Yt,-p.bearingInRadians,Zt),gr=m.allowVerticalPlacement&&we.placedOrientation===s.al.vertical?Math.PI/2:0;for(let $r=0;$r<we.numGlyphs;$r++)s.as(Y,Rt,gr);T&&we.associatedIconIndex>=0&&(be[we.associatedIconIndex]={shiftedAnchor:Rt,angle:gr})}else Pa(we.numGlyphs,Y)}if(T){ie.clear();const _e=m.icon.placedSymbolArray;for(let we=0;we<_e.length;we++){const Te=_e.get(we);if(Te.hidden)Pa(Te.numGlyphs,ie);else{const De=be[we];if(De)for(let Re=0;Re<Te.numGlyphs;Re++)s.as(ie,De.shiftedAnchor,De.angle);else Pa(Te.numGlyphs,ie)}}m.icon.dynamicLayoutVertexBuffer.updateData(ie)}m.text.dynamicLayoutVertexBuffer.updateData(Y)}function Oc(m,t,a){return a.iconsInText&&t?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Ql(m,t,a,h,p,y,x,F,T,D,O,K,G){const Y=m.context,ie=Y.gl,be=m.transform,_e=F==="map",we=T==="map",Te=F!=="viewport"&&a.layout.get("symbol-placement")!=="point",De=_e&&!we&&!Te,Re=!a.layout.get("symbol-sort-key").isConstant();let Ve=!1;const We=m.getDepthModeForSublayer(0,Qr.ReadOnly),Ge=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ft=[],St=be.getCircleRadiusCorrection();for(const wt of h){const bt=t.getTile(wt),It=bt.getBucket(a);if(!It)continue;const Yt=p?It.text:It.icon;if(!Yt||!Yt.segments.get().length||!Yt.hasVisibleVertices)continue;const Zt=Yt.programConfigurations.get(a.id),Rt=p||It.sdfIcons,gr=p?It.textSizeData:It.iconSizeData,$r=we||be.pitch!==0,an=m.useProgram(Oc(Rt,p,It),Zt),Ln=s.ak(gr,be.zoom),kn=m.style.map.terrain&&m.style.map.terrain.getTerrainData(wt);let qn,Wn,Qn,_n,ai=[0,0],Ii=null;if(p)Wn=bt.glyphAtlasTexture,Qn=ie.LINEAR,qn=bt.glyphAtlasTexture.size,It.iconsInText&&(ai=bt.imageAtlasTexture.size,Ii=bt.imageAtlasTexture,_n=$r||m.options.rotating||m.options.zooming||gr.kind==="composite"||gr.kind==="camera"?ie.LINEAR:ie.NEAREST);else{const Oi=a.layout.get("icon-size").constantOr(0)!==1||It.iconsNeedLinear;Wn=bt.imageAtlasTexture,Qn=Rt||m.options.rotating||m.options.zooming||Oi||$r?ie.LINEAR:ie.NEAREST,qn=bt.imageAtlasTexture.size}const Fi=s.az(bt,1,m.transform.zoom),en=Vt(_e,m.transform,Fi),Ia=s.K();s.an(Ia,en);const Zi=Sr(we,_e,m.transform,Fi),Qs=s.aA(be,bt,y,x),Co=be.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),ol=Ge&&It.hasTextData(),Wo=a.layout.get("icon-text-fit")!=="none"&&ol&&It.hasIconData();if(Te){const Oi=m.style.map.terrain?(Ya,Xn)=>m.style.map.terrain.getElevation(wt,Ya,Xn):null,zi=a.layout.get("text-rotation-alignment")==="map";jr(It,m,p,en,Ia,we,D,zi,wt.toUnwrapped(),be.width,be.height,Qs,Oi)}const Io=p&&Ge||Wo,Fa=Te||Io?Zo:we?en:m.transform.clipSpaceToPixelsMatrix,Al=Rt&&a.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vA;vA=Rt?It.iconsInText?mo(gr.kind,Ln,De,we,Te,Io,m,Fa,Zi,Qs,qn,ai,St):hA(gr.kind,Ln,De,we,Te,Io,m,Fa,Zi,Qs,p,qn,0,St):Es(gr.kind,Ln,De,we,Te,Io,m,Fa,Zi,Qs,p,qn,St);const ll={program:an,buffers:Yt,uniformValues:vA,projectionData:Co,atlasTexture:Wn,atlasTextureIcon:Ii,atlasInterpolation:Qn,atlasInterpolationIcon:_n,isSDF:Rt,hasHalo:Al};if(Re&&It.canOverlap){Ve=!0;const Oi=Yt.segments.get();for(const zi of Oi)ft.push({segments:new s.aJ([zi]),sortKey:zi.sortKey,state:ll,terrainData:kn})}else ft.push({segments:Yt.segments,sortKey:0,state:ll,terrainData:kn})}Ve&&ft.sort((wt,bt)=>wt.sortKey-bt.sortKey);for(const wt of ft){const bt=wt.state;if(Y.activeTexture.set(ie.TEXTURE0),bt.atlasTexture.bind(bt.atlasInterpolation,ie.CLAMP_TO_EDGE),bt.atlasTextureIcon&&(Y.activeTexture.set(ie.TEXTURE1),bt.atlasTextureIcon&&bt.atlasTextureIcon.bind(bt.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),bt.isSDF){const It=bt.uniformValues;bt.hasHalo&&(It.u_is_halo=1,gA(bt.buffers,wt.segments,a,m,bt.program,We,O,K,It,bt.projectionData,wt.terrainData)),It.u_is_halo=0}gA(bt.buffers,wt.segments,a,m,bt.program,We,O,K,bt.uniformValues,bt.projectionData,wt.terrainData)}}function gA(m,t,a,h,p,y,x,F,T,D,O){const K=h.context;p.draw(K,K.gl.TRIANGLES,y,x,F,tn.backCCW,T,O,D,a.id,m.layoutVertexBuffer,m.indexBuffer,t,a.paint,h.transform.zoom,m.programConfigurations.get(a.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function WA(m,t,a,h,p){const y=m.context,x=y.gl,F=Rr.disabled,T=new xn([x.ONE,x.ONE],s.b7.transparent,[!0,!0,!0,!0]),D=t.getBucket(a);if(!D)return;const O=h.key;let K=a.heatmapFbos.get(O);K||(K=JA(y,t.tileSize,t.tileSize),a.heatmapFbos.set(O,K)),y.bindFramebuffer.set(K.framebuffer),y.viewport.set([0,0,t.tileSize,t.tileSize]),y.clear({color:s.b7.transparent});const G=D.programConfigurations.get(a.id),Y=m.useProgram("heatmap",G,!p),ie=m.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=m.style.map.terrain.getTerrainData(h);Y.draw(y,x.TRIANGLES,Qr.disabled,F,T,tn.disabled,li(t,m.transform.zoom,a.paint.get("heatmap-intensity"),1),be,ie,a.id,D.layoutVertexBuffer,D.indexBuffer,D.segments,a.paint,m.transform.zoom,G)}function XA(m,t,a,h,p){const y=m.context,x=y.gl,F=m.transform;y.setColorMode(m.colorModeForRenderPass());const T=zc(y,t),D=a.key,O=t.heatmapFbos.get(D);if(!O)return;y.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,O.colorAttachment.get()),y.activeTexture.set(x.TEXTURE1),T.bind(x.LINEAR,x.CLAMP_TO_EDGE);const K=F.getProjectionData({overscaledTileID:a,applyTerrainMatrix:p,applyGlobeMatrix:!h});m.useProgram("heatmapTexture").draw(y,x.TRIANGLES,Qr.disabled,Rr.disabled,m.colorModeForRenderPass(),tn.disabled,Mi(m,t,0,1),null,K,t.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments,t.paint,F.zoom),O.destroy(),t.heatmapFbos.delete(D)}function JA(m,t,a){var h,p;const y=m.gl,x=y.createTexture();y.bindTexture(y.TEXTURE_2D,x),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const F=(h=m.HALF_FLOAT)!==null&&h!==void 0?h:y.UNSIGNED_BYTE,T=(p=m.RGBA16F)!==null&&p!==void 0?p:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,T,t,a,0,y.RGBA,F,null);const D=m.createFramebuffer(t,a,!1,!1);return D.colorAttachment.set(x),D}function zc(m,t){return t.colorRampTexture||(t.colorRampTexture=new me(m,t.colorRamp,m.gl.RGBA)),t.colorRampTexture}function Dl(m,t,a,h,p){if(!a||!h||!h.imageAtlas)return;const y=h.imageAtlas.patternPositions;let x=y[a.to.toString()],F=y[a.from.toString()];if(!x&&F&&(x=F),!F&&x&&(F=x),!x||!F){const T=p.getPaintProperty(t);x=y[T],F=y[T]}x&&F&&m.setConstantPatternPositions(x,F)}function YA(m,t,a,h,p,y,x,F){const T=m.context.gl,D="fill-pattern",O=a.paint.get(D),K=O&&O.constantOr(1),G=a.getCrossfadeParameters();let Y,ie,be,_e,we;const Te=m.transform,De=a.paint.get("fill-translate"),Re=a.paint.get("fill-translate-anchor");x?(ie=K&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=T.LINES):(ie=K?"fillPattern":"fill",Y=T.TRIANGLES);const Ve=O.constantOr(null);for(const We of h){const Ge=t.getTile(We);if(K&&!Ge.patternsLoaded())continue;const ft=Ge.getBucket(a);if(!ft)continue;const St=ft.programConfigurations.get(a.id),wt=m.useProgram(ie,St),bt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(We);K&&(m.context.activeTexture.set(T.TEXTURE0),Ge.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),St.updatePaintBuffers(G)),Dl(St,D,Ve,Ge,a);const It=Te.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),Yt=s.aA(Te,Ge,De,Re);if(x){_e=ft.indexBuffer2,we=ft.segments2;const Rt=[T.drawingBufferWidth,T.drawingBufferHeight];be=ie==="fillOutlinePattern"&&K?zr(m,G,Ge,Rt,Yt):Gr(Rt,Yt)}else _e=ft.indexBuffer,we=ft.segments,be=K?Lr(m,G,Ge,Yt):{u_fill_translate:Yt};const Zt=m.stencilModeForClipping(We);wt.draw(m.context,Y,p,Zt,y,tn.backCCW,be,bt,It,a.id,ft.layoutVertexBuffer,_e,we,a.paint,m.transform.zoom,St)}}function Rl(m,t,a,h,p,y,x,F){const T=m.context,D=T.gl,O="fill-extrusion-pattern",K=a.paint.get(O),G=K.constantOr(1),Y=a.getCrossfadeParameters(),ie=a.paint.get("fill-extrusion-opacity"),be=K.constantOr(null),_e=m.transform;for(const we of h){const Te=t.getTile(we),De=Te.getBucket(a);if(!De)continue;const Re=m.style.map.terrain&&m.style.map.terrain.getTerrainData(we),Ve=De.programConfigurations.get(a.id),We=m.useProgram(G?"fillExtrusionPattern":"fillExtrusion",Ve);G&&(m.context.activeTexture.set(D.TEXTURE0),Te.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Ve.updatePaintBuffers(Y));const Ge=_e.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!F,applyTerrainMatrix:!0});Dl(Ve,O,be,Te,a);const ft=s.aA(_e,Te,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),St=a.paint.get("fill-extrusion-vertical-gradient"),wt=G?lr(m,St,ie,ft,we,Y,Te):Kt(m,St,ie,ft);We.draw(T,T.gl.TRIANGLES,p,y,x,tn.backCCW,wt,Re,Ge,a.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,a.paint,m.transform.zoom,Ve,m.style.map.terrain&&De.centroidVertexBuffer)}}function Hc(m,t,a,h,p,y,x,F,T){var D;const O=m.style.projection,K=m.context,G=m.transform,Y=K.gl,ie=[`#define NUM_ILLUMINATION_SOURCES ${a.paint.get("hillshade-highlight-color").values.length}`],be=m.useProgram("hillshade",null,!1,ie),_e=!m.options.moving;for(const we of h){const Te=t.getTile(we),De=Te.fbo;if(!De)continue;const Re=O.getMeshFromTileID(K,we.canonical,F,!0,"raster"),Ve=(D=m.style.map.terrain)===null||D===void 0?void 0:D.getTerrainData(we);K.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,De.colorAttachment.get());const We=G.getProjectionData({overscaledTileID:we,aligned:_e,applyGlobeMatrix:!T,applyTerrainMatrix:!0});be.draw(K,Y.TRIANGLES,y,p[we.overscaledZ],x,tn.backCCW,us(m,Te,a),Ve,We,a.id,Re.vertexBuffer,Re.indexBuffer,Re.segments)}}const Nl=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function lc(m,t,a,h,p,y,x,F,T=!1,D=!1){const O=h[h.length-1].overscaledZ,K=m.context,G=K.gl,Y=m.useProgram("raster"),ie=m.transform,be=m.style.projection,_e=m.colorModeForRenderPass(),we=!m.options.moving;for(const Te of h){const De=m.getDepthModeForSublayer(Te.overscaledZ-O,a.paint.get("raster-opacity")===1?Qr.ReadWrite:Qr.ReadOnly,G.LESS),Re=t.getTile(Te);Re.registerFadeDuration(a.paint.get("raster-fade-duration"));const Ve=t.findLoadedParent(Te,0),We=t.findLoadedSibling(Te),Ge=Bu(Re,Ve||We||null,t,a,m.transform,m.style.map.terrain);let ft,St;const wt=a.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;K.activeTexture.set(G.TEXTURE0),Re.texture.bind(wt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),K.activeTexture.set(G.TEXTURE1),Ve?(Ve.texture.bind(wt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),ft=Math.pow(2,Ve.tileID.overscaledZ-Re.tileID.overscaledZ),St=[Re.tileID.canonical.x*ft%1,Re.tileID.canonical.y*ft%1]):Re.texture.bind(wt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Re.texture.useMipmap&&K.extTextureFilterAnisotropic&&m.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const bt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Te),It=ie.getProjectionData({overscaledTileID:Te,aligned:we,applyGlobeMatrix:!D,applyTerrainMatrix:!0}),Yt=uA(St||[0,0],ft||1,Ge,a,F),Zt=be.getMeshFromTileID(K,Te.canonical,y,x,"raster");Y.draw(K,G.TRIANGLES,De,p?p[Te.overscaledZ]:Rr.disabled,_e,T?tn.frontCCW:tn.backCCW,Yt,bt,It,a.id,Zt.vertexBuffer,Zt.indexBuffer,Zt.segments)}}function Bu(m,t,a,h,p,y){const x=h.paint.get("raster-fade-duration");if(!y&&x>0){const F=Q.now(),T=(F-m.timeAdded)/x,D=t?(F-t.timeAdded)/x:-1,O=a.getSource(),K=ht(p,{tileSize:O.tileSize,roundZoom:O.roundZoom}),G=!t||Math.abs(t.tileID.overscaledZ-K)>Math.abs(m.tileID.overscaledZ-K),Y=G&&m.refreshedUponExpiration?1:s.ae(G?T:1-D,0,1);return m.refreshedUponExpiration&&T>=1&&(m.refreshedUponExpiration=!1),t?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}const el=new s.b7(1,0,0,1),Ol=new s.b7(0,1,0,1),tl=new s.b7(0,0,1,1),Cu=new s.b7(1,0,1,1),cc=new s.b7(0,1,1,1);function zl(m,t,a,h){Hl(m,0,t+a/2,m.transform.width,a,h)}function Iu(m,t,a,h){Hl(m,t-a/2,0,a,m.transform.height,h)}function Hl(m,t,a,h,p,y){const x=m.context,F=x.gl;F.enable(F.SCISSOR_TEST),F.scissor(t*m.pixelRatio,a*m.pixelRatio,h*m.pixelRatio,p*m.pixelRatio),x.clear({color:y}),F.disable(F.SCISSOR_TEST)}function ui(m,t,a){const h=m.context,p=h.gl,y=m.useProgram("debug"),x=Qr.disabled,F=Rr.disabled,T=m.colorModeForRenderPass(),D="$debug",O=m.style.map.terrain&&m.style.map.terrain.getTerrainData(a);h.activeTexture.set(p.TEXTURE0);const K=t.getTileByID(a.key).latestRawTileData,G=Math.floor((K&&K.byteLength||0)/1024),Y=t.getTile(a).tileSize,ie=512/Math.min(Y,512)*(a.overscaledZ/m.transform.zoom)*.5;let be=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(be+=` => ${a.overscaledZ}`),function(we,Te){we.initDebugOverlayCanvas();const De=we.debugOverlayCanvas,Re=we.context.gl,Ve=we.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,De.width,De.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(Te,5,5),Ve.strokeText(Te,5,5),we.debugOverlayTexture.update(De),we.debugOverlayTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE)}(m,`${be} ${G}kB`);const _e=m.transform.getProjectionData({overscaledTileID:a,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(h,p.TRIANGLES,x,F,xn.alphaBlended,tn.disabled,pi(s.b7.transparent,ie),null,_e,D,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),y.draw(h,p.LINE_STRIP,x,F,T,tn.disabled,pi(s.b7.red),O,_e,D,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function $o(m,t,a,h){const{isRenderingGlobe:p}=h,y=m.context,x=y.gl,F=m.transform,T=m.colorModeForRenderPass(),D=m.getDepthModeFor3D(),O=m.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]);for(const K of a){const G=t.getTerrainMesh(K.tileID),Y=m.renderToTexture.getTexture(K),ie=t.getTerrainData(K.tileID);y.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,Y.texture);const be=t.getMeshFrameDelta(F.zoom),_e=F.calculateFogMatrix(K.tileID.toUnwrapped()),we=re(be,_e,m.style.sky,F.pitch,p),Te=F.getProjectionData({overscaledTileID:K.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(y,x.TRIANGLES,D,Rr.disabled,T,tn.backCCW,we,ie,Te,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}}function xi(m,t){if(!t.mesh){const a=new s.aI;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(1,1),a.emplaceBack(-1,1);const h=new s.aK;h.emplaceBack(0,1,2),h.emplaceBack(0,2,3),t.mesh=new Oo(m.createVertexBuffer(a,Vi.members),m.createIndexBuffer(h),s.aJ.simpleSegment(0,0,a.length,h.length))}return t.mesh}class Xa{constructor(t,a){this.context=new ca(t),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ze.maxUnderzooming+Ze.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new No}resize(t,a,h){if(this.width=Math.floor(t*h),this.height=Math.floor(a*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const t=this.context,a=new s.aI;a.emplaceBack(0,0),a.emplaceBack(s.Z,0),a.emplaceBack(0,s.Z),a.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=t.createVertexBuffer(a,Vi.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);const h=new s.aI;h.emplaceBack(0,0),h.emplaceBack(s.Z,0),h.emplaceBack(0,s.Z),h.emplaceBack(s.Z,s.Z),this.debugBuffer=t.createVertexBuffer(h,Vi.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);const p=new s.b_;p.emplaceBack(0,0,0,0),p.emplaceBack(s.Z,0,s.Z,0),p.emplaceBack(0,s.Z,0,s.Z),p.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=t.createVertexBuffer(p,Sl.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);const y=new s.aI;y.emplaceBack(0,0),y.emplaceBack(s.Z,0),y.emplaceBack(0,s.Z),y.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(y,Vi.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);const x=new s.aI;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(x,Vi.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);const F=new s.b$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(F);const T=new s.aK;T.emplaceBack(1,0,2),T.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(T);const D=this.context.gl;this.stencilClearMode=new Rr({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO),this.tileExtentMesh=new Oo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,a=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=s.K();s.bQ(h,0,this.width,this.height,0,0,1),s.M(h,h,[a.drawingBufferWidth,a.drawingBufferHeight,0]);const p={mainMatrix:h,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:h};this.useProgram("clippingMask",null,!0).draw(t,a.TRIANGLES,Qr.disabled,this.stencilClearMode,xn.disabled,tn.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,a,h){if(this.currentStencilSource===t.source||!t.isTileClipped()||!a||!a.length)return;this.currentStencilSource=t.source,this.nextStencilID+a.length>256&&this.clearStencil();const p=this.context;p.setColorMode(xn.disabled),p.setDepthMode(Qr.disabled);const y={};for(const x of a)y[x.key]=this.nextStencilID++;this._renderTileMasks(y,a,h,!0),this._renderTileMasks(y,a,h,!1),this._tileClippingMaskIDs=y}_renderTileMasks(t,a,h,p){const y=this.context,x=y.gl,F=this.style.projection,T=this.transform,D=this.useProgram("clippingMask");for(const O of a){const K=t[O.key],G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),Y=F.getMeshFromTileID(this.context,O.canonical,p,!0,"stencil"),ie=T.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!h,applyTerrainMatrix:!0});D.draw(y,x.TRIANGLES,Qr.disabled,new Rr({func:x.ALWAYS,mask:0},K,255,x.KEEP,x.KEEP,x.REPLACE),xn.disabled,h?tn.disabled:tn.backCCW,null,G,ie,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}_renderTilesDepthBuffer(){const t=this.context,a=t.gl,h=this.style.projection,p=this.transform,y=this.useProgram("depth"),x=this.getDepthModeFor3D(),F=Ke(p,{tileSize:p.tileSize});for(const T of F){const D=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T),O=h.getMeshFromTileID(this.context,T.canonical,!0,!0,"raster"),K=p.getProjectionData({overscaledTileID:T,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(t,a.TRIANGLES,x,Rr.disabled,xn.disabled,tn.backCCW,null,D,K,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,a=this.context.gl;return new Rr({func:a.NOTEQUAL,mask:255},t,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(t){const a=this.context.gl;return new Rr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,a.KEEP,a.KEEP,a.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const a=this.context.gl,h=t.sort((x,F)=>F.overscaledZ-x.overscaledZ),p=h[h.length-1].overscaledZ,y=h[0].overscaledZ-p+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const x={};for(let F=0;F<y;F++)x[F+p]=new Rr({func:a.GEQUAL,mask:255},F+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=y,[x,h]}return[{[p]:Rr.disabled},h]}stencilConfigForOverlapTwoPass(t){const a=this.context.gl,h=t.sort((x,F)=>F.overscaledZ-x.overscaledZ),p=h[h.length-1].overscaledZ,y=h[0].overscaledZ-p+1;if(this.clearStencil(),y>1){const x={},F={};for(let T=0;T<y;T++)x[T+p]=new Rr({func:a.GREATER,mask:255},y+1+T,255,a.KEEP,a.KEEP,a.REPLACE),F[T+p]=new Rr({func:a.GREATER,mask:255},1+T,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID=2*y+1,[x,F,h]}return this.nextStencilID=3,[{[p]:new Rr({func:a.GREATER,mask:255},2,255,a.KEEP,a.KEEP,a.REPLACE)},{[p]:new Rr({func:a.GREATER,mask:255},1,255,a.KEEP,a.KEEP,a.REPLACE)},h]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new xn([t.CONSTANT_COLOR,t.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xn.unblended:xn.alphaBlended}getDepthModeForSublayer(t,a,h){if(!this.opaquePassEnabledForLayer())return Qr.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Qr(h||this.context.gl.LEQUAL,a,[p,p])}getDepthModeFor3D(){return new Qr(this.context.gl.LEQUAL,Qr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,a){var h,p;this.style=t,this.options=a,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(Q.now()),this.imageManager.beginFrame();const y=this.style._order,x=this.style.sourceCaches,F={},T={},D={},O={isRenderingToTexture:!1,isRenderingGlobe:((h=t.projection)===null||h===void 0?void 0:h.transitionState)>0};for(const G in x){const Y=x[G];Y.used&&Y.prepare(this.context),F[G]=Y.getVisibleCoordinates(!1),T[G]=F[G].slice().reverse(),D[G]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let G=0;G<y.length;G++)if(this.style._layers[y[G]].is3D()){this.opaquePassCutoff=G;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const G of y){const Y=this.style._layers[G];if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const ie=T[Y.source];(Y.type==="custom"||ie.length)&&this.renderLayer(this,x[Y.source],Y,ie,O)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:G=>this.useProgram(G)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(G,Y){const ie=G.context,be=ie.gl,_e=((We,Ge,ft)=>{const St=Math.cos(Ge.rollInRadians),wt=Math.sin(Ge.rollInRadians),bt=Xe(Ge),It=Ge.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:We.properties.get("sky-color"),u_horizon_color:We.properties.get("horizon-color"),u_horizon:[(Ge.width/2-bt*wt)*ft,(Ge.height/2+bt*St)*ft],u_horizon_normal:[-wt,St],u_sky_horizon_blend:We.properties.get("sky-horizon-blend")*Ge.height/2*ft,u_sky_blend:It}})(Y,G.style.map.transform,G.pixelRatio),we=new Qr(be.LEQUAL,Qr.ReadWrite,[0,1]),Te=Rr.disabled,De=G.colorModeForRenderPass(),Re=G.useProgram("sky"),Ve=xi(ie,Y);Re.draw(ie,be.TRIANGLES,we,Te,De,tn.disabled,_e,null,void 0,"sky",Ve.vertexBuffer,Ve.indexBuffer,Ve.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const G=this.style._layers[y[this.currentLayer]],Y=x[G.source],ie=F[G.source];this._renderTileClippingMasks(G,ie,!1),this.renderLayer(this,Y,G,ie,O)}this.renderPass="translucent";let K=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const G=this.style._layers[y[this.currentLayer]],Y=x[G.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(G,O))continue;this.opaquePassEnabledForLayer()||K||(K=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ie=(G.type==="symbol"?D:T)[G.source];this._renderTileClippingMasks(G,F[G.source],!!this.renderToTexture),this.renderLayer(this,Y,G,ie,O)}if(O.isRenderingGlobe&&function(G,Y,ie){const be=G.context,_e=be.gl,we=G.useProgram("atmosphere"),Te=new Qr(_e.LEQUAL,Qr.ReadOnly,[0,1]),De=G.transform,Re=function(It,Yt){const Zt=It.properties.get("position"),Rt=[-Zt.x,-Zt.y,-Zt.z],gr=s.ad(new Float64Array(16));return It.properties.get("anchor")==="map"&&(s.a_(gr,gr,Yt.rollInRadians),s.a$(gr,gr,-Yt.pitchInRadians),s.a_(gr,gr,Yt.bearingInRadians),s.a$(gr,gr,Yt.center.lat*Math.PI/180),s.bp(gr,gr,-Yt.center.lng*Math.PI/180)),s.bZ(Rt,Rt,gr),Rt}(ie,G.transform),Ve=De.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),We=Y.properties.get("atmosphere-blend")*Ve.projectionTransition;if(We===0)return;const Ge=Gi(De.worldSize,De.center.lat),ft=De.inverseProjectionMatrix,St=new Float64Array(4);St[3]=1,s.at(St,St,De.modelViewProjectionMatrix),St[0]/=St[3],St[1]/=St[3],St[2]/=St[3],St[3]=1,s.at(St,St,ft),St[0]/=St[3],St[1]/=St[3],St[2]/=St[3],St[3]=1;const wt=((It,Yt,Zt,Rt,gr)=>({u_sun_pos:It,u_atmosphere_blend:Yt,u_globe_position:Zt,u_globe_radius:Rt,u_inv_proj_matrix:gr}))(Re,We,[St[0],St[1],St[2]],Ge,ft),bt=xi(be,Y);we.draw(be,_e.TRIANGLES,Te,Rr.disabled,xn.alphaBlended,tn.disabled,wt,null,null,"atmosphere",bt.vertexBuffer,bt.indexBuffer,bt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const G=function(Y,ie){let be=null;const _e=Object.values(Y._layers).flatMap(Re=>Re.source&&!Re.isHidden(ie)?[Y.sourceCaches[Re.source]]:[]),we=_e.filter(Re=>Re.getSource().type==="vector"),Te=_e.filter(Re=>Re.getSource().type!=="vector"),De=Re=>{(!be||be.getSource().maxzoom<Re.getSource().maxzoom)&&(be=Re)};return we.forEach(Re=>De(Re)),be||Te.forEach(Re=>De(Re)),be}(this.style,this.transform.zoom);G&&function(Y,ie,be){for(let _e=0;_e<be.length;_e++)ui(Y,ie,be[_e])}(this,G,G.getVisibleCoordinates())}this.options.showPadding&&function(G){const Y=G.transform.padding;zl(G,G.transform.height-(Y.top||0),3,el),zl(G,Y.bottom||0,3,Ol),Iu(G,Y.left||0,3,tl),Iu(G,G.transform.width-(Y.right||0),3,Cu);const ie=G.transform.centerPoint;(function(be,_e,we,Te){Hl(be,_e-1,we-10,2,20,Te),Hl(be,_e-10,we-1,20,2,Te)})(G,ie.x,G.transform.height-ie.y,cc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=t?!s.c0(a,h):!s.c1(a,h)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(s.c2(a,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,x){const F=y.context,T=F.gl,D=y.transform,O=xn.unblended,K=new Qr(T.LEQUAL,Qr.ReadWrite,[0,1]),G=x.sourceCache.getRenderableTiles(),Y=y.useProgram("terrainDepth");F.bindFramebuffer.set(x.getFramebuffer("depth").framebuffer),F.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),F.clear({color:s.b7.transparent,depth:1});for(const ie of G){const be=x.getTerrainMesh(ie.tileID),_e=x.getTerrainData(ie.tileID),we=D.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Te={u_ele_delta:x.getMeshFrameDelta(D.zoom)};Y.draw(F,T.TRIANGLES,K,Rr.disabled,O,tn.backCCW,Te,_e,we,"terrain",be.vertexBuffer,be.indexBuffer,be.segments)}F.bindFramebuffer.set(null),F.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,x){const F=y.context,T=F.gl,D=y.transform,O=xn.unblended,K=new Qr(T.LEQUAL,Qr.ReadWrite,[0,1]),G=x.getCoordsTexture(),Y=x.sourceCache.getRenderableTiles(),ie=y.useProgram("terrainCoords");F.bindFramebuffer.set(x.getFramebuffer("coords").framebuffer),F.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),F.clear({color:s.b7.transparent,depth:1}),x.coordsIndex=[];for(const be of Y){const _e=x.getTerrainMesh(be.tileID),we=x.getTerrainData(be.tileID);F.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,G.texture);const Te={u_terrain_coords_id:(255-x.coordsIndex.length)/255,u_texture:0,u_ele_delta:x.getMeshFrameDelta(D.zoom)},De=D.getProjectionData({overscaledTileID:be.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(F,T.TRIANGLES,K,Rr.disabled,O,tn.backCCW,Te,we,De,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments),x.coordsIndex.push(be.tileID.key)}F.bindFramebuffer.set(null),F.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(t,a,h,p,y){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(p||[]).length)&&(this.id=h.id,s.c3(h)?function(x,F,T,D,O,K){if(x.renderPass!=="translucent")return;const{isRenderingToTexture:G}=K,Y=Rr.disabled,ie=x.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(be,_e,we,Te,De,Re,Ve,We,Ge){const ft=_e.transform,St=_e.style.map.terrain,wt=De==="map",bt=Re==="map";for(const It of be){const Yt=Te.getTile(It),Zt=Yt.getBucket(we);if(!Zt||!Zt.text||!Zt.text.segments.get().length)continue;const Rt=s.ak(Zt.textSizeData,ft.zoom),gr=s.az(Yt,1,_e.transform.zoom),$r=Vt(wt,_e.transform,gr),an=we.layout.get("icon-text-fit")!=="none"&&Zt.hasIconData();if(Rt){const Ln=Math.pow(2,ft.zoom-Yt.tileID.overscaledZ),kn=St?(qn,Wn)=>St.getElevation(It,qn,Wn):null;kl(Zt,wt,bt,Ge,ft,$r,Ln,Rt,an,s.aA(ft,Yt,Ve,We),It.toUnwrapped(),kn)}}}(D,x,T,F,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),O),T.paint.get("icon-opacity").constantOr(1)!==0&&Ql(x,F,T,D,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),Y,ie,G),T.paint.get("text-opacity").constantOr(1)!==0&&Ql(x,F,T,D,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),Y,ie,G),F.map.showCollisionBoxes&&($A(x,F,T,D,!0),$A(x,F,T,D,!1))}(t,a,h,p,this.style.placement.variableOffsets,y):s.c4(h)?function(x,F,T,D,O){if(x.renderPass!=="translucent")return;const{isRenderingToTexture:K}=O,G=T.paint.get("circle-opacity"),Y=T.paint.get("circle-stroke-width"),ie=T.paint.get("circle-stroke-opacity"),be=!T.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(Y.constantOr(1)===0||ie.constantOr(1)===0))return;const _e=x.context,we=_e.gl,Te=x.transform,De=x.getDepthModeForSublayer(0,Qr.ReadOnly),Re=Rr.disabled,Ve=x.colorModeForRenderPass(),We=[],Ge=Te.getCircleRadiusCorrection();for(let ft=0;ft<D.length;ft++){const St=D[ft],wt=F.getTile(St),bt=wt.getBucket(T);if(!bt)continue;const It=T.paint.get("circle-translate"),Yt=T.paint.get("circle-translate-anchor"),Zt=s.aA(Te,wt,It,Yt),Rt=bt.programConfigurations.get(T.id),gr=x.useProgram("circle",Rt),$r=bt.layoutVertexBuffer,an=bt.indexBuffer,Ln=x.style.map.terrain&&x.style.map.terrain.getTerrainData(St),kn={programConfiguration:Rt,program:gr,layoutVertexBuffer:$r,indexBuffer:an,uniformValues:ln(x,wt,T,Zt,Ge),terrainData:Ln,projectionData:Te.getProjectionData({overscaledTileID:St,applyGlobeMatrix:!K,applyTerrainMatrix:!0})};if(be){const qn=bt.segments.get();for(const Wn of qn)We.push({segments:new s.aJ([Wn]),sortKey:Wn.sortKey,state:kn})}else We.push({segments:bt.segments,sortKey:0,state:kn})}be&&We.sort((ft,St)=>ft.sortKey-St.sortKey);for(const ft of We){const{programConfiguration:St,program:wt,layoutVertexBuffer:bt,indexBuffer:It,uniformValues:Yt,terrainData:Zt,projectionData:Rt}=ft.state;wt.draw(_e,we.TRIANGLES,De,Re,Ve,tn.backCCW,Yt,Zt,Rt,T.id,bt,It,ft.segments,T.paint,x.transform.zoom,St)}}(t,a,h,p,y):s.c5(h)?function(x,F,T,D,O){if(T.paint.get("heatmap-opacity")===0)return;const K=x.context,{isRenderingToTexture:G,isRenderingGlobe:Y}=O;if(x.style.map.terrain){for(const ie of D){const be=F.getTile(ie);F.hasRenderableParent(ie)||(x.renderPass==="offscreen"?WA(x,be,T,ie,Y):x.renderPass==="translucent"&&XA(x,T,ie,G,Y))}K.viewport.set([0,0,x.width,x.height])}else x.renderPass==="offscreen"?function(ie,be,_e,we){const Te=ie.context,De=Te.gl,Re=ie.transform,Ve=Rr.disabled,We=new xn([De.ONE,De.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(Ge,ft,St){const wt=Ge.gl;Ge.activeTexture.set(wt.TEXTURE1),Ge.viewport.set([0,0,ft.width/4,ft.height/4]);let bt=St.heatmapFbos.get(s.bW);bt?(wt.bindTexture(wt.TEXTURE_2D,bt.colorAttachment.get()),Ge.bindFramebuffer.set(bt.framebuffer)):(bt=JA(Ge,ft.width/4,ft.height/4),St.heatmapFbos.set(s.bW,bt))})(Te,ie,_e),Te.clear({color:s.b7.transparent});for(let Ge=0;Ge<we.length;Ge++){const ft=we[Ge];if(be.hasRenderableParent(ft))continue;const St=be.getTile(ft),wt=St.getBucket(_e);if(!wt)continue;const bt=wt.programConfigurations.get(_e.id),It=ie.useProgram("heatmap",bt),Yt=Re.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Zt=Re.getCircleRadiusCorrection();It.draw(Te,De.TRIANGLES,Qr.disabled,Ve,We,tn.backCCW,li(St,Re.zoom,_e.paint.get("heatmap-intensity"),Zt),null,Yt,_e.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,_e.paint,Re.zoom,bt)}Te.viewport.set([0,0,ie.width,ie.height])}(x,F,T,D):x.renderPass==="translucent"&&function(ie,be){const _e=ie.context,we=_e.gl;_e.setColorMode(ie.colorModeForRenderPass());const Te=be.heatmapFbos.get(s.bW);Te&&(_e.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,Te.colorAttachment.get()),_e.activeTexture.set(we.TEXTURE1),zc(_e,be).bind(we.LINEAR,we.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(_e,we.TRIANGLES,Qr.disabled,Rr.disabled,ie.colorModeForRenderPass(),tn.disabled,Mi(ie,be,0,1),null,null,be.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,be.paint,ie.transform.zoom))}(x,T)}(t,a,h,p,y):s.c6(h)?function(x,F,T,D,O){if(x.renderPass!=="translucent")return;const{isRenderingToTexture:K}=O,G=T.paint.get("line-opacity"),Y=T.paint.get("line-width");if(G.constantOr(1)===0||Y.constantOr(1)===0)return;const ie=x.getDepthModeForSublayer(0,Qr.ReadOnly),be=x.colorModeForRenderPass(),_e=T.paint.get("line-dasharray"),we=T.paint.get("line-pattern"),Te=we.constantOr(1),De=T.paint.get("line-gradient"),Re=T.getCrossfadeParameters(),Ve=Te?"linePattern":_e?"lineSDF":De?"lineGradient":"line",We=x.context,Ge=We.gl,ft=x.transform;let St=!0;for(const wt of D){const bt=F.getTile(wt);if(Te&&!bt.patternsLoaded())continue;const It=bt.getBucket(T);if(!It)continue;const Yt=It.programConfigurations.get(T.id),Zt=x.context.program.get(),Rt=x.useProgram(Ve,Yt),gr=St||Rt.program!==Zt,$r=x.style.map.terrain&&x.style.map.terrain.getTerrainData(wt),an=we.constantOr(null);if(an&&bt.imageAtlas){const Qn=bt.imageAtlas,_n=Qn.patternPositions[an.to.toString()],ai=Qn.patternPositions[an.from.toString()];_n&&ai&&Yt.setConstantPatternPositions(_n,ai)}const Ln=ft.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),kn=ft.getPixelScale(),qn=Te?VA(x,bt,T,kn,Re):_e?lA(x,bt,T,kn,_e,Re):De?jA(x,bt,T,kn,It.lineClipsArray.length):Ko(x,bt,T,kn);if(Te)We.activeTexture.set(Ge.TEXTURE0),bt.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),Yt.updatePaintBuffers(Re);else if(_e&&(gr||x.lineAtlas.dirty))We.activeTexture.set(Ge.TEXTURE0),x.lineAtlas.bind(We);else if(De){const Qn=It.gradients[T.id];let _n=Qn.texture;if(T.gradientVersion!==Qn.version){let ai=256;if(T.stepInterpolant){const Ii=F.getSource().maxzoom,Fi=wt.canonical.z===Ii?Math.ceil(1<<x.transform.maxZoom-wt.canonical.z):1;ai=s.ae(s.bX(It.maxLineLength/s.Z*1024*Fi),256,We.maxTextureSize)}Qn.gradient=s.bY({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:ai,image:Qn.gradient||void 0,clips:It.lineClipsArray}),Qn.texture?Qn.texture.update(Qn.gradient):Qn.texture=new me(We,Qn.gradient,Ge.RGBA),Qn.version=T.gradientVersion,_n=Qn.texture}We.activeTexture.set(Ge.TEXTURE0),_n.bind(T.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}const Wn=x.stencilModeForClipping(wt);Rt.draw(We,Ge.TRIANGLES,ie,Wn,be,tn.disabled,qn,$r,Ln,T.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,T.paint,x.transform.zoom,Yt,It.layoutVertexBuffer2),St=!1}}(t,a,h,p,y):s.c7(h)?function(x,F,T,D,O){const K=T.paint.get("fill-color"),G=T.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const{isRenderingToTexture:Y}=O,ie=x.colorModeForRenderPass(),be=T.paint.get("fill-pattern"),_e=x.opaquePassEnabledForLayer()&&!be.constantOr(1)&&K.constantOr(s.b7.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===_e){const we=x.getDepthModeForSublayer(1,x.renderPass==="opaque"?Qr.ReadWrite:Qr.ReadOnly);YA(x,F,T,D,we,ie,!1,Y)}if(x.renderPass==="translucent"&&T.paint.get("fill-antialias")){const we=x.getDepthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Qr.ReadOnly);YA(x,F,T,D,we,ie,!0,Y)}}(t,a,h,p,y):s.c8(h)?function(x,F,T,D,O){const K=T.paint.get("fill-extrusion-opacity");if(K===0)return;const{isRenderingToTexture:G}=O;if(x.renderPass==="translucent"){const Y=new Qr(x.context.gl.LEQUAL,Qr.ReadWrite,x.depthRangeFor3D);if(K!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))Rl(x,F,T,D,Y,Rr.disabled,xn.disabled,G),Rl(x,F,T,D,Y,x.stencilModeFor3D(),x.colorModeForRenderPass(),G);else{const ie=x.colorModeForRenderPass();Rl(x,F,T,D,Y,Rr.disabled,ie,G)}}}(t,a,h,p,y):s.c9(h)?function(x,F,T,D,O){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const{isRenderingToTexture:K}=O,G=x.context,Y=x.style.projection.useSubdivision,ie=x.getDepthModeForSublayer(0,Qr.ReadOnly),be=x.colorModeForRenderPass();if(x.renderPass==="offscreen")(function(_e,we,Te,De,Re,Ve,We){const Ge=_e.context,ft=Ge.gl;for(const St of Te){const wt=we.getTile(St),bt=wt.dem;if(!bt||!bt.data||!wt.needsHillshadePrepare)continue;const It=bt.dim,Yt=bt.stride,Zt=bt.getPixels();if(Ge.activeTexture.set(ft.TEXTURE1),Ge.pixelStoreUnpackPremultiplyAlpha.set(!1),wt.demTexture=wt.demTexture||_e.getTileTexture(Yt),wt.demTexture){const gr=wt.demTexture;gr.update(Zt,{premultiply:!1}),gr.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else wt.demTexture=new me(Ge,Zt,ft.RGBA,{premultiply:!1}),wt.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Ge.activeTexture.set(ft.TEXTURE0);let Rt=wt.fbo;if(!Rt){const gr=new me(Ge,{width:It,height:It,data:null},ft.RGBA);gr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Rt=wt.fbo=Ge.createFramebuffer(It,It,!0,!1),Rt.colorAttachment.set(gr.texture)}Ge.bindFramebuffer.set(Rt.framebuffer),Ge.viewport.set([0,0,It,It]),_e.useProgram("hillshadePrepare").draw(Ge,ft.TRIANGLES,Re,Ve,We,tn.disabled,Wa(wt.tileID,bt),null,null,De.id,_e.rasterBoundsBuffer,_e.quadTriangleIndexBuffer,_e.rasterBoundsSegments),wt.needsHillshadePrepare=!1}})(x,F,D,T,ie,Rr.disabled,be),G.viewport.set([0,0,x.width,x.height]);else if(x.renderPass==="translucent")if(Y){const[_e,we,Te]=x.stencilConfigForOverlapTwoPass(D);Hc(x,F,T,Te,_e,ie,be,!1,K),Hc(x,F,T,Te,we,ie,be,!0,K)}else{const[_e,we]=x.getStencilConfigForOverlapAndUpdateStencilID(D);Hc(x,F,T,we,_e,ie,be,!1,K)}}(t,a,h,p,y):s.ca(h)?function(x,F,T,D,O){if(x.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!D.length)return;const{isRenderingToTexture:K}=O,G=F.getSource(),Y=x.style.projection.useSubdivision;if(G instanceof er)lc(x,F,T,D,null,!1,!1,G.tileCoords,G.flippedWindingOrder,K);else if(Y){const[ie,be,_e]=x.stencilConfigForOverlapTwoPass(D);lc(x,F,T,_e,ie,!1,!0,Nl,!1,K),lc(x,F,T,_e,be,!0,!0,Nl,!1,K)}else{const[ie,be]=x.getStencilConfigForOverlapAndUpdateStencilID(D);lc(x,F,T,be,ie,!1,!0,Nl,!1,K)}}(t,a,h,p,y):s.cb(h)?function(x,F,T,D,O){const K=T.paint.get("background-color"),G=T.paint.get("background-opacity");if(G===0)return;const{isRenderingToTexture:Y}=O,ie=x.context,be=ie.gl,_e=x.style.projection,we=x.transform,Te=we.tileSize,De=T.paint.get("background-pattern");if(x.isPatternMissing(De))return;const Re=!De&&K.a===1&&G===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==Re)return;const Ve=Rr.disabled,We=x.getDepthModeForSublayer(0,Re==="opaque"?Qr.ReadWrite:Qr.ReadOnly),Ge=x.colorModeForRenderPass(),ft=x.useProgram(De?"backgroundPattern":"background"),St=D||Ke(we,{tileSize:Te,terrain:x.style.map.terrain});De&&(ie.activeTexture.set(be.TEXTURE0),x.imageManager.bind(x.context));const wt=T.getCrossfadeParameters();for(const bt of St){const It=we.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Yt=De?Qa(G,x,De,{tileID:bt,tileSize:Te},wt):Tl(G,K),Zt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(bt),Rt=_e.getMeshFromTileID(ie,bt.canonical,!1,!0,"raster");ft.draw(ie,be.TRIANGLES,We,Ve,Ge,tn.backCCW,Yt,Zt,It,T.id,Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}}(t,0,h,p,y):s.cc(h)&&function(x,F,T,D){const{isRenderingGlobe:O}=D,K=x.context,G=T.implementation,Y=x.style.projection,ie=x.transform,be=ie.getProjectionDataForCustomLayer(O),_e={farZ:ie.farZ,nearZ:ie.nearZ,fov:ie.fov*Math.PI/180,modelViewProjectionMatrix:ie.modelViewProjectionMatrix,projectionMatrix:ie.projectionMatrix,shaderData:{variantName:Y.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Y.shaderPreludeCode.vertexSource}`,define:Y.shaderDefine},defaultProjectionData:be},we=G.renderingMode?G.renderingMode:"2d";if(x.renderPass==="offscreen"){const Te=G.prerender;Te&&(x.setCustomLayerDefaults(),K.setColorMode(x.colorModeForRenderPass()),Te.call(G,K.gl,_e),K.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),K.setColorMode(x.colorModeForRenderPass()),K.setStencilMode(Rr.disabled);const Te=we==="3d"?x.getDepthModeFor3D():x.getDepthModeForSublayer(0,Qr.ReadOnly);K.setDepthMode(Te),G.render(K.gl,_e),K.setDirty(),x.setBaseState(),K.bindFramebuffer.set(null)}}(t,0,h,y))}saveTileTexture(t){const a=this._tileTextures[t.size[0]];a?a.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const a=this._tileTextures[t];return a&&a.length>0?a.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const a=this.imageManager.getPattern(t.from.toString()),h=this.imageManager.getPattern(t.to.toString());return!a||!h}useProgram(t,a,h=!1,p=[]){this.cache=this.cache||{};const y=!!this.style.map.terrain,x=this.style.projection,F=h?Si.projectionMercator:x.shaderPreludeCode,T=h?va:x.shaderDefine,D=t+(a?a.cacheKey:"")+`/${h?Xr:x.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[D]||(this.cache[D]=new ct(this.context,Si[t],a,GA[t],this._showOverdrawInspector,y,F,T,p)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new me(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:a}=this.context.gl;return this.width!==t||this.height!==a}}function Ja(m,t){let a,h=!1,p=null,y=null;const x=()=>{p=null,h&&(m.apply(y,a),p=setTimeout(x,t),h=!1)};return(...F)=>(h=!0,y=this,a=F,p||x(),p)}class jc{constructor(t){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let h;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(h=p)}),(h&&h[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(!this._isValidHash(a))return!1;const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:h,pitch:+(a[4]||0)}),!0},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const h=a.join("/");let p=h;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${h}`);let y=window.location.hash.replace(p,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let x=window.location.href.replace(/(#.+)?$/,y);x=x.replace("&&","&"),window.history.replaceState(window.history.state,null,x)},this._updateHash=Ja(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const a=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,p=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,p),x=Math.round(a.lng*y)/y,F=Math.round(a.lat*y)/y,T=this._map.getBearing(),D=this._map.getPitch();let O="";if(O+=t?`/${x}/${F}/${h}`:`${h}/${F}/${x}`,(T||D)&&(O+="/"+Math.round(10*T)/10),D&&(O+=`/${Math.round(D)}`),this._hashName){const K=this._hashName;let G=!1;const Y=window.location.hash.slice(1).split("&").map(ie=>{const be=ie.split("=")[0];return be===K?(G=!0,`${be}=${O}`):ie}).filter(ie=>ie);return G||Y.push(`${K}=${O}`),`#${Y.join("&")}`}return`#${O}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new s.Q(+t[2],+t[1])}catch{return!1}const a=+t[0],h=+(t[3]||0),p=+(t[4]||0);return a>=this._map.getMinZoom()&&a<=this._map.getMaxZoom()&&h>=-180&&h<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const Ps={linearity:.3,easing:s.cd(0,0,.3,1)},no=s.e({deceleration:2500,maxSpeed:1400},Ps),ua=s.e({deceleration:20,maxSpeed:1400},Ps),Vc=s.e({deceleration:1e3,maxSpeed:360},Ps),Fu=s.e({deceleration:1e3,maxSpeed:90},Ps),Gc=s.e({deceleration:1e3,maxSpeed:360},Ps);class Kc{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Q.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,a=Q.now();for(;t.length>0&&a-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)a.zoom+=y.zoomDelta||0,a.bearing+=y.bearingDelta||0,a.pitch+=y.pitchDelta||0,a.roll+=y.rollDelta||0,y.panDelta&&a.pan._add(y.panDelta),y.around&&(a.around=y.around),y.pinchAround&&(a.pinchAround=y.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(a.pan.mag()){const y=yA(a.pan.mag(),h,s.e({},no,t||{})),x=a.pan.mult(y.amount/a.pan.mag()),F=this._map.cameraHelper.handlePanInertia(x,this._map.transform);p.center=F.easingCenter,p.offset=F.easingOffset,mA(p,y)}if(a.zoom){const y=yA(a.zoom,h,ua);p.zoom=this._map.transform.zoom+y.amount,mA(p,y)}if(a.bearing){const y=yA(a.bearing,h,Vc);p.bearing=this._map.transform.bearing+s.ae(y.amount,-179,179),mA(p,y)}if(a.pitch){const y=yA(a.pitch,h,Fu);p.pitch=this._map.transform.pitch+y.amount,mA(p,y)}if(a.roll){const y=yA(a.roll,h,Gc);p.roll=this._map.transform.roll+s.ae(y.amount,-179,179),mA(p,y)}if(p.zoom||p.bearing){const y=a.pinchAround===void 0?a.around:a.pinchAround;p.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),s.e(p,{noMoveStart:!0})}}function mA(m,t){(!m.duration||m.duration<t.duration)&&(m.duration=t.duration,m.easing=t.easing)}function yA(m,t,a){const{maxSpeed:h,linearity:p,deceleration:y}=a,x=s.ae(m*p/(t/1e3),-h,h),F=Math.abs(x)/(y*p);return{easing:a.easing,duration:1e3*F,amount:x*(F/2)}}class Ui extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,h,p={}){h=h instanceof MouseEvent?h:new MouseEvent(t,h);const y=E.mousePos(a.getCanvas(),h),x=a.unproject(y);super(t,s.e({point:y,lngLat:x,originalEvent:h},p)),this._defaultPrevented=!1,this.target=a}}class wo extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,h){const p=t==="touchend"?h.changedTouches:h.touches,y=E.touchPos(a.getCanvasContainer(),p),x=y.map(T=>a.unproject(T)),F=y.reduce((T,D,O,K)=>T.add(D.div(K.length)),new s.P(0,0));super(t,{points:y,point:F,lngLats:x,lngLat:a.unproject(F),originalEvent:h}),this._defaultPrevented=!1}}class rl extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,h){super(t,{originalEvent:h}),this._defaultPrevented=!1}}class nl{constructor(t,a){this._map=t,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new rl(t.type,this._map,t))}mousedown(t,a){return this._mousedownPos=a,this._firePreventable(new Ui(t.type,this._map,t))}mouseup(t){this._map.fire(new Ui(t.type,this._map,t))}click(t,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Ui(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Ui(t.type,this._map,t))}mouseover(t){this._map.fire(new Ui(t.type,this._map,t))}mouseout(t){this._map.fire(new Ui(t.type,this._map,t))}touchstart(t){return this._firePreventable(new wo(t.type,this._map,t))}touchmove(t){this._map.fire(new wo(t.type,this._map,t))}touchend(t){this._map.fire(new wo(t.type,this._map,t))}touchcancel(t){this._map.fire(new wo(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class uc{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Ui(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Ui(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class il{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(s.P.convert(t),this._map.terrain)}}class hc{constructor(t,a){this._map=t,this._tr=new il(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,a){this.isEnabled()&&t.shiftKey&&t.button===0&&(E.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(t,a){if(!this._active)return;const h=a;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=h,this._box||(this._box=E.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const y=Math.min(p.x,h.x),x=Math.max(p.x,h.x),F=Math.min(p.y,h.y),T=Math.max(p.y,h.y);E.setTransform(this._box,`translate(${y}px,${F}px)`),this._box.style.width=x-y+"px",this._box.style.height=T-F+"px"}mouseupWindow(t,a){if(!this._active||t.button!==0)return;const h=this._startPos,p=a;if(this.reset(),E.suppressClick(),h.x!==p.x||h.y!==p.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:t})),{cameraAnimation:y=>y.fitScreenCoordinates(h,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(E.remove(this._box),this._box=null),E.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,a){return this._map.fire(new s.l(t,{originalEvent:a}))}}function fc(m,t){if(m.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${t.length}`);const a={};for(let h=0;h<m.length;h++)a[m[h].identifier]=t[h];return a}class Eu{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,a,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),h.length===this.numTouches&&(this.centroid=function(p){const y=new s.P(0,0);for(const x of p)y._add(x);return y.div(p.length)}(a),this.touches=fc(h,a)))}touchmove(t,a,h){if(this.aborted||!this.centroid)return;const p=fc(h,a);for(const y in this.touches){const x=p[y];(!x||x.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(t,a,h){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class al{constructor(t){this.singleTap=new Eu(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,a,h){this.singleTap.touchstart(t,a,h)}touchmove(t,a,h){this.singleTap.touchmove(t,a,h)}touchend(t,a,h){const p=this.singleTap.touchend(t,a,h);if(p){const y=t.timeStamp-this.lastTime<500,x=!this.lastTap||this.lastTap.dist(p)<30;if(y&&x||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Su{constructor(t){this._tr=new il(t),this._zoomIn=new al({numTouches:1,numTaps:2}),this._zoomOut=new al({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,a,h){this._zoomIn.touchstart(t,a,h),this._zoomOut.touchstart(t,a,h)}touchmove(t,a,h){this._zoomIn.touchmove(t,a,h),this._zoomOut.touchmove(t,a,h)}touchend(t,a,h){const p=this._zoomIn.touchend(t,a,h),y=this._zoomOut.touchend(t,a,h),x=this._tr;return p?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:x.zoom+1,around:x.unproject(p)},{originalEvent:t})}):y?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:x.zoom-1,around:x.unproject(y)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ha{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const a=this._moveFunction(...t);if(a.bearingDelta||a.pitchDelta||a.rollDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(t,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(a)?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,a){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const p=Array.isArray(a)?a[0]:a;return!this._moved&&p.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(h,p))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&E.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ms={0:1,2:2};class _A{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const a=E.mouseButton(t);this._eventButton=a}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(a,h){const p=Ms[h];return a.buttons===void 0||(a.buttons&p)!==p}(t,this._eventButton)}isValidEndEvent(t){return E.mouseButton(t)===this._eventButton}}class Oa{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class sl{constructor(t=new _A({checkCorrectEvent:()=>!0}),a=new Oa){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=a}_executeRelevantHandler(t,a,h){return t instanceof MouseEvent?a(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?h(t):void 0}startMove(t){this._executeRelevantHandler(t,a=>this.mouseMoveStateManager.startMove(a),a=>this.oneFingerTouchMoveStateManager.startMove(a))}endMove(t){this._executeRelevantHandler(t,a=>this.mouseMoveStateManager.endMove(a),a=>this.oneFingerTouchMoveStateManager.endMove(a))}isValidStartEvent(t){return this._executeRelevantHandler(t,a=>this.mouseMoveStateManager.isValidStartEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidStartEvent(a))}isValidMoveEvent(t){return this._executeRelevantHandler(t,a=>this.mouseMoveStateManager.isValidMoveEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(a))}isValidEndEvent(t){return this._executeRelevantHandler(t,a=>this.mouseMoveStateManager.isValidEndEvent(a),a=>this.oneFingerTouchMoveStateManager.isValidEndEvent(a))}}const dc=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=t=>{t.preventDefault()}};class Tu{constructor(t,a){this._clickTolerance=t.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,a,h){return this._calculateTransform(t,a,h)}touchmove(t,a,h){if(this._active){if(!this._shouldBePrevented(h.length))return t.preventDefault(),this._calculateTransform(t,a,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,a,h){this._calculateTransform(t,a,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,a,h){h.length>0&&(this._active=!0);const p=fc(h,a),y=new s.P(0,0),x=new s.P(0,0);let F=0;for(const D in p){const O=p[D],K=this._touches[D];K&&(y._add(O),x._add(O.sub(K)),F++,p[D]=O)}if(this._touches=p,this._shouldBePrevented(F)||!x.mag())return;const T=x.div(F);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(F),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class w{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,a,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([a[0],a[1]]))}touchmove(t,a,h){if(!this._firstTwoTouches)return;t.preventDefault();const[p,y]=this._firstTwoTouches,x=I(h,a,p),F=I(h,a,y);if(!x||!F)return;const T=this._aroundCenter?null:x.add(F).div(2);return this._move([x,F],T,t)}touchend(t,a,h){if(!this._firstTwoTouches)return;const[p,y]=this._firstTwoTouches,x=I(h,a,p),F=I(h,a,y);x&&F||(this._active&&E.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function I(m,t,a){for(let h=0;h<m.length;h++)if(m[h].identifier===a)return t[h]}function R(m,t){return Math.log(m/t)/Math.LN2}class j extends w{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,a){const h=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(R(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:R(this._distance,h),pinchAround:a}}}function te(m,t){return 180*m.angleWith(t)/Math.PI}class X extends w{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,a,h){const p=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:te(this._vector,p),pinchAround:a}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const a=25/(Math.PI*this._minDiameter)*360,h=te(t,this._startVector);return Math.abs(h)<a}}function ce(m){return Math.abs(m.y)>Math.abs(m.x)}class he extends w{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,a,h){super.touchstart(t,a,h),this._currentTouchCount=h.length}_start(t){this._lastPoints=t,ce(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,a,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=t[0].sub(this._lastPoints[0]),y=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,y,h.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(p.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(t,a,h){if(this._valid!==void 0)return this._valid;const p=t.mag()>=2,y=a.mag()>=2;if(!p&&!y)return;if(!p||!y)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const x=t.y>0==a.y>0;return ce(t)&&ce(a)&&x}}const ge={panStep:100,bearingStep:15,pitchStep:10};class xe{constructor(t){this._tr=new il(t);const a=ge;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let a=0,h=0,p=0,y=0,x=0;switch(t.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:t.shiftKey?h=-1:(t.preventDefault(),y=-1);break;case 39:t.shiftKey?h=1:(t.preventDefault(),y=1);break;case 38:t.shiftKey?p=1:(t.preventDefault(),x=-1);break;case 40:t.shiftKey?p=-1:(t.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(h=0,p=0),{cameraAnimation:F=>{const T=this._tr;F.easeTo({duration:300,easeId:"keyboardHandler",easing:Je,zoom:a?Math.round(T.zoom)+a*(t.shiftKey?2:1):T.zoom,bearing:T.bearing+h*this._bearingStep,pitch:T.pitch+p*this._pitchStep,offset:[-y*this._panStep,-x*this._panStep],center:T.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Je(m){return m*(2-m)}const pt=4.000244140625;class rt{constructor(t,a){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=t,this._tr=new il(t),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let a=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const h=Q.now(),p=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,a!==0&&a%pt==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(p*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),t.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=t,this._delta-=a,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=E.mousePos(this._map.getCanvas(),t),h=this._tr;this._aroundPoint=this._aroundCenter?h.transform.locationToScreenPoint(s.Q.convert(h.center)):a,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const F=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=F),typeof this._targetZoom=="number"&&(this._targetZoom+=F)}if(this._delta!==0){const F=this._type==="wheel"&&Math.abs(this._delta)>pt?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&T!==0&&(T=1/T);const D=typeof this._targetZoom!="number"?t.scale:s.ac(this._targetZoom);this._targetZoom=t.getConstrained(t.getCameraLngLat(),s.ah(D*T)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,h=this._startZoom,p=this._easing;let y,x=!1;if(this._type==="wheel"&&h&&p){const F=Q.now()-this._lastWheelEventTime,T=Math.min((F+5)/200,1),D=p(T);y=s.B.number(h,a,D),T<1?this._frameId||(this._frameId=!0):x=!0}else y=a,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!x,zoomDelta:y-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let a=s.cf;if(this._prevEase){const h=this._prevEase,p=(Q.now()-h.start)/h.duration,y=h.easing(p+.01)-h.easing(p),x=.27/Math.sqrt(y*y+1e-4)*.01,F=Math.sqrt(.0729-x*x);a=s.cd(x,F,.25,1)}return this._prevEase={start:Q.now(),duration:t,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class st{constructor(t,a){this._clickZoom=t,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ht{constructor(t){this._tr=new il(t),this.reset()}reset(){this._active=!1}dblclick(t,a){return t.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tt{constructor(){this._tap=new al({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,a,h){if(!this._swipePoint)if(this._tapTime){const p=a[0],y=t.timeStamp-this._tapTime<500,x=this._tapPoint.dist(p)<30;y&&x?h.length>0&&(this._swipePoint=p,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(t,a,h)}touchmove(t,a,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const p=a[0],y=p.y-this._swipePoint.y;return this._swipePoint=p,t.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(t,a,h)}touchend(t,a,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const p=this._tap.touchend(t,a,h);p&&(this._tapTime=t.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class et{constructor(t,a,h){this._el=t,this._mousePan=a,this._touchPan=h}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class it{constructor(t,a,h,p){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=a,this._mousePitch=h,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Qt{constructor(t,a,h,p){this._el=t,this._touchZoom=a,this._touchRotate=h,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Gt{constructor(t,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=E.create("div","maplibregl-cooperative-gesture-screen",t);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=a,this._container.appendChild(p);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=h,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(E.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,a){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:t,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Dt=m=>m.zoom||m.drag||m.roll||m.pitch||m.rotate;class pr extends s.l{}function Ar(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta||m.rollDelta}class Dr{constructor(t,a){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,y)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const x=p.type==="renderFrame"?void 0:p,F={needsRenderFrame:!1},T={},D={};for(const{handlerName:G,handler:Y,allowed:ie}of this._handlers){if(!Y.isEnabled())continue;let be;if(this._blockedByActive(D,ie,G))Y.reset();else if(Y[y||p.type]){if(s.cg(p,y||p.type)){const _e=E.mousePos(this._map.getCanvas(),p);be=Y[y||p.type](p,_e)}else if(s.ch(p,y||p.type)){const _e=this._getMapTouches(p.touches),we=E.touchPos(this._map.getCanvas(),_e);be=Y[y||p.type](p,we,_e)}else s.ci(y||p.type)||(be=Y[y||p.type](p));this.mergeHandlerResult(F,T,be,G,x),be&&be.needsRenderFrame&&this._triggerRenderFrame()}(be||Y.isActive())&&(D[G]=Y)}const O={};for(const G in this._previousActiveHandlers)D[G]||(O[G]=x);this._previousActiveHandlers=D,(Object.keys(O).length||Ar(F))&&(this._changes.push([F,T,O]),this._triggerRenderFrame()),(Object.keys(D).length||Ar(F))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:K}=F;K&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],K(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kc(t),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,y,x]of this._listeners)E.addEventListener(p,y,p===document?this.handleWindowEvent:this.handleEvent,x)}destroy(){for(const[t,a,h]of this._listeners)E.removeEventListener(t,a,t===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(t){const a=this._map,h=a.getCanvasContainer();this._add("mapEvent",new nl(a,t));const p=a.boxZoom=new hc(a,t);this._add("boxZoom",p),t.interactive&&t.boxZoom&&p.enable();const y=a.cooperativeGestures=new Gt(a,t.cooperativeGestures);this._add("cooperativeGestures",y),t.cooperativeGestures&&y.enable();const x=new Su(a),F=new Ht(a);a.doubleClickZoom=new st(F,x),this._add("tapZoom",x),this._add("clickZoom",F),t.interactive&&t.doubleClickZoom&&a.doubleClickZoom.enable();const T=new Tt;this._add("tapDragZoom",T);const D=a.touchPitch=new he(a);this._add("touchPitch",D),t.interactive&&t.touchPitch&&a.touchPitch.enable(t.touchPitch);const O=()=>a.project(a.getCenter()),K=function({enable:Re,clickTolerance:Ve,aroundCenter:We=!0,minPixelCenterThreshold:Ge=100,rotateDegreesPerPixelMoved:ft=.8},St){const wt=new _A({checkCorrectEvent:bt=>E.mouseButton(bt)===0&&bt.ctrlKey||E.mouseButton(bt)===2&&!bt.ctrlKey});return new ha({clickTolerance:Ve,move:(bt,It)=>{const Yt=St();if(We&&Math.abs(Yt.y-bt.y)>Ge)return{bearingDelta:s.ce(new s.P(bt.x,It.y),It,Yt)};let Zt=(It.x-bt.x)*ft;return We&&It.y<Yt.y&&(Zt=-Zt),{bearingDelta:Zt}},moveStateManager:wt,enable:Re,assignEvents:dc})}(t,O),G=function({enable:Re,clickTolerance:Ve,pitchDegreesPerPixelMoved:We=-.5}){const Ge=new _A({checkCorrectEvent:ft=>E.mouseButton(ft)===0&&ft.ctrlKey||E.mouseButton(ft)===2});return new ha({clickTolerance:Ve,move:(ft,St)=>({pitchDelta:(St.y-ft.y)*We}),moveStateManager:Ge,enable:Re,assignEvents:dc})}(t),Y=function({enable:Re,clickTolerance:Ve,rollDegreesPerPixelMoved:We=.3},Ge){const ft=new _A({checkCorrectEvent:St=>E.mouseButton(St)===2&&St.ctrlKey});return new ha({clickTolerance:Ve,move:(St,wt)=>{const bt=Ge();let It=(wt.x-St.x)*We;return wt.y<bt.y&&(It=-It),{rollDelta:It}},moveStateManager:ft,enable:Re,assignEvents:dc})}(t,O);a.dragRotate=new it(t,K,G,Y),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",G,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Y,["mousePitch"]),t.interactive&&t.dragRotate&&a.dragRotate.enable();const ie=function({enable:Re,clickTolerance:Ve}){const We=new _A({checkCorrectEvent:Ge=>E.mouseButton(Ge)===0&&!Ge.ctrlKey});return new ha({clickTolerance:Ve,move:(Ge,ft)=>({around:ft,panDelta:ft.sub(Ge)}),activateOnStart:!0,moveStateManager:We,enable:Re,assignEvents:dc})}(t),be=new Tu(t,a);a.dragPan=new et(h,ie,be),this._add("mousePan",ie),this._add("touchPan",be,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&a.dragPan.enable(t.dragPan);const _e=new X,we=new j;a.touchZoomRotate=new Qt(h,we,_e,T),this._add("touchRotate",_e,["touchPan","touchZoom"]),this._add("touchZoom",we,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&a.touchZoomRotate.enable(t.touchZoomRotate);const Te=a.scrollZoom=new rt(a,()=>this._triggerRenderFrame());this._add("scrollZoom",Te,["mousePan"]),t.interactive&&t.scrollZoom&&a.scrollZoom.enable(t.scrollZoom);const De=a.keyboard=new xe(a);this._add("keyboard",De),t.interactive&&t.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new uc(a))}_add(t,a,h){this._handlers.push({handlerName:t,handler:a,allowed:h}),this._handlersById[t]=a}stop(t){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Dt(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,a,h){for(const p in t)if(p!==h&&(!a||a.indexOf(p)<0))return!0;return!1}_getMapTouches(t){const a=[];for(const h of t)this._el.contains(h.target)&&a.push(h);return a}mergeHandlerResult(t,a,h,p,y){if(!h)return;s.e(t,h);const x={handlerName:p,originalEvent:h.originalEvent||y};h.zoomDelta!==void 0&&(a.zoom=x),h.panDelta!==void 0&&(a.drag=x),h.rollDelta!==void 0&&(a.roll=x),h.pitchDelta!==void 0&&(a.pitch=x),h.bearingDelta!==void 0&&(a.rotate=x)}_applyChanges(){const t={},a={},h={};for(const[p,y,x]of this._changes)p.panDelta&&(t.panDelta=(t.panDelta||new s.P(0,0))._add(p.panDelta)),p.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(t.rollDelta=(t.rollDelta||0)+p.rollDelta),p.around!==void 0&&(t.around=p.around),p.pinchAround!==void 0&&(t.pinchAround=p.pinchAround),p.noInertia&&(t.noInertia=p.noInertia),s.e(a,y),s.e(h,x);this._updateMapTransform(t,a,h),this._changes=[]}_updateMapTransform(t,a,h){const p=this._map,y=p._getTransformForUpdate(),x=p.terrain;if(!(Ar(t)||x&&this._terrainMovement))return this._fireEvents(a,h,!0);p._stop(!0);let{panDelta:F,zoomDelta:T,bearingDelta:D,pitchDelta:O,rollDelta:K,around:G,pinchAround:Y}=t;Y!==void 0&&(G=Y),G=G||p.transform.centerPoint,x&&!y.isPointOnMapSurface(G)&&(G=y.centerPoint);const ie={panDelta:F,zoomDelta:T,rollDelta:K,pitchDelta:O,bearingDelta:D,around:G};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(G)&&(G=y.centerPoint);const be=G.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(F?G.sub(F):G);x?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,y),this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(F))):this._map.cameraHelper.handleMapControlsPan(ie,y,be):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ie,y,be))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,y),this._map.cameraHelper.handleMapControlsPan(ie,y,be)),p._applyUpdatedTransform(y),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(a,h,!0)}_fireEvents(t,a,h){const p=Dt(this._eventsInProgress),y=Dt(t),x={};for(const K in t){const{originalEvent:G}=t[K];this._eventsInProgress[K]||(x[`${K}start`]=G),this._eventsInProgress[K]=t[K]}!p&&y&&this._fireEvent("movestart",y.originalEvent);for(const K in x)this._fireEvent(K,x[K]);y&&this._fireEvent("move",y.originalEvent);for(const K in t){const{originalEvent:G}=t[K];this._fireEvent(K,G)}const F={};let T;for(const K in this._eventsInProgress){const{handlerName:G,originalEvent:Y}=this._eventsInProgress[K];this._handlersById[G].isActive()||(delete this._eventsInProgress[K],T=a[G]||Y,F[`${K}end`]=T)}for(const K in F)this._fireEvent(K,F[K]);const D=Dt(this._eventsInProgress),O=(p||y)&&!D;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const K=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&K.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(K)}if(h&&O){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!K||!K.essential&&Q.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:T})),G(this._map.getBearing())&&this._map.resetNorth()):(G(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(t,a){this._map.fire(new s.l(t,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new pr("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class hr extends s.E{constructor(t,a,h){super(),this._renderFrameCallback=()=>{const p=Math.min((Q.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=h.bearingSnap,this.cameraHelper=a,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(t,a){t.apply(this.transform),this.transform=t,this.cameraHelper=a}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(t,a){return this.jumpTo({center:t},a)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,a){return this.jumpTo({elevation:t},a),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,a,h){return t=s.P.convert(t).mult(-1),this.panTo(this.transform.center,s.e({offset:t},a),h)}panTo(t,a,h){return this.easeTo(s.e({center:t},a),h)}getZoom(){return this.transform.zoom}setZoom(t,a){return this.jumpTo({zoom:t},a),this}zoomTo(t,a,h){return this.easeTo(s.e({zoom:t},a),h)}zoomIn(t,a){return this.zoomTo(this.getZoom()+1,t,a),this}zoomOut(t,a){return this.zoomTo(this.getZoom()-1,t,a),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,a){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new s.l("movestart",a)).fire(new s.l("move",a)).fire(new s.l("moveend",a))),this}getBearing(){return this.transform.bearing}setBearing(t,a){return this.jumpTo({bearing:t},a),this}getPadding(){return this.transform.padding}setPadding(t,a){return this.jumpTo({padding:t},a),this}rotateTo(t,a,h){return this.easeTo(s.e({bearing:t},a),h)}resetNorth(t,a){return this.rotateTo(0,s.e({duration:1e3},t),a),this}resetNorthPitch(t,a){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},t),a),this}snapToNorth(t,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,a):this}getPitch(){return this.transform.pitch}setPitch(t,a){return this.jumpTo({pitch:t},a),this}getRoll(){return this.transform.roll}setRoll(t,a){return this.jumpTo({roll:t},a),this}cameraForBounds(t,a){t=Xt.convert(t).adjustAntiMeridian();const h=a&&a.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),h,a)}_cameraForBoxAndBearing(t,a,h,p){const y={top:0,bottom:0,right:0,left:0};if(typeof(p=s.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const D=p.padding;p.padding={top:D,bottom:D,right:D,left:D}}const x=s.e(y,p.padding);p.padding=x;const F=this.transform,T=new Xt(t,a);return this.cameraHelper.cameraForBoxAndBearing(p,x,T,h,F)}fitBounds(t,a,h){return this._fitInternal(this.cameraForBounds(t,a),a,h)}fitScreenCoordinates(t,a,h,p,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(t)),this.transform.screenPointToLocation(s.P.convert(a)),h,p),p,y)}_fitInternal(t,a,h){return t?(delete(a=s.e(t,a)).padding,a.linear?this.easeTo(a,h):this.flyTo(a,h)):this}jumpTo(t,a){this.stop();const h=this._getTransformForUpdate();let p=!1,y=!1,x=!1;const F=h.zoom;this.cameraHelper.handleJumpToCenterZoom(h,t);const T=h.zoom!==F;return"elevation"in t&&h.elevation!==+t.elevation&&h.setElevation(+t.elevation),"bearing"in t&&h.bearing!==+t.bearing&&(p=!0,h.setBearing(+t.bearing)),"pitch"in t&&h.pitch!==+t.pitch&&(y=!0,h.setPitch(+t.pitch)),"roll"in t&&h.roll!==+t.roll&&(x=!0,h.setRoll(+t.roll)),t.padding==null||h.isPaddingEqual(t.padding)||h.setPadding(t.padding),this._applyUpdatedTransform(h),this.fire(new s.l("movestart",a)).fire(new s.l("move",a)),T&&this.fire(new s.l("zoomstart",a)).fire(new s.l("zoom",a)).fire(new s.l("zoomend",a)),p&&this.fire(new s.l("rotatestart",a)).fire(new s.l("rotate",a)).fire(new s.l("rotateend",a)),y&&this.fire(new s.l("pitchstart",a)).fire(new s.l("pitch",a)).fire(new s.l("pitchend",a)),x&&this.fire(new s.l("rollstart",a)).fire(new s.l("roll",a)).fire(new s.l("rollend",a)),this.fire(new s.l("moveend",a))}calculateCameraOptionsFromTo(t,a,h,p=0){const y=s.$.fromLngLat(t,a),x=s.$.fromLngLat(h,p),F=x.x-y.x,T=x.y-y.y,D=x.z-y.z,O=Math.hypot(F,T,D);if(O===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(F,T),G=s.ah(this.transform.cameraToCenterDistance/O/this.transform.tileSize),Y=180*Math.atan2(F,-T)/Math.PI;let ie=180*Math.acos(K/O)/Math.PI;return ie=D<0?90-ie:90+ie,{center:x.toLngLat(),elevation:p,zoom:G,pitch:ie,bearing:Y}}calculateCameraOptionsFromCameraLngLatAltRotation(t,a,h,p,y){const x=this.transform.calculateCenterFromCameraLngLatAlt(t,a,h,p);return{center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:h,pitch:p,roll:y}}easeTo(t,a){this._stop(!1,t.easeId),((t=s.e({offset:[0,0],duration:500,easing:s.cf},t)).animate===!1||!t.essential&&Q.prefersReducedMotion)&&(t.duration=0);const h=this._getTransformForUpdate(),p=this.getBearing(),y=h.pitch,x=h.roll,F="bearing"in t?this._normalizeBearing(t.bearing,p):p,T="pitch"in t?+t.pitch:y,D="roll"in t?this._normalizeBearing(t.roll,x):x,O="padding"in t?t.padding:h.padding,K=s.P.convert(t.offset);let G,Y;t.around&&(G=s.Q.convert(t.around),Y=h.locationToScreenPoint(G));const ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},be=this.cameraHelper.handleEaseTo(h,{bearing:F,pitch:T,roll:D,padding:O,around:G,aroundPoint:Y,offsetAsPoint:K,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||p!==F,this._pitching=this._pitching||T!==y,this._rolling=this._rolling||D!==x,this._padding=!h.isPaddingEqual(O),this._zooming=this._zooming||be.isZooming,this._easeId=t.easeId,this._prepareEase(a,t.noMoveStart,ie),this.terrain&&this._prepareElevation(be.elevationCenter),this._ease(_e=>{be.easeFunc(_e),this.terrain&&!t.freezeElevation&&this._updateElevation(_e),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},_e=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(a,_e)},t),this}_prepareEase(t,a,h={}){this._moving=!0,a||h.moving||this.fire(new s.l("movestart",t)),this._zooming&&!h.zooming&&this.fire(new s.l("zoomstart",t)),this._rotating&&!h.rotating&&this.fire(new s.l("rotatestart",t)),this._pitching&&!h.pitching&&this.fire(new s.l("pitchstart",t)),this._rolling&&!h.rolling&&this.fire(new s.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&a!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(h-(a-(h*t+this._elevationStart))/(1-t)),this._elevationTarget=a}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const a=t.getCameraLngLat(),h=t.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(a,t.zoom):0;if(h<p){const y=this.calculateCameraOptionsFromTo(a,p,t.center,t.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(t){const a=[];if(a.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&a.push(p=>this.transformCameraUpdate(p)),!a.length)return;const h=t.clone();for(const p of a){const y=h.clone(),{center:x,zoom:F,roll:T,pitch:D,bearing:O,elevation:K}=p(y);x&&y.setCenter(x),K!==void 0&&y.setElevation(K),F!==void 0&&y.setZoom(F),T!==void 0&&y.setRoll(T),D!==void 0&&y.setPitch(D),O!==void 0&&y.setBearing(O),h.apply(y)}this.transform.apply(h)}_fireMoveEvents(t){this.fire(new s.l("move",t)),this._zooming&&this.fire(new s.l("zoom",t)),this._rotating&&this.fire(new s.l("rotate",t)),this._pitching&&this.fire(new s.l("pitch",t)),this._rolling&&this.fire(new s.l("roll",t))}_afterEase(t,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const h=this._zooming,p=this._rotating,y=this._pitching,x=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,h&&this.fire(new s.l("zoomend",t)),p&&this.fire(new s.l("rotateend",t)),y&&this.fire(new s.l("pitchend",t)),x&&this.fire(new s.l("rollend",t)),this.fire(new s.l("moveend",t))}flyTo(t,a){if(!t.essential&&Q.prefersReducedMotion){const It=s.O(t,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(It,a)}this.stop(),t=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cf},t);const h=this._getTransformForUpdate(),p=h.bearing,y=h.pitch,x=h.roll,F=h.padding,T="bearing"in t?this._normalizeBearing(t.bearing,p):p,D="pitch"in t?+t.pitch:y,O="roll"in t?this._normalizeBearing(t.roll,x):x,K="padding"in t?t.padding:h.padding,G=s.P.convert(t.offset);let Y=h.centerPoint.add(G);const ie=h.screenPointToLocation(Y),be=this.cameraHelper.handleFlyTo(h,{bearing:T,pitch:D,roll:O,padding:K,locationAtOffset:ie,offsetAsPoint:G,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let _e=t.curve;const we=Math.max(h.width,h.height),Te=we/be.scaleOfZoom,De=be.pixelPathLength;typeof be.scaleOfMinZoom=="number"&&(_e=Math.sqrt(we/be.scaleOfMinZoom/De*2));const Re=_e*_e;function Ve(It){const Yt=(Te*Te-we*we+(It?-1:1)*Re*Re*De*De)/(2*(It?Te:we)*Re*De);return Math.log(Math.sqrt(Yt*Yt+1)-Yt)}function We(It){return(Math.exp(It)-Math.exp(-It))/2}function Ge(It){return(Math.exp(It)+Math.exp(-It))/2}const ft=Ve(!1);let St=function(It){return Ge(ft)/Ge(ft+_e*It)},wt=function(It){return we*((Ge(ft)*(We(Yt=ft+_e*It)/Ge(Yt))-We(ft))/Re)/De;var Yt},bt=(Ve(!0)-ft)/_e;if(Math.abs(De)<2e-6||!isFinite(bt)){if(Math.abs(we-Te)<1e-6)return this.easeTo(t,a);const It=Te<we?-1:1;bt=Math.abs(Math.log(Te/we))/_e,wt=()=>0,St=Yt=>Math.exp(It*_e*Yt)}return t.duration="duration"in t?+t.duration:1e3*bt/("screenSpeed"in t?+t.screenSpeed/_e:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=p!==T,this._pitching=D!==y,this._rolling=O!==x,this._padding=!h.isPaddingEqual(K),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(be.targetCenter),this._ease(It=>{const Yt=It*bt,Zt=1/St(Yt),Rt=wt(Yt);this._rotating&&h.setBearing(s.B.number(p,T,It)),this._pitching&&h.setPitch(s.B.number(y,D,It)),this._rolling&&h.setRoll(s.B.number(x,O,It)),this._padding&&(h.interpolatePadding(F,K,It),Y=h.centerPoint.add(G)),be.easeFunc(It,Zt,Rt,Y),this.terrain&&!t.freezeElevation&&this._updateElevation(It),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,a){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,a)}return t||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(t,a,h){h.animate===!1||h.duration===0?(t(1),a()):(this._easeStart=Q.now(),this._easeOptions=h,this._onEaseFrame=t,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,a){t=s.aL(t,-180,180);const h=Math.abs(t-a);return Math.abs(t-360-a)<h&&(t-=360),Math.abs(t+360-a)<h&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(t),this.transform.tileZoom):null}}const nn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Mr{constructor(t=nn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=E.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=E.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,a){const h=this._map._getUIString(`AttributionControl.${a}`);t.title=h,t.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const a=this._map.style.sourceCaches;for(const p in a){const y=a[p];if(y.used||y.usedForTerrain){const x=y.getSource();x.attribution&&t.indexOf(x.attribution)<0&&t.push(x.attribution)}}t=t.filter(p=>String(p).trim()),t.sort((p,y)=>p.length-y.length),t=t.filter((p,y)=>{for(let x=y+1;x<t.length;x++)if(t[x].indexOf(p)>=0)return!1;return!0});const h=t.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,t.length?(this._innerContainer.innerHTML=E.sanitize(h),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fn{constructor(t={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const h=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=E.create("div","maplibregl-ctrl");const a=E.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){E.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class un{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const a=++this._id;return this._queue.push({callback:t,id:a,cancelled:!1}),a}remove(t){const a=this._currentlyRunning,h=a?this._queue.concat(a):this._queue;for(const p of h)if(p.id===t)return void(p.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const h of a)if(!h.cancelled&&(h.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Mn=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class Tn extends s.E{constructor(t){super(),this._lastTilesetChange=Q.now(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,a){this.sourceCache.update(t,a),this._renderableTilesKeys=[];const h={};for(const p of Ke(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))h[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(p.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[p.key]=new Pr(p,this.tileSize),this._lastTilesetChange=Q.now());for(const p in this._tiles)h[p]||delete this._tiles[p]}freeRtt(t){for(const a in this._tiles){const h=this._tiles[a];(!t||h.tileID.equals(t)||h.tileID.isChildOf(t)||t.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,a){return a?this._getTerrainCoordsForTileRanges(t,a):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const a={};for(const h of this._renderableTilesKeys){const p=this._tiles[h].tileID,y=t.clone(),x=s.b2();if(p.canonical.equals(t.canonical))s.bQ(x,0,s.Z,s.Z,0,0,1);else if(p.canonical.isChildOf(t.canonical)){const F=p.canonical.z-t.canonical.z,T=p.canonical.x-(p.canonical.x>>F<<F),D=p.canonical.y-(p.canonical.y>>F<<F),O=s.Z>>F;s.bQ(x,0,O,O,0,0,1),s.L(x,x,[-T*O,-D*O,0])}else{if(!t.canonical.isChildOf(p.canonical))continue;{const F=t.canonical.z-p.canonical.z,T=t.canonical.x-(t.canonical.x>>F<<F),D=t.canonical.y-(t.canonical.y>>F<<F),O=s.Z>>F;s.bQ(x,0,s.Z,s.Z,0,0,1),s.L(x,x,[T*O,D*O,0]),s.M(x,x,[1/2**F,1/2**F,0])}}y.terrainRttPosMatrix32f=new Float32Array(x),a[h]=y}return a}_getTerrainCoordsForTileRanges(t,a){const h={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID;if(!this._isWithinTileRanges(y,a))continue;const x=t.clone(),F=s.b2();if(y.canonical.z===t.canonical.z){const T=t.canonical.x-y.canonical.x,D=t.canonical.y-y.canonical.y;s.bQ(F,0,s.Z,s.Z,0,0,1),s.L(F,F,[T*s.Z,D*s.Z,0])}else if(y.canonical.z>t.canonical.z){const T=y.canonical.z-t.canonical.z,D=y.canonical.x-(y.canonical.x>>T<<T),O=y.canonical.y-(y.canonical.y>>T<<T),K=t.canonical.x-(y.canonical.x>>T),G=t.canonical.y-(y.canonical.y>>T),Y=s.Z>>T;s.bQ(F,0,Y,Y,0,0,1),s.L(F,F,[-D*Y+K*s.Z,-O*Y+G*s.Z,0])}else{const T=t.canonical.z-y.canonical.z,D=t.canonical.x-(t.canonical.x>>T<<T),O=t.canonical.y-(t.canonical.y>>T<<T),K=(t.canonical.x>>T)-y.canonical.x,G=(t.canonical.y>>T)-y.canonical.y,Y=s.Z<<T;s.bQ(F,0,Y,Y,0,0,1),s.L(F,F,[D*s.Z+K*Y,O*s.Z+G*Y,0])}x.terrainRttPosMatrix32f=new Float32Array(F),h[p]=x}return h}getSourceTile(t,a){const h=this.sourceCache._source;let p=t.overscaledZ-this.deltaZoom;if(p>h.maxzoom&&(p=h.maxzoom),p<h.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(p).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!y||!y.dem)&&a)for(;p>=h.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(t.scaledTo(p--).key);return y}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,a){return a[t.canonical.z]&&t.canonical.x>=a[t.canonical.z].minTileX&&t.canonical.x<=a[t.canonical.z].maxTileX&&t.canonical.y>=a[t.canonical.z].minTileY&&t.canonical.y<=a[t.canonical.z].maxTileY}}class Yr{constructor(t,a,h){this._meshCache={},this.painter=t,this.sourceCache=new Tn(a),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,a,h,p=s.Z){var y;if(!(a>=0&&a<p&&h>=0&&h<p))return 0;const x=this.getTerrainData(t),F=(y=x.tile)===null||y===void 0?void 0:y.dem;if(!F)return 0;const T=s.cj([],[a/p*s.Z,h/p*s.Z],x.u_terrain_matrix),D=[T[0]*F.dim,T[1]*F.dim],O=Math.floor(D[0]),K=Math.floor(D[1]),G=D[0]-O,Y=D[1]-K;return F.get(O,K)*(1-G)*(1-Y)+F.get(O+1,K)*G*(1-Y)+F.get(O,K+1)*(1-G)*Y+F.get(O+1,K+1)*G*Y}getElevationForLngLatZoom(t,a){if(!s.ck(a,t.wrap()))return 0;const{tileID:h,mercatorX:p,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(t,a);return this.getElevation(h,p%s.Z,y%s.Z,s.Z)}getElevation(t,a,h,p=s.Z){return this.getDEMElevation(t,a,h,p)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const p=this.painter.context,y=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new me(p,y,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new me(p,new s.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}const a=this.sourceCache.getSourceTile(t,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const p=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new me(p,a.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),a.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const h=a&&a+a.tileID.key+t.key;if(h&&!this._demMatrixCache[h]){const p=this.sourceCache.sourceCache._source.maxzoom;let y=t.canonical.z-a.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=p?y=t.canonical.z-p:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const x=t.canonical.x-(t.canonical.x>>y<<y),F=t.canonical.y-(t.canonical.y>>y<<y),T=s.cl(new Float64Array(16),[1/(s.Z<<y),1/(s.Z<<y),0]);s.L(T,T,[x*s.Z,F*s.Z,0]),this._demMatrixCache[t.key]={matrix:T,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(t){const a=this.painter,h=a.width/devicePixelRatio,p=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new me(a.context,{width:h,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new me(a.context,{width:h,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(h,p,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,h,p))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,x=0;y<this._coordsTextureSize;y++)for(let F=0;F<this._coordsTextureSize;F++,x+=4)a[x+0]=255&F,a[x+1]=255&y,a[x+2]=F>>8<<4|y>>8,a[x+3]=0;const h=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),p=new me(t,h,t.gl.RGBA,{premultiply:!1});return p.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),h=this.painter.context,p=h.gl,y=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),x=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),F=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(y,F-x-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null);const T=a[0]+(a[2]>>4<<8),D=a[1]+((15&a[2])<<8),O=this.coordsIndex[255-a[3]],K=O&&this.sourceCache.getTileByID(O);if(!K)return null;const G=this._coordsTextureSize,Y=(1<<K.tileID.canonical.z)*G;return new s.$((K.tileID.canonical.x*G+T)/Y+K.tileID.wrap,(K.tileID.canonical.y*G+D)/Y,this.getElevation(K.tileID,T,D,G))}depthAtPoint(t){const a=new Uint8Array(4),h=this.painter.context,p=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(t){var a;const h=((a=this.painter.style.projection)===null||a===void 0?void 0:a.transitionState)>0,p=h&&t.canonical.y===0,y=h&&t.canonical.y===(1<<t.canonical.z)-1,x=`m_${p?"n":""}_${y?"s":""}`;if(this._meshCache[x])return this._meshCache[x];const F=this.painter.context,T=new s.cm,D=new s.aK,O=this.meshSize,K=s.Z/O,G=O*O;for(let Ge=0;Ge<=O;Ge++)for(let ft=0;ft<=O;ft++)T.emplaceBack(ft*K,Ge*K,0);for(let Ge=0;Ge<G;Ge+=O+1)for(let ft=0;ft<O;ft++)D.emplaceBack(ft+Ge,O+ft+Ge+1,O+ft+Ge+2),D.emplaceBack(ft+Ge,O+ft+Ge+2,ft+Ge+1);const Y=T.length,ie=Y+(O+1),be=(O+1)*O,_e=p?s.b9:0,we=p?0:1,Te=y?s.ba:s.Z,De=y?0:1;for(let Ge=0;Ge<=O;Ge++)T.emplaceBack(Ge*K,_e,we);for(let Ge=0;Ge<=O;Ge++)T.emplaceBack(Ge*K,Te,De);for(let Ge=0;Ge<O;Ge++)D.emplaceBack(be+Ge,ie+Ge,ie+Ge+1),D.emplaceBack(be+Ge,ie+Ge+1,be+Ge+1),D.emplaceBack(0+Ge,Y+Ge+1,Y+Ge),D.emplaceBack(0+Ge,0+Ge+1,Y+Ge+1);const Re=T.length,Ve=Re+2*(O+1);for(const Ge of[0,1])for(let ft=0;ft<=O;ft++)for(const St of[0,1])T.emplaceBack(Ge*s.Z,ft*K,St);for(let Ge=0;Ge<2*O;Ge+=2)D.emplaceBack(Re+Ge,Re+Ge+1,Re+Ge+3),D.emplaceBack(Re+Ge,Re+Ge+3,Re+Ge+2),D.emplaceBack(Ve+Ge,Ve+Ge+3,Ve+Ge+1),D.emplaceBack(Ve+Ge,Ve+Ge+2,Ve+Ge+3);const We=new Oo(F.createVertexBuffer(T,Mn.members),F.createIndexBuffer(D),s.aJ.simpleSegment(0,0,T.length,D.length));return this._meshCache[x]=We,We}getMeshFrameDelta(t){return 2*Math.PI*s.bu/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,a){var h;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(t,a);return(h=this.getMinMaxElevation(p).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(t){const a=this.getTerrainData(t).tile,h={minElevation:null,maxElevation:null};return a&&a.dem&&(h.minElevation=a.dem.min*this.exaggeration,h.maxElevation=a.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(t,a){const h=s.$.fromLngLat(t.wrap()),p=(1<<a)*s.Z,y=h.x*p,x=h.y*p,F=Math.floor(y/s.Z),T=Math.floor(x/s.Z);return{tileID:new s.Y(a,0,a,F,T),mercatorX:y,mercatorY:x}}}class Bi{constructor(t,a,h){this._context=t,this._size=a,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new me(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(h.texture),{id:t,fbo:a,texture:h,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>t.id!==a),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}const Un={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ni{constructor(t,a){this.painter=t,this.terrain=a,this.pool=new Bi(t.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(h=>!t._layers[h].isHidden(a)),this._coordsAscending={};for(const h in t.sourceCaches){this._coordsAscending[h]={};const p=t.sourceCaches[h].getVisibleCoordinates(),y=t.sourceCaches[h].getSource(),x=y instanceof er?y.terrainTileRanges:null;for(const F of p){const T=this.terrain.sourceCache.getTerrainCoords(F,x);for(const D in T)this._coordsAscending[h][D]||(this._coordsAscending[h][D]=[]),this._coordsAscending[h][D].push(T[D])}}this._coordsAscendingStr={};for(const h of t._order){const p=t._layers[h],y=p.source;if(Un[p.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(const x in this._coordsAscending[y])this._coordsAscendingStr[y][x]=this._coordsAscending[y][x].map(F=>F.key).sort().join()}}for(const h of this._renderableTiles)for(const p in this._coordsAscendingStr){const y=this._coordsAscendingStr[p][h.tileID.key];y&&y!==h.rttCoords[p]&&(h.rtt=[])}}renderLayer(t,a){if(t.isHidden(this.painter.transform.zoom))return!1;const h=Object.assign(Object.assign({},a),{isRenderingToTexture:!0}),p=t.type,y=this.painter,x=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Un[p]&&(this._prevType&&Un[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(t.id),!x))return!0;if(Un[this._prevType]||Un[p]&&x){this._prevType=p;const F=this._stacks.length-1,T=this._stacks[F]||[];for(const D of this._renderableTiles){if(this.pool.isFull()&&($o(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(D),D.rtt[F]){const K=this.pool.getObjectForId(D.rtt[F].id);if(K.stamp===D.rtt[F].stamp){this.pool.useObject(K);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),D.rtt[F]={id:O.id,stamp:O.stamp},y.context.bindFramebuffer.set(O.fbo.framebuffer),y.context.clear({color:s.b7.transparent,stencil:0}),y.currentStencilSource=void 0;for(let K=0;K<T.length;K++){const G=y.style._layers[T[K]],Y=G.source?this._coordsAscending[G.source][D.tileID.key]:[D.tileID];y.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),y._renderTileClippingMasks(G,Y,!0),y.renderLayer(y,y.style.sourceCaches[G.source],G,Y,h),G.source&&(D.rttCoords[G.source]=this._coordsAscendingStr[G.source][D.tileID.key])}}return $o(this.painter,this.terrain,this._rttTiles,h),this._rttTiles=[],this.pool.freeAllObjects(),Un[p]}return!1}}const cr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ir=v,Ki={hash:!1,interactive:!0,bearingSnap:7,attributionControl:nn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ca={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ci{constructor(t,a,h=!1){this.mousedown=y=>{this.startMove(y,E.mousePos(this.element,y)),E.addEventListener(window,"mousemove",this.mousemove),E.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,E.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHanlder.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=E.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),E.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=E.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=a;const p=new sl;this._rotatePitchHanlder=new ha({clickTolerance:3,move:(y,x)=>{const F=a.getBoundingClientRect(),T=new s.P((F.bottom-F.top)/2,(F.right-F.left)/2);return{bearingDelta:s.ce(new s.P(y.x,x.y),x,T),pitchDelta:h?-.5*(x.y-y.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=t,E.addEventListener(a,"mousedown",this.mousedown),E.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),E.addEventListener(a,"touchcancel",this.reset)}startMove(t,a){this._rotatePitchHanlder.dragStart(t,a),E.disableDrag()}move(t,a){const h=this.map,{bearingDelta:p,pitchDelta:y}=this._rotatePitchHanlder.dragMove(t,a)||{};p&&h.setBearing(h.getBearing()+p),y&&h.setPitch(h.getPitch()+y)}off(){const t=this.element;E.removeEventListener(t,"mousedown",this.mousedown),E.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend),E.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){E.enableDrag(),E.removeEventListener(window,"mousemove",this.mousemove),E.removeEventListener(window,"mouseup",this.mouseup),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend)}}let gn;function qi(m,t,a,h=!1){if(h||!a.getCoveringTilesDetailsProvider().allowWorldCopies())return m==null?void 0:m.wrap();const p=new s.Q(m.lng,m.lat);if(m=new s.Q(m.lng,m.lat),t){const y=new s.Q(m.lng-360,m.lat),x=new s.Q(m.lng+360,m.lat),F=a.locationToScreenPoint(m).distSqr(t);a.locationToScreenPoint(y).distSqr(t)<F?m=y:a.locationToScreenPoint(x).distSqr(t)<F&&(m=x)}for(;Math.abs(m.lng-a.center.lng)>180;){const y=a.locationToScreenPoint(m);if(y.x>=0&&y.y>=0&&y.x<=a.width&&y.y<=a.height)break;m.lng>a.center.lng?m.lng-=360:m.lng+=360}return m.lng!==p.lng&&a.isPointOnMapSurface(a.locationToScreenPoint(m))?m:p}const ii={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Us(m,t,a){const h=m.classList;for(const p in ii)h.remove(`maplibregl-${a}-anchor-${p}`);h.add(`maplibregl-${a}-anchor-${t}`)}class $n extends s.E{constructor(t){if(super(),this._onKeyPress=a=>{const h=a.code,p=a.charCode||a.keyCode;h!=="Space"&&h!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=a=>{const h=a.originalEvent.target,p=this._element;this._popup&&(h===p||p.contains(h))&&this.togglePopup()},this._update=a=>{if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=qi(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),E.setTransform(this._element,`${ii[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${p}`),Q.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=s.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=E.create("div");const a=E.createNS("http://www.w3.org/2000/svg","svg"),h=41,p=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${h}px`),a.setAttributeNS(null,"width",`${p}px`),a.setAttributeNS(null,"viewBox",`0 0 ${p} ${h}`);const y=E.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const x=E.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");const F=E.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(3.0, 29.0)"),F.setAttributeNS(null,"fill","#000000");const T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const we of T){const Te=E.createNS("http://www.w3.org/2000/svg","ellipse");Te.setAttributeNS(null,"opacity","0.04"),Te.setAttributeNS(null,"cx","10.5"),Te.setAttributeNS(null,"cy","5.80029008"),Te.setAttributeNS(null,"rx",we.rx),Te.setAttributeNS(null,"ry",we.ry),F.appendChild(Te)}const D=E.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const O=E.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(O);const K=E.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const G=E.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(G);const Y=E.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const ie=E.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=E.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const _e=E.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#FFFFFF"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962"),ie.appendChild(be),ie.appendChild(_e),x.appendChild(F),x.appendChild(D),x.appendChild(K),x.appendChild(Y),x.appendChild(ie),a.appendChild(x),a.setAttributeNS(null,"height",h*this._scale+"px"),a.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(a),this._offset=s.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Us(this._element,this._anchor,"marker"),t&&t.className)for(const a of t.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),E.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=s.Q.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const p=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var a,h;const p=(a=this._map)===null||a===void 0?void 0:a.terrain,y=this._map.transform.isLocationOccluded(this._lngLat);if(!p||y){const Y=y?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Y&&(this._element.style.opacity=Y))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const x=this._map,F=x.terrain.depthAtPoint(this._pos),T=x.terrain.getElevationForLngLatZoom(this._lngLat,x.transform.tileZoom);if(x.transform.lngLatToCameraDepth(this._lngLat,T)-F<.006)return void(this._element.style.opacity=this._opacity);const D=-this._offset.y/x.transform.pixelsPerMeter,O=Math.sin(x.getPitch()*Math.PI/180)*D,K=x.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),G=x.transform.lngLatToCameraDepth(this._lngLat,T+O)-K>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=s.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,a){return(this._opacity===void 0||t===void 0&&a===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Bn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Fn=0,ks=!1;const gs={maxWidth:100,unit:"metric"};function On(m,t,a){const h=a&&a.maxWidth||100,p=m._container.clientHeight/2,y=m._container.clientWidth/2,x=m.unproject([y-h/2,p]),F=m.unproject([y+h/2,p]),T=Math.round(m.project(F).x-m.project(x).x),D=Math.min(h,T,m._container.clientWidth),O=x.distanceTo(F);if(a&&a.unit==="imperial"){const K=3.2808*O;K>5280?xo(t,D,K/5280,m._getUIString("ScaleControl.Miles")):xo(t,D,K,m._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?xo(t,D,O/1852,m._getUIString("ScaleControl.NauticalMiles")):O>=1e3?xo(t,D,O/1e3,m._getUIString("ScaleControl.Kilometers")):xo(t,D,O,m._getUIString("ScaleControl.Meters"))}function xo(m,t,a,h){const p=function(y){const x=Math.pow(10,`${Math.floor(y)}`.length-1);let F=y/x;return F=F>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:function(T){const D=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*D)/D}(F),x*F}(a);m.style.width=t*(p/a)+"px",m.innerHTML=`${p}&nbsp;${h}`}const pc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},gc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Bo(m){if(m){if(typeof m=="number"){const t=Math.round(Math.abs(m)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,m),"top-left":new s.P(t,t),"top-right":new s.P(-t,t),bottom:new s.P(0,-m),"bottom-left":new s.P(t,-t),"bottom-right":new s.P(-t,-t),left:new s.P(m,0),right:new s.P(-m,0)}}if(m instanceof s.P||Array.isArray(m)){const t=s.P.convert(m);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:s.P.convert(m.center||[0,0]),top:s.P.convert(m.top||[0,0]),"top-left":s.P.convert(m["top-left"]||[0,0]),"top-right":s.P.convert(m["top-right"]||[0,0]),bottom:s.P.convert(m.bottom||[0,0]),"bottom-left":s.P.convert(m["bottom-left"]||[0,0]),"bottom-right":s.P.convert(m["bottom-right"]||[0,0]),left:s.P.convert(m.left||[0,0]),right:s.P.convert(m.right||[0,0])}}return Bo(new s.P(0,0))}const bA=v;f.AJAXError=s.cq,f.Event=s.l,f.Evented=s.E,f.LngLat=s.Q,f.MercatorCoordinate=s.$,f.Point=s.P,f.addProtocol=s.cr,f.config=s.a,f.removeProtocol=s.cs,f.AttributionControl=Mr,f.BoxZoomHandler=hc,f.CanvasSource=or,f.CooperativeGesturesHandler=Gt,f.DoubleClickZoomHandler=st,f.DragPanHandler=et,f.DragRotateHandler=it,f.EdgeInsets=zo,f.FullscreenControl=class extends s.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var t;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=a==null?void 0:a.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){E.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const m=this._fullscreenButton=E.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);E.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=jt,f.GeolocateControl=class extends s.E{constructor(m){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const a=new s.Q(t.coords.longitude,t.coords.latitude),h=t.coords.accuracy,p=this._map.getBearing(),y=s.e({bearing:p},this.options.fitBoundsOptions),x=Xt.fromLngLat(a,h);this._map.fitBounds(x,y,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const a=new s.Q(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&ks)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=E.create("button","maplibregl-ctrl-geolocate",this._container),E.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new $n({element:this._dotElement}),this._circleElement=E.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $n({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Bn,m)}onAdd(m){return this._map=m,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(t=!1){if(gn!==void 0&&!t)return gn;if(window.navigator.permissions===void 0)return gn=!!window.navigator.geolocation,gn;try{gn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{gn=!!window.navigator.geolocation}return gn})}().then(t=>this._finishSetupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),E.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fn=0,ks=!1}_isOutOfMapMaxBounds(m){const t=this._map.getMaxBounds(),a=m.coords;return t&&(a.longitude<t.getWest()||a.longitude>t.getEast()||a.latitude<t.getSouth()||a.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const m=this._map.getBounds(),t=m.getSouthEast(),a=m.getNorthEast(),h=t.distanceTo(a),p=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fn--,ks=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Fn++,Fn>1?(m={maximumAge:6e5,timeout:0},ks=!0):(m=this.options.positionOptions,ks=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var m;const t=(m=this._map.getProjection())===null||m===void 0?void 0:m.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var m;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((m=this._map.getProjection())===null||m===void 0?void 0:m.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(m){return this._map=m,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=E.create("button","maplibregl-ctrl-globe",this._container),E.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=jc,f.ImageSource=er,f.KeyboardHandler=xe,f.LngLatBounds=Xt,f.LogoControl=fn,f.Map=class extends hr{constructor(m){var t,a;s.cn.mark(s.co.create);const h=Object.assign(Object.assign(Object.assign({},Ki),m),{canvasContextAttributes:Object.assign(Object.assign({},Ki.canvasContextAttributes),m.canvasContextAttributes)});if(h.minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new wa,y=new uo;if(h.minZoom!==void 0&&p.setMinZoom(h.minZoom),h.maxZoom!==void 0&&p.setMaxZoom(h.maxZoom),h.minPitch!==void 0&&p.setMinPitch(h.minPitch),h.maxPitch!==void 0&&p.setMaxPitch(h.maxPitch),h.renderWorldCopies!==void 0&&p.setRenderWorldCopies(h.renderWorldCopies),super(p,y,{bearingSnap:h.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new un,this._controls=[],this._mapId=s.a4(),this._contextLost=F=>{F.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:F}))},this._contextRestored=F=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:F}))},this._onMapScroll=F=>{if(F.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._maxTileCacheZoomLevels=h.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},h.canvasContextAttributes),this._trackResize=h.trackResize===!0,this._bearingSnap=h.bearingSnap,this._centerClampedToGround=h.centerClampedToGround,this._refreshExpiredTiles=h.refreshExpiredTiles===!0,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions===!0,this._collectResourceTiming=h.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},cr),h.locale),this._clickTolerance=h.clickTolerance,this._overridePixelRatio=h.pixelRatio,this._maxCanvasSize=h.maxCanvasSize,this.transformCameraUpdate=h.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=h.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ze.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ne(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let F=!1;const T=Ja(D=>{this._trackResize&&!this._removed&&(this.resize(D),this.redraw())},50);this._resizeObserver=new ResizeObserver(D=>{F?T(D):F=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Dr(this,h),this._hash=h.hash&&new jc(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,elevation:h.elevation,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,roll:h.roll}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,s.e({},h.fitBoundsOptions,{duration:0}))));const x=typeof h.style=="string"||((a=(t=h.style)===null||t===void 0?void 0:t.projection)===null||a===void 0?void 0:a.type)!=="globe";this.resize(null,x),this._localIdeographFontFamily=h.localIdeographFontFamily,this._validateStyle=h.validateStyle,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new Mr(typeof h.attributionControl=="boolean"?void 0:h.attributionControl)),h.maplibreLogo&&this.addControl(new fn,h.logoPosition),this.on("style.load",()=>{if(x||this._resizeTransform(),this.transform.unmodified){const F=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(F)}}),this.on("data",F=>{this._update(F.dataType==="style"),this.fire(new s.l(`${F.dataType}data`,F))}),this.on("dataloading",F=>{this.fire(new s.l(`${F.dataType}dataloading`,F))}),this.on("dataabort",F=>{this.fire(new s.l("sourcedataabort",F))})}_getMapId(){return this._mapId}addControl(m,t){if(t===void 0&&(t=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=m.onAdd(this);this._controls.push(m);const h=this._controlPositions[t];return t.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(m);return t>-1&&this._controls.splice(t,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,t,a,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,t,a,h)}resize(m,t=!0){const[a,h]=this._containerDimensions(),p=this._getClampedPixelRatio(a,h);if(this._resizeCanvas(a,h,p),this.painter.resize(a,h,p),this.painter.overLimit()){const x=this.painter.context.gl;this._maxCanvasSize=[x.drawingBufferWidth,x.drawingBufferHeight];const F=this._getClampedPixelRatio(a,h);this._resizeCanvas(a,h,F),this.painter.resize(a,h,F)}this._resizeTransform(t);const y=!this._moving;return y&&(this.stop(),this.fire(new s.l("movestart",m)).fire(new s.l("move",m))),this.fire(new s.l("resize",m)),y&&this.fire(new s.l("moveend",m)),this}_resizeTransform(m=!0){var t;const[a,h]=this._containerDimensions();this.transform.resize(a,h,m),(t=this._requestedCameraState)===null||t===void 0||t.resize(a,h,m)}_getClampedPixelRatio(m,t){const{0:a,1:h}=this._maxCanvasSize,p=this.getPixelRatio(),y=m*p,x=t*p;return Math.min(y>a?a/y:1,x>h?h/x:1)*p}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(Xt.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.setMinZoom(m),this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.setMaxZoom(m),this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.setMinPitch(m),this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(m>=this.transform.minPitch)return this.transform.setMaxPitch(m),this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.setRenderWorldCopies(m),this._update()}project(m){return this.transform.locationToScreenPoint(s.Q.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.screenPointToLocation(s.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,t,a){if(m==="mouseenter"||m==="mouseover"){let h=!1;return{layers:t,listener:a,delegates:{mousemove:y=>{const x=t.filter(T=>this.getLayer(T)),F=x.length!==0?this.queryRenderedFeatures(y.point,{layers:x}):[];F.length?h||(h=!0,a.call(this,new Ui(m,this,y.originalEvent,{features:F}))):h=!1},mouseout:()=>{h=!1}}}}if(m==="mouseleave"||m==="mouseout"){let h=!1;return{layers:t,listener:a,delegates:{mousemove:x=>{const F=t.filter(T=>this.getLayer(T));(F.length!==0?this.queryRenderedFeatures(x.point,{layers:F}):[]).length?h=!0:h&&(h=!1,a.call(this,new Ui(m,this,x.originalEvent)))},mouseout:x=>{h&&(h=!1,a.call(this,new Ui(m,this,x.originalEvent)))}}}}{const h=p=>{const y=t.filter(F=>this.getLayer(F)),x=y.length!==0?this.queryRenderedFeatures(p.point,{layers:y}):[];x.length&&(p.features=x,a.call(this,p),delete p.features)};return{layers:t,listener:a,delegates:{[m]:h}}}}_saveDelegatedListener(m,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(t)}_removeDelegatedListener(m,t,a){if(!this._delegatedListeners||!this._delegatedListeners[m])return;const h=this._delegatedListeners[m];for(let p=0;p<h.length;p++){const y=h[p];if(y.listener===a&&y.layers.length===t.length&&y.layers.every(x=>t.includes(x))){for(const x in y.delegates)this.off(x,y.delegates[x]);return void h.splice(p,1)}}}on(m,t,a){if(a===void 0)return super.on(m,t);const h=typeof t=="string"?[t]:t,p=this._createDelegatedListener(m,h,a);this._saveDelegatedListener(m,p);for(const y in p.delegates)this.on(y,p.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(m,h,a)}}}once(m,t,a){if(a===void 0)return super.once(m,t);const h=typeof t=="string"?[t]:t,p=this._createDelegatedListener(m,h,a);for(const y in p.delegates){const x=p.delegates[y];p.delegates[y]=(...F)=>{this._removeDelegatedListener(m,h,a),x(...F)}}this._saveDelegatedListener(m,p);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(m,t,a){return a===void 0?super.off(m,t):(this._removeDelegatedListener(m,typeof t=="string"?[t]:t,a),this)}queryRenderedFeatures(m,t){if(!this.style)return[];let a;const h=m instanceof s.P||Array.isArray(m),p=h?m:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(h?{}:m)||{},p instanceof s.P||typeof p[0]=="number")a=[s.P.convert(p)];else{const y=s.P.convert(p[0]),x=s.P.convert(p[1]);a=[y,new s.P(x.x,y.y),x,new s.P(y.x,x.y),y]}return this.style.queryRenderedFeatures(a,t,this.transform)}querySourceFeatures(m,t){return this.style.querySourceFeatures(m,t)}setStyle(m,t){return(t=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(m,t))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const t=this._locale[m];if(t==null)throw new Error(`Missing UI string '${m}'`);return t}_updateStyle(m,t){var a,h;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,t));const p=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new Xs(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,t,p):this.style.loadJSON(m,t,p),this):((h=(a=this.style)===null||a===void 0?void 0:a.projection)===null||h===void 0||h.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Xs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,t){if(typeof m=="string"){const a=this._requestManager.transformRequest(m,"Style");s.j(a,new AbortController).then(h=>{this._updateDiff(h.data,t)}).catch(h=>{h&&this.fire(new s.k(h))})}else typeof m=="object"&&this._updateDiff(m,t)}_updateDiff(m,t){try{this.style.setState(m,t)&&this._update(!0)}catch(a){s.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(m,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(m,t){return this._lazyInitEmptyStyle(),this.style.addSource(m,t),this._update(!0)}isSourceLoaded(m){const t=this.style&&this.style.sourceCaches[m];if(t!==void 0)return t.loaded();this.fire(new s.k(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){const t=this.style.sourceCaches[m.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&t.reload();for(const a in this.style._layers){const h=this.style._layers[a];h.type==="hillshade"&&h.source===m.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Yr(this.painter,t,m),this.painter.renderToTexture=new ni(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=a=>{var h;a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==m.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((h=a.source)===null||h===void 0?void 0:h.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:m})),this}getTerrain(){var m,t;return(t=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const t in m){const a=m[t]._tiles;for(const h in a){const p=a[h];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}setSourceTileLodParams(m,t,a){if(a){const h=this.getSource(a);if(!h)throw new Error(`There is no source with ID "${a}", cannot set LOD parameters`);h.calculateTileZoom=He(Math.max(1,m),Math.max(1,t))}else for(const h in this.style.sourceCaches)this.style.sourceCaches[h].getSource().calculateTileZoom=He(Math.max(1,m),Math.max(1,t));return this._update(!0),this}refreshTiles(m,t){const a=this.style.sourceCaches[m];if(!a)throw new Error(`There is no source cache with ID "${m}", cannot refresh tile`);t===void 0?a.reload():a.refreshTiles(t.map(h=>new s.a1(h.z,h.x,h.y)))}addImage(m,t,a={}){const{pixelRatio:h=1,sdf:p=!1,stretchX:y,stretchY:x,content:F,textFitWidth:T,textFitHeight:D}=a;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||s.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:K,data:G}=t,Y=t;return this.style.addImage(m,{data:new s.R({width:O,height:K},new Uint8Array(G)),pixelRatio:h,stretchX:y,stretchY:x,content:F,textFitWidth:T,textFitHeight:D,sdf:p,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,m),this}}{const{width:O,height:K,data:G}=Q.getImageData(t);this.style.addImage(m,{data:new s.R({width:O,height:K},G),pixelRatio:h,stretchX:y,stretchY:x,content:F,textFitWidth:T,textFitHeight:D,sdf:p,version:0})}}updateImage(m,t){const a=this.style.getImage(m);if(!a)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=t instanceof HTMLImageElement||s.b(t)?Q.getImageData(t):t,{width:p,height:y,data:x}=h;if(p===void 0||y===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==a.data.width||y!==a.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const F=!(t instanceof HTMLImageElement||s.b(t));return a.data.replace(x,F),this.style.updateImage(m,a),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return ze.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,t){return this._lazyInitEmptyStyle(),this.style.addLayer(m,t),this._update(!0)}moveLayer(m,t){return this.style.moveLayer(m,t),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,t,a){return this.style.setLayerZoomRange(m,t,a),this._update(!0)}setFilter(m,t,a={}){return this.style.setFilter(m,t,a),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,t,a,h={}){return this.style.setPaintProperty(m,t,a,h),this._update(!0)}getPaintProperty(m,t){return this.style.getPaintProperty(m,t)}setLayoutProperty(m,t,a,h={}){return this.style.setLayoutProperty(m,t,a,h),this._update(!0)}getLayoutProperty(m,t){return this.style.getLayoutProperty(m,t)}setGlyphs(m,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,t,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,t,a,h=>{h||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,t,a=>{a||this._update(!0)}),this}setLight(m,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(m,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(m,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,t){return this.style.setFeatureState(m,t),this._update()}removeFeatureState(m,t){return this.style.removeFeatureState(m,t),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,t=0;return this._container&&(m=this._container.clientWidth||400,t=this._container.clientHeight||300),[m,t]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map");const t=this._canvasContainer=E.create("div","maplibregl-canvas-container",m);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=E.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),h=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],h);const p=this._controlContainer=E.create("div","maplibregl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=E.create("div",`maplibregl-ctrl-${x} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,t,a){this._canvas.width=Math.floor(a*m),this._canvas.height=Math.floor(a*t),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const m=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{t={requestedAttributes:m},h&&(t.statusMessage=h.statusMessage,t.type=h.type)},{once:!0});let a=null;if(a=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,m):this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m),!a){const h="Failed to initialize WebGL";throw t?(t.message=h,new Error(JSON.stringify(t))):new Error(h)}this.painter=new Xa(a,this.transform),z.testSupport(a)}migrateProjection(m,t){super.migrateProjection(m,t),this.painter.transform=m,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){var t,a,h,p,y;const x=this._idleTriggered?this._fadeDuration:0,F=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let T=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,G=Q.now();this.style.zoomHistory.update(K,G);const Y=new s.C(K,{now:G,fadeDuration:x,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ie=Y.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(T=!0,this._crossFadingFactor=ie),this.style.update(Y)}const D=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0!==F;(h=this.style.projection)===null||h===void 0||h.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||D)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,x,this._crossSourceCollisions,D),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cn.mark(s.co.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,s.cn.mark(s.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ze.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),E.remove(this._canvasContainer),E.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cn.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,Q.frame(this._frameRequest,m=>{s.cn.frame(m),this._frameRequest=null;try{this._render(m)}catch(t){if(!s.cp(t)&&!function(a){return a.message===ZA}(t))throw t}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return ir}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(m){return this._lazyInitEmptyStyle(),this.style.setProjection(m),this._update(!0)}},f.MapMouseEvent=Ui,f.MapTouchEvent=wo,f.MapWheelEvent=rl,f.Marker=$n,f.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{const t=this._map.getZoom(),a=t===this._map.getMaxZoom(),h=t===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,a)=>{const h=this._map._getUIString(`NavigationControl.${a}`);t.title=h,t.setAttribute("aria-label",h)},this.options=s.e({},Ca,m),this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),E.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),E.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=E.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ci(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){E.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,t){const a=E.create("button",m,this._container);return a.type="button",a.addEventListener("click",t),a}},f.Popup=class extends s.E{constructor(m){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&E.remove(this._content),this._container&&(E.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=E.create("div","maplibregl-popup",this._map.getContainer()),this._tip=E.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const x of this.options.className.split(" "))this._container.classList.add(x);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=qi(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const a=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let h=this.options.anchor;const p=Bo(this.options.offset);if(!h){const x=this._container.offsetWidth,F=this._container.offsetHeight;let T;T=a.y+p.bottom.y<F?["top"]:a.y>this._map.transform.height-F?["bottom"]:[],a.x<x/2?T.push("left"):a.x>this._map.transform.width-x/2&&T.push("right"),h=T.length===0?"bottom":T.join("-")}let y=a.add(p[h]);this.options.subpixelPositioning||(y=y.round()),E.setTransform(this._container,`${ii[h]} translate(${y.x}px,${y.y}px)`),Us(this._container,h,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(pc),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=s.Q.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const t=document.createDocumentFragment(),a=document.createElement("body");let h;for(a.innerHTML=m;h=a.firstChild,h;)t.appendChild(h);return this.setDOMContent(t)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=E.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=E.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(gc);m&&m.focus()}},f.RasterDEMTileSource=fr,f.RasterTileSource=sr,f.ScaleControl=class{constructor(m){this._onMove=()=>{On(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,On(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},gs),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){E.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=rt,f.Style=Xs,f.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=E.create("button","maplibregl-ctrl-terrain",this._container),E.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){E.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=he,f.TwoFingersTouchRotateHandler=X,f.TwoFingersTouchZoomHandler=j,f.TwoFingersTouchZoomRotateHandler=Qt,f.VectorTileSource=Ue,f.VideoSource=ar,f.addSourceType=(m,t)=>s._(void 0,void 0,void 0,function*(){if(kr(m))throw new Error(`A source type called "${m}" already exists.`);((a,h)=>{wr[a]=h})(m,t)}),f.clearPrewarmedResources=function(){const m=Me;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(nr),Me=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=jo,f.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return pn().getRTLTextPluginStatus()},f.getVersion=function(){return bA},f.getWorkerCount=function(){return Ae.workerCount},f.getWorkerUrl=function(){return s.a.WORKER_URL},f.importScriptInWorkers=function(m){return xt().broadcast("IS",m)},f.prewarm=function(){nt().acquire(nr)},f.setMaxParallelImageRequests=function(m){s.a.MAX_PARALLEL_IMAGE_REQUESTS=m},f.setRTLTextPlugin=function(m,t){return pn().setRTLTextPlugin(m,t)},f.setWorkerCount=function(m){Ae.workerCount=m},f.setWorkerUrl=function(m){s.a.WORKER_URL=m}});var d=i;return d})})(w2);var sB=w2.exports;const Bf=v2(sB);var ns=Uint8Array,Uo=Uint16Array,R0=Int32Array,Mp=new ns([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Up=new ns([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Om=new ns([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),B2=function(n,e){for(var i=new Uo(31),o=0;o<31;++o)i[o]=e+=1<<n[o-1];for(var c=new R0(i[30]),o=1;o<30;++o)for(var d=i[o];d<i[o+1];++d)c[d]=d-i[o]<<5|o;return{b:i,r:c}},C2=B2(Mp,2),I2=C2.b,zm=C2.r;I2[28]=258,zm[258]=28;var F2=B2(Up,0),oB=F2.b,s_=F2.r,Hm=new Uo(32768);for(var _i=0;_i<32768;++_i){var wc=(_i&43690)>>1|(_i&21845)<<1;wc=(wc&52428)>>2|(wc&13107)<<2,wc=(wc&61680)>>4|(wc&3855)<<4,Hm[_i]=((wc&65280)>>8|(wc&255)<<8)>>1}var ml=function(n,e,i){for(var o=n.length,c=0,d=new Uo(e);c<o;++c)n[c]&&++d[n[c]-1];var f=new Uo(e);for(c=1;c<e;++c)f[c]=f[c-1]+d[c-1]<<1;var s;if(i){s=new Uo(1<<e);var v=15-e;for(c=0;c<o;++c)if(n[c])for(var C=c<<4|n[c],P=e-n[c],M=f[n[c]-1]++<<P,Q=M|(1<<P)-1;M<=Q;++M)s[Hm[M]>>v]=C}else for(s=new Uo(o),c=0;c<o;++c)n[c]&&(s[c]=Hm[f[n[c]-1]++]>>15-n[c]);return s},Uc=new ns(288);for(var _i=0;_i<144;++_i)Uc[_i]=8;for(var _i=144;_i<256;++_i)Uc[_i]=9;for(var _i=256;_i<280;++_i)Uc[_i]=7;for(var _i=280;_i<288;++_i)Uc[_i]=8;var Cf=new ns(32);for(var _i=0;_i<32;++_i)Cf[_i]=5;var AB=ml(Uc,9,0),lB=ml(Uc,9,1),cB=ml(Cf,5,0),uB=ml(Cf,5,1),Vg=function(n){for(var e=n[0],i=1;i<n.length;++i)n[i]>e&&(e=n[i]);return e},FA=function(n,e,i){var o=e/8|0;return(n[o]|n[o+1]<<8)>>(e&7)&i},Gg=function(n,e){var i=e/8|0;return(n[i]|n[i+1]<<8|n[i+2]<<16)>>(e&7)},N0=function(n){return(n+7)/8|0},E2=function(n,e,i){return(i==null||i>n.length)&&(i=n.length),new ns(n.subarray(e,i))},hB=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Mo=function(n,e,i){var o=new Error(e||hB[n]);if(o.code=n,Error.captureStackTrace&&Error.captureStackTrace(o,Mo),!i)throw o;return o},O0=function(n,e,i,o){var c=n.length,d=0;if(!c||e.f&&!e.l)return i||new ns(0);var f=!i,s=f||e.i!=2,v=e.i;f&&(i=new ns(c*3));var C=function(ot){var Ut=i.length;if(ot>Ut){var Ot=new ns(Math.max(Ut*2,ot));Ot.set(i),i=Ot}},P=e.f||0,M=e.p||0,Q=e.b||0,E=e.l,z=e.d,V=e.m,ee=e.n,Z=c*8;do{if(!E){P=FA(n,M,1);var ne=FA(n,M+1,3);if(M+=3,ne)if(ne==1)E=lB,z=uB,V=9,ee=5;else if(ne==2){var Oe=FA(n,M,31)+257,ve=FA(n,M+10,15)+4,me=Oe+FA(n,M+5,31)+1;M+=14;for(var Qe=new ns(me),tt=new ns(19),se=0;se<ve;++se)tt[Om[se]]=FA(n,M+se*3,7);M+=ve*3;for(var ue=Vg(tt),Fe=(1<<ue)-1,Se=ml(tt,ue,1),se=0;se<me;){var yt=Se[FA(n,M,Fe)];M+=yt&15;var Be=yt>>4;if(Be<16)Qe[se++]=Be;else{var lt=0,mt=0;for(Be==16?(mt=3+FA(n,M,3),M+=2,lt=Qe[se-1]):Be==17?(mt=3+FA(n,M,7),M+=3):Be==18&&(mt=11+FA(n,M,127),M+=7);mt--;)Qe[se++]=lt}}var Ye=Qe.subarray(0,Oe),gt=Qe.subarray(Oe);V=Vg(Ye),ee=Vg(gt),E=ml(Ye,V,1),z=ml(gt,ee,1)}else Mo(1);else{var Be=N0(M)+4,ze=n[Be-4]|n[Be-3]<<8,Ne=Be+ze;if(Ne>c){v&&Mo(0);break}s&&C(Q+ze),i.set(n.subarray(Be,Ne),Q),e.b=Q+=ze,e.p=M=Ne*8,e.f=P;continue}if(M>Z){v&&Mo(0);break}}s&&C(Q+131072);for(var Ct=(1<<V)-1,nr=(1<<ee)-1,Ae=M;;Ae=M){var lt=E[Gg(n,M)&Ct],Ie=lt>>4;if(M+=lt&15,M>Z){v&&Mo(0);break}if(lt||Mo(2),Ie<256)i[Q++]=Ie;else if(Ie==256){Ae=M,E=null;break}else{var Me=Ie-254;if(Ie>264){var se=Ie-257,je=Mp[se];Me=FA(n,M,(1<<je)-1)+I2[se],M+=je}var nt=z[Gg(n,M)&nr],ut=nt>>4;nt||Mo(3),M+=nt&15;var gt=oB[ut];if(ut>3){var je=Up[ut];gt+=Gg(n,M)&(1<<je)-1,M+=je}if(M>Z){v&&Mo(0);break}s&&C(Q+131072);var xt=Q+Me;if(Q<gt){var Bt=d-gt,tr=Math.min(gt,xt);for(Bt+Q<0&&Mo(3);Q<tr;++Q)i[Q]=o[Bt+Q]}for(;Q<xt;++Q)i[Q]=i[Q-gt]}}e.l=E,e.p=Ae,e.b=Q,e.f=P,E&&(P=1,e.m=V,e.d=z,e.n=ee)}while(!P);return Q!=i.length&&f?E2(i,0,Q):i.subarray(0,Q)},Vl=function(n,e,i){i<<=e&7;var o=e/8|0;n[o]|=i,n[o+1]|=i>>8},ef=function(n,e,i){i<<=e&7;var o=e/8|0;n[o]|=i,n[o+1]|=i>>8,n[o+2]|=i>>16},Kg=function(n,e){for(var i=[],o=0;o<n.length;++o)n[o]&&i.push({s:o,f:n[o]});var c=i.length,d=i.slice();if(!c)return{t:T2,l:0};if(c==1){var f=new ns(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort(function(Ne,Oe){return Ne.f-Oe.f}),i.push({s:-1,f:25001});var s=i[0],v=i[1],C=0,P=1,M=2;for(i[0]={s:-1,f:s.f+v.f,l:s,r:v};P!=c-1;)s=i[i[C].f<i[M].f?C++:M++],v=i[C!=P&&i[C].f<i[M].f?C++:M++],i[P++]={s:-1,f:s.f+v.f,l:s,r:v};for(var Q=d[0].s,o=1;o<c;++o)d[o].s>Q&&(Q=d[o].s);var E=new Uo(Q+1),z=jm(i[P-1],E,0);if(z>e){var o=0,V=0,ee=z-e,Z=1<<ee;for(d.sort(function(Oe,ve){return E[ve.s]-E[Oe.s]||Oe.f-ve.f});o<c;++o){var ne=d[o].s;if(E[ne]>e)V+=Z-(1<<z-E[ne]),E[ne]=e;else break}for(V>>=ee;V>0;){var Be=d[o].s;E[Be]<e?V-=1<<e-E[Be]++-1:++o}for(;o>=0&&V;--o){var ze=d[o].s;E[ze]==e&&(--E[ze],++V)}z=e}return{t:new ns(E),l:z}},jm=function(n,e,i){return n.s==-1?Math.max(jm(n.l,e,i+1),jm(n.r,e,i+1)):e[n.s]=i},o_=function(n){for(var e=n.length;e&&!n[--e];);for(var i=new Uo(++e),o=0,c=n[0],d=1,f=function(v){i[o++]=v},s=1;s<=e;++s)if(n[s]==c&&s!=e)++d;else{if(!c&&d>2){for(;d>138;d-=138)f(32754);d>2&&(f(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(f(c),--d;d>6;d-=6)f(8304);d>2&&(f(d-3<<5|8208),d=0)}for(;d--;)f(c);d=1,c=n[s]}return{c:i.subarray(0,o),n:e}},tf=function(n,e){for(var i=0,o=0;o<e.length;++o)i+=n[o]*e[o];return i},S2=function(n,e,i){var o=i.length,c=N0(e+2);n[c]=o&255,n[c+1]=o>>8,n[c+2]=n[c]^255,n[c+3]=n[c+1]^255;for(var d=0;d<o;++d)n[c+d+4]=i[d];return(c+4+o)*8},A_=function(n,e,i,o,c,d,f,s,v,C,P){Vl(e,P++,i),++c[256];for(var M=Kg(c,15),Q=M.t,E=M.l,z=Kg(d,15),V=z.t,ee=z.l,Z=o_(Q),ne=Z.c,Be=Z.n,ze=o_(V),Ne=ze.c,Oe=ze.n,ve=new Uo(19),me=0;me<ne.length;++me)++ve[ne[me]&31];for(var me=0;me<Ne.length;++me)++ve[Ne[me]&31];for(var Qe=Kg(ve,7),tt=Qe.t,se=Qe.l,ue=19;ue>4&&!tt[Om[ue-1]];--ue);var Fe=C+5<<3,Se=tf(c,Uc)+tf(d,Cf)+f,yt=tf(c,Q)+tf(d,V)+f+14+3*ue+tf(ve,tt)+2*ve[16]+3*ve[17]+7*ve[18];if(v>=0&&Fe<=Se&&Fe<=yt)return S2(e,P,n.subarray(v,v+C));var lt,mt,Ye,gt;if(Vl(e,P,1+(yt<Se)),P+=2,yt<Se){lt=ml(Q,E,0),mt=Q,Ye=ml(V,ee,0),gt=V;var Ct=ml(tt,se,0);Vl(e,P,Be-257),Vl(e,P+5,Oe-1),Vl(e,P+10,ue-4),P+=14;for(var me=0;me<ue;++me)Vl(e,P+3*me,tt[Om[me]]);P+=3*ue;for(var nr=[ne,Ne],Ae=0;Ae<2;++Ae)for(var Ie=nr[Ae],me=0;me<Ie.length;++me){var Me=Ie[me]&31;Vl(e,P,Ct[Me]),P+=tt[Me],Me>15&&(Vl(e,P,Ie[me]>>5&127),P+=Ie[me]>>12)}}else lt=AB,mt=Uc,Ye=cB,gt=Cf;for(var me=0;me<s;++me){var je=o[me];if(je>255){var Me=je>>18&31;ef(e,P,lt[Me+257]),P+=mt[Me+257],Me>7&&(Vl(e,P,je>>23&31),P+=Mp[Me]);var nt=je&31;ef(e,P,Ye[nt]),P+=gt[nt],nt>3&&(ef(e,P,je>>5&8191),P+=Up[nt])}else ef(e,P,lt[je]),P+=mt[je]}return ef(e,P,lt[256]),P+mt[256]},fB=new R0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),T2=new ns(0),dB=function(n,e,i,o,c,d){var f=d.z||n.length,s=new ns(o+f+5*(1+Math.ceil(f/7e3))+c),v=s.subarray(o,s.length-c),C=d.l,P=(d.r||0)&7;if(e){P&&(v[0]=d.r>>3);for(var M=fB[e-1],Q=M>>13,E=M&8191,z=(1<<i)-1,V=d.p||new Uo(32768),ee=d.h||new Uo(z+1),Z=Math.ceil(i/3),ne=2*Z,Be=function(Xt){return(n[Xt]^n[Xt+1]<<Z^n[Xt+2]<<ne)&z},ze=new R0(25e3),Ne=new Uo(288),Oe=new Uo(32),ve=0,me=0,Qe=d.i||0,tt=0,se=d.w||0,ue=0;Qe+2<f;++Qe){var Fe=Be(Qe),Se=Qe&32767,yt=ee[Fe];if(V[Se]=yt,ee[Fe]=Se,se<=Qe){var lt=f-Qe;if((ve>7e3||tt>24576)&&(lt>423||!C)){P=A_(n,v,0,ze,Ne,Oe,me,tt,ue,Qe-ue,P),tt=ve=me=0,ue=Qe;for(var mt=0;mt<286;++mt)Ne[mt]=0;for(var mt=0;mt<30;++mt)Oe[mt]=0}var Ye=2,gt=0,Ct=E,nr=Se-yt&32767;if(lt>2&&Fe==Be(Qe-nr))for(var Ae=Math.min(Q,lt)-1,Ie=Math.min(32767,Qe),Me=Math.min(258,lt);nr<=Ie&&--Ct&&Se!=yt;){if(n[Qe+Ye]==n[Qe+Ye-nr]){for(var je=0;je<Me&&n[Qe+je]==n[Qe+je-nr];++je);if(je>Ye){if(Ye=je,gt=nr,je>Ae)break;for(var nt=Math.min(nr,je-2),ut=0,mt=0;mt<nt;++mt){var xt=Qe-nr+mt&32767,Bt=V[xt],tr=xt-Bt&32767;tr>ut&&(ut=tr,yt=xt)}}}Se=yt,yt=V[Se],nr+=Se-yt&32767}if(gt){ze[tt++]=268435456|zm[Ye]<<18|s_[gt];var ot=zm[Ye]&31,Ut=s_[gt]&31;me+=Mp[ot]+Up[Ut],++Ne[257+ot],++Oe[Ut],se=Qe+Ye,++ve}else ze[tt++]=n[Qe],++Ne[n[Qe]]}}for(Qe=Math.max(Qe,se);Qe<f;++Qe)ze[tt++]=n[Qe],++Ne[n[Qe]];P=A_(n,v,C,ze,Ne,Oe,me,tt,ue,Qe-ue,P),C||(d.r=P&7|v[P/8|0]<<3,P-=7,d.h=ee,d.p=V,d.i=Qe,d.w=se)}else{for(var Qe=d.w||0;Qe<f+C;Qe+=65535){var Ot=Qe+65535;Ot>=f&&(v[P/8|0]=C,Ot=f),P=S2(v,P+1,n.subarray(Qe,Ot))}d.i=f}return E2(s,0,o+N0(P)+c)},L2=function(){var n=1,e=0;return{p:function(i){for(var o=n,c=e,d=i.length|0,f=0;f!=d;){for(var s=Math.min(f+2655,d);f<s;++f)c+=o+=i[f];o=(o&65535)+15*(o>>16),c=(c&65535)+15*(c>>16)}n=o,e=c},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},pB=function(n,e,i,o,c){if(!c&&(c={l:1},e.dictionary)){var d=e.dictionary.subarray(-32768),f=new ns(d.length+n.length);f.set(d),f.set(n,d.length),n=f,c.w=d.length}return dB(n,e.level==null?6:e.level,e.mem==null?c.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,i,o,c)},P2=function(n,e,i){for(;i;++e)n[e]=i,i>>>=8},gB=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Mo(6,"invalid gzip data");var e=n[3],i=10;e&4&&(i+=(n[10]|n[11]<<8)+2);for(var o=(e>>3&1)+(e>>4&1);o>0;o-=!n[i++]);return i+(e&2)},mB=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},yB=function(n,e){var i=e.level,o=i==0?0:i<6?1:i==9?3:2;if(n[0]=120,n[1]=o<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var c=L2();c.p(e.dictionary),P2(n,2,c.d())}},_B=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Mo(6,"invalid zlib data"),(n[1]>>5&1)==1&&Mo(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function bB(n,e){return O0(n,{i:2},e,e)}function vB(n,e){var i=gB(n);return i+8>n.length&&Mo(6,"invalid gzip data"),O0(n.subarray(i,-8),{i:2},new ns(mB(n)),e)}function Vm(n,e){e||(e={});var i=L2();i.p(n);var o=pB(n,e,e.dictionary?6:2,4);return yB(o,e),P2(o,o.length-4,i.d()),o}function M2(n,e){return O0(n.subarray(_B(n),-4),{i:2},e,e)}function wB(n,e){return n[0]==31&&n[1]==139&&n[2]==8?vB(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?bB(n,e):M2(n,e)}var xB=typeof TextDecoder<"u"&&new TextDecoder,BB=0;try{xB.decode(T2,{stream:!0}),BB=1}catch{}var CB=Object.defineProperty,gf=Math.pow,ei=(n,e)=>CB(n,"name",{value:e,configurable:!0}),Ka=(n,e,i)=>new Promise((o,c)=>{var d=v=>{try{s(i.next(v))}catch(C){c(C)}},f=v=>{try{s(i.throw(v))}catch(C){c(C)}},s=v=>v.done?o(v.value):Promise.resolve(v.value).then(d,f);s((i=i.apply(n,e)).next())});ei((n,e)=>{let i=!1,o="",c=L.GridLayer.extend({createTile:ei((d,f)=>{let s=document.createElement("img"),v=new AbortController,C=v.signal;return s.cancel=()=>{v.abort()},i||(n.getHeader().then(P=>{P.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):P.tileType===2?o="image/png":P.tileType===3?o="image/jpeg":P.tileType===4?o="image/webp":P.tileType===5&&(o="image/avif")}),i=!0),n.getZxy(d.z,d.x,d.y,C).then(P=>{if(P){let M=new Blob([P.data],{type:o}),Q=window.URL.createObjectURL(M);s.src=Q,s.cancel=void 0,f(void 0,s)}}).catch(P=>{if(P.name!=="AbortError")throw P}),s},"createTile"),_removeTile:ei(function(d){let f=this._tiles[d];f&&(f.el.cancel&&f.el.cancel(),f.el.width=0,f.el.height=0,f.el.deleted=!0,L.DomUtil.remove(f.el),delete this._tiles[d],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(d)}))},"_removeTile")});return new c(e)},"leafletRasterLayer");var IB=ei(n=>(e,i)=>{if(i instanceof AbortController)return n(e,i);let o=new AbortController;return n(e,o).then(c=>i(void 0,c.data,c.cacheControl||"",c.expires||""),c=>i(c)).catch(c=>i(c)),{cancel:ei(()=>o.abort(),"cancel")}},"v3compat"),U2=class{constructor(e){this.tilev4=ei((i,o)=>Ka(this,null,function*(){if(i.type==="json"){let E=i.url.substr(10),z=this.tiles.get(E);if(z||(z=new ip(E),this.tiles.set(E,z)),this.metadata)return{data:yield z.getTileJson(i.url)};let V=yield z.getHeader();return(V.minLon>=V.maxLon||V.minLat>=V.maxLat)&&console.error(`Bounds of PMTiles archive ${V.minLon},${V.minLat},${V.maxLon},${V.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:V.minZoom,maxzoom:V.maxZoom,bounds:[V.minLon,V.minLat,V.maxLon,V.maxLat]}}}let c=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),d=i.url.match(c);if(!d)throw new Error("Invalid PMTiles protocol URL");let f=d[1],s=this.tiles.get(f);s||(s=new ip(f),this.tiles.set(f,s));let v=d[2],C=d[3],P=d[4],M=yield s.getHeader(),Q=yield s==null?void 0:s.getZxy(+v,+C,+P,o.signal);if(Q)return{data:new Uint8Array(Q.data),cacheControl:Q.cacheControl,expires:Q.expires};if(M.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=IB(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ei(U2,"Protocol");var FB=U2;function k2(n,e){return(e>>>0)*4294967296+(n>>>0)}ei(k2,"toNum");function Q2(n,e){let i=e.buf,o=i[e.pos++],c=(o&112)>>4;if(o<128||(o=i[e.pos++],c|=(o&127)<<3,o<128)||(o=i[e.pos++],c|=(o&127)<<10,o<128)||(o=i[e.pos++],c|=(o&127)<<17,o<128)||(o=i[e.pos++],c|=(o&127)<<24,o<128)||(o=i[e.pos++],c|=(o&1)<<31,o<128))return k2(n,c);throw new Error("Expected varint not more than 10 bytes")}ei(Q2,"readVarintRemainder");function nh(n){let e=n.buf,i=e[n.pos++],o=i&127;return i<128||(i=e[n.pos++],o|=(i&127)<<7,i<128)||(i=e[n.pos++],o|=(i&127)<<14,i<128)||(i=e[n.pos++],o|=(i&127)<<21,i<128)?o:(i=e[n.pos],o|=(i&15)<<28,Q2(o,n))}ei(nh,"readVarint");function z0(n,e,i,o){if(o===0){i===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let c=e[0];e[0]=e[1],e[1]=c}}ei(z0,"rotate");function D2(n,e){let i=gf(2,n),o=e,c=e,d=e,f=[0,0],s=1;for(;s<i;)o=1&d/2,c=1&(d^o),z0(s,f,o,c),f[0]+=s*o,f[1]+=s*c,d=d/4,s*=2;return[n,f[0],f[1]]}ei(D2,"idOnLevel");var EB=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function R2(n,e,i){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>gf(2,n)-1||i>gf(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let o=EB[n],c=gf(2,n),d=0,f=0,s=0,v=[e,i],C=c/2;for(;C>0;)d=(v[0]&C)>0?1:0,f=(v[1]&C)>0?1:0,s+=C*C*(3*d^f),z0(C,v,d,f),C=C/2;return o+s}ei(R2,"zxyToTileId");function SB(n){let e=0;for(let i=0;i<27;i++){let o=(1<<i)*(1<<i);if(e+o>n)return D2(i,n-e);e+=o}throw new Error("Tile zoom level exceeds max safe number limit (26)")}ei(SB,"tileIdToZxy");var TB=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(TB||{});function kp(n,e){return Ka(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return wB(new Uint8Array(n));let i=new Response(n).body;if(!i)throw new Error("Failed to read response stream");let o=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw new Error("Compression method not supported")})}ei(kp,"defaultDecompress");var LB=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(LB||{});function N2(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}ei(N2,"tileTypeExt");var PB=127;function O2(n,e){let i=0,o=n.length-1;for(;i<=o;){let c=o+i>>1,d=e-n[c].tileId;if(d>0)i=c+1;else if(d<0)o=c-1;else return n[c]}return o>=0&&(n[o].runLength===0||e-n[o].tileId<n[o].runLength)?n[o]:null}ei(O2,"findTile");var MB=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,i){return Ka(this,null,function*(){return{data:yield this.file.slice(e,e+i).arrayBuffer()}})}};ei(MB,"FileSource");var z2=class{constructor(e,i=new Headers){this.url=e,this.customHeaders=i,this.mustReload=!1;let o="";"navigator"in globalThis&&(o=globalThis.navigator.userAgent||"");let c=o.indexOf("Windows")>-1,d=/Chrome|Chromium|Edg|OPR|Brave/.test(o);this.chromeWindowsNoCache=!1,c&&d&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,i,o,c){return Ka(this,null,function*(){let d,f;o?f=o:(d=new AbortController,f=d.signal);let s=new Headers(this.customHeaders);s.set("range",`bytes=${e}-${e+i-1}`);let v;this.mustReload?v="reload":this.chromeWindowsNoCache&&(v="no-store");let C=yield fetch(this.url,{signal:f,cache:v,headers:s});if(e===0&&C.status===416){let Q=C.headers.get("Content-Range");if(!Q||!Q.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let E=+Q.substr(8);C=yield fetch(this.url,{signal:f,cache:"reload",headers:{range:`bytes=0-${E-1}`}})}let P=C.headers.get("Etag");if(P!=null&&P.startsWith("W/")&&(P=null),C.status===416||c&&P&&P!==c)throw this.mustReload=!0,new Gm(`Server returned non-matching ETag ${c} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(C.status>=300)throw new Error(`Bad response code: ${C.status}`);let M=C.headers.get("Content-Length");if(C.status===200&&(!M||+M>i))throw d&&d.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield C.arrayBuffer(),etag:P||void 0,cacheControl:C.headers.get("Cache-Control")||void 0,expires:C.headers.get("Expires")||void 0}})}};ei(z2,"FetchSource");var UB=z2;function Jo(n,e){let i=n.getUint32(e+4,!0),o=n.getUint32(e+0,!0);return i*gf(2,32)+o}ei(Jo,"getUint64");function H2(n,e){let i=new DataView(n),o=i.getUint8(7);if(o>3)throw new Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Jo(i,8),rootDirectoryLength:Jo(i,16),jsonMetadataOffset:Jo(i,24),jsonMetadataLength:Jo(i,32),leafDirectoryOffset:Jo(i,40),leafDirectoryLength:Jo(i,48),tileDataOffset:Jo(i,56),tileDataLength:Jo(i,64),numAddressedTiles:Jo(i,72),numTileEntries:Jo(i,80),numTileContents:Jo(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:e}}ei(H2,"bytesToHeader");function H0(n){let e={buf:new Uint8Array(n),pos:0},i=nh(e),o=[],c=0;for(let d=0;d<i;d++){let f=nh(e);o.push({tileId:c+f,offset:0,length:0,runLength:1}),c+=f}for(let d=0;d<i;d++)o[d].runLength=nh(e);for(let d=0;d<i;d++)o[d].length=nh(e);for(let d=0;d<i;d++){let f=nh(e);f===0&&d>0?o[d].offset=o[d-1].offset+o[d-1].length:o[d].offset=f-1}return o}ei(H0,"deserializeIndex");var j2=class extends Error{};ei(j2,"EtagMismatch");var Gm=j2;function j0(n,e){return Ka(this,null,function*(){let i=yield n.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let o=i.data.slice(0,PB),c=H2(o,i.etag),d=i.data.slice(c.rootDirectoryOffset,c.rootDirectoryOffset+c.rootDirectoryLength),f=`${n.getKey()}|${c.etag||""}|${c.rootDirectoryOffset}|${c.rootDirectoryLength}`,s=H0(yield e(d,c.internalCompression));return[c,[f,s.length,s]]})}ei(j0,"getHeaderAndRoot");function V0(n,e,i,o,c){return Ka(this,null,function*(){let d=yield n.getBytes(i,o,void 0,c.etag),f=yield e(d.data,c.internalCompression),s=H0(f);if(s.length===0)throw new Error("Empty directory is invalid");return s})}ei(V0,"getDirectory");var kB=class{constructor(e=100,i=!0,o=kp){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=o}getHeader(e){return Ka(this,null,function*(){let i=e.getKey(),o=this.cache.get(i);if(o)return o.lastUsed=this.counter++,o.data;let c=yield j0(e,this.decompress);return c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:c[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:c[0]}),this.prune(),c[0]})}getDirectory(e,i,o,c){return Ka(this,null,function*(){let d=`${e.getKey()}|${c.etag||""}|${i}|${o}`,f=this.cache.get(d);if(f)return f.lastUsed=this.counter++,f.data;let s=yield V0(e,this.decompress,i,o,c);return this.cache.set(d,{lastUsed:this.counter++,data:s}),this.prune(),s})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,i;this.cache.forEach((o,c)=>{o.lastUsed<e&&(e=o.lastUsed,i=c)}),i&&this.cache.delete(i)}}invalidate(e){return Ka(this,null,function*(){this.cache.delete(e.getKey())})}};ei(kB,"ResolvedValueCache");var V2=class{constructor(e=100,i=!0,o=kp){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=o}getHeader(e){return Ka(this,null,function*(){let i=e.getKey(),o=this.cache.get(i);if(o)return o.lastUsed=this.counter++,yield o.data;let c=new Promise((d,f)=>{j0(e,this.decompress).then(s=>{s[1]&&this.cache.set(s[1][0],{lastUsed:this.counter++,data:Promise.resolve(s[1][2])}),d(s[0]),this.prune()}).catch(s=>{f(s)})});return this.cache.set(i,{lastUsed:this.counter++,data:c}),c})}getDirectory(e,i,o,c){return Ka(this,null,function*(){let d=`${e.getKey()}|${c.etag||""}|${i}|${o}`,f=this.cache.get(d);if(f)return f.lastUsed=this.counter++,yield f.data;let s=new Promise((v,C)=>{V0(e,this.decompress,i,o,c).then(P=>{v(P),this.prune()}).catch(P=>{C(P)})});return this.cache.set(d,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,i;this.cache.forEach((o,c)=>{o.lastUsed<e&&(e=o.lastUsed,i=c)}),i&&this.cache.delete(i)}}invalidate(e){return Ka(this,null,function*(){let i=e.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(e.getKey());let o=new Promise((c,d)=>{this.getHeader(e).then(f=>{c(),this.invalidations.delete(i)}).catch(f=>{d(f)})});this.invalidations.set(i,o)})}};ei(V2,"SharedPromiseCache");var QB=V2,G2=class{constructor(e,i,o){typeof e=="string"?this.source=new UB(e):this.source=e,o?this.decompress=o:this.decompress=kp,i?this.cache=i:this.cache=new QB}getHeader(){return Ka(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,i,o,c){return Ka(this,null,function*(){let d=R2(e,i,o),f=yield this.cache.getHeader(this.source);if(e<f.minZoom||e>f.maxZoom)return;let s=f.rootDirectoryOffset,v=f.rootDirectoryLength;for(let C=0;C<=3;C++){let P=yield this.cache.getDirectory(this.source,s,v,f),M=O2(P,d);if(M){if(M.runLength>0){let Q=yield this.source.getBytes(f.tileDataOffset+M.offset,M.length,c,f.etag);return{data:yield this.decompress(Q.data,f.tileCompression),cacheControl:Q.cacheControl,expires:Q.expires}}s=f.leafDirectoryOffset+M.offset,v=M.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,i,o,c){return Ka(this,null,function*(){try{return yield this.getZxyAttempt(e,i,o,c)}catch(d){if(d instanceof Gm)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,i,o,c);throw d}})}getMetadataAttempt(){return Ka(this,null,function*(){let e=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),o=yield this.decompress(i.data,e.internalCompression),c=new TextDecoder("utf-8");return JSON.parse(c.decode(o))})}getMetadata(){return Ka(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Gm)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Ka(this,null,function*(){let i=yield this.getHeader(),o=yield this.getMetadata(),c=N2(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${c}`],vector_layers:o.vector_layers,attribution:o.attribution,description:o.description,name:o.name,version:o.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};ei(G2,"PMTiles");var ip=G2;function K2(n,e,i={}){const o={type:"Feature"};return(i.id===0||i.id)&&(o.id=i.id),i.bbox&&(o.bbox=i.bbox),o.properties=e||{},o.geometry=n,o}function VM(n,e,i={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l_(n[0])||!l_(n[1]))throw new Error("coordinates must contain numbers");return K2({type:"Point",coordinates:n},e,i)}function DB(n,e,i={}){for(const c of n){if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(c[c.length-1].length!==c[0].length)throw new Error("First and last Position are not equivalent.");for(let d=0;d<c[c.length-1].length;d++)if(c[c.length-1][d]!==c[0][d])throw new Error("First and last Position are not equivalent.")}return K2({type:"Polygon",coordinates:n},e,i)}function GM(n){return n%(2*Math.PI)*180/Math.PI}function KM(n){return n%360*Math.PI/180}function l_(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function q2(n,e,i){if(n!==null)for(var o,c,d,f,s,v,C,P=0,M=0,Q,E=n.type,z=E==="FeatureCollection",V=E==="Feature",ee=z?n.features.length:1,Z=0;Z<ee;Z++){C=z?n.features[Z].geometry:V?n.geometry:n,Q=C?C.type==="GeometryCollection":!1,s=Q?C.geometries.length:1;for(var ne=0;ne<s;ne++){var Be=0,ze=0;if(f=Q?C.geometries[ne]:C,f!==null){v=f.coordinates;var Ne=f.type;switch(P=0,Ne){case null:break;case"Point":if(e(v,M,Z,Be,ze)===!1)return!1;M++,Be++;break;case"LineString":case"MultiPoint":for(o=0;o<v.length;o++){if(e(v[o],M,Z,Be,ze)===!1)return!1;M++,Ne==="MultiPoint"&&Be++}Ne==="LineString"&&Be++;break;case"Polygon":case"MultiLineString":for(o=0;o<v.length;o++){for(c=0;c<v[o].length-P;c++){if(e(v[o][c],M,Z,Be,ze)===!1)return!1;M++}Ne==="MultiLineString"&&Be++,Ne==="Polygon"&&ze++}Ne==="Polygon"&&Be++;break;case"MultiPolygon":for(o=0;o<v.length;o++){for(ze=0,c=0;c<v[o].length;c++){for(d=0;d<v[o][c].length-P;d++){if(e(v[o][c][d],M,Z,Be,ze)===!1)return!1;M++}ze++}Be++}break;case"GeometryCollection":for(o=0;o<f.geometries.length;o++)if(q2(f.geometries[o],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function RB(n,e={}){if(n.bbox!=null&&e.recompute!==!0)return n.bbox;const i=[1/0,1/0,-1/0,-1/0];return q2(n,o=>{i[0]>o[0]&&(i[0]=o[0]),i[1]>o[1]&&(i[1]=o[1]),i[2]<o[0]&&(i[2]=o[0]),i[3]<o[1]&&(i[3]=o[1])}),i}var NB=RB;const OB=()=>{const n=nB;return{page:{subscribe:n.page.subscribe},navigating:{subscribe:n.navigating.subscribe},updated:n.updated}},zB={subscribe(n){return OB().page.subscribe(n)}};let sd=String.fromCharCode,Z2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",od={};function HB(n,e){if(!od[n]){od[n]={};for(let i=0;i<n.length;i++)od[n][n.charAt(i)]=i}return od[n][e]}function jB(n){return n==null?"":GB(n,6,function(e){return Z2.charAt(e)})}function VB(n){return n==null?"":n==""?null:KB((n=n.replace(/ /g,"+")).length,32,function(e){return HB(Z2,n.charAt(e))})}function GB(n,e,i){if(n==null)return"";let o,c,d={},f={},s="",v="",C="",P=2,M=3,Q=2,E=[],z=0,V=0,ee;for(ee=0;ee<n.length;ee+=1)if(s=n.charAt(ee),Object.prototype.hasOwnProperty.call(d,s)||(d[s]=M++,f[s]=!0),v=C+s,Object.prototype.hasOwnProperty.call(d,v))C=v;else{if(Object.prototype.hasOwnProperty.call(f,C)){if(256>C.charCodeAt(0)){for(o=0;o<Q;o++)z<<=1,V==e-1?(V=0,E.push(i(z)),z=0):V++;for(o=0,c=C.charCodeAt(0);o<8;o++)z=z<<1|1&c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c>>=1}else{for(o=0,c=1;o<Q;o++)z=z<<1|c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c=0;for(o=0,c=C.charCodeAt(0);o<16;o++)z=z<<1|1&c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c>>=1}--P==0&&(P=Math.pow(2,Q),Q++),delete f[C]}else for(o=0,c=d[C];o<Q;o++)z=z<<1|1&c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c>>=1;--P==0&&(P=Math.pow(2,Q),Q++),d[v]=M++,C=String(s)}if(C!==""){if(Object.prototype.hasOwnProperty.call(f,C)){if(256>C.charCodeAt(0)){for(o=0;o<Q;o++)z<<=1,V==e-1?(V=0,E.push(i(z)),z=0):V++;for(o=0,c=C.charCodeAt(0);o<8;o++)z=z<<1|1&c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c>>=1}else{for(o=0,c=1;o<Q;o++)z=z<<1|c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c=0;for(o=0,c=C.charCodeAt(0);o<16;o++)z=z<<1|1&c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c>>=1}--P==0&&(P=Math.pow(2,Q),Q++),delete f[C]}else for(o=0,c=d[C];o<Q;o++)z=z<<1|1&c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c>>=1;--P==0&&(P=Math.pow(2,Q),Q++)}for(o=0,c=2;o<Q;o++)z=z<<1|1&c,V==e-1?(V=0,E.push(i(z)),z=0):V++,c>>=1;for(;;){if(z<<=1,V==e-1){E.push(i(z));break}V++}return E.join("")}function KB(n,e,i){let o=[],c=4,d=4,f=3,s="",v=[],C,P,M,Q,E,z,V,ee={val:i(0),position:e,index:1};for(C=0;C<3;C+=1)o[C]=C;for(M=0,E=4,z=1;z!=E;)Q=ee.val&ee.position,ee.position>>=1,ee.position==0&&(ee.position=e,ee.val=i(ee.index++)),M|=(Q>0?1:0)*z,z<<=1;switch(M){case 0:for(M=0,E=256,z=1;z!=E;)Q=ee.val&ee.position,ee.position>>=1,ee.position==0&&(ee.position=e,ee.val=i(ee.index++)),M|=(Q>0?1:0)*z,z<<=1;V=sd(M);break;case 1:for(M=0,E=65536,z=1;z!=E;)Q=ee.val&ee.position,ee.position>>=1,ee.position==0&&(ee.position=e,ee.val=i(ee.index++)),M|=(Q>0?1:0)*z,z<<=1;V=sd(M);break;case 2:return""}for(o[3]=V,P=V,v.push(V);;){if(ee.index>n)return"";for(M=0,E=Math.pow(2,f),z=1;z!=E;)Q=ee.val&ee.position,ee.position>>=1,ee.position==0&&(ee.position=e,ee.val=i(ee.index++)),M|=(Q>0?1:0)*z,z<<=1;switch(V=M){case 0:for(M=0,E=256,z=1;z!=E;)Q=ee.val&ee.position,ee.position>>=1,ee.position==0&&(ee.position=e,ee.val=i(ee.index++)),M|=(Q>0?1:0)*z,z<<=1;o[d++]=sd(M),V=d-1,c--;break;case 1:for(M=0,E=65536,z=1;z!=E;)Q=ee.val&ee.position,ee.position>>=1,ee.position==0&&(ee.position=e,ee.val=i(ee.index++)),M|=(Q>0?1:0)*z,z<<=1;o[d++]=sd(M),V=d-1,c--;break;case 2:return v.join("")}if(c==0&&(c=Math.pow(2,f),f++),o[V])s=o[V];else{if(V!==d)return null;s=P+P.charAt(0)}v.push(s),o[d++]=P+s.charAt(0),c--,P=s,c==0&&(c=Math.pow(2,f),f++)}}let $2;$2=zB;const qB={keepFocus:!0,noScroll:!0,replaceState:!0},ZB={keepFocus:!0,noScroll:!0,replaceState:!1};function $B(n,e,i){var d;const o=Array.from(new Set(Array.from(((d=n==null?void 0:n.keys)==null?void 0:d.call(n))||[]).concat(Object.keys(i??{}))));let c=!1;return[Object.fromEntries(o.map(f=>{if(e[f]!=null)return[f,e[f]];let s=M=>M;const v=i==null?void 0:i[f];typeof v!="boolean"&&typeof(v==null?void 0:v.decode)=="function"&&(s=v.decode);const C=n==null?void 0:n.get(f);let P;return C==null&&(v==null?void 0:v.defaultValue)!=null?(P=v.defaultValue,c=!0):P=s(C),[f,P]})),c]}function WB(n,e,i=(o,c)=>JSON.stringify(o)===JSON.stringify(c)){return typeof n=="object"&&typeof e=="object"&&i(n,e)}function qg({encode:n,decode:e}){function i(o){return{encode:n,decode:e,defaultValue:o}}return i}function XB(n){return{encode:e=>JSON.stringify(e),decode:e=>{if(e===null)return null;try{return JSON.parse(e)}catch{return null}},defaultValue:n}}function JB(n){return{encode:e=>JSON.stringify(e),decode:e=>{if(e===null)return null;try{return JSON.parse(e)}catch{return null}},defaultValue:n}}function YB(n){return{encode:e=>jB(JSON.stringify(e)),decode:e=>{if(!e)return null;try{return JSON.parse(VB(e)??"")}catch{return null}},defaultValue:n}}const Ad={number:qg({encode:n=>n.toString(),decode:n=>n?parseFloat(n):null}),boolean:qg({encode:n=>n+"",decode:n=>n!==null&&n!=="false"}),string:qg({encode:n=>n??"",decode:n=>n}),object:XB,array:JB,lz:YB},Zg=new Set;let c_;const u_=new Map;function Yl(n,{debounceHistory:e=0,pushHistory:i=!0,sort:o=!0,showDefaults:c=!0,equalityFn:d}={}){const f=yi({});let s,v=!0;function C(M,Q){v=!1;const E=window.location.hash,z=new URLSearchParams(window.location.search),V=ee=>{for(const Z of Object.keys(M)){if(M[Z]==null){ee.delete(Z);continue}let ne=Ne=>Ne.toString();const Be=n==null?void 0:n[Z];typeof Be!="boolean"&&typeof(Be==null?void 0:Be.encode)=="function"&&(ne=Be.encode);const ze=ne(M[Z]);ze==null?ee.delete(Z):ee.set(Z,ze)}};Zg.add(V),clearTimeout(c_),c_=setTimeout(async()=>{Zg.forEach(ee=>{ee(z)}),clearTimeout(u_.get("queryParameters"));{f.set(M);async function ee(){o&&z.sort(),await iB(`?${z}${E}`,i?ZB:qB),f.set({})}Q||e===0?ee():u_.set("queryParameters",setTimeout(ee,e))}Zg.clear()})}const{subscribe:P}=W5([$2,f],([M,Q],E)=>{var ee;const[z,V]=$B((ee=M==null?void 0:M.url)==null?void 0:ee.searchParams,Q,n);if(V&&c&&C(structuredClone(z),v),!WB(s,z,d))return s=structuredClone(z),E(structuredClone(z))});return{set(M){C(M)},subscribe:P,update:M=>{const Q=js({subscribe:P}),E=M(Q);C(E)}}}const qM=n=>{const e=n.slice(1).split("&"),i={};return e.forEach(o=>{i[o.split("=")[0]]=o.split("=")[1]}),i},e4=()=>{const n=js(Yl({c:Ad.string(),z:Ad.number(),p:Ad.number(),b:Ad.number()},{pushHistory:!1}));if(n.c===null||n.c===void 0||n.z===null||n.z===void 0||n.p===null||n.p===void 0||n.b===null||n.b===void 0)return X5;const e=n.c.split(",").map(Number),i=Number(n.z),o=Number(n.p),c=Number(n.b);return{center:e,zoom:i,pitch:o,bearing:c}},t4=n=>{const e=js(Yl({},{pushHistory:!1})),i=n.center.map(o=>o.toFixed(6));e.c=i,e.z=n.zoom.toFixed(1),e.p=n.pitch.toFixed(0),e.b=n.bearing.toFixed(0),js(J5)||(e.imageId="-1"),js(rx)||(e["3d"]="0"),Yl({},{pushHistory:!1}).set(e)},ZM=n=>{const e=js(Yl({}));e.imageId=n,Yl({},{pushHistory:!1}).set(e)},$M=()=>js(Yl({},{pushHistory:!1})).imageId,h_=n=>{const e=js(Yl({}));e["3d"]=n,Yl({},{pushHistory:!1}).set(e)},WM=()=>js(Yl({},{pushHistory:!1}))["3d"],XM=n=>{const e=new URLSearchParams;for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const o=n[i];Array.isArray(o)?o.forEach(c=>{e.append(i,c)}):o!=null&&e.append(i,String(o))}return e.toString()},rf=4,nf=4,Mf=4,Ic=new Int32Array(2),f_=new Float32Array(Ic.buffer),d_=new Float64Array(Ic.buffer),ld=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Km;(function(n){n[n.UTF8_BYTES=1]="UTF8_BYTES",n[n.UTF16_STRING=2]="UTF16_STRING"})(Km||(Km={}));class ec{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new ec(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return Ic[0]=this.readInt32(e),f_[0]}readFloat64(e){return Ic[ld?0:1]=this.readInt32(e),Ic[ld?1:0]=this.readInt32(e+4),d_[0]}writeInt8(e,i){this.bytes_[e]=i}writeUint8(e,i){this.bytes_[e]=i}writeInt16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeUint16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeInt32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeUint32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeInt64(e,i){this.writeInt32(e,Number(BigInt.asIntN(32,i))),this.writeInt32(e+4,Number(BigInt.asIntN(32,i>>BigInt(32))))}writeUint64(e,i){this.writeUint32(e,Number(BigInt.asUintN(32,i))),this.writeUint32(e+4,Number(BigInt.asUintN(32,i>>BigInt(32))))}writeFloat32(e,i){f_[0]=i,this.writeInt32(e,Ic[0])}writeFloat64(e,i){d_[0]=i,this.writeInt32(e,Ic[ld?0:1]),this.writeInt32(e+4,Ic[ld?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+rf+nf)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let i=0;i<nf;i++)e+=String.fromCharCode(this.readInt8(this.position_+rf+i));return e}__offset(e,i){const o=e-this.readInt32(e);return i<this.readInt16(o)?this.readInt16(o+i):0}__union(e,i){return e.bb_pos=i+this.readInt32(i),e.bb=this,e}__string(e,i){e+=this.readInt32(e);const o=this.readInt32(e);e+=rf;const c=this.bytes_.subarray(e,e+o);return i===Km.UTF8_BYTES?c:this.text_decoder_.decode(c)}__union_with_string(e,i){return typeof e=="string"?this.__string(i):this.__union(e,i)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+rf}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=nf)throw new Error("FlatBuffers: file identifier must be length "+nf);for(let i=0;i<nf;i++)if(e.charCodeAt(i)!=this.readInt8(this.position()+rf+i))return!1;return!0}createScalarList(e,i){const o=[];for(let c=0;c<i;++c){const d=e(c);d!==null&&o.push(d)}return o}createObjList(e,i){const o=[];for(let c=0;c<i;++c){const d=e(c);d!==null&&o.push(d.unpack())}return o}}const G0=new Uint8Array(0);function r4(){return this._source.cancel()}function n4(n,e){if(!n.length)return e;if(!e.length)return n;var i=new Uint8Array(n.length+e.length);return i.set(n),i.set(e,n.length),i}function i4(){var n=this,e=n._array.subarray(n._index);return n._source.read().then(function(i){return n._array=G0,n._index=0,i.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:n4(e,i.value)}})}function a4(n){if((n|=0)<0)throw new Error("invalid length");var e=this,i=this._array.length-this._index;if(this._index+n<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=n));var o=new Uint8Array(n);return o.set(this._array.subarray(this._index)),function c(){return e._source.read().then(function(d){return d.done?(e._array=G0,e._index=0,i>0?o.subarray(0,i):null):i+d.value.length>=n?(e._array=d.value,e._index=n-i,o.set(d.value.subarray(0,n-i),i),o):(o.set(d.value,i),i+=d.value.length,c())})}()}function s4(n){return typeof n.slice=="function"?n:new Qp(typeof n.read=="function"?n:n.getReader())}function Qp(n){this._source=n,this._array=G0,this._index=0}Qp.prototype.read=i4;Qp.prototype.slice=a4;Qp.prototype.cancel=r4;var Rn,ts=((Rn={})[Rn.Byte=0]="Byte",Rn[Rn.UByte=1]="UByte",Rn[Rn.Bool=2]="Bool",Rn[Rn.Short=3]="Short",Rn[Rn.UShort=4]="UShort",Rn[Rn.Int=5]="Int",Rn[Rn.UInt=6]="UInt",Rn[Rn.Long=7]="Long",Rn[Rn.ULong=8]="ULong",Rn[Rn.Float=9]="Float",Rn[Rn.Double=10]="Double",Rn[Rn.String=11]="String",Rn[Rn.Json=12]="Json",Rn[Rn.DateTime=13]="DateTime",Rn[Rn.Binary=14]="Binary",Rn);class Va{constructor(){Or(this,"bb",null);Or(this,"bb_pos",0)}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsColumn(e,i){return(i||new Va).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsColumn(e,i){return e.setPosition(e.position()+Mf),(i||new Va).__init(e.readInt32(e.position())+e.position(),e)}name(e){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,e):null}type(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):ts.Byte}title(e){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__string(this.bb_pos+i,e):null}description(e){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__string(this.bb_pos+i,e):null}width(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}precision(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}scale(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}nullable(){let e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}unique(){let e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}primaryKey(){let e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}metadata(e){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__string(this.bb_pos+i,e):null}static startColumn(e){e.startObject(11)}static addName(e,i){e.addFieldOffset(0,i,0)}static addType(e,i){e.addFieldInt8(1,i,ts.Byte)}static addTitle(e,i){e.addFieldOffset(2,i,0)}static addDescription(e,i){e.addFieldOffset(3,i,0)}static addWidth(e,i){e.addFieldInt32(4,i,-1)}static addPrecision(e,i){e.addFieldInt32(5,i,-1)}static addScale(e,i){e.addFieldInt32(6,i,-1)}static addNullable(e,i){e.addFieldInt8(7,+i,1)}static addUnique(e,i){e.addFieldInt8(8,+i,0)}static addPrimaryKey(e,i){e.addFieldInt8(9,+i,0)}static addMetadata(e,i){e.addFieldOffset(10,i,0)}static endColumn(e){let i=e.endObject();return e.requiredField(i,4),i}static createColumn(e,i,o,c,d,f,s,v,C,P,M,Q){return Va.startColumn(e),Va.addName(e,i),Va.addType(e,o),Va.addTitle(e,c),Va.addDescription(e,d),Va.addWidth(e,f),Va.addPrecision(e,s),Va.addScale(e,v),Va.addNullable(e,C),Va.addUnique(e,P),Va.addPrimaryKey(e,M),Va.addMetadata(e,Q),Va.endColumn(e)}}class Yo{constructor(){Or(this,"bb",null);Or(this,"bb_pos",0)}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsCrs(e,i){return(i||new Yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCrs(e,i){return e.setPosition(e.position()+Mf),(i||new Yo).__init(e.readInt32(e.position())+e.position(),e)}org(e){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,e):null}code(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__string(this.bb_pos+i,e):null}description(e){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__string(this.bb_pos+i,e):null}wkt(e){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__string(this.bb_pos+i,e):null}codeString(e){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb_pos+i,e):null}static startCrs(e){e.startObject(6)}static addOrg(e,i){e.addFieldOffset(0,i,0)}static addCode(e,i){e.addFieldInt32(1,i,0)}static addName(e,i){e.addFieldOffset(2,i,0)}static addDescription(e,i){e.addFieldOffset(3,i,0)}static addWkt(e,i){e.addFieldOffset(4,i,0)}static addCodeString(e,i){e.addFieldOffset(5,i,0)}static endCrs(e){return e.endObject()}static createCrs(e,i,o,c,d,f,s){return Yo.startCrs(e),Yo.addOrg(e,i),Yo.addCode(e,o),Yo.addName(e,c),Yo.addDescription(e,d),Yo.addWkt(e,f),Yo.addCodeString(e,s),Yo.endCrs(e)}}var bn,ws=((bn={})[bn.Unknown=0]="Unknown",bn[bn.Point=1]="Point",bn[bn.LineString=2]="LineString",bn[bn.Polygon=3]="Polygon",bn[bn.MultiPoint=4]="MultiPoint",bn[bn.MultiLineString=5]="MultiLineString",bn[bn.MultiPolygon=6]="MultiPolygon",bn[bn.GeometryCollection=7]="GeometryCollection",bn[bn.CircularString=8]="CircularString",bn[bn.CompoundCurve=9]="CompoundCurve",bn[bn.CurvePolygon=10]="CurvePolygon",bn[bn.MultiCurve=11]="MultiCurve",bn[bn.MultiSurface=12]="MultiSurface",bn[bn.Curve=13]="Curve",bn[bn.Surface=14]="Surface",bn[bn.PolyhedralSurface=15]="PolyhedralSurface",bn[bn.TIN=16]="TIN",bn[bn.Triangle=17]="Triangle",bn);class ap{constructor(){Or(this,"bb",null);Or(this,"bb_pos",0)}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsHeader(e,i){return(i||new ap).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsHeader(e,i){return e.setPosition(e.position()+Mf),(i||new ap).__init(e.readInt32(e.position())+e.position(),e)}name(e){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,e):null}envelope(e){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readFloat64(this.bb.__vector(this.bb_pos+i)+8*e):0}envelopeLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}envelopeArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}geometryType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):ws.Unknown}hasZ(){let e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasM(){let e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasT(){let e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasTm(){let e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}columns(e,i){let o=this.bb.__offset(this.bb_pos,18);return o?(i||new Va).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}featuresCount(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}indexNodeSize(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}crs(e){let i=this.bb.__offset(this.bb_pos,24);return i?(e||new Yo).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}title(e){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.__string(this.bb_pos+i,e):null}description(e){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__string(this.bb_pos+i,e):null}metadata(e){let i=this.bb.__offset(this.bb_pos,30);return i?this.bb.__string(this.bb_pos+i,e):null}static startHeader(e){e.startObject(14)}static addName(e,i){e.addFieldOffset(0,i,0)}static addEnvelope(e,i){e.addFieldOffset(1,i,0)}static createEnvelopeVector(e,i){e.startVector(8,i.length,8);for(let o=i.length-1;o>=0;o--)e.addFloat64(i[o]);return e.endVector()}static startEnvelopeVector(e,i){e.startVector(8,i,8)}static addGeometryType(e,i){e.addFieldInt8(2,i,ws.Unknown)}static addHasZ(e,i){e.addFieldInt8(3,+i,0)}static addHasM(e,i){e.addFieldInt8(4,+i,0)}static addHasT(e,i){e.addFieldInt8(5,+i,0)}static addHasTm(e,i){e.addFieldInt8(6,+i,0)}static addColumns(e,i){e.addFieldOffset(7,i,0)}static createColumnsVector(e,i){e.startVector(4,i.length,4);for(let o=i.length-1;o>=0;o--)e.addOffset(i[o]);return e.endVector()}static startColumnsVector(e,i){e.startVector(4,i,4)}static addFeaturesCount(e,i){e.addFieldInt64(8,i,BigInt("0"))}static addIndexNodeSize(e,i){e.addFieldInt16(9,i,16)}static addCrs(e,i){e.addFieldOffset(10,i,0)}static addTitle(e,i){e.addFieldOffset(11,i,0)}static addDescription(e,i){e.addFieldOffset(12,i,0)}static addMetadata(e,i){e.addFieldOffset(13,i,0)}static endHeader(e){return e.endObject()}static finishHeaderBuffer(e,i){e.finish(i)}static finishSizePrefixedHeaderBuffer(e,i){e.finish(i,void 0,!0)}}class zs{constructor(){Or(this,"bb",null);Or(this,"bb_pos",0)}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsGeometry(e,i){return(i||new zs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGeometry(e,i){return e.setPosition(e.position()+Mf),(i||new zs).__init(e.readInt32(e.position())+e.position(),e)}ends(e){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readUint32(this.bb.__vector(this.bb_pos+i)+4*e):0}endsLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}endsArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}xy(e){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readFloat64(this.bb.__vector(this.bb_pos+i)+8*e):0}xyLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}xyArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}z(e){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.readFloat64(this.bb.__vector(this.bb_pos+i)+8*e):0}zLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}zArray(){let e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}m(e){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readFloat64(this.bb.__vector(this.bb_pos+i)+8*e):0}mLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}mArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}t(e){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readFloat64(this.bb.__vector(this.bb_pos+i)+8*e):0}tLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}tArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}tm(e){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.readUint64(this.bb.__vector(this.bb_pos+i)+8*e):BigInt(0)}tmLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):ws.Unknown}parts(e,i){let o=this.bb.__offset(this.bb_pos,18);return o?(i||new zs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*e),this.bb):null}partsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGeometry(e){e.startObject(8)}static addEnds(e,i){e.addFieldOffset(0,i,0)}static createEndsVector(e,i){e.startVector(4,i.length,4);for(let o=i.length-1;o>=0;o--)e.addInt32(i[o]);return e.endVector()}static startEndsVector(e,i){e.startVector(4,i,4)}static addXy(e,i){e.addFieldOffset(1,i,0)}static createXyVector(e,i){e.startVector(8,i.length,8);for(let o=i.length-1;o>=0;o--)e.addFloat64(i[o]);return e.endVector()}static startXyVector(e,i){e.startVector(8,i,8)}static addZ(e,i){e.addFieldOffset(2,i,0)}static createZVector(e,i){e.startVector(8,i.length,8);for(let o=i.length-1;o>=0;o--)e.addFloat64(i[o]);return e.endVector()}static startZVector(e,i){e.startVector(8,i,8)}static addM(e,i){e.addFieldOffset(3,i,0)}static createMVector(e,i){e.startVector(8,i.length,8);for(let o=i.length-1;o>=0;o--)e.addFloat64(i[o]);return e.endVector()}static startMVector(e,i){e.startVector(8,i,8)}static addT(e,i){e.addFieldOffset(4,i,0)}static createTVector(e,i){e.startVector(8,i.length,8);for(let o=i.length-1;o>=0;o--)e.addFloat64(i[o]);return e.endVector()}static startTVector(e,i){e.startVector(8,i,8)}static addTm(e,i){e.addFieldOffset(5,i,0)}static createTmVector(e,i){e.startVector(8,i.length,8);for(let o=i.length-1;o>=0;o--)e.addInt64(i[o]);return e.endVector()}static startTmVector(e,i){e.startVector(8,i,8)}static addType(e,i){e.addFieldInt8(6,i,ws.Unknown)}static addParts(e,i){e.addFieldOffset(7,i,0)}static createPartsVector(e,i){e.startVector(4,i.length,4);for(let o=i.length-1;o>=0;o--)e.addOffset(i[o]);return e.endVector()}static startPartsVector(e,i){e.startVector(4,i,4)}static endGeometry(e){return e.endObject()}static createGeometry(e,i,o,c,d,f,s,v,C){return zs.startGeometry(e),zs.addEnds(e,i),zs.addXy(e,o),zs.addZ(e,c),zs.addM(e,d),zs.addT(e,f),zs.addTm(e,s),zs.addType(e,v),zs.addParts(e,C),zs.endGeometry(e)}}class TA{constructor(){Or(this,"bb",null);Or(this,"bb_pos",0)}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFeature(e,i){return(i||new TA).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFeature(e,i){return e.setPosition(e.position()+Mf),(i||new TA).__init(e.readInt32(e.position())+e.position(),e)}geometry(e){let i=this.bb.__offset(this.bb_pos,4);return i?(e||new zs).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}properties(e){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readUint8(this.bb.__vector(this.bb_pos+i)+e):0}propertiesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}propertiesArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}columns(e,i){let o=this.bb.__offset(this.bb_pos,8);return o?(i||new Va).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFeature(e){e.startObject(3)}static addGeometry(e,i){e.addFieldOffset(0,i,0)}static addProperties(e,i){e.addFieldOffset(1,i,0)}static createPropertiesVector(e,i){e.startVector(1,i.length,1);for(let o=i.length-1;o>=0;o--)e.addInt8(i[o]);return e.endVector()}static startPropertiesVector(e,i){e.startVector(1,i,1)}static addColumns(e,i){e.addFieldOffset(2,i,0)}static createColumnsVector(e,i){e.startVector(4,i.length,4);for(let o=i.length-1;o>=0;o--)e.addOffset(i[o]);return e.endVector()}static startColumnsVector(e,i){e.startVector(4,i,4)}static endFeature(e){return e.endObject()}static finishFeatureBuffer(e,i){e.finish(i)}static finishSizePrefixedFeatureBuffer(e,i){e.finish(i,void 0,!0)}static createFeature(e,i,o,c){return TA.startFeature(e),TA.addGeometry(e,i),TA.addProperties(e,o),TA.addColumns(e,c),TA.endFeature(e)}}function K0(n){let e=ap.getRootAsHeader(n),i=e.featuresCount(),o=e.indexNodeSize(),c=[];for(let s=0;s<e.columnsLength();s++){let v=e.columns(s);if(!v)throw Error("Column unexpectedly missing");if(!v.name())throw Error("Column name unexpectedly missing");c.push({name:v.name(),type:v.type(),title:v.title(),description:v.description(),width:v.width(),precision:v.precision(),scale:v.scale(),nullable:v.nullable(),unique:v.unique(),primary_key:v.primaryKey()})}let d=e.crs(),f=d?{org:d.org(),code:d.code(),name:d.name(),description:d.description(),wkt:d.wkt(),code_string:d.codeString()}:null;return{geometryType:e.geometryType(),columns:c,envelope:null,featuresCount:Number(i),indexNodeSize:o,crs:f,title:e.title(),description:e.description(),metadata:e.metadata()}}const lu=new Uint8Array([102,103,98,3,102,103,98,0]),$l=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qm=function(n,e){return qm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var c in o)o.hasOwnProperty(c)&&(i[c]=o[c])},qm(n,e)};function o4(n,e){qm(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}function bh(n,e,i,o){function c(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function s(P){try{C(o.next(P))}catch(M){f(M)}}function v(P){try{C(o.throw(P))}catch(M){f(M)}}function C(P){P.done?d(P.value):c(P.value).then(s,v)}C((o=o.apply(n,[])).next())})}function kc(n,e){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,f;return f={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function s(C){return function(P){return v([C,P])}}function v(C){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,c&&(d=C[0]&2?c.return:C[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,C[1])).done)return d;switch(c=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return i.label++,{value:C[1],done:!1};case 5:i.label++,c=C[1],C=[0];continue;case 7:C=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){i=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){i.label=C[1];break}if(C[0]===6&&i.label<d[1]){i.label=d[1],d=C;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push(C);break}d[2]&&i.ops.pop(),i.trys.pop();continue}C=e.call(n,i)}catch(P){C=[6,P],c=0}finally{o=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function Fh(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function If(n){return this instanceof If?(this.v=n,this):new If(n)}function A4(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(n,e||[]),c,d=[];return c={},f("next"),f("throw"),f("return"),c[Symbol.asyncIterator]=function(){return this},c;function f(Q){o[Q]&&(c[Q]=function(E){return new Promise(function(z,V){d.push([Q,E,z,V])>1||s(Q,E)})})}function s(Q,E){try{v(o[Q](E))}catch(z){M(d[0][3],z)}}function v(Q){Q.value instanceof If?Promise.resolve(Q.value.v).then(C,P):M(d[0][2],Q)}function C(Q){s("next",Q)}function P(Q){s("throw",Q)}function M(Q,E){Q(E),d.shift(),d.length&&s(d[0][0],d[0][1])}}var W2=function(n){o4(e,n);function e(i){var o=n.call(this,i)||this;return Object.defineProperty(o,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(o,o.constructor.prototype):o.__proto__=o.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(o,o.constructor),o}return e}(Error);(function(){function n(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(n.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),n.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},n.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},n})();(function(){function n(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(n.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},n.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},n})();(function(){function n(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(n.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},n.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},n})();function Zm(n){n!=null&&typeof n.then=="function"&&n.then(Ap,Ap)}var $g=0,p_=1,yu=2,sp=3,$m=4,op=1024,Ap=function(){};function fh(n){var e=n.err,i=Promise.resolve(n.execution).then(function(o){if(e!=null)throw e;return o});return n.err=void 0,n.execution=i.then(function(){},function(){}),n.pending===void 0?i:n.pending.then(function(){return i})}function au(n,e){var i=n.state>=sp;return Promise.resolve(e).then(function(o){return!i&&n.state>=$m?fh(n).then(function(c){return{value:c,done:!0}}):{value:o,done:i}})}function q0(n,e){var i,o;if(!(n.state>=yu))if(n.state=yu,n.onnext(),n.onstop(),n.err==null&&(n.err=e),n.pushes.length===0&&(typeof n.buffer>"u"||n.buffer.empty))mf(n);else try{for(var c=Fh(n.pushes),d=c.next();!d.done;d=c.next()){var f=d.value;f.resolve()}}catch(s){i={error:s}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}function mf(n){var e,i;if(!(n.state>=sp)){n.state<yu&&q0(n),n.state=sp,n.buffer=void 0;try{for(var o=Fh(n.nexts),c=o.next();!c.done;c=o.next()){var d=c.value,f=n.pending===void 0?fh(n):n.pending.then(function(){return fh(n)});d.resolve(au(n,f))}}catch(s){e={error:s}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}n.pushes=[],n.nexts=[]}}function g_(n){n.state>=$m||(n.state<sp&&mf(n),n.state=$m)}function l4(n,e){if(Zm(e),n.pushes.length>=op)throw new W2("No more than "+op+" pending calls to push are allowed on a single repeater.");if(n.state>=yu)return Promise.resolve(void 0);var i=n.pending===void 0?Promise.resolve(e):n.pending.then(function(){return e});i=i.catch(function(v){n.state<yu&&(n.err=v),g_(n)});var o;if(n.nexts.length){var c=n.nexts.shift();c.resolve(au(n,i)),n.nexts.length?o=Promise.resolve(n.nexts[0].value):typeof n.buffer<"u"&&!n.buffer.full?o=Promise.resolve(void 0):o=new Promise(function(v){return n.onnext=v})}else typeof n.buffer<"u"&&!n.buffer.full?(n.buffer.add(i),o=Promise.resolve(void 0)):o=new Promise(function(v){return n.pushes.push({resolve:v,value:i})});var d=!0,f={},s=o.catch(function(v){if(d)throw v});return f.then=function(v,C){return d=!1,Promise.prototype.then.call(o,v,C)},f.catch=function(v){return d=!1,Promise.prototype.catch.call(o,v)},f.finally=o.finally.bind(o),n.pending=i.then(function(){return s}).catch(function(v){n.err=v,g_(n)}),f}function c4(n){var e=q0.bind(null,n),i=new Promise(function(o){return n.onstop=o});return e.then=i.then.bind(i),e.catch=i.catch.bind(i),e.finally=i.finally.bind(i),e}function u4(n){if(!(n.state>=p_)){n.state=p_;var e=l4.bind(null,n),i=c4(n);n.execution=new Promise(function(o){return o(n.executor(e,i))}),n.execution.catch(function(){return q0(n)})}}var cd=new WeakMap,Uf=function(){function n(e,i){cd.set(this,{executor:e,buffer:i,err:void 0,state:$g,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Ap,onstop:Ap})}return n.prototype.next=function(e){Zm(e);var i=cd.get(this);if(i===void 0)throw new Error("WeakMap error");if(i.nexts.length>=op)throw new W2("No more than "+op+" pending calls to next are allowed on a single repeater.");if(i.state<=$g&&u4(i),i.onnext(e),typeof i.buffer<"u"&&!i.buffer.empty){var o=au(i,i.buffer.remove());if(i.pushes.length){var c=i.pushes.shift();i.buffer.add(c.value),i.onnext=c.resolve}return o}else if(i.pushes.length){var d=i.pushes.shift();return i.onnext=d.resolve,au(i,d.value)}else if(i.state>=yu)return mf(i),au(i,fh(i));return new Promise(function(f){return i.nexts.push({resolve:f,value:e})})},n.prototype.return=function(e){Zm(e);var i=cd.get(this);if(i===void 0)throw new Error("WeakMap error");return mf(i),i.execution=Promise.resolve(i.execution).then(function(){return e}),au(i,fh(i))},n.prototype.throw=function(e){var i=cd.get(this);if(i===void 0)throw new Error("WeakMap error");return i.state<=$g||i.state>=yu||typeof i.buffer<"u"&&!i.buffer.empty?(mf(i),i.err==null&&(i.err=e),au(i,fh(i))):this.next(Promise.reject(e))},n.prototype[Symbol.asyncIterator]=function(){return this},n.race=h4,n.merge=f4,n.zip=d4,n.latest=p4,n}();function Dp(n,e){var i,o,c=[],d=function(C){C!=null&&typeof C[Symbol.asyncIterator]=="function"?c.push(C[Symbol.asyncIterator]()):C!=null&&typeof C[Symbol.iterator]=="function"?c.push(C[Symbol.iterator]()):c.push(function(){return A4(this,arguments,function(){return kc(this,function(Q){switch(Q.label){case 0:return e.yieldValues?[4,If(C)]:[3,3];case 1:return[4,Q.sent()];case 2:Q.sent(),Q.label=3;case 3:return e.returnValues?[4,If(C)]:[3,5];case 4:return[2,Q.sent()];case 5:return[2]}})})}())};try{for(var f=Fh(n),s=f.next();!s.done;s=f.next()){var v=s.value;d(v)}}catch(C){i={error:C}}finally{try{s&&!s.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return c}function h4(n){var e=this,i=Dp(n,{returnValues:!0});return new Uf(function(o,c){return bh(e,void 0,void 0,function(){var d,f,s,v,C,P;return kc(this,function(M){switch(M.label){case 0:if(!i.length)return c(),[2];f=!1,c.then(function(){d(),f=!0}),M.label=1;case 1:M.trys.push([1,,5,7]),v=void 0,C=0,P=function(){var Q,E,z,V,ee,Z;return kc(this,function(ne){switch(ne.label){case 0:Q=C;try{for(E=(ee=void 0,Fh(i)),z=E.next();!z.done;z=E.next())V=z.value,Promise.resolve(V.next()).then(function(Be){Be.done?(c(),s===void 0&&(s=Be)):C===Q&&(C++,d(Be))},function(Be){return c(Be)})}catch(Be){ee={error:Be}}finally{try{z&&!z.done&&(Z=E.return)&&Z.call(E)}finally{if(ee)throw ee.error}}return[4,new Promise(function(Be){return d=Be})];case 1:return v=ne.sent(),v===void 0?[3,3]:[4,o(v.value)];case 2:ne.sent(),ne.label=3;case 3:return[2]}})},M.label=2;case 2:return f?[3,4]:[5,P()];case 3:return M.sent(),[3,2];case 4:return[2,s&&s.value];case 5:return c(),[4,Promise.race(i.map(function(Q){return Q.return&&Q.return()}))];case 6:return M.sent(),[7];case 7:return[2]}})})})}function f4(n){var e=this,i=Dp(n,{yieldValues:!0});return new Uf(function(o,c){return bh(e,void 0,void 0,function(){var d,f,s,v=this;return kc(this,function(C){switch(C.label){case 0:if(!i.length)return c(),[2];d=[],f=!1,c.then(function(){var P,M;f=!0;try{for(var Q=Fh(d),E=Q.next();!E.done;E=Q.next()){var z=E.value;z()}}catch(V){P={error:V}}finally{try{E&&!E.done&&(M=Q.return)&&M.call(Q)}finally{if(P)throw P.error}}}),C.label=1;case 1:return C.trys.push([1,,3,4]),[4,Promise.all(i.map(function(P,M){return bh(v,void 0,void 0,function(){var Q,E;return kc(this,function(z){switch(z.label){case 0:z.trys.push([0,,6,9]),z.label=1;case 1:return f?[3,5]:(Promise.resolve(P.next()).then(function(V){return d[M](V)},function(V){return c(V)}),[4,new Promise(function(V){d[M]=V})]);case 2:return Q=z.sent(),Q===void 0?[3,4]:Q.done?(s=Q,[2]):[4,o(Q.value)];case 3:z.sent(),z.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return E=P.return,E?[4,P.return()]:[3,8];case 7:E=z.sent(),z.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return C.sent(),[2,s&&s.value];case 3:return c(),[7];case 4:return[2]}})})})}function d4(n){var e=this,i=Dp(n,{returnValues:!0});return new Uf(function(o,c){return bh(e,void 0,void 0,function(){var d,f,s,v;return kc(this,function(C){switch(C.label){case 0:if(!i.length)return c(),[2,[]];f=!1,c.then(function(){d(),f=!0}),C.label=1;case 1:C.trys.push([1,,6,8]),C.label=2;case 2:return f?[3,5]:(Promise.all(i.map(function(P){return P.next()})).then(function(P){return d(P)},function(P){return c(P)}),[4,new Promise(function(P){return d=P})]);case 3:return s=C.sent(),s===void 0?[2]:(v=s.map(function(P){return P.value}),s.some(function(P){return P.done})?[2,v]:[4,o(v)]);case 4:return C.sent(),[3,2];case 5:return[3,8];case 6:return c(),[4,Promise.all(i.map(function(P){return P.return&&P.return()}))];case 7:return C.sent(),[7];case 8:return[2]}})})})}function p4(n){var e=this,i=Dp(n,{yieldValues:!0,returnValues:!0});return new Uf(function(o,c){return bh(e,void 0,void 0,function(){var d,f,s,v,C,P=this;return kc(this,function(M){switch(M.label){case 0:if(!i.length)return c(),[2,[]];f=[],s=!1,c.then(function(){var Q,E;d();try{for(var z=Fh(f),V=z.next();!V.done;V=z.next()){var ee=V.value;ee()}}catch(Z){Q={error:Z}}finally{try{V&&!V.done&&(E=z.return)&&E.call(z)}finally{if(Q)throw Q.error}}s=!0}),M.label=1;case 1:return M.trys.push([1,,5,7]),Promise.all(i.map(function(Q){return Q.next()})).then(function(Q){return d(Q)},function(Q){return c(Q)}),[4,new Promise(function(Q){return d=Q})];case 2:return v=M.sent(),v===void 0?[2]:(C=v.map(function(Q){return Q.value}),v.every(function(Q){return Q.done})?[2,C]:[4,o(C.slice())]);case 3:return M.sent(),[4,Promise.all(i.map(function(Q,E){return bh(P,void 0,void 0,function(){var z;return kc(this,function(V){switch(V.label){case 0:if(v[E].done)return[2,v[E].value];V.label=1;case 1:return s?[3,4]:(Promise.resolve(Q.next()).then(function(ee){return f[E](ee)},function(ee){return c(ee)}),[4,new Promise(function(ee){return f[E]=ee})]);case 2:return z=V.sent(),z===void 0?[2,v[E].value]:z.done?[2,z.value]:(C[E]=z.value,[4,o(C.slice())]);case 3:return V.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,M.sent()];case 5:return c(),[4,Promise.all(i.map(function(Q){return Q.return&&Q.return()}))];case 6:return M.sent(),[7];case 7:return[2]}})})})}var hu;let X2=(hu=class{constructor(){Or(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(e){if(e<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}},Or(hu,"global",new hu),hu);const g4=40,m4=16;function Z0(n,e){e=Math.min(Math.max(+e,2),65535);let i=n,o=i;do o+=i=Math.ceil(i/e);while(i!==1);return 40*o}function y4(n,e){if(e<2)throw Error("Node size must be at least 2");if(n===0)throw Error("Number of items must be greater than 0");let i=n,o=i,c=[i];do o+=i=Math.ceil(i/e),c.push(i);while(i!==1);let d=[];for(let s of(i=o,c))d.push(i-s),i-=s;let f=[];for(let s=0;s<c.length;s++)f.push([d[s],d[s]+c[s]]);return f}async function*_4(n,e,i,o){class c{constructor(E,z){Or(this,"_level");Or(this,"nodes");this._level=z,this.nodes=E}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(E){this.nodes[1]=E}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:d,minY:f,maxX:s,maxY:v}=i,C=y4(n,e),P=C[0][0],M=[new c([0,1],C.length-1)];for(;M.length!==0;){let Q=M.shift(),E=Q.startNodeIdx(),z=E>=P,V=(()=>{let[,ne]=C[Q.level()],Be=Math.min(Q.endNodeIdx()+e,ne);return z&&Be<ne?Be+1:Be})(),ee=V-E,Z=new DataView(await o(40*E,40*ee));for(let ne=E;ne<V;ne++){let Be=ne-E,ze=40*Be;if(s<Z.getFloat64(ze+0,!0)||v<Z.getFloat64(ze+8,!0)||d>Z.getFloat64(ze+16,!0)||f>Z.getFloat64(ze+24,!0))continue;let Ne=Z.getBigUint64(ze+32,!0);if(z){let Qe=(()=>{if(ne<n-1){let se=(Be+1)*40;return Z.getBigUint64(se+32,!0)-Ne}return null})(),tt=ne-P;yield[Number(Ne),tt,Number(Qe)];continue}let Oe=X2.global.extraRequestThreshold()/40,ve=M[M.length-1];if(ve!==void 0&&ve.level()===Q.level()-1&&Ne<ve.endNodeIdx()+Oe){ve.extendEndNodeIdx(Number(Ne));continue}let me=(()=>{let Qe=Q.level()-1;return new c([Number(Ne),Number(Ne)+1],Qe)})();ve!==void 0&&(ve.level(),me.level()),M.push(me)}}}class $0{constructor(e,i,o,c,d){Or(this,"headerClient");Or(this,"header");Or(this,"headerLength");Or(this,"indexLength");Or(this,"nocache");this.headerClient=e,this.header=i,this.headerLength=o,this.indexLength=c,this.nocache=d}static async open(e,i){let o,c=new m_(e,i),d=2024+(()=>{let C,P=0;for(C=0;C<3;C++)P+=m4**C*g4;return P})();if(!new Uint8Array(await c.getRange(0,8,d,"header")).subarray(0,3).every((C,P)=>lu[P]===C))throw Error("Not a FlatGeobuf file");if((o=new DataView(await c.getRange(8,4,d,"header")).getUint32(0,!0))>10485760||o<8)throw Error("Invalid header size");let f=await c.getRange(12,o,d,"header"),s=K0(new ec(new Uint8Array(f))),v=Z0(s.featuresCount,s.indexNodeSize);return new $0(c,s,o,v,i)}async*selectBbox(e){let i=this.lengthBeforeTree(),o=this.headerClient,c=async(v,C)=>o.getRange(i+v,C,0,"index"),d=[],f=[];for await(let v of _4(this.header.featuresCount,this.header.indexNodeSize,e,c)){let[C,P]=v,[,,M]=v;if(M||(M=4),f.length===0){f.push([C,M,P]);continue}let Q=f[f.length-1];C-(Q[0]+Q[1])>X2.global.extraRequestThreshold()&&(d.push(f),f=[]),f.push([C,M,P])}this.headerClient.logUsage("header+index"),f.length>0&&d.push(f);let s=d.flatMap(v=>this.readFeatureBatch(v,this.nocache));yield*Uf.merge(s)}lengthBeforeTree(){return lu.length+$l+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(e){return new m_(this.headerClient.httpClient,e)}async*readFeatureBatch(e,i){let[o]=e[0],[c,d]=e[e.length-1],f=this.buildFeatureClient(i),s=c+d-o;for(let[v,,C]of e){let P=await this.readFeature(f,v,s);yield{id:C,feature:P},s=0}f.logUsage("feature")}async readFeature(e,i,o){let c,d=i+this.lengthBeforeFeatures();c=new DataView(await e.getRange(d,4,o,"feature length")).getUint32(0,!0);let f=new Uint8Array(await e.getRange(d+4,c,o,"feature data")),s=new Uint8Array(c+$l);s.set(f,$l);let v=new ec(s);return v.setPosition($l),TA.getRootAsFeature(v)}}let m_=class{constructor(e,i){Or(this,"httpClient");Or(this,"bytesEverUsed",0);Or(this,"bytesEverFetched",0);Or(this,"buffer",new ArrayBuffer(0));Or(this,"head",0);if(typeof e=="string")this.httpClient=new y_(e,i);else if(e instanceof y_)this.httpClient=e;else throw Error("Unknown source ")}async getRange(e,i,o,c){this.bytesEverUsed+=i;let d=e-this.head,f=d+i;if(d>=0&&f<=this.buffer.byteLength)return this.buffer.slice(d,f);let s=Math.max(i,o);return this.bytesEverFetched+=s,this.buffer=await this.httpClient.getRange(e,s,c),this.head=e,this.buffer.slice(0,i)}logUsage(e){e.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}},y_=class{constructor(e,i){Or(this,"url");Or(this,"nocache");Or(this,"requestsEverMade",0);Or(this,"bytesEverRequested",0);this.url=e,this.nocache=i}async getRange(e,i,o){this.requestsEverMade+=1,this.bytesEverRequested+=i;let c={Range:`bytes=${e}-${e+i-1}`};return this.nocache&&(c["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:c})).arrayBuffer()}};function Wg(n,e){let i=[];for(let o=0;o<n.length;o+=2){let c=[n[o],n[o+1]];e&&c.push(e[o>>1]),i.push(c)}return i}new TextEncoder;let __=new TextDecoder;function b4(n,e){let i={};if(!e||e.length===0)return i;let o=n.propertiesArray();if(!o)return i;let c=new DataView(o.buffer,o.byteOffset),d=n.propertiesLength(),f=0;for(;f<d;){let s=c.getUint16(f,!0);f+=2;let v=e[s],C=v.name;switch(v.type){case ts.Bool:i[C]=!!c.getUint8(f),f+=1;break;case ts.Byte:i[C]=c.getInt8(f),f+=1;break;case ts.UByte:i[C]=c.getUint8(f),f+=1;break;case ts.Short:i[C]=c.getInt16(f,!0),f+=2;break;case ts.UShort:i[C]=c.getUint16(f,!0),f+=2;break;case ts.Int:i[C]=c.getInt32(f,!0),f+=4;break;case ts.UInt:i[C]=c.getUint32(f,!0),f+=4;break;case ts.Long:i[C]=Number(c.getBigInt64(f,!0)),f+=8;break;case ts.ULong:i[C]=Number(c.getBigUint64(f,!0)),f+=8;break;case ts.Float:i[C]=c.getFloat32(f,!0),f+=4;break;case ts.Double:i[C]=c.getFloat64(f,!0),f+=8;break;case ts.DateTime:case ts.String:{let P=c.getUint32(f,!0);f+=4,i[C]=__.decode(o.subarray(f,f+P)),f+=P;break}case ts.Json:{let P=c.getUint32(f,!0);f+=4;let M=__.decode(o.subarray(f,f+P));i[C]=JSON.parse(M),f+=P;break}case ts.Binary:{let P=c.getUint32(f,!0);f+=4,i[C]=o.subarray(f,f+P),f+=P;break}default:throw Error(`Unknown type ${v.type}`)}}return i}function v4(n,e,i){if(!n.subarray(0,3).every((P,M)=>lu[M]===P))throw Error("Not a FlatGeobuf file");let o=new ec(n),c=o.readUint32(lu.length);o.setPosition(lu.length+$l);let d=K0(o),f=lu.length+$l+c,{indexNodeSize:s,featuresCount:v}=d;s>0&&(f+=Z0(v,s));let C=[];for(;f<o.capacity();){let P=o.readUint32(f);o.setPosition(f+$l);let M=TA.getRootAsFeature(o);C.push(e(C.length,M,d)),f+=$l+P}return C}async function*w4(n,e,i){let o,c=s4(n),d=async E=>await c.slice(E),f=new Uint8Array(await d(8));if(!f.subarray(0,3).every((E,z)=>lu[z]===E))throw Error("Not a FlatGeobuf file");f=new Uint8Array(await d(4));let s=new ec(f),v=s.readUint32(0);f=new Uint8Array(await d(v));let C=K0(s=new ec(f)),{indexNodeSize:P,featuresCount:M}=C;if(P>0){let E=Z0(M,P);await d(E)}let Q=0;for(;o=await B4(d,C,e,Q++);)yield o}async function*x4(n,e,i,o,c=!1){let d=await $0.open(n,c);for await(let f of d.selectBbox(e))yield i(f.id,f.feature,d.header)}async function B4(n,e,i,o){let c=new Uint8Array(await n(4,"feature length"));if(c.byteLength===0)return;let d=new ec(c),f=d.readUint32(0);c=new Uint8Array(await n(f,"feature data"));let s=new Uint8Array(f+4);return s.set(c,4),(d=new ec(s)).setPosition($l),i(o,TA.getRootAsFeature(d),e)}const C4={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class J2{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||C4[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const kf=6378137,Ah=Math.PI*kf,I4=[-Ah,-Ah,Ah,Ah],F4=[-180,-85,180,85],ud=kf*Math.log(Math.tan(Math.PI/2));class Gu extends J2{constructor(e){super({code:e,units:"m",extent:I4,global:!0,worldExtent:F4,getPointResolution:function(i,o){return i/Math.cosh(o[1]/kf)}})}}const b_=[new Gu("EPSG:3857"),new Gu("EPSG:102100"),new Gu("EPSG:102113"),new Gu("EPSG:900913"),new Gu("http://www.opengis.net/def/crs/EPSG/0/3857"),new Gu("http://www.opengis.net/gml/srs/epsg.xml#3857")];function E4(n,e,i,o){const c=n.length;i=i>1?i:2,o=o??i,e===void 0&&(i>2?e=n.slice():e=new Array(c));for(let d=0;d<c;d+=o){e[d]=Ah*n[d]/180;let f=kf*Math.log(Math.tan(Math.PI*(+n[d+1]+90)/360));f>ud?f=ud:f<-ud&&(f=-ud),e[d+1]=f}return e}function S4(n,e,i,o){const c=n.length;i=i>1?i:2,o=o??i,e===void 0&&(i>2?e=n.slice():e=new Array(c));for(let d=0;d<c;d+=o)e[d]=180*n[d]/Ah,e[d+1]=360*Math.atan(Math.exp(n[d+1]/kf))/Math.PI-90;return e}const T4=6378137,v_=[-180,-90,180,90],L4=Math.PI*T4/180;class ru extends J2{constructor(e,i){super({code:e,units:"degrees",extent:v_,axisOrientation:i,global:!0,metersPerUnit:L4,worldExtent:v_})}}const w_=[new ru("CRS:84"),new ru("EPSG:4326","neu"),new ru("urn:ogc:def:crs:OGC:1.3:CRS84"),new ru("urn:ogc:def:crs:OGC:2:84"),new ru("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ru("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ru("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Xg={};function lp(n,e,i){const o=n.getCode(),c=e.getCode();o in Xg||(Xg[o]={}),Xg[o][c]=i}function Y2(n,e){if(e!==void 0){for(let i=0,o=n.length;i<o;++i)e[i]=n[i];e=e}else e=n.slice();return e}function P4(n){n.getCode(),lp(n,n,Y2)}function M4(n){n.forEach(P4)}function x_(n){M4(n),n.forEach(function(e){n.forEach(function(i){e!==i&&lp(e,i,Y2)})})}function U4(n,e,i,o){n.forEach(function(c){e.forEach(function(d){lp(c,d,i),lp(d,c,o)})})}function k4(){x_(b_),x_(w_),U4(w_,b_,E4,S4)}k4();function Wm(n,e){let i=e;if(i===ws.Unknown&&(i=n.type()),i===ws.GeometryCollection){let c=[];for(let d=0;d<n.partsLength();d++){let f=n.parts(d),s=f.type();c.push(Wm(f,s))}return{type:ws[i],geometries:c}}if(i===ws.MultiPolygon){let c=[];for(let d=0;d<n.partsLength();d++)c.push(Wm(n.parts(d),ws.Polygon));return{type:ws[i],coordinates:c.map(d=>d.coordinates)}}let o=function(c,d){let f=c.xyArray(),s=c.zArray();switch(d){case ws.Point:{let v=Array.from(f);return s&&v.push(s[0]),v}case ws.MultiPoint:case ws.LineString:return Wg(f,s);case ws.MultiLineString:case ws.Polygon:return function(v,C,P){let M;if(!P||P.length===0)return[Wg(v,C)];let Q=0,E=Array.from(P).map(z=>v.slice(Q,Q=z<<1));return C&&(Q=0,M=Array.from(P).map(z=>C.slice(Q,Q=z))),E.map((z,V)=>Wg(z,M?M[V]:void 0))}(f,s,c.endsArray())}}(n,i);return{type:ws[i],coordinates:o}}function W0(n,e,i){let o=i.columns;return{type:"Feature",id:n,geometry:Wm(e.geometry(),i.geometryType),properties:b4(e,o)}}function Q4(n,e){return{type:"FeatureCollection",features:v4(n,W0)}}function D4(n,e){return w4(n,W0)}function R4(n,e,i,o=!1){return x4(n,e,W0,i,o)}function N4(n,e,i,o=!1){return n instanceof Uint8Array?Q4(n):n instanceof ReadableStream?D4(n):R4(n,e,i,o)}const ko={type:"basemap",opacity:1,visible:!0,preset:"default",hueRotate:0,brightnessMin:0,brightnessMax:1,saturation:0,contrast:0},vu={type:"categorical",opacity:.7,visible:!0,legend:{type:"category",name:"",colors:[""],labels:[""]}},na={type:"dem",opacity:1,visualization:{demType:"gsi",mode:"relief",uniformsData:{relief:{max:4e3,min:0,colorMap:"jet"},slope:{max:90,min:0,colorMap:"salinity"},aspect:{colorMap:"rainbow-soft"}}}},Ao={clickable:!1},cp={type:"circle",opacity:.7,visible:!0,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#ff00ea"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},ev={type:"line",opacity:.7,visible:!0,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#cf42cc"}}]},width:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}}]},lineStyle:"solid",labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},tv={type:"fill",opacity:.7,visible:!0,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},O4=n=>{const e=n.map(i=>({key:i,name:i,value:`{${i}}`}));return{key:n[0],show:!1,expressions:e}},Qf={type:"match",key:"解析樹種",name:"樹種ごとの色分け",mapping:{categories:["スギ","ヒノキ類","マツ類","カラマツ","トドマツ","エゾマツ","その他Ｎ","クヌギ","ナラ類","ブナ","その他L","タケ","針広混交林","新植地","伐採跡地","その他"],values:["#33a02c","#b2df8a","#a6cee3","#1f78b4","#fb9a99","#e31a1c","#fdbf6f","#ffff99","#cab2d6","#6a3d9a","#ff7f00","#b15928","#33a02c","#b2df8a","#a6cee3","#1f78b4"],patterns:[null,null,null,null,null,null,null,null,null,null,null,null,"tmpoly-line-vertical-down-light-200-black","tmpoly-line-vertical-down-light-200-black","tmpoly-line-vertical-down-light-200-black","tmpoly-line-vertical-down-light-200-black"]},noData:{values:"transparent",pattern:null}},Rp=[-180,-85.051128779807,180,85.051128779807],z4=85.051128779807,H4=-85.051128779807,j4=180,V4=-180,UA=[122.933755,24.045713,153.986895,45.556277],Eh=[139.326731,36.199924,140.291983,37.155039],G4=[138.180108,35.168403,139.13438,35.971564],K4=[137.325027,35.198461,138.739196,37.030423],q4=[134.252809,34.156129,135.468591,35.674667],Z4=[132.017257,32.901919,133.692787,34.299619],$4=[138.55255031479942,37.10031545326591,139.24508261732308,37.76892107563275],W4=[{name:"北海道",bbox:[139.334302,41.35211,148.894833,45.556277]},{name:"青森県",bbox:[139.860725,40.218604,141.68324,41.555998]},{name:"岩手県",bbox:[140.653166,38.747651,142.072461,40.449927]},{name:"宮城県",bbox:[140.274764,37.773252,141.675431,39.002776]},{name:"秋田県",bbox:[139.694597,38.874522,140.995425,40.511122]},{name:"山形県",bbox:[139.539712,37.73383,140.646377,39.208476]},{name:"福島県",bbox:[139.164746,36.791324,141.042336,37.976555]},{name:"茨城県",bbox:[139.687691,35.739138,140.851966,36.945225]},{name:"栃木県",bbox:[139.326731,36.199924,140.291983,37.155039]},{name:"群馬県",bbox:[138.397022,35.985419,139.668249,37.058627]},{name:"埼玉県",bbox:[138.711401,35.753442,139.90032,36.281751]},{name:"千葉県",bbox:[139.739525,34.899595,140.870652,36.104157]},{name:"東京都",bbox:[138.942865,24.224731,153.986895,35.898404]},{name:"神奈川県",bbox:[138.915784,35.128768,139.798226,35.675618]},{name:"新潟県",bbox:[137.635121,36.736544,139.900012,38.553524]},{name:"富山県",bbox:[136.768684,36.274308,137.763276,36.979692]},{name:"石川県",bbox:[136.244148,36.067618,137.360649,37.855068]},{name:"福井県",bbox:[135.449342,35.344187,136.832362,36.295361]},{name:"山梨県",bbox:[138.180108,35.168403,139.13438,35.971564]},{name:"長野県",bbox:[137.325027,35.198461,138.739196,37.030423]},{name:"岐阜県",bbox:[136.276225,35.133729,137.651936,36.465031]},{name:"静岡県",bbox:[137.474177,34.594644,139.176371,35.646621]},{name:"愛知県",bbox:[136.671033,34.578195,137.838064,35.424789]},{name:"三重県",bbox:[135.853192,33.722879,136.987749,35.257953]},{name:"滋賀県",bbox:[135.763805,34.79126,136.454846,35.70372]},{name:"京都府",bbox:[134.853727,34.705754,136.054372,35.779277]},{name:"大阪府",bbox:[135.093449,34.271827,135.746596,35.051282]},{name:"兵庫県",bbox:[134.252809,34.156129,135.468591,35.674667]},{name:"奈良県",bbox:[135.539726,33.858956,136.22982,34.781294]},{name:"和歌山県",bbox:[134.999059,33.433595,136.013461,34.38446]},{name:"鳥取県",bbox:[133.136116,35.057691,134.514725,35.614221]},{name:"島根県",bbox:[131.667965,34.302497,133.385926,37.244272]},{name:"岡山県",bbox:[133.266987,34.2984,134.412698,35.352889]},{name:"広島県",bbox:[132.036485,34.034954,133.470397,35.106602]},{name:"山口県",bbox:[130.775059,33.712909,132.492149,34.798657]},{name:"徳島県",bbox:[133.660905,33.539632,134.820436,34.252034]},{name:"香川県",bbox:[133.446605,34.012302,134.440441,34.564615]},{name:"愛媛県",bbox:[132.017257,32.901919,133.692787,34.299619]},{name:"高知県",bbox:[132.479888,32.702505,134.31367,33.882997]},{name:"福岡県",bbox:[130.032703,33.000004,131.190597,34.249456]},{name:"佐賀県",bbox:[129.740621,32.950517,130.542127,33.618923]},{name:"長崎県",bbox:[128.34462,31.988773,130.380232,34.707891]},{name:"熊本県",bbox:[129.963357,32.094995,131.328424,33.195128]},{name:"大分県",bbox:[130.823676,32.714503,132.085332,33.740236]},{name:"宮崎県",bbox:[130.703426,31.360721,131.882746,32.837348]},{name:"鹿児島県",bbox:[128.395452,27.01874,131.205448,32.307013]},{name:"沖縄県",bbox:[122.933755,24.045713,131.332068,27.885401]},{name:"東北地方",bbox:[139.164746,36.791324,142.072461,41.555998]},{name:"岐阜県美濃市",bbox:[136.83845019821013,35.5104054980036,136.97907453990035,35.65244055693736]},{name:"全国",bbox:UA},{name:"世界",bbox:Rp},{name:"森林文化アカデミー",bbox:[136.91278,35.543576,136.92986,35.556704]}];new Map(W4.map(n=>[n.name,n.bbox]));const X4={id:"ehime_ls_standtype",type:"raster",format:{type:"image",url:"https://rinya-ehime.geospatial.jp/tile/rinya/2024/ls_standtype_Ehime/{z}/{x}/{-y}.png"},metaData:{name:"愛媛県 レーザ林相図",attribution:"愛媛県森林資源データ",location:"愛媛県",tags:["森林","林相図","レーザ林相図"],minZoom:8,maxZoom:18,tileSize:256,bounds:Z4,downloadUrl:"https://www.geospatial.jp/ckan/dataset/ls_standtype_ehime",xyzImageTile:{x:227730,y:105126,z:18}},interaction:{...Ao},style:{...ko}},J4=Object.freeze(Object.defineProperty({__proto__:null,default:X4},Symbol.toStringTag,{value:"Module"})),Y4={id:"gbank_seamless",type:"raster",format:{type:"image",url:"https://gbank.gsj.jp/seamless/v2/api/1.3.1/tiles/{z}/{y}/{x}.png"},metaData:{name:"全国地質図",sourceDataName:"20万分の1日本シームレス地質図V2",downloadUrl:"https://gbank.gsj.jp/seamless/v2/api/1.3.1/#tiles",attribution:"産総研地質調査総合センター",tags:["地質図"],location:"全国",minZoom:0,maxZoom:13,tileSize:256,bounds:UA,xyzImageTile:{x:225,y:100,z:8}},interaction:{...Ao},style:{...ko}},e3=Object.freeze(Object.defineProperty({__proto__:null,default:Y4},Symbol.toStringTag,{value:"Module"})),t3={id:"gifu_cs_map",type:"raster",format:{type:"image",url:"https://forestgeo.info/opendata/21_gifu/csmap_2023/{z}/{x}/{y}.webp"},metaData:{name:"岐阜県 CS立体図",attribution:"岐阜県森林研究所",downloadUrl:"https://www.geospatial.jp/ckan/dataset/rinya-gifu-maptiles",location:"岐阜県",tags:["地形","微地形図"],minZoom:8,maxZoom:18,tileSize:256,bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{...Ao},style:{...ko}},r3=Object.freeze(Object.defineProperty({__proto__:null,default:t3},Symbol.toStringTag,{value:"Module"})),n3={id:"gifu_pref",type:"raster",format:{type:"image",url:"https://mapdata.qchizu.xyz/gifu_pref_00/{z}/{x}/{y}.png"},metaData:{name:"岐阜県 基本図",sourceDataName:"岐阜県共有空間データ",attribution:"Q地図タイル",downloadUrl:"https://maps.qchizu.xyz/#9/35.814472/137.059937/&base=std&ls=std%7Cgifu_pref_00&blend=0&disp=11&lcd=gifu_pref_00&vs=c1j0h0k0l0u0t0z0r0s0m0f1&d=m",location:"岐阜県",tags:["基本図"],minZoom:5,maxZoom:18,tileSize:256,bounds:[136.276225,35.133729,137.651936,36.465031]},interaction:{...Ao},style:{...ko}},i3=Object.freeze(Object.defineProperty({__proto__:null,default:n3},Symbol.toStringTag,{value:"Module"})),a3={id:"gsi_pre",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png"},metaData:{name:"地理院淡色地図",attribution:"国土地理院",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#pale",location:"全国",tags:["基本図","背景地図"],minZoom:1,maxZoom:18,tileSize:256,bounds:UA,xyzImageTile:_u.zoom_15},interaction:{...Ao},style:{...ko}},s3=Object.freeze(Object.defineProperty({__proto__:null,default:a3},Symbol.toStringTag,{value:"Module"})),o3={id:"gsi_seamlessphoto",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg"},metaData:{name:"全国航空写真",sourceDataName:"全国最新写真",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#seamlessphoto",attribution:"国土地理院",location:"全国",tags:["写真"],minZoom:1,maxZoom:18,tileSize:256,xyzImageTile:_u.zoom_15,bounds:UA},interaction:{...Ao},style:{...ko}},A3=Object.freeze(Object.defineProperty({__proto__:null,default:o3},Symbol.toStringTag,{value:"Module"})),l3={id:"gsi_std",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png"},metaData:{name:"地理院標準地図",attribution:"国土地理院",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#std",location:"全国",tags:["基本図","背景地図"],minZoom:1,maxZoom:18,tileSize:256,bounds:UA,xyzImageTile:_u.zoom_15},interaction:{...Ao},style:{...ko}},c3=Object.freeze(Object.defineProperty({__proto__:null,default:l3},Symbol.toStringTag,{value:"Module"})),u3={id:"nagano_cs",type:"raster",format:{type:"image",url:"https://tile.geospatial.jp/CS/VER2/{z}/{x}/{y}.png"},metaData:{name:"長野県 CS立体図",attribution:"長野県林業総合センター",location:"長野県",minZoom:8,maxZoom:18,tileSize:256,tags:["微地形図","地形"],bounds:K4,downloadUrl:"https://www.geospatial.jp/ckan/dataset/nagano-csmap",xyzImageTile:{x:28950,y:12852,z:15}},interaction:{...Ao},style:{...ko}},h3=Object.freeze(Object.defineProperty({__proto__:null,default:u3},Symbol.toStringTag,{value:"Module"})),f3={id:"osm",type:"raster",format:{type:"image",url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"},metaData:{name:"OpenStreetMap",attribution:"OSM",location:"世界",minZoom:0,maxZoom:22,tileSize:256,tags:["背景地図"],bounds:Rp},interaction:{...Ao},style:{...ko}},d3=Object.freeze(Object.defineProperty({__proto__:null,default:f3},Symbol.toStringTag,{value:"Module"})),p3={id:"soilmap_nfs",type:"raster",format:{type:"image",url:"https://www2.ffpri.go.jp/soilmap/tile/nfs/{z}/{x}/{y}.png"},metaData:{name:"国有林 林野土壌図",attribution:"森林総合研究所",tags:["土壌図","国有林"],downloadUrl:"https://www2.ffpri.go.jp/soilmap/data-src2.html",location:"全国",minZoom:1,maxZoom:16,tileSize:256,bounds:UA,xyzImageTile:{x:14447,y:6447,z:14}},interaction:{...Ao},style:{...ko}},g3=Object.freeze(Object.defineProperty({__proto__:null,default:p3},Symbol.toStringTag,{value:"Module"})),m3={id:"tochigi_cs",type:"raster",format:{type:"image",url:"https://rinya-tochigi.geospatial.jp/2023/rinya/tile/csmap/{z}/{x}/{y}.png"},metaData:{name:"栃木県 CS立体図",attribution:"栃木県森林資源データ",location:"栃木県",minZoom:8,maxZoom:18,tileSize:256,tags:["地形","微地形図"],bounds:Eh,downloadUrl:"https://www.geospatial.jp/ckan/dataset/csmap_tochigi",xyzImageTile:{x:3635,y:1597,z:12}},interaction:{...Ao},style:{...ko}},y3=Object.freeze(Object.defineProperty({__proto__:null,default:m3},Symbol.toStringTag,{value:"Module"})),_3={id:"tochigi_ls_standtype",type:"raster",format:{type:"image",url:"https://rinya-tochigi.geospatial.jp/2023/rinya/tile/ls_standtype/{z}/{x}/{y}.png"},metaData:{name:"栃木県 レーザ林相図",attribution:"栃木県森林資源データ",location:"栃木県",minZoom:8,maxZoom:18,tileSize:256,tags:["森林","林相図","レーザ林相図"],bounds:Eh,downloadUrl:"https://www.geospatial.jp/ckan/dataset/ls_standtype_tochigi",xyzImageTile:{x:3635,y:1597,z:12}},interaction:{...Ao},style:{...ko}},b3=Object.freeze(Object.defineProperty({__proto__:null,default:_3},Symbol.toStringTag,{value:"Module"})),v3={id:"ecoris_sugihinoki",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/sugihinoki/{z}/{x}/{y}.png"},metaData:{name:"スギ・ヒノキ・サワラ植林分布図",sourceDataName:"スギ・ヒノキ・サワラ植林（自然環境保全基礎調査 植生調査結果GISデータ）",attribution:"エコリス地図タイル",tags:["植生図"],location:"全国",minZoom:5,maxZoom:15,tileSize:256,bounds:UA,downloadUrl:"https://map.ecoris.info/#contents",xyzImageTile:{x:450,y:201,z:9}},interaction:{clickable:!0},style:{...vu,legend:{type:"category",name:"",colors:["#FD4202","#B7FFFF","#FFFFFF"],labels:["スギ・ヒノキ・サワラ植林地","水域","その他"]}}},w3=Object.freeze(Object.defineProperty({__proto__:null,default:v3},Symbol.toStringTag,{value:"Module"})),x3={id:"ecoris_tanbo",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/tanbo/{z}/{x}/{y}.png"},metaData:{name:"田んぼ分布図",sourceDataName:"田んぼ（自然環境保全基礎調査 植生調査結果GISデータ）",attribution:"エコリス地図タイル",location:"全国",minZoom:5,maxZoom:15,tileSize:256,tags:["田んぼ"],bounds:UA,downloadUrl:"https://map.ecoris.info/#contents",xyzImageTile:{x:3605,y:1615,z:12}},interaction:{clickable:!0},style:{...vu,legend:{type:"category",name:"",colors:["#02FF02"],labels:["水田雑草群落"]}}},B3=Object.freeze(Object.defineProperty({__proto__:null,default:x3},Symbol.toStringTag,{value:"Module"})),C3={id:"ecoris_vege_6",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/vege67/{z}/{x}/{y}.png"},metaData:{name:"全国植生図",sourceDataName:"第6～7回 自然環境保全基礎調査 植生調査結果GISデータ",attribution:"エコリス地図タイル",downloadUrl:"https://map.ecoris.info/#contents",location:"全国",minZoom:5,maxZoom:15,tileSize:256,tags:["植生図"],bounds:UA,xyzImageTile:{x:7211,y:3229,z:13}},interaction:{...Ao},style:{...vu,legend:{type:"category",name:"植生",colors:["#fdf1ce","#997f60","#a58f74","#178017","#5b9700","#003300","#004a00","#ffff00","#697720","#8cd27d","#868585","#99ffff","#cccc20","#69ff00","#999662"],labels:["高山帯自然植生","コケモモートウヒクラス域自然植生","コケモモートウヒクラス域代償植生","ブナクラス域自然植生","ブナクラス域代償植生","ヤブツバキクラス域自然植生","ヤブツバキクラス域代償植生","河川・湿原・沼沢地・砂丘植生","植林地","耕作地","市街地","開放水域","竹林","牧草地・ゴルフ場・芝地","水田以外の耕作地"]}}},I3=Object.freeze(Object.defineProperty({__proto__:null,default:C3},Symbol.toStringTag,{value:"Module"})),F3={id:"gifu_slope_map",type:"raster",format:{type:"image",url:"https://tiles.arcgis.com/tiles/jJQWqgqiNhLLjkin/arcgis/rest/services/Gifu_2021Slpoe_2022_07_25_15_54/MapServer/tile/{z}/{y}/{x}"},metaData:{name:"岐阜県 傾斜区分図",downloadUrl:"https://www.forest.rd.pref.gifu.lg.jp/shiyou/sinrinwebmap.html",attribution:"岐阜県森林研究所",location:"岐阜県",tags:["傾斜区分図","地形"],minZoom:1,maxZoom:18,tileSize:256,bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{clickable:!0},style:{...vu,legend:{type:"category",name:"傾斜",colors:["#FFFFFF","#A2E0CB","#268F1E","#95E537","#E7E539","#E35CC2","#CC000D","#8F086A"],labels:["0 - 10度","10.1 - 15度","15.1 - 20度","20.1 - 25度","25.1 - 30度","30.1 - 35度","35.1 - 40度","40.1度以上"]}}},E3=Object.freeze(Object.defineProperty({__proto__:null,default:F3},Symbol.toStringTag,{value:"Module"})),S3={id:"gsi_slopemap",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png"},metaData:{name:"全国傾斜量図",attribution:"国土地理院",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#slopemap",location:"全国",tags:["傾斜量図","地形"],minZoom:3,maxZoom:15,tileSize:256,bounds:UA},interaction:{clickable:!0},style:{...vu,legend:{type:"gradient",name:"傾斜",colors:["#FFFFFF","#000000"],range:[0,90],unit:"度"}}},T3=Object.freeze(Object.defineProperty({__proto__:null,default:S3},Symbol.toStringTag,{value:"Module"})),si=Y5+"/landslide",L3={id:"landslide",type:"raster",format:{type:"image",url:"https://www.j-shis.bosai.go.jp/map/xyz/landslide/{z}/{x}/{y}.png"},metaData:{name:"地すべり地形分布",attribution:"防災科学技術研究所",location:"全国",tags:["地すべり","地形"],minZoom:5,maxZoom:15,tileSize:256,bounds:UA,xyzImageTile:{z:13,x:7262,y:3214},downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#landslide"},interaction:{clickable:!1},style:{type:"categorical",opacity:.7,legend:{type:"image",categories:[{name:"輪郭構造 滑落産と側方産",urls:[`${si}/0.webp`,`${si}/1.webp`,`${si}/2.webp`,`${si}/3.webp`,`${si}/4.webp`,`${si}/5.webp`,`${si}/6.webp`,`${si}/7.webp`],labels:["新鮮なまたは開析されていない冠頂をもつ滑落崖","部分的に開析されている冠頂をもつ滑落崖","冠頂が著しく開析された滑落崖","冠頂が丸味をおびて不明瞭になった滑落崖","開析されて無くなってしまった冠頂・滑落崖の推定復元位置","共通の冠頂をもち、互いに反対方向を向く滑落崖","中・緩斜の流れすべり面が地表に露出し、滑落崖にあたる急崖を呈しない斜面。冠頂は尾根の反対側斜面とすべり面との交線","後方崖、多重稜線等"]},{name:"輪郭構造 移動体の輪郭・境界",urls:[`${si}/8.webp`,`${si}/9.webp`,`${si}/10.webp`,`${si}/11.webp`,`${si}/12.webp`,`${si}/13.webp`],labels:["後方に滑落崖があり、移動体の輪郭が明瞭ないし判定可能","後方の滑落崖は明瞭であるが、移動体の輪郭の判定が困難","滑落崖はほとんど開析されてしまったが、過去の移動体の一部（不安定土塊）が残存している","ほかの移動体や堆積物におおわれた部分","斜面体の移動の初期状態、基岩から分離していないとしても不安定域・移動域と推定される範囲","斜面移動体かどうか判定できない山体・小丘"]},{name:"内部構造",urls:[`${si}/14.webp`,`${si}/15.webp`,`${si}/16.webp`,`${si}/17.webp`,`${si}/18.webp`,`${si}/19.webp`,`${si}/20.webp`],labels:["二次・小滑落崖、崖線の解析程度に応じて輪郭構造の場合と同様に表わす","サブユニットの境界、内部（二次）移動体輪郭","移動体内の小尾根","幅の広い溝状凹地、亀裂","幅の狭い溝状凹地、亀裂","雁行亀裂","線状窪地・小谷底線"]},{name:"移動体の主移動方向",urls:[`${si}/21.webp`,`${si}/22.webp`,`${si}/23.webp`,`${si}/24.webp`,`${si}/25.webp`,`${si}/26.webp`],labels:["すべり","クリープ（匍行）","流れ・押出し","落石","前方への傾動または傾動を伴う移動とその方向","元の斜面傾斜と逆方向へ傾動した斜面の傾斜方向"]}]}}},P3=Object.freeze(Object.defineProperty({__proto__:null,default:L3},Symbol.toStringTag,{value:"Module"})),M3={id:"",type:"raster",format:{type:"image",url:"https://rinya-tochigi.geospatial.jp/2023/rinya/tile/slopemap/{z}/{x}/{y}.png"},metaData:{name:"栃木県 傾斜区分図",attribution:"栃木県森林資源データ",location:"栃木県",tags:["傾斜区分図"],minZoom:8,maxZoom:15,tileSize:256,bounds:Eh,downloadUrl:"https://www.geospatial.jp/ckan/dataset/slopemap_tochigi",xyzImageTile:{x:3635,y:1597,z:12}},interaction:{clickable:!0},style:{...vu,legend:{type:"category",name:"傾斜",colors:["#0000FE","#56FE01","#FFFF00","#FE0000"],labels:["0 - 15度","15.1 - 30度","30.1 - 35度","35.1度以上"]}}},U3=Object.freeze(Object.defineProperty({__proto__:null,default:M3},Symbol.toStringTag,{value:"Module"})),k3={id:"dchm_niigata_nagaoka",type:"raster",format:{type:"image",url:"https://forestgeo.info/opendata/15_niigata/nagaoka/dchm_2024/{z}/{x}/{y}.png"},metaData:{name:"長岡市 数値樹冠高データ",sourceDataName:"林野庁・数値樹冠高モデルDCHM0.5m（長岡地域2024）",downloadUrl:"https://www.geospatial.jp/ckan/dataset/rinya-dchm-nagaoka2024",attribution:"林野庁",tags:["森林","DCHM","樹冠高","0.5m解像度"],location:"新潟県",minZoom:8,maxZoom:18,tileSize:256,xyzImageTile:{x:116178,y:50794,z:17},bounds:$4},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"gsi",uniformsData:{...na.visualization.uniformsData,relief:{max:45,min:0,colorMap:"jet"}}}}},Q3=Object.freeze(Object.defineProperty({__proto__:null,default:k3},Symbol.toStringTag,{value:"Module"})),D3={id:"dem_10b",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png"},metaData:{name:"全国数値標高データ",sourceDataName:"基盤地図情報数値標高モデル DEM10B",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#dem",attribution:"国土地理院",tags:["DEM","地形","10m解像度"],location:"全国",minZoom:1,maxZoom:14,tileSize:256,bounds:[122.935,20.425,153.986,45.551],xyzImageTile:_u.zoom_7},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"gsi"}}},R3=Object.freeze(Object.defineProperty({__proto__:null,default:D3},Symbol.toStringTag,{value:"Module"})),N3={id:"dem_5a",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/dem5a_png/{z}/{x}/{y}.png"},metaData:{name:"全国数値標高データ",sourceDataName:"基盤地図情報数値標高モデル DEM5A",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#dem",attribution:"国土地理院",tags:["DEM","地形","5m解像度"],location:"全国",minZoom:1,maxZoom:15,tileSize:256,bounds:[122.935,20.425,153.986,45.551],xyzImageTile:_u.zoom_7},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"gsi"}}},O3=Object.freeze(Object.defineProperty({__proto__:null,default:N3},Symbol.toStringTag,{value:"Module"})),z3={id:"tochigi_dem",type:"raster",format:{type:"image",url:"https://tiles.gsj.jp/tiles/elev/tochigi/{z}/{y}/{x}.png"},metaData:{name:"栃木県 数値標高データ",downloadUrl:"https://www.geospatial.jp/ckan/dataset/dem05_tochigi",attribution:"栃木県森林資源データ",location:"栃木県",tags:["DEM","地形","0.5m解像度"],minZoom:2,maxZoom:18,tileSize:256,xyzImageTile:{x:3635,y:1597,z:12},bounds:Eh},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"gsi",uniformsData:{...na.visualization.uniformsData,relief:{max:2600,min:0,colorMap:"jet"}}}}},H3=Object.freeze(Object.defineProperty({__proto__:null,default:z3},Symbol.toStringTag,{value:"Module"})),j3={id:"dem_tokyo",type:"raster",format:{type:"image",url:"https://tiles.gsj.jp/tiles/elev/tokyo/{z}/{y}/{x}.png"},metaData:{name:"東京都 数値標高データ",downloadUrl:"https://tiles.gsj.jp/tiles/elev/tiles.html#h_tokyo",attribution:"産総研シームレス標高タイル",tags:["DEM","地形","0.25m解像度"],location:"東京都",minZoom:2,maxZoom:19,tileSize:256,bounds:[138.942922,32.440258,139.861054,35.898368],xyzImageTile:{x:3631,y:1612,z:12}},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"gsi"}}},V3=Object.freeze(Object.defineProperty({__proto__:null,default:j3},Symbol.toStringTag,{value:"Module"})),G3={id:"dem_yamanashi",type:"raster",format:{type:"image",url:"https://forestgeo.info/opendata/19_yamanashi/dem_terrainRGB_2024/{z}/{x}/{y}.png"},metaData:{name:"山梨県 数値標高データ",sourceDataName:"山梨県数値標高モデル",downloadUrl:"https://www.geospatial.jp/ckan/dataset/rinya-yamanashi-maptiles",attribution:"林野庁",location:"山梨県",tags:["DEM","地形","0.5m解像度"],minZoom:8,maxZoom:18,tileSize:256,bounds:G4,xyzImageTile:{x:14486,y:6449,z:14}},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"mapbox"}}},K3=Object.freeze(Object.defineProperty({__proto__:null,default:G3},Symbol.toStringTag,{value:"Module"})),q3={id:"gifu_sugi_kansetugai",type:"raster",format:{type:"pmtiles",url:`${D0}/gifu_sugi_kansetugai.pmtiles`},metaData:{name:"スギ人工林冠雪害危険度",sourceDataName:"岐阜県スギ人工林冠雪害危険度マップ",description:"岐阜県森林研究所が提供する「岐阜県スギ人工林冠雪害危険度マップ」をPMtiles形式に加工したもの",downloadUrl:"https://www.forest.rd.pref.gifu.lg.jp/shiyou/kansetsugaimap.html",attribution:"岐阜県森林研究所",tags:["森林"],location:"岐阜県",minZoom:6,maxZoom:10,tileSize:512,xyzImageTile:{x:901,y:403,z:10},bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{clickable:!0},style:{...vu,legend:{type:"category",name:"20冬期中の危険日判定数",colors:["#FFFFFF","#FEFEA5","#FDCDFD","#FFBE31","#FC0013","#6F359C","#003796"],labels:["0日","1~2日","3~5日","6~10日","11〜15日","16~20日","21日以上"]}}},Z3=Object.freeze(Object.defineProperty({__proto__:null,default:q3},Symbol.toStringTag,{value:"Module"})),$3={id:"ensyurin_curvatoure",type:"raster",format:{type:"pmtiles",url:`${D0}/ensyurin_curvature.pmtiles`},metaData:{name:"演習林 数値曲率データ",description:"森林文化アカデミー演習林の地形の曲率を数値化したもの",attribution:"森林文化アカデミー",location:"森林文化アカデミー",tags:["微地形図","地形"],minZoom:14,maxZoom:16,tileSize:256,xyzImageTile:_u.zoom_16,bounds:[136.91683974376355,35.540611389073774,136.9346116207808,35.55838201305548]},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"terrarium",mode:"relief",uniformsData:{relief:{...na.visualization.uniformsData.relief,max:5.3,min:-4.3,colorMap:"rdbu"}}}}},W3=Object.freeze(Object.defineProperty({__proto__:null,default:$3},Symbol.toStringTag,{value:"Module"})),X3={id:"ensyurin_dem",type:"raster",format:{type:"pmtiles",url:`${D0}/ensyurin_dem.pmtiles`},metaData:{name:"演習林 数値標高データ",description:"森林文化アカデミー演習林の地形の標高値を数値化したもの",attribution:"森林文化アカデミー",location:"森林文化アカデミー",tags:["DEM","地形"],minZoom:14,maxZoom:16,tileSize:256,xyzImageTile:_u.zoom_16,bounds:[136.91683974376355,35.540611389073774,136.9346116207808,35.55838201305548]},interaction:{clickable:!0},style:{...na,visualization:{...na.visualization,demType:"terrarium",mode:"relief",uniformsData:{...na.visualization.uniformsData,relief:{...na.visualization.uniformsData.relief,max:424,min:80}}}}},J3=Object.freeze(Object.defineProperty({__proto__:null,default:X3},Symbol.toStringTag,{value:"Module"})),Y3={id:"ensyurin_kikenboku_h25",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Pp}/ensyurin_kikenboku_h25.fgb`},metaData:{name:"演習林 危険木調査2013年度",description:"",attribution:"森林文化アカデミー",location:"森林文化アカデミー",minZoom:10,maxZoom:22,tags:["森林","単木"],bounds:[136.919727,35.547376,136.92669,35.554887],coverImage:`${bu}/ensyurin_kikenboku_h25.webp`},properties:{keys:["樹種","状態"],titles:[{conditions:[],template:"{樹種} {状態}"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#ff0000"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}}},eC=Object.freeze(Object.defineProperty({__proto__:null,default:Y3},Symbol.toStringTag,{value:"Module"})),tC={id:"ensyurin_owl",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Pp}/ensyurin_owl.fgb`},metaData:{name:"OWL利用研修立木計測データ",description:"林業専攻-OWL利用研修立木計測データ",attribution:"株式会社アドイン研究所",location:"森林文化アカデミー",minZoom:10,maxZoom:22,tags:["森林","単木"],bounds:[136.920923,35.548695,136.921198,35.548997],coverImage:`${bu}/owl.webp`},properties:{keys:["樹種"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"OWL利用研修立木計測データ"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"樹高m",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#e70000"}},{type:"step",key:"樹高m",name:"樹高の範囲による色分け",mapping:{range:[4,20],divisions:6,values:["#dcd69c","#e20000"]}}]},radius:{key:"胸高直径cm",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}},{type:"linear",key:"胸高直径cm",name:"胸高直径",mapping:{range:[7,42.5],values:[5,10]}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"胸高直径cm",show:!1,expressions:[{key:"胸高直径cm",name:"胸高直径cm",value:"{胸高直径cm}"}]},default:{circle:{paint:{},layout:{}}}}},rC=Object.freeze(Object.defineProperty({__proto__:null,default:tC},Symbol.toStringTag,{value:"Module"})),nC={id:"ensyurin_pole",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Pp}/ensyurin_pole.fgb`},metaData:{name:"サインポール",description:"演習林内のサインポール",attribution:"森林文化アカデミー",location:"森林文化アカデミー",tags:["看板"],maxZoom:17,minZoom:1,bounds:[136.919359,35.549761,136.926759,35.557836],coverImage:`${eB}/pole_3.webp`},properties:{keys:["name"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"サインポール"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#e70000"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"ポールの名前",value:"{name}"}]}}},iC=Object.freeze(Object.defineProperty({__proto__:null,default:nC},Symbol.toStringTag,{value:"Module"})),aC={id:"fac_sisetuannaitou",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Pp}/fac_sisetuannaitou.fgb`},metaData:{name:"施設案内棟",description:"施設案内棟",attribution:"森林文化アカデミー",location:"森林文化アカデミー",minZoom:10,maxZoom:22,tags:["看板"],bounds:[136.917205,35.553612,136.919391,35.556191],coverImage:`${bu}/fac_sisetuannaitou.webp`},properties:{keys:[],titles:[{conditions:[],template:"施設案内棟"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#834f00"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}}},sC=Object.freeze(Object.defineProperty({__proto__:null,default:aC},Symbol.toStringTag,{value:"Module"})),oC={id:"hyogo_fr_mesh20m",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-hyogo.geospatial.jp/2023/rinya/tile/fr_mesh20m/{z}/{x}/{y}.pbf"},metaData:{name:"兵庫県 森林資源量集計メッシュ",attribution:"兵庫県森林資源データ",downloadUrl:"https://www.geospatial.jp/ckan/dataset/fr_mesh20m_hyogo",location:"兵庫県",tags:["森林","メッシュ"],minZoom:13,maxZoom:16,sourceLayer:"fr_mesh20m_hyogo",bounds:[134.252809,34.156129,135.468591,35.674667],xyzImageTile:{x:57274,y:25978,z:16},center:[134.651168,34.897842]},properties:{keys:["解析樹種ID","解析樹種","樹種ID","樹種","面積_ha","立木本数","立木密度","平均樹高","平均直径","合計材積","ha材積","収量比数","相対幹距比","形状比","樹冠長率","森林計測年","森林計測法","平均傾斜","最大傾斜","最小傾斜","最頻傾斜","県code","市町村code","ID","樹冠高90","最大樹冠高"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"兵庫県の森林資源メッシュ"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.7,colors:{key:"最大樹冠高",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}},{...Qf},{type:"step",key:"最大樹冠高",name:"最大樹冠高による色分け",mapping:{range:[1,50],divisions:5,values:["#e6f2ff","#ff00dd"]}}]},outline:{show:!0,color:"#000000",width:.1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"解析樹種ID",name:"解析樹種ID",value:"{解析樹種ID}"},{key:"解析樹種",name:"解析樹種",value:"{解析樹種}"},{key:"樹種ID",name:"樹種ID",value:"{樹種ID}"},{key:"樹種",name:"樹種",value:"{樹種}"},{key:"面積_ha",name:"面積_ha",value:"{面積_ha}"},{key:"立木本数",name:"立木本数",value:"{立木本数}"},{key:"立木密度",name:"立木密度",value:"{立木密度}"},{key:"平均樹高",name:"平均樹高",value:"{平均樹高}"},{key:"平均直径",name:"平均直径",value:"{平均直径}"},{key:"合計材積",name:"合計材積",value:"{合計材積}"},{key:"ha材積",name:"ha材積",value:"{ha材積}"},{key:"収量比数",name:"収量比数",value:"{収量比数}"},{key:"相対幹距比",name:"相対幹距比",value:"{相対幹距比}"},{key:"形状比",name:"形状比",value:"{形状比}"},{key:"樹冠長率",name:"樹冠長率",value:"{樹冠長率}"},{key:"森林計測年",name:"森林計測年",value:"{森林計測年}"},{key:"森林計測法",name:"森林計測法",value:"{森林計測法}"},{key:"平均傾斜",name:"平均傾斜",value:"{平均傾斜}"},{key:"最大傾斜",name:"最大傾斜",value:"{最大傾斜}"},{key:"最小傾斜",name:"最小傾斜",value:"{最小傾斜}"},{key:"最頻傾斜",name:"最頻傾斜",value:"{最頻傾斜}"},{key:"県code",name:"県code",value:"{県code}"},{key:"市町村code",name:"市町村code",value:"{市町村code}"},{key:"ID",name:"ID",value:"{ID}"},{key:"樹冠高90",name:"樹冠高90",value:"{樹冠高90}"},{key:"最大樹冠高",name:"最大樹冠高",value:"{最大樹冠高}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-anchor":"center","text-padding":10}}}}},AC=Object.freeze(Object.defineProperty({__proto__:null,default:oC},Symbol.toStringTag,{value:"Module"})),lC={id:"hyogo_tree_species",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-hyogo.geospatial.jp/2023/rinya/tile/tree_species/{z}/{x}/{y}.pbf"},metaData:{name:"兵庫県 樹種ポリゴン",attribution:"兵庫県森林資源データ",downloadUrl:"https://www.geospatial.jp/ckan/dataset/tree_species_hyogo",location:"兵庫県",tags:["森林","林相図"],minZoom:8,maxZoom:18,sourceLayer:"tree_species_hyogo",bounds:q4,xyzImageTile:{x:14326,y:6487,z:14},center:[134.848807,35.043807]},properties:{keys:["解析樹種ID","解析樹種","樹種ID","樹種","面積_ha","森林計測年","森林計測法","県code","市町村code","ID","樹冠高90","最大樹冠高","平均傾斜","最大傾斜","旧市町村名"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"兵庫県の樹種ポリゴン"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"解析樹種",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c",pattern:null}},{...Qf},{type:"step",key:"面積_ha",name:"面積ごとの色分け",mapping:{range:[0,200],divisions:5,values:["#e0f7fa","#ed006e"]}}]},outline:{show:!1,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"解析樹種ID",name:"解析樹種ID",value:"{解析樹種ID}"},{key:"解析樹種",name:"解析樹種",value:"{解析樹種}"},{key:"樹種ID",name:"樹種ID",value:"{樹種ID}"},{key:"樹種",name:"樹種",value:"{樹種}"},{key:"面積_ha",name:"面積_ha",value:"{面積_ha}"},{key:"森林計測年",name:"森林計測年",value:"{森林計測年}"},{key:"森林計測法",name:"森林計測法",value:"{森林計測法}"},{key:"県code",name:"県code",value:"{県code}"},{key:"市町村code",name:"市町村code",value:"{市町村code}"},{key:"ID",name:"ID",value:"{ID}"},{key:"樹冠高90",name:"樹冠高90",value:"{樹冠高90}"},{key:"最大樹冠高",name:"最大樹冠高",value:"{最大樹冠高}"},{key:"平均傾斜",name:"平均傾斜",value:"{平均傾斜}"},{key:"最大傾斜",name:"最大傾斜",value:"{最大傾斜}"},{key:"旧市町村名",name:"旧市町村名",value:"{旧市町村名}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-max-width":12,"text-size":12,"text-padding":10}}}}},cC=Object.freeze(Object.defineProperty({__proto__:null,default:lC},Symbol.toStringTag,{value:"Module"})),uC={id:"kochi_fr_mesh20m",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-kochi.geospatial.jp/2023/rinya/tile/fr_mesh20m/{z}/{x}/{y}.pbf"},metaData:{name:"高知県 森林資源量集計メッシュ",attribution:"高知県森林資源データ",downloadUrl:"https://www.geospatial.jp/ckan/dataset/fr_mesh20m_kochi",location:"高知県",tags:["森林","メッシュ"],minZoom:13,maxZoom:16,sourceLayer:"fr_mesh20m_kochi",bounds:[132.479888,32.702505,134.31367,33.882997],xyzImageTile:{x:57075,y:26263,z:16},center:[133.49424,33.636878]},properties:{keys:["解析樹種ID","解析樹種","樹種ID","樹種","面積_ha","立木本数","立木密度","平均樹高","平均直径","合計材積","ha材積","収量比数","相対幹距比","形状比","樹冠長率","森林計測年","森林計測法","平均傾斜","最大傾斜","最小傾斜","最頻傾斜","県code","市町村code"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"高知県の森林資源メッシュ"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.7,colors:{key:"解析樹種",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}},{...Qf},{type:"step",key:"立木本数",name:"立木本数による色分け",mapping:{range:[1,100],divisions:5,values:["#e6f2ff","#ff00dd"]}}]},outline:{show:!0,color:"#5f5f5f",width:.5,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"解析樹種ID",name:"解析樹種ID",value:"{解析樹種ID}"},{key:"解析樹種",name:"解析樹種",value:"{解析樹種}"},{key:"樹種ID",name:"樹種ID",value:"{樹種ID}"},{key:"樹種",name:"樹種",value:"{樹種}"},{key:"面積_ha",name:"面積_ha",value:"{面積_ha}"},{key:"立木本数",name:"立木本数",value:"{立木本数}"},{key:"立木密度",name:"立木密度",value:"{立木密度}"},{key:"平均樹高",name:"平均樹高",value:"{平均樹高}"},{key:"平均直径",name:"平均直径",value:"{平均直径}"},{key:"合計材積",name:"合計材積",value:"{合計材積}"},{key:"ha材積",name:"ha材積",value:"{ha材積}"},{key:"収量比数",name:"収量比数",value:"{収量比数}"},{key:"相対幹距比",name:"相対幹距比",value:"{相対幹距比}"},{key:"形状比",name:"形状比",value:"{形状比}"},{key:"樹冠長率",name:"樹冠長率",value:"{樹冠長率}"},{key:"森林計測年",name:"森林計測年",value:"{森林計測年}"},{key:"森林計測法",name:"森林計測法",value:"{森林計測法}"},{key:"平均傾斜",name:"平均傾斜",value:"{平均傾斜}"},{key:"最大傾斜",name:"最大傾斜",value:"{最大傾斜}"},{key:"最小傾斜",name:"最小傾斜",value:"{最小傾斜}"},{key:"最頻傾斜",name:"最頻傾斜",value:"{最頻傾斜}"},{key:"県code",name:"県code",value:"{県code}"},{key:"市町村code",name:"市町村code",value:"{市町村code}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}}}}},hC=Object.freeze(Object.defineProperty({__proto__:null,default:uC},Symbol.toStringTag,{value:"Module"})),fC={id:"tochigi_fr_mesh20m",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-tochigi.geospatial.jp/2023/rinya/tile/fr_mesh20m/{z}/{x}/{y}.pbf"},metaData:{name:"栃木県 森林資源量集計メッシュ",attribution:"栃木県森林資源データ",downloadUrl:"https://www.geospatial.jp/ckan/dataset/fr_mesh20m_tochigi",location:"栃木県",tags:["森林","メッシュ"],minZoom:13,maxZoom:16,sourceLayer:"fr_mesh20m_tochigi",bounds:Eh,xyzImageTile:{x:58222,y:25571,z:16},center:[139.833104,36.723743]},properties:{keys:["解析樹種ID","解析樹種","樹種ID","樹種","面積_ha","森林計測年","森林計測法","平均傾斜","最大傾斜","最小傾斜","最頻傾斜","県code","市町村code","メッシュID","平均標高","道から距離","Shape_Length","Shape_Area"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"栃木県の森林資源メッシュ"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.7,colors:{key:"解析樹種",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c",pattern:null}},{...Qf}]},outline:{show:!0,color:"#000000",width:.1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"解析樹種ID",name:"解析樹種ID",value:"{解析樹種ID}"},{key:"解析樹種",name:"解析樹種",value:"{解析樹種}"},{key:"樹種ID",name:"樹種ID",value:"{樹種ID}"},{key:"樹種",name:"樹種",value:"{樹種}"},{key:"面積_ha",name:"面積_ha",value:"{面積_ha}"},{key:"森林計測年",name:"森林計測年",value:"{森林計測年}"},{key:"森林計測法",name:"森林計測法",value:"{森林計測法}"},{key:"平均傾斜",name:"平均傾斜",value:"{平均傾斜}"},{key:"最大傾斜",name:"最大傾斜",value:"{最大傾斜}"},{key:"最小傾斜",name:"最小傾斜",value:"{最小傾斜}"},{key:"最頻傾斜",name:"最頻傾斜",value:"{最頻傾斜}"},{key:"県code",name:"県code",value:"{県code}"},{key:"市町村code",name:"市町村code",value:"{市町村code}"},{key:"メッシュID",name:"メッシュID",value:"{メッシュID}"},{key:"平均標高",name:"平均標高",value:"{平均標高}"},{key:"道から距離",name:"道から距離",value:"{道から距離}"},{key:"Shape_Length",name:"Shape_Length",value:"{Shape_Length}"},{key:"Shape_Area",name:"Shape_Area",value:"{Shape_Area}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-anchor":"center","text-padding":10}}}}},dC=Object.freeze(Object.defineProperty({__proto__:null,default:fC},Symbol.toStringTag,{value:"Module"})),pC={id:"tochigi_tree_species",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-tochigi.geospatial.jp/2023/rinya/tile/tree_species/{z}/{x}/{y}.pbf"},metaData:{name:"栃木県 樹種ポリゴン",attribution:"栃木県森林資源データ",downloadUrl:"https://www.geospatial.jp/ckan/dataset/tree_species_tochigi",location:"栃木県",tags:["森林","林相図"],minZoom:8,maxZoom:18,sourceLayer:"tree_species_tochigi",bounds:Eh,xyzImageTile:{x:29096,y:12791,z:15}},properties:{keys:["解析樹種ID","解析樹種","樹種ID","樹種","面積_ha","森林計測年","森林計測法","県code","市町村code","年度"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"栃木県の樹種ポリゴン"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"解析樹種",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c",pattern:null}},{...Qf},{type:"step",key:"面積_ha",name:"面積ごとの色分け",mapping:{range:[0,200],divisions:5,values:["#e0f7fa","#ed006e"]}}]},outline:{show:!1,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"},{key:"解析樹種ID",name:"解析樹種ID",value:"{解析樹種ID}"},{key:"解析樹種",name:"解析樹種",value:"{解析樹種}"},{key:"樹種ID",name:"樹種ID",value:"{樹種ID}"},{key:"面積_ha",name:"面積_ha",value:"{面積_ha}ha"},{key:"森林計測年",name:"森林計測年",value:"{森林計測年}"},{key:"森林計測法",name:"森林計測法",value:"{森林計測法}"},{key:"県code",name:"県code",value:"{県code}"},{key:"市町村code",name:"市町村code",value:"{市町村code}"},{key:"年度",name:"年度",value:"{年度}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-max-width":12,"text-size":12,"text-padding":10}}}}},gC=Object.freeze(Object.defineProperty({__proto__:null,default:pC},Symbol.toStringTag,{value:"Module"})),mC={id:"ensyurin_road",type:"vector",format:{type:"pmtiles",geometryType:"LineString",url:`${Ih}/ensyurin.pmtiles`},metaData:{name:"演習林の道",description:"演習林",attribution:"森林文化アカデミー",location:"森林文化アカデミー",tags:["森林歩道"],maxZoom:17,minZoom:8,sourceLayer:"ensyurin_roadfgb",bounds:[136.919335,35.546981,136.92684,35.555131],coverImage:`${bu}/ensyurin_road.webp`,xyzImageTile:{x:115387,y:51670,z:17}},properties:{keys:["種類"],titles:[]},interaction:{clickable:!0},style:{type:"line",opacity:.7,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#cacaca"}},{type:"match",key:"種類",name:"歩道と林道",mapping:{categories:["林道","歩道"],values:["#ffec42","#e0e0e0"]},noData:{values:"transparent"}}]},width:{key:"種類",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}},{type:"match",key:"種類",name:"歩道と林道",mapping:{categories:["林道","歩道"],values:[10,5]}}]},lineStyle:"solid",labels:{key:"種類",show:!1,expressions:[{key:"種類",name:"道の種類",value:"{種類}"}]},default:{line:{paint:{},layout:{"line-cap":"round","line-join":"round"}},symbol:{paint:{},layout:{"text-size":10,"symbol-placement":"line","symbol-spacing":100}}}}},yC=Object.freeze(Object.defineProperty({__proto__:null,default:mC},Symbol.toStringTag,{value:"Module"})),_C={id:"fac_phenology_2020",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${Ih}/fac_phenology_2020.pmtiles`},metaData:{name:"フェノロジー調査 2020年度",description:"森林環境教育専攻のフェノロジー調査のデータ",attribution:"森林文化アカデミー",location:"森林文化アカデミー",sourceLayer:"fac_phenology_2020",minZoom:10,maxZoom:14,tags:["フェノロジー"],bounds:[136.918075,35.554408,136.9268,35.558411],coverImage:`${bu}/phenology_2020.webp`},properties:{keys:["種名"],titles:[{conditions:["種名"],template:"{種名}"},{conditions:[],template:"フェノロジー調査_2020のポイント"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#33ec00"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"種名",show:!1,expressions:[{key:"種名",name:"種名",value:"{種名}"}]},default:{circle:{paint:{},layout:{}},symbol:{paint:{},layout:{}},heatmap:{paint:{},layout:{}}}}},bC=Object.freeze(Object.defineProperty({__proto__:null,default:_C},Symbol.toStringTag,{value:"Module"}));var vC={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]};function wC(n,e,i){return n*(1-i)+e*i}var xC=wC,B_=vC,hd=xC,BC=CC;function CC(n){var e,i,o,c,d,f,s,v,Q,C,P;if(n||(n={}),v=(n.nshades||72)-1,s=n.format||"hex",f=n.colormap,f||(f="jet"),typeof f=="string"){if(f=f.toLowerCase(),!B_[f])throw Error(f+" not a supported colorscale");d=B_[f]}else if(Array.isArray(f))d=f.slice();else throw Error("unsupported colormap option",f);if(d.length>v+1)throw new Error(f+" map requires nshades to be at least size "+d.length);Array.isArray(n.alpha)?n.alpha.length!==2?C=[1,1]:C=n.alpha.slice():typeof n.alpha=="number"?C=[n.alpha,n.alpha]:C=[1,1],e=d.map(function(V){return Math.round(V.index*v)}),C[0]=Math.min(Math.max(C[0],0),1),C[1]=Math.min(Math.max(C[1],0),1);var M=d.map(function(V,ee){var Z=d[ee].index,ne=d[ee].rgb.slice();return ne.length===4&&ne[3]>=0&&ne[3]<=1||(ne[3]=C[0]+(C[1]-C[0])*Z),ne}),Q=[];for(P=0;P<e.length-1;++P){c=e[P+1]-e[P],i=M[P],o=M[P+1];for(var E=0;E<c;E++){var z=E/c;Q.push([Math.round(hd(i[0],o[0],z)),Math.round(hd(i[1],o[1],z)),Math.round(hd(i[2],o[2],z)),hd(i[3],o[3],z)])}}return Q.push(d[d.length-1].rgb.concat(C[1])),s==="hex"?Q=Q.map(FC):s==="rgbaString"?Q=Q.map(EC):s==="float"&&(Q=Q.map(IC)),Q}function IC(n){return[n[0]/255,n[1]/255,n[2]/255,n[3]]}function FC(n){for(var e,i="#",o=0;o<3;++o)e=n[o],e=e.toString(16),i+=("00"+e).substr(e.length);return i}function EC(n){return"rgba("+n.join(",")+")"}const fd=v2(BC);function $d(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function SC(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function rv(n){let e,i,o;n.length!==2?(e=$d,i=(s,v)=>$d(n(s),v),o=(s,v)=>n(s)-v):(e=n===$d||n===SC?n:TC,i=n,o=n);function c(s,v,C=0,P=s.length){if(C<P){if(e(v,v)!==0)return P;do{const M=C+P>>>1;i(s[M],v)<0?C=M+1:P=M}while(C<P)}return C}function d(s,v,C=0,P=s.length){if(C<P){if(e(v,v)!==0)return P;do{const M=C+P>>>1;i(s[M],v)<=0?C=M+1:P=M}while(C<P)}return C}function f(s,v,C=0,P=s.length){const M=c(s,v,C,P-1);return M>C&&o(s[M-1],v)>-o(s[M],v)?M-1:M}return{left:c,center:f,right:d}}function TC(){return 0}function LC(n){return n===null?NaN:+n}const PC=rv($d),MC=PC.right;rv(LC).center;const UC=Math.sqrt(50),kC=Math.sqrt(10),QC=Math.sqrt(2);function up(n,e,i){const o=(e-n)/Math.max(0,i),c=Math.floor(Math.log10(o)),d=o/Math.pow(10,c),f=d>=UC?10:d>=kC?5:d>=QC?2:1;let s,v,C;return c<0?(C=Math.pow(10,-c)/f,s=Math.round(n*C),v=Math.round(e*C),s/C<n&&++s,v/C>e&&--v,C=-C):(C=Math.pow(10,c)*f,s=Math.round(n/C),v=Math.round(e/C),s*C<n&&++s,v*C>e&&--v),v<s&&.5<=i&&i<2?up(n,e,i*2):[s,v,C]}function DC(n,e,i){if(e=+e,n=+n,i=+i,!(i>0))return[];if(n===e)return[n];const o=e<n,[c,d,f]=o?up(e,n,i):up(n,e,i);if(!(d>=c))return[];const s=d-c+1,v=new Array(s);if(o)if(f<0)for(let C=0;C<s;++C)v[C]=(d-C)/-f;else for(let C=0;C<s;++C)v[C]=(d-C)*f;else if(f<0)for(let C=0;C<s;++C)v[C]=(c+C)/-f;else for(let C=0;C<s;++C)v[C]=(c+C)*f;return v}function Xm(n,e,i){return e=+e,n=+n,i=+i,up(n,e,i)[2]}function RC(n,e,i){e=+e,n=+n,i=+i;const o=e<n,c=o?Xm(e,n,i):Xm(n,e,i);return(o?-1:1)*(c<0?1/-c:c)}function NC(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function X0(n,e,i){n.prototype=e.prototype=i,i.constructor=n}function nv(n,e){var i=Object.create(n.prototype);for(var o in e)i[o]=e[o];return i}function Df(){}var Ff=.7,hp=1/Ff,dh="\\s*([+-]?\\d+)\\s*",Ef="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OC=/^#([0-9a-f]{3,8})$/,zC=new RegExp(`^rgb\\(${dh},${dh},${dh}\\)$`),HC=new RegExp(`^rgb\\(${yl},${yl},${yl}\\)$`),jC=new RegExp(`^rgba\\(${dh},${dh},${dh},${Ef}\\)$`),VC=new RegExp(`^rgba\\(${yl},${yl},${yl},${Ef}\\)$`),GC=new RegExp(`^hsl\\(${Ef},${yl},${yl}\\)$`),KC=new RegExp(`^hsla\\(${Ef},${yl},${yl},${Ef}\\)$`),C_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X0(Df,vh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:I_,formatHex:I_,formatHex8:qC,formatHsl:ZC,formatRgb:F_,toString:F_});function I_(){return this.rgb().formatHex()}function qC(){return this.rgb().formatHex8()}function ZC(){return iv(this).formatHsl()}function F_(){return this.rgb().formatRgb()}function vh(n){var e,i;return n=(n+"").trim().toLowerCase(),(e=OC.exec(n))?(i=e[1].length,e=parseInt(e[1],16),i===6?E_(e):i===3?new oo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?dd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?dd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=zC.exec(n))?new oo(e[1],e[2],e[3],1):(e=HC.exec(n))?new oo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=jC.exec(n))?dd(e[1],e[2],e[3],e[4]):(e=VC.exec(n))?dd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=GC.exec(n))?L_(e[1],e[2]/100,e[3]/100,1):(e=KC.exec(n))?L_(e[1],e[2]/100,e[3]/100,e[4]):C_.hasOwnProperty(n)?E_(C_[n]):n==="transparent"?new oo(NaN,NaN,NaN,0):null}function E_(n){return new oo(n>>16&255,n>>8&255,n&255,1)}function dd(n,e,i,o){return o<=0&&(n=e=i=NaN),new oo(n,e,i,o)}function $C(n){return n instanceof Df||(n=vh(n)),n?(n=n.rgb(),new oo(n.r,n.g,n.b,n.opacity)):new oo}function Jm(n,e,i,o){return arguments.length===1?$C(n):new oo(n,e,i,o??1)}function oo(n,e,i,o){this.r=+n,this.g=+e,this.b=+i,this.opacity=+o}X0(oo,Jm,nv(Df,{brighter(n){return n=n==null?hp:Math.pow(hp,n),new oo(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Ff:Math.pow(Ff,n),new oo(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new oo(fu(this.r),fu(this.g),fu(this.b),fp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S_,formatHex:S_,formatHex8:WC,formatRgb:T_,toString:T_}));function S_(){return`#${cu(this.r)}${cu(this.g)}${cu(this.b)}`}function WC(){return`#${cu(this.r)}${cu(this.g)}${cu(this.b)}${cu((isNaN(this.opacity)?1:this.opacity)*255)}`}function T_(){const n=fp(this.opacity);return`${n===1?"rgb(":"rgba("}${fu(this.r)}, ${fu(this.g)}, ${fu(this.b)}${n===1?")":`, ${n})`}`}function fp(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function fu(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function cu(n){return n=fu(n),(n<16?"0":"")+n.toString(16)}function L_(n,e,i,o){return o<=0?n=e=i=NaN:i<=0||i>=1?n=e=NaN:e<=0&&(n=NaN),new LA(n,e,i,o)}function iv(n){if(n instanceof LA)return new LA(n.h,n.s,n.l,n.opacity);if(n instanceof Df||(n=vh(n)),!n)return new LA;if(n instanceof LA)return n;n=n.rgb();var e=n.r/255,i=n.g/255,o=n.b/255,c=Math.min(e,i,o),d=Math.max(e,i,o),f=NaN,s=d-c,v=(d+c)/2;return s?(e===d?f=(i-o)/s+(i<o)*6:i===d?f=(o-e)/s+2:f=(e-i)/s+4,s/=v<.5?d+c:2-d-c,f*=60):s=v>0&&v<1?0:f,new LA(f,s,v,n.opacity)}function XC(n,e,i,o){return arguments.length===1?iv(n):new LA(n,e,i,o??1)}function LA(n,e,i,o){this.h=+n,this.s=+e,this.l=+i,this.opacity=+o}X0(LA,XC,nv(Df,{brighter(n){return n=n==null?hp:Math.pow(hp,n),new LA(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Ff:Math.pow(Ff,n),new LA(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,o=i+(i<.5?i:1-i)*e,c=2*i-o;return new oo(Jg(n>=240?n-240:n+120,c,o),Jg(n,c,o),Jg(n<120?n+240:n-120,c,o),this.opacity)},clamp(){return new LA(P_(this.h),pd(this.s),pd(this.l),fp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=fp(this.opacity);return`${n===1?"hsl(":"hsla("}${P_(this.h)}, ${pd(this.s)*100}%, ${pd(this.l)*100}%${n===1?")":`, ${n})`}`}}));function P_(n){return n=(n||0)%360,n<0?n+360:n}function pd(n){return Math.max(0,Math.min(1,n||0))}function Jg(n,e,i){return(n<60?e+(i-e)*n/60:n<180?i:n<240?e+(i-e)*(240-n)/60:e)*255}const J0=n=>()=>n;function JC(n,e){return function(i){return n+i*e}}function YC(n,e,i){return n=Math.pow(n,i),e=Math.pow(e,i)-n,i=1/i,function(o){return Math.pow(n+o*e,i)}}function eI(n){return(n=+n)==1?av:function(e,i){return i-e?YC(e,i,n):J0(isNaN(e)?i:e)}}function av(n,e){var i=e-n;return i?JC(n,i):J0(isNaN(n)?e:n)}const Ym=function n(e){var i=eI(e);function o(c,d){var f=i((c=Jm(c)).r,(d=Jm(d)).r),s=i(c.g,d.g),v=i(c.b,d.b),C=av(c.opacity,d.opacity);return function(P){return c.r=f(P),c.g=s(P),c.b=v(P),c.opacity=C(P),c+""}}return o.gamma=n,o}(1);function tI(n,e){e||(e=[]);var i=n?Math.min(e.length,n.length):0,o=e.slice(),c;return function(d){for(c=0;c<i;++c)o[c]=n[c]*(1-d)+e[c]*d;return o}}function rI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function nI(n,e){var i=e?e.length:0,o=n?Math.min(i,n.length):0,c=new Array(o),d=new Array(i),f;for(f=0;f<o;++f)c[f]=Y0(n[f],e[f]);for(;f<i;++f)d[f]=e[f];return function(s){for(f=0;f<o;++f)d[f]=c[f](s);return d}}function iI(n,e){var i=new Date;return n=+n,e=+e,function(o){return i.setTime(n*(1-o)+e*o),i}}function dp(n,e){return n=+n,e=+e,function(i){return n*(1-i)+e*i}}function aI(n,e){var i={},o={},c;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(c in e)c in n?i[c]=Y0(n[c],e[c]):o[c]=e[c];return function(d){for(c in i)o[c]=i[c](d);return o}}var e0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yg=new RegExp(e0.source,"g");function sI(n){return function(){return n}}function oI(n){return function(e){return n(e)+""}}function AI(n,e){var i=e0.lastIndex=Yg.lastIndex=0,o,c,d,f=-1,s=[],v=[];for(n=n+"",e=e+"";(o=e0.exec(n))&&(c=Yg.exec(e));)(d=c.index)>i&&(d=e.slice(i,d),s[f]?s[f]+=d:s[++f]=d),(o=o[0])===(c=c[0])?s[f]?s[f]+=c:s[++f]=c:(s[++f]=null,v.push({i:f,x:dp(o,c)})),i=Yg.lastIndex;return i<e.length&&(d=e.slice(i),s[f]?s[f]+=d:s[++f]=d),s.length<2?v[0]?oI(v[0].x):sI(e):(e=v.length,function(C){for(var P=0,M;P<e;++P)s[(M=v[P]).i]=M.x(C);return s.join("")})}function Y0(n,e){var i=typeof e,o;return e==null||i==="boolean"?J0(e):(i==="number"?dp:i==="string"?(o=vh(e))?(e=o,Ym):AI:e instanceof vh?Ym:e instanceof Date?iI:rI(e)?tI:Array.isArray(e)?nI:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?aI:dp)(n,e)}function lI(n,e){return n=+n,e=+e,function(i){return Math.round(n*(1-i)+e*i)}}function cI(n){return function(){return n}}function uI(n){return+n}var M_=[0,1];function lh(n){return n}function t0(n,e){return(e-=n=+n)?function(i){return(i-n)/e}:cI(isNaN(e)?NaN:.5)}function hI(n,e){var i;return n>e&&(i=n,n=e,e=i),function(o){return Math.max(n,Math.min(e,o))}}function fI(n,e,i){var o=n[0],c=n[1],d=e[0],f=e[1];return c<o?(o=t0(c,o),d=i(f,d)):(o=t0(o,c),d=i(d,f)),function(s){return d(o(s))}}function dI(n,e,i){var o=Math.min(n.length,e.length)-1,c=new Array(o),d=new Array(o),f=-1;for(n[o]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++f<o;)c[f]=t0(n[f],n[f+1]),d[f]=i(e[f],e[f+1]);return function(s){var v=MC(n,s,1,o)-1;return d[v](c[v](s))}}function pI(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function gI(){var n=M_,e=M_,i=Y0,o,c,d,f=lh,s,v,C;function P(){var Q=Math.min(n.length,e.length);return f!==lh&&(f=hI(n[0],n[Q-1])),s=Q>2?dI:fI,v=C=null,M}function M(Q){return Q==null||isNaN(Q=+Q)?d:(v||(v=s(n.map(o),e,i)))(o(f(Q)))}return M.invert=function(Q){return f(c((C||(C=s(e,n.map(o),dp)))(Q)))},M.domain=function(Q){return arguments.length?(n=Array.from(Q,uI),P()):n.slice()},M.range=function(Q){return arguments.length?(e=Array.from(Q),P()):e.slice()},M.rangeRound=function(Q){return e=Array.from(Q),i=lI,P()},M.clamp=function(Q){return arguments.length?(f=Q?!0:lh,P()):f!==lh},M.interpolate=function(Q){return arguments.length?(i=Q,P()):i},M.unknown=function(Q){return arguments.length?(d=Q,M):d},function(Q,E){return o=Q,c=E,P()}}function mI(){return gI()(lh,lh)}function yI(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function pp(n,e){if((i=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var i,o=n.slice(0,i);return[o.length>1?o[0]+o.slice(2):o,+n.slice(i+1)]}function wh(n){return n=pp(Math.abs(n)),n?n[1]:NaN}function _I(n,e){return function(i,o){for(var c=i.length,d=[],f=0,s=n[0],v=0;c>0&&s>0&&(v+s+1>o&&(s=Math.max(1,o-v)),d.push(i.substring(c-=s,c+s)),!((v+=s+1)>o));)s=n[f=(f+1)%n.length];return d.reverse().join(e)}}function bI(n){return function(e){return e.replace(/[0-9]/g,function(i){return n[+i]})}}var vI=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gp(n){if(!(e=vI.exec(n)))throw new Error("invalid format: "+n);var e;return new e1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}gp.prototype=e1.prototype;function e1(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}e1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wI(n){e:for(var e=n.length,i=1,o=-1,c;i<e;++i)switch(n[i]){case".":o=c=i;break;case"0":o===0&&(o=i),c=i;break;default:if(!+n[i])break e;o>0&&(o=0);break}return o>0?n.slice(0,o)+n.slice(c+1):n}var sv;function xI(n,e){var i=pp(n,e);if(!i)return n+"";var o=i[0],c=i[1],d=c-(sv=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,f=o.length;return d===f?o:d>f?o+new Array(d-f+1).join("0"):d>0?o.slice(0,d)+"."+o.slice(d):"0."+new Array(1-d).join("0")+pp(n,Math.max(0,e+d-1))[0]}function U_(n,e){var i=pp(n,e);if(!i)return n+"";var o=i[0],c=i[1];return c<0?"0."+new Array(-c).join("0")+o:o.length>c+1?o.slice(0,c+1)+"."+o.slice(c+1):o+new Array(c-o.length+2).join("0")}const k_={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:yI,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>U_(n*100,e),r:U_,s:xI,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Q_(n){return n}var D_=Array.prototype.map,R_=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function BI(n){var e=n.grouping===void 0||n.thousands===void 0?Q_:_I(D_.call(n.grouping,Number),n.thousands+""),i=n.currency===void 0?"":n.currency[0]+"",o=n.currency===void 0?"":n.currency[1]+"",c=n.decimal===void 0?".":n.decimal+"",d=n.numerals===void 0?Q_:bI(D_.call(n.numerals,String)),f=n.percent===void 0?"%":n.percent+"",s=n.minus===void 0?"−":n.minus+"",v=n.nan===void 0?"NaN":n.nan+"";function C(M){M=gp(M);var Q=M.fill,E=M.align,z=M.sign,V=M.symbol,ee=M.zero,Z=M.width,ne=M.comma,Be=M.precision,ze=M.trim,Ne=M.type;Ne==="n"?(ne=!0,Ne="g"):k_[Ne]||(Be===void 0&&(Be=12),ze=!0,Ne="g"),(ee||Q==="0"&&E==="=")&&(ee=!0,Q="0",E="=");var Oe=V==="$"?i:V==="#"&&/[boxX]/.test(Ne)?"0"+Ne.toLowerCase():"",ve=V==="$"?o:/[%p]/.test(Ne)?f:"",me=k_[Ne],Qe=/[defgprs%]/.test(Ne);Be=Be===void 0?6:/[gprs]/.test(Ne)?Math.max(1,Math.min(21,Be)):Math.max(0,Math.min(20,Be));function tt(se){var ue=Oe,Fe=ve,Se,yt,lt;if(Ne==="c")Fe=me(se)+Fe,se="";else{se=+se;var mt=se<0||1/se<0;if(se=isNaN(se)?v:me(Math.abs(se),Be),ze&&(se=wI(se)),mt&&+se==0&&z!=="+"&&(mt=!1),ue=(mt?z==="("?z:s:z==="-"||z==="("?"":z)+ue,Fe=(Ne==="s"?R_[8+sv/3]:"")+Fe+(mt&&z==="("?")":""),Qe){for(Se=-1,yt=se.length;++Se<yt;)if(lt=se.charCodeAt(Se),48>lt||lt>57){Fe=(lt===46?c+se.slice(Se+1):se.slice(Se))+Fe,se=se.slice(0,Se);break}}}ne&&!ee&&(se=e(se,1/0));var Ye=ue.length+se.length+Fe.length,gt=Ye<Z?new Array(Z-Ye+1).join(Q):"";switch(ne&&ee&&(se=e(gt+se,gt.length?Z-Fe.length:1/0),gt=""),E){case"<":se=ue+se+Fe+gt;break;case"=":se=ue+gt+se+Fe;break;case"^":se=gt.slice(0,Ye=gt.length>>1)+ue+se+Fe+gt.slice(Ye);break;default:se=gt+ue+se+Fe;break}return d(se)}return tt.toString=function(){return M+""},tt}function P(M,Q){var E=C((M=gp(M),M.type="f",M)),z=Math.max(-8,Math.min(8,Math.floor(wh(Q)/3)))*3,V=Math.pow(10,-z),ee=R_[8+z/3];return function(Z){return E(V*Z)+ee}}return{format:C,formatPrefix:P}}var gd,ov,Av;CI({thousands:",",grouping:[3],currency:["$",""]});function CI(n){return gd=BI(n),ov=gd.format,Av=gd.formatPrefix,gd}function II(n){return Math.max(0,-wh(Math.abs(n)))}function FI(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wh(e)/3)))*3-wh(Math.abs(n)))}function EI(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,wh(e)-wh(n))+1}function SI(n,e,i,o){var c=RC(n,e,i),d;switch(o=gp(o??",f"),o.type){case"s":{var f=Math.max(Math.abs(n),Math.abs(e));return o.precision==null&&!isNaN(d=FI(c,f))&&(o.precision=d),Av(o,f)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(d=EI(c,Math.max(Math.abs(n),Math.abs(e))))&&(o.precision=d-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(d=II(c))&&(o.precision=d-(o.type==="%")*2);break}}return ov(o)}function TI(n){var e=n.domain;return n.ticks=function(i){var o=e();return DC(o[0],o[o.length-1],i??10)},n.tickFormat=function(i,o){var c=e();return SI(c[0],c[c.length-1],i??10,o)},n.nice=function(i){i==null&&(i=10);var o=e(),c=0,d=o.length-1,f=o[c],s=o[d],v,C,P=10;for(s<f&&(C=f,f=s,s=C,C=c,c=d,d=C);P-- >0;){if(C=Xm(f,s,i),C===v)return o[c]=f,o[d]=s,e(o);if(C>0)f=Math.floor(f/C)*C,s=Math.ceil(s/C)*C;else if(C<0)f=Math.ceil(f*C)/C,s=Math.floor(s*C)/C;else break;v=C}return n},n}function r0(){var n=mI();return n.copy=function(){return pI(n,r0())},NC.apply(n,arguments),TI(n)}const eU=n=>{const{range:e,divisions:i}=n;if(i<=0)throw console.warn("divisions は 0 より大きくなければなりません。"),new Error("divisions must be greater than 0");const o=r0().domain(e).nice().ticks(i),c=n.values[0],d=n.values[1],f=r0().domain([e[0],e[1]]).interpolate(Ym).range([c,d]),s=o.map(v=>{const C=f(v);return vh(C).formatHex()});return{categories:o,values:s}},LI=(n,e,i)=>{n=n/360,e=e/100,i=i/100;const o=(s,v,C)=>(C<0&&(C+=1),C>1&&(C-=1),C<1/6?s+(v-s)*6*C:C<1/2?v:C<2/3?s+(v-s)*(2/3-C)*6:s);let c,d,f;if(e===0)c=d=f=i;else{const s=i<.5?i*(1+e):i+e-i*e,v=2*i-s;c=o(v,s,n+1/3),d=o(v,s,n),f=o(v,s,n-1/3)}return{r:Math.round(c*255),g:Math.round(d*255),b:Math.round(f*255)}},PI=n=>{const e=[];for(let i=0;i<n;i++){const o=360/n*i,f=LI(o,70,50),s=`#${f.r.toString(16).padStart(2,"0")}${f.g.toString(16).padStart(2,"0")}${f.b.toString(16).padStart(2,"0")}`;e.push(s)}return e};class MI{constructor(){Or(this,"cache");this.cache=new Map}createColorArray(e){const i=`${e}`;if(this.has(i))return this.get(i);const o=256,c=new Uint8Array(o*3);let f=fd({colormap:e,nshades:o,format:"rgb",alpha:1}),s=0;for(let v=0;v<o;v++){const C=f[v];c[s++]=C[0],c[s++]=C[1],c[s++]=C[2]}return this.cache.set(i,c),c}createSimpleCSSGradient(e,i=30,o="to right"){let d=fd({colormap:e,nshades:i,format:"hex",alpha:1});return`linear-gradient(${o}, ${d.join(", ")})`}getMinColor(e,i="hex"){return fd({colormap:e,nshades:16,format:i,alpha:1})[0]}getMaxColor(e,i="hex"){const c=fd({colormap:e,nshades:16,format:i,alpha:1});return c[c.length-1]}add(e,i){this.cache.set(e,i)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}}const UI={id:"tokyo_gairoju",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${Ih}/tokyo_gairoju.pmtiles`},metaData:{name:"東京都23区 街路樹",sourceDataName:"都道の街路樹",description:`
            「東京都オープンデータカタログサイト」において公開されている「都道の街路樹」データをもとに加工`,attribution:"東京都オープンデータカタログサイト",tags:["街路樹","単木"],downloadUrl:"https://catalog.data.metro.tokyo.lg.jp/dataset/t000014d2000000029",location:"東京都",minZoom:10,maxZoom:14,sourceLayer:"tokyo_gairoju",bounds:[139.5658198,35.5473344,139.9092201,35.8170772],xyzImageTile:{x:14552,y:6452,z:14}},properties:{keys:["樹種","区分","樹高(m)","枝張(m)","幹周(cm）","行政区","種別","整理番号","路線名","経度","緯度"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"街路樹 東京都23区"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.5,markerType:"circle",colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#009405"}},{type:"match",key:"樹種",name:"樹種ごとの色分け",mapping:{categories:["アオギリ","トキワマンサク","マサキ","クスノキ","ソヨゴ","ヤマモモ","キンモクセイ","シマトネリコ","サワラ","ニオイヒバ","ネズミサシ","トウカエデ","イチョウ","ハナミズキ","イヌマキ","サクラ","エノキ","ヒサカキ","ミツバツツジ類","マテバシイ","ドウダンツツジ","オオムラサキ","アキニレ","スダジイ","アオキ","シキミ","トウネズミモチ","ウバメガシ","エンジュ","ツバキ","カンツバキ","シャリンバイ","シラカシ","ネズミモチ","クロガネモチ","センダン","トベラ","ハマヒサカキ","イロハモミジ","ムクノキ","スズカケノキ","アメリカザイフリボク","ホルトノキ","シュロ","ムクゲ","ケヤキ","ナワシログミ","サカキ","コムラサキ","ハナズオウ","ヤマボウシ","ナンテン","ビワ","トキワサンザシ","アジサイ","ユッカ類","ハゼノキ","モミジバフウ","カキノキ","ナツミカン","ウメ","ヒメユズリハ","アツバキミガヨラン","セイヨウイボタ","イチゴノキ","ハクサンボク","ギンバイカ","カクレミノ","ジョウリョクヤマボウシ","ゲッケイジュ","アオイ科","シャクナゲ類","ロウバイ","ジンチョウゲ","エゴノキ","シダレヤナギ","イヌエンジュ","シマナンヨウスギ","モッコク","ヒイラギモチ","キンカン","ユリノキ","キョウチクトウ","カナメモチ","コブシ","クチナシ","キミガヨラン","アメリカヒイラギ","ベニバナトチノキ","トウジュロ","トチノキ","コノテガシワ","ヒマラヤスギ","サザンカ","ハナノキ","ヒトツバタゴ","アメリカヒトツバタゴ","モクゲンジ","ツバキ科","ナンキンハゼ","マユミ","ホザキナナカマド","ヒイラギモクセイ","モチノキ","オトメツバキ","ミズキ","イスノキ","サルスベリ","イヌツゲ","サンゴジュ","ミロバランスモモ","ハナモモ","ヒメサザンカ","マンサク","イチイ","アカメガシワ","ヤドリフカノキ","セイヨウシャクナゲ","イボタノキ属","モモ属","ニワウルシ","イブキ","メタセコイア","クロモジ","ナツツバキ","タブノキ","ウツギ属","ヒイラギナンテン","チャノキ","マンサク科","ユズリハ","サンシュユ","ベニバナトキワマンサク","ノイバラ","カラタネオガタマ","ツツジ","ヒバ","ブルーベリー","ナナカマド","アベリア/トキワマンサク","カイドウ","バラ科","フジ","マルメロ","ブラシノキ","アンズ","ノウゼンカズラ","オニグルミ","キンモクセイ/カナメモチ/サザンカ","シャリンバイ/カナメモチ/ヒイラギ/キンモクセイ","コナラ","アセビ","バラ類","ネムノキ","ホオノキ","カナメモチ/サザンカ/ヒイラギ/ヒイラギモクセイ/キンモクセイ","セイヨウテマリカンボク","ヒノキ","キャラボク","ユキヤナギ","ボケ","ベニカナメモチ","シナマンサク","カシワバアジサイ","カナメモチ/ハマヒサカキ","クマシデ","ニシキギ","カナメモチ/ハマヒサカキ/アセビ/シャリンバイ/ナワシログミ","マメガキ","サザンカ/カナメモチ/ゲッケイジュ","シナノキ属","トサミズキ","ニオイシュロラン","コウオトメツバキ","シダレモミジ","ヤツデ","ワシントンヤシ","ハギ属","カツラ","ウメ類","オガタマノキ","ハナゾノツクバネウツギ","シナノキ","オオバボダイジュ","ニセアカシア","アベリア","シマモクセイ","クワ","リョウブ","フヨウ","カナリーヤシ","ドイツトウヒ","アカマツ","イタヤカエデ","ニワウメ","ガマズミ","サツキ","ジャカランダ","ギンモクセイ","キンシバイ","ハクチョウゲ","ナギ","セイヨウヒイラギ","ザクロ","モクレン","ウメモドキ","コウヤミズキ","ナツボダイジュ","クリ","ハナカイドウ","イボタノキ","ライラック","ハナリンゴ","コデマリ","カイヅカイブキ","アメリカフウ","コバザクラ","ミツバツツジ","ゴールドクレスト","ハクモクレン","セイヨウベニカナメモチ","トウモクレン","ビロウ","モクセイ属","モクレン属","フウ","フェイジョア","シバニッケイ","トキワマンサク属","タニウツギ","ヒュウガミズキ","アジサイ類","ヒイラギ","フイリマサキ","ピラカンサ類","サザンカ類","コウヤマキ","ツクバネガシ","ムラサキシキブ","ヤマグワ","ムクロジ","オオムラサキツツジ","ガマズミ属","タイサンボク","ザクラ","ツバキ類","サトザクラ類","アカシデ","ニシキギ属","シダレザクラ","シモツケ","オオカナメモチ","ヤマツツジ","ハコネウツギ","トサミズキ属","タチカンツバキ","ヒメイチゴノキ","モモ","モリシマアカシア","モントレーイトスギ","キダチチョウセンアサガオ","ユッカ・エレファンティペス","モウソウチク","ユッカ","コマユミ","カキノキ属","カボック","カキ属","キリ","ヨウコウ","ボックスウッド","レンギョウ","プラタナス","スズカケノキ属","クロマツ","ウツギ","ソメイヨシノ","ミツマタ","イヌビワ","キリシマツツジ","モチノキ科","ヤシ科sp.","ユズ","常緑ヤマボウシ","レッドオーク","アメリカハナノキ","オオバグミ","グミ","モミジ司シルエット","タイサンボクリトルジェム","タイサンボク リトルジェム","ハクウンボク","イギリスナラ","ノルウェーカエデ","ミヤマガンショウ","イノバラ","ツゲ","イヌリンゴ","ヒメリンゴ","ネグンドカエデ","シナヒイラギ","テルテモモ","アラカシ","アイグロマツ","ピラカンサス","オオデマリ","ヤブツバキ","コクチナシ","ホウキモモ","イヌホオズキ","ニワグミ","イトスギ","クヌギ","コロラドビャクシン","コロラドトウヒ","ゴンズイ","ワダスメモリー","ニッケイ","レイランドヒノキ","サンショウ","ソシンロウバイ","ヌルデ","カラタチ","ヒメヒイラギ","エニシダ","コノテヒバ","ギンコウバイ","シロダモ","ヒメシャラ","セイヨウバクチノキ","ロドレイア","ボダイジュ","ビャクシン","ツクバネウツギ","カヤ","セイヨウニンジンボク","クルメツツジ","シダレモモ","ヒメタイサンボク","オタフクナンテン","シャクナゲ","マグノリア","モミジ","ヒメシャリンバイ","ミモザ","モミノキ","イヌシデ","ホソバタブ","オガタマ","カイズカイブキ","アカメ","シイノキ","ロドレイヤ","マツ","シャクナゲモドキ","オオモミジ","リンゴ","モクレンモドキ","アメリカハナズオウ","セイヨウシナノキ","ニワトコ","カエデ","ピラカンサ","フイリサカキ","フィカス","シデコブシ","キンモク","マンサ","シモクレン","リキュウバイ","ハンカチノキ","コウバイ","タチバナモドキ","ナナミノキ","カポック","ビブルヌムティヌス","ノウゼンカツラ","ハウチワカエデ","アメリカガシワ","ロドレイア　ヘンリー","チンチョウゲ","ザイフリボク","アプリコット","モミジバフウウ","キンバイカ","カルミア","マルバシャリンバイ","ケヤマハンノキ","アリゾナイトスギ","インドゴムノキ","アキグミ","タイワンレンギョウ","ヤブデマリ","イチジク","カワヤナギ","タチヤナギ","アカメヤナギ","サトウカエデ","ストロベリーツリー","キンメツゲ","マルバアオダモ","ツルグミ","ハクサンシャクナゲ","ハイノキ","マグワ"],values:PI(405)},noData:{values:"transparent",pattern:null}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#FFFFFF",width:2},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"},{key:"区分",name:"区分",value:"{区分}"},{key:"樹高(m)",name:"樹高(m)",value:"{樹高(m)}"},{key:"枝張(m)",name:"枝張(m)",value:"{枝張(m)}"},{key:"幹周(cm）",name:"幹周(cm）",value:"{幹周(cm）}"},{key:"行政区",name:"行政区",value:"{行政区}"},{key:"種別",name:"種別",value:"{種別}"},{key:"整理番号",name:"整理番号",value:"{整理番号}"},{key:"路線名",name:"路線名",value:"{路線名}"},{key:"経度",name:"経度",value:"{経度}"},{key:"緯度",name:"緯度",value:"{緯度}"}]}}},kI=Object.freeze(Object.defineProperty({__proto__:null,default:UI},Symbol.toStringTag,{value:"Module"})),{min:QI,max:DI}=Math,du=(n,e=0,i=1)=>QI(DI(e,n),i),t1=n=>{n._clipped=!1,n._unclipped=n.slice(0);for(let e=0;e<=3;e++)e<3?((n[e]<0||n[e]>255)&&(n._clipped=!0),n[e]=du(n[e],0,255)):e===3&&(n[e]=du(n[e],0,1));return n},lv={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])lv[`[object ${n}]`]=n.toLowerCase();function mn(n){return lv[Object.prototype.toString.call(n)]||"object"}const hn=(n,e=null)=>n.length>=3?Array.prototype.slice.call(n):mn(n[0])=="object"&&e?e.split("").filter(i=>n[0][i]!==void 0).map(i=>n[0][i]):n[0].slice(0),Sh=n=>{if(n.length<2)return null;const e=n.length-1;return mn(n[e])=="string"?n[e].toLowerCase():null},{PI:Np,min:cv,max:uv}=Math,iA=n=>Math.round(n*100)/100,n0=n=>Math.round(n*100)/100,Zl=Np*2,em=Np/3,RI=Np/180,NI=180/Np;function hv(n){return[...n.slice(0,3).reverse(),...n.slice(3)]}const sn={format:{},autodetect:[]};class rr{constructor(...e){const i=this;if(mn(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let o=Sh(e),c=!1;if(!o){c=!0,sn.sorted||(sn.autodetect=sn.autodetect.sort((d,f)=>f.p-d.p),sn.sorted=!0);for(let d of sn.autodetect)if(o=d.test(...e),o)break}if(sn.format[o]){const d=sn.format[o].apply(null,c?e:e.slice(0,-1));i._rgb=t1(d)}else throw new Error("unknown format: "+e);i._rgb.length===3&&i._rgb.push(1)}toString(){return mn(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const OI="3.1.2",Cn=(...n)=>new rr(...n);Cn.version=OI;const xh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},zI=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,HI=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,fv=n=>{if(n.match(zI)){(n.length===4||n.length===7)&&(n=n.substr(1)),n.length===3&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const e=parseInt(n,16),i=e>>16,o=e>>8&255,c=e&255;return[i,o,c,1]}if(n.match(HI)){(n.length===5||n.length===9)&&(n=n.substr(1)),n.length===4&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=parseInt(n,16),i=e>>24&255,o=e>>16&255,c=e>>8&255,d=Math.round((e&255)/255*100)/100;return[i,o,c,d]}throw new Error(`unknown hex color: ${n}`)},{round:md}=Math,dv=(...n)=>{let[e,i,o,c]=hn(n,"rgba"),d=Sh(n)||"auto";c===void 0&&(c=1),d==="auto"&&(d=c<1?"rgba":"rgb"),e=md(e),i=md(i),o=md(o);let s="000000"+(e<<16|i<<8|o).toString(16);s=s.substr(s.length-6);let v="0"+md(c*255).toString(16);switch(v=v.substr(v.length-2),d.toLowerCase()){case"rgba":return`#${s}${v}`;case"argb":return`#${v}${s}`;default:return`#${s}`}};rr.prototype.name=function(){const n=dv(this._rgb,"rgb");for(let e of Object.keys(xh))if(xh[e]===n)return e.toLowerCase();return n};sn.format.named=n=>{if(n=n.toLowerCase(),xh[n])return fv(xh[n]);throw new Error("unknown color name: "+n)};sn.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&mn(n)==="string"&&xh[n.toLowerCase()])return"named"}});rr.prototype.alpha=function(n,e=!1){return n!==void 0&&mn(n)==="number"?e?(this._rgb[3]=n,this):new rr([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]};rr.prototype.clipped=function(){return this._rgb._clipped||!1};const _l={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},jI=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Wl(n){const e=jI.get(String(n).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+n);_l.labWhitePoint=n,_l.Xn=e[0],_l.Zn=e[1]}function Sf(){return _l.labWhitePoint}const r1=(...n)=>{n=hn(n,"lab");const[e,i,o]=n,[c,d,f]=VI(e,i,o),[s,v,C]=pv(c,d,f);return[s,v,C,n.length>3?n[3]:1]},VI=(n,e,i)=>{const{kE:o,kK:c,kKE:d,Xn:f,Yn:s,Zn:v}=_l,C=(n+16)/116,P=.002*e+C,M=C-.005*i,Q=P*P*P,E=M*M*M,z=Q>o?Q:(116*P-16)/c,V=n>d?Math.pow((n+16)/116,3):n/c,ee=E>o?E:(116*M-16)/c,Z=z*f,ne=V*s,Be=ee*v;return[Z,ne,Be]},tm=n=>{const e=Math.sign(n);return n=Math.abs(n),(n<=.0031308?n*12.92:1.055*Math.pow(n,1/2.4)-.055)*e},pv=(n,e,i)=>{const{MtxAdaptMa:o,MtxAdaptMaI:c,MtxXYZ2RGB:d,RefWhiteRGB:f,Xn:s,Yn:v,Zn:C}=_l,P=s*o.m00+v*o.m10+C*o.m20,M=s*o.m01+v*o.m11+C*o.m21,Q=s*o.m02+v*o.m12+C*o.m22,E=f.X*o.m00+f.Y*o.m10+f.Z*o.m20,z=f.X*o.m01+f.Y*o.m11+f.Z*o.m21,V=f.X*o.m02+f.Y*o.m12+f.Z*o.m22,ee=(n*o.m00+e*o.m10+i*o.m20)*(E/P),Z=(n*o.m01+e*o.m11+i*o.m21)*(z/M),ne=(n*o.m02+e*o.m12+i*o.m22)*(V/Q),Be=ee*c.m00+Z*c.m10+ne*c.m20,ze=ee*c.m01+Z*c.m11+ne*c.m21,Ne=ee*c.m02+Z*c.m12+ne*c.m22,Oe=tm(Be*d.m00+ze*d.m10+Ne*d.m20),ve=tm(Be*d.m01+ze*d.m11+Ne*d.m21),me=tm(Be*d.m02+ze*d.m12+Ne*d.m22);return[Oe*255,ve*255,me*255]},n1=(...n)=>{const[e,i,o,...c]=hn(n,"rgb"),[d,f,s]=gv(e,i,o),[v,C,P]=GI(d,f,s);return[v,C,P,...c.length>0&&c[0]<1?[c[0]]:[]]};function GI(n,e,i){const{Xn:o,Yn:c,Zn:d,kE:f,kK:s}=_l,v=n/o,C=e/c,P=i/d,M=v>f?Math.pow(v,1/3):(s*v+16)/116,Q=C>f?Math.pow(C,1/3):(s*C+16)/116,E=P>f?Math.pow(P,1/3):(s*P+16)/116;return[116*Q-16,500*(M-Q),200*(Q-E)]}function rm(n){const e=Math.sign(n);return n=Math.abs(n),(n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4))*e}const gv=(n,e,i)=>{n=rm(n/255),e=rm(e/255),i=rm(i/255);const{MtxRGB2XYZ:o,MtxAdaptMa:c,MtxAdaptMaI:d,Xn:f,Yn:s,Zn:v,As:C,Bs:P,Cs:M}=_l;let Q=n*o.m00+e*o.m10+i*o.m20,E=n*o.m01+e*o.m11+i*o.m21,z=n*o.m02+e*o.m12+i*o.m22;const V=f*c.m00+s*c.m10+v*c.m20,ee=f*c.m01+s*c.m11+v*c.m21,Z=f*c.m02+s*c.m12+v*c.m22;let ne=Q*c.m00+E*c.m10+z*c.m20,Be=Q*c.m01+E*c.m11+z*c.m21,ze=Q*c.m02+E*c.m12+z*c.m22;return ne*=V/C,Be*=ee/P,ze*=Z/M,Q=ne*d.m00+Be*d.m10+ze*d.m20,E=ne*d.m01+Be*d.m11+ze*d.m21,z=ne*d.m02+Be*d.m12+ze*d.m22,[Q,E,z]};rr.prototype.lab=function(){return n1(this._rgb)};const KI=(...n)=>new rr(...n,"lab");Object.assign(Cn,{lab:KI,getLabWhitePoint:Sf,setLabWhitePoint:Wl});sn.format.lab=r1;sn.autodetect.push({p:2,test:(...n)=>{if(n=hn(n,"lab"),mn(n)==="array"&&n.length===3)return"lab"}});rr.prototype.darken=function(n=1){const e=this,i=e.lab();return i[0]-=_l.Kn*n,new rr(i,"lab").alpha(e.alpha(),!0)};rr.prototype.brighten=function(n=1){return this.darken(-n)};rr.prototype.darker=rr.prototype.darken;rr.prototype.brighter=rr.prototype.brighten;rr.prototype.get=function(n){const[e,i]=n.split("."),o=this[e]();if(i){const c=e.indexOf(i)-(e.substr(0,2)==="ok"?2:0);if(c>-1)return o[c];throw new Error(`unknown channel ${i} in mode ${e}`)}else return o};const{pow:qI}=Math,ZI=1e-7,$I=20;rr.prototype.luminance=function(n,e="rgb"){if(n!==void 0&&mn(n)==="number"){if(n===0)return new rr([0,0,0,this._rgb[3]],"rgb");if(n===1)return new rr([255,255,255,this._rgb[3]],"rgb");let i=this.luminance(),o=$I;const c=(f,s)=>{const v=f.interpolate(s,.5,e),C=v.luminance();return Math.abs(n-C)<ZI||!o--?v:C>n?c(f,v):c(v,s)},d=(i>n?c(new rr([0,0,0]),this):c(this,new rr([255,255,255]))).rgb();return new rr([...d,this._rgb[3]])}return WI(...this._rgb.slice(0,3))};const WI=(n,e,i)=>(n=nm(n),e=nm(e),i=nm(i),.2126*n+.7152*e+.0722*i),nm=n=>(n/=255,n<=.03928?n/12.92:qI((n+.055)/1.055,2.4)),Cs={},Bh=(n,e,i=.5,...o)=>{let c=o[0]||"lrgb";if(!Cs[c]&&!o.length&&(c=Object.keys(Cs)[0]),!Cs[c])throw new Error(`interpolation mode ${c} is not defined`);return mn(n)!=="object"&&(n=new rr(n)),mn(e)!=="object"&&(e=new rr(e)),Cs[c](n,e,i).alpha(n.alpha()+i*(e.alpha()-n.alpha()))};rr.prototype.mix=rr.prototype.interpolate=function(n,e=.5,...i){return Bh(this,n,e,...i)};rr.prototype.premultiply=function(n=!1){const e=this._rgb,i=e[3];return n?(this._rgb=[e[0]*i,e[1]*i,e[2]*i,i],this):new rr([e[0]*i,e[1]*i,e[2]*i,i],"rgb")};const{sin:XI,cos:JI}=Math,mv=(...n)=>{let[e,i,o]=hn(n,"lch");return isNaN(o)&&(o=0),o=o*RI,[e,JI(o)*i,XI(o)*i]},i1=(...n)=>{n=hn(n,"lch");const[e,i,o]=n,[c,d,f]=mv(e,i,o),[s,v,C]=r1(c,d,f);return[s,v,C,n.length>3?n[3]:1]},YI=(...n)=>{const e=hv(hn(n,"hcl"));return i1(...e)},{sqrt:eF,atan2:tF,round:rF}=Math,yv=(...n)=>{const[e,i,o]=hn(n,"lab"),c=eF(i*i+o*o);let d=(tF(o,i)*NI+360)%360;return rF(c*1e4)===0&&(d=Number.NaN),[e,c,d]},a1=(...n)=>{const[e,i,o,...c]=hn(n,"rgb"),[d,f,s]=n1(e,i,o),[v,C,P]=yv(d,f,s);return[v,C,P,...c.length>0&&c[0]<1?[c[0]]:[]]};rr.prototype.lch=function(){return a1(this._rgb)};rr.prototype.hcl=function(){return hv(a1(this._rgb))};const nF=(...n)=>new rr(...n,"lch"),iF=(...n)=>new rr(...n,"hcl");Object.assign(Cn,{lch:nF,hcl:iF});sn.format.lch=i1;sn.format.hcl=YI;["lch","hcl"].forEach(n=>sn.autodetect.push({p:2,test:(...e)=>{if(e=hn(e,n),mn(e)==="array"&&e.length===3)return n}}));rr.prototype.saturate=function(n=1){const e=this,i=e.lch();return i[1]+=_l.Kn*n,i[1]<0&&(i[1]=0),new rr(i,"lch").alpha(e.alpha(),!0)};rr.prototype.desaturate=function(n=1){return this.saturate(-n)};rr.prototype.set=function(n,e,i=!1){const[o,c]=n.split("."),d=this[o]();if(c){const f=o.indexOf(c)-(o.substr(0,2)==="ok"?2:0);if(f>-1){if(mn(e)=="string")switch(e.charAt(0)){case"+":d[f]+=+e;break;case"-":d[f]+=+e;break;case"*":d[f]*=+e.substr(1);break;case"/":d[f]/=+e.substr(1);break;default:d[f]=+e}else if(mn(e)==="number")d[f]=e;else throw new Error("unsupported value for Color.set");const s=new rr(d,o);return i?(this._rgb=s._rgb,this):s}throw new Error(`unknown channel ${c} in mode ${o}`)}else return d};rr.prototype.tint=function(n=.5,...e){return Bh(this,"white",n,...e)};rr.prototype.shade=function(n=.5,...e){return Bh(this,"black",n,...e)};const aF=(n,e,i)=>{const o=n._rgb,c=e._rgb;return new rr(o[0]+i*(c[0]-o[0]),o[1]+i*(c[1]-o[1]),o[2]+i*(c[2]-o[2]),"rgb")};Cs.rgb=aF;const{sqrt:im,pow:Ku}=Math,sF=(n,e,i)=>{const[o,c,d]=n._rgb,[f,s,v]=e._rgb;return new rr(im(Ku(o,2)*(1-i)+Ku(f,2)*i),im(Ku(c,2)*(1-i)+Ku(s,2)*i),im(Ku(d,2)*(1-i)+Ku(v,2)*i),"rgb")};Cs.lrgb=sF;const oF=(n,e,i)=>{const o=n.lab(),c=e.lab();return new rr(o[0]+i*(c[0]-o[0]),o[1]+i*(c[1]-o[1]),o[2]+i*(c[2]-o[2]),"lab")};Cs.lab=oF;const Th=(n,e,i,o)=>{let c,d;o==="hsl"?(c=n.hsl(),d=e.hsl()):o==="hsv"?(c=n.hsv(),d=e.hsv()):o==="hcg"?(c=n.hcg(),d=e.hcg()):o==="hsi"?(c=n.hsi(),d=e.hsi()):o==="lch"||o==="hcl"?(o="hcl",c=n.hcl(),d=e.hcl()):o==="oklch"&&(c=n.oklch().reverse(),d=e.oklch().reverse());let f,s,v,C,P,M;(o.substr(0,1)==="h"||o==="oklch")&&([f,v,P]=c,[s,C,M]=d);let Q,E,z,V;return!isNaN(f)&&!isNaN(s)?(s>f&&s-f>180?V=s-(f+360):s<f&&f-s>180?V=s+360-f:V=s-f,E=f+i*V):isNaN(f)?isNaN(s)?E=Number.NaN:(E=s,(P==1||P==0)&&o!="hsv"&&(Q=C)):(E=f,(M==1||M==0)&&o!="hsv"&&(Q=v)),Q===void 0&&(Q=v+i*(C-v)),z=P+i*(M-P),o==="oklch"?new rr([z,Q,E],o):new rr([E,Q,z],o)},_v=(n,e,i)=>Th(n,e,i,"lch");Cs.lch=_v;Cs.hcl=_v;const AF=n=>{if(mn(n)=="number"&&n>=0&&n<=16777215){const e=n>>16,i=n>>8&255,o=n&255;return[e,i,o,1]}throw new Error("unknown num color: "+n)},lF=(...n)=>{const[e,i,o]=hn(n,"rgb");return(e<<16)+(i<<8)+o};rr.prototype.num=function(){return lF(this._rgb)};const cF=(...n)=>new rr(...n,"num");Object.assign(Cn,{num:cF});sn.format.num=AF;sn.autodetect.push({p:5,test:(...n)=>{if(n.length===1&&mn(n[0])==="number"&&n[0]>=0&&n[0]<=16777215)return"num"}});const uF=(n,e,i)=>{const o=n.num(),c=e.num();return new rr(o+i*(c-o),"num")};Cs.num=uF;const{floor:hF}=Math,fF=(...n)=>{n=hn(n,"hcg");let[e,i,o]=n,c,d,f;o=o*255;const s=i*255;if(i===0)c=d=f=o;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const v=hF(e),C=e-v,P=o*(1-i),M=P+s*(1-C),Q=P+s*C,E=P+s;switch(v){case 0:[c,d,f]=[E,Q,P];break;case 1:[c,d,f]=[M,E,P];break;case 2:[c,d,f]=[P,E,Q];break;case 3:[c,d,f]=[P,M,E];break;case 4:[c,d,f]=[Q,P,E];break;case 5:[c,d,f]=[E,P,M];break}}return[c,d,f,n.length>3?n[3]:1]},dF=(...n)=>{const[e,i,o]=hn(n,"rgb"),c=cv(e,i,o),d=uv(e,i,o),f=d-c,s=f*100/255,v=c/(255-f)*100;let C;return f===0?C=Number.NaN:(e===d&&(C=(i-o)/f),i===d&&(C=2+(o-e)/f),o===d&&(C=4+(e-i)/f),C*=60,C<0&&(C+=360)),[C,s,v]};rr.prototype.hcg=function(){return dF(this._rgb)};const pF=(...n)=>new rr(...n,"hcg");Cn.hcg=pF;sn.format.hcg=fF;sn.autodetect.push({p:1,test:(...n)=>{if(n=hn(n,"hcg"),mn(n)==="array"&&n.length===3)return"hcg"}});const gF=(n,e,i)=>Th(n,e,i,"hcg");Cs.hcg=gF;const{cos:qu}=Math,mF=(...n)=>{n=hn(n,"hsi");let[e,i,o]=n,c,d,f;return isNaN(e)&&(e=0),isNaN(i)&&(i=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(f=(1-i)/3,c=(1+i*qu(Zl*e)/qu(em-Zl*e))/3,d=1-(f+c)):e<2/3?(e-=1/3,c=(1-i)/3,d=(1+i*qu(Zl*e)/qu(em-Zl*e))/3,f=1-(c+d)):(e-=2/3,d=(1-i)/3,f=(1+i*qu(Zl*e)/qu(em-Zl*e))/3,c=1-(d+f)),c=du(o*c*3),d=du(o*d*3),f=du(o*f*3),[c*255,d*255,f*255,n.length>3?n[3]:1]},{min:yF,sqrt:_F,acos:bF}=Math,vF=(...n)=>{let[e,i,o]=hn(n,"rgb");e/=255,i/=255,o/=255;let c;const d=yF(e,i,o),f=(e+i+o)/3,s=f>0?1-d/f:0;return s===0?c=NaN:(c=(e-i+(e-o))/2,c/=_F((e-i)*(e-i)+(e-o)*(i-o)),c=bF(c),o>i&&(c=Zl-c),c/=Zl),[c*360,s,f]};rr.prototype.hsi=function(){return vF(this._rgb)};const wF=(...n)=>new rr(...n,"hsi");Cn.hsi=wF;sn.format.hsi=mF;sn.autodetect.push({p:2,test:(...n)=>{if(n=hn(n,"hsi"),mn(n)==="array"&&n.length===3)return"hsi"}});const xF=(n,e,i)=>Th(n,e,i,"hsi");Cs.hsi=xF;const i0=(...n)=>{n=hn(n,"hsl");const[e,i,o]=n;let c,d,f;if(i===0)c=d=f=o*255;else{const s=[0,0,0],v=[0,0,0],C=o<.5?o*(1+i):o+i-o*i,P=2*o-C,M=e/360;s[0]=M+1/3,s[1]=M,s[2]=M-1/3;for(let Q=0;Q<3;Q++)s[Q]<0&&(s[Q]+=1),s[Q]>1&&(s[Q]-=1),6*s[Q]<1?v[Q]=P+(C-P)*6*s[Q]:2*s[Q]<1?v[Q]=C:3*s[Q]<2?v[Q]=P+(C-P)*(2/3-s[Q])*6:v[Q]=P;[c,d,f]=[v[0]*255,v[1]*255,v[2]*255]}return n.length>3?[c,d,f,n[3]]:[c,d,f,1]},bv=(...n)=>{n=hn(n,"rgba");let[e,i,o]=n;e/=255,i/=255,o/=255;const c=cv(e,i,o),d=uv(e,i,o),f=(d+c)/2;let s,v;return d===c?(s=0,v=Number.NaN):s=f<.5?(d-c)/(d+c):(d-c)/(2-d-c),e==d?v=(i-o)/(d-c):i==d?v=2+(o-e)/(d-c):o==d&&(v=4+(e-i)/(d-c)),v*=60,v<0&&(v+=360),n.length>3&&n[3]!==void 0?[v,s,f,n[3]]:[v,s,f]};rr.prototype.hsl=function(){return bv(this._rgb)};const BF=(...n)=>new rr(...n,"hsl");Cn.hsl=BF;sn.format.hsl=i0;sn.autodetect.push({p:2,test:(...n)=>{if(n=hn(n,"hsl"),mn(n)==="array"&&n.length===3)return"hsl"}});const CF=(n,e,i)=>Th(n,e,i,"hsl");Cs.hsl=CF;const{floor:IF}=Math,FF=(...n)=>{n=hn(n,"hsv");let[e,i,o]=n,c,d,f;if(o*=255,i===0)c=d=f=o;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const s=IF(e),v=e-s,C=o*(1-i),P=o*(1-i*v),M=o*(1-i*(1-v));switch(s){case 0:[c,d,f]=[o,M,C];break;case 1:[c,d,f]=[P,o,C];break;case 2:[c,d,f]=[C,o,M];break;case 3:[c,d,f]=[C,P,o];break;case 4:[c,d,f]=[M,C,o];break;case 5:[c,d,f]=[o,C,P];break}}return[c,d,f,n.length>3?n[3]:1]},{min:EF,max:SF}=Math,TF=(...n)=>{n=hn(n,"rgb");let[e,i,o]=n;const c=EF(e,i,o),d=SF(e,i,o),f=d-c;let s,v,C;return C=d/255,d===0?(s=Number.NaN,v=0):(v=f/d,e===d&&(s=(i-o)/f),i===d&&(s=2+(o-e)/f),o===d&&(s=4+(e-i)/f),s*=60,s<0&&(s+=360)),[s,v,C]};rr.prototype.hsv=function(){return TF(this._rgb)};const LF=(...n)=>new rr(...n,"hsv");Cn.hsv=LF;sn.format.hsv=FF;sn.autodetect.push({p:2,test:(...n)=>{if(n=hn(n,"hsv"),mn(n)==="array"&&n.length===3)return"hsv"}});const PF=(n,e,i)=>Th(n,e,i,"hsv");Cs.hsv=PF;function mp(n,e){let i=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(e[0])||(e=e.map(f=>[f]));let o=e[0].length,c=e[0].map((f,s)=>e.map(v=>v[s])),d=n.map(f=>c.map(s=>Array.isArray(f)?f.reduce((v,C,P)=>v+C*(s[P]||0),0):s.reduce((v,C)=>v+C*f,0)));return i===1&&(d=d[0]),o===1?d.map(f=>f[0]):d}const s1=(...n)=>{n=hn(n,"lab");const[e,i,o,...c]=n,[d,f,s]=MF([e,i,o]),[v,C,P]=pv(d,f,s);return[v,C,P,...c.length>0&&c[0]<1?[c[0]]:[]]};function MF(n){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],i=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],o=mp(i,n);return mp(e,o.map(c=>c**3))}const o1=(...n)=>{const[e,i,o,...c]=hn(n,"rgb"),d=gv(e,i,o);return[...UF(d),...c.length>0&&c[0]<1?[c[0]]:[]]};function UF(n){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],i=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],o=mp(e,n);return mp(i,o.map(c=>Math.cbrt(c)))}rr.prototype.oklab=function(){return o1(this._rgb)};const kF=(...n)=>new rr(...n,"oklab");Object.assign(Cn,{oklab:kF});sn.format.oklab=s1;sn.autodetect.push({p:2,test:(...n)=>{if(n=hn(n,"oklab"),mn(n)==="array"&&n.length===3)return"oklab"}});const QF=(n,e,i)=>{const o=n.oklab(),c=e.oklab();return new rr(o[0]+i*(c[0]-o[0]),o[1]+i*(c[1]-o[1]),o[2]+i*(c[2]-o[2]),"oklab")};Cs.oklab=QF;const DF=(n,e,i)=>Th(n,e,i,"oklch");Cs.oklch=DF;const{pow:am,sqrt:sm,PI:om,cos:N_,sin:O_,atan2:RF}=Math,NF=(n,e="lrgb",i=null)=>{const o=n.length;i||(i=Array.from(new Array(o)).map(()=>1));const c=o/i.reduce(function(M,Q){return M+Q});if(i.forEach((M,Q)=>{i[Q]*=c}),n=n.map(M=>new rr(M)),e==="lrgb")return OF(n,i);const d=n.shift(),f=d.get(e),s=[];let v=0,C=0;for(let M=0;M<f.length;M++)if(f[M]=(f[M]||0)*i[0],s.push(isNaN(f[M])?0:i[0]),e.charAt(M)==="h"&&!isNaN(f[M])){const Q=f[M]/180*om;v+=N_(Q)*i[0],C+=O_(Q)*i[0]}let P=d.alpha()*i[0];n.forEach((M,Q)=>{const E=M.get(e);P+=M.alpha()*i[Q+1];for(let z=0;z<f.length;z++)if(!isNaN(E[z]))if(s[z]+=i[Q+1],e.charAt(z)==="h"){const V=E[z]/180*om;v+=N_(V)*i[Q+1],C+=O_(V)*i[Q+1]}else f[z]+=E[z]*i[Q+1]});for(let M=0;M<f.length;M++)if(e.charAt(M)==="h"){let Q=RF(C/s[M],v/s[M])/om*180;for(;Q<0;)Q+=360;for(;Q>=360;)Q-=360;f[M]=Q}else f[M]=f[M]/s[M];return P/=o,new rr(f,e).alpha(P>.99999?1:P,!0)},OF=(n,e)=>{const i=n.length,o=[0,0,0,0];for(let c=0;c<n.length;c++){const d=n[c],f=e[c]/i,s=d._rgb;o[0]+=am(s[0],2)*f,o[1]+=am(s[1],2)*f,o[2]+=am(s[2],2)*f,o[3]+=s[3]*f}return o[0]=sm(o[0]),o[1]=sm(o[1]),o[2]=sm(o[2]),o[3]>.9999999&&(o[3]=1),new rr(t1(o))},{pow:zF}=Math;function yp(n){let e="rgb",i=Cn("#ccc"),o=0,c=[0,1],d=[],f=[0,0],s=!1,v=[],C=!1,P=0,M=1,Q=!1,E={},z=!0,V=1;const ee=function(ve){if(ve=ve||["#fff","#000"],ve&&mn(ve)==="string"&&Cn.brewer&&Cn.brewer[ve.toLowerCase()]&&(ve=Cn.brewer[ve.toLowerCase()]),mn(ve)==="array"){ve.length===1&&(ve=[ve[0],ve[0]]),ve=ve.slice(0);for(let me=0;me<ve.length;me++)ve[me]=Cn(ve[me]);d.length=0;for(let me=0;me<ve.length;me++)d.push(me/(ve.length-1))}return Ne(),v=ve},Z=function(ve){if(s!=null){const me=s.length-1;let Qe=0;for(;Qe<me&&ve>=s[Qe];)Qe++;return Qe-1}return 0};let ne=ve=>ve,Be=ve=>ve;const ze=function(ve,me){let Qe,tt;if(me==null&&(me=!1),isNaN(ve)||ve===null)return i;me?tt=ve:s&&s.length>2?tt=Z(ve)/(s.length-2):M!==P?tt=(ve-P)/(M-P):tt=1,tt=Be(tt),me||(tt=ne(tt)),V!==1&&(tt=zF(tt,V)),tt=f[0]+tt*(1-f[0]-f[1]),tt=du(tt,0,1);const se=Math.floor(tt*1e4);if(z&&E[se])Qe=E[se];else{if(mn(v)==="array")for(let ue=0;ue<d.length;ue++){const Fe=d[ue];if(tt<=Fe){Qe=v[ue];break}if(tt>=Fe&&ue===d.length-1){Qe=v[ue];break}if(tt>Fe&&tt<d[ue+1]){tt=(tt-Fe)/(d[ue+1]-Fe),Qe=Cn.interpolate(v[ue],v[ue+1],tt,e);break}}else mn(v)==="function"&&(Qe=v(tt));z&&(E[se]=Qe)}return Qe};var Ne=()=>E={};ee(n);const Oe=function(ve){const me=Cn(ze(ve));return C&&me[C]?me[C]():me};return Oe.classes=function(ve){if(ve!=null){if(mn(ve)==="array")s=ve,c=[ve[0],ve[ve.length-1]];else{const me=Cn.analyze(c);ve===0?s=[me.min,me.max]:s=Cn.limits(me,"e",ve)}return Oe}return s},Oe.domain=function(ve){if(!arguments.length)return c;P=ve[0],M=ve[ve.length-1],d=[];const me=v.length;if(ve.length===me&&P!==M)for(let Qe of Array.from(ve))d.push((Qe-P)/(M-P));else{for(let Qe=0;Qe<me;Qe++)d.push(Qe/(me-1));if(ve.length>2){const Qe=ve.map((se,ue)=>ue/(ve.length-1)),tt=ve.map(se=>(se-P)/(M-P));tt.every((se,ue)=>Qe[ue]===se)||(Be=se=>{if(se<=0||se>=1)return se;let ue=0;for(;se>=tt[ue+1];)ue++;const Fe=(se-tt[ue])/(tt[ue+1]-tt[ue]);return Qe[ue]+Fe*(Qe[ue+1]-Qe[ue])})}}return c=[P,M],Oe},Oe.mode=function(ve){return arguments.length?(e=ve,Ne(),Oe):e},Oe.range=function(ve,me){return ee(ve),Oe},Oe.out=function(ve){return C=ve,Oe},Oe.spread=function(ve){return arguments.length?(o=ve,Oe):o},Oe.correctLightness=function(ve){return ve==null&&(ve=!0),Q=ve,Ne(),Q?ne=function(me){const Qe=ze(0,!0).lab()[0],tt=ze(1,!0).lab()[0],se=Qe>tt;let ue=ze(me,!0).lab()[0];const Fe=Qe+(tt-Qe)*me;let Se=ue-Fe,yt=0,lt=1,mt=20;for(;Math.abs(Se)>.01&&mt-- >0;)(function(){return se&&(Se*=-1),Se<0?(yt=me,me+=(lt-me)*.5):(lt=me,me+=(yt-me)*.5),ue=ze(me,!0).lab()[0],Se=ue-Fe})();return me}:ne=me=>me,Oe},Oe.padding=function(ve){return ve!=null?(mn(ve)==="number"&&(ve=[ve,ve]),f=ve,Oe):f},Oe.colors=function(ve,me){arguments.length<2&&(me="hex");let Qe=[];if(arguments.length===0)Qe=v.slice(0);else if(ve===1)Qe=[Oe(.5)];else if(ve>1){const tt=c[0],se=c[1]-tt;Qe=HF(0,ve).map(ue=>Oe(tt+ue/(ve-1)*se))}else{n=[];let tt=[];if(s&&s.length>2)for(let se=1,ue=s.length,Fe=1<=ue;Fe?se<ue:se>ue;Fe?se++:se--)tt.push((s[se-1]+s[se])*.5);else tt=c;Qe=tt.map(se=>Oe(se))}return Cn[me]&&(Qe=Qe.map(tt=>tt[me]())),Qe},Oe.cache=function(ve){return ve!=null?(z=ve,Oe):z},Oe.gamma=function(ve){return ve!=null?(V=ve,Oe):V},Oe.nodata=function(ve){return ve!=null?(i=Cn(ve),Oe):i},Oe}function HF(n,e,i){let o=[],c=n<e,d=e;for(let f=n;c?f<d:f>d;c?f++:f--)o.push(f);return o}const jF=function(n){let e=[1,1];for(let i=1;i<n;i++){let o=[1];for(let c=1;c<=e.length;c++)o[c]=(e[c]||0)+e[c-1];e=o}return e},VF=function(n){let e,i,o,c;if(n=n.map(d=>new rr(d)),n.length===2)[i,o]=n.map(d=>d.lab()),e=function(d){const f=[0,1,2].map(s=>i[s]+d*(o[s]-i[s]));return new rr(f,"lab")};else if(n.length===3)[i,o,c]=n.map(d=>d.lab()),e=function(d){const f=[0,1,2].map(s=>(1-d)*(1-d)*i[s]+2*(1-d)*d*o[s]+d*d*c[s]);return new rr(f,"lab")};else if(n.length===4){let d;[i,o,c,d]=n.map(f=>f.lab()),e=function(f){const s=[0,1,2].map(v=>(1-f)*(1-f)*(1-f)*i[v]+3*(1-f)*(1-f)*f*o[v]+3*(1-f)*f*f*c[v]+f*f*f*d[v]);return new rr(s,"lab")}}else if(n.length>=5){let d,f,s;d=n.map(v=>v.lab()),s=n.length-1,f=jF(s),e=function(v){const C=1-v,P=[0,1,2].map(M=>d.reduce((Q,E,z)=>Q+f[z]*C**(s-z)*v**z*E[M],0));return new rr(P,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},GF=n=>{const e=VF(n);return e.scale=()=>yp(e),e},{round:vv}=Math;rr.prototype.rgb=function(n=!0){return n===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(vv)};rr.prototype.rgba=function(n=!0){return this._rgb.slice(0,4).map((e,i)=>i<3?n===!1?e:vv(e):e)};const KF=(...n)=>new rr(...n,"rgb");Object.assign(Cn,{rgb:KF});sn.format.rgb=(...n)=>{const e=hn(n,"rgba");return e[3]===void 0&&(e[3]=1),e};sn.autodetect.push({p:3,test:(...n)=>{if(n=hn(n,"rgba"),mn(n)==="array"&&(n.length===3||n.length===4&&mn(n[3])=="number"&&n[3]>=0&&n[3]<=1))return"rgb"}});const MA=(n,e,i)=>{if(!MA[i])throw new Error("unknown blend mode "+i);return MA[i](n,e)},Rc=n=>(e,i)=>{const o=Cn(i).rgb(),c=Cn(e).rgb();return Cn.rgb(n(o,c))},Nc=n=>(e,i)=>{const o=[];return o[0]=n(e[0],i[0]),o[1]=n(e[1],i[1]),o[2]=n(e[2],i[2]),o},qF=n=>n,ZF=(n,e)=>n*e/255,$F=(n,e)=>n>e?e:n,WF=(n,e)=>n>e?n:e,XF=(n,e)=>255*(1-(1-n/255)*(1-e/255)),JF=(n,e)=>e<128?2*n*e/255:255*(1-2*(1-n/255)*(1-e/255)),YF=(n,e)=>255*(1-(1-e/255)/(n/255)),e6=(n,e)=>n===255?255:(n=255*(e/255)/(1-n/255),n>255?255:n);MA.normal=Rc(Nc(qF));MA.multiply=Rc(Nc(ZF));MA.screen=Rc(Nc(XF));MA.overlay=Rc(Nc(JF));MA.darken=Rc(Nc($F));MA.lighten=Rc(Nc(WF));MA.dodge=Rc(Nc(e6));MA.burn=Rc(Nc(YF));const{pow:t6,sin:r6,cos:n6}=Math;function i6(n=300,e=-1.5,i=1,o=1,c=[0,1]){let d=0,f;mn(c)==="array"?f=c[1]-c[0]:(f=0,c=[c,c]);const s=function(v){const C=Zl*((n+120)/360+e*v),P=t6(c[0]+f*v,o),Q=(d!==0?i[0]+v*d:i)*P*(1-P)/2,E=n6(C),z=r6(C),V=P+Q*(-.14861*E+1.78277*z),ee=P+Q*(-.29227*E-.90649*z),Z=P+Q*(1.97294*E);return Cn(t1([V*255,ee*255,Z*255,1]))};return s.start=function(v){return v==null?n:(n=v,s)},s.rotations=function(v){return v==null?e:(e=v,s)},s.gamma=function(v){return v==null?o:(o=v,s)},s.hue=function(v){return v==null?i:(i=v,mn(i)==="array"?(d=i[1]-i[0],d===0&&(i=i[1])):d=0,s)},s.lightness=function(v){return v==null?c:(mn(v)==="array"?(c=v,f=v[1]-v[0]):(c=[v,v],f=0),s)},s.scale=()=>Cn.scale(s),s.hue(i),s}const a6="0123456789abcdef",{floor:s6,random:o6}=Math,A6=()=>{let n="#";for(let e=0;e<6;e++)n+=a6.charAt(s6(o6()*16));return new rr(n,"hex")},{log:z_,pow:l6,floor:c6,abs:u6}=Math;function wv(n,e=null){const i={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return mn(n)==="object"&&(n=Object.values(n)),n.forEach(o=>{e&&mn(o)==="object"&&(o=o[e]),o!=null&&!isNaN(o)&&(i.values.push(o),i.sum+=o,o<i.min&&(i.min=o),o>i.max&&(i.max=o),i.count+=1)}),i.domain=[i.min,i.max],i.limits=(o,c)=>xv(i,o,c),i}function xv(n,e="equal",i=7){mn(n)=="array"&&(n=wv(n));const{min:o,max:c}=n,d=n.values.sort((s,v)=>s-v);if(i===1)return[o,c];const f=[];if(e.substr(0,1)==="c"&&(f.push(o),f.push(c)),e.substr(0,1)==="e"){f.push(o);for(let s=1;s<i;s++)f.push(o+s/i*(c-o));f.push(c)}else if(e.substr(0,1)==="l"){if(o<=0)throw new Error("Logarithmic scales are only possible for values > 0");const s=Math.LOG10E*z_(o),v=Math.LOG10E*z_(c);f.push(o);for(let C=1;C<i;C++)f.push(l6(10,s+C/i*(v-s)));f.push(c)}else if(e.substr(0,1)==="q"){f.push(o);for(let s=1;s<i;s++){const v=(d.length-1)*s/i,C=c6(v);if(C===v)f.push(d[C]);else{const P=v-C;f.push(d[C]*(1-P)+d[C+1]*P)}}f.push(c)}else if(e.substr(0,1)==="k"){let s;const v=d.length,C=new Array(v),P=new Array(i);let M=!0,Q=0,E=null;E=[],E.push(o);for(let ee=1;ee<i;ee++)E.push(o+ee/i*(c-o));for(E.push(c);M;){for(let Z=0;Z<i;Z++)P[Z]=0;for(let Z=0;Z<v;Z++){const ne=d[Z];let Be=Number.MAX_VALUE,ze;for(let Ne=0;Ne<i;Ne++){const Oe=u6(E[Ne]-ne);Oe<Be&&(Be=Oe,ze=Ne),P[ze]++,C[Z]=ze}}const ee=new Array(i);for(let Z=0;Z<i;Z++)ee[Z]=null;for(let Z=0;Z<v;Z++)s=C[Z],ee[s]===null?ee[s]=d[Z]:ee[s]+=d[Z];for(let Z=0;Z<i;Z++)ee[Z]*=1/P[Z];M=!1;for(let Z=0;Z<i;Z++)if(ee[Z]!==E[Z]){M=!0;break}E=ee,Q++,Q>200&&(M=!1)}const z={};for(let ee=0;ee<i;ee++)z[ee]=[];for(let ee=0;ee<v;ee++)s=C[ee],z[s].push(d[ee]);let V=[];for(let ee=0;ee<i;ee++)V.push(z[ee][0]),V.push(z[ee][z[ee].length-1]);V=V.sort((ee,Z)=>ee-Z),f.push(V[0]);for(let ee=1;ee<V.length;ee+=2){const Z=V[ee];!isNaN(Z)&&f.indexOf(Z)===-1&&f.push(Z)}}return f}const h6=(n,e)=>{n=new rr(n),e=new rr(e);const i=n.luminance(),o=e.luminance();return i>o?(i+.05)/(o+.05):(o+.05)/(i+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const H_=.027,f6=5e-4,d6=.1,j_=1.14,yd=.022,V_=1.414,p6=(n,e)=>{n=new rr(n),e=new rr(e),n.alpha()<1&&(n=Bh(e,n,n.alpha(),"rgb"));const i=G_(...n.rgb()),o=G_(...e.rgb()),c=i>=yd?i:i+Math.pow(yd-i,V_),d=o>=yd?o:o+Math.pow(yd-o,V_),f=Math.pow(d,.56)-Math.pow(c,.57),s=Math.pow(d,.65)-Math.pow(c,.62),v=Math.abs(d-c)<f6?0:c<d?f*j_:s*j_;return(Math.abs(v)<d6?0:v>0?v-H_:v+H_)*100};function G_(n,e,i){return .2126729*Math.pow(n/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(i/255,2.4)}const{sqrt:Gl,pow:ma,min:g6,max:m6,atan2:K_,abs:q_,cos:_d,sin:Z_,exp:y6,PI:$_}=Math;function _6(n,e,i=1,o=1,c=1){var d=function(Ie){return 360*Ie/(2*$_)},f=function(Ie){return 2*$_*Ie/360};n=new rr(n),e=new rr(e);const[s,v,C]=Array.from(n.lab()),[P,M,Q]=Array.from(e.lab()),E=(s+P)/2,z=Gl(ma(v,2)+ma(C,2)),V=Gl(ma(M,2)+ma(Q,2)),ee=(z+V)/2,Z=.5*(1-Gl(ma(ee,7)/(ma(ee,7)+ma(25,7)))),ne=v*(1+Z),Be=M*(1+Z),ze=Gl(ma(ne,2)+ma(C,2)),Ne=Gl(ma(Be,2)+ma(Q,2)),Oe=(ze+Ne)/2,ve=d(K_(C,ne)),me=d(K_(Q,Be)),Qe=ve>=0?ve:ve+360,tt=me>=0?me:me+360,se=q_(Qe-tt)>180?(Qe+tt+360)/2:(Qe+tt)/2,ue=1-.17*_d(f(se-30))+.24*_d(f(2*se))+.32*_d(f(3*se+6))-.2*_d(f(4*se-63));let Fe=tt-Qe;Fe=q_(Fe)<=180?Fe:tt<=Qe?Fe+360:Fe-360,Fe=2*Gl(ze*Ne)*Z_(f(Fe)/2);const Se=P-s,yt=Ne-ze,lt=1+.015*ma(E-50,2)/Gl(20+ma(E-50,2)),mt=1+.045*Oe,Ye=1+.015*Oe*ue,gt=30*y6(-ma((se-275)/25,2)),nr=-(2*Gl(ma(Oe,7)/(ma(Oe,7)+ma(25,7))))*Z_(2*f(gt)),Ae=Gl(ma(Se/(i*lt),2)+ma(yt/(o*mt),2)+ma(Fe/(c*Ye),2)+nr*(yt/(o*mt))*(Fe/(c*Ye)));return m6(0,g6(100,Ae))}function b6(n,e,i="lab"){n=new rr(n),e=new rr(e);const o=n.get(i),c=e.get(i);let d=0;for(let f in o){const s=(o[f]||0)-(c[f]||0);d+=s*s}return Math.sqrt(d)}const v6=(...n)=>{try{return new rr(...n),!0}catch{return!1}},w6={cool(){return yp([Cn.hsl(180,1,.9),Cn.hsl(250,.7,.4)])},hot(){return yp(["#000","#f00","#ff0","#fff"]).mode("rgb")}},a0={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Bv=Object.keys(a0),W_=new Map(Bv.map(n=>[n.toLowerCase(),n])),x6=typeof Proxy=="function"?new Proxy(a0,{get(n,e){const i=e.toLowerCase();if(W_.has(i))return n[W_.get(i)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Bv)}}):a0,B6=(...n)=>{n=hn(n,"cmyk");const[e,i,o,c]=n,d=n.length>4?n[4]:1;return c===1?[0,0,0,d]:[e>=1?0:255*(1-e)*(1-c),i>=1?0:255*(1-i)*(1-c),o>=1?0:255*(1-o)*(1-c),d]},{max:X_}=Math,C6=(...n)=>{let[e,i,o]=hn(n,"rgb");e=e/255,i=i/255,o=o/255;const c=1-X_(e,X_(i,o)),d=c<1?1/(1-c):0,f=(1-e-c)*d,s=(1-i-c)*d,v=(1-o-c)*d;return[f,s,v,c]};rr.prototype.cmyk=function(){return C6(this._rgb)};const I6=(...n)=>new rr(...n,"cmyk");Object.assign(Cn,{cmyk:I6});sn.format.cmyk=B6;sn.autodetect.push({p:2,test:(...n)=>{if(n=hn(n,"cmyk"),mn(n)==="array"&&n.length===4)return"cmyk"}});const F6=(...n)=>{const e=hn(n,"hsla");let i=Sh(n)||"lsa";return e[0]=iA(e[0]||0)+"deg",e[1]=iA(e[1]*100)+"%",e[2]=iA(e[2]*100)+"%",i==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),i="hsla"):e.length=3,`${i.substr(0,3)}(${e.join(" ")})`},E6=(...n)=>{const e=hn(n,"lab");let i=Sh(n)||"lab";return e[0]=iA(e[0])+"%",e[1]=iA(e[1]),e[2]=iA(e[2]),i==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},S6=(...n)=>{const e=hn(n,"lch");let i=Sh(n)||"lab";return e[0]=iA(e[0])+"%",e[1]=iA(e[1]),e[2]=isNaN(e[2])?"none":iA(e[2])+"deg",i==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},T6=(...n)=>{const e=hn(n,"lab");return e[0]=iA(e[0]*100)+"%",e[1]=n0(e[1]),e[2]=n0(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},Cv=(...n)=>{const[e,i,o,...c]=hn(n,"rgb"),[d,f,s]=o1(e,i,o),[v,C,P]=yv(d,f,s);return[v,C,P,...c.length>0&&c[0]<1?[c[0]]:[]]},L6=(...n)=>{const e=hn(n,"lch");return e[0]=iA(e[0]*100)+"%",e[1]=n0(e[1]),e[2]=isNaN(e[2])?"none":iA(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:Am}=Math,P6=(...n)=>{const e=hn(n,"rgba");let i=Sh(n)||"rgb";if(i.substr(0,3)==="hsl")return F6(bv(e),i);if(i.substr(0,3)==="lab"){const o=Sf();Wl("d50");const c=E6(n1(e),i);return Wl(o),c}if(i.substr(0,3)==="lch"){const o=Sf();Wl("d50");const c=S6(a1(e),i);return Wl(o),c}return i.substr(0,5)==="oklab"?T6(o1(e)):i.substr(0,5)==="oklch"?L6(Cv(e)):(e[0]=Am(e[0]),e[1]=Am(e[1]),e[2]=Am(e[2]),(i==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),i="rgba"),`${i.substr(0,3)}(${e.slice(0,i==="rgb"?3:4).join(" ")})`)},Iv=(...n)=>{n=hn(n,"lch");const[e,i,o,...c]=n,[d,f,s]=mv(e,i,o),[v,C,P]=s1(d,f,s);return[v,C,P,...c.length>0&&c[0]<1?[c[0]]:[]]},Xl=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,PA=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,_p=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,aA=/\s*/.source,Lh=/\s+/.source,A1=/\s*,\s*/.source,Op=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Ph=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Fv=new RegExp("^rgba?\\("+aA+[Xl,Xl,Xl].join(Lh)+Ph+"\\)$"),Ev=new RegExp("^rgb\\("+aA+[Xl,Xl,Xl].join(A1)+aA+"\\)$"),Sv=new RegExp("^rgba\\("+aA+[Xl,Xl,Xl,PA].join(A1)+aA+"\\)$"),Tv=new RegExp("^hsla?\\("+aA+[Op,_p,_p].join(Lh)+Ph+"\\)$"),Lv=new RegExp("^hsl?\\("+aA+[Op,_p,_p].join(A1)+aA+"\\)$"),Pv=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Mv=new RegExp("^lab\\("+aA+[PA,PA,PA].join(Lh)+Ph+"\\)$"),Uv=new RegExp("^lch\\("+aA+[PA,PA,Op].join(Lh)+Ph+"\\)$"),kv=new RegExp("^oklab\\("+aA+[PA,PA,PA].join(Lh)+Ph+"\\)$"),Qv=new RegExp("^oklch\\("+aA+[PA,PA,Op].join(Lh)+Ph+"\\)$"),{round:Dv}=Math,Zu=n=>n.map((e,i)=>i<=2?du(Dv(e),0,255):e),ya=(n,e=0,i=100,o=!1)=>(typeof n=="string"&&n.endsWith("%")&&(n=parseFloat(n.substring(0,n.length-1))/100,o?n=e+(n+1)*.5*(i-e):n=e+n*(i-e)),+n),Os=(n,e)=>n==="none"?e:n,l1=n=>{if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];let e;if(sn.format.named)try{return sn.format.named(n)}catch{}if((e=n.match(Fv))||(e=n.match(Ev))){let i=e.slice(1,4);for(let c=0;c<3;c++)i[c]=+ya(Os(i[c],0),0,255);i=Zu(i);const o=e[4]!==void 0?+ya(e[4],0,1):1;return i[3]=o,i}if(e=n.match(Sv)){const i=e.slice(1,5);for(let o=0;o<4;o++)i[o]=+ya(i[o],0,255);return i}if((e=n.match(Tv))||(e=n.match(Lv))){const i=e.slice(1,4);i[0]=+Os(i[0].replace("deg",""),0),i[1]=+ya(Os(i[1],0),0,100)*.01,i[2]=+ya(Os(i[2],0),0,100)*.01;const o=Zu(i0(i)),c=e[4]!==void 0?+ya(e[4],0,1):1;return o[3]=c,o}if(e=n.match(Pv)){const i=e.slice(1,4);i[1]*=.01,i[2]*=.01;const o=i0(i);for(let c=0;c<3;c++)o[c]=Dv(o[c]);return o[3]=+e[4],o}if(e=n.match(Mv)){const i=e.slice(1,4);i[0]=ya(Os(i[0],0),0,100),i[1]=ya(Os(i[1],0),-125,125,!0),i[2]=ya(Os(i[2],0),-125,125,!0);const o=Sf();Wl("d50");const c=Zu(r1(i));Wl(o);const d=e[4]!==void 0?+ya(e[4],0,1):1;return c[3]=d,c}if(e=n.match(Uv)){const i=e.slice(1,4);i[0]=ya(i[0],0,100),i[1]=ya(Os(i[1],0),0,150,!1),i[2]=+Os(i[2].replace("deg",""),0);const o=Sf();Wl("d50");const c=Zu(i1(i));Wl(o);const d=e[4]!==void 0?+ya(e[4],0,1):1;return c[3]=d,c}if(e=n.match(kv)){const i=e.slice(1,4);i[0]=ya(Os(i[0],0),0,1),i[1]=ya(Os(i[1],0),-.4,.4,!0),i[2]=ya(Os(i[2],0),-.4,.4,!0);const o=Zu(s1(i)),c=e[4]!==void 0?+ya(e[4],0,1):1;return o[3]=c,o}if(e=n.match(Qv)){const i=e.slice(1,4);i[0]=ya(Os(i[0],0),0,1),i[1]=ya(Os(i[1],0),0,.4,!1),i[2]=+Os(i[2].replace("deg",""),0);const o=Zu(Iv(i)),c=e[4]!==void 0?+ya(e[4],0,1):1;return o[3]=c,o}};l1.test=n=>Fv.test(n)||Tv.test(n)||Mv.test(n)||Uv.test(n)||kv.test(n)||Qv.test(n)||Ev.test(n)||Sv.test(n)||Lv.test(n)||Pv.test(n)||n==="transparent";rr.prototype.css=function(n){return P6(this._rgb,n)};const M6=(...n)=>new rr(...n,"css");Cn.css=M6;sn.format.css=l1;sn.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&mn(n)==="string"&&l1.test(n))return"css"}});sn.format.gl=(...n)=>{const e=hn(n,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const U6=(...n)=>new rr(...n,"gl");Cn.gl=U6;rr.prototype.gl=function(){const n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]};rr.prototype.hex=function(n){return dv(this._rgb,n)};const k6=(...n)=>new rr(...n,"hex");Cn.hex=k6;sn.format.hex=fv;sn.autodetect.push({p:4,test:(n,...e)=>{if(!e.length&&mn(n)==="string"&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});const{log:bd}=Math,Rv=n=>{const e=n/100;let i,o,c;return e<66?(i=255,o=e<6?0:-155.25485562709179-.44596950469579133*(o=e-2)+104.49216199393888*bd(o),c=e<20?0:-254.76935184120902+.8274096064007395*(c=e-10)+115.67994401066147*bd(c)):(i=351.97690566805693+.114206453784165*(i=e-55)-40.25366309332127*bd(i),o=325.4494125711974+.07943456536662342*(o=e-50)-28.0852963507957*bd(o),c=255),[i,o,c,1]},{round:Q6}=Math,D6=(...n)=>{const e=hn(n,"rgb"),i=e[0],o=e[2];let c=1e3,d=4e4;const f=.4;let s;for(;d-c>f;){s=(d+c)*.5;const v=Rv(s);v[2]/v[0]>=o/i?d=s:c=s}return Q6(s)};rr.prototype.temp=rr.prototype.kelvin=rr.prototype.temperature=function(){return D6(this._rgb)};const lm=(...n)=>new rr(...n,"temp");Object.assign(Cn,{temp:lm,kelvin:lm,temperature:lm});sn.format.temp=sn.format.kelvin=sn.format.temperature=Rv;rr.prototype.oklch=function(){return Cv(this._rgb)};const R6=(...n)=>new rr(...n,"oklch");Object.assign(Cn,{oklch:R6});sn.format.oklch=Iv;sn.autodetect.push({p:2,test:(...n)=>{if(n=hn(n,"oklch"),mn(n)==="array"&&n.length===3)return"oklch"}});Object.assign(Cn,{analyze:wv,average:NF,bezier:GF,blend:MA,brewer:x6,Color:rr,colors:xh,contrast:h6,contrastAPCA:p6,cubehelix:i6,deltaE:_6,distance:b6,input:sn,interpolate:Bh,limits:xv,mix:Bh,random:A6,scale:yp,scales:w6,valid:v6});const N6={id:"ensyurin_rinhan",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${Ih}/ensyurin.pmtiles`},metaData:{name:"演習林 林班",description:"森林文化アカデミー演習林の林班。",attribution:"森林文化アカデミー",location:"森林文化アカデミー",tags:["林班図","森林"],maxZoom:17,minZoom:8,sourceLayer:"ensyurin_rinhanfgb",bounds:[136.91917,35.54692,136.926817,35.555122],coverImage:`${bu}/ensyurin.webp`,xyzImageTile:{x:115387,y:51670,z:17}},properties:{keys:["小林班ID","樹種","林齢","area","林班"],titles:[{conditions:["樹種","林齢"],template:"{樹種}林 {林齢}年生"},{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"演習林林班"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"樹種",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#00ff00",pattern:null}},{type:"match",key:"樹種",name:"樹種ごとの色分け",mapping:{categories:["スギ","ヒノキ","アカマツ","スラッシュマツ","広葉樹","草地","その他岩石"],values:["#33a02c","#b2df8a","#e31a1c","#1f78b4","#fdbf6f","#a6cee3","#fb9a99"],patterns:[null,null,null,null,null,null,null]},noData:{values:"transparent",pattern:null}},{type:"match",key:"林班",name:"林班ごとの色分け",mapping:{categories:["1","2","3"],values:["#7fc97f","#beaed4","#fdc086"],patterns:[null,null,null]},noData:{values:"transparent",pattern:null}},{type:"step",key:"林齢",name:"林齢の範囲による色分け",mapping:{range:[0,100],divisions:5,values:["#e5f5f9","#2ca25f"]}},{type:"step",key:"area",name:"面積の範囲による色分け",mapping:{range:[0,1],divisions:5,values:["#fee8c8","#e34a33"]}}]},outline:{show:!0,color:"#ffffff",width:2,lineStyle:"dashed"},labels:{key:"樹種",show:!0,expressions:[{key:"樹種",name:"樹種",value:["case",["!",["has","樹種"]],"",["==",["get","樹種"],""],"",["match",["get","樹種"],["草地","その他","岩石"],["get","樹種"],["concat",["get","樹種"],"林"]]]},{key:"area",name:"面積",value:"{area} ha"},{key:"小林班ID",name:"小林班ID",value:"{小林班ID}"},{key:"林班",name:"林班",value:"{林班}林班"},{key:"林齢",name:"林齢",value:["case",["all",["has","林齢"],["!=",["get","林齢"],""]],["concat",["get","林齢"],"年生"],""]},{key:"植栽年",name:"植栽年",value:["case",["all",["has","植栽年"],["!=",["get","植栽年"],""]],["concat",["get","植栽年"],"年"],""]}]}}},O6=Object.freeze(Object.defineProperty({__proto__:null,default:N6},Symbol.toStringTag,{value:"Module"})),z6={id:"ensyurin_siken",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${Ih}/ensyurin.pmtiles`},metaData:{name:"演習林 試験地",description:"森林文化アカデミー演習林の試験地。",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:17,minZoom:8,tags:["森林"],sourceLayer:"ensyurin_sikenfgb",bounds:[136.920084,35.549852,136.925498,35.554401],coverImage:`${bu}/ensyurin_siken.webp`},properties:{keys:["活用内容","活用期間","番号"],titles:[{conditions:["活用内容","活用期間"],template:"{活用内容} {活用期間}"},{conditions:["活用内容"],template:"{活用内容}"},{conditions:[],template:"演習林林班"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.7,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#377eb8"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"活用内容",show:!0,expressions:[{key:"活用内容",name:"活用内容",value:"{活用内容}"},{key:"活用期間",name:"活用期間",value:"{活用期間}"}]}}},H6=Object.freeze(Object.defineProperty({__proto__:null,default:z6},Symbol.toStringTag,{value:"Module"})),j6={id:"ksj_tmplt_a15",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${Ih}/ksj_tmplt_a15.pmtiles`},metaData:{name:"鳥獣保護区",description:"国土数値情報より鳥獣保護区（2015年）のデータを加工して作成",attribution:"国土数値情報",downloadUrl:"https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-A15.html",location:"全国",maxZoom:14,minZoom:1,tags:["鳥獣保護区"],sourceLayer:"ksj_tmplt_a15",bounds:[123.00744367,24.19197,153.99083742,45.45090445],xyzImageTile:{x:903,y:400,z:10}},properties:{keys:["鳥獣保護区名","都道府県コード","指定機関コード","保護区分コード","指定日","解除日","ID","指定機関","保護区分","都道府県"],titles:[{conditions:["鳥獣保護区名","保護区分"],template:"{鳥獣保護区名} {保護区分}"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"保護区分",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#33f543"}},{type:"match",key:"保護区分",name:"保護区分",mapping:{categories:["鳥獣保護区","特別保護地区","休猟区","特例休猟区"],values:["#f55b23","#f5d133","#00b4fb","#50e3c2"],patterns:[null,null,null,null]},noData:{values:"transparent",pattern:null}}]},outline:{show:!0,color:"#444444",width:.5,lineStyle:"solid"},labels:{key:"鳥獣保護区名",show:!1,expressions:[{key:"鳥獣保護区名",name:"鳥獣保護区名",value:"{鳥獣保護区名}"},{key:"都道府県コード",name:"都道府県コード",value:"{都道府県コード}"},{key:"指定機関コード",name:"指定機関コード",value:"{指定機関コード}"},{key:"保護区分コード",name:"保護区分コード",value:"{保護区分コード}"},{key:"指定日",name:"指定日",value:"{指定日}"},{key:"解除日",name:"解除日",value:"{解除日}"},{key:"ID",name:"ID",value:"{ID}"},{key:"指定機関",name:"指定機関",value:"{指定機関}"},{key:"保護区分",name:"保護区分",value:"{保護区分}"},{key:"都道府県",name:"都道府県",value:"{都道府県}"}]}}},V6=Object.freeze(Object.defineProperty({__proto__:null,default:j6},Symbol.toStringTag,{value:"Module"})),tU=(n,e)=>{var o;const i=(o=e.find(({conditions:c})=>c.every(d=>n[d]!==void 0)))==null?void 0:o.template;return i?i.replace(/\{([^}]+)\}/g,(c,d)=>n[d]!==void 0?n[d]:`{${d}}`):""},G6=n=>{const e=new Set;return n.features.forEach(i=>{i.properties&&Object.keys(i.properties).forEach(o=>{e.add(o)})}),Array.from(e)},K6={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}},Nv=(n="Set1")=>{const e=K6[n][8],i=Math.floor(Math.random()*e.length);return e[i]};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s0=function(n,e){return s0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])},s0(n,e)};function kA(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s0(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var o0=function(){return o0=Object.assign||function(e){for(var i,o=1,c=arguments.length;o<c;o++){i=arguments[o];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e[d]=i[d])}return e},o0.apply(this,arguments)};function Hs(n,e,i,o){function c(d){return d instanceof i?d:new i(function(f){f(d)})}return new(i||(i=Promise))(function(d,f){function s(P){try{C(o.next(P))}catch(M){f(M)}}function v(P){try{C(o.throw(P))}catch(M){f(M)}}function C(P){P.done?d(P.value):c(P.value).then(s,v)}C((o=o.apply(n,[])).next())})}function xs(n,e){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,f;return f={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function s(C){return function(P){return v([C,P])}}function v(C){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,c&&(d=C[0]&2?c.return:C[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,C[1])).done)return d;switch(c=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return i.label++,{value:C[1],done:!1};case 5:i.label++,c=C[1],C=[0];continue;case 7:C=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){i=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){i.label=C[1];break}if(C[0]===6&&i.label<d[1]){i.label=d[1],d=C;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push(C);break}d[2]&&i.ops.pop(),i.trys.pop();continue}C=e.call(n,i)}catch(P){C=[6,P],c=0}finally{o=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function vd(n,e,i){if(arguments.length===2)for(var o=0,c=e.length,d;o<c;o++)(d||!(o in e))&&(d||(d=Array.prototype.slice.call(e,0,o)),d[o]=e[o]);return n.concat(d||e)}var tc=function(){function n(e,i,o,c){this.left=e,this.top=i,this.width=o,this.height=c}return n.prototype.add=function(e,i,o,c){return new n(this.left+e,this.top+i,this.width+o,this.height+c)},n.fromClientRect=function(e,i){return new n(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height)},n.fromDOMRectList=function(e,i){var o=Array.from(i).find(function(c){return c.width!==0});return o?new n(o.left+e.windowBounds.left,o.top+e.windowBounds.top,o.width,o.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),zp=function(n,e){return tc.fromClientRect(n,e.getBoundingClientRect())},q6=function(n){var e=n.body,i=n.documentElement;if(!e||!i)throw new Error("Unable to get document size");var o=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),c=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new tc(0,0,o,c)},Hp=function(n){for(var e=[],i=0,o=n.length;i<o;){var c=n.charCodeAt(i++);if(c>=55296&&c<=56319&&i<o){var d=n.charCodeAt(i++);(d&64512)===56320?e.push(((c&1023)<<10)+(d&1023)+65536):(e.push(c),i--)}else e.push(c)}return e},Yi=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var o=[],c=-1,d="";++c<i;){var f=n[c];f<=65535?o.push(f):(f-=65536,o.push((f>>10)+55296,f%1024+56320)),(c+1===i||o.length>16384)&&(d+=String.fromCharCode.apply(String,o),o.length=0)}return d},J_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wd=0;wd<J_.length;wd++)Z6[J_.charCodeAt(wd)]=wd;var Y_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xd=0;xd<Y_.length;xd++)lf[Y_.charCodeAt(xd)]=xd;var $6=function(n){var e=n.length*.75,i=n.length,o,c=0,d,f,s,v;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),P=Array.isArray(C)?C:new Uint8Array(C);for(o=0;o<i;o+=4)d=lf[n.charCodeAt(o)],f=lf[n.charCodeAt(o+1)],s=lf[n.charCodeAt(o+2)],v=lf[n.charCodeAt(o+3)],P[c++]=d<<2|f>>4,P[c++]=(f&15)<<4|s>>2,P[c++]=(s&3)<<6|v&63;return C},W6=function(n){for(var e=n.length,i=[],o=0;o<e;o+=2)i.push(n[o+1]<<8|n[o]);return i},X6=function(n){for(var e=n.length,i=[],o=0;o<e;o+=4)i.push(n[o+3]<<24|n[o+2]<<16|n[o+1]<<8|n[o]);return i},pu=5,c1=11,cm=2,J6=c1-pu,Ov=65536>>pu,Y6=1<<pu,um=Y6-1,eE=1024>>pu,tE=Ov+eE,rE=tE,nE=32,iE=rE+nE,aE=65536>>c1,sE=1<<J6,oE=sE-1,eb=function(n,e,i){return n.slice?n.slice(e,i):new Uint16Array(Array.prototype.slice.call(n,e,i))},AE=function(n,e,i){return n.slice?n.slice(e,i):new Uint32Array(Array.prototype.slice.call(n,e,i))},lE=function(n,e){var i=$6(n),o=Array.isArray(i)?X6(i):new Uint32Array(i),c=Array.isArray(i)?W6(i):new Uint16Array(i),d=24,f=eb(c,d/2,o[4]/2),s=o[5]===2?eb(c,(d+o[4])/2):AE(o,Math.ceil((d+o[4])/4));return new cE(o[0],o[1],o[2],o[3],f,s)},cE=function(){function n(e,i,o,c,d,f){this.initialValue=e,this.errorValue=i,this.highStart=o,this.highValueIndex=c,this.index=d,this.data=f}return n.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>pu],i=(i<<cm)+(e&um),this.data[i];if(e<=65535)return i=this.index[Ov+(e-55296>>pu)],i=(i<<cm)+(e&um),this.data[i];if(e<this.highStart)return i=iE-aE+(e>>c1),i=this.index[i],i+=e>>pu&oE,i=this.index[i],i=(i<<cm)+(e&um),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),tb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bd=0;Bd<tb.length;Bd++)uE[tb.charCodeAt(Bd)]=Bd;var hE="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",rb=50,fE=1,zv=2,Hv=3,dE=4,pE=5,nb=7,jv=8,ib=9,Ec=10,A0=11,ab=12,l0=13,gE=14,cf=15,c0=16,Cd=17,af=18,mE=19,sb=20,u0=21,sf=22,hm=23,$u=24,Po=25,uf=26,hf=27,Wu=28,yE=29,su=30,_E=31,Id=32,Fd=33,h0=34,f0=35,d0=36,Tf=37,p0=38,Wd=39,Xd=40,fm=41,Vv=42,bE=43,vE=[9001,65288],Gv="!",wn="×",Ed="÷",g0=lE(hE),Kl=[su,d0],m0=[fE,zv,Hv,pE],Kv=[Ec,jv],ob=[hf,uf],wE=m0.concat(Kv),Ab=[p0,Wd,Xd,h0,f0],xE=[cf,l0],BE=function(n,e){e===void 0&&(e="strict");var i=[],o=[],c=[];return n.forEach(function(d,f){var s=g0.get(d);if(s>rb?(c.push(!0),s-=rb):c.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(d)!==-1)return o.push(f),i.push(c0);if(s===dE||s===A0){if(f===0)return o.push(f),i.push(su);var v=i[f-1];return wE.indexOf(v)===-1?(o.push(o[f-1]),i.push(v)):(o.push(f),i.push(su))}if(o.push(f),s===_E)return i.push(e==="strict"?u0:Tf);if(s===Vv||s===yE)return i.push(su);if(s===bE)return d>=131072&&d<=196605||d>=196608&&d<=262141?i.push(Tf):i.push(su);i.push(s)}),[o,i,c]},dm=function(n,e,i,o){var c=o[i];if(Array.isArray(n)?n.indexOf(c)!==-1:n===c)for(var d=i;d<=o.length;){d++;var f=o[d];if(f===e)return!0;if(f!==Ec)break}if(c===Ec)for(var d=i;d>0;){d--;var s=o[d];if(Array.isArray(n)?n.indexOf(s)!==-1:n===s)for(var v=i;v<=o.length;){v++;var f=o[v];if(f===e)return!0;if(f!==Ec)break}if(s!==Ec)break}return!1},lb=function(n,e){for(var i=n;i>=0;){var o=e[i];if(o===Ec)i--;else return o}return 0},CE=function(n,e,i,o,c){if(i[o]===0)return wn;var d=o-1;if(Array.isArray(c)&&c[d]===!0)return wn;var f=d-1,s=d+1,v=e[d],C=f>=0?e[f]:0,P=e[s];if(v===zv&&P===Hv)return wn;if(m0.indexOf(v)!==-1)return Gv;if(m0.indexOf(P)!==-1||Kv.indexOf(P)!==-1)return wn;if(lb(d,e)===jv)return Ed;if(g0.get(n[d])===A0||(v===Id||v===Fd)&&g0.get(n[s])===A0||v===nb||P===nb||v===ib||[Ec,l0,cf].indexOf(v)===-1&&P===ib||[Cd,af,mE,$u,Wu].indexOf(P)!==-1||lb(d,e)===sf||dm(hm,sf,d,e)||dm([Cd,af],u0,d,e)||dm(ab,ab,d,e))return wn;if(v===Ec)return Ed;if(v===hm||P===hm)return wn;if(P===c0||v===c0)return Ed;if([l0,cf,u0].indexOf(P)!==-1||v===gE||C===d0&&xE.indexOf(v)!==-1||v===Wu&&P===d0||P===sb||Kl.indexOf(P)!==-1&&v===Po||Kl.indexOf(v)!==-1&&P===Po||v===hf&&[Tf,Id,Fd].indexOf(P)!==-1||[Tf,Id,Fd].indexOf(v)!==-1&&P===uf||Kl.indexOf(v)!==-1&&ob.indexOf(P)!==-1||ob.indexOf(v)!==-1&&Kl.indexOf(P)!==-1||[hf,uf].indexOf(v)!==-1&&(P===Po||[sf,cf].indexOf(P)!==-1&&e[s+1]===Po)||[sf,cf].indexOf(v)!==-1&&P===Po||v===Po&&[Po,Wu,$u].indexOf(P)!==-1)return wn;if([Po,Wu,$u,Cd,af].indexOf(P)!==-1)for(var M=d;M>=0;){var Q=e[M];if(Q===Po)return wn;if([Wu,$u].indexOf(Q)!==-1)M--;else break}if([hf,uf].indexOf(P)!==-1)for(var M=[Cd,af].indexOf(v)!==-1?f:d;M>=0;){var Q=e[M];if(Q===Po)return wn;if([Wu,$u].indexOf(Q)!==-1)M--;else break}if(p0===v&&[p0,Wd,h0,f0].indexOf(P)!==-1||[Wd,h0].indexOf(v)!==-1&&[Wd,Xd].indexOf(P)!==-1||[Xd,f0].indexOf(v)!==-1&&P===Xd||Ab.indexOf(v)!==-1&&[sb,uf].indexOf(P)!==-1||Ab.indexOf(P)!==-1&&v===hf||Kl.indexOf(v)!==-1&&Kl.indexOf(P)!==-1||v===$u&&Kl.indexOf(P)!==-1||Kl.concat(Po).indexOf(v)!==-1&&P===sf&&vE.indexOf(n[s])===-1||Kl.concat(Po).indexOf(P)!==-1&&v===af)return wn;if(v===fm&&P===fm){for(var E=i[d],z=1;E>0&&(E--,e[E]===fm);)z++;if(z%2!==0)return wn}return v===Id&&P===Fd?wn:Ed},IE=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var i=BE(n,e.lineBreak),o=i[0],c=i[1],d=i[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(c=c.map(function(s){return[Po,su,Vv].indexOf(s)!==-1?Tf:s}));var f=e.wordBreak==="keep-all"?d.map(function(s,v){return s&&n[v]>=19968&&n[v]<=40959}):void 0;return[o,c,f]},FE=function(){function n(e,i,o,c){this.codePoints=e,this.required=i===Gv,this.start=o,this.end=c}return n.prototype.slice=function(){return Yi.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),EE=function(n,e){var i=Hp(n),o=IE(i,e),c=o[0],d=o[1],f=o[2],s=i.length,v=0,C=0;return{next:function(){if(C>=s)return{done:!0,value:null};for(var P=wn;C<s&&(P=CE(i,d,c,++C,f))===wn;);if(P!==wn||C===s){var M=new FE(i,P,v,C);return v=C,{value:M,done:!1}}return{done:!0,value:null}}}},SE=1,TE=2,Rf=4,cb=8,bp=10,ub=47,yf=92,LE=9,PE=32,Sd=34,of=61,ME=35,UE=36,kE=37,Td=39,Ld=40,Af=41,QE=95,so=45,DE=33,RE=60,NE=62,OE=64,zE=91,HE=93,jE=61,VE=123,Pd=63,GE=125,hb=124,KE=126,qE=128,fb=65533,pm=42,uu=43,ZE=44,$E=58,WE=59,Lf=46,XE=0,JE=8,YE=11,eS=14,tS=31,rS=127,fl=-1,qv=48,Zv=97,$v=101,nS=102,iS=117,aS=122,Wv=65,Xv=69,Jv=70,sS=85,oS=90,Bs=function(n){return n>=qv&&n<=57},AS=function(n){return n>=55296&&n<=57343},Xu=function(n){return Bs(n)||n>=Wv&&n<=Jv||n>=Zv&&n<=nS},lS=function(n){return n>=Zv&&n<=aS},cS=function(n){return n>=Wv&&n<=oS},uS=function(n){return lS(n)||cS(n)},hS=function(n){return n>=qE},Md=function(n){return n===bp||n===LE||n===PE},vp=function(n){return uS(n)||hS(n)||n===QE},db=function(n){return vp(n)||Bs(n)||n===so},fS=function(n){return n>=XE&&n<=JE||n===YE||n>=eS&&n<=tS||n===rS},Fc=function(n,e){return n!==yf?!1:e!==bp},Ud=function(n,e,i){return n===so?vp(e)||Fc(e,i):vp(n)?!0:!!(n===yf&&Fc(n,e))},gm=function(n,e,i){return n===uu||n===so?Bs(e)?!0:e===Lf&&Bs(i):Bs(n===Lf?e:n)},dS=function(n){var e=0,i=1;(n[e]===uu||n[e]===so)&&(n[e]===so&&(i=-1),e++);for(var o=[];Bs(n[e]);)o.push(n[e++]);var c=o.length?parseInt(Yi.apply(void 0,o),10):0;n[e]===Lf&&e++;for(var d=[];Bs(n[e]);)d.push(n[e++]);var f=d.length,s=f?parseInt(Yi.apply(void 0,d),10):0;(n[e]===Xv||n[e]===$v)&&e++;var v=1;(n[e]===uu||n[e]===so)&&(n[e]===so&&(v=-1),e++);for(var C=[];Bs(n[e]);)C.push(n[e++]);var P=C.length?parseInt(Yi.apply(void 0,C),10):0;return i*(c+s*Math.pow(10,-f))*Math.pow(10,v*P)},pS={type:2},gS={type:3},mS={type:4},yS={type:13},_S={type:8},bS={type:21},vS={type:9},wS={type:10},xS={type:11},BS={type:12},CS={type:14},kd={type:23},IS={type:1},FS={type:25},ES={type:24},SS={type:26},TS={type:27},LS={type:28},PS={type:29},MS={type:31},y0={type:32},Yv=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(Hp(e))},n.prototype.read=function(){for(var e=[],i=this.consumeToken();i!==y0;)e.push(i),i=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Sd:return this.consumeStringToken(Sd);case ME:var i=this.peekCodePoint(0),o=this.peekCodePoint(1),c=this.peekCodePoint(2);if(db(i)||Fc(o,c)){var d=Ud(i,o,c)?TE:SE,f=this.consumeName();return{type:5,value:f,flags:d}}break;case UE:if(this.peekCodePoint(0)===of)return this.consumeCodePoint(),yS;break;case Td:return this.consumeStringToken(Td);case Ld:return pS;case Af:return gS;case pm:if(this.peekCodePoint(0)===of)return this.consumeCodePoint(),CS;break;case uu:if(gm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ZE:return mS;case so:var s=e,v=this.peekCodePoint(0),C=this.peekCodePoint(1);if(gm(s,v,C))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Ud(s,v,C))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(v===so&&C===NE)return this.consumeCodePoint(),this.consumeCodePoint(),ES;break;case Lf:if(gm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ub:if(this.peekCodePoint(0)===pm)for(this.consumeCodePoint();;){var P=this.consumeCodePoint();if(P===pm&&(P=this.consumeCodePoint(),P===ub))return this.consumeToken();if(P===fl)return this.consumeToken()}break;case $E:return SS;case WE:return TS;case RE:if(this.peekCodePoint(0)===DE&&this.peekCodePoint(1)===so&&this.peekCodePoint(2)===so)return this.consumeCodePoint(),this.consumeCodePoint(),FS;break;case OE:var M=this.peekCodePoint(0),Q=this.peekCodePoint(1),E=this.peekCodePoint(2);if(Ud(M,Q,E)){var f=this.consumeName();return{type:7,value:f}}break;case zE:return LS;case yf:if(Fc(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case HE:return PS;case jE:if(this.peekCodePoint(0)===of)return this.consumeCodePoint(),_S;break;case VE:return xS;case GE:return BS;case iS:case sS:var z=this.peekCodePoint(0),V=this.peekCodePoint(1);return z===uu&&(Xu(V)||V===Pd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case hb:if(this.peekCodePoint(0)===of)return this.consumeCodePoint(),vS;if(this.peekCodePoint(0)===hb)return this.consumeCodePoint(),bS;break;case KE:if(this.peekCodePoint(0)===of)return this.consumeCodePoint(),wS;break;case fl:return y0}return Md(e)?(this.consumeWhiteSpace(),MS):Bs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):vp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Yi(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],i=this.consumeCodePoint();Xu(i)&&e.length<6;)e.push(i),i=this.consumeCodePoint();for(var o=!1;i===Pd&&e.length<6;)e.push(i),i=this.consumeCodePoint(),o=!0;if(o){var c=parseInt(Yi.apply(void 0,e.map(function(v){return v===Pd?qv:v})),16),d=parseInt(Yi.apply(void 0,e.map(function(v){return v===Pd?Jv:v})),16);return{type:30,start:c,end:d}}var f=parseInt(Yi.apply(void 0,e),16);if(this.peekCodePoint(0)===so&&Xu(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var s=[];Xu(i)&&s.length<6;)s.push(i),i=this.consumeCodePoint();var d=parseInt(Yi.apply(void 0,s),16);return{type:30,start:f,end:d}}else return{type:30,start:f,end:f}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ld?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ld?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===fl)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===Td||i===Sd){var o=this.consumeStringToken(this.consumeCodePoint());return o.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===fl||this.peekCodePoint(0)===Af)?(this.consumeCodePoint(),{type:22,value:o.value}):(this.consumeBadUrlRemnants(),kd)}for(;;){var c=this.consumeCodePoint();if(c===fl||c===Af)return{type:22,value:Yi.apply(void 0,e)};if(Md(c))return this.consumeWhiteSpace(),this.peekCodePoint(0)===fl||this.peekCodePoint(0)===Af?(this.consumeCodePoint(),{type:22,value:Yi.apply(void 0,e)}):(this.consumeBadUrlRemnants(),kd);if(c===Sd||c===Td||c===Ld||fS(c))return this.consumeBadUrlRemnants(),kd;if(c===yf)if(Fc(c,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),kd;else e.push(c)}},n.prototype.consumeWhiteSpace=function(){for(;Md(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Af||e===fl)return;Fc(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var i=5e4,o="";e>0;){var c=Math.min(i,e);o+=Yi.apply(void 0,this._value.splice(0,c)),e-=c}return this._value.shift(),o},n.prototype.consumeStringToken=function(e){var i="",o=0;do{var c=this._value[o];if(c===fl||c===void 0||c===e)return i+=this.consumeStringSlice(o),{type:0,value:i};if(c===bp)return this._value.splice(0,o),IS;if(c===yf){var d=this._value[o+1];d!==fl&&d!==void 0&&(d===bp?(i+=this.consumeStringSlice(o),o=-1,this._value.shift()):Fc(c,d)&&(i+=this.consumeStringSlice(o),i+=Yi(this.consumeEscapedCodePoint()),o=-1))}o++}while(!0)},n.prototype.consumeNumber=function(){var e=[],i=Rf,o=this.peekCodePoint(0);for((o===uu||o===so)&&e.push(this.consumeCodePoint());Bs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());o=this.peekCodePoint(0);var c=this.peekCodePoint(1);if(o===Lf&&Bs(c))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=cb;Bs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());o=this.peekCodePoint(0),c=this.peekCodePoint(1);var d=this.peekCodePoint(2);if((o===Xv||o===$v)&&((c===uu||c===so)&&Bs(d)||Bs(c)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=cb;Bs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[dS(e),i]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),i=e[0],o=e[1],c=this.peekCodePoint(0),d=this.peekCodePoint(1),f=this.peekCodePoint(2);if(Ud(c,d,f)){var s=this.consumeName();return{type:15,number:i,flags:o,unit:s}}return c===kE?(this.consumeCodePoint(),{type:16,number:i,flags:o}):{type:17,number:i,flags:o}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Xu(e)){for(var i=Yi(e);Xu(this.peekCodePoint(0))&&i.length<6;)i+=Yi(this.consumeCodePoint());Md(this.peekCodePoint(0))&&this.consumeCodePoint();var o=parseInt(i,16);return o===0||AS(o)||o>1114111?fb:o}return e===fl?fb:e},n.prototype.consumeName=function(){for(var e="";;){var i=this.consumeCodePoint();if(db(i))e+=Yi(i);else if(Fc(i,this.peekCodePoint(0)))e+=Yi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),e}},n}(),ew=function(){function n(e){this._tokens=e}return n.create=function(e){var i=new Yv;return i.write(e),new n(i.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var i=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var i=this.consumeComponentValue();if(i.type===32)return e;e.push(i),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var i={type:e,values:[]},o=this.consumeToken();;){if(o.type===32||kS(o,e))return i;this.reconsumeToken(o),i.values.push(this.consumeComponentValue()),o=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var i={name:e.value,values:[],type:18};;){var o=this.consumeToken();if(o.type===32||o.type===3)return i;this.reconsumeToken(o),i.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?y0:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),Nf=function(n){return n.type===15},Mh=function(n){return n.type===17},Yn=function(n){return n.type===20},US=function(n){return n.type===0},_0=function(n,e){return Yn(n)&&n.value===e},tw=function(n){return n.type!==31},Ch=function(n){return n.type!==31&&n.type!==4},bl=function(n){var e=[],i=[];return n.forEach(function(o){if(o.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(i),i=[];return}o.type!==31&&i.push(o)}),i.length&&e.push(i),e},kS=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},Qc=function(n){return n.type===17||n.type===15},_a=function(n){return n.type===16||Qc(n)},rw=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},is={type:17,number:0,flags:Rf},u1={type:16,number:50,flags:Rf},Sc={type:16,number:100,flags:Rf},ff=function(n,e,i){var o=n[0],c=n[1];return[fi(o,e),fi(typeof c<"u"?c:o,i)]},fi=function(n,e){if(n.type===16)return n.number/100*e;if(Nf(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},nw="deg",iw="grad",aw="rad",sw="turn",jp={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case nw:return Math.PI*e.number/180;case iw:return Math.PI/200*e.number;case aw:return e.number;case sw:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},ow=function(n){return n.type===15&&(n.unit===nw||n.unit===iw||n.unit===aw||n.unit===sw)},Aw=function(n){var e=n.filter(Yn).map(function(i){return i.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[is,is];case"to top":case"bottom":return rA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[is,Sc];case"to right":case"left":return rA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Sc,Sc];case"to bottom":case"top":return rA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Sc,is];case"to left":case"right":return rA(270)}return 0},rA=function(n){return Math.PI*n/180},Pc={name:"color",parse:function(n,e){if(e.type===18){var i=QS[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(n,e.values)}if(e.type===5){if(e.value.length===3){var o=e.value.substring(0,1),c=e.value.substring(1,2),d=e.value.substring(2,3);return Tc(parseInt(o+o,16),parseInt(c+c,16),parseInt(d+d,16),1)}if(e.value.length===4){var o=e.value.substring(0,1),c=e.value.substring(1,2),d=e.value.substring(2,3),f=e.value.substring(3,4);return Tc(parseInt(o+o,16),parseInt(c+c,16),parseInt(d+d,16),parseInt(f+f,16)/255)}if(e.value.length===6){var o=e.value.substring(0,2),c=e.value.substring(2,4),d=e.value.substring(4,6);return Tc(parseInt(o,16),parseInt(c,16),parseInt(d,16),1)}if(e.value.length===8){var o=e.value.substring(0,2),c=e.value.substring(2,4),d=e.value.substring(4,6),f=e.value.substring(6,8);return Tc(parseInt(o,16),parseInt(c,16),parseInt(d,16),parseInt(f,16)/255)}}if(e.type===20){var s=Jl[e.value.toUpperCase()];if(typeof s<"u")return s}return Jl.TRANSPARENT}},Mc=function(n){return(255&n)===0},ja=function(n){var e=255&n,i=255&n>>8,o=255&n>>16,c=255&n>>24;return e<255?"rgba("+c+","+o+","+i+","+e/255+")":"rgb("+c+","+o+","+i+")"},Tc=function(n,e,i,o){return(n<<24|e<<16|i<<8|Math.round(o*255)<<0)>>>0},pb=function(n,e){if(n.type===17)return n.number;if(n.type===16){var i=e===3?1:255;return e===3?n.number/100*i:Math.round(n.number/100*i)}return 0},gb=function(n,e){var i=e.filter(Ch);if(i.length===3){var o=i.map(pb),c=o[0],d=o[1],f=o[2];return Tc(c,d,f,1)}if(i.length===4){var s=i.map(pb),c=s[0],d=s[1],f=s[2],v=s[3];return Tc(c,d,f,v)}return 0};function mm(n,e,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(e-n)*i*6+n:i<1/2?e:i<2/3?(e-n)*6*(2/3-i)+n:n}var mb=function(n,e){var i=e.filter(Ch),o=i[0],c=i[1],d=i[2],f=i[3],s=(o.type===17?rA(o.number):jp.parse(n,o))/(Math.PI*2),v=_a(c)?c.number/100:0,C=_a(d)?d.number/100:0,P=typeof f<"u"&&_a(f)?fi(f,1):1;if(v===0)return Tc(C*255,C*255,C*255,1);var M=C<=.5?C*(v+1):C+v-C*v,Q=C*2-M,E=mm(Q,M,s+1/3),z=mm(Q,M,s),V=mm(Q,M,s-1/3);return Tc(E*255,z*255,V*255,P)},QS={hsl:mb,hsla:mb,rgb:gb,rgba:gb},_f=function(n,e){return Pc.parse(n,ew.create(e).parseComponentValue())},Jl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},DS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(i){if(Yn(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},RS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Vp=function(n,e){var i=Pc.parse(n,e[0]),o=e[1];return o&&_a(o)?{color:i,stop:o}:{color:i,stop:null}},yb=function(n,e){var i=n[0],o=n[n.length-1];i.stop===null&&(i.stop=is),o.stop===null&&(o.stop=Sc);for(var c=[],d=0,f=0;f<n.length;f++){var s=n[f].stop;if(s!==null){var v=fi(s,e);v>d?c.push(v):c.push(d),d=v}else c.push(null)}for(var C=null,f=0;f<c.length;f++){var P=c[f];if(P===null)C===null&&(C=f);else if(C!==null){for(var M=f-C,Q=c[C-1],E=(P-Q)/(M+1),z=1;z<=M;z++)c[C+z-1]=E*z;C=null}}return n.map(function(V,ee){var Z=V.color;return{color:Z,stop:Math.max(Math.min(1,c[ee]/e),0)}})},NS=function(n,e,i){var o=e/2,c=i/2,d=fi(n[0],e)-o,f=c-fi(n[1],i);return(Math.atan2(f,d)+Math.PI*2)%(Math.PI*2)},OS=function(n,e,i){var o=typeof n=="number"?n:NS(n,e,i),c=Math.abs(e*Math.sin(o))+Math.abs(i*Math.cos(o)),d=e/2,f=i/2,s=c/2,v=Math.sin(o-Math.PI/2)*s,C=Math.cos(o-Math.PI/2)*s;return[c,d-C,d+C,f-v,f+v]},SA=function(n,e){return Math.sqrt(n*n+e*e)},_b=function(n,e,i,o,c){var d=[[0,0],[0,e],[n,0],[n,e]];return d.reduce(function(f,s){var v=s[0],C=s[1],P=SA(i-v,o-C);return(c?P<f.optimumDistance:P>f.optimumDistance)?{optimumCorner:s,optimumDistance:P}:f},{optimumDistance:c?1/0:-1/0,optimumCorner:null}).optimumCorner},zS=function(n,e,i,o,c){var d=0,f=0;switch(n.size){case 0:n.shape===0?d=f=Math.min(Math.abs(e),Math.abs(e-o),Math.abs(i),Math.abs(i-c)):n.shape===1&&(d=Math.min(Math.abs(e),Math.abs(e-o)),f=Math.min(Math.abs(i),Math.abs(i-c)));break;case 2:if(n.shape===0)d=f=Math.min(SA(e,i),SA(e,i-c),SA(e-o,i),SA(e-o,i-c));else if(n.shape===1){var s=Math.min(Math.abs(i),Math.abs(i-c))/Math.min(Math.abs(e),Math.abs(e-o)),v=_b(o,c,e,i,!0),C=v[0],P=v[1];d=SA(C-e,(P-i)/s),f=s*d}break;case 1:n.shape===0?d=f=Math.max(Math.abs(e),Math.abs(e-o),Math.abs(i),Math.abs(i-c)):n.shape===1&&(d=Math.max(Math.abs(e),Math.abs(e-o)),f=Math.max(Math.abs(i),Math.abs(i-c)));break;case 3:if(n.shape===0)d=f=Math.max(SA(e,i),SA(e,i-c),SA(e-o,i),SA(e-o,i-c));else if(n.shape===1){var s=Math.max(Math.abs(i),Math.abs(i-c))/Math.max(Math.abs(e),Math.abs(e-o)),M=_b(o,c,e,i,!1),C=M[0],P=M[1];d=SA(C-e,(P-i)/s),f=s*d}break}return Array.isArray(n.size)&&(d=fi(n.size[0],o),f=n.size.length===2?fi(n.size[1],c):d),[d,f]},HS=function(n,e){var i=rA(180),o=[];return bl(e).forEach(function(c,d){if(d===0){var f=c[0];if(f.type===20&&f.value==="to"){i=Aw(c);return}else if(ow(f)){i=jp.parse(n,f);return}}var s=Vp(n,c);o.push(s)}),{angle:i,stops:o,type:1}},Qd=function(n,e){var i=rA(180),o=[];return bl(e).forEach(function(c,d){if(d===0){var f=c[0];if(f.type===20&&["top","left","right","bottom"].indexOf(f.value)!==-1){i=Aw(c);return}else if(ow(f)){i=(jp.parse(n,f)+rA(270))%rA(360);return}}var s=Vp(n,c);o.push(s)}),{angle:i,stops:o,type:1}},jS=function(n,e){var i=rA(180),o=[],c=1,d=0,f=3,s=[];return bl(e).forEach(function(v,C){var P=v[0];if(C===0){if(Yn(P)&&P.value==="linear"){c=1;return}else if(Yn(P)&&P.value==="radial"){c=2;return}}if(P.type===18){if(P.name==="from"){var M=Pc.parse(n,P.values[0]);o.push({stop:is,color:M})}else if(P.name==="to"){var M=Pc.parse(n,P.values[0]);o.push({stop:Sc,color:M})}else if(P.name==="color-stop"){var Q=P.values.filter(Ch);if(Q.length===2){var M=Pc.parse(n,Q[1]),E=Q[0];Mh(E)&&o.push({stop:{type:16,number:E.number*100,flags:E.flags},color:M})}}}}),c===1?{angle:(i+rA(180))%rA(360),stops:o,type:c}:{size:f,shape:d,stops:o,position:s,type:c}},lw="closest-side",cw="farthest-side",uw="closest-corner",hw="farthest-corner",fw="circle",dw="ellipse",pw="cover",gw="contain",VS=function(n,e){var i=0,o=3,c=[],d=[];return bl(e).forEach(function(f,s){var v=!0;if(s===0){var C=!1;v=f.reduce(function(M,Q){if(C)if(Yn(Q))switch(Q.value){case"center":return d.push(u1),M;case"top":case"left":return d.push(is),M;case"right":case"bottom":return d.push(Sc),M}else(_a(Q)||Qc(Q))&&d.push(Q);else if(Yn(Q))switch(Q.value){case fw:return i=0,!1;case dw:return i=1,!1;case"at":return C=!0,!1;case lw:return o=0,!1;case pw:case cw:return o=1,!1;case gw:case uw:return o=2,!1;case hw:return o=3,!1}else if(Qc(Q)||_a(Q))return Array.isArray(o)||(o=[]),o.push(Q),!1;return M},v)}if(v){var P=Vp(n,f);c.push(P)}}),{size:o,shape:i,stops:c,position:d,type:2}},Dd=function(n,e){var i=0,o=3,c=[],d=[];return bl(e).forEach(function(f,s){var v=!0;if(s===0?v=f.reduce(function(P,M){if(Yn(M))switch(M.value){case"center":return d.push(u1),!1;case"top":case"left":return d.push(is),!1;case"right":case"bottom":return d.push(Sc),!1}else if(_a(M)||Qc(M))return d.push(M),!1;return P},v):s===1&&(v=f.reduce(function(P,M){if(Yn(M))switch(M.value){case fw:return i=0,!1;case dw:return i=1,!1;case gw:case lw:return o=0,!1;case cw:return o=1,!1;case uw:return o=2,!1;case pw:case hw:return o=3,!1}else if(Qc(M)||_a(M))return Array.isArray(o)||(o=[]),o.push(M),!1;return P},v)),v){var C=Vp(n,f);c.push(C)}}),{size:o,shape:i,stops:c,position:d,type:2}},GS=function(n){return n.type===1},KS=function(n){return n.type===2},h1={name:"image",parse:function(n,e){if(e.type===22){var i={url:e.value,type:0};return n.cache.addImage(e.value),i}if(e.type===18){var o=mw[e.name];if(typeof o>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return o(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function qS(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!mw[n.name])}var mw={"linear-gradient":HS,"-moz-linear-gradient":Qd,"-ms-linear-gradient":Qd,"-o-linear-gradient":Qd,"-webkit-linear-gradient":Qd,"radial-gradient":VS,"-moz-radial-gradient":Dd,"-ms-radial-gradient":Dd,"-o-radial-gradient":Dd,"-webkit-radial-gradient":Dd,"-webkit-gradient":jS},ZS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e.filter(function(o){return Ch(o)&&qS(o)}).map(function(o){return h1.parse(n,o)})}},$S={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(i){if(Yn(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},WS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return bl(e).map(function(i){return i.filter(_a)}).map(rw)}},XS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return bl(e).map(function(i){return i.filter(Yn).map(function(o){return o.value}).join(" ")}).map(JS)}},JS=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ph;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(ph||(ph={}));var YS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return bl(e).map(function(i){return i.filter(eT)})}},eT=function(n){return Yn(n)||_a(n)},Gp=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},tT=Gp("top"),rT=Gp("right"),nT=Gp("bottom"),iT=Gp("left"),Kp=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,i){return rw(i.filter(_a))}}},aT=Kp("top-left"),sT=Kp("top-right"),oT=Kp("bottom-right"),AT=Kp("bottom-left"),qp=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},lT=qp("top"),cT=qp("right"),uT=qp("bottom"),hT=qp("left"),Zp=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,i){return Nf(i)?i.number:0}}},fT=Zp("top"),dT=Zp("right"),pT=Zp("bottom"),gT=Zp("left"),mT={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yT={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},_T={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Yn).reduce(function(i,o){return i|bT(o.value)},0)}},bT=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},vT={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},wT={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},wp;(function(n){n.NORMAL="normal",n.STRICT="strict"})(wp||(wp={}));var xT={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return wp.STRICT;case"normal":default:return wp.NORMAL}}},BT={name:"line-height",initialValue:"normal",prefix:!1,type:4},bb=function(n,e){return Yn(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:_a(n)?fi(n,e):e},CT={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:h1.parse(n,e)}},IT={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},b0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},$p=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},FT=$p("top"),ET=$p("right"),ST=$p("bottom"),TT=$p("left"),LT={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Yn).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},PT={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Wp=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},MT=Wp("top"),UT=Wp("right"),kT=Wp("bottom"),QT=Wp("left"),DT={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},RT={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},NT={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&_0(e[0],"none")?[]:bl(e).map(function(i){for(var o={color:Jl.TRANSPARENT,offsetX:is,offsetY:is,blur:is},c=0,d=0;d<i.length;d++){var f=i[d];Qc(f)?(c===0?o.offsetX=f:c===1?o.offsetY=f:o.blur=f,c++):o.color=Pc.parse(n,f)}return o})}},OT={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},zT={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var i=VT[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}return null}},HT=function(n){var e=n.filter(function(i){return i.type===17}).map(function(i){return i.number});return e.length===6?e:null},jT=function(n){var e=n.filter(function(v){return v.type===17}).map(function(v){return v.number}),i=e[0],o=e[1];e[2],e[3];var c=e[4],d=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var f=e[12],s=e[13];return e[14],e[15],e.length===16?[i,o,c,d,f,s]:null},VT={matrix:HT,matrix3d:jT},vb={type:16,number:50,flags:Rf},GT=[vb,vb],KT={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var i=e.filter(_a);return i.length!==2?GT:[i[0],i[1]]}},qT={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},bf;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(bf||(bf={}));var ZT={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return bf.BREAK_ALL;case"keep-all":return bf.KEEP_ALL;case"normal":default:return bf.NORMAL}}},$T={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(Mh(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},yw={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},WT={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return Mh(e)?e.number:1}},XT={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},JT={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Yn).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},YT={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var i=[],o=[];return e.forEach(function(c){switch(c.type){case 20:case 0:i.push(c.value);break;case 17:i.push(c.number.toString());break;case 4:o.push(i.join(" ")),i.length=0;break}}),i.length&&o.push(i.join(" ")),o.map(function(c){return c.indexOf(" ")===-1?c:"'"+c+"'"})}},e8={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},t8={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(Mh(e))return e.number;if(Yn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},r8={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Yn).map(function(i){return i.value})}},n8={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},La=function(n,e){return(n&e)!==0},i8={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e}},a8={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;for(var o=[],c=e.filter(tw),d=0;d<c.length;d++){var f=c[d],s=c[d+1];if(f.type===20){var v=s&&Mh(s)?s.number:1;o.push({counter:f.value,increment:v})}}return o}},s8={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var i=[],o=e.filter(tw),c=0;c<o.length;c++){var d=o[c],f=o[c+1];if(Yn(d)&&d.value!=="none"){var s=f&&Mh(f)?f.number:0;i.push({counter:d.value,reset:s})}}return i}},o8={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(Nf).map(function(i){return yw.parse(n,i)})}},A8={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;var o=[],c=e.filter(US);if(c.length%2!==0)return null;for(var d=0;d<c.length;d+=2){var f=c[d].value,s=c[d+1].value;o.push({open:f,close:s})}return o}},wb=function(n,e,i){if(!n)return"";var o=n[Math.min(e,n.length-1)];return o?i?o.open:o.close:""},l8={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&_0(e[0],"none")?[]:bl(e).map(function(i){for(var o={color:255,offsetX:is,offsetY:is,blur:is,spread:is,inset:!1},c=0,d=0;d<i.length;d++){var f=i[d];_0(f,"inset")?o.inset=!0:Qc(f)?(c===0?o.offsetX=f:c===1?o.offsetY=f:c===2?o.blur=f:o.spread=f,c++):o.color=Pc.parse(n,f)}return o})}},c8={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var i=[0,1,2],o=[];return e.filter(Yn).forEach(function(c){switch(c.value){case"stroke":o.push(1);break;case"fill":o.push(0);break;case"markers":o.push(2);break}}),i.forEach(function(c){o.indexOf(c)===-1&&o.push(c)}),o}},u8={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},h8={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return Nf(e)?e.number:0}},f8=function(){function n(e,i){var o,c;this.animationDuration=vr(e,o8,i.animationDuration),this.backgroundClip=vr(e,DS,i.backgroundClip),this.backgroundColor=vr(e,RS,i.backgroundColor),this.backgroundImage=vr(e,ZS,i.backgroundImage),this.backgroundOrigin=vr(e,$S,i.backgroundOrigin),this.backgroundPosition=vr(e,WS,i.backgroundPosition),this.backgroundRepeat=vr(e,XS,i.backgroundRepeat),this.backgroundSize=vr(e,YS,i.backgroundSize),this.borderTopColor=vr(e,tT,i.borderTopColor),this.borderRightColor=vr(e,rT,i.borderRightColor),this.borderBottomColor=vr(e,nT,i.borderBottomColor),this.borderLeftColor=vr(e,iT,i.borderLeftColor),this.borderTopLeftRadius=vr(e,aT,i.borderTopLeftRadius),this.borderTopRightRadius=vr(e,sT,i.borderTopRightRadius),this.borderBottomRightRadius=vr(e,oT,i.borderBottomRightRadius),this.borderBottomLeftRadius=vr(e,AT,i.borderBottomLeftRadius),this.borderTopStyle=vr(e,lT,i.borderTopStyle),this.borderRightStyle=vr(e,cT,i.borderRightStyle),this.borderBottomStyle=vr(e,uT,i.borderBottomStyle),this.borderLeftStyle=vr(e,hT,i.borderLeftStyle),this.borderTopWidth=vr(e,fT,i.borderTopWidth),this.borderRightWidth=vr(e,dT,i.borderRightWidth),this.borderBottomWidth=vr(e,pT,i.borderBottomWidth),this.borderLeftWidth=vr(e,gT,i.borderLeftWidth),this.boxShadow=vr(e,l8,i.boxShadow),this.color=vr(e,mT,i.color),this.direction=vr(e,yT,i.direction),this.display=vr(e,_T,i.display),this.float=vr(e,vT,i.cssFloat),this.fontFamily=vr(e,YT,i.fontFamily),this.fontSize=vr(e,e8,i.fontSize),this.fontStyle=vr(e,n8,i.fontStyle),this.fontVariant=vr(e,r8,i.fontVariant),this.fontWeight=vr(e,t8,i.fontWeight),this.letterSpacing=vr(e,wT,i.letterSpacing),this.lineBreak=vr(e,xT,i.lineBreak),this.lineHeight=vr(e,BT,i.lineHeight),this.listStyleImage=vr(e,CT,i.listStyleImage),this.listStylePosition=vr(e,IT,i.listStylePosition),this.listStyleType=vr(e,b0,i.listStyleType),this.marginTop=vr(e,FT,i.marginTop),this.marginRight=vr(e,ET,i.marginRight),this.marginBottom=vr(e,ST,i.marginBottom),this.marginLeft=vr(e,TT,i.marginLeft),this.opacity=vr(e,WT,i.opacity);var d=vr(e,LT,i.overflow);this.overflowX=d[0],this.overflowY=d[d.length>1?1:0],this.overflowWrap=vr(e,PT,i.overflowWrap),this.paddingTop=vr(e,MT,i.paddingTop),this.paddingRight=vr(e,UT,i.paddingRight),this.paddingBottom=vr(e,kT,i.paddingBottom),this.paddingLeft=vr(e,QT,i.paddingLeft),this.paintOrder=vr(e,c8,i.paintOrder),this.position=vr(e,RT,i.position),this.textAlign=vr(e,DT,i.textAlign),this.textDecorationColor=vr(e,XT,(o=i.textDecorationColor)!==null&&o!==void 0?o:i.color),this.textDecorationLine=vr(e,JT,(c=i.textDecorationLine)!==null&&c!==void 0?c:i.textDecoration),this.textShadow=vr(e,NT,i.textShadow),this.textTransform=vr(e,OT,i.textTransform),this.transform=vr(e,zT,i.transform),this.transformOrigin=vr(e,KT,i.transformOrigin),this.visibility=vr(e,qT,i.visibility),this.webkitTextStrokeColor=vr(e,u8,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=vr(e,h8,i.webkitTextStrokeWidth),this.wordBreak=vr(e,ZT,i.wordBreak),this.zIndex=vr(e,$T,i.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Mc(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return La(this.display,4)||La(this.display,33554432)||La(this.display,268435456)||La(this.display,536870912)||La(this.display,67108864)||La(this.display,134217728)},n}(),d8=function(){function n(e,i){this.content=vr(e,i8,i.content),this.quotes=vr(e,A8,i.quotes)}return n}(),xb=function(){function n(e,i){this.counterIncrement=vr(e,a8,i.counterIncrement),this.counterReset=vr(e,s8,i.counterReset)}return n}(),vr=function(n,e,i){var o=new Yv,c=i!==null&&typeof i<"u"?i.toString():e.initialValue;o.write(c);var d=new ew(o.read());switch(e.type){case 2:var f=d.parseComponentValue();return e.parse(n,Yn(f)?f.value:e.initialValue);case 0:return e.parse(n,d.parseComponentValue());case 1:return e.parse(n,d.parseComponentValues());case 4:return d.parseComponentValue();case 3:switch(e.format){case"angle":return jp.parse(n,d.parseComponentValue());case"color":return Pc.parse(n,d.parseComponentValue());case"image":return h1.parse(n,d.parseComponentValue());case"length":var s=d.parseComponentValue();return Qc(s)?s:is;case"length-percentage":var v=d.parseComponentValue();return _a(v)?v:is;case"time":return yw.parse(n,d.parseComponentValue())}break}},p8="data-html2canvas-debug",g8=function(n){var e=n.getAttribute(p8);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},v0=function(n,e){var i=g8(n);return i===1||e===i},vl=function(){function n(e,i){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,v0(i,3))debugger;this.styles=new f8(e,window.getComputedStyle(i,null)),B0(i)&&(this.styles.animationDuration.some(function(o){return o>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=zp(this.context,i),v0(i,4)&&(this.flags|=16)}return n}(),m8="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Bb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",df=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Rd=0;Rd<Bb.length;Rd++)df[Bb.charCodeAt(Rd)]=Rd;var y8=function(n){var e=n.length*.75,i=n.length,o,c=0,d,f,s,v;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),P=Array.isArray(C)?C:new Uint8Array(C);for(o=0;o<i;o+=4)d=df[n.charCodeAt(o)],f=df[n.charCodeAt(o+1)],s=df[n.charCodeAt(o+2)],v=df[n.charCodeAt(o+3)],P[c++]=d<<2|f>>4,P[c++]=(f&15)<<4|s>>2,P[c++]=(s&3)<<6|v&63;return C},_8=function(n){for(var e=n.length,i=[],o=0;o<e;o+=2)i.push(n[o+1]<<8|n[o]);return i},b8=function(n){for(var e=n.length,i=[],o=0;o<e;o+=4)i.push(n[o+3]<<24|n[o+2]<<16|n[o+1]<<8|n[o]);return i},gu=5,f1=11,ym=2,v8=f1-gu,_w=65536>>gu,w8=1<<gu,_m=w8-1,x8=1024>>gu,B8=_w+x8,C8=B8,I8=32,F8=C8+I8,E8=65536>>f1,S8=1<<v8,T8=S8-1,Cb=function(n,e,i){return n.slice?n.slice(e,i):new Uint16Array(Array.prototype.slice.call(n,e,i))},L8=function(n,e,i){return n.slice?n.slice(e,i):new Uint32Array(Array.prototype.slice.call(n,e,i))},P8=function(n,e){var i=y8(n),o=Array.isArray(i)?b8(i):new Uint32Array(i),c=Array.isArray(i)?_8(i):new Uint16Array(i),d=24,f=Cb(c,d/2,o[4]/2),s=o[5]===2?Cb(c,(d+o[4])/2):L8(o,Math.ceil((d+o[4])/4));return new M8(o[0],o[1],o[2],o[3],f,s)},M8=function(){function n(e,i,o,c,d,f){this.initialValue=e,this.errorValue=i,this.highStart=o,this.highValueIndex=c,this.index=d,this.data=f}return n.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>gu],i=(i<<ym)+(e&_m),this.data[i];if(e<=65535)return i=this.index[_w+(e-55296>>gu)],i=(i<<ym)+(e&_m),this.data[i];if(e<this.highStart)return i=F8-E8+(e>>f1),i=this.index[i],i+=e>>gu&T8,i=this.index[i],i=(i<<ym)+(e&_m),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Ib="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U8=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Nd=0;Nd<Ib.length;Nd++)U8[Ib.charCodeAt(Nd)]=Nd;var k8=1,bm=2,vm=3,Fb=4,Eb=5,Q8=7,Sb=8,wm=9,xm=10,Tb=11,Lb=12,Pb=13,Mb=14,Bm=15,D8=function(n){for(var e=[],i=0,o=n.length;i<o;){var c=n.charCodeAt(i++);if(c>=55296&&c<=56319&&i<o){var d=n.charCodeAt(i++);(d&64512)===56320?e.push(((c&1023)<<10)+(d&1023)+65536):(e.push(c),i--)}else e.push(c)}return e},R8=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var o=[],c=-1,d="";++c<i;){var f=n[c];f<=65535?o.push(f):(f-=65536,o.push((f>>10)+55296,f%1024+56320)),(c+1===i||o.length>16384)&&(d+=String.fromCharCode.apply(String,o),o.length=0)}return d},N8=P8(m8),eA="×",Cm="÷",O8=function(n){return N8.get(n)},z8=function(n,e,i){var o=i-2,c=e[o],d=e[i-1],f=e[i];if(d===bm&&f===vm)return eA;if(d===bm||d===vm||d===Fb||f===bm||f===vm||f===Fb)return Cm;if(d===Sb&&[Sb,wm,Tb,Lb].indexOf(f)!==-1||(d===Tb||d===wm)&&(f===wm||f===xm)||(d===Lb||d===xm)&&f===xm||f===Pb||f===Eb||f===Q8||d===k8)return eA;if(d===Pb&&f===Mb){for(;c===Eb;)c=e[--o];if(c===Mb)return eA}if(d===Bm&&f===Bm){for(var s=0;c===Bm;)s++,c=e[--o];if(s%2===0)return eA}return Cm},H8=function(n){var e=D8(n),i=e.length,o=0,c=0,d=e.map(O8);return{next:function(){if(o>=i)return{done:!0,value:null};for(var f=eA;o<i&&(f=z8(e,d,++o))===eA;);if(f!==eA||o===i){var s=R8.apply(null,e.slice(c,o));return c=o,{value:s,done:!1}}return{done:!0,value:null}}}},j8=function(n){for(var e=H8(n),i=[],o;!(o=e.next()).done;)o.value&&i.push(o.value.slice());return i},V8=function(n){var e=123;if(n.createRange){var i=n.createRange();if(i.getBoundingClientRect){var o=n.createElement("boundtest");o.style.height=e+"px",o.style.display="block",n.body.appendChild(o),i.selectNode(o);var c=i.getBoundingClientRect(),d=Math.round(c.height);if(n.body.removeChild(o),d===e)return!0}}return!1},G8=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var i=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var o=e.firstChild,c=Hp(o.data).map(function(v){return Yi(v)}),d=0,f={},s=c.every(function(v,C){i.setStart(o,d),i.setEnd(o,d+v.length);var P=i.getBoundingClientRect();d+=v.length;var M=P.x>f.x||P.y>f.y;return f=P,C===0?!0:M});return n.body.removeChild(e),s},K8=function(){return typeof new Image().crossOrigin<"u"},q8=function(){return typeof new XMLHttpRequest().responseType=="string"},Z8=function(n){var e=new Image,i=n.createElement("canvas"),o=i.getContext("2d");if(!o)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{o.drawImage(e,0,0),i.toDataURL()}catch{return!1}return!0},Ub=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},$8=function(n){var e=n.createElement("canvas"),i=100;e.width=i,e.height=i;var o=e.getContext("2d");if(!o)return Promise.reject(!1);o.fillStyle="rgb(0, 255, 0)",o.fillRect(0,0,i,i);var c=new Image,d=e.toDataURL();c.src=d;var f=w0(i,i,0,0,c);return o.fillStyle="red",o.fillRect(0,0,i,i),kb(f).then(function(s){o.drawImage(s,0,0);var v=o.getImageData(0,0,i,i).data;o.fillStyle="red",o.fillRect(0,0,i,i);var C=n.createElement("div");return C.style.backgroundImage="url("+d+")",C.style.height=i+"px",Ub(v)?kb(w0(i,i,0,0,C)):Promise.reject(!1)}).then(function(s){return o.drawImage(s,0,0),Ub(o.getImageData(0,0,i,i).data)}).catch(function(){return!1})},w0=function(n,e,i,o,c){var d="http://www.w3.org/2000/svg",f=document.createElementNS(d,"svg"),s=document.createElementNS(d,"foreignObject");return f.setAttributeNS(null,"width",n.toString()),f.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",i.toString()),s.setAttributeNS(null,"y",o.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),f.appendChild(s),s.appendChild(c),f},kb=function(n){return new Promise(function(e,i){var o=new Image;o.onload=function(){return e(o)},o.onerror=i,o.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},rs={get SUPPORT_RANGE_BOUNDS(){var n=V8(document);return Object.defineProperty(rs,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=rs.SUPPORT_RANGE_BOUNDS&&G8(document);return Object.defineProperty(rs,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=Z8(document);return Object.defineProperty(rs,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?$8(document):Promise.resolve(!1);return Object.defineProperty(rs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=K8();return Object.defineProperty(rs,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=q8();return Object.defineProperty(rs,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(rs,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(rs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},vf=function(){function n(e,i){this.text=e,this.bounds=i}return n}(),W8=function(n,e,i,o){var c=Y8(e,i),d=[],f=0;return c.forEach(function(s){if(i.textDecorationLine.length||s.trim().length>0)if(rs.SUPPORT_RANGE_BOUNDS){var v=Qb(o,f,s.length).getClientRects();if(v.length>1){var C=d1(s),P=0;C.forEach(function(Q){d.push(new vf(Q,tc.fromDOMRectList(n,Qb(o,P+f,Q.length).getClientRects()))),P+=Q.length})}else d.push(new vf(s,tc.fromDOMRectList(n,v)))}else{var M=o.splitText(s.length);d.push(new vf(s,X8(n,o))),o=M}else rs.SUPPORT_RANGE_BOUNDS||(o=o.splitText(s.length));f+=s.length}),d},X8=function(n,e){var i=e.ownerDocument;if(i){var o=i.createElement("html2canvaswrapper");o.appendChild(e.cloneNode(!0));var c=e.parentNode;if(c){c.replaceChild(o,e);var d=zp(n,o);return o.firstChild&&c.replaceChild(o.firstChild,o),d}}return tc.EMPTY},Qb=function(n,e,i){var o=n.ownerDocument;if(!o)throw new Error("Node has no owner document");var c=o.createRange();return c.setStart(n,e),c.setEnd(n,e+i),c},d1=function(n){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(i){return i.segment})}return j8(n)},J8=function(n,e){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(n)).map(function(o){return o.segment})}return tL(n,e)},Y8=function(n,e){return e.letterSpacing!==0?d1(n):J8(n,e)},eL=[32,160,4961,65792,65793,4153,4241],tL=function(n,e){for(var i=EE(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),o=[],c,d=function(){if(c.value){var f=c.value.slice(),s=Hp(f),v="";s.forEach(function(C){eL.indexOf(C)===-1?v+=Yi(C):(v.length&&o.push(v),o.push(Yi(C)),v="")}),v.length&&o.push(v)}};!(c=i.next()).done;)d();return o},rL=function(){function n(e,i,o){this.text=nL(i.data,o.textTransform),this.textBounds=W8(e,this.text,o,i)}return n}(),nL=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(iL,aL);case 2:return n.toUpperCase();default:return n}},iL=/(^|\s|:|-|\(|\))([a-z])/g,aL=function(n,e,i){return n.length>0?e+i.toUpperCase():n},bw=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;return c.src=o.currentSrc||o.src,c.intrinsicWidth=o.naturalWidth,c.intrinsicHeight=o.naturalHeight,c.context.cache.addImage(c.src),c}return e}(vl),vw=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;return c.canvas=o,c.intrinsicWidth=o.width,c.intrinsicHeight=o.height,c}return e}(vl),ww=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this,d=new XMLSerializer,f=zp(i,o);return o.setAttribute("width",f.width+"px"),o.setAttribute("height",f.height+"px"),c.svg="data:image/svg+xml,"+encodeURIComponent(d.serializeToString(o)),c.intrinsicWidth=o.width.baseVal.value,c.intrinsicHeight=o.height.baseVal.value,c.context.cache.addImage(c.svg),c}return e}(vl),xw=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;return c.value=o.value,c}return e}(vl),x0=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;return c.start=o.start,c.reversed=typeof o.reversed=="boolean"&&o.reversed===!0,c}return e}(vl),sL=[{type:15,flags:0,unit:"px",number:3}],oL=[{type:16,flags:0,number:50}],AL=function(n){return n.width>n.height?new tc(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new tc(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},lL=function(n){var e=n.type===cL?new Array(n.value.length+1).join("•"):n.value;return e.length===0?n.placeholder||"":e},xp="checkbox",Bp="radio",cL="password",Db=707406591,p1=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;switch(c.type=o.type.toLowerCase(),c.checked=o.checked,c.value=lL(o),(c.type===xp||c.type===Bp)&&(c.styles.backgroundColor=3739148031,c.styles.borderTopColor=c.styles.borderRightColor=c.styles.borderBottomColor=c.styles.borderLeftColor=2779096575,c.styles.borderTopWidth=c.styles.borderRightWidth=c.styles.borderBottomWidth=c.styles.borderLeftWidth=1,c.styles.borderTopStyle=c.styles.borderRightStyle=c.styles.borderBottomStyle=c.styles.borderLeftStyle=1,c.styles.backgroundClip=[0],c.styles.backgroundOrigin=[0],c.bounds=AL(c.bounds)),c.type){case xp:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=sL;break;case Bp:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=oL;break}return c}return e}(vl),Bw=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this,d=o.options[o.selectedIndex||0];return c.value=d&&d.text||"",c}return e}(vl),Cw=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;return c.value=o.value,c}return e}(vl),Iw=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;c.src=o.src,c.width=parseInt(o.width,10)||0,c.height=parseInt(o.height,10)||0,c.backgroundColor=c.styles.backgroundColor;try{if(o.contentWindow&&o.contentWindow.document&&o.contentWindow.document.documentElement){c.tree=Ew(i,o.contentWindow.document.documentElement);var d=o.contentWindow.document.documentElement?_f(i,getComputedStyle(o.contentWindow.document.documentElement).backgroundColor):Jl.TRANSPARENT,f=o.contentWindow.document.body?_f(i,getComputedStyle(o.contentWindow.document.body).backgroundColor):Jl.TRANSPARENT;c.backgroundColor=Mc(d)?Mc(f)?c.styles.backgroundColor:f:d}}catch{}return c}return e}(vl),uL=["OL","UL","MENU"],Jd=function(n,e,i,o){for(var c=e.firstChild,d=void 0;c;c=d)if(d=c.nextSibling,Sw(c)&&c.data.trim().length>0)i.textNodes.push(new rL(n,c,i.styles));else if(ch(c))if(Mw(c)&&c.assignedNodes)c.assignedNodes().forEach(function(s){return Jd(n,s,i,o)});else{var f=Fw(n,c);f.styles.isVisible()&&(hL(c,f,o)?f.flags|=4:fL(f.styles)&&(f.flags|=2),uL.indexOf(c.tagName)!==-1&&(f.flags|=8),i.elements.push(f),c.slot,c.shadowRoot?Jd(n,c.shadowRoot,f,o):!Cp(c)&&!Tw(c)&&!Ip(c)&&Jd(n,c,f,o))}},Fw=function(n,e){return C0(e)?new bw(n,e):Lw(e)?new vw(n,e):Tw(e)?new ww(n,e):dL(e)?new xw(n,e):pL(e)?new x0(n,e):gL(e)?new p1(n,e):Ip(e)?new Bw(n,e):Cp(e)?new Cw(n,e):Pw(e)?new Iw(n,e):new vl(n,e)},Ew=function(n,e){var i=Fw(n,e);return i.flags|=4,Jd(n,e,i,i),i},hL=function(n,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||g1(n)&&i.styles.isTransparent()},fL=function(n){return n.isPositioned()||n.isFloating()},Sw=function(n){return n.nodeType===Node.TEXT_NODE},ch=function(n){return n.nodeType===Node.ELEMENT_NODE},B0=function(n){return ch(n)&&typeof n.style<"u"&&!Yd(n)},Yd=function(n){return typeof n.className=="object"},dL=function(n){return n.tagName==="LI"},pL=function(n){return n.tagName==="OL"},gL=function(n){return n.tagName==="INPUT"},mL=function(n){return n.tagName==="HTML"},Tw=function(n){return n.tagName==="svg"},g1=function(n){return n.tagName==="BODY"},Lw=function(n){return n.tagName==="CANVAS"},Rb=function(n){return n.tagName==="VIDEO"},C0=function(n){return n.tagName==="IMG"},Pw=function(n){return n.tagName==="IFRAME"},Nb=function(n){return n.tagName==="STYLE"},yL=function(n){return n.tagName==="SCRIPT"},Cp=function(n){return n.tagName==="TEXTAREA"},Ip=function(n){return n.tagName==="SELECT"},Mw=function(n){return n.tagName==="SLOT"},Ob=function(n){return n.tagName.indexOf("-")>0},_L=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var i=this.counters[e];return i&&i.length?i[i.length-1]:1},n.prototype.getCounterValues=function(e){var i=this.counters[e];return i||[]},n.prototype.pop=function(e){var i=this;e.forEach(function(o){return i.counters[o].pop()})},n.prototype.parse=function(e){var i=this,o=e.counterIncrement,c=e.counterReset,d=!0;o!==null&&o.forEach(function(s){var v=i.counters[s.counter];v&&s.increment!==0&&(d=!1,v.length||v.push(1),v[Math.max(0,v.length-1)]+=s.increment)});var f=[];return d&&c.forEach(function(s){var v=i.counters[s.counter];f.push(s.counter),v||(v=i.counters[s.counter]=[]),v.push(s.reset)}),f},n}(),zb={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Hb={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},bL={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},vL={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Ju=function(n,e,i,o,c,d){return n<e||n>i?Pf(n,c,d.length>0):o.integers.reduce(function(f,s,v){for(;n>=s;)n-=s,f+=o.values[v];return f},"")+d},Uw=function(n,e,i,o){var c="";do i||n--,c=o(n)+c,n/=e;while(n*e>=e);return c},Ji=function(n,e,i,o,c){var d=i-e+1;return(n<0?"-":"")+(Uw(Math.abs(n),d,o,function(f){return Yi(Math.floor(f%d)+e)})+c)},nu=function(n,e,i){i===void 0&&(i=". ");var o=e.length;return Uw(Math.abs(n),o,!1,function(c){return e[Math.floor(c%o)]})+i},ih=1,Bc=2,Cc=4,pf=8,ql=function(n,e,i,o,c,d){if(n<-9999||n>9999)return Pf(n,4,c.length>0);var f=Math.abs(n),s=c;if(f===0)return e[0]+s;for(var v=0;f>0&&v<=4;v++){var C=f%10;C===0&&La(d,ih)&&s!==""?s=e[C]+s:C>1||C===1&&v===0||C===1&&v===1&&La(d,Bc)||C===1&&v===1&&La(d,Cc)&&n>100||C===1&&v>1&&La(d,pf)?s=e[C]+(v>0?i[v-1]:"")+s:C===1&&v>0&&(s=i[v-1]+s),f=Math.floor(f/10)}return(n<0?o:"")+s},jb="十百千萬",Vb="拾佰仟萬",Gb="マイナス",Im="마이너스",Pf=function(n,e,i){var o=i?". ":"",c=i?"、":"",d=i?", ":"",f=i?" ":"";switch(e){case 0:return"•"+f;case 1:return"◦"+f;case 2:return"◾"+f;case 5:var s=Ji(n,48,57,!0,o);return s.length<4?"0"+s:s;case 4:return nu(n,"〇一二三四五六七八九",c);case 6:return Ju(n,1,3999,zb,3,o).toLowerCase();case 7:return Ju(n,1,3999,zb,3,o);case 8:return Ji(n,945,969,!1,o);case 9:return Ji(n,97,122,!1,o);case 10:return Ji(n,65,90,!1,o);case 11:return Ji(n,1632,1641,!0,o);case 12:case 49:return Ju(n,1,9999,Hb,3,o);case 35:return Ju(n,1,9999,Hb,3,o).toLowerCase();case 13:return Ji(n,2534,2543,!0,o);case 14:case 30:return Ji(n,6112,6121,!0,o);case 15:return nu(n,"子丑寅卯辰巳午未申酉戌亥",c);case 16:return nu(n,"甲乙丙丁戊己庚辛壬癸",c);case 17:case 48:return ql(n,"零一二三四五六七八九",jb,"負",c,Bc|Cc|pf);case 47:return ql(n,"零壹貳參肆伍陸柒捌玖",Vb,"負",c,ih|Bc|Cc|pf);case 42:return ql(n,"零一二三四五六七八九",jb,"负",c,Bc|Cc|pf);case 41:return ql(n,"零壹贰叁肆伍陆柒捌玖",Vb,"负",c,ih|Bc|Cc|pf);case 26:return ql(n,"〇一二三四五六七八九","十百千万",Gb,c,0);case 25:return ql(n,"零壱弐参四伍六七八九","拾百千万",Gb,c,ih|Bc|Cc);case 31:return ql(n,"영일이삼사오육칠팔구","십백천만",Im,d,ih|Bc|Cc);case 33:return ql(n,"零一二三四五六七八九","十百千萬",Im,d,0);case 32:return ql(n,"零壹貳參四五六七八九","拾百千",Im,d,ih|Bc|Cc);case 18:return Ji(n,2406,2415,!0,o);case 20:return Ju(n,1,19999,vL,3,o);case 21:return Ji(n,2790,2799,!0,o);case 22:return Ji(n,2662,2671,!0,o);case 22:return Ju(n,1,10999,bL,3,o);case 23:return nu(n,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return nu(n,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ji(n,3302,3311,!0,o);case 28:return nu(n,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",c);case 29:return nu(n,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",c);case 34:return Ji(n,3792,3801,!0,o);case 37:return Ji(n,6160,6169,!0,o);case 38:return Ji(n,4160,4169,!0,o);case 39:return Ji(n,2918,2927,!0,o);case 40:return Ji(n,1776,1785,!0,o);case 43:return Ji(n,3046,3055,!0,o);case 44:return Ji(n,3174,3183,!0,o);case 45:return Ji(n,3664,3673,!0,o);case 46:return Ji(n,3872,3881,!0,o);case 3:default:return Ji(n,48,57,!0,o)}},kw="data-html2canvas-ignore",Kb=function(){function n(e,i,o){if(this.context=e,this.options=o,this.scrolledElements=[],this.referenceElement=i,this.counters=new _L,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,i){var o=this,c=wL(e,i);if(!c.contentWindow)return Promise.reject("Unable to find iframe window");var d=e.defaultView.pageXOffset,f=e.defaultView.pageYOffset,s=c.contentWindow,v=s.document,C=CL(c).then(function(){return Hs(o,void 0,void 0,function(){var P,M;return xs(this,function(Q){switch(Q.label){case 0:return this.scrolledElements.forEach(SL),s&&(s.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(s.scrollY!==i.top||s.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-i.left,s.scrollY-i.top,0,0))),P=this.options.onclone,M=this.clonedReferenceElement,typeof M>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:v.fonts&&v.fonts.ready?[4,v.fonts.ready]:[3,2];case 1:Q.sent(),Q.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,BL(v)]:[3,4];case 3:Q.sent(),Q.label=4;case 4:return typeof P=="function"?[2,Promise.resolve().then(function(){return P(v,M)}).then(function(){return c})]:[2,c]}})})});return v.open(),v.write(FL(document.doctype)+"<html></html>"),EL(this.referenceElement.ownerDocument,d,f),v.replaceChild(v.adoptNode(this.documentElement),v.documentElement),v.close(),C},n.prototype.createElementClone=function(e){if(v0(e,2))debugger;if(Lw(e))return this.createCanvasClone(e);if(Rb(e))return this.createVideoClone(e);if(Nb(e))return this.createStyleClone(e);var i=e.cloneNode(!1);return C0(i)&&(C0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(i.src=e.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),Ob(i)?this.createCustomElementClone(i):i},n.prototype.createCustomElementClone=function(e){var i=document.createElement("html2canvascustomelement");return Fm(e.style,i),i},n.prototype.createStyleClone=function(e){try{var i=e.sheet;if(i&&i.cssRules){var o=[].slice.call(i.cssRules,0).reduce(function(d,f){return f&&typeof f.cssText=="string"?d+f.cssText:d},""),c=e.cloneNode(!1);return c.textContent=o,c}}catch(d){if(this.context.logger.error("Unable to access cssRules property",d),d.name!=="SecurityError")throw d}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var i;if(this.options.inlineImages&&e.ownerDocument){var o=e.ownerDocument.createElement("img");try{return o.src=e.toDataURL(),o}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var c=e.cloneNode(!1);try{c.width=e.width,c.height=e.height;var d=e.getContext("2d"),f=c.getContext("2d");if(f)if(!this.options.allowTaint&&d)f.putImageData(d.getImageData(0,0,e.width,e.height),0,0);else{var s=(i=e.getContext("webgl2"))!==null&&i!==void 0?i:e.getContext("webgl");if(s){var v=s.getContextAttributes();(v==null?void 0:v.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}f.drawImage(e,0,0)}return c}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return c},n.prototype.createVideoClone=function(e){var i=e.ownerDocument.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;var o=i.getContext("2d");try{return o&&(o.drawImage(e,0,0,i.width,i.height),this.options.allowTaint||o.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var c=e.ownerDocument.createElement("canvas");return c.width=e.offsetWidth,c.height=e.offsetHeight,c},n.prototype.appendChildNode=function(e,i,o){(!ch(i)||!yL(i)&&!i.hasAttribute(kw)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!ch(i)||!Nb(i))&&e.appendChild(this.cloneNode(i,o))},n.prototype.cloneChildNodes=function(e,i,o){for(var c=this,d=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;d;d=d.nextSibling)if(ch(d)&&Mw(d)&&typeof d.assignedNodes=="function"){var f=d.assignedNodes();f.length&&f.forEach(function(s){return c.appendChildNode(i,s,o)})}else this.appendChildNode(i,d,o)},n.prototype.cloneNode=function(e,i){if(Sw(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var o=e.ownerDocument.defaultView;if(o&&ch(e)&&(B0(e)||Yd(e))){var c=this.createElementClone(e);c.style.transitionProperty="none";var d=o.getComputedStyle(e),f=o.getComputedStyle(e,":before"),s=o.getComputedStyle(e,":after");this.referenceElement===e&&B0(c)&&(this.clonedReferenceElement=c),g1(c)&&PL(c);var v=this.counters.parse(new xb(this.context,d)),C=this.resolvePseudoContent(e,c,f,wf.BEFORE);Ob(e)&&(i=!0),Rb(e)||this.cloneChildNodes(e,c,i),C&&c.insertBefore(C,c.firstChild);var P=this.resolvePseudoContent(e,c,s,wf.AFTER);return P&&c.appendChild(P),this.counters.pop(v),(d&&(this.options.copyStyles||Yd(e))&&!Pw(e)||i)&&Fm(d,c),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([c,e.scrollLeft,e.scrollTop]),(Cp(e)||Ip(e))&&(Cp(c)||Ip(c))&&(c.value=e.value),c}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,i,o,c){var d=this;if(o){var f=o.content,s=i.ownerDocument;if(!(!s||!f||f==="none"||f==="-moz-alt-content"||o.display==="none")){this.counters.parse(new xb(this.context,o));var v=new d8(this.context,o),C=s.createElement("html2canvaspseudoelement");Fm(o,C),v.content.forEach(function(M){if(M.type===0)C.appendChild(s.createTextNode(M.value));else if(M.type===22){var Q=s.createElement("img");Q.src=M.value,Q.style.opacity="1",C.appendChild(Q)}else if(M.type===18){if(M.name==="attr"){var E=M.values.filter(Yn);E.length&&C.appendChild(s.createTextNode(e.getAttribute(E[0].value)||""))}else if(M.name==="counter"){var z=M.values.filter(Ch),V=z[0],ee=z[1];if(V&&Yn(V)){var Z=d.counters.getCounterValue(V.value),ne=ee&&Yn(ee)?b0.parse(d.context,ee.value):3;C.appendChild(s.createTextNode(Pf(Z,ne,!1)))}}else if(M.name==="counters"){var Be=M.values.filter(Ch),V=Be[0],ze=Be[1],ee=Be[2];if(V&&Yn(V)){var Ne=d.counters.getCounterValues(V.value),Oe=ee&&Yn(ee)?b0.parse(d.context,ee.value):3,ve=ze&&ze.type===0?ze.value:"",me=Ne.map(function(se){return Pf(se,Oe,!1)}).join(ve);C.appendChild(s.createTextNode(me))}}}else if(M.type===20)switch(M.value){case"open-quote":C.appendChild(s.createTextNode(wb(v.quotes,d.quoteDepth++,!0)));break;case"close-quote":C.appendChild(s.createTextNode(wb(v.quotes,--d.quoteDepth,!1)));break;default:C.appendChild(s.createTextNode(M.value))}}),C.className=I0+" "+F0;var P=c===wf.BEFORE?" "+I0:" "+F0;return Yd(i)?i.className.baseValue+=P:i.className+=P,C}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),wf;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(wf||(wf={}));var wL=function(n,e){var i=n.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(kw,"true"),n.body.appendChild(i),i},xL=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},BL=function(n){return Promise.all([].slice.call(n.images,0).map(xL))},CL=function(n){return new Promise(function(e,i){var o=n.contentWindow;if(!o)return i("No window assigned for iframe");var c=o.document;o.onload=n.onload=function(){o.onload=n.onload=null;var d=setInterval(function(){c.body.childNodes.length>0&&c.readyState==="complete"&&(clearInterval(d),e(n))},50)}})},IL=["all","d","content"],Fm=function(n,e){for(var i=n.length-1;i>=0;i--){var o=n.item(i);IL.indexOf(o)===-1&&e.style.setProperty(o,n.getPropertyValue(o))}return e},FL=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'+n.publicId+'"'),n.systemId&&(e+='"'+n.systemId+'"'),e+=">"),e},EL=function(n,e,i){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||i!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,i)},SL=function(n){var e=n[0],i=n[1],o=n[2];e.scrollLeft=i,e.scrollTop=o},TL=":before",LL=":after",I0="___html2canvas___pseudoelement_before",F0="___html2canvas___pseudoelement_after",qb=`{
    content: "" !important;
    display: none !important;
}`,PL=function(n){ML(n,"."+I0+TL+qb+`
         .`+F0+LL+qb)},ML=function(n,e){var i=n.ownerDocument;if(i){var o=i.createElement("style");o.textContent=e,n.appendChild(o)}},Qw=function(){function n(){}return n.getOrigin=function(e){var i=n._link;return i?(i.href=e,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),UL=function(){function n(e,i){this.context=e,this._options=i,this._cache={}}return n.prototype.addImage=function(e){var i=Promise.resolve();return this.has(e)||(Sm(e)||RL(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),i},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return Hs(this,void 0,void 0,function(){var i,o,c,d,f=this;return xs(this,function(s){switch(s.label){case 0:return i=Qw.isSameOrigin(e),o=!Em(e)&&this._options.useCORS===!0&&rs.SUPPORT_CORS_IMAGES&&!i,c=!Em(e)&&!i&&!Sm(e)&&typeof this._options.proxy=="string"&&rs.SUPPORT_CORS_XHR&&!o,!i&&this._options.allowTaint===!1&&!Em(e)&&!Sm(e)&&!c&&!o?[2]:(d=e,c?[4,this.proxy(d)]:[3,2]);case 1:d=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(v,C){var P=new Image;P.onload=function(){return v(P)},P.onerror=C,(NL(d)||o)&&(P.crossOrigin="anonymous"),P.src=d,P.complete===!0&&setTimeout(function(){return v(P)},500),f._options.imageTimeout>0&&setTimeout(function(){return C("Timed out ("+f._options.imageTimeout+"ms) loading image")},f._options.imageTimeout)})];case 3:return[2,s.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var i=this,o=this._options.proxy;if(!o)throw new Error("No proxy defined");var c=e.substring(0,256);return new Promise(function(d,f){var s=rs.SUPPORT_RESPONSE_TYPE?"blob":"text",v=new XMLHttpRequest;v.onload=function(){if(v.status===200)if(s==="text")d(v.response);else{var M=new FileReader;M.addEventListener("load",function(){return d(M.result)},!1),M.addEventListener("error",function(Q){return f(Q)},!1),M.readAsDataURL(v.response)}else f("Failed to proxy resource "+c+" with status code "+v.status)},v.onerror=f;var C=o.indexOf("?")>-1?"&":"?";if(v.open("GET",""+o+C+"url="+encodeURIComponent(e)+"&responseType="+s),s!=="text"&&v instanceof XMLHttpRequest&&(v.responseType=s),i._options.imageTimeout){var P=i._options.imageTimeout;v.timeout=P,v.ontimeout=function(){return f("Timed out ("+P+"ms) proxying "+c)}}v.send()})},n}(),kL=/^data:image\/svg\+xml/i,QL=/^data:image\/.*;base64,/i,DL=/^data:image\/.*/i,RL=function(n){return rs.SUPPORT_SVG_DRAWING||!OL(n)},Em=function(n){return DL.test(n)},NL=function(n){return QL.test(n)},Sm=function(n){return n.substr(0,4)==="blob"},OL=function(n){return n.substr(-3).toLowerCase()==="svg"||kL.test(n)},mr=function(){function n(e,i){this.type=0,this.x=e,this.y=i}return n.prototype.add=function(e,i){return new n(this.x+e,this.y+i)},n}(),Yu=function(n,e,i){return new mr(n.x+(e.x-n.x)*i,n.y+(e.y-n.y)*i)},Od=function(){function n(e,i,o,c){this.type=1,this.start=e,this.startControl=i,this.endControl=o,this.end=c}return n.prototype.subdivide=function(e,i){var o=Yu(this.start,this.startControl,e),c=Yu(this.startControl,this.endControl,e),d=Yu(this.endControl,this.end,e),f=Yu(o,c,e),s=Yu(c,d,e),v=Yu(f,s,e);return i?new n(this.start,o,f,v):new n(v,s,d,this.end)},n.prototype.add=function(e,i){return new n(this.start.add(e,i),this.startControl.add(e,i),this.endControl.add(e,i),this.end.add(e,i))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),tA=function(n){return n.type===1},zL=function(){function n(e){var i=e.styles,o=e.bounds,c=ff(i.borderTopLeftRadius,o.width,o.height),d=c[0],f=c[1],s=ff(i.borderTopRightRadius,o.width,o.height),v=s[0],C=s[1],P=ff(i.borderBottomRightRadius,o.width,o.height),M=P[0],Q=P[1],E=ff(i.borderBottomLeftRadius,o.width,o.height),z=E[0],V=E[1],ee=[];ee.push((d+v)/o.width),ee.push((z+M)/o.width),ee.push((f+V)/o.height),ee.push((C+Q)/o.height);var Z=Math.max.apply(Math,ee);Z>1&&(d/=Z,f/=Z,v/=Z,C/=Z,M/=Z,Q/=Z,z/=Z,V/=Z);var ne=o.width-v,Be=o.height-Q,ze=o.width-M,Ne=o.height-V,Oe=i.borderTopWidth,ve=i.borderRightWidth,me=i.borderBottomWidth,Qe=i.borderLeftWidth,tt=fi(i.paddingTop,e.bounds.width),se=fi(i.paddingRight,e.bounds.width),ue=fi(i.paddingBottom,e.bounds.width),Fe=fi(i.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=d>0||f>0?Ei(o.left+Qe/3,o.top+Oe/3,d-Qe/3,f-Oe/3,zn.TOP_LEFT):new mr(o.left+Qe/3,o.top+Oe/3),this.topRightBorderDoubleOuterBox=d>0||f>0?Ei(o.left+ne,o.top+Oe/3,v-ve/3,C-Oe/3,zn.TOP_RIGHT):new mr(o.left+o.width-ve/3,o.top+Oe/3),this.bottomRightBorderDoubleOuterBox=M>0||Q>0?Ei(o.left+ze,o.top+Be,M-ve/3,Q-me/3,zn.BOTTOM_RIGHT):new mr(o.left+o.width-ve/3,o.top+o.height-me/3),this.bottomLeftBorderDoubleOuterBox=z>0||V>0?Ei(o.left+Qe/3,o.top+Ne,z-Qe/3,V-me/3,zn.BOTTOM_LEFT):new mr(o.left+Qe/3,o.top+o.height-me/3),this.topLeftBorderDoubleInnerBox=d>0||f>0?Ei(o.left+Qe*2/3,o.top+Oe*2/3,d-Qe*2/3,f-Oe*2/3,zn.TOP_LEFT):new mr(o.left+Qe*2/3,o.top+Oe*2/3),this.topRightBorderDoubleInnerBox=d>0||f>0?Ei(o.left+ne,o.top+Oe*2/3,v-ve*2/3,C-Oe*2/3,zn.TOP_RIGHT):new mr(o.left+o.width-ve*2/3,o.top+Oe*2/3),this.bottomRightBorderDoubleInnerBox=M>0||Q>0?Ei(o.left+ze,o.top+Be,M-ve*2/3,Q-me*2/3,zn.BOTTOM_RIGHT):new mr(o.left+o.width-ve*2/3,o.top+o.height-me*2/3),this.bottomLeftBorderDoubleInnerBox=z>0||V>0?Ei(o.left+Qe*2/3,o.top+Ne,z-Qe*2/3,V-me*2/3,zn.BOTTOM_LEFT):new mr(o.left+Qe*2/3,o.top+o.height-me*2/3),this.topLeftBorderStroke=d>0||f>0?Ei(o.left+Qe/2,o.top+Oe/2,d-Qe/2,f-Oe/2,zn.TOP_LEFT):new mr(o.left+Qe/2,o.top+Oe/2),this.topRightBorderStroke=d>0||f>0?Ei(o.left+ne,o.top+Oe/2,v-ve/2,C-Oe/2,zn.TOP_RIGHT):new mr(o.left+o.width-ve/2,o.top+Oe/2),this.bottomRightBorderStroke=M>0||Q>0?Ei(o.left+ze,o.top+Be,M-ve/2,Q-me/2,zn.BOTTOM_RIGHT):new mr(o.left+o.width-ve/2,o.top+o.height-me/2),this.bottomLeftBorderStroke=z>0||V>0?Ei(o.left+Qe/2,o.top+Ne,z-Qe/2,V-me/2,zn.BOTTOM_LEFT):new mr(o.left+Qe/2,o.top+o.height-me/2),this.topLeftBorderBox=d>0||f>0?Ei(o.left,o.top,d,f,zn.TOP_LEFT):new mr(o.left,o.top),this.topRightBorderBox=v>0||C>0?Ei(o.left+ne,o.top,v,C,zn.TOP_RIGHT):new mr(o.left+o.width,o.top),this.bottomRightBorderBox=M>0||Q>0?Ei(o.left+ze,o.top+Be,M,Q,zn.BOTTOM_RIGHT):new mr(o.left+o.width,o.top+o.height),this.bottomLeftBorderBox=z>0||V>0?Ei(o.left,o.top+Ne,z,V,zn.BOTTOM_LEFT):new mr(o.left,o.top+o.height),this.topLeftPaddingBox=d>0||f>0?Ei(o.left+Qe,o.top+Oe,Math.max(0,d-Qe),Math.max(0,f-Oe),zn.TOP_LEFT):new mr(o.left+Qe,o.top+Oe),this.topRightPaddingBox=v>0||C>0?Ei(o.left+Math.min(ne,o.width-ve),o.top+Oe,ne>o.width+ve?0:Math.max(0,v-ve),Math.max(0,C-Oe),zn.TOP_RIGHT):new mr(o.left+o.width-ve,o.top+Oe),this.bottomRightPaddingBox=M>0||Q>0?Ei(o.left+Math.min(ze,o.width-Qe),o.top+Math.min(Be,o.height-me),Math.max(0,M-ve),Math.max(0,Q-me),zn.BOTTOM_RIGHT):new mr(o.left+o.width-ve,o.top+o.height-me),this.bottomLeftPaddingBox=z>0||V>0?Ei(o.left+Qe,o.top+Math.min(Ne,o.height-me),Math.max(0,z-Qe),Math.max(0,V-me),zn.BOTTOM_LEFT):new mr(o.left+Qe,o.top+o.height-me),this.topLeftContentBox=d>0||f>0?Ei(o.left+Qe+Fe,o.top+Oe+tt,Math.max(0,d-(Qe+Fe)),Math.max(0,f-(Oe+tt)),zn.TOP_LEFT):new mr(o.left+Qe+Fe,o.top+Oe+tt),this.topRightContentBox=v>0||C>0?Ei(o.left+Math.min(ne,o.width+Qe+Fe),o.top+Oe+tt,ne>o.width+Qe+Fe?0:v-Qe+Fe,C-(Oe+tt),zn.TOP_RIGHT):new mr(o.left+o.width-(ve+se),o.top+Oe+tt),this.bottomRightContentBox=M>0||Q>0?Ei(o.left+Math.min(ze,o.width-(Qe+Fe)),o.top+Math.min(Be,o.height+Oe+tt),Math.max(0,M-(ve+se)),Q-(me+ue),zn.BOTTOM_RIGHT):new mr(o.left+o.width-(ve+se),o.top+o.height-(me+ue)),this.bottomLeftContentBox=z>0||V>0?Ei(o.left+Qe+Fe,o.top+Ne,Math.max(0,z-(Qe+Fe)),V-(me+ue),zn.BOTTOM_LEFT):new mr(o.left+Qe+Fe,o.top+o.height-(me+ue))}return n}(),zn;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(zn||(zn={}));var Ei=function(n,e,i,o,c){var d=4*((Math.sqrt(2)-1)/3),f=i*d,s=o*d,v=n+i,C=e+o;switch(c){case zn.TOP_LEFT:return new Od(new mr(n,C),new mr(n,C-s),new mr(v-f,e),new mr(v,e));case zn.TOP_RIGHT:return new Od(new mr(n,e),new mr(n+f,e),new mr(v,C-s),new mr(v,C));case zn.BOTTOM_RIGHT:return new Od(new mr(v,e),new mr(v,e+s),new mr(n+f,C),new mr(n,C));case zn.BOTTOM_LEFT:default:return new Od(new mr(v,C),new mr(v-f,C),new mr(n,e+s),new mr(n,e))}},Fp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},HL=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Ep=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},jL=function(){function n(e,i,o){this.offsetX=e,this.offsetY=i,this.matrix=o,this.type=0,this.target=6}return n}(),zd=function(){function n(e,i){this.path=e,this.target=i,this.type=1}return n}(),VL=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),GL=function(n){return n.type===0},Dw=function(n){return n.type===1},KL=function(n){return n.type===2},Zb=function(n,e){return n.length===e.length?n.some(function(i,o){return i===e[o]}):!1},qL=function(n,e,i,o,c){return n.map(function(d,f){switch(f){case 0:return d.add(e,i);case 1:return d.add(e+o,i);case 2:return d.add(e+o,i+c);case 3:return d.add(e,i+c)}return d})},Rw=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),Nw=function(){function n(e,i){if(this.container=e,this.parent=i,this.effects=[],this.curves=new zL(this.container),this.container.styles.opacity<1&&this.effects.push(new VL(this.container.styles.opacity)),this.container.styles.transform!==null){var o=this.container.bounds.left+this.container.styles.transformOrigin[0].number,c=this.container.bounds.top+this.container.styles.transformOrigin[1].number,d=this.container.styles.transform;this.effects.push(new jL(o,c,d))}if(this.container.styles.overflowX!==0){var f=Fp(this.curves),s=Ep(this.curves);Zb(f,s)?this.effects.push(new zd(f,6)):(this.effects.push(new zd(f,2)),this.effects.push(new zd(s,4)))}}return n.prototype.getEffects=function(e){for(var i=[2,3].indexOf(this.container.styles.position)===-1,o=this.parent,c=this.effects.slice(0);o;){var d=o.effects.filter(function(v){return!Dw(v)});if(i||o.container.styles.position!==0||!o.parent){if(c.unshift.apply(c,d),i=[2,3].indexOf(o.container.styles.position)===-1,o.container.styles.overflowX!==0){var f=Fp(o.curves),s=Ep(o.curves);Zb(f,s)||c.unshift(new zd(s,6))}}else c.unshift.apply(c,d);o=o.parent}return c.filter(function(v){return La(v.target,e)})},n}(),E0=function(n,e,i,o){n.container.elements.forEach(function(c){var d=La(c.flags,4),f=La(c.flags,2),s=new Nw(c,n);La(c.styles.display,2048)&&o.push(s);var v=La(c.flags,8)?[]:o;if(d||f){var C=d||c.styles.isPositioned()?i:e,P=new Rw(s);if(c.styles.isPositioned()||c.styles.opacity<1||c.styles.isTransformed()){var M=c.styles.zIndex.order;if(M<0){var Q=0;C.negativeZIndex.some(function(z,V){return M>z.element.container.styles.zIndex.order?(Q=V,!1):Q>0}),C.negativeZIndex.splice(Q,0,P)}else if(M>0){var E=0;C.positiveZIndex.some(function(z,V){return M>=z.element.container.styles.zIndex.order?(E=V+1,!1):E>0}),C.positiveZIndex.splice(E,0,P)}else C.zeroOrAutoZIndexOrTransformedOrOpacity.push(P)}else c.styles.isFloating()?C.nonPositionedFloats.push(P):C.nonPositionedInlineLevel.push(P);E0(s,P,d?P:i,v)}else c.styles.isInlineLevel()?e.inlineLevel.push(s):e.nonInlineLevel.push(s),E0(s,e,i,v);La(c.flags,8)&&Ow(c,v)})},Ow=function(n,e){for(var i=n instanceof x0?n.start:1,o=n instanceof x0?n.reversed:!1,c=0;c<e.length;c++){var d=e[c];d.container instanceof xw&&typeof d.container.value=="number"&&d.container.value!==0&&(i=d.container.value),d.listValue=Pf(i,d.container.styles.listStyleType,!0),i+=o?-1:1}},ZL=function(n){var e=new Nw(n,null),i=new Rw(e),o=[];return E0(e,i,i,o),Ow(e.container,o),i},$b=function(n,e){switch(e){case 0:return nA(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return nA(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return nA(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return nA(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},$L=function(n,e){switch(e){case 0:return nA(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return nA(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return nA(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return nA(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},WL=function(n,e){switch(e){case 0:return nA(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return nA(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return nA(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return nA(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},XL=function(n,e){switch(e){case 0:return Hd(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Hd(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Hd(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Hd(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Hd=function(n,e){var i=[];return tA(n)?i.push(n.subdivide(.5,!1)):i.push(n),tA(e)?i.push(e.subdivide(.5,!0)):i.push(e),i},nA=function(n,e,i,o){var c=[];return tA(n)?c.push(n.subdivide(.5,!1)):c.push(n),tA(i)?c.push(i.subdivide(.5,!0)):c.push(i),tA(o)?c.push(o.subdivide(.5,!0).reverse()):c.push(o),tA(e)?c.push(e.subdivide(.5,!1).reverse()):c.push(e),c},zw=function(n){var e=n.bounds,i=n.styles;return e.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},Sp=function(n){var e=n.styles,i=n.bounds,o=fi(e.paddingLeft,i.width),c=fi(e.paddingRight,i.width),d=fi(e.paddingTop,i.width),f=fi(e.paddingBottom,i.width);return i.add(o+e.borderLeftWidth,d+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+o+c),-(e.borderTopWidth+e.borderBottomWidth+d+f))},JL=function(n,e){return n===0?e.bounds:n===2?Sp(e):zw(e)},YL=function(n,e){return n===0?e.bounds:n===2?Sp(e):zw(e)},Tm=function(n,e,i){var o=JL(ah(n.styles.backgroundOrigin,e),n),c=YL(ah(n.styles.backgroundClip,e),n),d=eP(ah(n.styles.backgroundSize,e),i,o),f=d[0],s=d[1],v=ff(ah(n.styles.backgroundPosition,e),o.width-f,o.height-s),C=tP(ah(n.styles.backgroundRepeat,e),v,d,o,c),P=Math.round(o.left+v[0]),M=Math.round(o.top+v[1]);return[C,P,M,f,s]},eh=function(n){return Yn(n)&&n.value===ph.AUTO},jd=function(n){return typeof n=="number"},eP=function(n,e,i){var o=e[0],c=e[1],d=e[2],f=n[0],s=n[1];if(!f)return[0,0];if(_a(f)&&s&&_a(s))return[fi(f,i.width),fi(s,i.height)];var v=jd(d);if(Yn(f)&&(f.value===ph.CONTAIN||f.value===ph.COVER)){if(jd(d)){var C=i.width/i.height;return C<d!=(f.value===ph.COVER)?[i.width,i.width/d]:[i.height*d,i.height]}return[i.width,i.height]}var P=jd(o),M=jd(c),Q=P||M;if(eh(f)&&(!s||eh(s))){if(P&&M)return[o,c];if(!v&&!Q)return[i.width,i.height];if(Q&&v){var E=P?o:c*d,z=M?c:o/d;return[E,z]}var V=P?o:i.width,ee=M?c:i.height;return[V,ee]}if(v){var Z=0,ne=0;return _a(f)?Z=fi(f,i.width):_a(s)&&(ne=fi(s,i.height)),eh(f)?Z=ne*d:(!s||eh(s))&&(ne=Z/d),[Z,ne]}var Be=null,ze=null;if(_a(f)?Be=fi(f,i.width):s&&_a(s)&&(ze=fi(s,i.height)),Be!==null&&(!s||eh(s))&&(ze=P&&M?Be/o*c:i.height),ze!==null&&eh(f)&&(Be=P&&M?ze/c*o:i.width),Be!==null&&ze!==null)return[Be,ze];throw new Error("Unable to calculate background-size for element")},ah=function(n,e){var i=n[e];return typeof i>"u"?n[0]:i},tP=function(n,e,i,o,c){var d=e[0],f=e[1],s=i[0],v=i[1];switch(n){case 2:return[new mr(Math.round(o.left),Math.round(o.top+f)),new mr(Math.round(o.left+o.width),Math.round(o.top+f)),new mr(Math.round(o.left+o.width),Math.round(v+o.top+f)),new mr(Math.round(o.left),Math.round(v+o.top+f))];case 3:return[new mr(Math.round(o.left+d),Math.round(o.top)),new mr(Math.round(o.left+d+s),Math.round(o.top)),new mr(Math.round(o.left+d+s),Math.round(o.height+o.top)),new mr(Math.round(o.left+d),Math.round(o.height+o.top))];case 1:return[new mr(Math.round(o.left+d),Math.round(o.top+f)),new mr(Math.round(o.left+d+s),Math.round(o.top+f)),new mr(Math.round(o.left+d+s),Math.round(o.top+f+v)),new mr(Math.round(o.left+d),Math.round(o.top+f+v))];default:return[new mr(Math.round(c.left),Math.round(c.top)),new mr(Math.round(c.left+c.width),Math.round(c.top)),new mr(Math.round(c.left+c.width),Math.round(c.height+c.top)),new mr(Math.round(c.left),Math.round(c.height+c.top))]}},rP="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Wb="Hidden Text",nP=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,i){var o=this._document.createElement("div"),c=this._document.createElement("img"),d=this._document.createElement("span"),f=this._document.body;o.style.visibility="hidden",o.style.fontFamily=e,o.style.fontSize=i,o.style.margin="0",o.style.padding="0",o.style.whiteSpace="nowrap",f.appendChild(o),c.src=rP,c.width=1,c.height=1,c.style.margin="0",c.style.padding="0",c.style.verticalAlign="baseline",d.style.fontFamily=e,d.style.fontSize=i,d.style.margin="0",d.style.padding="0",d.appendChild(this._document.createTextNode(Wb)),o.appendChild(d),o.appendChild(c);var s=c.offsetTop-d.offsetTop+2;o.removeChild(d),o.appendChild(this._document.createTextNode(Wb)),o.style.lineHeight="normal",c.style.verticalAlign="super";var v=c.offsetTop-o.offsetTop+2;return f.removeChild(o),{baseline:s,middle:v}},n.prototype.getMetrics=function(e,i){var o=e+" "+i;return typeof this._data[o]>"u"&&(this._data[o]=this.parseMetrics(e,i)),this._data[o]},n}(),Hw=function(){function n(e,i){this.context=e,this.options=i}return n}(),iP=1e4,aP=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;return c._activeEffects=[],c.canvas=o.canvas?o.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),o.canvas||(c.canvas.width=Math.floor(o.width*o.scale),c.canvas.height=Math.floor(o.height*o.scale),c.canvas.style.width=o.width+"px",c.canvas.style.height=o.height+"px"),c.fontMetrics=new nP(document),c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-o.x,-o.y),c.ctx.textBaseline="bottom",c._activeEffects=[],c.context.logger.debug("Canvas renderer initialized ("+o.width+"x"+o.height+") with scale "+o.scale),c}return e.prototype.applyEffects=function(i){for(var o=this;this._activeEffects.length;)this.popEffect();i.forEach(function(c){return o.applyEffect(c)})},e.prototype.applyEffect=function(i){this.ctx.save(),KL(i)&&(this.ctx.globalAlpha=i.opacity),GL(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),Dw(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(i){return Hs(this,void 0,void 0,function(){var o;return xs(this,function(c){switch(c.label){case 0:return o=i.element.container.styles,o.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(i){return Hs(this,void 0,void 0,function(){return xs(this,function(o){switch(o.label){case 0:if(La(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return o.sent(),[4,this.renderNodeContent(i)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(i,o,c){var d=this;if(o===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+c);else{var f=d1(i.text);f.reduce(function(s,v){return d.ctx.fillText(v,s,i.bounds.top+c),s+d.ctx.measureText(v).width},i.bounds.left)}},e.prototype.createFontStyle=function(i){var o=i.fontVariant.filter(function(f){return f==="normal"||f==="small-caps"}).join(""),c=cP(i.fontFamily).join(", "),d=Nf(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,o,i.fontWeight,d,c].join(" "),c,d]},e.prototype.renderTextNode=function(i,o){return Hs(this,void 0,void 0,function(){var c,d,f,s,v,C,P,M,Q=this;return xs(this,function(E){return c=this.createFontStyle(o),d=c[0],f=c[1],s=c[2],this.ctx.font=d,this.ctx.direction=o.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",v=this.fontMetrics.getMetrics(f,s),C=v.baseline,P=v.middle,M=o.paintOrder,i.textBounds.forEach(function(z){M.forEach(function(V){switch(V){case 0:Q.ctx.fillStyle=ja(o.color),Q.renderTextWithLetterSpacing(z,o.letterSpacing,C);var ee=o.textShadow;ee.length&&z.text.trim().length&&(ee.slice(0).reverse().forEach(function(Z){Q.ctx.shadowColor=ja(Z.color),Q.ctx.shadowOffsetX=Z.offsetX.number*Q.options.scale,Q.ctx.shadowOffsetY=Z.offsetY.number*Q.options.scale,Q.ctx.shadowBlur=Z.blur.number,Q.renderTextWithLetterSpacing(z,o.letterSpacing,C)}),Q.ctx.shadowColor="",Q.ctx.shadowOffsetX=0,Q.ctx.shadowOffsetY=0,Q.ctx.shadowBlur=0),o.textDecorationLine.length&&(Q.ctx.fillStyle=ja(o.textDecorationColor||o.color),o.textDecorationLine.forEach(function(Z){switch(Z){case 1:Q.ctx.fillRect(z.bounds.left,Math.round(z.bounds.top+C),z.bounds.width,1);break;case 2:Q.ctx.fillRect(z.bounds.left,Math.round(z.bounds.top),z.bounds.width,1);break;case 3:Q.ctx.fillRect(z.bounds.left,Math.ceil(z.bounds.top+P),z.bounds.width,1);break}}));break;case 1:o.webkitTextStrokeWidth&&z.text.trim().length&&(Q.ctx.strokeStyle=ja(o.webkitTextStrokeColor),Q.ctx.lineWidth=o.webkitTextStrokeWidth,Q.ctx.lineJoin=window.chrome?"miter":"round",Q.ctx.strokeText(z.text,z.bounds.left,z.bounds.top+C)),Q.ctx.strokeStyle="",Q.ctx.lineWidth=0,Q.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(i,o,c){if(c&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var d=Sp(i),f=Ep(o);this.path(f),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(c,0,0,i.intrinsicWidth,i.intrinsicHeight,d.left,d.top,d.width,d.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(i){return Hs(this,void 0,void 0,function(){var o,c,d,f,s,v,ne,ne,C,P,M,Q,ze,E,z,Ne,V,ee,Z,ne,Be,ze,Ne;return xs(this,function(Oe){switch(Oe.label){case 0:this.applyEffects(i.getEffects(4)),o=i.container,c=i.curves,d=o.styles,f=0,s=o.textNodes,Oe.label=1;case 1:return f<s.length?(v=s[f],[4,this.renderTextNode(v,d)]):[3,4];case 2:Oe.sent(),Oe.label=3;case 3:return f++,[3,1];case 4:if(!(o instanceof bw))return[3,8];Oe.label=5;case 5:return Oe.trys.push([5,7,,8]),[4,this.context.cache.match(o.src)];case 6:return ne=Oe.sent(),this.renderReplacedElement(o,c,ne),[3,8];case 7:return Oe.sent(),this.context.logger.error("Error loading image "+o.src),[3,8];case 8:if(o instanceof vw&&this.renderReplacedElement(o,c,o.canvas),!(o instanceof ww))return[3,12];Oe.label=9;case 9:return Oe.trys.push([9,11,,12]),[4,this.context.cache.match(o.svg)];case 10:return ne=Oe.sent(),this.renderReplacedElement(o,c,ne),[3,12];case 11:return Oe.sent(),this.context.logger.error("Error loading svg "+o.svg.substring(0,255)),[3,12];case 12:return o instanceof Iw&&o.tree?(C=new e(this.context,{scale:this.options.scale,backgroundColor:o.backgroundColor,x:0,y:0,width:o.width,height:o.height}),[4,C.render(o.tree)]):[3,14];case 13:P=Oe.sent(),o.width&&o.height&&this.ctx.drawImage(P,0,0,o.width,o.height,o.bounds.left,o.bounds.top,o.bounds.width,o.bounds.height),Oe.label=14;case 14:if(o instanceof p1&&(M=Math.min(o.bounds.width,o.bounds.height),o.type===xp?o.checked&&(this.ctx.save(),this.path([new mr(o.bounds.left+M*.39363,o.bounds.top+M*.79),new mr(o.bounds.left+M*.16,o.bounds.top+M*.5549),new mr(o.bounds.left+M*.27347,o.bounds.top+M*.44071),new mr(o.bounds.left+M*.39694,o.bounds.top+M*.5649),new mr(o.bounds.left+M*.72983,o.bounds.top+M*.23),new mr(o.bounds.left+M*.84,o.bounds.top+M*.34085),new mr(o.bounds.left+M*.39363,o.bounds.top+M*.79)]),this.ctx.fillStyle=ja(Db),this.ctx.fill(),this.ctx.restore()):o.type===Bp&&o.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(o.bounds.left+M/2,o.bounds.top+M/2,M/4,0,Math.PI*2,!0),this.ctx.fillStyle=ja(Db),this.ctx.fill(),this.ctx.restore())),sP(o)&&o.value.length){switch(Q=this.createFontStyle(d),ze=Q[0],E=Q[1],z=this.fontMetrics.getMetrics(ze,E).baseline,this.ctx.font=ze,this.ctx.fillStyle=ja(d.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=AP(o.styles.textAlign),Ne=Sp(o),V=0,o.styles.textAlign){case 1:V+=Ne.width/2;break;case 2:V+=Ne.width;break}ee=Ne.add(V,0,0,-Ne.height/2+1),this.ctx.save(),this.path([new mr(Ne.left,Ne.top),new mr(Ne.left+Ne.width,Ne.top),new mr(Ne.left+Ne.width,Ne.top+Ne.height),new mr(Ne.left,Ne.top+Ne.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new vf(o.value,ee),d.letterSpacing,z),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!La(o.styles.display,2048))return[3,20];if(o.styles.listStyleImage===null)return[3,19];if(Z=o.styles.listStyleImage,Z.type!==0)return[3,18];ne=void 0,Be=Z.url,Oe.label=15;case 15:return Oe.trys.push([15,17,,18]),[4,this.context.cache.match(Be)];case 16:return ne=Oe.sent(),this.ctx.drawImage(ne,o.bounds.left-(ne.width+10),o.bounds.top),[3,18];case 17:return Oe.sent(),this.context.logger.error("Error loading list-style-image "+Be),[3,18];case 18:return[3,20];case 19:i.listValue&&o.styles.listStyleType!==-1&&(ze=this.createFontStyle(d)[0],this.ctx.font=ze,this.ctx.fillStyle=ja(d.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Ne=new tc(o.bounds.left,o.bounds.top+fi(o.styles.paddingTop,o.bounds.width),o.bounds.width,bb(d.lineHeight,d.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new vf(i.listValue,Ne),d.letterSpacing,bb(d.lineHeight,d.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Oe.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(i){return Hs(this,void 0,void 0,function(){var o,c,Z,d,f,Z,s,v,Z,C,P,Z,M,Q,Z,E,z,Z,V,ee,Z;return xs(this,function(ne){switch(ne.label){case 0:if(La(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:ne.sent(),o=0,c=i.negativeZIndex,ne.label=2;case 2:return o<c.length?(Z=c[o],[4,this.renderStack(Z)]):[3,5];case 3:ne.sent(),ne.label=4;case 4:return o++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:ne.sent(),d=0,f=i.nonInlineLevel,ne.label=7;case 7:return d<f.length?(Z=f[d],[4,this.renderNode(Z)]):[3,10];case 8:ne.sent(),ne.label=9;case 9:return d++,[3,7];case 10:s=0,v=i.nonPositionedFloats,ne.label=11;case 11:return s<v.length?(Z=v[s],[4,this.renderStack(Z)]):[3,14];case 12:ne.sent(),ne.label=13;case 13:return s++,[3,11];case 14:C=0,P=i.nonPositionedInlineLevel,ne.label=15;case 15:return C<P.length?(Z=P[C],[4,this.renderStack(Z)]):[3,18];case 16:ne.sent(),ne.label=17;case 17:return C++,[3,15];case 18:M=0,Q=i.inlineLevel,ne.label=19;case 19:return M<Q.length?(Z=Q[M],[4,this.renderNode(Z)]):[3,22];case 20:ne.sent(),ne.label=21;case 21:return M++,[3,19];case 22:E=0,z=i.zeroOrAutoZIndexOrTransformedOrOpacity,ne.label=23;case 23:return E<z.length?(Z=z[E],[4,this.renderStack(Z)]):[3,26];case 24:ne.sent(),ne.label=25;case 25:return E++,[3,23];case 26:V=0,ee=i.positiveZIndex,ne.label=27;case 27:return V<ee.length?(Z=ee[V],[4,this.renderStack(Z)]):[3,30];case 28:ne.sent(),ne.label=29;case 29:return V++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},e.prototype.formatPath=function(i){var o=this;i.forEach(function(c,d){var f=tA(c)?c.start:c;d===0?o.ctx.moveTo(f.x,f.y):o.ctx.lineTo(f.x,f.y),tA(c)&&o.ctx.bezierCurveTo(c.startControl.x,c.startControl.y,c.endControl.x,c.endControl.y,c.end.x,c.end.y)})},e.prototype.renderRepeat=function(i,o,c,d){this.path(i),this.ctx.fillStyle=o,this.ctx.translate(c,d),this.ctx.fill(),this.ctx.translate(-c,-d)},e.prototype.resizeImage=function(i,o,c){var d;if(i.width===o&&i.height===c)return i;var f=(d=this.canvas.ownerDocument)!==null&&d!==void 0?d:document,s=f.createElement("canvas");s.width=Math.max(1,o),s.height=Math.max(1,c);var v=s.getContext("2d");return v.drawImage(i,0,0,i.width,i.height,0,0,o,c),s},e.prototype.renderBackgroundImage=function(i){return Hs(this,void 0,void 0,function(){var o,c,d,f,s,v;return xs(this,function(C){switch(C.label){case 0:o=i.styles.backgroundImage.length-1,c=function(P){var M,Q,E,tt,lt,mt,Fe,Se,me,z,tt,lt,mt,Fe,Se,V,ee,Z,ne,Be,ze,Ne,Oe,ve,me,Qe,tt,se,ue,Fe,Se,yt,lt,mt,Ye,gt,Ct,nr,Ae,Ie,Me,je;return xs(this,function(nt){switch(nt.label){case 0:if(P.type!==0)return[3,5];M=void 0,Q=P.url,nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,d.context.cache.match(Q)];case 2:return M=nt.sent(),[3,4];case 3:return nt.sent(),d.context.logger.error("Error loading background-image "+Q),[3,4];case 4:return M&&(E=Tm(i,o,[M.width,M.height,M.width/M.height]),tt=E[0],lt=E[1],mt=E[2],Fe=E[3],Se=E[4],me=d.ctx.createPattern(d.resizeImage(M,Fe,Se),"repeat"),d.renderRepeat(tt,me,lt,mt)),[3,6];case 5:GS(P)?(z=Tm(i,o,[null,null,null]),tt=z[0],lt=z[1],mt=z[2],Fe=z[3],Se=z[4],V=OS(P.angle,Fe,Se),ee=V[0],Z=V[1],ne=V[2],Be=V[3],ze=V[4],Ne=document.createElement("canvas"),Ne.width=Fe,Ne.height=Se,Oe=Ne.getContext("2d"),ve=Oe.createLinearGradient(Z,Be,ne,ze),yb(P.stops,ee).forEach(function(ut){return ve.addColorStop(ut.stop,ja(ut.color))}),Oe.fillStyle=ve,Oe.fillRect(0,0,Fe,Se),Fe>0&&Se>0&&(me=d.ctx.createPattern(Ne,"repeat"),d.renderRepeat(tt,me,lt,mt))):KS(P)&&(Qe=Tm(i,o,[null,null,null]),tt=Qe[0],se=Qe[1],ue=Qe[2],Fe=Qe[3],Se=Qe[4],yt=P.position.length===0?[u1]:P.position,lt=fi(yt[0],Fe),mt=fi(yt[yt.length-1],Se),Ye=zS(P,lt,mt,Fe,Se),gt=Ye[0],Ct=Ye[1],gt>0&&Ct>0&&(nr=d.ctx.createRadialGradient(se+lt,ue+mt,0,se+lt,ue+mt,gt),yb(P.stops,gt*2).forEach(function(ut){return nr.addColorStop(ut.stop,ja(ut.color))}),d.path(tt),d.ctx.fillStyle=nr,gt!==Ct?(Ae=i.bounds.left+.5*i.bounds.width,Ie=i.bounds.top+.5*i.bounds.height,Me=Ct/gt,je=1/Me,d.ctx.save(),d.ctx.translate(Ae,Ie),d.ctx.transform(1,0,0,Me,0,0),d.ctx.translate(-Ae,-Ie),d.ctx.fillRect(se,je*(ue-Ie)+Ie,Fe,Se*je),d.ctx.restore()):d.ctx.fill())),nt.label=6;case 6:return o--,[2]}})},d=this,f=0,s=i.styles.backgroundImage.slice(0).reverse(),C.label=1;case 1:return f<s.length?(v=s[f],[5,c(v)]):[3,4];case 2:C.sent(),C.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(i,o,c){return Hs(this,void 0,void 0,function(){return xs(this,function(d){return this.path($b(c,o)),this.ctx.fillStyle=ja(i),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(i,o,c,d){return Hs(this,void 0,void 0,function(){var f,s;return xs(this,function(v){switch(v.label){case 0:return o<3?[4,this.renderSolidBorder(i,c,d)]:[3,2];case 1:return v.sent(),[2];case 2:return f=$L(d,c),this.path(f),this.ctx.fillStyle=ja(i),this.ctx.fill(),s=WL(d,c),this.path(s),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(i){return Hs(this,void 0,void 0,function(){var o,c,d,f,s,v,C,P,M=this;return xs(this,function(Q){switch(Q.label){case 0:return this.applyEffects(i.getEffects(2)),o=i.container.styles,c=!Mc(o.backgroundColor)||o.backgroundImage.length,d=[{style:o.borderTopStyle,color:o.borderTopColor,width:o.borderTopWidth},{style:o.borderRightStyle,color:o.borderRightColor,width:o.borderRightWidth},{style:o.borderBottomStyle,color:o.borderBottomColor,width:o.borderBottomWidth},{style:o.borderLeftStyle,color:o.borderLeftColor,width:o.borderLeftWidth}],f=oP(ah(o.backgroundClip,0),i.curves),c||o.boxShadow.length?(this.ctx.save(),this.path(f),this.ctx.clip(),Mc(o.backgroundColor)||(this.ctx.fillStyle=ja(o.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:Q.sent(),this.ctx.restore(),o.boxShadow.slice(0).reverse().forEach(function(E){M.ctx.save();var z=Fp(i.curves),V=E.inset?0:iP,ee=qL(z,-V+(E.inset?1:-1)*E.spread.number,(E.inset?1:-1)*E.spread.number,E.spread.number*(E.inset?-2:2),E.spread.number*(E.inset?-2:2));E.inset?(M.path(z),M.ctx.clip(),M.mask(ee)):(M.mask(z),M.ctx.clip(),M.path(ee)),M.ctx.shadowOffsetX=E.offsetX.number+V,M.ctx.shadowOffsetY=E.offsetY.number,M.ctx.shadowColor=ja(E.color),M.ctx.shadowBlur=E.blur.number,M.ctx.fillStyle=E.inset?ja(E.color):"rgba(0,0,0,1)",M.ctx.fill(),M.ctx.restore()}),Q.label=2;case 2:s=0,v=0,C=d,Q.label=3;case 3:return v<C.length?(P=C[v],P.style!==0&&!Mc(P.color)&&P.width>0?P.style!==2?[3,5]:[4,this.renderDashedDottedBorder(P.color,P.width,s,i.curves,2)]:[3,11]):[3,13];case 4:return Q.sent(),[3,11];case 5:return P.style!==3?[3,7]:[4,this.renderDashedDottedBorder(P.color,P.width,s,i.curves,3)];case 6:return Q.sent(),[3,11];case 7:return P.style!==4?[3,9]:[4,this.renderDoubleBorder(P.color,P.width,s,i.curves)];case 8:return Q.sent(),[3,11];case 9:return[4,this.renderSolidBorder(P.color,s,i.curves)];case 10:Q.sent(),Q.label=11;case 11:s++,Q.label=12;case 12:return v++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(i,o,c,d,f){return Hs(this,void 0,void 0,function(){var s,v,C,P,M,Q,E,z,V,ee,Z,ne,Be,ze,Ne,Oe,Ne,Oe;return xs(this,function(ve){return this.ctx.save(),s=XL(d,c),v=$b(d,c),f===2&&(this.path(v),this.ctx.clip()),tA(v[0])?(C=v[0].start.x,P=v[0].start.y):(C=v[0].x,P=v[0].y),tA(v[1])?(M=v[1].end.x,Q=v[1].end.y):(M=v[1].x,Q=v[1].y),c===0||c===2?E=Math.abs(C-M):E=Math.abs(P-Q),this.ctx.beginPath(),f===3?this.formatPath(s):this.formatPath(v.slice(0,2)),z=o<3?o*3:o*2,V=o<3?o*2:o,f===3&&(z=o,V=o),ee=!0,E<=z*2?ee=!1:E<=z*2+V?(Z=E/(2*z+V),z*=Z,V*=Z):(ne=Math.floor((E+V)/(z+V)),Be=(E-ne*z)/(ne-1),ze=(E-(ne+1)*z)/ne,V=ze<=0||Math.abs(V-Be)<Math.abs(V-ze)?Be:ze),ee&&(f===3?this.ctx.setLineDash([0,z+V]):this.ctx.setLineDash([z,V])),f===3?(this.ctx.lineCap="round",this.ctx.lineWidth=o):this.ctx.lineWidth=o*2+1.1,this.ctx.strokeStyle=ja(i),this.ctx.stroke(),this.ctx.setLineDash([]),f===2&&(tA(v[0])&&(Ne=v[3],Oe=v[0],this.ctx.beginPath(),this.formatPath([new mr(Ne.end.x,Ne.end.y),new mr(Oe.start.x,Oe.start.y)]),this.ctx.stroke()),tA(v[1])&&(Ne=v[1],Oe=v[2],this.ctx.beginPath(),this.formatPath([new mr(Ne.end.x,Ne.end.y),new mr(Oe.start.x,Oe.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(i){return Hs(this,void 0,void 0,function(){var o;return xs(this,function(c){switch(c.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ja(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),o=ZL(i),[4,this.renderStack(o)];case 1:return c.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Hw),sP=function(n){return n instanceof Cw||n instanceof Bw?!0:n instanceof p1&&n.type!==Bp&&n.type!==xp},oP=function(n,e){switch(n){case 0:return Fp(e);case 2:return HL(e);case 1:default:return Ep(e)}},AP=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},lP=["-apple-system","system-ui"],cP=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return lP.indexOf(e)===-1}):n},uP=function(n){kA(e,n);function e(i,o){var c=n.call(this,i,o)||this;return c.canvas=o.canvas?o.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),c.options=o,c.canvas.width=Math.floor(o.width*o.scale),c.canvas.height=Math.floor(o.height*o.scale),c.canvas.style.width=o.width+"px",c.canvas.style.height=o.height+"px",c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-o.x,-o.y),c.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+o.width+"x"+o.height+" at "+o.x+","+o.y+") with scale "+o.scale),c}return e.prototype.render=function(i){return Hs(this,void 0,void 0,function(){var o,c;return xs(this,function(d){switch(d.label){case 0:return o=w0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,hP(o)];case 1:return c=d.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ja(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(c,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Hw),hP=function(n){return new Promise(function(e,i){var o=new Image;o.onload=function(){e(o)},o.onerror=i,o.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},fP=function(){function n(e){var i=e.id,o=e.enabled;this.id=i,this.enabled=o,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,vd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,vd([this.id,this.getTime()+"ms"],e))},n.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,vd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,vd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.instances={},n}(),dP=function(){function n(e,i){var o;this.windowBounds=i,this.instanceName="#"+n.instanceCount++,this.logger=new fP({id:this.instanceName,enabled:e.logging}),this.cache=(o=e.cache)!==null&&o!==void 0?o:new UL(this,e)}return n.instanceCount=1,n}(),pP=function(n,e){return e===void 0&&(e={}),gP(n,e)};typeof window<"u"&&Qw.setContext(window);var gP=function(n,e){return Hs(void 0,void 0,void 0,function(){var i,o,c,d,f,s,v,C,P,M,Q,E,z,V,ee,Z,ne,Be,ze,Ne,ve,Oe,ve,me,Qe,tt,se,ue,Fe,Se,yt,lt,mt,Ye,gt,Ct,nr,Ae,Ie,Me;return xs(this,function(je){switch(je.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=n.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(o=i.defaultView,!o)throw new Error("Document is not attached to a Window");return c={allowTaint:(me=e.allowTaint)!==null&&me!==void 0?me:!1,imageTimeout:(Qe=e.imageTimeout)!==null&&Qe!==void 0?Qe:15e3,proxy:e.proxy,useCORS:(tt=e.useCORS)!==null&&tt!==void 0?tt:!1},d=o0({logging:(se=e.logging)!==null&&se!==void 0?se:!0,cache:e.cache},c),f={windowWidth:(ue=e.windowWidth)!==null&&ue!==void 0?ue:o.innerWidth,windowHeight:(Fe=e.windowHeight)!==null&&Fe!==void 0?Fe:o.innerHeight,scrollX:(Se=e.scrollX)!==null&&Se!==void 0?Se:o.pageXOffset,scrollY:(yt=e.scrollY)!==null&&yt!==void 0?yt:o.pageYOffset},s=new tc(f.scrollX,f.scrollY,f.windowWidth,f.windowHeight),v=new dP(d,s),C=(lt=e.foreignObjectRendering)!==null&&lt!==void 0?lt:!1,P={allowTaint:(mt=e.allowTaint)!==null&&mt!==void 0?mt:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:C,copyStyles:C},v.logger.debug("Starting document clone with size "+s.width+"x"+s.height+" scrolled to "+-s.left+","+-s.top),M=new Kb(v,n,P),Q=M.clonedReferenceElement,Q?[4,M.toIFrame(i,s)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return E=je.sent(),z=g1(Q)||mL(Q)?q6(Q.ownerDocument):zp(v,Q),V=z.width,ee=z.height,Z=z.left,ne=z.top,Be=mP(v,Q,e.backgroundColor),ze={canvas:e.canvas,backgroundColor:Be,scale:(gt=(Ye=e.scale)!==null&&Ye!==void 0?Ye:o.devicePixelRatio)!==null&&gt!==void 0?gt:1,x:((Ct=e.x)!==null&&Ct!==void 0?Ct:0)+Z,y:((nr=e.y)!==null&&nr!==void 0?nr:0)+ne,width:(Ae=e.width)!==null&&Ae!==void 0?Ae:Math.ceil(V),height:(Ie=e.height)!==null&&Ie!==void 0?Ie:Math.ceil(ee)},C?(v.logger.debug("Document cloned, using foreign object rendering"),ve=new uP(v,ze),[4,ve.render(Q)]):[3,3];case 2:return Ne=je.sent(),[3,5];case 3:return v.logger.debug("Document cloned, element located at "+Z+","+ne+" with size "+V+"x"+ee+" using computed rendering"),v.logger.debug("Starting DOM parsing"),Oe=Ew(v,Q),Be===Oe.styles.backgroundColor&&(Oe.styles.backgroundColor=Jl.TRANSPARENT),v.logger.debug("Starting renderer for element at "+ze.x+","+ze.y+" with size "+ze.width+"x"+ze.height),ve=new aP(v,ze),[4,ve.render(Oe)];case 4:Ne=je.sent(),je.label=5;case 5:return(!((Me=e.removeContainer)!==null&&Me!==void 0)||Me)&&(Kb.destroy(E)||v.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),v.logger.debug("Finished rendering"),[2,Ne]}})})},mP=function(n,e,i){var o=e.ownerDocument,c=o.documentElement?_f(n,getComputedStyle(o.documentElement).backgroundColor):Jl.TRANSPARENT,d=o.body?_f(n,getComputedStyle(o.body).backgroundColor):Jl.TRANSPARENT,f=typeof i=="string"?_f(n,i):i===null?Jl.TRANSPARENT:4294967295;return e===o.documentElement?Mc(c)?Mc(d)?f:d:c:f};const yP=Object.freeze(Object.defineProperty({__proto__:null,default:pP},Symbol.toStringTag,{value:"Module"}));function Zn(n){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(n)}var qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Lm(){qr.console&&typeof qr.console.log=="function"&&qr.console.log.apply(qr.console,arguments)}var oi={log:Lm,warn:function(n){qr.console&&(typeof qr.console.warn=="function"?qr.console.warn.apply(qr.console,arguments):Lm.call(null,arguments))},error:function(n){qr.console&&(typeof qr.console.error=="function"?qr.console.error.apply(qr.console,arguments):Lm(n))}};function Pm(n,e,i){var o=new XMLHttpRequest;o.open("GET",n),o.responseType="blob",o.onload=function(){iu(o.response,e,i)},o.onerror=function(){oi.error("could not download file")},o.send()}function Xb(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Vd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var xf,S0,iu=qr.saveAs||((typeof window>"u"?"undefined":Zn(window))!=="object"||window!==qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,i){var o=qr.URL||qr.webkitURL,c=document.createElement("a");e=e||n.name||"download",c.download=e,c.rel="noopener",typeof n=="string"?(c.href=n,c.origin!==location.origin?Xb(c.href)?Pm(n,e,i):Vd(c,c.target="_blank"):Vd(c)):(c.href=o.createObjectURL(n),setTimeout(function(){o.revokeObjectURL(c.href)},4e4),setTimeout(function(){Vd(c)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,i){if(e=e||n.name||"download",typeof n=="string")if(Xb(n))Pm(n,e,i);else{var o=document.createElement("a");o.href=n,o.target="_blank",setTimeout(function(){Vd(o)})}else navigator.msSaveOrOpenBlob(function(c,d){return d===void 0?d={autoBom:!1}:Zn(d)!=="object"&&(oi.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}(n,i),e)}:function(n,e,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof n=="string")return Pm(n,e,i);var c=n.type==="application/octet-stream",d=/constructor/i.test(qr.HTMLElement)||qr.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||c&&d)&&(typeof FileReader>"u"?"undefined":Zn(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var P=s.result;P=f?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=P:location=P,o=null},s.readAsDataURL(n)}else{var v=qr.URL||qr.webkitURL,C=v.createObjectURL(n);o?o.location=C:location.href=C,o=null,setTimeout(function(){v.revokeObjectURL(C)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jw(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],o=0;o<i.length;o++){var c=i[o].re,d=i[o].process,f=c.exec(n);f&&(e=d(f),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),v=this.g.toString(16),C=this.b.toString(16);return s.length==1&&(s="0"+s),v.length==1&&(v="0"+v),C.length==1&&(C="0"+C),"#"+s+v+C}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Mm(n,e){var i=n[0],o=n[1],c=n[2],d=n[3];i=ys(i,o,c,d,e[0],7,-680876936),d=ys(d,i,o,c,e[1],12,-389564586),c=ys(c,d,i,o,e[2],17,606105819),o=ys(o,c,d,i,e[3],22,-1044525330),i=ys(i,o,c,d,e[4],7,-176418897),d=ys(d,i,o,c,e[5],12,1200080426),c=ys(c,d,i,o,e[6],17,-1473231341),o=ys(o,c,d,i,e[7],22,-45705983),i=ys(i,o,c,d,e[8],7,1770035416),d=ys(d,i,o,c,e[9],12,-1958414417),c=ys(c,d,i,o,e[10],17,-42063),o=ys(o,c,d,i,e[11],22,-1990404162),i=ys(i,o,c,d,e[12],7,1804603682),d=ys(d,i,o,c,e[13],12,-40341101),c=ys(c,d,i,o,e[14],17,-1502002290),i=_s(i,o=ys(o,c,d,i,e[15],22,1236535329),c,d,e[1],5,-165796510),d=_s(d,i,o,c,e[6],9,-1069501632),c=_s(c,d,i,o,e[11],14,643717713),o=_s(o,c,d,i,e[0],20,-373897302),i=_s(i,o,c,d,e[5],5,-701558691),d=_s(d,i,o,c,e[10],9,38016083),c=_s(c,d,i,o,e[15],14,-660478335),o=_s(o,c,d,i,e[4],20,-405537848),i=_s(i,o,c,d,e[9],5,568446438),d=_s(d,i,o,c,e[14],9,-1019803690),c=_s(c,d,i,o,e[3],14,-187363961),o=_s(o,c,d,i,e[8],20,1163531501),i=_s(i,o,c,d,e[13],5,-1444681467),d=_s(d,i,o,c,e[2],9,-51403784),c=_s(c,d,i,o,e[7],14,1735328473),i=bs(i,o=_s(o,c,d,i,e[12],20,-1926607734),c,d,e[5],4,-378558),d=bs(d,i,o,c,e[8],11,-2022574463),c=bs(c,d,i,o,e[11],16,1839030562),o=bs(o,c,d,i,e[14],23,-35309556),i=bs(i,o,c,d,e[1],4,-1530992060),d=bs(d,i,o,c,e[4],11,1272893353),c=bs(c,d,i,o,e[7],16,-155497632),o=bs(o,c,d,i,e[10],23,-1094730640),i=bs(i,o,c,d,e[13],4,681279174),d=bs(d,i,o,c,e[0],11,-358537222),c=bs(c,d,i,o,e[3],16,-722521979),o=bs(o,c,d,i,e[6],23,76029189),i=bs(i,o,c,d,e[9],4,-640364487),d=bs(d,i,o,c,e[12],11,-421815835),c=bs(c,d,i,o,e[15],16,530742520),i=vs(i,o=bs(o,c,d,i,e[2],23,-995338651),c,d,e[0],6,-198630844),d=vs(d,i,o,c,e[7],10,1126891415),c=vs(c,d,i,o,e[14],15,-1416354905),o=vs(o,c,d,i,e[5],21,-57434055),i=vs(i,o,c,d,e[12],6,1700485571),d=vs(d,i,o,c,e[3],10,-1894986606),c=vs(c,d,i,o,e[10],15,-1051523),o=vs(o,c,d,i,e[1],21,-2054922799),i=vs(i,o,c,d,e[8],6,1873313359),d=vs(d,i,o,c,e[15],10,-30611744),c=vs(c,d,i,o,e[6],15,-1560198380),o=vs(o,c,d,i,e[13],21,1309151649),i=vs(i,o,c,d,e[4],6,-145523070),d=vs(d,i,o,c,e[11],10,-1120210379),c=vs(c,d,i,o,e[2],15,718787259),o=vs(o,c,d,i,e[9],21,-343485551),n[0]=Lc(i,n[0]),n[1]=Lc(o,n[1]),n[2]=Lc(c,n[2]),n[3]=Lc(d,n[3])}function Xp(n,e,i,o,c,d){return e=Lc(Lc(e,n),Lc(o,d)),Lc(e<<c|e>>>32-c,i)}function ys(n,e,i,o,c,d,f){return Xp(e&i|~e&o,n,e,c,d,f)}function _s(n,e,i,o,c,d,f){return Xp(e&o|i&~o,n,e,c,d,f)}function bs(n,e,i,o,c,d,f){return Xp(e^i^o,n,e,c,d,f)}function vs(n,e,i,o,c,d,f){return Xp(i^(e|~o),n,e,c,d,f)}function Vw(n){var e,i=n.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Mm(o,_P(n.substring(e-64,e)));n=n.substring(e-64);var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)c[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(c[e>>2]|=128<<(e%4<<3),e>55)for(Mm(o,c),e=0;e<16;e++)c[e]=0;return c[14]=8*i,Mm(o,c),o}function _P(n){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return i}xf=qr.atob.bind(qr),S0=qr.btoa.bind(qr);var Jb="0123456789abcdef".split("");function bP(n){for(var e="",i=0;i<4;i++)e+=Jb[n>>8*i+4&15]+Jb[n>>8*i&15];return e}function vP(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function T0(n){return Vw(n).map(vP).join("")}var wP=function(n){for(var e=0;e<n.length;e++)n[e]=bP(n[e]);return n.join("")}(Vw("hello"))!="5d41402abc4b2a76b9719d911017c592";function Lc(n,e){if(wP){var i=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(i>>16)<<16|65535&i}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function L0(n,e){var i,o,c,d;if(n!==i){for(var f=(c=n,d=1+(256/n.length>>0),new Array(d+1).join(c)),s=[],v=0;v<256;v++)s[v]=v;var C=0;for(v=0;v<256;v++){var P=s[v];C=(C+P+f.charCodeAt(v))%256,s[v]=s[C],s[C]=P}i=n,o=s}else s=o;var M=e.length,Q=0,E=0,z="";for(v=0;v<M;v++)E=(E+(P=s[Q=(Q+1)%256]))%256,s[Q]=s[E],s[E]=P,f=s[(s[Q]+s[E])%256],z+=String.fromCharCode(e.charCodeAt(v)^f);return z}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Yb={print:4,modify:8,copy:16,"annot-forms":32};function sh(n,e,i,o){this.v=1,this.r=2;var c=192;n.forEach(function(s){if(Yb.perm!==void 0)throw new Error("Invalid permission: "+s);c+=Yb[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var d=(e+this.padding).substr(0,32),f=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(d,f),this.P=-(1+(255^c)),this.encryptionKey=T0(d+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=L0(this.encryptionKey,this.padding)}function oh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",i=n.length,o=0;o<i;o++){var c=n.charCodeAt(o);c<33||c===35||c===37||c===40||c===41||c===47||c===60||c===62||c===91||c===93||c===123||c===125||c>126?e+="#"+("0"+c.toString(16)).slice(-2):e+=n[o]}return e}function e2(n){if(Zn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(i,o,c){if(c=c||!1,typeof i!="string"||typeof o!="function"||typeof c!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(i)||(e[i]={});var d=Math.random().toString(35);return e[i][d]=[o,!!c],d},this.unsubscribe=function(i){for(var o in e)if(e[o][i])return delete e[o][i],Object.keys(e[o]).length===0&&delete e[o],!0;return!1},this.publish=function(i){if(e.hasOwnProperty(i)){var o=Array.prototype.slice.call(arguments,1),c=[];for(var d in e[i]){var f=e[i][d];try{f[0].apply(n,o)}catch(s){qr.console&&oi.error("jsPDF PubSub Error",s.message,s)}f[1]&&c.push(d)}c.length&&c.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Tp(n){if(!(this instanceof Tp))return new Tp(n);var e="opacity,stroke-opacity".split(",");for(var i in n)n.hasOwnProperty(i)&&e.indexOf(i)>=0&&(this[i]=n[i]);this.id="",this.objectNumber=-1}function Gw(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function ou(n,e,i,o,c){if(!(this instanceof ou))return new ou(n,e,i,o,c);this.type=n==="axial"?2:3,this.coords=e,this.colors=i,Gw.call(this,o,c)}function uh(n,e,i,o,c){if(!(this instanceof uh))return new uh(n,e,i,o,c);this.boundingBox=n,this.xStep=e,this.yStep=i,this.stream="",this.cloneIndex=0,Gw.call(this,o,c)}function Kr(n){var e,i=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],c=arguments[2],d=arguments[3],f=[],s=1,v=16,C="S",P=null;Zn(n=n||{})==="object"&&(i=n.orientation,o=n.unit||o,c=n.format||c,d=n.compress||n.compressPdf||d,(P=n.encryption||null)!==null&&(P.userPassword=P.userPassword||"",P.ownerPassword=P.ownerPassword||"",P.userPermissions=P.userPermissions||[]),s=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(v=n.floatPrecision),C=n.defaultPathOperation||"S"),f=n.filters||(d===!0?["FlateEncode"]:f),o=o||"mm",i=(""+(i||"P")).toLowerCase();var M=n.putOnlyUsedFonts||!1,Q={},E={internal:{},__private__:{}};E.__private__.PubSub=e2;var z="1.3",V=E.__private__.getPdfVersion=function(){return z};E.__private__.setPdfVersion=function(U){z=U};var ee={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};E.__private__.getPageFormats=function(){return ee};var Z=E.__private__.getPageFormat=function(U){return ee[U]};c=c||"a4";var ne={COMPAT:"compat",ADVANCED:"advanced"},Be=ne.COMPAT;function ze(){this.saveGraphicsState(),Ue(new Vt(ur,0,0,-ur,0,Xs()*ur).toString()+" cm"),this.setFontSize(this.getFontSize()/ur),C="n",Be=ne.ADVANCED}function Ne(){this.restoreGraphicsState(),C="S",Be=ne.COMPAT}var Oe=E.__private__.combineFontStyleAndFontWeight=function(U,re){if(U=="bold"&&re=="normal"||U=="bold"&&re==400||U=="normal"&&re=="italic"||U=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(U=re==400||re==="normal"?U==="italic"?"italic":"normal":re!=700&&re!=="bold"||U!=="normal"?(re==700?"bold":re)+""+U:"bold"),U};E.advancedAPI=function(U){var re=Be===ne.COMPAT;return re&&ze.call(this),typeof U!="function"||(U(this),re&&Ne.call(this)),this},E.compatAPI=function(U){var re=Be===ne.ADVANCED;return re&&Ne.call(this),typeof U!="function"||(U(this),re&&ze.call(this)),this},E.isAdvancedAPI=function(){return Be===ne.ADVANCED};var ve,me=function(U){if(Be!==ne.ADVANCED)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Qe=E.roundToPrecision=E.__private__.roundToPrecision=function(U,re){var Ee=e||re;if(isNaN(U)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ee).replace(/0+$/,"")};ve=E.hpf=E.__private__.hpf=typeof v=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(U,v)}:v==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(U,16)};var tt=E.f2=E.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return Qe(U,2)},se=E.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return Qe(U,3)},ue=E.scale=E.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return Be===ne.COMPAT?U*ur:Be===ne.ADVANCED?U:void 0},Fe=function(U){return Be===ne.COMPAT?Xs()-U:Be===ne.ADVANCED?U:void 0},Se=function(U){return ue(Fe(U))};E.__private__.setPrecision=E.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var yt,lt="00000000000000000000000000000000",mt=E.__private__.getFileId=function(){return lt},Ye=E.__private__.setFileId=function(U){return lt=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():lt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),P!==null&&(di=new sh(P.userPermissions,P.userPassword,P.ownerPassword,lt)),lt};E.setFileId=function(U){return Ye(U),this},E.getFileId=function(){return mt()};var gt=E.__private__.convertDateToPDFDate=function(U){var re=U.getTimezoneOffset(),Ee=re<0?"+":"-",$e=Math.floor(Math.abs(re/60)),ct=Math.abs(re%60),Mt=[Ee,Me($e),"'",Me(ct),"'"].join("");return["D:",U.getFullYear(),Me(U.getMonth()+1),Me(U.getDate()),Me(U.getHours()),Me(U.getMinutes()),Me(U.getSeconds()),Mt].join("")},Ct=E.__private__.convertPDFDateToDate=function(U){var re=parseInt(U.substr(2,4),10),Ee=parseInt(U.substr(6,2),10)-1,$e=parseInt(U.substr(8,2),10),ct=parseInt(U.substr(10,2),10),Mt=parseInt(U.substr(12,2),10),Kt=parseInt(U.substr(14,2),10);return new Date(re,Ee,$e,ct,Mt,Kt,0)},nr=E.__private__.setCreationDate=function(U){var re;if(U===void 0&&(U=new Date),U instanceof Date)re=gt(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=U}return yt=re},Ae=E.__private__.getCreationDate=function(U){var re=yt;return U==="jsDate"&&(re=Ct(yt)),re};E.setCreationDate=function(U){return nr(U),this},E.getCreationDate=function(U){return Ae(U)};var Ie,Me=E.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},je=E.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},nt=0,ut=[],xt=[],Bt=0,tr=[],ot=[],Ut=!1,Ot=xt,Xt=function(){nt=0,Bt=0,xt=[],ut=[],tr=[],kt=Fr(),yr=Fr()};E.__private__.setCustomOutputDestination=function(U){Ut=!0,Ot=U};var Ft=function(U){Ut||(Ot=U)};E.__private__.resetCustomOutputDestination=function(){Ut=!1,Ot=xt};var Ue=E.__private__.out=function(U){return U=U.toString(),Bt+=U.length+1,Ot.push(U),Ot},sr=E.__private__.write=function(U){return Ue(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},fr=E.__private__.getArrayBuffer=function(U){for(var re=U.length,Ee=new ArrayBuffer(re),$e=new Uint8Array(Ee);re--;)$e[re]=U.charCodeAt(re);return Ee},jt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];E.__private__.getStandardFonts=function(){return jt};var er=n.fontSize||16;E.__private__.setFontSize=E.setFontSize=function(U){return er=Be===ne.ADVANCED?U/ur:U,this};var ar,or=E.__private__.getFontSize=E.getFontSize=function(){return Be===ne.COMPAT?er:er*ur},wr=n.R2L||!1;E.__private__.setR2L=E.setR2L=function(U){return wr=U,this},E.__private__.getR2L=E.getR2L=function(){return wr};var kr,Hr=E.__private__.setZoomMode=function(U){var re=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))ar=U;else if(isNaN(U)){if(re.indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');ar=U}else ar=parseInt(U,10)};E.__private__.getZoomMode=function(){return ar};var Wr,on=E.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');kr=U};E.__private__.getPageMode=function(){return kr};var pn=E.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');Wr=U};E.__private__.getLayoutMode=function(){return Wr},E.__private__.setDisplayMode=E.setDisplayMode=function(U,re,Ee){return Hr(U),pn(re),on(Ee),this};var Pr={title:"",subject:"",author:"",keywords:"",creator:""};E.__private__.getDocumentProperty=function(U){if(Object.keys(Pr).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pr[U]},E.__private__.getDocumentProperties=function(){return Pr},E.__private__.setDocumentProperties=E.setProperties=E.setDocumentProperties=function(U){for(var re in Pr)Pr.hasOwnProperty(re)&&U[re]&&(Pr[re]=U[re]);return this},E.__private__.setDocumentProperty=function(U,re){if(Object.keys(Pr).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pr[U]=re};var Zr,ur,Dn,Vr,bi,Xe={},ae={},le=[],fe={},Le={},He={},pe={},ht=null,Ke=0,Ze=[],at=new e2(E),At=n.hotfixes||[],Lt={},$t={},Jt=[],Vt=function U(re,Ee,$e,ct,Mt,Kt){if(!(this instanceof U))return new U(re,Ee,$e,ct,Mt,Kt);isNaN(re)&&(re=1),isNaN(Ee)&&(Ee=0),isNaN($e)&&($e=0),isNaN(ct)&&(ct=1),isNaN(Mt)&&(Mt=0),isNaN(Kt)&&(Kt=0),this._matrix=[re,Ee,$e,ct,Mt,Kt]};Object.defineProperty(Vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Vt.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ve).join(U)},Vt.prototype.multiply=function(U){var re=U.sx*this.sx+U.shy*this.shx,Ee=U.sx*this.shy+U.shy*this.sy,$e=U.shx*this.sx+U.sy*this.shx,ct=U.shx*this.shy+U.sy*this.sy,Mt=U.tx*this.sx+U.ty*this.shx+this.tx,Kt=U.tx*this.shy+U.ty*this.sy+this.ty;return new Vt(re,Ee,$e,ct,Mt,Kt)},Vt.prototype.decompose=function(){var U=this.sx,re=this.shy,Ee=this.shx,$e=this.sy,ct=this.tx,Mt=this.ty,Kt=Math.sqrt(U*U+re*re),lr=(U/=Kt)*Ee+(re/=Kt)*$e;Ee-=U*lr,$e-=re*lr;var Lr=Math.sqrt(Ee*Ee+$e*$e);return lr/=Lr,U*($e/=Lr)<re*(Ee/=Lr)&&(U=-U,re=-re,lr=-lr,Kt=-Kt),{scale:new Vt(Kt,0,0,Lr,0,0),translate:new Vt(1,0,0,1,ct,Mt),rotate:new Vt(U,re,-re,U,0,0),skew:new Vt(1,0,lr,1,0,0)}},Vt.prototype.toString=function(U){return this.join(" ")},Vt.prototype.inversed=function(){var U=this.sx,re=this.shy,Ee=this.shx,$e=this.sy,ct=this.tx,Mt=this.ty,Kt=1/(U*$e-re*Ee),lr=$e*Kt,Lr=-re*Kt,Gr=-Ee*Kt,zr=U*Kt;return new Vt(lr,Lr,Gr,zr,-lr*ct-Gr*Mt,-Lr*ct-zr*Mt)},Vt.prototype.applyToPoint=function(U){var re=U.x*this.sx+U.y*this.shx+this.tx,Ee=U.x*this.shy+U.y*this.sy+this.ty;return new $s(re,Ee)},Vt.prototype.applyToRectangle=function(U){var re=this.applyToPoint(U),Ee=this.applyToPoint(new $s(U.x+U.w,U.y+U.h));return new Ua(re.x,re.y,Ee.x-re.x,Ee.y-re.y)},Vt.prototype.clone=function(){var U=this.sx,re=this.shy,Ee=this.shx,$e=this.sy,ct=this.tx,Mt=this.ty;return new Vt(U,re,Ee,$e,ct,Mt)},E.Matrix=Vt;var Sr=E.matrixMult=function(U,re){return re.multiply(U)},xr=new Vt(1,0,0,1,0,0);E.unitMatrix=E.identityMatrix=xr;var _t=function(U,re){if(!Le[U]){var Ee=(re instanceof ou?"Sh":"P")+(Object.keys(fe).length+1).toString(10);re.id=Ee,Le[U]=Ee,fe[Ee]=re,at.publish("addPattern",re)}};E.ShadingPattern=ou,E.TilingPattern=uh,E.addShadingPattern=function(U,re){return me("addShadingPattern()"),_t(U,re),this},E.beginTilingPattern=function(U){me("beginTilingPattern()"),Go(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},E.endTilingPattern=function(U,re){me("endTilingPattern()"),re.stream=ot[Ie].join(`
`),_t(U,re),at.publish("endTilingPattern",re),Jt.pop().restore()};var Nr=E.__private__.newObject=function(){var U=Fr();return jr(U,!0),U},Fr=E.__private__.newObjectDeferred=function(){return nt++,ut[nt]=function(){return Bt},nt},jr=function(U,re){return re=typeof re=="boolean"&&re,ut[U]=Bt,re&&Ue(U+" 0 obj"),U},Cr=E.__private__.newAdditionalObject=function(){var U={objId:Fr(),content:""};return tr.push(U),U},kt=Fr(),yr=Fr(),Tr=E.__private__.decodeColorString=function(U){var re=U.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length===5&&(re[4]==="k"||re[4]==="K")&&(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var Ee=parseFloat(re[0]);re=[Ee,Ee,Ee,"r"]}for(var $e="#",ct=0;ct<3;ct++)$e+=("0"+Math.floor(255*parseFloat(re[ct])).toString(16)).slice(-2);return $e},yn=E.__private__.encodeColorString=function(U){var re;typeof U=="string"&&(U={ch1:U});var Ee=U.ch1,$e=U.ch2,ct=U.ch3,Mt=U.ch4,Kt=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var lr=new jw(Ee);if(lr.ok)Ee=lr.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Lr=parseInt(Ee.substr(1),16);Ee=Lr>>16&255,$e=Lr>>8&255,ct=255&Lr}if($e===void 0||Mt===void 0&&Ee===$e&&$e===ct)if(typeof Ee=="string")re=Ee+" "+Kt[0];else switch(U.precision){case 2:re=tt(Ee/255)+" "+Kt[0];break;case 3:default:re=se(Ee/255)+" "+Kt[0]}else if(Mt===void 0||Zn(Mt)==="object"){if(Mt&&!isNaN(Mt.a)&&Mt.a===0)return re=["1.","1.","1.",Kt[1]].join(" ");if(typeof Ee=="string")re=[Ee,$e,ct,Kt[1]].join(" ");else switch(U.precision){case 2:re=[tt(Ee/255),tt($e/255),tt(ct/255),Kt[1]].join(" ");break;default:case 3:re=[se(Ee/255),se($e/255),se(ct/255),Kt[1]].join(" ")}}else if(typeof Ee=="string")re=[Ee,$e,ct,Mt,Kt[2]].join(" ");else switch(U.precision){case 2:re=[tt(Ee),tt($e),tt(ct),tt(Mt),Kt[2]].join(" ");break;case 3:default:re=[se(Ee),se($e),se(ct),se(Mt),Kt[2]].join(" ")}return re},vn=E.__private__.getFilters=function(){return f},Hn=E.__private__.putStream=function(U){var re=(U=U||{}).data||"",Ee=U.filters||vn(),$e=U.alreadyAppliedFilters||[],ct=U.addLength1||!1,Mt=re.length,Kt=U.objectId,lr=function(li){return li};if(P!==null&&Kt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");P!==null&&(lr=di.encryptor(Kt,0));var Lr={};Ee===!0&&(Ee=["FlateEncode"]);var Gr=U.additionalKeyValues||[],zr=(Lr=Kr.API.processDataByFilters!==void 0?Kr.API.processDataByFilters(re,Ee):{data:re,reverseChain:[]}).reverseChain+(Array.isArray($e)?$e.join(" "):$e.toString());if(Lr.data.length!==0&&(Gr.push({key:"Length",value:Lr.data.length}),ct===!0&&Gr.push({key:"Length1",value:Mt})),zr.length!=0)if(zr.split("/").length-1==1)Gr.push({key:"Filter",value:zr});else{Gr.push({key:"Filter",value:"["+zr+"]"});for(var ln=0;ln<Gr.length;ln+=1)if(Gr[ln].key==="DecodeParms"){for(var ri=[],Gn=0;Gn<Lr.reverseChain.split("/").length-1;Gn+=1)ri.push("null");ri.push(Gr[ln].value),Gr[ln].value="["+ri.join(" ")+"]"}}Ue("<<");for(var pi=0;pi<Gr.length;pi++)Ue("/"+Gr[pi].key+" "+Gr[pi].value);Ue(">>"),Lr.data.length!==0&&(Ue("stream"),Ue(lr(Lr.data)),Ue("endstream"))},Ur=E.__private__.putPage=function(U){var re=U.number,Ee=U.data,$e=U.objId,ct=U.contentsObjId;jr($e,!0),Ue("<</Type /Page"),Ue("/Parent "+U.rootDictionaryObjId+" 0 R"),Ue("/Resources "+U.resourceDictionaryObjId+" 0 R"),Ue("/MediaBox ["+parseFloat(ve(U.mediaBox.bottomLeftX))+" "+parseFloat(ve(U.mediaBox.bottomLeftY))+" "+ve(U.mediaBox.topRightX)+" "+ve(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&Ue("/CropBox ["+ve(U.cropBox.bottomLeftX)+" "+ve(U.cropBox.bottomLeftY)+" "+ve(U.cropBox.topRightX)+" "+ve(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&Ue("/BleedBox ["+ve(U.bleedBox.bottomLeftX)+" "+ve(U.bleedBox.bottomLeftY)+" "+ve(U.bleedBox.topRightX)+" "+ve(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&Ue("/TrimBox ["+ve(U.trimBox.bottomLeftX)+" "+ve(U.trimBox.bottomLeftY)+" "+ve(U.trimBox.topRightX)+" "+ve(U.trimBox.topRightY)+"]"),U.artBox!==null&&Ue("/ArtBox ["+ve(U.artBox.bottomLeftX)+" "+ve(U.artBox.bottomLeftY)+" "+ve(U.artBox.topRightX)+" "+ve(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&Ue("/UserUnit "+U.userUnit),at.publish("putPage",{objId:$e,pageContext:Ze[re],pageNumber:re,page:Ee}),Ue("/Contents "+ct+" 0 R"),Ue(">>"),Ue("endobj");var Mt=Ee.join(`
`);return Be===ne.ADVANCED&&(Mt+=`
Q`),jr(ct,!0),Hn({data:Mt,filters:vn(),objectId:ct}),Ue("endobj"),$e},as=E.__private__.putPages=function(){var U,re,Ee=[];for(U=1;U<=Ke;U++)Ze[U].objId=Fr(),Ze[U].contentsObjId=Fr();for(U=1;U<=Ke;U++)Ee.push(Ur({number:U,data:ot[U],objId:Ze[U].objId,contentsObjId:Ze[U].contentsObjId,mediaBox:Ze[U].mediaBox,cropBox:Ze[U].cropBox,bleedBox:Ze[U].bleedBox,trimBox:Ze[U].trimBox,artBox:Ze[U].artBox,userUnit:Ze[U].userUnit,rootDictionaryObjId:kt,resourceDictionaryObjId:yr}));jr(kt,!0),Ue("<</Type /Pages");var $e="/Kids [";for(re=0;re<Ke;re++)$e+=Ee[re]+" 0 R ";Ue($e+"]"),Ue("/Count "+Ke),Ue(">>"),Ue("endobj"),at.publish("postPutPages")},Vs=function(U){at.publish("putFont",{font:U,out:Ue,newObject:Nr,putStream:Hn}),U.isAlreadyPutted!==!0&&(U.objectNumber=Nr(),Ue("<<"),Ue("/Type /Font"),Ue("/BaseFont /"+oh(U.postScriptName)),Ue("/Subtype /Type1"),typeof U.encoding=="string"&&Ue("/Encoding /"+U.encoding),Ue("/FirstChar 32"),Ue("/LastChar 255"),Ue(">>"),Ue("endobj"))},ss=function(){for(var U in Xe)Xe.hasOwnProperty(U)&&(M===!1||M===!0&&Q.hasOwnProperty(U))&&Vs(Xe[U])},Gs=function(U){U.objectNumber=Nr();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[ve(U.x),ve(U.y),ve(U.x+U.width),ve(U.y+U.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ee=U.pages[1].join(`
`);Hn({data:Ee,additionalKeyValues:re,objectId:U.objectNumber}),Ue("endobj")},Pa=function(){for(var U in Lt)Lt.hasOwnProperty(U)&&Gs(Lt[U])},Ks=function(U,re){var Ee,$e=[],ct=1/(re-1);for(Ee=0;Ee<1;Ee+=ct)$e.push(Ee);if($e.push(1),U[0].offset!=0){var Mt={offset:0,color:U[0].color};U.unshift(Mt)}if(U[U.length-1].offset!=1){var Kt={offset:1,color:U[U.length-1].color};U.push(Kt)}for(var lr="",Lr=0,Gr=0;Gr<$e.length;Gr++){for(Ee=$e[Gr];Ee>U[Lr+1].offset;)Lr++;var zr=U[Lr].offset,ln=(Ee-zr)/(U[Lr+1].offset-zr),ri=U[Lr].color,Gn=U[Lr+1].color;lr+=je(Math.round((1-ln)*ri[0]+ln*Gn[0]).toString(16))+je(Math.round((1-ln)*ri[1]+ln*Gn[1]).toString(16))+je(Math.round((1-ln)*ri[2]+ln*Gn[2]).toString(16))}return lr.trim()},ti=function(U,re){re||(re=21);var Ee=Nr(),$e=Ks(U.colors,re),ct=[];ct.push({key:"FunctionType",value:"0"}),ct.push({key:"Domain",value:"[0.0 1.0]"}),ct.push({key:"Size",value:"["+re+"]"}),ct.push({key:"BitsPerSample",value:"8"}),ct.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ct.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hn({data:$e,additionalKeyValues:ct,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),Ue("endobj"),U.objectNumber=Nr(),Ue("<< /ShadingType "+U.type),Ue("/ColorSpace /DeviceRGB");var Mt="/Coords ["+ve(parseFloat(U.coords[0]))+" "+ve(parseFloat(U.coords[1]))+" ";U.type===2?Mt+=ve(parseFloat(U.coords[2]))+" "+ve(parseFloat(U.coords[3])):Mt+=ve(parseFloat(U.coords[2]))+" "+ve(parseFloat(U.coords[3]))+" "+ve(parseFloat(U.coords[4]))+" "+ve(parseFloat(U.coords[5])),Ue(Mt+="]"),U.matrix&&Ue("/Matrix ["+U.matrix.toString()+"]"),Ue("/Function "+Ee+" 0 R"),Ue("/Extend [true true]"),Ue(">>"),Ue("endobj")},ba=function(U,re){var Ee=Fr(),$e=Nr();re.push({resourcesOid:Ee,objectOid:$e}),U.objectNumber=$e;var ct=[];ct.push({key:"Type",value:"/Pattern"}),ct.push({key:"PatternType",value:"1"}),ct.push({key:"PaintType",value:"1"}),ct.push({key:"TilingType",value:"1"}),ct.push({key:"BBox",value:"["+U.boundingBox.map(ve).join(" ")+"]"}),ct.push({key:"XStep",value:ve(U.xStep)}),ct.push({key:"YStep",value:ve(U.yStep)}),ct.push({key:"Resources",value:Ee+" 0 R"}),U.matrix&&ct.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),Hn({data:U.stream,additionalKeyValues:ct,objectId:U.objectNumber}),Ue("endobj")},In=function(U){var re;for(re in fe)fe.hasOwnProperty(re)&&(fe[re]instanceof ou?ti(fe[re]):fe[re]instanceof uh&&ba(fe[re],U))},Qo=function(U){for(var re in U.objectNumber=Nr(),Ue("<<"),U)switch(re){case"opacity":Ue("/ca "+tt(U[re]));break;case"stroke-opacity":Ue("/CA "+tt(U[re]))}Ue(">>"),Ue("endobj")},Do=function(){var U;for(U in He)He.hasOwnProperty(U)&&Qo(He[U])},sA=function(){for(var U in Ue("/XObject <<"),Lt)Lt.hasOwnProperty(U)&&Lt[U].objectNumber>=0&&Ue("/"+U+" "+Lt[U].objectNumber+" 0 R");at.publish("putXobjectDict"),Ue(">>")},co=function(){di.oid=Nr(),Ue("<<"),Ue("/Filter /Standard"),Ue("/V "+di.v),Ue("/R "+di.r),Ue("/U <"+di.toHexString(di.U)+">"),Ue("/O <"+di.toHexString(di.O)+">"),Ue("/P "+di.P),Ue(">>"),Ue("endobj")},os=function(){for(var U in Ue("/Font <<"),Xe)Xe.hasOwnProperty(U)&&(M===!1||M===!0&&Q.hasOwnProperty(U))&&Ue("/"+U+" "+Xe[U].objectNumber+" 0 R");Ue(">>")},rc=function(){if(Object.keys(fe).length>0){for(var U in Ue("/Shading <<"),fe)fe.hasOwnProperty(U)&&fe[U]instanceof ou&&fe[U].objectNumber>=0&&Ue("/"+U+" "+fe[U].objectNumber+" 0 R");at.publish("putShadingPatternDict"),Ue(">>")}},Ro=function(U){if(Object.keys(fe).length>0){for(var re in Ue("/Pattern <<"),fe)fe.hasOwnProperty(re)&&fe[re]instanceof E.TilingPattern&&fe[re].objectNumber>=0&&fe[re].objectNumber<U&&Ue("/"+re+" "+fe[re].objectNumber+" 0 R");at.publish("putTilingPatternDict"),Ue(">>")}},nc=function(){if(Object.keys(He).length>0){var U;for(U in Ue("/ExtGState <<"),He)He.hasOwnProperty(U)&&He[U].objectNumber>=0&&Ue("/"+U+" "+He[U].objectNumber+" 0 R");at.publish("putGStateDict"),Ue(">>")}},Nn=function(U){jr(U.resourcesOid,!0),Ue("<<"),Ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),os(),rc(),Ro(U.objectOid),nc(),sA(),Ue(">>"),Ue("endobj")},xl=function(){var U=[];ss(),Do(),Pa(),In(U),at.publish("putResources"),U.forEach(Nn),Nn({resourcesOid:yr,objectOid:Number.MAX_SAFE_INTEGER}),at.publish("postPutResources")},ic=function(){at.publish("putAdditionalObjects");for(var U=0;U<tr.length;U++){var re=tr[U];jr(re.objId,!0),Ue(re.content),Ue("endobj")}at.publish("postPutAdditionalObjects")},ac=function(U){ae[U.fontName]=ae[U.fontName]||{},ae[U.fontName][U.fontStyle]=U.id},Bl=function(U,re,Ee,$e,ct){var Mt={id:"F"+(Object.keys(Xe).length+1).toString(10),postScriptName:U,fontName:re,fontStyle:Ee,encoding:$e,isStandardFont:ct||!1,metadata:{}};return at.publish("addFont",{font:Mt,instance:this}),Xe[Mt.id]=Mt,ac(Mt),Mt.id},sc=function(U){for(var re=0,Ee=jt.length;re<Ee;re++){var $e=Bl.call(this,U[re][0],U[re][1],U[re][2],jt[re][3],!0);M===!1&&(Q[$e]=!0);var ct=U[re][0].split("-");ac({id:$e,fontName:ct[0],fontStyle:ct[1]||""})}at.publish("addFonts",{fonts:Xe,dictionary:ae})},qa=function(U){return U.foo=function(){try{return U.apply(this,arguments)}catch($e){var re=$e.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var Ee="Error in function "+re.split(`
`)[0].split("<")[0]+": "+$e.message;if(!qr.console)throw new Error(Ee);qr.console.error(Ee,$e),qr.alert&&alert(Ee)}},U.foo.bar=U,U.foo},As=function(U,re){var Ee,$e,ct,Mt,Kt,lr,Lr,Gr,zr;if(ct=(re=re||{}).sourceEncoding||"Unicode",Kt=re.outputEncoding,(re.autoencode||Kt)&&Xe[Zr].metadata&&Xe[Zr].metadata[ct]&&Xe[Zr].metadata[ct].encoding&&(Mt=Xe[Zr].metadata[ct].encoding,!Kt&&Xe[Zr].encoding&&(Kt=Xe[Zr].encoding),!Kt&&Mt.codePages&&(Kt=Mt.codePages[0]),typeof Kt=="string"&&(Kt=Mt[Kt]),Kt)){for(Lr=!1,lr=[],Ee=0,$e=U.length;Ee<$e;Ee++)(Gr=Kt[U.charCodeAt(Ee)])?lr.push(String.fromCharCode(Gr)):lr.push(U[Ee]),lr[Ee].charCodeAt(0)>>8&&(Lr=!0);U=lr.join("")}for(Ee=U.length;Lr===void 0&&Ee!==0;)U.charCodeAt(Ee-1)>>8&&(Lr=!0),Ee--;if(!Lr)return U;for(lr=re.noBOM?[]:[254,255],Ee=0,$e=U.length;Ee<$e;Ee++){if((zr=(Gr=U.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+U+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lr.push(zr),lr.push(Gr-(zr<<8))}return String.fromCharCode.apply(void 0,lr)},ia=E.__private__.pdfEscape=E.pdfEscape=function(U,re){return As(U,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},RA=E.__private__.beginPage=function(U){ot[++Ke]=[],Ze[Ke]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},oc(Ke),Ft(ot[Ie])},qs=function(U,re){var Ee,$e,ct;switch(i=re||i,typeof U=="string"&&(Ee=Z(U.toLowerCase()),Array.isArray(Ee)&&($e=Ee[0],ct=Ee[1])),Array.isArray(U)&&($e=U[0]*ur,ct=U[1]*ur),isNaN($e)&&($e=c[0],ct=c[1]),($e>14400||ct>14400)&&(oi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),$e=Math.min(14400,$e),ct=Math.min(14400,ct)),c=[$e,ct],i.substr(0,1)){case"l":ct>$e&&(c=[ct,$e]);break;case"p":$e>ct&&(c=[ct,$e])}RA(c),jo(AA),Ue(Gi),HA!==0&&Ue(HA+" J"),Fl!==0&&Ue(Fl+" j"),at.publish("addPage",{pageNumber:Ke})},Cl=function(U){U>0&&U<=Ke&&(ot.splice(U,1),Ze.splice(U,1),Ke--,Ie>Ke&&(Ie=Ke),this.setPage(Ie))},oc=function(U){U>0&&U<=Ke&&(Ie=U)},oA=E.__private__.getNumberOfPages=E.getNumberOfPages=function(){return ot.length-1},No=function(U,re,Ee){var $e,ct=void 0;return Ee=Ee||{},U=U!==void 0?U:Xe[Zr].fontName,re=re!==void 0?re:Xe[Zr].fontStyle,$e=U.toLowerCase(),ae[$e]!==void 0&&ae[$e][re]!==void 0?ct=ae[$e][re]:ae[U]!==void 0&&ae[U][re]!==void 0?ct=ae[U][re]:Ee.disableWarning===!1&&oi.warn("Unable to look up font label for font '"+U+"', '"+re+"'. Refer to getFontList() for available fonts."),ct||Ee.noFallback||(ct=ae.times[re])==null&&(ct=ae.times.normal),ct},Il=E.__private__.putInfo=function(){var U=Nr(),re=function($e){return $e};for(var Ee in P!==null&&(re=di.encryptor(U,0)),Ue("<<"),Ue("/Producer ("+ia(re("jsPDF "+Kr.version))+")"),Pr)Pr.hasOwnProperty(Ee)&&Pr[Ee]&&Ue("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+ia(re(Pr[Ee]))+")");Ue("/CreationDate ("+ia(re(yt))+")"),Ue(">>"),Ue("endobj")},Si=E.__private__.putCatalog=function(U){var re=(U=U||{}).rootDictionaryObjId||kt;switch(Nr(),Ue("<<"),Ue("/Type /Catalog"),Ue("/Pages "+re+" 0 R"),ar||(ar="fullwidth"),ar){case"fullwidth":Ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ue("/OpenAction [3 0 R /Fit]");break;case"original":Ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+ar;Ee.substr(Ee.length-1)==="%"&&(ar=parseInt(ar)/100),typeof ar=="number"&&Ue("/OpenAction [3 0 R /XYZ null null "+tt(ar)+"]")}switch(Wr||(Wr="continuous"),Wr){case"continuous":Ue("/PageLayout /OneColumn");break;case"single":Ue("/PageLayout /SinglePage");break;case"two":case"twoleft":Ue("/PageLayout /TwoColumnLeft");break;case"tworight":Ue("/PageLayout /TwoColumnRight")}kr&&Ue("/PageMode /"+kr),at.publish("putCatalog"),Ue(">>"),Ue("endobj")},An=E.__private__.putTrailer=function(){Ue("trailer"),Ue("<<"),Ue("/Size "+(nt+1)),Ue("/Root "+nt+" 0 R"),Ue("/Info "+(nt-1)+" 0 R"),P!==null&&Ue("/Encrypt "+di.oid+" 0 R"),Ue("/ID [ <"+lt+"> <"+lt+"> ]"),Ue(">>")},Oo=E.__private__.putHeader=function(){Ue("%PDF-"+z),Ue("%ºß¬à")},Vi=E.__private__.putXRef=function(){var U="0000000000";Ue("xref"),Ue("0 "+(nt+1)),Ue("0000000000 65535 f ");for(var re=1;re<=nt;re++)typeof ut[re]=="function"?Ue((U+ut[re]()).slice(-10)+" 00000 n "):ut[re]!==void 0?Ue((U+ut[re]).slice(-10)+" 00000 n "):Ue("0000000000 00000 n ")},va=E.__private__.buildDocument=function(){Xt(),Ft(xt),at.publish("buildDocument"),Oo(),as(),ic(),xl(),P!==null&&co(),Il(),Si();var U=Bt;return Vi(),An(),Ue("startxref"),Ue(""+U),Ue("%%EOF"),Ft(ot[Ie]),xt.join(`
`)},Xr=E.__private__.getBlob=function(U){return new Blob([fr(U)],{type:"application/pdf"})},Zs=E.output=E.__private__.output=qa(function(U,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",U){case void 0:return va();case"save":E.save(re.filename);break;case"arraybuffer":return fr(va());case"blob":return Xr(va());case"bloburi":case"bloburl":if(qr.URL!==void 0&&typeof qr.URL.createObjectURL=="function")return qr.URL&&qr.URL.createObjectURL(Xr(va()))||void 0;oi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",$e=va();try{Ee=S0($e)}catch{Ee=S0(unescape(encodeURIComponent($e)))}return"data:application/pdf;filename="+re.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qr)==="[object Window]"){var ct="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Mt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(ct=re.pdfObjectUrl,Mt="");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ct+'"'+Mt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",lr=qr.open();return lr!==null&&lr.document.write(Kt),lr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qr)==="[object Window]"){var Lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',Gr=qr.open();if(Gr!==null){Gr.document.write(Lr);var zr=this;Gr.document.documentElement.querySelector("#pdfViewer").onload=function(){Gr.document.title=re.filename,Gr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(zr.output("bloburl"))}}return Gr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',ri=qr.open();if(ri!==null&&(ri.document.write(ln),ri.document.title=re.filename),ri||typeof safari>"u")return ri;break;case"datauri":case"dataurl":return qr.document.location.href=this.output("datauristring",re);default:return null}}),zo=function(U){return Array.isArray(At)===!0&&At.indexOf(U)>-1};switch(o){case"pt":ur=1;break;case"mm":ur=72/25.4;break;case"cm":ur=72/2.54;break;case"in":ur=72;break;case"px":ur=zo("px_scaling")==1?.75:96/72;break;case"pc":case"em":ur=12;break;case"ex":ur=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);ur=o}var di=null;nr(),Ye();var aa=function(U){return P!==null?di.encryptor(U,0):function(re){return re}},vi=E.__private__.getPageInfo=E.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ze[U].objId,pageNumber:U,pageContext:Ze[U]}},br=E.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in Ze)if(Ze[re].objId===U)break;return vi(re)},Ti=E.__private__.getCurrentPageInfo=E.getCurrentPageInfo=function(){return{objId:Ze[Ie].objId,pageNumber:Ie,pageContext:Ze[Ie]}};E.addPage=function(){return qs.apply(this,arguments),this},E.setPage=function(){return oc.apply(this,arguments),Ft.call(this,ot[Ie]),this},E.insertPage=function(U){return this.addPage(),this.movePage(Ie,U),this},E.movePage=function(U,re){var Ee,$e;if(U>re){Ee=ot[U],$e=Ze[U];for(var ct=U;ct>re;ct--)ot[ct]=ot[ct-1],Ze[ct]=Ze[ct-1];ot[re]=Ee,Ze[re]=$e,this.setPage(re)}else if(U<re){Ee=ot[U],$e=Ze[U];for(var Mt=U;Mt<re;Mt++)ot[Mt]=ot[Mt+1],Ze[Mt]=Ze[Mt+1];ot[re]=Ee,Ze[re]=$e,this.setPage(re)}return this},E.deletePage=function(){return Cl.apply(this,arguments),this},E.__private__.text=E.text=function(U,re,Ee,$e,ct){var Mt,Kt,lr,Lr,Gr,zr,ln,ri,Gn,pi=($e=$e||{}).scope||this;if(typeof U=="number"&&typeof re=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var li=Ee;Ee=re,re=U,U=li}if(arguments[3]instanceof Vt?(me("The transform parameter of text() with a Matrix value"),Gn=ct):(lr=arguments[4],Lr=arguments[5],Zn(ln=arguments[3])==="object"&&ln!==null||(typeof lr=="string"&&(Lr=lr,lr=null),typeof ln=="string"&&(Lr=ln,ln=null),typeof ln=="number"&&(lr=ln,ln=null),$e={flags:ln,angle:lr,align:Lr})),isNaN(re)||isNaN(Ee)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return pi;var Mi="",us=!1,Wa=typeof $e.lineHeightFactor=="number"?$e.lineHeightFactor:Ai,Fs=pi.internal.scaleFactor;function Ko(En){return En=En.split("	").join(Array($e.TabLen||9).join(" ")),ia(En,ln)}function jA(En){for(var Sn,Kn=En.concat(),ci=[],ps=Kn.length;ps--;)typeof(Sn=Kn.shift())=="string"?ci.push(Sn):Array.isArray(En)&&(Sn.length===1||Sn[1]===void 0&&Sn[2]===void 0)?ci.push(Sn[0]):ci.push([Sn[0],Sn[1],Sn[2]]);return ci}function VA(En,Sn){var Kn;if(typeof En=="string")Kn=Sn(En)[0];else if(Array.isArray(En)){for(var ci,ps,ro=En.concat(),Ls=[],Ul=ro.length;Ul--;)typeof(ci=ro.shift())=="string"?Ls.push(Sn(ci)[0]):Array.isArray(ci)&&typeof ci[0]=="string"&&(ps=Sn(ci[0],ci[1],ci[2]),Ls.push([ps[0],ps[1],ps[2]]));Kn=Ls}return Kn}var lA=!1,cA=!0;if(typeof U=="string")lA=!0;else if(Array.isArray(U)){var hs=U.concat();Kt=[];for(var uA,Di=hs.length;Di--;)(typeof(uA=hs.shift())!="string"||Array.isArray(uA)&&typeof uA[0]!="string")&&(cA=!1);lA=cA}if(lA===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var Es=er/pi.internal.scaleFactor,hA=Es*(Wa-1);switch($e.baseline){case"bottom":Ee-=hA;break;case"top":Ee+=Es-hA;break;case"hanging":Ee+=Es-2*hA;break;case"middle":Ee+=Es/2-hA}if((zr=$e.maxWidth||0)>0&&(typeof U=="string"?U=pi.splitTextToSize(U,zr):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(En,Sn){return En.concat(pi.splitTextToSize(Sn,zr))},[]))),Mt={text:U,x:re,y:Ee,options:$e,mutex:{pdfEscape:ia,activeFontKey:Zr,fonts:Xe,activeFontSize:er}},at.publish("preProcessText",Mt),U=Mt.text,lr=($e=Mt.options).angle,!(Gn instanceof Vt)&&lr&&typeof lr=="number"){lr*=Math.PI/180,$e.rotationDirection===0&&(lr=-lr),Be===ne.ADVANCED&&(lr=-lr);var mo=Math.cos(lr),Tl=Math.sin(lr);Gn=new Vt(mo,Tl,-Tl,mo,0,0)}else lr&&lr instanceof Vt&&(Gn=lr);Be!==ne.ADVANCED||Gn||(Gn=xr),(Gr=$e.charSpace||go)!==void 0&&(Mi+=ve(ue(Gr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ri=$e.horizontalScale)!==void 0&&(Mi+=ve(100*ri)+` Tz
`),$e.lang;var Qa=-1,Ll=$e.renderingMode!==void 0?$e.renderingMode:$e.stroke,GA=pi.internal.getCurrentPageInfo().pageContext;switch(Ll){case 0:case!1:case"fill":Qa=0;break;case 1:case!0:case"stroke":Qa=1;break;case 2:case"fillThenStroke":Qa=2;break;case 3:case"invisible":Qa=3;break;case 4:case"fillAndAddForClipping":Qa=4;break;case 5:case"strokeAndAddPathForClipping":Qa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qa=6;break;case 7:case"addToPathForClipping":Qa=7}var Pl=GA.usedRenderingMode!==void 0?GA.usedRenderingMode:-1;Qa!==-1?Mi+=Qa+` Tr
`:Pl!==-1&&(Mi+=`0 Tr
`),Qa!==-1&&(GA.usedRenderingMode=Qa),Lr=$e.align||"left";var Da,fA=er*Wa,cn=pi.internal.pageSize.getWidth(),fs=Xe[Zr];Gr=$e.charSpace||go,zr=$e.maxWidth||0,ln=Object.assign({autoencode:!0,noBOM:!0},$e.flags);var Js=[],yo=function(En){return pi.getStringUnitWidth(En,{font:fs,charSpace:Gr,fontSize:er,doKerning:!1})*er/Fs};if(Object.prototype.toString.call(U)==="[object Array]"){var oa;Kt=jA(U),Lr!=="left"&&(Da=Kt.map(yo));var Aa,Ys=0;if(Lr==="right"){re-=Da[0],U=[],Di=Kt.length;for(var xa=0;xa<Di;xa++)xa===0?(Aa=Za(re),oa=$a(Ee)):(Aa=ue(Ys-Da[xa]),oa=-fA),U.push([Kt[xa],Aa,oa]),Ys=Da[xa]}else if(Lr==="center"){re-=Da[0]/2,U=[],Di=Kt.length;for(var Ss=0;Ss<Di;Ss++)Ss===0?(Aa=Za(re),oa=$a(Ee)):(Aa=ue((Ys-Da[Ss])/2),oa=-fA),U.push([Kt[Ss],Aa,oa]),Ys=Da[Ss]}else if(Lr==="left"){U=[],Di=Kt.length;for(var KA=0;KA<Di;KA++)U.push(Kt[KA])}else if(Lr==="justify"&&fs.encoding==="Identity-H"){U=[],Di=Kt.length,zr=zr!==0?zr:cn;for(var _o=0,gi=0;gi<Di;gi++)if(oa=gi===0?$a(Ee):-fA,Aa=gi===0?Za(re):_o,gi<Di-1){var Ml=ue((zr-Da[gi])/(Kt[gi].split(" ").length-1)),la=Kt[gi].split(" ");U.push([la[0]+" ",Aa,oa]),_o=0;for(var ds=1;ds<la.length;ds++){var dA=(yo(la[ds-1]+" "+la[ds])-yo(la[ds]))*Fs+Ml;ds==la.length-1?U.push([la[ds],dA,0]):U.push([la[ds]+" ",dA,0]),_o-=dA}}else U.push([Kt[gi],Aa,oa]);U.push(["",_o,0])}else{if(Lr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Di=Kt.length,zr=zr!==0?zr:cn,gi=0;gi<Di;gi++)oa=gi===0?$a(Ee):-fA,Aa=gi===0?Za(re):0,gi<Di-1?Js.push(ve(ue((zr-Da[gi])/(Kt[gi].split(" ").length-1)))):Js.push(0),U.push([Kt[gi],Aa,oa])}}var pA=typeof $e.R2L=="boolean"?$e.R2L:wr;pA===!0&&(U=VA(U,function(En,Sn,Kn){return[En.split("").reverse().join(""),Sn,Kn]})),Mt={text:U,x:re,y:Ee,options:$e,mutex:{pdfEscape:ia,activeFontKey:Zr,fonts:Xe,activeFontSize:er}},at.publish("postProcessText",Mt),U=Mt.text,us=Mt.mutex.isHex||!1;var qo=Xe[Zr].encoding;qo!=="WinAnsiEncoding"&&qo!=="StandardEncoding"||(U=VA(U,function(En,Sn,Kn){return[Ko(En),Sn,Kn]})),Kt=jA(U),U=[];for(var eo,bo,Ra,to=0,Ts=1,Ri=Array.isArray(Kt[0])?Ts:to,vo="",qA=function(En,Sn,Kn){var ci="";return Kn instanceof Vt?(Kn=typeof $e.angle=="number"?Sr(Kn,new Vt(1,0,0,1,En,Sn)):Sr(new Vt(1,0,0,1,En,Sn),Kn),Be===ne.ADVANCED&&(Kn=Sr(new Vt(1,0,0,-1,0,0),Kn)),ci=Kn.join(" ")+` Tm
`):ci=ve(En)+" "+ve(Sn)+` Td
`,ci},Na=0;Na<Kt.length;Na++){switch(vo="",Ri){case Ts:Ra=(us?"<":"(")+Kt[Na][0]+(us?">":")"),eo=parseFloat(Kt[Na][1]),bo=parseFloat(Kt[Na][2]);break;case to:Ra=(us?"<":"(")+Kt[Na]+(us?">":")"),eo=Za(re),bo=$a(Ee)}Js!==void 0&&Js[Na]!==void 0&&(vo=Js[Na]+` Tw
`),Na===0?U.push(vo+qA(eo,bo,Gn)+Ra):Ri===to?U.push(vo+Ra):Ri===Ts&&U.push(vo+qA(eo,bo,Gn)+Ra)}U=Ri===to?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var Ni=`BT
/`;return Ni+=Zr+" "+er+` Tf
`,Ni+=ve(er*Wa)+` TL
`,Ni+=Ma+`
`,Ni+=Mi,Ni+=U,Ue(Ni+="ET"),Q[Zr]=!0,pi};var Pn=E.__private__.clip=E.clip=function(U){return Ue(U==="evenodd"?"W*":"W"),this};E.clipEvenOdd=function(){return Pn("evenodd")},E.__private__.discardPath=E.discardPath=function(){return Ue("n"),this};var wa=E.__private__.isValidStyle=function(U){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(re=!0),re};E.__private__.setDefaultPathOperation=E.setDefaultPathOperation=function(U){return wa(U)&&(C=U),this};var Qi=E.__private__.getStyle=E.getStyle=function(U){var re=C;switch(U){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=U}return re},sa=E.close=function(){return Ue("h"),this};E.stroke=function(){return Ue("S"),this},E.fill=function(U){return Li("f",U),this},E.fillEvenOdd=function(U){return Li("f*",U),this},E.fillStroke=function(U){return Li("B",U),this},E.fillStrokeEvenOdd=function(U){return Li("B*",U),this};var Li=function(U,re){Zn(re)==="object"?jn(re,U):Ue(U)},uo=function(U){U===null||Be===ne.ADVANCED&&U===void 0||(U=Qi(U),Ue(U))};function xn(U,re,Ee,$e,ct){var Mt=new uh(re||this.boundingBox,Ee||this.xStep,$e||this.yStep,this.gState,ct||this.matrix);Mt.stream=this.stream;var Kt=U+"$$"+this.cloneIndex+++"$$";return _t(Kt,Mt),Mt}var jn=function(U,re){var Ee=Le[U.key],$e=fe[Ee];if($e instanceof ou)Ue("q"),Ue(tn(re)),$e.gState&&E.setGState($e.gState),Ue(U.matrix.toString()+" cm"),Ue("/"+Ee+" sh"),Ue("Q");else if($e instanceof uh){var ct=new Vt(1,0,0,-1,0,Xs());U.matrix&&(ct=ct.multiply(U.matrix||xr),Ee=xn.call($e,U.key,U.boundingBox,U.xStep,U.yStep,ct).id),Ue("q"),Ue("/Pattern cs"),Ue("/"+Ee+" scn"),$e.gState&&E.setGState($e.gState),Ue(re),Ue("Q")}},tn=function(U){switch(U){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qr=E.moveTo=function(U,re){return Ue(ve(ue(U))+" "+ve(Se(re))+" m"),this},ls=E.lineTo=function(U,re){return Ue(ve(ue(U))+" "+ve(Se(re))+" l"),this},Rr=E.curveTo=function(U,re,Ee,$e,ct,Mt){return Ue([ve(ue(U)),ve(Se(re)),ve(ue(Ee)),ve(Se($e)),ve(ue(ct)),ve(Se(Mt)),"c"].join(" ")),this};E.__private__.line=E.line=function(U,re,Ee,$e,ct){if(isNaN(U)||isNaN(re)||isNaN(Ee)||isNaN($e)||!wa(ct))throw new Error("Invalid arguments passed to jsPDF.line");return Be===ne.COMPAT?this.lines([[Ee-U,$e-re]],U,re,[1,1],ct||"S"):this.lines([[Ee-U,$e-re]],U,re,[1,1]).stroke()},E.__private__.lines=E.lines=function(U,re,Ee,$e,ct,Mt){var Kt,lr,Lr,Gr,zr,ln,ri,Gn,pi,li,Mi,us;if(typeof U=="number"&&(us=Ee,Ee=re,re=U,U=us),$e=$e||[1,1],Mt=Mt||!1,isNaN(re)||isNaN(Ee)||!Array.isArray(U)||!Array.isArray($e)||!wa(ct)||typeof Mt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qr(re,Ee),Kt=$e[0],lr=$e[1],Gr=U.length,li=re,Mi=Ee,Lr=0;Lr<Gr;Lr++)(zr=U[Lr]).length===2?(li=zr[0]*Kt+li,Mi=zr[1]*lr+Mi,ls(li,Mi)):(ln=zr[0]*Kt+li,ri=zr[1]*lr+Mi,Gn=zr[2]*Kt+li,pi=zr[3]*lr+Mi,li=zr[4]*Kt+li,Mi=zr[5]*lr+Mi,Rr(ln,ri,Gn,pi,li,Mi));return Mt&&sa(),uo(ct),this},E.path=function(U){for(var re=0;re<U.length;re++){var Ee=U[re],$e=Ee.c;switch(Ee.op){case"m":Qr($e[0],$e[1]);break;case"l":ls($e[0],$e[1]);break;case"c":Rr.apply(this,$e);break;case"h":sa()}}return this},E.__private__.rect=E.rect=function(U,re,Ee,$e,ct){if(isNaN(U)||isNaN(re)||isNaN(Ee)||isNaN($e)||!wa(ct))throw new Error("Invalid arguments passed to jsPDF.rect");return Be===ne.COMPAT&&($e=-$e),Ue([ve(ue(U)),ve(Se(re)),ve(ue(Ee)),ve(ue($e)),"re"].join(" ")),uo(ct),this},E.__private__.triangle=E.triangle=function(U,re,Ee,$e,ct,Mt,Kt){if(isNaN(U)||isNaN(re)||isNaN(Ee)||isNaN($e)||isNaN(ct)||isNaN(Mt)||!wa(Kt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-U,$e-re],[ct-Ee,Mt-$e],[U-ct,re-Mt]],U,re,[1,1],Kt,!0),this},E.__private__.roundedRect=E.roundedRect=function(U,re,Ee,$e,ct,Mt,Kt){if(isNaN(U)||isNaN(re)||isNaN(Ee)||isNaN($e)||isNaN(ct)||isNaN(Mt)||!wa(Kt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lr=4/3*(Math.SQRT2-1);return ct=Math.min(ct,.5*Ee),Mt=Math.min(Mt,.5*$e),this.lines([[Ee-2*ct,0],[ct*lr,0,ct,Mt-Mt*lr,ct,Mt],[0,$e-2*Mt],[0,Mt*lr,-ct*lr,Mt,-ct,Mt],[2*ct-Ee,0],[-ct*lr,0,-ct,-Mt*lr,-ct,-Mt],[0,2*Mt-$e],[0,-Mt*lr,ct*lr,-Mt,ct,-Mt]],U+ct,re,[1,1],Kt,!0),this},E.__private__.ellipse=E.ellipse=function(U,re,Ee,$e,ct){if(isNaN(U)||isNaN(re)||isNaN(Ee)||isNaN($e)||!wa(ct))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Mt=4/3*(Math.SQRT2-1)*Ee,Kt=4/3*(Math.SQRT2-1)*$e;return Qr(U+Ee,re),Rr(U+Ee,re-Kt,U+Mt,re-$e,U,re-$e),Rr(U-Mt,re-$e,U-Ee,re-Kt,U-Ee,re),Rr(U-Ee,re+Kt,U-Mt,re+$e,U,re+$e),Rr(U+Mt,re+$e,U+Ee,re+Kt,U+Ee,re),uo(ct),this},E.__private__.circle=E.circle=function(U,re,Ee,$e){if(isNaN(U)||isNaN(re)||isNaN(Ee)||!wa($e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,re,Ee,Ee,$e)},E.setFont=function(U,re,Ee){return Ee&&(re=Oe(re,Ee)),Zr=No(U,re,{disableWarning:!1}),this};var NA=E.__private__.getFont=E.getFont=function(){return Xe[No.apply(E,arguments)]};E.__private__.getFontList=E.getFontList=function(){var U,re,Ee={};for(U in ae)if(ae.hasOwnProperty(U))for(re in Ee[U]=[],ae[U])ae[U].hasOwnProperty(re)&&Ee[U].push(re);return Ee},E.addFont=function(U,re,Ee,$e,ct){var Mt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Mt.indexOf(arguments[3])!==-1?ct=arguments[3]:arguments[3]&&Mt.indexOf(arguments[3])==-1&&(Ee=Oe(Ee,$e)),ct=ct||"Identity-H",Bl.call(this,U,re,Ee,ct)};var Ai,AA=n.lineWidth||.200025,Ho=E.__private__.getLineWidth=E.getLineWidth=function(){return AA},jo=E.__private__.setLineWidth=E.setLineWidth=function(U){return AA=U,Ue(ve(ue(U))+" w"),this};E.__private__.setLineDash=Kr.API.setLineDash=Kr.API.setLineDashPattern=function(U,re){if(U=U||[],re=re||0,isNaN(re)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ee){return ve(ue(Ee))}).join(" "),re=ve(ue(re)),Ue("["+U+"] "+re+" d"),this};var ho=E.__private__.getLineHeight=E.getLineHeight=function(){return er*Ai};E.__private__.getLineHeight=E.getLineHeight=function(){return er*Ai};var Vo=E.__private__.setLineHeightFactor=E.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Ai=U),this},OA=E.__private__.getLineHeightFactor=E.getLineHeightFactor=function(){return Ai};Vo(n.lineHeight);var Za=E.__private__.getHorizontalCoordinate=function(U){return ue(U)},$a=E.__private__.getVerticalCoordinate=function(U){return Be===ne.ADVANCED?U:Ze[Ie].mediaBox.topRightY-Ze[Ie].mediaBox.bottomLeftY-ue(U)},fo=E.__private__.getHorizontalCoordinateString=E.getHorizontalCoordinateString=function(U){return ve(Za(U))},Vn=E.__private__.getVerticalCoordinateString=E.getVerticalCoordinateString=function(U){return ve($a(U))},Gi=n.strokeColor||"0 G";E.__private__.getStrokeColor=E.getDrawColor=function(){return Tr(Gi)},E.__private__.setStrokeColor=E.setDrawColor=function(U,re,Ee,$e){return Gi=yn({ch1:U,ch2:re,ch3:Ee,ch4:$e,pdfColorType:"draw",precision:2}),Ue(Gi),this};var po=n.fillColor||"0 g";E.__private__.getFillColor=E.getFillColor=function(){return Tr(po)},E.__private__.setFillColor=E.setFillColor=function(U,re,Ee,$e){return po=yn({ch1:U,ch2:re,ch3:Ee,ch4:$e,pdfColorType:"fill",precision:2}),Ue(po),this};var Ma=n.textColor||"0 g",wi=E.__private__.getTextColor=E.getTextColor=function(){return Tr(Ma)};E.__private__.setTextColor=E.setTextColor=function(U,re,Ee,$e){return Ma=yn({ch1:U,ch2:re,ch3:Ee,ch4:$e,pdfColorType:"text",precision:3}),this};var go=n.charSpace,zA=E.__private__.getCharSpace=E.getCharSpace=function(){return parseFloat(go||0)};E.__private__.setCharSpace=E.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return go=U,this};var HA=0;E.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},E.__private__.setLineCap=E.setLineCap=function(U){var re=E.CapJoinStyles[U];if(re===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return HA=re,Ue(re+" J"),this};var Fl=0;E.__private__.setLineJoin=E.setLineJoin=function(U){var re=E.CapJoinStyles[U];if(re===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fl=re,Ue(re+" j"),this},E.__private__.setLineMiterLimit=E.__private__.setMiterLimit=E.setLineMiterLimit=E.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ue(ve(ue(U))+" M"),this},E.GState=Tp,E.setGState=function(U){(U=typeof U=="string"?He[pe[U]]:Pi(null,U)).equals(ht)||(Ue("/"+U.id+" gs"),ht=U)};var Pi=function(U,re){if(!U||!pe[U]){var Ee=!1;for(var $e in He)if(He.hasOwnProperty($e)&&He[$e].equals(re)){Ee=!0;break}if(Ee)re=He[$e];else{var ct="GS"+(Object.keys(He).length+1).toString(10);He[ct]=re,re.id=ct}return U&&(pe[U]=re.id),at.publish("addGState",re),re}};E.addGState=function(U,re){return Pi(U,re),this},E.saveGraphicsState=function(){return Ue("q"),le.push({key:Zr,size:er,color:Ma}),this},E.restoreGraphicsState=function(){Ue("Q");var U=le.pop();return Zr=U.key,er=U.size,Ma=U.color,ht=null,this},E.setCurrentTransformationMatrix=function(U){return Ue(U.toString()+" cm"),this},E.comment=function(U){return Ue("#"+U),this};var $s=function(U,re){var Ee=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(Mt){isNaN(Mt)||(Ee=parseFloat(Mt))}});var $e=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return $e},set:function(Mt){isNaN(Mt)||($e=parseFloat(Mt))}});var ct="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ct},set:function(Mt){ct=Mt.toString()}}),this},Ua=function(U,re,Ee,$e){$s.call(this,U,re),this.type="rect";var ct=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ct},set:function(Kt){isNaN(Kt)||(ct=parseFloat(Kt))}});var Mt=$e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Mt},set:function(Kt){isNaN(Kt)||(Mt=parseFloat(Kt))}}),this},Is=function(){this.page=Ke,this.currentPage=Ie,this.pages=ot.slice(0),this.pagesContext=Ze.slice(0),this.x=Dn,this.y=Vr,this.matrix=bi,this.width=Ws(Ie),this.height=Xs(Ie),this.outputDestination=Ot,this.id="",this.objectNumber=-1};Is.prototype.restore=function(){Ke=this.page,Ie=this.currentPage,Ze=this.pagesContext,ot=this.pages,Dn=this.x,Vr=this.y,bi=this.matrix,El(Ie,this.width),Sl(Ie,this.height),Ot=this.outputDestination};var Go=function(U,re,Ee,$e,ct){Jt.push(new Is),Ke=Ie=0,ot=[],Dn=U,Vr=re,bi=ct,RA([Ee,$e])},ka=function(U){if($t[U])Jt.pop().restore();else{var re=new Is,Ee="Xo"+(Object.keys(Lt).length+1).toString(10);re.id=Ee,$t[U]=Ee,Lt[Ee]=re,at.publish("addFormObject",re),Jt.pop().restore()}};for(var cs in E.beginFormObject=function(U,re,Ee,$e,ct){return Go(U,re,Ee,$e,ct),this},E.endFormObject=function(U){return ka(U),this},E.doFormObject=function(U,re){var Ee=Lt[$t[U]];return Ue("q"),Ue(re.toString()+" cm"),Ue("/"+Ee.id+" Do"),Ue("Q"),this},E.getFormObject=function(U){var re=Lt[$t[U]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},E.save=function(U,re){return U=U||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(iu(Xr(va()),U),typeof iu.unload=="function"&&qr.setTimeout&&setTimeout(iu.unload,911),this):new Promise(function(Ee,$e){try{var ct=iu(Xr(va()),U);typeof iu.unload=="function"&&qr.setTimeout&&setTimeout(iu.unload,911),Ee(ct)}catch(Mt){$e(Mt.message)}})},Kr.API)Kr.API.hasOwnProperty(cs)&&(cs==="events"&&Kr.API.events.length?function(U,re){var Ee,$e,ct;for(ct=re.length-1;ct!==-1;ct--)Ee=re[ct][0],$e=re[ct][1],U.subscribe.apply(U,[Ee].concat(typeof $e=="function"?[$e]:$e))}(at,Kr.API.events):E[cs]=Kr.API[cs]);var Ws=E.getPageWidth=function(U){return(Ze[U=U||Ie].mediaBox.topRightX-Ze[U].mediaBox.bottomLeftX)/ur},El=E.setPageWidth=function(U,re){Ze[U].mediaBox.topRightX=re*ur+Ze[U].mediaBox.bottomLeftX},Xs=E.getPageHeight=function(U){return(Ze[U=U||Ie].mediaBox.topRightY-Ze[U].mediaBox.bottomLeftY)/ur},Sl=E.setPageHeight=function(U,re){Ze[U].mediaBox.topRightY=re*ur+Ze[U].mediaBox.bottomLeftY};return E.internal={pdfEscape:ia,getStyle:Qi,getFont:NA,getFontSize:or,getCharSpace:zA,getTextColor:wi,getLineHeight:ho,getLineHeightFactor:OA,getLineWidth:Ho,write:sr,getHorizontalCoordinate:Za,getVerticalCoordinate:$a,getCoordinateString:fo,getVerticalCoordinateString:Vn,collections:{},newObject:Nr,newAdditionalObject:Cr,newObjectDeferred:Fr,newObjectDeferredBegin:jr,getFilters:vn,putStream:Hn,events:at,scaleFactor:ur,pageSize:{getWidth:function(){return Ws(Ie)},setWidth:function(U){El(Ie,U)},getHeight:function(){return Xs(Ie)},setHeight:function(U){Sl(Ie,U)}},encryptionOptions:P,encryption:di,getEncryptor:aa,output:Zs,getNumberOfPages:oA,pages:ot,out:Ue,f2:tt,f3:se,getPageInfo:vi,getPageInfoByObjId:br,getCurrentPageInfo:Ti,getPDFVersion:V,Point:$s,Rectangle:Ua,Matrix:Vt,hasHotfix:zo},Object.defineProperty(E.internal.pageSize,"width",{get:function(){return Ws(Ie)},set:function(U){El(Ie,U)},enumerable:!0,configurable:!0}),Object.defineProperty(E.internal.pageSize,"height",{get:function(){return Xs(Ie)},set:function(U){Sl(Ie,U)},enumerable:!0,configurable:!0}),sc.call(E,jt),Zr="F1",qs(c,i),at.publish("initialized"),E}sh.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},sh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sh.prototype.hexToBytes=function(n){for(var e=[],i=0;i<n.length;i+=2)e.push(String.fromCharCode(parseInt(n.substr(i,2),16)));return e.join("")},sh.prototype.processOwnerPassword=function(n,e){return L0(T0(e).substr(0,5),n)},sh.prototype.encryptor=function(n,e){var i=T0(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(o){return L0(i,o)}},Tp.prototype.equals=function(n){var e,i="id,objectNumber,equals";if(!n||Zn(n)!==Zn(this))return!1;var o=0;for(e in this)if(!(i.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;o++}for(e in n)n.hasOwnProperty(e)&&i.indexOf(e)<0&&o--;return o===0},Kr.API={events:[]},Kr.version="3.0.1";var ji=Kr.API,m1=1,wu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},th=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(n){return n.toFixed(2)},xc=function(n){return n.toFixed(5)};ji.__acroform__={};var lo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},t2=function(n){return n*m1},dl=function(n){var e=new qw,i=Br.internal.getHeight(n)||0,o=Br.internal.getWidth(n)||0;return e.BBox=[0,0,Number(rn(o)),Number(rn(i))],e},xP=ji.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},BP=ji.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},CP=ji.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ea=ji.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return CP(n,e-1)},ta=ji.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xP(n,e-1)},ra=ji.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return BP(n,e-1)},IP=ji.__acroform__.calculateCoordinates=function(n,e){var i=e.internal.getHorizontalCoordinate,o=e.internal.getVerticalCoordinate,c=n[0],d=n[1],f=n[2],s=n[3],v={};return v.lowerLeft_X=i(c)||0,v.lowerLeft_Y=o(d+s)||0,v.upperRight_X=i(c+f)||0,v.upperRight_Y=o(d)||0,[Number(rn(v.lowerLeft_X)),Number(rn(v.lowerLeft_Y)),Number(rn(v.upperRight_X)),Number(rn(v.upperRight_Y))]},FP=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],i=n._V||n.DV,o=P0(n,i),c=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+c+" "+rn(o.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC");var d=dl(n);return d.scope=n.scope,d.stream=e.join(`
`),d}},P0=function(n,e){var i=n.fontSize===0?n.maxFontSize:n.fontSize,o={text:"",fontSize:""},c=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");c=n.multiline?c.map(function(se){return se.split(`
`)}):c.map(function(se){return[se]});var d=i,f=Br.internal.getHeight(n)||0;f=f<0?-f:f;var s=Br.internal.getWidth(n)||0;s=s<0?-s:s;var v=function(se,ue,Fe){if(se+1<c.length){var Se=ue+" "+c[se+1][0];return Gd(Se,n,Fe).width<=s-4}return!1};d++;e:for(;d>0;){e="",d--;var C,P,M=Gd("3",n,d).height,Q=n.multiline?f-d:(f-M)/2,E=Q+=2,z=0,V=0,ee=0;if(d<=0){e=`(...) Tj
`,e+="% Width of Text: "+Gd(e,n,d=12).width+", FieldWidth:"+s+`
`;break}for(var Z="",ne=0,Be=0;Be<c.length;Be++)if(c.hasOwnProperty(Be)){var ze=!1;if(c[Be].length!==1&&ee!==c[Be].length-1){if((M+2)*(ne+2)+2>f)continue e;Z+=c[Be][ee],ze=!0,V=Be,Be--}else{Z=(Z+=c[Be][ee]+" ").substr(Z.length-1)==" "?Z.substr(0,Z.length-1):Z;var Ne=parseInt(Be),Oe=v(Ne,Z,d),ve=Be>=c.length-1;if(Oe&&!ve){Z+=" ",ee=0;continue}if(Oe||ve){if(ve)V=Ne;else if(n.multiline&&(M+2)*(ne+2)+2>f)continue e}else{if(!n.multiline||(M+2)*(ne+2)+2>f)continue e;V=Ne}}for(var me="",Qe=z;Qe<=V;Qe++){var tt=c[Qe];if(n.multiline){if(Qe===V){me+=tt[ee]+" ",ee=(ee+1)%tt.length;continue}if(Qe===z){me+=tt[tt.length-1]+" ";continue}}me+=tt[0]+" "}switch(me=me.substr(me.length-1)==" "?me.substr(0,me.length-1):me,P=Gd(me,n,d).width,n.textAlign){case"right":C=s-P-2;break;case"center":C=(s-P)/2;break;case"left":default:C=2}e+=rn(C)+" "+rn(E)+` Td
`,e+="("+wu(me)+`) Tj
`,e+=-rn(C)+` 0 Td
`,E=-(d+2),P=0,z=ze?V:V+1,ne++,Z=""}break}return o.text=e,o.fontSize=d,o},Gd=function(n,e,i){var o=e.scope.internal.getFont(e.fontName,e.fontStyle),c=e.scope.getStringUnitWidth(n,{font:o,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:e.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:c}},EP={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},SP=function(n,e){var i={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(o){return o.type===i.type&&o.object===i.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(i)},TP=function(n,e){for(var i in n)if(n.hasOwnProperty(i)){var o=i,c=n[i];e.internal.newObjectDeferredBegin(c.objId,!0),Zn(c)==="object"&&typeof c.putStream=="function"&&c.putStream(),delete n[o]}},LP=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(QA.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(EP)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");m1=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Zw,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var c in o)if(o.hasOwnProperty(c)){var d=o[c];d.objId=void 0,d.hasAnnotation&&SP(d,i)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(i){(function(o,c){var d=!o;for(var f in o||(c.internal.newObjectDeferredBegin(c.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),c.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||c.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(f)){var s=o[f],v=[],C=s.Rect;if(s.Rect&&(s.Rect=IP(s.Rect,c)),c.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Br.createDefaultAppearanceStream(s),Zn(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(v=s.getKeyValueListForStream()),s.Rect=C,s.hasAppearanceStream&&!s.appearanceStreamContent){var P=FP(s);v.push({key:"AP",value:"<</N "+P+">>"}),c.internal.acroformPlugin.xForms.push(P)}if(s.appearanceStreamContent){var M="";for(var Q in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(Q)){var E=s.appearanceStreamContent[Q];if(M+="/"+Q+" ",M+="<<",Object.keys(E).length>=1||Array.isArray(E)){for(var f in E)if(E.hasOwnProperty(f)){var z=E[f];typeof z=="function"&&(z=z.call(c,s)),M+="/"+f+" "+z+" ",c.internal.acroformPlugin.xForms.indexOf(z)>=0||c.internal.acroformPlugin.xForms.push(z)}}else typeof(z=E)=="function"&&(z=z.call(c,s)),M+="/"+f+" "+z,c.internal.acroformPlugin.xForms.indexOf(z)>=0||c.internal.acroformPlugin.xForms.push(z);M+=">>"}v.push({key:"AP",value:`<<
`+M+">>"})}c.internal.putStream({additionalKeyValues:v,objectId:s.objId}),c.internal.out("endobj")}d&&TP(c.internal.acroformPlugin.xForms,c)})(i,n)}),n.internal.acroformPlugin.isInitialized=!0}},Kw=ji.__acroform__.arrayToPdfArray=function(n,e,i){var o=function(f){return f};if(Array.isArray(n)){for(var c="[",d=0;d<n.length;d++)switch(d!==0&&(c+=" "),Zn(n[d])){case"boolean":case"number":case"object":c+=n[d].toString();break;case"string":n[d].substr(0,1)!=="/"?(e!==void 0&&i&&(o=i.internal.getEncryptor(e)),c+="("+wu(o(n[d].toString()))+")"):c+=n[d].toString()}return c+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Um=function(n,e,i){var o=function(c){return c};return e!==void 0&&i&&(o=i.internal.getEncryptor(e)),(n=n||"").toString(),n="("+wu(o(n))+")"},gl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};gl.prototype.toString=function(){return this.objId+" 0 R"},gl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},gl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(d){return d!="content"&&d!="appearanceStreamContent"&&d!="scope"&&d!="objId"&&d.substring(0,1)!="_"});for(var i in e)if(Object.getOwnPropertyDescriptor(this,e[i]).configurable===!1){var o=e[i],c=this[o];c&&(Array.isArray(c)?n.push({key:o,value:Kw(c,this.objId,this.scope)}):c instanceof gl?(c.scope=this.scope,n.push({key:o,value:c.objId+" 0 R"})):typeof c!="function"&&n.push({key:o,value:c}))}return n};var qw=function(){gl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){n=i.trim()},get:function(){return n||null}})};lo(qw,gl);var Zw=function(){gl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var i=function(o){return o};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+wu(i(n))+")"}},set:function(i){n=i}})};lo(Zw,gl);var QA=function n(){gl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute F supplied.');e=Z}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ea(e,3)},set:function(Z){Z?this.F=ta(e,3):this.F=ra(e,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute Ff supplied.');i=Z}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(Z){o=Z!==void 0?Z:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(Z){o[0]=Z}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(Z){o[1]=Z}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(Z){o[2]=Z}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(Z){o[3]=Z}});var c="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return c},set:function(Z){switch(Z){case"/Btn":case"/Tx":case"/Ch":case"/Sig":c=Z;break;default:throw new Error('Invalid value "'+Z+'" for attribute FT supplied.')}}});var d=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!d||d.length<1){if(this instanceof Lp)return;d="FieldObject"+n.FieldNum++}var Z=function(ne){return ne};return this.scope&&(Z=this.scope.internal.getEncryptor(this.objId)),"("+wu(Z(d))+")"},set:function(Z){d=Z.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return d},set:function(Z){d=Z}});var f="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return f},set:function(Z){f=Z}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(Z){s=Z}});var v=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return v},set:function(Z){v=Z}});var C=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return C===void 0?50/m1:C},set:function(Z){C=Z}});var P="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return P},set:function(Z){P=Z}});var M="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!M||this instanceof Lp||this instanceof mu))return Um(M,this.objId,this.scope)},set:function(Z){Z=Z.toString(),M=Z}});var Q=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Q)return this instanceof Ga?Q:Um(Q,this.objId,this.scope)},set:function(Z){Z=Z.toString(),Q=this instanceof Ga?Z:Z.substr(0,1)==="("?th(Z.substr(1,Z.length-2)):th(Z)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ga?th(Q.substr(1,Q.length-1)):Q},set:function(Z){Z=Z.toString(),Q=this instanceof Ga?"/"+Z:Z}});var E=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(E)return E},set:function(Z){this.V=Z}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof Ga?E:Um(E,this.objId,this.scope)},set:function(Z){Z=Z.toString(),E=this instanceof Ga?Z:Z.substr(0,1)==="("?th(Z.substr(1,Z.length-2)):th(Z)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ga?th(E.substr(1,E.length-1)):E},set:function(Z){Z=Z.toString(),E=this instanceof Ga?"/"+Z:Z}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var z,V=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return V},set:function(Z){Z=!!Z,V=Z}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(z)return z},set:function(Z){z=Z}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,1)},set:function(Z){Z?this.Ff=ta(this.Ff,1):this.Ff=ra(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,2)},set:function(Z){Z?this.Ff=ta(this.Ff,2):this.Ff=ra(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,3)},set:function(Z){Z?this.Ff=ta(this.Ff,3):this.Ff=ra(this.Ff,3)}});var ee=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(ee!==null)return ee},set:function(Z){if([0,1,2].indexOf(Z)===-1)throw new Error('Invalid value "'+Z+'" for attribute Q supplied.');ee=Z}}),Object.defineProperty(this,"textAlign",{get:function(){var Z;switch(ee){case 0:default:Z="left";break;case 1:Z="center";break;case 2:Z="right"}return Z},configurable:!0,enumerable:!0,set:function(Z){switch(Z){case"right":case 2:ee=2;break;case"center":case 1:ee=1;break;case"left":case 0:default:ee=0}}})};lo(QA,gl);var gh=function(){QA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(i){n=i}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Kw(e,this.objId,this.scope)},set:function(i){var o,c;c=[],typeof(o=i)=="string"&&(c=function(d,f,s){s||(s=1);for(var v,C=[];v=f.exec(d);)C.push(v[s]);return C}(o,/\((.*?)\)/g)),e=c}}),this.getOptions=function(){return e},this.setOptions=function(i){e=i,this.sort&&e.sort()},this.addOption=function(i){i=(i=i||"").toString(),e.push(i),this.sort&&e.sort()},this.removeOption=function(i,o){for(o=o||!1,i=(i=i||"").toString();e.indexOf(i)!==-1&&(e.splice(e.indexOf(i),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,18)},set:function(i){i?this.Ff=ta(this.Ff,18):this.Ff=ra(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=ta(this.Ff,19):this.Ff=ra(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,20)},set:function(i){i?(this.Ff=ta(this.Ff,20),e.sort()):this.Ff=ra(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,22)},set:function(i){i?this.Ff=ta(this.Ff,22):this.Ff=ra(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,23)},set:function(i){i?this.Ff=ta(this.Ff,23):this.Ff=ra(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,27)},set:function(i){i?this.Ff=ta(this.Ff,27):this.Ff=ra(this.Ff,27)}}),this.hasAppearanceStream=!1};lo(gh,QA);var mh=function(){gh.call(this),this.fontName="helvetica",this.combo=!1};lo(mh,gh);var yh=function(){mh.call(this),this.combo=!0};lo(yh,mh);var ep=function(){yh.call(this),this.edit=!0};lo(ep,yh);var Ga=function(){QA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,15)},set:function(i){i?this.Ff=ta(this.Ff,15):this.Ff=ra(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,16)},set:function(i){i?this.Ff=ta(this.Ff,16):this.Ff=ra(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,17)},set:function(i){i?this.Ff=ta(this.Ff,17):this.Ff=ra(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,26)},set:function(i){i?this.Ff=ta(this.Ff,26):this.Ff=ra(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var o,c=[];for(o in c.push("<<"),e)c.push("/"+o+" ("+wu(i(e[o]))+")");return c.push(">>"),c.join(`
`)}},set:function(i){Zn(i)==="object"&&(e=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(i){typeof i=="string"&&(e.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}})};lo(Ga,QA);var tp=function(){Ga.call(this),this.pushButton=!0};lo(tp,Ga);var _h=function(){Ga.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};lo(_h,Ga);var Lp=function(){var n,e;QA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(c){n=c}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(c){e=c}});var i,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var c=function(s){return s};this.scope&&(c=this.scope.internal.getEncryptor(this.objId));var d,f=[];for(d in f.push("<<"),o)f.push("/"+d+" ("+wu(c(o[d]))+")");return f.push(">>"),f.join(`
`)},set:function(c){Zn(c)==="object"&&(o=c)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(c){typeof c=="string"&&(o.CA=c)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(c){i=c}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(c){i="/"+c}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Br.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};lo(Lp,QA),_h.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var i=this.Kids[e];i.appearanceStreamContent=n.createAppearanceStream(i.optionName),i.caption=n.getCA()}},_h.prototype.createOption=function(n){var e=new Lp;return e.Parent=this,e.optionName=n,this.Kids.push(e),PP.call(this.scope,e),e};var rp=function(){Ga.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Br.CheckBox.createAppearanceStream()};lo(rp,Ga);var mu=function(){QA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,13)},set:function(e){e?this.Ff=ta(this.Ff,13):this.Ff=ra(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,21)},set:function(e){e?this.Ff=ta(this.Ff,21):this.Ff=ra(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,23)},set:function(e){e?this.Ff=ta(this.Ff,23):this.Ff=ra(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,24)},set:function(e){e?this.Ff=ta(this.Ff,24):this.Ff=ra(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,25)},set:function(e){e?this.Ff=ta(this.Ff,25):this.Ff=ra(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,26)},set:function(e){e?this.Ff=ta(this.Ff,26):this.Ff=ra(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};lo(mu,QA);var np=function(){mu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ea(this.Ff,14)},set:function(n){n?this.Ff=ta(this.Ff,14):this.Ff=ra(this.Ff,14)}}),this.password=!0};lo(np,mu);var Br={CheckBox:{createAppearanceStream:function(){return{N:{On:Br.CheckBox.YesNormal},D:{On:Br.CheckBox.YesPushDown,Off:Br.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var i=[],o=n.scope.internal.getFont(n.fontName,n.fontStyle).id,c=n.scope.__private__.encodeColorString(n.color),d=P0(n,n.caption);return i.push("0.749023 g"),i.push("0 0 "+rn(Br.internal.getWidth(n))+" "+rn(Br.internal.getHeight(n))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+o+" "+rn(d.fontSize)+" Tf "+c),i.push("BT"),i.push(d.text),i.push("ET"),i.push("Q"),i.push("EMC"),e.stream=i.join(`
`),e},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),c=[],d=Br.internal.getHeight(n),f=Br.internal.getWidth(n),s=P0(n,n.caption);return c.push("1 g"),c.push("0 0 "+rn(f)+" "+rn(d)+" re"),c.push("f"),c.push("q"),c.push("0 0 1 rg"),c.push("0 0 "+rn(f-1)+" "+rn(d-1)+" re"),c.push("W"),c.push("n"),c.push("0 g"),c.push("BT"),c.push("/"+i+" "+rn(s.fontSize)+" Tf "+o),c.push(s.text),c.push("ET"),c.push("Q"),e.stream=c.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+rn(Br.internal.getWidth(n))+" "+rn(Br.internal.getHeight(n))+" re"),i.push("f"),e.stream=i.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Br.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Br.RadioButton.Circle.YesNormal,e.D[n]=Br.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var i=[],o=Br.internal.getWidth(n)<=Br.internal.getHeight(n)?Br.internal.getWidth(n)/4:Br.internal.getHeight(n)/4;o=Number((.9*o).toFixed(5));var c=Br.internal.Bezier_C,d=Number((o*c).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+xc(Br.internal.getWidth(n)/2)+" "+xc(Br.internal.getHeight(n)/2)+" cm"),i.push(o+" 0 m"),i.push(o+" "+d+" "+d+" "+o+" 0 "+o+" c"),i.push("-"+d+" "+o+" -"+o+" "+d+" -"+o+" 0 c"),i.push("-"+o+" -"+d+" -"+d+" -"+o+" 0 -"+o+" c"),i.push(d+" -"+o+" "+o+" -"+d+" "+o+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var i=[],o=Br.internal.getWidth(n)<=Br.internal.getHeight(n)?Br.internal.getWidth(n)/4:Br.internal.getHeight(n)/4;o=Number((.9*o).toFixed(5));var c=Number((2*o).toFixed(5)),d=Number((c*Br.internal.Bezier_C).toFixed(5)),f=Number((o*Br.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+xc(Br.internal.getWidth(n)/2)+" "+xc(Br.internal.getHeight(n)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+d+" "+d+" "+c+" 0 "+c+" c"),i.push("-"+d+" "+c+" -"+c+" "+d+" -"+c+" 0 c"),i.push("-"+c+" -"+d+" -"+d+" -"+c+" 0 -"+c+" c"),i.push(d+" -"+c+" "+c+" -"+d+" "+c+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+xc(Br.internal.getWidth(n)/2)+" "+xc(Br.internal.getHeight(n)/2)+" cm"),i.push(o+" 0 m"),i.push(o+" "+f+" "+f+" "+o+" 0 "+o+" c"),i.push("-"+f+" "+o+" -"+o+" "+f+" -"+o+" 0 c"),i.push("-"+o+" -"+f+" -"+f+" -"+o+" 0 -"+o+" c"),i.push(f+" -"+o+" "+o+" -"+f+" "+o+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var i=[],o=Br.internal.getWidth(n)<=Br.internal.getHeight(n)?Br.internal.getWidth(n)/4:Br.internal.getHeight(n)/4;o=Number((.9*o).toFixed(5));var c=Number((2*o).toFixed(5)),d=Number((c*Br.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+xc(Br.internal.getWidth(n)/2)+" "+xc(Br.internal.getHeight(n)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+d+" "+d+" "+c+" 0 "+c+" c"),i.push("-"+d+" "+c+" -"+c+" "+d+" -"+c+" 0 c"),i.push("-"+c+" -"+d+" -"+d+" -"+c+" 0 -"+c+" c"),i.push(d+" -"+c+" "+c+" -"+d+" "+c+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Br.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Br.RadioButton.Cross.YesNormal,e.D[n]=Br.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var i=[],o=Br.internal.calculateCross(n);return i.push("q"),i.push("1 1 "+rn(Br.internal.getWidth(n)-2)+" "+rn(Br.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(rn(o.x1.x)+" "+rn(o.x1.y)+" m"),i.push(rn(o.x2.x)+" "+rn(o.x2.y)+" l"),i.push(rn(o.x4.x)+" "+rn(o.x4.y)+" m"),i.push(rn(o.x3.x)+" "+rn(o.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var i=Br.internal.calculateCross(n),o=[];return o.push("0.749023 g"),o.push("0 0 "+rn(Br.internal.getWidth(n))+" "+rn(Br.internal.getHeight(n))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+rn(Br.internal.getWidth(n)-2)+" "+rn(Br.internal.getHeight(n)-2)+" re"),o.push("W"),o.push("n"),o.push(rn(i.x1.x)+" "+rn(i.x1.y)+" m"),o.push(rn(i.x2.x)+" "+rn(i.x2.y)+" l"),o.push(rn(i.x4.x)+" "+rn(i.x4.y)+" m"),o.push(rn(i.x3.x)+" "+rn(i.x3.y)+" l"),o.push("s"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+rn(Br.internal.getWidth(n))+" "+rn(Br.internal.getHeight(n))+" re"),i.push("f"),e.stream=i.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+i}};Br.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Br.internal.getWidth(n),i=Br.internal.getHeight(n),o=Math.min(e,i);return{x1:{x:(e-o)/2,y:(i-o)/2+o},x2:{x:(e-o)/2+o,y:(i-o)/2},x3:{x:(e-o)/2,y:(i-o)/2},x4:{x:(e-o)/2+o,y:(i-o)/2+o}}}},Br.internal.getWidth=function(n){var e=0;return Zn(n)==="object"&&(e=t2(n.Rect[2])),e},Br.internal.getHeight=function(n){var e=0;return Zn(n)==="object"&&(e=t2(n.Rect[3])),e};var PP=ji.addField=function(n){if(LP(this,n),!(n instanceof QA))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ji.AcroFormChoiceField=gh,ji.AcroFormListBox=mh,ji.AcroFormComboBox=yh,ji.AcroFormEditBox=ep,ji.AcroFormButton=Ga,ji.AcroFormPushButton=tp,ji.AcroFormRadioButton=_h,ji.AcroFormCheckBox=rp,ji.AcroFormTextField=mu,ji.AcroFormPasswordField=np,ji.AcroFormAppearance=Br,ji.AcroForm={ChoiceField:gh,ListBox:mh,ComboBox:yh,EditBox:ep,Button:Ga,PushButton:tp,RadioButton:_h,CheckBox:rp,TextField:mu,PasswordField:np,Appearance:Br},Kr.AcroForm={ChoiceField:gh,ListBox:mh,ComboBox:yh,EditBox:ep,Button:Ga,PushButton:tp,RadioButton:_h,CheckBox:rp,TextField:mu,PasswordField:np,Appearance:Br};Kr.AcroForm;function $w(n){return n.reduce(function(e,i,o){return e[i]=o,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=n.__addimage__.getImageFileTypeByImageData=function(se,ue){var Fe,Se,yt,lt,mt,Ye=e;if((ue=ue||e)==="RGBA"||se.data!==void 0&&se.data instanceof Uint8ClampedArray&&"height"in se&&"width"in se)return"RGBA";if(Oe(se))for(mt in i)for(yt=i[mt],Fe=0;Fe<yt.length;Fe+=1){for(lt=!0,Se=0;Se<yt[Fe].length;Se+=1)if(yt[Fe][Se]!==void 0&&yt[Fe][Se]!==se[Se]){lt=!1;break}if(lt===!0){Ye=mt;break}}else for(mt in i)for(yt=i[mt],Fe=0;Fe<yt.length;Fe+=1){for(lt=!0,Se=0;Se<yt[Fe].length;Se+=1)if(yt[Fe][Se]!==void 0&&yt[Fe][Se]!==se.charCodeAt(Se)){lt=!1;break}if(lt===!0){Ye=mt;break}}return Ye===e&&ue!==e&&(Ye=ue),Ye},c=function se(ue){for(var Fe=this.internal.write,Se=this.internal.putStream,yt=(0,this.internal.getFilters)();yt.indexOf("FlateEncode")!==-1;)yt.splice(yt.indexOf("FlateEncode"),1);ue.objectId=this.internal.newObject();var lt=[];if(lt.push({key:"Type",value:"/XObject"}),lt.push({key:"Subtype",value:"/Image"}),lt.push({key:"Width",value:ue.width}),lt.push({key:"Height",value:ue.height}),ue.colorSpace===ee.INDEXED?lt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ue.palette.length/3-1)+" "+("sMask"in ue&&ue.sMask!==void 0?ue.objectId+2:ue.objectId+1)+" 0 R]"}):(lt.push({key:"ColorSpace",value:"/"+ue.colorSpace}),ue.colorSpace===ee.DEVICE_CMYK&&lt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),lt.push({key:"BitsPerComponent",value:ue.bitsPerComponent}),"decodeParameters"in ue&&ue.decodeParameters!==void 0&&lt.push({key:"DecodeParms",value:"<<"+ue.decodeParameters+">>"}),"transparency"in ue&&Array.isArray(ue.transparency)){for(var mt="",Ye=0,gt=ue.transparency.length;Ye<gt;Ye++)mt+=ue.transparency[Ye]+" "+ue.transparency[Ye]+" ";lt.push({key:"Mask",value:"["+mt+"]"})}ue.sMask!==void 0&&lt.push({key:"SMask",value:ue.objectId+1+" 0 R"});var Ct=ue.filter!==void 0?["/"+ue.filter]:void 0;if(Se({data:ue.data,additionalKeyValues:lt,alreadyAppliedFilters:Ct,objectId:ue.objectId}),Fe("endobj"),"sMask"in ue&&ue.sMask!==void 0){var nr="/Predictor "+ue.predictor+" /Colors 1 /BitsPerComponent "+ue.bitsPerComponent+" /Columns "+ue.width,Ae={width:ue.width,height:ue.height,colorSpace:"DeviceGray",bitsPerComponent:ue.bitsPerComponent,decodeParameters:nr,data:ue.sMask};"filter"in ue&&(Ae.filter=ue.filter),se.call(this,Ae)}if(ue.colorSpace===ee.INDEXED){var Ie=this.internal.newObject();Se({data:me(new Uint8Array(ue.palette)),objectId:Ie}),Fe("endobj")}},d=function(){var se=this.internal.collections.addImage_images;for(var ue in se)c.call(this,se[ue])},f=function(){var se,ue=this.internal.collections.addImage_images,Fe=this.internal.write;for(var Se in ue)Fe("/I"+(se=ue[Se]).index,se.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",f))},v=function(){var se=this.internal.collections.addImage_images;return s.call(this),se},C=function(){return Object.keys(this.internal.collections.addImage_images).length},P=function(se){return typeof n["process"+se.toUpperCase()]=="function"},M=function(se){return Zn(se)==="object"&&se.nodeType===1},Q=function(se,ue){if(se.nodeName==="IMG"&&se.hasAttribute("src")){var Fe=""+se.getAttribute("src");if(Fe.indexOf("data:image/")===0)return xf(unescape(Fe).split("base64,").pop());var Se=n.loadFile(Fe,!0);if(Se!==void 0)return Se}if(se.nodeName==="CANVAS"){if(se.width===0||se.height===0)throw new Error("Given canvas must have data. Canvas width: "+se.width+", height: "+se.height);var yt;switch(ue){case"PNG":yt="image/png";break;case"WEBP":yt="image/webp";break;case"JPEG":case"JPG":default:yt="image/jpeg"}return xf(se.toDataURL(yt,1).split("base64,").pop())}},E=function(se){var ue=this.internal.collections.addImage_images;if(ue){for(var Fe in ue)if(se===ue[Fe].alias)return ue[Fe]}},z=function(se,ue,Fe){return se||ue||(se=-96,ue=-96),se<0&&(se=-1*Fe.width*72/se/this.internal.scaleFactor),ue<0&&(ue=-1*Fe.height*72/ue/this.internal.scaleFactor),se===0&&(se=ue*Fe.width/Fe.height),ue===0&&(ue=se*Fe.height/Fe.width),[se,ue]},V=function(se,ue,Fe,Se,yt,lt){var mt=z.call(this,Fe,Se,yt),Ye=this.internal.getCoordinateString,gt=this.internal.getVerticalCoordinateString,Ct=v.call(this);if(Fe=mt[0],Se=mt[1],Ct[yt.index]=yt,lt){lt*=Math.PI/180;var nr=Math.cos(lt),Ae=Math.sin(lt),Ie=function(je){return je.toFixed(4)},Me=[Ie(nr),Ie(Ae),Ie(-1*Ae),Ie(nr),0,0,"cm"]}this.internal.write("q"),lt?(this.internal.write([1,"0","0",1,Ye(se),gt(ue+Se),"cm"].join(" ")),this.internal.write(Me.join(" ")),this.internal.write([Ye(Fe),"0","0",Ye(Se),"0","0","cm"].join(" "))):this.internal.write([Ye(Fe),"0","0",Ye(Se),Ye(se),gt(ue+Se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+yt.index+" Do"),this.internal.write("Q")},ee=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Z=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ne=n.__addimage__.sHashCode=function(se){var ue,Fe,Se=0;if(typeof se=="string")for(Fe=se.length,ue=0;ue<Fe;ue++)Se=(Se<<5)-Se+se.charCodeAt(ue),Se|=0;else if(Oe(se))for(Fe=se.byteLength/2,ue=0;ue<Fe;ue++)Se=(Se<<5)-Se+se[ue],Se|=0;return Se},Be=n.__addimage__.validateStringAsBase64=function(se){(se=se||"").toString().trim();var ue=!0;return se.length===0&&(ue=!1),se.length%4!=0&&(ue=!1),/^[A-Za-z0-9+/]+$/.test(se.substr(0,se.length-2))===!1&&(ue=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(se.substr(-2))===!1&&(ue=!1),ue},ze=n.__addimage__.extractImageFromDataUrl=function(se){if(se==null||!(se=se.trim()).startsWith("data:"))return null;var ue=se.indexOf(",");return ue<0?null:se.substring(0,ue).trim().endsWith("base64")?se.substring(ue+1):null},Ne=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(se){return Ne()&&se instanceof ArrayBuffer};var Oe=n.__addimage__.isArrayBufferView=function(se){return Ne()&&typeof Uint32Array<"u"&&(se instanceof Int8Array||se instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&se instanceof Uint8ClampedArray||se instanceof Int16Array||se instanceof Uint16Array||se instanceof Int32Array||se instanceof Uint32Array||se instanceof Float32Array||se instanceof Float64Array)},ve=n.__addimage__.binaryStringToUint8Array=function(se){for(var ue=se.length,Fe=new Uint8Array(ue),Se=0;Se<ue;Se++)Fe[Se]=se.charCodeAt(Se);return Fe},me=n.__addimage__.arrayBufferToBinaryString=function(se){for(var ue="",Fe=Oe(se)?se:new Uint8Array(se),Se=0;Se<Fe.length;Se+=8192)ue+=String.fromCharCode.apply(null,Fe.subarray(Se,Se+8192));return ue};n.addImage=function(){var se,ue,Fe,Se,yt,lt,mt,Ye,gt;if(typeof arguments[1]=="number"?(ue=e,Fe=arguments[1],Se=arguments[2],yt=arguments[3],lt=arguments[4],mt=arguments[5],Ye=arguments[6],gt=arguments[7]):(ue=arguments[1],Fe=arguments[2],Se=arguments[3],yt=arguments[4],lt=arguments[5],mt=arguments[6],Ye=arguments[7],gt=arguments[8]),Zn(se=arguments[0])==="object"&&!M(se)&&"imageData"in se){var Ct=se;se=Ct.imageData,ue=Ct.format||ue||e,Fe=Ct.x||Fe||0,Se=Ct.y||Se||0,yt=Ct.w||Ct.width||yt,lt=Ct.h||Ct.height||lt,mt=Ct.alias||mt,Ye=Ct.compression||Ye,gt=Ct.rotation||Ct.angle||gt}var nr=this.internal.getFilters();if(Ye===void 0&&nr.indexOf("FlateEncode")!==-1&&(Ye="SLOW"),isNaN(Fe)||isNaN(Se))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var Ae=Qe.call(this,se,ue,mt,Ye);return V.call(this,Fe,Se,yt,lt,Ae,gt),this};var Qe=function(se,ue,Fe,Se){var yt,lt,mt;if(typeof se=="string"&&o(se)===e){se=unescape(se);var Ye=tt(se,!1);(Ye!==""||(Ye=n.loadFile(se,!0))!==void 0)&&(se=Ye)}if(M(se)&&(se=Q(se,ue)),ue=o(se,ue),!P(ue))throw new Error("addImage does not support files of type '"+ue+"', please ensure that a plugin for '"+ue+"' support is added.");if(((mt=Fe)==null||mt.length===0)&&(Fe=function(gt){return typeof gt=="string"||Oe(gt)?ne(gt):Oe(gt.data)?ne(gt.data):null}(se)),(yt=E.call(this,Fe))||(Ne()&&(se instanceof Uint8Array||ue==="RGBA"||(lt=se,se=ve(se))),yt=this["process"+ue.toUpperCase()](se,C.call(this),Fe,function(gt){return gt&&typeof gt=="string"&&(gt=gt.toUpperCase()),gt in n.image_compression?gt:Z.NONE}(Se),lt)),!yt)throw new Error("An unknown error occurred whilst processing the image.");return yt},tt=n.__addimage__.convertBase64ToBinaryString=function(se,ue){ue=typeof ue!="boolean"||ue;var Fe,Se="";if(typeof se=="string"){var yt;Fe=(yt=ze(se))!==null&&yt!==void 0?yt:se;try{Se=xf(Fe)}catch(lt){if(ue)throw Be(Fe)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+lt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Se};n.getImageProperties=function(se){var ue,Fe,Se="";if(M(se)&&(se=Q(se)),typeof se=="string"&&o(se)===e&&((Se=tt(se,!1))===""&&(Se=n.loadFile(se)||""),se=Se),Fe=o(se),!P(Fe))throw new Error("addImage does not support files of type '"+Fe+"', please ensure that a plugin for '"+Fe+"' support is added.");if(!Ne()||se instanceof Uint8Array||(se=ve(se)),!(ue=this["process"+Fe.toUpperCase()](se)))throw new Error("An unknown error occurred whilst processing the image");return ue.fileType=Fe,ue}})(Kr.API),function(n){var e=function(i){if(i!==void 0&&i!="")return!0};Kr.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(i){for(var o,c,d,f=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,v=this.internal.getPageInfoByObjId(i.objId),C=i.pageContext.annotations,P=!1,M=0;M<C.length&&!P;M++)switch((o=C[M]).type){case"link":(e(o.options.url)||e(o.options.pageNumber))&&(P=!0);break;case"reference":case"text":case"freetext":P=!0}if(P!=0){this.internal.write("/Annots [");for(var Q=0;Q<C.length;Q++){o=C[Q];var E=this.internal.pdfEscape,z=this.internal.getEncryptor(i.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var V=this.internal.newAdditionalObject(),ee=this.internal.newAdditionalObject(),Z=this.internal.getEncryptor(V.objId),ne=o.title||"Note";d="<</Type /Annot /Subtype /Text "+(c="/Rect ["+f(o.bounds.x)+" "+s(o.bounds.y+o.bounds.h)+" "+f(o.bounds.x+o.bounds.w)+" "+s(o.bounds.y)+"] ")+"/Contents ("+E(Z(o.contents))+")",d+=" /Popup "+ee.objId+" 0 R",d+=" /P "+v.objId+" 0 R",d+=" /T ("+E(Z(ne))+") >>",V.content=d;var Be=V.objId+" 0 R";d="<</Type /Annot /Subtype /Popup "+(c="/Rect ["+f(o.bounds.x+30)+" "+s(o.bounds.y+o.bounds.h)+" "+f(o.bounds.x+o.bounds.w+30)+" "+s(o.bounds.y)+"] ")+" /Parent "+Be,o.open&&(d+=" /Open true"),d+=" >>",ee.content=d,this.internal.write(V.objId,"0 R",ee.objId,"0 R");break;case"freetext":c="/Rect ["+f(o.bounds.x)+" "+s(o.bounds.y)+" "+f(o.bounds.x+o.bounds.w)+" "+s(o.bounds.y+o.bounds.h)+"] ";var ze=o.color||"#000000";d="<</Type /Annot /Subtype /FreeText "+c+"/Contents ("+E(z(o.contents))+")",d+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ze+")",d+=" /Border [0 0 0]",d+=" >>",this.internal.write(d);break;case"link":if(o.options.name){var Ne=this.annotations._nameMap[o.options.name];o.options.pageNumber=Ne.page,o.options.top=Ne.y}else o.options.top||(o.options.top=0);if(c="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",d="",o.options.url)d="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /A <</S /URI /URI ("+E(z(o.options.url))+") >>";else if(o.options.pageNumber)switch(d="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":d+=" /Fit]";break;case"FitH":d+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,d+=" /FitV "+o.options.left+"]";break;case"XYZ":default:var Oe=s(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),d+=" /XYZ "+o.options.left+" "+Oe+" "+o.options.zoom+"]"}d!=""&&(d+=" >>",this.internal.write(d))}}this.internal.write("]")}}]),n.createAnnotation=function(i){var o=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":o.pageContext.annotations.push(i)}},n.link=function(i,o,c,d,f){var s=this.internal.getCurrentPageInfo(),v=this.internal.getCoordinateString,C=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:v(i),y:C(o),w:v(i+c),h:C(o+d)},options:f,type:"link"})},n.textWithLink=function(i,o,c,d){var f,s,v=this.getTextWidth(i),C=this.internal.getLineHeight()/this.internal.scaleFactor;if(d.maxWidth!==void 0){s=d.maxWidth;var P=this.splitTextToSize(i,s).length;f=Math.ceil(C*P)}else s=v,f=C;return this.text(i,o,c,d),c+=.2*C,d.align==="center"&&(o-=v/2),d.align==="right"&&(o-=v),this.link(o,c-C,s,f,d),v},n.getTextWidth=function(i){var o=this.internal.getFontSize();return this.getStringUnitWidth(i)*o/this.internal.scaleFactor}}(Kr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},c=[1570,1571,1573,1575];n.__arabicParser__={};var d=n.__arabicParser__.isInArabicSubstitutionA=function(V){return e[V.charCodeAt(0)]!==void 0},f=n.__arabicParser__.isArabicLetter=function(V){return typeof V=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(V)},s=n.__arabicParser__.isArabicEndLetter=function(V){return f(V)&&d(V)&&e[V.charCodeAt(0)].length<=2},v=n.__arabicParser__.isArabicAlfLetter=function(V){return f(V)&&c.indexOf(V.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(V){return f(V)&&d(V)&&e[V.charCodeAt(0)].length>=1};var C=n.__arabicParser__.arabicLetterHasFinalForm=function(V){return f(V)&&d(V)&&e[V.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(V){return f(V)&&d(V)&&e[V.charCodeAt(0)].length>=3};var P=n.__arabicParser__.arabicLetterHasMedialForm=function(V){return f(V)&&d(V)&&e[V.charCodeAt(0)].length==4},M=n.__arabicParser__.resolveLigatures=function(V){var ee=0,Z=i,ne="",Be=0;for(ee=0;ee<V.length;ee+=1)Z[V.charCodeAt(ee)]!==void 0?(Be++,typeof(Z=Z[V.charCodeAt(ee)])=="number"&&(ne+=String.fromCharCode(Z),Z=i,Be=0),ee===V.length-1&&(Z=i,ne+=V.charAt(ee-(Be-1)),ee-=Be-1,Be=0)):(Z=i,ne+=V.charAt(ee-Be),ee-=Be,Be=0);return ne};n.__arabicParser__.isArabicDiacritic=function(V){return V!==void 0&&o[V.charCodeAt(0)]!==void 0};var Q=n.__arabicParser__.getCorrectForm=function(V,ee,Z){return f(V)?d(V)===!1?-1:!C(V)||!f(ee)&&!f(Z)||!f(Z)&&s(ee)||s(V)&&!f(ee)||s(V)&&v(ee)||s(V)&&s(ee)?0:P(V)&&f(ee)&&!s(ee)&&f(Z)&&C(Z)?3:s(V)||!f(Z)?1:2:-1},E=function(V){var ee=0,Z=0,ne=0,Be="",ze="",Ne="",Oe=(V=V||"").split("\\s+"),ve=[];for(ee=0;ee<Oe.length;ee+=1){for(ve.push(""),Z=0;Z<Oe[ee].length;Z+=1)Be=Oe[ee][Z],ze=Oe[ee][Z-1],Ne=Oe[ee][Z+1],f(Be)?(ne=Q(Be,ze,Ne),ve[ee]+=ne!==-1?String.fromCharCode(e[Be.charCodeAt(0)][ne]):Be):ve[ee]+=Be;ve[ee]=M(ve[ee])}return ve.join(" ")},z=n.__arabicParser__.processArabic=n.processArabic=function(){var V,ee=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Z=[];if(Array.isArray(ee)){var ne=0;for(Z=[],ne=0;ne<ee.length;ne+=1)Array.isArray(ee[ne])?Z.push([E(ee[ne][0]),ee[ne][1],ee[ne][2]]):Z.push([E(ee[ne])]);V=Z}else V=E(ee);return typeof arguments[0]=="string"?V:(arguments[0].text=V,arguments[0])};n.events.push(["preProcessText",z])}(Kr.API),Kr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(s){i=s}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(s){o=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var c=300;Object.defineProperty(this,"height",{get:function(){return c},set:function(s){c=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=c+1)}});var d=[];Object.defineProperty(this,"childNodes",{get:function(){return d},set:function(s){d=s}});var f={};Object.defineProperty(this,"style",{get:function(){return f},set:function(s){f=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(i,o){var c;if((i=i||"2d")!=="2d")return null;for(c in o)this.pdf.context2d.hasOwnProperty(c)&&(this.pdf.context2d[c]=o[c]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Kr.API),function(n){var e={left:0,top:0,bottom:0,right:0},i=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),c.call(this))},c=function(){this.internal.__cell__.lastCell=new d,this.internal.__cell__.pages=1},d=function(){var v=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return v},set:function(V){v=V}});var C=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return C},set:function(V){C=V}});var P=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return P},set:function(V){P=V}});var M=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return M},set:function(V){M=V}});var Q=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Q},set:function(V){Q=V}});var E=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return E},set:function(V){E=V}});var z=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return z},set:function(V){z=V}}),this};d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},d.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(v){return o.call(this),this.internal.__cell__.headerFunction=typeof v=="function"?v:void 0,this},n.getTextDimensions=function(v,C){o.call(this);var P=(C=C||{}).fontSize||this.getFontSize(),M=C.font||this.getFont(),Q=C.scaleFactor||this.internal.scaleFactor,E=0,z=0,V=0,ee=this;if(!Array.isArray(v)&&typeof v!="string"){if(typeof v!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");v=String(v)}var Z=C.maxWidth;Z>0?typeof v=="string"?v=this.splitTextToSize(v,Z):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Be,ze){return Be.concat(ee.splitTextToSize(ze,Z))},[])):v=Array.isArray(v)?v:[v];for(var ne=0;ne<v.length;ne++)E<(V=this.getStringUnitWidth(v[ne],{font:M})*P)&&(E=V);return E!==0&&(z=v.length),{w:E/=Q,h:Math.max((z*P*this.getLineHeightFactor()-P*(this.getLineHeightFactor()-1))/Q,0)}},n.cellAddPage=function(){o.call(this),this.addPage();var v=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new d(v.left,v.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var f=n.cell=function(){var v;v=arguments[0]instanceof d?arguments[0]:new d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var C=this.internal.__cell__.lastCell,P=this.internal.__cell__.padding,M=this.internal.__cell__.margins||e,Q=this.internal.__cell__.tableHeaderRow,E=this.internal.__cell__.printHeaders;return C.lineNumber!==void 0&&(C.lineNumber===v.lineNumber?(v.x=(C.x||0)+(C.width||0),v.y=C.y||0):C.y+C.height+v.height+M.bottom>this.getPageHeight()?(this.cellAddPage(),v.y=M.top,E&&Q&&(this.printHeaderRow(v.lineNumber,!0),v.y+=Q[0].height)):v.y=C.y+C.height||v.y),v.text[0]!==void 0&&(this.rect(v.x,v.y,v.width,v.height,i===!0?"FD":void 0),v.align==="right"?this.text(v.text,v.x+v.width-P,v.y+P,{align:"right",baseline:"top"}):v.align==="center"?this.text(v.text,v.x+v.width/2,v.y+P,{align:"center",baseline:"top",maxWidth:v.width-P-P}):this.text(v.text,v.x+P,v.y+P,{align:"left",baseline:"top",maxWidth:v.width-P-P})),this.internal.__cell__.lastCell=v,this};n.table=function(v,C,P,M,Q){if(o.call(this),!P)throw new Error("No data for PDF table.");var E,z,V,ee,Z=[],ne=[],Be=[],ze={},Ne={},Oe=[],ve=[],me=(Q=Q||{}).autoSize||!1,Qe=Q.printHeaders!==!1,tt=Q.css&&Q.css["font-size"]!==void 0?16*Q.css["font-size"]:Q.fontSize||12,se=Q.margins||Object.assign({width:this.getPageWidth()},e),ue=typeof Q.padding=="number"?Q.padding:3,Fe=Q.headerBackgroundColor||"#c8c8c8",Se=Q.headerTextColor||"#000";if(c.call(this),this.internal.__cell__.printHeaders=Qe,this.internal.__cell__.margins=se,this.internal.__cell__.table_font_size=tt,this.internal.__cell__.padding=ue,this.internal.__cell__.headerBackgroundColor=Fe,this.internal.__cell__.headerTextColor=Se,this.setFontSize(tt),M==null)ne=Z=Object.keys(P[0]),Be=Z.map(function(){return"left"});else if(Array.isArray(M)&&Zn(M[0])==="object")for(Z=M.map(function(Ct){return Ct.name}),ne=M.map(function(Ct){return Ct.prompt||Ct.name||""}),Be=M.map(function(Ct){return Ct.align||"left"}),E=0;E<M.length;E+=1)Ne[M[E].name]=M[E].width*(19.049976/25.4);else Array.isArray(M)&&typeof M[0]=="string"&&(ne=Z=M,Be=Z.map(function(){return"left"}));if(me||Array.isArray(M)&&typeof M[0]=="string")for(E=0;E<Z.length;E+=1){for(ze[ee=Z[E]]=P.map(function(Ct){return Ct[ee]}),this.setFont(void 0,"bold"),Oe.push(this.getTextDimensions(ne[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),z=ze[ee],this.setFont(void 0,"normal"),V=0;V<z.length;V+=1)Oe.push(this.getTextDimensions(z[V],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ne[ee]=Math.max.apply(null,Oe)+ue+ue,Oe=[]}if(Qe){var yt={};for(E=0;E<Z.length;E+=1)yt[Z[E]]={},yt[Z[E]].text=ne[E],yt[Z[E]].align=Be[E];var lt=s.call(this,yt,Ne);ve=Z.map(function(Ct){return new d(v,C,Ne[Ct],lt,yt[Ct].text,void 0,yt[Ct].align)}),this.setTableHeaderRow(ve),this.printHeaderRow(1,!1)}var mt=M.reduce(function(Ct,nr){return Ct[nr.name]=nr.align,Ct},{});for(E=0;E<P.length;E+=1){"rowStart"in Q&&Q.rowStart instanceof Function&&Q.rowStart({row:E,data:P[E]},this);var Ye=s.call(this,P[E],Ne);for(V=0;V<Z.length;V+=1){var gt=P[E][Z[V]];"cellStart"in Q&&Q.cellStart instanceof Function&&Q.cellStart({row:E,col:V,data:gt},this),f.call(this,new d(v,C,Ne[Z[V]],Ye,gt,E+2,mt[Z[V]]))}}return this.internal.__cell__.table_x=v,this.internal.__cell__.table_y=C,this};var s=function(v,C){var P=this.internal.__cell__.padding,M=this.internal.__cell__.table_font_size,Q=this.internal.scaleFactor;return Object.keys(v).map(function(E){var z=v[E];return this.splitTextToSize(z.hasOwnProperty("text")?z.text:z,C[E]-P-P)},this).map(function(E){return this.getLineHeightFactor()*E.length*M/Q+P+P},this).reduce(function(E,z){return Math.max(E,z)},0)};n.setTableHeaderRow=function(v){o.call(this),this.internal.__cell__.tableHeaderRow=v},n.printHeaderRow=function(v,C){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var P;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var M=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new d(M[0],M[1],M[2],M[3],void 0,-1)}this.setFont(void 0,"bold");for(var Q=[],E=0;E<this.internal.__cell__.tableHeaderRow.length;E+=1){P=this.internal.__cell__.tableHeaderRow[E].clone(),C&&(P.y=this.internal.__cell__.margins.top||0,Q.push(P)),P.lineNumber=v;var z=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),f.call(this,P),this.setTextColor(z)}Q.length>0&&this.setTableHeaderRow(Q),this.setFont(void 0,"normal"),i=!1}}(Kr.API);var Ww={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Xw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],M0=$w(Xw),Jw=[100,200,300,400,500,600,700,800,900],MP=$w(Jw);function U0(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),i=function(d){return Ww[d=d||"normal"]?d:"normal"}(n.style),o=function(d){if(!d)return 400;if(typeof d=="number")return d>=100&&d<=900&&d%100==0?d:400;if(/^\d00$/.test(d))return parseInt(d);switch(d){case"bold":return 700;case"normal":default:return 400}}(n.weight),c=function(d){return typeof M0[d=d||"normal"]=="number"?d:"normal"}(n.stretch);return{family:e,style:i,weight:o,stretch:c,src:n.src||[],ref:n.ref||{name:e,style:[c,i,o].join(" ")}}}function r2(n,e,i,o){var c;for(c=i;c>=0&&c<e.length;c+=o)if(n[e[c]])return n[e[c]];for(c=i;c>=0&&c<e.length;c-=o)if(n[e[c]])return n[e[c]]}var UP={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},n2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function i2(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function kP(n,e,i){for(var o=(i=i||{}).defaultFontFamily||"times",c=Object.assign({},UP,i.genericFontFamilies||{}),d=null,f=null,s=0;s<e.length;++s)if(c[(d=U0(e[s])).family]&&(d.family=c[d.family]),n.hasOwnProperty(d.family)){f=n[d.family];break}if(!(f=f||n[o]))throw new Error("Could not find a font-family for the rule '"+i2(d)+"' and default family '"+o+"'.");if(f=function(v,C){if(C[v])return C[v];var P=M0[v],M=P<=M0.normal?-1:1,Q=r2(C,Xw,P,M);if(!Q)throw new Error("Could not find a matching font-stretch value for "+v);return Q}(d.stretch,f),f=function(v,C){if(C[v])return C[v];for(var P=Ww[v],M=0;M<P.length;++M)if(C[P[M]])return C[P[M]];throw new Error("Could not find a matching font-style for "+v)}(d.style,f),!(f=function(v,C){if(C[v])return C[v];if(v===400&&C[500])return C[500];if(v===500&&C[400])return C[400];var P=MP[v],M=r2(C,Jw,P,v<400?-1:1);if(!M)throw new Error("Could not find a matching font-weight for value "+v);return M}(d.weight,f)))throw new Error("Failed to resolve a font for the rule '"+i2(d)+"'.");return f}function a2(n){return n.trimLeft()}function QP(n,e){for(var i=0;i<n.length;){if(n.charAt(i)===e)return[n.substring(0,i),n.substring(i+1)];i+=1}return null}function DP(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Kd,s2,o2,km=["times"];(function(n){var e,i,o,c,d,f,s,v,C,P=function(Ae){return Ae=Ae||{},this.isStrokeTransparent=Ae.isStrokeTransparent||!1,this.strokeOpacity=Ae.strokeOpacity||1,this.strokeStyle=Ae.strokeStyle||"#000000",this.fillStyle=Ae.fillStyle||"#000000",this.isFillTransparent=Ae.isFillTransparent||!1,this.fillOpacity=Ae.fillOpacity||1,this.font=Ae.font||"10px sans-serif",this.textBaseline=Ae.textBaseline||"alphabetic",this.textAlign=Ae.textAlign||"left",this.lineWidth=Ae.lineWidth||1,this.lineJoin=Ae.lineJoin||"miter",this.lineCap=Ae.lineCap||"butt",this.path=Ae.path||[],this.transform=Ae.transform!==void 0?Ae.transform.clone():new v,this.globalCompositeOperation=Ae.globalCompositeOperation||"normal",this.globalAlpha=Ae.globalAlpha||1,this.clip_path=Ae.clip_path||[],this.currentPoint=Ae.currentPoint||new f,this.miterLimit=Ae.miterLimit||10,this.lastPoint=Ae.lastPoint||new f,this.lineDashOffset=Ae.lineDashOffset||0,this.lineDash=Ae.lineDash||[],this.margin=Ae.margin||[0,0,0,0],this.prevPageLastElemOffset=Ae.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ae.ignoreClearRect!="boolean"||Ae.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new M(this),e=this.internal.f2,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getHorizontalCoordinate,d=this.internal.getVerticalCoordinate,f=this.internal.Point,s=this.internal.Rectangle,v=this.internal.Matrix,C=new P}]);var M=function(Ae){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ie=Ae;Object.defineProperty(this,"pdf",{get:function(){return Ie}});var Me=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Me},set:function(Ft){Me=!!Ft}});var je=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return je},set:function(Ft){je=!!Ft}});var nt=0;Object.defineProperty(this,"posX",{get:function(){return nt},set:function(Ft){isNaN(Ft)||(nt=Ft)}});var ut=0;Object.defineProperty(this,"posY",{get:function(){return ut},set:function(Ft){isNaN(Ft)||(ut=Ft)}}),Object.defineProperty(this,"margin",{get:function(){return C.margin},set:function(Ft){var Ue;typeof Ft=="number"?Ue=[Ft,Ft,Ft,Ft]:((Ue=new Array(4))[0]=Ft[0],Ue[1]=Ft.length>=2?Ft[1]:Ue[0],Ue[2]=Ft.length>=3?Ft[2]:Ue[0],Ue[3]=Ft.length>=4?Ft[3]:Ue[1]),C.margin=Ue}});var xt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xt},set:function(Ft){xt=Ft}});var Bt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Bt},set:function(Ft){Bt=Ft}});var tr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return tr},set:function(Ft){tr=Ft}}),Object.defineProperty(this,"ctx",{get:function(){return C},set:function(Ft){Ft instanceof P&&(C=Ft)}}),Object.defineProperty(this,"path",{get:function(){return C.path},set:function(Ft){C.path=Ft}});var ot=[];Object.defineProperty(this,"ctxStack",{get:function(){return ot},set:function(Ft){ot=Ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ft){var Ue;Ue=Q(Ft),this.ctx.fillStyle=Ue.style,this.ctx.isFillTransparent=Ue.a===0,this.ctx.fillOpacity=Ue.a,this.pdf.setFillColor(Ue.r,Ue.g,Ue.b,{a:Ue.a}),this.pdf.setTextColor(Ue.r,Ue.g,Ue.b,{a:Ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ft){var Ue=Q(Ft);this.ctx.strokeStyle=Ue.style,this.ctx.isStrokeTransparent=Ue.a===0,this.ctx.strokeOpacity=Ue.a,Ue.a===0?this.pdf.setDrawColor(255,255,255):(Ue.a,this.pdf.setDrawColor(Ue.r,Ue.g,Ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ft){["butt","round","square"].indexOf(Ft)!==-1&&(this.ctx.lineCap=Ft,this.pdf.setLineCap(Ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ft){isNaN(Ft)||(this.ctx.lineWidth=Ft,this.pdf.setLineWidth(Ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ft){["bevel","round","miter"].indexOf(Ft)!==-1&&(this.ctx.lineJoin=Ft,this.pdf.setLineJoin(Ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ft){isNaN(Ft)||(this.ctx.miterLimit=Ft,this.pdf.setMiterLimit(Ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ft){this.ctx.textBaseline=Ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ft){["right","end","center","left","start"].indexOf(Ft)!==-1&&(this.ctx.textAlign=Ft)}});var Ut=null;function Ot(Ft,Ue){if(Ut===null){var sr=function(fr){var jt=[];return Object.keys(fr).forEach(function(er){fr[er].forEach(function(ar){var or=null;switch(ar){case"bold":or={family:er,weight:"bold"};break;case"italic":or={family:er,style:"italic"};break;case"bolditalic":or={family:er,weight:"bold",style:"italic"};break;case"":case"normal":or={family:er}}or!==null&&(or.ref={name:er,style:ar},jt.push(or))})}),jt}(Ft.getFontList());Ut=function(fr){for(var jt={},er=0;er<fr.length;++er){var ar=U0(fr[er]),or=ar.family,wr=ar.stretch,kr=ar.style,Hr=ar.weight;jt[or]=jt[or]||{},jt[or][wr]=jt[or][wr]||{},jt[or][wr][kr]=jt[or][wr][kr]||{},jt[or][wr][kr][Hr]=ar}return jt}(sr.concat(Ue))}return Ut}var Xt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xt},set:function(Ft){Ut=null,Xt=Ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ft){var Ue;if(this.ctx.font=Ft,(Ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ft))!==null){var sr=Ue[1];Ue[2];var fr=Ue[3],jt=Ue[4];Ue[5];var er=Ue[6],ar=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(jt)[2];jt=Math.floor(ar==="px"?parseFloat(jt)*this.pdf.internal.scaleFactor:ar==="em"?parseFloat(jt)*this.pdf.getFontSize():parseFloat(jt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(jt);var or=function(Pr){var Zr,ur,Dn=[],Vr=Pr.trim();if(Vr==="")return km;if(Vr in n2)return[n2[Vr]];for(;Vr!=="";){switch(ur=null,Zr=(Vr=a2(Vr)).charAt(0)){case'"':case"'":ur=QP(Vr.substring(1),Zr);break;default:ur=DP(Vr)}if(ur===null||(Dn.push(ur[0]),(Vr=a2(ur[1]))!==""&&Vr.charAt(0)!==","))return km;Vr=Vr.replace(/^,/,"")}return Dn}(er);if(this.fontFaces){var wr=kP(Ot(this.pdf,this.fontFaces),or.map(function(Pr){return{family:Pr,stretch:"normal",weight:fr,style:sr}}));this.pdf.setFont(wr.ref.name,wr.ref.style)}else{var kr="";(fr==="bold"||parseInt(fr,10)>=700||sr==="bold")&&(kr="bold"),sr==="italic"&&(kr+="italic"),kr.length===0&&(kr="normal");for(var Hr="",Wr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},on=0;on<or.length;on++){if(this.pdf.internal.getFont(or[on],kr,{noFallback:!0,disableWarning:!0})!==void 0){Hr=or[on];break}if(kr==="bolditalic"&&this.pdf.internal.getFont(or[on],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Hr=or[on],kr="bold";else if(this.pdf.internal.getFont(or[on],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Hr=or[on],kr="normal";break}}if(Hr===""){for(var pn=0;pn<or.length;pn++)if(Wr[or[pn]]){Hr=Wr[or[pn]];break}}Hr=Hr===""?"Times":Hr,this.pdf.setFont(Hr,kr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ft){this.ctx.globalCompositeOperation=Ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ft){this.ctx.globalAlpha=Ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ft){this.ctx.lineDashOffset=Ft,nr.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ft){this.ctx.lineDash=Ft,nr.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ft){this.ctx.ignoreClearRect=!!Ft}})};M.prototype.setLineDash=function(Ae){this.lineDash=Ae},M.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},M.prototype.fill=function(){ze.call(this,"fill",!1)},M.prototype.stroke=function(){ze.call(this,"stroke",!1)},M.prototype.beginPath=function(){this.path=[{type:"begin"}]},M.prototype.moveTo=function(Ae,Ie){if(isNaN(Ae)||isNaN(Ie))throw oi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Me=this.ctx.transform.applyToPoint(new f(Ae,Ie));this.path.push({type:"mt",x:Me.x,y:Me.y}),this.ctx.lastPoint=new f(Ae,Ie)},M.prototype.closePath=function(){var Ae=new f(0,0),Ie=0;for(Ie=this.path.length-1;Ie!==-1;Ie--)if(this.path[Ie].type==="begin"&&Zn(this.path[Ie+1])==="object"&&typeof this.path[Ie+1].x=="number"){Ae=new f(this.path[Ie+1].x,this.path[Ie+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new f(Ae.x,Ae.y)},M.prototype.lineTo=function(Ae,Ie){if(isNaN(Ae)||isNaN(Ie))throw oi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Me=this.ctx.transform.applyToPoint(new f(Ae,Ie));this.path.push({type:"lt",x:Me.x,y:Me.y}),this.ctx.lastPoint=new f(Me.x,Me.y)},M.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ze.call(this,null,!0)},M.prototype.quadraticCurveTo=function(Ae,Ie,Me,je){if(isNaN(Me)||isNaN(je)||isNaN(Ae)||isNaN(Ie))throw oi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var nt=this.ctx.transform.applyToPoint(new f(Me,je)),ut=this.ctx.transform.applyToPoint(new f(Ae,Ie));this.path.push({type:"qct",x1:ut.x,y1:ut.y,x:nt.x,y:nt.y}),this.ctx.lastPoint=new f(nt.x,nt.y)},M.prototype.bezierCurveTo=function(Ae,Ie,Me,je,nt,ut){if(isNaN(nt)||isNaN(ut)||isNaN(Ae)||isNaN(Ie)||isNaN(Me)||isNaN(je))throw oi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xt=this.ctx.transform.applyToPoint(new f(nt,ut)),Bt=this.ctx.transform.applyToPoint(new f(Ae,Ie)),tr=this.ctx.transform.applyToPoint(new f(Me,je));this.path.push({type:"bct",x1:Bt.x,y1:Bt.y,x2:tr.x,y2:tr.y,x:xt.x,y:xt.y}),this.ctx.lastPoint=new f(xt.x,xt.y)},M.prototype.arc=function(Ae,Ie,Me,je,nt,ut){if(isNaN(Ae)||isNaN(Ie)||isNaN(Me)||isNaN(je)||isNaN(nt))throw oi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ut=!!ut,!this.ctx.transform.isIdentity){var xt=this.ctx.transform.applyToPoint(new f(Ae,Ie));Ae=xt.x,Ie=xt.y;var Bt=this.ctx.transform.applyToPoint(new f(0,Me)),tr=this.ctx.transform.applyToPoint(new f(0,0));Me=Math.sqrt(Math.pow(Bt.x-tr.x,2)+Math.pow(Bt.y-tr.y,2))}Math.abs(nt-je)>=2*Math.PI&&(je=0,nt=2*Math.PI),this.path.push({type:"arc",x:Ae,y:Ie,radius:Me,startAngle:je,endAngle:nt,counterclockwise:ut})},M.prototype.arcTo=function(Ae,Ie,Me,je,nt){throw new Error("arcTo not implemented.")},M.prototype.rect=function(Ae,Ie,Me,je){if(isNaN(Ae)||isNaN(Ie)||isNaN(Me)||isNaN(je))throw oi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ae,Ie),this.lineTo(Ae+Me,Ie),this.lineTo(Ae+Me,Ie+je),this.lineTo(Ae,Ie+je),this.lineTo(Ae,Ie),this.lineTo(Ae+Me,Ie),this.lineTo(Ae,Ie)},M.prototype.fillRect=function(Ae,Ie,Me,je){if(isNaN(Ae)||isNaN(Ie)||isNaN(Me)||isNaN(je))throw oi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!E.call(this)){var nt={};this.lineCap!=="butt"&&(nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ae,Ie,Me,je),this.fill(),nt.hasOwnProperty("lineCap")&&(this.lineCap=nt.lineCap),nt.hasOwnProperty("lineJoin")&&(this.lineJoin=nt.lineJoin)}},M.prototype.strokeRect=function(Ae,Ie,Me,je){if(isNaN(Ae)||isNaN(Ie)||isNaN(Me)||isNaN(je))throw oi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");z.call(this)||(this.beginPath(),this.rect(Ae,Ie,Me,je),this.stroke())},M.prototype.clearRect=function(Ae,Ie,Me,je){if(isNaN(Ae)||isNaN(Ie)||isNaN(Me)||isNaN(je))throw oi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ae,Ie,Me,je))},M.prototype.save=function(Ae){Ae=typeof Ae!="boolean"||Ae;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,Me=0;Me<this.pdf.internal.getNumberOfPages();Me++)this.pdf.setPage(Me+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ie),Ae){this.ctx.fontSize=this.pdf.internal.getFontSize();var je=new P(this.ctx);this.ctxStack.push(this.ctx),this.ctx=je}},M.prototype.restore=function(Ae){Ae=typeof Ae!="boolean"||Ae;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,Me=0;Me<this.pdf.internal.getNumberOfPages();Me++)this.pdf.setPage(Me+1),this.pdf.internal.out("Q");this.pdf.setPage(Ie),Ae&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},M.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Q=function(Ae){var Ie,Me,je,nt;if(Ae.isCanvasGradient===!0&&(Ae=Ae.getColor()),!Ae)return{r:0,g:0,b:0,a:0,style:Ae};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ae))Ie=0,Me=0,je=0,nt=0;else{var ut=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ae);if(ut!==null)Ie=parseInt(ut[1]),Me=parseInt(ut[2]),je=parseInt(ut[3]),nt=1;else if((ut=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ae))!==null)Ie=parseInt(ut[1]),Me=parseInt(ut[2]),je=parseInt(ut[3]),nt=parseFloat(ut[4]);else{if(nt=1,typeof Ae=="string"&&Ae.charAt(0)!=="#"){var xt=new jw(Ae);Ae=xt.ok?xt.toHex():"#000000"}Ae.length===4?(Ie=Ae.substring(1,2),Ie+=Ie,Me=Ae.substring(2,3),Me+=Me,je=Ae.substring(3,4),je+=je):(Ie=Ae.substring(1,3),Me=Ae.substring(3,5),je=Ae.substring(5,7)),Ie=parseInt(Ie,16),Me=parseInt(Me,16),je=parseInt(je,16)}}return{r:Ie,g:Me,b:je,a:nt,style:Ae}},E=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},z=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};M.prototype.fillText=function(Ae,Ie,Me,je){if(isNaN(Ie)||isNaN(Me)||typeof Ae!="string")throw oi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(je=isNaN(je)?void 0:je,!E.call(this)){var nt=Ye(this.ctx.transform.rotation),ut=this.ctx.transform.scaleX;ue.call(this,{text:Ae,x:Ie,y:Me,scale:ut,angle:nt,align:this.textAlign,maxWidth:je})}},M.prototype.strokeText=function(Ae,Ie,Me,je){if(isNaN(Ie)||isNaN(Me)||typeof Ae!="string")throw oi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!z.call(this)){je=isNaN(je)?void 0:je;var nt=Ye(this.ctx.transform.rotation),ut=this.ctx.transform.scaleX;ue.call(this,{text:Ae,x:Ie,y:Me,scale:ut,renderingMode:"stroke",angle:nt,align:this.textAlign,maxWidth:je})}},M.prototype.measureText=function(Ae){if(typeof Ae!="string")throw oi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ie=this.pdf,Me=this.pdf.internal.scaleFactor,je=Ie.internal.getFontSize(),nt=Ie.getStringUnitWidth(Ae)*je/Ie.internal.scaleFactor,ut=function(xt){var Bt=(xt=xt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Bt}}),this};return new ut({width:nt*=Math.round(96*Me/72*1e4)/1e4})},M.prototype.scale=function(Ae,Ie){if(isNaN(Ae)||isNaN(Ie))throw oi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Me=new v(Ae,0,0,Ie,0,0);this.ctx.transform=this.ctx.transform.multiply(Me)},M.prototype.rotate=function(Ae){if(isNaN(Ae))throw oi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ie=new v(Math.cos(Ae),Math.sin(Ae),-Math.sin(Ae),Math.cos(Ae),0,0);this.ctx.transform=this.ctx.transform.multiply(Ie)},M.prototype.translate=function(Ae,Ie){if(isNaN(Ae)||isNaN(Ie))throw oi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Me=new v(1,0,0,1,Ae,Ie);this.ctx.transform=this.ctx.transform.multiply(Me)},M.prototype.transform=function(Ae,Ie,Me,je,nt,ut){if(isNaN(Ae)||isNaN(Ie)||isNaN(Me)||isNaN(je)||isNaN(nt)||isNaN(ut))throw oi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xt=new v(Ae,Ie,Me,je,nt,ut);this.ctx.transform=this.ctx.transform.multiply(xt)},M.prototype.setTransform=function(Ae,Ie,Me,je,nt,ut){Ae=isNaN(Ae)?1:Ae,Ie=isNaN(Ie)?0:Ie,Me=isNaN(Me)?0:Me,je=isNaN(je)?1:je,nt=isNaN(nt)?0:nt,ut=isNaN(ut)?0:ut,this.ctx.transform=new v(Ae,Ie,Me,je,nt,ut)};var V=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};M.prototype.drawImage=function(Ae,Ie,Me,je,nt,ut,xt,Bt,tr){var ot=this.pdf.getImageProperties(Ae),Ut=1,Ot=1,Xt=1,Ft=1;je!==void 0&&Bt!==void 0&&(Xt=Bt/je,Ft=tr/nt,Ut=ot.width/je*Bt/je,Ot=ot.height/nt*tr/nt),ut===void 0&&(ut=Ie,xt=Me,Ie=0,Me=0),je!==void 0&&Bt===void 0&&(Bt=je,tr=nt),je===void 0&&Bt===void 0&&(Bt=ot.width,tr=ot.height);for(var Ue,sr=this.ctx.transform.decompose(),fr=Ye(sr.rotate.shx),jt=new v,er=(jt=(jt=(jt=jt.multiply(sr.translate)).multiply(sr.skew)).multiply(sr.scale)).applyToRectangle(new s(ut-Ie*Xt,xt-Me*Ft,je*Ut,nt*Ot)),ar=ee.call(this,er),or=[],wr=0;wr<ar.length;wr+=1)or.indexOf(ar[wr])===-1&&or.push(ar[wr]);if(Be(or),this.autoPaging)for(var kr=or[0],Hr=or[or.length-1],Wr=kr;Wr<Hr+1;Wr++){this.pdf.setPage(Wr);var on=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pn=Wr===1?this.posY+this.margin[0]:this.margin[0],Pr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ur=Wr===1?0:Pr+(Wr-2)*Zr;if(this.ctx.clip_path.length!==0){var Dn=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(Ue,this.posX+this.margin[3],-ur+pn+this.ctx.prevPageLastElemOffset),Ne.call(this,"fill",!0),this.path=Dn}var Vr=JSON.parse(JSON.stringify(er));Vr=ne([Vr],this.posX+this.margin[3],-ur+pn+this.ctx.prevPageLastElemOffset)[0];var bi=(Wr>kr||Wr<Hr)&&V.call(this);bi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],on,Zr,null).clip().discardPath()),this.pdf.addImage(Ae,"JPEG",Vr.x,Vr.y,Vr.w,Vr.h,null,null,fr),bi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Ae,"JPEG",er.x,er.y,er.w,er.h,null,null,fr)};var ee=function(Ae,Ie,Me){var je=[];Ie=Ie||this.pdf.internal.pageSize.width,Me=Me||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var nt=this.posY+this.ctx.prevPageLastElemOffset;switch(Ae.type){default:case"mt":case"lt":je.push(Math.floor((Ae.y+nt)/Me)+1);break;case"arc":je.push(Math.floor((Ae.y+nt-Ae.radius)/Me)+1),je.push(Math.floor((Ae.y+nt+Ae.radius)/Me)+1);break;case"qct":var ut=gt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ae.x1,Ae.y1,Ae.x,Ae.y);je.push(Math.floor((ut.y+nt)/Me)+1),je.push(Math.floor((ut.y+ut.h+nt)/Me)+1);break;case"bct":var xt=Ct(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ae.x1,Ae.y1,Ae.x2,Ae.y2,Ae.x,Ae.y);je.push(Math.floor((xt.y+nt)/Me)+1),je.push(Math.floor((xt.y+xt.h+nt)/Me)+1);break;case"rect":je.push(Math.floor((Ae.y+nt)/Me)+1),je.push(Math.floor((Ae.y+Ae.h+nt)/Me)+1)}for(var Bt=0;Bt<je.length;Bt+=1)for(;this.pdf.internal.getNumberOfPages()<je[Bt];)Z.call(this);return je},Z=function(){var Ae=this.fillStyle,Ie=this.strokeStyle,Me=this.font,je=this.lineCap,nt=this.lineWidth,ut=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ae,this.strokeStyle=Ie,this.font=Me,this.lineCap=je,this.lineWidth=nt,this.lineJoin=ut},ne=function(Ae,Ie,Me){for(var je=0;je<Ae.length;je++)switch(Ae[je].type){case"bct":Ae[je].x2+=Ie,Ae[je].y2+=Me;case"qct":Ae[je].x1+=Ie,Ae[je].y1+=Me;case"mt":case"lt":case"arc":default:Ae[je].x+=Ie,Ae[je].y+=Me}return Ae},Be=function(Ae){return Ae.sort(function(Ie,Me){return Ie-Me})},ze=function(Ae,Ie){for(var Me,je,nt=this.fillStyle,ut=this.strokeStyle,xt=this.lineCap,Bt=this.lineWidth,tr=Math.abs(Bt*this.ctx.transform.scaleX),ot=this.lineJoin,Ut=JSON.parse(JSON.stringify(this.path)),Ot=JSON.parse(JSON.stringify(this.path)),Xt=[],Ft=0;Ft<Ot.length;Ft++)if(Ot[Ft].x!==void 0)for(var Ue=ee.call(this,Ot[Ft]),sr=0;sr<Ue.length;sr+=1)Xt.indexOf(Ue[sr])===-1&&Xt.push(Ue[sr]);for(var fr=0;fr<Xt.length;fr++)for(;this.pdf.internal.getNumberOfPages()<Xt[fr];)Z.call(this);if(Be(Xt),this.autoPaging)for(var jt=Xt[0],er=Xt[Xt.length-1],ar=jt;ar<er+1;ar++){this.pdf.setPage(ar),this.fillStyle=nt,this.strokeStyle=ut,this.lineCap=xt,this.lineWidth=tr,this.lineJoin=ot;var or=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wr=ar===1?this.posY+this.margin[0]:this.margin[0],kr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Hr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wr=ar===1?0:kr+(ar-2)*Hr;if(this.ctx.clip_path.length!==0){var on=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(Me,this.posX+this.margin[3],-Wr+wr+this.ctx.prevPageLastElemOffset),Ne.call(this,Ae,!0),this.path=on}if(je=JSON.parse(JSON.stringify(Ut)),this.path=ne(je,this.posX+this.margin[3],-Wr+wr+this.ctx.prevPageLastElemOffset),Ie===!1||ar===0){var pn=(ar>jt||ar<er)&&V.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],or,Hr,null).clip().discardPath()),Ne.call(this,Ae,Ie),pn&&this.pdf.restoreGraphicsState()}this.lineWidth=Bt}else this.lineWidth=tr,Ne.call(this,Ae,Ie),this.lineWidth=Bt;this.path=Ut},Ne=function(Ae,Ie){if((Ae!=="stroke"||Ie||!z.call(this))&&(Ae==="stroke"||Ie||!E.call(this))){for(var Me,je,nt=[],ut=this.path,xt=0;xt<ut.length;xt++){var Bt=ut[xt];switch(Bt.type){case"begin":nt.push({begin:!0});break;case"close":nt.push({close:!0});break;case"mt":nt.push({start:Bt,deltas:[],abs:[]});break;case"lt":var tr=nt.length;if(ut[xt-1]&&!isNaN(ut[xt-1].x)&&(Me=[Bt.x-ut[xt-1].x,Bt.y-ut[xt-1].y],tr>0)){for(;tr>=0;tr--)if(nt[tr-1].close!==!0&&nt[tr-1].begin!==!0){nt[tr-1].deltas.push(Me),nt[tr-1].abs.push(Bt);break}}break;case"bct":Me=[Bt.x1-ut[xt-1].x,Bt.y1-ut[xt-1].y,Bt.x2-ut[xt-1].x,Bt.y2-ut[xt-1].y,Bt.x-ut[xt-1].x,Bt.y-ut[xt-1].y],nt[nt.length-1].deltas.push(Me);break;case"qct":var ot=ut[xt-1].x+2/3*(Bt.x1-ut[xt-1].x),Ut=ut[xt-1].y+2/3*(Bt.y1-ut[xt-1].y),Ot=Bt.x+2/3*(Bt.x1-Bt.x),Xt=Bt.y+2/3*(Bt.y1-Bt.y),Ft=Bt.x,Ue=Bt.y;Me=[ot-ut[xt-1].x,Ut-ut[xt-1].y,Ot-ut[xt-1].x,Xt-ut[xt-1].y,Ft-ut[xt-1].x,Ue-ut[xt-1].y],nt[nt.length-1].deltas.push(Me);break;case"arc":nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(nt[nt.length-1].abs)&&nt[nt.length-1].abs.push(Bt)}}je=Ie?null:Ae==="stroke"?"stroke":"fill";for(var sr=!1,fr=0;fr<nt.length;fr++)if(nt[fr].arc)for(var jt=nt[fr].abs,er=0;er<jt.length;er++){var ar=jt[er];ar.type==="arc"?me.call(this,ar.x,ar.y,ar.radius,ar.startAngle,ar.endAngle,ar.counterclockwise,void 0,Ie,!sr):Fe.call(this,ar.x,ar.y),sr=!0}else if(nt[fr].close===!0)this.pdf.internal.out("h"),sr=!1;else if(nt[fr].begin!==!0){var or=nt[fr].start.x,wr=nt[fr].start.y;Se.call(this,nt[fr].deltas,or,wr),sr=!0}je&&Qe.call(this,je),Ie&&tt.call(this)}},Oe=function(Ae){var Ie=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Me=Ie*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ae-Me;case"top":return Ae+Ie-Me;case"hanging":return Ae+Ie-2*Me;case"middle":return Ae+Ie/2-Me;case"ideographic":return Ae;case"alphabetic":default:return Ae}},ve=function(Ae){return Ae+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};M.prototype.createLinearGradient=function(){var Ae=function(){};return Ae.colorStops=[],Ae.addColorStop=function(Ie,Me){this.colorStops.push([Ie,Me])},Ae.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ae.isCanvasGradient=!0,Ae},M.prototype.createPattern=function(){return this.createLinearGradient()},M.prototype.createRadialGradient=function(){return this.createLinearGradient()};var me=function(Ae,Ie,Me,je,nt,ut,xt,Bt,tr){for(var ot=lt.call(this,Me,je,nt,ut),Ut=0;Ut<ot.length;Ut++){var Ot=ot[Ut];Ut===0&&(tr?se.call(this,Ot.x1+Ae,Ot.y1+Ie):Fe.call(this,Ot.x1+Ae,Ot.y1+Ie)),yt.call(this,Ae,Ie,Ot.x2,Ot.y2,Ot.x3,Ot.y3,Ot.x4,Ot.y4)}Bt?tt.call(this):Qe.call(this,xt)},Qe=function(Ae){switch(Ae){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},tt=function(){this.pdf.clip(),this.pdf.discardPath()},se=function(Ae,Ie){this.pdf.internal.out(i(Ae)+" "+o(Ie)+" m")},ue=function(Ae){var Ie;switch(Ae.align){case"right":case"end":Ie="right";break;case"center":Ie="center";break;case"left":case"start":default:Ie="left"}var Me=this.pdf.getTextDimensions(Ae.text),je=Oe.call(this,Ae.y),nt=ve.call(this,je)-Me.h,ut=this.ctx.transform.applyToPoint(new f(Ae.x,je)),xt=this.ctx.transform.decompose(),Bt=new v;Bt=(Bt=(Bt=Bt.multiply(xt.translate)).multiply(xt.skew)).multiply(xt.scale);for(var tr,ot,Ut,Ot=this.ctx.transform.applyToRectangle(new s(Ae.x,je,Me.w,Me.h)),Xt=Bt.applyToRectangle(new s(Ae.x,nt,Me.w,Me.h)),Ft=ee.call(this,Xt),Ue=[],sr=0;sr<Ft.length;sr+=1)Ue.indexOf(Ft[sr])===-1&&Ue.push(Ft[sr]);if(Be(Ue),this.autoPaging)for(var fr=Ue[0],jt=Ue[Ue.length-1],er=fr;er<jt+1;er++){this.pdf.setPage(er);var ar=er===1?this.posY+this.margin[0]:this.margin[0],or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wr=this.pdf.internal.pageSize.height-this.margin[2],kr=wr-this.margin[0],Hr=this.pdf.internal.pageSize.width-this.margin[1],Wr=Hr-this.margin[3],on=er===1?0:or+(er-2)*kr;if(this.ctx.clip_path.length!==0){var pn=this.path;tr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(tr,this.posX+this.margin[3],-1*on+ar),Ne.call(this,"fill",!0),this.path=pn}var Pr=ne([JSON.parse(JSON.stringify(Xt))],this.posX+this.margin[3],-on+ar+this.ctx.prevPageLastElemOffset)[0];Ae.scale>=.01&&(ot=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ot*Ae.scale),Ut=this.lineWidth,this.lineWidth=Ut*Ae.scale);var Zr=this.autoPaging!=="text";if(Zr||Pr.y+Pr.h<=wr){if(Zr||Pr.y>=ar&&Pr.x<=Hr){var ur=Zr?Ae.text:this.pdf.splitTextToSize(Ae.text,Ae.maxWidth||Hr-Pr.x)[0],Dn=ne([JSON.parse(JSON.stringify(Ot))],this.posX+this.margin[3],-on+ar+this.ctx.prevPageLastElemOffset)[0],Vr=Zr&&(er>fr||er<jt)&&V.call(this);Vr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wr,kr,null).clip().discardPath()),this.pdf.text(ur,Dn.x,Dn.y,{angle:Ae.angle,align:Ie,renderingMode:Ae.renderingMode}),Vr&&this.pdf.restoreGraphicsState()}}else Pr.y<wr&&(this.ctx.prevPageLastElemOffset+=wr-Pr.y);Ae.scale>=.01&&(this.pdf.setFontSize(ot),this.lineWidth=Ut)}else Ae.scale>=.01&&(ot=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ot*Ae.scale),Ut=this.lineWidth,this.lineWidth=Ut*Ae.scale),this.pdf.text(Ae.text,ut.x+this.posX,ut.y+this.posY,{angle:Ae.angle,align:Ie,renderingMode:Ae.renderingMode,maxWidth:Ae.maxWidth}),Ae.scale>=.01&&(this.pdf.setFontSize(ot),this.lineWidth=Ut)},Fe=function(Ae,Ie,Me,je){Me=Me||0,je=je||0,this.pdf.internal.out(i(Ae+Me)+" "+o(Ie+je)+" l")},Se=function(Ae,Ie,Me){return this.pdf.lines(Ae,Ie,Me,null,null)},yt=function(Ae,Ie,Me,je,nt,ut,xt,Bt){this.pdf.internal.out([e(c(Me+Ae)),e(d(je+Ie)),e(c(nt+Ae)),e(d(ut+Ie)),e(c(xt+Ae)),e(d(Bt+Ie)),"c"].join(" "))},lt=function(Ae,Ie,Me,je){for(var nt=2*Math.PI,ut=Math.PI/2;Ie>Me;)Ie-=nt;var xt=Math.abs(Me-Ie);xt<nt&&je&&(xt=nt-xt);for(var Bt=[],tr=je?-1:1,ot=Ie;xt>1e-5;){var Ut=ot+tr*Math.min(xt,ut);Bt.push(mt.call(this,Ae,ot,Ut)),xt-=Math.abs(Ut-ot),ot=Ut}return Bt},mt=function(Ae,Ie,Me){var je=(Me-Ie)/2,nt=Ae*Math.cos(je),ut=Ae*Math.sin(je),xt=nt,Bt=-ut,tr=xt*xt+Bt*Bt,ot=tr+xt*nt+Bt*ut,Ut=4/3*(Math.sqrt(2*tr*ot)-ot)/(xt*ut-Bt*nt),Ot=xt-Ut*Bt,Xt=Bt+Ut*xt,Ft=Ot,Ue=-Xt,sr=je+Ie,fr=Math.cos(sr),jt=Math.sin(sr);return{x1:Ae*Math.cos(Ie),y1:Ae*Math.sin(Ie),x2:Ot*fr-Xt*jt,y2:Ot*jt+Xt*fr,x3:Ft*fr-Ue*jt,y3:Ft*jt+Ue*fr,x4:Ae*Math.cos(Me),y4:Ae*Math.sin(Me)}},Ye=function(Ae){return 180*Ae/Math.PI},gt=function(Ae,Ie,Me,je,nt,ut){var xt=Ae+.5*(Me-Ae),Bt=Ie+.5*(je-Ie),tr=nt+.5*(Me-nt),ot=ut+.5*(je-ut),Ut=Math.min(Ae,nt,xt,tr),Ot=Math.max(Ae,nt,xt,tr),Xt=Math.min(Ie,ut,Bt,ot),Ft=Math.max(Ie,ut,Bt,ot);return new s(Ut,Xt,Ot-Ut,Ft-Xt)},Ct=function(Ae,Ie,Me,je,nt,ut,xt,Bt){var tr,ot,Ut,Ot,Xt,Ft,Ue,sr,fr,jt,er,ar,or,wr,kr=Me-Ae,Hr=je-Ie,Wr=nt-Me,on=ut-je,pn=xt-nt,Pr=Bt-ut;for(ot=0;ot<41;ot++)fr=(Ue=(Ut=Ae+(tr=ot/40)*kr)+tr*((Xt=Me+tr*Wr)-Ut))+tr*(Xt+tr*(nt+tr*pn-Xt)-Ue),jt=(sr=(Ot=Ie+tr*Hr)+tr*((Ft=je+tr*on)-Ot))+tr*(Ft+tr*(ut+tr*Pr-Ft)-sr),ot==0?(er=fr,ar=jt,or=fr,wr=jt):(er=Math.min(er,fr),ar=Math.min(ar,jt),or=Math.max(or,fr),wr=Math.max(wr,jt));return new s(Math.round(er),Math.round(ar),Math.round(or-er),Math.round(wr-ar))},nr=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ae,Ie,Me=(Ae=this.ctx.lineDash,Ie=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ae,lineDashOffset:Ie}));this.prevLineDash!==Me&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Me)}}})(Kr.API),function(n){var e=function(d){var f,s,v,C,P,M,Q,E,z,V;for(s=[],v=0,C=(d+=f="\0\0\0\0".slice(d.length%4||4)).length;C>v;v+=4)(P=(d.charCodeAt(v)<<24)+(d.charCodeAt(v+1)<<16)+(d.charCodeAt(v+2)<<8)+d.charCodeAt(v+3))!==0?(M=(P=((P=((P=((P=(P-(V=P%85))/85)-(z=P%85))/85)-(E=P%85))/85)-(Q=P%85))/85)%85,s.push(M+33,Q+33,E+33,z+33,V+33)):s.push(122);return function(ee,Z){for(var ne=Z;ne>0;ne--)ee.pop()}(s,f.length),String.fromCharCode.apply(String,s)+"~>"},i=function(d){var f,s,v,C,P,M=String,Q="length",E=255,z="charCodeAt",V="slice",ee="replace";for(d[V](-2),d=d[V](0,-2)[ee](/\s/g,"")[ee]("z","!!!!!"),v=[],C=0,P=(d+=f="uuuuu"[V](d[Q]%5||5))[Q];P>C;C+=5)s=52200625*(d[z](C)-33)+614125*(d[z](C+1)-33)+7225*(d[z](C+2)-33)+85*(d[z](C+3)-33)+(d[z](C+4)-33),v.push(E&s>>24,E&s>>16,E&s>>8,E&s);return function(Z,ne){for(var Be=ne;Be>0;Be--)Z.pop()}(v,f[Q]),M.fromCharCode.apply(M,v)},o=function(d){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),f.test(d)===!1)return"";for(var s="",v=0;v<d.length;v+=2)s+=String.fromCharCode("0x"+(d[v]+d[v+1]));return s},c=function(d){for(var f=new Uint8Array(d.length),s=d.length;s--;)f[s]=d.charCodeAt(s);return d=(f=Vm(f)).reduce(function(v,C){return v+String.fromCharCode(C)},"")};n.processDataByFilters=function(d,f){var s=0,v=d||"",C=[];for(typeof(f=f||[])=="string"&&(f=[f]),s=0;s<f.length;s+=1)switch(f[s]){case"ASCII85Decode":case"/ASCII85Decode":v=i(v),C.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=e(v),C.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=o(v),C.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=v.split("").map(function(P){return("0"+P.charCodeAt().toString(16)).slice(-2)}).join("")+">",C.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=c(v),C.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[s]+'" is not implemented')}return{data:v,reverseChain:C.reverse().join(" ")}}}(Kr.API),function(n){n.loadFile=function(e,i,o){return function(c,d,f){d=d!==!1,f=typeof f=="function"?f:function(){};var s=void 0;try{s=function(v,C,P){var M=new XMLHttpRequest,Q=0,E=function(z){var V=z.length,ee=[],Z=String.fromCharCode;for(Q=0;Q<V;Q+=1)ee.push(Z(255&z.charCodeAt(Q)));return ee.join("")};if(M.open("GET",v,!C),M.overrideMimeType("text/plain; charset=x-user-defined"),C===!1&&(M.onload=function(){M.status===200?P(E(this.responseText)):P(void 0)}),M.send(null),C&&M.status===200)return E(M.responseText)}(c,d,f)}catch{}return s}(e,i,o)},n.loadImageFile=n.loadFile}(Kr.API),function(n){function e(){return(qr.html2canvas?Promise.resolve(qr.html2canvas):Nm(()=>Promise.resolve().then(()=>yP),void 0,import.meta.url)).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function i(){return(qr.DOMPurify?Promise.resolve(qr.DOMPurify):Nm(()=>import("./Bf0oSh3b.js"),[],import.meta.url)).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var o=function(f){var s=Zn(f);return s==="undefined"?"undefined":s==="string"||f instanceof String?"string":s==="number"||f instanceof Number?"number":s==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":s==="object"?"object":"unknown"},c=function(f,s){var v=document.createElement(f);for(var C in s.className&&(v.className=s.className),s.innerHTML&&s.dompurify&&(v.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)v.style[C]=s.style[C];return v},d=function f(s){var v=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),C=f.convert(Promise.resolve(),v);return C=(C=C.setProgress(1,f,1,[f])).set(s)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(f,s){return f.__proto__=s||d.prototype,f},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(f,s){return this.then(function(){switch(s=s||function(v){switch(o(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(f)){case"string":return this.then(i).then(function(v){return this.set({src:c("div",{innerHTML:f,dompurify:v})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},d.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function v(C,P){for(var M=C.nodeType===3?document.createTextNode(C.nodeValue):C.cloneNode(!1),Q=C.firstChild;Q;Q=Q.nextSibling)P!==!0&&Q.nodeType===1&&Q.nodeName==="SCRIPT"||M.appendChild(v(Q,P));return C.nodeType===1&&(C.nodeName==="CANVAS"?(M.width=C.width,M.height=C.height,M.getContext("2d").drawImage(C,0,0)):C.nodeName!=="TEXTAREA"&&C.nodeName!=="SELECT"||(M.value=C.value),M.addEventListener("load",function(){M.scrollTop=C.scrollTop,M.scrollLeft=C.scrollLeft},!0)),M}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=c("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=c("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(c("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(e).then(function(s){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,s(this.prop.container,v)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(e).then(function(s){var v=this.opt.jsPDF,C=this.opt.fontFaces,P=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,M=Object.assign({async:!0,allowTaint:!0,scale:P,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete M.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=C,C)for(var Q=0;Q<C.length;++Q){var E=C[Q],z=E.src.find(function(V){return V.format==="truetype"});z&&v.addFont(z.url,E.ref.name,E.ref.style)}return M.windowHeight=M.windowHeight||0,M.windowHeight=M.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):M.windowHeight,v.context2d.save(!0),s(this.prop.container,M)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(f,s,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(f,s):this.outputPdf(f,s)},d.prototype.outputPdf=function(f,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,s)})},d.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},d.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(f){if(o(f)!=="object")return this;var s=Object.keys(f||{}).map(function(v){if(v in d.template.prop)return function(){this.prop[v]=f[v]};switch(v){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[v]=f[v]}}},this);return this.then(function(){return this.thenList(s)})},d.prototype.get=function(f,s){return this.then(function(){var v=f in d.template.prop?this.prop[f]:this.opt[f];return s?s(v):v})},d.prototype.setMargin=function(f){return this.then(function(){switch(o(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},d.prototype.setPageSize=function(f){function s(v,C){return Math.floor(v*C/72*96)}return this.then(function(){(f=f||Kr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:s(f.inner.width,f.k),height:s(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},d.prototype.setProgress=function(f,s,v,C){return f!=null&&(this.progress.val=f),s!=null&&(this.progress.state=s),v!=null&&(this.progress.n=v),C!=null&&(this.progress.stack=C),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(f,s,v,C){return this.setProgress(f?this.progress.val+f:null,s||null,v?this.progress.n+v:null,C?this.progress.stack.concat(C):null)},d.prototype.then=function(f,s){var v=this;return this.thenCore(f,s,function(C,P){return v.updateProgress(null,null,1,[C]),Promise.prototype.then.call(this,function(M){return v.updateProgress(null,C),M}).then(C,P).then(function(M){return v.updateProgress(1),M})})},d.prototype.thenCore=function(f,s,v){v=v||Promise.prototype.then,f&&(f=f.bind(this)),s&&(s=s.bind(this));var C=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:d.convert(Object.assign({},this),Promise.prototype),P=v.call(C,f,s);return d.convert(P,this.__proto__)},d.prototype.thenExternal=function(f,s){return Promise.prototype.then.call(this,f,s)},d.prototype.thenList=function(f){var s=this;return f.forEach(function(v){s=s.thenCore(v)}),s},d.prototype.catch=function(f){f&&(f=f.bind(this));var s=Promise.prototype.catch.call(this,f);return d.convert(s,this)},d.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},d.prototype.error=function(f){return this.then(function(){throw new Error(f)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,Kr.getPageSize=function(f,s,v){if(Zn(f)==="object"){var C=f;f=C.orientation,s=C.unit||s,v=C.format||v}s=s||"mm",v=v||"a4",f=(""+(f||"P")).toLowerCase();var P,M=(""+v).toLowerCase(),Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":P=1;break;case"mm":P=72/25.4;break;case"cm":P=72/2.54;break;case"in":P=72;break;case"px":P=.75;break;case"pc":case"em":P=12;break;case"ex":P=6;break;default:throw"Invalid unit: "+s}var E,z=0,V=0;if(Q.hasOwnProperty(M))z=Q[M][1]/P,V=Q[M][0]/P;else try{z=v[1],V=v[0]}catch{throw new Error("Invalid format: "+v)}if(f==="p"||f==="portrait")f="p",V>z&&(E=V,V=z,z=E);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",z>V&&(E=V,V=z,z=E)}return{width:V,height:z,unit:s,k:P,orientation:f}},n.html=function(f,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(U0):null;var v=new d(s);return s.worker?v:v.from(f).doCallback()}}(Kr.API),Kr.API.addJS=function(n){return o2=n,this.internal.events.subscribe("postPutResources",function(){Kd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Kd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),s2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+o2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Kd!==void 0&&s2!==void 0&&this.internal.out("/Names <</JavaScript "+Kd+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var i=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var c=i.outline.render().split(/\r\n/),d=0;d<c.length;d++){var f=c[d],s=o.exec(f);if(s!=null){var v=s[1];i.internal.newObjectDeferredBegin(v,!1)}i.internal.write(f)}if(this.outline.createNamedDestinations){var C=this.internal.pages.length,P=[];for(d=0;d<C;d++){var M=i.internal.newObject();P.push(M);var Q=i.internal.getPageInfo(d+1);i.internal.write("<< /D["+Q.objId+" 0 R /XYZ null null null]>> endobj")}var E=i.internal.newObject();for(i.internal.write("<< /Names [ "),d=0;d<P.length;d++)i.internal.write("(page_"+(d+1)+")"+P[d]+" 0 R");i.internal.write(" ] >>","endobj"),e=i.internal.newObject(),i.internal.write("<< /Dests "+E+" 0 R"),i.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(o,c,d){var f={title:c,options:d,children:[]};return o==null&&(o=this.root),o.children.push(f),f},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(o){o.id=i.internal.newObjectDeferred();for(var c=0;c<o.children.length;c++)this.genIds_r(o.children[c])},i.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},i.outline.renderItems=function(o){for(var c=this.ctx.pdf.internal.getVerticalCoordinateString,d=0;d<o.children.length;d++){var f=o.children[d];this.objStart(f),this.line("/Title "+this.makeString(f.title)),this.line("/Parent "+this.makeRef(o)),d>0&&this.line("/Prev "+this.makeRef(o.children[d-1])),d<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[d+1])),f.children.length>0&&(this.line("/First "+this.makeRef(f.children[0])),this.line("/Last "+this.makeRef(f.children[f.children.length-1])));var s=this.count=this.count_r({count:0},f);if(s>0&&this.line("/Count "+s),f.options&&f.options.pageNumber){var v=i.internal.getPageInfo(f.options.pageNumber);this.line("/Dest ["+v.objId+" 0 R /XYZ 0 "+c(0)+" 0]")}this.objEnd()}for(var C=0;C<o.children.length;C++)this.renderItems(o.children[C])},i.outline.line=function(o){this.ctx.val+=o+`\r
`},i.outline.makeRef=function(o){return o.id+" 0 R"},i.outline.makeString=function(o){return"("+i.internal.pdfEscape(o)+")"},i.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(o,c){for(var d=0;d<c.children.length;d++)o.count++,this.count_r(o,c.children[d]);return o.count}}])}(Kr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(i,o,c,d,f,s){var v,C=this.decode.DCT_DECODE,P=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=f||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(v=function(M){for(var Q,E=256*M.charCodeAt(4)+M.charCodeAt(5),z=M.length,V={width:0,height:0,numcomponents:1},ee=4;ee<z;ee+=2){if(ee+=E,e.indexOf(M.charCodeAt(ee+1))!==-1){Q=256*M.charCodeAt(ee+5)+M.charCodeAt(ee+6),V={width:256*M.charCodeAt(ee+7)+M.charCodeAt(ee+8),height:Q,numcomponents:M.charCodeAt(ee+9)};break}E=256*M.charCodeAt(ee+2)+M.charCodeAt(ee+3)}return V}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}P={data:i,width:v.width,height:v.height,colorSpace:s,bitsPerComponent:8,filter:C,index:o,alias:c}}return P}}(Kr.API);var rh,qd,A2,l2,c2,RP=function(){var n,e,i;function o(d){var f,s,v,C,P,M,Q,E,z,V,ee,Z,ne,Be;for(this.data=d,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},M=null;;){switch(f=this.readUInt32(),z=(function(){var ze,Ne;for(Ne=[],ze=0;ze<4;++ze)Ne.push(String.fromCharCode(this.data[this.pos++]));return Ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(f);break;case"fcTL":M&&this.animation.frames.push(M),this.pos+=4,M={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},P=this.readUInt16(),C=this.readUInt16()||100,M.delay=1e3*P/C,M.disposeOp=this.data[this.pos++],M.blendOp=this.data[this.pos++],M.data=[];break;case"IDAT":case"fdAT":for(z==="fdAT"&&(this.pos+=4,f-=4),d=(M!=null?M.data:void 0)||this.imgData,Z=0;0<=f?Z<f:Z>f;0<=f?++Z:--Z)d.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(v=this.palette.length/3,this.transparency.indexed=this.read(f),this.transparency.indexed.length>v)throw new Error("More transparent colors than palette size");if((V=v-this.transparency.indexed.length)>0)for(ne=0;0<=V?ne<V:ne>V;0<=V?++ne:--ne)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case"tEXt":Q=(ee=this.read(f)).indexOf(0),E=String.fromCharCode.apply(String,ee.slice(0,Q)),this.text[E]=String.fromCharCode.apply(String,ee.slice(Q+1));break;case"IEND":return M&&this.animation.frames.push(M),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Be=this.colorType)===4||Be===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=f}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(d){var f,s;for(s=[],f=0;0<=d?f<d:f>d;0<=d?++f:--f)s.push(this.data[this.pos++]);return s},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(d){var f=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*f),v=0,C=this;if(d==null&&(d=this.imgData),d.length===0)return new Uint8Array(0);function P(M,Q,E,z){var V,ee,Z,ne,Be,ze,Ne,Oe,ve,me,Qe,tt,se,ue,Fe,Se,yt,lt,mt,Ye,gt,Ct=Math.ceil((C.width-M)/E),nr=Math.ceil((C.height-Q)/z),Ae=C.width==Ct&&C.height==nr;for(ue=f*Ct,tt=Ae?s:new Uint8Array(ue*nr),ze=d.length,se=0,ee=0;se<nr&&v<ze;){switch(d[v++]){case 0:for(ne=yt=0;yt<ue;ne=yt+=1)tt[ee++]=d[v++];break;case 1:for(ne=lt=0;lt<ue;ne=lt+=1)V=d[v++],Be=ne<f?0:tt[ee-f],tt[ee++]=(V+Be)%256;break;case 2:for(ne=mt=0;mt<ue;ne=mt+=1)V=d[v++],Z=(ne-ne%f)/f,Fe=se&&tt[(se-1)*ue+Z*f+ne%f],tt[ee++]=(Fe+V)%256;break;case 3:for(ne=Ye=0;Ye<ue;ne=Ye+=1)V=d[v++],Z=(ne-ne%f)/f,Be=ne<f?0:tt[ee-f],Fe=se&&tt[(se-1)*ue+Z*f+ne%f],tt[ee++]=(V+Math.floor((Be+Fe)/2))%256;break;case 4:for(ne=gt=0;gt<ue;ne=gt+=1)V=d[v++],Z=(ne-ne%f)/f,Be=ne<f?0:tt[ee-f],se===0?Fe=Se=0:(Fe=tt[(se-1)*ue+Z*f+ne%f],Se=Z&&tt[(se-1)*ue+(Z-1)*f+ne%f]),Ne=Be+Fe-Se,Oe=Math.abs(Ne-Be),me=Math.abs(Ne-Fe),Qe=Math.abs(Ne-Se),ve=Oe<=me&&Oe<=Qe?Be:me<=Qe?Fe:Se,tt[ee++]=(V+ve)%256;break;default:throw new Error("Invalid filter algorithm: "+d[v-1])}if(!Ae){var Ie=((Q+se*z)*C.width+M)*f,Me=se*ue;for(ne=0;ne<Ct;ne+=1){for(var je=0;je<f;je+=1)s[Ie++]=tt[Me++];Ie+=(E-1)*f}}se++}}return d=M2(d),C.interlaceMethod==1?(P(0,0,8,8),P(4,0,8,8),P(0,4,4,8),P(2,0,4,4),P(0,2,2,4),P(1,0,2,2),P(0,1,1,2)):P(0,0,1,1),s},o.prototype.decodePalette=function(){var d,f,s,v,C,P,M,Q,E;for(s=this.palette,P=this.transparency.indexed||[],C=new Uint8Array((P.length||0)+s.length),v=0,d=0,f=M=0,Q=s.length;M<Q;f=M+=3)C[v++]=s[f],C[v++]=s[f+1],C[v++]=s[f+2],C[v++]=(E=P[d++])!=null?E:255;return C},o.prototype.copyToImageData=function(d,f){var s,v,C,P,M,Q,E,z,V,ee,Z;if(v=this.colors,V=null,s=this.hasAlphaChannel,this.palette.length&&(V=(Z=this._decodedPalette)!=null?Z:this._decodedPalette=this.decodePalette(),v=4,s=!0),z=(C=d.data||d).length,M=V||f,P=Q=0,v===1)for(;P<z;)E=V?4*f[P/4]:Q,ee=M[E++],C[P++]=ee,C[P++]=ee,C[P++]=ee,C[P++]=s?M[E++]:255,Q=E;else for(;P<z;)E=V?4*f[P/4]:Q,C[P++]=M[E++],C[P++]=M[E++],C[P++]=M[E++],C[P++]=s?M[E++]:255,Q=E},o.prototype.decode=function(){var d;return d=new Uint8Array(this.width*this.height*4),this.copyToImageData(d,this.decodePixels()),d};var c=function(){if(Object.prototype.toString.call(qr)==="[object Window]"){try{e=qr.document.createElement("canvas"),i=e.getContext("2d")}catch{return!1}return!0}return!1};return c(),n=function(d){var f;if(c()===!0)return i.width=d.width,i.height=d.height,i.clearRect(0,0,d.width,d.height),i.putImageData(d,0,0),(f=new Image).src=e.toDataURL(),f;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(d){var f,s,v,C,P,M,Q,E;if(this.animation){for(E=[],s=P=0,M=(Q=this.animation.frames).length;P<M;s=++P)f=Q[s],v=d.createImageData(f.width,f.height),C=this.decodePixels(new Uint8Array(f.data)),this.copyToImageData(v,C),f.imageData=v,E.push(f.image=n(v));return E}},o.prototype.renderFrame=function(d,f){var s,v,C;return s=(v=this.animation.frames)[f],C=v[f-1],f===0&&d.clearRect(0,0,this.width,this.height),(C!=null?C.disposeOp:void 0)===1?d.clearRect(C.xOffset,C.yOffset,C.width,C.height):(C!=null?C.disposeOp:void 0)===2&&d.putImageData(C.imageData,C.xOffset,C.yOffset),s.blendOp===0&&d.clearRect(s.xOffset,s.yOffset,s.width,s.height),d.drawImage(s.image,s.xOffset,s.yOffset)},o.prototype.animate=function(d){var f,s,v,C,P,M,Q=this;return s=0,M=this.animation,C=M.numFrames,v=M.frames,P=M.numPlays,(f=function(){var E,z;if(E=s++%C,z=v[E],Q.renderFrame(d,E),C>1&&s/C<P)return Q.animation._timeout=setTimeout(f,z.delay)})()},o.prototype.stopAnimation=function(){var d;return clearTimeout((d=this.animation)!=null?d._timeout:void 0)},o.prototype.render=function(d){var f,s;return d._png&&d._png.stopAnimation(),d._png=this,d.width=this.width,d.height=this.height,f=d.getContext("2d"),this.animation?(this.decodeFrames(f),this.animate(f)):(s=f.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),f.putImageData(s,0,0))},o}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function NP(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=n[e++]|n[e++]<<8,o=n[e++]|n[e++]<<8,c=n[e++],d=c>>7,f=1<<(7&c)+1;n[e++],n[e++];var s=null,v=null;d&&(s=e,v=f,e+=3*f);var C=!0,P=[],M=0,Q=null,E=0,z=null;for(this.width=i,this.height=o;C&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,z=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((se=n[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var V=n[e++];M=n[e++]|n[e++]<<8,Q=n[e++],!(1&V)&&(Q=null),E=V>>2&7,e++;break;case 254:for(;;){if(!((se=n[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var ee=n[e++]|n[e++]<<8,Z=n[e++]|n[e++]<<8,ne=n[e++]|n[e++]<<8,Be=n[e++]|n[e++]<<8,ze=n[e++],Ne=ze>>6&1,Oe=1<<(7&ze)+1,ve=s,me=v,Qe=!1;ze>>7&&(Qe=!0,ve=e,me=Oe,e+=3*Oe);var tt=e;for(e++;;){var se;if(!((se=n[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}P.push({x:ee,y:Z,width:ne,height:Be,has_local_palette:Qe,palette_offset:ve,palette_size:me,data_offset:tt,data_length:e-tt,transparent_index:Q,interlaced:!!Ne,delay:M,disposal:E});break;case 59:C=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return P.length},this.loopCount=function(){return z},this.frameInfo=function(ue){if(ue<0||ue>=P.length)throw new Error("Frame index out of range.");return P[ue]},this.decodeAndBlitFrameBGRA=function(ue,Fe){var Se=this.frameInfo(ue),yt=Se.width*Se.height,lt=new Uint8Array(yt);u2(n,Se.data_offset,lt,yt);var mt=Se.palette_offset,Ye=Se.transparent_index;Ye===null&&(Ye=256);var gt=Se.width,Ct=i-gt,nr=gt,Ae=4*(Se.y*i+Se.x),Ie=4*((Se.y+Se.height)*i+Se.x),Me=Ae,je=4*Ct;Se.interlaced===!0&&(je+=4*i*7);for(var nt=8,ut=0,xt=lt.length;ut<xt;++ut){var Bt=lt[ut];if(nr===0&&(nr=gt,(Me+=je)>=Ie&&(je=4*Ct+4*i*(nt-1),Me=Ae+(gt+Ct)*(nt<<1),nt>>=1)),Bt===Ye)Me+=4;else{var tr=n[mt+3*Bt],ot=n[mt+3*Bt+1],Ut=n[mt+3*Bt+2];Fe[Me++]=Ut,Fe[Me++]=ot,Fe[Me++]=tr,Fe[Me++]=255}--nr}},this.decodeAndBlitFrameRGBA=function(ue,Fe){var Se=this.frameInfo(ue),yt=Se.width*Se.height,lt=new Uint8Array(yt);u2(n,Se.data_offset,lt,yt);var mt=Se.palette_offset,Ye=Se.transparent_index;Ye===null&&(Ye=256);var gt=Se.width,Ct=i-gt,nr=gt,Ae=4*(Se.y*i+Se.x),Ie=4*((Se.y+Se.height)*i+Se.x),Me=Ae,je=4*Ct;Se.interlaced===!0&&(je+=4*i*7);for(var nt=8,ut=0,xt=lt.length;ut<xt;++ut){var Bt=lt[ut];if(nr===0&&(nr=gt,(Me+=je)>=Ie&&(je=4*Ct+4*i*(nt-1),Me=Ae+(gt+Ct)*(nt<<1),nt>>=1)),Bt===Ye)Me+=4;else{var tr=n[mt+3*Bt],ot=n[mt+3*Bt+1],Ut=n[mt+3*Bt+2];Fe[Me++]=tr,Fe[Me++]=ot,Fe[Me++]=Ut,Fe[Me++]=255}--nr}}}function u2(n,e,i,o){for(var c=n[e++],d=1<<c,f=d+1,s=f+1,v=c+1,C=(1<<v)-1,P=0,M=0,Q=0,E=n[e++],z=new Int32Array(4096),V=null;;){for(;P<16&&E!==0;)M|=n[e++]<<P,P+=8,E===1?E=n[e++]:--E;if(P<v)break;var ee=M&C;if(M>>=v,P-=v,ee!==d){if(ee===f)break;for(var Z=ee<s?ee:V,ne=0,Be=Z;Be>d;)Be=z[Be]>>8,++ne;var ze=Be;if(Q+ne+(Z!==ee?1:0)>o)return void oi.log("Warning, gif stream longer than expected.");i[Q++]=ze;var Ne=Q+=ne;for(Z!==ee&&(i[Q++]=ze),Be=Z;ne--;)Be=z[Be],i[--Ne]=255&Be,Be>>=8;V!==null&&s<4096&&(z[s++]=V<<8|ze,s>=C+1&&v<12&&(++v,C=C<<1|1)),V=ee}else s=f+1,C=(1<<(v=c+1))-1,V=null}return Q!==o&&oi.log("Warning, gif stream shorter than expected."),i}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qm(n){var e,i,o,c,d,f=Math.floor,s=new Array(64),v=new Array(64),C=new Array(64),P=new Array(64),M=new Array(65535),Q=new Array(65535),E=new Array(64),z=new Array(64),V=[],ee=0,Z=7,ne=new Array(64),Be=new Array(64),ze=new Array(64),Ne=new Array(256),Oe=new Array(2048),ve=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],me=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Qe=[0,1,2,3,4,5,6,7,8,9,10,11],tt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],se=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ue=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Fe=[0,1,2,3,4,5,6,7,8,9,10,11],Se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],yt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function lt(Ae,Ie){for(var Me=0,je=0,nt=new Array,ut=1;ut<=16;ut++){for(var xt=1;xt<=Ae[ut];xt++)nt[Ie[je]]=[],nt[Ie[je]][0]=Me,nt[Ie[je]][1]=ut,je++,Me++;Me*=2}return nt}function mt(Ae){for(var Ie=Ae[0],Me=Ae[1]-1;Me>=0;)Ie&1<<Me&&(ee|=1<<Z),Me--,--Z<0&&(ee==255?(Ye(255),Ye(0)):Ye(ee),Z=7,ee=0)}function Ye(Ae){V.push(Ae)}function gt(Ae){Ye(Ae>>8&255),Ye(255&Ae)}function Ct(Ae,Ie,Me,je,nt){for(var ut,xt=nt[0],Bt=nt[240],tr=function(jt,er){var ar,or,wr,kr,Hr,Wr,on,pn,Pr,Zr,ur=0;for(Pr=0;Pr<8;++Pr){ar=jt[ur],or=jt[ur+1],wr=jt[ur+2],kr=jt[ur+3],Hr=jt[ur+4],Wr=jt[ur+5],on=jt[ur+6];var Dn=ar+(pn=jt[ur+7]),Vr=ar-pn,bi=or+on,Xe=or-on,ae=wr+Wr,le=wr-Wr,fe=kr+Hr,Le=kr-Hr,He=Dn+fe,pe=Dn-fe,ht=bi+ae,Ke=bi-ae;jt[ur]=He+ht,jt[ur+4]=He-ht;var Ze=.707106781*(Ke+pe);jt[ur+2]=pe+Ze,jt[ur+6]=pe-Ze;var at=.382683433*((He=Le+le)-(Ke=Xe+Vr)),At=.5411961*He+at,Lt=1.306562965*Ke+at,$t=.707106781*(ht=le+Xe),Jt=Vr+$t,Vt=Vr-$t;jt[ur+5]=Vt+At,jt[ur+3]=Vt-At,jt[ur+1]=Jt+Lt,jt[ur+7]=Jt-Lt,ur+=8}for(ur=0,Pr=0;Pr<8;++Pr){ar=jt[ur],or=jt[ur+8],wr=jt[ur+16],kr=jt[ur+24],Hr=jt[ur+32],Wr=jt[ur+40],on=jt[ur+48];var Sr=ar+(pn=jt[ur+56]),xr=ar-pn,_t=or+on,Nr=or-on,Fr=wr+Wr,jr=wr-Wr,Cr=kr+Hr,kt=kr-Hr,yr=Sr+Cr,Tr=Sr-Cr,yn=_t+Fr,vn=_t-Fr;jt[ur]=yr+yn,jt[ur+32]=yr-yn;var Hn=.707106781*(vn+Tr);jt[ur+16]=Tr+Hn,jt[ur+48]=Tr-Hn;var Ur=.382683433*((yr=kt+jr)-(vn=Nr+xr)),as=.5411961*yr+Ur,Vs=1.306562965*vn+Ur,ss=.707106781*(yn=jr+Nr),Gs=xr+ss,Pa=xr-ss;jt[ur+40]=Pa+as,jt[ur+24]=Pa-as,jt[ur+8]=Gs+Vs,jt[ur+56]=Gs-Vs,ur++}for(Pr=0;Pr<64;++Pr)Zr=jt[Pr]*er[Pr],E[Pr]=Zr>0?Zr+.5|0:Zr-.5|0;return E}(Ae,Ie),ot=0;ot<64;++ot)z[ve[ot]]=tr[ot];var Ut=z[0]-Me;Me=z[0],Ut==0?mt(je[0]):(mt(je[Q[ut=32767+Ut]]),mt(M[ut]));for(var Ot=63;Ot>0&&z[Ot]==0;)Ot--;if(Ot==0)return mt(xt),Me;for(var Xt,Ft=1;Ft<=Ot;){for(var Ue=Ft;z[Ft]==0&&Ft<=Ot;)++Ft;var sr=Ft-Ue;if(sr>=16){Xt=sr>>4;for(var fr=1;fr<=Xt;++fr)mt(Bt);sr&=15}ut=32767+z[Ft],mt(nt[(sr<<4)+Q[ut]]),mt(M[ut]),Ft++}return Ot!=63&&mt(xt),Me}function nr(Ae){Ae=Math.min(Math.max(Ae,1),100),d!=Ae&&(function(Ie){for(var Me=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],je=0;je<64;je++){var nt=f((Me[je]*Ie+50)/100);nt=Math.min(Math.max(nt,1),255),s[ve[je]]=nt}for(var ut=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xt=0;xt<64;xt++){var Bt=f((ut[xt]*Ie+50)/100);Bt=Math.min(Math.max(Bt,1),255),v[ve[xt]]=Bt}for(var tr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ot=0,Ut=0;Ut<8;Ut++)for(var Ot=0;Ot<8;Ot++)C[ot]=1/(s[ve[ot]]*tr[Ut]*tr[Ot]*8),P[ot]=1/(v[ve[ot]]*tr[Ut]*tr[Ot]*8),ot++}(Ae<50?Math.floor(5e3/Ae):Math.floor(200-2*Ae)),d=Ae)}this.encode=function(Ae,Ie){Ie&&nr(Ie),V=new Array,ee=0,Z=7,gt(65496),gt(65504),gt(16),Ye(74),Ye(70),Ye(73),Ye(70),Ye(0),Ye(1),Ye(1),Ye(0),gt(1),gt(1),Ye(0),Ye(0),function(){gt(65499),gt(132),Ye(0);for(var or=0;or<64;or++)Ye(s[or]);Ye(1);for(var wr=0;wr<64;wr++)Ye(v[wr])}(),function(or,wr){gt(65472),gt(17),Ye(8),gt(wr),gt(or),Ye(3),Ye(1),Ye(17),Ye(0),Ye(2),Ye(17),Ye(1),Ye(3),Ye(17),Ye(1)}(Ae.width,Ae.height),function(){gt(65476),gt(418),Ye(0);for(var or=0;or<16;or++)Ye(me[or+1]);for(var wr=0;wr<=11;wr++)Ye(Qe[wr]);Ye(16);for(var kr=0;kr<16;kr++)Ye(tt[kr+1]);for(var Hr=0;Hr<=161;Hr++)Ye(se[Hr]);Ye(1);for(var Wr=0;Wr<16;Wr++)Ye(ue[Wr+1]);for(var on=0;on<=11;on++)Ye(Fe[on]);Ye(17);for(var pn=0;pn<16;pn++)Ye(Se[pn+1]);for(var Pr=0;Pr<=161;Pr++)Ye(yt[Pr])}(),gt(65498),gt(12),Ye(3),Ye(1),Ye(0),Ye(2),Ye(17),Ye(3),Ye(17),Ye(0),Ye(63),Ye(0);var Me=0,je=0,nt=0;ee=0,Z=7,this.encode.displayName="_encode_";for(var ut,xt,Bt,tr,ot,Ut,Ot,Xt,Ft,Ue=Ae.data,sr=Ae.width,fr=Ae.height,jt=4*sr,er=0;er<fr;){for(ut=0;ut<jt;){for(ot=jt*er+ut,Ot=-1,Xt=0,Ft=0;Ft<64;Ft++)Ut=ot+(Xt=Ft>>3)*jt+(Ot=4*(7&Ft)),er+Xt>=fr&&(Ut-=jt*(er+1+Xt-fr)),ut+Ot>=jt&&(Ut-=ut+Ot-jt+4),xt=Ue[Ut++],Bt=Ue[Ut++],tr=Ue[Ut++],ne[Ft]=(Oe[xt]+Oe[Bt+256>>0]+Oe[tr+512>>0]>>16)-128,Be[Ft]=(Oe[xt+768>>0]+Oe[Bt+1024>>0]+Oe[tr+1280>>0]>>16)-128,ze[Ft]=(Oe[xt+1280>>0]+Oe[Bt+1536>>0]+Oe[tr+1792>>0]>>16)-128;Me=Ct(ne,C,Me,e,o),je=Ct(Be,P,je,i,c),nt=Ct(ze,P,nt,i,c),ut+=32}er+=8}if(Z>=0){var ar=[];ar[1]=Z+1,ar[0]=(1<<Z+1)-1,mt(ar)}return gt(65497),new Uint8Array(V)},n=n||50,function(){for(var Ae=String.fromCharCode,Ie=0;Ie<256;Ie++)Ne[Ie]=Ae(Ie)}(),e=lt(me,Qe),i=lt(ue,Fe),o=lt(tt,se),c=lt(Se,yt),function(){for(var Ae=1,Ie=2,Me=1;Me<=15;Me++){for(var je=Ae;je<Ie;je++)Q[32767+je]=Me,M[32767+je]=[],M[32767+je][1]=Me,M[32767+je][0]=je;for(var nt=-(Ie-1);nt<=-Ae;nt++)Q[32767+nt]=Me,M[32767+nt]=[],M[32767+nt][1]=Me,M[32767+nt][0]=Ie-1+nt;Ae<<=1,Ie<<=1}}(),function(){for(var Ae=0;Ae<256;Ae++)Oe[Ae]=19595*Ae,Oe[Ae+256>>0]=38470*Ae,Oe[Ae+512>>0]=7471*Ae+32768,Oe[Ae+768>>0]=-11059*Ae,Oe[Ae+1024>>0]=-21709*Ae,Oe[Ae+1280>>0]=32768*Ae+8421375,Oe[Ae+1536>>0]=-27439*Ae,Oe[Ae+1792>>0]=-5329*Ae}(),nr(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function EA(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function h2(n){function e(me){if(!me)throw Error("assert :P")}function i(me,Qe,tt){for(var se=0;4>se;se++)if(me[Qe+se]!=tt.charCodeAt(se))return!0;return!1}function o(me,Qe,tt,se,ue){for(var Fe=0;Fe<ue;Fe++)me[Qe+Fe]=tt[se+Fe]}function c(me,Qe,tt,se){for(var ue=0;ue<se;ue++)me[Qe+ue]=tt}function d(me){return new Int32Array(me)}function f(me,Qe){for(var tt=[],se=0;se<me;se++)tt.push(new Qe);return tt}function s(me,Qe){var tt=[];return function se(ue,Fe,Se){for(var yt=Se[Fe],lt=0;lt<yt&&(ue.push(Se.length>Fe+1?[]:new Qe),!(Se.length<Fe+1));lt++)se(ue[lt],Fe+1,Se)}(tt,0,me),tt}var v=function(){var me=this;function Qe(w,I){for(var R=1<<I-1>>>0;w&R;)R>>>=1;return R?(w&R-1)+R:w}function tt(w,I,R,j,te){e(!(j%R));do w[I+(j-=R)]=te;while(0<j)}function se(w,I,R,j,te){if(e(2328>=te),512>=te)var X=d(512);else if((X=d(te))==null)return 0;return function(ce,he,ge,xe,Je,pt){var rt,st,Ht=he,Tt=1<<ge,et=d(16),it=d(16);for(e(Je!=0),e(xe!=null),e(ce!=null),e(0<ge),st=0;st<Je;++st){if(15<xe[st])return 0;++et[xe[st]]}if(et[0]==Je)return 0;for(it[1]=0,rt=1;15>rt;++rt){if(et[rt]>1<<rt)return 0;it[rt+1]=it[rt]+et[rt]}for(st=0;st<Je;++st)rt=xe[st],0<xe[st]&&(pt[it[rt]++]=st);if(it[15]==1)return(xe=new ue).g=0,xe.value=pt[0],tt(ce,Ht,1,Tt,xe),Tt;var Qt,Gt=-1,Dt=Tt-1,pr=0,Ar=1,Dr=1,hr=1<<ge;for(st=0,rt=1,Je=2;rt<=ge;++rt,Je<<=1){if(Ar+=Dr<<=1,0>(Dr-=et[rt]))return 0;for(;0<et[rt];--et[rt])(xe=new ue).g=rt,xe.value=pt[st++],tt(ce,Ht+pr,Je,hr,xe),pr=Qe(pr,rt)}for(rt=ge+1,Je=2;15>=rt;++rt,Je<<=1){if(Ar+=Dr<<=1,0>(Dr-=et[rt]))return 0;for(;0<et[rt];--et[rt]){if(xe=new ue,(pr&Dt)!=Gt){for(Ht+=hr,Qt=1<<(Gt=rt)-ge;15>Gt&&!(0>=(Qt-=et[Gt]));)++Gt,Qt<<=1;Tt+=hr=1<<(Qt=Gt-ge),ce[he+(Gt=pr&Dt)].g=Qt+ge,ce[he+Gt].value=Ht-he-Gt}xe.g=rt-ge,xe.value=pt[st++],tt(ce,Ht+(pr>>ge),Je,hr,xe),pr=Qe(pr,rt)}}return Ar!=2*it[15]-1?0:Tt}(w,I,R,j,te,X)}function ue(){this.value=this.g=0}function Fe(){this.value=this.g=0}function Se(){this.G=f(5,ue),this.H=d(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=f(Di,Fe)}function yt(w,I,R,j){e(w!=null),e(I!=null),e(2147483648>j),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=I,w.pa=R,w.Jd=I,w.Yc=R+j,w.Zc=4<=j?R+j-4+1:R,ut(w)}function lt(w,I){for(var R=0;0<I--;)R|=Bt(w,128)<<I;return R}function mt(w,I){var R=lt(w,I);return xt(w)?-R:R}function Ye(w,I,R,j){var te,X=0;for(e(w!=null),e(I!=null),e(4294967288>j),w.Sb=j,w.Ra=0,w.u=0,w.h=0,4<j&&(j=4),te=0;te<j;++te)X+=I[R+te]<<8*te;w.Ra=X,w.bb=j,w.oa=I,w.pa=R}function gt(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<mo-8>>>0,++w.bb,w.u-=8;Me(w)&&(w.h=1,w.u=0)}function Ct(w,I){if(e(0<=I),!w.h&&I<=hA){var R=Ie(w)&Es[I];return w.u+=I,gt(w),R}return w.h=1,w.u=0}function nr(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ae(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ie(w){return w.Ra>>>(w.u&mo-1)>>>0}function Me(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>mo}function je(w,I){w.u=I,w.h=Me(w)}function nt(w){w.u>=Tl&&(e(w.u>=Tl),gt(w))}function ut(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function xt(w){return lt(w,1)}function Bt(w,I){var R=w.Ca;0>w.b&&ut(w);var j=w.b,te=R*I>>>8,X=(w.I>>>j>te)+0;for(X?(R-=te,w.I-=te+1<<j>>>0):R=te+1,j=R,te=0;256<=j;)te+=8,j>>=8;return j=7^te+Qa[j],w.b-=j,w.Ca=(R<<j)-1,X}function tr(w,I,R){w[I+0]=R>>24&255,w[I+1]=R>>16&255,w[I+2]=R>>8&255,w[I+3]=R>>0&255}function ot(w,I){return w[I+0]<<0|w[I+1]<<8}function Ut(w,I){return ot(w,I)|w[I+2]<<16}function Ot(w,I){return ot(w,I)|ot(w,I+2)<<16}function Xt(w,I){var R=1<<I;return e(w!=null),e(0<I),w.X=d(R),w.X==null?0:(w.Mb=32-I,w.Xa=I,1)}function Ft(w,I){e(w!=null),e(I!=null),e(w.Xa==I.Xa),o(I.X,0,w.X,0,1<<I.Xa)}function Ue(){this.X=[],this.Xa=this.Mb=0}function sr(w,I,R,j){e(R!=null),e(j!=null);var te=R[0],X=j[0];return te==0&&(te=(w*X+I/2)/I),X==0&&(X=(I*te+w/2)/w),0>=te||0>=X?0:(R[0]=te,j[0]=X,1)}function fr(w,I){return w+(1<<I)-1>>>I}function jt(w,I){return((4278255360&w)+(4278255360&I)>>>0&4278255360)+((16711935&w)+(16711935&I)>>>0&16711935)>>>0}function er(w,I){me[I]=function(R,j,te,X,ce,he,ge){var xe;for(xe=0;xe<ce;++xe){var Je=me[w](he[ge+xe-1],te,X+xe);he[ge+xe]=jt(R[j+xe],Je)}}}function ar(){this.ud=this.hd=this.jd=0}function or(w,I){return((4278124286&(w^I))>>>1)+(w&I)>>>0}function wr(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function kr(w,I){return wr(w+(w-I+.5>>1))}function Hr(w,I,R){return Math.abs(I-R)-Math.abs(w-R)}function Wr(w,I,R,j,te,X,ce){for(j=X[ce-1],R=0;R<te;++R)X[ce+R]=j=jt(w[I+R],j)}function on(w,I,R,j,te){var X;for(X=0;X<R;++X){var ce=w[I+X],he=ce>>8&255,ge=16711935&(ge=(ge=16711935&ce)+((he<<16)+he));j[te+X]=(4278255360&ce)+ge>>>0}}function pn(w,I){I.jd=w>>0&255,I.hd=w>>8&255,I.ud=w>>16&255}function Pr(w,I,R,j,te,X){var ce;for(ce=0;ce<j;++ce){var he=I[R+ce],ge=he>>>8,xe=he,Je=255&(Je=(Je=he>>>16)+((w.jd<<24>>24)*(ge<<24>>24)>>>5));xe=255&(xe=(xe=xe+((w.hd<<24>>24)*(ge<<24>>24)>>>5))+((w.ud<<24>>24)*(Je<<24>>24)>>>5)),te[X+ce]=(4278255360&he)+(Je<<16)+xe}}function Zr(w,I,R,j,te){me[I]=function(X,ce,he,ge,xe,Je,pt,rt,st){for(ge=pt;ge<rt;++ge)for(pt=0;pt<st;++pt)xe[Je++]=te(he[j(X[ce++])])},me[w]=function(X,ce,he,ge,xe,Je,pt){var rt=8>>X.b,st=X.Ea,Ht=X.K[0],Tt=X.w;if(8>rt)for(X=(1<<X.b)-1,Tt=(1<<rt)-1;ce<he;++ce){var et,it=0;for(et=0;et<st;++et)et&X||(it=j(ge[xe++])),Je[pt++]=te(Ht[it&Tt]),it>>=rt}else me["VP8LMapColor"+R](ge,xe,Ht,Tt,Je,pt,ce,he,st)}}function ur(w,I,R,j,te){for(R=I+R;I<R;){var X=w[I++];j[te++]=X>>16&255,j[te++]=X>>8&255,j[te++]=X>>0&255}}function Dn(w,I,R,j,te){for(R=I+R;I<R;){var X=w[I++];j[te++]=X>>16&255,j[te++]=X>>8&255,j[te++]=X>>0&255,j[te++]=X>>24&255}}function Vr(w,I,R,j,te){for(R=I+R;I<R;){var X=(ce=w[I++])>>16&240|ce>>12&15,ce=ce>>0&240|ce>>28&15;j[te++]=X,j[te++]=ce}}function bi(w,I,R,j,te){for(R=I+R;I<R;){var X=(ce=w[I++])>>16&248|ce>>13&7,ce=ce>>5&224|ce>>3&31;j[te++]=X,j[te++]=ce}}function Xe(w,I,R,j,te){for(R=I+R;I<R;){var X=w[I++];j[te++]=X>>0&255,j[te++]=X>>8&255,j[te++]=X>>16&255}}function ae(w,I,R,j,te,X){if(X==0)for(R=I+R;I<R;)tr(j,((X=w[I++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),te+=32;else o(j,te,w,I,R)}function le(w,I){me[I][0]=me[w+"0"],me[I][1]=me[w+"1"],me[I][2]=me[w+"2"],me[I][3]=me[w+"3"],me[I][4]=me[w+"4"],me[I][5]=me[w+"5"],me[I][6]=me[w+"6"],me[I][7]=me[w+"7"],me[I][8]=me[w+"8"],me[I][9]=me[w+"9"],me[I][10]=me[w+"10"],me[I][11]=me[w+"11"],me[I][12]=me[w+"12"],me[I][13]=me[w+"13"],me[I][14]=me[w+"0"],me[I][15]=me[w+"0"]}function fe(w){return w==gA||w==WA||w==XA||w==JA}function Le(){this.eb=[],this.size=this.A=this.fb=0}function He(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Le,this.f.kb=new He,this.sd=null}function ht(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ke(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ze(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function at(w,I){var R=w.T,j=I.ba.f.RGBA,te=j.eb,X=j.fb+w.ka*j.A,ce=ua[I.ba.S],he=w.y,ge=w.O,xe=w.f,Je=w.N,pt=w.ea,rt=w.W,st=I.cc,Ht=I.dc,Tt=I.Mc,et=I.Nc,it=w.ka,Qt=w.ka+w.T,Gt=w.U,Dt=Gt+1>>1;for(it==0?ce(he,ge,null,null,xe,Je,pt,rt,xe,Je,pt,rt,te,X,null,null,Gt):(ce(I.ec,I.fc,he,ge,st,Ht,Tt,et,xe,Je,pt,rt,te,X-j.A,te,X,Gt),++R);it+2<Qt;it+=2)st=xe,Ht=Je,Tt=pt,et=rt,Je+=w.Rc,rt+=w.Rc,X+=2*j.A,ce(he,(ge+=2*w.fa)-w.fa,he,ge,st,Ht,Tt,et,xe,Je,pt,rt,te,X-j.A,te,X,Gt);return ge+=w.fa,w.j+Qt<w.o?(o(I.ec,I.fc,he,ge,Gt),o(I.cc,I.dc,xe,Je,Dt),o(I.Mc,I.Nc,pt,rt,Dt),R--):1&Qt||ce(he,ge,null,null,xe,Je,pt,rt,xe,Je,pt,rt,te,X+j.A,null,null,Gt),R}function At(w,I,R){var j=w.F,te=[w.J];if(j!=null){var X=w.U,ce=I.ba.S,he=ce==kl||ce==XA;I=I.ba.f.RGBA;var ge=[0],xe=w.ka;ge[0]=w.T,w.Kb&&(xe==0?--ge[0]:(--xe,te[0]-=w.width),w.j+w.ka+w.T==w.o&&(ge[0]=w.o-w.j-xe));var Je=I.eb;xe=I.fb+xe*I.A,w=Sn(j,te[0],w.width,X,ge,Je,xe+(he?0:3),I.A),e(R==ge),w&&fe(ce)&&Ni(Je,xe,he,X,ge,I.A)}return 0}function Lt(w){var I=w.ma,R=I.ba.S,j=11>R,te=R==Zo||R==Ac||R==kl||R==Oc||R==12||fe(R);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!cA(I.Oa,w,te?11:12))return 0;if(te&&fe(R)&&Kt(),w.da)alert("todo:use_scaling");else{if(j){if(I.Ib=Ze,w.Kb){if(R=w.U+1>>1,I.memory=d(w.U+2*R),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+w.U,I.Mc=I.cc,I.Nc=I.dc+R,I.Ib=at,Kt()}}else alert("todo:EmitYUV");te&&(I.Jb=At,j&&ct())}if(j&&!hc){for(w=0;256>w;++w)fc[w]=89858*(w-128)+rl>>wo,Su[w]=-22014*(w-128)+rl,al[w]=-45773*(w-128),Eu[w]=113618*(w-128)+rl>>wo;for(w=nl;w<uc;++w)I=76283*(w-16)+rl>>wo,ha[w-nl]=Wa(I,255),Ms[w-nl]=Wa(I+8>>4,15);hc=1}return 1}function $t(w){var I=w.ma,R=w.U,j=w.T;return e(!(1&w.ka)),0>=R||0>=j?0:(R=I.Ib(w,I),I.Jb!=null&&I.Jb(w,I,R),I.Dc+=R,1)}function Jt(w){w.ma.memory=null}function Vt(w,I,R,j){return Ct(w,8)!=47?0:(I[0]=Ct(w,14)+1,R[0]=Ct(w,14)+1,j[0]=Ct(w,1),Ct(w,3)!=0?0:!w.h)}function Sr(w,I){if(4>w)return w+1;var R=w-2>>1;return(2+(1&w)<<R)+Ct(I,R)+1}function xr(w,I){return 120<I?I-120:1<=(R=((R=Nl[I-1])>>4)*w+(8-(15&R)))?R:1;var R}function _t(w,I,R){var j=Ie(R),te=w[I+=255&j].g-8;return 0<te&&(je(R,R.u+8),j=Ie(R),I+=w[I].value,I+=j&(1<<te)-1),je(R,R.u+w[I].g),w[I].value}function Nr(w,I,R){return R.g+=w.g,R.value+=w.value<<I>>>0,e(8>=R.g),w.g}function Fr(w,I,R){var j=w.xc;return e((I=j==0?0:w.vc[w.md*(R>>j)+(I>>j)])<w.Wb),w.Ya[I]}function jr(w,I,R,j){var te=w.ab,X=w.c*I,ce=w.C;I=ce+I;var he=R,ge=j;for(j=w.Ta,R=w.Ua;0<te--;){var xe=w.gc[te],Je=ce,pt=I,rt=he,st=ge,Ht=(ge=j,he=R,xe.Ea);switch(e(Je<pt),e(pt<=xe.nc),xe.hc){case 2:Pl(rt,st,(pt-Je)*Ht,ge,he);break;case 0:var Tt=Je,et=pt,it=ge,Qt=he,Gt=(hr=xe).Ea;Tt==0&&(Ll(rt,st,null,null,1,it,Qt),Wr(rt,st+1,0,0,Gt-1,it,Qt+1),st+=Gt,Qt+=Gt,++Tt);for(var Dt=1<<hr.b,pr=Dt-1,Ar=fr(Gt,hr.b),Dr=hr.K,hr=hr.w+(Tt>>hr.b)*Ar;Tt<et;){var nn=Dr,Mr=hr,fn=1;for(GA(rt,st,it,Qt-Gt,1,it,Qt);fn<Gt;){var un=(fn&~pr)+Dt;un>Gt&&(un=Gt),(0,Js[nn[Mr++]>>8&15])(rt,st+ +fn,it,Qt+fn-Gt,un-fn,it,Qt+fn),fn=un}st+=Gt,Qt+=Gt,++Tt&pr||(hr+=Ar)}pt!=xe.nc&&o(ge,he-Ht,ge,he+(pt-Je-1)*Ht,Ht);break;case 1:for(Ht=rt,et=st,Gt=(rt=xe.Ea)-(Qt=rt&~(it=(st=1<<xe.b)-1)),Tt=fr(rt,xe.b),Dt=xe.K,xe=xe.w+(Je>>xe.b)*Tt;Je<pt;){for(pr=Dt,Ar=xe,Dr=new ar,hr=et+Qt,nn=et+rt;et<hr;)pn(pr[Ar++],Dr),yo(Dr,Ht,et,st,ge,he),et+=st,he+=st;et<nn&&(pn(pr[Ar++],Dr),yo(Dr,Ht,et,Gt,ge,he),et+=Gt,he+=Gt),++Je&it||(xe+=Tt)}break;case 3:if(rt==ge&&st==he&&0<xe.b){for(et=ge,rt=Ht=he+(pt-Je)*Ht-(Qt=(pt-Je)*fr(xe.Ea,xe.b)),st=ge,it=he,Tt=[],Qt=(Gt=Qt)-1;0<=Qt;--Qt)Tt[Qt]=st[it+Qt];for(Qt=Gt-1;0<=Qt;--Qt)et[rt+Qt]=Tt[Qt];Da(xe,Je,pt,ge,Ht,ge,he)}else Da(xe,Je,pt,rt,st,ge,he)}he=j,ge=R}ge!=R&&o(j,R,he,ge,X)}function Cr(w,I){var R=w.V,j=w.Ba+w.c*w.C,te=I-w.C;if(e(I<=w.l.o),e(16>=te),0<te){var X=w.l,ce=w.Ta,he=w.Ua,ge=X.width;if(jr(w,te,R,j),te=he=[he],e((R=w.C)<(j=I)),e(X.v<X.va),j>X.o&&(j=X.o),R<X.j){var xe=X.j-R;R=X.j,te[0]+=xe*ge}if(R>=j?R=0:(te[0]+=4*X.v,X.ka=R-X.j,X.U=X.va-X.v,X.T=j-R,R=1),R){if(he=he[0],11>(R=w.ca).S){var Je=R.f.RGBA,pt=(j=R.S,te=X.U,X=X.T,xe=Je.eb,Je.A),rt=X;for(Je=Je.fb+w.Ma*Je.A;0<rt--;){var st=ce,Ht=he,Tt=te,et=xe,it=Je;switch(j){case $A:oa(st,Ht,Tt,et,it);break;case Zo:Aa(st,Ht,Tt,et,it);break;case gA:Aa(st,Ht,Tt,et,it),Ni(et,it,0,Tt,1,0);break;case xu:Ss(st,Ht,Tt,et,it);break;case Ac:ae(st,Ht,Tt,et,it,1);break;case WA:ae(st,Ht,Tt,et,it,1),Ni(et,it,0,Tt,1,0);break;case kl:ae(st,Ht,Tt,et,it,0);break;case XA:ae(st,Ht,Tt,et,it,0),Ni(et,it,1,Tt,1,0);break;case Oc:Ys(st,Ht,Tt,et,it);break;case JA:Ys(st,Ht,Tt,et,it),En(et,it,Tt,1,0);break;case Ql:xa(st,Ht,Tt,et,it);break;default:e(0)}he+=ge,Je+=pt}w.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=R.height)}}w.C=I,e(w.C<=w.i)}function kt(w){var I;if(0<w.ua)return 0;for(I=0;I<w.Wb;++I){var R=w.Ya[I].G,j=w.Ya[I].H;if(0<R[1][j[1]+0].g||0<R[2][j[2]+0].g||0<R[3][j[3]+0].g)return 0}return 1}function yr(w,I,R,j,te,X){if(w.Z!=0){var ce=w.qd,he=w.rd;for(e(no[w.Z]!=null);I<R;++I)no[w.Z](ce,he,j,te,j,te,X),ce=j,he=te,te+=X;w.qd=ce,w.rd=he}}function Tr(w,I){var R=w.l.ma,j=R.Z==0||R.Z==1?w.l.j:w.C;if(j=w.C<j?j:w.C,e(I<=w.l.o),I>j){var te=w.l.width,X=R.ca,ce=R.tb+te*j,he=w.V,ge=w.Ba+w.c*j,xe=w.gc;e(w.ab==1),e(xe[0].hc==3),cn(xe[0],j,I,he,ge,X,ce),yr(R,j,I,X,ce,te)}w.C=w.Ma=I}function yn(w,I,R,j,te,X,ce){var he=w.$/j,ge=w.$%j,xe=w.m,Je=w.s,pt=R+w.$,rt=pt;te=R+j*te;var st=R+j*X,Ht=280+Je.ua,Tt=w.Pb?he:16777216,et=0<Je.ua?Je.Wa:null,it=Je.wc,Qt=pt<st?Fr(Je,ge,he):null;e(w.C<X),e(st<=te);var Gt=!1;e:for(;;){for(;Gt||pt<st;){var Dt=0;if(he>=Tt){var pr=pt-R;e((Tt=w).Pb),Tt.wd=Tt.m,Tt.xd=pr,0<Tt.s.ua&&Ft(Tt.s.Wa,Tt.s.vb),Tt=he+Bu}if(ge&it||(Qt=Fr(Je,ge,he)),e(Qt!=null),Qt.Qb&&(I[pt]=Qt.qb,Gt=!0),!Gt)if(nt(xe),Qt.jc){Dt=xe,pr=I;var Ar=pt,Dr=Qt.pd[Ie(Dt)&Di-1];e(Qt.jc),256>Dr.g?(je(Dt,Dt.u+Dr.g),pr[Ar]=Dr.value,Dt=0):(je(Dt,Dt.u+Dr.g-256),e(256<=Dr.value),Dt=Dr.value),Dt==0&&(Gt=!0)}else Dt=_t(Qt.G[0],Qt.H[0],xe);if(xe.h)break;if(Gt||256>Dt){if(!Gt)if(Qt.nd)I[pt]=(Qt.qb|Dt<<8)>>>0;else{if(nt(xe),Gt=_t(Qt.G[1],Qt.H[1],xe),nt(xe),pr=_t(Qt.G[2],Qt.H[2],xe),Ar=_t(Qt.G[3],Qt.H[3],xe),xe.h)break;I[pt]=(Ar<<24|Gt<<16|Dt<<8|pr)>>>0}if(Gt=!1,++pt,++ge>=j&&(ge=0,++he,ce!=null&&he<=X&&!(he%16)&&ce(w,he),et!=null))for(;rt<pt;)Dt=I[rt++],et.X[(506832829*Dt&4294967295)>>>et.Mb]=Dt}else if(280>Dt){if(Dt=Sr(Dt-256,xe),pr=_t(Qt.G[4],Qt.H[4],xe),nt(xe),pr=xr(j,pr=Sr(pr,xe)),xe.h)break;if(pt-R<pr||te-pt<Dt)break e;for(Ar=0;Ar<Dt;++Ar)I[pt+Ar]=I[pt+Ar-pr];for(pt+=Dt,ge+=Dt;ge>=j;)ge-=j,++he,ce!=null&&he<=X&&!(he%16)&&ce(w,he);if(e(pt<=te),ge&it&&(Qt=Fr(Je,ge,he)),et!=null)for(;rt<pt;)Dt=I[rt++],et.X[(506832829*Dt&4294967295)>>>et.Mb]=Dt}else{if(!(Dt<Ht))break e;for(Gt=Dt-280,e(et!=null);rt<pt;)Dt=I[rt++],et.X[(506832829*Dt&4294967295)>>>et.Mb]=Dt;Dt=pt,e(!(Gt>>>(pr=et).Xa)),I[Dt]=pr.X[Gt],Gt=!0}Gt||e(xe.h==Me(xe))}if(w.Pb&&xe.h&&pt<te)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Ft(w.s.vb,w.s.Wa);else{if(xe.h)break e;ce!=null&&ce(w,he>X?X:he),w.a=0,w.$=pt-R}return 1}return w.a=3,0}function vn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var I=w.Wa;I!=null&&(I.X=null),w.vb=null,e(w!=null)}function Hn(){var w=new ka;return w==null?null:(w.a=0,w.xb=Ps,le("Predictor","VP8LPredictors"),le("Predictor","VP8LPredictors_C"),le("PredictorAdd","VP8LPredictorsAdd"),le("PredictorAdd","VP8LPredictorsAdd_C"),Pl=on,yo=Pr,oa=ur,Aa=Dn,Ys=Vr,xa=bi,Ss=Xe,me.VP8LMapColor32b=fA,me.VP8LMapColor8b=fs,w)}function Ur(w,I,R,j,te){var X=1,ce=[w],he=[I],ge=j.m,xe=j.s,Je=null,pt=0;e:for(;;){if(R)for(;X&&Ct(ge,1);){var rt=ce,st=he,Ht=j,Tt=1,et=Ht.m,it=Ht.gc[Ht.ab],Qt=Ct(et,2);if(Ht.Oc&1<<Qt)X=0;else{switch(Ht.Oc|=1<<Qt,it.hc=Qt,it.Ea=rt[0],it.nc=st[0],it.K=[null],++Ht.ab,e(4>=Ht.ab),Qt){case 0:case 1:it.b=Ct(et,3)+2,Tt=Ur(fr(it.Ea,it.b),fr(it.nc,it.b),0,Ht,it.K),it.K=it.K[0];break;case 3:var Gt,Dt=Ct(et,8)+1,pr=16<Dt?0:4<Dt?1:2<Dt?2:3;if(rt[0]=fr(it.Ea,pr),it.b=pr,Gt=Tt=Ur(Dt,1,0,Ht,it.K)){var Ar,Dr=Dt,hr=it,nn=1<<(8>>hr.b),Mr=d(nn);if(Mr==null)Gt=0;else{var fn=hr.K[0],un=hr.w;for(Mr[0]=hr.K[0][0],Ar=1;Ar<1*Dr;++Ar)Mr[Ar]=jt(fn[un+Ar],Mr[Ar-1]);for(;Ar<4*nn;++Ar)Mr[Ar]=0;hr.K[0]=null,hr.K[0]=Mr,Gt=1}}Tt=Gt;break;case 2:break;default:e(0)}X=Tt}}if(ce=ce[0],he=he[0],X&&Ct(ge,1)&&!(X=1<=(pt=Ct(ge,4))&&11>=pt)){j.a=3;break e}var Mn;if(Mn=X)t:{var Tn,Yr,Bi,Un=j,ni=ce,cr=he,ir=pt,Ki=R,Ca=Un.m,Ci=Un.s,gn=[null],qi=1,ii=0,Us=lc[ir];r:for(;;){if(Ki&&Ct(Ca,1)){var $n=Ct(Ca,3)+2,Bn=fr(ni,$n),Fn=fr(cr,$n),ks=Bn*Fn;if(!Ur(Bn,Fn,0,Un,gn))break r;for(gn=gn[0],Ci.xc=$n,Tn=0;Tn<ks;++Tn){var gs=gn[Tn]>>8&65535;gn[Tn]=gs,gs>=qi&&(qi=gs+1)}}if(Ca.h)break r;for(Yr=0;5>Yr;++Yr){var On=YA[Yr];!Yr&&0<ir&&(On+=1<<ir),ii<On&&(ii=On)}var xo=f(qi*Us,ue),pc=qi,gc=f(pc,Se);if(gc==null)var Bo=null;else e(65536>=pc),Bo=gc;var bA=d(ii);if(Bo==null||bA==null||xo==null){Un.a=1;break r}var m=xo;for(Tn=Bi=0;Tn<qi;++Tn){var t=Bo[Tn],a=t.G,h=t.H,p=0,y=1,x=0;for(Yr=0;5>Yr;++Yr){On=YA[Yr],a[Yr]=m,h[Yr]=Bi,!Yr&&0<ir&&(On+=1<<ir);i:{var F,T=On,D=Un,O=bA,K=m,G=Bi,Y=0,ie=D.m,be=Ct(ie,1);if(c(O,0,0,T),be){var _e=Ct(ie,1)+1,we=Ct(ie,1),Te=Ct(ie,we==0?1:8);O[Te]=1,_e==2&&(O[Te=Ct(ie,8)]=1);var De=1}else{var Re=d(19),Ve=Ct(ie,4)+4;if(19<Ve){D.a=3;var We=0;break i}for(F=0;F<Ve;++F)Re[Hc[F]]=Ct(ie,3);var Ge=void 0,ft=void 0,St=D,wt=Re,bt=T,It=O,Yt=0,Zt=St.m,Rt=8,gr=f(128,ue);n:for(;se(gr,0,7,wt,19);){if(Ct(Zt,1)){var $r=2+2*Ct(Zt,3);if((Ge=2+Ct(Zt,$r))>bt)break n}else Ge=bt;for(ft=0;ft<bt&&Ge--;){nt(Zt);var an=gr[0+(127&Ie(Zt))];je(Zt,Zt.u+an.g);var Ln=an.value;if(16>Ln)It[ft++]=Ln,Ln!=0&&(Rt=Ln);else{var kn=Ln==16,qn=Ln-16,Wn=Dl[qn],Qn=Ct(Zt,zc[qn])+Wn;if(ft+Qn>bt)break n;for(var _n=kn?Rt:0;0<Qn--;)It[ft++]=_n}}Yt=1;break n}Yt||(St.a=3),De=Yt}(De=De&&!ie.h)&&(Y=se(K,G,8,O,T)),De&&Y!=0?We=Y:(D.a=3,We=0)}if(We==0)break r;if(y&&Rl[Yr]==1&&(y=m[Bi].g==0),p+=m[Bi].g,Bi+=We,3>=Yr){var ai,Ii=bA[0];for(ai=1;ai<On;++ai)bA[ai]>Ii&&(Ii=bA[ai]);x+=Ii}}if(t.nd=y,t.Qb=0,y&&(t.qb=(a[3][h[3]+0].value<<24|a[1][h[1]+0].value<<16|a[2][h[2]+0].value)>>>0,p==0&&256>a[0][h[0]+0].value&&(t.Qb=1,t.qb+=a[0][h[0]+0].value<<8)),t.jc=!t.Qb&&6>x,t.jc){var Fi,en=t;for(Fi=0;Fi<Di;++Fi){var Ia=Fi,Zi=en.pd[Ia],Qs=en.G[0][en.H[0]+Ia];256<=Qs.value?(Zi.g=Qs.g+256,Zi.value=Qs.value):(Zi.g=0,Zi.value=0,Ia>>=Nr(Qs,8,Zi),Ia>>=Nr(en.G[1][en.H[1]+Ia],16,Zi),Ia>>=Nr(en.G[2][en.H[2]+Ia],0,Zi),Nr(en.G[3][en.H[3]+Ia],24,Zi))}}}Ci.vc=gn,Ci.Wb=qi,Ci.Ya=Bo,Ci.yc=xo,Mn=1;break t}Mn=0}if(!(X=Mn)){j.a=3;break e}if(0<pt){if(xe.ua=1<<pt,!Xt(xe.Wa,pt)){j.a=1,X=0;break e}}else xe.ua=0;var Co=j,ol=ce,Wo=he,Io=Co.s,Fa=Io.xc;if(Co.c=ol,Co.i=Wo,Io.md=fr(ol,Fa),Io.wc=Fa==0?-1:(1<<Fa)-1,R){j.xb=jc;break e}if((Je=d(ce*he))==null){j.a=1,X=0;break e}X=(X=yn(j,Je,0,ce,he,he,null))&&!ge.h;break e}return X?(te!=null?te[0]=Je:(e(Je==null),e(R)),j.$=0,R||vn(xe)):vn(xe),X}function as(w,I){var R=w.c*w.i,j=R+I+16*I;return e(w.c<=I),w.V=d(j),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+R+I,1)}function Vs(w,I){var R=w.C,j=I-R,te=w.V,X=w.Ba+w.c*R;for(e(I<=w.l.o);0<j;){var ce=16<j?16:j,he=w.l.ma,ge=w.l.width,xe=ge*ce,Je=he.ca,pt=he.tb+ge*R,rt=w.Ta,st=w.Ua;jr(w,ce,te,X),Kn(rt,st,Je,pt,xe),yr(he,R,R+ce,Je,pt,ge),j-=ce,te+=ce*w.c,R+=ce}e(R==I),w.C=w.Ma=I}function ss(){this.ub=this.yd=this.td=this.Rb=0}function Gs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pa(){this.Fb=this.Bb=this.Cb=0,this.Zb=d(4),this.Lb=d(4)}function Ks(){this.Yb=function(){var w=[];return function I(R,j,te){for(var X=te[j],ce=0;ce<X&&(R.push(te.length>j+1?[]:0),!(te.length<j+1));ce++)I(R[ce],j+1,te)}(w,0,[3,11]),w}()}function ti(){this.jb=d(3),this.Wc=s([4,8],Ks),this.Xc=s([4,17],Ks)}function ba(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new d(4),this.od=new d(4)}function In(){this.ld=this.La=this.dd=this.tc=0}function Qo(){this.Na=this.la=0}function Do(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sA(){this.ad=d(384),this.Za=0,this.Ob=d(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function co(){this.uc=this.M=this.Nb=0,this.wa=Array(new In),this.Y=0,this.ya=Array(new sA),this.aa=0,this.l=new Ro}function os(){this.y=d(16),this.f=d(8),this.ea=d(8)}function rc(){this.cb=this.a=0,this.sc="",this.m=new nr,this.Od=new ss,this.Kc=new Gs,this.ed=new ba,this.Qa=new Pa,this.Ic=this.$c=this.Aa=0,this.D=new co,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=f(8,nr),this.ia=0,this.pb=f(4,Do),this.Pa=new ti,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new os),this.Hd=0,this.rb=Array(new Qo),this.sb=0,this.wa=Array(new In),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sA),this.L=this.aa=0,this.gd=s([4,2],In),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ro(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function nc(){var w=new rc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,tl||(tl=ac)),w}function Nn(w,I,R){return w.a==0&&(w.a=I,w.sc=R,w.cb=0),0}function xl(w,I,R){return 3<=R&&w[I+0]==157&&w[I+1]==1&&w[I+2]==42}function ic(w,I){if(w==null)return 0;if(w.a=0,w.sc="OK",I==null)return Nn(w,2,"null VP8Io passed to VP8GetHeaders()");var R=I.data,j=I.w,te=I.ha;if(4>te)return Nn(w,7,"Truncated header.");var X=R[j+0]|R[j+1]<<8|R[j+2]<<16,ce=w.Od;if(ce.Rb=!(1&X),ce.td=X>>1&7,ce.yd=X>>4&1,ce.ub=X>>5,3<ce.td)return Nn(w,3,"Incorrect keyframe parameters.");if(!ce.yd)return Nn(w,4,"Frame not displayable.");j+=3,te-=3;var he=w.Kc;if(ce.Rb){if(7>te)return Nn(w,7,"cannot parse picture header");if(!xl(R,j,te))return Nn(w,3,"Bad code word");he.c=16383&(R[j+4]<<8|R[j+3]),he.Td=R[j+4]>>6,he.i=16383&(R[j+6]<<8|R[j+5]),he.Ud=R[j+6]>>6,j+=7,te-=7,w.za=he.c+15>>4,w.Ub=he.i+15>>4,I.width=he.c,I.height=he.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,c((X=w.Pa).jb,0,255,X.jb.length),e((X=w.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,c(X.Zb,0,0,X.Zb.length),c(X.Lb,0,0,X.Lb)}if(ce.ub>te)return Nn(w,7,"bad partition length");yt(X=w.m,R,j,ce.ub),j+=ce.ub,te-=ce.ub,ce.Rb&&(he.Ld=xt(X),he.Kd=xt(X)),he=w.Qa;var ge,xe=w.Pa;if(e(X!=null),e(he!=null),he.Cb=xt(X),he.Cb){if(he.Bb=xt(X),xt(X)){for(he.Fb=xt(X),ge=0;4>ge;++ge)he.Zb[ge]=xt(X)?mt(X,7):0;for(ge=0;4>ge;++ge)he.Lb[ge]=xt(X)?mt(X,6):0}if(he.Bb)for(ge=0;3>ge;++ge)xe.jb[ge]=xt(X)?lt(X,8):255}else he.Bb=0;if(X.Ka)return Nn(w,3,"cannot parse segment header");if((he=w.ed).zd=xt(X),he.Tb=lt(X,6),he.wb=lt(X,3),he.Pc=xt(X),he.Pc&&xt(X)){for(xe=0;4>xe;++xe)xt(X)&&(he.vd[xe]=mt(X,6));for(xe=0;4>xe;++xe)xt(X)&&(he.od[xe]=mt(X,6))}if(w.L=he.Tb==0?0:he.zd?1:2,X.Ka)return Nn(w,3,"cannot parse filter header");var Je=te;if(te=ge=j,j=ge+Je,he=Je,w.Xb=(1<<lt(w.m,2))-1,Je<3*(xe=w.Xb))R=7;else{for(ge+=3*xe,he-=3*xe,Je=0;Je<xe;++Je){var pt=R[te+0]|R[te+1]<<8|R[te+2]<<16;pt>he&&(pt=he),yt(w.Jc[+Je],R,ge,pt),ge+=pt,he-=pt,te+=3}yt(w.Jc[+xe],R,ge,he),R=ge<j?0:5}if(R!=0)return Nn(w,R,"cannot parse partitions");for(R=lt(ge=w.m,7),te=xt(ge)?mt(ge,4):0,j=xt(ge)?mt(ge,4):0,he=xt(ge)?mt(ge,4):0,xe=xt(ge)?mt(ge,4):0,ge=xt(ge)?mt(ge,4):0,Je=w.Qa,pt=0;4>pt;++pt){if(Je.Cb){var rt=Je.Zb[pt];Je.Fb||(rt+=R)}else{if(0<pt){w.pb[pt]=w.pb[0];continue}rt=R}var st=w.pb[pt];st.Sc[0]=el[Wa(rt+te,127)],st.Sc[1]=Ol[Wa(rt+0,127)],st.Eb[0]=2*el[Wa(rt+j,127)],st.Eb[1]=101581*Ol[Wa(rt+he,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=el[Wa(rt+xe,117)],st.Qc[1]=Ol[Wa(rt+ge,127)],st.lc=rt+ge}if(!ce.Rb)return Nn(w,4,"Not a key frame.");for(xt(X),ce=w.Pa,R=0;4>R;++R){for(te=0;8>te;++te)for(j=0;3>j;++j)for(he=0;11>he;++he)xe=Bt(X,ui[R][te][j][he])?lt(X,8):Iu[R][te][j][he],ce.Wc[R][te].Yb[j][he]=xe;for(te=0;17>te;++te)ce.Xc[R][te]=ce.Wc[R][$o[te]]}return w.kc=xt(X),w.kc&&(w.Bd=lt(X,8)),w.cb=1}function ac(w,I,R,j,te,X,ce){var he=I[te].Yb[R];for(R=0;16>te;++te){if(!Bt(w,he[R+0]))return te;for(;!Bt(w,he[R+1]);)if(he=I[++te].Yb[0],R=0,te==16)return 16;var ge=I[te+1].Yb;if(Bt(w,he[R+2])){var xe=w,Je=0;if(Bt(xe,(rt=he)[(pt=R)+3]))if(Bt(xe,rt[pt+6])){for(he=0,pt=2*(Je=Bt(xe,rt[pt+8]))+(rt=Bt(xe,rt[pt+9+Je])),Je=0,rt=Cu[pt];rt[he];++he)Je+=Je+Bt(xe,rt[he]);Je+=3+(8<<pt)}else Bt(xe,rt[pt+7])?(Je=7+2*Bt(xe,165),Je+=Bt(xe,145)):Je=5+Bt(xe,159);else Je=Bt(xe,rt[pt+4])?3+Bt(xe,rt[pt+5]):2;he=ge[2]}else Je=1,he=ge[1];ge=ce+cc[te],0>(xe=w).b&&ut(xe);var pt,rt=xe.b,st=(pt=xe.Ca>>1)-(xe.I>>rt)>>31;--xe.b,xe.Ca+=st,xe.Ca|=1,xe.I-=(pt+1&st)<<rt,X[ge]=((Je^st)-st)*j[(0<te)+0]}return 16}function Bl(w){var I=w.rb[w.sb-1];I.la=0,I.Na=0,c(w.zc,0,0,w.zc.length),w.ja=0}function sc(w,I){if(w==null)return 0;if(I==null)return Nn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!ic(w,I))return 0;if(e(w.cb),I.ac==null||I.ac(I)){I.ob&&(w.L=0);var R=Oa[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=I.v-R>>4,w.zb=I.j-R>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=I.o+15+R>>4,w.Hb=I.va+15+R>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var j=w.ed;for(R=0;4>R;++R){var te;if(w.Qa.Cb){var X=w.Qa.Lb[R];w.Qa.Fb||(X+=j.Tb)}else X=j.Tb;for(te=0;1>=te;++te){var ce=w.gd[R][te],he=X;if(j.Pc&&(he+=j.vd[0],te&&(he+=j.od[0])),0<(he=0>he?0:63<he?63:he)){var ge=he;0<j.wb&&(ge=4<j.wb?ge>>2:ge>>1)>9-j.wb&&(ge=9-j.wb),1>ge&&(ge=1),ce.dd=ge,ce.tc=2*he+ge,ce.ld=40<=he?2:15<=he?1:0}else ce.tc=0;ce.La=te}}}R=0}else Nn(w,6,"Frame setup failed"),R=w.a;if(R=R==0){if(R){w.$c=0,0<w.Aa||(w.Ic=dc);e:{R=w.Ic,j=4*(ge=w.za);var xe=32*ge,Je=ge+1,pt=0<w.L?ge*(0<w.Aa?2:1):0,rt=(w.Aa==2?2:1)*ge;if((ce=j+832+(te=3*(16*R+Oa[w.L])/2*xe)+(X=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=ce)R=0;else{if(ce>w.Vb){if(w.Vb=0,w.Ec=d(ce),w.Fc=0,w.Ec==null){R=Nn(w,1,"no memory during frame initialization.");break e}w.Vb=ce}ce=w.Ec,he=w.Fc,w.Ac=ce,w.Bc=he,he+=j,w.Gd=f(xe,os),w.Hd=0,w.rb=f(Je+1,Qo),w.sb=1,w.wa=pt?f(pt,In):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=ge),e(!0),w.oc=ce,w.pc=he,he+=832,w.ya=f(rt,sA),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=ge),w.R=16*ge,w.B=8*ge,ge=(xe=Oa[w.L])*w.R,xe=xe/2*w.B,w.sa=ce,w.ta=he+ge,w.qa=w.sa,w.ra=w.ta+16*R*w.R+xe,w.Ha=w.qa,w.Ia=w.ra+8*R*w.B+xe,w.$c=0,he+=te,w.mb=X?ce:null,w.nb=X?he:null,e(he+X<=w.Fc+w.Vb),Bl(w),c(w.Ac,w.Bc,0,j),R=1}}if(R){if(I.ka=0,I.y=w.sa,I.O=w.ta,I.f=w.qa,I.N=w.ra,I.ea=w.Ha,I.Vd=w.Ia,I.fa=w.R,I.Rc=w.B,I.F=null,I.J=0,!Ul){for(R=-255;255>=R;++R)ci[255+R]=0>R?-R:R;for(R=-1020;1020>=R;++R)ps[1020+R]=-128>R?-128:127<R?127:R;for(R=-112;112>=R;++R)ro[112+R]=-16>R?-16:15<R?15:R;for(R=-255;510>=R;++R)Ls[255+R]=0>R?0:255<R?255:R;Ul=1}KA=Il,_o=Cl,Ml=oc,la=oA,ds=No,gi=qs,dA=po,pA=Ma,qo=zA,eo=HA,bo=wi,Ra=go,to=Fl,Ts=Pi,Ri=OA,vo=Za,qA=$a,Na=fo,Xa[0]=wa,Xa[1]=An,Xa[2]=Ti,Xa[3]=Pn,Xa[4]=Qi,Xa[5]=Li,Xa[6]=sa,Xa[7]=uo,Xa[8]=jn,Xa[9]=xn,xi[0]=zo,xi[1]=Vi,xi[2]=va,xi[3]=Xr,xi[4]=di,xi[5]=aa,xi[6]=vi,Ja[0]=Rr,Ja[1]=Oo,Ja[2]=tn,Ja[3]=Qr,Ja[4]=Ai,Ja[5]=NA,Ja[6]=AA,R=1}else R=0}R&&(R=function(st,Ht){for(st.M=0;st.M<st.Va;++st.M){var Tt,et=st.Jc[st.M&st.Xb],it=st.m,Qt=st;for(Tt=0;Tt<Qt.za;++Tt){var Gt=it,Dt=Qt,pr=Dt.Ac,Ar=Dt.Bc+4*Tt,Dr=Dt.zc,hr=Dt.ya[Dt.aa+Tt];if(Dt.Qa.Bb?hr.$b=Bt(Gt,Dt.Pa.jb[0])?2+Bt(Gt,Dt.Pa.jb[2]):Bt(Gt,Dt.Pa.jb[1]):hr.$b=0,Dt.kc&&(hr.Ad=Bt(Gt,Dt.Bd)),hr.Za=!Bt(Gt,145)+0,hr.Za){var nn=hr.Ob,Mr=0;for(Dt=0;4>Dt;++Dt){var fn,un=Dr[0+Dt];for(fn=0;4>fn;++fn){un=Hl[pr[Ar+fn]][un];for(var Mn=zl[Bt(Gt,un[0])];0<Mn;)Mn=zl[2*Mn+Bt(Gt,un[Mn])];un=-Mn,pr[Ar+fn]=un}o(nn,Mr,pr,Ar,4),Mr+=4,Dr[0+Dt]=un}}else un=Bt(Gt,156)?Bt(Gt,128)?1:3:Bt(Gt,163)?2:0,hr.Ob[0]=un,c(pr,Ar,un,4),c(Dr,0,un,4);hr.Dd=Bt(Gt,142)?Bt(Gt,114)?Bt(Gt,183)?1:3:2:0}if(Qt.m.Ka)return Nn(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(Qt=et,Gt=(it=st).rb[it.sb-1],pr=it.rb[it.sb+it.ja],Tt=it.ya[it.aa+it.ja],Ar=it.kc?Tt.Ad:0)Gt.la=pr.la=0,Tt.Za||(Gt.Na=pr.Na=0),Tt.Hc=0,Tt.Gc=0,Tt.ia=0;else{var Tn,Yr;if(Gt=pr,pr=Qt,Ar=it.Pa.Xc,Dr=it.ya[it.aa+it.ja],hr=it.pb[Dr.$b],Dt=Dr.ad,nn=0,Mr=it.rb[it.sb-1],un=fn=0,c(Dt,nn,0,384),Dr.Za)var Bi=0,Un=Ar[3];else{Mn=d(16);var ni=Gt.Na+Mr.Na;if(ni=tl(pr,Ar[1],ni,hr.Eb,0,Mn,0),Gt.Na=Mr.Na=(0<ni)+0,1<ni)KA(Mn,0,Dt,nn);else{var cr=Mn[0]+3>>3;for(Mn=0;256>Mn;Mn+=16)Dt[nn+Mn]=cr}Bi=1,Un=Ar[0]}var ir=15&Gt.la,Ki=15&Mr.la;for(Mn=0;4>Mn;++Mn){var Ca=1&Ki;for(cr=Yr=0;4>cr;++cr)ir=ir>>1|(Ca=(ni=tl(pr,Un,ni=Ca+(1&ir),hr.Sc,Bi,Dt,nn))>Bi)<<7,Yr=Yr<<2|(3<ni?3:1<ni?2:Dt[nn+0]!=0),nn+=16;ir>>=4,Ki=Ki>>1|Ca<<7,fn=(fn<<8|Yr)>>>0}for(Un=ir,Bi=Ki>>4,Tn=0;4>Tn;Tn+=2){for(Yr=0,ir=Gt.la>>4+Tn,Ki=Mr.la>>4+Tn,Mn=0;2>Mn;++Mn){for(Ca=1&Ki,cr=0;2>cr;++cr)ni=Ca+(1&ir),ir=ir>>1|(Ca=0<(ni=tl(pr,Ar[2],ni,hr.Qc,0,Dt,nn)))<<3,Yr=Yr<<2|(3<ni?3:1<ni?2:Dt[nn+0]!=0),nn+=16;ir>>=2,Ki=Ki>>1|Ca<<5}un|=Yr<<4*Tn,Un|=ir<<4<<Tn,Bi|=(240&Ki)<<Tn}Gt.la=Un,Mr.la=Bi,Dr.Hc=fn,Dr.Gc=un,Dr.ia=43690&un?0:hr.ia,Ar=!(fn|un)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[Tt.$b][Tt.Za],it.wa[it.Y+it.ja].La|=!Ar),Qt.Ka)return Nn(st,7,"Premature end-of-file encountered.")}if(Bl(st),it=Ht,Qt=1,Tt=(et=st).D,Gt=0<et.L&&et.M>=et.zb&&et.M<=et.Va,et.Aa==0)e:{if(Tt.M=et.M,Tt.uc=Gt,VA(et,Tt),Qt=1,Tt=(Yr=et.D).Nb,Gt=(un=Oa[et.L])*et.R,pr=un/2*et.B,Mn=16*Tt*et.R,cr=8*Tt*et.B,Ar=et.sa,Dr=et.ta-Gt+Mn,hr=et.qa,Dt=et.ra-pr+cr,nn=et.Ha,Mr=et.Ia-pr+cr,Ki=(ir=Yr.M)==0,fn=ir>=et.Va-1,et.Aa==2&&VA(et,Yr),Yr.uc)for(Ca=(ni=et).D.M,e(ni.D.uc),Yr=ni.yb;Yr<ni.Hb;++Yr){Bi=Yr,Un=Ca;var Ci=(gn=(On=ni).D).Nb;Tn=On.R;var gn=gn.wa[gn.Y+Bi],qi=On.sa,ii=On.ta+16*Ci*Tn+16*Bi,Us=gn.dd,$n=gn.tc;if($n!=0)if(e(3<=$n),On.L==1)0<Bi&&vo(qi,ii,Tn,$n+4),gn.La&&Na(qi,ii,Tn,$n),0<Un&&Ri(qi,ii,Tn,$n+4),gn.La&&qA(qi,ii,Tn,$n);else{var Bn=On.B,Fn=On.qa,ks=On.ra+8*Ci*Bn+8*Bi,gs=On.Ha,On=On.Ia+8*Ci*Bn+8*Bi;Ci=gn.ld,0<Bi&&(pA(qi,ii,Tn,$n+4,Us,Ci),eo(Fn,ks,gs,On,Bn,$n+4,Us,Ci)),gn.La&&(Ra(qi,ii,Tn,$n,Us,Ci),Ts(Fn,ks,gs,On,Bn,$n,Us,Ci)),0<Un&&(dA(qi,ii,Tn,$n+4,Us,Ci),qo(Fn,ks,gs,On,Bn,$n+4,Us,Ci)),gn.La&&(bo(qi,ii,Tn,$n,Us,Ci),to(Fn,ks,gs,On,Bn,$n,Us,Ci))}}if(et.ia&&alert("todo:DitherRow"),it.put!=null){if(Yr=16*ir,ir=16*(ir+1),Ki?(it.y=et.sa,it.O=et.ta+Mn,it.f=et.qa,it.N=et.ra+cr,it.ea=et.Ha,it.W=et.Ia+cr):(Yr-=un,it.y=Ar,it.O=Dr,it.f=hr,it.N=Dt,it.ea=nn,it.W=Mr),fn||(ir-=un),ir>it.o&&(ir=it.o),it.F=null,it.J=null,et.Fa!=null&&0<et.Fa.length&&Yr<ir&&(it.J=Sl(et,it,Yr,ir-Yr),it.F=et.mb,it.F==null&&it.F.length==0)){Qt=Nn(et,3,"Could not decode alpha data.");break e}Yr<it.j&&(un=it.j-Yr,Yr=it.j,e(!(1&un)),it.O+=et.R*un,it.N+=et.B*(un>>1),it.W+=et.B*(un>>1),it.F!=null&&(it.J+=it.width*un)),Yr<ir&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=Yr-it.j,it.U=it.va-it.v,it.T=ir-Yr,Qt=it.put(it))}Tt+1!=et.Ic||fn||(o(et.sa,et.ta-Gt,Ar,Dr+16*et.R,Gt),o(et.qa,et.ra-pr,hr,Dt+8*et.B,pr),o(et.Ha,et.Ia-pr,nn,Mr+8*et.B,pr))}if(!Qt)return Nn(st,6,"Output aborted.")}return 1}(w,I)),I.bc!=null&&I.bc(I),R&=1}return R?(w.cb=0,R):0}function qa(w,I,R,j,te){te=w[I+R+32*j]+(te>>3),w[I+R+32*j]=-256&te?0>te?0:255:te}function As(w,I,R,j,te,X){qa(w,I,0,R,j+te),qa(w,I,1,R,j+X),qa(w,I,2,R,j-X),qa(w,I,3,R,j-te)}function ia(w){return(20091*w>>16)+w}function RA(w,I,R,j){var te,X=0,ce=d(16);for(te=0;4>te;++te){var he=w[I+0]+w[I+8],ge=w[I+0]-w[I+8],xe=(35468*w[I+4]>>16)-ia(w[I+12]),Je=ia(w[I+4])+(35468*w[I+12]>>16);ce[X+0]=he+Je,ce[X+1]=ge+xe,ce[X+2]=ge-xe,ce[X+3]=he-Je,X+=4,I++}for(te=X=0;4>te;++te)he=(w=ce[X+0]+4)+ce[X+8],ge=w-ce[X+8],xe=(35468*ce[X+4]>>16)-ia(ce[X+12]),qa(R,j,0,0,he+(Je=ia(ce[X+4])+(35468*ce[X+12]>>16))),qa(R,j,1,0,ge+xe),qa(R,j,2,0,ge-xe),qa(R,j,3,0,he-Je),X++,j+=32}function qs(w,I,R,j){var te=w[I+0]+4,X=35468*w[I+4]>>16,ce=ia(w[I+4]),he=35468*w[I+1]>>16;As(R,j,0,te+ce,w=ia(w[I+1]),he),As(R,j,1,te+X,w,he),As(R,j,2,te-X,w,he),As(R,j,3,te-ce,w,he)}function Cl(w,I,R,j,te){RA(w,I,R,j),te&&RA(w,I+16,R,j+4)}function oc(w,I,R,j){_o(w,I+0,R,j,1),_o(w,I+32,R,j+128,1)}function oA(w,I,R,j){var te;for(w=w[I+0]+4,te=0;4>te;++te)for(I=0;4>I;++I)qa(R,j,I,te,w)}function No(w,I,R,j){w[I+0]&&la(w,I+0,R,j),w[I+16]&&la(w,I+16,R,j+4),w[I+32]&&la(w,I+32,R,j+128),w[I+48]&&la(w,I+48,R,j+128+4)}function Il(w,I,R,j){var te,X=d(16);for(te=0;4>te;++te){var ce=w[I+0+te]+w[I+12+te],he=w[I+4+te]+w[I+8+te],ge=w[I+4+te]-w[I+8+te],xe=w[I+0+te]-w[I+12+te];X[0+te]=ce+he,X[8+te]=ce-he,X[4+te]=xe+ge,X[12+te]=xe-ge}for(te=0;4>te;++te)ce=(w=X[0+4*te]+3)+X[3+4*te],he=X[1+4*te]+X[2+4*te],ge=X[1+4*te]-X[2+4*te],xe=w-X[3+4*te],R[j+0]=ce+he>>3,R[j+16]=xe+ge>>3,R[j+32]=ce-he>>3,R[j+48]=xe-ge>>3,j+=64}function Si(w,I,R){var j,te=I-32,X=ca,ce=255-w[te-1];for(j=0;j<R;++j){var he,ge=X,xe=ce+w[I-1];for(he=0;he<R;++he)w[I+he]=ge[xe+w[te+he]];I+=32}}function An(w,I){Si(w,I,4)}function Oo(w,I){Si(w,I,8)}function Vi(w,I){Si(w,I,16)}function va(w,I){var R;for(R=0;16>R;++R)o(w,I+32*R,w,I-32,16)}function Xr(w,I){var R;for(R=16;0<R;--R)c(w,I,w[I-1],16),I+=32}function Zs(w,I,R){var j;for(j=0;16>j;++j)c(I,R+32*j,w,16)}function zo(w,I){var R,j=16;for(R=0;16>R;++R)j+=w[I-1+32*R]+w[I+R-32];Zs(j>>5,w,I)}function di(w,I){var R,j=8;for(R=0;16>R;++R)j+=w[I-1+32*R];Zs(j>>4,w,I)}function aa(w,I){var R,j=8;for(R=0;16>R;++R)j+=w[I+R-32];Zs(j>>4,w,I)}function vi(w,I){Zs(128,w,I)}function br(w,I,R){return w+2*I+R+2>>2}function Ti(w,I){var R,j=I-32;for(j=new Uint8Array([br(w[j-1],w[j+0],w[j+1]),br(w[j+0],w[j+1],w[j+2]),br(w[j+1],w[j+2],w[j+3]),br(w[j+2],w[j+3],w[j+4])]),R=0;4>R;++R)o(w,I+32*R,j,0,j.length)}function Pn(w,I){var R=w[I-1],j=w[I-1+32],te=w[I-1+64],X=w[I-1+96];tr(w,I+0,16843009*br(w[I-1-32],R,j)),tr(w,I+32,16843009*br(R,j,te)),tr(w,I+64,16843009*br(j,te,X)),tr(w,I+96,16843009*br(te,X,X))}function wa(w,I){var R,j=4;for(R=0;4>R;++R)j+=w[I+R-32]+w[I-1+32*R];for(j>>=3,R=0;4>R;++R)c(w,I+32*R,j,4)}function Qi(w,I){var R=w[I-1+0],j=w[I-1+32],te=w[I-1+64],X=w[I-1-32],ce=w[I+0-32],he=w[I+1-32],ge=w[I+2-32],xe=w[I+3-32];w[I+0+96]=br(j,te,w[I-1+96]),w[I+1+96]=w[I+0+64]=br(R,j,te),w[I+2+96]=w[I+1+64]=w[I+0+32]=br(X,R,j),w[I+3+96]=w[I+2+64]=w[I+1+32]=w[I+0+0]=br(ce,X,R),w[I+3+64]=w[I+2+32]=w[I+1+0]=br(he,ce,X),w[I+3+32]=w[I+2+0]=br(ge,he,ce),w[I+3+0]=br(xe,ge,he)}function sa(w,I){var R=w[I+1-32],j=w[I+2-32],te=w[I+3-32],X=w[I+4-32],ce=w[I+5-32],he=w[I+6-32],ge=w[I+7-32];w[I+0+0]=br(w[I+0-32],R,j),w[I+1+0]=w[I+0+32]=br(R,j,te),w[I+2+0]=w[I+1+32]=w[I+0+64]=br(j,te,X),w[I+3+0]=w[I+2+32]=w[I+1+64]=w[I+0+96]=br(te,X,ce),w[I+3+32]=w[I+2+64]=w[I+1+96]=br(X,ce,he),w[I+3+64]=w[I+2+96]=br(ce,he,ge),w[I+3+96]=br(he,ge,ge)}function Li(w,I){var R=w[I-1+0],j=w[I-1+32],te=w[I-1+64],X=w[I-1-32],ce=w[I+0-32],he=w[I+1-32],ge=w[I+2-32],xe=w[I+3-32];w[I+0+0]=w[I+1+64]=X+ce+1>>1,w[I+1+0]=w[I+2+64]=ce+he+1>>1,w[I+2+0]=w[I+3+64]=he+ge+1>>1,w[I+3+0]=ge+xe+1>>1,w[I+0+96]=br(te,j,R),w[I+0+64]=br(j,R,X),w[I+0+32]=w[I+1+96]=br(R,X,ce),w[I+1+32]=w[I+2+96]=br(X,ce,he),w[I+2+32]=w[I+3+96]=br(ce,he,ge),w[I+3+32]=br(he,ge,xe)}function uo(w,I){var R=w[I+0-32],j=w[I+1-32],te=w[I+2-32],X=w[I+3-32],ce=w[I+4-32],he=w[I+5-32],ge=w[I+6-32],xe=w[I+7-32];w[I+0+0]=R+j+1>>1,w[I+1+0]=w[I+0+64]=j+te+1>>1,w[I+2+0]=w[I+1+64]=te+X+1>>1,w[I+3+0]=w[I+2+64]=X+ce+1>>1,w[I+0+32]=br(R,j,te),w[I+1+32]=w[I+0+96]=br(j,te,X),w[I+2+32]=w[I+1+96]=br(te,X,ce),w[I+3+32]=w[I+2+96]=br(X,ce,he),w[I+3+64]=br(ce,he,ge),w[I+3+96]=br(he,ge,xe)}function xn(w,I){var R=w[I-1+0],j=w[I-1+32],te=w[I-1+64],X=w[I-1+96];w[I+0+0]=R+j+1>>1,w[I+2+0]=w[I+0+32]=j+te+1>>1,w[I+2+32]=w[I+0+64]=te+X+1>>1,w[I+1+0]=br(R,j,te),w[I+3+0]=w[I+1+32]=br(j,te,X),w[I+3+32]=w[I+1+64]=br(te,X,X),w[I+3+64]=w[I+2+64]=w[I+0+96]=w[I+1+96]=w[I+2+96]=w[I+3+96]=X}function jn(w,I){var R=w[I-1+0],j=w[I-1+32],te=w[I-1+64],X=w[I-1+96],ce=w[I-1-32],he=w[I+0-32],ge=w[I+1-32],xe=w[I+2-32];w[I+0+0]=w[I+2+32]=R+ce+1>>1,w[I+0+32]=w[I+2+64]=j+R+1>>1,w[I+0+64]=w[I+2+96]=te+j+1>>1,w[I+0+96]=X+te+1>>1,w[I+3+0]=br(he,ge,xe),w[I+2+0]=br(ce,he,ge),w[I+1+0]=w[I+3+32]=br(R,ce,he),w[I+1+32]=w[I+3+64]=br(j,R,ce),w[I+1+64]=w[I+3+96]=br(te,j,R),w[I+1+96]=br(X,te,j)}function tn(w,I){var R;for(R=0;8>R;++R)o(w,I+32*R,w,I-32,8)}function Qr(w,I){var R;for(R=0;8>R;++R)c(w,I,w[I-1],8),I+=32}function ls(w,I,R){var j;for(j=0;8>j;++j)c(I,R+32*j,w,8)}function Rr(w,I){var R,j=8;for(R=0;8>R;++R)j+=w[I+R-32]+w[I-1+32*R];ls(j>>4,w,I)}function NA(w,I){var R,j=4;for(R=0;8>R;++R)j+=w[I+R-32];ls(j>>3,w,I)}function Ai(w,I){var R,j=4;for(R=0;8>R;++R)j+=w[I-1+32*R];ls(j>>3,w,I)}function AA(w,I){ls(128,w,I)}function Ho(w,I,R){var j=w[I-R],te=w[I+0],X=3*(te-j)+ZA[1020+w[I-2*R]-w[I+R]],ce=Jr[112+(X+4>>3)];w[I-R]=ca[255+j+Jr[112+(X+3>>3)]],w[I+0]=ca[255+te-ce]}function jo(w,I,R,j){var te=w[I+0],X=w[I+R];return Ba[255+w[I-2*R]-w[I-R]]>j||Ba[255+X-te]>j}function ho(w,I,R,j){return 4*Ba[255+w[I-R]-w[I+0]]+Ba[255+w[I-2*R]-w[I+R]]<=j}function Vo(w,I,R,j,te){var X=w[I-3*R],ce=w[I-2*R],he=w[I-R],ge=w[I+0],xe=w[I+R],Je=w[I+2*R],pt=w[I+3*R];return 4*Ba[255+he-ge]+Ba[255+ce-xe]>j?0:Ba[255+w[I-4*R]-X]<=te&&Ba[255+X-ce]<=te&&Ba[255+ce-he]<=te&&Ba[255+pt-Je]<=te&&Ba[255+Je-xe]<=te&&Ba[255+xe-ge]<=te}function OA(w,I,R,j){var te=2*j+1;for(j=0;16>j;++j)ho(w,I+j,R,te)&&Ho(w,I+j,R)}function Za(w,I,R,j){var te=2*j+1;for(j=0;16>j;++j)ho(w,I+j*R,1,te)&&Ho(w,I+j*R,1)}function $a(w,I,R,j){var te;for(te=3;0<te;--te)OA(w,I+=4*R,R,j)}function fo(w,I,R,j){var te;for(te=3;0<te;--te)Za(w,I+=4,R,j)}function Vn(w,I,R,j,te,X,ce,he){for(X=2*X+1;0<te--;){if(Vo(w,I,R,X,ce))if(jo(w,I,R,he))Ho(w,I,R);else{var ge=w,xe=I,Je=R,pt=ge[xe-2*Je],rt=ge[xe-Je],st=ge[xe+0],Ht=ge[xe+Je],Tt=ge[xe+2*Je],et=27*(Qt=ZA[1020+3*(st-rt)+ZA[1020+pt-Ht]])+63>>7,it=18*Qt+63>>7,Qt=9*Qt+63>>7;ge[xe-3*Je]=ca[255+ge[xe-3*Je]+Qt],ge[xe-2*Je]=ca[255+pt+it],ge[xe-Je]=ca[255+rt+et],ge[xe+0]=ca[255+st-et],ge[xe+Je]=ca[255+Ht-it],ge[xe+2*Je]=ca[255+Tt-Qt]}I+=j}}function Gi(w,I,R,j,te,X,ce,he){for(X=2*X+1;0<te--;){if(Vo(w,I,R,X,ce))if(jo(w,I,R,he))Ho(w,I,R);else{var ge=w,xe=I,Je=R,pt=ge[xe-Je],rt=ge[xe+0],st=ge[xe+Je],Ht=Jr[112+((Tt=3*(rt-pt))+4>>3)],Tt=Jr[112+(Tt+3>>3)],et=Ht+1>>1;ge[xe-2*Je]=ca[255+ge[xe-2*Je]+et],ge[xe-Je]=ca[255+pt+Tt],ge[xe+0]=ca[255+rt-Ht],ge[xe+Je]=ca[255+st-et]}I+=j}}function po(w,I,R,j,te,X){Vn(w,I,R,1,16,j,te,X)}function Ma(w,I,R,j,te,X){Vn(w,I,1,R,16,j,te,X)}function wi(w,I,R,j,te,X){var ce;for(ce=3;0<ce;--ce)Gi(w,I+=4*R,R,1,16,j,te,X)}function go(w,I,R,j,te,X){var ce;for(ce=3;0<ce;--ce)Gi(w,I+=4,1,R,16,j,te,X)}function zA(w,I,R,j,te,X,ce,he){Vn(w,I,te,1,8,X,ce,he),Vn(R,j,te,1,8,X,ce,he)}function HA(w,I,R,j,te,X,ce,he){Vn(w,I,1,te,8,X,ce,he),Vn(R,j,1,te,8,X,ce,he)}function Fl(w,I,R,j,te,X,ce,he){Gi(w,I+4*te,te,1,8,X,ce,he),Gi(R,j+4*te,te,1,8,X,ce,he)}function Pi(w,I,R,j,te,X,ce,he){Gi(w,I+4,1,te,8,X,ce,he),Gi(R,j+4,1,te,8,X,ce,he)}function $s(){this.ba=new pe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ke,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ua(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Is(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Go(){this.ua=0,this.Wa=new Ue,this.vb=new Ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Se,this.yc=new ue}function ka(){this.xb=this.a=0,this.l=new Ro,this.ca=new pe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ae,this.Pb=0,this.wd=new Ae,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Go,this.ab=0,this.gc=f(4,Is),this.Oc=0}function cs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ro,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ws(w,I,R,j,te,X,ce){for(w=w==null?0:w[I+0],I=0;I<ce;++I)te[X+I]=w+R[j+I]&255,w=te[X+I]}function El(w,I,R,j,te,X,ce){var he;if(w==null)Ws(null,null,R,j,te,X,ce);else for(he=0;he<ce;++he)te[X+he]=w[I+he]+R[j+he]&255}function Xs(w,I,R,j,te,X,ce){if(w==null)Ws(null,null,R,j,te,X,ce);else{var he,ge=w[I+0],xe=ge,Je=ge;for(he=0;he<ce;++he)xe=Je+(ge=w[I+he])-xe,Je=R[j+he]+(-256&xe?0>xe?0:255:xe)&255,xe=ge,te[X+he]=Je}}function Sl(w,I,R,j){var te=I.width,X=I.o;if(e(w!=null&&I!=null),0>R||0>=j||R+j>X)return null;if(!w.Cc){if(w.ga==null){var ce;if(w.ga=new cs,(ce=w.ga==null)||(ce=I.width*I.o,e(w.Gb.length==0),w.Gb=d(ce),w.Uc=0,w.Gb==null?ce=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,ce=1),ce=!ce),!ce){ce=w.ga;var he=w.Fa,ge=w.P,xe=w.qc,Je=w.mb,pt=w.nb,rt=ge+1,st=xe-1,Ht=ce.l;if(e(he!=null&&Je!=null&&I!=null),no[0]=null,no[1]=Ws,no[2]=El,no[3]=Xs,ce.ca=Je,ce.tb=pt,ce.c=I.width,ce.i=I.height,e(0<ce.c&&0<ce.i),1>=xe)I=0;else if(ce.$a=he[ge+0]>>0&3,ce.Z=he[ge+0]>>2&3,ce.Lc=he[ge+0]>>4&3,ge=he[ge+0]>>6&3,0>ce.$a||1<ce.$a||4<=ce.Z||1<ce.Lc||ge)I=0;else if(Ht.put=$t,Ht.ac=Lt,Ht.bc=Jt,Ht.ma=ce,Ht.width=I.width,Ht.height=I.height,Ht.Da=I.Da,Ht.v=I.v,Ht.va=I.va,Ht.j=I.j,Ht.o=I.o,ce.$a)e:{e(ce.$a==1),I=Hn();t:for(;;){if(I==null){I=0;break e}if(e(ce!=null),ce.mc=I,I.c=ce.c,I.i=ce.i,I.l=ce.l,I.l.ma=ce,I.l.width=ce.c,I.l.height=ce.i,I.a=0,Ye(I.m,he,rt,st),!Ur(ce.c,ce.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&kt(I.s)?(ce.ic=1,he=I.c*I.i,I.Ta=null,I.Ua=0,I.V=d(he),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(ce.ic=0,I=as(I,ce.c)),!I))break t;I=1;break e}ce.mc=null,I=0}else I=st>=ce.c*ce.i;ce=!I}if(ce)return null;w.ga.Lc!=1?w.Ga=0:j=X-R}e(w.ga!=null),e(R+j<=X);e:{if(I=(he=w.ga).c,X=he.l.o,he.$a==0){if(rt=w.rc,st=w.Vc,Ht=w.Fa,ge=w.P+1+R*I,xe=w.mb,Je=w.nb+R*I,e(ge<=w.P+w.qc),he.Z!=0)for(e(no[he.Z]!=null),ce=0;ce<j;++ce)no[he.Z](rt,st,Ht,ge,xe,Je,I),rt=xe,st=Je,Je+=I,ge+=I;else for(ce=0;ce<j;++ce)o(xe,Je,Ht,ge,I),rt=xe,st=Je,Je+=I,ge+=I;w.rc=rt,w.Vc=st}else{if(e(he.mc!=null),I=R+j,e((ce=he.mc)!=null),e(I<=ce.i),ce.C>=I)I=1;else if(he.ic||ct(),he.ic){he=ce.V,rt=ce.Ba,st=ce.c;var Tt=ce.i,et=(Ht=1,ge=ce.$/st,xe=ce.$%st,Je=ce.m,pt=ce.s,ce.$),it=st*Tt,Qt=st*I,Gt=pt.wc,Dt=et<Qt?Fr(pt,xe,ge):null;e(et<=it),e(I<=Tt),e(kt(pt));t:for(;;){for(;!Je.h&&et<Qt;){if(xe&Gt||(Dt=Fr(pt,xe,ge)),e(Dt!=null),nt(Je),256>(Tt=_t(Dt.G[0],Dt.H[0],Je)))he[rt+et]=Tt,++et,++xe>=st&&(xe=0,++ge<=I&&!(ge%16)&&Tr(ce,ge));else{if(!(280>Tt)){Ht=0;break t}Tt=Sr(Tt-256,Je);var pr,Ar=_t(Dt.G[4],Dt.H[4],Je);if(nt(Je),!(et>=(Ar=xr(st,Ar=Sr(Ar,Je)))&&it-et>=Tt)){Ht=0;break t}for(pr=0;pr<Tt;++pr)he[rt+et+pr]=he[rt+et+pr-Ar];for(et+=Tt,xe+=Tt;xe>=st;)xe-=st,++ge<=I&&!(ge%16)&&Tr(ce,ge);et<Qt&&xe&Gt&&(Dt=Fr(pt,xe,ge))}e(Je.h==Me(Je))}Tr(ce,ge>I?I:ge);break t}!Ht||Je.h&&et<it?(Ht=0,ce.a=Je.h?5:3):ce.$=et,I=Ht}else I=yn(ce,ce.V,ce.Ba,ce.c,ce.i,I,Vs);if(!I){j=0;break e}}R+j>=X&&(w.Cc=1),j=1}if(!j)return null;if(w.Cc&&((j=w.ga)!=null&&(j.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+R*te}function U(w,I,R,j,te,X){for(;0<te--;){var ce,he=w,ge=I+(R?1:0),xe=w,Je=I+(R?0:3);for(ce=0;ce<j;++ce){var pt=xe[Je+4*ce];pt!=255&&(pt*=32897,he[ge+4*ce+0]=he[ge+4*ce+0]*pt>>23,he[ge+4*ce+1]=he[ge+4*ce+1]*pt>>23,he[ge+4*ce+2]=he[ge+4*ce+2]*pt>>23)}I+=X}}function re(w,I,R,j,te){for(;0<j--;){var X;for(X=0;X<R;++X){var ce=w[I+2*X+0],he=15&(xe=w[I+2*X+1]),ge=4369*he,xe=(240&xe|xe>>4)*ge>>16;w[I+2*X+0]=(240&ce|ce>>4)*ge>>16&240|(15&ce|ce<<4)*ge>>16>>4&15,w[I+2*X+1]=240&xe|he}I+=te}}function Ee(w,I,R,j,te,X,ce,he){var ge,xe,Je=255;for(xe=0;xe<te;++xe){for(ge=0;ge<j;++ge){var pt=w[I+ge];X[ce+4*ge]=pt,Je&=pt}I+=R,ce+=he}return Je!=255}function $e(w,I,R,j,te){var X;for(X=0;X<te;++X)R[j+X]=w[I+X]>>8}function ct(){Ni=U,En=re,Sn=Ee,Kn=$e}function Mt(w,I,R){me[w]=function(j,te,X,ce,he,ge,xe,Je,pt,rt,st,Ht,Tt,et,it,Qt,Gt){var Dt,pr=Gt-1>>1,Ar=he[ge+0]|xe[Je+0]<<16,Dr=pt[rt+0]|st[Ht+0]<<16;e(j!=null);var hr=3*Ar+Dr+131074>>2;for(I(j[te+0],255&hr,hr>>16,Tt,et),X!=null&&(hr=3*Dr+Ar+131074>>2,I(X[ce+0],255&hr,hr>>16,it,Qt)),Dt=1;Dt<=pr;++Dt){var nn=he[ge+Dt]|xe[Je+Dt]<<16,Mr=pt[rt+Dt]|st[Ht+Dt]<<16,fn=Ar+nn+Dr+Mr+524296,un=fn+2*(nn+Dr)>>3;hr=un+Ar>>1,Ar=(fn=fn+2*(Ar+Mr)>>3)+nn>>1,I(j[te+2*Dt-1],255&hr,hr>>16,Tt,et+(2*Dt-1)*R),I(j[te+2*Dt-0],255&Ar,Ar>>16,Tt,et+(2*Dt-0)*R),X!=null&&(hr=fn+Dr>>1,Ar=un+Mr>>1,I(X[ce+2*Dt-1],255&hr,hr>>16,it,Qt+(2*Dt-1)*R),I(X[ce+2*Dt+0],255&Ar,Ar>>16,it,Qt+(2*Dt+0)*R)),Ar=nn,Dr=Mr}1&Gt||(hr=3*Ar+Dr+131074>>2,I(j[te+Gt-1],255&hr,hr>>16,Tt,et+(Gt-1)*R),X!=null&&(hr=3*Dr+Ar+131074>>2,I(X[ce+Gt-1],255&hr,hr>>16,it,Qt+(Gt-1)*R)))}}function Kt(){ua[$A]=Vc,ua[Zo]=Gc,ua[xu]=Fu,ua[Ac]=Kc,ua[kl]=mA,ua[Oc]=yA,ua[Ql]=Ui,ua[gA]=Gc,ua[WA]=Kc,ua[XA]=mA,ua[JA]=yA}function lr(w){return w&-16384?0>w?0:255:w>>il}function Lr(w,I){return lr((19077*w>>8)+(26149*I>>8)-14234)}function Gr(w,I,R){return lr((19077*w>>8)-(6419*I>>8)-(13320*R>>8)+8708)}function zr(w,I){return lr((19077*w>>8)+(33050*I>>8)-17685)}function ln(w,I,R,j,te){j[te+0]=Lr(w,R),j[te+1]=Gr(w,I,R),j[te+2]=zr(w,I)}function ri(w,I,R,j,te){j[te+0]=zr(w,I),j[te+1]=Gr(w,I,R),j[te+2]=Lr(w,R)}function Gn(w,I,R,j,te){var X=Gr(w,I,R);I=X<<3&224|zr(w,I)>>3,j[te+0]=248&Lr(w,R)|X>>5,j[te+1]=I}function pi(w,I,R,j,te){var X=240&zr(w,I)|15;j[te+0]=240&Lr(w,R)|Gr(w,I,R)>>4,j[te+1]=X}function li(w,I,R,j,te){j[te+0]=255,ln(w,I,R,j,te+1)}function Mi(w,I,R,j,te){ri(w,I,R,j,te),j[te+3]=255}function us(w,I,R,j,te){ln(w,I,R,j,te),j[te+3]=255}function Wa(w,I){return 0>w?0:w>I?I:w}function Fs(w,I,R){me[w]=function(j,te,X,ce,he,ge,xe,Je,pt){for(var rt=Je+(-2&pt)*R;Je!=rt;)I(j[te+0],X[ce+0],he[ge+0],xe,Je),I(j[te+1],X[ce+0],he[ge+0],xe,Je+R),te+=2,++ce,++ge,Je+=2*R;1&pt&&I(j[te+0],X[ce+0],he[ge+0],xe,Je)}}function Ko(w,I,R){return R==0?w==0?I==0?6:5:I==0?4:0:R}function jA(w,I,R,j,te){switch(w>>>30){case 3:_o(I,R,j,te,0);break;case 2:gi(I,R,j,te);break;case 1:la(I,R,j,te)}}function VA(w,I){var R,j,te=I.M,X=I.Nb,ce=w.oc,he=w.pc+40,ge=w.oc,xe=w.pc+584,Je=w.oc,pt=w.pc+600;for(R=0;16>R;++R)ce[he+32*R-1]=129;for(R=0;8>R;++R)ge[xe+32*R-1]=129,Je[pt+32*R-1]=129;for(0<te?ce[he-1-32]=ge[xe-1-32]=Je[pt-1-32]=129:(c(ce,he-32-1,127,21),c(ge,xe-32-1,127,9),c(Je,pt-32-1,127,9)),j=0;j<w.za;++j){var rt=I.ya[I.aa+j];if(0<j){for(R=-1;16>R;++R)o(ce,he+32*R-4,ce,he+32*R+12,4);for(R=-1;8>R;++R)o(ge,xe+32*R-4,ge,xe+32*R+4,4),o(Je,pt+32*R-4,Je,pt+32*R+4,4)}var st=w.Gd,Ht=w.Hd+j,Tt=rt.ad,et=rt.Hc;if(0<te&&(o(ce,he-32,st[Ht].y,0,16),o(ge,xe-32,st[Ht].f,0,8),o(Je,pt-32,st[Ht].ea,0,8)),rt.Za){var it=ce,Qt=he-32+16;for(0<te&&(j>=w.za-1?c(it,Qt,st[Ht].y[15],4):o(it,Qt,st[Ht+1].y,0,4)),R=0;4>R;R++)it[Qt+128+R]=it[Qt+256+R]=it[Qt+384+R]=it[Qt+0+R];for(R=0;16>R;++R,et<<=2)it=ce,Qt=he+_A[R],Xa[rt.Ob[R]](it,Qt),jA(et,Tt,16*+R,it,Qt)}else if(it=Ko(j,te,rt.Ob[0]),xi[it](ce,he),et!=0)for(R=0;16>R;++R,et<<=2)jA(et,Tt,16*+R,ce,he+_A[R]);for(R=rt.Gc,it=Ko(j,te,rt.Dd),Ja[it](ge,xe),Ja[it](Je,pt),et=Tt,it=ge,Qt=xe,255&(rt=R>>0)&&(170&rt?Ml(et,256,it,Qt):ds(et,256,it,Qt)),rt=Je,et=pt,255&(R>>=8)&&(170&R?Ml(Tt,320,rt,et):ds(Tt,320,rt,et)),te<w.Ub-1&&(o(st[Ht].y,0,ce,he+480,16),o(st[Ht].f,0,ge,xe+224,8),o(st[Ht].ea,0,Je,pt+224,8)),R=8*X*w.B,st=w.sa,Ht=w.ta+16*j+16*X*w.R,Tt=w.qa,rt=w.ra+8*j+R,et=w.Ha,it=w.Ia+8*j+R,R=0;16>R;++R)o(st,Ht+R*w.R,ce,he+32*R,16);for(R=0;8>R;++R)o(Tt,rt+R*w.B,ge,xe+32*R,8),o(et,it+R*w.B,Je,pt+32*R,8)}}function lA(w,I,R,j,te,X,ce,he,ge){var xe=[0],Je=[0],pt=0,rt=ge!=null?ge.kd:0,st=ge??new Ua;if(w==null||12>R)return 7;st.data=w,st.w=I,st.ha=R,I=[I],R=[R],st.gb=[st.gb];e:{var Ht=I,Tt=R,et=st.gb;if(e(w!=null),e(Tt!=null),e(et!=null),et[0]=0,12<=Tt[0]&&!i(w,Ht[0],"RIFF")){if(i(w,Ht[0]+8,"WEBP")){et=3;break e}var it=Ot(w,Ht[0]+4);if(12>it||4294967286<it){et=3;break e}if(rt&&it>Tt[0]-8){et=7;break e}et[0]=it,Ht[0]+=12,Tt[0]-=12}et=0}if(et!=0)return et;for(it=0<st.gb[0],R=R[0];;){e:{var Qt=w;Tt=I,et=R;var Gt=xe,Dt=Je,pr=Ht=[0];if((hr=pt=[pt])[0]=0,8>et[0])et=7;else{if(!i(Qt,Tt[0],"VP8X")){if(Ot(Qt,Tt[0]+4)!=10){et=3;break e}if(18>et[0]){et=7;break e}var Ar=Ot(Qt,Tt[0]+8),Dr=1+Ut(Qt,Tt[0]+12);if(2147483648<=Dr*(Qt=1+Ut(Qt,Tt[0]+15))){et=3;break e}pr!=null&&(pr[0]=Ar),Gt!=null&&(Gt[0]=Dr),Dt!=null&&(Dt[0]=Qt),Tt[0]+=18,et[0]-=18,hr[0]=1}et=0}}if(pt=pt[0],Ht=Ht[0],et!=0)return et;if(Tt=!!(2&Ht),!it&&pt)return 3;if(X!=null&&(X[0]=!!(16&Ht)),ce!=null&&(ce[0]=Tt),he!=null&&(he[0]=0),ce=xe[0],Ht=Je[0],pt&&Tt&&ge==null){et=0;break}if(4>R){et=7;break}if(it&&pt||!it&&!pt&&!i(w,I[0],"ALPH")){R=[R],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];e:{Ar=w,et=I,it=R;var hr=st.gb;Gt=st.na,Dt=st.P,pr=st.Sa,Dr=22,e(Ar!=null),e(it!=null),Qt=et[0];var nn=it[0];for(e(Gt!=null),e(pr!=null),Gt[0]=null,Dt[0]=null,pr[0]=0;;){if(et[0]=Qt,it[0]=nn,8>nn){et=7;break e}var Mr=Ot(Ar,Qt+4);if(4294967286<Mr){et=3;break e}var fn=8+Mr+1&-2;if(Dr+=fn,0<hr&&Dr>hr){et=3;break e}if(!i(Ar,Qt,"VP8 ")||!i(Ar,Qt,"VP8L")){et=0;break e}if(nn[0]<fn){et=7;break e}i(Ar,Qt,"ALPH")||(Gt[0]=Ar,Dt[0]=Qt+8,pr[0]=Mr),Qt+=fn,nn-=fn}}if(R=R[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],et!=0)break}R=[R],st.Ja=[st.Ja],st.xa=[st.xa];e:if(hr=w,et=I,it=R,Gt=st.gb[0],Dt=st.Ja,pr=st.xa,Ar=et[0],Qt=!i(hr,Ar,"VP8 "),Dr=!i(hr,Ar,"VP8L"),e(hr!=null),e(it!=null),e(Dt!=null),e(pr!=null),8>it[0])et=7;else{if(Qt||Dr){if(hr=Ot(hr,Ar+4),12<=Gt&&hr>Gt-12){et=3;break e}if(rt&&hr>it[0]-8){et=7;break e}Dt[0]=hr,et[0]+=8,it[0]-=8,pr[0]=Dr}else pr[0]=5<=it[0]&&hr[Ar+0]==47&&!(hr[Ar+4]>>5),Dt[0]=it[0];et=0}if(R=R[0],st.Ja=st.Ja[0],st.xa=st.xa[0],I=I[0],et!=0)break;if(4294967286<st.Ja)return 3;if(he==null||Tt||(he[0]=st.xa?2:1),ce=[ce],Ht=[Ht],st.xa){if(5>R){et=7;break}he=ce,rt=Ht,Tt=X,w==null||5>R?w=0:5<=R&&w[I+0]==47&&!(w[I+4]>>5)?(it=[0],hr=[0],Gt=[0],Ye(Dt=new Ae,w,I,R),Vt(Dt,it,hr,Gt)?(he!=null&&(he[0]=it[0]),rt!=null&&(rt[0]=hr[0]),Tt!=null&&(Tt[0]=Gt[0]),w=1):w=0):w=0}else{if(10>R){et=7;break}he=Ht,w==null||10>R||!xl(w,I+3,R-3)?w=0:(rt=w[I+0]|w[I+1]<<8|w[I+2]<<16,Tt=16383&(w[I+7]<<8|w[I+6]),w=16383&(w[I+9]<<8|w[I+8]),1&rt||3<(rt>>1&7)||!(rt>>4&1)||rt>>5>=st.Ja||!Tt||!w?w=0:(ce&&(ce[0]=Tt),he&&(he[0]=w),w=1))}if(!w||(ce=ce[0],Ht=Ht[0],pt&&(xe[0]!=ce||Je[0]!=Ht)))return 3;ge!=null&&(ge[0]=st,ge.offset=I-ge.w,e(4294967286>I-ge.w),e(ge.offset==ge.ha-R));break}return et==0||et==7&&pt&&ge==null?(X!=null&&(X[0]|=st.na!=null&&0<st.na.length),j!=null&&(j[0]=ce),te!=null&&(te[0]=Ht),0):et}function cA(w,I,R){var j=I.width,te=I.height,X=0,ce=0,he=j,ge=te;if(I.Da=w!=null&&0<w.Da,I.Da&&(he=w.cd,ge=w.bd,X=w.v,ce=w.j,11>R||(X&=-2,ce&=-2),0>X||0>ce||0>=he||0>=ge||X+he>j||ce+ge>te))return 0;if(I.v=X,I.j=ce,I.va=X+he,I.o=ce+ge,I.U=he,I.T=ge,I.da=w!=null&&0<w.da,I.da){if(!sr(he,ge,R=[w.ib],X=[w.hb]))return 0;I.ib=R[0],I.hb=X[0]}return I.ob=w!=null&&w.ob,I.Kb=w==null||!w.Sd,I.da&&(I.ob=I.ib<3*j/4&&I.hb<3*te/4,I.Kb=0),1}function hs(w){if(w==null)return 2;if(11>w.S){var I=w.f.RGBA;I.fb+=(w.height-1)*I.A,I.A=-I.A}else I=w.f.kb,w=w.height,I.O+=(w-1)*I.fa,I.fa=-I.fa,I.N+=(w-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(w-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(w-1)*I.lb,I.lb=-I.lb);return 0}function uA(w,I,R,j){if(j==null||0>=w||0>=I)return 2;if(R!=null){if(R.Da){var te=R.cd,X=R.bd,ce=-2&R.v,he=-2&R.j;if(0>ce||0>he||0>=te||0>=X||ce+te>w||he+X>I)return 2;w=te,I=X}if(R.da){if(!sr(w,I,te=[R.ib],X=[R.hb]))return 2;w=te[0],I=X[0]}}j.width=w,j.height=I;e:{var ge=j.width,xe=j.height;if(w=j.S,0>=ge||0>=xe||!(w>=$A&&13>w))w=2;else{if(0>=j.Rd&&j.sd==null){ce=X=te=I=0;var Je=(he=ge*Tu[w])*xe;if(11>w||(X=(xe+1)/2*(I=(ge+1)/2),w==12&&(ce=(te=ge)*xe)),(xe=d(Je+2*X+ce))==null){w=1;break e}j.sd=xe,11>w?((ge=j.f.RGBA).eb=xe,ge.fb=0,ge.A=he,ge.size=Je):((ge=j.f.kb).y=xe,ge.O=0,ge.fa=he,ge.Fd=Je,ge.f=xe,ge.N=0+Je,ge.Ab=I,ge.Cd=X,ge.ea=xe,ge.W=0+Je+X,ge.Db=I,ge.Ed=X,w==12&&(ge.F=xe,ge.J=0+Je+2*X),ge.Tc=ce,ge.lb=te)}if(I=1,te=j.S,X=j.width,ce=j.height,te>=$A&&13>te)if(11>te)w=j.f.RGBA,I&=(he=Math.abs(w.A))*(ce-1)+X<=w.size,I&=he>=X*Tu[te],I&=w.eb!=null;else{w=j.f.kb,he=(X+1)/2,Je=(ce+1)/2,ge=Math.abs(w.fa),xe=Math.abs(w.Ab);var pt=Math.abs(w.Db),rt=Math.abs(w.lb),st=rt*(ce-1)+X;I&=ge*(ce-1)+X<=w.Fd,I&=xe*(Je-1)+he<=w.Cd,I=(I&=pt*(Je-1)+he<=w.Ed)&ge>=X&xe>=he&pt>=he,I&=w.y!=null,I&=w.f!=null,I&=w.ea!=null,te==12&&(I&=rt>=X,I&=st<=w.Tc,I&=w.F!=null)}else I=0;w=I?0:2}}return w!=0||R!=null&&R.fd&&(w=hs(j)),w}var Di=64,Es=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hA=24,mo=32,Tl=8,Qa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];er("Predictor0","PredictorAdd0"),me.Predictor0=function(){return 4278190080},me.Predictor1=function(w){return w},me.Predictor2=function(w,I,R){return I[R+0]},me.Predictor3=function(w,I,R){return I[R+1]},me.Predictor4=function(w,I,R){return I[R-1]},me.Predictor5=function(w,I,R){return or(or(w,I[R+1]),I[R+0])},me.Predictor6=function(w,I,R){return or(w,I[R-1])},me.Predictor7=function(w,I,R){return or(w,I[R+0])},me.Predictor8=function(w,I,R){return or(I[R-1],I[R+0])},me.Predictor9=function(w,I,R){return or(I[R+0],I[R+1])},me.Predictor10=function(w,I,R){return or(or(w,I[R-1]),or(I[R+0],I[R+1]))},me.Predictor11=function(w,I,R){var j=I[R+0];return 0>=Hr(j>>24&255,w>>24&255,(I=I[R-1])>>24&255)+Hr(j>>16&255,w>>16&255,I>>16&255)+Hr(j>>8&255,w>>8&255,I>>8&255)+Hr(255&j,255&w,255&I)?j:w},me.Predictor12=function(w,I,R){var j=I[R+0];return(wr((w>>24&255)+(j>>24&255)-((I=I[R-1])>>24&255))<<24|wr((w>>16&255)+(j>>16&255)-(I>>16&255))<<16|wr((w>>8&255)+(j>>8&255)-(I>>8&255))<<8|wr((255&w)+(255&j)-(255&I)))>>>0},me.Predictor13=function(w,I,R){var j=I[R-1];return(kr((w=or(w,I[R+0]))>>24&255,j>>24&255)<<24|kr(w>>16&255,j>>16&255)<<16|kr(w>>8&255,j>>8&255)<<8|kr(w>>0&255,j>>0&255))>>>0};var Ll=me.PredictorAdd0;me.PredictorAdd1=Wr,er("Predictor2","PredictorAdd2"),er("Predictor3","PredictorAdd3"),er("Predictor4","PredictorAdd4"),er("Predictor5","PredictorAdd5"),er("Predictor6","PredictorAdd6"),er("Predictor7","PredictorAdd7"),er("Predictor8","PredictorAdd8"),er("Predictor9","PredictorAdd9"),er("Predictor10","PredictorAdd10"),er("Predictor11","PredictorAdd11"),er("Predictor12","PredictorAdd12"),er("Predictor13","PredictorAdd13");var GA=me.PredictorAdd2;Zr("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),Zr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Pl,Da=me.ColorIndexInverseTransform,fA=me.MapARGB,cn=me.VP8LColorIndexInverseTransformAlpha,fs=me.MapAlpha,Js=me.VP8LPredictorsAdd=[];Js.length=16,(me.VP8LPredictors=[]).length=16,(me.VP8LPredictorsAdd_C=[]).length=16,(me.VP8LPredictors_C=[]).length=16;var yo,oa,Aa,Ys,xa,Ss,KA,_o,gi,Ml,la,ds,dA,pA,qo,eo,bo,Ra,to,Ts,Ri,vo,qA,Na,Ni,En,Sn,Kn,ci=d(511),ps=d(2041),ro=d(225),Ls=d(767),Ul=0,ZA=ps,Jr=ro,ca=Ls,Ba=ci,$A=0,Zo=1,xu=2,Ac=3,kl=4,Oc=5,Ql=6,gA=7,WA=8,XA=9,JA=10,zc=[2,3,7],Dl=[3,3,11],YA=[280,256,256,256,40],Rl=[0,1,1,1,0],Hc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Nl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],lc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Bu=8,el=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ol=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tl=null,Cu=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],cc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Iu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hl=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ui=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$o=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xi=[],Xa=[],Ja=[],jc=1,Ps=2,no=[],ua=[];Mt("UpsampleRgbLinePair",ln,3),Mt("UpsampleBgrLinePair",ri,3),Mt("UpsampleRgbaLinePair",us,4),Mt("UpsampleBgraLinePair",Mi,4),Mt("UpsampleArgbLinePair",li,4),Mt("UpsampleRgba4444LinePair",pi,2),Mt("UpsampleRgb565LinePair",Gn,2);var Vc=me.UpsampleRgbLinePair,Fu=me.UpsampleBgrLinePair,Gc=me.UpsampleRgbaLinePair,Kc=me.UpsampleBgraLinePair,mA=me.UpsampleArgbLinePair,yA=me.UpsampleRgba4444LinePair,Ui=me.UpsampleRgb565LinePair,wo=16,rl=1<<wo-1,nl=-227,uc=482,il=6,hc=0,fc=d(256),Eu=d(256),al=d(256),Su=d(256),ha=d(uc-nl),Ms=d(uc-nl);Fs("YuvToRgbRow",ln,3),Fs("YuvToBgrRow",ri,3),Fs("YuvToRgbaRow",us,4),Fs("YuvToBgraRow",Mi,4),Fs("YuvToArgbRow",li,4),Fs("YuvToRgba4444Row",pi,2),Fs("YuvToRgb565Row",Gn,2);var _A=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oa=[0,2,8],sl=[8,7,6,4,4,2,2,2,1,1,1,1],dc=1;this.WebPDecodeRGBA=function(w,I,R,j,te){var X=Zo,ce=new $s,he=new pe;ce.ba=he,he.S=X,he.width=[he.width],he.height=[he.height];var ge=he.width,xe=he.height,Je=new ht;if(Je==null||w==null)var pt=2;else e(Je!=null),pt=lA(w,I,R,Je.width,Je.height,Je.Pd,Je.Qd,Je.format,null);if(pt!=0?ge=0:(ge!=null&&(ge[0]=Je.width[0]),xe!=null&&(xe[0]=Je.height[0]),ge=1),ge){he.width=he.width[0],he.height=he.height[0],j!=null&&(j[0]=he.width),te!=null&&(te[0]=he.height);e:{if(j=new Ro,(te=new Ua).data=w,te.w=I,te.ha=R,te.kd=1,I=[0],e(te!=null),((w=lA(te.data,te.w,te.ha,null,null,null,I,null,te))==0||w==7)&&I[0]&&(w=4),(I=w)==0){if(e(ce!=null),j.data=te.data,j.w=te.w+te.offset,j.ha=te.ha-te.offset,j.put=$t,j.ac=Lt,j.bc=Jt,j.ma=ce,te.xa){if((w=Hn())==null){ce=1;break e}if(function(rt,st){var Ht=[0],Tt=[0],et=[0];t:for(;;){if(rt==null)return 0;if(st==null)return rt.a=2,0;if(rt.l=st,rt.a=0,Ye(rt.m,st.data,st.w,st.ha),!Vt(rt.m,Ht,Tt,et)){rt.a=3;break t}if(rt.xb=Ps,st.width=Ht[0],st.height=Tt[0],!Ur(Ht[0],Tt[0],1,rt,null))break t;return 1}return e(rt.a!=0),0}(w,j)){if(j=(I=uA(j.width,j.height,ce.Oa,ce.ba))==0){t:{j=w;r:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((R=j.l)!=null),e((te=R.ma)!=null),j.xb!=0){if(j.ca=te.ba,j.tb=te.tb,e(j.ca!=null),!cA(te.Oa,R,Ac)){j.a=2;break r}if(!as(j,R.width)||R.da)break r;if((R.da||fe(j.ca.S))&&ct(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&ct()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!Xt(j.s.vb,j.s.Wa.Xa)){j.a=1;break r}j.xb=0}if(!yn(j,j.V,j.Ba,j.c,j.i,R.o,Cr))break r;te.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(I=w.a)}else I=w.a}else{if((w=new nc)==null){ce=1;break e}if(w.Fa=te.na,w.P=te.P,w.qc=te.Sa,ic(w,j)){if((I=uA(j.width,j.height,ce.Oa,ce.ba))==0){if(w.Aa=0,R=ce.Oa,e((te=w)!=null),R!=null){if(0<(ge=0>(ge=R.Md)?0:100<ge?255:255*ge/100)){for(xe=Je=0;4>xe;++xe)12>(pt=te.pb[xe]).lc&&(pt.ia=ge*sl[0>pt.lc?0:pt.lc]>>3),Je|=pt.ia;Je&&(alert("todo:VP8InitRandom"),te.ia=1)}te.Ga=R.Id,100<te.Ga?te.Ga=100:0>te.Ga&&(te.Ga=0)}sc(w,j)||(I=w.a)}}else I=w.a}I==0&&ce.Oa!=null&&ce.Oa.fd&&(I=hs(ce.ba))}ce=I}X=ce!=0?null:11>X?he.f.RGBA.eb:he.f.kb.y}else X=null;return X};var Tu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function C(me,Qe){for(var tt="",se=0;se<4;se++)tt+=String.fromCharCode(me[Qe++]);return tt}function P(me,Qe){return(me[Qe+0]<<0|me[Qe+1]<<8|me[Qe+2]<<16)>>>0}function M(me,Qe){return(me[Qe+0]<<0|me[Qe+1]<<8|me[Qe+2]<<16|me[Qe+3]<<24)>>>0}new v;var Q=[0],E=[0],z=[],V=new v,ee=n,Z=function(me,Qe){var tt={},se=0,ue=!1,Fe=0,Se=0;if(tt.frames=[],!function(Ie,Me,je,nt){for(var ut=0;ut<nt;ut++)if(Ie[Me+ut]!=je.charCodeAt(ut))return!0;return!1}(me,Qe,"RIFF",4)){for(M(me,Qe+=4),Qe+=8;Qe<me.length;){var yt=C(me,Qe),lt=M(me,Qe+=4);Qe+=4;var mt=lt+(1&lt);switch(yt){case"VP8 ":case"VP8L":tt.frames[se]===void 0&&(tt.frames[se]={}),(Ct=tt.frames[se]).src_off=ue?Se:Qe-8,Ct.src_size=Fe+lt+8,se++,ue&&(ue=!1,Fe=0,Se=0);break;case"VP8X":(Ct=tt.header={}).feature_flags=me[Qe];var Ye=Qe+4;Ct.canvas_width=1+P(me,Ye),Ye+=3,Ct.canvas_height=1+P(me,Ye),Ye+=3;break;case"ALPH":ue=!0,Fe=mt+8,Se=Qe-8;break;case"ANIM":(Ct=tt.header).bgcolor=M(me,Qe),Ye=Qe+4,Ct.loop_count=(nr=me)[(Ae=Ye)+0]<<0|nr[Ae+1]<<8,Ye+=2;break;case"ANMF":var gt,Ct;(Ct=tt.frames[se]={}).offset_x=2*P(me,Qe),Qe+=3,Ct.offset_y=2*P(me,Qe),Qe+=3,Ct.width=1+P(me,Qe),Qe+=3,Ct.height=1+P(me,Qe),Qe+=3,Ct.duration=P(me,Qe),Qe+=3,gt=me[Qe++],Ct.dispose=1&gt,Ct.blend=gt>>1&1}yt!="ANMF"&&(Qe+=mt)}var nr,Ae;return tt}}(ee,0);Z.response=ee,Z.rgbaoutput=!0,Z.dataurl=!1;var ne=Z.header?Z.header:null,Be=Z.frames?Z.frames:null;if(ne){ne.loop_counter=ne.loop_count,Q=[ne.canvas_height],E=[ne.canvas_width];for(var ze=0;ze<Be.length&&Be[ze].blend!=0;ze++);}var Ne=Be[0],Oe=V.WebPDecodeRGBA(ee,Ne.src_off,Ne.src_size,E,Q);Ne.rgba=Oe,Ne.imgwidth=E[0],Ne.imgheight=Q[0];for(var ve=0;ve<E[0]*Q[0]*4;ve++)z[ve]=Oe[ve];return this.width=E,this.height=Q,this.data=z,this}(function(n){var e=function(){return typeof Vm=="function"},i=function(Q,E,z,V){var ee=4,Z=f;switch(V){case n.image_compression.FAST:ee=1,Z=d;break;case n.image_compression.MEDIUM:ee=6,Z=s;break;case n.image_compression.SLOW:ee=9,Z=v}Q=o(Q,E,z,Z);var ne=Vm(Q,{level:ee});return n.__addimage__.arrayBufferToBinaryString(ne)},o=function(Q,E,z,V){for(var ee,Z,ne,Be=Q.length/E,ze=new Uint8Array(Q.length+Be),Ne=P(),Oe=0;Oe<Be;Oe+=1){if(ne=Oe*E,ee=Q.subarray(ne,ne+E),V)ze.set(V(ee,z,Z),ne+Oe);else{for(var ve,me=Ne.length,Qe=[];ve<me;ve+=1)Qe[ve]=Ne[ve](ee,z,Z);var tt=M(Qe.concat());ze.set(Qe[tt],ne+Oe)}Z=ee}return ze},c=function(Q){var E=Array.apply([],Q);return E.unshift(0),E},d=function(Q,E){var z,V=[],ee=Q.length;V[0]=1;for(var Z=0;Z<ee;Z+=1)z=Q[Z-E]||0,V[Z+1]=Q[Z]-z+256&255;return V},f=function(Q,E,z){var V,ee=[],Z=Q.length;ee[0]=2;for(var ne=0;ne<Z;ne+=1)V=z&&z[ne]||0,ee[ne+1]=Q[ne]-V+256&255;return ee},s=function(Q,E,z){var V,ee,Z=[],ne=Q.length;Z[0]=3;for(var Be=0;Be<ne;Be+=1)V=Q[Be-E]||0,ee=z&&z[Be]||0,Z[Be+1]=Q[Be]+256-(V+ee>>>1)&255;return Z},v=function(Q,E,z){var V,ee,Z,ne,Be=[],ze=Q.length;Be[0]=4;for(var Ne=0;Ne<ze;Ne+=1)V=Q[Ne-E]||0,ee=z&&z[Ne]||0,Z=z&&z[Ne-E]||0,ne=C(V,ee,Z),Be[Ne+1]=Q[Ne]-ne+256&255;return Be},C=function(Q,E,z){if(Q===E&&E===z)return Q;var V=Math.abs(E-z),ee=Math.abs(Q-z),Z=Math.abs(Q+E-z-z);return V<=ee&&V<=Z?Q:ee<=Z?E:z},P=function(){return[c,d,f,s,v]},M=function(Q){var E=Q.map(function(z){return z.reduce(function(V,ee){return V+Math.abs(ee)},0)});return E.indexOf(Math.min.apply(null,E))};n.processPNG=function(Q,E,z,V){var ee,Z,ne,Be,ze,Ne,Oe,ve,me,Qe,tt,se,ue,Fe,Se,yt=this.decode.FLATE_DECODE,lt="";if(this.__addimage__.isArrayBuffer(Q)&&(Q=new Uint8Array(Q)),this.__addimage__.isArrayBufferView(Q)){if(Q=(ne=new RP(Q)).imgData,Z=ne.bits,ee=ne.colorSpace,ze=ne.colors,[4,6].indexOf(ne.colorType)!==-1){if(ne.bits===8){me=(ve=ne.pixelBitlength==32?new Uint32Array(ne.decodePixels().buffer):ne.pixelBitlength==16?new Uint16Array(ne.decodePixels().buffer):new Uint8Array(ne.decodePixels().buffer)).length,tt=new Uint8Array(me*ne.colors),Qe=new Uint8Array(me);var mt,Ye=ne.pixelBitlength-ne.bits;for(Fe=0,Se=0;Fe<me;Fe++){for(ue=ve[Fe],mt=0;mt<Ye;)tt[Se++]=ue>>>mt&255,mt+=ne.bits;Qe[Fe]=ue>>>mt&255}}if(ne.bits===16){me=(ve=new Uint32Array(ne.decodePixels().buffer)).length,tt=new Uint8Array(me*(32/ne.pixelBitlength)*ne.colors),Qe=new Uint8Array(me*(32/ne.pixelBitlength)),se=ne.colors>1,Fe=0,Se=0;for(var gt=0;Fe<me;)ue=ve[Fe++],tt[Se++]=ue>>>0&255,se&&(tt[Se++]=ue>>>16&255,ue=ve[Fe++],tt[Se++]=ue>>>0&255),Qe[gt++]=ue>>>16&255;Z=8}V!==n.image_compression.NONE&&e()?(Q=i(tt,ne.width*ne.colors,ne.colors,V),Oe=i(Qe,ne.width,1,V)):(Q=tt,Oe=Qe,yt=void 0)}if(ne.colorType===3&&(ee=this.color_spaces.INDEXED,Ne=ne.palette,ne.transparency.indexed)){var Ct=ne.transparency.indexed,nr=0;for(Fe=0,me=Ct.length;Fe<me;++Fe)nr+=Ct[Fe];if((nr/=255)===me-1&&Ct.indexOf(0)!==-1)Be=[Ct.indexOf(0)];else if(nr!==me){for(ve=ne.decodePixels(),Qe=new Uint8Array(ve.length),Fe=0,me=ve.length;Fe<me;Fe++)Qe[Fe]=Ct[ve[Fe]];Oe=i(Qe,ne.width,1)}}var Ae=function(Ie){var Me;switch(Ie){case n.image_compression.FAST:Me=11;break;case n.image_compression.MEDIUM:Me=13;break;case n.image_compression.SLOW:Me=14;break;default:Me=12}return Me}(V);return yt===this.decode.FLATE_DECODE&&(lt="/Predictor "+Ae+" "),lt+="/Colors "+ze+" /BitsPerComponent "+Z+" /Columns "+ne.width,(this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),(Oe&&this.__addimage__.isArrayBuffer(Oe)||this.__addimage__.isArrayBufferView(Oe))&&(Oe=this.__addimage__.arrayBufferToBinaryString(Oe)),{alias:z,data:Q,index:E,filter:yt,decodeParameters:lt,transparency:Be,palette:Ne,sMask:Oe,predictor:Ae,width:ne.width,height:ne.height,bitsPerComponent:Z,colorSpace:ee}}}})(Kr.API),function(n){n.processGIF89A=function(e,i,o,c){var d=new NP(e),f=d.width,s=d.height,v=[];d.decodeAndBlitFrameRGBA(0,v);var C={data:v,width:f,height:s},P=new Qm(100).encode(C,100);return n.processJPEG.call(this,P,i,o,c)},n.processGIF87A=n.processGIF89A}(Kr.API),EA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:c,green:o,blue:i,quad:d}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},EA.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(i){oi.log("bit decode error:"+i)}},EA.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),i=e%4;for(n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,c=0;c<e;c++)for(var d=this.datav.getUint8(this.pos++,!0),f=o*this.width*4+8*c*4,s=0;s<8&&8*c+s<this.width;s++){var v=this.palette[d>>7-s&1];this.data[f+4*s]=v.blue,this.data[f+4*s+1]=v.green,this.data[f+4*s+2]=v.red,this.data[f+4*s+3]=255}i!==0&&(this.pos+=4-i)}},EA.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,c=0;c<n;c++){var d=this.datav.getUint8(this.pos++,!0),f=o*this.width*4+2*c*4,s=d>>4,v=15&d,C=this.palette[s];if(this.data[f]=C.blue,this.data[f+1]=C.green,this.data[f+2]=C.red,this.data[f+3]=255,2*c+1>=this.width)break;C=this.palette[v],this.data[f+4]=C.blue,this.data[f+4+1]=C.green,this.data[f+4+2]=C.red,this.data[f+4+3]=255}e!==0&&(this.pos+=4-e)}},EA.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var c=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+4*o;if(c<this.palette.length){var f=this.palette[c];this.data[d]=f.red,this.data[d+1]=f.green,this.data[d+2]=f.blue,this.data[d+3]=255}else this.data[d]=255,this.data[d+1]=255,this.data[d+2]=255,this.data[d+3]=255}n!==0&&(this.pos+=4-n)}},EA.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,c=0;c<this.width;c++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(d&e)/e*255|0,s=(d>>5&e)/e*255|0,v=(d>>10&e)/e*255|0,C=d>>15?255:0,P=o*this.width*4+4*c;this.data[P]=v,this.data[P+1]=s,this.data[P+2]=f,this.data[P+3]=C}this.pos+=n}},EA.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),i=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var c=this.bottom_up?o:this.height-1-o,d=0;d<this.width;d++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(f&e)/e*255|0,v=(f>>5&i)/i*255|0,C=(f>>11)/e*255|0,P=c*this.width*4+4*d;this.data[P]=C,this.data[P+1]=v,this.data[P+2]=s,this.data[P+3]=255}this.pos+=n}},EA.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),f=e*this.width*4+4*i;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=255}this.pos+=this.width%4}},EA.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;this.data[s]=d,this.data[s+1]=c,this.data[s+2]=o,this.data[s+3]=f}},EA.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,i,o,c){var d=new EA(e,!1),f=d.width,s=d.height,v={data:d.getData(),width:f,height:s},C=new Qm(100).encode(v,100);return n.processJPEG.call(this,C,i,o,c)}}(Kr.API),h2.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,i,o,c){var d=new h2(e),f=d.width,s=d.height,v={data:d.getData(),width:f,height:s},C=new Qm(100).encode(v,100);return n.processJPEG.call(this,C,i,o,c)}}(Kr.API),Kr.API.processRGBA=function(n,e,i){for(var o=n.data,c=o.length,d=new Uint8Array(c/4*3),f=new Uint8Array(c/4),s=0,v=0,C=0;C<c;C+=4){var P=o[C],M=o[C+1],Q=o[C+2],E=o[C+3];d[s++]=P,d[s++]=M,d[s++]=Q,f[v++]=E}var z=this.__addimage__.arrayBufferToBinaryString(d);return{alpha:this.__addimage__.arrayBufferToBinaryString(f),data:z,index:e,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Kr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},rh=Kr.API,qd=rh.getCharWidthsArray=function(n,e){var i,o,c=(e=e||{}).font||this.internal.getFont(),d=e.fontSize||this.internal.getFontSize(),f=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:c.metadata.Unicode.widths,v=s.fof?s.fof:1,C=e.kerning?e.kerning:c.metadata.Unicode.kerning,P=C.fof?C.fof:1,M=e.doKerning!==!1,Q=0,E=n.length,z=0,V=s[0]||v,ee=[];for(i=0;i<E;i++)o=n.charCodeAt(i),typeof c.metadata.widthOfString=="function"?ee.push((c.metadata.widthOfGlyph(c.metadata.characterToGlyph(o))+f*(1e3/d)||0)/1e3):(Q=M&&Zn(C[o])==="object"&&!isNaN(parseInt(C[o][z],10))?C[o][z]/P:0,ee.push((s[o]||V)/v+Q)),z=o;return ee},A2=rh.getStringUnitWidth=function(n,e){var i=(e=e||{}).fontSize||this.internal.getFontSize(),o=e.font||this.internal.getFont(),c=e.charSpace||this.internal.getCharSpace();return rh.processArabic&&(n=rh.processArabic(n)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(n,i,c)/i:qd.apply(this,arguments).reduce(function(d,f){return d+f},0)},l2=function(n,e,i,o){for(var c=[],d=0,f=n.length,s=0;d!==f&&s+e[d]<i;)s+=e[d],d++;c.push(n.slice(0,d));var v=d;for(s=0;d!==f;)s+e[d]>o&&(c.push(n.slice(v,d)),s=0,v=d),s+=e[d],d++;return v!==d&&c.push(n.slice(v,d)),c},c2=function(n,e,i){i||(i={});var o,c,d,f,s,v,C,P=[],M=[P],Q=i.textIndent||0,E=0,z=0,V=n.split(" "),ee=qd.apply(this,[" ",i])[0];if(v=i.lineIndent===-1?V[0].length+2:i.lineIndent||0){var Z=Array(v).join(" "),ne=[];V.map(function(ze){(ze=ze.split(/\s*\n/)).length>1?ne=ne.concat(ze.map(function(Ne,Oe){return(Oe&&Ne.length?`
`:"")+Ne})):ne.push(ze[0])}),V=ne,v=A2.apply(this,[Z,i])}for(d=0,f=V.length;d<f;d++){var Be=0;if(o=V[d],v&&o[0]==`
`&&(o=o.substr(1),Be=1),Q+E+(z=(c=qd.apply(this,[o,i])).reduce(function(ze,Ne){return ze+Ne},0))>e||Be){if(z>e){for(s=l2.apply(this,[o,c,e-(Q+E),e]),P.push(s.shift()),P=[s.pop()];s.length;)M.push([s.shift()]);z=c.slice(o.length-(P[0]?P[0].length:0)).reduce(function(ze,Ne){return ze+Ne},0)}else P=[o];M.push(P),Q=z+v,E=ee}else P.push(o),Q+=E+z,E=ee}return C=v?function(ze,Ne){return(Ne?Z:"")+ze.join(" ")}:function(ze){return ze.join(" ")},M.map(C)},rh.splitTextToSize=function(n,e,i){var o,c=(i=i||{}).fontSize||this.internal.getFontSize(),d=(function(P){if(P.widths&&P.kerning)return{widths:P.widths,kerning:P.kerning};var M=this.internal.getFont(P.fontName,P.fontStyle);return M.metadata.Unicode?{widths:M.metadata.Unicode.widths||{0:1},kerning:M.metadata.Unicode.kerning||{}}:{font:M.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);o=Array.isArray(n)?n:String(n).split(/\r?\n/);var f=1*this.internal.scaleFactor*e/c;d.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/c:0,d.lineIndent=i.lineIndent;var s,v,C=[];for(s=0,v=o.length;s<v;s++)C=C.concat(c2.apply(this,[o[s],f,d]));return C},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",i={},o={},c=0;c<e.length;c++)i[e[c]]="0123456789abcdef"[c],o["0123456789abcdef"[c]]=e[c];var d=function(M){return"0x"+parseInt(M,10).toString(16)},f=n.__fontmetrics__.compress=function(M){var Q,E,z,V,ee=["{"];for(var Z in M){if(Q=M[Z],isNaN(parseInt(Z,10))?E="'"+Z+"'":(Z=parseInt(Z,10),E=(E=d(Z).slice(2)).slice(0,-1)+o[E.slice(-1)]),typeof Q=="number")Q<0?(z=d(Q).slice(3),V="-"):(z=d(Q).slice(2),V=""),z=V+z.slice(0,-1)+o[z.slice(-1)];else{if(Zn(Q)!=="object")throw new Error("Don't know what to do with value type "+Zn(Q)+".");z=f(Q)}ee.push(E+z)}return ee.push("}"),ee.join("")},s=n.__fontmetrics__.uncompress=function(M){if(typeof M!="string")throw new Error("Invalid argument passed to uncompress.");for(var Q,E,z,V,ee={},Z=1,ne=ee,Be=[],ze="",Ne="",Oe=M.length-1,ve=1;ve<Oe;ve+=1)(V=M[ve])=="'"?Q?(z=Q.join(""),Q=void 0):Q=[]:Q?Q.push(V):V=="{"?(Be.push([ne,z]),ne={},z=void 0):V=="}"?((E=Be.pop())[0][E[1]]=ne,z=void 0,ne=E[0]):V=="-"?Z=-1:z===void 0?i.hasOwnProperty(V)?(ze+=i[V],z=parseInt(ze,16)*Z,Z=1,ze=""):ze+=V:i.hasOwnProperty(V)?(Ne+=i[V],ne[z]=parseInt(Ne,16)*Z,Z=1,z=void 0,Ne=""):Ne+=V;return ee},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},C={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},P={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(M){var Q=M.font,E=P.Unicode[Q.postScriptName];E&&(Q.metadata.Unicode={},Q.metadata.Unicode.widths=E.widths,Q.metadata.Unicode.kerning=E.kerning);var z=C.Unicode[Q.postScriptName];z&&(Q.metadata.Unicode.encoding=z,Q.encoding=z.codePages[0])}])}(Kr.API),function(n){var e=function(i){for(var o=i.length,c=new Uint8Array(o),d=0;d<o;d++)c[d]=i.charCodeAt(d);return c};n.API.events.push(["addFont",function(i){var o=void 0,c=i.font,d=i.instance;if(!c.isStandardFont){if(d===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");if(typeof(o=d.existsFileInVFS(c.postScriptName)===!1?d.loadFile(c.postScriptName):d.getFileFromVFS(c.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");(function(f,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(xf(s)),f.metadata=n.API.TTFFont.open(s),f.metadata.Unicode=f.metadata.Unicode||{encoding:{},kerning:{},widths:[]},f.metadata.glyIdsUsed=[0]})(c,o)}}])}(Kr),function(n){function e(){return(qr.canvg?Promise.resolve(qr.canvg):Nm(()=>import("./CqXEjCeW.js"),[],import.meta.url)).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Kr.API.addSvgAsImage=function(i,o,c,d,f,s,v,C){if(isNaN(o)||isNaN(c))throw oi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(d)||isNaN(f))throw oi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var P=document.createElement("canvas");P.width=d,P.height=f;var M=P.getContext("2d");M.fillStyle="#fff",M.fillRect(0,0,P.width,P.height);var Q={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},E=this;return e().then(function(z){return z.fromString(M,i,Q)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(z){return z.render(Q)}).then(function(){E.addImage(P.toDataURL("image/jpeg",1),o,c,d,f,v,C)})}}(),Kr.API.putTotalPages=function(n){var e,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),i=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var c=0;c<this.internal.pages[o].length;c++)this.internal.pages[o][c]=this.internal.pages[o][c].replace(e,i);return this},Kr.API.viewerPreferences=function(n,e){var i;n=n||{},e=e||!1;var o,c,d,f={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(f),v=[],C=0,P=0,M=0;function Q(z,V){var ee,Z=!1;for(ee=0;ee<z.length;ee+=1)z[ee]===V&&(Z=!0);return Z}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(f)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var E=s.length;for(M=0;M<E;M+=1)i[s[M]].value=i[s[M]].defaultValue,i[s[M]].explicitSet=!1}if(Zn(n)==="object"){for(c in n)if(d=n[c],Q(s,c)&&d!==void 0){if(i[c].type==="boolean"&&typeof d=="boolean")i[c].value=d;else if(i[c].type==="name"&&Q(i[c].valueSet,d))i[c].value=d;else if(i[c].type==="integer"&&Number.isInteger(d))i[c].value=d;else if(i[c].type==="array"){for(C=0;C<d.length;C+=1)if(o=!0,d[C].length===1&&typeof d[C][0]=="number")v.push(String(d[C]-1));else if(d[C].length>1){for(P=0;P<d[C].length;P+=1)typeof d[C][P]!="number"&&(o=!1);o===!0&&v.push([d[C][0]-1,d[C][1]-1].join(" "))}i[c].value="["+v.join(" ")+"]"}else i[c].value=i[c].defaultValue;i[c].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var z,V=[];for(z in i)i[z].explicitSet===!0&&(i[z].type==="name"?V.push("/"+z+" /"+i[z].value):V.push("/"+z+" "+i[z].value));V.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+V.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(n){var e=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',c=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),d=unescape(encodeURIComponent(o)),f=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),v=unescape(encodeURIComponent("</x:xmpmeta>")),C=d.length+f.length+s.length+c.length+v.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+C+" >>"),this.internal.write("stream"),this.internal.write(c+d+f+s+v),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(o,c){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:c||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",e)),this}}(Kr.API),function(n){var e=n.API,i=e.pdfEscape16=function(d,f){for(var s,v=f.metadata.Unicode.widths,C=["","0","00","000","0000"],P=[""],M=0,Q=d.length;M<Q;++M){if(s=f.metadata.characterToGlyph(d.charCodeAt(M)),f.metadata.glyIdsUsed.push(s),f.metadata.toUnicode[s]=d.charCodeAt(M),v.indexOf(s)==-1&&(v.push(s),v.push([parseInt(f.metadata.widthOfGlyph(s),10)])),s=="0")return P.join("");s=s.toString(16),P.push(C[4-s.length],s)}return P.join("")},o=function(d){var f,s,v,C,P,M,Q;for(P=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,v=[],M=0,Q=(s=Object.keys(d).sort(function(E,z){return E-z})).length;M<Q;M++)f=s[M],v.length>=100&&(P+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar`,v=[]),d[f]!==void 0&&d[f]!==null&&typeof d[f].toString=="function"&&(C=("0000"+d[f].toString(16)).slice(-4),f=("0000"+(+f).toString(16)).slice(-4),v.push("<"+f+"><"+C+">"));return v.length&&(P+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar
`),P+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(d){(function(f){var s=f.font,v=f.out,C=f.newObject,P=f.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="Identity-H"){for(var M=s.metadata.Unicode.widths,Q=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),E="",z=0;z<Q.length;z++)E+=String.fromCharCode(Q[z]);var V=C();P({data:E,addLength1:!0,objectId:V}),v("endobj");var ee=C();P({data:o(s.metadata.toUnicode),addLength1:!0,objectId:ee}),v("endobj");var Z=C();v("<<"),v("/Type /FontDescriptor"),v("/FontName /"+oh(s.fontName)),v("/FontFile2 "+V+" 0 R"),v("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),v("/Flags "+s.metadata.flags),v("/StemV "+s.metadata.stemV),v("/ItalicAngle "+s.metadata.italicAngle),v("/Ascent "+s.metadata.ascender),v("/Descent "+s.metadata.decender),v("/CapHeight "+s.metadata.capHeight),v(">>"),v("endobj");var ne=C();v("<<"),v("/Type /Font"),v("/BaseFont /"+oh(s.fontName)),v("/FontDescriptor "+Z+" 0 R"),v("/W "+n.API.PDFObject.convert(M)),v("/CIDToGIDMap /Identity"),v("/DW 1000"),v("/Subtype /CIDFontType2"),v("/CIDSystemInfo"),v("<<"),v("/Supplement 0"),v("/Registry (Adobe)"),v("/Ordering ("+s.encoding+")"),v(">>"),v(">>"),v("endobj"),s.objectNumber=C(),v("<<"),v("/Type /Font"),v("/Subtype /Type0"),v("/ToUnicode "+ee+" 0 R"),v("/BaseFont /"+oh(s.fontName)),v("/Encoding /"+s.encoding),v("/DescendantFonts ["+ne+" 0 R]"),v(">>"),v("endobj"),s.isAlreadyPutted=!0}})(d)}]),e.events.push(["putFont",function(d){(function(f){var s=f.font,v=f.out,C=f.newObject,P=f.putStream;if(s.metadata instanceof n.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var M=s.metadata.rawData,Q="",E=0;E<M.length;E++)Q+=String.fromCharCode(M[E]);var z=C();P({data:Q,addLength1:!0,objectId:z}),v("endobj");var V=C();P({data:o(s.metadata.toUnicode),addLength1:!0,objectId:V}),v("endobj");var ee=C();v("<<"),v("/Descent "+s.metadata.decender),v("/CapHeight "+s.metadata.capHeight),v("/StemV "+s.metadata.stemV),v("/Type /FontDescriptor"),v("/FontFile2 "+z+" 0 R"),v("/Flags 96"),v("/FontBBox "+n.API.PDFObject.convert(s.metadata.bbox)),v("/FontName /"+oh(s.fontName)),v("/ItalicAngle "+s.metadata.italicAngle),v("/Ascent "+s.metadata.ascender),v(">>"),v("endobj"),s.objectNumber=C();for(var Z=0;Z<s.metadata.hmtx.widths.length;Z++)s.metadata.hmtx.widths[Z]=parseInt(s.metadata.hmtx.widths[Z]*(1e3/s.metadata.head.unitsPerEm));v("<</Subtype/TrueType/Type/Font/ToUnicode "+V+" 0 R/BaseFont/"+oh(s.fontName)+"/FontDescriptor "+ee+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),v("endobj"),s.isAlreadyPutted=!0}})(d)}]);var c=function(d){var f,s=d.text||"",v=d.x,C=d.y,P=d.options||{},M=d.mutex||{},Q=M.pdfEscape,E=M.activeFontKey,z=M.fonts,V=E,ee="",Z=0,ne="",Be=z[V].encoding;if(z[V].encoding!=="Identity-H")return{text:s,x:v,y:C,options:P,mutex:M};for(ne=s,V=E,Array.isArray(s)&&(ne=s[0]),Z=0;Z<ne.length;Z+=1)z[V].metadata.hasOwnProperty("cmap")&&(f=z[V].metadata.cmap.unicode.codeMap[ne[Z].charCodeAt(0)]),f||ne[Z].charCodeAt(0)<256&&z[V].metadata.hasOwnProperty("Unicode")?ee+=ne[Z]:ee+="";var ze="";return parseInt(V.slice(1))<14||Be==="WinAnsiEncoding"?ze=Q(ee,V).split("").map(function(Ne){return Ne.charCodeAt(0).toString(16)}).join(""):Be==="Identity-H"&&(ze=i(ee,z[V])),M.isHex=!0,{text:ze,x:v,y:C,options:P,mutex:M}};e.events.push(["postProcessText",function(d){var f=d.text||"",s=[],v={text:f,x:d.x,y:d.y,options:d.options,mutex:d.mutex};if(Array.isArray(f)){var C=0;for(C=0;C<f.length;C+=1)Array.isArray(f[C])&&f[C].length===3?s.push([c(Object.assign({},v,{text:f[C][0]})).text,f[C][1],f[C][2]]):s.push(c(Object.assign({},v,{text:f[C]})).text);d.text=s}else d.text=c(Object.assign({},v,{text:f})).text}])}(Kr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(i){return e.call(this),this.internal.vFS[i]!==void 0},n.addFileToVFS=function(i,o){return e.call(this),this.internal.vFS[i]=o,this},n.getFileFromVFS=function(i){return e.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Kr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(o){var c,d,f,s,v,C,P,M=e,Q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],E=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],z={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},V={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},ee=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],Z=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ne=!1,Be=0;this.__bidiEngine__={};var ze=function(se){var ue=se.charCodeAt(),Fe=ue>>8,Se=V[Fe];return Se!==void 0?M[256*Se+(255&ue)]:Fe===252||Fe===253?"AL":Z.test(Fe)?"L":Fe===8?"R":"N"},Ne=function(se){for(var ue,Fe=0;Fe<se.length;Fe++){if((ue=ze(se.charAt(Fe)))==="L")return!1;if(ue==="R")return!0}return!1},Oe=function(se,ue,Fe,Se){var yt,lt,mt,Ye,gt=ue[Se];switch(gt){case"L":case"R":ne=!1;break;case"N":case"AN":break;case"EN":ne&&(gt="AN");break;case"AL":ne=!0,gt="R";break;case"WS":gt="N";break;case"CS":Se<1||Se+1>=ue.length||(yt=Fe[Se-1])!=="EN"&&yt!=="AN"||(lt=ue[Se+1])!=="EN"&&lt!=="AN"?gt="N":ne&&(lt="AN"),gt=lt===yt?lt:"N";break;case"ES":gt=(yt=Se>0?Fe[Se-1]:"B")==="EN"&&Se+1<ue.length&&ue[Se+1]==="EN"?"EN":"N";break;case"ET":if(Se>0&&Fe[Se-1]==="EN"){gt="EN";break}if(ne){gt="N";break}for(mt=Se+1,Ye=ue.length;mt<Ye&&ue[mt]==="ET";)mt++;gt=mt<Ye&&ue[mt]==="EN"?"EN":"N";break;case"NSM":if(f&&!s){for(Ye=ue.length,mt=Se+1;mt<Ye&&ue[mt]==="NSM";)mt++;if(mt<Ye){var Ct=se[Se],nr=Ct>=1425&&Ct<=2303||Ct===64286;if(yt=ue[mt],nr&&(yt==="R"||yt==="AL")){gt="R";break}}}gt=Se<1||(yt=ue[Se-1])==="B"?"N":Fe[Se-1];break;case"B":ne=!1,c=!0,gt=Be;break;case"S":d=!0,gt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ne=!1;break;case"BN":gt="N"}return gt},ve=function(se,ue,Fe){var Se=se.split("");return Fe&&me(Se,Fe,{hiLevel:Be}),Se.reverse(),ue&&ue.reverse(),Se.join("")},me=function(se,ue,Fe){var Se,yt,lt,mt,Ye,gt=-1,Ct=se.length,nr=0,Ae=[],Ie=Be?E:Q,Me=[];for(ne=!1,c=!1,d=!1,yt=0;yt<Ct;yt++)Me[yt]=ze(se[yt]);for(lt=0;lt<Ct;lt++){if(Ye=nr,Ae[lt]=Oe(se,Me,Ae,lt),Se=240&(nr=Ie[Ye][z[Ae[lt]]]),nr&=15,ue[lt]=mt=Ie[nr][5],Se>0)if(Se===16){for(yt=gt;yt<lt;yt++)ue[yt]=1;gt=-1}else gt=-1;if(Ie[nr][6])gt===-1&&(gt=lt);else if(gt>-1){for(yt=gt;yt<lt;yt++)ue[yt]=mt;gt=-1}Me[lt]==="B"&&(ue[lt]=0),Fe.hiLevel|=mt}d&&function(je,nt,ut){for(var xt=0;xt<ut;xt++)if(je[xt]==="S"){nt[xt]=Be;for(var Bt=xt-1;Bt>=0&&je[Bt]==="WS";Bt--)nt[Bt]=Be}}(Me,ue,Ct)},Qe=function(se,ue,Fe,Se,yt){if(!(yt.hiLevel<se)){if(se===1&&Be===1&&!c)return ue.reverse(),void(Fe&&Fe.reverse());for(var lt,mt,Ye,gt,Ct=ue.length,nr=0;nr<Ct;){if(Se[nr]>=se){for(Ye=nr+1;Ye<Ct&&Se[Ye]>=se;)Ye++;for(gt=nr,mt=Ye-1;gt<mt;gt++,mt--)lt=ue[gt],ue[gt]=ue[mt],ue[mt]=lt,Fe&&(lt=Fe[gt],Fe[gt]=Fe[mt],Fe[mt]=lt);nr=Ye}nr++}}},tt=function(se,ue,Fe){var Se=se.split(""),yt={hiLevel:Be};return Fe||(Fe=[]),me(Se,Fe,yt),function(lt,mt,Ye){if(Ye.hiLevel!==0&&P)for(var gt,Ct=0;Ct<lt.length;Ct++)mt[Ct]===1&&(gt=ee.indexOf(lt[Ct]))>=0&&(lt[Ct]=ee[gt+1])}(Se,Fe,yt),Qe(2,Se,ue,Fe,yt),Qe(1,Se,ue,Fe,yt),Se.join("")};return this.__bidiEngine__.doBidiReorder=function(se,ue,Fe){if(function(yt,lt){if(lt)for(var mt=0;mt<yt.length;mt++)lt[mt]=mt;s===void 0&&(s=Ne(yt)),C===void 0&&(C=Ne(yt))}(se,ue),f||!v||C)if(f&&v&&s^C)Be=s?1:0,se=ve(se,ue,Fe);else if(!f&&v&&C)Be=s?1:0,se=tt(se,ue,Fe),se=ve(se,ue);else if(!f||s||v||C){if(f&&!v&&s^C)se=ve(se,ue),s?(Be=0,se=tt(se,ue,Fe)):(Be=1,se=tt(se,ue,Fe),se=ve(se,ue));else if(f&&s&&!v&&C)Be=1,se=tt(se,ue,Fe),se=ve(se,ue);else if(!f&&!v&&s^C){var Se=P;s?(Be=1,se=tt(se,ue,Fe),Be=0,P=!1,se=tt(se,ue,Fe),P=Se):(Be=0,se=tt(se,ue,Fe),se=ve(se,ue),Be=1,P=!1,se=tt(se,ue,Fe),P=Se,se=ve(se,ue))}}else Be=0,se=tt(se,ue,Fe);else Be=s?1:0,se=tt(se,ue,Fe);return se},this.__bidiEngine__.setOptions=function(se){se&&(f=se.isInputVisual,v=se.isOutputVisual,s=se.isInputRtl,C=se.isOutputRtl,P=se.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(o){var c=o.text;o.x,o.y;var d=o.options||{};o.mutex,d.lang;var f=[];if(d.isInputVisual=typeof d.isInputVisual!="boolean"||d.isInputVisual,i.setOptions(d),Object.prototype.toString.call(c)==="[object Array]"){var s=0;for(f=[],s=0;s<c.length;s+=1)Object.prototype.toString.call(c[s])==="[object Array]"?f.push([i.doBidiReorder(c[s][0]),c[s][1],c[s][2]]):f.push([i.doBidiReorder(c[s])]);o.text=f}else o.text=i.doBidiReorder(c);i.setOptions({isInputVisual:!0})}])}(Kr),Kr.API.TTFFont=function(){function n(e){var i;if(this.rawData=e,i=this.contents=new Dc(e),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new eM(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new OP(this.contents),this.head=new HP(this),this.name=new qP(this),this.cmap=new Yw(this),this.toUnicode={},this.hhea=new jP(this),this.maxp=new ZP(this),this.hmtx=new $P(this),this.post=new GP(this),this.os2=new VP(this),this.loca=new YP(this),this.glyf=new WP(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,i,o,c,d;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var f,s,v,C;for(C=[],f=0,s=(v=this.bbox).length;f<s;f++)e=v[f],C.push(Math.round(e*this.scaleFactor));return C}).call(this),this.stemV=0,this.post.exists?(o=255&(c=this.post.italic_angle),32768&(i=c>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(d=this.familyClass)===1||d===2||d===3||d===4||d===5||d===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var i;return((i=this.cmap.unicode)!=null?i.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*i},n.prototype.widthOfString=function(e,i,o){var c,d,f,s;for(f=0,d=0,s=(e=""+e).length;0<=s?d<s:d>s;d=0<=s?++d:--d)c=e.charCodeAt(d),f+=this.widthOfGlyph(this.characterToGlyph(c))+o*(1e3/i)||0;return f*(i/1e3)},n.prototype.lineHeight=function(e,i){var o;return i==null&&(i=!1),o=i?this.lineGap:0,(this.ascender+o-this.decender)/1e3*e},n}();var DA,Dc=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var i,o;for(o=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)o[i]=String.fromCharCode(this.readByte());return o.join("")},n.prototype.writeString=function(e){var i,o,c;for(c=[],i=0,o=e.length;0<=o?i<o:i>o;i=0<=o?++i:--i)c.push(this.writeByte(e.charCodeAt(i)));return c},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,i,o,c,d,f,s,v;return e=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),d=this.readByte(),f=this.readByte(),s=this.readByte(),v=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^i)+1099511627776*(255^o)+4294967296*(255^c)+16777216*(255^d)+65536*(255^f)+256*(255^s)+(255^v)+1):72057594037927940*e+281474976710656*i+1099511627776*o+4294967296*c+16777216*d+65536*f+256*s+v},n.prototype.writeLongLong=function(e){var i,o;return i=Math.floor(e/4294967296),o=4294967295&e,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var i,o;for(i=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)i.push(this.readByte());return i},n.prototype.write=function(e){var i,o,c,d;for(d=[],o=0,c=e.length;o<c;o++)i=e[o],d.push(this.writeByte(i));return d},n}(),OP=function(){var n;function e(i){var o,c,d;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},c=0,d=this.tableCount;0<=d?c<d:c>d;c=0<=d?++c:--c)o={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[o.tag]=o}return e.prototype.encode=function(i){var o,c,d,f,s,v,C,P,M,Q,E,z,V;for(V in E=Object.keys(i).length,v=Math.log(2),M=16*Math.floor(Math.log(E)/v),f=Math.floor(M/v),P=16*E-M,(c=new Dc).writeInt(this.scalarType),c.writeShort(E),c.writeShort(M),c.writeShort(f),c.writeShort(P),d=16*E,C=c.pos+d,s=null,z=[],i)for(Q=i[V],c.writeString(V),c.writeInt(n(Q)),c.writeInt(C),c.writeInt(Q.length),z=z.concat(Q),V==="head"&&(s=C),C+=Q.length;C%4;)z.push(0),C++;return c.write(z),o=2981146554-n(c.data),c.pos=s+8,c.writeUInt32(o),c.data},n=function(i){var o,c,d,f;for(i=ex.call(i);i.length%4;)i.push(0);for(d=new Dc(i),c=0,o=0,f=i.length;o<f;o=o+=4)c+=d.readUInt32();return 4294967295&c},e}(),zP={}.hasOwnProperty,wl=function(n,e){for(var i in e)zP.call(e,i)&&(n[i]=e[i]);function o(){this.constructor=n}return o.prototype=e.prototype,n.prototype=new o,n.__super__=e.prototype,n};DA=function(){function n(e){var i;this.file=e,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var HP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="head",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},e.prototype.encode=function(i){var o;return(o=new Dc).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(i),o.writeShort(this.glyphDataFormat),o.data},e}(),f2=function(){function n(e,i){var o,c,d,f,s,v,C,P,M,Q,E,z,V,ee,Z,ne,Be;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=i+e.readInt(),M=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(v=0;v<256;++v)this.codeMap[v]=e.readByte();break;case 4:for(E=e.readUInt16(),Q=E/2,e.pos+=6,d=function(){var ze,Ne;for(Ne=[],v=ze=0;0<=Q?ze<Q:ze>Q;v=0<=Q?++ze:--ze)Ne.push(e.readUInt16());return Ne}(),e.pos+=2,V=function(){var ze,Ne;for(Ne=[],v=ze=0;0<=Q?ze<Q:ze>Q;v=0<=Q?++ze:--ze)Ne.push(e.readUInt16());return Ne}(),C=function(){var ze,Ne;for(Ne=[],v=ze=0;0<=Q?ze<Q:ze>Q;v=0<=Q?++ze:--ze)Ne.push(e.readUInt16());return Ne}(),P=function(){var ze,Ne;for(Ne=[],v=ze=0;0<=Q?ze<Q:ze>Q;v=0<=Q?++ze:--ze)Ne.push(e.readUInt16());return Ne}(),c=(this.length-e.pos+this.offset)/2,s=function(){var ze,Ne;for(Ne=[],v=ze=0;0<=c?ze<c:ze>c;v=0<=c?++ze:--ze)Ne.push(e.readUInt16());return Ne}(),v=Z=0,Be=d.length;Z<Be;v=++Z)for(ee=d[v],o=ne=z=V[v];z<=ee?ne<=ee:ne>=ee;o=z<=ee?++ne:--ne)P[v]===0?f=o+C[v]:(f=s[P[v]/2+(o-z)-(Q-v)]||0)!==0&&(f+=C[v]),this.codeMap[o]=65535&f}e.pos=M}return n.encode=function(e,i){var o,c,d,f,s,v,C,P,M,Q,E,z,V,ee,Z,ne,Be,ze,Ne,Oe,ve,me,Qe,tt,se,ue,Fe,Se,yt,lt,mt,Ye,gt,Ct,nr,Ae,Ie,Me,je,nt,ut,xt,Bt,tr,ot,Ut;switch(Se=new Dc,f=Object.keys(e).sort(function(Ot,Xt){return Ot-Xt}),i){case"macroman":for(V=0,ee=function(){var Ot=[];for(z=0;z<256;++z)Ot.push(0);return Ot}(),ne={0:0},d={},yt=0,gt=f.length;yt<gt;yt++)ne[Bt=e[c=f[yt]]]==null&&(ne[Bt]=++V),d[c]={old:e[c],new:ne[e[c]]},ee[c]=ne[e[c]];return Se.writeUInt16(1),Se.writeUInt16(0),Se.writeUInt32(12),Se.writeUInt16(0),Se.writeUInt16(262),Se.writeUInt16(0),Se.write(ee),{charMap:d,subtable:Se.data,maxGlyphID:V+1};case"unicode":for(ue=[],M=[],Be=0,ne={},o={},Z=C=null,lt=0,Ct=f.length;lt<Ct;lt++)ne[Ne=e[c=f[lt]]]==null&&(ne[Ne]=++Be),o[c]={old:Ne,new:ne[Ne]},s=ne[Ne]-c,Z!=null&&s===C||(Z&&M.push(Z),ue.push(c),C=s),Z=c;for(Z&&M.push(Z),M.push(65535),ue.push(65535),tt=2*(Qe=ue.length),me=2*Math.pow(Math.log(Qe)/Math.LN2,2),Q=Math.log(me/2)/Math.LN2,ve=2*Qe-me,v=[],Oe=[],E=[],z=mt=0,nr=ue.length;mt<nr;z=++mt){if(se=ue[z],P=M[z],se===65535){v.push(0),Oe.push(0);break}if(se-(Fe=o[se].new)>=32768)for(v.push(0),Oe.push(2*(E.length+Qe-z)),c=Ye=se;se<=P?Ye<=P:Ye>=P;c=se<=P?++Ye:--Ye)E.push(o[c].new);else v.push(Fe-se),Oe.push(0)}for(Se.writeUInt16(3),Se.writeUInt16(1),Se.writeUInt32(12),Se.writeUInt16(4),Se.writeUInt16(16+8*Qe+2*E.length),Se.writeUInt16(0),Se.writeUInt16(tt),Se.writeUInt16(me),Se.writeUInt16(Q),Se.writeUInt16(ve),ut=0,Ae=M.length;ut<Ae;ut++)c=M[ut],Se.writeUInt16(c);for(Se.writeUInt16(0),xt=0,Ie=ue.length;xt<Ie;xt++)c=ue[xt],Se.writeUInt16(c);for(tr=0,Me=v.length;tr<Me;tr++)s=v[tr],Se.writeUInt16(s);for(ot=0,je=Oe.length;ot<je;ot++)ze=Oe[ot],Se.writeUInt16(ze);for(Ut=0,nt=E.length;Ut<nt;Ut++)V=E[Ut],Se.writeUInt16(V);return{charMap:o,subtable:Se.data,maxGlyphID:Be+1}}},n}(),Yw=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="cmap",e.prototype.parse=function(i){var o,c,d;for(i.pos=this.offset,this.version=i.readUInt16(),d=i.readUInt16(),this.tables=[],this.unicode=null,c=0;0<=d?c<d:c>d;c=0<=d?++c:--c)o=new f2(i,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},e.encode=function(i,o){var c,d;return o==null&&(o="macroman"),c=f2.encode(i,o),(d=new Dc).writeUInt16(0),d.writeUInt16(1),c.table=d.data.concat(c.subtable),c},e}(),jP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="hhea",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},e}(),VP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="OS/2",e.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var o,c;for(c=[],o=0;o<10;++o)c.push(i.readByte());return c}(),this.charRange=function(){var o,c;for(c=[],o=0;o<4;++o)c.push(i.readInt());return c}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var o,c;for(c=[],o=0;o<2;o=++o)c.push(i.readInt());return c}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},e}(),GP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="post",e.prototype.parse=function(i){var o,c,d;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var f;for(c=i.readUInt16(),this.glyphNameIndex=[],f=0;0<=c?f<c:f>c;f=0<=c?++f:--f)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],d=[];i.pos<this.offset+this.length;)o=i.readByte(),d.push(this.names.push(i.readString(o)));return d;case 151552:return c=i.readUInt16(),this.offsets=i.read(c);case 196608:break;case 262144:return this.map=(function(){var s,v,C;for(C=[],f=s=0,v=this.file.maxp.numGlyphs;0<=v?s<v:s>v;f=0<=v?++s:--s)C.push(i.readUInt32());return C}).call(this)}},e}(),KP=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},qP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="name",e.prototype.parse=function(i){var o,c,d,f,s,v,C,P,M,Q,E;for(i.pos=this.offset,i.readShort(),o=i.readShort(),v=i.readShort(),c=[],f=0;0<=o?f<o:f>o;f=0<=o?++f:--f)c.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+v+i.readShort()});for(C={},f=M=0,Q=c.length;M<Q;f=++M)d=c[f],i.pos=d.offset,P=i.readString(d.length),s=new KP(P,d),C[E=d.nameID]==null&&(C[E]=[]),C[d.nameID].push(s);this.strings=C,this.copyright=C[0],this.fontFamily=C[1],this.fontSubfamily=C[2],this.uniqueSubfamily=C[3],this.fontName=C[4],this.version=C[5];try{this.postscriptName=C[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=C[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=C[7],this.manufacturer=C[8],this.designer=C[9],this.description=C[10],this.vendorUrl=C[11],this.designerUrl=C[12],this.license=C[13],this.licenseUrl=C[14],this.preferredFamily=C[15],this.preferredSubfamily=C[17],this.compatibleFull=C[18],this.sampleText=C[19]},e}(),ZP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="maxp",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},e}(),$P=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="hmtx",e.prototype.parse=function(i){var o,c,d,f,s,v,C;for(i.pos=this.offset,this.metrics=[],o=0,v=this.file.hhea.numberOfMetrics;0<=v?o<v:o>v;o=0<=v?++o:--o)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(d=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var P,M;for(M=[],o=P=0;0<=d?P<d:P>d;o=0<=d?++P:--P)M.push(i.readInt16());return M}(),this.widths=(function(){var P,M,Q,E;for(E=[],P=0,M=(Q=this.metrics).length;P<M;P++)f=Q[P],E.push(f.advance);return E}).call(this),c=this.widths[this.widths.length-1],C=[],o=s=0;0<=d?s<d:s>d;o=0<=d?++s:--s)C.push(this.widths.push(c));return C},e.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},e}(),ex=[].slice,WP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(i){var o,c,d,f,s,v,C,P,M,Q;return i in this.cache?this.cache[i]:(f=this.file.loca,o=this.file.contents,c=f.indexOf(i),(d=f.lengthOf(i))===0?this.cache[i]=null:(o.pos=this.offset+c,s=(v=new Dc(o.read(d))).readShort(),P=v.readShort(),Q=v.readShort(),C=v.readShort(),M=v.readShort(),this.cache[i]=s===-1?new JP(v,P,Q,C,M):new XP(v,s,P,Q,C,M),this.cache[i]))},e.prototype.encode=function(i,o,c){var d,f,s,v,C;for(s=[],f=[],v=0,C=o.length;v<C;v++)d=i[o[v]],f.push(s.length),d&&(s=s.concat(d.encode(c)));return f.push(s.length),{table:s,offsets:f}},e}(),XP=function(){function n(e,i,o,c,d,f){this.raw=e,this.numberOfContours=i,this.xMin=o,this.yMin=c,this.xMax=d,this.yMax=f,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),JP=function(){function n(e,i,o,c,d){var f,s;for(this.raw=e,this.xMin=i,this.yMin=o,this.xMax=c,this.yMax=d,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],f=this.raw;s=f.readShort(),this.glyphOffsets.push(f.pos),this.glyphIDs.push(f.readUInt16()),32&s;)f.pos+=1&s?4:2,128&s?f.pos+=8:64&s?f.pos+=4:8&s&&(f.pos+=2)}return n.prototype.encode=function(){var e,i,o;for(i=new Dc(ex.call(this.raw.data)),e=0,o=this.glyphIDs.length;e<o;++e)i.pos=this.glyphOffsets[e];return i.data},n}(),YP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return wl(e,DA),e.prototype.tag="loca",e.prototype.parse=function(i){var o,c;return i.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?(function(){var d,f;for(f=[],c=0,d=this.length;c<d;c+=2)f.push(2*i.readUInt16());return f}).call(this):(function(){var d,f;for(f=[],c=0,d=this.length;c<d;c+=4)f.push(i.readUInt32());return f}).call(this)},e.prototype.indexOf=function(i){return this.offsets[i]},e.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},e.prototype.encode=function(i,o){for(var c=new Uint32Array(this.offsets.length),d=0,f=0,s=0;s<c.length;++s)if(c[s]=d,f<o.length&&o[f]==s){++f,c[s]=d;var v=this.offsets[s],C=this.offsets[s+1]-v;C>0&&(d+=C)}for(var P=new Array(4*c.length),M=0;M<c.length;++M)P[4*M+3]=255&c[M],P[4*M+2]=(65280&c[M])>>8,P[4*M+1]=(16711680&c[M])>>16,P[4*M]=(4278190080&c[M])>>24;return P},e}(),eM=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,i,o,c,d;for(i in c=this.font.cmap.tables[0].codeMap,e={},d=this.subset)o=d[i],e[i]=c[o];return e},n.prototype.glyphsFor=function(e){var i,o,c,d,f,s,v;for(c={},f=0,s=e.length;f<s;f++)c[d=e[f]]=this.font.glyf.glyphFor(d);for(d in i=[],c)(o=c[d])!=null&&o.compound&&i.push.apply(i,o.glyphIDs);if(i.length>0)for(d in v=this.glyphsFor(i))o=v[d],c[d]=o;return c},n.prototype.encode=function(e,i){var o,c,d,f,s,v,C,P,M,Q,E,z,V,ee,Z;for(c in o=Yw.encode(this.generateCmap(),"unicode"),f=this.glyphsFor(e),E={0:0},Z=o.charMap)E[(v=Z[c]).old]=v.new;for(z in Q=o.maxGlyphID,f)z in E||(E[z]=Q++);return P=function(ne){var Be,ze;for(Be in ze={},ne)ze[ne[Be]]=Be;return ze}(E),M=Object.keys(P).sort(function(ne,Be){return ne-Be}),V=function(){var ne,Be,ze;for(ze=[],ne=0,Be=M.length;ne<Be;ne++)s=M[ne],ze.push(P[s]);return ze}(),d=this.font.glyf.encode(f,V,E),C=this.font.loca.encode(d.offsets,V),ee={cmap:this.font.cmap.raw(),glyf:d.table,loca:C,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(ee["OS/2"]=this.font.os2.raw()),this.font.directory.encode(ee)},n}();Kr.API.PDFObject=function(){var n;function e(){}return n=function(i,o){return(Array(o+1).join("0")+i).slice(-o)},e.convert=function(i){var o,c,d,f;if(Array.isArray(i))return"["+function(){var s,v,C;for(C=[],s=0,v=i.length;s<v;s++)o=i[s],C.push(e.convert(o));return C}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+n(i.getUTCFullYear(),4)+n(i.getUTCMonth(),2)+n(i.getUTCDate(),2)+n(i.getUTCHours(),2)+n(i.getUTCMinutes(),2)+n(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(c in d=["<<"],i)f=i[c],d.push("/"+c+" "+e.convert(f));return d.push(">>"),d.join(`
`)}return""+i},e}();const tM=n=>{if(n.type==="raster")return"raster";if(n.type==="vector"){if(n.format.geometryType==="Point")return"point";if(n.format.geometryType==="LineString")return"line";if(n.format.geometryType==="Polygon")return"polygon"}else throw new Error(`Unknown layer type: ${n}`)},rU=n=>{switch(n){case"point":return"ic:baseline-mode-standby";case"line":return"ic:baseline-polymer";case"polygon":return"ic:baseline-pentagon";case"raster":return"mdi:raster";default:throw new Error(`Unknown layer type: ${n}`)}},nU={point:"ポイント",line:"ライン",polygon:"ポリゴン",raster:"ラスター"},rM=n=>{try{n.forEach(e=>{e.style.visible=!0})}catch(e){console.error(e),console.warn("初期化処理に失敗しました。")}return n},nM=Object.assign({"/src/routes/map/data/entries/raster/image_tile/base_map/ehime_ls_standtype.ts":J4,"/src/routes/map/data/entries/raster/image_tile/base_map/gbank_seamless.ts":e3,"/src/routes/map/data/entries/raster/image_tile/base_map/gifu_cs_map.ts":r3,"/src/routes/map/data/entries/raster/image_tile/base_map/gifu_pref.ts":i3,"/src/routes/map/data/entries/raster/image_tile/base_map/gsi_pre.ts":s3,"/src/routes/map/data/entries/raster/image_tile/base_map/gsi_seamlessphoto.ts":A3,"/src/routes/map/data/entries/raster/image_tile/base_map/gsi_std.ts":c3,"/src/routes/map/data/entries/raster/image_tile/base_map/nagano_cs.ts":h3,"/src/routes/map/data/entries/raster/image_tile/base_map/osm.ts":d3,"/src/routes/map/data/entries/raster/image_tile/base_map/soilmap_nfs.ts":g3,"/src/routes/map/data/entries/raster/image_tile/base_map/tochigi_cs.ts":y3,"/src/routes/map/data/entries/raster/image_tile/base_map/tochigi_ls_standtype.ts":b3,"/src/routes/map/data/entries/raster/image_tile/categorical/ecoris_sugihinoki.ts":w3,"/src/routes/map/data/entries/raster/image_tile/categorical/ecoris_tanbo.ts":B3,"/src/routes/map/data/entries/raster/image_tile/categorical/ecoris_vege_6.ts":I3,"/src/routes/map/data/entries/raster/image_tile/categorical/gifu_slope_map.ts":E3,"/src/routes/map/data/entries/raster/image_tile/categorical/gsi_slopemap.ts":T3,"/src/routes/map/data/entries/raster/image_tile/categorical/landslide.ts":P3,"/src/routes/map/data/entries/raster/image_tile/categorical/tochigi_slope.ts":U3,"/src/routes/map/data/entries/raster/image_tile/dem/dchm_niigata_nagaoka.ts":Q3,"/src/routes/map/data/entries/raster/image_tile/dem/dem_10b.ts":R3,"/src/routes/map/data/entries/raster/image_tile/dem/dem_5a.ts":O3,"/src/routes/map/data/entries/raster/image_tile/dem/dem_tochigi.ts":H3,"/src/routes/map/data/entries/raster/image_tile/dem/dem_tokyo.ts":V3,"/src/routes/map/data/entries/raster/image_tile/dem/dem_yamanashi.ts":K3,"/src/routes/map/data/entries/raster/pmtiles/categorical/gifu_sugi_kansetugai.ts":Z3,"/src/routes/map/data/entries/raster/pmtiles/dem/ensyurin_curvatoure.ts":W3,"/src/routes/map/data/entries/raster/pmtiles/dem/ensyurin_dem.ts":J3,"/src/routes/map/data/entries/vector/fgb/point/ensyurin_kikenboku_h25.ts":eC,"/src/routes/map/data/entries/vector/fgb/point/ensyurin_owl.ts":rC,"/src/routes/map/data/entries/vector/fgb/point/ensyurin_pole.ts":iC,"/src/routes/map/data/entries/vector/fgb/point/fac_sisetuannaitou.ts":sC,"/src/routes/map/data/entries/vector/mvt/polygon/hyogo_fr_mesh20m.ts":AC,"/src/routes/map/data/entries/vector/mvt/polygon/hyogo_tree_species.ts":cC,"/src/routes/map/data/entries/vector/mvt/polygon/kochi_fr_mesh20m.ts":hC,"/src/routes/map/data/entries/vector/mvt/polygon/tochigi_fr_mesh20m.ts":dC,"/src/routes/map/data/entries/vector/mvt/polygon/tochigi_tree_species.ts":gC,"/src/routes/map/data/entries/vector/pmtiles/line_string/ensyurin_road.ts":yC,"/src/routes/map/data/entries/vector/pmtiles/point/fac_phenology_2020.ts":bC,"/src/routes/map/data/entries/vector/pmtiles/point/tokyo_gairoju.ts":kI,"/src/routes/map/data/entries/vector/pmtiles/polygon/ensyurin_rinhan.ts":O6,"/src/routes/map/data/entries/vector/pmtiles/polygon/ensyurin_siken.ts":H6,"/src/routes/map/data/entries/vector/pmtiles/polygon/ksj_tmplt_a15.ts":V6}),k0=Object.values(nM).map(n=>n.default).sort((n,e)=>n.metaData.name.localeCompare(e.metaData.name,"ja")),iU=(()=>{const e=k0.map(i=>i.id).filter((i,o,c)=>c.indexOf(i)!==o);return e.length>0&&console.warn("idが重複してます。:",e),rM(k0)})();class hh{static get(e){return this.map.get(e)}static has(e){return this.map.has(e)}static add(e,i){this.map.has(e)||this.map.set(e,i)}static keys(){return Array.from(this.map.keys())}}Or(hh,"map",new Map(k0.map(e=>[e.id,tM(e)??"raster"])));const aU=n=>{const e=new Set;if(n.features.forEach(i=>{i.geometry&&i.geometry.type&&e.add(i.geometry.type)}),e.has("Point"))return"Point";if(e.has("LineString"))return"LineString";if(e.has("Polygon"))return"Polygon";if(e.has("MultiPoint"))return"Point";if(e.has("MultiLineString"))return"LineString";if(e.has("MultiPolygon"))return"Polygon"},y1={name:"カスタムデータ",description:"ユーザーがアップロードしたデータ",attribution:"カスタムデータ",location:"不明",maxZoom:24,minZoom:0,tags:[],bounds:Rp},sU=(n,e,i,o,c=Nv())=>{const d={...y1,name:i,bounds:o};let f;if(e==="Point")f=cp;else if(e==="LineString")f=ev;else if(e==="Polygon")f=tv;else if(e==="Label"){f=cp;return}else{console.error("不明なジオメトリタイプです。");return}if(!f){console.error("スタイルが見つかりませんでした。");return}f.colors={key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:c}}]};const s=G6(n);f.labels=O4(s);const v="geojson_"+crypto.randomUUID();return Au.set(v,n),{id:v,type:"vector",format:{type:"geojson",geometryType:e,url:""},metaData:d,interaction:{clickable:!0},properties:{keys:s,titles:[{conditions:[],template:i}]},style:f}},oU=(n,e,i,o,c=Nv())=>{const d={...y1,name:n,sourceLayer:i};let f;if(o==="Point")f=cp;else if(o==="LineString")f=ev;else if(o==="Polygon")f=tv;else if(o==="Label"){f=cp;return}else{console.error("不明なジオメトリタイプです。");return}if(!f){console.error("スタイルが見つかりませんでした。");return}return f.colors={key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:c}}]},{id:"vectorTile_"+crypto.randomUUID(),type:"vector",format:{type:"mvt",geometryType:o,url:e},metaData:d,interaction:{clickable:!0},properties:{keys:[],titles:[{conditions:[],template:n}]},style:f}},AU=(n,e)=>({id:"raster_"+crypto.randomUUID(),type:"raster",format:{type:"image",url:e},metaData:{...y1,name:n,tileSize:256,bounds:Rp},interaction:{...Ao},style:{...ko}}),lU=yi([]),iM=()=>{const n=yi([]),{subscribe:e,update:i,set:o}=n;return{subscribe:e,add:c=>{i(d=>d.some(f=>f.id===c.id)?d:[...d,c])},remove:c=>{i(d=>d.filter(f=>f.id!==c))},clearAttributions:()=>o([])}},aM=iM(),d2=yi("idle"),p2=["point","line","polygon","raster"],Dm=n=>n.sort((e,i)=>{(!hh.has(e)||!hh.has(i))&&console.warn(`EntryIdToTypeMap does not have entry for ${e} or ${i}`);const o=hh.get(e)||"raster",c=hh.get(i)||"raster",d=p2.indexOf(o),f=p2.indexOf(c);return d-f}),sM=()=>{const n=yi([...a_]),{subscribe:e,update:i,set:o}=n;return{subscribe:e,setLayers:c=>{Au.clear(),o(Dm(c))},add:c=>i(d=>(d.includes(c)||(d=[c,...d]),Dm(d))),has:c=>js(n).includes(c),addType:(c,d)=>{hh.add(c,d)},remove:c=>i(d=>{const f=d.filter(s=>s!==c);return Au.has(c)&&Au.remove(c),aM.remove(c),f}),reorder:(c,d)=>i(f=>{const s=f.indexOf(c),v=f.indexOf(d);if(s===-1||v===-1||s===v)return d2.set("invalid"),f;const C=[...f],P=C.splice(s,1)[0];return C.splice(v,0,P),d2.set("success"),Dm(C)}),reset:()=>{for(const c of Au.keys())Au.remove(c);o([...a_])}}},cU=sM(),uU=yi(!0),hU=yi(!1),fU=yi(!1),dU=async n=>{try{return(await fetch(n)).json()}catch(e){throw console.error(e),new Error("Failed to fetch GeoJSON")}},pU=async(n,e)=>{try{const i=await fetch(n),o=N4(i.body),c={type:"FeatureCollection",features:[]};for await(const d of o)c.features.push(d);return c}catch(i){throw console.error(i),new Error("Failed to fetch GeoJSON")}},gU=(n,e)=>{const{properties:i,id:o,layer:c}=n;return{point:e,properties:i,featureId:o,layerId:c.id}};class Au{static set(e,i){this.cache.set(e,i)}static get(e){return this.cache.get(e)}static remove(e){this.cache.delete(e)}static clear(){this.cache.clear()}static has(e){return this.cache.has(e)}static keys(){return this.cache.keys()}}Or(Au,"cache",new Map);const mU=async n=>{try{const e=await n.text(),i=JSON.parse(e);if(i.type!=="FeatureCollection"||!Array.isArray(i.features))throw new Error("Invalid GeoJSON structure");return i}catch(e){throw console.error("GeoJSON parsing error:",e),new Error("Failed to parse GeoJSON file")}},tx={mapbox:0,gsi:1,terrarium:2},yU=["jet","hsv","hot","spring","summer","autumn","winter","bone","copper","greys","yignbu","greens","yiorrd","bluered","rdbu","picnic","rainbow","portland","blackbody","earth","electric","viridis","inferno","magma","plasma","warm","cool","rainbow-soft","bathymetry","cdom","chlorophyll","density","freesurface-blue","freesurface-red","oxygen","par","phase","salinity","temperature","turbidity","velocity-blue","velocity-green","cubehelix"],oM={default:0,relief:1,slope:2,aspect:3,curvature:4,shadow:5},pl=class pl{constructor(e=500){Or(this,"imageBaseUrlCache",new Map);Or(this,"cache");Or(this,"cacheSizeLimit");Or(this,"cacheOrder");this.cache=new Map,this.cacheSizeLimit=e,this.cacheOrder=[],this.imageBaseUrlCache=new Map}static getInstance(e=500){return pl.instance||(pl.instance=new pl(e)),pl.instance}async loadImagePmtiles(e,i,o){try{let c=pl.pmCache.get(e);c||(c=new ip(e),pl.pmCache.set(e,c));const d=await c.getZxy(i.z,i.x,i.y,o);if(!d||!d.data)throw new Error("Tile data not found");const f=new Blob([d.data],{type:"image/png"});return await createImageBitmap(f)}catch(c){if(c instanceof Error&&c.name==="AbortError")throw c;return await createImageBitmap(new ImageData(1,1))}}async loadImage(e,i){try{const o=await fetch(e,{signal:i});if(!o.ok)throw new Error("Failed to fetch image");return await createImageBitmap(await o.blob())}catch(o){if(o instanceof Error&&o.name==="AbortError")throw o;return await createImageBitmap(new ImageData(1,1))}}async getSingleTileImage(e,i,o,c,d,f,s){const v=d.replace("{x}",i.toString()).replace("{y}",o.toString()).replace("{z}",c.toString());if(this.cache.has(e)){const C=this.cache.get(e);return this.add(e,C),C}try{let C;if(f==="image")C=await this.loadImage(v,s.signal);else if(f==="pmtiles"){const P={x:i,y:o,z:c};C=await this.loadImagePmtiles(v,P,s.signal)}if(!C)throw new Error(`Failed to load image for ${e}`);return this.add(e,C),C}catch(C){if(C instanceof Error&&C.name==="AbortError")throw C;return console.error(`Error in getSingleTileImage for ${e}:`,C),await createImageBitmap(new ImageData(1,1))}}async getAdjacentTilesWithImages(e,i,o,c,d,f,s){const v=[{position:"center",dx:0,dy:0},{position:"left",dx:-1,dy:0},{position:"right",dx:1,dy:0},{position:"top",dx:0,dy:-1},{position:"bottom",dx:0,dy:1}],C={};return await Promise.all(v.map(async({position:P,dx:M,dy:Q})=>{const E=i+M,z=o+Q,V=`${e}_${E}_${z}_${c}`,Z=(this.imageBaseUrlCache.get(e)||d).replace("{x}",E.toString()).replace("{y}",z.toString()).replace("{z}",c.toString());let ne=this.cache.get(V);if(!ne){if(f==="image")ne=await this.loadImage(Z,s.signal);else if(f==="pmtiles"){const Be={x:E,y:z,z:c};ne=await this.loadImagePmtiles(Z,Be,s.signal)}}ne&&(this.add(V,ne),C[P]={tileId:V,image:ne})})),C}add(e,i){if(this.cacheOrder.length>=this.cacheSizeLimit){const c=this.cacheOrder.shift();c&&this.cache.delete(c)}this.cache.set(e,i);const o=this.cacheOrder.indexOf(e);o>-1&&this.cacheOrder.splice(o,1),this.cacheOrder.push(e)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}clear(){this.cache.clear(),this.cacheOrder=[]}getUrlcache(e){return this.imageBaseUrlCache.get(e)}addUrlcache(e,i){this.imageBaseUrlCache.set(e,i)}deleteUrlcache(e){this.imageBaseUrlCache.delete(e)}};Or(pl,"instance"),Or(pl,"pmCache",new Map);let Q0=pl,AM=class{constructor(e){Or(this,"worker");Or(this,"pendingRequests");Or(this,"tileCache");Or(this,"colorMapCache");Or(this,"handleMessage",e=>{const{id:i,buffer:o,error:c}=e.data,d=this.pendingRequests.get(i);c?(console.error(`Error processing tile ${i}:`,c),d&&(d.reject(new Error(c)),this.pendingRequests.delete(i))):d&&(d.resolve({data:o}),this.pendingRequests.delete(i))});this.worker=e,this.pendingRequests=new Map,this.tileCache=Q0.getInstance(),this.colorMapCache=new MI,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,i){const o=parseInt(e.searchParams.get("x")||"0",10),c=parseInt(e.searchParams.get("y")||"0",10),d=parseInt(e.searchParams.get("z")||"0",10),f=e.searchParams.get("entryId")||"",s=e.origin+e.pathname,v=`${f}_${o}_${c}_${d}`,C=e.searchParams.get("formatType"),P=e.searchParams.get("demType"),M=tx[P],Q=e.searchParams.get("mode")||"default",E=oM[Q],z="buffar";if(Q==="relief"){const V=await this.tileCache.getSingleTileImage(v,o,c,d,s,C,i),ee=this.colorMapCache.createColorArray(e.searchParams.get("colorMap")||"bone"),Z=parseFloat(e.searchParams.get("max")||"10000"),ne=parseFloat(e.searchParams.get("min")||"0");return new Promise((Be,ze)=>{this.pendingRequests.set(v,{resolve:Be,reject:ze,controller:i}),this.worker.postMessage({tileId:v,center:V,demTypeNumber:M,modeNumber:E,mode:Q,elevationColorArray:ee,max:Z,min:ne,encodeType:z})})}else{const V=await this.tileCache.getAdjacentTilesWithImages(f,o,c,d,s,C,i),ee=this.colorMapCache.createColorArray(e.searchParams.get("colorMap")||"bone"),Z=V.center,ne=Z.tileId,Be=V.left,ze=V.right,Ne=V.top,Oe=V.bottom,ve=parseFloat(e.searchParams.get("max")||"90"),me=parseFloat(e.searchParams.get("min")||"0");return new Promise((Qe,tt)=>{this.pendingRequests.set(ne,{resolve:Qe,reject:tt,controller:i}),this.worker.postMessage({tileId:ne,center:Z.image,left:Be.image,right:ze.image,top:Ne.image,bottom:Oe.image,demTypeNumber:M,modeNumber:E,mode:Q,elevationColorArray:ee,max:ve,min:me,tile:{x:o,y:c,z:d},encodeType:z})})}}handleError(e){console.error("Worker error:",e),this.pendingRequests.forEach(i=>{i.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()}cancelAllRequests(){this.pendingRequests.size>0&&this.pendingRequests.forEach(({reject:e,controller:i})=>{i.abort(),e(new Error("Request cancelled"))}),console.info("All requests have been cancelled."),this.pendingRequests.clear()}clearCache(){this.tileCache.clear()}};class lM{constructor(e){Or(this,"workers",[]);Or(this,"workerIndex",0);Or(this,"poolSize");this.poolSize=e;for(let i=0;i<e;i++){const o=new Worker(new URL(""+new URL("../workers/worker-Dr9vdl9S.js",import.meta.url).href,import.meta.url),{type:"module"});this.workers.push(new AM(o))}}getNextWorker(){const e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.poolSize,e}async request(e,i){return this.getNextWorker().request(e,i)}cancelAllRequests(){this.workers.forEach(e=>e.cancelAllRequests())}clearCache(){this.workers.forEach(e=>e.clearCache())}}const Rm=new lM(2),cM=n=>({protocolName:n,request:(e,i)=>{const o=e.url.replace(`${n}://`,""),c=new URL(o);return Rm.request(c,i)},cancelAllRequests:()=>Rm.cancelAllRequests(),clearCache:()=>Rm.clearCache()}),uM=180/Math.PI;function g2(n,e){return n/Math.pow(2,e)*360-180}function m2(n,e){const i=Math.PI-2*Math.PI*n/Math.pow(2,e);return uM*Math.atan(.5*(Math.exp(i)-Math.exp(-i)))}function hM(n){const e=g2(n[0]+1,n[2]),i=g2(n[0],n[2]),o=m2(n[1]+1,n[2]),c=m2(n[1],n[2]);return[i,o,e,c]}function fM(n){return[[n[0]*2,n[1]*2,n[2]+1],[n[0]*2+1,n[1]*2,n[2]+1],[n[0]*2+1,n[1]*2+1,n[2]+1],[n[0]*2,n[1]*2+1,n[2]+1]]}function dM(n){return[n[0]>>1,n[1]>>1,n[2]-1]}function pM(n){return fM(dM(n))}function gM(n,e={}){const i=Number(n[0]),o=Number(n[1]),c=Number(n[2]),d=Number(n[3]);if(n.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const f=[i,o];return DB([[f,[c,o],[c,d],[i,d],f]],e.properties,{bbox:n,id:e.id})}var mM=gM;let yM=class{constructor(e){Or(this,"worker");Or(this,"pendingRequests");Or(this,"handleMessage",e=>{const{id:i,buffer:o,error:c}=e.data;if(c){const d=this.pendingRequests.get(i);d&&(d.resolve({data:new Uint8Array}),this.pendingRequests.delete(i))}else{const d=this.pendingRequests.get(i);d&&(d.resolve({data:o}),this.pendingRequests.delete(i))}});Or(this,"handleError",e=>{console.error("Worker error:",e),this.pendingRequests.forEach(i=>{i.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()});this.worker=e,this.pendingRequests=new Map,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,i){try{const o=parseInt(e.searchParams.get("x")||"0",10),c=parseInt(e.searchParams.get("y")||"0",10),d=parseInt(e.searchParams.get("z")||"0",10),s={type:"FeatureCollection",features:pM([o,c,d]).map(P=>{const[M,Q,E]=P,z=hM([M,Q,E]);return{...mM(z),properties:{x:o,y:c,z:d,index:`${E}/${M}/${Q}`}}})},{signal:v}=i,C=`${d}/${o}/${c}_tile_index`;return new Promise((P,M)=>{this.pendingRequests.set(C,{resolve:P,reject:M}),v.addEventListener("abort",()=>{this.pendingRequests.delete(C),M(new Error("Request aborted"))}),this.worker.postMessage({id:C,z:d,x:o,y:c,geojson:s})})}catch(o){return Promise.reject(o)}}};const _M=new Worker(new URL(""+new URL("../workers/worker-DfC3PjOV.js",import.meta.url).href,import.meta.url),{type:"module"});new yM(_M);const y2=new Map,bM=async(n,e,i)=>{try{let o=y2.get(n);o||(o=new ip(n),y2.set(n,o));const c=await o.getZxy(e.z,e.x,e.y,i);if(!c||!c.data)throw new Error("Tile data not found");const d=new Blob([c.data],{type:"image/png"});return await createImageBitmap(d)}catch(o){if(o instanceof Error&&o.name==="AbortError")throw new Error("Request aborted");return await createImageBitmap(new ImageData(1,1))}},vM=async(n,e)=>{try{const i=await fetch(n,{signal:e});if(!i.ok)throw new Error("Failed to fetch image");return await createImageBitmap(await i.blob())}catch(i){if(i instanceof Error&&i.name==="AbortError")throw new Error("Request aborted");return await createImageBitmap(new ImageData(1,1))}};class wM{constructor(e){Or(this,"worker");Or(this,"pendingRequests");Or(this,"handleMessage",e=>{const{id:i,buffer:o,error:c}=e.data,d=this.pendingRequests.get(i);c?(console.error(`Error processing tile ${i}:`,c),d&&(d.reject(new Error(c)),this.pendingRequests.delete(i))):d&&(d.resolve({data:o}),this.pendingRequests.delete(i))});Or(this,"handleError",e=>{console.error("Worker error:",e),this.pendingRequests.forEach(i=>{i.reject(new Error("Worker error occurred"))}),this.pendingRequests.clear()});this.worker=e,this.pendingRequests=new Map,this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)}async request(e,i){try{const o=parseInt(e.searchParams.get("x")||"0",10),c=parseInt(e.searchParams.get("y")||"0",10),d=parseInt(e.searchParams.get("z")||"0",10),f=e.origin+e.pathname,s=e.searchParams.get("entryId")||"",v=`${f}_${s}_${o}_${c}_${d}`,C=e.searchParams.get("formatType")||"image",P=e.searchParams.get("demType")||"mapbox";let M;return C==="pmtiles"?M=await bM(f,{x:o,y:c,z:d},i.signal):C==="image"&&(M=await vM(f,i.signal)),new Promise((Q,E)=>{const z=tx[P];this.pendingRequests.set(v,{resolve:Q,reject:E,controller:i}),this.worker.postMessage({image:M,demTypeNumber:z,id:v}),i.signal.addEventListener("abort",()=>{this.pendingRequests.delete(v),E(new Error("Request aborted"))})})}catch(o){return Promise.reject(o)}}}const xM=new Worker(new URL(""+new URL("../workers/worker-qG8lXCev.js",import.meta.url).href,import.meta.url),{type:"module"}),BM=new wM(xM),CM=n=>({protocolName:n,request:(e,i)=>{const o=e.url.replace(`${n}://`,""),c=new URL(o);return BM.request(c,i)}}),IM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAkCAYAAAB4+EEtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQLSURBVHgBrVdLbxNXFD537jySMDGD826bKolUxAIa/4BKnbAKQlW74AfEakGqhARdQoSIF5QsqVSpElnU3XdBgAUbiNmxY0AIifeQBOKAkzjx+zXDPZc4msS+40nIJyW277k+n893zj33DIEWiEz9a4BannBdOgrEMcEFgy0bn63EAuLaxIVZkJSEdSFq+/kifiSOVj0nSdJ5pdMw5I4QyLoORKJAqMz31Ip59leAanYDyukVtiLFmT0mIm1K9v309XMSoVNauM/Qunq3nPvBKZc4YfHDe5s5jVmTZ+I799AGoqszl6msTXcOH2lTQodYJBIEAf4g+UAnqEaXUcms/9J7/CQs3711X0iGRLLWPtU5coSlQIW9AElVoxuqmXWzZ+zENsItssiV6xOSol1DoiCy+RIyNdSDYaisr5r9YyfWk3dvP+DrnOjqP0Os2uZC3x0bklQN9guYx8zrp2koSMPWVDTNE+I69HJbz1f7SoRAf1hkoJTP42fCo3Lom9DhY+BH1t+hwqmRXhgfDIOuUEjmy2ClshB/vsTfi+DWarDx4jGPTgaHmqyCfInGB7vg7NGvOYmXfPzbMPwwcBD+frIIdxZWm36XUAqKbhiVWmpCcgn8LOsh8ItoJ5EXuH726Dd8nwjyAeafdSAJXDJE29qFGycODwiJvISnRnp8yHTW5RyTFYgboW0dwo2Rbh2CAKUWYfMoGS3bg588XvhFj3mrk6WxYkTIVsQ2L1pVJPJIQIiF3VuEOwsrEATWSkZoQ/+E8UjEde5XNtLCjf+//tgyOrTHnyWF9vJaiv13ZiWoqNfK6RSIpER58ByJCHEd7X4yVvNZljj1Bk0mZot9x38yWZhDeEU0w8uNAtx7v8aLQFdk/ookN9+mYNqaZxJmhUR4x1XWVuPWxV//4zVJahArrSybWldfvXKaRjj9cB52C3aZsiZJY/iel7516XTCdZwEN+wjMCq3XInXx4Stc0ZINcqiS/tV5m6A1wv78el6VNvIrAu/s9nB/Su/aMN+AFVyS8Vtw0/DwDN6ZeYhG3Ii7QODsFegfPnFN/ajyTPD3vWGdsWi43JWcxnYCzblY6OBMrbT1kDGRjCLuCSWf2eDXxsTYVO+P5rNjsIhdfTPmTkt3GvuRk6mCBSX3sWtyd+izezCrs+rc3XZxu4SBChfYWnB9lZfYDJenTUSZQ64o1ZEWfs5exQgUb953/cKTs7dsvt/PElYbzO1sPgmxuPi5LIx61LjyO0FgQDwyx8WROnjUsK6eHqslZ9Ag3w9fzuPA37GBwkgcjSIn0Bk9fzl5l9u5Q9f8Xi0ypMXFAKinr9aqWCqh7ohN/8KnHyuZZ68CJQzLzB/codu1vLZQHn6YrAnngjsAZ8Atlzok2bc1twAAAAASUVORK5CYII=",FM=new FB;Bf.addProtocol("pmtiles",FM.tile);const _2=cM("webgl");Bf.addProtocol(_2.protocolName,_2.request);const b2=CM("terrain");Bf.addProtocol(b2.protocolName,b2.request);const EM=yi(!1),Zd=yi(!0),rx=yi(!1),SM=()=>{let n=null,e=null;const{subscribe:i,set:o}=yi(null),c=yi({bbox:[0,0,0,0],zoom:0,center:[0,0],pitch:0,bearing:0}),d=yi(null),f=yi(null),s=yi(null),v=yi(null),C=yi(null),P=yi(null),M=yi(null),Q=yi(null),E=yi(null),z=yi(null),V=yi(null),ee=yi(null),Z=(ot,Ut)=>{const Ot=e4();if(e=new Bf.Map({...Ot,minZoom:jg()?2:1,container:ot,centerClampedToGround:!0,style:Ut,attributionControl:!1,localIdeographFontFamily:!1,maxPitch:85}),js(tB)&&e.on("data",sr=>{}),P.set(Ut),!e)return;const Xt=16,Ft=4,Ue=new Uint8Array(Xt*Xt*Ft);e.addImage("poi-icon",{width:Xt,height:Xt,data:Ue}),fetch(IM,{mode:"cors"}).then(async sr=>{if(!sr.ok)throw new Error(`Failed to fetch image: ${sr.statusText}`);const fr=await createImageBitmap(await sr.blob());e&&e.addImage("marker_png",fr)}),e.once("style.load",()=>{M.set(e)}),e.on("styledata",sr=>{e&&(c.set({bbox:Ye(),zoom:e.getZoom(),center:[e.getCenter().lng,e.getCenter().lat],pitch:e.getPitch(),bearing:e.getBearing()}),Q.set(sr))}),e.on("load",sr=>{ee.set(sr)}),e.on("click",sr=>{js(EM)||d.set(sr)}),e.on("resize",sr=>{z.set(sr)}),e.on("data",sr=>{Zd.set(!0)}),e.on("idle",sr=>{Zd.set(!1)}),e.on("rotate",sr=>{if(!e)return;const fr=e.getBearing();v.set(fr)}),e.on("mousedown",sr=>{}),e.on("mouseup",sr=>{}),e.on("mouseover",sr=>{f.set(sr)}),e.on("mouseout",sr=>{s.set(sr)}),e.on("moveend",sr=>{if(!e)return;const fr=window.location.href,jt=window.location.origin,er=e.getZoom(),ar=e.getCenter(),or=e.getBearing(),wr=e.getPitch();fr.startsWith(`${jt}/map`)&&t4({center:[ar.lng,ar.lat],zoom:er,pitch:wr,bearing:or}),c.set({bbox:Ye(),zoom:e.getZoom(),center:[e.getCenter().lng,e.getCenter().lat],pitch:e.getPitch(),bearing:e.getBearing()}),E.set(sr)}),e.on("zoom",sr=>{if(!e)return;const fr=e.getZoom();C.set(fr)}),V.set(e)},ne=ot=>ot&&typeof ot=="object"&&typeof ot.getLayer=="function"&&typeof ot.setLayoutProperty=="function"&&!ot._removed,Be=ot=>{!e||!ne(e)||(P.set(ot),e.setStyle(ot))},ze=(ot,Ut)=>{if(!e||!ne(e))return;e.getLayer(ot)?e.setFilter(ot,Ut):console.warn(`Layer with ID ${ot} does not exist.`)},Ne=(ot,Ut)=>{!e||!ne(e)||(n=new Bf.Marker({element:ot}).setLngLat(Ut).addTo(e))},Oe=()=>{if(!e||!ne(e))return;const ot=[136.91278,35.543576,136.92986,35.556704];e.fitBounds(ot,{padding:20,bearing:e.getBearing(),duration:1e3,animate:!0})},ve=async()=>{if(!e||!ne(e))return;const ot=e.getCanvasContainer(),Ut=ot.clientWidth,Ot=ot.clientHeight;return{canvas:ot,witdh:Ut,height:Ot}},me=()=>{!e||!ne(e)||n&&n.remove()},Qe=()=>{!e||!ne(e)||e.getTerrain()&&setTimeout(()=>{e&&e.terrain.sourceCache.sourceCache.reload()},200)},tt=ot=>{if(!(!e||!ne(e)))try{ot?e.getSource("terrain")&&(e.setTerrain({source:"terrain",exaggeration:1}),h_("1")):(e.getTerrain()&&e.setTerrain(null),h_("0"))}catch(Ut){console.error("Terrain control error:",Ut)}},se=(ot,Ut)=>e==null?void 0:e.queryRenderedFeatures(ot,Ut),ue=(ot,Ut)=>{!e||!ne(e)||e.panTo(ot,Ut)},Fe=ot=>{if(!(!e||!ne(e))&&(jg()&&e.panTo(ot,{duration:300}),rB())){const Xt=e.getContainer().clientHeight/4;e.panTo(ot,{offset:[0,-Xt],duration:300})}},Se=ot=>{!e||!ne(e)||e.easeTo(ot)},yt=async ot=>{if(!e||!ne(e))return;const Ut=jg()?20:0;if(ot.metaData.center){e.easeTo({center:ot.metaData.center,zoom:ot.metaData.minZoom+1.5,bearing:e.getBearing(),pitch:e.getPitch(),padding:Ut,duration:500});return}else e.fitBounds(ot.metaData.bounds,{bearing:e.getBearing(),padding:Ut,duration:500})},lt=async ot=>{if(!e||!ne(e))return;const Ut=NB(ot.geometry);e.fitBounds(Ut,{bearing:e.getBearing(),padding:20,duration:500})},mt=ot=>{if(!e||!ne(e))return;const Ut=e.getSprite();Ut||console.warn("Sprite is not available yet.");const Ot=Ut.find(Xt=>Xt.id===ot);if(Ot)return Ot.url;console.warn(`Sprite with id ${ot} not found.`)},Ye=()=>{if(!e||!ne(e))return console.warn("Map is not ready yet."),[0,0,0,0];const ot=jt=>Math.max(H4,Math.min(z4,jt)),Ut=jt=>(jt=jt%360,jt>180?jt-=360:jt<-180&&(jt+=360),jt),Ot=e.getBounds(),Xt=ot(Ot._sw.lat),Ft=ot(Ot._ne.lat);let Ue=Ut(Ot._sw.lng),sr=Ut(Ot._ne.lng);return Ue>sr&&(Ue=V4,sr=j4),[Ue,Xt,sr,Ft]},gt=()=>{if(!e||!ne(e)){console.warn("Map is not ready yet.");return}const ot=e.getStyle(),Ut={...ot.sources},Ot=[...ot.layers];for(const Xt of Ot)e.getLayer(Xt.id)&&e.removeLayer(Xt.id);for(const Xt in Ut)e.getSource(Xt)&&e.removeSource(Xt);for(const[Xt,Ft]of Object.entries(Ut))e.addSource(Xt,Ft);for(const Xt of Ot)e.addLayer(Xt);js(rx)&&e.setTerrain({source:"terrain",exaggeration:1})},Ct=()=>{!e||!ne(e)||(e.setTerrain(null),e.removeSource("terrain"),e.setTerrain({source:"terrain",exaggeration:1}),e.getBounds().toArray(),e.getZoom(),gt(),Qe())},nr=ot=>{if(!e||!ne(e))return;const Ut=e.getCanvas();Ut&&(Ut.style.cursor=ot)},Ae=ot=>Ut=>ot.subscribe(Ot=>{Ot&&Ut(Ot)});return{subscribe:i,init:Z,isInitialized:()=>js(V),remove:()=>{!e||!ne(e)||(e.remove(),e=null,o(null),f.set(null),s.set(null),v.set(null),C.set(null),P.set(null),Zd.set(!0),M.set(null),E.set(null),z.set(null),V.set(null),ee.set(null),n=null)},addLockonMarker:Ne,removeLockonMarker:me,queryRenderedFeatures:se,setCursor:nr,setData:(ot,Ut)=>{if(!e||!ne(e))return;const Ot=e.getSource(ot);Ot?Ot.setData(Ut):console.warn(`Source with ID ${ot} does not exist.`)},setStyle:Be,setFilter:ze,setLayoutProperty:(ot,Ut,Ot,Xt)=>{if(!(!e||!ne(e)))try{e.getLayer(ot)?e.setLayoutProperty(ot,Ut,Ot,Xt):console.warn(`Layer with ID ${ot} does not exist.`)}catch(Ft){console.error(`Error setting layout property for layer ${ot}:`,Ft)}},setBearing:ot=>e==null?void 0:e.setBearing(ot),setPitch:ot=>e==null?void 0:e.setPitch(ot),setZoom:ot=>e==null?void 0:e.setZoom(ot),setCamera:ot=>{if(!e)return;const Ut=e.queryTerrainElevation(ot);e.setCenterClampedToGround(!1),e.setCenterElevation(Ut??0),e._elevationStart=e._elevationTarget},resetCamera:()=>{e&&(e.setCenterClampedToGround(!0),e.setCenterElevation(0),e._elevationStart=e._elevationTarget)},fitBounds:(ot,Ut)=>{!e||!ne(e)||e.fitBounds(ot,Ut)},panTo:ue,panToPoi:Fe,flyTo:(ot,Ut)=>{!e||!ne(e)||e.flyTo({center:ot,...Ut})},easeTo:ot=>Se(ot),focusLayer:yt,focusFeature:lt,jumpToFac:Oe,terrainReload:Qe,toggleTerrain:tt,resetDem:Ct,resetAllSourcesAndLayers:gt,getLockonMarker:()=>n,getMap:()=>e,getZoom:()=>e==null?void 0:e.getZoom(),getCenter:()=>e==null?void 0:e.getCenter(),getPitch:()=>e==null?void 0:e.getPitch(),getBearing:()=>e==null?void 0:e.getBearing(),getTerrain:()=>e==null?void 0:e.getTerrain(),getLayer:ot=>{if(!(!e||!ne(e)))return e.getLayer(ot)},getState:()=>js(c),getImage:ot=>e==null?void 0:e.getImage(ot),getMapBounds:Ye,getSpriteUrl:mt,getCanvas:()=>e==null?void 0:e.getCanvas(),getMapContainer:ve,onSetStyle:Ae(P),onResize:Ae(z),onload:Ae(ee),onClick:Ae(d),onMouseover:Ae(f),onMouseout:Ae(s),onRotate:Ae(v),onZoom:Ae(C),onMooveEnd:Ae(E),onLoading:Ae(Zd),onInitialized:Ae(V),onStyleLoad:Ae(M),onStateChange:c.subscribe}},vU=SM();class TM extends Error{constructor(e="The operation was aborted"){super(e),this.name="AbortError"}}function wU(n,{signal:e}={}){return new Promise((i,o)=>{const c=()=>{o(new TM)},d=()=>{clearTimeout(f),c()};if(e!=null&&e.aborted)return c();const f=setTimeout(()=>{e==null||e.removeEventListener("abort",d),i()},n);e==null||e.addEventListener("abort",d,{once:!0})})}export{$M as $,rx as A,h_ as B,MI as C,oM as D,d2 as E,nU as F,Au as G,hU as H,yU as I,Cn as J,gU as K,N4 as L,s4 as M,mU as N,NB as O,aU as P,sU as Q,EM as R,ZM as S,Q0 as T,AU as U,oU as V,H4 as W,RB as X,VM as Y,qM as Z,Zn as _,z4 as a,WM as a0,KM as b,aB as c,wU as d,pU as e,dU as f,v2 as g,uU as h,iU as i,fU as j,eU as k,Bf as l,lU as m,Rp as n,XM as o,tx as p,tM as q,GM as r,QM as s,hM as t,cU as u,rU as v,tU as w,ip as x,vU as y,sB as z};
