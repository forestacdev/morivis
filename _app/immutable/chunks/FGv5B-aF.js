var Or=Object.defineProperty;var Ar=(r,e,t)=>e in r?Or(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var k=(r,e,t)=>Ar(r,typeof e!="symbol"?e+"":e,t);import{b as Nr,E as jr,f as Ur,F as zr,at as $r,h as Z,g as Rr,au as Lr,av as Cr,aw as Dr,ax as Br,ay as Vr,d as Nt,az as dr,aA as E}from"./uVeY05RF.js";import{j as Zr,k as Gr,i as qr,l as Hr}from"./CTN8pX-d.js";import{a as Kr,n as Wr,b as Yr}from"./NV4QSsm6.js";function bo(r,e,...t){var n=r,i=zr,s;Nr(()=>{i!==(i=e())&&(s&&($r(s),s=null),s=Ur(()=>i(n,...t)))},jr),Z&&(n=Rr)}function hr(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=hr(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Xr(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=hr(r))&&(n&&(n+=" "),n+=e);return n}function Jr(r){return typeof r=="object"?Xr(r):r??""}const jt=[...` 	
\r\f \v\uFEFF`];function Qr(r,e,t){var n=r==null?"":""+r;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var l=o+s;(o===0||jt.includes(n[o-1]))&&(l===n.length||jt.includes(n[l]))?n=(o===0?"":n.substring(0,o))+n.substring(l+1):o=l}}return n===""?null:n}function Ut(r,e=!1){var t=e?" !important;":";",n="";for(var i in r){var s=r[i];s!=null&&s!==""&&(n+=" "+i+": "+s+t)}return n}function rt(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function en(r,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,l=!1,c=[];n&&c.push(...Object.keys(n).map(rt)),i&&c.push(...Object.keys(i).map(rt));var a=0,u=-1;const y=r.length;for(var d=0;d<y;d++){var f=r[d];if(l?f==="/"&&r[d-1]==="*"&&(l=!1):s?s===f&&(s=!1):f==="/"&&r[d+1]==="*"?l=!0:f==='"'||f==="'"?s=f:f==="("?o++:f===")"&&o--,!l&&s===!1&&o===0){if(f===":"&&u===-1)u=d;else if(f===";"||d===y-1){if(u!==-1){var h=rt(r.substring(a,u).trim());if(!c.includes(h)){f!==";"&&d++;var b=r.substring(a,d).trim();t+=" "+b+";"}}a=d+1,u=-1}}}}return n&&(t+=Ut(n)),i&&(t+=Ut(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function tn(r,e,t,n,i,s){var o=r.__className;if(Z||o!==t||o===void 0){var l=Qr(t,n,s);(!Z||l!==r.getAttribute("class"))&&(l==null?r.removeAttribute("class"):e?r.className=l:r.setAttribute("class",l)),r.__className=t}else if(s&&i!==s)for(var c in s){var a=!!s[c];(i==null||a!==!!i[c])&&r.classList.toggle(c,a)}return s}function nt(r,e={},t,n){for(var i in t){var s=t[i];e[i]!==s&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,s,n))}}function rn(r,e,t,n){var i=r.__style;if(Z||i!==e){var s=en(e,n);(!Z||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=e}else n&&(Array.isArray(n)?(nt(r,t==null?void 0:t[0],n[0]),nt(r,t==null?void 0:t[1],n[1],"important")):nt(r,t,n));return n}const ye=Symbol("class"),ge=Symbol("style"),br=Symbol("is custom element"),pr=Symbol("is html");function po(r){if(Z){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var n=r.value;Le(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var i=r.checked;Le(r,"checked",null),r.checked=i}}};r.__on_r=t,Br(t),Zr()}}function nn(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Le(r,e,t,n){var i=yr(r);Z&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(r[Vr]=t),t==null?r.removeAttribute(e):typeof t!="string"&&gr(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function yo(r,e,t,n,i=!1){var s=yr(r),o=s[br],l=!s[pr];let c=Z&&o;c&&Nt(!1);var a=e||{},u=r.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class?t.class=Jr(t.class):t[ye]&&(t.class=null),t[ge]&&(t.style??(t.style=null));var f=gr(r);for(const p in t){let _=t[p];if(u&&p==="value"&&_==null){r.value=r.__value="",a[p]=_;continue}if(p==="class"){var h=r.namespaceURI==="http://www.w3.org/1999/xhtml";tn(r,h,_,n,e==null?void 0:e[ye],t[ye]),a[p]=_,a[ye]=t[ye];continue}if(p==="style"){rn(r,_,e==null?void 0:e[ge],t[ge]),a[p]=_,a[ge]=t[ge];continue}var b=a[p];if(_!==b){a[p]=_;var y=p[0]+p[1];if(y!=="$$")if(y==="on"){const g={},$="$$"+p;let P=p.slice(2);var S=Yr(P);if(Kr(P)&&(P=P.slice(0,-7),g.capture=!0),!S&&b){if(_!=null)continue;r.removeEventListener(P,a[$],g),a[$]=null}if(_!=null)if(S)r[`__${P}`]=_,qr([P]);else{let W=function(Y){a[p].call(this,Y)};a[$]=Gr(P,r,W,g)}else S&&(r[`__${P}`]=void 0)}else if(p==="style")Le(r,p,_);else if(p==="autofocus")Hr(r,!!_);else if(!o&&(p==="__value"||p==="value"&&_!=null))r.value=r.__value=_;else if(p==="selected"&&u)nn(r,_);else{var m=p;l||(m=Wr(m));var T=m==="defaultValue"||m==="defaultChecked";if(_==null&&!o&&!T)if(s[p]=null,m==="value"||m==="checked"){let g=r;const $=e===void 0;if(m==="value"){let P=g.defaultValue;g.removeAttribute(m),g.defaultValue=P,g.value=g.__value=$?P:null}else{let P=g.defaultChecked;g.removeAttribute(m),g.defaultChecked=P,g.checked=$?P:!1}}else r.removeAttribute(p);else T||f.includes(m)&&(o||typeof _!="string")?r[m]=_:typeof _!="function"&&Le(r,m,_)}}}return c&&Nt(!0),a}function yr(r){return r.__attributes??(r.__attributes={[br]:r.nodeName.includes("-"),[pr]:r.namespaceURI===Lr})}var zt=new Map;function gr(r){var e=zt.get(r.nodeName);if(e)return e;zt.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=Dr(n);for(var s in t)t[s].set&&e.push(s);n=Cr(n)}return e}const sn="https://raw.githubusercontent.com/forestacdev/morivis-data/main",be=sn+"/data",wt=be+"/entries",Qe=wt+"/fgb",on=wt+"/pmtiles/raster",q=wt+"/pmtiles/vector",B=be+"/images/cover",mr=be+"/images/feature",go=be+"/street-view",an=be+"/font",mo=an+"/{fontstack}/{range}.pbf",_o=be+"/images/cover/no_image.webp",wo="#00d4fe",ln=1024,vo={center:[136.923004009,35.5509525769706],zoom:16,pitch:0,bearing:0,bounds:[136.91278,35.543576,136.92986,35.556704]},xo={x:28846,y:12917,z:15},ko=["ensyurin_road2","gsi_road","ensyurin_rinhan","gsi_rinya_m","gsi_seamlessphoto"],H={type:"basemap",opacity:1,visible:!0,hueRotate:0,brightnessMin:0,brightnessMax:1,saturation:0,contrast:0},K={clickable:!1},$t={type:"circle",opacity:.8,visible:!0,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#ff00ea"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},cn={type:"line",opacity:.5,visible:!0,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#cf42cc"}}]},width:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}}]},lineStyle:"solid",labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},un={type:"fill",opacity:.5,visible:!0,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}},fn=r=>{const e=r.map(t=>({key:t,name:t,value:`{${t}}`}));return{key:r[0],show:!1,expressions:e}},dn={id:"ecoris_vege_5",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/vege/{z}/{x}/{y}.png"},metaData:{name:"第5回 植生図",description:"第5回 自然環境保全基礎調査 植生調査結果GISデータ(環境省生物多様性センター)を使用し、株式会社エコリスが着色し加工したもの",attribution:"エコリス地図タイル",downloadUrl:"https://map.ecoris.info/#contents",location:"全国",minZoom:5,maxZoom:15,tileSize:256,xyzImageTile:{x:7211,y:3229,z:13}},interaction:{...K},style:{...H}},hn=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),bn={id:"ecoris_vege_6",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/vege67/{z}/{x}/{y}.png"},metaData:{name:"第6～7回 植生図",description:"第6～7回 自然環境保全基礎調査 植生調査結果GISデータ(環境省生物多様性センター)を使用し、株式会社エコリスが着色し加工したもの",attribution:"エコリス地図タイル",downloadUrl:"https://map.ecoris.info/#contents",location:"全国",minZoom:5,maxZoom:15,tileSize:256,xyzImageTile:{x:7211,y:3229,z:13}},interaction:{...K},style:{...H}},pn=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),yn={id:"gbank_seamless",type:"raster",format:{type:"image",url:"https://gbank.gsj.jp/seamless/v2/api/1.3.1/tiles/{z}/{y}/{x}.png"},metaData:{name:"20万分の1日本シームレス地質図V2",description:"",downloadUrl:"https://gbank.gsj.jp/seamless/v2/api/1.3.1/#tiles",attribution:"産総研地質調査総合センター",location:"全国",minZoom:0,maxZoom:13,tileSize:256,xyzImageTile:{x:1827,y:777,z:11}},interaction:{...K},style:{...H}},gn=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),mn={id:"gifu_cs_map",type:"raster",format:{type:"image",url:"https://forestgeo.info/opendata/21_gifu/csmap_2023/{z}/{x}/{y}.webp"},metaData:{name:"CS立体図",description:"CS立体図",attribution:"岐阜県森林研究所",downloadUrl:"https://www.geospatial.jp/ckan/dataset/rinya-gifu-maptiles",location:"岐阜県",minZoom:8,maxZoom:18,tileSize:256,bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{...K},style:{...H}},_n=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),wn={id:"gsi_rinya",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/rinya/{z}/{x}/{y}.png"},metaData:{name:"森林（国有林）の空中写真（林野庁）",description:"",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#trinya",attribution:"国土地理院",location:"全国",minZoom:14,maxZoom:18,tileSize:256,xyzImageTile:{x:14515,y:6390,z:14}},interaction:{...K},style:{...H}},vn=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"})),xn={id:"gsi_rinya_m",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/rinya_m/{z}/{x}/{y}.png"},metaData:{name:"森林（民有林）の空中写真",description:"",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#trinya",attribution:"国土地理院",location:"全国",minZoom:14,maxZoom:18,tileSize:256},interaction:{...K},style:{...H}},kn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),Sn={id:"gsi_seamlessphoto",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg"},metaData:{name:"全国最新写真",description:"",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#seamlessphoto",attribution:"国土地理院",location:"全国",minZoom:1,maxZoom:18,tileSize:256},interaction:{...K},style:{...H}},Tn=Object.freeze(Object.defineProperty({__proto__:null,default:Sn},Symbol.toStringTag,{value:"Module"})),Pn={id:"gsi_std",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png"},metaData:{name:"地理院標準地図",description:"国土地理院の電子国土基本図",attribution:"国土地理院",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#std",location:"全国",minZoom:1,maxZoom:18,tileSize:256},interaction:{...K},style:{...H}},En=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),Fn={id:"ecoris_sugihinoki",type:"raster",format:{type:"image",url:"https://map.ecoris.info/tiles/sugihinoki/{z}/{x}/{y}.png"},metaData:{name:"スギ・ヒノキ・サワラ植林",description:"第5回 自然環境保全基礎調査 植生調査結果GISデータ(環境省生物多様性センター)からスギ・ヒノキ・サワラ植林を抽出し、株式会社エコリスが着色し加工したもの",attribution:"エコリス地図タイル",downloadUrl:"https://map.ecoris.info/#contents",location:"全国",minZoom:5,maxZoom:15,tileSize:256,xyzImageTile:{x:450,y:201,z:9}},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"category",name:"植林",colors:["#FD4202"],labels:["スギ・ヒノキ・サワラ"]}}},In=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),Mn={id:"gifu_slope_map",type:"raster",format:{type:"image",url:"https://tiles.arcgis.com/tiles/jJQWqgqiNhLLjkin/arcgis/rest/services/Gifu_2021Slpoe_2022_07_25_15_54/MapServer/tile/{z}/{y}/{x}"},metaData:{name:"傾斜区分図",description:"岐阜県の傾斜区分図",downloadUrl:"https://www.forest.rd.pref.gifu.lg.jp/shiyou/sinrinwebmap.html",attribution:"岐阜県森林研究所",location:"岐阜県",minZoom:1,maxZoom:18,tileSize:256,bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"category",name:"傾斜",colors:["#FFFFFF","#A2E0CB","#268F1E","#95E537","#E7E539","#E35CC2","#CC000D","#8F086A"],labels:["0 - 10度","10.1 - 15度","15.1 - 20度","20.1 - 25度","25.1 - 30度","30.1 - 35度","35.1 - 40度","40.1度以上"]}}},On=Object.freeze(Object.defineProperty({__proto__:null,default:Mn},Symbol.toStringTag,{value:"Module"})),An={id:"gsi_slopemap",type:"raster",format:{type:"image",url:"https://cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png"},metaData:{name:"傾斜量図",description:"",attribution:"国土地理院",downloadUrl:"https://maps.gsi.go.jp/development/ichiran.html#slopemap",location:"全国",minZoom:3,maxZoom:15,tileSize:256},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"gradient",name:"傾斜",colors:["#FFFFFF","#000000"],range:[0,90],unit:"度"}}},Nn=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),jn={id:"gifu_sugi_kansetugai",type:"raster",format:{type:"pmtiles",url:`${on}/gifu_sugi_kansetugai.pmtiles`},metaData:{name:"スギ人工林冠雪害危険度",description:"岐阜県スギ人工林冠雪害危険度マップ",downloadUrl:"https://www.forest.rd.pref.gifu.lg.jp/shiyou/kansetsugaimap.html",attribution:"岐阜県森林研究所",location:"岐阜県",minZoom:6,maxZoom:10,tileSize:512,xyzImageTile:{x:901,y:403,z:10},bounds:[136.1828594,34.9090933,137.8301219,36.7868122]},interaction:{clickable:!0},style:{type:"categorical",opacity:.6,legend:{type:"category",name:"20冬期中の危険日判定数",colors:["#FFFFFF","#FEFEA5","#FDCDFD","#FFBE31","#FC0013","#6F359C","#003796"],labels:["0日","1~2日","3~5日","6~10日","11〜15日","16~20日","21日以上"]}}},Un=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),zn={id:"ensyurin_kikenboku_h25",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Qe}/ensyurin_kikenboku_h25.fgb`},metaData:{name:"演習林危険木調査 H25",description:"",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/ensyurin_kikenboku_h25.webp`},properties:{keys:["樹種","状態"],titles:[{conditions:[],template:"{樹種} {状態}"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#ff0000"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}}},$n=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"})),Rn={id:"ensyurin_owl",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Qe}/ensyurin_owl.fgb`},metaData:{name:"OWL利用研修立木計測データ",description:"林業専攻-OWL利用研修立木計測データ",attribution:"株式会社アドイン研究所",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/owl.webp`},properties:{keys:["樹種"],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"OWL利用研修立木計測データ"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"樹高m",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#e70000"}},{type:"step",key:"樹高m",name:"樹高の範囲による色分け",mapping:{range:[4,20],divisions:6,values:["#dcd69c","#e20000"]}}]},radius:{key:"胸高直径cm",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}},{type:"linear",key:"胸高直径cm",name:"胸高直径",mapping:{range:[7,42.5],values:[5,10]}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"胸高直径cm",show:!1,expressions:[{key:"胸高直径cm",name:"胸高直径cm",value:"{胸高直径cm}"}]},default:{circle:{paint:{},layout:{}}}}},Ln=Object.freeze(Object.defineProperty({__proto__:null,default:Rn},Symbol.toStringTag,{value:"Module"})),Cn={id:"fac_phenology_2020",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Qe}/fac_phenology_2020.fgb`},metaData:{name:"フェノロジー調査_2020",description:"森林環境教育専攻のフェノロジー調査のデータ",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/phenology_2020.webp`},properties:{keys:["種名"],titles:[{conditions:["種名"],template:"{種名}"},{conditions:[],template:"フェノロジー調査_2020のポイント"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#33ec00"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"種名",show:!1,expressions:[{key:"種名",name:"種名",value:"{種名}"}]},default:{circle:{paint:{},layout:{}},symbol:{paint:{},layout:{}},heatmap:{paint:{},layout:{}}}}},Dn=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"})),Bn={id:"fac_sisetuannaitou",type:"vector",format:{type:"fgb",geometryType:"Point",url:`${Qe}/fac_sisetuannaitou.fgb`},metaData:{name:"施設案内棟",description:"施設案内棟",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:22,coverImage:`${B}/fac_sisetuannaitou.webp`},properties:{keys:[],titles:[{conditions:[],template:"施設案内棟"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#834f00"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"name",show:!1,expressions:[{key:"name",name:"name",value:"{name}"}]}}},Vn=Object.freeze(Object.defineProperty({__proto__:null,default:Bn},Symbol.toStringTag,{value:"Module"})),Zn={id:"gsi_road",type:"vector",format:{type:"mvt",geometryType:"LineString",url:"https://cyberjapandata.gsi.go.jp/xyz/optimal_bvmap-v1/{z}/{x}/{y}.pbf"},metaData:{name:"道路",description:"国土地理院の道路データ",attribution:"国土地理院",location:"全国",maxZoom:16,minZoom:4,sourceLayer:"RdCL",downloadUrl:"https://github.com/gsi-cyberjapan/optimal_bvmap"},properties:{keys:["種類"],titles:null},interaction:{clickable:!1},style:{type:"line",opacity:.5,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#dedede"}}]},width:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}}]},lineStyle:"solid",labels:{key:"vt_rdctg",show:!1,expressions:[{key:"vt_rdctg",name:"vt_rdctg",value:"{vt_rdctg}"}]},default:{symbol:{paint:{},layout:{"text-size":10,"symbol-placement":"line","symbol-spacing":100}}}}},Gn=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"})),qn={id:"fr_mesh20m_hyogo",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-hyogo.geospatial.jp/2023/rinya/tile/fr_mesh20m/{z}/{x}/{y}.pbf"},metaData:{name:"森林資源量集計メッシュ",description:"出典「兵庫県森林資源データ」",attribution:"林野庁",downloadUrl:"https://www.geospatial.jp/ckan/dataset/fr_mesh20m_hyogo",location:"兵庫県",minZoom:13,maxZoom:16,sourceLayer:"fr_mesh20m_hyogo",bounds:[134.252809,34.156129,135.468591,35.674667]},properties:{keys:[],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"兵庫県の森林資源メッシュ"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}}}}},Hn=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"})),Kn={id:"fr_mesh20m_kochi",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-kochi.geospatial.jp/2023/rinya/tile/fr_mesh20m/{z}/{x}/{y}.pbf"},metaData:{name:"森林資源量集計メッシュ",description:"出典「高知県森林資源データ」",attribution:"林野庁",downloadUrl:"https://www.geospatial.jp/ckan/dataset/fr_mesh20m_kochi",location:"高知県",minZoom:13,maxZoom:16,sourceLayer:"fr_mesh20m_kochi",bounds:[132.479888,32.702505,134.31367,33.882997]},properties:{keys:[],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"高知県の森林資源メッシュ"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}}]},outline:{show:!0,color:"#000000",width:1,lineStyle:"solid"},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}}}}},Wn=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"})),Yn={id:"tree_species_tochigi",type:"vector",format:{type:"mvt",geometryType:"Polygon",url:"https://rinya-tochigi.geospatial.jp/2023/rinya/tile/tree_species/{z}/{x}/{y}.pbf"},metaData:{name:"樹種ポリゴン",description:"出典：栃木県森林資源データ",attribution:"林野庁",downloadUrl:"https://www.geospatial.jp/ckan/dataset/tree_species_tochigi",location:"栃木県",minZoom:8,maxZoom:18,sourceLayer:"tree_species_tochigi",bounds:[139.326731,36.199924,140.291983,37.155039]},properties:{keys:[],titles:[{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"栃木県の樹種ポリゴン"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"解析樹種ID",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#349f1c"}},{type:"match",key:"解析樹種ID",name:"樹種ごとの色分け",mapping:{categories:["01","02","03","04","05","06","07","08","09","10","11","12","96","97","98","99"],values:["#00cc66","#99ff66","#cc0000","#ff9966","#ffcc99","#cc6600","#cc00cc","#ffff99","#ff9933","#cc9900","#ffff00","#8000ff","#8db3e2","#ccff99","#ff80ff","#bfbfbf"]}}]},outline:{show:!1,color:"#000000",width:2,lineStyle:"dashed"},labels:{key:"樹種",show:!1,expressions:[{key:"樹種",name:"樹種",value:"{樹種}"}]},default:{symbol:{paint:{"text-color":"#000000","text-halo-color":"#FFFFFF","text-halo-width":1,"text-opacity":1},layout:{"text-field":["to-string",["get","樹種"]],"text-max-width":12,"text-size":12,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}}}}},Xn=Object.freeze(Object.defineProperty({__proto__:null,default:Yn},Symbol.toStringTag,{value:"Module"})),Jn={id:"ensyurin_road2",type:"vector",format:{type:"pmtiles",geometryType:"LineString",url:`${q}/ensyurin.pmtiles`},metaData:{name:"演習林歩道",description:"演習林林道",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_road2",bounds:[136.919181,35.546981,136.92684,35.555131],coverImage:`${B}/ensyurin_road.webp`},properties:{keys:[],titles:[]},interaction:{clickable:!1},style:{type:"line",opacity:.8,colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#cacaca"}}]},width:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:5}}]},lineStyle:"solid",labels:{key:"種類",show:!1,expressions:[{key:"種類",name:"道の種類",value:"{種類}"}]},default:{symbol:{paint:{},layout:{"text-size":10,"symbol-placement":"line","symbol-spacing":100}}}}},Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"})),ei={id:"ensyurin_pole",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${q}/ensyurin.pmtiles`},metaData:{name:"サインポール",description:"演習林内のサインポール",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_pole",bounds:[136.919359,35.549761,136.926759,35.557836],coverImage:`${mr}/pole_3.webp`},properties:{keys:["name"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"サインポール"}]},interaction:{clickable:!0},style:{type:"circle",opacity:.8,markerType:"circle",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#e70000"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"ポールの名前",value:"{name}"}]}}},ti=Object.freeze(Object.defineProperty({__proto__:null,default:ei},Symbol.toStringTag,{value:"Module"})),ri={id:"fac_building_point",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${q}/fac_search.pmtiles`},metaData:{name:"アカデミー施設",description:"森林文化アカデミーの施設",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"fac_building_point",bounds:[136.91764622017772,35.553369893337134,136.9198923648159,35.55575869336596],coverImage:`${mr}/fac_center.webp`},properties:{keys:["name","建物名称","構造規模"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"施設"}]},interaction:{clickable:!0},style:{type:"circle",opacity:1,markerType:"icon",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#000000"}}]},outline:{show:!0,color:"#ffffff",width:2},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},icon:{show:!0,size:.2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"建物名称",value:"{name}"}]},default:{symbol:{layout:{"text-field":["to-string",["get","name"]],"text-size":14,"text-variable-anchor":["bottom-left","bottom-right"],"text-radial-offset":2.1,"text-justify":"auto"},paint:{"text-halo-color":"#ffffff","text-halo-width":2}}}}},ni=Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"})),ii={id:"fac_poi",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${q}/fac_search.pmtiles`},metaData:{name:"その他施設・林内ランドマーク",description:"その他施設・林内ランドマーク",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"fac_poi",bounds:[136.9190129344606,35.548385,136.925213,35.555474],coverImage:`${B}/fac_poi.webp`},properties:{keys:["name"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"その他施設・林内ランドマーク"}]},interaction:{clickable:!0},style:{type:"circle",opacity:1,markerType:"icon",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#c00a0a"}}]},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},outline:{show:!0,color:"#ffffff",width:2},icon:{show:!0,size:.2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"建物名称",value:"{name}"}]},default:{circle:{paint:{},layout:{}},symbol:{layout:{"text-field":["to-string",["get","name"]],"text-size":14,"text-variable-anchor":["bottom-left","bottom-right"],"text-radial-offset":2,"text-justify":"auto","icon-image":["get","_prop_id"],"icon-size":.1,"icon-anchor":"bottom"},paint:{"text-halo-color":"#ffffff","text-halo-width":2}}}}},si=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"})),oi={id:"fac_ziriki_point",type:"vector",format:{type:"pmtiles",geometryType:"Point",url:`${q}/fac_search.pmtiles`},metaData:{name:"自力建設",description:"自力建設",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"fac_ziriki_point",bounds:[136.91669416774363,35.552165704819075,136.9232546722223,35.55613247338581],coverImage:`${B}/ziriki.webp`},properties:{keys:["name","年度"],titles:[{conditions:["name"],template:"{name}"},{conditions:[],template:"自力建設"}]},interaction:{clickable:!0},style:{type:"circle",opacity:1,markerType:"icon",colors:{show:!0,key:"単色",expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#a03d00"}}]},outline:{show:!0,color:"#ffffff",width:2},radius:{key:"単一",expressions:[{type:"single",key:"単一",name:"単一",mapping:{value:8}}]},icon:{show:!0,size:.2},labels:{key:"名前",show:!1,expressions:[{key:"名前",name:"建物名称",value:"{name}"}]},default:{symbol:{layout:{"text-field":["to-string",["get","name"]],"text-size":14,"text-variable-anchor":["bottom-left","bottom-right"],"text-radial-offset":2,"text-justify":"auto"},paint:{"text-halo-color":"#ffffff","text-halo-width":2}}}}},ai=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"})),li={id:"ensyurin_rinhan",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${q}/ensyurin.pmtiles`},metaData:{name:"演習林林班",description:"森林文化アカデミー演習林の林班。",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_rinhan",bounds:[136.91917,35.54692,136.926817,35.555122],coverImage:`${B}/ensyurin.webp`},properties:{keys:["小林班ID","樹種","林齢","面積","林班"],titles:[{conditions:["樹種","林齢"],template:"{樹種}林 {林齢}年生"},{conditions:["樹種"],template:"{樹種}"},{conditions:[],template:"演習林林班"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"樹種",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#00ff00"}},{type:"match",key:"樹種",name:"樹種ごとの色分け",mapping:{categories:["スギ","ヒノキ","アカマツ","スラッシュマツ","広葉樹","草地","その他岩石"],values:["#399210","#4ADDA5","#DD2B2B","#B720BF","#EBBC22","#2351E5","#D98F34"]}},{type:"match",key:"林班",name:"林班ごとの色分け",mapping:{categories:[1,2,3],values:["#ff0000","#059854","#9d00ff"]}},{type:"step",key:"林齢",name:"林齢の範囲による色分け",mapping:{range:[0,100],divisions:5,values:["#ffffff","#059854"]}},{type:"step",key:"面積",name:"面積の範囲による色分け",mapping:{range:[0,1],divisions:5,values:["#ffffff","#ff0000"]}}]},outline:{show:!0,color:"#ffffff",width:2,lineStyle:"dashed"},labels:{key:"樹種",show:!0,expressions:[{key:"小林班ID",name:"小林班IDのラベル",value:"{小林班ID}"},{key:"林齢",name:"林齢のラベル",value:"{林齢}年生"},{key:"樹種",name:"樹種のラベル",value:"{樹種}林"}]}}},ci=Object.freeze(Object.defineProperty({__proto__:null,default:li},Symbol.toStringTag,{value:"Module"})),ui={id:"ensyurin_siken",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${q}/ensyurin.pmtiles`},metaData:{name:"演習林試験地",description:"森林文化アカデミー演習林の試験地。",attribution:"森林文化アカデミー",location:"森林文化アカデミー",maxZoom:14,minZoom:1,sourceLayer:"ensyurin_siken",bounds:[136.920084,35.549852,136.925498,35.554401],coverImage:`${B}/ensyurin_siken.webp`},properties:{keys:["活用内容","活用期間","番号"],titles:[{conditions:["活用内容","活用期間"],template:"{活用内容} {活用期間}"},{conditions:["活用内容"],template:"{活用内容}"},{conditions:[],template:"演習林林班"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#001aff"}}]},outline:{show:!1,color:"#000000",width:2,lineStyle:"solid"},labels:{key:"活用内容",show:!0,expressions:[{key:"活用内容",name:"活用内容",value:"{活用内容}"},{key:"活用期間",name:"活用期間",value:"{活用期間}"}]}}},fi=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"})),di={id:"mino_geology",type:"vector",format:{type:"pmtiles",geometryType:"Polygon",url:`${q}/mino_geology.pmtiles`},metaData:{name:"美濃市地質図",description:"美濃市地質図。",attribution:"産総研地質調査総合センター",location:"美濃市",minZoom:0,maxZoom:14,sourceLayer:"geo_A",bounds:[136.74706,35.503199,137.014386,35.669838]},properties:{keys:[],titles:[{conditions:["Symbol"],template:"{Symbol}"},{conditions:[],template:"美濃市の地質"}]},interaction:{clickable:!0},style:{type:"fill",opacity:.5,colors:{key:"Symbol",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:"#9f1c1c"}},{type:"match",key:"Symbol",name:"地質ごとの色分け",mapping:{categories:["a","ts","tl","th","A","Ha","Q","D","Kgr","Au","Al","Kz","Ktu","Ktl","Kou","Kol","Ta","Ya","Nmx","Nmm","Nbf","Ncs","Nss","Nal","Nms","Nsi","Ncl","Nch","Nto","Nls","Nbs","Fmx","Fss","Fch","Flc","Fls","Fbs","Kmx","Ksx","Kss","Kms","Ksi","Kch","Kto","Kls","Kbs","KAcgl","KAss","KAsi","KAch","KAto","KAls","KAbs","Water"],values:["#ffffff","#bad0ee","#d7e2f4","#e7eee5","#6f4d61","#a0b24f","#ea6645","#cd6380","#ec6572","#f99ea5","#6f6a79","#d1a284","#d58985","#f9a09c","#d1a284","#ffcba4","#b3a7b9","#ffcba4","#c8ae9b","#ddd0aa","#cee0df","#ffea89","#ded481","#b5c783","#b8d0f1","#cecbe5","#374a87","#f6974a","#375e87","#3a69ba","#355b46","#c8ae9b","#ded481","#f6974a","#374a87","#3a69ba","#355b46","#c8ae9b","#b0a196","#ded481","#b8d0f1","#cecbe5","#f6974a","#375e87","#3a69ba","#355b46","#b9833f","#dbd178","#cecbe5","#f6974a","#375e87","#3a69ba","#355b46","#d6ffff"]}}]},outline:{show:!0,color:"#000000",width:2,lineStyle:"solid"},labels:{key:"Symbol",show:!0,expressions:[{key:"Symbol",name:"Symbolのラベル",value:"{Symbol}"}]},default:{fill:{paint:{},layout:{}},line:{paint:{},layout:{}},circle:{paint:{},layout:{}},symbol:{paint:{},layout:{}}}}},hi=Object.freeze(Object.defineProperty({__proto__:null,default:di},Symbol.toStringTag,{value:"Module"}));function _r(r,e,t){if(r!==null)for(var n,i,s,o,l,c,a,u=0,d=0,f,h=r.type,b=h==="FeatureCollection",y=h==="Feature",S=b?r.features.length:1,m=0;m<S;m++){a=b?r.features[m].geometry:y?r.geometry:r,f=a?a.type==="GeometryCollection":!1,l=f?a.geometries.length:1;for(var T=0;T<l;T++){var p=0,_=0;if(o=f?a.geometries[T]:a,o!==null){c=o.coordinates;var g=o.type;switch(u=0,g){case null:break;case"Point":if(e(c,d,m,p,_)===!1)return!1;d++,p++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(e(c[n],d,m,p,_)===!1)return!1;d++,g==="MultiPoint"&&p++}g==="LineString"&&p++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-u;i++){if(e(c[n][i],d,m,p,_)===!1)return!1;d++}g==="MultiLineString"&&p++,g==="Polygon"&&_++}g==="Polygon"&&p++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(_=0,i=0;i<c[n].length;i++){for(s=0;s<c[n][i].length-u;s++){if(e(c[n][i][s],d,m,p,_)===!1)return!1;d++}_++}p++}break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(_r(o.geometries[n],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function So(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function bi(r,e={}){if(r.bbox!=null&&e.recompute!==!0)return r.bbox;const t=[1/0,1/0,-1/0,-1/0];return _r(r,n=>{t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}var pi=bi;const To=(r,e)=>{var n;const t=(n=e.find(({conditions:i})=>i.every(s=>r[s]!==void 0)))==null?void 0:n.template;return t?t.replace(/\{([^}]+)\}/g,(i,s)=>r[s]!==void 0?r[s]:`{${s}}`):""},yi=r=>{const e=new Set;return r.features.forEach(t=>{t.properties&&Object.keys(t.properties).forEach(n=>{e.add(n)})}),Array.from(e)},me=4,_e=4,Se=4,V=new Int32Array(2),Rt=new Float32Array(V.buffer),Lt=new Float64Array(V.buffer),Ae=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var ct;(function(r){r[r.UTF8_BYTES=1]="UTF8_BYTES",r[r.UTF16_STRING=2]="UTF16_STRING"})(ct||(ct={}));class D{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new D(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return V[0]=this.readInt32(e),Rt[0]}readFloat64(e){return V[Ae?0:1]=this.readInt32(e),V[Ae?1:0]=this.readInt32(e+4),Lt[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){Rt[0]=t,this.writeInt32(e,V[0])}writeFloat64(e,t){Lt[0]=t,this.writeInt32(e,V[Ae?0:1]),this.writeInt32(e+4,V[Ae?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+me+_e)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<_e;t++)e+=String.fromCharCode(this.readInt8(this.position_+me+t));return e}__offset(e,t){const n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const n=this.readInt32(e);e+=me;const i=this.bytes_.subarray(e,e+n);return t===ct.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+me}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=_e)throw new Error("FlatBuffers: file identifier must be length "+_e);for(let t=0;t<_e;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+me+t))return!1;return!0}createScalarList(e,t){const n=[];for(let i=0;i<t;++i){const s=e(i);s!==null&&n.push(s)}return n}createObjList(e,t){const n=[];for(let i=0;i<t;++i){const s=e(i);s!==null&&n.push(s.unpack())}return n}}const vt=new Uint8Array(0);function gi(){return this._source.cancel()}function mi(r,e){if(!r.length)return e;if(!e.length)return r;var t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function _i(){var r=this,e=r._array.subarray(r._index);return r._source.read().then(function(t){return r._array=vt,r._index=0,t.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:mi(e,t.value)}})}function wi(r){if((r|=0)<0)throw new Error("invalid length");var e=this,t=this._array.length-this._index;if(this._index+r<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=r));var n=new Uint8Array(r);return n.set(this._array.subarray(this._index)),function i(){return e._source.read().then(function(s){return s.done?(e._array=vt,e._index=0,t>0?n.subarray(0,t):null):t+s.value.length>=r?(e._array=s.value,e._index=r-t,n.set(s.value.subarray(0,r-t),t),n):(n.set(s.value,t),t+=s.value.length,i())})}()}function vi(r){return typeof r.slice=="function"?r:new et(typeof r.read=="function"?r:r.getReader())}function et(r){this._source=r,this._array=vt,this._index=0}et.prototype.read=_i;et.prototype.slice=wi;et.prototype.cancel=gi;var x,I=((x={})[x.Byte=0]="Byte",x[x.UByte=1]="UByte",x[x.Bool=2]="Bool",x[x.Short=3]="Short",x[x.UShort=4]="UShort",x[x.Int=5]="Int",x[x.UInt=6]="UInt",x[x.Long=7]="Long",x[x.ULong=8]="ULong",x[x.Float=9]="Float",x[x.Double=10]="Double",x[x.String=11]="String",x[x.Json=12]="Json",x[x.DateTime=13]="DateTime",x[x.Binary=14]="Binary",x);class F{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsColumn(e,t){return(t||new F).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsColumn(e,t){return e.setPosition(e.position()+Se),(t||new F).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}type(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):I.Byte}title(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}width(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}precision(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}scale(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}nullable(){let e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}unique(){let e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}primaryKey(){let e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}metadata(e){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}static startColumn(e){e.startObject(11)}static addName(e,t){e.addFieldOffset(0,t,0)}static addType(e,t){e.addFieldInt8(1,t,I.Byte)}static addTitle(e,t){e.addFieldOffset(2,t,0)}static addDescription(e,t){e.addFieldOffset(3,t,0)}static addWidth(e,t){e.addFieldInt32(4,t,-1)}static addPrecision(e,t){e.addFieldInt32(5,t,-1)}static addScale(e,t){e.addFieldInt32(6,t,-1)}static addNullable(e,t){e.addFieldInt8(7,+t,1)}static addUnique(e,t){e.addFieldInt8(8,+t,0)}static addPrimaryKey(e,t){e.addFieldInt8(9,+t,0)}static addMetadata(e,t){e.addFieldOffset(10,t,0)}static endColumn(e){let t=e.endObject();return e.requiredField(t,4),t}static createColumn(e,t,n,i,s,o,l,c,a,u,d,f){return F.startColumn(e),F.addName(e,t),F.addType(e,n),F.addTitle(e,i),F.addDescription(e,s),F.addWidth(e,o),F.addPrecision(e,l),F.addScale(e,c),F.addNullable(e,a),F.addUnique(e,u),F.addPrimaryKey(e,d),F.addMetadata(e,f),F.endColumn(e)}}class j{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsCrs(e,t){return(t||new j).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCrs(e,t){return e.setPosition(e.position()+Se),(t||new j).__init(e.readInt32(e.position())+e.position(),e)}org(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}code(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}wkt(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}codeString(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}static startCrs(e){e.startObject(6)}static addOrg(e,t){e.addFieldOffset(0,t,0)}static addCode(e,t){e.addFieldInt32(1,t,0)}static addName(e,t){e.addFieldOffset(2,t,0)}static addDescription(e,t){e.addFieldOffset(3,t,0)}static addWkt(e,t){e.addFieldOffset(4,t,0)}static addCodeString(e,t){e.addFieldOffset(5,t,0)}static endCrs(e){return e.endObject()}static createCrs(e,t,n,i,s,o,l){return j.startCrs(e),j.addOrg(e,t),j.addCode(e,n),j.addName(e,i),j.addDescription(e,s),j.addWkt(e,o),j.addCodeString(e,l),j.endCrs(e)}}var w,M=((w={})[w.Unknown=0]="Unknown",w[w.Point=1]="Point",w[w.LineString=2]="LineString",w[w.Polygon=3]="Polygon",w[w.MultiPoint=4]="MultiPoint",w[w.MultiLineString=5]="MultiLineString",w[w.MultiPolygon=6]="MultiPolygon",w[w.GeometryCollection=7]="GeometryCollection",w[w.CircularString=8]="CircularString",w[w.CompoundCurve=9]="CompoundCurve",w[w.CurvePolygon=10]="CurvePolygon",w[w.MultiCurve=11]="MultiCurve",w[w.MultiSurface=12]="MultiSurface",w[w.Curve=13]="Curve",w[w.Surface=14]="Surface",w[w.PolyhedralSurface=15]="PolyhedralSurface",w[w.TIN=16]="TIN",w[w.Triangle=17]="Triangle",w);class Ce{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsHeader(e,t){return(t||new Ce).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsHeader(e,t){return e.setPosition(e.position()+Se),(t||new Ce).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}envelope(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}envelopeLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}envelopeArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}geometryType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):M.Unknown}hasZ(){let e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasM(){let e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasT(){let e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasTm(){let e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}columns(e,t){let n=this.bb.__offset(this.bb_pos,18);return n?(t||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}featuresCount(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}indexNodeSize(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}crs(e){let t=this.bb.__offset(this.bb_pos,24);return t?(e||new j).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}title(e){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}metadata(e){let t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}static startHeader(e){e.startObject(14)}static addName(e,t){e.addFieldOffset(0,t,0)}static addEnvelope(e,t){e.addFieldOffset(1,t,0)}static createEnvelopeVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startEnvelopeVector(e,t){e.startVector(8,t,8)}static addGeometryType(e,t){e.addFieldInt8(2,t,M.Unknown)}static addHasZ(e,t){e.addFieldInt8(3,+t,0)}static addHasM(e,t){e.addFieldInt8(4,+t,0)}static addHasT(e,t){e.addFieldInt8(5,+t,0)}static addHasTm(e,t){e.addFieldInt8(6,+t,0)}static addColumns(e,t){e.addFieldOffset(7,t,0)}static createColumnsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startColumnsVector(e,t){e.startVector(4,t,4)}static addFeaturesCount(e,t){e.addFieldInt64(8,t,BigInt("0"))}static addIndexNodeSize(e,t){e.addFieldInt16(9,t,16)}static addCrs(e,t){e.addFieldOffset(10,t,0)}static addTitle(e,t){e.addFieldOffset(11,t,0)}static addDescription(e,t){e.addFieldOffset(12,t,0)}static addMetadata(e,t){e.addFieldOffset(13,t,0)}static endHeader(e){return e.endObject()}static finishHeaderBuffer(e,t){e.finish(t)}static finishSizePrefixedHeaderBuffer(e,t){e.finish(t,void 0,!0)}}class O{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsGeometry(e,t){return(t||new O).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGeometry(e,t){return e.setPosition(e.position()+Se),(t||new O).__init(e.readInt32(e.position())+e.position(),e)}ends(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}endsLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}endsArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}xy(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}xyLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}xyArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}z(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}zLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}zArray(){let e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}m(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}mLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}mArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}t(e){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}tLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}tArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}tm(e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}tmLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):M.Unknown}parts(e,t){let n=this.bb.__offset(this.bb_pos,18);return n?(t||new O).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}partsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGeometry(e){e.startObject(8)}static addEnds(e,t){e.addFieldOffset(0,t,0)}static createEndsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()}static startEndsVector(e,t){e.startVector(4,t,4)}static addXy(e,t){e.addFieldOffset(1,t,0)}static createXyVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startXyVector(e,t){e.startVector(8,t,8)}static addZ(e,t){e.addFieldOffset(2,t,0)}static createZVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startZVector(e,t){e.startVector(8,t,8)}static addM(e,t){e.addFieldOffset(3,t,0)}static createMVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startMVector(e,t){e.startVector(8,t,8)}static addT(e,t){e.addFieldOffset(4,t,0)}static createTVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}static startTVector(e,t){e.startVector(8,t,8)}static addTm(e,t){e.addFieldOffset(5,t,0)}static createTmVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()}static startTmVector(e,t){e.startVector(8,t,8)}static addType(e,t){e.addFieldInt8(6,t,M.Unknown)}static addParts(e,t){e.addFieldOffset(7,t,0)}static createPartsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startPartsVector(e,t){e.startVector(4,t,4)}static endGeometry(e){return e.endObject()}static createGeometry(e,t,n,i,s,o,l,c,a){return O.startGeometry(e),O.addEnds(e,t),O.addXy(e,n),O.addZ(e,i),O.addM(e,s),O.addT(e,o),O.addTm(e,l),O.addType(e,c),O.addParts(e,a),O.endGeometry(e)}}class U{constructor(){k(this,"bb",null);k(this,"bb_pos",0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFeature(e,t){return(t||new U).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFeature(e,t){return e.setPosition(e.position()+Se),(t||new U).__init(e.readInt32(e.position())+e.position(),e)}geometry(e){let t=this.bb.__offset(this.bb_pos,4);return t?(e||new O).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}properties(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}propertiesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}propertiesArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}columns(e,t){let n=this.bb.__offset(this.bb_pos,8);return n?(t||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFeature(e){e.startObject(3)}static addGeometry(e,t){e.addFieldOffset(0,t,0)}static addProperties(e,t){e.addFieldOffset(1,t,0)}static createPropertiesVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startPropertiesVector(e,t){e.startVector(1,t,1)}static addColumns(e,t){e.addFieldOffset(2,t,0)}static createColumnsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startColumnsVector(e,t){e.startVector(4,t,4)}static endFeature(e){return e.endObject()}static finishFeatureBuffer(e,t){e.finish(t)}static finishSizePrefixedFeatureBuffer(e,t){e.finish(t,void 0,!0)}static createFeature(e,t,n,i){return U.startFeature(e),U.addGeometry(e,t),U.addProperties(e,n),U.addColumns(e,i),U.endFeature(e)}}function xt(r){let e=Ce.getRootAsHeader(r),t=e.featuresCount(),n=e.indexNodeSize(),i=[];for(let l=0;l<e.columnsLength();l++){let c=e.columns(l);if(!c)throw Error("Column unexpectedly missing");if(!c.name())throw Error("Column name unexpectedly missing");i.push({name:c.name(),type:c.type(),title:c.title(),description:c.description(),width:c.width(),precision:c.precision(),scale:c.scale(),nullable:c.nullable(),unique:c.unique(),primary_key:c.primaryKey()})}let s=e.crs(),o=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:e.geometryType(),columns:i,envelope:null,featuresCount:Number(t),indexNodeSize:n,crs:o,title:e.title(),description:e.description(),metadata:e.metadata()}}const ee=new Uint8Array([102,103,98,3,102,103,98,0]),C=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ut=function(r,e){return ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},ut(r,e)};function xi(r,e){ut(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ue(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{a(n.next(u))}catch(d){o(d)}}function c(u){try{a(n.throw(u))}catch(d){o(d)}}function a(u){u.done?s(u.value):i(u.value).then(l,c)}a((n=n.apply(r,[])).next())})}function G(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=a[0]&2?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[a[0]&2,s.value]),a[0]){case 0:case 1:s=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){t.label=a[1];break}if(a[0]===6&&t.label<s[1]){t.label=s[1],s=a;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(a);break}s[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(u){a=[6,u],i=0}finally{n=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function pe(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(r){return this instanceof ve?(this.v=r,this):new ve(r)}function ki(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){n[f]&&(i[f]=function(h){return new Promise(function(b,y){s.push([f,h,b,y])>1||l(f,h)})})}function l(f,h){try{c(n[f](h))}catch(b){d(s[0][3],b)}}function c(f){f.value instanceof ve?Promise.resolve(f.value.v).then(a,u):d(s[0][2],f)}function a(f){l("next",f)}function u(f){l("throw",f)}function d(f,h){f(h),s.shift(),s.length&&l(s[0][0],s[0][1])}}var wr=function(r){xi(e,r);function e(t){var n=r.call(this,t)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(n,n.constructor),n}return e}(Error);(function(){function r(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(r.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),r.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},r.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},r})();(function(){function r(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(r.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},r.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},r})();(function(){function r(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(r.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},r.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},r})();function ft(r){r!=null&&typeof r.then=="function"&&r.then(Ve,Ve)}var it=0,Ct=1,ne=2,De=3,dt=4,Be=1024,Ve=function(){};function le(r){var e=r.err,t=Promise.resolve(r.execution).then(function(n){if(e!=null)throw e;return n});return r.err=void 0,r.execution=t.then(function(){},function(){}),r.pending===void 0?t:r.pending.then(function(){return t})}function Q(r,e){var t=r.state>=De;return Promise.resolve(e).then(function(n){return!t&&r.state>=dt?le(r).then(function(i){return{value:i,done:!0}}):{value:n,done:t}})}function kt(r,e){var t,n;if(!(r.state>=ne))if(r.state=ne,r.onnext(),r.onstop(),r.err==null&&(r.err=e),r.pushes.length===0&&(typeof r.buffer>"u"||r.buffer.empty))we(r);else try{for(var i=pe(r.pushes),s=i.next();!s.done;s=i.next()){var o=s.value;o.resolve()}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}function we(r){var e,t;if(!(r.state>=De)){r.state<ne&&kt(r),r.state=De,r.buffer=void 0;try{for(var n=pe(r.nexts),i=n.next();!i.done;i=n.next()){var s=i.value,o=r.pending===void 0?le(r):r.pending.then(function(){return le(r)});s.resolve(Q(r,o))}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}r.pushes=[],r.nexts=[]}}function Dt(r){r.state>=dt||(r.state<De&&we(r),r.state=dt)}function Si(r,e){if(ft(e),r.pushes.length>=Be)throw new wr("No more than "+Be+" pending calls to push are allowed on a single repeater.");if(r.state>=ne)return Promise.resolve(void 0);var t=r.pending===void 0?Promise.resolve(e):r.pending.then(function(){return e});t=t.catch(function(c){r.state<ne&&(r.err=c),Dt(r)});var n;if(r.nexts.length){var i=r.nexts.shift();i.resolve(Q(r,t)),r.nexts.length?n=Promise.resolve(r.nexts[0].value):typeof r.buffer<"u"&&!r.buffer.full?n=Promise.resolve(void 0):n=new Promise(function(c){return r.onnext=c})}else typeof r.buffer<"u"&&!r.buffer.full?(r.buffer.add(t),n=Promise.resolve(void 0)):n=new Promise(function(c){return r.pushes.push({resolve:c,value:t})});var s=!0,o={},l=n.catch(function(c){if(s)throw c});return o.then=function(c,a){return s=!1,Promise.prototype.then.call(n,c,a)},o.catch=function(c){return s=!1,Promise.prototype.catch.call(n,c)},o.finally=n.finally.bind(n),r.pending=t.then(function(){return l}).catch(function(c){r.err=c,Dt(r)}),o}function Ti(r){var e=kt.bind(null,r),t=new Promise(function(n){return r.onstop=n});return e.then=t.then.bind(t),e.catch=t.catch.bind(t),e.finally=t.finally.bind(t),e}function Pi(r){if(!(r.state>=Ct)){r.state=Ct;var e=Si.bind(null,r),t=Ti(r);r.execution=new Promise(function(n){return n(r.executor(e,t))}),r.execution.catch(function(){return kt(r)})}}var Ne=new WeakMap,Te=function(){function r(e,t){Ne.set(this,{executor:e,buffer:t,err:void 0,state:it,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Ve,onstop:Ve})}return r.prototype.next=function(e){ft(e);var t=Ne.get(this);if(t===void 0)throw new Error("WeakMap error");if(t.nexts.length>=Be)throw new wr("No more than "+Be+" pending calls to next are allowed on a single repeater.");if(t.state<=it&&Pi(t),t.onnext(e),typeof t.buffer<"u"&&!t.buffer.empty){var n=Q(t,t.buffer.remove());if(t.pushes.length){var i=t.pushes.shift();t.buffer.add(i.value),t.onnext=i.resolve}return n}else if(t.pushes.length){var s=t.pushes.shift();return t.onnext=s.resolve,Q(t,s.value)}else if(t.state>=ne)return we(t),Q(t,le(t));return new Promise(function(o){return t.nexts.push({resolve:o,value:e})})},r.prototype.return=function(e){ft(e);var t=Ne.get(this);if(t===void 0)throw new Error("WeakMap error");return we(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),Q(t,le(t))},r.prototype.throw=function(e){var t=Ne.get(this);if(t===void 0)throw new Error("WeakMap error");return t.state<=it||t.state>=ne||typeof t.buffer<"u"&&!t.buffer.empty?(we(t),t.err==null&&(t.err=e),Q(t,le(t))):this.next(Promise.reject(e))},r.prototype[Symbol.asyncIterator]=function(){return this},r.race=Ei,r.merge=Fi,r.zip=Ii,r.latest=Mi,r}();function tt(r,e){var t,n,i=[],s=function(a){a!=null&&typeof a[Symbol.asyncIterator]=="function"?i.push(a[Symbol.asyncIterator]()):a!=null&&typeof a[Symbol.iterator]=="function"?i.push(a[Symbol.iterator]()):i.push(function(){return ki(this,arguments,function(){return G(this,function(f){switch(f.label){case 0:return e.yieldValues?[4,ve(a)]:[3,3];case 1:return[4,f.sent()];case 2:f.sent(),f.label=3;case 3:return e.returnValues?[4,ve(a)]:[3,5];case 4:return[2,f.sent()];case 5:return[2]}})})}())};try{for(var o=pe(r),l=o.next();!l.done;l=o.next()){var c=l.value;s(c)}}catch(a){t={error:a}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function Ei(r){var e=this,t=tt(r,{returnValues:!0});return new Te(function(n,i){return ue(e,void 0,void 0,function(){var s,o,l,c,a,u;return G(this,function(d){switch(d.label){case 0:if(!t.length)return i(),[2];o=!1,i.then(function(){s(),o=!0}),d.label=1;case 1:d.trys.push([1,,5,7]),c=void 0,a=0,u=function(){var f,h,b,y,S,m;return G(this,function(T){switch(T.label){case 0:f=a;try{for(h=(S=void 0,pe(t)),b=h.next();!b.done;b=h.next())y=b.value,Promise.resolve(y.next()).then(function(p){p.done?(i(),l===void 0&&(l=p)):a===f&&(a++,s(p))},function(p){return i(p)})}catch(p){S={error:p}}finally{try{b&&!b.done&&(m=h.return)&&m.call(h)}finally{if(S)throw S.error}}return[4,new Promise(function(p){return s=p})];case 1:return c=T.sent(),c===void 0?[3,3]:[4,n(c.value)];case 2:T.sent(),T.label=3;case 3:return[2]}})},d.label=2;case 2:return o?[3,4]:[5,u()];case 3:return d.sent(),[3,2];case 4:return[2,l&&l.value];case 5:return i(),[4,Promise.race(t.map(function(f){return f.return&&f.return()}))];case 6:return d.sent(),[7];case 7:return[2]}})})})}function Fi(r){var e=this,t=tt(r,{yieldValues:!0});return new Te(function(n,i){return ue(e,void 0,void 0,function(){var s,o,l,c=this;return G(this,function(a){switch(a.label){case 0:if(!t.length)return i(),[2];s=[],o=!1,i.then(function(){var u,d;o=!0;try{for(var f=pe(s),h=f.next();!h.done;h=f.next()){var b=h.value;b()}}catch(y){u={error:y}}finally{try{h&&!h.done&&(d=f.return)&&d.call(f)}finally{if(u)throw u.error}}}),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.all(t.map(function(u,d){return ue(c,void 0,void 0,function(){var f,h;return G(this,function(b){switch(b.label){case 0:b.trys.push([0,,6,9]),b.label=1;case 1:return o?[3,5]:(Promise.resolve(u.next()).then(function(y){return s[d](y)},function(y){return i(y)}),[4,new Promise(function(y){s[d]=y})]);case 2:return f=b.sent(),f===void 0?[3,4]:f.done?(l=f,[2]):[4,n(f.value)];case 3:b.sent(),b.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return h=u.return,h?[4,u.return()]:[3,8];case 7:h=b.sent(),b.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return a.sent(),[2,l&&l.value];case 3:return i(),[7];case 4:return[2]}})})})}function Ii(r){var e=this,t=tt(r,{returnValues:!0});return new Te(function(n,i){return ue(e,void 0,void 0,function(){var s,o,l,c;return G(this,function(a){switch(a.label){case 0:if(!t.length)return i(),[2,[]];o=!1,i.then(function(){s(),o=!0}),a.label=1;case 1:a.trys.push([1,,6,8]),a.label=2;case 2:return o?[3,5]:(Promise.all(t.map(function(u){return u.next()})).then(function(u){return s(u)},function(u){return i(u)}),[4,new Promise(function(u){return s=u})]);case 3:return l=a.sent(),l===void 0?[2]:(c=l.map(function(u){return u.value}),l.some(function(u){return u.done})?[2,c]:[4,n(c)]);case 4:return a.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(t.map(function(u){return u.return&&u.return()}))];case 7:return a.sent(),[7];case 8:return[2]}})})})}function Mi(r){var e=this,t=tt(r,{yieldValues:!0,returnValues:!0});return new Te(function(n,i){return ue(e,void 0,void 0,function(){var s,o,l,c,a,u=this;return G(this,function(d){switch(d.label){case 0:if(!t.length)return i(),[2,[]];o=[],l=!1,i.then(function(){var f,h;s();try{for(var b=pe(o),y=b.next();!y.done;y=b.next()){var S=y.value;S()}}catch(m){f={error:m}}finally{try{y&&!y.done&&(h=b.return)&&h.call(b)}finally{if(f)throw f.error}}l=!0}),d.label=1;case 1:return d.trys.push([1,,5,7]),Promise.all(t.map(function(f){return f.next()})).then(function(f){return s(f)},function(f){return i(f)}),[4,new Promise(function(f){return s=f})];case 2:return c=d.sent(),c===void 0?[2]:(a=c.map(function(f){return f.value}),c.every(function(f){return f.done})?[2,a]:[4,n(a.slice())]);case 3:return d.sent(),[4,Promise.all(t.map(function(f,h){return ue(u,void 0,void 0,function(){var b;return G(this,function(y){switch(y.label){case 0:if(c[h].done)return[2,c[h].value];y.label=1;case 1:return l?[3,4]:(Promise.resolve(f.next()).then(function(S){return o[h](S)},function(S){return i(S)}),[4,new Promise(function(S){return o[h]=S})]);case 2:return b=y.sent(),b===void 0?[2,c[h].value]:b.done?[2,b.value]:(a[h]=b.value,[4,n(a.slice())]);case 3:return y.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,d.sent()];case 5:return i(),[4,Promise.all(t.map(function(f){return f.return&&f.return()}))];case 6:return d.sent(),[7];case 7:return[2]}})})})}const Je=class Je{constructor(){k(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(e){if(e<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}};k(Je,"global",new Je);let Ze=Je;const Oi=40,Ai=16;function St(r,e){e=Math.min(Math.max(+e,2),65535);let t=r,n=t;do n+=t=Math.ceil(t/e);while(t!==1);return 40*n}function Ni(r,e){if(e<2)throw Error("Node size must be at least 2");if(r===0)throw Error("Number of items must be greater than 0");let t=r,n=t,i=[t];do n+=t=Math.ceil(t/e),i.push(t);while(t!==1);let s=[];for(let l of(t=n,i))s.push(t-l),t-=l;let o=[];for(let l=0;l<i.length;l++)o.push([s[l],s[l]+i[l]]);return o}async function*ji(r,e,t,n){class i{constructor(h,b){k(this,"_level");k(this,"nodes");this._level=b,this.nodes=h}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(h){this.nodes[1]=h}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:s,minY:o,maxX:l,maxY:c}=t,a=Ni(r,e),u=a[0][0],d=[new i([0,1],a.length-1)];for(;d.length!==0;){let f=d.shift(),h=f.startNodeIdx(),b=h>=u,y=(()=>{let[,T]=a[f.level()],p=Math.min(f.endNodeIdx()+e,T);return b&&p<T?p+1:p})(),S=y-h,m=new DataView(await n(40*h,40*S));for(let T=h;T<y;T++){let p=T-h,_=40*p;if(l<m.getFloat64(_+0,!0)||c<m.getFloat64(_+8,!0)||s>m.getFloat64(_+16,!0)||o>m.getFloat64(_+24,!0))continue;let g=m.getBigUint64(_+32,!0);if(b){let Y=(()=>{if(T<r-1){let v=(p+1)*40;return m.getBigUint64(v+32,!0)-g}return null})(),Fe=T-u;yield[Number(g),Fe,Number(Y)];continue}let $=Ze.global.extraRequestThreshold()/40,P=d[d.length-1];if(P!==void 0&&P.level()===f.level()-1&&g<P.endNodeIdx()+$){P.extendEndNodeIdx(Number(g));continue}let W=(()=>{let Y=f.level()-1;return new i([Number(g),Number(g)+1],Y)})();P!==void 0&&(P.level(),W.level()),d.push(W)}}}class Tt{constructor(e,t,n,i,s){k(this,"headerClient");k(this,"header");k(this,"headerLength");k(this,"indexLength");k(this,"nocache");this.headerClient=e,this.header=t,this.headerLength=n,this.indexLength=i,this.nocache=s}static async open(e,t){let n,i=new Bt(e,t),s=2024+(()=>{let a,u=0;for(a=0;a<3;a++)u+=Ai**a*Oi;return u})();if(!new Uint8Array(await i.getRange(0,8,s,"header")).subarray(0,3).every((a,u)=>ee[u]===a))throw Error("Not a FlatGeobuf file");if((n=new DataView(await i.getRange(8,4,s,"header")).getUint32(0,!0))>10485760||n<8)throw Error("Invalid header size");let o=await i.getRange(12,n,s,"header"),l=xt(new D(new Uint8Array(o))),c=St(l.featuresCount,l.indexNodeSize);return new Tt(i,l,n,c,t)}async*selectBbox(e){let t=this.lengthBeforeTree(),n=this.headerClient,i=async(c,a)=>n.getRange(t+c,a,0,"index"),s=[],o=[];for await(let c of ji(this.header.featuresCount,this.header.indexNodeSize,e,i)){let[a,u]=c,[,,d]=c;if(d||(d=4),o.length===0){o.push([a,d,u]);continue}let f=o[o.length-1];a-(f[0]+f[1])>Ze.global.extraRequestThreshold()&&(s.push(o),o=[]),o.push([a,d,u])}this.headerClient.logUsage("header+index"),o.length>0&&s.push(o);let l=s.flatMap(c=>this.readFeatureBatch(c,this.nocache));yield*Te.merge(l)}lengthBeforeTree(){return ee.length+C+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(e){return new Bt(this.headerClient.httpClient,e)}async*readFeatureBatch(e,t){let[n]=e[0],[i,s]=e[e.length-1],o=this.buildFeatureClient(t),l=i+s-n;for(let[c,,a]of e){let u=await this.readFeature(o,c,l);yield{id:a,feature:u},l=0}o.logUsage("feature")}async readFeature(e,t,n){let i,s=t+this.lengthBeforeFeatures();i=new DataView(await e.getRange(s,4,n,"feature length")).getUint32(0,!0);let o=new Uint8Array(await e.getRange(s+4,i,n,"feature data")),l=new Uint8Array(i+C);l.set(o,C);let c=new D(l);return c.setPosition(C),U.getRootAsFeature(c)}}class Bt{constructor(e,t){k(this,"httpClient");k(this,"bytesEverUsed",0);k(this,"bytesEverFetched",0);k(this,"buffer",new ArrayBuffer(0));k(this,"head",0);if(typeof e=="string")this.httpClient=new Vt(e,t);else if(e instanceof Vt)this.httpClient=e;else throw Error("Unknown source ")}async getRange(e,t,n,i){this.bytesEverUsed+=t;let s=e-this.head,o=s+t;if(s>=0&&o<=this.buffer.byteLength)return this.buffer.slice(s,o);let l=Math.max(t,n);return this.bytesEverFetched+=l,this.buffer=await this.httpClient.getRange(e,l,i),this.head=e,this.buffer.slice(0,t)}logUsage(e){e.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}}class Vt{constructor(e,t){k(this,"url");k(this,"nocache");k(this,"requestsEverMade",0);k(this,"bytesEverRequested",0);this.url=e,this.nocache=t}async getRange(e,t,n){this.requestsEverMade+=1,this.bytesEverRequested+=t;let i={Range:`bytes=${e}-${e+t-1}`};return this.nocache&&(i["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:i})).arrayBuffer()}}function st(r,e){let t=[];for(let n=0;n<r.length;n+=2){let i=[r[n],r[n+1]];e&&i.push(e[n>>1]),t.push(i)}return t}new TextEncoder;let Zt=new TextDecoder;function Ui(r,e){let t={};if(!e||e.length===0)return t;let n=r.propertiesArray();if(!n)return t;let i=new DataView(n.buffer,n.byteOffset),s=r.propertiesLength(),o=0;for(;o<s;){let l=i.getUint16(o,!0);o+=2;let c=e[l],a=c.name;switch(c.type){case I.Bool:t[a]=!!i.getUint8(o),o+=1;break;case I.Byte:t[a]=i.getInt8(o),o+=1;break;case I.UByte:t[a]=i.getUint8(o),o+=1;break;case I.Short:t[a]=i.getInt16(o,!0),o+=2;break;case I.UShort:t[a]=i.getUint16(o,!0),o+=2;break;case I.Int:t[a]=i.getInt32(o,!0),o+=4;break;case I.UInt:t[a]=i.getUint32(o,!0),o+=4;break;case I.Long:t[a]=Number(i.getBigInt64(o,!0)),o+=8;break;case I.ULong:t[a]=Number(i.getBigUint64(o,!0)),o+=8;break;case I.Float:t[a]=i.getFloat32(o,!0),o+=4;break;case I.Double:t[a]=i.getFloat64(o,!0),o+=8;break;case I.DateTime:case I.String:{let u=i.getUint32(o,!0);o+=4,t[a]=Zt.decode(n.subarray(o,o+u)),o+=u;break}case I.Json:{let u=i.getUint32(o,!0);o+=4;let d=Zt.decode(n.subarray(o,o+u));t[a]=JSON.parse(d),o+=u;break}case I.Binary:{let u=i.getUint32(o,!0);o+=4,t[a]=n.subarray(o,o+u),o+=u;break}default:throw Error(`Unknown type ${c.type}`)}}return t}function zi(r,e,t){if(!r.subarray(0,3).every((u,d)=>ee[d]===u))throw Error("Not a FlatGeobuf file");let n=new D(r),i=n.readUint32(ee.length);n.setPosition(ee.length+C);let s=xt(n),o=ee.length+C+i,{indexNodeSize:l,featuresCount:c}=s;l>0&&(o+=St(c,l));let a=[];for(;o<n.capacity();){let u=n.readUint32(o);n.setPosition(o+C);let d=U.getRootAsFeature(n);a.push(e(a.length,d,s)),o+=C+u}return a}async function*$i(r,e,t){let n,i=vi(r),s=async h=>await i.slice(h),o=new Uint8Array(await s(8));if(!o.subarray(0,3).every((h,b)=>ee[b]===h))throw Error("Not a FlatGeobuf file");o=new Uint8Array(await s(4));let l=new D(o),c=l.readUint32(0);o=new Uint8Array(await s(c));let a=xt(l=new D(o)),{indexNodeSize:u,featuresCount:d}=a;if(u>0){let h=St(d,u);await s(h)}let f=0;for(;n=await Li(s,a,e,f++);)yield n}async function*Ri(r,e,t,n,i=!1){let s=await Tt.open(r,i);for await(let o of s.selectBbox(e))yield t(o.id,o.feature,s.header)}async function Li(r,e,t,n){let i=new Uint8Array(await r(4,"feature length"));if(i.byteLength===0)return;let s=new D(i),o=s.readUint32(0);i=new Uint8Array(await r(o,"feature data"));let l=new Uint8Array(o+4);return l.set(i,4),(s=new D(l)).setPosition(C),t(n,U.getRootAsFeature(s),e)}const Ci={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class vr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ci[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Pe=6378137,oe=Math.PI*Pe,Di=[-oe,-oe,oe,oe],Bi=[-180,-85,180,85],je=Pe*Math.log(Math.tan(Math.PI/2));class se extends vr{constructor(e){super({code:e,units:"m",extent:Di,global:!0,worldExtent:Bi,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Pe)}})}}const Gt=[new se("EPSG:3857"),new se("EPSG:102100"),new se("EPSG:102113"),new se("EPSG:900913"),new se("http://www.opengis.net/def/crs/EPSG/0/3857"),new se("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Vi(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let s=0;s<i;s+=n){e[s]=oe*r[s]/180;let o=Pe*Math.log(Math.tan(Math.PI*(+r[s+1]+90)/360));o>je?o=je:o<-je&&(o=-je),e[s+1]=o}return e}function Zi(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let s=0;s<i;s+=n)e[s]=180*r[s]/oe,e[s+1]=360*Math.atan(Math.exp(r[s+1]/Pe))/Math.PI-90;return e}const Gi=6378137,qt=[-180,-90,180,90],qi=Math.PI*Gi/180;class J extends vr{constructor(e,t){super({code:e,units:"degrees",extent:qt,axisOrientation:t,global:!0,metersPerUnit:qi,worldExtent:qt})}}const Ht=[new J("CRS:84"),new J("EPSG:4326","neu"),new J("urn:ogc:def:crs:OGC:1.3:CRS84"),new J("urn:ogc:def:crs:OGC:2:84"),new J("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new J("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new J("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ot={};function Ge(r,e,t){const n=r.getCode(),i=e.getCode();n in ot||(ot[n]={}),ot[n][i]=t}function xr(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function Hi(r){r.getCode(),Ge(r,r,xr)}function Ki(r){r.forEach(Hi)}function Kt(r){Ki(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Ge(e,t,xr)})})}function Wi(r,e,t,n){r.forEach(function(i){e.forEach(function(s){Ge(i,s,t),Ge(s,i,n)})})}function Yi(){Kt(Gt),Kt(Ht),Wi(Ht,Gt,Vi,Zi)}Yi();function ht(r,e){let t=e;if(t===M.Unknown&&(t=r.type()),t===M.GeometryCollection){let i=[];for(let s=0;s<r.partsLength();s++){let o=r.parts(s),l=o.type();i.push(ht(o,l))}return{type:M[t],geometries:i}}if(t===M.MultiPolygon){let i=[];for(let s=0;s<r.partsLength();s++)i.push(ht(r.parts(s),M.Polygon));return{type:M[t],coordinates:i.map(s=>s.coordinates)}}let n=function(i,s){let o=i.xyArray(),l=i.zArray();switch(s){case M.Point:{let c=Array.from(o);return l&&c.push(l[0]),c}case M.MultiPoint:case M.LineString:return st(o,l);case M.MultiLineString:case M.Polygon:return function(c,a,u){let d;if(!u||u.length===0)return[st(c,a)];let f=0,h=Array.from(u).map(b=>c.slice(f,f=b<<1));return a&&(f=0,d=Array.from(u).map(b=>a.slice(f,f=b))),h.map((b,y)=>st(b,d?d[y]:void 0))}(o,l,i.endsArray())}}(r,t);return{type:M[t],coordinates:n}}function Pt(r,e,t){let n=t.columns;return{type:"Feature",id:r,geometry:ht(e.geometry(),t.geometryType),properties:Ui(e,n)}}function Xi(r,e){return{type:"FeatureCollection",features:zi(r,Pt)}}function Ji(r,e){return $i(r,Pt)}function Qi(r,e,t,n=!1){return Ri(r,e,Pt,t,n)}function es(r,e,t,n=!1){return r instanceof Uint8Array?Xi(r):r instanceof ReadableStream?Ji(r):Qi(r,e,t,n)}const Et=["label","point","line","polygon","raster"],Wt=E("idle"),ts=()=>{const r={label:[],point:["fac_ziriki_point","fac_building_point","fac_poi"],line:["ensyurin_road2","gsi_road"],polygon:["ensyurin_rinhan"],raster:["gsi_rinya_m","gsi_seamlessphoto"]},{subscribe:e,update:t,set:n}=E({...r});return{subscribe:e,add:(i,s)=>t(o=>(o[s].includes(i)||(o[s]=[i,...o[s]]),{...o})),remove:i=>t(s=>{for(const o of Et)s[o]=s[o].filter(l=>l!==i);return fe.has(i)&&fe.remove(i),{...s}}),reorderWithinTypeById:(i,s,o)=>t(l=>{const c=[...l[i]],a=c.indexOf(s),u=c.indexOf(o);if(a===-1||u===-1||a===u)return Wt.set("invalid"),{...l};const d=c.splice(a,1)[0];return c.splice(u,0,d),l[i]=c,Wt.set("success"),{...l}}),reset:()=>n({...r})}},kr=ts(),rs=dr(kr,r=>Et.flatMap(e=>r[e])),Po=dr(kr,r=>{const e={};let t=0;for(const n of Et){const i=r[n];i.length>0&&(e[t]=n,t+=i.length)}return e}),Eo=E(!0),Fo=r=>{if(r.type==="raster")return"raster";if(r.type==="vector"){if(r.format.geometryType==="Label")return"label";if(r.format.geometryType==="Point")return"point";if(r.format.geometryType==="LineString")return"line";if(r.format.geometryType==="Polygon")return"polygon"}else throw new Error(`Unknown layer type: ${r.id}`)},Io=async r=>{try{return(await fetch(r)).json()}catch(e){throw console.error(e),new Error("Failed to fetch GeoJSON")}},Mo=async(r,e)=>{try{const t=await fetch(r),n=es(t.body),i={type:"FeatureCollection",features:[]};for await(const s of n)i.features.push(s);return i}catch(t){throw console.error(t),new Error("Failed to fetch GeoJSON")}},Oo=(r,e)=>{const{properties:t,id:n,layer:i}=r;return{point:e,properties:t,featureId:n,layerId:i.id}};class fe{static set(e,t){this.cache.set(e,t)}static get(e){return this.cache.get(e)}static remove(e){this.cache.delete(e)}static clear(){this.cache.clear()}static has(e){return this.cache.has(e)}static keys(){return this.cache.keys()}}k(fe,"cache",new Map);rs.subscribe(r=>{for(const e of fe.keys())r.includes(e)||fe.remove(e)});const Ao=async r=>{try{const e=await r.text(),t=JSON.parse(e);if(t.type!=="FeatureCollection"||!Array.isArray(t.features))throw new Error("Invalid GeoJSON structure");return t}catch(e){throw console.error("GeoJSON parsing error:",e),new Error("Failed to parse GeoJSON file")}};function Re(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function ns(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function Sr(r){let e,t,n;r.length!==2?(e=Re,t=(l,c)=>Re(r(l),c),n=(l,c)=>r(l)-c):(e=r===Re||r===ns?r:is,t=r,n=r);function i(l,c,a=0,u=l.length){if(a<u){if(e(c,c)!==0)return u;do{const d=a+u>>>1;t(l[d],c)<0?a=d+1:u=d}while(a<u)}return a}function s(l,c,a=0,u=l.length){if(a<u){if(e(c,c)!==0)return u;do{const d=a+u>>>1;t(l[d],c)<=0?a=d+1:u=d}while(a<u)}return a}function o(l,c,a=0,u=l.length){const d=i(l,c,a,u-1);return d>a&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:i,center:o,right:s}}function is(){return 0}function ss(r){return r===null?NaN:+r}const os=Sr(Re),as=os.right;Sr(ss).center;const ls=Math.sqrt(50),cs=Math.sqrt(10),us=Math.sqrt(2);function qe(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=ls?10:s>=cs?5:s>=us?2:1;let l,c,a;return i<0?(a=Math.pow(10,-i)/o,l=Math.round(r*a),c=Math.round(e*a),l/a<r&&++l,c/a>e&&--c,a=-a):(a=Math.pow(10,i)*o,l=Math.round(r/a),c=Math.round(e/a),l*a<r&&++l,c*a>e&&--c),c<l&&.5<=t&&t<2?qe(r,e,t*2):[l,c,a]}function fs(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,s,o]=n?qe(e,r,t):qe(r,e,t);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(n)if(o<0)for(let a=0;a<l;++a)c[a]=(s-a)/-o;else for(let a=0;a<l;++a)c[a]=(s-a)*o;else if(o<0)for(let a=0;a<l;++a)c[a]=(i+a)/-o;else for(let a=0;a<l;++a)c[a]=(i+a)*o;return c}function bt(r,e,t){return e=+e,r=+r,t=+t,qe(r,e,t)[2]}function ds(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?bt(e,r,t):bt(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function hs(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function Ft(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function Tr(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Ee(){}var xe=.7,He=1/xe,ce="\\s*([+-]?\\d+)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",R="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bs=/^#([0-9a-f]{3,8})$/,ps=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),ys=new RegExp(`^rgb\\(${R},${R},${R}\\)$`),gs=new RegExp(`^rgba\\(${ce},${ce},${ce},${ke}\\)$`),ms=new RegExp(`^rgba\\(${R},${R},${R},${ke}\\)$`),_s=new RegExp(`^hsl\\(${ke},${R},${R}\\)$`),ws=new RegExp(`^hsla\\(${ke},${R},${R},${ke}\\)$`),Yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ft(Ee,de,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Xt,formatHex:Xt,formatHex8:vs,formatHsl:xs,formatRgb:Jt,toString:Jt});function Xt(){return this.rgb().formatHex()}function vs(){return this.rgb().formatHex8()}function xs(){return Pr(this).formatHsl()}function Jt(){return this.rgb().formatRgb()}function de(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=bs.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?Qt(e):t===3?new A(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ue(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ue(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ps.exec(r))?new A(e[1],e[2],e[3],1):(e=ys.exec(r))?new A(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gs.exec(r))?Ue(e[1],e[2],e[3],e[4]):(e=ms.exec(r))?Ue(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_s.exec(r))?rr(e[1],e[2]/100,e[3]/100,1):(e=ws.exec(r))?rr(e[1],e[2]/100,e[3]/100,e[4]):Yt.hasOwnProperty(r)?Qt(Yt[r]):r==="transparent"?new A(NaN,NaN,NaN,0):null}function Qt(r){return new A(r>>16&255,r>>8&255,r&255,1)}function Ue(r,e,t,n){return n<=0&&(r=e=t=NaN),new A(r,e,t,n)}function ks(r){return r instanceof Ee||(r=de(r)),r?(r=r.rgb(),new A(r.r,r.g,r.b,r.opacity)):new A}function pt(r,e,t,n){return arguments.length===1?ks(r):new A(r,e,t,n??1)}function A(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}Ft(A,pt,Tr(Ee,{brighter(r){return r=r==null?He:Math.pow(He,r),new A(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?xe:Math.pow(xe,r),new A(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new A(re(this.r),re(this.g),re(this.b),Ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:er,formatHex:er,formatHex8:Ss,formatRgb:tr,toString:tr}));function er(){return`#${te(this.r)}${te(this.g)}${te(this.b)}`}function Ss(){return`#${te(this.r)}${te(this.g)}${te(this.b)}${te((isNaN(this.opacity)?1:this.opacity)*255)}`}function tr(){const r=Ke(this.opacity);return`${r===1?"rgb(":"rgba("}${re(this.r)}, ${re(this.g)}, ${re(this.b)}${r===1?")":`, ${r})`}`}function Ke(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function re(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function te(r){return r=re(r),(r<16?"0":"")+r.toString(16)}function rr(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new z(r,e,t,n)}function Pr(r){if(r instanceof z)return new z(r.h,r.s,r.l,r.opacity);if(r instanceof Ee||(r=de(r)),!r)return new z;if(r instanceof z)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),s=Math.max(e,t,n),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(t-n)/l+(t<n)*6:t===s?o=(n-e)/l+2:o=(e-t)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new z(o,l,c,r.opacity)}function Ts(r,e,t,n){return arguments.length===1?Pr(r):new z(r,e,t,n??1)}function z(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}Ft(z,Ts,Tr(Ee,{brighter(r){return r=r==null?He:Math.pow(He,r),new z(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?xe:Math.pow(xe,r),new z(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new A(at(r>=240?r-240:r+120,i,n),at(r,i,n),at(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new z(nr(this.h),ze(this.s),ze(this.l),Ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Ke(this.opacity);return`${r===1?"hsl(":"hsla("}${nr(this.h)}, ${ze(this.s)*100}%, ${ze(this.l)*100}%${r===1?")":`, ${r})`}`}}));function nr(r){return r=(r||0)%360,r<0?r+360:r}function ze(r){return Math.max(0,Math.min(1,r||0))}function at(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const It=r=>()=>r;function Ps(r,e){return function(t){return r+t*e}}function Es(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function Fs(r){return(r=+r)==1?Er:function(e,t){return t-e?Es(e,t,r):It(isNaN(e)?t:e)}}function Er(r,e){var t=e-r;return t?Ps(r,t):It(isNaN(r)?e:r)}const yt=function r(e){var t=Fs(e);function n(i,s){var o=t((i=pt(i)).r,(s=pt(s)).r),l=t(i.g,s.g),c=t(i.b,s.b),a=Er(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=c(u),i.opacity=a(u),i+""}}return n.gamma=r,n}(1);function Is(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(s){for(i=0;i<t;++i)n[i]=r[i]*(1-s)+e[i]*s;return n}}function Ms(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Os(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),s=new Array(t),o;for(o=0;o<n;++o)i[o]=Mt(r[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=i[o](l);return s}}function As(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function We(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function Ns(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=Mt(r[i],e[i]):n[i]=e[i];return function(s){for(i in t)n[i]=t[i](s);return n}}var gt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lt=new RegExp(gt.source,"g");function js(r){return function(){return r}}function Us(r){return function(e){return r(e)+""}}function zs(r,e){var t=gt.lastIndex=lt.lastIndex=0,n,i,s,o=-1,l=[],c=[];for(r=r+"",e=e+"";(n=gt.exec(r))&&(i=lt.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:We(n,i)})),t=lt.lastIndex;return t<e.length&&(s=e.slice(t),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Us(c[0].x):js(e):(e=c.length,function(a){for(var u=0,d;u<e;++u)l[(d=c[u]).i]=d.x(a);return l.join("")})}function Mt(r,e){var t=typeof e,n;return e==null||t==="boolean"?It(e):(t==="number"?We:t==="string"?(n=de(e))?(e=n,yt):zs:e instanceof de?yt:e instanceof Date?As:Ms(e)?Is:Array.isArray(e)?Os:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ns:We)(r,e)}function $s(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function Rs(r){return function(){return r}}function Ls(r){return+r}var ir=[0,1];function ae(r){return r}function mt(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:Rs(isNaN(e)?NaN:.5)}function Cs(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function Ds(r,e,t){var n=r[0],i=r[1],s=e[0],o=e[1];return i<n?(n=mt(i,n),s=t(o,s)):(n=mt(n,i),s=t(s,o)),function(l){return s(n(l))}}function Bs(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),s=new Array(n),o=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=mt(r[o],r[o+1]),s[o]=t(e[o],e[o+1]);return function(l){var c=as(r,l,1,n)-1;return s[c](i[c](l))}}function Vs(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function Zs(){var r=ir,e=ir,t=Mt,n,i,s,o=ae,l,c,a;function u(){var f=Math.min(r.length,e.length);return o!==ae&&(o=Cs(r[0],r[f-1])),l=f>2?Bs:Ds,c=a=null,d}function d(f){return f==null||isNaN(f=+f)?s:(c||(c=l(r.map(n),e,t)))(n(o(f)))}return d.invert=function(f){return o(i((a||(a=l(e,r.map(n),We)))(f)))},d.domain=function(f){return arguments.length?(r=Array.from(f,Ls),u()):r.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),t=$s,u()},d.clamp=function(f){return arguments.length?(o=f?!0:ae,u()):o!==ae},d.interpolate=function(f){return arguments.length?(t=f,u()):t},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return n=f,i=h,u()}}function Gs(){return Zs()(ae,ae)}function qs(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Ye(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function he(r){return r=Ye(Math.abs(r)),r?r[1]:NaN}function Hs(r,e){return function(t,n){for(var i=t.length,s=[],o=0,l=r[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(t.substring(i-=l,i+l)),!((c+=l+1)>n));)l=r[o=(o+1)%r.length];return s.reverse().join(e)}}function Ks(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var Ws=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xe(r){if(!(e=Ws.exec(r)))throw new Error("invalid format: "+r);var e;return new Ot({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xe.prototype=Ot.prototype;function Ot(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}Ot.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ys(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var Fr;function Xs(r,e){var t=Ye(r,e);if(!t)return r+"";var n=t[0],i=t[1],s=i-(Fr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Ye(r,Math.max(0,e+s-1))[0]}function sr(r,e){var t=Ye(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const or={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:qs,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>sr(r*100,e),r:sr,s:Xs,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function ar(r){return r}var lr=Array.prototype.map,cr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Js(r){var e=r.grouping===void 0||r.thousands===void 0?ar:Hs(lr.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",s=r.numerals===void 0?ar:Ks(lr.call(r.numerals,String)),o=r.percent===void 0?"%":r.percent+"",l=r.minus===void 0?"−":r.minus+"",c=r.nan===void 0?"NaN":r.nan+"";function a(d){d=Xe(d);var f=d.fill,h=d.align,b=d.sign,y=d.symbol,S=d.zero,m=d.width,T=d.comma,p=d.precision,_=d.trim,g=d.type;g==="n"?(T=!0,g="g"):or[g]||(p===void 0&&(p=12),_=!0,g="g"),(S||f==="0"&&h==="=")&&(S=!0,f="0",h="=");var $=y==="$"?t:y==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",P=y==="$"?n:/[%p]/.test(g)?o:"",W=or[g],Y=/[defgprs%]/.test(g);p=p===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function Fe(v){var X=$,N=P,ie,At,Ie;if(g==="c")N=W(v)+N,v="";else{v=+v;var Me=v<0||1/v<0;if(v=isNaN(v)?c:W(Math.abs(v),p),_&&(v=Ys(v)),Me&&+v==0&&b!=="+"&&(Me=!1),X=(Me?b==="("?b:l:b==="-"||b==="("?"":b)+X,N=(g==="s"?cr[8+Fr/3]:"")+N+(Me&&b==="("?")":""),Y){for(ie=-1,At=v.length;++ie<At;)if(Ie=v.charCodeAt(ie),48>Ie||Ie>57){N=(Ie===46?i+v.slice(ie+1):v.slice(ie))+N,v=v.slice(0,ie);break}}}T&&!S&&(v=e(v,1/0));var Oe=X.length+v.length+N.length,L=Oe<m?new Array(m-Oe+1).join(f):"";switch(T&&S&&(v=e(L+v,L.length?m-N.length:1/0),L=""),h){case"<":v=X+v+N+L;break;case"=":v=X+L+v+N;break;case"^":v=L.slice(0,Oe=L.length>>1)+X+v+N+L.slice(Oe);break;default:v=L+X+v+N;break}return s(v)}return Fe.toString=function(){return d+""},Fe}function u(d,f){var h=a((d=Xe(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor(he(f)/3)))*3,y=Math.pow(10,-b),S=cr[8+b/3];return function(m){return h(y*m)+S}}return{format:a,formatPrefix:u}}var $e,Ir,Mr;Qs({thousands:",",grouping:[3],currency:["$",""]});function Qs(r){return $e=Js(r),Ir=$e.format,Mr=$e.formatPrefix,$e}function eo(r){return Math.max(0,-he(Math.abs(r)))}function to(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(he(e)/3)))*3-he(Math.abs(r)))}function ro(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,he(e)-he(r))+1}function no(r,e,t,n){var i=ds(r,e,t),s;switch(n=Xe(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(s=to(i,o))&&(n.precision=s),Mr(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=ro(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=eo(i))&&(n.precision=s-(n.type==="%")*2);break}}return Ir(n)}function io(r){var e=r.domain;return r.ticks=function(t){var n=e();return fs(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return no(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,s=n.length-1,o=n[i],l=n[s],c,a,u=10;for(l<o&&(a=o,o=l,l=a,a=i,i=s,s=a);u-- >0;){if(a=bt(o,l,t),a===c)return n[i]=o,n[s]=l,e(n);if(a>0)o=Math.floor(o/a)*a,l=Math.ceil(l/a)*a;else if(a<0)o=Math.ceil(o*a)/a,l=Math.floor(l*a)/a;else break;c=a}return r},r}function _t(){var r=Gs();return r.copy=function(){return Vs(r,_t())},hs.apply(r,arguments),io(r)}const No=r=>{const{range:e,divisions:t}=r;if(t<=0)throw console.warn("divisions は 0 より大きくなければなりません。"),new Error("divisions must be greater than 0");const n=_t().domain(e).nice().ticks(t),i=r.values[0],s=r.values[1],o=_t().domain([e[0],e[1]]).interpolate(yt).range([i,s]),l=n.map(c=>{const a=o(c);return de(a).formatHex()});return{categories:n,values:l}},ur=["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#8B4513"],so=()=>{const r=Math.floor(Math.random()*ur.length);return ur[r]},oo=r=>{try{r.forEach(e=>{e.style.visible=!0})}catch(e){console.error(e),console.warn("初期化処理に失敗しました。")}return r},ao=Object.assign({"/src/routes/data/entries/raster/imageTile/basemap/ecoris_vege_5.ts":hn,"/src/routes/data/entries/raster/imageTile/basemap/ecoris_vege_6.ts":pn,"/src/routes/data/entries/raster/imageTile/basemap/gbank_seamless.ts":gn,"/src/routes/data/entries/raster/imageTile/basemap/gifu_cs_map.ts":_n,"/src/routes/data/entries/raster/imageTile/basemap/gsi_rinya.ts":vn,"/src/routes/data/entries/raster/imageTile/basemap/gsi_rinya_m.ts":kn,"/src/routes/data/entries/raster/imageTile/basemap/gsi_seamlessphoto.ts":Tn,"/src/routes/data/entries/raster/imageTile/basemap/gsi_std.ts":En,"/src/routes/data/entries/raster/imageTile/categorical/ecoris_sugihinoki.ts":In,"/src/routes/data/entries/raster/imageTile/categorical/gifu_slope_map.ts":On,"/src/routes/data/entries/raster/imageTile/categorical/gsi_slopemap.ts":Nn,"/src/routes/data/entries/raster/pmtiles/categorical/gifu_sugi_kansetugai.ts":Un,"/src/routes/data/entries/vector/fgb/point/ensyurin_kikenboku_h25.ts":$n,"/src/routes/data/entries/vector/fgb/point/ensyurin_owl.ts":Ln,"/src/routes/data/entries/vector/fgb/point/fac_phenology_2020.ts":Dn,"/src/routes/data/entries/vector/fgb/point/fac_sisetuannaitou.ts":Vn,"/src/routes/data/entries/vector/mvt/lineString/gsi_road.ts":Gn,"/src/routes/data/entries/vector/mvt/polygon/fr_mesh20m_hyogo.ts":Hn,"/src/routes/data/entries/vector/mvt/polygon/fr_mesh20m_kochi.ts":Wn,"/src/routes/data/entries/vector/mvt/polygon/tree_species_tochigi.ts":Xn,"/src/routes/data/entries/vector/pmtiles/lineString/ensyurin_road2.ts":Qn,"/src/routes/data/entries/vector/pmtiles/point/ensyurin_pole.ts":ti,"/src/routes/data/entries/vector/pmtiles/point/fac_building_point.ts":ni,"/src/routes/data/entries/vector/pmtiles/point/fac_poi.ts":si,"/src/routes/data/entries/vector/pmtiles/point/fac_ziriki_point.ts":ai,"/src/routes/data/entries/vector/pmtiles/polygon/ensyurin_rinhan.ts":ci,"/src/routes/data/entries/vector/pmtiles/polygon/ensyurin_siken.ts":fi,"/src/routes/data/entries/vector/pmtiles/polygon/mino_geology.ts":hi}),fr=Object.values(ao).map(r=>r.default).sort((r,e)=>r.metaData.name.localeCompare(e.metaData.name,"ja")),jo=(()=>{const e=fr.map(t=>t.id).filter((t,n,i)=>i.indexOf(t)!==n);return e.length>0&&console.warn("idが重複してます。:",e),oo(fr)})(),Uo=(r,e,t,n=so())=>{const i=pi(r),s={name:t,description:"ユーザーがアップロードしたカスタムデータ",attribution:"カスタムデータ",location:"不明",maxZoom:22,bounds:i||void 0};let o;if(e==="Point")o=$t;else if(e==="LineString")o=cn;else if(e==="Polygon")o=un;else if(e==="Label"){o=$t;return}else{console.error("不明なジオメトリタイプです。");return}if(!o){console.error("スタイルが見つかりませんでした。");return}o.colors={key:"単色",show:!0,expressions:[{type:"single",key:"単色",name:"単色",mapping:{value:n}}]};const l=yi(r);o.labels=fn(l);const c="geojson_"+crypto.randomUUID();return fe.set(c,r),{id:c,type:"vector",format:{type:"geojson",geometryType:e,url:""},metaData:s,interaction:{clickable:!0},properties:{keys:l,titles:[{conditions:[],template:"カスタムデータ"}]},style:o}},zo=E([]),$o=E([]),Ro=E([]),Lo=E(!1),Co=E("view"),Do=E(!1),Bo=E(!1),Vo=E(!1),Zo=E(!1),Go=E(null),qo=E(!1),Ho=E(!1),Ko=E(!1),Wo=E(!1),Yo=E(!1),Xo=E(""),Jo=r=>{const e={timestamp:Date.now()};localStorage.setItem(r,JSON.stringify(e))},lo=r=>{const e=localStorage.getItem(r);if(!e)return!0;const{timestamp:t}=JSON.parse(e);return Date.now()-t>=24*60*60*1e3},Qo=r=>!!lo(r),ea=()=>window.innerWidth>ln,ta=(r,e)=>{let t;if(e==="color"?t="bxs:color-fill":e==="number"?t="lsicon:number-filled":t="bxs:color-fill",!r)return t;switch(r){case"match":return"material-symbols:category-rounded";case"step":return"subway:step-1";case"linear":return"mdi:graph-bell-curve-cumulative";default:return t}};export{q as $,Xo as A,Wt as B,_o as C,Lo as D,Zo as E,mr as F,fe as G,Eo as H,xo as I,Po as J,ta as K,es as L,vo as M,Ao as N,Uo as O,Yo as P,Oo as Q,zo as R,go as S,wo as T,ko as U,$o as V,Mo as W,Io as X,mo as Y,Jr as Z,be as _,bo as a,Ho as a0,Wo as b,Qo as c,yo as d,rn as e,So as f,kr as g,Fo as h,ea as i,jo as j,tn as k,qo as l,Ko as m,Jo as n,rs as o,Do as p,To as q,po as r,Le as s,pi as t,Ro as u,Bo as v,Co as w,Vo as x,Go as y,No as z};
