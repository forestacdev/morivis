import{w as u}from"./BWjmW4OD.js";import{s as d}from"./Bml5LZyM.js";class m extends Error{constructor(t="The operation was aborted"){super(t),this.name="AbortError"}}function l(e,{signal:t}={}){return new Promise((o,c)=>{const n=()=>{c(new m)},a=()=>{clearTimeout(i),n()};if(t!=null&&t.aborted)return n();const i=setTimeout(()=>{t==null||t.removeEventListener("abort",a),o()},e);t==null||t.addEventListener("abort",a,{once:!0})})}const f=u(null),s=(e,t,o=!1)=>{f.set({message:e,type:t,persistent:o})},p=()=>window.matchMedia("(display-mode: standalone)").matches,w=()=>{const e=navigator.userAgent;return/iPad|iPhone|iPod/.test(e)&&/Safari/.test(e)&&!/CriOS|FxiOS|OPiOS|mercury/.test(e)},h=()=>/Android/.test(navigator.userAgent);let r=null;const S=e=>{r=e},P=()=>{d.set(!0)},E=()=>{if(p()){s("すでにPWAとしてインストールされています。","info");return}if(r&&h()){r.prompt(),r.userChoice.then(e=>{e.outcome==="accepted"&&s("アプリがホーム画面に追加されました。","success"),r=null});return}if(w()){P();return}s("このブラウザではPWAの自動インストールに対応していません。ブラウザの設定から「ホーム画面に追加」を選択してください。","info")};export{s as a,p as c,l as d,f as n,E as p,S as s};
